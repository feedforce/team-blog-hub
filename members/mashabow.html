<!DOCTYPE html><html><head><meta name="viewport" content="width=device-width"/><meta charSet="utf-8"/><link rel="icon shortcut" type="image/png" href="https://engineers.feedforce.jp/logo.png"/><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Inter:wght@400;700&amp;display=swap"/><title>mashabow | Feedforce Engineers&#x27; Blogs</title><meta property="og:title" content="mashabow"/><meta property="og:url" content="https://engineers.feedforce.jp/members/mashabow"/><meta name="twitter:card" content="summary_large_image"/><meta property="og:site" content="Feedforce Engineers&#x27; Blogs"/><meta property="og:image" content="https://engineers.feedforce.jp/og.png"/><link rel="canonical" href="https://engineers.feedforce.jp/members/mashabow"/><link rel="alternate" type="application/rss+xml" title="Feedforce Engineers&#x27; Blogs" href="https://engineers.feedforce.jp/rss.xml"/><link rel="alternate" type="application/atom+xml" title="Feedforce Engineers&#x27; Blogs" href="https://engineers.feedforce.jp/atom.xml"/><link rel="preload" href="/_next/static/css/d7faf1fdf25fe7d3262e.css" as="style"/><link rel="stylesheet" href="/_next/static/css/d7faf1fdf25fe7d3262e.css" data-n-g=""/><noscript data-n-css="true"></noscript><link rel="preload" href="/_next/static/chunks/main-8a83f0fd99327c4684a8.js" as="script"/><link rel="preload" href="/_next/static/chunks/webpack-e067438c4cf4ef2ef178.js" as="script"/><link rel="preload" href="/_next/static/chunks/framework.1daf1ec1ecf144ee9147.js" as="script"/><link rel="preload" href="/_next/static/chunks/commons.9e003f150a446b53bdd9.js" as="script"/><link rel="preload" href="/_next/static/chunks/pages/_app-99db904e083fc7f74e35.js" as="script"/><link rel="preload" href="/_next/static/chunks/588505f8033a39c9ef82bc46b1145ac9fd1db500.ae3e4b7c37e822ff0f91.js" as="script"/><link rel="preload" href="/_next/static/chunks/pages/members/%5Bname%5D-42a7756adc6c0800b4dc.js" as="script"/></head><body><div id="__next"><header class="site-header"><div class="content-wrapper"><div class="site-header__inner"><a class="site-header__logo-link" href="/"><img src="https://engineers.feedforce.jp/logo.svg" alt="Feedforce Engineers&#x27; Blogs" class="site-header__logo-img"/></a><div class="site-header__links"><a href="https://feedforcegroup.jp" class="site-header__link">Company</a><a href="https://github.com/feedforce" class="site-header__link">GitHub</a><a href="https://engineers.recruit.feedforce.jp" class="site-header__link">Recruit</a></div></div></div></header><section class="member"><div class="content-wrapper"><header class="member-header"><div class="member-header__avatar"><img src="https://www.gravatar.com/avatar/6afbe110d33ef7e859fb8649b86bae55?size=256" alt="mashabow" width="100" height="100" class="member-header__avatar-img"/></div><h1 class="member-header__name">mashabow</h1><p class="member-header__bio">フロントエンドエンジニア。文字が好き。</p><div class="member-header__links"><a href="https://twitter.com/mashabow" class="member-header__link"><img src="https://engineers.feedforce.jp/icons/twitter.svg" alt="Twitterのユーザー@mashabow" width="22" height="22"/></a><a href="https://github.com/mashabow" class="member-header__link"><img src="https://engineers.feedforce.jp/icons/github.svg" alt="GitHubのユーザー@mashabow" width="22" height="22"/></a><a href="https://shiromoji.hatenablog.jp" class="member-header__link"><img src="https://engineers.feedforce.jp/icons/link.svg" alt="ウェブサイトのリンク" width="22" height="22"/></a></div></header><div class="member-posts-container"><div class="post-list"><article class="post-link"><a class="post-link__author" href="/members/mashabow"><img src="https://www.gravatar.com/avatar/6afbe110d33ef7e859fb8649b86bae55?size=256" class="post-link__author-img" width="35" height="35"/><div class="post-link__author-name"><div class="post-link__author-name">mashabow</div><time dateTime="2022-01-16T14:50:51.000Z" class="post-link__date">3 months ago</time></div></a><a href="https://shiromoji.hatenablog.jp/entry/2022/01/16/235051" class="post-link__main-link"><h2 class="post-link__title">LINE絵文字概観</h2><div class="post-link__site"><img src="https://www.google.com/s2/favicons?domain=shiromoji.hatenablog.jp" width="14" height="14" class="post-link__site-favicon"/>shiromoji.hatenablog.jp</div></a></article><article class="post-link"><a class="post-link__author" href="/members/mashabow"><img src="https://www.gravatar.com/avatar/6afbe110d33ef7e859fb8649b86bae55?size=256" class="post-link__author-img" width="35" height="35"/><div class="post-link__author-name"><div class="post-link__author-name">mashabow</div><time dateTime="2021-11-07T23:20:54.000Z" class="post-link__date">5 months ago</time></div></a><a href="https://rewired.cloud/shopify-app-navigation-menu/" class="post-link__main-link"><h2 class="post-link__title">Shopifyの埋め込みアプリにメニューをつける方法</h2><div class="post-link__site"><img src="https://www.google.com/s2/favicons?domain=rewired.cloud" width="14" height="14" class="post-link__site-favicon"/>rewired.cloud</div></a></article><article class="post-link"><a class="post-link__author" href="/members/mashabow"><img src="https://www.gravatar.com/avatar/6afbe110d33ef7e859fb8649b86bae55?size=256" class="post-link__author-img" width="35" height="35"/><div class="post-link__author-name"><div class="post-link__author-name">mashabow</div><time dateTime="2021-10-25T03:00:00.000Z" class="post-link__date">5 months ago</time></div></a><a href="https://developer.feedforce.jp/entry/2021/10/25/120000" class="post-link__main-link"><h2 class="post-link__title">OAuth の state パラメータに JWT を使ってステートレスにする</h2><div class="post-link__site"><img src="https://www.google.com/s2/favicons?domain=developer.feedforce.jp" width="14" height="14" class="post-link__site-favicon"/>developer.feedforce.jp</div></a></article><article class="post-link"><a class="post-link__author" href="/members/mashabow"><img src="https://www.gravatar.com/avatar/6afbe110d33ef7e859fb8649b86bae55?size=256" class="post-link__author-img" width="35" height="35"/><div class="post-link__author-name"><div class="post-link__author-name">mashabow</div><time dateTime="2021-10-01T01:05:52.000Z" class="post-link__date">6 months ago</time></div></a><a href="https://rewired.cloud/how-to-add-days-to-date-shopify/" class="post-link__main-link"><h2 class="post-link__title">【Shopify】Liquid 上で「現在の日付から◯日後」を表現する方法</h2><div class="post-link__site"><img src="https://www.google.com/s2/favicons?domain=rewired.cloud" width="14" height="14" class="post-link__site-favicon"/>rewired.cloud</div></a></article><article class="post-link"><a class="post-link__author" href="/members/mashabow"><img src="https://www.gravatar.com/avatar/6afbe110d33ef7e859fb8649b86bae55?size=256" class="post-link__author-img" width="35" height="35"/><div class="post-link__author-name"><div class="post-link__author-name">mashabow</div><time dateTime="2021-09-08T06:23:36.000Z" class="post-link__date">7 months ago</time></div></a><a href="https://rewired.cloud/how-shopify-handle-the-customer-when-checkout-as-a-guest/" class="post-link__main-link"><h2 class="post-link__title">ゲスト購入時、Shopify は customer をどう扱っているのか</h2><div class="post-link__site"><img src="https://www.google.com/s2/favicons?domain=rewired.cloud" width="14" height="14" class="post-link__site-favicon"/>rewired.cloud</div></a></article><article class="post-link"><a class="post-link__author" href="/members/mashabow"><img src="https://www.gravatar.com/avatar/6afbe110d33ef7e859fb8649b86bae55?size=256" class="post-link__author-img" width="35" height="35"/><div class="post-link__author-name"><div class="post-link__author-name">mashabow</div><time dateTime="2021-04-28T02:00:00.000Z" class="post-link__date">a year ago</time></div></a><a href="https://developer.feedforce.jp/entry/2021/04/28/110000" class="post-link__main-link"><h2 class="post-link__title">ESP8266 で温湿度を測って、AWS IoT Core + Amplify でグラフにしてみる</h2><div class="post-link__site"><img src="https://www.google.com/s2/favicons?domain=developer.feedforce.jp" width="14" height="14" class="post-link__site-favicon"/>developer.feedforce.jp</div></a></article><article class="post-link"><a class="post-link__author" href="/members/mashabow"><img src="https://www.gravatar.com/avatar/6afbe110d33ef7e859fb8649b86bae55?size=256" class="post-link__author-img" width="35" height="35"/><div class="post-link__author-name"><div class="post-link__author-name">mashabow</div><time dateTime="2020-12-08T03:00:00.000Z" class="post-link__date">a year ago</time></div></a><a href="https://developer.feedforce.jp/entry/2020/12/08/120000" class="post-link__main-link"><h2 class="post-link__title">Shopify 埋め込みアプリのフォームを @shopify/react-form で作る</h2><div class="post-link__site"><img src="https://www.google.com/s2/favicons?domain=developer.feedforce.jp" width="14" height="14" class="post-link__site-favicon"/>developer.feedforce.jp</div></a></article><article class="post-link"><a class="post-link__author" href="/members/mashabow"><img src="https://www.gravatar.com/avatar/6afbe110d33ef7e859fb8649b86bae55?size=256" class="post-link__author-img" width="35" height="35"/><div class="post-link__author-name"><div class="post-link__author-name">mashabow</div><time dateTime="2020-09-14T12:30:00.000Z" class="post-link__date">2 years ago</time></div></a><a href="https://shiromoji.hatenablog.jp/entry/2020/09/14/213000" class="post-link__main-link"><h2 class="post-link__title">題字ペタペタができるまで</h2><div class="post-link__site"><img src="https://www.google.com/s2/favicons?domain=shiromoji.hatenablog.jp" width="14" height="14" class="post-link__site-favicon"/>shiromoji.hatenablog.jp</div></a></article><article class="post-link"><a class="post-link__author" href="/members/mashabow"><img src="https://www.gravatar.com/avatar/6afbe110d33ef7e859fb8649b86bae55?size=256" class="post-link__author-img" width="35" height="35"/><div class="post-link__author-name"><div class="post-link__author-name">mashabow</div><time dateTime="2019-10-15T13:57:20.000Z" class="post-link__date">2 years ago</time></div></a><a href="https://shiromoji.hatenablog.jp/entry/2019/10/15/225720" class="post-link__main-link"><h2 class="post-link__title">ブラウザからローカルフォントにアクセスする：Font Enumeration API と Font Table Access API</h2><div class="post-link__site"><img src="https://www.google.com/s2/favicons?domain=shiromoji.hatenablog.jp" width="14" height="14" class="post-link__site-favicon"/>shiromoji.hatenablog.jp</div></a></article><article class="post-link"><a class="post-link__author" href="/members/mashabow"><img src="https://www.gravatar.com/avatar/6afbe110d33ef7e859fb8649b86bae55?size=256" class="post-link__author-img" width="35" height="35"/><div class="post-link__author-name"><div class="post-link__author-name">mashabow</div><time dateTime="2019-05-17T15:52:32.000Z" class="post-link__date">3 years ago</time></div></a><a href="https://shiromoji.hatenablog.jp/entry/2019/05/18/005232" class="post-link__main-link"><h2 class="post-link__title">ベジエ曲線のなめらかさについて社内勉強会で語った</h2><div class="post-link__site"><img src="https://www.google.com/s2/favicons?domain=shiromoji.hatenablog.jp" width="14" height="14" class="post-link__site-favicon"/>shiromoji.hatenablog.jp</div></a></article><article class="post-link"><a class="post-link__author" href="/members/mashabow"><img src="https://www.gravatar.com/avatar/6afbe110d33ef7e859fb8649b86bae55?size=256" class="post-link__author-img" width="35" height="35"/><div class="post-link__author-name"><div class="post-link__author-name">mashabow</div><time dateTime="2019-03-14T16:45:18.000Z" class="post-link__date">3 years ago</time></div></a><a href="https://shiromoji.hatenablog.jp/entry/2019/03/15/014518" class="post-link__main-link"><h2 class="post-link__title">『[改訂新版] プログラマのための文字コード技術入門』を読んだ</h2><div class="post-link__site"><img src="https://www.google.com/s2/favicons?domain=shiromoji.hatenablog.jp" width="14" height="14" class="post-link__site-favicon"/>shiromoji.hatenablog.jp</div></a></article><article class="post-link"><a class="post-link__author" href="/members/mashabow"><img src="https://www.gravatar.com/avatar/6afbe110d33ef7e859fb8649b86bae55?size=256" class="post-link__author-img" width="35" height="35"/><div class="post-link__author-name"><div class="post-link__author-name">mashabow</div><time dateTime="2018-12-23T14:59:00.000Z" class="post-link__date">3 years ago</time></div></a><a href="https://shiromoji.hatenablog.jp/entry/2018/12/23/235900" class="post-link__main-link"><h2 class="post-link__title">type の話</h2><div class="post-link__site"><img src="https://www.google.com/s2/favicons?domain=shiromoji.hatenablog.jp" width="14" height="14" class="post-link__site-favicon"/>shiromoji.hatenablog.jp</div></a></article><article class="post-link"><a class="post-link__author" href="/members/mashabow"><img src="https://www.gravatar.com/avatar/6afbe110d33ef7e859fb8649b86bae55?size=256" class="post-link__author-img" width="35" height="35"/><div class="post-link__author-name"><div class="post-link__author-name">mashabow</div><time dateTime="2018-08-12T14:58:03.000Z" class="post-link__date">4 years ago</time></div></a><a href="https://shiromoji.hatenablog.jp/entry/2018/08/12/235803" class="post-link__main-link"><h2 class="post-link__title">フォントまわりのツールの探し方</h2><div class="post-link__site"><img src="https://www.google.com/s2/favicons?domain=shiromoji.hatenablog.jp" width="14" height="14" class="post-link__site-favicon"/>shiromoji.hatenablog.jp</div></a></article><article class="post-link"><a class="post-link__author" href="/members/mashabow"><img src="https://www.gravatar.com/avatar/6afbe110d33ef7e859fb8649b86bae55?size=256" class="post-link__author-img" width="35" height="35"/><div class="post-link__author-name"><div class="post-link__author-name">mashabow</div><time dateTime="2018-07-10T15:25:04.000Z" class="post-link__date">4 years ago</time></div></a><a href="https://shiromoji.hatenablog.jp/entry/2018/07/11/002504" class="post-link__main-link"><h2 class="post-link__title">タイププロジェクト株式会社を退職しました</h2><div class="post-link__site"><img src="https://www.google.com/s2/favicons?domain=shiromoji.hatenablog.jp" width="14" height="14" class="post-link__site-favicon"/>shiromoji.hatenablog.jp</div></a></article><article class="post-link"><a class="post-link__author" href="/members/mashabow"><img src="https://www.gravatar.com/avatar/6afbe110d33ef7e859fb8649b86bae55?size=256" class="post-link__author-img" width="35" height="35"/><div class="post-link__author-name"><div class="post-link__author-name">mashabow</div><time dateTime="2018-05-16T14:50:48.000Z" class="post-link__date">4 years ago</time></div></a><a href="https://shiromoji.hatenablog.jp/entry/2018/05/16/235048" class="post-link__main-link"><h2 class="post-link__title">Python パッケージとして再構成された AFDKO 2.7 がリリース</h2><div class="post-link__site"><img src="https://www.google.com/s2/favicons?domain=shiromoji.hatenablog.jp" width="14" height="14" class="post-link__site-favicon"/>shiromoji.hatenablog.jp</div></a></article><article class="post-link"><a class="post-link__author" href="/members/mashabow"><img src="https://www.gravatar.com/avatar/6afbe110d33ef7e859fb8649b86bae55?size=256" class="post-link__author-img" width="35" height="35"/><div class="post-link__author-name"><div class="post-link__author-name">mashabow</div><time dateTime="2017-11-26T13:19:02.000Z" class="post-link__date">4 years ago</time></div></a><a href="https://shiromoji.hatenablog.jp/entry/2017/11/26/221902" class="post-link__main-link"><h2 class="post-link__title">fontTools のペンを使ってグリフのアウトラインを取得する</h2><div class="post-link__site"><img src="https://www.google.com/s2/favicons?domain=shiromoji.hatenablog.jp" width="14" height="14" class="post-link__site-favicon"/>shiromoji.hatenablog.jp</div></a></article><article class="post-link"><a class="post-link__author" href="/members/mashabow"><img src="https://www.gravatar.com/avatar/6afbe110d33ef7e859fb8649b86bae55?size=256" class="post-link__author-img" width="35" height="35"/><div class="post-link__author-name"><div class="post-link__author-name">mashabow</div><time dateTime="2017-01-11T14:29:00.000Z" class="post-link__date">5 years ago</time></div></a><a href="https://shiromoji.hatenablog.jp/entry/2017/01/11/232900" class="post-link__main-link"><h2 class="post-link__title">TTXによるフォントのチラ見をちょっといい感じにする設定</h2><div class="post-link__site"><img src="https://www.google.com/s2/favicons?domain=shiromoji.hatenablog.jp" width="14" height="14" class="post-link__site-favicon"/>shiromoji.hatenablog.jp</div></a></article><article class="post-link"><a class="post-link__author" href="/members/mashabow"><img src="https://www.gravatar.com/avatar/6afbe110d33ef7e859fb8649b86bae55?size=256" class="post-link__author-img" width="35" height="35"/><div class="post-link__author-name"><div class="post-link__author-name">mashabow</div><time dateTime="2016-06-20T15:35:29.000Z" class="post-link__date">6 years ago</time></div></a><a href="https://shiromoji.hatenablog.jp/entry/2016/06/21/003529" class="post-link__main-link"><h2 class="post-link__title">OpenType の仕様策定の議論をのぞくには</h2><div class="post-link__site"><img src="https://www.google.com/s2/favicons?domain=shiromoji.hatenablog.jp" width="14" height="14" class="post-link__site-favicon"/>shiromoji.hatenablog.jp</div></a></article><article class="post-link"><a class="post-link__author" href="/members/mashabow"><img src="https://www.gravatar.com/avatar/6afbe110d33ef7e859fb8649b86bae55?size=256" class="post-link__author-img" width="35" height="35"/><div class="post-link__author-name"><div class="post-link__author-name">mashabow</div><time dateTime="2015-12-25T14:51:58.000Z" class="post-link__date">6 years ago</time></div></a><a href="https://shiromoji.hatenablog.jp/entry/2015/12/25/235158" class="post-link__main-link"><h2 class="post-link__title">二号明朝活字書体見本（明治26年）</h2><div class="post-link__site"><img src="https://www.google.com/s2/favicons?domain=shiromoji.hatenablog.jp" width="14" height="14" class="post-link__site-favicon"/>shiromoji.hatenablog.jp</div></a></article><article class="post-link"><a class="post-link__author" href="/members/mashabow"><img src="https://www.gravatar.com/avatar/6afbe110d33ef7e859fb8649b86bae55?size=256" class="post-link__author-img" width="35" height="35"/><div class="post-link__author-name"><div class="post-link__author-name">mashabow</div><time dateTime="2015-11-28T14:56:13.000Z" class="post-link__date">6 years ago</time></div></a><a href="https://shiromoji.hatenablog.jp/entry/2015/11/28/235613" class="post-link__main-link"><h2 class="post-link__title">同型類字集 明朝体</h2><div class="post-link__site"><img src="https://www.google.com/s2/favicons?domain=shiromoji.hatenablog.jp" width="14" height="14" class="post-link__site-favicon"/>shiromoji.hatenablog.jp</div></a></article><article class="post-link"><a class="post-link__author" href="/members/mashabow"><img src="https://www.gravatar.com/avatar/6afbe110d33ef7e859fb8649b86bae55?size=256" class="post-link__author-img" width="35" height="35"/><div class="post-link__author-name"><div class="post-link__author-name">mashabow</div><time dateTime="2015-11-15T15:38:31.000Z" class="post-link__date">6 years ago</time></div></a><a href="https://shiromoji.hatenablog.jp/entry/2015/11/16/003831" class="post-link__main-link"><h2 class="post-link__title">同型類字集 等線体</h2><div class="post-link__site"><img src="https://www.google.com/s2/favicons?domain=shiromoji.hatenablog.jp" width="14" height="14" class="post-link__site-favicon"/>shiromoji.hatenablog.jp</div></a></article><article class="post-link"><a class="post-link__author" href="/members/mashabow"><img src="https://www.gravatar.com/avatar/6afbe110d33ef7e859fb8649b86bae55?size=256" class="post-link__author-img" width="35" height="35"/><div class="post-link__author-name"><div class="post-link__author-name">mashabow</div><time dateTime="2015-07-19T17:20:09.000Z" class="post-link__date">7 years ago</time></div></a><a href="https://shiromoji.hatenablog.jp/entry/2015/07/20/022009" class="post-link__main-link"><h2 class="post-link__title">はてなブログに引っ越してきました</h2><div class="post-link__site"><img src="https://www.google.com/s2/favicons?domain=shiromoji.hatenablog.jp" width="14" height="14" class="post-link__site-favicon"/>shiromoji.hatenablog.jp</div></a></article><article class="post-link"><a class="post-link__author" href="/members/mashabow"><img src="https://www.gravatar.com/avatar/6afbe110d33ef7e859fb8649b86bae55?size=256" class="post-link__author-img" width="35" height="35"/><div class="post-link__author-name"><div class="post-link__author-name">mashabow</div><time dateTime="2015-04-18T15:19:33.000Z" class="post-link__date">7 years ago</time></div></a><a href="https://shiromoji.hatenablog.jp/entry/20150419/1429456773" class="post-link__main-link"><h2 class="post-link__title">タイププロジェクト株式会社に入社しました</h2><div class="post-link__site"><img src="https://www.google.com/s2/favicons?domain=shiromoji.hatenablog.jp" width="14" height="14" class="post-link__site-favicon"/>shiromoji.hatenablog.jp</div></a></article><article class="post-link"><a class="post-link__author" href="/members/mashabow"><img src="https://www.gravatar.com/avatar/6afbe110d33ef7e859fb8649b86bae55?size=256" class="post-link__author-img" width="35" height="35"/><div class="post-link__author-name"><div class="post-link__author-name">mashabow</div><time dateTime="2013-07-27T06:48:37.000Z" class="post-link__date">9 years ago</time></div></a><a href="https://shiromoji.hatenablog.jp/entry/20130727/1374994117" class="post-link__main-link"><h2 class="post-link__title">官報に使われた印刷局の康煕字典活字</h2><div class="post-link__site"><img src="https://www.google.com/s2/favicons?domain=shiromoji.hatenablog.jp" width="14" height="14" class="post-link__site-favicon"/>shiromoji.hatenablog.jp</div></a></article><article class="post-link"><a class="post-link__author" href="/members/mashabow"><img src="https://www.gravatar.com/avatar/6afbe110d33ef7e859fb8649b86bae55?size=256" class="post-link__author-img" width="35" height="35"/><div class="post-link__author-name"><div class="post-link__author-name">mashabow</div><time dateTime="2013-05-02T13:20:32.000Z" class="post-link__date">9 years ago</time></div></a><a href="https://shiromoji.hatenablog.jp/entry/20130502/1367500832" class="post-link__main-link"><h2 class="post-link__title">「TTXによるフォントのぞき基礎」の資料【5/4更新：スライド公開】</h2><div class="post-link__site"><img src="https://www.google.com/s2/favicons?domain=shiromoji.hatenablog.jp" width="14" height="14" class="post-link__site-favicon"/>shiromoji.hatenablog.jp</div></a></article><article class="post-link"><a class="post-link__author" href="/members/mashabow"><img src="https://www.gravatar.com/avatar/6afbe110d33ef7e859fb8649b86bae55?size=256" class="post-link__author-img" width="35" height="35"/><div class="post-link__author-name"><div class="post-link__author-name">mashabow</div><time dateTime="2013-04-27T07:12:20.000Z" class="post-link__date">9 years ago</time></div></a><a href="https://shiromoji.hatenablog.jp/entry/20130427/1367046740" class="post-link__main-link"><h2 class="post-link__title">TTXのインストール方法</h2><div class="post-link__site"><img src="https://www.google.com/s2/favicons?domain=shiromoji.hatenablog.jp" width="14" height="14" class="post-link__site-favicon"/>shiromoji.hatenablog.jp</div></a></article><article class="post-link"><a class="post-link__author" href="/members/mashabow"><img src="https://www.gravatar.com/avatar/6afbe110d33ef7e859fb8649b86bae55?size=256" class="post-link__author-img" width="35" height="35"/><div class="post-link__author-name"><div class="post-link__author-name">mashabow</div><time dateTime="2013-04-26T14:30:49.000Z" class="post-link__date">9 years ago</time></div></a><a href="https://shiromoji.hatenablog.jp/entry/20130426/1366986649" class="post-link__main-link"><h2 class="post-link__title">5月3日にフォント関係の勉強会やります</h2><div class="post-link__site"><img src="https://www.google.com/s2/favicons?domain=shiromoji.hatenablog.jp" width="14" height="14" class="post-link__site-favicon"/>shiromoji.hatenablog.jp</div></a></article><article class="post-link"><a class="post-link__author" href="/members/mashabow"><img src="https://www.gravatar.com/avatar/6afbe110d33ef7e859fb8649b86bae55?size=256" class="post-link__author-img" width="35" height="35"/><div class="post-link__author-name"><div class="post-link__author-name">mashabow</div><time dateTime="2013-03-17T15:59:43.000Z" class="post-link__date">9 years ago</time></div></a><a href="https://shiromoji.hatenablog.jp/entry/20130318/1363622383" class="post-link__main-link"><h2 class="post-link__title"> PingMag復刊らしいのでアーカイブから文字関係の記事を10本ほど</h2><div class="post-link__site"><img src="https://www.google.com/s2/favicons?domain=shiromoji.hatenablog.jp" width="14" height="14" class="post-link__site-favicon"/>shiromoji.hatenablog.jp</div></a></article><article class="post-link"><a class="post-link__author" href="/members/mashabow"><img src="https://www.gravatar.com/avatar/6afbe110d33ef7e859fb8649b86bae55?size=256" class="post-link__author-img" width="35" height="35"/><div class="post-link__author-name"><div class="post-link__author-name">mashabow</div><time dateTime="2013-03-04T17:18:25.000Z" class="post-link__date">9 years ago</time></div></a><a href="https://shiromoji.hatenablog.jp/entry/20130305/1362503905" class="post-link__main-link"><h2 class="post-link__title">「Windows 8 で変わる文字 - 異体字と Unicode IVS」雑感</h2><div class="post-link__site"><img src="https://www.google.com/s2/favicons?domain=shiromoji.hatenablog.jp" width="14" height="14" class="post-link__site-favicon"/>shiromoji.hatenablog.jp</div></a></article><article class="post-link"><a class="post-link__author" href="/members/mashabow"><img src="https://www.gravatar.com/avatar/6afbe110d33ef7e859fb8649b86bae55?size=256" class="post-link__author-img" width="35" height="35"/><div class="post-link__author-name"><div class="post-link__author-name">mashabow</div><time dateTime="2013-01-12T11:36:30.000Z" class="post-link__date">9 years ago</time></div></a><a href="https://shiromoji.hatenablog.jp/entry/20130112/1357990590" class="post-link__main-link"><h2 class="post-link__title">フォントファイルをFontForgeのアイコンにドラッグ&amp;ドロップして開きたい</h2><div class="post-link__site"><img src="https://www.google.com/s2/favicons?domain=shiromoji.hatenablog.jp" width="14" height="14" class="post-link__site-favicon"/>shiromoji.hatenablog.jp</div></a></article><article class="post-link"><a class="post-link__author" href="/members/mashabow"><img src="https://www.gravatar.com/avatar/6afbe110d33ef7e859fb8649b86bae55?size=256" class="post-link__author-img" width="35" height="35"/><div class="post-link__author-name"><div class="post-link__author-name">mashabow</div><time dateTime="2012-12-17T18:30:44.000Z" class="post-link__date">9 years ago</time></div></a><a href="https://shiromoji.hatenablog.jp/entry/20121218/1355855444" class="post-link__main-link"><h2 class="post-link__title">米O&#x27;Reillyで買ったPDF本をkobo gloでも読めるように加工する</h2><div class="post-link__site"><img src="https://www.google.com/s2/favicons?domain=shiromoji.hatenablog.jp" width="14" height="14" class="post-link__site-favicon"/>shiromoji.hatenablog.jp</div></a></article><article class="post-link"><a class="post-link__author" href="/members/mashabow"><img src="https://www.gravatar.com/avatar/6afbe110d33ef7e859fb8649b86bae55?size=256" class="post-link__author-img" width="35" height="35"/><div class="post-link__author-name"><div class="post-link__author-name">mashabow</div><time dateTime="2012-11-12T16:39:54.000Z" class="post-link__date">9 years ago</time></div></a><a href="https://shiromoji.hatenablog.jp/entry/20121113/1352824794" class="post-link__main-link"><h2 class="post-link__title">svivs の現状について</h2><div class="post-link__site"><img src="https://www.google.com/s2/favicons?domain=shiromoji.hatenablog.jp" width="14" height="14" class="post-link__site-favicon"/>shiromoji.hatenablog.jp</div></a></article></div><div class="post-list-load"><button class="post-list-load__button">LOAD MORE</button></div></div></div></section><footer class="site-footer"><div class="content-wrapper"><p>© <!-- -->Feedforce Group Inc.</p></div></footer></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"member":{"name":"mashabow","bio":"フロントエンドエンジニア。文字が好き。","avatarSrc":"https://www.gravatar.com/avatar/6afbe110d33ef7e859fb8649b86bae55?size=256","sources":["https://developer.feedforce.jp/rss/author/mashabow","https://rewired.cloud/author/mashabow/feed","https://shiromoji.hatenablog.jp/rss"],"twitterUsername":"mashabow","githubUsername":"mashabow","websiteUrl":"https://shiromoji.hatenablog.jp"},"postItems":[{"title":"LINE絵文字概観","content":"\u003cp\u003eLINEで使える3種類の絵文字について、昨年末の\u003ca href=\"https://developer.feedforce.jp/archive/category/FFTT\"\u003e社内勉強会\u003c/a\u003eでざっくりと解説しました。そのときのスライドを上げておきます。ざっくり概観なので、厳密でない表現や調査が不十分な箇所はありますが、雰囲気はつかめるんじゃないでしょうか。\u003c/p\u003e\n\n\u003ciframe class=\"speakerdeck-iframe\" style=\"border: 0px none; background: rgba(0, 0, 0, 0.1) none repeat scroll 0% 0% padding-box; margin: 0px; padding: 0px; border-radius: 6px; box-shadow: rgba(0, 0, 0, 0.2) 0px 5px 40px; width: 560px; height: 314px;\" src=\"https://speakerdeck.com/player/535cc3eccd204aeca4e9ce68e8175768\" title=\"LINE絵文字概観 / FFTT #465\" allowfullscreen=\"true\" mozallowfullscreen=\"true\" webkitallowfullscreen=\"true\" data-ratio=\"1.78343949044586\" frameborder=\"0\"\u003e\u003c/iframe\u003e\n\n\n\u003ch2\u003e参考ページ\u003c/h2\u003e\n\n\u003cul\u003e\n\u003cli\u003e\u003ca href=\"https://linecorp.com/ja/pr/news/ja/2018/2160\"\u003e【LINE】「デコ文字」に続き、トークがもっと楽しくなる新機能が登場　人気キャラクターが“絵文字”になった「LINE絵文字」を本日より発売開始 | ニュース | LINE株式会社\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"https://linecorp.com/ja/pr/news/ja/2018/2410\"\u003e【LINE Creators Market】LINE、「LINEクリエイターズ絵文字」を2018年11月中に販売開始、絵文字制作に関する申請ガイドラインを本日より公開 | ニュース | LINE株式会社\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"https://linecorp.com/ja/pr/news/ja/2021/3898\"\u003eLINE、メッセージ内で動く「アニメーション絵文字」を発売開始 | ニュース | LINE株式会社\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"https://creator.line.me/ja/guideline/emoji/\"\u003e絵文字 ―ガイドライン - LINE Creators Market\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"https://unicode.org/emoji/charts/emoji-versions.html\"\u003eEmoji Versions, v14.0\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"https://unicode.org/emoji/charts/emoji-counts.html\"\u003eEmoji Counts, v14.0\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"https://developers.line.biz/ja/docs/messaging-api/emoji-list/\"\u003e送信可能なLINE絵文字リスト | LINE Developers\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"https://www.rfc-editor.org/rfc/rfc8259.html#section-8.1\"\u003e8.1. Character Encoding ― RFC 8259: The JavaScript Object Notation (JSON) Data Interchange Format\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"https://www.unicode.org/versions/Unicode14.0.0/ch23.pdf#page=23\"\u003e23.5 Private-Use Characters ― The Unicode Standard Version 14.0\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"https://store.line.me/emojishop/home/creators/ja\"\u003eLINE クリエイターズ絵文字 - 話題の新着絵文字など | LINE STORE\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"https://developers.line.biz/ja/docs/messaging-api/message-types/#text-messages\"\u003eテキストメッセージ ― メッセージタイプ | LINE Developers\u003c/a\u003e（送信側）\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"https://developers.line.biz/ja/reference/messaging-api/#wh-text\"\u003eテキスト ― Messaging APIリファレンス | LINE Developers\u003c/a\u003e（受信側）\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"https://store.line.me/emojishop/product/5bc84438031a6704f8cff722/ja\"\u003eカナヘイのピスケ\u0026amp;うさぎ 絵文字 2 - LINE絵文字 | LINE STORE\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"https://emojipedia.org/shortcodes/\"\u003e⏩ Emoji Shortcodes\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"https://developers.line.biz/ja/news/2021/11/30/line-original-unicode-emojis-will-be-discontinued/\"\u003eニュース：2022年3月31日をもって、Messaging APIの「LINE独自のUnicode絵文字」を廃止します | LINE Developers\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\n","contentSnippet":"LINEで使える3種類の絵文字について、昨年末の社内勉強会でざっくりと解説しました。そのときのスライドを上げておきます。ざっくり概観なので、厳密でない表現や調査が不十分な箇所はありますが、雰囲気はつかめるんじゃないでしょうか。参考ページ【LINE】「デコ文字」に続き、トークがもっと楽しくなる新機能が登場　人気キャラクターが“絵文字”になった「LINE絵文字」を本日より発売開始 | ニュース | LINE株式会社【LINE Creators Market】LINE、「LINEクリエイターズ絵文字」を2018年11月中に販売開始、絵文字制作に関する申請ガイドラインを本日より公開 | ニュース | LINE株式会社LINE、メッセージ内で動く「アニメーション絵文字」を発売開始 | ニュース | LINE株式会社絵文字 ―ガイドライン - LINE Creators MarketEmoji Versions, v14.0Emoji Counts, v14.0送信可能なLINE絵文字リスト | LINE Developers8.1. Character Encoding ― RFC 8259: The JavaScript Object Notation (JSON) Data Interchange Format23.5 Private-Use Characters ― The Unicode Standard Version 14.0LINE クリエイターズ絵文字 - 話題の新着絵文字など | LINE STOREテキストメッセージ ― メッセージタイプ | LINE Developers（送信側）テキスト ― Messaging APIリファレンス | LINE Developers（受信側）カナヘイのピスケ\u0026うさぎ 絵文字 2 - LINE絵文字 | LINE STORE⏩ Emoji Shortcodesニュース：2022年3月31日をもって、Messaging APIの「LINE独自のUnicode絵文字」を廃止します | LINE Developers","link":"https://shiromoji.hatenablog.jp/entry/2022/01/16/235051","isoDate":"2022-01-16T14:50:51.000Z","dateMiliSeconds":1642344651000,"imageUrl":"https://cdn-ak.f.st-hatena.com/images/fotolife/m/mashabow/20220116/20220116235025.png","authorName":"mashabow"},{"title":"Shopifyの埋め込みアプリにメニューをつける方法","content":"\u003cp\u003e\u003cimg src=\"https://rewired.cloud/wp-content/uploads/2021/11/211108_appmenu_TITLE-520x300.png\" class=\"webfeedsFeaturedVisual\" width=\"520\" height=\"300\" /\u003e\u003c/p\u003eこんにちは、mashabow です。LINE で CRM を実現する Shopify アプリ「ソーシャルPLUS」の、フロントエンド開発を担当しています。 アプリに機能が増えてくると、埋め込みアプリ（マーチャントの方に触 ... ","contentSnippet":"こんにちは、mashabow です。LINE で CRM を実現する Shopify アプリ「ソーシャルPLUS」の、フロントエンド開発を担当しています。 アプリに機能が増えてくると、埋め込みアプリ（マーチャントの方に触 ...","link":"https://rewired.cloud/shopify-app-navigation-menu/","isoDate":"2021-11-07T23:20:54.000Z","dateMiliSeconds":1636327254000,"authorName":"mashabow"},{"title":"OAuth の state パラメータに JWT を使ってステートレスにする","content":"\u003cp\u003e\u003ca href=\"https://socialplus.jp/\"\u003eソーシャルPLUS\u003c/a\u003e の \u003ca href=\"http://blog.hatena.ne.jp/mashabow/\" class=\"hatena-id-icon\"\u003e\u003cimg src=\"https://cdn.profile-image.st-hatena.com/users/mashabow/profile.png\" width=\"16\" height=\"16\" alt=\"\" class=\"hatena-id-icon\"\u003eid:mashabow\u003c/a\u003e です。今回は、個人で開発している Slack アプリ \u003ca href=\"https://github.com/mashabow/slack-rota\"\u003eRota\u003c/a\u003e を OAuth に対応させたときに、へーっと思った話の紹介です。\u003c/p\u003e\n\n\u003cp\u003eちなみにこの Rota は、指定した曜日・時間が来るたびに、ローテーションを順次お知らせしてくれる Slack アプリです。\u003c/p\u003e\n\n\u003cp\u003e\u003cspan itemscope itemtype=\"http://schema.org/Photograph\"\u003e\u003cimg src=\"https://cdn-ak.f.st-hatena.com/images/fotolife/m/mashabow/20211025/20211025113857.png\" alt=\"f:id:mashabow:20211025113857p:plain\" width=\"1338\" height=\"242\" loading=\"lazy\" title=\"\" class=\"hatena-fotolife\" itemprop=\"image\"\u003e\u003c/span\u003e\u003c/p\u003e\n\n\u003cp\u003e\u003ciframe src=\"https://hatenablog-parts.com/embed?url=https%3A%2F%2Fgithub.com%2Fmashabow%2Fslack-rota\" title=\"GitHub - mashabow/slack-rota: 日々のローテーションをお知らせする Slack アプリ\" class=\"embed-card embed-webcard\" scrolling=\"no\" frameborder=\"0\" style=\"display: block; width: 100%; height: 155px; max-width: 500px; margin: 10px 0px;\"\u003e\u003c/iframe\u003e\u003ccite class=\"hatena-citation\"\u003e\u003ca href=\"https://github.com/mashabow/slack-rota\"\u003egithub.com\u003c/a\u003e\u003c/cite\u003e\u003c/p\u003e\n\n\u003ch2\u003e経緯\u003c/h2\u003e\n\n\u003cp\u003eこの Slack アプリ Rota は、Slack 公式が出している \u003ca href=\"https://slack.dev/bolt-js/ja-jp/tutorial/getting-started\"\u003eBolt\u003c/a\u003e というフレームワークを使っています。\u003c/p\u003e\n\n\u003cp\u003e\u003ciframe src=\"https://hatenablog-parts.com/embed?url=https%3A%2F%2Fslack.dev%2Fbolt-js%2Fja-jp%2Ftutorial%2Fgetting-started\" title=\"Slack | Bolt for JavaScript\" class=\"embed-card embed-webcard\" scrolling=\"no\" frameborder=\"0\" style=\"display: block; width: 100%; height: 155px; max-width: 500px; margin: 10px 0px;\"\u003e\u003c/iframe\u003e\u003ccite class=\"hatena-citation\"\u003e\u003ca href=\"https://slack.dev/bolt-js/ja-jp/tutorial/getting-started\"\u003eslack.dev\u003c/a\u003e\u003c/cite\u003e\u003c/p\u003e\n\n\u003cp\u003eSlack アプリを任意のワークスペースにインストールしてもらうためには、OAuth に対応させる必要があります。今回は Bolt のおかげで\u003ca href=\"https://github.com/mashabow/slack-rota/issues/43\"\u003e比較的簡単に対応できた\u003c/a\u003eのですが、その中で出てきた \u003ccode\u003estateSecret\u003c/code\u003e というオプションがどう使われるのか、いまいちわかりません。Bolt の\u003ca href=\"https://slack.dev/bolt-js/ja-jp/reference#%E3%83%AC%E3%82%B7%E3%83%BC%E3%83%90%E3%83%BC%E3%82%AA%E3%83%97%E3%82%B7%E3%83%A7%E3%83%B3\"\u003eリファレンス\u003c/a\u003eには\u003c/p\u003e\n\n\u003cblockquote\u003e\u003cp\u003e  CSRF 攻撃を防ぐために OAuth の設定時に渡すことができる、推奨のパラメーター（文字列）。\u003c/p\u003e\u003c/blockquote\u003e\n\n\u003cp\u003eと説明があるので、OAuth の \u003ccode\u003estate\u003c/code\u003e パラメータに関係がありそうですが……。\u003c/p\u003e\n\n\u003cp\u003eというわけで、気になって中身をのぞいてみました。\u003c/p\u003e\n\n\u003ch2\u003e\u003ccode\u003estate\u003c/code\u003e パラメータのおさらい\u003c/h2\u003e\n\n\u003cp\u003eその前に、そもそも OAuth の \u003ccode\u003estate\u003c/code\u003e パラメータって何？という方もいるかもしれません。こちらの記事で非常にわかりやすく図解されているのですが、要は \u003cstrong\u003eCSRF 対策\u003c/strong\u003eのためのものです。\u003c/p\u003e\n\n\u003cp\u003e\u003ciframe src=\"https://hatenablog-parts.com/embed?url=https%3A%2F%2Ftech-lab.sios.jp%2Farchives%2F8492\" title=\"OAuthやOpenID Connectで使われるstateパラメーターについて | SIOS Tech. Lab\" class=\"embed-card embed-webcard\" scrolling=\"no\" frameborder=\"0\" style=\"display: block; width: 100%; height: 155px; max-width: 500px; margin: 10px 0px;\"\u003e\u003c/iframe\u003e\u003ccite class=\"hatena-citation\"\u003e\u003ca href=\"https://tech-lab.sios.jp/archives/8492\"\u003etech-lab.sios.jp\u003c/a\u003e\u003c/cite\u003e\u003c/p\u003e\n\n\u003cp\u003eこの記事に倣って図解すると、Slack アプリの場合はこういう関係ですね。\u003c/p\u003e\n\n\u003cp\u003e\u003cspan itemscope itemtype=\"http://schema.org/Photograph\"\u003e\u003cimg src=\"https://cdn-ak.f.st-hatena.com/images/fotolife/m/mashabow/20211022/20211022222035.png\" alt=\"f:id:mashabow:20211022222035p:plain\" width=\"2000\" height=\"1120\" loading=\"lazy\" title=\"\" class=\"hatena-fotolife\" itemprop=\"image\"\u003e\u003c/span\u003e\u003c/p\u003e\n\n\u003cp\u003e\u003ccode\u003estate\u003c/code\u003e パラメータを使うと 3. の前でチェックが入るため、このような CSRF 攻撃を防ぐことができます。\u003c/p\u003e\n\n\u003cp\u003e\u003cspan itemscope itemtype=\"http://schema.org/Photograph\"\u003e\u003cimg src=\"https://cdn-ak.f.st-hatena.com/images/fotolife/m/mashabow/20211022/20211022222117.png\" alt=\"f:id:mashabow:20211022222117p:plain\" width=\"2000\" height=\"1121\" loading=\"lazy\" title=\"\" class=\"hatena-fotolife\" itemprop=\"image\"\u003e\u003c/span\u003e\u003c/p\u003e\n\n\u003ch2\u003e保存をしない state store…？\u003c/h2\u003e\n\n\u003cp\u003e話を戻して、Bolt の \u003ccode\u003estateSecret\u003c/code\u003e オプションを追いかけてみます。Bolt の OAuth まわりの処理は、\u003ca href=\"https://github.com/slackapi/node-slack-sdk/tree/%40slack/oauth%402.3.0/packages/oauth\"\u003e@slack/oauth\u003c/a\u003e というライブラリで実装されています。@slack/oauth の README を読んでみると、\u003ca href=\"https://github.com/slackapi/node-slack-sdk/blob/%40slack/oauth%402.3.0/packages/oauth/README.md#using-a-custom-state-store\"\u003eUsing a custom state store\u003c/a\u003e に説明がありました。\u003c/p\u003e\n\n\u003cblockquote\u003e\u003cp\u003eA state store handles generating the OAuth \u003ccode\u003estate\u003c/code\u003e parameter in the installation URL for a given set of options, and verifying the \u003ccode\u003estate\u003c/code\u003e in the OAuth callback and returning those same options.\u003c/p\u003e\u003c/blockquote\u003e\n\n\u003cp\u003eふむふむ。ここまでは上で確認したような話ですね。\u003ccode\u003estate\u003c/code\u003e パラメータを生成しておいて、コールバック（認可画面からのリダイレクト）のときにその値が正しいかチェックする。そして、@slack/oauth が \u003cem\u003eoptions\u003c/em\u003e と呼んでいるオブジェクト（Slack ワークスペースの ID やスコープの情報が入る）を返します。このようなインターフェイスを、state store と言っているようです。\u003c/p\u003e\n\n\u003cp\u003e\u003cspan itemscope itemtype=\"http://schema.org/Photograph\"\u003e\u003cimg src=\"https://cdn-ak.f.st-hatena.com/images/fotolife/m/mashabow/20211022/20211022222224.png\" alt=\"f:id:mashabow:20211022222224p:plain\" width=\"2000\" height=\"1120\" loading=\"lazy\" title=\"\" class=\"hatena-fotolife\" itemprop=\"image\"\u003e\u003c/span\u003e\u003c/p\u003e\n\n\u003cp\u003e次に行きます。state store のデフォルトの実装である \u003ccode\u003eClearStateStore\u003c/code\u003eの説明です。\u003c/p\u003e\n\n\u003cblockquote\u003e\u003cp\u003eThe default state store, \u003ccode\u003eClearStateStore\u003c/code\u003e, does not use any storage. Instead, it signs the options (using the \u003ccode\u003estateSecret\u003c/code\u003e) and encodes them along with a signature into \u003ccode\u003estate\u003c/code\u003e. Later during the OAuth callback, it verifies the signature.\u003c/p\u003e\u003c/blockquote\u003e\n\n\u003cp\u003eなんと。state store という名前から「どこかに \u003ccode\u003estate\u003c/code\u003e パラメータと options の組を保存するんだろうな」と思っていたんですが、\u003ccode\u003eClearStateStore\u003c/code\u003e では\u003cstrong\u003eどちらも保存していない\u003c/strong\u003eようです。\u003c/p\u003e\n\n\u003ch2\u003eJWT を使った \u003ccode\u003eClearStateStore\u003c/code\u003e\u003c/h2\u003e\n\n\u003cp\u003eでは、\u003ccode\u003eClearStateStore\u003c/code\u003e の実装を見てみましょう。以下に出てくる \u003ccode\u003esign()\u003c/code\u003e と \u003ccode\u003everify()\u003c/code\u003e は、JWT を扱うための npm ライブラリ \u003ca href=\"https://www.npmjs.com/package/jsonwebtoken\"\u003ejsonwebtoken\u003c/a\u003e の関数です。\u003c/p\u003e\n\n\u003cp\u003e\u003ca href=\"https://github.com/slackapi/node-slack-sdk/blob/%40slack/oauth%402.3.0/packages/oauth/src/index.ts#L17-L36\"\u003enode-slack-sdk/index.ts at @slack/oauth@2.3.0 \u0026middot; slackapi/node-slack-sdk \u0026middot; GitHub\u003c/a\u003e\u003c/p\u003e\n\n\u003cpre class=\"code lang-typescript\" data-lang=\"typescript\" data-unlink\u003e\u003cspan class=\"synStatement\"\u003epublic\u003c/span\u003e \u003cspan class=\"synStatement\"\u003easync\u003c/span\u003e generateStateParam\u003cspan class=\"synStatement\"\u003e(\u003c/span\u003einstallOptions: InstallURLOptions\u003cspan class=\"synStatement\"\u003e,\u003c/span\u003e now: \u003cspan class=\"synSpecial\"\u003eDate\u003c/span\u003e\u003cspan class=\"synStatement\"\u003e)\u003c/span\u003e: \u003cspan class=\"synSpecial\"\u003ePromise\u003c/span\u003e\u003cspan class=\"synStatement\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"synType\"\u003estring\u003c/span\u003e\u003cspan class=\"synStatement\"\u003e\u0026gt;\u003c/span\u003e \u003cspan class=\"synIdentifier\"\u003e{\u003c/span\u003e\n  \u003cspan class=\"synStatement\"\u003ereturn\u003c/span\u003e sign\u003cspan class=\"synStatement\"\u003e(\u003c/span\u003e\u003cspan class=\"synIdentifier\"\u003e{\u003c/span\u003e installOptions\u003cspan class=\"synStatement\"\u003e,\u003c/span\u003e now: now.toJSON\u003cspan class=\"synStatement\"\u003e()\u003c/span\u003e \u003cspan class=\"synIdentifier\"\u003e}\u003c/span\u003e\u003cspan class=\"synStatement\"\u003e,\u003c/span\u003e \u003cspan class=\"synIdentifier\"\u003ethis\u003c/span\u003e.stateSecret\u003cspan class=\"synStatement\"\u003e);\u003c/span\u003e\n\u003cspan class=\"synIdentifier\"\u003e}\u003c/span\u003e\n\u003c/pre\u003e\n\n\n\u003cp\u003e認可画面に遷移する際、\u003ccode\u003egenerateStateParam()\u003c/code\u003e で  \u003ccode\u003estate\u003c/code\u003e パラメータを生成します。ここでは、options （上のコードでは \u003ccode\u003einstallOptions\u003c/code\u003e）と時刻をペイロードとする JWT を生成して、返しています。冒頭で「なにこれ？」と思った \u003cstrong\u003e\u003ccode\u003estateSecret\u003c/code\u003e は、JWT の署名に使う共通鍵\u003c/strong\u003eだったんですね。\u003c/p\u003e\n\n\u003cp\u003e\u003cspan itemscope itemtype=\"http://schema.org/Photograph\"\u003e\u003cimg src=\"https://cdn-ak.f.st-hatena.com/images/fotolife/m/mashabow/20211022/20211022222430.png\" alt=\"f:id:mashabow:20211022222430p:plain\" width=\"2000\" height=\"1120\" loading=\"lazy\" title=\"\" class=\"hatena-fotolife\" itemprop=\"image\"\u003e\u003c/span\u003e\u003c/p\u003e\n\n\u003cpre class=\"code lang-typescript\" data-lang=\"typescript\" data-unlink\u003e\u003cspan class=\"synStatement\"\u003epublic\u003c/span\u003e \u003cspan class=\"synStatement\"\u003easync\u003c/span\u003e verifyStateParam\u003cspan class=\"synStatement\"\u003e(\u003c/span\u003e_now: \u003cspan class=\"synSpecial\"\u003eDate\u003c/span\u003e\u003cspan class=\"synStatement\"\u003e,\u003c/span\u003e state: \u003cspan class=\"synType\"\u003estring\u003c/span\u003e\u003cspan class=\"synStatement\"\u003e)\u003c/span\u003e: \u003cspan class=\"synSpecial\"\u003ePromise\u003c/span\u003e\u003cspan class=\"synStatement\"\u003e\u0026lt;\u003c/span\u003eInstallURLOptions\u003cspan class=\"synStatement\"\u003e\u0026gt;\u003c/span\u003e \u003cspan class=\"synIdentifier\"\u003e{\u003c/span\u003e\n  \u003cspan class=\"synComment\"\u003e// decode the state using the secret\u003c/span\u003e\n  \u003cspan class=\"synType\"\u003econst\u003c/span\u003e decoded: StateObj \u003cspan class=\"synStatement\"\u003e=\u003c/span\u003e verify\u003cspan class=\"synStatement\"\u003e(\u003c/span\u003estate\u003cspan class=\"synStatement\"\u003e,\u003c/span\u003e \u003cspan class=\"synIdentifier\"\u003ethis\u003c/span\u003e.stateSecret\u003cspan class=\"synStatement\"\u003e)\u003c/span\u003e \u003cspan class=\"synStatement\"\u003eas\u003c/span\u003e StateObj\u003cspan class=\"synStatement\"\u003e;\u003c/span\u003e\n\n  \u003cspan class=\"synComment\"\u003e// return installOptions\u003c/span\u003e\n  \u003cspan class=\"synStatement\"\u003ereturn\u003c/span\u003e decoded.installOptions\u003cspan class=\"synStatement\"\u003e;\u003c/span\u003e\n\u003cspan class=\"synIdentifier\"\u003e}\u003c/span\u003e\n\u003c/pre\u003e\n\n\n\u003cp\u003e認可後のリダイレクトでは、\u003ccode\u003everifyStateParam()\u003c/code\u003e で  \u003ccode\u003estate\u003c/code\u003e パラメータを検証します。ここでは、共通鍵 \u003ccode\u003estateSecret\u003c/code\u003e で JWT の署名を検証しています。ペイロードが改竄されていればここでエラーになり、処理が中断されます。検証が通ったら、ペイロードの options を取り出して返します。\u003c/p\u003e\n\n\u003cp\u003e\u003cspan itemscope itemtype=\"http://schema.org/Photograph\"\u003e\u003cimg src=\"https://cdn-ak.f.st-hatena.com/images/fotolife/m/mashabow/20211022/20211022222510.png\" alt=\"f:id:mashabow:20211022222510p:plain\" width=\"2000\" height=\"1120\" loading=\"lazy\" title=\"\" class=\"hatena-fotolife\" itemprop=\"image\"\u003e\u003c/span\u003e\u003c/p\u003e\n\n\u003ch2\u003eCSRF 対策になっていることを確認\u003c/h2\u003e\n\n\u003cp\u003eこの \u003ccode\u003eClearStateStore\u003c/code\u003e で本当に CSRF 攻撃が防げるのか、確認してみましょう。\u003c/p\u003e\n\n\u003cp\u003eまずは通常の攻撃シナリオ。悪い人が自分のワークスペースで認可を行い、リダイレクト URL を取得します（1.）。このリダイレクト URL には、\u003ccode\u003estate\u003c/code\u003e パラメータが含まれています。このリダイレクト URL をそのまま A さんに送りつけ、 A さんに踏ませる（2.）とどうなるでしょうか？\u003c/p\u003e\n\n\u003cp\u003e\u003cspan itemscope itemtype=\"http://schema.org/Photograph\"\u003e\u003cimg src=\"https://cdn-ak.f.st-hatena.com/images/fotolife/m/mashabow/20211022/20211022222531.png\" alt=\"f:id:mashabow:20211022222531p:plain\" width=\"2000\" height=\"1121\" loading=\"lazy\" title=\"\" class=\"hatena-fotolife\" itemprop=\"image\"\u003e\u003c/span\u003e\u003c/p\u003e\n\n\u003cp\u003eSlack アプリの \u003ccode\u003eClearStateStore\u003c/code\u003e は、まず  \u003ccode\u003estate\u003c/code\u003e パラメータの有効性を検証します（3.）。JWT の署名を検証するわけですが、このシナリオでは、悪い人の JWT は何も改竄されていません。したがって、\u003cstrong\u003eJWT は有効\u003c/strong\u003eだと判断され、処理は続行されます。次に、JWT から options を取り出し（4.）、これを使って Slack からアクセストークンを取得します（5.）。Slack からは悪い人のアクセストークンが返ってきますが、Slack アプリは\u003cstrong\u003eそれを悪い人のアクセストークンだとして（正しく）格納\u003c/strong\u003eします（6.）。したがって、A さんには何も影響ありません。\u003c/p\u003e\n\n\u003cp\u003e別のシナリオも検討してみます。先ほどのシナリオで見たように、Slack アプリは JWT から options を取り出し、アクセストークンを取得・格納していました。JWT の中の options を書き換えれば、悪い人のアクセストークンを A さんのものとして格納できないでしょうか？\u003c/p\u003e\n\n\u003cp\u003e\u003cspan itemscope itemtype=\"http://schema.org/Photograph\"\u003e\u003cimg src=\"https://cdn-ak.f.st-hatena.com/images/fotolife/m/mashabow/20211022/20211022222547.png\" alt=\"f:id:mashabow:20211022222547p:plain\" width=\"2000\" height=\"1120\" loading=\"lazy\" title=\"\" class=\"hatena-fotolife\" itemprop=\"image\"\u003e\u003c/span\u003e\u003c/p\u003e\n\n\u003cp\u003eはい、これは JWT の署名検証で引っかかるので、不可能ですね。\u003c/p\u003e\n\n\u003cp\u003e以上のことから、一般的な \u003ccode\u003estate\u003c/code\u003e パラメータの実装と同じく、\u003ccode\u003eClearStateStore\u003c/code\u003e でも CSRF 対策になっていることがわかりました。\u003c/p\u003e\n\n\u003ch2\u003eまとめ\u003c/h2\u003e\n\n\u003cp\u003eというわけで、JWT をうまいこと使うと、\u003ccode\u003estate\u003c/code\u003e パラメータを OAuth クライアントに保存しておく必要がなくなります。通常の実装だと、生成した \u003ccode\u003estate\u003c/code\u003e パラメータを適当な key-value ストアなどに保存しますが、これが不要になるのは楽ですね。ステートレスになるので FaaS との相性もよくなります（とはいえもちろん、取得したアクセストークンはどこかに保存しておく必要があります）。\u003c/p\u003e\n\n\u003cp\u003e今回は Bolt を使って Slack アプリのインストール処理を実装しましたが、OAuth まわりの詳細についてはほとんど意識することなく実現でき、かなり楽ちんで快適でした。よく考えられてますね。\u003c/p\u003e\n\n\u003ch2\u003eおまけ\u003c/h2\u003e\n\n\u003cp\u003eソーシャルPLUS では、現在フロントエンドエンジニア・バックエンドエンジニアを募集中です。Shopify アプリのリリースや LINE 社との業務提携を経て、やりたいことがますます盛りだくさんな状況です。\u003c/p\u003e\n\n\u003cp\u003e\u003ciframe src=\"https://hatenablog-parts.com/embed?url=https%3A%2F%2Fopen.talentio.com%2F1%2Fc%2Ffeedforce%2Frequisitions%2Fdetail%2F21755\" title=\"フロントエンドエンジニア【Shopifyアプリ開発/ID連携サービス/React/TypeScript】 / 株式会社フィードフォース\" class=\"embed-card embed-webcard\" scrolling=\"no\" frameborder=\"0\" style=\"display: block; width: 100%; height: 155px; max-width: 500px; margin: 10px 0px;\"\u003e\u003c/iframe\u003e\u003ccite class=\"hatena-citation\"\u003e\u003ca href=\"https://open.talentio.com/1/c/feedforce/requisitions/detail/21755\"\u003eopen.talentio.com\u003c/a\u003e\u003c/cite\u003e\u003c/p\u003e\n\n\u003cp\u003e\u003ciframe src=\"https://hatenablog-parts.com/embed?url=https%3A%2F%2Fopen.talentio.com%2F1%2Fc%2Ffeedforce%2Frequisitions%2Fdetail%2F21802\" title=\"Railsエンジニア【Shopify App開発/ID連携サービス】 / 株式会社フィードフォース\" class=\"embed-card embed-webcard\" scrolling=\"no\" frameborder=\"0\" style=\"display: block; width: 100%; height: 155px; max-width: 500px; margin: 10px 0px;\"\u003e\u003c/iframe\u003e\u003ccite class=\"hatena-citation\"\u003e\u003ca href=\"https://open.talentio.com/1/c/feedforce/requisitions/detail/21802\"\u003eopen.talentio.com\u003c/a\u003e\u003c/cite\u003e\u003c/p\u003e\n\n\u003cp\u003eご興味ありましたら、カジュアル面談にぜひどうぞ！\u003c/p\u003e\n","contentSnippet":"ソーシャルPLUS の id:mashabow です。今回は、個人で開発している Slack アプリ Rota を OAuth に対応させたときに、へーっと思った話の紹介です。ちなみにこの Rota は、指定した曜日・時間が来るたびに、ローテーションを順次お知らせしてくれる Slack アプリです。github.com経緯この Slack アプリ Rota は、Slack 公式が出している Bolt というフレームワークを使っています。slack.devSlack アプリを任意のワークスペースにインストールしてもらうためには、OAuth に対応させる必要があります。今回は Bolt のおかげで比較的簡単に対応できたのですが、その中で出てきた stateSecret というオプションがどう使われるのか、いまいちわかりません。Bolt のリファレンスには  CSRF 攻撃を防ぐために OAuth の設定時に渡すことができる、推奨のパラメーター（文字列）。と説明があるので、OAuth の state パラメータに関係がありそうですが……。というわけで、気になって中身をのぞいてみました。state パラメータのおさらいその前に、そもそも OAuth の state パラメータって何？という方もいるかもしれません。こちらの記事で非常にわかりやすく図解されているのですが、要は CSRF 対策のためのものです。tech-lab.sios.jpこの記事に倣って図解すると、Slack アプリの場合はこういう関係ですね。state パラメータを使うと 3. の前でチェックが入るため、このような CSRF 攻撃を防ぐことができます。保存をしない state store…？話を戻して、Bolt の stateSecret オプションを追いかけてみます。Bolt の OAuth まわりの処理は、@slack/oauth というライブラリで実装されています。@slack/oauth の README を読んでみると、Using a custom state store に説明がありました。A state store handles generating the OAuth state parameter in the installation URL for a given set of options, and verifying the state in the OAuth callback and returning those same options.ふむふむ。ここまでは上で確認したような話ですね。state パラメータを生成しておいて、コールバック（認可画面からのリダイレクト）のときにその値が正しいかチェックする。そして、@slack/oauth が options と呼んでいるオブジェクト（Slack ワークスペースの ID やスコープの情報が入る）を返します。このようなインターフェイスを、state store と言っているようです。次に行きます。state store のデフォルトの実装である ClearStateStoreの説明です。The default state store, ClearStateStore, does not use any storage. Instead, it signs the options (using the stateSecret) and encodes them along with a signature into state. Later during the OAuth callback, it verifies the signature.なんと。state store という名前から「どこかに state パラメータと options の組を保存するんだろうな」と思っていたんですが、ClearStateStore ではどちらも保存していないようです。JWT を使った ClearStateStoreでは、ClearStateStore の実装を見てみましょう。以下に出てくる sign() と verify() は、JWT を扱うための npm ライブラリ jsonwebtoken の関数です。node-slack-sdk/index.ts at @slack/oauth@2.3.0 · slackapi/node-slack-sdk · GitHubpublic async generateStateParam(installOptions: InstallURLOptions, now: Date): Promise\u003cstring\u003e {  return sign({ installOptions, now: now.toJSON() }, this.stateSecret);}認可画面に遷移する際、generateStateParam() で  state パラメータを生成します。ここでは、options （上のコードでは installOptions）と時刻をペイロードとする JWT を生成して、返しています。冒頭で「なにこれ？」と思った stateSecret は、JWT の署名に使う共通鍵だったんですね。public async verifyStateParam(_now: Date, state: string): Promise\u003cInstallURLOptions\u003e {  // decode the state using the secret  const decoded: StateObj = verify(state, this.stateSecret) as StateObj;  // return installOptions  return decoded.installOptions;}認可後のリダイレクトでは、verifyStateParam() で  state パラメータを検証します。ここでは、共通鍵 stateSecret で JWT の署名を検証しています。ペイロードが改竄されていればここでエラーになり、処理が中断されます。検証が通ったら、ペイロードの options を取り出して返します。CSRF 対策になっていることを確認この ClearStateStore で本当に CSRF 攻撃が防げるのか、確認してみましょう。まずは通常の攻撃シナリオ。悪い人が自分のワークスペースで認可を行い、リダイレクト URL を取得します（1.）。このリダイレクト URL には、state パラメータが含まれています。このリダイレクト URL をそのまま A さんに送りつけ、 A さんに踏ませる（2.）とどうなるでしょうか？Slack アプリの ClearStateStore は、まず  state パラメータの有効性を検証します（3.）。JWT の署名を検証するわけですが、このシナリオでは、悪い人の JWT は何も改竄されていません。したがって、JWT は有効だと判断され、処理は続行されます。次に、JWT から options を取り出し（4.）、これを使って Slack からアクセストークンを取得します（5.）。Slack からは悪い人のアクセストークンが返ってきますが、Slack アプリはそれを悪い人のアクセストークンだとして（正しく）格納します（6.）。したがって、A さんには何も影響ありません。別のシナリオも検討してみます。先ほどのシナリオで見たように、Slack アプリは JWT から options を取り出し、アクセストークンを取得・格納していました。JWT の中の options を書き換えれば、悪い人のアクセストークンを A さんのものとして格納できないでしょうか？はい、これは JWT の署名検証で引っかかるので、不可能ですね。以上のことから、一般的な state パラメータの実装と同じく、ClearStateStore でも CSRF 対策になっていることがわかりました。まとめというわけで、JWT をうまいこと使うと、state パラメータを OAuth クライアントに保存しておく必要がなくなります。通常の実装だと、生成した state パラメータを適当な key-value ストアなどに保存しますが、これが不要になるのは楽ですね。ステートレスになるので FaaS との相性もよくなります（とはいえもちろん、取得したアクセストークンはどこかに保存しておく必要があります）。今回は Bolt を使って Slack アプリのインストール処理を実装しましたが、OAuth まわりの詳細についてはほとんど意識することなく実現でき、かなり楽ちんで快適でした。よく考えられてますね。おまけソーシャルPLUS では、現在フロントエンドエンジニア・バックエンドエンジニアを募集中です。Shopify アプリのリリースや LINE 社との業務提携を経て、やりたいことがますます盛りだくさんな状況です。open.talentio.comopen.talentio.comご興味ありましたら、カジュアル面談にぜひどうぞ！","link":"https://developer.feedforce.jp/entry/2021/10/25/120000","isoDate":"2021-10-25T03:00:00.000Z","dateMiliSeconds":1635130800000,"imageUrl":"https://cdn-ak.f.st-hatena.com/images/fotolife/m/mashabow/20211022/20211022222547.png","authorName":"mashabow"},{"title":"【Shopify】Liquid 上で「現在の日付から◯日後」を表現する方法","content":"\u003cp\u003e\u003cimg src=\"https://rewired.cloud/wp-content/uploads/2021/09/211001_day-to-date_title-520x300.jpg\" class=\"webfeedsFeaturedVisual\" width=\"520\" height=\"300\" /\u003e\u003c/p\u003e　 「◯日後」を表現したいシーンは多い 製品ページや顧客へのメールに配送予定日を表示したり、レッスンや新商品の予約可能日を自動的に変更するなど、Eコマースのインターフェースで「今から◯日後」を表現したいシーンは多いと思い ... ","contentSnippet":"「◯日後」を表現したいシーンは多い 製品ページや顧客へのメールに配送予定日を表示したり、レッスンや新商品の予約可能日を自動的に変更するなど、Eコマースのインターフェースで「今から◯日後」を表現したいシーンは多いと思い ...","link":"https://rewired.cloud/how-to-add-days-to-date-shopify/","isoDate":"2021-10-01T01:05:52.000Z","dateMiliSeconds":1633050352000,"authorName":"mashabow"},{"title":"ゲスト購入時、Shopify は customer をどう扱っているのか","content":"\u003cp\u003e\u003cimg src=\"https://rewired.cloud/wp-content/uploads/2021/09/210908_customer_title-520x300.jpg\" class=\"webfeedsFeaturedVisual\" width=\"520\" height=\"300\" /\u003e\u003c/p\u003eShopify は 設定 \u0026#62; チェックアウト から購入時のアカウント登録の要否を設定できます。 アカウントを無効化する ゲストとしてのみチェックアウトが可能 アカウントを任意にする ゲストとして、またはカスタマーア ... ","contentSnippet":"Shopify は 設定 \u003e チェックアウト から購入時のアカウント登録の要否を設定できます。 アカウントを無効化する ゲストとしてのみチェックアウトが可能 アカウントを任意にする ゲストとして、またはカスタマーア ...","link":"https://rewired.cloud/how-shopify-handle-the-customer-when-checkout-as-a-guest/","isoDate":"2021-09-08T06:23:36.000Z","dateMiliSeconds":1631082216000,"authorName":"mashabow"},{"title":"ESP8266 で温湿度を測って、AWS IoT Core + Amplify でグラフにしてみる","content":"\u003cp\u003eこんにちは、ソーシャルPLUS チームの \u003ca href=\"http://blog.hatena.ne.jp/mashabow/\" class=\"hatena-id-icon\"\u003e\u003cimg src=\"https://cdn.profile-image.st-hatena.com/users/mashabow/profile.png\" width=\"16\" height=\"16\" alt=\"\" class=\"hatena-id-icon\"\u003eid:mashabow\u003c/a\u003e です。\u003c/p\u003e\n\n\u003cp\u003e社内勉強会 \u003ca href=\"https://developer.feedforce.jp/archive/category/FFTT\"\u003eFFTT\u003c/a\u003e のネタとして、ESP8266 で Wi-Fi 温湿度センサーを作り、グラフ化してみました。普段はフロントエンドの開発をしているんですが、ちょっと別のことをやってみようかと思いまして。電子工作に入門して、AWS IoT Core とか AWS Amplify を使ってみた記録です。\u003c/p\u003e\n\n\u003cul\u003e\n\u003cli\u003eグラフ：\u003ca href=\"https://main.dt7p4lkfvt2c8.amplifyapp.com/\"\u003ehttps://main.dt7p4lkfvt2c8.amplifyapp.com/\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003eリポジトリ：\u003ca href=\"https://github.com/mashabow/uchino-sensors\"\u003ehttps://github.com/mashabow/uchino-sensors\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\n\n\u003cp\u003e\u003cspan itemscope itemtype=\"http://schema.org/Photograph\"\u003e\u003cimg src=\"https://cdn-ak.f.st-hatena.com/images/fotolife/m/mashabow/20210426/20210426193800.png\" alt=\"f:id:mashabow:20210426193800p:plain:w300\" width=\"1366\" height=\"1018\" loading=\"lazy\" title=\"\" class=\"hatena-fotolife\" style=\"width:300px\" itemprop=\"image\"\u003e\u003c/span\u003e \u003cspan itemscope itemtype=\"http://schema.org/Photograph\"\u003e\u003cimg src=\"https://cdn-ak.f.st-hatena.com/images/fotolife/m/mashabow/20210426/20210426193805.png\" alt=\"f:id:mashabow:20210426193805p:plain:w330\" width=\"1982\" height=\"1332\" loading=\"lazy\" title=\"\" class=\"hatena-fotolife\" style=\"width:330px\" itemprop=\"image\"\u003e\u003c/span\u003e\u003c/p\u003e\n\n\u003cp\u003e詳しくはスライドをご覧ください。\u003c/p\u003e\n\n\u003cscript async class=\"speakerdeck-embed\" data-id=\"92082383e7cc463dbb9ea18867036605\" data-ratio=\"1.77777777777778\" src=\"//speakerdeck.com/assets/embed.js\"\u003e\u003c/script\u003e\n\n\n\u003ch2\u003eQ\u0026amp;A\u003c/h2\u003e\n\n\u003cp\u003e勉強会で出た質問です。\u003c/p\u003e\n\n\u003cul\u003e\n\u003cli\u003eQ. Wi-Fi のパスワードってどうしてるんですか？\n\n\u003cul\u003e\n\u003cli\u003eA. ESP8266 へ書き込むプログラムの中に、\u003ca href=\"https://github.com/mashabow/uchino-sensors/blob/main/esp8266/src/secrets.h.template#L3-L4\"\u003eそのまま埋め込んでいます\u003c/a\u003e。\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003eQ. どれくらいのサイズのプログラムを書き込めるのかな\n\n\u003cul\u003e\n\u003cli\u003eA. 今回は小さいプログラムなのであまり気にしていませんでしたが、\u003ca href=\"https://www.mgo-tec.com/blog-entry-pointer-ini-arduino-esp8266.html#title04\"\u003eユーザーが使えるのは 50 KB 程度\u003c/a\u003eらしいです。\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003eQ. すると timestamp は測定時点のものではないのか。数十ミリ秒くらいはズレているのかな\n\n\u003cul\u003e\n\u003cli\u003eA. \u003ca href=\"https://docs.aws.amazon.com/iot/latest/developerguide/iot-sql-functions.html#iot-function-timestamp\"\u003eIoT Core のルールエンジンに届いた時刻\u003c/a\u003eなので、正確ではないですね。10分間隔の測定で、かつセンサーの精度もそんなに無いので、まぁいいかなと。送信するメッセージに timestamp を入れるようにすればいい話ではあります（ESP8266 を書き変えるのが面倒だった 💦）。\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003eQ. AWS IoT Core とかってお高いんですか？\n\n\u003cul\u003e\n\u003cli\u003eA. 個人で使う規模なら\u003ca href=\"https://aws.amazon.com/jp/iot-core/pricing\"\u003e激安\u003c/a\u003eですね 👀\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003eQ. 温度が急上昇してたら 119 しとけば良いですか？\n\n\u003cul\u003e\n\u003cli\u003eA. よろしくおねがいします 🚒\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\n\n\u003ch2\u003e感想\u003c/h2\u003e\n\n\u003cp\u003eIoT っぽいものに初めて手を出してみたんですが、おもしろいですね。一番最初は用語も概念も調べ方もわからず、ネット上で情報収集しても「???」だったんですが、\u003ca href=\"https://www.amazon.co.jp/dp/4789847047\"\u003e本\u003c/a\u003eを読んだら頭に入ってくるようになりました。\u003c/p\u003e\n\n\u003cp\u003eグラフも単なるグラフだろと思っていたんですが、自宅の実データをいざ視覚化してみると、自分だけにしか見えない様子ががいろいろ見えてきます。「あ、これ夕食を準備してたときだ」とか、ついついじっくり眺めてしまいますね。今回はセンサーだけでしたが、アクチュエーターに指示を出せば、さらにおもしろいものができそうです。\u003c/p\u003e\n\n\u003ch2\u003eリンク集\u003c/h2\u003e\n\n\u003cp\u003eスライドで触れたページや、実装にあたって参考にしたページです。\u003c/p\u003e\n\n\u003ch3\u003e1. Wi-Fi 温湿度センサーを作る\u003c/h3\u003e\n\n\u003cul\u003e\n\u003cli\u003e\u003ca href=\"https://akizukidenshi.com/catalog/g/gK-09758/\"\u003eWi-Fiモジュール ESP-WROOM-02 DIP化キット: 秋月電子通商-電子部品・ネット通販\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"https://www.amazon.co.jp/dp/4789847047\"\u003e超特急Web接続! ESPマイコン・プログラム全集 | 国野 亘 | Amazon\u003c/a\u003e\n\n\u003cul\u003e\n\u003cli\u003e組み立てや実装の参考にした本\u003c/li\u003e\n\u003cli\u003e[PDF] \u003ca href=\"https://shop.cqpub.co.jp/hanbai/books/I/I000315/setsumei.pdf\"\u003eIoT実習キット説明書・パーツリスト\u003c/a\u003e\n\n\u003cul\u003e\n\u003cli\u003e上記書籍の回路部分。基本的にはこれに倣った\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"https://www.amazon.co.jp/dp/B010GXAH4E\"\u003eHiLetgo 3個セット DHT11温度センサー | Amazon\u003c/a\u003e\n\n\u003cul\u003e\n\u003cli\u003e今回使った温湿度センサー\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"https://garretlab.web.fc2.com/arduino/\"\u003eArduinoで遊ぶページ\u003c/a\u003e\n\n\u003cul\u003e\n\u003cli\u003eArduino 言語の参考に\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"https://platformio.org/\"\u003eA professional collaborative platform for embedded development · PlatformIO\u003c/a\u003e\n\n\u003cul\u003e\n\u003cli\u003e使い慣れたエディタで Arduino の開発ができる。補完や依存管理ができて便利\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"https://bokunimo.net/blog/esp/784/\"\u003e乾電池で本当に1年間動作するIoTセンサ ESP8266 - ボクにもわかる電子工作のブログ\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\n\n\u003ch3\u003e2. 測定結果を受け取ってためる\u003c/h3\u003e\n\n\u003cul\u003e\n\u003cli\u003e\u003ca href=\"https://ambidata.io/\"\u003eAmbient – IoTデータ可視化サービス\u003c/a\u003e\n\n\u003cul\u003e\n\u003cli\u003e\u003ca href=\"https://ambidata.io/docs/esp8266/\"\u003eArduino ESP8266で温度・湿度を測定し、Ambientに送ってグラフ化する – Ambient\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"https://machinist.iij.jp/\"\u003eMachinist\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"https://aws-iot-core-for-beginners.workshop.aws/\"\u003eAWS IoT Core 初級ハンズオン :: AWS IoT Core 初級 ハンズオン\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"https://github.com/debsahu/ESP-MQTT-AWS-IoT-Core\"\u003edebsahu/ESP-MQTT-AWS-IoT-Core: Arduino examples of connecting ESP8266/ESP32 to AWS IOT Core\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"https://flogics.com/wp/ja/2019/07/esp8266-arduino-aws-iot-mqtt/\"\u003eTI DSP ソフトウェア設計のファームロジックス | ESP8266（Arduino環境）で AWS IoT（MQTT over TLS）にアクセスする\u003c/a\u003e\n\n\u003cul\u003e\n\u003cli\u003e最初 MQTT で接続できなくて悩んでいたが、NTP で時刻を合わせたら解決した\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\n\n\u003ch3\u003e3. 測定結果をグラフにする\u003c/h3\u003e\n\n\u003cul\u003e\n\u003cli\u003e\u003ca href=\"https://docs.amplify.aws/start/q/integration/react\"\u003eGetting started - Amplify Docs\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"https://github.com/aws-amplify/amplify-js/issues/6369\"\u003e[Feedback] \u003ccode\u003eAPI.graphql\u003c/code\u003e return signature is hard to use in TypeScript · Issue #6369 · aws-amplify/amplify-js\u003c/a\u003e\n\n\u003cul\u003e\n\u003cli\u003e素の状態だと TS サポートがいまいちな件\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"https://apexcharts.com/docs/react-charts/\"\u003eReact-ApexChart - A React Chart wrapper for ApexCharts.js\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"https://aws.amazon.com/jp/premiumsupport/knowledge-center/appsync-notify-subscribers-real-time/\"\u003eAWS AppSync を使用して、外部データベースの更新をサブスクライバーにリアルタイムで通知する\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\n","contentSnippet":"こんにちは、ソーシャルPLUS チームの id:mashabow です。社内勉強会 FFTT のネタとして、ESP8266 で Wi-Fi 温湿度センサーを作り、グラフ化してみました。普段はフロントエンドの開発をしているんですが、ちょっと別のことをやってみようかと思いまして。電子工作に入門して、AWS IoT Core とか AWS Amplify を使ってみた記録です。グラフ：https://main.dt7p4lkfvt2c8.amplifyapp.com/リポジトリ：https://github.com/mashabow/uchino-sensors 詳しくはスライドをご覧ください。Q\u0026A勉強会で出た質問です。Q. Wi-Fi のパスワードってどうしてるんですか？A. ESP8266 へ書き込むプログラムの中に、そのまま埋め込んでいます。Q. どれくらいのサイズのプログラムを書き込めるのかなA. 今回は小さいプログラムなのであまり気にしていませんでしたが、ユーザーが使えるのは 50 KB 程度らしいです。Q. すると timestamp は測定時点のものではないのか。数十ミリ秒くらいはズレているのかなA. IoT Core のルールエンジンに届いた時刻なので、正確ではないですね。10分間隔の測定で、かつセンサーの精度もそんなに無いので、まぁいいかなと。送信するメッセージに timestamp を入れるようにすればいい話ではあります（ESP8266 を書き変えるのが面倒だった 💦）。Q. AWS IoT Core とかってお高いんですか？A. 個人で使う規模なら激安ですね 👀Q. 温度が急上昇してたら 119 しとけば良いですか？A. よろしくおねがいします 🚒感想IoT っぽいものに初めて手を出してみたんですが、おもしろいですね。一番最初は用語も概念も調べ方もわからず、ネット上で情報収集しても「???」だったんですが、本を読んだら頭に入ってくるようになりました。グラフも単なるグラフだろと思っていたんですが、自宅の実データをいざ視覚化してみると、自分だけにしか見えない様子ががいろいろ見えてきます。「あ、これ夕食を準備してたときだ」とか、ついついじっくり眺めてしまいますね。今回はセンサーだけでしたが、アクチュエーターに指示を出せば、さらにおもしろいものができそうです。リンク集スライドで触れたページや、実装にあたって参考にしたページです。1. Wi-Fi 温湿度センサーを作るWi-Fiモジュール ESP-WROOM-02 DIP化キット: 秋月電子通商-電子部品・ネット通販超特急Web接続! ESPマイコン・プログラム全集 | 国野 亘 | Amazon組み立てや実装の参考にした本[PDF] IoT実習キット説明書・パーツリスト上記書籍の回路部分。基本的にはこれに倣ったHiLetgo 3個セット DHT11温度センサー | Amazon今回使った温湿度センサーArduinoで遊ぶページArduino 言語の参考にA professional collaborative platform for embedded development · PlatformIO使い慣れたエディタで Arduino の開発ができる。補完や依存管理ができて便利乾電池で本当に1年間動作するIoTセンサ ESP8266 - ボクにもわかる電子工作のブログ2. 測定結果を受け取ってためるAmbient – IoTデータ可視化サービスArduino ESP8266で温度・湿度を測定し、Ambientに送ってグラフ化する – AmbientMachinistAWS IoT Core 初級ハンズオン :: AWS IoT Core 初級 ハンズオンdebsahu/ESP-MQTT-AWS-IoT-Core: Arduino examples of connecting ESP8266/ESP32 to AWS IOT CoreTI DSP ソフトウェア設計のファームロジックス | ESP8266（Arduino環境）で AWS IoT（MQTT over TLS）にアクセスする最初 MQTT で接続できなくて悩んでいたが、NTP で時刻を合わせたら解決した3. 測定結果をグラフにするGetting started - Amplify Docs[Feedback] API.graphql return signature is hard to use in TypeScript · Issue #6369 · aws-amplify/amplify-js素の状態だと TS サポートがいまいちな件React-ApexChart - A React Chart wrapper for ApexCharts.jsAWS AppSync を使用して、外部データベースの更新をサブスクライバーにリアルタイムで通知する","link":"https://developer.feedforce.jp/entry/2021/04/28/110000","isoDate":"2021-04-28T02:00:00.000Z","dateMiliSeconds":1619575200000,"imageUrl":"https://cdn-ak.f.st-hatena.com/images/fotolife/m/mashabow/20210426/20210426193800.png","authorName":"mashabow"},{"title":"Shopify 埋め込みアプリのフォームを @shopify/react-form で作る","content":"\u003cp\u003eこんにちは、\u003ca href=\"http://blog.hatena.ne.jp/mashabow/\" class=\"hatena-id-icon\"\u003e\u003cimg src=\"https://cdn.profile-image.st-hatena.com/users/mashabow/profile.png\" width=\"16\" height=\"16\" alt=\"\" class=\"hatena-id-icon\"\u003eid:mashabow\u003c/a\u003e です。この記事は、\u003ca href=\"https://qiita.com/advent-calendar/2020/shopify-liquid\"\u003eShopify開発を盛り上げる Advent Calendar 2020\u003c/a\u003e の 8 日目にあたります。昨日は minozo さんの「\u003ca href=\"https://qiita.com/minozo/items/8abd224a319bd373c83b\"\u003eShopifyでARを実装する方法(2020/12版)\u003c/a\u003e」でした。\u003c/p\u003e\n\n\u003cp\u003e現在弊社では、\u003ca href=\"https://socialplus.jp/lp/shopify_line\"\u003eソーシャルPLUS の Shopify アプリ版\u003c/a\u003eを開発しており、わたしは\u003ca href=\"https://shopify.dev/tutorials/build-a-shopify-app-with-node-and-react?locale=ja\"\u003e埋め込みアプリ\u003c/a\u003e（Embedded App）のフロントエンド担当です。わかりやすく言えば、マーチャントの方に触っていただく設定画面を作っているわけです。\u003c/p\u003e\n\n\u003cp\u003e\u003cspan itemscope itemtype=\"http://schema.org/Photograph\"\u003e\u003cimg src=\"https://cdn-ak.f.st-hatena.com/images/fotolife/m/mashabow/20201207/20201207160849.png\" alt=\"f:id:mashabow:20201207160849p:plain\" title=\"\" class=\"hatena-fotolife\" itemprop=\"image\"\u003e\u003c/span\u003e\u003c/p\u003e\n\n\u003cp\u003eそんな設定画面に必要不可欠で、かつ意外と厄介なのがフォームの実装です。今回は、フォームの状態管理に \u003ca href=\"https://www.npmjs.com/package/@shopify/react-form\"\u003e@shopify/react-form\u003c/a\u003e というライブラリを使ってみました。この記事では、その @shopify/react-form の使い方を紹介したいと思います。\u003c/p\u003e\n\n\u003ch2\u003eフォーム管理ライブラリを選ぶ\u003c/h2\u003e\n\n\u003cp\u003e前提として、フレームワークには React（Next.js）を、コンポーネントライブラリは Shopify 本家の \u003ca href=\"https://polaris.shopify.com/components/get-started\"\u003ePolaris\u003c/a\u003e を使用しています。Polaris はあくまでもコンポーネントライブラリなので、フォームの状態を管理するための機能は入っていません。\u003ccode\u003euseState\u003c/code\u003e を使うなり、他のフォーム管理ライブラリを使うなりして、自分でよしなに管理する必要があります。\u003c/p\u003e\n\n\u003cp\u003e実は、最初は軽量・高速な \u003ca href=\"https://react-hook-form.com/jp/\"\u003eReact Hook Form\u003c/a\u003e を使おうかとぼんやり考えていました。しかしよくよく見てみると、Polaris のコンポーネントは React Hook Form に必要な \u003ccode\u003eref\u003c/code\u003e を受け取ることができません。\u003ca href=\"https://ja.reactjs.org/docs/forms.html#controlled-components\"\u003eControlled components\u003c/a\u003e として作られていますしね。一応、React Hook Form の \u003ca href=\"https://react-hook-form.com/jp/get-started#IntegratingControlledInputs\"\u003e\u003ccode\u003eController\u003c/code\u003e\u003c/a\u003e でラップして使う手があるようですが、それも手間がかかりそうです。\u003c/p\u003e\n\n\u003cp\u003eとりあえず他の人のやり方を参考にしようか……と検索してみたところ、どこかで \u003ca href=\"https://www.npmjs.com/package/@shopify/react-form\"\u003e@shopify/react-form\u003c/a\u003e というライブラリを見つけました\u003csup id=\"fnref:1\"\u003e\u003ca href=\"#fn:1\" rel=\"footnote\"\u003e1\u003c/a\u003e\u003c/sup\u003e。\u003c/p\u003e\n\n\u003cp\u003e\u003ciframe src=\"https://hatenablog-parts.com/embed?url=https%3A%2F%2Fwww.npmjs.com%2Fpackage%2F%40shopify%2Freact-form\" title=\"@shopify/react-form\" class=\"embed-card embed-webcard\" scrolling=\"no\" frameborder=\"0\" style=\"display: block; width: 100%; height: 155px; max-width: 500px; margin: 10px 0px;\"\u003e\u003c/iframe\u003e\u003ccite class=\"hatena-citation\"\u003e\u003ca href=\"https://www.npmjs.com/package/@shopify/react-form\"\u003ewww.npmjs.com\u003c/a\u003e\u003c/cite\u003e\u003c/p\u003e\n\n\u003cp\u003eREADME を読むと\u003c/p\u003e\n\n\u003cblockquote\u003e\u003cp\u003eThe hooks provided here also work swimmingly with @shopify/polaris.\u003c/p\u003e\u003c/blockquote\u003e\n\n\u003cp\u003eとの言葉があり、期待が持てそうです。\u003ca href=\"https://www.google.com/search?\u0026amp;q=+site%3Ashopify.com+%22%40shopify%2Freact-form%22\"\u003eShopify 公式サイトからの言及が皆無\u003c/a\u003eなのが謎で若干不安になりますが、Shopify 公式のパッケージです。なお、この記事の執筆時点では \u003ca href=\"https://github.com/Shopify/quilt/blob/%40shopify/react-form%400.9.0/packages/react-form/CHANGELOG.md\"\u003ev0.9.0\u003c/a\u003e が最新です。\u003c/p\u003e\n\n\u003ch2\u003e@shopify/react-form でフォームを定義する\u003c/h2\u003e\n\n\u003cp\u003e前置きが長くなりましたが、実際に使ってみましょう。使い方としては、\u003ca href=\"https://formik.org/\"\u003eFormik\u003c/a\u003e に似ています。詳しいところは \u003ca href=\"https://github.com/Shopify/quilt/blob/%40shopify/react-form%400.9.0/packages/react-form/README.md\"\u003eREADME\u003c/a\u003e に譲るとして、まずは単純な例を用意しました。\u003c/p\u003e\n\n\u003ciframe src=\"https://codesandbox.io/embed/shopifyreact-form-1-d8nss?expanddevtools=1\u0026fontsize=12\u0026hidenavigation=1\u0026module=%2Fsrc%2FMyForm.tsx\u0026theme=dark\"\n     style=\"width:100%; height:600px; border:0; border-radius: 4px; overflow:hidden;\"\n     title=\"@shopify/react-form 1\"\n     allow=\"accelerometer; ambient-light-sensor; camera; encrypted-media; geolocation; gyroscope; hid; microphone; midi; payment; usb; vr; xr-spatial-tracking\"\n     sandbox=\"allow-forms allow-modals allow-popups allow-presentation allow-same-origin allow-scripts\"\n   \u003e\u003c/iframe\u003e\n\n\n\u003cp\u003e最初に、\u003ca href=\"https://github.com/Shopify/quilt/blob/%40shopify/react-form%400.9.0/packages/react-form/README.md#useform\"\u003e\u003ccode\u003euseForm\u003c/code\u003e\u003c/a\u003e でフォームの定義をします。その中では、\u003ca href=\"https://github.com/Shopify/quilt/blob/%40shopify/react-form%400.9.0/packages/react-form/README.md#usefield\"\u003e\u003ccode\u003euseField\u003c/code\u003e\u003c/a\u003e を使って各フィールドの定義をしています。\u003ccode\u003efields\u003c/code\u003e  のキー（下の例では \u003ccode\u003ename\u003c/code\u003e にしました）が、フィールドの識別子になります。\u003c/p\u003e\n\n\u003cpre class=\"code lang-typescript\" data-lang=\"typescript\" data-unlink\u003e  \u003cspan class=\"synStatement\"\u003econst\u003c/span\u003e \u003cspan class=\"synIdentifier\"\u003e{\u003c/span\u003e fields\u003cspan class=\"synStatement\"\u003e,\u003c/span\u003e submit \u003cspan class=\"synIdentifier\"\u003e}\u003c/span\u003e \u003cspan class=\"synStatement\"\u003e=\u003c/span\u003e useForm\u003cspan class=\"synStatement\"\u003e(\u003c/span\u003e\u003cspan class=\"synIdentifier\"\u003e{\u003c/span\u003e\n    fields: \u003cspan class=\"synIdentifier\"\u003e{\u003c/span\u003e\n      \u003cspan class=\"synComment\"\u003e// 「名前」フィールドの定義\u003c/span\u003e\n      name: useField\u003cspan class=\"synStatement\"\u003e(\u003c/span\u003e\u003cspan class=\"synIdentifier\"\u003e{\u003c/span\u003e\n        value: \u003cspan class=\"synConstant\"\u003e\u0026quot;Shopify大好きパーソン\u0026quot;\u003c/span\u003e\u003cspan class=\"synStatement\"\u003e,\u003c/span\u003e \u003cspan class=\"synComment\"\u003e// 初期値\u003c/span\u003e\n        validates: \u003cspan class=\"synIdentifier\"\u003e[\u003c/span\u003e\n          notEmpty\u003cspan class=\"synStatement\"\u003e(\u003c/span\u003e\u003cspan class=\"synConstant\"\u003e\u0026quot;必須項目です\u0026quot;\u003c/span\u003e\u003cspan class=\"synStatement\"\u003e),\u003c/span\u003e\n          lengthMoreThan\u003cspan class=\"synStatement\"\u003e(\u003c/span\u003e\u003cspan class=\"synConstant\"\u003e2\u003c/span\u003e\u003cspan class=\"synStatement\"\u003e,\u003c/span\u003e \u003cspan class=\"synConstant\"\u003e\u0026quot;3文字以上で入力してください\u0026quot;\u003c/span\u003e\u003cspan class=\"synStatement\"\u003e)\u003c/span\u003e\n        \u003cspan class=\"synIdentifier\"\u003e]\u003c/span\u003e\n      \u003cspan class=\"synIdentifier\"\u003e}\u003c/span\u003e\u003cspan class=\"synStatement\"\u003e),\u003c/span\u003e\n      ...\n    \u003cspan class=\"synIdentifier\"\u003e}\u003c/span\u003e\u003cspan class=\"synStatement\"\u003e,\u003c/span\u003e\n    \u003cspan class=\"synSpecial\"\u003eonSubmit\u003c/span\u003e: ...\n  \u003cspan class=\"synIdentifier\"\u003e}\u003c/span\u003e\u003cspan class=\"synStatement\"\u003e);\u003c/span\u003e\n\u003c/pre\u003e\n\n\n\u003cp\u003e\u003ccode\u003euseField\u003c/code\u003e の引数の \u003ccode\u003evalue\u003c/code\u003e は初期値です。実際には空 \u003ccode\u003e\"\"\u003c/code\u003e だったり、前回保存した値をバックエンド API から取ってきて入れたりすることが多いでしょう。\u003ccode\u003evalidates\u003c/code\u003e には、バリデーションに使う関数を指定します。上の例では @shopify/react-form に\u003ca href=\"https://github.com/Shopify/quilt/blob/%40shopify/react-form%400.9.0/packages/react-form/src/validation/validators.ts\"\u003e組み込まれているバリデーション関数\u003c/a\u003eを使っていますが、種類はそれほど多くはありません。自作することもできます。\u003c/p\u003e\n\n\u003cp\u003e\u003ccode\u003euseForm\u003c/code\u003e の \u003ccode\u003eonSubmit\u003c/code\u003e には submit 時の処理を書きますが、これは次節で説明します。\u003c/p\u003e\n\n\u003cp\u003eさて、これでフォームの定義ができました。\u003ccode\u003euseForm\u003c/code\u003e の戻り値の \u003ccode\u003efields\u003c/code\u003e に、各フィールドの状態やハンドラが入っているので、今度はこれを Polaris のコンポーネントに結びつけます。上の例では \u003ccode\u003ename\u003c/code\u003e という識別子のフィールドを定義したので、\u003ccode\u003efields.name\u003c/code\u003e を spread して\u003c/p\u003e\n\n\u003cpre class=\"code lang-typescript\" data-lang=\"typescript\" data-unlink\u003e        \u003cspan class=\"synStatement\"\u003e\u0026lt;\u003c/span\u003eTextField label\u003cspan class=\"synStatement\"\u003e=\u003c/span\u003e\u003cspan class=\"synConstant\"\u003e\u0026quot;名前\u0026quot;\u003c/span\u003e \u003cspan class=\"synIdentifier\"\u003e{\u003c/span\u003e...fields.name\u003cspan class=\"synIdentifier\"\u003e}\u003c/span\u003e /\u003cspan class=\"synStatement\"\u003e\u0026gt;\u003c/span\u003e\n\u003c/pre\u003e\n\n\n\u003cp\u003eと渡してやるだけで  \u003ca href=\"https://polaris.shopify.com/components/forms/text-field\"\u003e\u003ccode\u003eTextField\u003c/code\u003e\u003c/a\u003e コンポーネントが動作します。@shopify/react-form が、Polaris のインターフェイスに合わせて作られているおかげですね。べんり！\u003c/p\u003e\n\n\u003cp\u003eまた、先ほどバリデーション関数を指定したので、バリデーションもちゃんと動きます。\u003c/p\u003e\n\n\u003cp\u003e\u003cspan itemscope itemtype=\"http://schema.org/Photograph\"\u003e\u003cimg src=\"https://cdn-ak.f.st-hatena.com/images/fotolife/m/mashabow/20201207/20201207104404.gif\" alt=\"f:id:mashabow:20201207104404g:plain\" title=\"\" class=\"hatena-fotolife\" itemprop=\"image\"\u003e\u003c/span\u003e\u003c/p\u003e\n\n\u003cp\u003eblur 時にバリデーションが実行され、エラーが表示されているのがわかります。\u003c/p\u003e\n\n\u003ch2\u003esubmit 処理を実装する\u003c/h2\u003e\n\n\u003cp\u003eフォームが一通りできたら、submit 時の処理を実装しましょう。\u003ccode\u003euseFleid\u003c/code\u003e の引数の \u003ccode\u003eonSubmit\u003c/code\u003e に、async で処理内容を書きます。各フィールドの値は、引数 \u003ccode\u003efieldValues\u003c/code\u003e として  \u003ccode\u003eonSubmit\u003c/code\u003e に渡されます。\u003c/p\u003e\n\n\u003cp\u003e以下に例を示します。実際のアプリでは、\u003ccode\u003eonSubmit\u003c/code\u003e の中で \u003ccode\u003efieldValues\u003c/code\u003e をバックエンドに送信するケースがほとんどかと思いますが、今回はサンプルなので、「送信して結果が返ってきたつもり」の処理を入れています。\u003c/p\u003e\n\n\u003cpre class=\"code lang-typescript\" data-lang=\"typescript\" data-unlink\u003e  \u003cspan class=\"synStatement\"\u003econst\u003c/span\u003e \u003cspan class=\"synIdentifier\"\u003e{\u003c/span\u003e fields\u003cspan class=\"synStatement\"\u003e,\u003c/span\u003e submit \u003cspan class=\"synIdentifier\"\u003e}\u003c/span\u003e \u003cspan class=\"synStatement\"\u003e=\u003c/span\u003e useForm\u003cspan class=\"synStatement\"\u003e(\u003c/span\u003e\u003cspan class=\"synIdentifier\"\u003e{\u003c/span\u003e\n    fields: \u003cspan class=\"synIdentifier\"\u003e{\u003c/span\u003e\n      name: useField\u003cspan class=\"synStatement\"\u003e(\u003c/span\u003e\u003cspan class=\"synIdentifier\"\u003e{\u003c/span\u003e ... \u003cspan class=\"synIdentifier\"\u003e}\u003c/span\u003e\u003cspan class=\"synStatement\"\u003e),\u003c/span\u003e\n      age: useField\u003cspan class=\"synStatement\"\u003e(\u003c/span\u003e\u003cspan class=\"synIdentifier\"\u003e{\u003c/span\u003e ... \u003cspan class=\"synIdentifier\"\u003e}\u003c/span\u003e\u003cspan class=\"synStatement\"\u003e),\u003c/span\u003e\n      christmas: useField\u003cspan class=\"synStatement\"\u003e(\u003c/span\u003e\u003cspan class=\"synIdentifier\"\u003e{\u003c/span\u003e ... \u003cspan class=\"synIdentifier\"\u003e}\u003c/span\u003e\u003cspan class=\"synStatement\"\u003e),\u003c/span\u003e\n    \u003cspan class=\"synIdentifier\"\u003e}\u003c/span\u003e\u003cspan class=\"synStatement\"\u003e,\u003c/span\u003e\n    \u003cspan class=\"synSpecial\"\u003eonSubmit\u003c/span\u003e: \u003cspan class=\"synStatement\"\u003easync\u003c/span\u003e \u003cspan class=\"synStatement\"\u003e(\u003c/span\u003efieldValues\u003cspan class=\"synStatement\"\u003e)\u003c/span\u003e \u003cspan class=\"synStatement\"\u003e=\u0026gt;\u003c/span\u003e \u003cspan class=\"synIdentifier\"\u003e{\u003c/span\u003e\n      console.log\u003cspan class=\"synStatement\"\u003e(\u003c/span\u003efieldValues\u003cspan class=\"synStatement\"\u003e);\u003c/span\u003e\n      \u003cspan class=\"synComment\"\u003e// =\u0026gt; { name: \u0026quot;...\u0026quot;, age: \u0026quot;...\u0026quot;, christmas: \u0026quot;...\u0026quot; }\u003c/span\u003e\n\n      \u003cspan class=\"synComment\"\u003e// 実際のアプリではバックエンドに送信するが、\u003c/span\u003e\n      \u003cspan class=\"synComment\"\u003e// const result = await submitToBackend(fieldValues);\u003c/span\u003e\n      \u003cspan class=\"synComment\"\u003e// 今回はサンプルなので、適当な待ち時間を挟んでここで結果を返す\u003c/span\u003e\n      \u003cspan class=\"synStatement\"\u003eawait\u003c/span\u003e \u003cspan class=\"synStatement\"\u003enew\u003c/span\u003e Promise\u003cspan class=\"synStatement\"\u003e((\u003c/span\u003eresolve\u003cspan class=\"synStatement\"\u003e)\u003c/span\u003e \u003cspan class=\"synStatement\"\u003e=\u0026gt;\u003c/span\u003e setTimeout\u003cspan class=\"synStatement\"\u003e(\u003c/span\u003eresolve\u003cspan class=\"synStatement\"\u003e,\u003c/span\u003e \u003cspan class=\"synConstant\"\u003e1000\u003c/span\u003e\u003cspan class=\"synStatement\"\u003e));\u003c/span\u003e\n      \u003cspan class=\"synStatement\"\u003ereturn\u003c/span\u003e \u003cspan class=\"synIdentifier\"\u003e{\u003c/span\u003e \u003cspan class=\"synStatement\"\u003estatus\u003c/span\u003e: \u003cspan class=\"synConstant\"\u003e\u0026quot;success\u0026quot;\u003c/span\u003e \u003cspan class=\"synIdentifier\"\u003e}\u003c/span\u003e\u003cspan class=\"synStatement\"\u003e;\u003c/span\u003e\n    \u003cspan class=\"synIdentifier\"\u003e}\u003c/span\u003e\n  \u003cspan class=\"synIdentifier\"\u003e}\u003c/span\u003e\u003cspan class=\"synStatement\"\u003e);\u003c/span\u003e\n\u003c/pre\u003e\n\n\n\u003cp\u003e\u003ccode\u003eonSubmit\u003c/code\u003e 関数の戻り値によって、submit が成功したか失敗したかを表現します。成功の場合は \u003ccode\u003e{ status: \"success\" }\u003c/code\u003e を返すきまりになっています。失敗した場合は、\u003ccode\u003e{ status: \"fail\", errors: [...] }\u003c/code\u003e という形式ですが、こちらについては次の節で説明します。\u003c/p\u003e\n\n\u003cp\u003e\u003ccode\u003euseForm\u003c/code\u003e の戻り値に、submit を実行する \u003ccode\u003esubmit\u003c/code\u003e 関数が入っているので、\u003ccode\u003eForm\u003c/code\u003e コンポーネントの  \u003ccode\u003eonSubmit\u003c/code\u003e prop に渡します。これで、[保存] ボタンをクリックしたときに、先ほど実装した \u003ccode\u003eonSubmit\u003c/code\u003e 関数の処理が実行されるようになりました\u003csup id=\"fnref:2\"\u003e\u003ca href=\"#fn:2\" rel=\"footnote\"\u003e2\u003c/a\u003e\u003c/sup\u003e。\u003c/p\u003e\n\n\u003cpre class=\"code lang-typescript\" data-lang=\"typescript\" data-unlink\u003e    \u003cspan class=\"synStatement\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"synConstant\"\u003eForm\u003c/span\u003e \u003cspan class=\"synSpecial\"\u003eonSubmit\u003c/span\u003e\u003cspan class=\"synStatement\"\u003e=\u003c/span\u003e\u003cspan class=\"synIdentifier\"\u003e{\u003c/span\u003esubmit\u003cspan class=\"synIdentifier\"\u003e}\u003c/span\u003e\u003cspan class=\"synStatement\"\u003e\u0026gt;\u003c/span\u003e\n      \u003cspan class=\"synStatement\"\u003e\u0026lt;\u003c/span\u003eFormLayout\u003cspan class=\"synStatement\"\u003e\u0026gt;\u003c/span\u003e\n        \u003cspan class=\"synStatement\"\u003e\u0026lt;\u003c/span\u003eTextField label\u003cspan class=\"synStatement\"\u003e=\u003c/span\u003e\u003cspan class=\"synConstant\"\u003e\u0026quot;名前\u0026quot;\u003c/span\u003e \u003cspan class=\"synIdentifier\"\u003e{\u003c/span\u003e...fields.name\u003cspan class=\"synIdentifier\"\u003e}\u003c/span\u003e /\u003cspan class=\"synStatement\"\u003e\u0026gt;\u003c/span\u003e\n        \u003cspan class=\"synStatement\"\u003e\u0026lt;\u003c/span\u003eTextField label\u003cspan class=\"synStatement\"\u003e=\u003c/span\u003e\u003cspan class=\"synConstant\"\u003e\u0026quot;年齢\u0026quot;\u003c/span\u003e \u003cspan class=\"synStatement\"\u003etype=\u003c/span\u003e\u003cspan class=\"synConstant\"\u003e\u0026quot;number\u0026quot;\u003c/span\u003e \u003cspan class=\"synIdentifier\"\u003e{\u003c/span\u003e...fields.age\u003cspan class=\"synIdentifier\"\u003e}\u003c/span\u003e /\u003cspan class=\"synStatement\"\u003e\u0026gt;\u003c/span\u003e\n        \u003cspan class=\"synStatement\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"synConstant\"\u003eSelect\u003c/span\u003e\n          label\u003cspan class=\"synStatement\"\u003e=\u003c/span\u003e\u003cspan class=\"synConstant\"\u003e\u0026quot;クリスマスといえば？\u0026quot;\u003c/span\u003e\n          options\u003cspan class=\"synStatement\"\u003e=\u003c/span\u003e\u003cspan class=\"synIdentifier\"\u003e{\u003c/span\u003echristmasOptions\u003cspan class=\"synIdentifier\"\u003e}\u003c/span\u003e\n          \u003cspan class=\"synIdentifier\"\u003e{\u003c/span\u003e...fields.christmas\u003cspan class=\"synIdentifier\"\u003e}\u003c/span\u003e\n        /\u003cspan class=\"synStatement\"\u003e\u0026gt;\u003c/span\u003e\n        \u003cspan class=\"synStatement\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"synConstant\"\u003eButton\u003c/span\u003e submit primary\u003cspan class=\"synStatement\"\u003e\u0026gt;\u003c/span\u003e保存\u003cspan class=\"synStatement\"\u003e\u0026lt;\u003c/span\u003e/\u003cspan class=\"synConstant\"\u003eButton\u003c/span\u003e\u003cspan class=\"synStatement\"\u003e\u0026gt;\u003c/span\u003e\n      \u003cspan class=\"synStatement\"\u003e\u0026lt;\u003c/span\u003e/FormLayout\u003cspan class=\"synStatement\"\u003e\u0026gt;\u003c/span\u003e\n    \u003cspan class=\"synStatement\"\u003e\u0026lt;\u003c/span\u003e/\u003cspan class=\"synConstant\"\u003eForm\u003c/span\u003e\u003cspan class=\"synStatement\"\u003e\u0026gt;\u003c/span\u003e\n\u003c/pre\u003e\n\n\n\u003cp\u003eさらに使いやすくするために、\u003c/p\u003e\n\n\u003cul\u003e\n\u003cli\u003esubmit 処理中は、[保存] ボタンを loading 状態にする\u003c/li\u003e\n\u003cli\u003eどのフィールドも変更されていなれば、[保存] ボタンを disabled にする\u003c/li\u003e\n\u003c/ul\u003e\n\n\n\u003cp\u003eという制御を追加しましょう。\u003ccode\u003euseForm\u003c/code\u003e から \u003ccode\u003esubmitting\u003c/code\u003e,  \u003ccode\u003edirty\u003c/code\u003e という boolean 値が返ってくるので、それを使えば簡単に実装できます。\u003c/p\u003e\n\n\u003cpre class=\"code lang-typescript\" data-lang=\"typescript\" data-unlink\u003e  \u003cspan class=\"synStatement\"\u003econst\u003c/span\u003e \u003cspan class=\"synIdentifier\"\u003e{\u003c/span\u003e fields\u003cspan class=\"synStatement\"\u003e,\u003c/span\u003e submit\u003cspan class=\"synStatement\"\u003e,\u003c/span\u003e submitting\u003cspan class=\"synStatement\"\u003e,\u003c/span\u003e dirty \u003cspan class=\"synIdentifier\"\u003e}\u003c/span\u003e \u003cspan class=\"synStatement\"\u003e=\u003c/span\u003e useForm\u003cspan class=\"synStatement\"\u003e(\u003c/span\u003e\u003cspan class=\"synIdentifier\"\u003e{\u003c/span\u003e ... \u003cspan class=\"synIdentifier\"\u003e}\u003c/span\u003e\u003cspan class=\"synStatement\"\u003e);\u003c/span\u003e\n\u003c/pre\u003e\n\n\n\n\n\u003cpre class=\"code lang-typescript\" data-lang=\"typescript\" data-unlink\u003e        \u003cspan class=\"synStatement\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"synConstant\"\u003eButton\u003c/span\u003e submit primary loading\u003cspan class=\"synStatement\"\u003e=\u003c/span\u003e\u003cspan class=\"synIdentifier\"\u003e{\u003c/span\u003esubmitting\u003cspan class=\"synIdentifier\"\u003e}\u003c/span\u003e disabled\u003cspan class=\"synStatement\"\u003e=\u003c/span\u003e\u003cspan class=\"synIdentifier\"\u003e{\u003c/span\u003e!dirty\u003cspan class=\"synIdentifier\"\u003e}\u003c/span\u003e\u003cspan class=\"synStatement\"\u003e\u0026gt;\u003c/span\u003e\n          保存\n        \u003cspan class=\"synStatement\"\u003e\u0026lt;\u003c/span\u003e/\u003cspan class=\"synConstant\"\u003eButton\u003c/span\u003e\u003cspan class=\"synStatement\"\u003e\u0026gt;\u003c/span\u003e\n\u003c/pre\u003e\n\n\n\u003cp\u003e\u003cspan itemscope itemtype=\"http://schema.org/Photograph\"\u003e\u003cimg src=\"https://cdn-ak.f.st-hatena.com/images/fotolife/m/mashabow/20201207/20201207104838.gif\" alt=\"f:id:mashabow:20201207104838g:plain\" title=\"\" class=\"hatena-fotolife\" itemprop=\"image\"\u003e\u003c/span\u003e\u003c/p\u003e\n\n\u003ch2\u003esubmit に失敗した場合\u003c/h2\u003e\n\n\u003cp\u003e実際のアプリでは、submit してもバックエンド側のバリデーションに弾かれたり、そもそもバックエンドが落ちていたりと、失敗するケースがいろいろあります。失敗時の処理はどうすればいいでしょうか？\u003c/p\u003e\n\n\u003cp\u003e上で少し触れましたが、失敗した場合は \u003ca href=\"https://github.com/Shopify/quilt/blob/%40shopify/react-form%400.9.0/packages/react-form/src/types.ts#L77-L89\"\u003e\u003ccode\u003e{ status: \"fail\", errors: [...] }\u003c/code\u003e という形式\u003c/a\u003eでエラーの内容を返すようにします。以下にサンプルを挙げました。「名前が  \u003ccode\u003e\"Shopify大嫌いパーソン\"\u003c/code\u003e だったらエラーを返す」ようなバックエンドを想像してみてください。\u003c/p\u003e\n\n\u003cpre class=\"code lang-typescript\" data-lang=\"typescript\" data-unlink\u003e  \u003cspan class=\"synStatement\"\u003econst\u003c/span\u003e \u003cspan class=\"synIdentifier\"\u003e{\u003c/span\u003e fields\u003cspan class=\"synStatement\"\u003e,\u003c/span\u003e submit\u003cspan class=\"synStatement\"\u003e,\u003c/span\u003e submitErrors\u003cspan class=\"synStatement\"\u003e,\u003c/span\u003e submitting\u003cspan class=\"synStatement\"\u003e,\u003c/span\u003e dirty \u003cspan class=\"synIdentifier\"\u003e}\u003c/span\u003e \u003cspan class=\"synStatement\"\u003e=\u003c/span\u003e useForm\u003cspan class=\"synStatement\"\u003e(\u003c/span\u003e\u003cspan class=\"synIdentifier\"\u003e{\u003c/span\u003e\n    fields: \u003cspan class=\"synIdentifier\"\u003e{\u003c/span\u003e\n      name: useField\u003cspan class=\"synStatement\"\u003e(\u003c/span\u003e\u003cspan class=\"synIdentifier\"\u003e{\u003c/span\u003e ... \u003cspan class=\"synIdentifier\"\u003e}\u003c/span\u003e\u003cspan class=\"synStatement\"\u003e),\u003c/span\u003e\n      age: useField\u003cspan class=\"synStatement\"\u003e(\u003c/span\u003e\u003cspan class=\"synIdentifier\"\u003e{\u003c/span\u003e ... \u003cspan class=\"synIdentifier\"\u003e}\u003c/span\u003e\u003cspan class=\"synStatement\"\u003e),\u003c/span\u003e\n      christmas: useField\u003cspan class=\"synStatement\"\u003e(\u003c/span\u003e\u003cspan class=\"synIdentifier\"\u003e{\u003c/span\u003e ... \u003cspan class=\"synIdentifier\"\u003e}\u003c/span\u003e\u003cspan class=\"synStatement\"\u003e),\u003c/span\u003e\n    \u003cspan class=\"synIdentifier\"\u003e}\u003c/span\u003e\u003cspan class=\"synStatement\"\u003e,\u003c/span\u003e\n    \u003cspan class=\"synSpecial\"\u003eonSubmit\u003c/span\u003e: \u003cspan class=\"synStatement\"\u003easync\u003c/span\u003e \u003cspan class=\"synStatement\"\u003e(\u003c/span\u003efieldValues\u003cspan class=\"synStatement\"\u003e)\u003c/span\u003e \u003cspan class=\"synStatement\"\u003e=\u0026gt;\u003c/span\u003e \u003cspan class=\"synIdentifier\"\u003e{\u003c/span\u003e\n      \u003cspan class=\"synComment\"\u003e// 今回はサンプルなので、適当な待ち時間を挟んでここで結果を返す\u003c/span\u003e\n      \u003cspan class=\"synStatement\"\u003eawait\u003c/span\u003e \u003cspan class=\"synStatement\"\u003enew\u003c/span\u003e Promise\u003cspan class=\"synStatement\"\u003e((\u003c/span\u003eresolve\u003cspan class=\"synStatement\"\u003e)\u003c/span\u003e \u003cspan class=\"synStatement\"\u003e=\u0026gt;\u003c/span\u003e setTimeout\u003cspan class=\"synStatement\"\u003e(\u003c/span\u003eresolve\u003cspan class=\"synStatement\"\u003e,\u003c/span\u003e \u003cspan class=\"synConstant\"\u003e1000\u003c/span\u003e\u003cspan class=\"synStatement\"\u003e));\u003c/span\u003e\n      \u003cspan class=\"synStatement\"\u003econst\u003c/span\u003e result \u003cspan class=\"synStatement\"\u003e=\u003c/span\u003e\n        fieldValues.name \u003cspan class=\"synStatement\"\u003e===\u003c/span\u003e \u003cspan class=\"synConstant\"\u003e\u0026quot;Shopify大嫌いパーソン\u0026quot;\u003c/span\u003e\n          ? \u003cspan class=\"synComment\"\u003e// submit 失敗の例\u003c/span\u003e\n            \u003cspan class=\"synIdentifier\"\u003e{\u003c/span\u003e\n              \u003cspan class=\"synStatement\"\u003estatus\u003c/span\u003e: \u003cspan class=\"synConstant\"\u003e\u0026quot;fail\u0026quot;\u003c/span\u003e \u003cspan class=\"synStatement\"\u003eas\u003c/span\u003e \u003cspan class=\"synStatement\"\u003econst,\u003c/span\u003e\n              errors: \u003cspan class=\"synIdentifier\"\u003e[\u003c/span\u003e\n                \u003cspan class=\"synComment\"\u003e// 特定のフィールドにひもづかないエラー\u003c/span\u003e\n                \u003cspan class=\"synIdentifier\"\u003e{\u003c/span\u003e message: \u003cspan class=\"synConstant\"\u003e\u0026quot;なんか失敗しました\u0026quot;\u003c/span\u003e \u003cspan class=\"synIdentifier\"\u003e}\u003c/span\u003e\u003cspan class=\"synStatement\"\u003e,\u003c/span\u003e\n                \u003cspan class=\"synComment\"\u003e// 特定のフィールドにひもづくエラー\u003c/span\u003e\n                \u003cspan class=\"synIdentifier\"\u003e{\u003c/span\u003e message: \u003cspan class=\"synConstant\"\u003e\u0026quot;この名前は使えません\u0026quot;\u003c/span\u003e\u003cspan class=\"synStatement\"\u003e,\u003c/span\u003e field: \u003cspan class=\"synIdentifier\"\u003e[\u003c/span\u003e\u003cspan class=\"synConstant\"\u003e\u0026quot;name\u0026quot;\u003c/span\u003e\u003cspan class=\"synIdentifier\"\u003e]\u003c/span\u003e \u003cspan class=\"synIdentifier\"\u003e}\u003c/span\u003e\n              \u003cspan class=\"synIdentifier\"\u003e]\u003c/span\u003e\n            \u003cspan class=\"synIdentifier\"\u003e}\u003c/span\u003e\n          : \u003cspan class=\"synComment\"\u003e// submit 成功の例\u003c/span\u003e\n            \u003cspan class=\"synIdentifier\"\u003e{\u003c/span\u003e \u003cspan class=\"synStatement\"\u003estatus\u003c/span\u003e: \u003cspan class=\"synConstant\"\u003e\u0026quot;success\u0026quot;\u003c/span\u003e \u003cspan class=\"synStatement\"\u003eas\u003c/span\u003e \u003cspan class=\"synStatement\"\u003econst\u003c/span\u003e \u003cspan class=\"synIdentifier\"\u003e}\u003c/span\u003e\u003cspan class=\"synStatement\"\u003e;\u003c/span\u003e\n      \u003cspan class=\"synStatement\"\u003ereturn\u003c/span\u003e result\u003cspan class=\"synStatement\"\u003e;\u003c/span\u003e\n    \u003cspan class=\"synIdentifier\"\u003e}\u003c/span\u003e\n  \u003cspan class=\"synIdentifier\"\u003e}\u003c/span\u003e\u003cspan class=\"synStatement\"\u003e);\u003c/span\u003e\n\u003c/pre\u003e\n\n\n\u003cp\u003eこのように、\u003ccode\u003eerrors\u003c/code\u003e には複数のエラーを含めることができます。また、\u003ccode\u003efield\u003c/code\u003e プロパティによって、エラーとフィールドをひもづけることもできます。このひもづけを行うと、フィールドの傍にエラーメッセージが表示されるようになります。\u003c/p\u003e\n\n\u003cp\u003e\u003cspan itemscope itemtype=\"http://schema.org/Photograph\"\u003e\u003cimg src=\"https://cdn-ak.f.st-hatena.com/images/fotolife/m/mashabow/20201207/20201207105611.png\" alt=\"f:id:mashabow:20201207105611p:plain\" title=\"\" class=\"hatena-fotolife\" itemprop=\"image\"\u003e\u003c/span\u003e\u003c/p\u003e\n\n\u003cp\u003e一方、フィールドにひもづかないエラーは、そのままでは UI 上に何も表示されません。\u003ccode\u003euseForm\u003c/code\u003e の戻り値の \u003ccode\u003esubmitErrors\u003c/code\u003e には、（フィールドにひもづくか否かに関わらず）すべてのエラーが入っているので、これを \u003ca href=\"https://polaris.shopify.com/components/feedback-indicators/banner#navigation\"\u003e\u003ccode\u003eBanner\u003c/code\u003e\u003c/a\u003e コンポーネントに表示させてみましょう。\u003c/p\u003e\n\n\u003cpre class=\"code lang-typescript\" data-lang=\"typescript\" data-unlink\u003e    \u003cspan class=\"synStatement\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"synConstant\"\u003eForm\u003c/span\u003e \u003cspan class=\"synSpecial\"\u003eonSubmit\u003c/span\u003e\u003cspan class=\"synStatement\"\u003e=\u003c/span\u003e\u003cspan class=\"synIdentifier\"\u003e{\u003c/span\u003esubmit\u003cspan class=\"synIdentifier\"\u003e}\u003c/span\u003e\u003cspan class=\"synStatement\"\u003e\u0026gt;\u003c/span\u003e\n      \u003cspan class=\"synStatement\"\u003e\u0026lt;\u003c/span\u003eFormLayout\u003cspan class=\"synStatement\"\u003e\u0026gt;\u003c/span\u003e\n        \u003cspan class=\"synIdentifier\"\u003e{\u003c/span\u003esubmitErrors.\u003cspan class=\"synSpecial\"\u003elength\u003c/span\u003e \u003cspan class=\"synStatement\"\u003e\u0026gt;\u003c/span\u003e \u003cspan class=\"synConstant\"\u003e0\u003c/span\u003e \u003cspan class=\"synConstant\"\u003e\u0026amp;\u0026amp;\u003c/span\u003e \u003cspan class=\"synStatement\"\u003e(\u003c/span\u003e\n          \u003cspan class=\"synStatement\"\u003e\u0026lt;\u003c/span\u003eBanner \u003cspan class=\"synStatement\"\u003estatus=\u003c/span\u003e\u003cspan class=\"synConstant\"\u003e\u0026quot;critical\u0026quot;\u003c/span\u003e\u003cspan class=\"synStatement\"\u003e\u0026gt;\u003c/span\u003e\n            \u003cspan class=\"synStatement\"\u003e\u0026lt;\u003c/span\u003ep\u003cspan class=\"synStatement\"\u003e\u0026gt;\u003c/span\u003e保存に失敗しました。\u003cspan class=\"synStatement\"\u003e\u0026lt;\u003c/span\u003e/p\u003cspan class=\"synStatement\"\u003e\u0026gt;\u003c/span\u003e\n            \u003cspan class=\"synStatement\"\u003e\u0026lt;\u003c/span\u003eul\u003cspan class=\"synStatement\"\u003e\u0026gt;\u003c/span\u003e\n              \u003cspan class=\"synIdentifier\"\u003e{\u003c/span\u003esubmitErrors.map\u003cspan class=\"synStatement\"\u003e((\u003c/span\u003e\u003cspan class=\"synIdentifier\"\u003e{\u003c/span\u003e message \u003cspan class=\"synIdentifier\"\u003e}\u003c/span\u003e\u003cspan class=\"synStatement\"\u003e,\u003c/span\u003e i\u003cspan class=\"synStatement\"\u003e)\u003c/span\u003e \u003cspan class=\"synStatement\"\u003e=\u0026gt;\u003c/span\u003e \u003cspan class=\"synStatement\"\u003e(\u003c/span\u003e\n                \u003cspan class=\"synStatement\"\u003e\u0026lt;\u003c/span\u003eli key\u003cspan class=\"synStatement\"\u003e=\u003c/span\u003e\u003cspan class=\"synIdentifier\"\u003e{\u003c/span\u003ei\u003cspan class=\"synIdentifier\"\u003e}\u003c/span\u003e\u003cspan class=\"synStatement\"\u003e\u0026gt;\u003c/span\u003e\u003cspan class=\"synIdentifier\"\u003e{\u003c/span\u003emessage\u003cspan class=\"synIdentifier\"\u003e}\u003c/span\u003e\u003cspan class=\"synStatement\"\u003e\u0026lt;\u003c/span\u003e/li\u003cspan class=\"synStatement\"\u003e\u0026gt;\u003c/span\u003e\n              \u003cspan class=\"synStatement\"\u003e))\u003c/span\u003e\u003cspan class=\"synIdentifier\"\u003e}\u003c/span\u003e\n            \u003cspan class=\"synStatement\"\u003e\u0026lt;\u003c/span\u003e/ul\u003cspan class=\"synStatement\"\u003e\u0026gt;\u003c/span\u003e\n          \u003cspan class=\"synStatement\"\u003e\u0026lt;\u003c/span\u003e/Banner\u003cspan class=\"synStatement\"\u003e\u0026gt;\u003c/span\u003e\n        \u003cspan class=\"synStatement\"\u003e)\u003c/span\u003e\u003cspan class=\"synIdentifier\"\u003e}\u003c/span\u003e\n        \u003cspan class=\"synIdentifier\"\u003e{\u003c/span\u003e\u003cspan class=\"synComment\"\u003e/* 略（フォームの中身） */\u003c/span\u003e\u003cspan class=\"synIdentifier\"\u003e}\u003c/span\u003e\n      \u003cspan class=\"synStatement\"\u003e\u0026lt;\u003c/span\u003e/FormLayout\u003cspan class=\"synStatement\"\u003e\u0026gt;\u003c/span\u003e\n    \u003cspan class=\"synStatement\"\u003e\u0026lt;\u003c/span\u003e/\u003cspan class=\"synConstant\"\u003eForm\u003c/span\u003e\u003cspan class=\"synStatement\"\u003e\u0026gt;\u003c/span\u003e\n\u003c/pre\u003e\n\n\n\u003cp\u003e\u003cspan itemscope itemtype=\"http://schema.org/Photograph\"\u003e\u003cimg src=\"https://cdn-ak.f.st-hatena.com/images/fotolife/m/mashabow/20201207/20201207105711.png\" alt=\"f:id:mashabow:20201207105711p:plain\" title=\"\" class=\"hatena-fotolife\" itemprop=\"image\"\u003e\u003c/span\u003e\u003c/p\u003e\n\n\u003cp\u003eこれでいい感じのフォームができあがりました！ さわって試してみてください。\u003c/p\u003e\n\n\u003ciframe src=\"https://codesandbox.io/embed/shopifyreact-form-2-1wpxz?expanddevtools=1\u0026fontsize=12\u0026hidenavigation=1\u0026module=%2Fsrc%2FMyForm.tsx\u0026theme=dark\"\n     style=\"width:100%; height:600px; border:0; border-radius: 4px; overflow:hidden;\"\n     title=\"@shopify/react-form 2\"\n     allow=\"accelerometer; ambient-light-sensor; camera; encrypted-media; geolocation; gyroscope; hid; microphone; midi; payment; usb; vr; xr-spatial-tracking\"\n     sandbox=\"allow-forms allow-modals allow-popups allow-presentation allow-same-origin allow-scripts\"\n   \u003e\u003c/iframe\u003e\n\n\n\u003ch2\u003eおまけの補足\u003c/h2\u003e\n\n\u003cul\u003e\n\u003cli\u003e\u003ca href=\"https://polaris.shopify.com/components/forms/checkbox#navigation\"\u003e\u003ccode\u003eCheckbox\u003c/code\u003e\u003c/a\u003e や \u003ca href=\"https://polaris.shopify.com/components/forms/radio-button#navigation\"\u003e\u003ccode\u003eRadioButton\u003c/code\u003e\u003c/a\u003e に props を渡す場合は、\u003ca href=\"https://github.com/Shopify/quilt/tree/%40shopify/react-form%400.9.0/packages/react-form#aschoicefield\"\u003e\u003ccode\u003easChoiceField\u003c/code\u003e\u003c/a\u003e を使う必要があります。\u003c/li\u003e\n\u003cli\u003e実際の埋め込みアプリのフォームでは、さらに App Bridge の \u003ca href=\"https://shopify-dev.shopifycloud.com/tools/app-bridge/actions/contextualSaveBar\"\u003e\u003ccode\u003eContextualSaveBar\u003c/code\u003e\u003c/a\u003e を併用するのがおすすめです。機能としては Polaris の \u003ca href=\"https://polaris.shopify.com/components/forms/contextual-save-bar\"\u003e\u003ccode\u003eContexualSaveBar\u003c/code\u003e\u003c/a\u003e と似ていますが、App Bridge の \u003ccode\u003eContextualSaveBar\u003c/code\u003e を使った方が、一貫した UI/UX を提供できます。\u003c/li\u003e\n\u003c/ul\u003e\n\n\n\u003ch2\u003eおわりに\u003c/h2\u003e\n\n\u003cp\u003eというわけで、@shopify/react-form を簡単に紹介しました。Shopify 公式が開発しているだけあって、手軽に Polaris と組み合わせられるところが嬉しいですね。\u003c/p\u003e\n\n\u003cp\u003e明日のアドベントカレンダーは \u003ca href=\"https://qiita.com/mixlogue\"\u003emixlogue\u003c/a\u003e さんによる「\u003ca href=\"https://qiita.com/mixlogue/items/2d8febae3b98cbdfebb8\"\u003eサードパーティクッキーの問題を解決するApp Bridgeの新しい仕様、セッショントークンに対応する（Next.js版）\u003c/a\u003e」です。ちょうど弊アプリもセッショントークンを採用したところなので、mixlogue さんがどのように実装されたのか、とても気になります！\u003c/p\u003e\n\n\u003cp\u003eではでは。\u003c/p\u003e\n\u003cdiv class=\"footnotes\"\u003e\n\u003chr/\u003e\n\u003col\u003e\n\u003cli id=\"fn:1\"\u003e\n\u003cp\u003eよく覚えていませんが、\u003ca href=\"https://www.reddit.com/r/reactjs/comments/f4cu80/form_validation_library_suggestions/fhpz8i5/\"\u003eおそらくここ？\u003c/a\u003e \u003ca href=\"#fnref:1\" rev=\"footnote\"\u003e\u0026#8617;\u003c/a\u003e\u003c/p\u003e\u003c/li\u003e\n\u003cli id=\"fn:2\"\u003e\n\u003cp\u003eただし、\u003ccode\u003eonSubmit\u003c/code\u003e 関数が実行される前にクライアントサイドバリデーションが走ります。クライアントサイドバリデーションに引っかかった場合は、\u003ccode\u003eonSubmit\u003c/code\u003e 関数の中身は実行されません。\u003ca href=\"#fnref:2\" rev=\"footnote\"\u003e\u0026#8617;\u003c/a\u003e\u003c/p\u003e\u003c/li\u003e\n\u003c/ol\u003e\n\u003c/div\u003e\n\n","contentSnippet":"こんにちは、id:mashabow です。この記事は、Shopify開発を盛り上げる Advent Calendar 2020 の 8 日目にあたります。昨日は minozo さんの「ShopifyでARを実装する方法(2020/12版)」でした。現在弊社では、ソーシャルPLUS の Shopify アプリ版を開発しており、わたしは埋め込みアプリ（Embedded App）のフロントエンド担当です。わかりやすく言えば、マーチャントの方に触っていただく設定画面を作っているわけです。そんな設定画面に必要不可欠で、かつ意外と厄介なのがフォームの実装です。今回は、フォームの状態管理に @shopify/react-form というライブラリを使ってみました。この記事では、その @shopify/react-form の使い方を紹介したいと思います。フォーム管理ライブラリを選ぶ前提として、フレームワークには React（Next.js）を、コンポーネントライブラリは Shopify 本家の Polaris を使用しています。Polaris はあくまでもコンポーネントライブラリなので、フォームの状態を管理するための機能は入っていません。useState を使うなり、他のフォーム管理ライブラリを使うなりして、自分でよしなに管理する必要があります。実は、最初は軽量・高速な React Hook Form を使おうかとぼんやり考えていました。しかしよくよく見てみると、Polaris のコンポーネントは React Hook Form に必要な ref を受け取ることができません。Controlled components として作られていますしね。一応、React Hook Form の Controller でラップして使う手があるようですが、それも手間がかかりそうです。とりあえず他の人のやり方を参考にしようか……と検索してみたところ、どこかで @shopify/react-form というライブラリを見つけました1。www.npmjs.comREADME を読むとThe hooks provided here also work swimmingly with @shopify/polaris.との言葉があり、期待が持てそうです。Shopify 公式サイトからの言及が皆無なのが謎で若干不安になりますが、Shopify 公式のパッケージです。なお、この記事の執筆時点では v0.9.0 が最新です。@shopify/react-form でフォームを定義する前置きが長くなりましたが、実際に使ってみましょう。使い方としては、Formik に似ています。詳しいところは README に譲るとして、まずは単純な例を用意しました。最初に、useForm でフォームの定義をします。その中では、useField を使って各フィールドの定義をしています。fields  のキー（下の例では name にしました）が、フィールドの識別子になります。  const { fields, submit } = useForm({    fields: {      // 「名前」フィールドの定義      name: useField({        value: \"Shopify大好きパーソン\", // 初期値        validates: [          notEmpty(\"必須項目です\"),          lengthMoreThan(2, \"3文字以上で入力してください\")        ]      }),      ...    },    onSubmit: ...  });useField の引数の value は初期値です。実際には空 \"\" だったり、前回保存した値をバックエンド API から取ってきて入れたりすることが多いでしょう。validates には、バリデーションに使う関数を指定します。上の例では @shopify/react-form に組み込まれているバリデーション関数を使っていますが、種類はそれほど多くはありません。自作することもできます。useForm の onSubmit には submit 時の処理を書きますが、これは次節で説明します。さて、これでフォームの定義ができました。useForm の戻り値の fields に、各フィールドの状態やハンドラが入っているので、今度はこれを Polaris のコンポーネントに結びつけます。上の例では name という識別子のフィールドを定義したので、fields.name を spread して        \u003cTextField label=\"名前\" {...fields.name} /\u003eと渡してやるだけで  TextField コンポーネントが動作します。@shopify/react-form が、Polaris のインターフェイスに合わせて作られているおかげですね。べんり！また、先ほどバリデーション関数を指定したので、バリデーションもちゃんと動きます。blur 時にバリデーションが実行され、エラーが表示されているのがわかります。submit 処理を実装するフォームが一通りできたら、submit 時の処理を実装しましょう。useFleid の引数の onSubmit に、async で処理内容を書きます。各フィールドの値は、引数 fieldValues として  onSubmit に渡されます。以下に例を示します。実際のアプリでは、onSubmit の中で fieldValues をバックエンドに送信するケースがほとんどかと思いますが、今回はサンプルなので、「送信して結果が返ってきたつもり」の処理を入れています。  const { fields, submit } = useForm({    fields: {      name: useField({ ... }),      age: useField({ ... }),      christmas: useField({ ... }),    },    onSubmit: async (fieldValues) =\u003e {      console.log(fieldValues);      // =\u003e { name: \"...\", age: \"...\", christmas: \"...\" }      // 実際のアプリではバックエンドに送信するが、      // const result = await submitToBackend(fieldValues);      // 今回はサンプルなので、適当な待ち時間を挟んでここで結果を返す      await new Promise((resolve) =\u003e setTimeout(resolve, 1000));      return { status: \"success\" };    }  });onSubmit 関数の戻り値によって、submit が成功したか失敗したかを表現します。成功の場合は { status: \"success\" } を返すきまりになっています。失敗した場合は、{ status: \"fail\", errors: [...] } という形式ですが、こちらについては次の節で説明します。useForm の戻り値に、submit を実行する submit 関数が入っているので、Form コンポーネントの  onSubmit prop に渡します。これで、[保存] ボタンをクリックしたときに、先ほど実装した onSubmit 関数の処理が実行されるようになりました2。    \u003cForm onSubmit={submit}\u003e      \u003cFormLayout\u003e        \u003cTextField label=\"名前\" {...fields.name} /\u003e        \u003cTextField label=\"年齢\" type=\"number\" {...fields.age} /\u003e        \u003cSelect          label=\"クリスマスといえば？\"          options={christmasOptions}          {...fields.christmas}        /\u003e        \u003cButton submit primary\u003e保存\u003c/Button\u003e      \u003c/FormLayout\u003e    \u003c/Form\u003eさらに使いやすくするために、submit 処理中は、[保存] ボタンを loading 状態にするどのフィールドも変更されていなれば、[保存] ボタンを disabled にするという制御を追加しましょう。useForm から submitting,  dirty という boolean 値が返ってくるので、それを使えば簡単に実装できます。  const { fields, submit, submitting, dirty } = useForm({ ... });        \u003cButton submit primary loading={submitting} disabled={!dirty}\u003e          保存        \u003c/Button\u003esubmit に失敗した場合実際のアプリでは、submit してもバックエンド側のバリデーションに弾かれたり、そもそもバックエンドが落ちていたりと、失敗するケースがいろいろあります。失敗時の処理はどうすればいいでしょうか？上で少し触れましたが、失敗した場合は { status: \"fail\", errors: [...] } という形式でエラーの内容を返すようにします。以下にサンプルを挙げました。「名前が  \"Shopify大嫌いパーソン\" だったらエラーを返す」ようなバックエンドを想像してみてください。  const { fields, submit, submitErrors, submitting, dirty } = useForm({    fields: {      name: useField({ ... }),      age: useField({ ... }),      christmas: useField({ ... }),    },    onSubmit: async (fieldValues) =\u003e {      // 今回はサンプルなので、適当な待ち時間を挟んでここで結果を返す      await new Promise((resolve) =\u003e setTimeout(resolve, 1000));      const result =        fieldValues.name === \"Shopify大嫌いパーソン\"          ? // submit 失敗の例            {              status: \"fail\" as const,              errors: [                // 特定のフィールドにひもづかないエラー                { message: \"なんか失敗しました\" },                // 特定のフィールドにひもづくエラー                { message: \"この名前は使えません\", field: [\"name\"] }              ]            }          : // submit 成功の例            { status: \"success\" as const };      return result;    }  });このように、errors には複数のエラーを含めることができます。また、field プロパティによって、エラーとフィールドをひもづけることもできます。このひもづけを行うと、フィールドの傍にエラーメッセージが表示されるようになります。一方、フィールドにひもづかないエラーは、そのままでは UI 上に何も表示されません。useForm の戻り値の submitErrors には、（フィールドにひもづくか否かに関わらず）すべてのエラーが入っているので、これを Banner コンポーネントに表示させてみましょう。    \u003cForm onSubmit={submit}\u003e      \u003cFormLayout\u003e        {submitErrors.length \u003e 0 \u0026\u0026 (          \u003cBanner status=\"critical\"\u003e            \u003cp\u003e保存に失敗しました。\u003c/p\u003e            \u003cul\u003e              {submitErrors.map(({ message }, i) =\u003e (                \u003cli key={i}\u003e{message}\u003c/li\u003e              ))}            \u003c/ul\u003e          \u003c/Banner\u003e        )}        {/* 略（フォームの中身） */}      \u003c/FormLayout\u003e    \u003c/Form\u003eこれでいい感じのフォームができあがりました！ さわって試してみてください。おまけの補足Checkbox や RadioButton に props を渡す場合は、asChoiceField を使う必要があります。実際の埋め込みアプリのフォームでは、さらに App Bridge の ContextualSaveBar を併用するのがおすすめです。機能としては Polaris の ContexualSaveBar と似ていますが、App Bridge の ContextualSaveBar を使った方が、一貫した UI/UX を提供できます。おわりにというわけで、@shopify/react-form を簡単に紹介しました。Shopify 公式が開発しているだけあって、手軽に Polaris と組み合わせられるところが嬉しいですね。明日のアドベントカレンダーは mixlogue さんによる「サードパーティクッキーの問題を解決するApp Bridgeの新しい仕様、セッショントークンに対応する（Next.js版）」です。ちょうど弊アプリもセッショントークンを採用したところなので、mixlogue さんがどのように実装されたのか、とても気になります！ではでは。よく覚えていませんが、おそらくここ？ ↩ただし、onSubmit 関数が実行される前にクライアントサイドバリデーションが走ります。クライアントサイドバリデーションに引っかかった場合は、onSubmit 関数の中身は実行されません。↩","link":"https://developer.feedforce.jp/entry/2020/12/08/120000","isoDate":"2020-12-08T03:00:00.000Z","dateMiliSeconds":1607396400000,"imageUrl":"https://cdn-ak.f.st-hatena.com/images/fotolife/m/mashabow/20201207/20201207160849.png","authorName":"mashabow"},{"title":"題字ペタペタができるまで","content":"\u003cp\u003e新聞の題字が一覧できるサイト・\u003ca href=\"https://daipeta.com\"\u003e題字ペタペタ\u003c/a\u003eを、\u003ca href=\"https://twitter.com/nekonopen\"\u003eねこぺん\u003c/a\u003eと作って公開しました。\u003c/p\u003e\n\n\u003cp\u003e\u003ciframe src=\"https://hatenablog-parts.com/embed?url=https%3A%2F%2Fdaipeta.com\" title=\"題字ペタペタ - 日本の新聞の題字あつめました\" class=\"embed-card embed-webcard\" scrolling=\"no\" frameborder=\"0\" style=\"display: block; width: 100%; height: 155px; max-width: 500px; margin: 10px 0px;\"\u003e\u003c/iframe\u003e\u003ccite class=\"hatena-citation\"\u003e\u003ca href=\"https://daipeta.com\"\u003edaipeta.com\u003c/a\u003e\u003c/cite\u003e\u003c/p\u003e\n\n\u003cp\u003eこんな感じで、いろいろな新聞の題字を掲載しています。絞り込み検索もできます。\u003c/p\u003e\n\n\u003cp\u003e\u003cfigure class=\"figure-image figure-image-fotolife\" title=\"題字ペタペタのトップページ\"\u003e\u003cspan itemscope itemtype=\"http://schema.org/Photograph\"\u003e\u003cimg src=\"https://cdn-ak.f.st-hatena.com/images/fotolife/m/mashabow/20200914/20200914200511.png\" alt=\"f:id:mashabow:20200914200511p:plain\" title=\"f:id:mashabow:20200914200511p:plain\" class=\"hatena-fotolife\" itemprop=\"image\"\u003e\u003c/span\u003e\u003cfigcaption\u003e題字ペタペタのトップページ\u003c/figcaption\u003e\u003c/figure\u003e\u003c/p\u003e\n\n\u003cp\u003eこの題字ペタペタができるまでの話を、社内勉強会で発表しました。スライドを置いておきますので、どうぞご覧ください。\u003c/p\u003e\n\n\u003cp\u003e\u003ciframe id=\"talk_frame_665734\" src=\"//speakerdeck.com/player/3d8da29756b4456e89023932c5a61853\" width=\"710\" height=\"399\" style=\"border:0; padding:0; margin:0; background:transparent;\" frameborder=\"0\" allowtransparency=\"true\" allowfullscreen=\"allowfullscreen\" mozallowfullscreen=\"true\" webkitallowfullscreen=\"true\"\u003e\u003c/iframe\u003e \u003ccite class=\"hatena-citation\"\u003e\u003ca href=\"https://speakerdeck.com/mashabow/fftt-number-409\"\u003espeakerdeck.com\u003c/a\u003e\u003c/cite\u003e\u003c/p\u003e\n\n\u003cp\u003e技術的には、\u003ca href=\"https://www.contentful.com/\"\u003eContentful\u003c/a\u003e に入れたデータをもとに \u003ca href=\"https://www.gatsbyjs.com/\"\u003eGatsby\u003c/a\u003e でページを生成し、\u003ca href=\"https://www.netlify.com/\"\u003eNetlify\u003c/a\u003e で\u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/%A5%DB%A5%B9%A5%C6%A5%A3%A5%F3%A5%B0\"\u003eホスティング\u003c/a\u003eしています。ここ最近よく見かける定番の構成ですね。\u003c/p\u003e\n\n\u003cp\u003eまた、Web フォントサービス \u003ca href=\"https://www.realtype.jp/\"\u003eREALTYPE\u003c/a\u003e を利用して、\u003ca href=\"https://www.iwatafont.co.jp/font/ud_news.html\"\u003eイワタ UD 新聞明朝 や イワタ UD 新聞ゴシック\u003c/a\u003eで組んでいます。簡単に使えるだろうと甘く見ていたら、これになかなか苦労したんですが、それについてはまた別の記事で。\u003c/p\u003e\n\n\u003cp\u003eデザインについては、主にねこぺんが担当してくれました。素人ながらかなり頑張って、いいサイトができあがったんじゃないかと思います。慣れない\u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/%A5%BF%A5%D6%A5%EC%A5%C3%A5%C8\"\u003eタブレット\u003c/a\u003eと格闘しながら、かわいいイラストも描いてくれました。\u003c/p\u003e\n\n\u003cp\u003eひとまず完成はしましたが、これからも少しずつ拡充していきますので、題字ペタペタをどうぞごひいきに。\u003c/p\u003e\n\n\u003ch3\u003e参考書籍\u003c/h3\u003e\n\n\u003cul\u003e\n\u003cli\u003e\u003ca href=\"https://booth.pm/ja/items/1312387\"\u003eGatsbyJS Guidebook - mottox2（つのぶえ出版） - BOOTH\u003c/a\u003e\n\n\u003cul\u003e\n\u003cli\u003e\u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/Gatsby\"\u003eGatsby\u003c/a\u003e や Contentful に触り始めたころに参考にしました。入門者向け。\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"https://amzn.to/3bWrocJ\"\u003eUIデザインの教科書［新版］マルチデバイス時代のインターフェース設計\u003c/a\u003e\n\n\u003cul\u003e\n\u003cli\u003eWeb デザインの基礎を押さえるためにふたりで読みました。実例の\u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/%A5%B9%A5%AF%A5%EA%A1%BC%A5%F3%A5%B7%A5%E7%A5%C3%A5%C8\"\u003eスクリーンショット\u003c/a\u003eが多くてわかりやすい内容です。\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\n","contentSnippet":"新聞の題字が一覧できるサイト・題字ペタペタを、ねこぺんと作って公開しました。daipeta.comこんな感じで、いろいろな新聞の題字を掲載しています。絞り込み検索もできます。題字ペタペタのトップページこの題字ペタペタができるまでの話を、社内勉強会で発表しました。スライドを置いておきますので、どうぞご覧ください。 speakerdeck.com技術的には、Contentful に入れたデータをもとに Gatsby でページを生成し、Netlify でホスティングしています。ここ最近よく見かける定番の構成ですね。また、Web フォントサービス REALTYPE を利用して、イワタ UD 新聞明朝 や イワタ UD 新聞ゴシックで組んでいます。簡単に使えるだろうと甘く見ていたら、これになかなか苦労したんですが、それについてはまた別の記事で。デザインについては、主にねこぺんが担当してくれました。素人ながらかなり頑張って、いいサイトができあがったんじゃないかと思います。慣れないタブレットと格闘しながら、かわいいイラストも描いてくれました。ひとまず完成はしましたが、これからも少しずつ拡充していきますので、題字ペタペタをどうぞごひいきに。参考書籍GatsbyJS Guidebook - mottox2（つのぶえ出版） - BOOTHGatsby や Contentful に触り始めたころに参考にしました。入門者向け。UIデザインの教科書［新版］マルチデバイス時代のインターフェース設計Web デザインの基礎を押さえるためにふたりで読みました。実例のスクリーンショットが多くてわかりやすい内容です。","link":"https://shiromoji.hatenablog.jp/entry/2020/09/14/213000","isoDate":"2020-09-14T12:30:00.000Z","dateMiliSeconds":1600086600000,"imageUrl":"https://cdn-ak.f.st-hatena.com/images/fotolife/m/mashabow/20200914/20200914200511.png","authorName":"mashabow"},{"title":"ブラウザからローカルフォントにアクセスする：Font Enumeration API と Font Table Access API","content":"\u003cp\u003e最近の Web アプリはどんどんリッチになっていっていますが、ネイティブアプリとは違って、「ローカルフォント\u003ca href=\"#f-5ce9b760\" name=\"fn-5ce9b760\" title=\"ユーザーの端末にインストールされているフォント。デバイスフォントと呼ばれることも。\"\u003e*1\u003c/a\u003eを列挙してユーザーに選択させ、それを表示に使う」といったことは仕様上不可能です。\u003c/p\u003e\n\n\u003cp\u003e例えば、画像に文字を入れる Web アプリを考えてみます。文字の描画自体は \u003ca href=\"https://developer.mozilla.org/ja/docs/Drawing_text_using_a_canvas\"\u003ecanvas の \u003ccode\u003ectx.fillText()\u003c/code\u003e\u003c/a\u003e が使えますが、問題はフォントの指定です。\u003ca href=\"https://developer.mozilla.org/ja/docs/Web/API/CanvasRenderingContext2D/font\"\u003e\u003ccode\u003ectx.font\u003c/code\u003e\u003c/a\u003e にローカルフォントを指定するためには、そのローカルフォントのフォント名を知っている必要があります。OS にプリインストールされているフォントでなどであれば、「Web アプリ側であらかじめフォント名のリストを用意しておき、実際にインストールされているかどうかをチェック\u003ca href=\"#f-dbf8c6ce\" name=\"fn-dbf8c6ce\" title=\"適当な文字列のダミー要素を不可視状態で用意 → 要素にチェックしたいフォントを指定 → 指定前後で要素の幅が変わったかチェック、というのが常套手段でしょう。後述のフィンガープリンティングでも使われる手法です。\"\u003e*2\u003c/a\u003eしてからユーザーに選択させる」という手段がとれますが、「自分でインストールしたこのフォントが使いたい！」という要求に応えるのは現実的ではありません。\u003c/p\u003e\n\n\u003ch2\u003e提案中の2つの \u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/API\"\u003eAPI\u003c/a\u003e\u003c/h2\u003e\n\n\u003cp\u003e\u003cspan itemscope itemtype=\"http://schema.org/Photograph\"\u003e\u003ca href=\"http://f.hatena.ne.jp/mashabow/20191014220905\" class=\"hatena-fotolife\" itemprop=\"url\"\u003e\u003cimg src=\"https://cdn-ak.f.st-hatena.com/images/fotolife/m/mashabow/20191014/20191014220905.png\" alt=\"f:id:mashabow:20191014220905p:image:w300\" title=\"f:id:mashabow:20191014220905p:image:w300\" class=\"hatena-fotolife\" style=\"width:300px\" itemprop=\"image\"\u003e\u003c/a\u003e\u003c/span\u003e\u003c/p\u003e\n\n\u003cp\u003e現在、Font Enumeration \u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/API\"\u003eAPI\u003c/a\u003e・Font Table \u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/Access\"\u003eAccess\u003c/a\u003e \u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/API\"\u003eAPI\u003c/a\u003e という \u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/API\"\u003eAPI\u003c/a\u003e が提案されています。まだまだ検討中のようですが、もし標準化までたどり着けば、この状態が解消されそうです。\u003c/p\u003e\n\n\u003cul\u003e\n\u003cli\u003e\u003ca href=\"https://inexorabletash.github.io/font-enumeration/\"\u003eFont Enumeration API\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"https://inexorabletash.github.io/font-table-access/\"\u003eFont Table Access API\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\n\n\u003cp\u003eFont Enumeration \u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/API\"\u003eAPI\u003c/a\u003e が、ローカルフォントを列挙するための \u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/API\"\u003eAPI\u003c/a\u003e です。先ほどの例でやりたかったことは、これで実現できそうです。一方の Font Table \u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/Access\"\u003eAccess\u003c/a\u003e \u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/API\"\u003eAPI\u003c/a\u003e は、ローカルフォントのテーブルのバイナリにアクセスするための \u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/API\"\u003eAPI\u003c/a\u003e です。どちらも単機能で、かなりシンプルな構成になっています。\u003c/p\u003e\n\n\u003cp\u003e\u003ca href=\"https://github.com/inexorabletash/font-enumeration/tree/5c480d2fd6e301c0501134dc1055358b19d0441c#whats-all-this-then\"\u003eGitHub リポジトリの README\u003c/a\u003e によると、提案の動機としては以下のような感じです。\u003c/p\u003e\n\n\u003col\u003e\n\u003cli\u003eプロ品質のデザインツールを Web 上に作ろうとすると、以下のような障害がある\n\n\u003cul\u003e\n\u003cli\u003eWeb アプリからはローカルフォントの列挙ができない\u003c/li\u003e\n\u003cli\u003eブラウザは OS のフォントエンジンを使って描画するので、OS 間で差が生じる\u003c/li\u003e\n\u003cli\u003e（ネイティブアプリを Web アプリに移植する場合）自前のフォントエンジンはたいてい生のフォントデータを要求するものだが、Web フォントの仕様ではフォントのバイナリにアクセスできない\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003eFont Enumeration \u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/API\"\u003eAPI\u003c/a\u003e と Font Table \u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/Access\"\u003eAccess\u003c/a\u003e \u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/API\"\u003eAPI\u003c/a\u003e を提供して、このような状況を解消したい\u003c/li\u003e\n\u003c/ol\u003e\n\n\n\u003cp\u003eこの記事では \u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/API\"\u003eAPI\u003c/a\u003e の詳細には触れませんが、HarfBuzz/\u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/FreeType\"\u003eFreeType\u003c/a\u003e を WASM に乗せて、それにフォントデータを食わせて描画する、というような\u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/%A5%E6%A1%BC%A5%B9%A5%B1%A1%BC%A5%B9\"\u003eユースケース\u003c/a\u003eも\u003ca href=\"https://inexorabletash.github.io/font-table-access/#examples\"\u003e挙げられています\u003c/a\u003e。\u003c/p\u003e\n\n\u003cp\u003eちなみにこれらの \u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/API\"\u003eAPI\u003c/a\u003e、\u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/Chrome\"\u003eChrome\u003c/a\u003e（\u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/Chromium\"\u003eChromium\u003c/a\u003e）では8月下旬に \"Intent to Implement\" になったようです。\u003c/p\u003e\n\n\u003cul\u003e\n\u003cli\u003e\u003ca href=\"https://groups.google.com/a/chromium.org/d/msg/blink-dev/XfkSdpMWNik/IX67fOTLAQAJ\"\u003eIntent to Implement: Font Enumeration\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"https://groups.google.com/a/chromium.org/d/msg/blink-dev/-8wPGNpuV2Y/C5wdLebLAQAJ\"\u003eIntent to Implement: Font Table Access\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"https://www.chromestatus.com/feature/6234451761692672\"\u003eFont Enumeration - Chrome Platform Status\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"https://www.chromestatus.com/feature/5082047209013248\"\u003eFont Table Access - Chrome Platform Status\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\n\n\u003ch2\u003eローカルフォントとプライバシー\u003c/h2\u003e\n\n\u003cp\u003eしかしながら、ローカルフォントの情報は、個人を識別・同定しようとするフィンガープリンティングへの利用が懸念されます。従来では、例えば\u003ca href=\"https://github.com/Valve/fingerprintjs2/blob/54e89b2ebdbf33853a85a7be43bd17e8b859cfc6/fingerprint2.js#L524-L711\"\u003eこんなふうに\u003c/a\u003e「フォント名のリストを決め打ちしておき、そのフォントがインストールされているか順次試す」というようなことしかできませんでした。ところが、Font Enumeration \u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/API\"\u003eAPI\u003c/a\u003e と Font Table \u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/Access\"\u003eAccess\u003c/a\u003e \u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/API\"\u003eAPI\u003c/a\u003e が利用可能になると、情報をまるまる吸い出すことが可能になってしまいます。インストールの有無だけでなく、\u003ccode\u003ehead\u003c/code\u003e テーブルや \u003ccode\u003ename\u003c/code\u003e テーブルから、フォントのバージョンを取得することもできます\u003ca href=\"#f-d7613141\" name=\"fn-d7613141\" title=\"フィンガープリンティングが目的であるなら、そんな丁寧なことをしなくても、バイナリのハッシュをまるごと取ってしまえば十分そうですが。\"\u003e*3\u003c/a\u003e。フォントの販売・\u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/%A5%B5%A5%D6%A5%B9%A5%AF%A5%EA%A5%D7%A5%B7%A5%E7%A5%F3\"\u003eサブスクリプション\u003c/a\u003e方式によっては、ユーザー情報や固有識別子をフォントファイルに埋め込むものもあるでしょう。そうすると、ほとんど確実に個人を識別できてしまいます。\u003c/p\u003e\n\n\u003cp\u003eフィンガープリンティングへの懸念は、提案されている仕様書にも\u003ca href=\"https://inexorabletash.github.io/font-enumeration/#privacy\"\u003e記述があります\u003c/a\u003e。また、「会社の PC にコーポレートフォントをインストールしていると、それだけで会社が特定できちゃうよね」というような例も挙げられています。\u003c/p\u003e\n\n\u003cp\u003eこれらのプライバシー対策として、Font Enumeration \u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/API\"\u003eAPI\u003c/a\u003e と Font Table \u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/Access\"\u003eAccess\u003c/a\u003e \u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/API\"\u003eAPI\u003c/a\u003e は、\u003cstrong\u003e\u003ca href=\"https://developer.mozilla.org/ja/docs/Web/API/Permissions_API\"\u003ePermissions API\u003c/a\u003e でユーザーの許可を得てからローカルフォントにアクセスする設計\u003c/strong\u003eになっています。本当に「プロ品質のデザインツール」だけが使うのであれば、これで落ち着くかもしれません。しかし万が一、いろんなサイトでやたらめったら濫用されるようになってしまったとしたら、許可を求めるダイアログがポコポコ出てきて、なかなかうるさい未来になるかもしれません。\u003c/p\u003e\n\n\u003ch2\u003e\u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/Flash\"\u003eFlash\u003c/a\u003e 時代のローカルフォント\u003c/h2\u003e\n\n\u003cp\u003eところで、過去はどうだったんでしょう？　実は、\u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/ActionScript\"\u003eActionScript\u003c/a\u003e には Font Enumeration \u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/API\"\u003eAPI\u003c/a\u003e のようなものがありました。\u003ca href=\"https://help.adobe.com/ja_JP/FlashPlatform/reference/actionscript/3/flash/text/Font.html#enumerateFonts(%29\"\u003e\u003ccode\u003eFont.enumerateFonts(true)\u003c/code\u003e\u003c/a\u003e を実行すると、ローカルフォントも含めてフォントを列挙することができました。このおかげで \u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/Flash\"\u003eFlash\u003c/a\u003e 時代の画像加工ツールは、ローカルフォントによる文字入れが可能だったのですが、\u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/Flash\"\u003eFlash\u003c/a\u003e の衰退・サポート終了によって不可能になり、表現力が落ちてしまいました。もちろん、プライバシー面では向上したのですが。\u003c/p\u003e\n\n\u003cp\u003eちなみに、\u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/ActionScript\"\u003eActionScript\u003c/a\u003e の \u003ca href=\"https://help.adobe.com/ja_JP/as3/dev/WS5b3ccc516d4fbf351e63e3d118a9b90204-7cb2.html\"\u003e\u003ccode\u003eExternalInterface\u003c/code\u003e\u003c/a\u003e を使うと、「\u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/ActionScript\"\u003eActionScript\u003c/a\u003e で取得したフォント名を\u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/JavaScript\"\u003eJavaScript\u003c/a\u003e に渡して要素のスタイルに指定する」というようなこともできました。\u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/ActionScript\"\u003eActionScript\u003c/a\u003e 側は\u003ca href=\"https://github.com/Valve/fingerprintjs2/blob/54e89b2ebd/flash/FontList.as\"\u003eこれと同じ感じのコード\u003c/a\u003eになります。実際に自分自身、内製ツールの開発で使ったこともあります。\u003c/p\u003e\n\n\u003cp\u003eちなみにちなみに、当時は事実上、\u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/Flash\"\u003eFlash\u003c/a\u003e がどこでも勝手に実行されるような状況だったので、「ページを踏んだ人のローカルフォントを列挙してこっそりサーバーに送信」というようなことが可能でした。フォント名を送信するだけでなく、「ローカルフォントで描画して送信」までしてしまえばさらに強烈ですね。フォント制作においては、制作中のフォントを自分の PC にインストールしてテストすることが多々あります。そのような状態で、悪意をもったページを踏んだ場合、制作中のフォントの情報が漏れてしまいます。言うまでもなく、わたしはやったことありませんが。\u003c/p\u003e\n\n\u003cp\u003eFont Enumeration \u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/API\"\u003eAPI\u003c/a\u003e と Font Table \u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/Access\"\u003eAccess\u003c/a\u003e \u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/API\"\u003eAPI\u003c/a\u003e があれば、過去に \u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/Flash\"\u003eFlash\u003c/a\u003e で実現されていた表現力を取り戻し、さらに高度な文字組みなどを発展させることができます。アクセスにはユーザーの許可が必要になるので、プライバシー面もある程度担保されます。ただし、「このフォントは OK だけどこれはダメ」のようなアクセス制御は今のところできそうにないので、フォント制作者はうかつに [許可する] を押せなくなるかもしれません…笑\u003c/p\u003e\n\n\u003ch2\u003eその他雑感\u003c/h2\u003e\n\n\u003cul\u003e\n\u003cli\u003eFont Enumeration \u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/API\"\u003eAPI\u003c/a\u003e で取得したフォントのリストを元に、ユーザーにフォントを選択させる場合、並べ方が大変そう\n\n\u003cul\u003e\n\u003cli\u003e各 OS のネイティブのフォント選択ダイアログがそもそもバラバラでわりと混乱している\u003c/li\u003e\n\u003cli\u003e\u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/Adobe\"\u003eAdobe\u003c/a\u003e 製品もまた独自だったり\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e前節で書いたように、フォントごとのアクセス制御ができない\n\n\u003cul\u003e\n\u003cli\u003eいっそのこと OpenType 仕様の方に「このフォントは Web \u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/API\"\u003eAPI\u003c/a\u003e からアクセスしちゃダメ」フラグを新設するとか？ :P\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003eOS 間の\u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/%A5%EC%A5%F3%A5%C0%A5%EA%A5%F3%A5%B0\"\u003eレンダリング\u003c/a\u003eの差がなくなったとしても、互換性のためには全く同じバージョンのフォントが各端末にインストールされている必要がある。となると、ローカルフォントだけでなく、Web フォントとの連携も考えた方がよさそう？\n\n\u003cul\u003e\n\u003cli\u003e現状の Font Table \u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/Access\"\u003eAccess\u003c/a\u003e \u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/API\"\u003eAPI\u003c/a\u003e \u003ccode\u003egetTables()\u003c/code\u003e は \u003cq\u003eThis method is only usable for local fonts, and will throw an exception if called for a web font.\u003c/q\u003e と\u003ca href=\"https://inexorabletash.github.io/font-table-access/#fontface-additions\"\u003e書かれている\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003eプライバシーまわりの懸念点がどう決着つくのか気になる\u003c/li\u003e\n\u003c/ul\u003e\n\n\n\u003cp\u003e実現すればおもしろいことはいろいろできそうですが、どうなるんでしょうね。\u003c/p\u003e\n\u003cdiv class=\"footnote\"\u003e\n\u003cp class=\"footnote\"\u003e\u003ca href=\"#fn-5ce9b760\" name=\"f-5ce9b760\" class=\"footnote-number\"\u003e*1\u003c/a\u003e\u003cspan class=\"footnote-delimiter\"\u003e:\u003c/span\u003e\u003cspan class=\"footnote-text\"\u003eユーザーの端末にインストールされているフォント。デ\u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/%A5%D0%A5%A4%A5%B9\"\u003eバイス\u003c/a\u003eフォントと呼ばれることも。\u003c/span\u003e\u003c/p\u003e\n\u003cp class=\"footnote\"\u003e\u003ca href=\"#fn-dbf8c6ce\" name=\"f-dbf8c6ce\" class=\"footnote-number\"\u003e*2\u003c/a\u003e\u003cspan class=\"footnote-delimiter\"\u003e:\u003c/span\u003e\u003cspan class=\"footnote-text\"\u003e適当な文字列のダミー要素を不可視状態で用意 → 要素にチェックしたいフォントを指定 → 指定前後で要素の幅が変わったかチェック、というのが常套手段でしょう。後述のフィンガープリンティングでも使われる手法です。\u003c/span\u003e\u003c/p\u003e\n\u003cp class=\"footnote\"\u003e\u003ca href=\"#fn-d7613141\" name=\"f-d7613141\" class=\"footnote-number\"\u003e*3\u003c/a\u003e\u003cspan class=\"footnote-delimiter\"\u003e:\u003c/span\u003e\u003cspan class=\"footnote-text\"\u003eフィンガープリンティングが目的であるなら、そんな丁寧なことをしなくても、バイナリのハッシュをまるごと取ってしまえば十分そうですが。\u003c/span\u003e\u003c/p\u003e\n\u003c/div\u003e","contentSnippet":"最近の Web アプリはどんどんリッチになっていっていますが、ネイティブアプリとは違って、「ローカルフォント*1を列挙してユーザーに選択させ、それを表示に使う」といったことは仕様上不可能です。例えば、画像に文字を入れる Web アプリを考えてみます。文字の描画自体は canvas の ctx.fillText() が使えますが、問題はフォントの指定です。ctx.font にローカルフォントを指定するためには、そのローカルフォントのフォント名を知っている必要があります。OS にプリインストールされているフォントでなどであれば、「Web アプリ側であらかじめフォント名のリストを用意しておき、実際にインストールされているかどうかをチェック*2してからユーザーに選択させる」という手段がとれますが、「自分でインストールしたこのフォントが使いたい！」という要求に応えるのは現実的ではありません。提案中の2つの API現在、Font Enumeration API・Font Table Access API という API が提案されています。まだまだ検討中のようですが、もし標準化までたどり着けば、この状態が解消されそうです。Font Enumeration APIFont Table Access APIFont Enumeration API が、ローカルフォントを列挙するための API です。先ほどの例でやりたかったことは、これで実現できそうです。一方の Font Table Access API は、ローカルフォントのテーブルのバイナリにアクセスするための API です。どちらも単機能で、かなりシンプルな構成になっています。GitHub リポジトリの README によると、提案の動機としては以下のような感じです。プロ品質のデザインツールを Web 上に作ろうとすると、以下のような障害があるWeb アプリからはローカルフォントの列挙ができないブラウザは OS のフォントエンジンを使って描画するので、OS 間で差が生じる（ネイティブアプリを Web アプリに移植する場合）自前のフォントエンジンはたいてい生のフォントデータを要求するものだが、Web フォントの仕様ではフォントのバイナリにアクセスできないFont Enumeration API と Font Table Access API を提供して、このような状況を解消したいこの記事では API の詳細には触れませんが、HarfBuzz/FreeType を WASM に乗せて、それにフォントデータを食わせて描画する、というようなユースケースも挙げられています。ちなみにこれらの API、Chrome（Chromium）では8月下旬に \"Intent to Implement\" になったようです。Intent to Implement: Font EnumerationIntent to Implement: Font Table AccessFont Enumeration - Chrome Platform StatusFont Table Access - Chrome Platform Statusローカルフォントとプライバシーしかしながら、ローカルフォントの情報は、個人を識別・同定しようとするフィンガープリンティングへの利用が懸念されます。従来では、例えばこんなふうに「フォント名のリストを決め打ちしておき、そのフォントがインストールされているか順次試す」というようなことしかできませんでした。ところが、Font Enumeration API と Font Table Access API が利用可能になると、情報をまるまる吸い出すことが可能になってしまいます。インストールの有無だけでなく、head テーブルや name テーブルから、フォントのバージョンを取得することもできます*3。フォントの販売・サブスクリプション方式によっては、ユーザー情報や固有識別子をフォントファイルに埋め込むものもあるでしょう。そうすると、ほとんど確実に個人を識別できてしまいます。フィンガープリンティングへの懸念は、提案されている仕様書にも記述があります。また、「会社の PC にコーポレートフォントをインストールしていると、それだけで会社が特定できちゃうよね」というような例も挙げられています。これらのプライバシー対策として、Font Enumeration API と Font Table Access API は、Permissions API でユーザーの許可を得てからローカルフォントにアクセスする設計になっています。本当に「プロ品質のデザインツール」だけが使うのであれば、これで落ち着くかもしれません。しかし万が一、いろんなサイトでやたらめったら濫用されるようになってしまったとしたら、許可を求めるダイアログがポコポコ出てきて、なかなかうるさい未来になるかもしれません。Flash 時代のローカルフォントところで、過去はどうだったんでしょう？　実は、ActionScript には Font Enumeration API のようなものがありました。Font.enumerateFonts(true) を実行すると、ローカルフォントも含めてフォントを列挙することができました。このおかげで Flash 時代の画像加工ツールは、ローカルフォントによる文字入れが可能だったのですが、Flash の衰退・サポート終了によって不可能になり、表現力が落ちてしまいました。もちろん、プライバシー面では向上したのですが。ちなみに、ActionScript の ExternalInterface を使うと、「ActionScript で取得したフォント名をJavaScript に渡して要素のスタイルに指定する」というようなこともできました。ActionScript 側はこれと同じ感じのコードになります。実際に自分自身、内製ツールの開発で使ったこともあります。ちなみにちなみに、当時は事実上、Flash がどこでも勝手に実行されるような状況だったので、「ページを踏んだ人のローカルフォントを列挙してこっそりサーバーに送信」というようなことが可能でした。フォント名を送信するだけでなく、「ローカルフォントで描画して送信」までしてしまえばさらに強烈ですね。フォント制作においては、制作中のフォントを自分の PC にインストールしてテストすることが多々あります。そのような状態で、悪意をもったページを踏んだ場合、制作中のフォントの情報が漏れてしまいます。言うまでもなく、わたしはやったことありませんが。Font Enumeration API と Font Table Access API があれば、過去に Flash で実現されていた表現力を取り戻し、さらに高度な文字組みなどを発展させることができます。アクセスにはユーザーの許可が必要になるので、プライバシー面もある程度担保されます。ただし、「このフォントは OK だけどこれはダメ」のようなアクセス制御は今のところできそうにないので、フォント制作者はうかつに [許可する] を押せなくなるかもしれません…笑その他雑感Font Enumeration API で取得したフォントのリストを元に、ユーザーにフォントを選択させる場合、並べ方が大変そう各 OS のネイティブのフォント選択ダイアログがそもそもバラバラでわりと混乱しているAdobe 製品もまた独自だったり前節で書いたように、フォントごとのアクセス制御ができないいっそのこと OpenType 仕様の方に「このフォントは Web API からアクセスしちゃダメ」フラグを新設するとか？ :POS 間のレンダリングの差がなくなったとしても、互換性のためには全く同じバージョンのフォントが各端末にインストールされている必要がある。となると、ローカルフォントだけでなく、Web フォントとの連携も考えた方がよさそう？現状の Font Table Access API getTables() は This method is only usable for local fonts, and will throw an exception if called for a web font. と書かれているプライバシーまわりの懸念点がどう決着つくのか気になる実現すればおもしろいことはいろいろできそうですが、どうなるんでしょうね。*1:ユーザーの端末にインストールされているフォント。デバイスフォントと呼ばれることも。*2:適当な文字列のダミー要素を不可視状態で用意 → 要素にチェックしたいフォントを指定 → 指定前後で要素の幅が変わったかチェック、というのが常套手段でしょう。後述のフィンガープリンティングでも使われる手法です。*3:フィンガープリンティングが目的であるなら、そんな丁寧なことをしなくても、バイナリのハッシュをまるごと取ってしまえば十分そうですが。","link":"https://shiromoji.hatenablog.jp/entry/2019/10/15/225720","isoDate":"2019-10-15T13:57:20.000Z","dateMiliSeconds":1571147840000,"imageUrl":"https://cdn-ak.f.st-hatena.com/images/fotolife/m/mashabow/20191014/20191014220905.png","authorName":"mashabow"},{"title":"ベジエ曲線のなめらかさについて社内勉強会で語った","content":"\u003cp\u003eいまの勤務先にはエンジニア・デザイナーが持ち回りで発表する\u003ca href=\"https://developer.feedforce.jp/archive/category/FFTT\"\u003e社内勉強会（FFTT）\u003c/a\u003eがあるんですが、今週がわたしの当番だったので、\u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/%A5%D9%A5%B8%A5%A8%B6%CA%C0%FE\"\u003eベジエ曲線\u003c/a\u003eのなめらかさの話をしました。\u003c/p\u003e\n\n\u003cp\u003e\u003ciframe id=\"talk_frame_517211\" src=\"//speakerdeck.com/player/23ed0505118c483f9aa8a343eacc648c\" width=\"710\" height=\"532\" style=\"border:0; padding:0; margin:0; background:transparent;\" frameborder=\"0\" allowtransparency=\"true\" allowfullscreen=\"allowfullscreen\" mozallowfullscreen=\"true\" webkitallowfullscreen=\"true\"\u003e\u003c/iframe\u003e\u003ccite class=\"hatena-citation\"\u003e\u003ca href=\"https://speakerdeck.com/mashabow/bezier-smoothness\"\u003espeakerdeck.com\u003c/a\u003e\u003c/cite\u003e\u003c/p\u003e\n\n\u003cul\u003e\n\u003cli\u003eデモページ：\u003ca href=\"https://mashabow.github.io/bezier-smoothness/\"\u003ehttps://mashabow.github.io/bezier-smoothness/\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/%A5%EA%A5%DD%A5%B8%A5%C8%A5%EA\"\u003eリポジトリ\u003c/a\u003e：\u003ca href=\"https://github.com/mashabow/bezier-smoothness\"\u003ehttps://github.com/mashabow/bezier-smoothness\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\n\n\u003cp\u003eデモとスライドを行き来しつつ、30分ほどの発表でした。\u003c/p\u003e\n\n\u003ch3\u003e内容の補足\u003c/h3\u003e\n\n\u003ch4\u003ep. 10: \u003ci\u003eG\u003c/i\u003e\u003csup\u003e1\u003c/sup\u003e 連続（接線連続）\u003c/h4\u003e\n\n\u003cp\u003e\u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/Illustrator\"\u003eIllustrator\u003c/a\u003e などには「スムーズポイント」という種類のアンカーポイント（始点・終点）がありますが、これは両方のハンドルが常に一直線になって動くので、\u003ci\u003eG\u003c/i\u003e\u003csup\u003e1\u003c/sup\u003e 連続ということですね。\u003c/p\u003e\n\n\u003ch4\u003ep. 14: 急カーブ注意の標識と曲率半径\u003c/h4\u003e\n\n\u003cp\u003e\u003ca href=\"https://www.google.com/search?tbm=isch\u0026amp;q=%E9%81%93%E8%B7%AF%E6%A8%99%E8%AD%98+R+%E3%82%AB%E3%83%BC%E3%83%96\"\u003e「道路標識 R カーブ」あたりで画像検索する\u003c/a\u003eとわかりやすいかと思います。「R = 500 m」のように書いてあったりします。\u003c/p\u003e\n\n\u003ch4\u003ep. 18: フォントエディタに搭載された曲率の櫛（curvature comb）\u003c/h4\u003e\n\n\u003cp\u003e2017 年にリリースされた FontLab VI には標準搭載されています。\u003ci\u003eG\u003c/i\u003e\u003csup\u003e2\u003c/sup\u003e 連続になるように、うまいこと自動調整してくれる機能もついています。\u003c/p\u003e\n\n\u003ciframe width=\"560\" height=\"315\" src=\"https://www.youtube.com/embed/Cj8GQiDnyq8\" frameborder=\"0\" allow=\"accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture\" allowfullscreen\u003e\u003c/iframe\u003e\n\n\n\u003cp\u003eGlyphs や RoboFont では \u003ca href=\"https://yanone.de/software/speedpunk/\"\u003eSpeed Punk\u003c/a\u003e という\u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/%A5%D7%A5%E9%A5%B0%A5%A4%A5%F3\"\u003eプラグイン\u003c/a\u003eが有名ですね。もともと、こちらの方が早くから開発されています。\u003c/p\u003e\n\n\u003ciframe src=\"https://player.vimeo.com/video/38586215\" width=\"640\" height=\"480\" frameborder=\"0\" allow=\"autoplay; fullscreen\" allowfullscreen\u003e\u003c/iframe\u003e\n\n\n\u003ch4\u003eデモの [\u003ci\u003eG\u003c/i\u003e\u003csup\u003e0\u003c/sup\u003e 連続], [\u003ci\u003eG\u003c/i\u003e\u003csup\u003e1\u003c/sup\u003e 連続], [\u003ci\u003eG\u003c/i\u003e\u003csup\u003e2\u003c/sup\u003e 連続] ボタン\u003c/h4\u003e\n\n\u003cp\u003e片方の\u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/%A5%D9%A5%B8%A5%A8%B6%CA%C0%FE\"\u003eベジエ曲線\u003c/a\u003eを調整して \u003ci\u003eG\u003c/i\u003e\u003csup\u003e0\u003c/sup\u003e, \u003ci\u003eG\u003c/i\u003e\u003csup\u003e1\u003c/sup\u003e, \u003ci\u003eG\u003c/i\u003e\u003csup\u003e2\u003c/sup\u003e 連続にする機能で、\u003ca href=\"https://github.com/mashabow/bezier-smoothness/blob/f60c28887f7d55713166c93b60c3d038044ba242/src/calc.ts#L88-L177\"\u003ecalc.ts\u003c/a\u003e に実装があります。安直でナイーブな実装になっているので、\u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/%A5%D9%A5%B8%A5%A8%B6%CA%C0%FE\"\u003eベジエ曲線\u003c/a\u003eの形や配置によっては、思わぬ結果になります。コーナーケースも考慮していません。\u003c/p\u003e\n\n\u003cp\u003e実際のデザイン支援に使うためには、ユーザーの意図に寄り添った「もっと頭のいい調整方法」が必要になります。\u003c/p\u003e\n\n\u003ch4\u003e\u003ci\u003eG\u003c/i\u003e\u003csup\u003e0\u003c/sup\u003e, \u003ci\u003eG\u003c/i\u003e\u003csup\u003e1\u003c/sup\u003e, \u003ci\u003eG\u003c/i\u003e\u003csup\u003e2\u003c/sup\u003e, … 連続\u003c/h4\u003e\n\n\u003cp\u003e英語では geometic continuity といい、その頭文字をとって \u003ci\u003eG\u003c/i\u003e\u003csup\u003e\u003ci\u003en\u003c/i\u003e\u003c/sup\u003e と呼ぶようです。\u003c/p\u003e\n\n\u003cp\u003e\u003ca href=\"https://en.wikipedia.org/wiki/Smoothness#Geometric_continuity\"\u003eSmoothness: Geometric continuity - Wikipedia\u003c/a\u003e\u003c/p\u003e\n\n\u003cp\u003e一般の \u003ci\u003en\u003c/i\u003e について、ちゃんとした定義をあまり把握していなかったのですが、弧長パラメータで \u003ci\u003en\u003c/i\u003e 回連続\u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/%C8%F9%CA%AC\"\u003e微分\u003c/a\u003e可能であれば \u003ci\u003eG\u003c/i\u003e\u003csup\u003e\u003ci\u003en\u003c/i\u003e\u003c/sup\u003e 連続、という理解でいいんでしょうか。\u003c/p\u003e\n\n\u003cp\u003eちなみに、日本語のブログ記事などでは「ある程度の誤差を許した \u003ci\u003eC\u003c/i\u003e\u003csup\u003e\u003ci\u003en\u003c/i\u003e\u003c/sup\u003e 連続のことを \u003ci\u003eG\u003c/i\u003e\u003csup\u003e\u003ci\u003en\u003c/i\u003e\u003c/sup\u003e 連続と呼ぶ」という解説が散見されますが、こちらはちょっとあやしそうです。\u003c/p\u003e\n\n\u003ch3\u003e雑感\u003c/h3\u003e\n\n\u003cp\u003eフォントエンジニアにとっては常識レベルの内容だとはいえ、ブラウザ上ででグラフィカルにぐりぐり動かせるデモを作ってみるとやっぱり楽しいですね。今回の話、社内の業務にはまったく直結しないのですが、みなさんに興味深く聞いてもらえたようです。\u003c/p\u003e\n\n\u003cp\u003e\u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/%A5%D9%A5%B8%A5%A8%B6%CA%C0%FE\"\u003eベジエ曲線\u003c/a\u003eを自由自在に使いこなしているデザイナーさんからも「なるほど！」「こういうことだったんか」というような反応をいただいて、発表した甲斐がありました 🍮\u003c/p\u003e\n","contentSnippet":"いまの勤務先にはエンジニア・デザイナーが持ち回りで発表する社内勉強会（FFTT）があるんですが、今週がわたしの当番だったので、ベジエ曲線のなめらかさの話をしました。speakerdeck.comデモページ：https://mashabow.github.io/bezier-smoothness/リポジトリ：https://github.com/mashabow/bezier-smoothnessデモとスライドを行き来しつつ、30分ほどの発表でした。内容の補足p. 10: G1 連続（接線連続）Illustrator などには「スムーズポイント」という種類のアンカーポイント（始点・終点）がありますが、これは両方のハンドルが常に一直線になって動くので、G1 連続ということですね。p. 14: 急カーブ注意の標識と曲率半径「道路標識 R カーブ」あたりで画像検索するとわかりやすいかと思います。「R = 500 m」のように書いてあったりします。p. 18: フォントエディタに搭載された曲率の櫛（curvature comb）2017 年にリリースされた FontLab VI には標準搭載されています。G2 連続になるように、うまいこと自動調整してくれる機能もついています。Glyphs や RoboFont では Speed Punk というプラグインが有名ですね。もともと、こちらの方が早くから開発されています。デモの [G0 連続], [G1 連続], [G2 連続] ボタン片方のベジエ曲線を調整して G0, G1, G2 連続にする機能で、calc.ts に実装があります。安直でナイーブな実装になっているので、ベジエ曲線の形や配置によっては、思わぬ結果になります。コーナーケースも考慮していません。実際のデザイン支援に使うためには、ユーザーの意図に寄り添った「もっと頭のいい調整方法」が必要になります。G0, G1, G2, … 連続英語では geometic continuity といい、その頭文字をとって Gn と呼ぶようです。Smoothness: Geometric continuity - Wikipedia一般の n について、ちゃんとした定義をあまり把握していなかったのですが、弧長パラメータで n 回連続微分可能であれば Gn 連続、という理解でいいんでしょうか。ちなみに、日本語のブログ記事などでは「ある程度の誤差を許した Cn 連続のことを Gn 連続と呼ぶ」という解説が散見されますが、こちらはちょっとあやしそうです。雑感フォントエンジニアにとっては常識レベルの内容だとはいえ、ブラウザ上ででグラフィカルにぐりぐり動かせるデモを作ってみるとやっぱり楽しいですね。今回の話、社内の業務にはまったく直結しないのですが、みなさんに興味深く聞いてもらえたようです。ベジエ曲線を自由自在に使いこなしているデザイナーさんからも「なるほど！」「こういうことだったんか」というような反応をいただいて、発表した甲斐がありました 🍮","link":"https://shiromoji.hatenablog.jp/entry/2019/05/18/005232","isoDate":"2019-05-17T15:52:32.000Z","dateMiliSeconds":1558108352000,"imageUrl":"https://cdn-ak.f.st-hatena.com/images/fotolife/m/mashabow/20190518/20190518004536.png","authorName":"mashabow"},{"title":"『[改訂新版] プログラマのための文字コード技術入門』を読んだ","content":"\u003cp\u003e年末に発売されていたので読みました。\u003c/p\u003e\n\n\u003cp\u003e\u003cdiv class=\"hatena-asin-detail\"\u003e\u003ca href=\"http://www.amazon.co.jp/exec/obidos/ASIN/4297102919/msb2-22/\"\u003e\u003cimg src=\"https://images-fe.ssl-images-amazon.com/images/I/51vqn-2eVKL._SL160_.jpg\" class=\"hatena-asin-detail-image\" alt=\"[改訂新版]プログラマのための文字コード技術入門 (WEB+DB PRESS plusシリーズ)\" title=\"[改訂新版]プログラマのための文字コード技術入門 (WEB+DB PRESS plusシリーズ)\"\u003e\u003c/a\u003e\u003cdiv class=\"hatena-asin-detail-info\"\u003e\u003cp class=\"hatena-asin-detail-title\"\u003e\u003ca href=\"http://www.amazon.co.jp/exec/obidos/ASIN/4297102919/msb2-22/\"\u003e[改訂新版]プログラマのための文字コード技術入門 (WEB+DB PRESS plusシリーズ)\u003c/a\u003e\u003c/p\u003e\u003cul\u003e\u003cli\u003e\u003cspan class=\"hatena-asin-detail-label\"\u003e作者:\u003c/span\u003e 矢野啓介\u003c/li\u003e\u003cli\u003e\u003cspan class=\"hatena-asin-detail-label\"\u003e出版社/メーカー:\u003c/span\u003e \u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/%B5%BB%BD%D1%C9%BE%CF%C0%BC%D2\"\u003e技術評論社\u003c/a\u003e\u003c/li\u003e\u003cli\u003e\u003cspan class=\"hatena-asin-detail-label\"\u003e発売日:\u003c/span\u003e 2018/12/28\u003c/li\u003e\u003cli\u003e\u003cspan class=\"hatena-asin-detail-label\"\u003eメディア:\u003c/span\u003e 単行本（ソフトカバー）\u003c/li\u003e\u003cli\u003e\u003ca href=\"http://d.hatena.ne.jp/asin/4297102919/msb2-22\" target=\"_blank\"\u003eこの商品を含むブログを見る\u003c/a\u003e\u003c/li\u003e\u003c/ul\u003e\u003c/div\u003e\u003cdiv class=\"hatena-asin-detail-foot\"\u003e\u003c/div\u003e\u003c/div\u003e\u003c/p\u003e\n\n\u003cul\u003e\n\u003cli\u003e\u003ca href=\"https://gihyo.jp/book/2019/978-4-297-10291-3\"\u003e［改訂新版］プログラマのための文字コード技術入門：書籍案内｜技術評論社\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"http://yanok.net/2018/12/post-349.html\"\u003e『［改訂新版］プログラマのための文字コード技術入門』発売! - yanok.net\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\n\n\u003ch3\u003eどんな感じの本だかざくっと\u003c/h3\u003e\n\n\u003cp\u003eタイトルに「\u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/%A5%D7%A5%ED%A5%B0%A5%E9%A5%DE\"\u003eプログラマ\u003c/a\u003eのための」あるように、プログラミング経験者がターゲットになっています。ビット・バイト、2進数・16進数、ファイル、\u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/%A5%D7%A5%ED%A5%C8%A5%B3%A5%EB\"\u003eプロトコル\u003c/a\u003eのような「常識」についてはさらっとした説明で済まされているので、その分、\u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/%CA%B8%BB%FA%A5%B3%A1%BC%A5%C9\"\u003e文字コード\u003c/a\u003eの本質的な部分・実践的な部分の密度が高くなっています。文章が平易なので、読み進めやすいかと思います。\u003c/p\u003e\n\n\u003cp\u003eさらに内容をはっきりさせるのであれば、『「\u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/%B8%BD%C2%E5%C6%FC%CB%DC\"\u003e現代日本\u003c/a\u003eの\u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/%A5%D7%A5%ED%A5%B0%A5%E9%A5%DE\"\u003eプログラマ\u003c/a\u003eのための」\u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/%CA%B8%BB%FA%A5%B3%A1%BC%A5%C9\"\u003e文字コード\u003c/a\u003e技術入門』といったところでしょうか。この本は、日本で現在使われている\u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/%CA%B8%BB%FA%A5%B3%A1%BC%A5%C9\"\u003e文字コード\u003c/a\u003eの話が中心です。世界各地の\u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/%CA%B8%BB%FA%A5%B3%A1%BC%A5%C9\"\u003e文字コード\u003c/a\u003eだったり、歴史的な文字の符号化などにもおもしろい話はたくさんあるのですが、そこには深入りせず、実用的なテーマに絞って解説されています。国内での業務にすぐ役立ちそうな内容です。\u003c/p\u003e\n\n\u003cp\u003e第7章「\u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/%A5%D7%A5%ED%A5%B0%A5%E9%A5%DF%A5%F3%A5%B0%B8%C0%B8%EC\"\u003eプログラミング言語\u003c/a\u003eと\u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/%CA%B8%BB%FA%A5%B3%A1%BC%A5%C9\"\u003e文字コード\u003c/a\u003e」では \u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/Java\"\u003eJava\u003c/a\u003e と \u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/Ruby\"\u003eRuby\u003c/a\u003e が題材になっていますが、他の言語でも基本的な概念は共通しています。それ以外の章では \u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/Java\"\u003eJava\u003c/a\u003e や \u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/Ruby\"\u003eRuby\u003c/a\u003e の知識はまったく要求されませんので、馴染みがなくても大丈夫です。その前の第6章が Web の話だということもあり、個人的には \u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/JavaScript\"\u003eJavaScript\u003c/a\u003e も取り上げてほしいところですが。\u003c/p\u003e\n\n\u003ch3\u003e初版との比較\u003c/h3\u003e\n\n\u003cp\u003eこの本（改訂新版）は第2版にあたります。初版は2010年2月に発行されています。\u003c/p\u003e\n\n\u003cp\u003e\u003cdiv class=\"hatena-asin-detail\"\u003e\u003ca href=\"http://www.amazon.co.jp/exec/obidos/ASIN/477414164X/msb2-22/\"\u003e\u003cimg src=\"https://images-fe.ssl-images-amazon.com/images/I/51O0rI1KItL._SL160_.jpg\" class=\"hatena-asin-detail-image\" alt=\"プログラマのための文字コード技術入門 (WEB+DB PRESS plus) (WEB+DB PRESS plusシリーズ)\" title=\"プログラマのための文字コード技術入門 (WEB+DB PRESS plus) (WEB+DB PRESS plusシリーズ)\"\u003e\u003c/a\u003e\u003cdiv class=\"hatena-asin-detail-info\"\u003e\u003cp class=\"hatena-asin-detail-title\"\u003e\u003ca href=\"http://www.amazon.co.jp/exec/obidos/ASIN/477414164X/msb2-22/\"\u003eプログラマのための文字コード技術入門 (WEB+DB PRESS plus) (WEB+DB PRESS plusシリーズ)\u003c/a\u003e\u003c/p\u003e\u003cul\u003e\u003cli\u003e\u003cspan class=\"hatena-asin-detail-label\"\u003e作者:\u003c/span\u003e 矢野啓介\u003c/li\u003e\u003cli\u003e\u003cspan class=\"hatena-asin-detail-label\"\u003e出版社/メーカー:\u003c/span\u003e \u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/%B5%BB%BD%D1%C9%BE%CF%C0%BC%D2\"\u003e技術評論社\u003c/a\u003e\u003c/li\u003e\u003cli\u003e\u003cspan class=\"hatena-asin-detail-label\"\u003e発売日:\u003c/span\u003e 2010/02/18\u003c/li\u003e\u003cli\u003e\u003cspan class=\"hatena-asin-detail-label\"\u003eメディア:\u003c/span\u003e 単行本（ソフトカバー）\u003c/li\u003e\u003cli\u003e\u003cspan class=\"hatena-asin-detail-label\"\u003e購入\u003c/span\u003e: 34人 \u003cspan class=\"hatena-asin-detail-label\"\u003eクリック\u003c/span\u003e: 578回\u003c/li\u003e\u003cli\u003e\u003ca href=\"http://d.hatena.ne.jp/asin/477414164X/msb2-22\" target=\"_blank\"\u003eこの商品を含むブログ (129件) を見る\u003c/a\u003e\u003c/li\u003e\u003c/ul\u003e\u003c/div\u003e\u003cdiv class=\"hatena-asin-detail-foot\"\u003e\u003c/div\u003e\u003c/div\u003e\u003c/p\u003e\n\n\u003cp\u003e初版と改訂新版、左右に並べて目で diff をとりながら読みました。\u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/Unicode\"\u003eUnicode\u003c/a\u003e をはじめ、各規格・ツールの更新に合わせた細かな対応がなされていますが、こうして見比べてみると、\u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/%CA%B8%BB%FA%A5%B3%A1%BC%A5%C9\"\u003e文字コード\u003c/a\u003eの本質的な部分についてはほとんど変わらないことが分かります。\u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/Unicode\"\u003eUnicode\u003c/a\u003e 絵文字（2010年〜）についての記述も増えていますが、ここ数年の世界的な普及を見ると、第3版ではもっともっとページ数が割かれるもしれません(笑)\u003c/p\u003e\n\n\u003cp\u003eこの期間における最大の変化は、\u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/UTF-8\"\u003eUTF-8\u003c/a\u003e の圧倒的な普及でしょうか。初版では、著者の「\u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/JIS%20X%200213\"\u003eJIS X 0213\u003c/a\u003e 推し」な雰囲気が端々から伝わってきましたが、\u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/UTF-8\"\u003eUTF-8\u003c/a\u003e の普及がそれを取り込む・呑み込むかたちになりました。Web \u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/%A5%D6%A5%E9%A5%A6%A5%B8%A5%F3%A5%B0\"\u003eブラウジング\u003c/a\u003eで文字化けに遭遇するようなこともめっきり減り、たまに出会うと懐かしさすら感じます。\u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/Shift_JIS\"\u003eShift_JIS\u003c/a\u003e や \u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/EUC\"\u003eEUC\u003c/a\u003e-JP や \u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/ISO-2022-JP\"\u003eISO-2022-JP\u003c/a\u003e を知らずに、\u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/UTF-8\"\u003eUTF-8\u003c/a\u003e 一本で暮らしていける世代がすでに出てきているはずです。「レガシー」\u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/%CA%B8%BB%FA%A5%B3%A1%BC%A5%C9\"\u003e文字コード\u003c/a\u003eから解放される一方で、\u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/Unicode\"\u003eUnicode\u003c/a\u003e の孕んだ複雑さと向き合う場面が増えそうですが……\u003c/p\u003e\n\n\u003cp\u003eただし、「\u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/UTF-8\"\u003eUTF-8\u003c/a\u003e の圧倒的な普及」という印象は、自分が仕事で新しめの Web アプリケーションを触っているから、というのもあるかもしれません。大企業や役所の業務システムはいまどんな感じなんでしょうか。\u003c/p\u003e\n\n\u003ch3\u003eメモと補足\u003c/h3\u003e\n\n\u003ch4\u003ep. 9 図 1.2\u003c/h4\u003e\n\n\u003cblockquote\u003e\u003cp\u003e亜 哀 愛 悪 握 圧 扱 安 … 惑 枠 湾 腕\u003c/p\u003e\u003c/blockquote\u003e\n\n\u003cp\u003eとなっていますが、これは「旧」\u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/%BE%EF%CD%D1%B4%C1%BB%FA\"\u003e常用漢字\u003c/a\u003eの先頭部分と末尾部分ですね。2010年の\u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/%BE%EF%CD%D1%B4%C1%BB%FA\"\u003e常用漢字\u003c/a\u003e改定によって、「亜 哀 \u003cstrong\u003e挨\u003c/strong\u003e 愛 \u003cstrong\u003e曖\u003c/strong\u003e 悪 握 圧 … 惑 枠 湾 腕」という並びになりました。\u003c/p\u003e\n\n\u003ch4\u003ep. 193\u003c/h4\u003e\n\n\u003cblockquote\u003e\u003cp\u003eIANA の登録簿には、……実際に使われている \u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/JIS%20X%200213\"\u003eJIS X 0213\u003c/a\u003e の符号化方式が登録されていないという問題もあります。\u003c/p\u003e\u003c/blockquote\u003e\n\n\u003cp\u003e登録されていなかったんですね、知りませんでした。\u003c/p\u003e\n\n\u003cp\u003e\u003ca href=\"https://www.iana.org/assignments/character-sets/character-sets.xhtml\"\u003ehttps://www.iana.org/assignments/character-sets/character-sets.xhtml\u003c/a\u003e\u003c/p\u003e\n\n\u003cp\u003e需要がなかったのでしょうか……；；\u003c/p\u003e\n\n\u003ch4\u003ep. 206\u003c/h4\u003e\n\n\u003cblockquote\u003e\u003cp\u003eHTML の\u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/DTD\"\u003eDTD\u003c/a\u003e において、「copy という名前は \u003ccode\u003e\u0026amp;#169;\u003c/code\u003e を表す」という定義がなされているため、……\u003c/p\u003e\u003c/blockquote\u003e\n\n\u003cp\u003eこのあたりは HTML 4.01 の話です。\u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/HTML5\"\u003eHTML5\u003c/a\u003e に \u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/DTD\"\u003eDTD\u003c/a\u003e は存在しません。\u003c/p\u003e\n\n\u003ch4\u003ep. 208\u003c/h4\u003e\n\n\u003cblockquote\u003e\u003cp\u003e\u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/Shift_JIS\"\u003eShift_JIS\u003c/a\u003e を用いる場合はリスト 6.1 の例の「\u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/UTF-8\"\u003eUTF-8\u003c/a\u003e」の部分を「\u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/Shift_JIS\"\u003eShift_JIS\u003c/a\u003e」に、\u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/EUC\"\u003eEUC\u003c/a\u003e-JP の場合は「\u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/EUC\"\u003eEUC\u003c/a\u003e-JP」にします。\u003c/p\u003e\u003c/blockquote\u003e\n\n\u003cp\u003eHTML の \u003ccode\u003e\u0026lt;meta charset=\"hogehoge\"\u0026gt;\u003c/code\u003e を説明している箇所です。ただし、この本が参照している HTML 5.2 には\u003c/p\u003e\n\n\u003cblockquote\u003e\u003cp\u003eAuthors should use \u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/UTF-8\"\u003eUTF-8\u003c/a\u003e. Conformance checkers may advise authors against using legacy encodings.\u003c/p\u003e\u003c/blockquote\u003e\n\n\u003cp\u003e\u003ca href=\"https://www.w3.org/TR/html52/document-metadata.html#specifying-the-documents-character-encoding\"\u003eという説明\u003c/a\u003eがあり、「\u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/UTF-8\"\u003eUTF-8\u003c/a\u003e を使用すべき」となっています。一方、HTML Living Standard ではさらに進んで\u003c/p\u003e\n\n\u003cblockquote\u003e\u003cp\u003eThe Encoding standard requires use of the \u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/UTF-8\"\u003eUTF-8\u003c/a\u003e character encoding and requires use of the \"\u003ccode\u003eutf-8\u003c/code\u003e\" encoding label to identify it. Those requirements necessitate that the document's character encoding declaration, if it exists, specifies an encoding label using an ASCII \u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/case-insensitive\"\u003ecase-insensitive\u003c/a\u003e match for \"\u003ccode\u003eutf-8\u003c/code\u003e\". Regardless of whether a character encoding declaration is present or not, the actual character encoding used to encode the document must be \u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/UTF-8\"\u003eUTF-8\u003c/a\u003e.\u003c/p\u003e\u003c/blockquote\u003e\n\n\u003cp\u003e\u003ca href=\"https://html.spec.whatwg.org/multipage/semantics.html#charset\"\u003eという記述になっており\u003c/a\u003e、「\u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/UTF-8\"\u003eUTF-8\u003c/a\u003e を使用しなければならない」ことになりました。\u003c/p\u003e\n\n\u003ch4\u003ep. 216\u003c/h4\u003e\n\n\u003cblockquote\u003e\u003cp\u003eURL の中に、予約されている記号や、ASCII で表現できない文字を書きたいときには、\u003cstrong\u003eURL 符号化\u003c/strong\u003eという方法が使われます。\u003c/p\u003e\u003c/blockquote\u003e\n\n\u003cp\u003eこの本では触れられていませんが、\u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/%A5%C9%A5%E1%A5%A4%A5%F3\"\u003eドメイン\u003c/a\u003e名部分は \u003ca href=\"https://ja.wikipedia.org/wiki/Punycode\"\u003ePunycode\u003c/a\u003e によって符号化されます。例えば、\u003ca href=\"https://%E6%97%A5%E6%9C%AC%E8%AA%9E.jp\"\u003e\u003ccode\u003ehttps://日本語.jp\u003c/code\u003e\u003c/a\u003e は \u003ca href=\"https://xn--wgv71a119e.jp\"\u003e\u003ccode\u003ehttps://xn--wgv71a119e.jp\u003c/code\u003e\u003c/a\u003e になります。\u003c/p\u003e\n\n\u003ch4\u003ep. 222\u003c/h4\u003e\n\n\u003cblockquote\u003e\u003cp\u003eクライアントからの送信に使われる\u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/%CA%B8%BB%FA%A5%B3%A1%BC%A5%C9\"\u003e文字コード\u003c/a\u003eは、HTML の form 要素の accept-charset 属性で明示的に指定することもできます。\u003ccode\u003eaccept-charset=\"Shift_JIS\"\u003c/code\u003e と指定すれば \u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/Shift_JIS\"\u003eShift_JIS\u003c/a\u003e で送信するということです。\u003c/p\u003e\u003c/blockquote\u003e\n\n\u003cp\u003eHTML 5.2 では\u003c/p\u003e\n\n\u003cblockquote\u003e\u003cp\u003e[...] each token must be an ASCII \u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/case-insensitive\"\u003ecase-insensitive\u003c/a\u003e match for one of the labels of an ASCII-compatible encoding.\u003c/p\u003e\u003c/blockquote\u003e\n\n\u003cp\u003e\u003ca href=\"https://www.w3.org/TR/html52/sec-forms.html#element-attrdef-form-accept-charset\"\u003eとなっています\u003c/a\u003e。一方、HTML Living Standard では\u003c/p\u003e\n\n\u003cblockquote\u003e\u003cp\u003eIf specified, the \u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/value\"\u003evalue\u003c/a\u003e must be an ASCII \u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/case-insensitive\"\u003ecase-insensitive\u003c/a\u003e match for \"\u003ccode\u003eUTF-8\u003c/code\u003e\".\u003c/p\u003e\u003c/blockquote\u003e\n\n\u003cp\u003e\u003ca href=\"https://html.spec.whatwg.org/multipage/forms.html#attr-form-accept-charset\"\u003eと規定されており\u003c/a\u003e、こちらも \u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/UTF-8\"\u003eUTF-8\u003c/a\u003e 固定になりました。\u003c/p\u003e\n\n\u003ch4\u003ep. \u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/226\"\u003e226\u003c/a\u003e\u003c/h4\u003e\n\n\u003cblockquote\u003e\u003cp\u003e最後に、これからの日本語メールの符号化がどうあるべきかを考察しました。\u003c/p\u003e\u003c/blockquote\u003e\n\n\u003cp\u003e初版の名残です。初版では今後についての考察があったのですが、\u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/UTF-8\"\u003eUTF-8\u003c/a\u003e の普及により、改訂新版ではこれが削除されています。\u003c/p\u003e\n\n\u003ch4\u003ep. 293 表 8.1\u003c/h4\u003e\n\n\u003cp\u003e表のタイトルが「ベンダー依存の変換の問題の発生する代表的な文字」になっていますが、おそらく表 8.2からの編集ミスです。\u003c/p\u003e\n\n\u003chr /\u003e\n\n\u003cp\u003e\u003cdiv class=\"hatena-asin-detail\"\u003e\u003ca href=\"http://www.amazon.co.jp/exec/obidos/ASIN/4297102919/msb2-22/\"\u003e\u003cimg src=\"https://images-fe.ssl-images-amazon.com/images/I/51vqn-2eVKL._SL160_.jpg\" class=\"hatena-asin-detail-image\" alt=\"[改訂新版]プログラマのための文字コード技術入門 (WEB+DB PRESS plusシリーズ)\" title=\"[改訂新版]プログラマのための文字コード技術入門 (WEB+DB PRESS plusシリーズ)\"\u003e\u003c/a\u003e\u003cdiv class=\"hatena-asin-detail-info\"\u003e\u003cp class=\"hatena-asin-detail-title\"\u003e\u003ca href=\"http://www.amazon.co.jp/exec/obidos/ASIN/4297102919/msb2-22/\"\u003e[改訂新版]プログラマのための文字コード技術入門 (WEB+DB PRESS plusシリーズ)\u003c/a\u003e\u003c/p\u003e\u003cul\u003e\u003cli\u003e\u003cspan class=\"hatena-asin-detail-label\"\u003e作者:\u003c/span\u003e 矢野啓介\u003c/li\u003e\u003cli\u003e\u003cspan class=\"hatena-asin-detail-label\"\u003e出版社/メーカー:\u003c/span\u003e \u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/%B5%BB%BD%D1%C9%BE%CF%C0%BC%D2\"\u003e技術評論社\u003c/a\u003e\u003c/li\u003e\u003cli\u003e\u003cspan class=\"hatena-asin-detail-label\"\u003e発売日:\u003c/span\u003e 2018/12/28\u003c/li\u003e\u003cli\u003e\u003cspan class=\"hatena-asin-detail-label\"\u003eメディア:\u003c/span\u003e 単行本（ソフトカバー）\u003c/li\u003e\u003cli\u003e\u003ca href=\"http://d.hatena.ne.jp/asin/4297102919/msb2-22\" target=\"_blank\"\u003eこの商品を含むブログを見る\u003c/a\u003e\u003c/li\u003e\u003c/ul\u003e\u003c/div\u003e\u003cdiv class=\"hatena-asin-detail-foot\"\u003e\u003c/div\u003e\u003c/div\u003e\u003c/p\u003e\n\n\u003cp\u003e\u003cdiv class=\"hatena-asin-detail\"\u003e\u003ca href=\"http://www.amazon.co.jp/exec/obidos/ASIN/B07M98R3S5/msb2-22/\"\u003e\u003cimg src=\"https://images-fe.ssl-images-amazon.com/images/I/51M4td-sVGL._SL160_.jpg\" class=\"hatena-asin-detail-image\" alt=\"［改訂新版］プログラマのための文字コード技術入門 WEB+DB PRESS plus\" title=\"［改訂新版］プログラマのための文字コード技術入門 WEB+DB PRESS plus\"\u003e\u003c/a\u003e\u003cdiv class=\"hatena-asin-detail-info\"\u003e\u003cp class=\"hatena-asin-detail-title\"\u003e\u003ca href=\"http://www.amazon.co.jp/exec/obidos/ASIN/B07M98R3S5/msb2-22/\"\u003e［改訂新版］プログラマのための文字コード技術入門 WEB+DB PRESS plus\u003c/a\u003e\u003c/p\u003e\u003cul\u003e\u003cli\u003e\u003cspan class=\"hatena-asin-detail-label\"\u003e作者:\u003c/span\u003e 矢野啓介\u003c/li\u003e\u003cli\u003e\u003cspan class=\"hatena-asin-detail-label\"\u003e出版社/メーカー:\u003c/span\u003e \u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/%B5%BB%BD%D1%C9%BE%CF%C0%BC%D2\"\u003e技術評論社\u003c/a\u003e\u003c/li\u003e\u003cli\u003e\u003cspan class=\"hatena-asin-detail-label\"\u003e発売日:\u003c/span\u003e 2018/12/22\u003c/li\u003e\u003cli\u003e\u003cspan class=\"hatena-asin-detail-label\"\u003eメディア:\u003c/span\u003e \u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/Kindle\"\u003eKindle\u003c/a\u003e版\u003c/li\u003e\u003cli\u003e\u003ca href=\"http://d.hatena.ne.jp/asin/B07M98R3S5/msb2-22\" target=\"_blank\"\u003eこの商品を含むブログを見る\u003c/a\u003e\u003c/li\u003e\u003c/ul\u003e\u003c/div\u003e\u003cdiv class=\"hatena-asin-detail-foot\"\u003e\u003c/div\u003e\u003c/div\u003e\u003c/p\u003e\n","contentSnippet":"年末に発売されていたので読みました。[改訂新版]プログラマのための文字コード技術入門 (WEB+DB PRESS plusシリーズ)作者: 矢野啓介出版社/メーカー: 技術評論社発売日: 2018/12/28メディア: 単行本（ソフトカバー）この商品を含むブログを見る［改訂新版］プログラマのための文字コード技術入門：書籍案内｜技術評論社『［改訂新版］プログラマのための文字コード技術入門』発売! - yanok.netどんな感じの本だかざくっとタイトルに「プログラマのための」あるように、プログラミング経験者がターゲットになっています。ビット・バイト、2進数・16進数、ファイル、プロトコルのような「常識」についてはさらっとした説明で済まされているので、その分、文字コードの本質的な部分・実践的な部分の密度が高くなっています。文章が平易なので、読み進めやすいかと思います。さらに内容をはっきりさせるのであれば、『「現代日本のプログラマのための」文字コード技術入門』といったところでしょうか。この本は、日本で現在使われている文字コードの話が中心です。世界各地の文字コードだったり、歴史的な文字の符号化などにもおもしろい話はたくさんあるのですが、そこには深入りせず、実用的なテーマに絞って解説されています。国内での業務にすぐ役立ちそうな内容です。第7章「プログラミング言語と文字コード」では Java と Ruby が題材になっていますが、他の言語でも基本的な概念は共通しています。それ以外の章では Java や Ruby の知識はまったく要求されませんので、馴染みがなくても大丈夫です。その前の第6章が Web の話だということもあり、個人的には JavaScript も取り上げてほしいところですが。初版との比較この本（改訂新版）は第2版にあたります。初版は2010年2月に発行されています。プログラマのための文字コード技術入門 (WEB+DB PRESS plus) (WEB+DB PRESS plusシリーズ)作者: 矢野啓介出版社/メーカー: 技術評論社発売日: 2010/02/18メディア: 単行本（ソフトカバー）購入: 34人 クリック: 578回この商品を含むブログ (129件) を見る初版と改訂新版、左右に並べて目で diff をとりながら読みました。Unicode をはじめ、各規格・ツールの更新に合わせた細かな対応がなされていますが、こうして見比べてみると、文字コードの本質的な部分についてはほとんど変わらないことが分かります。Unicode 絵文字（2010年〜）についての記述も増えていますが、ここ数年の世界的な普及を見ると、第3版ではもっともっとページ数が割かれるもしれません(笑)この期間における最大の変化は、UTF-8 の圧倒的な普及でしょうか。初版では、著者の「JIS X 0213 推し」な雰囲気が端々から伝わってきましたが、UTF-8 の普及がそれを取り込む・呑み込むかたちになりました。Web ブラウジングで文字化けに遭遇するようなこともめっきり減り、たまに出会うと懐かしさすら感じます。Shift_JIS や EUC-JP や ISO-2022-JP を知らずに、UTF-8 一本で暮らしていける世代がすでに出てきているはずです。「レガシー」文字コードから解放される一方で、Unicode の孕んだ複雑さと向き合う場面が増えそうですが……ただし、「UTF-8 の圧倒的な普及」という印象は、自分が仕事で新しめの Web アプリケーションを触っているから、というのもあるかもしれません。大企業や役所の業務システムはいまどんな感じなんでしょうか。メモと補足p. 9 図 1.2亜 哀 愛 悪 握 圧 扱 安 … 惑 枠 湾 腕となっていますが、これは「旧」常用漢字の先頭部分と末尾部分ですね。2010年の常用漢字改定によって、「亜 哀 挨 愛 曖 悪 握 圧 … 惑 枠 湾 腕」という並びになりました。p. 193IANA の登録簿には、……実際に使われている JIS X 0213 の符号化方式が登録されていないという問題もあります。登録されていなかったんですね、知りませんでした。https://www.iana.org/assignments/character-sets/character-sets.xhtml需要がなかったのでしょうか……；；p. 206HTML のDTD において、「copy という名前は \u0026#169; を表す」という定義がなされているため、……このあたりは HTML 4.01 の話です。HTML5 に DTD は存在しません。p. 208Shift_JIS を用いる場合はリスト 6.1 の例の「UTF-8」の部分を「Shift_JIS」に、EUC-JP の場合は「EUC-JP」にします。HTML の \u003cmeta charset=\"hogehoge\"\u003e を説明している箇所です。ただし、この本が参照している HTML 5.2 にはAuthors should use UTF-8. Conformance checkers may advise authors against using legacy encodings.という説明があり、「UTF-8 を使用すべき」となっています。一方、HTML Living Standard ではさらに進んでThe Encoding standard requires use of the UTF-8 character encoding and requires use of the \"utf-8\" encoding label to identify it. Those requirements necessitate that the document's character encoding declaration, if it exists, specifies an encoding label using an ASCII case-insensitive match for \"utf-8\". Regardless of whether a character encoding declaration is present or not, the actual character encoding used to encode the document must be UTF-8.という記述になっており、「UTF-8 を使用しなければならない」ことになりました。p. 216URL の中に、予約されている記号や、ASCII で表現できない文字を書きたいときには、URL 符号化という方法が使われます。この本では触れられていませんが、ドメイン名部分は Punycode によって符号化されます。例えば、https://日本語.jp は https://xn--wgv71a119e.jp になります。p. 222クライアントからの送信に使われる文字コードは、HTML の form 要素の accept-charset 属性で明示的に指定することもできます。accept-charset=\"Shift_JIS\" と指定すれば Shift_JIS で送信するということです。HTML 5.2 では[...] each token must be an ASCII case-insensitive match for one of the labels of an ASCII-compatible encoding.となっています。一方、HTML Living Standard ではIf specified, the value must be an ASCII case-insensitive match for \"UTF-8\".と規定されており、こちらも UTF-8 固定になりました。p. 226最後に、これからの日本語メールの符号化がどうあるべきかを考察しました。初版の名残です。初版では今後についての考察があったのですが、UTF-8 の普及により、改訂新版ではこれが削除されています。p. 293 表 8.1表のタイトルが「ベンダー依存の変換の問題の発生する代表的な文字」になっていますが、おそらく表 8.2からの編集ミスです。[改訂新版]プログラマのための文字コード技術入門 (WEB+DB PRESS plusシリーズ)作者: 矢野啓介出版社/メーカー: 技術評論社発売日: 2018/12/28メディア: 単行本（ソフトカバー）この商品を含むブログを見る［改訂新版］プログラマのための文字コード技術入門 WEB+DB PRESS plus作者: 矢野啓介出版社/メーカー: 技術評論社発売日: 2018/12/22メディア: Kindle版この商品を含むブログを見る","link":"https://shiromoji.hatenablog.jp/entry/2019/03/15/014518","isoDate":"2019-03-14T16:45:18.000Z","dateMiliSeconds":1552581918000,"imageUrl":"https://images-na.ssl-images-amazon.com/images/I/81o8e5x73XL.jpg","authorName":"mashabow"},{"title":"type の話","content":"\u003ch3\u003eはじめに\u003c/h3\u003e\n\n\u003cp\u003eこの記事は、\u003ca href=\"https://adventar.org/calendars/3235\"\u003eFeedforce Advent Calendar 2018\u003c/a\u003e の 23 日目の記事です。前日は、あおいさんによる「\u003ca href=\"https://note.mu/pnao/n/n4f31c41633b5\"\u003e平成の終わりに非ヲタに聴いてほしいハロプロソング5選\u003c/a\u003e」でした。\u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/%A5%CF%A5%ED%A5%D7%A5%ED\"\u003eハロプロ\u003c/a\u003e……自分が音楽に疎すぎて話が広げられないのですが、あれですよね、\u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/%A1%EE-ute\"\u003e℃-ute\u003c/a\u003e が話題になって来たころ、こう\u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/%CA%B8%BB%FA%A5%B3%A1%BC%A5%C9\"\u003e文字コード\u003c/a\u003e的にチャレンジングなユニット名だな、などと考えていたのが記憶に残っています。\u003c/p\u003e\n\n\u003cp\u003eさて、ここから本題で、今回はとりとめもなく type について書いてみます。\u003c/p\u003e\n\n\u003ch3\u003etype\u003c/h3\u003e\n\n\u003cp\u003etype とはそのまま「型」なんですが、文字界隈のみなさんはご存じのとおり、活字だったり、その書体だったり、そのへんのものをざっくり type と呼びます。もう少しきっちり言うと、活字（スタンプみたいなあれです）は \u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/movable%20type\"\u003emovable type\u003c/a\u003e で、いろいろ並べ替えて使える文字の型、といった感じでしょうか。活字を組む（並べる）ことは\u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/%C1%C8%C8%C7\"\u003e組版\u003c/a\u003e typesetting ですし、活字の表面に凸状に浮かび上がっている文字の形は書体 typeface といいます。まんまですね。\u003c/p\u003e\n\n\u003cp\u003e活字を組んできれいな版面を作る技術が\u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/%A5%BF%A5%A4%A5%DD%A5%B0%A5%E9%A5%D5%A5%A3\"\u003eタイポグラフィ\u003c/a\u003e typography で、誤植の \u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/typo\"\u003etypo\u003c/a\u003e は typographic error の略らしいです。会社名や商品名の「ロゴ」は\u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/%A5%ED%A5%B4%A5%BF%A5%A4%A5%D7\"\u003eロゴタイプ\u003c/a\u003e logotype の略ですね。活字で文書を書く機械はタイプライター typewriter ですし、タイプライターを打つことはタイピング typing です。タイプライターを電信（電気通信）と組み合わせたシステムが\u003ca href=\"https://ja.wikipedia.org/wiki/%E3%83%86%E3%83%AC%E3%82%BF%E3%82%A4%E3%83%97%E7%AB%AF%E6%9C%AB\"\u003eテレタイプ\u003c/a\u003e teletype で、そこから来た TTY という略称・概念は、今でも \u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/Unix\"\u003eUnix\u003c/a\u003e 系のシステムで目にします\u003ca href=\"#f-fc4466bd\" name=\"fn-fc4466bd\" title=\"テレタイプは文字コードの歴史的にもおもしろいので、興味のある方は『文字符号の歴史―欧米と日本編』あたりをどうぞ。\"\u003e*1\u003c/a\u003e。\u003c/p\u003e\n\n\u003cp\u003eあ、ちなみに金属活字は、\u003ca href=\"https://www.youtube.com/watch?v=rDZ0bxPoefY\"\u003e母型（ぼけい）という鋳型に鉛合金を流し込んで鋳造する\u003c/a\u003eんですが、母\u003cb\u003e型\u003c/b\u003eといっても英語では matrix ですね。\u003c/p\u003e\n\n\u003cp\u003e\u003cfigure class=\"figure-image figure-image-fotolife\" title=\"金属活字とその母型\"\u003e\u003cspan itemscope itemtype=\"http://schema.org/Photograph\"\u003e\u003cimg src=\"https://cdn-ak.f.st-hatena.com/images/fotolife/m/mashabow/20181223/20181223233559.jpg\" alt=\"f:id:mashabow:20181223233559j:plain\" title=\"f:id:mashabow:20181223233559j:plain\" class=\"hatena-fotolife\" itemprop=\"image\"\u003e\u003c/span\u003e\u003cfigcaption\u003e金属活字とその母型\u003ca href=\"#f-dbf09dd2\" name=\"fn-dbf09dd2\" title=\"2017年3月11日に開催された《タイポグラフィの世界5 戦後日本の金属活字》で展示されていたものです。\"\u003e*2\u003c/a\u003e\u003c/figcaption\u003e\u003c/figure\u003e\u003c/p\u003e\n\n\u003cp\u003e現代のデジタルフォントはデータ以外に実体がありませんが、そのフォントフォーマットには TrueType や OpenType という名前がつけられています。フォントのデザイナーは type designer ですし、フォントを制作している会社は type foundry（つまり活字鋳造所）と今でも呼ばれます。わたしは前職、\u003ca href=\"http://typeproject.com/\"\u003eタイププロジェクト\u003c/a\u003eという会社でフォントのエンジニアをしていました\u003ca href=\"#f-d4db3462\" name=\"fn-d4db3462\" title=\"NHK 美の壺 取材こぼれ話 のページの《2018年6月22日放送 「心を伝える フォント」こぼれ話》という項に、タイププロジェクトの職場の様子（と自分の顔面）がちらっと載っています。\"\u003e*3\u003c/a\u003e。\u003c/p\u003e\n\n\u003cp\u003eさてさて。\u003c/p\u003e\n\n\u003cp\u003e7月にそのタイププロジェクトを退職し、現在\u003ca href=\"https://www.feedforce.jp/\"\u003eフィードフォース\u003c/a\u003eでフロントエンドエンジニア修行中です。自分が所属しているプロダクトで、TypeScript を導入しようということになり\u003ca href=\"#f-41cf73fb\" name=\"fn-41cf73fb\" title=\"正確に言うと、Flow から TypeScript への移行です。\"\u003e*4\u003c/a\u003e、ここしばらく TypeScript と格闘しています。\u003c/p\u003e\n\n\u003cp\u003eTypeScript。\u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/Microsoft\"\u003eMicrosoft\u003c/a\u003e が TypeScript を公開した2012年にこんなことをつぶやいていたのですが、\u003c/p\u003e\n\n\u003cp\u003e\u003cblockquote class=\"twitter-tweet\" data-lang=\"HASH(0xf50d7a8)\"\u003e\u003cp lang=\"ja\" dir=\"ltr\"\u003eTypeScript って文字に関係してそうで別に関係してない\u003c/p\u003e\u0026mdash; mashabow (@mashabow) \u003ca href=\"https://twitter.com/mashabow/status/253060102263812096?ref_src=twsrc%5Etfw\"\u003eOctober 2, 2012\u003c/a\u003e\u003c/blockquote\u003e\u003cscript async src=\"https://platform.twitter.com/widgets.js\" charset=\"utf-8\"\u003e\u003c/script\u003e\u003c/p\u003e\n\n\u003cp\u003e結局今年の夏まで勉強せずに来てしまったため、上記の type 好きとしては若干引け目を感じておりました。ちなみに文字界隈で script といえば「\u003ca href=\"http://d.hatena.ne.jp/keyword/%CD%D1%BB%FA%B7%CF\"\u003e用字系\u003c/a\u003e」の意味ですね。\u003c/p\u003e\n\n\u003cp\u003e導入時の設定（tsconfig.\u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/json\"\u003ejson\u003c/a\u003e, TSLint, Babel, Webpack, …）に慣れていなくて苦労しましたが、文法や概念自体は比較的すんなり飲み込めた感触です。昔ちょっと触った \u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/C%23\"\u003eC#\u003c/a\u003e や \u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/ActionScript\"\u003eActionScript\u003c/a\u003e をふわっと思い出しました。入門者向けのガイドだと、ES201x 側の機能の説明にページが割かれているものが多かったんですが、その点、@vvakame さんの以下のサイトはコンパクトで、手っ取り早く学ぶにはちょうどよい感じでした。\u003c/p\u003e\n\n\u003cul\u003e\n\u003cli\u003e\u003ca href=\"http://typescript.ninja/typescript-in-definitelyland/\"\u003eRevised Revised 型の国のTypeScript | Revised Revised TypeScript in Definitelyland\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\n\n\u003cp\u003e入門レベルを脱した後も、Qiita 上の \u003ca href=\"https://qiita.com/search?utf8=%E2%9C%93\u0026amp;sort=created\u0026amp;q=user%3Avvakame+typescript+%E5%A4%89%E6%9B%B4%E7%82%B9\"\u003eTypeScript x.y.z 変更点\u003c/a\u003e 記事にはいつもお世話になっています。\u003c/p\u003e\n\n\u003cp\u003eで、静的型付けや\u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/%B7%BF%BF%E4%CF%C0\"\u003e型推論\u003c/a\u003e、やっていることや仕組みはなんとなくわかるのですが、ちゃんとした仕組みについてはそういえば理解していませんでした。また、社内の\u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/%B4%D8%BF%F4%B7%BF%A5%D7%A5%ED%A5%B0%A5%E9%A5%DF%A5%F3%A5%B0\"\u003e関数型プログラミング\u003c/a\u003eに強いエンジニアから\u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/%B4%D8%BF%F4%B7%BF%A5%D7%A5%ED%A5%B0%A5%E9%A5%DF%A5%F3%A5%B0\"\u003e関数型プログラミング\u003c/a\u003e圧を感じることもあり、いい加減そのへん勉強しようかと、適当に検索して出てきた筑波大の講義資料でも読んでみました。\u003c/p\u003e\n\n\u003cul\u003e\n\u003cli\u003e\u003ca href=\"http://www.cs.tsukuba.ac.jp/~kam/complogic/\"\u003e計算論理学\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\n\n\u003cp\u003eそしたら、なかなかおもしろいんです。型なしラムダ計算のあたりは自分も学部時代に講義でやって、おもしろいー！と思っていたんですが、その自然な延長で型付け・\u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/%B7%BF%BF%E4%CF%C0\"\u003e型推論\u003c/a\u003eができるんですね。この次は何を読めばいいのかな、と思って「おすすめの（\u003cb\u003eわかりやすい\u003c/b\u003e）本などあったら教えてください 🙏」と社内のフロントエンドミーティングで聞いてみたところ、以下のふたつをおすすめされました。\u003c/p\u003e\n\n\u003cul\u003e\n\u003cli\u003e\u003ca href=\"https://github.com/MostlyAdequate/mostly-adequate-guide\"\u003eMostlyAdequate/mostly-adequate-guide: Mostly adequate guide to FP (in javascript)\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"https://amzn.to/2BMyMGf\"\u003e『すごい Haskell たのしく学ぼう！』\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\n\n\u003cp\u003e前者はちょうど読み終えたところなんですが、演習問題があって回答を自動で採点してくれるところがおもしろいですね。\u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/JavaScript\"\u003eJavaScript\u003c/a\u003e は分かっている人向けです。英語の言い回しがちょっと難しい気がしますが、\u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/%B4%D8%BF%F4%B7%BF%A5%D7%A5%ED%A5%B0%A5%E9%A5%DF%A5%F3%A5%B0\"\u003e関数型プログラミング\u003c/a\u003eに対する苦手感（昔 \u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/Lisp\"\u003eLisp\u003c/a\u003e を触ろうとしてどうも馴染めなかった）はだいぶ解消されました。この調子で、後者のすごいH本もこれから読もうかと思います。\u003c/p\u003e\n\n\u003ch3\u003eおわりに\u003c/h3\u003e\n\n\u003cp\u003eというわけで、近況報告も兼ねて、とりとめのない type の話でした。そのうち、「どちらの type にも詳しいです！！！」と言えるようになりたいですね。\u003c/p\u003e\n\n\u003cp\u003e明日の \u003ca href=\"https://adventar.org/calendars/3235\"\u003eFeedforce Advent Calendar 2018\u003c/a\u003e は \u003ca href=\"https://twitter.com/meihong\"\u003e@meihong\u003c/a\u003e さんです。なにやら、なにかしらハートフルな内容を書いてくださるようです。それでは良い休日を！\u003c/p\u003e\n\u003cdiv class=\"footnote\"\u003e\n\u003cp class=\"footnote\"\u003e\u003ca href=\"#fn-fc4466bd\" name=\"f-fc4466bd\" class=\"footnote-number\"\u003e*1\u003c/a\u003e\u003cspan class=\"footnote-delimiter\"\u003e:\u003c/span\u003e\u003cspan class=\"footnote-text\"\u003eテレタイプは\u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/%CA%B8%BB%FA%A5%B3%A1%BC%A5%C9\"\u003e文字コード\u003c/a\u003eの歴史的にもおもしろいので、興味のある方は『\u003ca href=\"https://amzn.to/2BMr279\"\u003e文字符号の歴史―欧米と日本編\u003c/a\u003e』あたりをどうぞ。\u003c/span\u003e\u003c/p\u003e\n\u003cp class=\"footnote\"\u003e\u003ca href=\"#fn-dbf09dd2\" name=\"f-dbf09dd2\" class=\"footnote-number\"\u003e*2\u003c/a\u003e\u003cspan class=\"footnote-delimiter\"\u003e:\u003c/span\u003e\u003cspan class=\"footnote-text\"\u003e2017年3月11日に開催された《\u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/%A5%BF%A5%A4%A5%DD%A5%B0%A5%E9%A5%D5%A5%A3\"\u003eタイポグラフィ\u003c/a\u003eの世界5 戦後日本の金属活字》で展示されていたものです。\u003c/span\u003e\u003c/p\u003e\n\u003cp class=\"footnote\"\u003e\u003ca href=\"#fn-d4db3462\" name=\"f-d4db3462\" class=\"footnote-number\"\u003e*3\u003c/a\u003e\u003cspan class=\"footnote-delimiter\"\u003e:\u003c/span\u003e\u003cspan class=\"footnote-text\"\u003e\u003ca href=\"http://www4.nhk.or.jp/tsubo/179/\"\u003eNHK 美の壺 取材こぼれ話\u003c/a\u003e のページの《2018年6月22日放送 「心を伝える フォント」こぼれ話》という項に、タイププロジェクトの職場の様子（と自分の顔面）がちらっと載っています。\u003c/span\u003e\u003c/p\u003e\n\u003cp class=\"footnote\"\u003e\u003ca href=\"#fn-41cf73fb\" name=\"f-41cf73fb\" class=\"footnote-number\"\u003e*4\u003c/a\u003e\u003cspan class=\"footnote-delimiter\"\u003e:\u003c/span\u003e\u003cspan class=\"footnote-text\"\u003e正確に言うと、\u003ca href=\"https://flow.org/\"\u003eFlow\u003c/a\u003e から TypeScript への移行です。\u003c/span\u003e\u003c/p\u003e\n\u003c/div\u003e","contentSnippet":"はじめにこの記事は、Feedforce Advent Calendar 2018 の 23 日目の記事です。前日は、あおいさんによる「平成の終わりに非ヲタに聴いてほしいハロプロソング5選」でした。ハロプロ……自分が音楽に疎すぎて話が広げられないのですが、あれですよね、℃-ute が話題になって来たころ、こう文字コード的にチャレンジングなユニット名だな、などと考えていたのが記憶に残っています。さて、ここから本題で、今回はとりとめもなく type について書いてみます。typetype とはそのまま「型」なんですが、文字界隈のみなさんはご存じのとおり、活字だったり、その書体だったり、そのへんのものをざっくり type と呼びます。もう少しきっちり言うと、活字（スタンプみたいなあれです）は movable type で、いろいろ並べ替えて使える文字の型、といった感じでしょうか。活字を組む（並べる）ことは組版 typesetting ですし、活字の表面に凸状に浮かび上がっている文字の形は書体 typeface といいます。まんまですね。活字を組んできれいな版面を作る技術がタイポグラフィ typography で、誤植の typo は typographic error の略らしいです。会社名や商品名の「ロゴ」はロゴタイプ logotype の略ですね。活字で文書を書く機械はタイプライター typewriter ですし、タイプライターを打つことはタイピング typing です。タイプライターを電信（電気通信）と組み合わせたシステムがテレタイプ teletype で、そこから来た TTY という略称・概念は、今でも Unix 系のシステムで目にします*1。あ、ちなみに金属活字は、母型（ぼけい）という鋳型に鉛合金を流し込んで鋳造するんですが、母型といっても英語では matrix ですね。金属活字とその母型*2現代のデジタルフォントはデータ以外に実体がありませんが、そのフォントフォーマットには TrueType や OpenType という名前がつけられています。フォントのデザイナーは type designer ですし、フォントを制作している会社は type foundry（つまり活字鋳造所）と今でも呼ばれます。わたしは前職、タイププロジェクトという会社でフォントのエンジニアをしていました*3。さてさて。7月にそのタイププロジェクトを退職し、現在フィードフォースでフロントエンドエンジニア修行中です。自分が所属しているプロダクトで、TypeScript を導入しようということになり*4、ここしばらく TypeScript と格闘しています。TypeScript。Microsoft が TypeScript を公開した2012年にこんなことをつぶやいていたのですが、TypeScript って文字に関係してそうで別に関係してない— mashabow (@mashabow) October 2, 2012結局今年の夏まで勉強せずに来てしまったため、上記の type 好きとしては若干引け目を感じておりました。ちなみに文字界隈で script といえば「用字系」の意味ですね。導入時の設定（tsconfig.json, TSLint, Babel, Webpack, …）に慣れていなくて苦労しましたが、文法や概念自体は比較的すんなり飲み込めた感触です。昔ちょっと触った C# や ActionScript をふわっと思い出しました。入門者向けのガイドだと、ES201x 側の機能の説明にページが割かれているものが多かったんですが、その点、@vvakame さんの以下のサイトはコンパクトで、手っ取り早く学ぶにはちょうどよい感じでした。Revised Revised 型の国のTypeScript | Revised Revised TypeScript in Definitelyland入門レベルを脱した後も、Qiita 上の TypeScript x.y.z 変更点 記事にはいつもお世話になっています。で、静的型付けや型推論、やっていることや仕組みはなんとなくわかるのですが、ちゃんとした仕組みについてはそういえば理解していませんでした。また、社内の関数型プログラミングに強いエンジニアから関数型プログラミング圧を感じることもあり、いい加減そのへん勉強しようかと、適当に検索して出てきた筑波大の講義資料でも読んでみました。計算論理学そしたら、なかなかおもしろいんです。型なしラムダ計算のあたりは自分も学部時代に講義でやって、おもしろいー！と思っていたんですが、その自然な延長で型付け・型推論ができるんですね。この次は何を読めばいいのかな、と思って「おすすめの（わかりやすい）本などあったら教えてください 🙏」と社内のフロントエンドミーティングで聞いてみたところ、以下のふたつをおすすめされました。MostlyAdequate/mostly-adequate-guide: Mostly adequate guide to FP (in javascript)『すごい Haskell たのしく学ぼう！』前者はちょうど読み終えたところなんですが、演習問題があって回答を自動で採点してくれるところがおもしろいですね。JavaScript は分かっている人向けです。英語の言い回しがちょっと難しい気がしますが、関数型プログラミングに対する苦手感（昔 Lisp を触ろうとしてどうも馴染めなかった）はだいぶ解消されました。この調子で、後者のすごいH本もこれから読もうかと思います。おわりにというわけで、近況報告も兼ねて、とりとめのない type の話でした。そのうち、「どちらの type にも詳しいです！！！」と言えるようになりたいですね。明日の Feedforce Advent Calendar 2018 は @meihong さんです。なにやら、なにかしらハートフルな内容を書いてくださるようです。それでは良い休日を！*1:テレタイプは文字コードの歴史的にもおもしろいので、興味のある方は『文字符号の歴史―欧米と日本編』あたりをどうぞ。*2:2017年3月11日に開催された《タイポグラフィの世界5 戦後日本の金属活字》で展示されていたものです。*3:NHK 美の壺 取材こぼれ話 のページの《2018年6月22日放送 「心を伝える フォント」こぼれ話》という項に、タイププロジェクトの職場の様子（と自分の顔面）がちらっと載っています。*4:正確に言うと、Flow から TypeScript への移行です。","link":"https://shiromoji.hatenablog.jp/entry/2018/12/23/235900","isoDate":"2018-12-23T14:59:00.000Z","dateMiliSeconds":1545577140000,"imageUrl":"https://cdn-ak.f.st-hatena.com/images/fotolife/m/mashabow/20181223/20181223233559.jpg","authorName":"mashabow"},{"title":"フォントまわりのツールの探し方","content":"\u003cp\u003e\u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/Twitter\"\u003eTwitter\u003c/a\u003e 上でとある鍵アカ氏が「このツール知らなかった！ 使ってみたらべんり！ 楽しい！」的なことをつぶやいていました。フォントの世界にはお役立ちツールがいろいろとあるのですが、日本語での情報が少ないこともあり、とっかかりが難しいかもしれません。そこでこの記事では、「ツールを探すならまずはここから」という定番の情報源を3つ紹介しておきます。\u003c/p\u003e\n\n\u003ch3\u003e1. awesome-typography\u003c/h3\u003e\n\n\u003cp\u003e\u003ciframe src=\"https://hatenablog-parts.com/embed?url=https%3A%2F%2Fgithub.com%2FJolg42%2Fawesome-typography\" title=\"Jolg42/awesome-typography\" class=\"embed-card embed-webcard\" scrolling=\"no\" frameborder=\"0\" style=\"display: block; width: 100%; height: 155px; max-width: 500px; margin: 10px 0px;\"\u003e\u003c/iframe\u003e\u003ccite class=\"hatena-citation\"\u003e\u003ca href=\"https://github.com/Jolg42/awesome-typography\"\u003egithub.com\u003c/a\u003e\u003c/cite\u003e\u003c/p\u003e\n\n\u003cp\u003eフォント関連のさまざまなツールがリストアップされたリンク集です。ツールだけでなく、\u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/%A5%AA%A1%BC%A5%D7%A5%F3%A5%BD%A1%BC%A5%B9\"\u003eオープンソース\u003c/a\u003eのフォントや、フォント関連のドキュメントなども一緒に挙げられています。\u003c/p\u003e\n\n\u003cp\u003e\u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/%A5%D7%A5%ED%A5%B0%A5%E9%A5%DF%A5%F3%A5%B0%B8%C0%B8%EC\"\u003eプログラミング言語\u003c/a\u003e別に並んでおり、ごく簡単な説明もついていますので、「この言語でうまいことあれをやってくれるツールないかなー？」というときには真っ先にチェックすべきページです。\u003c/p\u003e\n\n\u003ch3\u003e2. 技術カンファレンスの動画\u003c/h3\u003e\n\n\u003cp\u003eフォント関係のカンファレンスというと \u003ca href=\"https://www.atypi.org/conferences\"\u003eATypI\u003c/a\u003e が有名ですが、\u003ca href=\"https://www.typotalks.com/labs/\"\u003eTYPO Labs\u003c/a\u003e や \u003ca href=\"http://typemedia.org/robothon/\"\u003eRobothon\u003c/a\u003e のように、技術的側面に特化したカンファレンスも開催されています。定番ツールから尖ったツールまで、作者の解説や実演デモをじっくり見ることができます。以下のように動画が公開されており、カンファレンスに行かずとも視聴できるのが嬉しいところです。\u003c/p\u003e\n\n\u003cul\u003e\n\u003cli\u003e\u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/TYPO\"\u003eTYPO\u003c/a\u003e Labs: \u003ca href=\"https://www.typotalks.com/videos/?talk_event=TYPO%20Labs%202018\u0026amp;talk_langs[en]=en\u0026amp;talk_langs[de]=de\"\u003e2018\u003c/a\u003e, \u003ca href=\"https://www.typotalks.com/videos/?talk_event=TYPO%20Labs%202017\u0026amp;talk_langs[en]=en\u0026amp;talk_langs[de]=de\"\u003e2017\u003c/a\u003e, \u003ca href=\"https://www.typotalks.com/videos/?talk_event=TYPO%20Labs%202016\u0026amp;talk_langs[en]=en\u0026amp;talk_langs[de]=de\"\u003e2016\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003eRobothon: 2018 \u003ca href=\"https://www.facebook.com/RoyalAcademyKABK/videos/1613161622101814/\"\u003e[1]\u003c/a\u003e \u003ca href=\"https://www.facebook.com/RoyalAcademyKABK/videos/1614287785322531/\"\u003e[2]\u003c/a\u003e \u003ca href=\"https://www.facebook.com/RoyalAcademyKABK/videos/1614395861978390/\"\u003e[3]\u003c/a\u003e; \u003ca href=\"https://vimeo.com/robothon\"\u003e2015/2012/2009\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\n\n\u003ch3\u003e3. TypeDrawers\u003c/h3\u003e\n\n\u003cp\u003e\u003ca href=\"https://typedrawers.com/\"\u003eTypeDrawers\u003c/a\u003e は、書体制作やレタリング、\u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/%A5%BF%A5%A4%A5%DD%A5%B0%A5%E9%A5%D5%A5%A3\"\u003eタイポグラフィ\u003c/a\u003eに関する\u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/%B7%C7%BC%A8\"\u003e掲示\u003c/a\u003e板です。プロの書体デザイナーや開発者が多く、活発な議論がなされています。いくつかのカテゴリーに分かれていますが、ツールの話題を探すのであれば、下の2つがメインになるでしょう。\u003c/p\u003e\n\n\u003cul\u003e\n\u003cli\u003e\u003ca href=\"https://typedrawers.com/categories/type-design-software\"\u003eType Design Software — TypeDrawers\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"https://typedrawers.com/categories/font-technology\"\u003eFont Technology — TypeDrawers\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\n\n\u003cp\u003eいろいろなスレッドが立ちますので、全部追いかけようとすると大変かもしれませんが、最新の動向や界隈の評判などをチェックすることができます。フォント界の Stack Overflow のような存在です。アカウント登録をして、やりとりに参加するのも良いかもしれません。\u003c/p\u003e\n\n\u003ch3\u003eその先へ\u003c/h3\u003e\n\n\u003cp\u003e以上、3つのソースをさらっと紹介しました。気になるツールや愛用のツールが出てきたら、そのツールの\u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/%A5%EA%A5%DD%A5%B8%A5%C8%A5%EA\"\u003eリポジトリ\u003c/a\u003e／フォーラムを覗いたり、作者の \u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/Twitter\"\u003eTwitter\u003c/a\u003e をフォローしたりすると、芋づる式に世界が広がっていきます。巨人の肩の上に乗って満喫しましょう。\u003c/p\u003e\n\n\u003cp\u003e\u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/%C4%C9%B5%AD\"\u003e追記\u003c/a\u003e：OpenType の仕様に興味が出てきたら以下の記事もどうぞ。\u003c/p\u003e\n\n\u003cul\u003e\n\u003cli\u003e\u003ca href=\"https://shiromoji.hatenablog.jp/entry/2016/06/21/003529\"\u003eOpenType の仕様策定の議論をのぞくには - しろもじメモランダム\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\n","contentSnippet":"Twitter 上でとある鍵アカ氏が「このツール知らなかった！ 使ってみたらべんり！ 楽しい！」的なことをつぶやいていました。フォントの世界にはお役立ちツールがいろいろとあるのですが、日本語での情報が少ないこともあり、とっかかりが難しいかもしれません。そこでこの記事では、「ツールを探すならまずはここから」という定番の情報源を3つ紹介しておきます。1. awesome-typographygithub.comフォント関連のさまざまなツールがリストアップされたリンク集です。ツールだけでなく、オープンソースのフォントや、フォント関連のドキュメントなども一緒に挙げられています。プログラミング言語別に並んでおり、ごく簡単な説明もついていますので、「この言語でうまいことあれをやってくれるツールないかなー？」というときには真っ先にチェックすべきページです。2. 技術カンファレンスの動画フォント関係のカンファレンスというと ATypI が有名ですが、TYPO Labs や Robothon のように、技術的側面に特化したカンファレンスも開催されています。定番ツールから尖ったツールまで、作者の解説や実演デモをじっくり見ることができます。以下のように動画が公開されており、カンファレンスに行かずとも視聴できるのが嬉しいところです。TYPO Labs: 2018, 2017, 2016Robothon: 2018 [1] [2] [3]; 2015/2012/20093. TypeDrawersTypeDrawers は、書体制作やレタリング、タイポグラフィに関する掲示板です。プロの書体デザイナーや開発者が多く、活発な議論がなされています。いくつかのカテゴリーに分かれていますが、ツールの話題を探すのであれば、下の2つがメインになるでしょう。Type Design Software — TypeDrawersFont Technology — TypeDrawersいろいろなスレッドが立ちますので、全部追いかけようとすると大変かもしれませんが、最新の動向や界隈の評判などをチェックすることができます。フォント界の Stack Overflow のような存在です。アカウント登録をして、やりとりに参加するのも良いかもしれません。その先へ以上、3つのソースをさらっと紹介しました。気になるツールや愛用のツールが出てきたら、そのツールのリポジトリ／フォーラムを覗いたり、作者の Twitter をフォローしたりすると、芋づる式に世界が広がっていきます。巨人の肩の上に乗って満喫しましょう。追記：OpenType の仕様に興味が出てきたら以下の記事もどうぞ。OpenType の仕様策定の議論をのぞくには - しろもじメモランダム","link":"https://shiromoji.hatenablog.jp/entry/2018/08/12/235803","isoDate":"2018-08-12T14:58:03.000Z","dateMiliSeconds":1534085883000,"imageUrl":"https://cdn.blog.st-hatena.com/images/theme/og-image-1500.png","authorName":"mashabow"},{"title":"タイププロジェクト株式会社を退職しました","content":"\u003cp\u003e2018年7月10日付けで\u003ca href=\"http://typeproject.com/\"\u003eタイププロジェクト株式会社\u003c/a\u003eを退職しました。\u003c/p\u003e\n\n\u003cp\u003e大学在学中の2012年8月からタイププロジェクトの仕事をするようになり、その後タイプエンジニア（フォントエンジニア）として\u003ca href=\"https://shiromoji.hatenablog.jp/entry/20150419/1429456773\"\u003e2015年4月に入社しました\u003c/a\u003e。あわせると、6年近くにわたってお世話になったことになります。\u003c/p\u003e\n\n\u003cp\u003eタイププロジェクトがコンパクトなチームだったこともあり、製品版フォントのプロダクション、フォーマット変換やカスタマイズ、内製ツールの開発、制作ワークフローの自動化・省力化、イントラの管理などなど、とにかくいろいろなことに携わることができました。仕事を始めた当初はほとんど何もわかっていなかったのですが\u003ca href=\"#f-dedeb0f6\" name=\"fn-dedeb0f6\" title=\"Python を身に着けたのも実はこのときです。\"\u003e*1\u003c/a\u003e、おかげさまで随分いろいろなことができるようになり、自信もつきました。フォントへの興味がますます深まったのは、言うまでもありません。\u003c/p\u003e\n\n\u003cp\u003eタイププロジェクトに参加するまであまり想像していなかったのですが、実際の仕事では、タイプデザイナーなど他のメンバーとのコミュニケーションが頻繁に発生します。「こういう機能がほしい」「こんな感じならできるけど」とやりとりしながら開発を進めていく過程は、なかなか楽しいものでした。まわりの方が協力的で、この点において恵まれた環境だったと感じます。\u003c/p\u003e\n\n\u003cp\u003eちなみに、明日からは別の会社にフロントエンドエンジニアとして入社します。文字関係の仕事ではありません。エンジニアとしてあらためて基礎固めを行い、実践的なチーム開発のスキルを身につけることができれば、と考えています。\u003c/p\u003e\n\n\u003cp\u003e仕事としては文字から離れることになりますが、あいかわらず興味は尽きませんので、これからもこのまま趣味として続けていきたいと思います。今後ともどうぞよろしくお願いいたします。\u003c/p\u003e\n\u003cdiv class=\"footnote\"\u003e\n\u003cp class=\"footnote\"\u003e\u003ca href=\"#fn-dedeb0f6\" name=\"f-dedeb0f6\" class=\"footnote-number\"\u003e*1\u003c/a\u003e\u003cspan class=\"footnote-delimiter\"\u003e:\u003c/span\u003e\u003cspan class=\"footnote-text\"\u003e\u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/Python\"\u003ePython\u003c/a\u003e を身に着けたのも実はこのときです。\u003c/span\u003e\u003c/p\u003e\n\u003c/div\u003e","contentSnippet":"2018年7月10日付けでタイププロジェクト株式会社を退職しました。大学在学中の2012年8月からタイププロジェクトの仕事をするようになり、その後タイプエンジニア（フォントエンジニア）として2015年4月に入社しました。あわせると、6年近くにわたってお世話になったことになります。タイププロジェクトがコンパクトなチームだったこともあり、製品版フォントのプロダクション、フォーマット変換やカスタマイズ、内製ツールの開発、制作ワークフローの自動化・省力化、イントラの管理などなど、とにかくいろいろなことに携わることができました。仕事を始めた当初はほとんど何もわかっていなかったのですが*1、おかげさまで随分いろいろなことができるようになり、自信もつきました。フォントへの興味がますます深まったのは、言うまでもありません。タイププロジェクトに参加するまであまり想像していなかったのですが、実際の仕事では、タイプデザイナーなど他のメンバーとのコミュニケーションが頻繁に発生します。「こういう機能がほしい」「こんな感じならできるけど」とやりとりしながら開発を進めていく過程は、なかなか楽しいものでした。まわりの方が協力的で、この点において恵まれた環境だったと感じます。ちなみに、明日からは別の会社にフロントエンドエンジニアとして入社します。文字関係の仕事ではありません。エンジニアとしてあらためて基礎固めを行い、実践的なチーム開発のスキルを身につけることができれば、と考えています。仕事としては文字から離れることになりますが、あいかわらず興味は尽きませんので、これからもこのまま趣味として続けていきたいと思います。今後ともどうぞよろしくお願いいたします。*1:Python を身に着けたのも実はこのときです。","link":"https://shiromoji.hatenablog.jp/entry/2018/07/11/002504","isoDate":"2018-07-10T15:25:04.000Z","dateMiliSeconds":1531236304000,"imageUrl":"https://cdn.blog.st-hatena.com/images/theme/og-image-1500.png","authorName":"mashabow"},{"title":"Python パッケージとして再構成された AFDKO 2.7 がリリース","content":"\u003cp\u003eAFDKO の新バージョン 2.7.0 が先週リリースされました。AFDKO は、フォント開発のための \u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/Adobe\"\u003eAdobe\u003c/a\u003e 製\u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/%A5%B3%A5%DE%A5%F3%A5%C9%A5%E9%A5%A4%A5%F3\"\u003eコマンドライン\u003c/a\u003eツール集です。\u003c/p\u003e\n\n\u003cp\u003e\u003ciframe src=\"https://hatenablog-parts.com/embed?url=https%3A%2F%2Fgithub.com%2Fadobe-type-tools%2Fafdko\" title=\"adobe-type-tools/afdko\" class=\"embed-card embed-webcard\" scrolling=\"no\" frameborder=\"0\" style=\"display: block; width: 100%; height: 155px; max-width: 500px; margin: 10px 0px;\"\u003e\u003c/iframe\u003e\u003ccite class=\"hatena-citation\"\u003e\u003ca href=\"https://github.com/adobe-type-tools/afdko\"\u003egithub.com\u003c/a\u003e\u003c/cite\u003e\u003c/p\u003e\n\n\u003ch3\u003e\u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/Python\"\u003ePython\u003c/a\u003e パッケージ化\u003c/h3\u003e\n\n\u003cp\u003e今回の大きな変更点は、AFDKO の中身がひとつの \u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/Python\"\u003ePython\u003c/a\u003e パッケージへと、がらっと再構成された点です。\u003c/p\u003e\n\n\u003cblockquote\u003e\u003cp\u003eThe AFDKO has been restructured so that it can be installed as a \u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/Python\"\u003ePython\u003c/a\u003e package. It now depends on the user's \u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/Python\"\u003ePython\u003c/a\u003e \u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/interpreter\"\u003einterpreter\u003c/a\u003e, and no longer contains its own \u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/Python\"\u003ePython\u003c/a\u003e \u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/interpreter\"\u003einterpreter\u003c/a\u003e.\u003c/p\u003e\u003c/blockquote\u003e\n\n\u003cp\u003e\u003ca href=\"https://github.com/adobe-type-tools/afdko/tree/2.7.0#major-changes\"\u003ehttps://github.com/adobe-type-tools/afdko/tree/2.7.0#major-changes\u003c/a\u003e\u003c/p\u003e\n\n\u003cp\u003eすでに \u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/PyPI\"\u003ePyPI\u003c/a\u003e へ \u003ca href=\"https://pypi.org/project/afdko/\"\u003eafdko パッケージ\u003c/a\u003eがアップロードされていますので、普段の \u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/Python\"\u003ePython\u003c/a\u003e パッケージと同じく、以下のコマンドでインストールすることができます。\u003c/p\u003e\n\n\u003cpre class=\"code\" data-lang=\"\" data-unlink\u003e$ pip install afdko\u003c/pre\u003e\n\n\n\u003cp\u003e従来（2.5 まで）の AFDKO は、\u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/%A5%B9%A5%AF%A5%EA%A5%D7%A5%C8\"\u003eスクリプト\u003c/a\u003eやバイナリ等が \u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/Python\"\u003ePython\u003c/a\u003e \u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/%A5%A4%A5%F3%A5%BF%A5%D7%A5%EA%A5%BF\"\u003eインタプリタ\u003c/a\u003eとともに ZIP で固められて配布されており、AFDKO 中の \u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/Python\"\u003ePython\u003c/a\u003e \u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/%A5%B9%A5%AF%A5%EA%A5%D7%A5%C8\"\u003eスクリプト\u003c/a\u003eは、必ずこの\u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/%A5%A4%A5%F3%A5%BF%A5%D7%A5%EA%A5%BF\"\u003eインタプリタ\u003c/a\u003eを使って実行されるようになっていました。また、これを実現するためにインストール方法やパスの管理が独自のものになっており、少々扱いづらい面がありました。\u003c/p\u003e\n\n\u003cp\u003e\u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/Python\"\u003ePython\u003c/a\u003e パッケージへの再構成作業は2017年末ごろからスタートし、ベータ期間（2.6 がこれに相当）を経て、今回の 2.7.0 をもってめでたく正式リリースとなったようです。この \u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/Python\"\u003ePython\u003c/a\u003e パッケージ化によって、以下のようなメリットが享受できそうです。\u003c/p\u003e\n\n\u003cul\u003e\n\u003cli\u003eインストール／アンインストール／更新が、おなじみの pip で行えるようになる\u003c/li\u003e\n\u003cli\u003eバージョンの固定や切り替えが容易になる\u003c/li\u003e\n\u003cli\u003e他の \u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/Python\"\u003ePython\u003c/a\u003e パッケージと組み合わせて使いやすくなる\u003c/li\u003e\n\u003cli\u003eパッケージのビルド方法やテスト方法が整備・明文化される\u003c/li\u003e\n\u003c/ul\u003e\n\n\n\u003ch3\u003eAFDKO 開発の盛り上がり\u003c/h3\u003e\n\n\u003cp\u003eAFDKO の開発は、\u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/Adobe\"\u003eAdobe\u003c/a\u003e のエンジニアが中心となって進められていますが、昨年まではあまり活発には見えませんでした。バリアブルフォントへの対応などは進められていたようですが、発展著しい \u003ca href=\"https://github.com/fonttools/fonttools\"\u003efontTools\u003c/a\u003e などと比べてしまうと、地味な印象がありました。また、AFDKO には\u003c/p\u003e\n\n\u003cul\u003e\n\u003cli\u003eコードの可読性が低い\u003c/li\u003e\n\u003cli\u003eテストがほどんどない\u003c/li\u003e\n\u003cli\u003e古い C のコードが多い\u003c/li\u003e\n\u003cli\u003eバグ報告やプルリク\u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/%A5%A8%A5%B9\"\u003eエス\u003c/a\u003eトがなかなか対応されない\u003c/li\u003e\n\u003cli\u003eバグがあっても自分では直しにくい\u003c/li\u003e\n\u003cli\u003e\u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/Python\"\u003ePython\u003c/a\u003e 2\u003c/li\u003e\n\u003c/ul\u003e\n\n\n\u003cp\u003eなどのつらい面も多々あり、個人的にはここ数年、fontTools の方を利用する機会が圧倒的に多くなっていました。\u003c/p\u003e\n\n\u003cp\u003eしかしながら、昨秋ごろから開発が加速し、現在に至るまで活発な状態が続いています。\u003c/p\u003e\n\n\u003cp\u003e\u003ca href=\"https://github.com/adobe-type-tools/afdko/graphs/contributors\"\u003e\u003cimg src=\"https://cdn-ak.f.st-hatena.com/images/fotolife/m/mashabow/20180516/20180516224554.png\" class=\"hatena-fotolife\" itemprop=\"image\"\u003e\u003c/a\u003e\u003c/p\u003e\n\n\u003cp\u003e内容としては、コードの\u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/%A5%EA%A5%D5%A5%A1%A5%AF%A5%BF%A5%EA%A5%F3%A5%B0\"\u003eリファクタリング\u003c/a\u003eやテスト・CIの整備といった基礎的な部分の改善が大きくなっており、前述の \u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/Python\"\u003ePython\u003c/a\u003e パッケージ化も、その流れの中で実施されたように見えます。\u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/Python\"\u003ePython\u003c/a\u003e 3 をサポートするための作業も始まり、明るい未来が見えてきた感じがします。\u003c/p\u003e\n\n\u003cp\u003e期待を込めつつ、これからも引き続き AFDKO の動きに注目していこうと思います。\u003c/p\u003e\n","contentSnippet":"AFDKO の新バージョン 2.7.0 が先週リリースされました。AFDKO は、フォント開発のための Adobe 製コマンドラインツール集です。github.comPython パッケージ化今回の大きな変更点は、AFDKO の中身がひとつの Python パッケージへと、がらっと再構成された点です。The AFDKO has been restructured so that it can be installed as a Python package. It now depends on the user's Python interpreter, and no longer contains its own Python interpreter.https://github.com/adobe-type-tools/afdko/tree/2.7.0#major-changesすでに PyPI へ afdko パッケージがアップロードされていますので、普段の Python パッケージと同じく、以下のコマンドでインストールすることができます。$ pip install afdko従来（2.5 まで）の AFDKO は、スクリプトやバイナリ等が Python インタプリタとともに ZIP で固められて配布されており、AFDKO 中の Python スクリプトは、必ずこのインタプリタを使って実行されるようになっていました。また、これを実現するためにインストール方法やパスの管理が独自のものになっており、少々扱いづらい面がありました。Python パッケージへの再構成作業は2017年末ごろからスタートし、ベータ期間（2.6 がこれに相当）を経て、今回の 2.7.0 をもってめでたく正式リリースとなったようです。この Python パッケージ化によって、以下のようなメリットが享受できそうです。インストール／アンインストール／更新が、おなじみの pip で行えるようになるバージョンの固定や切り替えが容易になる他の Python パッケージと組み合わせて使いやすくなるパッケージのビルド方法やテスト方法が整備・明文化されるAFDKO 開発の盛り上がりAFDKO の開発は、Adobe のエンジニアが中心となって進められていますが、昨年まではあまり活発には見えませんでした。バリアブルフォントへの対応などは進められていたようですが、発展著しい fontTools などと比べてしまうと、地味な印象がありました。また、AFDKO にはコードの可読性が低いテストがほどんどない古い C のコードが多いバグ報告やプルリクエストがなかなか対応されないバグがあっても自分では直しにくいPython 2などのつらい面も多々あり、個人的にはここ数年、fontTools の方を利用する機会が圧倒的に多くなっていました。しかしながら、昨秋ごろから開発が加速し、現在に至るまで活発な状態が続いています。内容としては、コードのリファクタリングやテスト・CIの整備といった基礎的な部分の改善が大きくなっており、前述の Python パッケージ化も、その流れの中で実施されたように見えます。Python 3 をサポートするための作業も始まり、明るい未来が見えてきた感じがします。期待を込めつつ、これからも引き続き AFDKO の動きに注目していこうと思います。","link":"https://shiromoji.hatenablog.jp/entry/2018/05/16/235048","isoDate":"2018-05-16T14:50:48.000Z","dateMiliSeconds":1526482248000,"imageUrl":"https://cdn-ak.f.st-hatena.com/images/fotolife/m/mashabow/20180516/20180516224554.png","authorName":"mashabow"},{"title":"fontTools のペンを使ってグリフのアウトラインを取得する","content":"\u003cp\u003e先日 \u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/Twitter\"\u003eTwitter\u003c/a\u003e で、「グリフのアウトラインの座標列を取りたいんだけど」「それ pen protocol でできるよ！」というやりとりをしました。この記事では、pen protocol に対応したペンでアウトラインを取得する方法について、具体的に解説してみます。\u003c/p\u003e\n\n\u003cp\u003e\u003cblockquote class=\"twitter-tweet\" data-lang=\"ja\"\u003e\u003cp lang=\"ja\" dir=\"ltr\"\u003eフォントとかについてベジエのアウトラインの法線方向に制御点を移動することでアウトラインを太らせたり細らせたりする処理を思ひついたんだけど、テスト環境構築するのが面倒。フォントファイルから制御点の座標列を取り出し、それを描画する処理ができないとだめ感。なにかいいのあるかな…。\u003c/p\u003e\u0026mdash; にせねこ (@nixeneko) \u003ca href=\"https://twitter.com/nixeneko/status/928179735590342656?ref_src=twsrc%5Etfw\"\u003e2017年11月8日\u003c/a\u003e\u003c/blockquote\u003e\u003cscript async src=\"https://platform.twitter.com/widgets.js\" charset=\"utf-8\"\u003e\u003c/script\u003e\n\u003cblockquote class=\"twitter-tweet\" data-lang=\"ja\"\u003e\u003cp lang=\"ja\" dir=\"ltr\"\u003e目的はもう果たせたようですが、グリフのアウトラインを \u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/Python\"\u003ePython\u003c/a\u003e で読み書き加工するのであれば、(segment) pen protocol \u003ca href=\"https://t.co/kR5gvCz5kY\"\u003ehttps://t.co/kR5gvCz5kY\u003c/a\u003e や point pen protocol \u003ca href=\"https://t.co/JvIUdqkEfu\"\u003ehttps://t.co/JvIUdqkEfu\u003c/a\u003e が標準的です。慣れるまでちょっと癖はあるものの、いろいろと応用が利きます。\u003c/p\u003e\u0026mdash; mashabow (@mashabow) \u003ca href=\"https://twitter.com/mashabow/status/928289778465832960?ref_src=twsrc%5Etfw\"\u003e2017年11月8日\u003c/a\u003e\u003c/blockquote\u003e\u003cscript async src=\"https://platform.twitter.com/widgets.js\" charset=\"utf-8\"\u003e\u003c/script\u003e\u003c/p\u003e\n\n\u003ch3\u003epen protocol とペン\u003c/h3\u003e\n\n\u003cp\u003eさて、そもそも pen protocol とは何でしょう？　今回は\u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/%A5%D7%A5%ED%A5%C8%A5%B3%A5%EB\"\u003eプロトコル\u003c/a\u003eの詳細には触れず、概観だけ説明します。\u003c/p\u003e\n\n\u003cp\u003eフォント界隈では \u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/Python\"\u003ePython\u003c/a\u003e が共通言語になっています。しかし、グリフを表すためのオブジェクトは、フォントエディタ（Glyphs, RoboFont, FontLab, ...）やライブラリ（fontTools, ufoLib, defcon, fontParts, ...）ごとにそれぞれ独自に定義されています。ざっくり言ってしまうと、「どんなグリフオブジェクトであれ、共通の\u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/%A5%A4%A5%F3%A5%BF%A1%BC%A5%D5%A5%A7%A5%A4%A5%B9\"\u003eインターフェイス\u003c/a\u003eでアウトラインを読み書きできると楽だよね」「\u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/SVG\"\u003eSVG\u003c/a\u003e や PDF やいろんな描画 \u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/API\"\u003eAPI\u003c/a\u003e にも対応したいよね」というのが pen protocol の発想です。pen protocol によってグリフからアウトラインを得たり、アウトラインを描いたりするためのオブジェクトをペン（pen）と呼びます。\u003c/p\u003e\n\n\u003cp\u003epen protocol が広まった結果、現在までにいろいろなペンが実装されてきました。以下にいくつか例を挙げますが、これ以外にも存在しています。\u003c/p\u003e\n\n\u003cul\u003e\n\u003cli\u003e\u003ca href=\"https://github.com/fonttools/fonttools/tree/master/Lib/fontTools/pens\"\u003e\u003ccode\u003efontTools.pens.*\u003c/code\u003e\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"https://github.com/robofab-developers/fontPens/tree/master/Lib/fontPens\"\u003e\u003ccode\u003efontPens.*\u003c/code\u003e\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"https://github.com/unified-font-object/ufoLib/blob/master/Lib/ufoLib/pointPen.py\"\u003e\u003ccode\u003eufoLib.pointPen.*\u003c/code\u003e\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\n\n\u003cp\u003eなお、pen protocol には \u003ca href=\"https://github.com/fonttools/fonttools/blob/master/Lib/fontTools/pens/basePen.py#L3\"\u003esegment pen protocol\u003c/a\u003e と \u003ca href=\"https://github.com/unified-font-object/ufoLib/blob/master/Lib/ufoLib/pointPen.py\"\u003epoint pen protocol\u003c/a\u003e の2系統があり、前者に対応したペンは \u003ccode\u003eHogePen\u003c/code\u003e、後者は \u003ccode\u003eHogePointPen\u003c/code\u003e のようなクラス名になっているのが通例です。この記事では、前者 segment pen protocol のペンをとり上げます\u003ca href=\"#f-cc54d3b8\" name=\"fn-cc54d3b8\" title=\"若干紛らわしいのですが、segment pen protocol は単に pen protocol と呼ばれることがあります。\"\u003e*1\u003c/a\u003e。\u003c/p\u003e\n\n\u003ch3\u003eフォントを読み込んでグリフを準備する\u003c/h3\u003e\n\n\u003cp\u003e\u003csmall\u003e以下、環境は \u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/Python\"\u003ePython\u003c/a\u003e 3.6.3, \u003ca href=\"https://github.com/fonttools/fonttools\"\u003efontTools\u003c/a\u003e 3.20.1 です。fontTools は \u003ccode\u003e$ pip install fonttools\u003c/code\u003e でインストールできます。\u003c/small\u003e\u003c/p\u003e\n\n\u003cp\u003eペンのことは一旦あと回しにして、まずはフォントファイルを読み込みます。今回は例として、源ノ角ゴシック Regular \u003ca href=\"https://github.com/adobe-fonts/source-han-sans/blob/release/OTF/Japanese/SourceHanSans-Regular.otf\"\u003e\u003ccode\u003eSourceHanSans-Regular.otf\u003c/code\u003e\u003c/a\u003e を使いました。\u003c/p\u003e\n\n\u003cpre class=\"code lang-python\" data-lang=\"python\" data-unlink\u003e\u003cspan class=\"synPreProc\"\u003efrom\u003c/span\u003e fontTools.ttLib \u003cspan class=\"synPreProc\"\u003eimport\u003c/span\u003e TTFont\nfont = TTFont(\u003cspan class=\"synConstant\"\u003e'SourceHanSans-Regular.otf'\u003c/span\u003e)\n\u003c/pre\u003e\n\n\n\u003cp\u003e次に、glyphSet と呼ばれる辞書様オブジェクトと、cmap（\u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/%CA%B8%BB%FA%A5%B3%A1%BC%A5%C9\"\u003e文字コード\u003c/a\u003eとグリフ名の対応）を取得しておきます。後者に関しては、従来 cmap テーブル \u003ccode\u003efont['cmap']\u003c/code\u003e からサブテーブルを選んで辿っていく必要がありましたが、\u003ca href=\"https://github.com/fonttools/fonttools/pull/1092\"\u003e最近追加された\u003c/a\u003eお手軽便利メソッド \u003ccode\u003egetBestCmap()\u003c/code\u003e でいい感じに取得できます。\u003c/p\u003e\n\n\u003cpre class=\"code lang-python\" data-lang=\"python\" data-unlink\u003eglyph_set = font.getGlyphSet()  \u003cspan class=\"synComment\"\u003e# {グリフ名: グリフ} っぽいオブジェクト\u003c/span\u003e\ncmap = font.getBestCmap()       \u003cspan class=\"synComment\"\u003e# {Unicode: グリフ名}\u003c/span\u003e\n\u003c/pre\u003e\n\n\n\u003cp\u003eこれらを使って、文字 \u003ccode\u003echar\u003c/code\u003e に対応したグリフオブジェクトを返す関数を作ります。\u003c/p\u003e\n\n\u003cpre class=\"code lang-python\" data-lang=\"python\" data-unlink\u003e\u003cspan class=\"synStatement\"\u003edef\u003c/span\u003e \u003cspan class=\"synIdentifier\"\u003eget_glyph\u003c/span\u003e(glyph_set, cmap, char):\n    glyph_name = cmap[\u003cspan class=\"synIdentifier\"\u003eord\u003c/span\u003e(char)]\n    \u003cspan class=\"synStatement\"\u003ereturn\u003c/span\u003e glyph_set[glyph_name]\n\u003c/pre\u003e\n\n\n\u003cp\u003e例として、文字 \"L\" に対応するグリフオブジェクトを、 \u003ccode\u003eL\u003c/code\u003e としておきましょう。\u003c/p\u003e\n\n\u003cpre class=\"code lang-python\" data-lang=\"python\" data-unlink\u003eL = get_glyph(glyph_set, cmap, \u003cspan class=\"synConstant\"\u003e'L'\u003c/span\u003e)\n\u003c/pre\u003e\n\n\n\u003cp\u003eこれでグリフの準備はできました。\u003c/p\u003e\n\n\u003ch3\u003e\u003ccode\u003eRecordingPen\u003c/code\u003e でアウトラインの内容を得る\u003c/h3\u003e\n\n\u003cp\u003eさて、アウトラインの内容を取得するためには、fontTools に同梱されている \u003ca href=\"https://github.com/fonttools/fonttools/blob/master/Lib/fontTools/pens/recordingPen.py\"\u003e\u003ccode\u003eRecordingPen\u003c/code\u003e\u003c/a\u003e というペンを使います。まずはペンの\u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/%A5%A4%A5%F3%A5%B9%A5%BF%A5%F3%A5%B9\"\u003eインスタンス\u003c/a\u003eを作成します。\u003c/p\u003e\n\n\u003cpre class=\"code lang-python\" data-lang=\"python\" data-unlink\u003e\u003cspan class=\"synPreProc\"\u003efrom\u003c/span\u003e fontTools.pens.recordingPen \u003cspan class=\"synPreProc\"\u003eimport\u003c/span\u003e RecordingPen\nrecording_pen = RecordingPen()\n\u003c/pre\u003e\n\n\n\u003cp\u003e次に、このペンをグリフ上で動かします。pen protocol に対応したグリフオブジェクトは \u003ccode\u003edraw()\u003c/code\u003e メソッドを持っていますので、これにペンを渡して実行します。先ほどの \"L\"\nのグリフ \u003ccode\u003eL\u003c/code\u003e を使ってみましょう。\u003c/p\u003e\n\n\u003cpre class=\"code lang-python\" data-lang=\"python\" data-unlink\u003eL.draw(recording_pen)\n\u003c/pre\u003e\n\n\n\u003cp\u003eペンで \"draw\" と言われると、どこかに描く・書き込むのかと思ってしまいがちですが、ここではグリフのアウトラインを「なぞる」行為のことだと捉えてください。この \u003ccode\u003eRecordingPen\u003c/code\u003e では \u003ccode\u003evalue\u003c/code\u003e 属性になぞった結果が入っていますので、見てみましょう。\u003c/p\u003e\n\n\u003cpre class=\"code lang-python\" data-lang=\"python\" data-unlink\u003e\u003cspan class=\"synIdentifier\"\u003eprint\u003c/span\u003e(recording_pen.value)\n\u003c/pre\u003e\n\n\n\n\n\u003cpre class=\"code lang-python\" data-lang=\"python\" data-unlink\u003e[(\u003cspan class=\"synConstant\"\u003e'moveTo'\u003c/span\u003e, ((\u003cspan class=\"synConstant\"\u003e100\u003c/span\u003e, \u003cspan class=\"synConstant\"\u003e0\u003c/span\u003e),)),\n (\u003cspan class=\"synConstant\"\u003e'lineTo'\u003c/span\u003e, ((\u003cspan class=\"synConstant\"\u003e513\u003c/span\u003e, \u003cspan class=\"synConstant\"\u003e0\u003c/span\u003e),)),\n (\u003cspan class=\"synConstant\"\u003e'lineTo'\u003c/span\u003e, ((\u003cspan class=\"synConstant\"\u003e513\u003c/span\u003e, \u003cspan class=\"synConstant\"\u003e79\u003c/span\u003e),)),\n (\u003cspan class=\"synConstant\"\u003e'lineTo'\u003c/span\u003e, ((\u003cspan class=\"synConstant\"\u003e193\u003c/span\u003e, \u003cspan class=\"synConstant\"\u003e79\u003c/span\u003e),)),\n (\u003cspan class=\"synConstant\"\u003e'lineTo'\u003c/span\u003e, ((\u003cspan class=\"synConstant\"\u003e193\u003c/span\u003e, \u003cspan class=\"synConstant\"\u003e733\u003c/span\u003e),)),\n (\u003cspan class=\"synConstant\"\u003e'lineTo'\u003c/span\u003e, ((\u003cspan class=\"synConstant\"\u003e100\u003c/span\u003e, \u003cspan class=\"synConstant\"\u003e733\u003c/span\u003e),)),\n (\u003cspan class=\"synConstant\"\u003e'closePath'\u003c/span\u003e, ())]\n\u003c/pre\u003e\n\n\n\u003cp\u003e目的どおりアウトラインの内容が出てきました。\"L\" の左下の点からスタートし、反時計回りにパスが構成されているのが分かります。\u003c/p\u003e\n\n\u003cp\u003eもうひとつ、\"い\" のグリフで試してみるとこうなります。\u003c/p\u003e\n\n\u003cpre class=\"code lang-python\" data-lang=\"python\" data-unlink\u003eい = get_glyph(glyph_set, cmap, \u003cspan class=\"synConstant\"\u003e'い'\u003c/span\u003e)\nrecording_pen = RecordingPen()\nい.draw(recording_pen)\n\u003cspan class=\"synIdentifier\"\u003eprint\u003c/span\u003e(recording_pen.value)\n\u003c/pre\u003e\n\n\n\n\n\u003cpre class=\"code lang-python\" data-lang=\"python\" data-unlink\u003e[(\u003cspan class=\"synConstant\"\u003e'moveTo'\u003c/span\u003e, ((\u003cspan class=\"synConstant\"\u003e226\u003c/span\u003e, \u003cspan class=\"synConstant\"\u003e696\u003c/span\u003e),)),\n (\u003cspan class=\"synConstant\"\u003e'lineTo'\u003c/span\u003e, ((\u003cspan class=\"synConstant\"\u003e130\u003c/span\u003e, \u003cspan class=\"synConstant\"\u003e698\u003c/span\u003e),)),\n (\u003cspan class=\"synConstant\"\u003e'curveTo'\u003c/span\u003e, ((\u003cspan class=\"synConstant\"\u003e135\u003c/span\u003e, \u003cspan class=\"synConstant\"\u003e674\u003c/span\u003e), (\u003cspan class=\"synConstant\"\u003e136\u003c/span\u003e, \u003cspan class=\"synConstant\"\u003e633\u003c/span\u003e), (\u003cspan class=\"synConstant\"\u003e136\u003c/span\u003e, \u003cspan class=\"synConstant\"\u003e610\u003c/span\u003e))),\n (\u003cspan class=\"synConstant\"\u003e'curveTo'\u003c/span\u003e, ((\u003cspan class=\"synConstant\"\u003e136\u003c/span\u003e, \u003cspan class=\"synConstant\"\u003e552\u003c/span\u003e), (\u003cspan class=\"synConstant\"\u003e137\u003c/span\u003e, \u003cspan class=\"synConstant\"\u003e432\u003c/span\u003e), (\u003cspan class=\"synConstant\"\u003e147\u003c/span\u003e, \u003cspan class=\"synConstant\"\u003e346\u003c/span\u003e))),\n (\u003cspan class=\"synConstant\"\u003e'curveTo'\u003c/span\u003e, ((\u003cspan class=\"synConstant\"\u003e174\u003c/span\u003e, \u003cspan class=\"synConstant\"\u003e89\u003c/span\u003e), (\u003cspan class=\"synConstant\"\u003e264\u003c/span\u003e, -\u003cspan class=\"synConstant\"\u003e4\u003c/span\u003e), (\u003cspan class=\"synConstant\"\u003e357\u003c/span\u003e, -\u003cspan class=\"synConstant\"\u003e4\u003c/span\u003e))),\n (\u003cspan class=\"synConstant\"\u003e'curveTo'\u003c/span\u003e, ((\u003cspan class=\"synConstant\"\u003e425\u003c/span\u003e, -\u003cspan class=\"synConstant\"\u003e4\u003c/span\u003e), (\u003cspan class=\"synConstant\"\u003e486\u003c/span\u003e, \u003cspan class=\"synConstant\"\u003e53\u003c/span\u003e), (\u003cspan class=\"synConstant\"\u003e545\u003c/span\u003e, \u003cspan class=\"synConstant\"\u003e221\u003c/span\u003e))),\n (\u003cspan class=\"synConstant\"\u003e'lineTo'\u003c/span\u003e, ((\u003cspan class=\"synConstant\"\u003e482\u003c/span\u003e, \u003cspan class=\"synConstant\"\u003e293\u003c/span\u003e),)),\n (\u003cspan class=\"synConstant\"\u003e'curveTo'\u003c/span\u003e, ((\u003cspan class=\"synConstant\"\u003e456\u003c/span\u003e, \u003cspan class=\"synConstant\"\u003e193\u003c/span\u003e), (\u003cspan class=\"synConstant\"\u003e410\u003c/span\u003e, \u003cspan class=\"synConstant\"\u003e91\u003c/span\u003e), (\u003cspan class=\"synConstant\"\u003e359\u003c/span\u003e, \u003cspan class=\"synConstant\"\u003e91\u003c/span\u003e))),\n (\u003cspan class=\"synConstant\"\u003e'curveTo'\u003c/span\u003e, ((\u003cspan class=\"synConstant\"\u003e289\u003c/span\u003e, \u003cspan class=\"synConstant\"\u003e91\u003c/span\u003e), (\u003cspan class=\"synConstant\"\u003e241\u003c/span\u003e, \u003cspan class=\"synConstant\"\u003e200\u003c/span\u003e), (\u003cspan class=\"synConstant\"\u003e225\u003c/span\u003e, \u003cspan class=\"synConstant\"\u003e366\u003c/span\u003e))),\n (\u003cspan class=\"synConstant\"\u003e'curveTo'\u003c/span\u003e, ((\u003cspan class=\"synConstant\"\u003e218\u003c/span\u003e, \u003cspan class=\"synConstant\"\u003e447\u003c/span\u003e), (\u003cspan class=\"synConstant\"\u003e217\u003c/span\u003e, \u003cspan class=\"synConstant\"\u003e538\u003c/span\u003e), (\u003cspan class=\"synConstant\"\u003e218\u003c/span\u003e, \u003cspan class=\"synConstant\"\u003e600\u003c/span\u003e))),\n (\u003cspan class=\"synConstant\"\u003e'curveTo'\u003c/span\u003e, ((\u003cspan class=\"synConstant\"\u003e219\u003c/span\u003e, \u003cspan class=\"synConstant\"\u003e626\u003c/span\u003e), (\u003cspan class=\"synConstant\"\u003e222\u003c/span\u003e, \u003cspan class=\"synConstant\"\u003e672\u003c/span\u003e), (\u003cspan class=\"synConstant\"\u003e226\u003c/span\u003e, \u003cspan class=\"synConstant\"\u003e696\u003c/span\u003e))),\n (\u003cspan class=\"synConstant\"\u003e'closePath'\u003c/span\u003e, ()),\n (\u003cspan class=\"synConstant\"\u003e'moveTo'\u003c/span\u003e, ((\u003cspan class=\"synConstant\"\u003e742\u003c/span\u003e, \u003cspan class=\"synConstant\"\u003e669\u003c/span\u003e),)),\n (\u003cspan class=\"synConstant\"\u003e'lineTo'\u003c/span\u003e, ((\u003cspan class=\"synConstant\"\u003e664\u003c/span\u003e, \u003cspan class=\"synConstant\"\u003e642\u003c/span\u003e),)),\n (\u003cspan class=\"synConstant\"\u003e'curveTo'\u003c/span\u003e, ((\u003cspan class=\"synConstant\"\u003e758\u003c/span\u003e, \u003cspan class=\"synConstant\"\u003e526\u003c/span\u003e), (\u003cspan class=\"synConstant\"\u003e818\u003c/span\u003e, \u003cspan class=\"synConstant\"\u003e330\u003c/span\u003e), (\u003cspan class=\"synConstant\"\u003e835\u003c/span\u003e, \u003cspan class=\"synConstant\"\u003e152\u003c/span\u003e))),\n (\u003cspan class=\"synConstant\"\u003e'lineTo'\u003c/span\u003e, ((\u003cspan class=\"synConstant\"\u003e916\u003c/span\u003e, \u003cspan class=\"synConstant\"\u003e184\u003c/span\u003e),)),\n (\u003cspan class=\"synConstant\"\u003e'curveTo'\u003c/span\u003e, ((\u003cspan class=\"synConstant\"\u003e902\u003c/span\u003e, \u003cspan class=\"synConstant\"\u003e351\u003c/span\u003e), (\u003cspan class=\"synConstant\"\u003e831\u003c/span\u003e, \u003cspan class=\"synConstant\"\u003e554\u003c/span\u003e), (\u003cspan class=\"synConstant\"\u003e742\u003c/span\u003e, \u003cspan class=\"synConstant\"\u003e669\u003c/span\u003e))),\n (\u003cspan class=\"synConstant\"\u003e'closePath'\u003c/span\u003e, ())]\n\u003c/pre\u003e\n\n\n\u003cp\u003e曲線を中心とした、2つのパスで構成されています。\u003c/p\u003e\n\n\u003ch3\u003e\u003ccode\u003eSVGPathPen\u003c/code\u003e を利用して\u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/SVG\"\u003eSVG\u003c/a\u003eを作成する\u003c/h3\u003e\n\n\u003cp\u003e今度は応用として、\u003ca href=\"https://github.com/fonttools/fonttools/blob/master/Lib/fontTools/pens/svgPathPen.py\"\u003e\u003ccode\u003eSVGPathPen\u003c/code\u003e\u003c/a\u003e というペンを使ってみましょう。このペンは、\u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/SVG\"\u003eSVG\u003c/a\u003eの\u003ca href=\"http://defghi1977.html.xdomain.jp/tech/svgMemo/svgMemo_03.htm\"\u003eパスデータ文字列\u003c/a\u003eを組み立ててくれます。\u003ccode\u003eSVGPathPen\u003c/code\u003e のコンストラクタは引数に glyphSet をとりますので、最初の方で用意した \u003ccode\u003eglyph_set\u003c/code\u003e を渡します。\u003c/p\u003e\n\n\u003cpre class=\"code lang-python\" data-lang=\"python\" data-unlink\u003e\u003cspan class=\"synPreProc\"\u003efrom\u003c/span\u003e fontTools.pens.svgPathPen \u003cspan class=\"synPreProc\"\u003eimport\u003c/span\u003e SVGPathPen\nsvg_path_pen = SVGPathPen(glyph_set)\n\u003c/pre\u003e\n\n\n\u003cp\u003eグリフ \u003ccode\u003eL\u003c/code\u003e をなぞった後、\u003ccode\u003egetCommands()\u003c/code\u003e メソッドでパスデータ文字列を取得します。\u003c/p\u003e\n\n\u003cpre class=\"code lang-python\" data-lang=\"python\" data-unlink\u003eL.draw(svg_path_pen)\n\u003cspan class=\"synIdentifier\"\u003eprint\u003c/span\u003e(svg_path_pen.getCommands())\n\u003c/pre\u003e\n\n\n\n\n\u003cpre class=\"code\" data-lang=\"\" data-unlink\u003eM100 0H513V79H193V733H100Z\u003c/pre\u003e\n\n\n\u003cp\u003eパスデータ文字列が表示されました。左下の点 \u003ccode\u003e100 0\u003c/code\u003e からスタートし、水平線 \u003ccode\u003eH\u003c/code\u003e と垂直線 \u003ccode\u003eV\u003c/code\u003e でパスが構成されています。\u003c/p\u003e\n\n\u003cp\u003e以下のようにガワを手書きして、独立した\u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/SVG\"\u003eSVG\u003c/a\u003eファイルを作ります。\u003c/p\u003e\n\n\u003cpre class=\"code lang-svg\" data-lang=\"svg\" data-unlink\u003e\u003cspan class=\"synIdentifier\"\u003e\u0026lt;svg \u003c/span\u003e\u003cspan class=\"synType\"\u003exmlns\u003c/span\u003e=\u003cspan class=\"synConstant\"\u003e\u0026quot;http://www.w3.org/2000/svg\u0026quot;\u003c/span\u003e\u003cspan class=\"synIdentifier\"\u003e \u003c/span\u003e\u003cspan class=\"synType\"\u003eviewBox\u003c/span\u003e=\u003cspan class=\"synConstant\"\u003e\u0026quot;0 0 1000 1000\u0026quot;\u003c/span\u003e\u003cspan class=\"synIdentifier\"\u003e\u0026gt;\u003c/span\u003e\n    \u003cspan class=\"synIdentifier\"\u003e\u0026lt;path \u003c/span\u003e\u003cspan class=\"synType\"\u003ed\u003c/span\u003e=\u003cspan class=\"synConstant\"\u003e\u0026quot;M100 0H513V79H193V733H100Z\u0026quot;\u003c/span\u003e\u003cspan class=\"synIdentifier\"\u003e/\u0026gt;\u003c/span\u003e\n\u003cspan class=\"synIdentifier\"\u003e\u0026lt;/svg\u0026gt;\u003c/span\u003e\n\u003c/pre\u003e\n\n\n\u003cp\u003eこの\u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/SVG\"\u003eSVG\u003c/a\u003eファイルをブラウザで表示してみると、こんな感じです。\u003c/p\u003e\n\n\u003cp\u003e\u003ca href=\"https://cdn.rawgit.com/mashabow/font-pen-samples/d8994e93/L1.svg\"\u003e\u003cimg src=\"https://cdn.rawgit.com/mashabow/font-pen-samples/d8994e93/L1.svg\"\nstyle=\"height: 200px\"\u003e\u003c/a\u003e\u003c/p\u003e\n\n\u003cp\u003e一応「L」のグリフが表示できました。が、上下逆さです。OpenType の座標系では y 軸が上方向に延びていますが、\u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/SVG\"\u003eSVG\u003c/a\u003e では下方向に延びているため、そのままだと上下がひっくり返ってしまいます。\u003ccode\u003etransform\u003c/code\u003e 属性で上下を逆にし、\u003ccode\u003eviewBox\u003c/code\u003e 属性も調整しましょう。\u003c/p\u003e\n\n\u003cpre class=\"code lang-svg\" data-lang=\"svg\" data-unlink\u003e\u003cspan class=\"synIdentifier\"\u003e\u0026lt;svg \u003c/span\u003e\u003cspan class=\"synType\"\u003exmlns\u003c/span\u003e=\u003cspan class=\"synConstant\"\u003e\u0026quot;http://www.w3.org/2000/svg\u0026quot;\u003c/span\u003e\u003cspan class=\"synIdentifier\"\u003e \u003c/span\u003e\u003cspan class=\"synType\"\u003eviewBox\u003c/span\u003e=\u003cspan class=\"synConstant\"\u003e\u0026quot;0 -1000 1000 1000\u0026quot;\u003c/span\u003e\u003cspan class=\"synIdentifier\"\u003e\u0026gt;\u003c/span\u003e\n    \u003cspan class=\"synIdentifier\"\u003e\u0026lt;path \u003c/span\u003e\u003cspan class=\"synType\"\u003ed\u003c/span\u003e=\u003cspan class=\"synConstant\"\u003e\u0026quot;M100 0H513V79H193V733H100Z\u0026quot;\u003c/span\u003e\u003cspan class=\"synIdentifier\"\u003e \u003c/span\u003e\u003cspan class=\"synType\"\u003etransform\u003c/span\u003e=\u003cspan class=\"synConstant\"\u003e\u0026quot;scale(1, -1)\u0026quot;\u003c/span\u003e\u003cspan class=\"synIdentifier\"\u003e/\u0026gt;\u003c/span\u003e\n\u003cspan class=\"synIdentifier\"\u003e\u0026lt;/svg\u0026gt;\u003c/span\u003e\n\u003c/pre\u003e\n\n\n\u003cp\u003e\u003ca href=\"https://cdn.rawgit.com/mashabow/font-pen-samples/d8994e93/L2.svg\"\u003e\u003cimg src=\"https://cdn.rawgit.com/mashabow/font-pen-samples/d8994e93/L2.svg\"\nstyle=\"height: 200px\"\u003e\u003c/a\u003e\u003c/p\u003e\n\n\u003cp\u003eこれで正立しました。\u003c/p\u003e\n\n\u003cp\u003e最後に、もうちょっといい感じの\u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/SVG\"\u003eSVG\u003c/a\u003eファイルを生成する関数を定義してみます。\u003c/p\u003e\n\n\u003cpre class=\"code lang-python\" data-lang=\"python\" data-unlink\u003e\u003cspan class=\"synPreProc\"\u003efrom\u003c/span\u003e textwrap \u003cspan class=\"synPreProc\"\u003eimport\u003c/span\u003e dedent\n\n\u003cspan class=\"synStatement\"\u003edef\u003c/span\u003e \u003cspan class=\"synIdentifier\"\u003esave_as_svg\u003c/span\u003e(font, char, output_path):\n    \u003cspan class=\"synConstant\"\u003e'''TTFont オブジェクトを受け取り、指定した文字のグリフを SVG として保存する'''\u003c/span\u003e\n    \n    glyph_set = font.getGlyphSet()\n    cmap = font.getBestCmap()\n    \n    \u003cspan class=\"synComment\"\u003e# グリフのアウトラインを SVGPathPen でなぞる\u003c/span\u003e\n    glyph = get_glyph(glyph_set, cmap, char)\n    svg_path_pen = SVGPathPen(glyph_set)\n    glyph.draw(svg_path_pen)\n\n    \u003cspan class=\"synComment\"\u003e# メトリクスを取得\u003c/span\u003e\n    ascender = font[\u003cspan class=\"synConstant\"\u003e'OS/2'\u003c/span\u003e].sTypoAscender\n    descender = font[\u003cspan class=\"synConstant\"\u003e'OS/2'\u003c/span\u003e].sTypoDescender\n    width = glyph.width\n    height = ascender - descender\n    \n    content = dedent(f\u003cspan class=\"synConstant\"\u003e'''\u003c/span\u003e\u003cspan class=\"synSpecial\"\u003e\\\u003c/span\u003e\n\u003cspan class=\"synConstant\"\u003e        \u0026lt;svg xmlns=\u0026quot;http://www.w3.org/2000/svg\u0026quot; viewBox=\u0026quot;0 {-ascender} {width} {height}\u0026quot;\u0026gt;\u003c/span\u003e\n\u003cspan class=\"synConstant\"\u003e            \u0026lt;g transform=\u0026quot;scale(1, -1)\u0026quot;\u0026gt;\u003c/span\u003e\n\u003cspan class=\"synConstant\"\u003e                \u0026lt;!-- ボディの枠 --\u0026gt;\u003c/span\u003e\n\u003cspan class=\"synConstant\"\u003e                \u0026lt;rect x=\u0026quot;0\u0026quot; y=\u0026quot;{descender}\u0026quot; width=\u0026quot;{width}\u0026quot; height=\u0026quot;{height}\u0026quot;\u003c/span\u003e\n\u003cspan class=\"synConstant\"\u003e                    stroke=\u0026quot;cyan\u0026quot; fill=\u0026quot;none\u0026quot;/\u0026gt;\u003c/span\u003e\n\u003cspan class=\"synConstant\"\u003e                \u0026lt;!-- グリフ座標系の原点 --\u0026gt;\u003c/span\u003e\n\u003cspan class=\"synConstant\"\u003e                \u0026lt;circle cx=\u0026quot;0\u0026quot; cy=\u0026quot;0\u0026quot; r=\u0026quot;5\u0026quot; fill=\u0026quot;blue\u0026quot;/\u0026gt;\u003c/span\u003e\n\u003cspan class=\"synConstant\"\u003e                \u0026lt;!-- グリフのアウトライン --\u0026gt;\u003c/span\u003e\n\u003cspan class=\"synConstant\"\u003e                \u0026lt;path d=\u0026quot;{svg_path_pen.getCommands()}\u0026quot;/\u0026gt;\u003c/span\u003e\n\u003cspan class=\"synConstant\"\u003e            \u0026lt;/g\u0026gt;\u003c/span\u003e\n\u003cspan class=\"synConstant\"\u003e        \u0026lt;/svg\u0026gt;\u003c/span\u003e\n\u003cspan class=\"synConstant\"\u003e    '''\u003c/span\u003e)\n    \n    \u003cspan class=\"synStatement\"\u003ewith\u003c/span\u003e \u003cspan class=\"synIdentifier\"\u003eopen\u003c/span\u003e(output_path, \u003cspan class=\"synConstant\"\u003e'w'\u003c/span\u003e) \u003cspan class=\"synStatement\"\u003eas\u003c/span\u003e f:\n        f.write(content)\n\u003c/pre\u003e\n\n\n\u003cp\u003e\"L\" と \"い\" で実行してみます。\u003c/p\u003e\n\n\u003cpre class=\"code lang-python\" data-lang=\"python\" data-unlink\u003esave_as_svg(font, \u003cspan class=\"synConstant\"\u003e'L'\u003c/span\u003e, \u003cspan class=\"synConstant\"\u003e'L.svg'\u003c/span\u003e)\nsave_as_svg(font, \u003cspan class=\"synConstant\"\u003e'い'\u003c/span\u003e, \u003cspan class=\"synConstant\"\u003e'い.svg'\u003c/span\u003e)\n\u003c/pre\u003e\n\n\n\u003cp\u003eこんな感じの \u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/SVG\"\u003eSVG\u003c/a\u003e ファイルができました。めでたしめでたし。\u003c/p\u003e\n\n\u003cp\u003e\u003ca href=\"https://cdn.rawgit.com/mashabow/font-pen-samples/d8994e93/L.svg\"\u003e\u003cimg src=\"https://cdn.rawgit.com/mashabow/font-pen-samples/d8994e93/L.svg\"\nstyle=\"height: 200px\"\u003e\u003c/a\u003e\u003c/p\u003e\n\n\u003cp\u003e\u003ca href=\"https://cdn.rawgit.com/mashabow/font-pen-samples/d8994e93/%E3%81%84.svg\"\u003e\u003cimg src=\"https://cdn.rawgit.com/mashabow/font-pen-samples/d8994e93/%E3%81%84.svg\"\nstyle=\"height: 200px\"\u003e\u003c/a\u003e\u003c/p\u003e\n\n\u003ch3\u003eおわりに\u003c/h3\u003e\n\n\u003cp\u003eこの記事では pen protocol の概要を説明し、ペンを使ってアウトラインを取得したり、\u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/SVG\"\u003eSVG\u003c/a\u003e として表示する方法について見てきました。一方、今回触れなかった話題としては、\u003c/p\u003e\n\n\u003cul\u003e\n\u003cli\u003epen protocol の詳細とペンの定義方法\u003c/li\u003e\n\u003cli\u003eグリフへの書き込み\u003c/li\u003e\n\u003cli\u003eペンを利用したアウトラインの加工\u003c/li\u003e\n\u003cli\u003eさまざまなペンの紹介\u003c/li\u003e\n\u003c/ul\u003e\n\n\n\u003cp\u003eなどがあります。これらに関しては、またいずれ気が向いたときに記事を書くかもしれません。\u003c/p\u003e\n\n\u003cp\u003eなお、今回のファイルは以下の\u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/%A5%EA%A5%DD%A5%B8%A5%C8%A5%EA\"\u003eリポジトリ\u003c/a\u003eにまとめておきました。\u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/%A4%C9%A4%A6%A4%BE%A4%B4%CD%F8%CD%D1%A4%AF%A4%C0%A4%B5%A4%A4%A1%A3\"\u003eどうぞご利用ください。\u003c/a\u003e\u003c/p\u003e\n\n\u003cp\u003e\u003ciframe src=\"https://hatenablog-parts.com/embed?url=https%3A%2F%2Fgithub.com%2Fmashabow%2Ffont-pen-samples\" title=\"mashabow/font-pen-samples\" class=\"embed-card embed-webcard\" scrolling=\"no\" frameborder=\"0\" style=\"display: block; width: 100%; height: 155px; max-width: 500px; margin: 10px 0px;\"\u003e\u003c/iframe\u003e\u003ccite class=\"hatena-citation\"\u003e\u003ca href=\"https://github.com/mashabow/font-pen-samples\"\u003egithub.com\u003c/a\u003e\u003c/cite\u003e\u003c/p\u003e\n\u003cdiv class=\"footnote\"\u003e\n\u003cp class=\"footnote\"\u003e\u003ca href=\"#fn-cc54d3b8\" name=\"f-cc54d3b8\" class=\"footnote-number\"\u003e*1\u003c/a\u003e\u003cspan class=\"footnote-delimiter\"\u003e:\u003c/span\u003e\u003cspan class=\"footnote-text\"\u003e若干紛らわしいのですが、segment pen protocol は単に pen protocol と呼ばれることがあります。\u003c/span\u003e\u003c/p\u003e\n\u003c/div\u003e","contentSnippet":"先日 Twitter で、「グリフのアウトラインの座標列を取りたいんだけど」「それ pen protocol でできるよ！」というやりとりをしました。この記事では、pen protocol に対応したペンでアウトラインを取得する方法について、具体的に解説してみます。フォントとかについてベジエのアウトラインの法線方向に制御点を移動することでアウトラインを太らせたり細らせたりする処理を思ひついたんだけど、テスト環境構築するのが面倒。フォントファイルから制御点の座標列を取り出し、それを描画する処理ができないとだめ感。なにかいいのあるかな…。— にせねこ (@nixeneko) 2017年11月8日目的はもう果たせたようですが、グリフのアウトラインを Python で読み書き加工するのであれば、(segment) pen protocol https://t.co/kR5gvCz5kY や point pen protocol https://t.co/JvIUdqkEfu が標準的です。慣れるまでちょっと癖はあるものの、いろいろと応用が利きます。— mashabow (@mashabow) 2017年11月8日pen protocol とペンさて、そもそも pen protocol とは何でしょう？　今回はプロトコルの詳細には触れず、概観だけ説明します。フォント界隈では Python が共通言語になっています。しかし、グリフを表すためのオブジェクトは、フォントエディタ（Glyphs, RoboFont, FontLab, ...）やライブラリ（fontTools, ufoLib, defcon, fontParts, ...）ごとにそれぞれ独自に定義されています。ざっくり言ってしまうと、「どんなグリフオブジェクトであれ、共通のインターフェイスでアウトラインを読み書きできると楽だよね」「SVG や PDF やいろんな描画 API にも対応したいよね」というのが pen protocol の発想です。pen protocol によってグリフからアウトラインを得たり、アウトラインを描いたりするためのオブジェクトをペン（pen）と呼びます。pen protocol が広まった結果、現在までにいろいろなペンが実装されてきました。以下にいくつか例を挙げますが、これ以外にも存在しています。fontTools.pens.*fontPens.*ufoLib.pointPen.*なお、pen protocol には segment pen protocol と point pen protocol の2系統があり、前者に対応したペンは HogePen、後者は HogePointPen のようなクラス名になっているのが通例です。この記事では、前者 segment pen protocol のペンをとり上げます*1。フォントを読み込んでグリフを準備する以下、環境は Python 3.6.3, fontTools 3.20.1 です。fontTools は $ pip install fonttools でインストールできます。ペンのことは一旦あと回しにして、まずはフォントファイルを読み込みます。今回は例として、源ノ角ゴシック Regular SourceHanSans-Regular.otf を使いました。from fontTools.ttLib import TTFontfont = TTFont('SourceHanSans-Regular.otf')次に、glyphSet と呼ばれる辞書様オブジェクトと、cmap（文字コードとグリフ名の対応）を取得しておきます。後者に関しては、従来 cmap テーブル font['cmap'] からサブテーブルを選んで辿っていく必要がありましたが、最近追加されたお手軽便利メソッド getBestCmap() でいい感じに取得できます。glyph_set = font.getGlyphSet()  # {グリフ名: グリフ} っぽいオブジェクトcmap = font.getBestCmap()       # {Unicode: グリフ名}これらを使って、文字 char に対応したグリフオブジェクトを返す関数を作ります。def get_glyph(glyph_set, cmap, char):    glyph_name = cmap[ord(char)]    return glyph_set[glyph_name]例として、文字 \"L\" に対応するグリフオブジェクトを、 L としておきましょう。L = get_glyph(glyph_set, cmap, 'L')これでグリフの準備はできました。RecordingPen でアウトラインの内容を得るさて、アウトラインの内容を取得するためには、fontTools に同梱されている RecordingPen というペンを使います。まずはペンのインスタンスを作成します。from fontTools.pens.recordingPen import RecordingPenrecording_pen = RecordingPen()次に、このペンをグリフ上で動かします。pen protocol に対応したグリフオブジェクトは draw() メソッドを持っていますので、これにペンを渡して実行します。先ほどの \"L\"のグリフ L を使ってみましょう。L.draw(recording_pen)ペンで \"draw\" と言われると、どこかに描く・書き込むのかと思ってしまいがちですが、ここではグリフのアウトラインを「なぞる」行為のことだと捉えてください。この RecordingPen では value 属性になぞった結果が入っていますので、見てみましょう。print(recording_pen.value)[('moveTo', ((100, 0),)), ('lineTo', ((513, 0),)), ('lineTo', ((513, 79),)), ('lineTo', ((193, 79),)), ('lineTo', ((193, 733),)), ('lineTo', ((100, 733),)), ('closePath', ())]目的どおりアウトラインの内容が出てきました。\"L\" の左下の点からスタートし、反時計回りにパスが構成されているのが分かります。もうひとつ、\"い\" のグリフで試してみるとこうなります。い = get_glyph(glyph_set, cmap, 'い')recording_pen = RecordingPen()い.draw(recording_pen)print(recording_pen.value)[('moveTo', ((226, 696),)), ('lineTo', ((130, 698),)), ('curveTo', ((135, 674), (136, 633), (136, 610))), ('curveTo', ((136, 552), (137, 432), (147, 346))), ('curveTo', ((174, 89), (264, -4), (357, -4))), ('curveTo', ((425, -4), (486, 53), (545, 221))), ('lineTo', ((482, 293),)), ('curveTo', ((456, 193), (410, 91), (359, 91))), ('curveTo', ((289, 91), (241, 200), (225, 366))), ('curveTo', ((218, 447), (217, 538), (218, 600))), ('curveTo', ((219, 626), (222, 672), (226, 696))), ('closePath', ()), ('moveTo', ((742, 669),)), ('lineTo', ((664, 642),)), ('curveTo', ((758, 526), (818, 330), (835, 152))), ('lineTo', ((916, 184),)), ('curveTo', ((902, 351), (831, 554), (742, 669))), ('closePath', ())]曲線を中心とした、2つのパスで構成されています。SVGPathPen を利用してSVGを作成する今度は応用として、SVGPathPen というペンを使ってみましょう。このペンは、SVGのパスデータ文字列を組み立ててくれます。SVGPathPen のコンストラクタは引数に glyphSet をとりますので、最初の方で用意した glyph_set を渡します。from fontTools.pens.svgPathPen import SVGPathPensvg_path_pen = SVGPathPen(glyph_set)グリフ L をなぞった後、getCommands() メソッドでパスデータ文字列を取得します。L.draw(svg_path_pen)print(svg_path_pen.getCommands())M100 0H513V79H193V733H100Zパスデータ文字列が表示されました。左下の点 100 0 からスタートし、水平線 H と垂直線 V でパスが構成されています。以下のようにガワを手書きして、独立したSVGファイルを作ります。\u003csvg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 1000 1000\"\u003e    \u003cpath d=\"M100 0H513V79H193V733H100Z\"/\u003e\u003c/svg\u003eこのSVGファイルをブラウザで表示してみると、こんな感じです。一応「L」のグリフが表示できました。が、上下逆さです。OpenType の座標系では y 軸が上方向に延びていますが、SVG では下方向に延びているため、そのままだと上下がひっくり返ってしまいます。transform 属性で上下を逆にし、viewBox 属性も調整しましょう。\u003csvg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 -1000 1000 1000\"\u003e    \u003cpath d=\"M100 0H513V79H193V733H100Z\" transform=\"scale(1, -1)\"/\u003e\u003c/svg\u003eこれで正立しました。最後に、もうちょっといい感じのSVGファイルを生成する関数を定義してみます。from textwrap import dedentdef save_as_svg(font, char, output_path):    '''TTFont オブジェクトを受け取り、指定した文字のグリフを SVG として保存する'''        glyph_set = font.getGlyphSet()    cmap = font.getBestCmap()        # グリフのアウトラインを SVGPathPen でなぞる    glyph = get_glyph(glyph_set, cmap, char)    svg_path_pen = SVGPathPen(glyph_set)    glyph.draw(svg_path_pen)    # メトリクスを取得    ascender = font['OS/2'].sTypoAscender    descender = font['OS/2'].sTypoDescender    width = glyph.width    height = ascender - descender        content = dedent(f'''\\        \u003csvg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 {-ascender} {width} {height}\"\u003e            \u003cg transform=\"scale(1, -1)\"\u003e                \u003c!-- ボディの枠 --\u003e                \u003crect x=\"0\" y=\"{descender}\" width=\"{width}\" height=\"{height}\"                    stroke=\"cyan\" fill=\"none\"/\u003e                \u003c!-- グリフ座標系の原点 --\u003e                \u003ccircle cx=\"0\" cy=\"0\" r=\"5\" fill=\"blue\"/\u003e                \u003c!-- グリフのアウトライン --\u003e                \u003cpath d=\"{svg_path_pen.getCommands()}\"/\u003e            \u003c/g\u003e        \u003c/svg\u003e    ''')        with open(output_path, 'w') as f:        f.write(content)\"L\" と \"い\" で実行してみます。save_as_svg(font, 'L', 'L.svg')save_as_svg(font, 'い', 'い.svg')こんな感じの SVG ファイルができました。めでたしめでたし。おわりにこの記事では pen protocol の概要を説明し、ペンを使ってアウトラインを取得したり、SVG として表示する方法について見てきました。一方、今回触れなかった話題としては、pen protocol の詳細とペンの定義方法グリフへの書き込みペンを利用したアウトラインの加工さまざまなペンの紹介などがあります。これらに関しては、またいずれ気が向いたときに記事を書くかもしれません。なお、今回のファイルは以下のリポジトリにまとめておきました。どうぞご利用ください。github.com*1:若干紛らわしいのですが、segment pen protocol は単に pen protocol と呼ばれることがあります。","link":"https://shiromoji.hatenablog.jp/entry/2017/11/26/221902","isoDate":"2017-11-26T13:19:02.000Z","dateMiliSeconds":1511702342000,"imageUrl":"https://cdn.rawgit.com/mashabow/font-pen-samples/d8994e93/%E3%81%84.svg","authorName":"mashabow"},{"title":"TTXによるフォントのチラ見をちょっといい感じにする設定","content":"\u003cp\u003e\u003ciframe src=\"//hatenablog-parts.com/embed?url=https%3A%2F%2Fgithub.com%2Ffonttools%2Ffonttools\" title=\"fonttools/fonttools\" class=\"embed-card embed-webcard\" scrolling=\"no\" frameborder=\"0\" style=\"display: block; width: 100%; height: 155px; max-width: 500px; margin: 10px 0px;\"\u003e\u003c/iframe\u003e\u003ccite class=\"hatena-citation\"\u003e\u003ca href=\"https://github.com/fonttools/fonttools\"\u003egithub.com\u003c/a\u003e\u003c/cite\u003e\u003c/p\u003e\n\n\u003cp\u003e仕事場／プライベート問わずに大活躍の fontTools ですが、その中でも頻出なのが「フォントファイルを TTX で\u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/%A5%C0%A5%F3\"\u003eダン\u003c/a\u003eプして中身をチラ見したい」という場面です。\u003c/p\u003e\n\n\u003cpre class=\"code lang-sh\" data-lang=\"sh\" data-unlink\u003e$ ttx \u003cspan class=\"synSpecial\"\u003e-o\u003c/span\u003e out.ttx \u003cspan class=\"synStatement\"\u003e[\u003c/span\u003eオプション\u003cspan class=\"synStatement\"\u003e]\u003c/span\u003e font.otf\n$ \u003cspan class=\"synStatement\"\u003eless\u003c/span\u003e out.ttx\n\u003c/pre\u003e\n\n\n\u003cp\u003eつい最近まで、上のようにしてごく普通に中身を見ていたのですが、何度もやっているといい加減めんどくさくなってきます。そこで、\u003ccode\u003e.zshrc\u003c/code\u003e（適宜 \u003ccode\u003e.bashrc\u003c/code\u003e などに読み替えてください）に簡単なシェル関数を定義してみました。\u003c/p\u003e\n\n\u003cpre class=\"code lang-sh\" data-lang=\"sh\" data-unlink\u003e\u003cspan class=\"synIdentifier\"\u003etl() {\u003c/span\u003e\n    ttx \u003cspan class=\"synSpecial\"\u003e-q\u003c/span\u003e \u003cspan class=\"synSpecial\"\u003e-o\u003c/span\u003e - \u003cspan class=\"synPreProc\"\u003e$*\u003c/span\u003e \u003cspan class=\"synStatement\"\u003e|\u003c/span\u003e \u003cspan class=\"synStatement\"\u003esource\u003c/span\u003e-highlight \u003cspan class=\"synSpecial\"\u003e-s\u003c/span\u003e xml \u003cspan class=\"synSpecial\"\u003e-f\u003c/span\u003e esc \u003cspan class=\"synStatement\"\u003e|\u003c/span\u003e \u003cspan class=\"synStatement\"\u003eless\u003c/span\u003e\n\u003cspan class=\"synIdentifier\"\u003e}\u003c/span\u003e\n\u003c/pre\u003e\n\n\n\u003cp\u003e関数名はなんでもいいのですが、\u003ccode\u003ettx\u003c/code\u003e で \u003ccode\u003eless\u003c/code\u003e なので短く \u003ccode\u003etl\u003c/code\u003e にしておきました。途中の \u003ccode\u003esource-highlight\u003c/code\u003e は \u003ca href=\"https://www.gnu.org/software/src-highlite/\"\u003eGNU Source-highlight\u003c/a\u003e という\u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/%A5%B7%A5%F3%A5%BF%A5%C3%A5%AF%A5%B9\"\u003eシンタックス\u003c/a\u003eハイライトの定番ツールです。こうしておけば、\u003c/p\u003e\n\n\u003cpre class=\"code lang-sh\" data-lang=\"sh\" data-unlink\u003e$ tl \u003cspan class=\"synStatement\"\u003e[\u003c/span\u003eオプション\u003cspan class=\"synStatement\"\u003e]\u003c/span\u003e font.otf\n\u003c/pre\u003e\n\n\n\u003cp\u003eとするだけでちょっといい感じに中身がチラ見できるようになります。べんり。\u003c/p\u003e\n\n\u003cp\u003e\u003cspan itemscope itemtype=\"http://schema.org/Photograph\"\u003e\u003cimg src=\"https://cdn-ak.f.st-hatena.com/images/fotolife/m/mashabow/20170111/20170111232302.gif\" alt=\"f:id:mashabow:20170111232302g:plain\" title=\"f:id:mashabow:20170111232302g:plain\" class=\"hatena-fotolife\" itemprop=\"image\"\u003e\u003c/span\u003e\u003c/p\u003e\n","contentSnippet":"github.com仕事場／プライベート問わずに大活躍の fontTools ですが、その中でも頻出なのが「フォントファイルを TTX でダンプして中身をチラ見したい」という場面です。$ ttx -o out.ttx [オプション] font.otf$ less out.ttxつい最近まで、上のようにしてごく普通に中身を見ていたのですが、何度もやっているといい加減めんどくさくなってきます。そこで、.zshrc（適宜 .bashrc などに読み替えてください）に簡単なシェル関数を定義してみました。tl() {    ttx -q -o - $* | source-highlight -s xml -f esc | less}関数名はなんでもいいのですが、ttx で less なので短く tl にしておきました。途中の source-highlight は GNU Source-highlight というシンタックスハイライトの定番ツールです。こうしておけば、$ tl [オプション] font.otfとするだけでちょっといい感じに中身がチラ見できるようになります。べんり。","link":"https://shiromoji.hatenablog.jp/entry/2017/01/11/232900","isoDate":"2017-01-11T14:29:00.000Z","dateMiliSeconds":1484144940000,"imageUrl":"https://cdn-ak.f.st-hatena.com/images/fotolife/m/mashabow/20170111/20170111232302.gif","authorName":"mashabow"},{"title":"OpenType の仕様策定の議論をのぞくには","content":"\u003cp\u003eOpenType は1997年に \u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/Microsoft\"\u003eMicrosoft\u003c/a\u003e と \u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/Adobe\"\u003eAdobe\u003c/a\u003e が策定したフォントフォーマットで、現在の\u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/%A5%C7%A5%D5%A5%A1%A5%AF%A5%C8%A5%B9%A5%BF%A5%F3%A5%C0%A1%BC%A5%C9\"\u003eデファクトスタンダード\u003c/a\u003eになっています\u003ca href=\"#f-b01003c3\" name=\"fn-b01003c3\" title=\"ややこしいので詳細は省きますが、今どきの TrueType は OpenType に含まれます。また、Web フォントで使われる WOFF は、ざっくり言えば OpenType を zlib 圧縮したものです。\"\u003e*1\u003c/a\u003e。仕様は \u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/Microsoft\"\u003eMicrosoft\u003c/a\u003e のサイトで公開されており、興味があればだれでもすぐに読むことができます。\u003c/p\u003e\n\n\u003cul\u003e\n\u003cli\u003e\u003ca href=\"https://www.microsoft.com/en-us/Typography/OpenTypeSpecification.aspx\"\u003eMicrosoft Typography - OpenType Specification\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\n\n\u003cp\u003eこの OpenType の仕様はときたま改定されており、今のところは2015年3月に発表された v1.7 が最新バーションです。\u003c/p\u003e\n\n\u003cp\u003eところで、この仕様の改定はどこで議論されているんでしょう？　UCS/\u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/Unicode\"\u003eUnicode\u003c/a\u003e や各種 Web 標準などは策定プロセスがオープンになっていますが、OpenType の仕様はどこで議論が進んでいるのか、ぱっと見ただけではよくわかりません。日本語の情報もほとんど見つかりません。というわけで、この記事でその一端を紹介したいと思います。\u003c/p\u003e\n\n\u003ch3\u003eOpenType \u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/%A5%E1%A1%BC%A5%EA%A5%F3%A5%B0%A5%EA%A5%B9%A5%C8\"\u003eメーリングリスト\u003c/a\u003e\u003c/h3\u003e\n\n\u003cp\u003e実は、\u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/Microsoft\"\u003eMicrosoft\u003c/a\u003e のサイトにこの\u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/%A5%E1%A1%BC%A5%EA%A5%F3%A5%B0%A5%EA%A5%B9%A5%C8\"\u003eメーリングリスト\u003c/a\u003e（ML）の案内がちゃんと載っています。\u003c/p\u003e\n\n\u003cul\u003e\n\u003cli\u003e\u003ca href=\"https://www.microsoft.com/typography/otspec/otlist.htm\"\u003eOpenType discussion forum\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\n\n\u003cblockquote\u003e\u003cp\u003eAn e-mail based discussion forum has been set up specifically to help people working on the development of OpenType fonts and associated technologies.\u003c/p\u003e\n\n\u003cul\u003e\n\u003cli\u003eTo subscribe to the OpenType Mailing List, send e-mail to: \u003ca href=\"\u0026#x6d;\u0026#x61;\u0026#x69;\u0026#x6c;\u0026#x74;\u0026#x6f;\u0026#x3a;\u0026#x73;\u0026#x75;\u0026#98;\u0026#x73;\u0026#99;\u0026#114;\u0026#105;\u0026#x62;\u0026#101;\u0026#45;\u0026#x6f;\u0026#112;\u0026#101;\u0026#x6e;\u0026#116;\u0026#x79;\u0026#x70;\u0026#101;\u0026#64;\u0026#x69;\u0026#x6e;\u0026#100;\u0026#x78;\u0026#x2e;\u0026#x63;\u0026#111;\u0026#46;\u0026#117;\u0026#x6b;\"\u003e\u0026#115;\u0026#x75;\u0026#x62;\u0026#x73;\u0026#x63;\u0026#114;\u0026#105;\u0026#x62;\u0026#101;\u0026#x2d;\u0026#111;\u0026#112;\u0026#101;\u0026#110;\u0026#116;\u0026#121;\u0026#112;\u0026#x65;\u0026#x40;\u0026#105;\u0026#x6e;\u0026#100;\u0026#x78;\u0026#x2e;\u0026#99;\u0026#x6f;\u0026#x2e;\u0026#117;\u0026#x6b;\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003eTo remove yourself from this mailing list, send e-mail to: \u003ca href=\"\u0026#x6d;\u0026#97;\u0026#x69;\u0026#x6c;\u0026#x74;\u0026#x6f;\u0026#58;\u0026#x75;\u0026#x6e;\u0026#115;\u0026#x75;\u0026#98;\u0026#115;\u0026#x63;\u0026#x72;\u0026#105;\u0026#x62;\u0026#x65;\u0026#45;\u0026#x6f;\u0026#112;\u0026#x65;\u0026#110;\u0026#116;\u0026#121;\u0026#112;\u0026#101;\u0026#x40;\u0026#x69;\u0026#x6e;\u0026#x64;\u0026#120;\u0026#x2e;\u0026#99;\u0026#x6f;\u0026#46;\u0026#x75;\u0026#107;\"\u003e\u0026#x75;\u0026#110;\u0026#115;\u0026#117;\u0026#x62;\u0026#115;\u0026#x63;\u0026#114;\u0026#105;\u0026#98;\u0026#x65;\u0026#45;\u0026#x6f;\u0026#x70;\u0026#x65;\u0026#110;\u0026#x74;\u0026#121;\u0026#112;\u0026#101;\u0026#x40;\u0026#x69;\u0026#x6e;\u0026#100;\u0026#x78;\u0026#46;\u0026#x63;\u0026#x6f;\u0026#46;\u0026#117;\u0026#x6b;\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/blockquote\u003e\n\n\u003cp\u003e載っているのですが、\u003ccode\u003eindx.co.uk\u003c/code\u003e という馴染みのない\u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/%A5%C9%A5%E1%A5%A4%A5%F3\"\u003eドメイン\u003c/a\u003eだったり、登録前に ML の\u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/%A5%A2%A1%BC%A5%AB%A5%A4%A5%D6\"\u003eアーカイブ\u003c/a\u003eが見れなかったり、ページのフッタに \u003cq\u003eThis page was last updated 9 August 2004.\u003c/q\u003e と書いてあったりと、登録に躊躇してしまう要素が満載です。\u003c/p\u003e\n\n\u003cp\u003eが、これでも現役でちゃんと生きている公式 ML です。\u003cq\u003eto help people working on the development of OpenType fonts and associated technologies\u003c/q\u003e と書かれていてスコープが少しぼんやりとしていますが、OpenType の仕様に関する話題が現在中心になっています。\u003c/p\u003e\n\n\u003cp\u003eこの ML へ登録するためには、\u003ca href=\"\u0026#x6d;\u0026#x61;\u0026#x69;\u0026#x6c;\u0026#116;\u0026#x6f;\u0026#58;\u0026#115;\u0026#x75;\u0026#98;\u0026#x73;\u0026#x63;\u0026#114;\u0026#105;\u0026#x62;\u0026#101;\u0026#x2d;\u0026#x6f;\u0026#112;\u0026#x65;\u0026#110;\u0026#x74;\u0026#121;\u0026#x70;\u0026#101;\u0026#64;\u0026#105;\u0026#x6e;\u0026#100;\u0026#120;\u0026#46;\u0026#x63;\u0026#x6f;\u0026#x2e;\u0026#117;\u0026#x6b;\"\u003e\u0026#115;\u0026#117;\u0026#x62;\u0026#x73;\u0026#x63;\u0026#114;\u0026#x69;\u0026#x62;\u0026#101;\u0026#45;\u0026#x6f;\u0026#112;\u0026#x65;\u0026#x6e;\u0026#x74;\u0026#x79;\u0026#112;\u0026#101;\u0026#64;\u0026#105;\u0026#110;\u0026#100;\u0026#120;\u0026#x2e;\u0026#x63;\u0026#111;\u0026#46;\u0026#117;\u0026#107;\u003c/a\u003e にメールを送ります\u003ca href=\"#f-dc71ee9e\" name=\"fn-dc71ee9e\" title=\"一時期は opentype-migration-sub@indx.co.uk というアドレスだったようです（参考）。\"\u003e*2\u003c/a\u003e。このとき空メールではだめで、メールの本文が必要です。自己紹介や「登録したいんだけど」みたいなことを1, 2文書いておけば大丈夫なはずです。ML 管理者の承認が降りれば、数日後に通知のメールが来ますので、これで登録完了です。過去の\u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/%A5%A2%A1%BC%A5%AB%A5%A4%A5%D6\"\u003eアーカイブ\u003c/a\u003eは、ML 登録完了後に\u003ca href=\"http://www.indx.co.uk/biglistarchive/\"\u003eこのページ\u003c/a\u003eからたどれます。ただしシステムが古いようで、使い勝手は残念な感じです。\u003c/p\u003e\n\n\u003cp\u003eなお、この ML から配信されるメールは、件名の頭に \u003ccode\u003e[OpenType]\u003c/code\u003e がついています。\u003c/p\u003e\n\n\u003ch3\u003e\u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/mpeg\"\u003empeg\u003c/a\u003e-OTspec \u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/%A5%E1%A1%BC%A5%EA%A5%F3%A5%B0%A5%EA%A5%B9%A5%C8\"\u003eメーリングリスト\u003c/a\u003e\u003c/h3\u003e\n\n\u003cp\u003e世の中には ISO/IEC 14496-22 Open Font Format (OFF) という規格があります。といっても OpenType と中身は同じ…というか、OpenType をそのまま公的な国際規格にしたのがこの OFF です。\u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/%A5%C7%A5%B8%A5%E5%A1%BC%A5%EB\"\u003eデジュール\u003c/a\u003e標準というやつです。ISO が規格票を無料で公開しており、以下のページからPDFのダウンロードが可能です。ちなみに、ISO/IEC 14496-22:2015 が OpenType v1.7 に対応します。\u003c/p\u003e\n\n\u003cul\u003e\n\u003cli\u003e\u003ca href=\"http://standards.iso.org/ittf/PubliclyAvailableStandards/index.html\"\u003eFreely Available Standards\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\n\n\u003cp\u003eそして、この規格について議論するための ML が米 \u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/Yahoo%21\"\u003eYahoo!\u003c/a\u003e Groups に用意されています。これが \u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/mpeg\"\u003empeg\u003c/a\u003e-OTspec ML です。\u003c/p\u003e\n\n\u003cul\u003e\n\u003cli\u003e\u003ca href=\"https://groups.yahoo.com/neo/groups/mpeg-OTspec/info\"\u003eMPEG(SC29/WG11) Open Font Format - Yahoo Groups\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\n\n\u003cp\u003eこちらの ML は \u003ca href=\"\u0026#x6d;\u0026#97;\u0026#105;\u0026#x6c;\u0026#x74;\u0026#111;\u0026#58;\u0026#109;\u0026#x70;\u0026#x65;\u0026#103;\u0026#x2d;\u0026#111;\u0026#116;\u0026#115;\u0026#x70;\u0026#101;\u0026#x63;\u0026#x2d;\u0026#115;\u0026#117;\u0026#98;\u0026#115;\u0026#99;\u0026#114;\u0026#x69;\u0026#x62;\u0026#101;\u0026#64;\u0026#121;\u0026#97;\u0026#x68;\u0026#111;\u0026#x6f;\u0026#103;\u0026#x72;\u0026#x6f;\u0026#x75;\u0026#x70;\u0026#115;\u0026#46;\u0026#99;\u0026#x6f;\u0026#x6d;\"\u003e\u0026#109;\u0026#x70;\u0026#101;\u0026#103;\u0026#45;\u0026#111;\u0026#116;\u0026#115;\u0026#112;\u0026#x65;\u0026#x63;\u0026#45;\u0026#115;\u0026#117;\u0026#98;\u0026#115;\u0026#99;\u0026#x72;\u0026#x69;\u0026#98;\u0026#101;\u0026#64;\u0026#121;\u0026#x61;\u0026#x68;\u0026#x6f;\u0026#x6f;\u0026#x67;\u0026#x72;\u0026#111;\u0026#117;\u0026#112;\u0026#x73;\u0026#x2e;\u0026#99;\u0026#x6f;\u0026#x6d;\u003c/a\u003e に空メールを送信するだけですぐに参加できるので、OpenType ML と比べるととっつきやすいかもしれません。過去の\u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/%A5%A2%A1%BC%A5%AB%A5%A4%A5%D6\"\u003eアーカイブ\u003c/a\u003eや添付ファイルの閲覧には米 \u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/Yahoo%21\"\u003eYahoo!\u003c/a\u003e のアカウントが必要になりますので、アカウントを持っていなければ作っておきましょう。\u003c/p\u003e\n\n\u003cp\u003eなお、この ML から配信されるメールは、件名の頭に \u003ccode\u003e[mpeg-OTspec]\u003c/code\u003e がついています。\u003c/p\u003e\n\n\u003cp\u003eちなみに、\u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/mpeg\"\u003empeg\u003c/a\u003e-OTspec ML の近年の流量は以下のとおりで、話題があるときとないときでムラがあります。これは OpenType ML の方も同様です。\u003c/p\u003e\n\n\u003cp\u003e\u003cspan itemscope itemtype=\"http://schema.org/Photograph\"\u003e\u003cimg src=\"https://cdn-ak.f.st-hatena.com/images/fotolife/m/mashabow/20160621/20160621000505.png\" alt=\"f:id:mashabow:20160621000505p:plain\" title=\"f:id:mashabow:20160621000505p:plain\" class=\"hatena-fotolife\" itemprop=\"image\"\u003e\u003c/span\u003e\u003c/p\u003e\n\n\u003cp\u003eまた、両 ML 間では転送や\u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/%A5%AF%A5%ED%A5%B9%A5%DD%A5%B9%A5%C8\"\u003eクロスポスト\u003c/a\u003eが多く、両方とも登録していると若干カオスです。\u003c/p\u003e\n\n\u003ch3\u003eおまけ\u003c/h3\u003e\n\n\u003cp\u003e最後におまけとして、以下の\u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/%A5%EA%A5%DD%A5%B8%A5%C8%A5%EA\"\u003eリポジトリ\u003c/a\u003eを紹介しておきます。位置づけがまだよくわかりませんが、OpenType レイアウトに関する追加仕様のドラフトのようです。\u003c/p\u003e\n\n\u003cp\u003e\u003ciframe src=\"//hatenablog-parts.com/embed?url=https%3A%2F%2Fgithub.com%2FOpenType%2Fopentype-layout\" title=\"OpenType/opentype-layout\" class=\"embed-card embed-webcard\" scrolling=\"no\" frameborder=\"0\" style=\"display: block; width: 100%; height: 155px; max-width: 500px; margin: 10px 0px;\"\u003e\u003c/iframe\u003e\u003ccite class=\"hatena-citation\"\u003e\u003ca href=\"https://github.com/OpenType/opentype-layout\"\u003egithub.com\u003c/a\u003e\u003c/cite\u003e\u003c/p\u003e\n\u003cdiv class=\"footnote\"\u003e\n\u003cp class=\"footnote\"\u003e\u003ca href=\"#fn-b01003c3\" name=\"f-b01003c3\" class=\"footnote-number\"\u003e*1\u003c/a\u003e\u003cspan class=\"footnote-delimiter\"\u003e:\u003c/span\u003e\u003cspan class=\"footnote-text\"\u003eややこしいので詳細は省きますが、今どきの TrueType は OpenType に含まれます。また、Web フォントで使われる WOFF は、ざっくり言えば OpenType を zlib 圧縮したものです。\u003c/span\u003e\u003c/p\u003e\n\u003cp class=\"footnote\"\u003e\u003ca href=\"#fn-dc71ee9e\" name=\"f-dc71ee9e\" class=\"footnote-number\"\u003e*2\u003c/a\u003e\u003cspan class=\"footnote-delimiter\"\u003e:\u003c/span\u003e\u003cspan class=\"footnote-text\"\u003e一時期は opentype-\u003cem\u003emigration\u003c/em\u003e-sub@indx.co.uk というアドレスだったようです（\u003ca href=\"http://blog.typekit.com/2008/01/29/opentype_15_draft/\" title=\"The Typekit Blog | OpenType 1.5 draft \u0026amp; 1.6 suggestions\"\u003e参考\u003c/a\u003e）。\u003c/span\u003e\u003c/p\u003e\n\u003c/div\u003e","contentSnippet":"OpenType は1997年に Microsoft と Adobe が策定したフォントフォーマットで、現在のデファクトスタンダードになっています*1。仕様は Microsoft のサイトで公開されており、興味があればだれでもすぐに読むことができます。Microsoft Typography - OpenType Specificationこの OpenType の仕様はときたま改定されており、今のところは2015年3月に発表された v1.7 が最新バーションです。ところで、この仕様の改定はどこで議論されているんでしょう？　UCS/Unicode や各種 Web 標準などは策定プロセスがオープンになっていますが、OpenType の仕様はどこで議論が進んでいるのか、ぱっと見ただけではよくわかりません。日本語の情報もほとんど見つかりません。というわけで、この記事でその一端を紹介したいと思います。OpenType メーリングリスト実は、Microsoft のサイトにこのメーリングリスト（ML）の案内がちゃんと載っています。OpenType discussion forumAn e-mail based discussion forum has been set up specifically to help people working on the development of OpenType fonts and associated technologies.To subscribe to the OpenType Mailing List, send e-mail to: subscribe-opentype@indx.co.ukTo remove yourself from this mailing list, send e-mail to: unsubscribe-opentype@indx.co.uk載っているのですが、indx.co.uk という馴染みのないドメインだったり、登録前に ML のアーカイブが見れなかったり、ページのフッタに This page was last updated 9 August 2004. と書いてあったりと、登録に躊躇してしまう要素が満載です。が、これでも現役でちゃんと生きている公式 ML です。to help people working on the development of OpenType fonts and associated technologies と書かれていてスコープが少しぼんやりとしていますが、OpenType の仕様に関する話題が現在中心になっています。この ML へ登録するためには、subscribe-opentype@indx.co.uk にメールを送ります*2。このとき空メールではだめで、メールの本文が必要です。自己紹介や「登録したいんだけど」みたいなことを1, 2文書いておけば大丈夫なはずです。ML 管理者の承認が降りれば、数日後に通知のメールが来ますので、これで登録完了です。過去のアーカイブは、ML 登録完了後にこのページからたどれます。ただしシステムが古いようで、使い勝手は残念な感じです。なお、この ML から配信されるメールは、件名の頭に [OpenType] がついています。mpeg-OTspec メーリングリスト世の中には ISO/IEC 14496-22 Open Font Format (OFF) という規格があります。といっても OpenType と中身は同じ…というか、OpenType をそのまま公的な国際規格にしたのがこの OFF です。デジュール標準というやつです。ISO が規格票を無料で公開しており、以下のページからPDFのダウンロードが可能です。ちなみに、ISO/IEC 14496-22:2015 が OpenType v1.7 に対応します。Freely Available Standardsそして、この規格について議論するための ML が米 Yahoo! Groups に用意されています。これが mpeg-OTspec ML です。MPEG(SC29/WG11) Open Font Format - Yahoo Groupsこちらの ML は mpeg-otspec-subscribe@yahoogroups.com に空メールを送信するだけですぐに参加できるので、OpenType ML と比べるととっつきやすいかもしれません。過去のアーカイブや添付ファイルの閲覧には米 Yahoo! のアカウントが必要になりますので、アカウントを持っていなければ作っておきましょう。なお、この ML から配信されるメールは、件名の頭に [mpeg-OTspec] がついています。ちなみに、mpeg-OTspec ML の近年の流量は以下のとおりで、話題があるときとないときでムラがあります。これは OpenType ML の方も同様です。また、両 ML 間では転送やクロスポストが多く、両方とも登録していると若干カオスです。おまけ最後におまけとして、以下のリポジトリを紹介しておきます。位置づけがまだよくわかりませんが、OpenType レイアウトに関する追加仕様のドラフトのようです。github.com*1:ややこしいので詳細は省きますが、今どきの TrueType は OpenType に含まれます。また、Web フォントで使われる WOFF は、ざっくり言えば OpenType を zlib 圧縮したものです。*2:一時期は opentype-migration-sub@indx.co.uk というアドレスだったようです（参考）。","link":"https://shiromoji.hatenablog.jp/entry/2016/06/21/003529","isoDate":"2016-06-20T15:35:29.000Z","dateMiliSeconds":1466436929000,"imageUrl":"https://cdn-ak.f.st-hatena.com/images/fotolife/m/mashabow/20160621/20160621000505.png","authorName":"mashabow"},{"title":"二号明朝活字書体見本（明治26年）","content":"\u003ch2\u003eTL;DR\u003c/h2\u003e\n\n\u003cp\u003e東京築地活版製造所『二号明朝活字書体見本』（明治26年／1893年）の画像を \u003ca href=\"https://www.flickr.com/photos/95996414@N02/albums/72157662791750695/with/23854153892/\" title=\"二号明朝活字書体見本 | Flickr - Photo Sharing!\"\u003eFlickr で公開\u003c/a\u003eしました。\u003c/p\u003e\n\n\u003cp\u003e\u003ca data-flickr-embed=\"true\"  href=\"https://www.flickr.com/photos/95996414@N02/albums/72157662791750695\" title=\"二号明朝活字書体見本\"\u003e\u003cimg src=\"https://farm6.staticflickr.com/5836/23335632243_f2937a602a.jpg\" width=\"316\" height=\"500\" alt=\"二号明朝活字書体見本\"\u003e\u003c/a\u003e\u003cscript async src=\"//embedr.flickr.com/assets/client-code.js\" charset=\"utf-8\"\u003e\u003c/script\u003e\u003c/p\u003e\n\n\u003cp\u003ePDF 版がほしい方は下のページから。\u003c/p\u003e\n\n\u003cul\u003e\n\u003cli\u003e\u003ca href=\"http://shiromoji.net/pd/\" title=\"資料置き場 - しろもじ作業室\"\u003e資料置き場 - しろもじ作業室\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\n\n\u003ch2\u003eいきさつ\u003c/h2\u003e\n\n\u003cp\u003e先月末、\u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/Twitter\"\u003eTwitter\u003c/a\u003e でこんなやりとりをしていました。\u003c/p\u003e\n\n\u003cp\u003e\u003cblockquote class=\"twitter-tweet\" data-lang=\"HASH(0x9f16ef0)\"\u003e\u003cp lang=\"ja\" dir=\"ltr\"\u003e手持ちの資料をネットに目録作って、私設図書館みたいな感じで参照したい人に情報を渡せる様にするといいのかもしれない。\u003c/p\u003e\u0026mdash; にせねこ (@nixeneko) \u003ca href=\"https://twitter.com/nixeneko/status/670617740391116800\"\u003eNovember 28, 2015\u003c/a\u003e\u003c/blockquote\u003e\u003cscript async src=\"//platform.twitter.com/widgets.js\" charset=\"utf-8\"\u003e\u003c/script\u003e\n\u003cblockquote class=\"twitter-tweet\" data-lang=\"HASH(0x9f16ef0)\"\u003e\u003cp lang=\"ja\" dir=\"ltr\"\u003e手持ちの資料、紙モノまでは整理できてないけど、本とか冊子レベルのものならここに登録してる ⁑ しろもじライブラリ - \u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/%A5%E1%A5%C7%A5%A3%A5%A2%A5%DE%A1%BC%A5%AB%A1%BC\"\u003eメディアマーカー\u003c/a\u003e \u003ca href=\"https://t.co/Pe8M3kdVOk\"\u003ehttps://t.co/Pe8M3kdVOk\u003c/a\u003e\u003c/p\u003e\u0026mdash; mashabow (@mashabow) \u003ca href=\"https://twitter.com/mashabow/status/670619379537731585\"\u003eNovember 28, 2015\u003c/a\u003e\u003c/blockquote\u003e\u003cscript async src=\"//platform.twitter.com/widgets.js\" charset=\"utf-8\"\u003e\u003c/script\u003e\n\u003cblockquote class=\"twitter-tweet\" data-lang=\"HASH(0x9f16ef0)\"\u003e\u003cp lang=\"ja\" dir=\"ltr\"\u003e\u003ca href=\"https://twitter.com/mashabow\"\u003e@mashabow\u003c/a\u003e うわっ、1893明26の「二号明朝総数見本 全」って、小宮山大明神の明25総数見本と同じ構成か、実はその1年で違ってたりするのか、激しく気になるんですが！！！\u003c/p\u003e\u0026mdash; \u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/UA\"\u003eUA\u003c/a\u003e (3.1) ⿴囗図デコ大好き (@uakira2) \u003ca href=\"https://twitter.com/uakira2/status/670622647710011392\"\u003eNovember 28, 2015\u003c/a\u003e\u003c/blockquote\u003e\u003cscript async src=\"//platform.twitter.com/widgets.js\" charset=\"utf-8\"\u003e\u003c/script\u003e\n\u003cblockquote class=\"twitter-tweet\" data-lang=\"HASH(0x9f16ef0)\"\u003e\u003cp lang=\"ja\" dir=\"ltr\"\u003e\u003ca href=\"https://twitter.com/uakira2\"\u003e@uakira2\u003c/a\u003e なんでしたらお貸ししますよ（そしてあわよくば撮影をお願いして…\u003c/p\u003e\u0026mdash; mashabow (@mashabow) \u003ca href=\"https://twitter.com/mashabow/status/670624285619314688\"\u003eNovember 28, 2015\u003c/a\u003e\u003c/blockquote\u003e\u003cscript async src=\"//platform.twitter.com/widgets.js\" charset=\"utf-8\"\u003e\u003c/script\u003e\n\u003cblockquote class=\"twitter-tweet\" data-lang=\"HASH(0x9f16ef0)\"\u003e\u003cp lang=\"ja\" dir=\"ltr\"\u003e\u003ca href=\"https://twitter.com/mashabow\"\u003e@mashabow\u003c/a\u003e 撮影ご依頼、喜んで！！\u003c/p\u003e\u0026mdash; \u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/UA\"\u003eUA\u003c/a\u003e (3.1) ⿴囗図デコ大好き (@uakira2) \u003ca href=\"https://twitter.com/uakira2/status/670625789008879617\"\u003eNovember 28, 2015\u003c/a\u003e\u003c/blockquote\u003e\u003cscript async src=\"//platform.twitter.com/widgets.js\" charset=\"utf-8\"\u003e\u003c/script\u003e\n\u003cblockquote class=\"twitter-tweet\" data-lang=\"HASH(0x9f16ef0)\"\u003e\u003cp lang=\"ja\" dir=\"ltr\"\u003e\u003ca href=\"https://twitter.com/uakira2\"\u003e@uakira2\u003c/a\u003e どうもありがとうございます！（ちなみにわたしの\u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/Twitter\"\u003eTwitter\u003c/a\u003eのヘッダ画像はその見本帳の一部です\u003c/p\u003e\u0026mdash; mashabow (@mashabow) \u003ca href=\"https://twitter.com/mashabow/status/670626922150383616\"\u003eNovember 28, 2015\u003c/a\u003e\u003c/blockquote\u003e\u003cscript async src=\"//platform.twitter.com/widgets.js\" charset=\"utf-8\"\u003e\u003c/script\u003e\u003c/p\u003e\n\n\u003cp\u003eこの『二号明朝活字書体見本 全』というのは、2年半ほど前にたまたま運良く入手した活字見本帳です。自分の本棚に古い見本帳があるというのは、もちろん飛び上がるほど嬉しいわけですが、それをそのまましまっておくのもどうももったいない。どうせなら、文字に興味を持ったいろいろな人に見てもらいたい\u003ca href=\"#f-954870e2\" name=\"fn-954870e2\" title=\"というかそもそも自分自身、ほかの人が持っている見本帳をいろいろ見たくてしょうがなかった\"\u003e*1\u003c/a\u003e。……などということを以前から考えていました。\u003c/p\u003e\n\n\u003cp\u003eそんな中でこのやりとりがあり、チャンスだと思って（ずうずうしくも）撮影をお願いしてみました。この内田（\u003ca href=\"https://twitter.com/uakira2\" title=\"UA (3.1) ⿴囗図デコ大好き(@uakira2)さん | Twitter\"\u003e@uakira2\u003c/a\u003e）さんは以前、\u003ca href=\"http://f.hatena.ne.jp/uakira/S11%E7%AF%89%E5%9C%B0%E4%BA%94%E5%8F%B7/\" title=\"S11築地五号 - uakira's fotolife\"\u003e築地五号の見本帳のスキャン\u003c/a\u003eや、\u003ca href=\"http://f.hatena.ne.jp/HikariwokakaguruHitobito/%E6%97%A5%E6%9C%AC%E3%81%AE%E6%B4%BB%E5%AD%97/\" title=\"日本の活字 - HikariwokakaguruHitobito's fotolife\"\u003e『光をかかぐる人々』の撮影\u003c/a\u003eをされています。ありがたいことに、今回快く撮影を引き受けてくださり、こうして『二号明朝活字書体見本 全』の画像を公開することができました。下の Filckr アルバムで全ページ閲覧できますので、どうぞご覧ください。表紙を含めて画像は88枚あります。\u003c/p\u003e\n\n\u003cp\u003e\u003ca data-flickr-embed=\"true\"  href=\"https://www.flickr.com/photos/95996414@N02/albums/72157662791750695\" title=\"二号明朝活字書体見本\"\u003e\u003cimg src=\"https://farm6.staticflickr.com/5836/23335632243_f2937a602a.jpg\" width=\"316\" height=\"500\" alt=\"二号明朝活字書体見本\"\u003e\u003c/a\u003e\u003cscript async src=\"//embedr.flickr.com/assets/client-code.js\" charset=\"utf-8\"\u003e\u003c/script\u003e\u003c/p\u003e\n\n\u003cp\u003eいつものように PDF 版も用意してあります。\u003c/p\u003e\n\n\u003cul\u003e\n\u003cli\u003e\u003ca href=\"http://shiromoji.net/pd/\" title=\"資料置き場 - しろもじ作業室\"\u003e資料置き場 - しろもじ作業室\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\n\n\u003ch2\u003e見本帳概観\u003c/h2\u003e\n\n\u003cp\u003e\u003ca data-flickr-embed=\"true\"  href=\"https://www.flickr.com/photos/95996414@N02/23594561499/in/album-72157662791750695/\" title=\"二号明朝活字書体見本_16\"\u003e\u003cimg src=\"https://farm6.staticflickr.com/5809/23594561499_63930a6c9d_n.jpg\" width=\"316\" height=\"500\" alt=\"二号明朝活字書体見本_16\"\u003e\u003c/a\u003e\u003cscript async src=\"//embedr.flickr.com/assets/client-code.js\" charset=\"utf-8\"\u003e\u003c/script\u003e\u003c/p\u003e\n\n\u003cp\u003eこの見本帳の8割以上は、漢字のページで占められています。字種数はまだ数えていませんが、総数見本帳だけあってさまざまな字種が載っています。その分、整ったデザインの活字（頻出する漢字）から、その場しのぎっぽいバランス悪い活字（あまり出てこない漢字）まで、クオリティもさまざまです。\u003c/p\u003e\n\n\u003cp\u003e\u003ca data-flickr-embed=\"true\"  href=\"https://www.flickr.com/photos/95996414@N02/23936334066/in/album-72157662791750695/\" title=\"二号明朝活字書体見本_76\"\u003e\u003cimg src=\"https://farm6.staticflickr.com/5776/23936334066_13cd76846e_n.jpg\" width=\"316\" height=\"500\" alt=\"二号明朝活字書体見本_76\"\u003e\u003c/a\u003e\u003cscript async src=\"//embedr.flickr.com/assets/client-code.js\" charset=\"utf-8\"\u003e\u003c/script\u003e\u003c/p\u003e\n\n\u003cp\u003e部首順に並んだ漢字が終わると、次は分合活字（この見本帳では「分合文字」とよぶ）のページに移ります。横幅が1/3, 2/3の2種類の活字があり、この両者を偏旁として組み合わせ、漢字1字を組み立てるようになっています。\u003c/p\u003e\n\n\u003cp\u003e\u003ca data-flickr-embed=\"true\"  href=\"https://www.flickr.com/photos/95996414@N02/23962423875/in/album-72157662791750695/\" title=\"二号明朝活字書体見本_81\"\u003e\u003cimg src=\"https://farm2.staticflickr.com/1636/23962423875_da16ffd2cf_n.jpg\" width=\"316\" height=\"500\" alt=\"二号明朝活字書体見本_81\"\u003e\u003c/a\u003e\u003cscript async src=\"//embedr.flickr.com/assets/client-code.js\" charset=\"utf-8\"\u003e\u003c/script\u003e\u003c/p\u003e\n\n\u003cp\u003eその次はかな類が続きます。カタカナ・ひらがなともに、非常に洗練された細身のデザインです。上のツイートにあるように、\u003ca href=\"https://twitter.com/mashabow\" title=\"mashabow(@mashabow)さん | Twitter\"\u003e自分の Twitter\u003c/a\u003e のヘッダ画像にはこのひらがな部分の写真を使っていますが、プロフィールページを開くたびについつい見とれてしまいます。\u003c/p\u003e\n\n\u003cp\u003eあとは記号類が少し並んで終わりです。全84ページ。奥付は以下のようになっています。\u003c/p\u003e\n\n\u003cblockquote\u003e\u003cp\u003e明治廿六年六月六日印刷\u003cbr\u003e\n明治廿六年六月十日出版\u003c/p\u003e\n\n\u003cp\u003e　　　日本\u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/%C5%EC%B5%FE%BB%D4\"\u003e東京市\u003c/a\u003e京橋區築地二丁目拾七番地\u003cbr\u003e\n　　　　　印刷者　　曲田　成\u003cbr\u003e\n　　　　　印刷所　　東京築地活版製造所\u003c/p\u003e\u003c/blockquote\u003e\n\n\u003cp\u003eというわけで、どうぞご活用ください。\u003c/p\u003e\n\u003cdiv class=\"footnote\"\u003e\n\u003cp class=\"footnote\"\u003e\u003ca href=\"#fn-954870e2\" name=\"f-954870e2\" class=\"footnote-number\"\u003e*1\u003c/a\u003e\u003cspan class=\"footnote-delimiter\"\u003e:\u003c/span\u003e\u003cspan class=\"footnote-text\"\u003eというかそもそも自分自身、ほかの人が持っている見本帳をいろいろ見たくてしょうがなかった\u003c/span\u003e\u003c/p\u003e\n\u003c/div\u003e","contentSnippet":"TL;DR東京築地活版製造所『二号明朝活字書体見本』（明治26年／1893年）の画像を Flickr で公開しました。PDF 版がほしい方は下のページから。資料置き場 - しろもじ作業室いきさつ先月末、Twitter でこんなやりとりをしていました。手持ちの資料をネットに目録作って、私設図書館みたいな感じで参照したい人に情報を渡せる様にするといいのかもしれない。— にせねこ (@nixeneko) November 28, 2015手持ちの資料、紙モノまでは整理できてないけど、本とか冊子レベルのものならここに登録してる ⁑ しろもじライブラリ - メディアマーカー https://t.co/Pe8M3kdVOk— mashabow (@mashabow) November 28, 2015@mashabow うわっ、1893明26の「二号明朝総数見本 全」って、小宮山大明神の明25総数見本と同じ構成か、実はその1年で違ってたりするのか、激しく気になるんですが！！！— UA (3.1) ⿴囗図デコ大好き (@uakira2) November 28, 2015@uakira2 なんでしたらお貸ししますよ（そしてあわよくば撮影をお願いして…— mashabow (@mashabow) November 28, 2015@mashabow 撮影ご依頼、喜んで！！— UA (3.1) ⿴囗図デコ大好き (@uakira2) November 28, 2015@uakira2 どうもありがとうございます！（ちなみにわたしのTwitterのヘッダ画像はその見本帳の一部です— mashabow (@mashabow) November 28, 2015この『二号明朝活字書体見本 全』というのは、2年半ほど前にたまたま運良く入手した活字見本帳です。自分の本棚に古い見本帳があるというのは、もちろん飛び上がるほど嬉しいわけですが、それをそのまましまっておくのもどうももったいない。どうせなら、文字に興味を持ったいろいろな人に見てもらいたい*1。……などということを以前から考えていました。そんな中でこのやりとりがあり、チャンスだと思って（ずうずうしくも）撮影をお願いしてみました。この内田（@uakira2）さんは以前、築地五号の見本帳のスキャンや、『光をかかぐる人々』の撮影をされています。ありがたいことに、今回快く撮影を引き受けてくださり、こうして『二号明朝活字書体見本 全』の画像を公開することができました。下の Filckr アルバムで全ページ閲覧できますので、どうぞご覧ください。表紙を含めて画像は88枚あります。いつものように PDF 版も用意してあります。資料置き場 - しろもじ作業室見本帳概観この見本帳の8割以上は、漢字のページで占められています。字種数はまだ数えていませんが、総数見本帳だけあってさまざまな字種が載っています。その分、整ったデザインの活字（頻出する漢字）から、その場しのぎっぽいバランス悪い活字（あまり出てこない漢字）まで、クオリティもさまざまです。部首順に並んだ漢字が終わると、次は分合活字（この見本帳では「分合文字」とよぶ）のページに移ります。横幅が1/3, 2/3の2種類の活字があり、この両者を偏旁として組み合わせ、漢字1字を組み立てるようになっています。その次はかな類が続きます。カタカナ・ひらがなともに、非常に洗練された細身のデザインです。上のツイートにあるように、自分の Twitter のヘッダ画像にはこのひらがな部分の写真を使っていますが、プロフィールページを開くたびについつい見とれてしまいます。あとは記号類が少し並んで終わりです。全84ページ。奥付は以下のようになっています。明治廿六年六月六日印刷　　　日本東京市京橋區築地二丁目拾七番地というわけで、どうぞご活用ください。*1:というかそもそも自分自身、ほかの人が持っている見本帳をいろいろ見たくてしょうがなかった","link":"https://shiromoji.hatenablog.jp/entry/2015/12/25/235158","isoDate":"2015-12-25T14:51:58.000Z","dateMiliSeconds":1451055118000,"imageUrl":"https://farm6.staticflickr.com/5836/23335632243_f2937a602a.jpg","authorName":"mashabow"},{"title":"同型類字集 明朝体","content":"\u003cp\u003e前回の記事「\u003ca href=\"http://shiromoji.hatenablog.jp/entry/2015/11/16/003831\"\u003e同型類字集 等線体\u003c/a\u003e」のつづきです。\u003c/p\u003e\n\n\u003cp\u003e『同型類字集 等線体』の方は\u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/%BE%BC%CF%C217%C7%AF\"\u003e昭和17年\u003c/a\u003e（1942年）12月発行でしたが、こちらの『同型類字集 \u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/%CC%C0%C4%AB%C2%CE\"\u003e明朝体\u003c/a\u003e』は3ヶ月後の\u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/%BE%BC%CF%C218%C7%AF\"\u003e昭和18年\u003c/a\u003e（1943年）3月発行となっています。等線体が\u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/%CC%C0%C4%AB%C2%CE\"\u003e明朝体\u003c/a\u003eになっている以外は、まったく同じ体裁・内容のようです。\u003c/p\u003e\n\n\u003cp\u003e\u003ca data-flickr-embed=\"true\"  href=\"https://www.flickr.com/photos/95996414@N02/albums/72157658898415004\" title=\"同型類字集 明朝体\"\u003e\u003cimg src=\"https://farm6.staticflickr.com/5811/22412698983_585e1fe075_c.jpg\" width=\"800\" height=\"534\" alt=\"同型類字集 明朝体\"\u003e\u003c/a\u003e\u003cscript async src=\"//embedr.flickr.com/assets/client-code.js\" charset=\"utf-8\"\u003e\u003c/script\u003e\u003c/p\u003e\n\n\u003cp\u003e上の画像をクリックすると、\u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/Flickr\"\u003eFlickr\u003c/a\u003e でファイルが閲覧できます。例によって PDF にまとめたものも用意しましたので、必要な方は下のページからどうぞ。\u003c/p\u003e\n\n\u003cul\u003e\n\u003cli\u003e\u003ca href=\"http://shiromoji.net/pd/\" title=\"資料置き場 - しろもじ作業室\"\u003e資料置き場 - しろもじ作業室\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\n\n\u003cp\u003e例示されている\u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/%CC%C0%C4%AB%C2%CE\"\u003e明朝体\u003c/a\u003eを見てみると、やや直線的で整理された感じの雰囲気になっています。字体の省略や簡略化も見られますが、この処理は等線体のものと完全に一致しているようで、字体の整理・統一への意識が読み取れます。\u003c/p\u003e\n\n\u003cp\u003e\u003ca data-flickr-embed=\"true\"  href=\"https://www.flickr.com/photos/95996414@N02/22412698983/in/album-72157658898415004/\" title=\"同型類字集_明朝体_02\"\u003e\u003cimg src=\"https://farm6.staticflickr.com/5811/22412698983_585e1fe075_c.jpg\" width=\"800\" height=\"534\" alt=\"同型類字集_明朝体_02\"\u003e\u003c/a\u003e\u003cscript async src=\"//embedr.flickr.com/assets/client-code.js\" charset=\"utf-8\"\u003e\u003c/script\u003e\u003c/p\u003e\n\n\u003cp\u003e他の\u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/%CC%C0%C4%AB%C2%CE\"\u003e明朝体\u003c/a\u003eと比べて特徴的なのは、撥ねの処理でしょうか。上の画像でわかるように、「力」や「巾」の撥ねが省略され、終筆を止めています。その一方で、「刂」や「寸」の撥ねはそのままの形で残っており、ちょっと不統一な感じもします。この撥ねる・撥ねないの間に、なにか法則性はあるんでしょうか…？　わかる方いましたらぜひ教えてください。\u003c/p\u003e\n\n\u003cp\u003e\u003ca data-flickr-embed=\"true\"  href=\"https://www.flickr.com/photos/95996414@N02/23020355232/in/album-72157658898415004/\" title=\"同型類字集_明朝体_01\"\u003e\u003cimg src=\"https://farm1.staticflickr.com/676/23020355232_b1c6fe656c_c.jpg\" width=\"800\" height=\"534\" alt=\"同型類字集_明朝体_01\"\u003e\u003c/a\u003e\u003cscript async src=\"//embedr.flickr.com/assets/client-code.js\" charset=\"utf-8\"\u003e\u003c/script\u003e\u003c/p\u003e\n\n\u003cp\u003eさて、上の画像の左ページは表紙裏にあたる箇所ですが、ここにはこんな注意書きが書かれています。\u003c/p\u003e\n\n\u003cblockquote\u003e\u003cp\u003e一、一般字典ノ例ニ拠ルコトナク結体又ハ点画ヲ同シウスルモノニ分類編纂シ以テ練習ニ便ナラシム\u003c/p\u003e\n\n\u003cp\u003e二、本所載以外ノ文字ヲ必要トスル場合ハ末尾ニ添付シアル扁旁部首ニヨリ所要ノ扁旁冠脚等ニ供シ得ル文字ヲ選出シ適宜組成スルモノトス\u003cbr\u003e\n煩字及略字ハ別ニ示ス\u003c/p\u003e\n\n\u003cp\u003e備考\u003cbr\u003e\n本類字集ノ字画ハ普通大ノ註記ニ適用スル為メ定メタルモノニシテ字高大ナル註記ニ在リテハ字典ヲ参照シ点画ヲ適宜粉飾スルコトヲ得\u003c/p\u003e\u003c/blockquote\u003e\n\n\u003cp\u003eといっても、個人的に気になるのはその内容ではなく、印刷されている文字の方です。地図や海図の製作には早くから写植が導入されていたようですが、このページの文字も写植で打たれており\u003ca href=\"#f-2e730007\" name=\"fn-2e730007\" title=\"巻末の「扁旁部首」もそうです。\"\u003e*1\u003c/a\u003e、写真植字機研究所（のちの写研）の\u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/%CC%C0%C4%AB%C2%CE\"\u003e明朝体\u003c/a\u003eのように見えます。しかしよく見てみると、2行目の「習」や3行目の「場」など、普通の\u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/%CC%C0%C4%AB%C2%CE\"\u003e明朝体\u003c/a\u003eとはちょっと変わっていませんか…？\u003c/p\u003e\n\n\u003cp\u003e\u003cspan itemscope itemtype=\"http://schema.org/Photograph\"\u003e\u003cimg src=\"https://cdn-ak.f.st-hatena.com/images/fotolife/m/mashabow/20151206/20151206142130.jpg\" alt=\"f:id:mashabow:20151206142130j:plain\" title=\"f:id:mashabow:20151206142130j:plain\" class=\"hatena-fotolife\" itemprop=\"image\"\u003e\u003c/span\u003e\u003c/p\u003e\n\n\u003cp\u003eどうもこれは、この『同型類字集 \u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/%CC%C0%C4%AB%C2%CE\"\u003e明朝体\u003c/a\u003e』で示されているとおりに、写植の\u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/%CC%C0%C4%AB%C2%CE\"\u003e明朝体\u003c/a\u003eを修整しているようなのです。さらによく見てみると、1行目の「據」や2行目「編」などの撥ねも、しっかり取り除かれていることがわかります。写植で普通に印字したものを器用に修整したんでしょうか。それとも独自仕様の\u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/%CC%C0%C4%AB%C2%CE\"\u003e明朝体\u003c/a\u003eの文字盤なんてものがあったんでしょうか。いずれにせよ、なかなかのこだわりです。\u003c/p\u003e\n\n\u003cp\u003eこの『同型類字集』と関係あるのかないのか、『地図用文字』なる本があると知ったので、こちらも気になる今日このごろです。\u003c/p\u003e\n\n\u003cblockquote class=\"twitter-tweet\" lang=\"ja\"\u003e\u003cp lang=\"ja\" dir=\"ltr\"\u003e機械彫刻標準書体がまたプチ盛り上がりをしてたようなので、たしか昔見本帳買ったような……と思ったら全然違った。『地図用文字』だった。地図に使われる書体は「等線体」といって均等な太さの線で書かれた文字ですが郡名には隷体を使うみたい \u003ca href=\"https://t.co/kAH0y4Jhb9\"\u003epic.twitter.com/kAH0y4Jhb9\u003c/a\u003e\u003c/p\u003e\u0026mdash; \u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/%A4%D0%A4%EB%A4%DC%A4%E9\"\u003eばるぼら\u003c/a\u003e (@bxjp) \u003ca href=\"https://twitter.com/bxjp/status/669209443838529536\"\u003e2015, 11月 24\u003c/a\u003e\u003c/blockquote\u003e\n\n\n\u003cscript async src=\"//platform.twitter.com/widgets.js\" charset=\"utf-8\"\u003e\u003c/script\u003e\n\n\u003cdiv class=\"footnote\"\u003e\n\u003cp class=\"footnote\"\u003e\u003ca href=\"#fn-2e730007\" name=\"f-2e730007\" class=\"footnote-number\"\u003e*1\u003c/a\u003e\u003cspan class=\"footnote-delimiter\"\u003e:\u003c/span\u003e\u003cspan class=\"footnote-text\"\u003e巻末の「扁旁部首」もそうです。\u003c/span\u003e\u003c/p\u003e\n\u003c/div\u003e","contentSnippet":"前回の記事「同型類字集 等線体」のつづきです。『同型類字集 等線体』の方は昭和17年（1942年）12月発行でしたが、こちらの『同型類字集 明朝体』は3ヶ月後の昭和18年（1943年）3月発行となっています。等線体が明朝体になっている以外は、まったく同じ体裁・内容のようです。上の画像をクリックすると、Flickr でファイルが閲覧できます。例によって PDF にまとめたものも用意しましたので、必要な方は下のページからどうぞ。資料置き場 - しろもじ作業室例示されている明朝体を見てみると、やや直線的で整理された感じの雰囲気になっています。字体の省略や簡略化も見られますが、この処理は等線体のものと完全に一致しているようで、字体の整理・統一への意識が読み取れます。他の明朝体と比べて特徴的なのは、撥ねの処理でしょうか。上の画像でわかるように、「力」や「巾」の撥ねが省略され、終筆を止めています。その一方で、「刂」や「寸」の撥ねはそのままの形で残っており、ちょっと不統一な感じもします。この撥ねる・撥ねないの間に、なにか法則性はあるんでしょうか…？　わかる方いましたらぜひ教えてください。さて、上の画像の左ページは表紙裏にあたる箇所ですが、ここにはこんな注意書きが書かれています。一、一般字典ノ例ニ拠ルコトナク結体又ハ点画ヲ同シウスルモノニ分類編纂シ以テ練習ニ便ナラシム二、本所載以外ノ文字ヲ必要トスル場合ハ末尾ニ添付シアル扁旁部首ニヨリ所要ノ扁旁冠脚等ニ供シ得ル文字ヲ選出シ適宜組成スルモノトス備考といっても、個人的に気になるのはその内容ではなく、印刷されている文字の方です。地図や海図の製作には早くから写植が導入されていたようですが、このページの文字も写植で打たれており*1、写真植字機研究所（のちの写研）の明朝体のように見えます。しかしよく見てみると、2行目の「習」や3行目の「場」など、普通の明朝体とはちょっと変わっていませんか…？どうもこれは、この『同型類字集 明朝体』で示されているとおりに、写植の明朝体を修整しているようなのです。さらによく見てみると、1行目の「據」や2行目「編」などの撥ねも、しっかり取り除かれていることがわかります。写植で普通に印字したものを器用に修整したんでしょうか。それとも独自仕様の明朝体の文字盤なんてものがあったんでしょうか。いずれにせよ、なかなかのこだわりです。この『同型類字集』と関係あるのかないのか、『地図用文字』なる本があると知ったので、こちらも気になる今日このごろです。機械彫刻標準書体がまたプチ盛り上がりをしてたようなので、たしか昔見本帳買ったような……と思ったら全然違った。『地図用文字』だった。地図に使われる書体は「等線体」といって均等な太さの線で書かれた文字ですが郡名には隷体を使うみたい pic.twitter.com/kAH0y4Jhb9— ばるぼら (@bxjp) 2015, 11月 24*1:巻末の「扁旁部首」もそうです。","link":"https://shiromoji.hatenablog.jp/entry/2015/11/28/235613","isoDate":"2015-11-28T14:56:13.000Z","dateMiliSeconds":1448722573000,"imageUrl":"https://farm6.staticflickr.com/5811/22412698983_585e1fe075_c.jpg","authorName":"mashabow"},{"title":"同型類字集 等線体","content":"\u003cp\u003e何ヶ月か前に、『同型類字集 等線体』『同型類字集 \u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/%CC%C0%C4%AB%C2%CE\"\u003e明朝体\u003c/a\u003e』という小冊子を入手しました。\n\u003ca href=\"https://ja.wikipedia.org/wiki/%E9%99%B8%E5%9C%B0%E6%B8%AC%E9%87%8F%E9%83%A8\" title=\"陸地測量部 - Wikipedia\"\u003e陸地測量部\u003c/a\u003eが戦時中に作ったもので、地図に書き入れる文字のレタリング見本・字体見本のようです。\u003c/p\u003e\n\n\u003cp\u003e冊子を綴じてあったホチキスが錆びていたこともあり、せっかくなのでスキャンして公開してみることにしました。今日はまず、昭和17年（1942年）12月発行の『同型類字集 等線体』です。部屋にある家庭用\u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/%CA%A3%B9%E7%B5%A1\"\u003e複合機\u003c/a\u003e（ブラザー DCP-J940N）を使い、600 dpi のグレースケールでスキャンしました。\u003c/p\u003e\n\n\u003cp\u003e\u003ca data-flickr-embed=\"true\"  href=\"https://www.flickr.com/photos/95996414@N02/albums/72157661240115675\" title=\"同型類字集 等線体\"\u003e\u003cimg src=\"https://farm6.staticflickr.com/5817/22412436603_240016723f_c.jpg\" width=\"800\" height=\"534\" alt=\"同型類字集 等線体\"\u003e\u003c/a\u003e\u003cscript async src=\"//embedr.flickr.com/assets/client-code.js\" charset=\"utf-8\"\u003e\u003c/script\u003e\u003c/p\u003e\n\n\u003cp\u003e上の画像をクリックすると、\u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/Flickr\"\u003eFlickr\u003c/a\u003e でファイルが閲覧できます。なお、入手時点で冊子末尾の数ページが欠落していたため、「扁旁部首」の6画の途中で終わっています。PDF にまとめたものも用意しましたので、下のページからダウンロードしてください。\u003c/p\u003e\n\n\u003cul\u003e\n\u003cli\u003e\u003ca href=\"http://shiromoji.net/pd/\" title=\"資料置き場 - しろもじ作業室\"\u003e資料置き場 - しろもじ作業室\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\n\n\u003cp\u003eこの等線体は見ての通り、ポキポキとした直線的な感じの書体になっています。フトコロも広く、払いがぐっと左右外側に向かっているのも特徴的です。昔のレタリング文字ではよく見ますが、そういえば現代のフォントにはこういうデザインあまりないですね。字体に関していえば、\u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/%BE%EF%CD%D1%B4%C1%BB%FA\"\u003e常用漢字\u003c/a\u003eほどではありませんが、ちょこちょこと省略・簡略化がみられます。違いがさりげなさすぎて見落としそうなものも……。\u003c/p\u003e\n\n\u003cp\u003e次回は『同型類字集 \u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/%CC%C0%C4%AB%C2%CE\"\u003e明朝体\u003c/a\u003e』の予定です。（→ \u003ca href=\"http://shiromoji.hatenablog.jp/entry/2015/11/28/235613\"\u003e書きました\u003c/a\u003e）\u003c/p\u003e\n","contentSnippet":"何ヶ月か前に、『同型類字集 等線体』『同型類字集 明朝体』という小冊子を入手しました。陸地測量部が戦時中に作ったもので、地図に書き入れる文字のレタリング見本・字体見本のようです。冊子を綴じてあったホチキスが錆びていたこともあり、せっかくなのでスキャンして公開してみることにしました。今日はまず、昭和17年（1942年）12月発行の『同型類字集 等線体』です。部屋にある家庭用複合機（ブラザー DCP-J940N）を使い、600 dpi のグレースケールでスキャンしました。上の画像をクリックすると、Flickr でファイルが閲覧できます。なお、入手時点で冊子末尾の数ページが欠落していたため、「扁旁部首」の6画の途中で終わっています。PDF にまとめたものも用意しましたので、下のページからダウンロードしてください。資料置き場 - しろもじ作業室この等線体は見ての通り、ポキポキとした直線的な感じの書体になっています。フトコロも広く、払いがぐっと左右外側に向かっているのも特徴的です。昔のレタリング文字ではよく見ますが、そういえば現代のフォントにはこういうデザインあまりないですね。字体に関していえば、常用漢字ほどではありませんが、ちょこちょこと省略・簡略化がみられます。違いがさりげなさすぎて見落としそうなものも……。次回は『同型類字集 明朝体』の予定です。（→ 書きました）","link":"https://shiromoji.hatenablog.jp/entry/2015/11/16/003831","isoDate":"2015-11-15T15:38:31.000Z","dateMiliSeconds":1447601911000,"imageUrl":"https://farm6.staticflickr.com/5817/22412436603_240016723f_c.jpg","authorName":"mashabow"},{"title":"はてなブログに引っ越してきました","content":"\u003cp\u003eいままでこのブログは\u003ca href=\"http://d.hatena.ne.jp/\"\u003eはてなダイアリー\u003c/a\u003eというサービスを使っていましたが、同社の後継サービスである\u003ca href=\"http://hatenablog.com/\"\u003eはてなブログ\u003c/a\u003eの機能が充実してきたようなので、こちらに引っ越してきました。URL は以下のように変更になります。\u003c/p\u003e\n\n\u003cul\u003e\n\u003cli\u003e旧：\u003ca href=\"http://d.hatena.ne.jp/mashabow/\"\u003ehttp://d.hatena.ne.jp/mashabow/\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003e新：\u003ca href=\"http://shiromoji.hatenablog.jp/\"\u003ehttp://shiromoji.hatenablog.jp/\u003c/a\u003e\u003c/strong\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\n\n\u003cp\u003e過去記事はもちろんのこと、記事へ寄せていただいたコメントや\u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/%A4%CF%A4%C6%A5%D6\"\u003eはてブ\u003c/a\u003e・\u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/%A4%CF%A4%C6%A4%CA%A5%B9%A5%BF%A1%BC\"\u003eはてなスター\u003c/a\u003eも、一緒に移行されているはずです。\nまた、旧URLへアクセスすると、自動的に新URLにリダイレクトされるようになっています。\n昔の記事については、いま読み返してみるといろいろとはずかしいことが書いてあったりしそうですが（読み返せてない）、恥を忍んでそのまま晒しておくことにします。\nリンク切れや古い情報もそのままになっていますので、ご注意ください。\u003c/p\u003e\n\n\u003cp\u003e引っ越してきたのでこれからバリバリ記事書きます！！などというわけでもないのですが、よろしくお願いいたします。\u003c/p\u003e\n","contentSnippet":"いままでこのブログははてなダイアリーというサービスを使っていましたが、同社の後継サービスであるはてなブログの機能が充実してきたようなので、こちらに引っ越してきました。URL は以下のように変更になります。旧：http://d.hatena.ne.jp/mashabow/新：http://shiromoji.hatenablog.jp/過去記事はもちろんのこと、記事へ寄せていただいたコメントやはてブ・はてなスターも、一緒に移行されているはずです。また、旧URLへアクセスすると、自動的に新URLにリダイレクトされるようになっています。昔の記事については、いま読み返してみるといろいろとはずかしいことが書いてあったりしそうですが（読み返せてない）、恥を忍んでそのまま晒しておくことにします。リンク切れや古い情報もそのままになっていますので、ご注意ください。引っ越してきたのでこれからバリバリ記事書きます！！などというわけでもないのですが、よろしくお願いいたします。","link":"https://shiromoji.hatenablog.jp/entry/2015/07/20/022009","isoDate":"2015-07-19T17:20:09.000Z","dateMiliSeconds":1437326409000,"imageUrl":"https://cdn.blog.st-hatena.com/images/theme/og-image-1500.png","authorName":"mashabow"},{"title":"タイププロジェクト株式会社に入社しました","content":"\u003cp\u003eおひさしぶりです。mashabow です。\u003c/p\u003e\u003cp\u003e4月15日付けで\u003ca href=\"http://typeproject.com/\"\u003e\u0026#x30BF;\u0026#x30A4;\u0026#x30D7;\u0026#x30D7;\u0026#x30ED;\u0026#x30B8;\u0026#x30A7;\u0026#x30AF;\u0026#x30C8;\u0026#x682A;\u0026#x5F0F;\u0026#x4F1A;\u0026#x793E;\u003c/a\u003eに入社しました。AXISフォントやTP明朝を作っているフォントメーカーです。数年前からバイトのようなかたちでちょこっと仕事をしていましたが、そのまま正社員として働くことになりました。\u003c/p\u003e\u003cp\u003e職種としては、タイプエンジニア（フォントエンジニアとも）というものになります。裏方的な役割なのであまり聞き慣れないかもしれません。具体的には、デザイナーが作ったグリフをまとめてちゃんと動くフォントファイルを作ったり、フォント制作で使うお役立ち\u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/%A5%C4%A1%BC%A5%EB\"\u003eツール\u003c/a\u003eを作ったり、……といったもろもろをする仕事です。自分自身でデザインをするわけではありませんが、デザイナーをはじめ他のスタッフとともに、すばらしいフォントを世の中に送り出していきたいと思います。\u003c/p\u003e\n\n\u003cdiv class=\"section\"\u003e\n    \u003ch4\u003eその他のご報告\u003c/h4\u003e\n    \n\u003cdiv class=\"section\"\u003e\n    \u003ch5\u003e大学を卒業しました\u003c/h5\u003e\n    \u003cp\u003e3月でようやく大学を卒業しました。\u003ca href=\"http://togetter.com/li/213879\"\u003e87\u0026#x5E74;\u0026#x751F;\u0026#x307E;\u0026#x308C;\u003c/a\u003eなので、とっくの昔に卒業していたはずなんですが、おかしいな…。ちなみに、\u003ca href=\"http://www.gavo.t.u-tokyo.ac.jp/\"\u003e\u0026#x5E83;\u0026#x702C;\u0026#x30FB;\u0026#x5CEF;\u0026#x677E;\u0026#x7814;\u0026#x7A76;\u0026#x5BA4;\u003c/a\u003eというところで、\u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/%BC%EA%BD%F1%A4%AD\"\u003e手書き\u003c/a\u003e漢字フォントの生成について研究をしていました。いずれどこかで発表できたらと思います。\u003c/p\u003e\n\n\u003c/div\u003e\n\u003cdiv class=\"section\"\u003e\n    \u003ch5\u003e右足首を骨折しました\u003c/h5\u003e\n    \u003cp\u003e先月の話ですが、確定申告に行く途中に階段ですっころんで右足首を骨折しました。手術とリハビリのおかげで、ようやく普通に歩けるようになってきたところです。痛みはそれほどでもありませんでしたが、右足が使えずなかなかに不便でした。卒業式に出られなかったり、4月1日の入社がズレたりというのは、すべてコイツのせいです。ご迷惑をおかけしました。みなさまもどうぞお気をつけください。\u003c/p\u003e\n\n\u003c/div\u003e\n\u003cdiv class=\"section\"\u003e\n    \u003ch5\u003e4月23日（木）にトークショーがあります\u003c/h5\u003e\n    \u003cp\u003e今週の23日に、タイププロジェクト代表の\u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/%CE%EB%CC%DA%B8%F9\"\u003e鈴木功\u003c/a\u003eが、長谷川踏太さんと対談を行います。\u003c/p\u003e\n\n\u003cul\u003e\n\u003cli\u003e\u003ca href=\"http://www.pen-online.jp/news/info/Pen-Type-Project-DAIKANYAMA-T-SITE/\"\u003ePen\u0026times;Type Project 4\u0026#x6708;23\u0026#x65E5;\u0026#xFF08;\u0026#x6728;\u0026#xFF09; DAIKANYAMA T-SITE\u0026#x306B;\u0026#x3066;\u0026#x3001;\u0026#x516C;\u0026#x958B;\u0026#x30AF;\u0026#x30EA;\u0026#x30A8;\u0026#x30FC;\u0026#x30BF;\u0026#x30FC;\u0026#x5BFE;\u0026#x8AC7;\u0026#x958B;\u0026#x50AC;\u0026#xFF01; | News | Pen Online\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e\n    \u003cblockquote cite=\"http://www.pen-online.jp/news/info/Pen-Type-Project-DAIKANYAMA-T-SITE/\"\u003e\n        \u003cp\u003e「フォントをデザインする人、フォントでデザインする人。」\u003c/p\u003e\u003cp\u003e「AXIS Font」や「TP明朝」など、革新的なフォントを生みだすタイププロジェクト代表・タイプディレクターの\u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/%CE%EB%CC%DA%B8%F9\"\u003e鈴木功\u003c/a\u003e氏と、インターネット広告や\u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/%A5%B3%A1%BC%A5%DD%A5%EC%A1%BC%A5%C8%A5%A2%A5%A4%A5%C7%A5%F3%A5%C6%A5%A3%A5%C6%A5%A3\"\u003eコーポレートアイデンティティ\u003c/a\u003eなどの分野で\u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/%A5%A4%A5%F3%A5%BF%A5%E9%A5%AF%A5%C6%A5%A3%A5%D6\"\u003eインタラクティブ\u003c/a\u003eな作品を発表し続けるクリエイティブディレクターの長谷川踏太氏。おふたりによるトークショーを、DAIKANYAMA T-SITE GARDEN GALLERYにて4月23日（木）に開催します。当日は、書体とメガネの機能的・デザイン的な共通点に着想を得て、長谷川氏が立ち上げた話題のメガネブランド「TYPE」や、タイププロジェクトが提案する「都市フォント」プロジェクトなど、フォントをめぐる様々なトークを展開。また、コーポレート\u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/%A5%D6%A5%E9%A5%F3%A5%C7%A5%A3%A5%F3%A5%B0\"\u003eブランディング\u003c/a\u003eに向けたタイププロジェクトの試みなども語られる予定です。私たちの暮らしを彩るフォントの奥深さに気づかせてもらえる貴重なクロストーク。入場は無料となっていますので、ぜひご参加ください。（Pen編集部）\u003c/p\u003e\n\n        \u003ccite\u003e\u003ca href=\"http://www.pen-online.jp/news/info/Pen-Type-Project-DAIKANYAMA-T-SITE/\"\u003ePen\u0026times;Type Project 4\u0026#x6708;23\u0026#x65E5;\u0026#xFF08;\u0026#x6728;\u0026#xFF09; DAIKANYAMA T-SITE\u0026#x306B;\u0026#x3066;\u0026#x3001;\u0026#x516C;\u0026#x958B;\u0026#x30AF;\u0026#x30EA;\u0026#x30A8;\u0026#x30FC;\u0026#x30BF;\u0026#x30FC;\u0026#x5BFE;\u0026#x8AC7;\u0026#x958B;\u0026#x50AC;\u0026#xFF01;\u003c/a\u003e\u003c/cite\u003e\n    \u003c/blockquote\u003e\n\u003cp\u003e先週末時点ではまだ空きがあるとのことだったので、興味ある方はぜひどうぞ。応募フォームは上記告知ページの記事末尾から。入場無料でおまけがついてくるみたいです。\u003c/p\u003e\n\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"section\"\u003e\n    \u003ch4\u003eというわけで\u003c/h4\u003e\n    \u003cp\u003e今回のご報告は以上です。ここしばらくはイベントや\u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/Twitter\"\u003eTwitter\u003c/a\u003e・ブログなどから遠ざかっていましたが、またぼちぼち顔を出していければと思います。今後ともどうぞよろしくお願いいたします。\u003c/p\u003e\n\n\u003c/div\u003e","contentSnippet":"おひさしぶりです。mashabow です。4月15日付けでタイププロジェクト株式会社に入社しました。AXISフォントやTP明朝を作っているフォントメーカーです。数年前からバイトのようなかたちでちょこっと仕事をしていましたが、そのまま正社員として働くことになりました。職種としては、タイプエンジニア（フォントエンジニアとも）というものになります。裏方的な役割なのであまり聞き慣れないかもしれません。具体的には、デザイナーが作ったグリフをまとめてちゃんと動くフォントファイルを作ったり、フォント制作で使うお役立ちツールを作ったり、……といったもろもろをする仕事です。自分自身でデザインをするわけではありませんが、デザイナーをはじめ他のスタッフとともに、すばらしいフォントを世の中に送り出していきたいと思います。その他のご報告大学を卒業しました3月でようやく大学を卒業しました。87年生まれなので、とっくの昔に卒業していたはずなんですが、おかしいな…。ちなみに、広瀬・峯松研究室というところで、手書き漢字フォントの生成について研究をしていました。いずれどこかで発表できたらと思います。右足首を骨折しました先月の話ですが、確定申告に行く途中に階段ですっころんで右足首を骨折しました。手術とリハビリのおかげで、ようやく普通に歩けるようになってきたところです。痛みはそれほどでもありませんでしたが、右足が使えずなかなかに不便でした。卒業式に出られなかったり、4月1日の入社がズレたりというのは、すべてコイツのせいです。ご迷惑をおかけしました。みなさまもどうぞお気をつけください。4月23日（木）にトークショーがあります今週の23日に、タイププロジェクト代表の鈴木功が、長谷川踏太さんと対談を行います。Pen×Type Project 4月23日（木） DAIKANYAMA T-SITEにて、公開クリエーター対談開催！ | News | Pen Online「フォントをデザインする人、フォントでデザインする人。」「AXIS Font」や「TP明朝」など、革新的なフォントを生みだすタイププロジェクト代表・タイプディレクターの鈴木功氏と、インターネット広告やコーポレートアイデンティティなどの分野でインタラクティブな作品を発表し続けるクリエイティブディレクターの長谷川踏太氏。おふたりによるトークショーを、DAIKANYAMA T-SITE GARDEN GALLERYにて4月23日（木）に開催します。当日は、書体とメガネの機能的・デザイン的な共通点に着想を得て、長谷川氏が立ち上げた話題のメガネブランド「TYPE」や、タイププロジェクトが提案する「都市フォント」プロジェクトなど、フォントをめぐる様々なトークを展開。また、コーポレートブランディングに向けたタイププロジェクトの試みなども語られる予定です。私たちの暮らしを彩るフォントの奥深さに気づかせてもらえる貴重なクロストーク。入場は無料となっていますので、ぜひご参加ください。（Pen編集部）Pen×Type Project 4月23日（木） DAIKANYAMA T-SITEにて、公開クリエーター対談開催！    先週末時点ではまだ空きがあるとのことだったので、興味ある方はぜひどうぞ。応募フォームは上記告知ページの記事末尾から。入場無料でおまけがついてくるみたいです。というわけで今回のご報告は以上です。ここしばらくはイベントやTwitter・ブログなどから遠ざかっていましたが、またぼちぼち顔を出していければと思います。今後ともどうぞよろしくお願いいたします。","link":"https://shiromoji.hatenablog.jp/entry/20150419/1429456773","isoDate":"2015-04-18T15:19:33.000Z","dateMiliSeconds":1429370373000,"imageUrl":"https://cdn.blog.st-hatena.com/images/theme/og-image-1500.png","authorName":"mashabow"},{"title":"官報に使われた印刷局の康煕字典活字","content":"\u003cp\u003e去年の11月、\u003ca href=\"http://kindai.ndl.go.jp/\"\u003e\u0026#x8FD1;\u0026#x30C7;\u0026#x30B8;\u003c/a\u003eで『\u003ca href=\"http://kindai.ndl.go.jp/info:ndljp/pid/1459197\"\u003e\u0026#x5185;\u0026#x95A3;\u0026#x5370;\u0026#x5237;\u0026#x5C40;\u0026#x4E03;\u0026#x5341;\u0026#x5E74;\u0026#x53F2;\u003c/a\u003e』という本をパラパラ見ていたら、こんなことが書いてあった（強調は引用者）。\u003c/p\u003e\n\n    \u003cblockquote cite=\"http://kindai.ndl.go.jp/info\"\u003e\n        \u003cp\u003e其の後三十一年十一月\u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/%C6%E2%B3%D5%C9%DC\"\u003e内閣府\u003c/a\u003e官報局と併合してより、更に活\u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/%BB%FA%CA%EC\"\u003e字母\u003c/a\u003e型の改造に努む。三十六年二月\u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/%A5%E9%A5%A4%A5%CE%A5%BF%A5%A4%A5%D7\"\u003eライノタイプ\u003c/a\u003eを購入設備し欧文印刷の便を図る。又\u003cem\u003e四十五年以来\u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/%B9%AF%DF%E6%BB%FA%C5%B5\"\u003e康煕字典\u003c/a\u003eの字体を基礎として活字字体の改造を企て、殿版\u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/%B9%AF%DF%E6%BB%FA%C5%B5\"\u003e康煕字典\u003c/a\u003eに依ることとし\u003c/em\u003e、同時に鋳造方法の改良をも計画し独逸及び米国より母型彫刻機四台を購入し、繁雑なる旧式方法を廃しニツケルと銅との合成金に直接彫刻して母型を得、之に依りて鋳造するの方法に革め、大いに製造能率の増進を見たり。而して官報印刷に使用する活字の如きは、専ら此の方法に依りて鋳造したるものを用ふ。又大正五六年の頃「ポイント」式活字の鋳造に着手せしが、七年十二月に至り五号活字に代はるべき九「ポイント」活字成り、八年末六号活字に代はべき\u003ca href=\"#f-27c32a01\" name=\"fn-27c32a01\" title=\"ママ\"\u003e*1\u003c/a\u003e八「ポイント」活字の新造に尋いで十一年十二「ポイント」新活字等完成す。\u003cem\u003e此等の活字は何れも前記字典の文字を写真に依り縮写したる当局独特のものにして、字画正確、字体鮮明なるのみならず、一種の風韻を持するの故を以て大いに識者の好評を得たり\u003c/em\u003e。\u003c/p\u003e\n\n        \u003ccite\u003e\u003ca href=\"http://kindai.ndl.go.jp/info:ndljp/pid/1459197/82\"\u003e\u0026#x300E;\u0026#x5185;\u0026#x95A3;\u0026#x5370;\u0026#x5237;\u0026#x5C40;\u0026#x4E03;\u0026#x5341;\u0026#x5E74;\u0026#x53F2;\u0026#x300F;\u0026#x5185;\u0026#x95A3;\u0026#x5370;\u0026#x5237;\u0026#x5C40;\u0026#x3001;1943\u0026#x5E74;\u0026#x3001;pp. 114\u0026ndash;115\u003c/a\u003e\u003c/cite\u003e\n    \u003c/blockquote\u003e\n\u003cp\u003eそんな活字があっただなんて寡聞にして知らなかったので、へーと思って \u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/Twitter\"\u003eTwitter\u003c/a\u003e でつぶやいた。\u003c/p\u003e\u003cp\u003e\u003cscript\u003e    window.twttr = (function(d, s, id) {        var js, fjs = d.getElementsByTagName(s)[0],            t = window.twttr || {};        if (d.getElementById(id)) return t;        js = d.createElement(s);        js.id = id;        js.src = \"https://platform.twitter.com/widgets.js\";        fjs.parentNode.insertBefore(js, fjs);        t._e = [];        t.ready = function(f) {            t._e.push(f);        };        return t;    }(document, \"script\", \"twitter-wjs\"));\u003c/script\u003e\u003cscript\u003e    twttr.ready(function (twttr) {        var el = document.getElementsByClassName('twitter-syntax-tweet-id-271917646210035713');        for (var i=0;i\u003cel.length;i++) {            if (!!el[i].getAttribute('data-is-tweet-loaded')){                continue;            }            el[i].setAttribute('data-is-tweet-loaded', '1');            twttr.widgets.createTweet('271917646210035713',el[i],{});        }    });\u003c/script\u003e\u003cdiv class=\"twitter-syntax-tweet-id-271917646210035713\"\u003e\u003c/div\u003e\u003cscript\u003e    window.twttr = (function(d, s, id) {        var js, fjs = d.getElementsByTagName(s)[0],            t = window.twttr || {};        if (d.getElementById(id)) return t;        js = d.createElement(s);        js.id = id;        js.src = \"https://platform.twitter.com/widgets.js\";        fjs.parentNode.insertBefore(js, fjs);        t._e = [];        t.ready = function(f) {            t._e.push(f);        };        return t;    }(document, \"script\", \"twitter-wjs\"));\u003c/script\u003e\u003cscript\u003e    twttr.ready(function (twttr) {        var el = document.getElementsByClassName('twitter-syntax-tweet-id-271919839289954305');        for (var i=0;i\u003cel.length;i++) {            if (!!el[i].getAttribute('data-is-tweet-loaded')){                continue;            }            el[i].setAttribute('data-is-tweet-loaded', '1');            twttr.widgets.createTweet('271919839289954305',el[i],{});        }    });\u003c/script\u003e\u003cdiv class=\"twitter-syntax-tweet-id-271919839289954305\"\u003e\u003c/div\u003e\u003c/p\u003e\u003cp\u003eで、その後ろくに調べもせずほったらかしにしていた。\u003c/p\u003e\u003cp\u003eときは流れて8ヶ月後。\u003c/p\u003e\u003cp\u003e\u003ca href=\"http://moji.gr.jp/gakkou/kouza/digitalib/\"\u003e\u0026#x3008;\u0026#x6D3B;\u0026#x5B57;\u0026#x3009;\u0026#x4E2D;\u0026#x6BD2;\u0026#x8005;\u0026#x306E;\u0026#x30C7;\u0026#x30B8;\u0026#x30BF;\u0026#x30EB;\u0026#x56F3;\u0026#x66F8;\u0026#x9928;\u0026#x63A2;\u0026#x8A2A;\u003c/a\u003eの懇親会で「そういえば」と思い出し、「そんな活字あったんですか？」と\u003ca href=\"http://d.hatena.ne.jp/uakira/\"\u003e\u0026#x5185;\u0026#x7530;\u0026#x3055;\u0026#x3093;\u003c/a\u003eに伺ってみた。そしたらすぐに、「実際に一時期官報に使われていました」「\u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/%B9%AF%DF%E6%BB%FA%C5%B5\"\u003e康煕字典\u003c/a\u003eそのままのデザインです」とのお答え。さすが内田さん！\u003c/p\u003e\u003cp\u003e帰宅してさっそく\u003ca href=\"http://dl.ndl.go.jp/\"\u003e\u0026#x56FD;\u0026#x7ACB;\u0026#x56FD;\u0026#x4F1A;\u0026#x56F3;\u0026#x66F8;\u0026#x9928;\u0026#x30C7;\u0026#x30B8;\u0026#x30BF;\u0026#x30EB;\u0026#x5316;\u0026#x8CC7;\u0026#x6599;\u003c/a\u003eにアクセスし、大正期の官報を漁ってみたところ、ほどなくして使用例に到達。ざっと見てみたところでは、\u003ca href=\"http://dl.ndl.go.jp/info:ndljp/pid/2954038\"\u003e\u0026#x5927;\u0026#x6B63;8\u0026#x5E74;\u0026#xFF08;1919\u0026#x5E74;\u0026#xFF09;1\u0026#x6708;4\u0026#x65E5;\u0026#x767A;\u0026#x884C;\u0026#x306E;\u0026#x5B98;\u0026#x5831;\u0026#x7B2C;1924\u0026#x53F7;\u003c/a\u003eが初出のようだった。2ページ目の省令欄をはじめとして、いろいろな記事が\u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/%B9%AF%DF%E6%BB%FA%C5%B5\"\u003e康煕字典\u003c/a\u003e活字\u003ca href=\"#f-c0de137f\" name=\"fn-c0de137f\" title=\"と勝手にこのエントリでは呼んでいますが、正式名称や通称があったりするんでしょうか？\"\u003e*2\u003c/a\u003eで組まれている。\u003c/p\u003e\u003cp\u003e\u003cspan itemscope itemtype=\"http://schema.org/Photograph\"\u003e\u003ca href=\"http://f.hatena.ne.jp/mashabow/20130728032926\" class=\"hatena-fotolife\" itemprop=\"url\"\u003e\u003cimg src=\"https://cdn-ak.f.st-hatena.com/images/fotolife/m/mashabow/20130728/20130728032926.png\" alt=\"f:id:mashabow:20130728032926p:image:w600\" title=\"f:id:mashabow:20130728032926p:image:w600\" class=\"hatena-fotolife\" style=\"width:600px\" itemprop=\"image\"\u003e\u003c/a\u003e\u003c/span\u003e\u003c/p\u003e\u003cp\u003eここのデジタル化資料は解像度がそれほど高くないこともあって、細部のデザインまでは読み取れない。ただ、それでもあの\u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/%B9%AF%DF%E6%BB%FA%C5%B5\"\u003e康煕字典\u003c/a\u003eっぽい独特な雰囲気はよく伝わってくる。実のところ、今回これを見るまでは\u003c/p\u003e\n\n\u003cul\u003e\n\u003cli\u003e\u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/%B9%AF%DF%E6%BB%FA%C5%B5\"\u003e康煕字典\u003c/a\u003eを写真で撮るって、それでうまく活字ができるんだろか？\u003c/li\u003e\n\u003cli\u003e組んだときにちゃんと字面揃うの？\u003c/li\u003e\n\u003cli\u003e「一種の風韻を持する〜」ってちょっと話を盛ってるんじゃ…\u003c/li\u003e\n\u003c/ul\u003e\u003cp\u003eなどと、どれぐらいの品質なのか正直疑問だった。しかし、このように官報のデジタル化資料を見てみたところでは、結構いい感じに仕上がっているようにも思える。\u003c/p\u003e\u003cp\u003eまた、どうやらこの活字はカタカナ部分の字幅（縦方向の長さ）が漢字より小さいようだ。そのおかげで、カタカナの字面が小ぶりなのにも関わらず、組み上がりはパラパラとした印象にはなっていない。\u003c/p\u003e\u003cp\u003e暇なときに一度、デジタル化資料ではなく実物の方でも見てみたい。\u003c/p\u003e\n\n\u003cdiv class=\"section\"\u003e\n    \u003ch4\u003e附記\u003c/h4\u003e\n    \u003cp\u003eとここまで書いたあと、もう一度近デジの方をちらほら見ていたら、『\u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/%B0%F5%BA%FE%B6%C9\"\u003e印刷局\u003c/a\u003e長年報書 第45回』の中にこの活字についての言及があった。\u003c/p\u003e\n\n    \u003cblockquote cite=\"http://kindai.ndl.go.jp/info\"\u003e\n        \u003cp\u003e大正八年一月四日\u003c/p\u003e\u003cp\u003e官報ハ従来二段組ナリシヲ三段組ニ改メ又五号活字ニ代フルニ\u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/%B9%AF%DF%E6%BB%FA%C5%B5\"\u003e康煕字典\u003c/a\u003eノ文字ヲ基礎トシテ新鋳シタル九ポイント活字ヲ用ヰタリ……\u003c/p\u003e\n\n        \u003ccite\u003e\u003ca href=\"http://kindai.ndl.go.jp/info:ndljp/pid/932384/16\"\u003e\u0026#x300E;\u0026#x5370;\u0026#x5237;\u0026#x5C40;\u0026#x9577;\u0026#x5E74;\u0026#x5831;\u0026#x66F8; \u0026#x7B2C;45\u0026#x56DE;\u0026#x300F;\u0026#x5370;\u0026#x5237;\u0026#x5C40;\u0026#x3001;1920\u0026#x5E74;\u0026#x3001;p. 25\u003c/a\u003e\u003c/cite\u003e\n    \u003c/blockquote\u003e\n\u003cp\u003eさらに、『\u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/%B0%F5%BA%FE%B6%C9\"\u003e印刷局\u003c/a\u003e五十年略史』には次のように書かれている。（というか、この本自体がまるまるこの\u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/%B9%AF%DF%E6%BB%FA%C5%B5\"\u003e康煕字典\u003c/a\u003e活字で組まれている。上で引いた官報が漢字カタカナ交じりだったのに対し、こちらは漢字ひらがな交じり文。）\u003c/p\u003e\n\n    \u003cblockquote cite=\"http://kindai.ndl.go.jp/info\"\u003e\n        \u003cp\u003e尚\u0026#29574;に活字鋳造に就いて一言せざる可らざることあり、従来本邦の活字製作方法は先づ黄楊材に手刻したる原字を蝋型に取り、電気装置によりて銅を其凹所に集積せしめ、木材原字と同一の銅字を得て更に電気装置により始めて銅\u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/%BB%FA%CA%EC\"\u003e字母\u003c/a\u003eを作り、之を母型として活字を鋳造したるのものなり。当局に於ては明治四十五年以来独逸及米国より母型彫刻機四台を購入し、繁雑なる旧式の手続を取らずニッケルと銅との合成金に直接彫刻して母型を得、之に依りて鋳造する事とせり。現在官報印刷に使用する活字の如き此機械によりて鋳造したるものなり。上述の新活字は\u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/%B9%AF%DF%E6%BB%FA%C5%B5\"\u003e康煕字典\u003c/a\u003eの文字を写真により縮写したるものにして字画正確書体鮮明なる九ポイント活字なり。此新漢字活字を採用すると同時に仮名活字をも改鋳し、漢字に比し十と八との割合に縮め、以て字間の空白を減じ行数の節約を得る事とせり。\u003c/p\u003e\n\n        \u003ccite\u003e\u003ca href=\"http://kindai.ndl.go.jp/info:ndljp/pid/1874804/27\"\u003e\u0026#x300E;\u0026#x5370;\u0026#x5237;\u0026#x5C40;\u0026#x4E94;\u0026#x5341;\u0026#x5E74;\u0026#x7565;\u0026#x53F2;\u0026#x300F;\u0026#x5370;\u0026#x5237;\u0026#x5C40;\u0026#x3001;1921\u0026#x5E74;\u0026#x3001;p. 29\u003c/a\u003e\u003c/cite\u003e\n    \u003c/blockquote\u003e\n\n    \u003cblockquote cite=\"http://kindai.ndl.go.jp/info\"\u003e\n        \u003cp\u003e八年一月従来二段組なりし官報を三段組に改め新鋳九ポイント活字を使用し、以て大に紙面の節約と印刷の鮮明とを図り、日に月に増大堆積する記載事項の停滞を防ぐを得たり、……\u003c/p\u003e\n\n        \u003ccite\u003e\u003ca href=\"http://kindai.ndl.go.jp/info:ndljp/pid/1874804/34\"\u003e\u0026#x540C;\u0026#x3001;p. 42\u003c/a\u003e\u003c/cite\u003e\n    \u003c/blockquote\u003e\n\u003cp\u003eとあり、まとめると結局\u003c/p\u003e\n\n\u003cul\u003e\n\u003cli\u003e\u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/%C2%E7%C0%B58%C7%AF\"\u003e大正8年\u003c/a\u003e（1919年）1月4日の官報から\u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/%B9%AF%DF%E6%BB%FA%C5%B5\"\u003e康煕字典\u003c/a\u003e活字を使った\u003c/li\u003e\n\u003cli\u003eこのときの活字のサイズは9ポイントで、のちに他のサイズも製作\u003c/li\u003e\n\u003cli\u003e漢字は方形だが仮名は80％平体。これによって紙面節約\u003c/li\u003e\n\u003c/ul\u003e\u003cp\u003eということらしい。近デジすごい。\u003c/p\u003e\n\n\u003c/div\u003e\n\u003cdiv class=\"section\"\u003e\n    \u003ch4\u003e追記\u003c/h4\u003e\n    \u003cp\u003e「\u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/%C2%E7%C0%B58%C7%AF\"\u003e大正8年\u003c/a\u003e（1919年）1月4日の官報から\u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/%B9%AF%DF%E6%BB%FA%C5%B5\"\u003e康煕字典\u003c/a\u003e活字を使った」と書いたが、もう少し前から使われていたらしい。\u003c/p\u003e\u003cp\u003e\u003cblockquote class=\"twitter-tweet\" data-lang=\"HASH(0xe9488a8)\"\u003e\u003cp lang=\"ja\" dir=\"ltr\"\u003e\u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/%B0%F5%BA%FE%B6%C9\"\u003e印刷局\u003c/a\u003eが\u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/%B9%AF%DF%E6%BB%FA%C5%B5\"\u003e康煕字典\u003c/a\u003e体活字を使い始めるの、「70年史」の記録と違って\u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/%C2%E7%C0%B58%C7%AF\"\u003e大正8年\u003c/a\u003e1月4日付官報からじゃなく、\u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/%C2%E7%C0%B57%C7%AF\"\u003e大正7年\u003c/a\u003e12月27日付「\u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/%BD%B0%B5%C4%B1%A1\"\u003e衆議院\u003c/a\u003e第41回本会議第1号」からだ \u003ca href=\"https://t.co/6sZgeVcQFp\"\u003ehttps://t.co/6sZgeVcQFp\u003c/a\u003e っていう件、判りやすいようにツイートしてなかった \u003ca href=\"https://t.co/MQGISd6XSU\"\u003ehttps://t.co/MQGISd6XSU\u003c/a\u003e ので、自分でも捜すの苦労した。\u003c/p\u003e\u0026mdash; UCHIDA \u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/Akira\"\u003eAkira\u003c/a\u003e (@uakira2) \u003ca href=\"https://twitter.com/uakira2/status/1082894613210226688?ref_src=twsrc%5Etfw\"\u003eJanuary 9, 2019\u003c/a\u003e\u003c/blockquote\u003e\u003cscript async src=\"https://platform.twitter.com/widgets.js\" charset=\"utf-8\"\u003e\u003c/script\u003e\u003c/p\u003e\u003cp\u003e上記スレッドに情報がまとまっている。\u003c/p\u003e\n\n\u003c/div\u003e\u003cdiv class=\"footnote\"\u003e\n\u003cp class=\"footnote\"\u003e\u003ca href=\"#fn-27c32a01\" name=\"f-27c32a01\" class=\"footnote-number\"\u003e*1\u003c/a\u003e\u003cspan class=\"footnote-delimiter\"\u003e:\u003c/span\u003e\u003cspan class=\"footnote-text\"\u003eママ\u003c/span\u003e\u003c/p\u003e\n\u003cp class=\"footnote\"\u003e\u003ca href=\"#fn-c0de137f\" name=\"f-c0de137f\" class=\"footnote-number\"\u003e*2\u003c/a\u003e\u003cspan class=\"footnote-delimiter\"\u003e:\u003c/span\u003e\u003cspan class=\"footnote-text\"\u003eと勝手にこのエントリでは呼んでいますが、正式名称や通称があったりするんでしょうか？\u003c/span\u003e\u003c/p\u003e\n\u003c/div\u003e","contentSnippet":"去年の11月、近デジで『内閣印刷局七十年史』という本をパラパラ見ていたら、こんなことが書いてあった（強調は引用者）。其の後三十一年十一月内閣府官報局と併合してより、更に活字母型の改造に努む。三十六年二月ライノタイプを購入設備し欧文印刷の便を図る。又四十五年以来康煕字典の字体を基礎として活字字体の改造を企て、殿版康煕字典に依ることとし、同時に鋳造方法の改良をも計画し独逸及び米国より母型彫刻機四台を購入し、繁雑なる旧式方法を廃しニツケルと銅との合成金に直接彫刻して母型を得、之に依りて鋳造するの方法に革め、大いに製造能率の増進を見たり。而して官報印刷に使用する活字の如きは、専ら此の方法に依りて鋳造したるものを用ふ。又大正五六年の頃「ポイント」式活字の鋳造に着手せしが、七年十二月に至り五号活字に代はるべき九「ポイント」活字成り、八年末六号活字に代はべき*1八「ポイント」活字の新造に尋いで十一年十二「ポイント」新活字等完成す。此等の活字は何れも前記字典の文字を写真に依り縮写したる当局独特のものにして、字画正確、字体鮮明なるのみならず、一種の風韻を持するの故を以て大いに識者の好評を得たり。『内閣印刷局七十年史』内閣印刷局、1943年、pp. 114–115    そんな活字があっただなんて寡聞にして知らなかったので、へーと思って Twitter でつぶやいた。    window.twttr = (function(d, s, id) {        var js, fjs = d.getElementsByTagName(s)[0],            t = window.twttr || {};        if (d.getElementById(id)) return t;        js = d.createElement(s);        js.id = id;        js.src = \"https://platform.twitter.com/widgets.js\";        fjs.parentNode.insertBefore(js, fjs);        t._e = [];        t.ready = function(f) {            t._e.push(f);        };        return t;    }(document, \"script\", \"twitter-wjs\"));    twttr.ready(function (twttr) {        var el = document.getElementsByClassName('twitter-syntax-tweet-id-271917646210035713');        for (var i=0;i    window.twttr = (function(d, s, id) {        var js, fjs = d.getElementsByTagName(s)[0],            t = window.twttr || {};        if (d.getElementById(id)) return t;        js = d.createElement(s);        js.id = id;        js.src = \"https://platform.twitter.com/widgets.js\";        fjs.parentNode.insertBefore(js, fjs);        t._e = [];        t.ready = function(f) {            t._e.push(f);        };        return t;    }(document, \"script\", \"twitter-wjs\"));    twttr.ready(function (twttr) {        var el = document.getElementsByClassName('twitter-syntax-tweet-id-271919839289954305');        for (var i=0;iで、その後ろくに調べもせずほったらかしにしていた。ときは流れて8ヶ月後。〈活字〉中毒者のデジタル図書館探訪の懇親会で「そういえば」と思い出し、「そんな活字あったんですか？」と内田さんに伺ってみた。そしたらすぐに、「実際に一時期官報に使われていました」「康煕字典そのままのデザインです」とのお答え。さすが内田さん！帰宅してさっそく国立国会図書館デジタル化資料にアクセスし、大正期の官報を漁ってみたところ、ほどなくして使用例に到達。ざっと見てみたところでは、大正8年（1919年）1月4日発行の官報第1924号が初出のようだった。2ページ目の省令欄をはじめとして、いろいろな記事が康煕字典活字*2で組まれている。ここのデジタル化資料は解像度がそれほど高くないこともあって、細部のデザインまでは読み取れない。ただ、それでもあの康煕字典っぽい独特な雰囲気はよく伝わってくる。実のところ、今回これを見るまでは康煕字典を写真で撮るって、それでうまく活字ができるんだろか？組んだときにちゃんと字面揃うの？「一種の風韻を持する〜」ってちょっと話を盛ってるんじゃ…などと、どれぐらいの品質なのか正直疑問だった。しかし、このように官報のデジタル化資料を見てみたところでは、結構いい感じに仕上がっているようにも思える。また、どうやらこの活字はカタカナ部分の字幅（縦方向の長さ）が漢字より小さいようだ。そのおかげで、カタカナの字面が小ぶりなのにも関わらず、組み上がりはパラパラとした印象にはなっていない。暇なときに一度、デジタル化資料ではなく実物の方でも見てみたい。附記とここまで書いたあと、もう一度近デジの方をちらほら見ていたら、『印刷局長年報書 第45回』の中にこの活字についての言及があった。大正八年一月四日官報ハ従来二段組ナリシヲ三段組ニ改メ又五号活字ニ代フルニ康煕字典ノ文字ヲ基礎トシテ新鋳シタル九ポイント活字ヲ用ヰタリ……『印刷局長年報書 第45回』印刷局、1920年、p. 25    さらに、『印刷局五十年略史』には次のように書かれている。（というか、この本自体がまるまるこの康煕字典活字で組まれている。上で引いた官報が漢字カタカナ交じりだったのに対し、こちらは漢字ひらがな交じり文。）尚玆に活字鋳造に就いて一言せざる可らざることあり、従来本邦の活字製作方法は先づ黄楊材に手刻したる原字を蝋型に取り、電気装置によりて銅を其凹所に集積せしめ、木材原字と同一の銅字を得て更に電気装置により始めて銅字母を作り、之を母型として活字を鋳造したるのものなり。当局に於ては明治四十五年以来独逸及米国より母型彫刻機四台を購入し、繁雑なる旧式の手続を取らずニッケルと銅との合成金に直接彫刻して母型を得、之に依りて鋳造する事とせり。現在官報印刷に使用する活字の如き此機械によりて鋳造したるものなり。上述の新活字は康煕字典の文字を写真により縮写したるものにして字画正確書体鮮明なる九ポイント活字なり。此新漢字活字を採用すると同時に仮名活字をも改鋳し、漢字に比し十と八との割合に縮め、以て字間の空白を減じ行数の節約を得る事とせり。『印刷局五十年略史』印刷局、1921年、p. 29    八年一月従来二段組なりし官報を三段組に改め新鋳九ポイント活字を使用し、以て大に紙面の節約と印刷の鮮明とを図り、日に月に増大堆積する記載事項の停滞を防ぐを得たり、……同、p. 42    とあり、まとめると結局大正8年（1919年）1月4日の官報から康煕字典活字を使ったこのときの活字のサイズは9ポイントで、のちに他のサイズも製作漢字は方形だが仮名は80％平体。これによって紙面節約ということらしい。近デジすごい。追記「大正8年（1919年）1月4日の官報から康煕字典活字を使った」と書いたが、もう少し前から使われていたらしい。印刷局が康煕字典体活字を使い始めるの、「70年史」の記録と違って大正8年1月4日付官報からじゃなく、大正7年12月27日付「衆議院第41回本会議第1号」からだ https://t.co/6sZgeVcQFp っていう件、判りやすいようにツイートしてなかった https://t.co/MQGISd6XSU ので、自分でも捜すの苦労した。— UCHIDA Akira (@uakira2) January 9, 2019上記スレッドに情報がまとまっている。*1:ママ*2:と勝手にこのエントリでは呼んでいますが、正式名称や通称があったりするんでしょうか？","link":"https://shiromoji.hatenablog.jp/entry/20130727/1374994117","isoDate":"2013-07-27T06:48:37.000Z","dateMiliSeconds":1374907717000,"imageUrl":"http://a0.twimg.com/profile_images/1462059785/twitter_mashabow_icon_73_normal.png","authorName":"mashabow"},{"title":"「TTXによるフォントのぞき基礎」の資料【5/4更新：スライド公開】","content":"\u003cp\u003e\u003ca href=\"http://d.hatena.ne.jp/mashabow/20130426/1366986649\"\u003e5\u0026#x6708;3\u0026#x65E5;\u0026#x306E;\u0026#x52C9;\u0026#x5F37;\u0026#x4F1A;\u003c/a\u003eで発表する「TTXによるフォントのぞき基礎」の資料です。\u003c/p\u003e\n\n\u003cdiv class=\"section\"\u003e\n    \u003ch4\u003eスライド\u003c/h4\u003e\n    \u003cp\u003e勉強会終了後に公開する予定です。\u003cstrong\u003e→ 公開しました。\u003c/strong\u003e（2013-05-04）\u003c/p\u003e\n\n\u003cul\u003e\n\u003cli\u003e\u003ca href=\"http://shiromoji.net/font/mojiben0503/fontnozoki-with-ttx/\"\u003eTTX \u0026#x306B;\u0026#x3088;\u0026#x308B;\u0026#x30D5;\u0026#x30A9;\u0026#x30F3;\u0026#x30C8;\u0026#x306E;\u0026#x305E;\u0026#x304D;\u0026#x57FA;\u0026#x790E; - \u0026#x3057;\u0026#x308D;\u0026#x3082;\u0026#x3058;\u0026#x4F5C;\u0026#x696D;\u0026#x5BA4;\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e\u003cp\u003e勉強会のスライドを少々手直ししてアップロードしました。スペースキーを押すと進みます。Esc キーで俯瞰になります（が、うちのPCでは動作が重いです）。今回は初めて \u003ca href=\"https://github.com/hakimel/reveal.js\"\u003ereveal.js\u003c/a\u003e という\u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/%A5%D5%A5%EC%A1%BC%A5%E0%A5%EF%A1%BC%A5%AF\"\u003eフレームワーク\u003c/a\u003eを使って作成してみました。\u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/Firefox\"\u003eFirefox\u003c/a\u003e で表示確認をしています。\u003c/p\u003e\n\n\u003c/div\u003e\n\u003cdiv class=\"section\"\u003e\n    \u003ch4\u003eツイートまとめ\u003c/h4\u003e\n    \n\u003cul\u003e\n\u003cli\u003e\u003ca href=\"http://togetter.com/li/497859\"\u003e\u0026#x30D5;\u0026#x30A9;\u0026#x30F3;\u0026#x30C8;\u0026#x95A2;\u0026#x4FC2;\u0026#x306E;\u0026#x52C9;\u0026#x5F37;\u0026#x4F1A; #mojiben0503 \u0026#x307E;\u0026#x3068;\u0026#x3081; - Togetter\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/div\u003e\n\u003cdiv class=\"section\"\u003e\n    \u003ch4\u003eTTXをインストールする\u003c/h4\u003e\n    \n\u003cul\u003e\n\u003cli\u003e\u003ca href=\"http://d.hatena.ne.jp/mashabow/20130427/1367046740\"\u003eTTX\u0026#x306E;\u0026#x30A4;\u0026#x30F3;\u0026#x30B9;\u0026#x30C8;\u0026#x30FC;\u0026#x30EB;\u0026#x65B9;\u0026#x6CD5; - \u0026#x3057;\u0026#x308D;\u0026#x3082;\u0026#x3058;\u0026#x30E1;\u0026#x30E2;\u0026#x30E9;\u0026#x30F3;\u0026#x30C0;\u0026#x30E0;\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/div\u003e\n\u003cdiv class=\"section\"\u003e\n    \u003ch4\u003e参加者向けファイル\u003c/h4\u003e\n    \u003cp\u003eノートPC持参で参加される方は、以下の2つのファイルをダウンロード・展開しておいてください。（一応、これらのファイルを入れた\u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/USB%A5%E1%A5%E2%A5%EA\"\u003eUSBメモリ\u003c/a\u003eをわたしの方で用意しておきます。）\u003c/p\u003e\n\n\u003cdiv class=\"section\"\u003e\n    \u003ch5\u003eサンプル用フォントファイル\u003c/h5\u003e\n    \n\u003cul\u003e\n\u003cli\u003e\u003ca href=\"http://shiromoji.net/font/mojiben0503/sample.zip\"\u003ehttp://shiromoji.net/font/mojiben0503/sample.zip\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e\u003cp\u003e\u003ca href=\"http://ossipedia.ipa.go.jp/ipafont/ipafont/download.html\"\u003eIPA\u0026#x660E;\u0026#x671D;\u003c/a\u003e と \u003ca href=\"http://sourceforge.net/projects/sourcesans.adobe/?source=recommended\"\u003eSource Sans Pro\u003c/a\u003e の一部をそのまま再配布しているだけです。\u003c/p\u003e\n\n\u003c/div\u003e\n\u003cdiv class=\"section\"\u003e\n    \u003ch5\u003eOpenType Specification\u003c/h5\u003e\n    \n\u003cul\u003e\n\u003cli\u003e\u003ca href=\"http://www.microsoft.com/typography/otspec/\"\u003eMicrosoft Typography - OpenType Specification\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e\u003cp\u003e\"Download full specification\" から ZIP がダウンロードできます。\u003c/p\u003e\n\n\u003c/div\u003e\n\u003c/div\u003e","contentSnippet":"5月3日の勉強会で発表する「TTXによるフォントのぞき基礎」の資料です。スライド勉強会終了後に公開する予定です。→ 公開しました。（2013-05-04）TTX によるフォントのぞき基礎 - しろもじ作業室勉強会のスライドを少々手直ししてアップロードしました。スペースキーを押すと進みます。Esc キーで俯瞰になります（が、うちのPCでは動作が重いです）。今回は初めて reveal.js というフレームワークを使って作成してみました。Firefox で表示確認をしています。ツイートまとめフォント関係の勉強会 #mojiben0503 まとめ - TogetterTTXをインストールするTTXのインストール方法 - しろもじメモランダム参加者向けファイルノートPC持参で参加される方は、以下の2つのファイルをダウンロード・展開しておいてください。（一応、これらのファイルを入れたUSBメモリをわたしの方で用意しておきます。）サンプル用フォントファイルhttp://shiromoji.net/font/mojiben0503/sample.zipIPA明朝 と Source Sans Pro の一部をそのまま再配布しているだけです。OpenType SpecificationMicrosoft Typography - OpenType Specification\"Download full specification\" から ZIP がダウンロードできます。","link":"https://shiromoji.hatenablog.jp/entry/20130502/1367500832","isoDate":"2013-05-02T13:20:32.000Z","dateMiliSeconds":1367500832000,"imageUrl":"https://cdn.blog.st-hatena.com/images/theme/og-image-1500.png","authorName":"mashabow"},{"title":"TTXのインストール方法","content":"\u003cp\u003eTTXは、TTX/FontTools に含まれている\u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/%A5%B3%A5%DE%A5%F3%A5%C9%A5%E9%A5%A4%A5%F3\"\u003eコマンドライン\u003c/a\u003e\u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/%A5%C4%A1%BC%A5%EB\"\u003eツール\u003c/a\u003eです。この TTX/FontTools は \u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/SourceForge\"\u003eSourceForge\u003c/a\u003e で公開されており、2013年4月現在 v2.3 が最新のバージョンです。\u003c/p\u003e\n\n\u003cul\u003e\n\u003cli\u003e\u003ca href=\"http://sourceforge.net/projects/fonttools/\"\u003ehttp://sourceforge.net/projects/fonttools/\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e\u003cp\u003eこの記事では、TTXのインストール方法を次の3通りに分けて紹介します。\u003c/p\u003e\n\n\u003cul\u003e\n\u003cli\u003e\u003ca href=\"#afdko\"\u003eA. AFDKOでまとめてインストールする\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"#direct\"\u003eB. TTXを直接インストールする\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"#setup\"\u003eC. setup.py でインストールする\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e\u003cp\u003e一長一短ありますが、とりあえず A が無難なような気がします。もっとうまいやり方があるようでしたら、ぜひご教示ください :)\u003c/p\u003e\n\n\u003cdiv class=\"section\"\u003e\n    \u003ch4\u003e\u003ca name=\"afdko\"\u003eA.\u003c/a\u003e AFDKOでまとめてインストールする\u003c/h4\u003e\n    \u003cp\u003eAFDKO (\u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/Adobe\"\u003eAdobe\u003c/a\u003e Font Development Kit for OpenType; 通称あふでこ) は \u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/Adobe\"\u003eAdobe\u003c/a\u003e が提供しているフォント開発用の\u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/%A5%C4%A1%BC%A5%EB\"\u003eツール\u003c/a\u003e群で、業界で広く使われているようです。\u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/Windows\"\u003eWindows\u003c/a\u003e と \u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/Mac\"\u003eMac\u003c/a\u003e に対応しています\u003ca href=\"#f-fef4a6c0\" name=\"fn-fef4a6c0\" title=\"[http://blogs.adobe.com/CCJKType/2012/02/afdko-for-other-platforms.html:title=Linux などに対応する可能性が無いわけではない]ようですが、残念ながら今のところリリースされていません。\"\u003e*1\u003c/a\u003e。\u003c/p\u003e\n\n\u003cul\u003e\n\u003cli\u003e\u003ca href=\"http://www.adobe.com/devnet/opentype/afdko.edu.html\"\u003eAdobe Font Development Kit for OpenType | Adobe Developer Connection\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e\u003cp\u003eTTXはこの中に収録されているため、AFDKOをインストールすればTTXが使えるようになります。AFDKOにはいろいろな\u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/%A5%C4%A1%BC%A5%EB\"\u003eツール\u003c/a\u003eが入っていますし、とりあえずインストールしておいて損はないでしょう\u003ca href=\"#f-5648a567\" name=\"fn-5648a567\" title=\"といいつつわたしはそれほど活用できていませんが……\"\u003e*2\u003c/a\u003e。手間もあまりかかりません。\u003c/p\u003e\n\n\u003cdiv class=\"section\"\u003e\n    \u003ch5\u003eインストール方法\u003c/h5\u003e\n    \n\u003col\u003e\n\u003cli\u003e\u003ca href=\"http://www.adobe.com/devnet/opentype/afdko/eula.html\"\u003e\u0026#x3053;\u0026#x306E;\u0026#x30DA;\u0026#x30FC;\u0026#x30B8;\u0026#x306E; License Agreement\u003c/a\u003e を読み、内容に同意します。\u003c/li\u003e\n\u003cli\u003eページ下部のリンクからZIPをダウンロードします。\u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/Windows\"\u003eWindows\u003c/a\u003e 版は FDK-25-WIN.zip、\u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/Mac\"\u003eMac\u003c/a\u003e 版は FDK-25-\u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/MAC\"\u003eMAC\u003c/a\u003e.zipです。\u003c/li\u003e\n\u003cli\u003eダウンロードしたZIPを展開します。\u003c/li\u003e\n\u003cli\u003e展開してできた FDK/Read_Me_First.html を開き、\u003cq\u003e2. AFDKO Installation Guide\u003c/q\u003e の指示に従ってインストールします。指示の内容を大雑把に要約すると以下のとおりです。\n\u003col\u003e\n\u003cli\u003eFDKフォルダを好きな場所に移動する\u003c/li\u003e\n\u003cli\u003e\u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/%A5%B3%A5%DE%A5%F3%A5%C9%A5%D7%A5%ED%A5%F3%A5%D7%A5%C8\"\u003eコマンドプロンプト\u003c/a\u003eやターミナルから FDK/FinishInstallWindows.cmd あるいは FDK/FinishInstallOSX を実行する\u003c/li\u003e\n\u003cli\u003e（\u003cq\u003eFor installing the AFDKO FontLab macros\u003c/q\u003e の部分は今回は関係ありません）\u003c/li\u003e\n\u003c/ol\u003e\u003c/li\u003e\n\u003c/ol\u003e\u003cp\u003eこれでインストール完了です。ちなみにAFDKOの現在のバージョンは v2.5 Feb 26 2013 change number 60418 で、これをインストールすると TTX v2.3 が入ります。\u003c/p\u003e\n\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"section\"\u003e\n    \u003ch4\u003e\u003ca name=\"direct\"\u003eB.\u003c/a\u003e TTXを直接インストールする\u003c/h4\u003e\n    \n\u003cdiv class=\"section\"\u003e\n    \u003ch5\u003e\u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/Windows\"\u003eWindows\u003c/a\u003e の場合\u003c/h5\u003e\n    \u003cp\u003e\u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/%A5%A4%A5%F3%A5%B9%A5%C8%A1%BC%A5%E9\"\u003eインストーラ\u003c/a\u003eなどで普通に単独インストールできれば楽なのですが、残念なことに公式からは \u003ca href=\"http://sourceforge.net/projects/fonttools/files/2.0b1/\"\u003ev2.0b1\u0026#xFF08;2002\u0026#x5E74;\u0026#x30EA;\u0026#x30EA;\u0026#x30FC;\u0026#x30B9;\u0026#xFF09;\u003c/a\u003eのものしか配布されていません。\u003c/p\u003e\u003cp\u003eTypophile の \u003ca href=\"http://typophile.com/node/67406\"\u003eTTX 2.3 installer?\u003c/a\u003e というスレッドにいろいろと情報が載っていますが、その中で \u003ca href=\"http://typophile.com/node/67406#comment-469074\"\u003ev2.3 \u0026#x306E;ZIP\u0026#x3078;\u0026#x306E;\u0026#x30EA;\u0026#x30F3;\u0026#x30AF;\u0026#x304C;\u0026#x6295;\u0026#x7A3F;\u0026#x3055;\u0026#x308C;\u0026#x3066;\u0026#x3044;\u0026#x307E;\u0026#x3059;\u003c/a\u003e。このZIPを好きな場所に展開し、\u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/%B4%C4%B6%AD%CA%D1%BF%F4\"\u003e環境変数\u003c/a\u003ePATHにそのディレクトリを追加すれば完了です。\u003c/p\u003e\n\n\u003c/div\u003e\n\u003cdiv class=\"section\"\u003e\n    \u003ch5\u003e\u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/Mac\"\u003eMac\u003c/a\u003e の場合\u003c/h5\u003e\n    \u003cp\u003e自宅に \u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/Mac\"\u003eMac\u003c/a\u003e がないのでよく調べていません :(\u003cbr /\u003e\nこちらもバイナリは v2.0b1 のものしか配布されていません。\u003c/p\u003e\n\n\u003c/div\u003e\n\u003cdiv class=\"section\"\u003e\n    \u003ch5\u003eその他 \u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/Linux\"\u003eLinux\u003c/a\u003e など\u003c/h5\u003e\n    \u003cp\u003e\u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/%A5%C7%A5%A3%A5%B9%A5%C8%A5%EA%A5%D3%A5%E5%A1%BC%A5%B7%A5%E7%A5%F3\"\u003eディストリビューション\u003c/a\u003eによってはパッケージが提供されています。例えば \u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/Ubuntu\"\u003eUbuntu\u003c/a\u003e であれば\u003c/p\u003e\n\n\u003cpre\u003e$ sudo apt-get install fonttools\n\u003c/pre\u003e\u003cp\u003eで最新の v2.3 をインストールすることができます。\u003c/p\u003e\n\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"section\"\u003e\n    \u003ch4\u003e\u003ca name=\"setup\"\u003eC.\u003c/a\u003e setup.py でインストールする\u003c/h4\u003e\n    \u003cp\u003eこれが本来のインストール方法ですが、この方法はちょっと面倒な気がします。前提として、\u003ca href=\"http://www.python.org/download/\"\u003ePython 2\u003c/a\u003e と \u003ca href=\"http://www.numpy.org/\"\u003eNumPy\u003c/a\u003e をインストールしておく必要があります。\u003c/p\u003e\u003cp\u003e\u003ca href=\"http://sourceforge.net/projects/fonttools/files/\"\u003eTTX/FontTools \u0026#x306E;\u0026#x914D;\u0026#x5E03;\u0026#x30DA;\u0026#x30FC;\u0026#x30B8;\u003c/a\u003eから fonttools-2.3.tar.gz をダウンロードし、展開します。そして fonttools-2.3 ディレクトリの中に入り、\u003c/p\u003e\n\n\u003cpre\u003e$ (sudo) \u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/python\"\u003epython\u003c/a\u003e setup.py install\n\u003c/pre\u003e\u003cp\u003eなどとすれば良いようです。\u003c/p\u003e\u003cp\u003eこのあと \u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/Windows\"\u003eWindows\u003c/a\u003e の場合、\u003c/p\u003e\n\u003cpre class=\"code lang-dosbatch\" data-lang=\"dosbatch\" data-unlink\u003e@\u003cspan class=\"synIdentifier\"\u003eecho\u003c/span\u003e\u003cspan class=\"synStatement\"\u003e off\u003c/span\u003e\npython C:\\Python27\\Scripts\\ttx \u003cspan class=\"synIdentifier\"\u003e%*\u003c/span\u003e\n\u003c/pre\u003e\u003cp\u003eのような内容のファイルを ttx.bat という名前で作成し、これをパスの通った場所に入れておけばOKです。\u003c/p\u003e\u003cp\u003eまた、\u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/Mac\"\u003eMac\u003c/a\u003e では\u003c/p\u003e\n\n\u003cpre\u003e$ defaults write com.apple.versioner.\u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/python\"\u003epython\u003c/a\u003e Prefer-32-Bit -bool yes\n\u003c/pre\u003e\u003cp\u003eと設定する必要があるかもしれません\u003ca href=\"#f-ece7a60e\" name=\"fn-ece7a60e\" title=\"http://forum.fontlab.com/index.php?topic=7305.0\"\u003e*3\u003c/a\u003e。\u003c/p\u003e\u003cbr /\u003e\n\u003cp\u003e以上、インストール方法を3通りに分けて紹介しました。てきとうなフォントファイル \u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/hoge\"\u003ehoge\u003c/a\u003e.ttf\u003ca href=\"#f-27f61b08\" name=\"fn-27f61b08\" title=\"和文フォントなど、ファイルサイズが大きいものだとちょっと時間がかかります。なお、.otf でもかまいません。\"\u003e*4\u003c/a\u003e に対して\u003c/p\u003e\n\u003cpre class=\"code lang-sh\" data-lang=\"sh\" data-unlink\u003e$ ttx hoge.ttf\n\u003c/pre\u003e\u003cp\u003eとしたときに \u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/hoge\"\u003ehoge\u003c/a\u003e.ttx が生成されるようであれば、TTXは正常にインストールされています。\u003c/p\u003e\u003cp\u003eTTXの使い方については、\u003ca href=\"http://d.hatena.ne.jp/mashabow/20130426/1366986649\"\u003e5\u0026#x6708;3\u0026#x65E5;\u0026#x306E;\u0026#x52C9;\u0026#x5F37;\u0026#x4F1A;\u003c/a\u003eで紹介する予定です。\u003c/p\u003e\u003cp\u003e2013-05-04 追記：勉強会で使ったスライドをアップロードしました。\u003c/p\u003e\n\n\u003cul\u003e\n\u003cli\u003e\u003ca href=\"http://d.hatena.ne.jp/mashabow/20130502/1367500832\"\u003e\u0026#x300C;TTX\u0026#x306B;\u0026#x3088;\u0026#x308B;\u0026#x30D5;\u0026#x30A9;\u0026#x30F3;\u0026#x30C8;\u0026#x306E;\u0026#x305E;\u0026#x304D;\u0026#x57FA;\u0026#x790E;\u0026#x300D;\u0026#x306E;\u0026#x8CC7;\u0026#x6599; - \u0026#x3057;\u0026#x308D;\u0026#x3082;\u0026#x3058;\u0026#x30E1;\u0026#x30E2;\u0026#x30E9;\u0026#x30F3;\u0026#x30C0;\u0026#x30E0;\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/div\u003e\u003cdiv class=\"footnote\"\u003e\n\u003cp class=\"footnote\"\u003e\u003ca href=\"#fn-fef4a6c0\" name=\"f-fef4a6c0\" class=\"footnote-number\"\u003e*1\u003c/a\u003e\u003cspan class=\"footnote-delimiter\"\u003e:\u003c/span\u003e\u003cspan class=\"footnote-text\"\u003e\u003ca href=\"http://blogs.adobe.com/CCJKType/2012/02/afdko-for-other-platforms.html\"\u003eLinux \u0026#x306A;\u0026#x3069;\u0026#x306B;\u0026#x5BFE;\u0026#x5FDC;\u0026#x3059;\u0026#x308B;\u0026#x53EF;\u0026#x80FD;\u0026#x6027;\u0026#x304C;\u0026#x7121;\u0026#x3044;\u0026#x308F;\u0026#x3051;\u0026#x3067;\u0026#x306F;\u0026#x306A;\u0026#x3044;\u003c/a\u003eようですが、残念ながら今のところリリースされていません。\u003c/span\u003e\u003c/p\u003e\n\u003cp class=\"footnote\"\u003e\u003ca href=\"#fn-5648a567\" name=\"f-5648a567\" class=\"footnote-number\"\u003e*2\u003c/a\u003e\u003cspan class=\"footnote-delimiter\"\u003e:\u003c/span\u003e\u003cspan class=\"footnote-text\"\u003eといいつつわたしはそれほど活用できていませんが……\u003c/span\u003e\u003c/p\u003e\n\u003cp class=\"footnote\"\u003e\u003ca href=\"#fn-ece7a60e\" name=\"f-ece7a60e\" class=\"footnote-number\"\u003e*3\u003c/a\u003e\u003cspan class=\"footnote-delimiter\"\u003e:\u003c/span\u003e\u003cspan class=\"footnote-text\"\u003e\u003ca href=\"http://forum.fontlab.com/index.php?topic=7305.0\"\u003ehttp://forum.fontlab.com/index.php?topic=7305.0\u003c/a\u003e\u003c/span\u003e\u003c/p\u003e\n\u003cp class=\"footnote\"\u003e\u003ca href=\"#fn-27f61b08\" name=\"f-27f61b08\" class=\"footnote-number\"\u003e*4\u003c/a\u003e\u003cspan class=\"footnote-delimiter\"\u003e:\u003c/span\u003e\u003cspan class=\"footnote-text\"\u003e和文フォントなど、ファイルサイズが大きいものだとちょっと時間がかかります。なお、.otf でもかまいません。\u003c/span\u003e\u003c/p\u003e\n\u003c/div\u003e","contentSnippet":"TTXは、TTX/FontTools に含まれているコマンドラインツールです。この TTX/FontTools は SourceForge で公開されており、2013年4月現在 v2.3 が最新のバージョンです。http://sourceforge.net/projects/fonttools/この記事では、TTXのインストール方法を次の3通りに分けて紹介します。A. AFDKOでまとめてインストールするB. TTXを直接インストールするC. setup.py でインストールする一長一短ありますが、とりあえず A が無難なような気がします。もっとうまいやり方があるようでしたら、ぜひご教示ください :)A. AFDKOでまとめてインストールするAFDKO (Adobe Font Development Kit for OpenType; 通称あふでこ) は Adobe が提供しているフォント開発用のツール群で、業界で広く使われているようです。Windows と Mac に対応しています*1。Adobe Font Development Kit for OpenType | Adobe Developer ConnectionTTXはこの中に収録されているため、AFDKOをインストールすればTTXが使えるようになります。AFDKOにはいろいろなツールが入っていますし、とりあえずインストールしておいて損はないでしょう*2。手間もあまりかかりません。インストール方法このページの License Agreement を読み、内容に同意します。ページ下部のリンクからZIPをダウンロードします。Windows 版は FDK-25-WIN.zip、Mac 版は FDK-25-MAC.zipです。ダウンロードしたZIPを展開します。展開してできた FDK/Read_Me_First.html を開き、2. AFDKO Installation Guide の指示に従ってインストールします。指示の内容を大雑把に要約すると以下のとおりです。FDKフォルダを好きな場所に移動するコマンドプロンプトやターミナルから FDK/FinishInstallWindows.cmd あるいは FDK/FinishInstallOSX を実行する（For installing the AFDKO FontLab macros の部分は今回は関係ありません）これでインストール完了です。ちなみにAFDKOの現在のバージョンは v2.5 Feb 26 2013 change number 60418 で、これをインストールすると TTX v2.3 が入ります。B. TTXを直接インストールするWindows の場合インストーラなどで普通に単独インストールできれば楽なのですが、残念なことに公式からは v2.0b1（2002年リリース）のものしか配布されていません。Typophile の TTX 2.3 installer? というスレッドにいろいろと情報が載っていますが、その中で v2.3 のZIPへのリンクが投稿されています。このZIPを好きな場所に展開し、環境変数PATHにそのディレクトリを追加すれば完了です。Mac の場合自宅に Mac がないのでよく調べていません :(その他 Linux などディストリビューションによってはパッケージが提供されています。例えば Ubuntu であれば$ sudo apt-get install fonttoolsで最新の v2.3 をインストールすることができます。C. setup.py でインストールするこれが本来のインストール方法ですが、この方法はちょっと面倒な気がします。前提として、Python 2 と NumPy をインストールしておく必要があります。TTX/FontTools の配布ページから fonttools-2.3.tar.gz をダウンロードし、展開します。そして fonttools-2.3 ディレクトリの中に入り、$ (sudo) python setup.py installなどとすれば良いようです。このあと Windows の場合、@echo offpython C:\\Python27\\Scripts\\ttx %*のような内容のファイルを ttx.bat という名前で作成し、これをパスの通った場所に入れておけばOKです。また、Mac では$ defaults write com.apple.versioner.python Prefer-32-Bit -bool yesと設定する必要があるかもしれません*3。以上、インストール方法を3通りに分けて紹介しました。てきとうなフォントファイル hoge.ttf*4 に対して$ ttx hoge.ttfとしたときに hoge.ttx が生成されるようであれば、TTXは正常にインストールされています。TTXの使い方については、5月3日の勉強会で紹介する予定です。2013-05-04 追記：勉強会で使ったスライドをアップロードしました。「TTXによるフォントのぞき基礎」の資料 - しろもじメモランダム*1:Linux などに対応する可能性が無いわけではないようですが、残念ながら今のところリリースされていません。*2:といいつつわたしはそれほど活用できていませんが……*3:http://forum.fontlab.com/index.php?topic=7305.0*4:和文フォントなど、ファイルサイズが大きいものだとちょっと時間がかかります。なお、.otf でもかまいません。","link":"https://shiromoji.hatenablog.jp/entry/20130427/1367046740","isoDate":"2013-04-27T07:12:20.000Z","dateMiliSeconds":1367046740000,"imageUrl":"https://cdn.blog.st-hatena.com/images/theme/og-image-1500.png","authorName":"mashabow"},{"title":"5月3日にフォント関係の勉強会やります","content":"\u003cp\u003e2013-05-06 追記：今回の関連ツイートをまとめました。\u003c/p\u003e\n\n\u003cul\u003e\n\u003cli\u003e\u003ca href=\"http://togetter.com/li/497859\"\u003e\u0026#x30D5;\u0026#x30A9;\u0026#x30F3;\u0026#x30C8;\u0026#x95A2;\u0026#x4FC2;\u0026#x306E;\u0026#x52C9;\u0026#x5F37;\u0026#x4F1A; #mojiben0503 \u0026#x307E;\u0026#x3068;\u0026#x3081; - Togetter\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e\u003cp\u003e\u003cbr /\u003e\n読者・フォロワー各位：\u003c/p\u003e\u003cp\u003e突然ですが、5月3日にちょっとした勉強会をやってみようかと思います。\u003c/p\u003e\n\n\u003cdiv class=\"section\"\u003e\n    \u003ch4\u003e日時\u003c/h4\u003e\n    \u003cp\u003e5月3日（金・祝） 13:00〜17:00\u003c/p\u003e\n\n\u003c/div\u003e\n\u003cdiv class=\"section\"\u003e\n    \u003ch4\u003e場所\u003c/h4\u003e\n    \u003cp\u003e\u003ca href=\"http://www.toshima-mirai.jp/center/e_komagome/#nav_access\"\u003e\u0026#x99D2;\u0026#x8FBC;\u0026#x5730;\u0026#x57DF;\u0026#x6587;\u0026#x5316;\u0026#x5275;\u0026#x9020;\u0026#x9928;\u003c/a\u003e　4階・第4会議室\u003cbr\u003e山手線\u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/%B6%F0%B9%FE%B1%D8\"\u003e駒込駅\u003c/a\u003e北口より徒歩2分\u003c/p\u003e\n\n\u003c/div\u003e\n\u003cdiv class=\"section\"\u003e\n    \u003ch4\u003e内容\u003c/h4\u003e\n    \n\u003cdiv class=\"section\"\u003e\n    \u003ch5\u003e1. TTXによるフォントのぞき基礎\u003c/h5\u003e\n    \u003cp\u003e\u003ca href=\"http://sourceforge.net/projects/fonttools/\"\u003eTTX\u003c/a\u003eの使い方を紹介し、OpenType の基本的な部分を簡単に説明します。「TTX使ったことない」「OpenType の中身に興味はあるけどどこから手をつけていいのかよく分からん」というような初心者を主なターゲットにします。30分程度？\u003c/p\u003e\u003cp\u003e下記補足も参照してください。\u003c/p\u003e\n\n\u003c/div\u003e\n\u003cdiv class=\"section\"\u003e\n    \u003ch5\u003e2.『ヘルベチカ 世界を魅了する書体』鑑賞\u003c/h5\u003e\n    \u003cp\u003eみんなでDVDみるだけです。2007年イギリス制作のドキュメンタリーで、\u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/%BE%AE%CE%D3%BE%CF\"\u003e小林章\u003c/a\u003eさん監修の\u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/%C6%FC%CB%DC%B8%EC%BB%FA%CB%EB\"\u003e日本語字幕\u003c/a\u003eがついています。本編80分＋特典95分。\u003c/p\u003e\n\n\u003cul\u003e\n\u003cli\u003e\u003ca href=\"http://helveticafilm.com/\"\u003ehttp://helveticafilm.com/\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"section\"\u003e\n    \u003ch4\u003e申し込み方法\u003c/h4\u003e\n    \u003cp\u003eタイトルを「5/3参加希望」として、mashabow\u003cあっと\u003eshiromoji.net へメールをお送りください。定員は10人弱で、先着順です。前日（5月2日）の20時に一旦締め切ります。\u003c/p\u003e\u003cp\u003e申し込みメールには、遅くとも翌日にはこちらから返信をします。万一返信のない場合には、お手数ですがお問い合わせください。\u003c/p\u003e\n\n\u003c/div\u003e\n\u003cdiv class=\"section\"\u003e\n    \u003ch4\u003e\u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/%A5%CF%A5%C3%A5%B7%A5%E5%A5%BF%A5%B0\"\u003eハッシュタグ\u003c/a\u003e\u003c/h4\u003e\n    \n\u003cul\u003e\n\u003cli\u003e\u003ca href=\"https://twitter.com/search/realtime?q=%23mojiben0503\u0026src=hash\"\u003e#mojiben0503\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/div\u003e\n\u003cdiv class=\"section\"\u003e\n    \u003ch4\u003e問い合わせ先\u003c/h4\u003e\n    \n\u003cul\u003e\n\u003cli\u003e\u003cspan data-unlink\u003eTwitter\u003c/span\u003e: \u003ca href=\"https://twitter.com/mashabow\"\u003e@mashabow\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003eメール: mashabow\u003cあっと\u003eshiromoji.net\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/div\u003e\n\u003cdiv class=\"section\"\u003e\n    \u003ch4\u003e補足：TTXによるフォントのぞき基礎 について\u003c/h4\u003e\n    \u003cp\u003eこのあたり、興味ない方にとっては\u003cem\u003e非常につまらない内容\u003c/em\u003eだと思うので、そういう場合は気にせず「ヘルベチカ〜」だけご参加ください。\u003c/p\u003e\u003cp\u003e参加される方は、TTXをインストールしたノートPCの持参をおすすめします。インストール方法については、下の記事にまとめてみました。\u003c/p\u003e\n\n\u003cul\u003e\n\u003cli\u003e\u003ca href=\"http://d.hatena.ne.jp/mashabow/20130427/1367046740\"\u003eTTX\u0026#x306E;\u0026#x30A4;\u0026#x30F3;\u0026#x30B9;\u0026#x30C8;\u0026#x30FC;\u0026#x30EB;\u0026#x65B9;\u0026#x6CD5; - \u0026#x3057;\u0026#x308D;\u0026#x3082;\u0026#x3058;\u0026#x30E1;\u0026#x30E2;\u0026#x30E9;\u0026#x30F3;\u0026#x30C0;\u0026#x30E0;\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e\u003cp\u003eなお、残念ながら会場には有線／\u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/%CC%B5%C0%FELAN\"\u003e無線LAN\u003c/a\u003eの設備はありません。\u003c/p\u003e\u003cp\u003e2013-05-04 追記：発表に使ったスライドを公開しました。\u003c/p\u003e\n\n\u003cul\u003e\n\u003cli\u003e\u003ca href=\"http://d.hatena.ne.jp/mashabow/20130502/1367500832\"\u003e\u0026#x300C;TTX\u0026#x306B;\u0026#x3088;\u0026#x308B;\u0026#x30D5;\u0026#x30A9;\u0026#x30F3;\u0026#x30C8;\u0026#x306E;\u0026#x305E;\u0026#x304D;\u0026#x57FA;\u0026#x790E;\u0026#x300D;\u0026#x306E;\u0026#x8CC7;\u0026#x6599; - \u0026#x3057;\u0026#x308D;\u0026#x3082;\u0026#x3058;\u0026#x30E1;\u0026#x30E2;\u0026#x30E9;\u0026#x30F3;\u0026#x30C0;\u0026#x30E0;\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e\u003cp\u003e\u003cbr /\u003e\nというわけで、参加お待ちしています。\u003c/p\u003e\u003cp\u003e以前から「若い人が主体になって文字関係のゆるい勉強会みたいなのできないかなー」と考えてい（ながら行動に移していなかっ）たんですが、今回はそのお試し版みたいな位置づけになります。気軽に顔を出してもらえれば幸いです。\u003c/p\u003e\n\n\u003c/div\u003e","contentSnippet":"2013-05-06 追記：今回の関連ツイートをまとめました。フォント関係の勉強会 #mojiben0503 まとめ - Togetter突然ですが、5月3日にちょっとした勉強会をやってみようかと思います。日時5月3日（金・祝） 13:00〜17:00場所駒込地域文化創造館　4階・第4会議室山手線駒込駅北口より徒歩2分内容1. TTXによるフォントのぞき基礎TTXの使い方を紹介し、OpenType の基本的な部分を簡単に説明します。「TTX使ったことない」「OpenType の中身に興味はあるけどどこから手をつけていいのかよく分からん」というような初心者を主なターゲットにします。30分程度？下記補足も参照してください。2.『ヘルベチカ 世界を魅了する書体』鑑賞みんなでDVDみるだけです。2007年イギリス制作のドキュメンタリーで、小林章さん監修の日本語字幕がついています。本編80分＋特典95分。http://helveticafilm.com/申し込み方法タイトルを「5/3参加希望」として、mashabowshiromoji.net へメールをお送りください。定員は10人弱で、先着順です。前日（5月2日）の20時に一旦締め切ります。申し込みメールには、遅くとも翌日にはこちらから返信をします。万一返信のない場合には、お手数ですがお問い合わせください。ハッシュタグ#mojiben0503問い合わせ先Twitter: @mashabowメール: mashabowshiromoji.net補足：TTXによるフォントのぞき基礎 についてこのあたり、興味ない方にとっては非常につまらない内容だと思うので、そういう場合は気にせず「ヘルベチカ〜」だけご参加ください。参加される方は、TTXをインストールしたノートPCの持参をおすすめします。インストール方法については、下の記事にまとめてみました。TTXのインストール方法 - しろもじメモランダムなお、残念ながら会場には有線／無線LANの設備はありません。2013-05-04 追記：発表に使ったスライドを公開しました。「TTXによるフォントのぞき基礎」の資料 - しろもじメモランダム以前から「若い人が主体になって文字関係のゆるい勉強会みたいなのできないかなー」と考えてい（ながら行動に移していなかっ）たんですが、今回はそのお試し版みたいな位置づけになります。気軽に顔を出してもらえれば幸いです。","link":"https://shiromoji.hatenablog.jp/entry/20130426/1366986649","isoDate":"2013-04-26T14:30:49.000Z","dateMiliSeconds":1366986649000,"imageUrl":"https://cdn.blog.st-hatena.com/images/theme/og-image-1500.png","authorName":"mashabow"},{"title":" PingMag復刊らしいのでアーカイブから文字関係の記事を10本ほど","content":"\n\u003cul\u003e\n\u003cli\u003e\u003ca href=\"http://pingmag.jp/jp/2013/03/18/pingmag-is-back/\"\u003ePingMag \u0026#x5FA9;\u0026#x520A;\u0026#xFF01; | PingMag : \u0026#x65E5;\u0026#x672C;\u0026#x767A;\u0026#x3000;\u0026#x30A2;\u0026#x30FC;\u0026#x30C8;\u0026#x3001;\u0026#x30C7;\u0026#x30B6;\u0026#x30A4;\u0026#x30F3;\u0026#x3001;\u0026#x304F;\u0026#x3089;\u0026#x3057;\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e\u003cp\u003e\u003ca href=\"http://pingmag.jp/jp/2008/12/31/important-notice/\"\u003e2008\u0026#x5E74;\u0026#x3044;\u0026#x3063;\u0026#x3071;\u0026#x3044;\u0026#x3067;\u0026#x4F11;\u0026#x520A;\u003c/a\u003eとなっていた \u003ca href=\"http://pingmag.jp/jp/\"\u003ePingMag\u003c/a\u003e が復活したようです。\u003c/p\u003e\u003cp\u003eおぉ、なつかしーと思って過去記事をちょっと漁っていたんですが、せっかくなのでここに文字関係の記事を10本ピックアップしておきます。\u003c/p\u003e\n\n\u003col\u003e\n\u003cli\u003e\u003ca href=\"http://pingmag.jp/jp/2006/03/03/handwritten-japanese-fonts/\"\u003e\u0026#x66F8;\u0026#x304D;\u0026#x6587;\u0026#x5B57;\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"http://pingmag.jp/jp/2006/03/24/akira-kobayashi-transcending-typographic-boundaries/\"\u003e\u0026#x5C0F;\u0026#x6797; \u0026#x7AE0;\u0026#xFF1A;\u0026#x30BF;\u0026#x30A4;\u0026#x30DD;\u0026#x30B0;\u0026#x30E9;\u0026#x30D5;\u0026#x30A3;\u0026#x30FC;\u0026#x306E;\u0026#x5883;\u0026#x754C;\u0026#x3092;\u0026#x8D85;\u0026#x3048;\u0026#x3066;\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"http://pingmag.jp/jp/2006/06/30/shock-of-the-neue-graffiti-fonts-by-graffiti-writers/\"\u003e\u0026#x30B0;\u0026#x30E9;\u0026#x30D5;\u0026#x30A3;\u0026#x30C6;\u0026#x30A3;\u0026#x30FB;\u0026#x30E9;\u0026#x30A4;\u0026#x30BF;\u0026#x30FC;\u0026#x306B;\u0026#x3088;\u0026#x308B;\u0026#x30B0;\u0026#x30E9;\u0026#x30D5;\u0026#x30A3;\u0026#x30C6;\u0026#x30A3;\u0026#x30FB;\u0026#x30D5;\u0026#x30A9;\u0026#x30F3;\u0026#x30C8;\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"http://pingmag.jp/jp/2006/07/03/dry-cleaning-typography/\"\u003e\u0026#x30AF;\u0026#x30EA;\u0026#x30FC;\u0026#x30CB;\u0026#x30F3;\u0026#x30B0;\u0026#x5C4B;\u0026#x3055;\u0026#x3093;\u0026#x306E;\u0026#x30BF;\u0026#x30A4;\u0026#x30DD;\u0026#x30B0;\u0026#x30E9;\u0026#x30D5;\u0026#x30A3;\u0026#x30FC;\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"http://pingmag.jp/jp/2006/09/27/handmade-balinese-typography/\"\u003e\u0026#x30D0;\u0026#x30EA;\u0026#x306E;\u0026#x624B;\u0026#x63CF;\u0026#x304D;\u0026#x30BF;\u0026#x30A4;\u0026#x30DD;\u0026#x30B0;\u0026#x30E9;\u0026#x30D5;\u0026#x30A3;\u0026#x30FC;\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"http://pingmag.jp/jp/2006/12/11/iranian-typography-now/\"\u003e\u0026#x30A4;\u0026#x30E9;\u0026#x30CB;\u0026#x30A2;\u0026#x30F3;\u0026#x30FB;\u0026#x30BF;\u0026#x30A4;\u0026#x30DD;\u0026#x30B0;\u0026#x30E9;\u0026#x30D5;\u0026#x30A3;\u0026#x30FC;\u0026#x306E;\u0026#x4ECA;\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"http://pingmag.jp/jp/2007/04/20/dainippon-type-organization/\"\u003e\u0026#x6587;\u0026#x5B57;\u0026#x306E;\u0026#x9054;\u0026#x4EBA;\u0026#x3001;\u0026#x5927;\u0026#x65E5;\u0026#x672C;\u0026#x30BF;\u0026#x30A4;\u0026#x30DD;\u0026#x7D44;\u0026#x5408;\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"http://pingmag.jp/jp/2007/08/30/gaffer-tape-guide/\"\u003e\u0026#x30AC;\u0026#x30E0;\u0026#x30C6;\u0026#x30FC;\u0026#x30D7;\u0026#x306E;\u0026#x9053;\u0026#x6848;\u0026#x5185;\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"http://pingmag.jp/jp/2007/10/05/veb-typoart-the-east-german-type-betriebsstatte/\"\u003eVEB\u0026#x30BF;\u0026#x30A4;\u0026#x30DD;\u0026#x30A2;\u0026#x30FC;\u0026#x30C8;\u0026#xFF1A;\u0026#x6771;\u0026#x30C9;\u0026#x30A4;\u0026#x30C4;\u0026#x306E;\u0026#x6D3B;\u0026#x5B57;\u0026#x92F3;\u0026#x9020;\u0026#x6240;\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"http://pingmag.jp/jp/2008/05/01/bunshi/\"\u003e\u0026#x4F1D;\u0026#x7D71;\u0026#x3092;\u0026#x5207;\u0026#x308A;\u0026#x958B;\u0026#x3044;\u0026#x305F;\u0026#x6587;\u0026#x5FD7;\u0026#x6D41;\u0026#x6C5F;\u0026#x6238;\u0026#x6587;\u0026#x5B57;\u003c/a\u003e\u003c/li\u003e\n\u003c/ol\u003e\u003cp\u003e昔の記事ということで画像が粗かったりするのは残念ですが、おもしろい記事がいろいろとあります。文字以外にも。おすすめ。\u003c/p\u003e\n","contentSnippet":"PingMag 復刊！ | PingMag : 日本発　アート、デザイン、くらし2008年いっぱいで休刊となっていた PingMag が復活したようです。おぉ、なつかしーと思って過去記事をちょっと漁っていたんですが、せっかくなのでここに文字関係の記事を10本ピックアップしておきます。書き文字小林 章：タイポグラフィーの境界を超えてグラフィティ・ライターによるグラフィティ・フォントクリーニング屋さんのタイポグラフィーバリの手描きタイポグラフィーイラニアン・タイポグラフィーの今文字の達人、大日本タイポ組合ガムテープの道案内VEBタイポアート：東ドイツの活字鋳造所伝統を切り開いた文志流江戸文字昔の記事ということで画像が粗かったりするのは残念ですが、おもしろい記事がいろいろとあります。文字以外にも。おすすめ。","link":"https://shiromoji.hatenablog.jp/entry/20130318/1363622383","isoDate":"2013-03-17T15:59:43.000Z","dateMiliSeconds":1363535983000,"imageUrl":"https://cdn.blog.st-hatena.com/images/theme/og-image-1500.png","authorName":"mashabow"},{"title":"「Windows 8 で変わる文字 - 異体字と Unicode IVS」雑感","content":"\u003cp\u003e\u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/Microsoft\"\u003eMicrosoft\u003c/a\u003e の\u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/%A5%BB%A5%DF\"\u003eセミ\u003c/a\u003eナーに行ってきた。\u003c/p\u003e\n\n\u003cul\u003e\n\u003cli\u003e\u003ca href=\"http://www.microsoft.com/ja-jp/mic/seminar/interop_unicode.aspx\"\u003e\u0026#x6587;\u0026#x5B57;\u0026#x30B3;\u0026#x30FC;\u0026#x30C9;\u0026#x3068;\u0026#x7570;\u0026#x4F53;\u0026#x5B57;\u0026#x3068; Unicode IVS \u0026#x301C; \u0026#x60C5;\u0026#x5831;\u0026#x30B7;\u0026#x30B9;\u0026#x30C6;\u0026#x30E0;\u0026#x306B;\u0026#x304A;\u0026#x3051;\u0026#x308B;\u0026#x65E5;\u0026#x672C;\u0026#x8A9E;\u0026#x51E6;\u0026#x7406; \u0026#x301C; | \u0026#x30B9;\u0026#x30AD;\u0026#x30EB;\u0026#x30A2;\u0026#x30C3;\u0026#x30D7; \u0026#x30AB;\u0026#x30EA;\u0026#x30AD;\u0026#x30E5;\u0026#x30E9;\u0026#x30E0; - \u0026#x30DE;\u0026#x30A4;\u0026#x30AF;\u0026#x30ED;\u0026#x30BD;\u0026#x30D5;\u0026#x30C8; \u0026#x30A4;\u0026#x30CE;\u0026#x30D9;\u0026#x30FC;\u0026#x30B7;\u0026#x30E7;\u0026#x30F3; \u0026#x30BB;\u0026#x30F3;\u0026#x30BF;\u0026#x30FC;\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e\u003cp\u003e目新しい情報はあまりなかったが、イベントレポート書いて的な圧力を \u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/Twitter\"\u003eTwitter\u003c/a\u003e 上で受けてしまったので、ここに雑感を書いてお茶を濁したいと思う。\u003c/p\u003e\u003cp\u003e今回の内容は\u003c/p\u003e\n\n\u003cul\u003e\n\u003cli\u003e前半：これまでの\u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/%CA%B8%BB%FA%A5%B3%A1%BC%A5%C9\"\u003e文字コード\u003c/a\u003e・漢字施策の変遷に関する、ざっくりとした説明\u003c/li\u003e\n\u003cli\u003e後半：IVS自体と \u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/Windows\"\u003eWindows\u003c/a\u003e 上におけるIVS対応についての、ざっくりとした説明\u003c/li\u003e\n\u003c/ul\u003e\u003cp\u003eという感じだった。幅広い内容をたったの2時間で扱わなければならないので、どうしてもざっくりになってしまう。ある程度の基礎知識がある人であれば、「あーそうだったよね」と自分の頭の中を整理しつつ、まとめ・おさらい的な感覚で聞けると思うが、逆にまったくの初心者がこの2時間だけで理解するのは難しいと思う。\u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/%CA%B8%BB%FA%A5%B3%A1%BC%A5%C9\"\u003e文字コード\u003c/a\u003eマニヤ(笑)な人は「ここの説明が不十分」とか「これはこう説明した方が…」とかツッコみながら聞いていたのかもしれない。\u003c/p\u003e\u003cp\u003e個人的に興味があったのは、\u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/MS-DOS\"\u003eMS-DOS\u003c/a\u003e/\u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/Windows\"\u003eWindows\u003c/a\u003e はこれまでどのように対応してきたかという点。Shift JIS の誕生からIVS対応まで、今回の\u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/%A5%BB%A5%DF\"\u003eセミ\u003c/a\u003eナーでも各所で触れられていた。ただ、そのまわり（＋裏？）には語り尽くせないぐらいのいろいろなエピソードがあると思うので、そのへんを何かの機会にまとめて教えてくれたらおもしろいんだけどなー、と感じる。\u003c/p\u003e\u003cp\u003eWindow 8 上の\u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/IME\"\u003eIME\u003c/a\u003eにおけるIVS対応については、\u003ca href=\"http://d.hatena.ne.jp/mashabow/20120302/1330712411\"\u003eConsumer Preview \u0026#x7248;\u0026#x306E;\u0026#x3068;\u0026#x304D;\u003c/a\u003eと同じくデフォルトではオフ（IVS入りの候補は出てこない）になっている。「頻繁に使用される名前、地名はIVSを含む単語として\u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/IME\"\u003eIME\u003c/a\u003eの辞書に搭載」\u003ca href=\"#f-2904b3b2\" name=\"fn-2904b3b2\" title=\"配布資料 p. 40\"\u003e*1\u003c/a\u003eしてあるとのことで、設定をオン\u003ca href=\"#f-254c750f\" name=\"fn-254c750f\" title=\"「変換文字制限をしない」\"\u003e*2\u003c/a\u003eにして、例えば\u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/%A1%D6%A4%AF%A4%BA%A1%D7\"\u003e「くず」\u003c/a\u003eを変換すると、\u003c/p\u003e\n\n\u003cul\u003e\n\u003cli\u003e葛 [U+845B]：\u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/Windows%20Vista\"\u003eWindows Vista\u003c/a\u003e 以降のフォントでは\u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/JIS2004\"\u003eJIS2004\u003c/a\u003e字形\u003c/li\u003e\n\u003cli\u003e葛\u0026#xE0100; [U+845B U+E0100]：\u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/Adobe\"\u003eAdobe\u003c/a\u003e-Japan1 コレクション収録のJIS90字形\u003c/li\u003e\n\u003c/ul\u003e\u003cp\u003eの両方が候補に出てくる。完璧を期すのであれば、これに加えて\u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/JIS2004\"\u003eJIS2004\u003c/a\u003e字形を明示的に指定する\u003c/p\u003e\n\n\u003cul\u003e\n\u003cli\u003e葛\u0026#xE0101; [U+845B U+E0101]：\u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/Adobe\"\u003eAdobe\u003c/a\u003e-Japan1 コレクション収録の\u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/JIS2004\"\u003eJIS2004\u003c/a\u003e字形\u003c/li\u003e\n\u003c/ul\u003e\u003cp\u003eも候補に出してほしいところだが、\u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/MS-IME\"\u003eMS-IME\u003c/a\u003eの辞書ではそうはなっていない。\u003c/p\u003e\u003cp\u003eちなみに、「いばら」を変換すると\u003c/p\u003e\n\n\u003cul\u003e\n\u003cli\u003e茨 [U+8328]\u003c/li\u003e\n\u003cli\u003e茨\u0026#xE0100 [U+8328 U+E0100]\u003ca href=\"#f-76366657\" name=\"fn-76366657\" title=\"変換候補の「単漢字…」の中にある。\"\u003e*3\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e\u003cp\u003eの両者が出てくるが、「いばらき」では\u003c/p\u003e\n\n\u003cul\u003e\n\u003cli\u003e茨城 [U+8328 U+57CE] \u003c/li\u003e\n\u003c/ul\u003e\u003cp\u003eだけであって、IVSを使ったJIS90字形の\u003c/p\u003e\n\n\u003cul\u003e\n\u003cli\u003e茨\u0026#xE0100城 [U+8328 U+E0100 U+57CE] \u003c/li\u003e\n\u003c/ul\u003e\u003cp\u003eは出てこない。これについては、「\u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/%B0%F1%BE%EB%B8%A9\"\u003e茨城県\u003c/a\u003eなどは\u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/JIS2004\"\u003eJIS2004\u003c/a\u003e字形を使っているので、JIS90字形は辞書に入れていない」という、わかるようなわからないような説明があった。\u003c/p\u003e\u003cp\u003eIVS/IVDのコレクションの違いについてほとんど触れられておらず、これはどうなんだろう…という感もある。ただ普通のアプリケーションにとってみれば、\u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/Adobe\"\u003eAdobe\u003c/a\u003e-Japan1 であれ Hanyo-Denshi であれ、どちらもIVSとしての扱い方に差はないので、ここらへんのややこしい話にあまり深入りする必要はないかもしれない。\u003c/p\u003e\u003cp\u003eなお、『\u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/Unicode\"\u003eUnicode\u003c/a\u003e IVS/IVD入門』という本が先日発売されたが、今日の講師の方は「届いたばかりでまだ詳しく読んでいない」とおっしゃっていた。\u003c/p\u003e\n\n\u003cul\u003e\n\u003cli\u003e\u003ca href=\"http://ec.nikkeibp.co.jp/item/books/P94830.html\"\u003e\u0026#x65E5;\u0026#x7D4C;BP\u0026#x66F8;\u0026#x5E97;\u0026#xFF5C;\u0026#x5546;\u0026#x54C1;\u0026#x8A73;\u0026#x7D30;\u0026#x3000;-\u0026#x3000;Unicode IVS/IVD\u0026#x5165;\u0026#x9580;\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e\u003cp\u003e\u003cdiv class=\"hatena-asin-detail\"\u003e\u003ca href=\"http://www.amazon.co.jp/exec/obidos/ASIN/4822294838/msb2-22/\"\u003e\u003cimg src=\"https://images-fe.ssl-images-amazon.com/images/I/51ZrcRm4-xL._SL160_.jpg\" class=\"hatena-asin-detail-image\" alt=\"Unicode IVS/IVD入門\" title=\"Unicode IVS/IVD入門\"\u003e\u003c/a\u003e\u003cdiv class=\"hatena-asin-detail-info\"\u003e\u003cp class=\"hatena-asin-detail-title\"\u003e\u003ca href=\"http://www.amazon.co.jp/exec/obidos/ASIN/4822294838/msb2-22/\"\u003eUnicode IVS/IVD入門\u003c/a\u003e\u003c/p\u003e\u003cul\u003e\u003cli\u003e\u003cspan class=\"hatena-asin-detail-label\"\u003e作者:\u003c/span\u003e 田丸健三郎,小林龍生\u003c/li\u003e\u003cli\u003e\u003cspan class=\"hatena-asin-detail-label\"\u003e出版社/メーカー:\u003c/span\u003e \u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/%C6%FC%B7%D0BP\"\u003e日経BP\u003c/a\u003e社\u003c/li\u003e\u003cli\u003e\u003cspan class=\"hatena-asin-detail-label\"\u003e発売日:\u003c/span\u003e 2013/02/28\u003c/li\u003e\u003cli\u003e\u003cspan class=\"hatena-asin-detail-label\"\u003eメディア:\u003c/span\u003e 単行本\u003c/li\u003e\u003cli\u003e\u003cspan class=\"hatena-asin-detail-label\"\u003e購入\u003c/span\u003e: 1人 \u003cspan class=\"hatena-asin-detail-label\"\u003eクリック\u003c/span\u003e: 20回\u003c/li\u003e\u003cli\u003e\u003ca href=\"http://d.hatena.ne.jp/asin/4822294838/msb2-22\" target=\"_blank\"\u003eこの商品を含むブログ (6件) を見る\u003c/a\u003e\u003c/li\u003e\u003c/ul\u003e\u003c/div\u003e\u003cdiv class=\"hatena-asin-detail-foot\"\u003e\u003c/div\u003e\u003c/div\u003e\u003c/p\u003e\u003cp\u003e\u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/%A5%BB%A5%DF\"\u003eセミ\u003c/a\u003eナー後は、小形さんはじめ文字に詳しそうなみなさんと昼食をご一緒させていただいた。そこでのお話（IVSとは関係ない）も非常におもしろかったので、このあたりの内容、まとめて本なり何なりにならないかな…と思う。\u003c/p\u003e\u003cp\u003eそんな一日でした。レポートおわり。\u003c/p\u003e\n\u003cdiv class=\"footnote\"\u003e\n\u003cp class=\"footnote\"\u003e\u003ca href=\"#fn-2904b3b2\" name=\"f-2904b3b2\" class=\"footnote-number\"\u003e*1\u003c/a\u003e\u003cspan class=\"footnote-delimiter\"\u003e:\u003c/span\u003e\u003cspan class=\"footnote-text\"\u003e配布資料 p. 40\u003c/span\u003e\u003c/p\u003e\n\u003cp class=\"footnote\"\u003e\u003ca href=\"#fn-254c750f\" name=\"f-254c750f\" class=\"footnote-number\"\u003e*2\u003c/a\u003e\u003cspan class=\"footnote-delimiter\"\u003e:\u003c/span\u003e\u003cspan class=\"footnote-text\"\u003e「変換文字制限をしない」\u003c/span\u003e\u003c/p\u003e\n\u003cp class=\"footnote\"\u003e\u003ca href=\"#fn-76366657\" name=\"f-76366657\" class=\"footnote-number\"\u003e*3\u003c/a\u003e\u003cspan class=\"footnote-delimiter\"\u003e:\u003c/span\u003e\u003cspan class=\"footnote-text\"\u003e変換候補の「単漢字…」の中にある。\u003c/span\u003e\u003c/p\u003e\n\u003c/div\u003e","contentSnippet":"Microsoft のセミナーに行ってきた。文字コードと異体字と Unicode IVS 〜 情報システムにおける日本語処理 〜 | スキルアップ カリキュラム - マイクロソフト イノベーション センター目新しい情報はあまりなかったが、イベントレポート書いて的な圧力を Twitter 上で受けてしまったので、ここに雑感を書いてお茶を濁したいと思う。今回の内容は前半：これまでの文字コード・漢字施策の変遷に関する、ざっくりとした説明後半：IVS自体と Windows 上におけるIVS対応についての、ざっくりとした説明という感じだった。幅広い内容をたったの2時間で扱わなければならないので、どうしてもざっくりになってしまう。ある程度の基礎知識がある人であれば、「あーそうだったよね」と自分の頭の中を整理しつつ、まとめ・おさらい的な感覚で聞けると思うが、逆にまったくの初心者がこの2時間だけで理解するのは難しいと思う。文字コードマニヤ(笑)な人は「ここの説明が不十分」とか「これはこう説明した方が…」とかツッコみながら聞いていたのかもしれない。個人的に興味があったのは、MS-DOS/Windows はこれまでどのように対応してきたかという点。Shift JIS の誕生からIVS対応まで、今回のセミナーでも各所で触れられていた。ただ、そのまわり（＋裏？）には語り尽くせないぐらいのいろいろなエピソードがあると思うので、そのへんを何かの機会にまとめて教えてくれたらおもしろいんだけどなー、と感じる。Window 8 上のIMEにおけるIVS対応については、Consumer Preview 版のときと同じくデフォルトではオフ（IVS入りの候補は出てこない）になっている。「頻繁に使用される名前、地名はIVSを含む単語としてIMEの辞書に搭載」*1してあるとのことで、設定をオン*2にして、例えば「くず」を変換すると、葛 [U+845B]：Windows Vista 以降のフォントではJIS2004字形葛󠄀 [U+845B U+E0100]：Adobe-Japan1 コレクション収録のJIS90字形の両方が候補に出てくる。完璧を期すのであれば、これに加えてJIS2004字形を明示的に指定する葛󠄁 [U+845B U+E0101]：Adobe-Japan1 コレクション収録のJIS2004字形も候補に出してほしいところだが、MS-IMEの辞書ではそうはなっていない。ちなみに、「いばら」を変換すると茨 [U+8328]茨󠄀 [U+8328 U+E0100]*3の両者が出てくるが、「いばらき」では茨城 [U+8328 U+57CE] だけであって、IVSを使ったJIS90字形の茨󠄀城 [U+8328 U+E0100 U+57CE] は出てこない。これについては、「茨城県などはJIS2004字形を使っているので、JIS90字形は辞書に入れていない」という、わかるようなわからないような説明があった。IVS/IVDのコレクションの違いについてほとんど触れられておらず、これはどうなんだろう…という感もある。ただ普通のアプリケーションにとってみれば、Adobe-Japan1 であれ Hanyo-Denshi であれ、どちらもIVSとしての扱い方に差はないので、ここらへんのややこしい話にあまり深入りする必要はないかもしれない。なお、『Unicode IVS/IVD入門』という本が先日発売されたが、今日の講師の方は「届いたばかりでまだ詳しく読んでいない」とおっしゃっていた。日経BP書店｜商品詳細　-　Unicode IVS/IVD入門Unicode IVS/IVD入門作者: 田丸健三郎,小林龍生出版社/メーカー: 日経BP社発売日: 2013/02/28メディア: 単行本購入: 1人 クリック: 20回この商品を含むブログ (6件) を見るセミナー後は、小形さんはじめ文字に詳しそうなみなさんと昼食をご一緒させていただいた。そこでのお話（IVSとは関係ない）も非常におもしろかったので、このあたりの内容、まとめて本なり何なりにならないかな…と思う。そんな一日でした。レポートおわり。*1:配布資料 p. 40*2:「変換文字制限をしない」*3:変換候補の「単漢字…」の中にある。","link":"https://shiromoji.hatenablog.jp/entry/20130305/1362503905","isoDate":"2013-03-04T17:18:25.000Z","dateMiliSeconds":1362417505000,"imageUrl":"http://ecx.images-amazon.com/images/I/51ZrcRm4-xL.jpg","authorName":"mashabow"},{"title":"フォントファイルをFontForgeのアイコンにドラッグ\u0026ドロップして開きたい","content":"\u003cp\u003e\u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/Ubuntu\"\u003eUbuntu\u003c/a\u003e で \u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/FontForge\"\u003eFontForge\u003c/a\u003e をぼちぼち使うので、自分は Unity のランチャー\u003ca href=\"#f-2526fd8e\" name=\"fn-2526fd8e\" title=\"画面左端にある、アプリケーションのショートカットアイコンが並んでいるあれ。\"\u003e*1\u003c/a\u003eに \u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/FontForge\"\u003eFontForge\u003c/a\u003e のショートカットも登録している。フォントファイルをここにドラッグ\u0026ドロップすれば、\u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/FontForge\"\u003eFontForge\u003c/a\u003e でそのファイルを開くことができる……と便利なのだが、なぜか \u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/FontForge\"\u003eFontForge\u003c/a\u003e のショートカットはそうはなっておらず、知らんぷりして「フォントを開く」ダイアログが出てくるだけになっている。\u003c/p\u003e\u003cp\u003e\u003cspan itemscope itemtype=\"http://schema.org/Photograph\"\u003e\u003ca href=\"http://f.hatena.ne.jp/mashabow/20130112194313\" class=\"hatena-fotolife\" itemprop=\"url\"\u003e\u003cimg src=\"http://cdn-ak.f.st-hatena.com/images/fotolife/m/mashabow/20130112/20130112194313.png\" alt=\"f:id:mashabow:20130112194313p:image\" title=\"f:id:mashabow:20130112194313p:image\" class=\"hatena-fotolife\" itemprop=\"image\"\u003e\u003c/a\u003e\u003c/span\u003e\u003c/p\u003e\u003cp\u003e最近たびたびこのドラッグ\u0026ドロップをやってしまって残念な気持ちになっていたので、これに対処する。ショートカットアイコンの実体は /usr/share/applications/\u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/fontforge\"\u003efontforge\u003c/a\u003e.desktop なので、これを ~/.local/share/applications/\u003ca href=\"#f-468e6fee\" name=\"fn-468e6fee\" title=\"なければ作成する。\"\u003e*2\u003c/a\u003e にコピーしていじればいいらしい。\u003c/p\u003e\n\n\u003cpre\u003e$ cd ~/.local/share/applications/\n$ cp /usr/share/applications/\u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/fontforge\"\u003efontforge\u003c/a\u003e.desktop .\n\u003c/pre\u003e\u003cp\u003eコピーした \u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/fontforge\"\u003efontforge\u003c/a\u003e.desktop をエディタで開いてみると、11行目が\u003c/p\u003e\n\n\u003cpre\u003eExec=\u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/fontforge\"\u003efontforge\u003c/a\u003e\n\u003c/pre\u003e\u003cp\u003eとなっているので、末尾に %F（ドロップされた全ファイルのパスに展開される）をつけて\u003c/p\u003e\n\n\u003cpre\u003eExec=\u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/fontforge\"\u003efontforge\u003c/a\u003e \u003cstrong\u003e%F\u003c/strong\u003e\n\u003c/pre\u003e\u003cp\u003eとして保存。\u003c/p\u003e\n\n\u003cpre\u003e$ chmod +x \u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/fontforge\"\u003efontforge\u003c/a\u003e.desktop\n\u003c/pre\u003e\u003cp\u003eとすると、\u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/Nautilus\"\u003eNautilus\u003c/a\u003e での表示が下のような \u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/FontForge\"\u003eFontForge\u003c/a\u003e のアイコンになる。\u003c/p\u003e\u003cp\u003e\u003cspan itemscope itemtype=\"http://schema.org/Photograph\"\u003e\u003ca href=\"http://f.hatena.ne.jp/mashabow/20130112202229\" class=\"hatena-fotolife\" itemprop=\"url\"\u003e\u003cimg src=\"http://cdn-ak.f.st-hatena.com/images/fotolife/m/mashabow/20130112/20130112202229.png\" alt=\"f:id:mashabow:20130112202229p:image\" title=\"f:id:mashabow:20130112202229p:image\" class=\"hatena-fotolife\" itemprop=\"image\"\u003e\u003c/a\u003e\u003c/span\u003e\u003c/p\u003e\u003cp\u003eこれをランチャーにドラッグ\u0026ドロップして追加すれば完了\u003ca href=\"#f-304fff98\" name=\"fn-304fff98\" title=\"もともと FontForge をランチャーに登録していた場合には、古い方のアイコンは右クリックして削除。\"\u003e*3\u003c/a\u003e。\u003c/p\u003e\u003cp\u003e新しくランチャーに登録したアイコンへフォントファイルをドラッグ\u0026ドロップすれば、ちゃんと \u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/FontForge\"\u003eFontForge\u003c/a\u003e で開けるようになる。\u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/%CA%A3%BF%F4\"\u003e複数\u003c/a\u003eのファイルをまとめてドラッグ\u0026ドロップしても、これまたちゃんとすべて開いてくれる。\u003c/p\u003e\n\u003cdiv class=\"footnote\"\u003e\n\u003cp class=\"footnote\"\u003e\u003ca href=\"#fn-2526fd8e\" name=\"f-2526fd8e\" class=\"footnote-number\"\u003e*1\u003c/a\u003e\u003cspan class=\"footnote-delimiter\"\u003e:\u003c/span\u003e\u003cspan class=\"footnote-text\"\u003e画面左端にある、アプリケーションのショートカットアイコンが並んでいるあれ。\u003c/span\u003e\u003c/p\u003e\n\u003cp class=\"footnote\"\u003e\u003ca href=\"#fn-468e6fee\" name=\"f-468e6fee\" class=\"footnote-number\"\u003e*2\u003c/a\u003e\u003cspan class=\"footnote-delimiter\"\u003e:\u003c/span\u003e\u003cspan class=\"footnote-text\"\u003eなければ作成する。\u003c/span\u003e\u003c/p\u003e\n\u003cp class=\"footnote\"\u003e\u003ca href=\"#fn-304fff98\" name=\"f-304fff98\" class=\"footnote-number\"\u003e*3\u003c/a\u003e\u003cspan class=\"footnote-delimiter\"\u003e:\u003c/span\u003e\u003cspan class=\"footnote-text\"\u003eもともと \u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/FontForge\"\u003eFontForge\u003c/a\u003e をランチャーに登録していた場合には、古い方のアイコンは右クリックして削除。\u003c/span\u003e\u003c/p\u003e\n\u003c/div\u003e","contentSnippet":"Ubuntu で FontForge をぼちぼち使うので、自分は Unity のランチャー*1に FontForge のショートカットも登録している。フォントファイルをここにドラッグ\u0026ドロップすれば、FontForge でそのファイルを開くことができる……と便利なのだが、なぜか FontForge のショートカットはそうはなっておらず、知らんぷりして「フォントを開く」ダイアログが出てくるだけになっている。最近たびたびこのドラッグ\u0026ドロップをやってしまって残念な気持ちになっていたので、これに対処する。ショートカットアイコンの実体は /usr/share/applications/fontforge.desktop なので、これを ~/.local/share/applications/*2 にコピーしていじればいいらしい。$ cd ~/.local/share/applications/$ cp /usr/share/applications/fontforge.desktop .コピーした fontforge.desktop をエディタで開いてみると、11行目がExec=fontforgeとなっているので、末尾に %F（ドロップされた全ファイルのパスに展開される）をつけてExec=fontforge %Fとして保存。$ chmod +x fontforge.desktopとすると、Nautilus での表示が下のような FontForge のアイコンになる。これをランチャーにドラッグ\u0026ドロップして追加すれば完了*3。新しくランチャーに登録したアイコンへフォントファイルをドラッグ\u0026ドロップすれば、ちゃんと FontForge で開けるようになる。複数のファイルをまとめてドラッグ\u0026ドロップしても、これまたちゃんとすべて開いてくれる。*1:画面左端にある、アプリケーションのショートカットアイコンが並んでいるあれ。*2:なければ作成する。*3:もともと FontForge をランチャーに登録していた場合には、古い方のアイコンは右クリックして削除。","link":"https://shiromoji.hatenablog.jp/entry/20130112/1357990590","isoDate":"2013-01-12T11:36:30.000Z","dateMiliSeconds":1357990590000,"imageUrl":"http://cdn-ak.f.st-hatena.com/images/fotolife/m/mashabow/20130112/20130112194313.png","authorName":"mashabow"},{"title":"米O'Reillyで買ったPDF本をkobo gloでも読めるように加工する","content":"\u003cp\u003e米 O'Reilly のアカウントを作って手持ちの紙本（同社から出ている英語版に限る）を登録すると、その\u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/%C5%C5%BB%D2%BD%F1%C0%D2\"\u003e電子書籍\u003c/a\u003e版が$4.99/冊で買えるらしい。自宅には CJKV Information Processing（第2版）と Fonts \u0026 Encodings があり、どちらもいろいろと役に立っているが、さすがにこれを持ち運ぼうと思うとつらい。\u003c/p\u003e\u003cp\u003e\u003cspan itemscope itemtype=\"http://schema.org/Photograph\"\u003e\u003ca href=\"http://f.hatena.ne.jp/mashabow/20121219014418\" class=\"hatena-fotolife\" itemprop=\"url\"\u003e\u003cimg src=\"https://cdn-ak.f.st-hatena.com/images/fotolife/m/mashabow/20121219/20121219014418.jpg\" alt=\"f:id:mashabow:20121219014418j:image:w500\" title=\"f:id:mashabow:20121219014418j:image:w500\" class=\"hatena-fotolife\" style=\"width:500px\" itemprop=\"image\"\u003e\u003c/a\u003e\u003c/span\u003e\u003c/p\u003e\u003cp\u003eというわけで\u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/%C5%C5%BB%D2%BD%F1%C0%D2\"\u003e電子書籍\u003c/a\u003e版をさっそく買ってしまった。タイトルによっては eBub や mobi フォーマットも選択できるようだが、この2冊はPDF版のみ。残念ながら errata は反映されていない様子。\u003c/p\u003e\n\n\u003cdiv class=\"section\"\u003e\n    \u003ch4\u003e余白の除去\u003c/h4\u003e\n    \u003cp\u003eこのPDFは版面の上下左右に余白が大きく取られているため、これをそのまま\u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/%C5%C5%BB%D2%BD%F1%C0%D2\"\u003e電子書籍\u003c/a\u003e端末で読もうとしても読みづらい。ググってみたところ、PDF内部の CropBox の値を書き換えて余白を除去する方法があった。\u003c/p\u003e\n\n\u003cul\u003e\n\u003cli\u003e\u003ca href=\"http://sakanaya.kir.jp/ymnet/diary/d/20110330\"\u003e\u0026#x308F;\u0026#x3044;\u0026#x3048;\u0026#x3080;\u0026#x306D;\u0026#x3063;\u0026#x3068; - 2011/03/30\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e\u003cp\u003eこのページの\u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/%A5%B9%A5%AF%A5%EA%A5%D7%A5%C8\"\u003eスクリプト\u003c/a\u003eにすこし手を加え、次のようにしてみた。\u003c/p\u003e\n\u003cpre class=\"code lang-perl\" data-lang=\"perl\" data-unlink\u003e\u003cspan class=\"synPreProc\"\u003e#!/usr/bin/perl\u003c/span\u003e\n\u003cspan class=\"synComment\"\u003e# crop_pdf.pl - PDFの余白を除去\u003c/span\u003e\n\n\u003cspan class=\"synStatement\"\u003euse utf8\u003c/span\u003e;\n\u003cspan class=\"synStatement\"\u003euse strict\u003c/span\u003e;\n\u003cspan class=\"synStatement\"\u003euse warnings\u003c/span\u003e;\n\n\u003cspan class=\"synComment\"\u003e# 余白除去を行わずにスキップするページ数\u003c/span\u003e\n\u003cspan class=\"synStatement\"\u003emy\u003c/span\u003e \u003cspan class=\"synIdentifier\"\u003e$skip_page\u003c/span\u003e = \u003cspan class=\"synConstant\"\u003e2\u003c/span\u003e;  \u003cspan class=\"synComment\"\u003e# 先頭の2ページ（表紙と裏表紙）\u003c/span\u003e\n\n\u003cspan class=\"synStatement\"\u003edie\u003c/span\u003e \u003cspan class=\"synConstant\"\u003e\u0026quot;Usage: \u003c/span\u003e\u003cspan class=\"synIdentifier\"\u003e$0\u003c/span\u003e\u003cspan class=\"synConstant\"\u003e file top right bottom left\u003c/span\u003e\u003cspan class=\"synSpecial\"\u003e\\n\u003c/span\u003e\u003cspan class=\"synConstant\"\u003e\u0026quot;\u003c/span\u003e \u003cspan class=\"synStatement\"\u003eunless\u003c/span\u003e \u003cspan class=\"synIdentifier\"\u003e@ARGV\u003c/span\u003e == \u003cspan class=\"synConstant\"\u003e5\u003c/span\u003e;\n\u003cspan class=\"synStatement\"\u003emy\u003c/span\u003e \u003cspan class=\"synIdentifier\"\u003e$filename_in\u003c/span\u003e = \u003cspan class=\"synIdentifier\"\u003e$ARGV[\u003c/span\u003e\u003cspan class=\"synConstant\"\u003e0\u003c/span\u003e\u003cspan class=\"synIdentifier\"\u003e]\u003c/span\u003e;\n\n\u003cspan class=\"synComment\"\u003e# CropBox に合わせて格納（left, bottom, right, top）\u003c/span\u003e\n\u003cspan class=\"synStatement\"\u003emy\u003c/span\u003e \u003cspan class=\"synIdentifier\"\u003e@offset\u003c/span\u003e = (\u003cspan class=\"synIdentifier\"\u003e$ARGV[\u003c/span\u003e\u003cspan class=\"synConstant\"\u003e4\u003c/span\u003e\u003cspan class=\"synIdentifier\"\u003e]\u003c/span\u003e, \u003cspan class=\"synIdentifier\"\u003e$ARGV[\u003c/span\u003e\u003cspan class=\"synConstant\"\u003e3\u003c/span\u003e\u003cspan class=\"synIdentifier\"\u003e]\u003c/span\u003e, -\u003cspan class=\"synIdentifier\"\u003e$ARGV[\u003c/span\u003e\u003cspan class=\"synConstant\"\u003e2\u003c/span\u003e\u003cspan class=\"synIdentifier\"\u003e]\u003c/span\u003e, -\u003cspan class=\"synIdentifier\"\u003e$ARGV[\u003c/span\u003e\u003cspan class=\"synConstant\"\u003e1\u003c/span\u003e\u003cspan class=\"synIdentifier\"\u003e]\u003c/span\u003e);\n\n\u003cspan class=\"synStatement\"\u003eopen\u003c/span\u003e \u003cspan class=\"synStatement\"\u003emy\u003c/span\u003e \u003cspan class=\"synIdentifier\"\u003e$in\u003c/span\u003e, \u003cspan class=\"synConstant\"\u003e'\u0026lt;'\u003c/span\u003e, \u003cspan class=\"synIdentifier\"\u003e$filename_in\u003c/span\u003e \u003cspan class=\"synStatement\"\u003eor\u003c/span\u003e \u003cspan class=\"synStatement\"\u003edie\u003c/span\u003e;\n(\u003cspan class=\"synStatement\"\u003emy\u003c/span\u003e \u003cspan class=\"synIdentifier\"\u003e$filename_out\u003c/span\u003e = \u003cspan class=\"synIdentifier\"\u003e$filename_in\u003c/span\u003e) =~ \u003cspan class=\"synStatement\"\u003es/\u003c/span\u003e\u003cspan class=\"synSpecial\"\u003e(.*)(\\.\u003c/span\u003e\u003cspan class=\"synConstant\"\u003epdf\u003c/span\u003e\u003cspan class=\"synSpecial\"\u003e)\u003c/span\u003e\u003cspan class=\"synConstant\"\u003e$\u003c/span\u003e\u003cspan class=\"synStatement\"\u003e/\u003c/span\u003e\u003cspan class=\"synIdentifier\"\u003e$1\u003c/span\u003e\u003cspan class=\"synConstant\"\u003e-cropped\u003c/span\u003e\u003cspan class=\"synIdentifier\"\u003e$2\u003c/span\u003e\u003cspan class=\"synStatement\"\u003e/\u003c/span\u003e;\n\u003cspan class=\"synStatement\"\u003eopen\u003c/span\u003e \u003cspan class=\"synStatement\"\u003emy\u003c/span\u003e \u003cspan class=\"synIdentifier\"\u003e$out\u003c/span\u003e, \u003cspan class=\"synConstant\"\u003e'\u0026gt;'\u003c/span\u003e, \u003cspan class=\"synIdentifier\"\u003e$filename_out\u003c/span\u003e \u003cspan class=\"synStatement\"\u003eor\u003c/span\u003e \u003cspan class=\"synStatement\"\u003edie\u003c/span\u003e;\n\n\u003cspan class=\"synStatement\"\u003ebinmode\u003c/span\u003e \u003cspan class=\"synIdentifier\"\u003e$in\u003c/span\u003e;\n\u003cspan class=\"synStatement\"\u003ebinmode\u003c/span\u003e \u003cspan class=\"synIdentifier\"\u003e$out\u003c/span\u003e;\n\n\u003cspan class=\"synStatement\"\u003emy\u003c/span\u003e \u003cspan class=\"synIdentifier\"\u003e$page\u003c/span\u003e = \u003cspan class=\"synConstant\"\u003e0\u003c/span\u003e;\n\u003cspan class=\"synStatement\"\u003ewhile\u003c/span\u003e (\u0026lt;\u003cspan class=\"synIdentifier\"\u003e$in\u003c/span\u003e\u0026gt;) {\n    \u003cspan class=\"synStatement\"\u003es/\u003c/span\u003e\u003cspan class=\"synSpecial\"\u003e(\\/\u003c/span\u003e\u003cspan class=\"synConstant\"\u003eCropBox\u003c/span\u003e\u003cspan class=\"synSpecial\"\u003e\\s*\\[\\s*(\u003c/span\u003e\u003cspan class=\"synConstant\"\u003e[^\u003c/span\u003e\u003cspan class=\"synSpecial\"\u003e\\[\u003c/span\u003e\u003cspan class=\"synConstant\"\u003e]\u003c/span\u003e\u003cspan class=\"synSpecial\"\u003e+)\\])\u003c/span\u003e\u003cspan class=\"synStatement\"\u003e/\u003c/span\u003e\u003cspan class=\"synConstant\"\u003ecrop(\u003c/span\u003e\u003cspan class=\"synIdentifier\"\u003e$1\u003c/span\u003e\u003cspan class=\"synConstant\"\u003e, \u003c/span\u003e\u003cspan class=\"synIdentifier\"\u003e$2\u003c/span\u003e\u003cspan class=\"synConstant\"\u003e)\u003c/span\u003e\u003cspan class=\"synStatement\"\u003e/eg\u003c/span\u003e;\n    \u003cspan class=\"synStatement\"\u003eprint\u003c/span\u003e \u003cspan class=\"synIdentifier\"\u003e$out\u003c/span\u003e \u003cspan class=\"synIdentifier\"\u003e$_\u003c/span\u003e;\n}\n\n\u003cspan class=\"synStatement\"\u003esub \u003c/span\u003e\u003cspan class=\"synIdentifier\"\u003ecrop \u003c/span\u003e{\n    \u003cspan class=\"synIdentifier\"\u003e$page\u003c/span\u003e++;\n    \u003cspan class=\"synStatement\"\u003ereturn\u003c/span\u003e \u003cspan class=\"synIdentifier\"\u003e$_[\u003c/span\u003e\u003cspan class=\"synConstant\"\u003e0\u003c/span\u003e\u003cspan class=\"synIdentifier\"\u003e]\u003c/span\u003e \u003cspan class=\"synStatement\"\u003eif\u003c/span\u003e \u003cspan class=\"synIdentifier\"\u003e$page\u003c/span\u003e \u0026lt;= \u003cspan class=\"synIdentifier\"\u003e$skip_page\u003c/span\u003e;\n\n    \u003cspan class=\"synStatement\"\u003emy\u003c/span\u003e \u003cspan class=\"synIdentifier\"\u003e@offset\u003c/span\u003e = \u003cspan class=\"synIdentifier\"\u003e@offset\u003c/span\u003e;\n    \u003cspan class=\"synStatement\"\u003emy\u003c/span\u003e \u003cspan class=\"synIdentifier\"\u003e@pos\u003c/span\u003e = \u003cspan class=\"synStatement\"\u003emap{int\u003c/span\u003e \u003cspan class=\"synIdentifier\"\u003e$_\u003c/span\u003e + \u003cspan class=\"synStatement\"\u003eshift\u003c/span\u003e \u003cspan class=\"synIdentifier\"\u003e@offset\u003c/span\u003e\u003cspan class=\"synStatement\"\u003e}\u003c/span\u003e \u003cspan class=\"synStatement\"\u003esplit\u003c/span\u003e \u003cspan class=\"synStatement\"\u003e/\u003c/span\u003e\u003cspan class=\"synSpecial\"\u003e\\s+\u003c/span\u003e\u003cspan class=\"synStatement\"\u003e/\u003c/span\u003e, \u003cspan class=\"synIdentifier\"\u003e$_[\u003c/span\u003e\u003cspan class=\"synConstant\"\u003e1\u003c/span\u003e\u003cspan class=\"synIdentifier\"\u003e]\u003c/span\u003e;\n\n    \u003cspan class=\"synStatement\"\u003emy\u003c/span\u003e \u003cspan class=\"synIdentifier\"\u003e$crop\u003c/span\u003e = \u003cspan class=\"synStatement\"\u003esprintf\u003c/span\u003e \u003cspan class=\"synConstant\"\u003e'/CropBox[%d %d %d %d]'\u003c/span\u003e, \u003cspan class=\"synIdentifier\"\u003e@pos\u003c/span\u003e;\n\n    \u003cspan class=\"synStatement\"\u003emy\u003c/span\u003e \u003cspan class=\"synIdentifier\"\u003e$blank\u003c/span\u003e = \u003cspan class=\"synStatement\"\u003elength\u003c/span\u003e(\u003cspan class=\"synIdentifier\"\u003e$_[\u003c/span\u003e\u003cspan class=\"synConstant\"\u003e0\u003c/span\u003e\u003cspan class=\"synIdentifier\"\u003e]\u003c/span\u003e) - \u003cspan class=\"synStatement\"\u003elength\u003c/span\u003e \u003cspan class=\"synIdentifier\"\u003e$crop\u003c/span\u003e;\n    \u003cspan class=\"synStatement\"\u003ewarn\u003c/span\u003e \u003cspan class=\"synIdentifier\"\u003e$_[\u003c/span\u003e\u003cspan class=\"synConstant\"\u003e0\u003c/span\u003e\u003cspan class=\"synIdentifier\"\u003e]\u003c/span\u003e \u003cspan class=\"synStatement\"\u003eand\u003c/span\u003e \u003cspan class=\"synStatement\"\u003ereturn\u003c/span\u003e \u003cspan class=\"synIdentifier\"\u003e$_[\u003c/span\u003e\u003cspan class=\"synConstant\"\u003e0\u003c/span\u003e\u003cspan class=\"synIdentifier\"\u003e]\u003c/span\u003e \u003cspan class=\"synStatement\"\u003eif\u003c/span\u003e \u003cspan class=\"synIdentifier\"\u003e$blank\u003c/span\u003e \u0026lt; \u003cspan class=\"synConstant\"\u003e0\u003c/span\u003e;\n\n    \u003cspan class=\"synStatement\"\u003ereturn\u003c/span\u003e \u003cspan class=\"synIdentifier\"\u003e$crop\u003c/span\u003e.(\u003cspan class=\"synConstant\"\u003e' '\u003c/span\u003e x \u003cspan class=\"synIdentifier\"\u003e$blank\u003c/span\u003e);\n}\n\u003c/pre\u003e\u003cp\u003eこれを\u003c/p\u003e\n\n\u003cpre\u003e$ \u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/perl\"\u003eperl\u003c/a\u003e crop_pdf.pl Fonts_and_Encodings.pdf 70 110 140 95\n\u003c/pre\u003e\u003cp\u003eなどとして実行すれば、余白が除去されたPDFファイル Fonts_and_Encodings-cropped.pdf が生成される。なお、余白除去量の指定順序は、自分でわかりやすいように上から時計回り（\u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/CSS\"\u003eCSS\u003c/a\u003eと同じ）とした。\u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/kobo%20glo\"\u003ekobo glo\u003c/a\u003e での閲覧を考えると、なるべく大きく表示させるために上下の余白をギリギリまで切り詰めたい。何度か試してみた結果、とりあえず以下のパラメータに落ち着いた。\u003c/p\u003e\n\n\u003cul\u003e\n\u003cli\u003eCJKV Information Processing: 40 50 30 50\u003c/li\u003e\n\u003cli\u003eFonts \u0026 Encodings: 70 110 140 95\u003ca href=\"#f-01a4e8e7\" name=\"fn-01a4e8e7\" title=\"一部のページで下が切れてしまうが、これで妥協。\"\u003e*1\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/div\u003e\n\u003cdiv class=\"section\"\u003e\n    \u003ch4\u003e書名・著者名の追加\u003c/h4\u003e\n    \u003cp\u003eこのPDFの\u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/%A5%E1%A5%BF%A5%C7%A1%BC%A5%BF\"\u003eメタデータ\u003c/a\u003eには書名や著者名が入っていないため、\u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/kobo\"\u003ekobo\u003c/a\u003e では「untitled」「著者不明」などと表示されてしまう。今回は \u003ca href=\"http://www.pdflabs.com/tools/pdftk-the-pdf-toolkit/\"\u003epdftk\u003c/a\u003e でこれを編集してみた。\u003c/p\u003e\n\n\u003cpre\u003e$ pdftk orig.pdf dump_data_utf8 \u003e metadata.txt\n\u003c/pre\u003e\u003cp\u003eとすると、orig.pdf の書名・著者名・しおりなどの\u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/%A5%E1%A5%BF%A5%C7%A1%BC%A5%BF\"\u003eメタデータ\u003c/a\u003eが metadata.txt に書き出される。これを編集し、例えば\u003c/p\u003e\n\n\u003cpre\u003eInfoKey: Title\nInfoValue: CJKV Information Processing, 2nd Edition\nInfoKey: Author\nInfoValue: \u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/Ken%20Lunde\"\u003eKen Lunde\u003c/a\u003e\n（以下略）\n\u003c/pre\u003e\u003cp\u003eのように書き換える（該当部分がなければ追加する）。あとは\u003c/p\u003e\n\n\u003cpre\u003e$ pdftk orig.pdf update_info_utf8 metadata.txt output new.pdf\n\u003c/pre\u003e\u003cp\u003eとすれば、\u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/%A5%E1%A5%BF%A5%C7%A1%BC%A5%BF\"\u003eメタデータ\u003c/a\u003eだけが書き換わったPDFファイル new.pdf が生成される。\u003c/p\u003e\n\n\u003c/div\u003e\n\u003cdiv class=\"section\"\u003e\n    \u003ch4\u003eまとめ\u003c/h4\u003e\n    \u003cp\u003e以上の余白除去と書名・著者名の追加あたりをやっておけば、一応はまずまず使えるようになる。もっとも、\u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/kobo\"\u003ekobo\u003c/a\u003e のPDF対応は、検索ができない・しおりの階層が無視される・操作性が悪いなど、不満な点も多々あるのが現状。\u003c/p\u003e\u003cp\u003eというわけで、みなさんもぜひ CJKV Information Processing と Fonts \u0026 Encodings のPDFを買って携帯しましょう！\u003c/p\u003e\u003cp\u003e\u003cdiv class=\"hatena-asin-detail\"\u003e\u003ca href=\"http://www.amazon.co.jp/exec/obidos/ASIN/0596514476/msb2-22/\"\u003e\u003cimg src=\"https://images-fe.ssl-images-amazon.com/images/I/51jJqVHlF%2BL._SL160_.jpg\" class=\"hatena-asin-detail-image\" alt=\"CJKV Information Processing: Chinese, Japanese, Korean, and Vietnamese Computing\" title=\"CJKV Information Processing: Chinese, Japanese, Korean, and Vietnamese Computing\"\u003e\u003c/a\u003e\u003cdiv class=\"hatena-asin-detail-info\"\u003e\u003cp class=\"hatena-asin-detail-title\"\u003e\u003ca href=\"http://www.amazon.co.jp/exec/obidos/ASIN/0596514476/msb2-22/\"\u003eCJKV Information Processing: Chinese, Japanese, Korean, and Vietnamese Computing\u003c/a\u003e\u003c/p\u003e\u003cul\u003e\u003cli\u003e\u003cspan class=\"hatena-asin-detail-label\"\u003e作者:\u003c/span\u003e \u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/Ken%20Lunde\"\u003eKen Lunde\u003c/a\u003e\u003c/li\u003e\u003cli\u003e\u003cspan class=\"hatena-asin-detail-label\"\u003e出版社/メーカー:\u003c/span\u003e O'Reilly Media\u003c/li\u003e\u003cli\u003e\u003cspan class=\"hatena-asin-detail-label\"\u003e発売日:\u003c/span\u003e 2009/01/08\u003c/li\u003e\u003cli\u003e\u003cspan class=\"hatena-asin-detail-label\"\u003eメディア:\u003c/span\u003e ペーパーバック\u003c/li\u003e\u003cli\u003e \u003cspan class=\"hatena-asin-detail-label\"\u003eクリック\u003c/span\u003e: 6回\u003c/li\u003e\u003cli\u003e\u003ca href=\"http://d.hatena.ne.jp/asin/0596514476/msb2-22\" target=\"_blank\"\u003eこの商品を含むブログ (11件) を見る\u003c/a\u003e\u003c/li\u003e\u003c/ul\u003e\u003c/div\u003e\u003cdiv class=\"hatena-asin-detail-foot\"\u003e\u003c/div\u003e\u003c/div\u003e\u003cdiv class=\"hatena-asin-detail\"\u003e\u003ca href=\"http://www.amazon.co.jp/exec/obidos/ASIN/0596102429/msb2-22/\"\u003e\u003cimg src=\"https://images-fe.ssl-images-amazon.com/images/I/51HDrORdUsL._SL160_.jpg\" class=\"hatena-asin-detail-image\" alt=\"Fonts \u0026 Encodings: From Advanced Typography to Unicode and Everything in Between\" title=\"Fonts \u0026 Encodings: From Advanced Typography to Unicode and Everything in Between\"\u003e\u003c/a\u003e\u003cdiv class=\"hatena-asin-detail-info\"\u003e\u003cp class=\"hatena-asin-detail-title\"\u003e\u003ca href=\"http://www.amazon.co.jp/exec/obidos/ASIN/0596102429/msb2-22/\"\u003eFonts \u0026 Encodings: From Advanced Typography to Unicode and Everything in Between\u003c/a\u003e\u003c/p\u003e\u003cul\u003e\u003cli\u003e\u003cspan class=\"hatena-asin-detail-label\"\u003e作者:\u003c/span\u003e Yannis Haralambous\u003c/li\u003e\u003cli\u003e\u003cspan class=\"hatena-asin-detail-label\"\u003e出版社/メーカー:\u003c/span\u003e O'Reilly Media\u003c/li\u003e\u003cli\u003e\u003cspan class=\"hatena-asin-detail-label\"\u003e発売日:\u003c/span\u003e 2007/10/06\u003c/li\u003e\u003cli\u003e\u003cspan class=\"hatena-asin-detail-label\"\u003eメディア:\u003c/span\u003e ペーパーバック\u003c/li\u003e\u003cli\u003e\u003cspan class=\"hatena-asin-detail-label\"\u003e購入\u003c/span\u003e: 3人 \u003cspan class=\"hatena-asin-detail-label\"\u003eクリック\u003c/span\u003e: 42回\u003c/li\u003e\u003cli\u003e\u003ca href=\"http://d.hatena.ne.jp/asin/0596102429/msb2-22\" target=\"_blank\"\u003eこの商品を含むブログ (11件) を見る\u003c/a\u003e\u003c/li\u003e\u003c/ul\u003e\u003c/div\u003e\u003cdiv class=\"hatena-asin-detail-foot\"\u003e\u003c/div\u003e\u003c/div\u003e\u003c/p\u003e\n\n\u003c/div\u003e\u003cdiv class=\"footnote\"\u003e\n\u003cp class=\"footnote\"\u003e\u003ca href=\"#fn-01a4e8e7\" name=\"f-01a4e8e7\" class=\"footnote-number\"\u003e*1\u003c/a\u003e\u003cspan class=\"footnote-delimiter\"\u003e:\u003c/span\u003e\u003cspan class=\"footnote-text\"\u003e一部のページで下が切れてしまうが、これで妥協。\u003c/span\u003e\u003c/p\u003e\n\u003c/div\u003e","contentSnippet":"米 O'Reilly のアカウントを作って手持ちの紙本（同社から出ている英語版に限る）を登録すると、その電子書籍版が$4.99/冊で買えるらしい。自宅には CJKV Information Processing（第2版）と Fonts \u0026 Encodings があり、どちらもいろいろと役に立っているが、さすがにこれを持ち運ぼうと思うとつらい。というわけで電子書籍版をさっそく買ってしまった。タイトルによっては eBub や mobi フォーマットも選択できるようだが、この2冊はPDF版のみ。残念ながら errata は反映されていない様子。余白の除去このPDFは版面の上下左右に余白が大きく取られているため、これをそのまま電子書籍端末で読もうとしても読みづらい。ググってみたところ、PDF内部の CropBox の値を書き換えて余白を除去する方法があった。わいえむねっと - 2011/03/30このページのスクリプトにすこし手を加え、次のようにしてみた。#!/usr/bin/perl# crop_pdf.pl - PDFの余白を除去use utf8;use strict;use warnings;# 余白除去を行わずにスキップするページ数my $skip_page = 2;  # 先頭の2ページ（表紙と裏表紙）die \"Usage: $0 file top right bottom left\\n\" unless @ARGV == 5;my $filename_in = $ARGV[0];# CropBox に合わせて格納（left, bottom, right, top）my @offset = ($ARGV[4], $ARGV[3], -$ARGV[2], -$ARGV[1]);open my $in, '\u003c', $filename_in or die;(my $filename_out = $filename_in) =~ s/(.*)(\\.pdf)$/$1-cropped$2/;open my $out, '\u003e', $filename_out or die;binmode $in;binmode $out;my $page = 0;while (\u003c$in\u003e) {    s/(\\/CropBox\\s*\\[\\s*([^\\[]+)\\])/crop($1, $2)/eg;    print $out $_;}sub crop {    $page++;    return $_[0] if $page \u003c= $skip_page;    my @offset = @offset;    my @pos = map{int $_ + shift @offset} split /\\s+/, $_[1];    my $crop = sprintf '/CropBox[%d %d %d %d]', @pos;    my $blank = length($_[0]) - length $crop;    warn $_[0] and return $_[0] if $blank \u003c 0;    return $crop.(' ' x $blank);}これを$ perl crop_pdf.pl Fonts_and_Encodings.pdf 70 110 140 95などとして実行すれば、余白が除去されたPDFファイル Fonts_and_Encodings-cropped.pdf が生成される。なお、余白除去量の指定順序は、自分でわかりやすいように上から時計回り（CSSと同じ）とした。kobo glo での閲覧を考えると、なるべく大きく表示させるために上下の余白をギリギリまで切り詰めたい。何度か試してみた結果、とりあえず以下のパラメータに落ち着いた。CJKV Information Processing: 40 50 30 50Fonts \u0026 Encodings: 70 110 140 95*1書名・著者名の追加このPDFのメタデータには書名や著者名が入っていないため、kobo では「untitled」「著者不明」などと表示されてしまう。今回は pdftk でこれを編集してみた。$ pdftk orig.pdf dump_data_utf8 \u003e metadata.txtとすると、orig.pdf の書名・著者名・しおりなどのメタデータが metadata.txt に書き出される。これを編集し、例えばInfoKey: TitleInfoValue: CJKV Information Processing, 2nd EditionInfoKey: AuthorInfoValue: Ken Lunde（以下略）のように書き換える（該当部分がなければ追加する）。あとは$ pdftk orig.pdf update_info_utf8 metadata.txt output new.pdfとすれば、メタデータだけが書き換わったPDFファイル new.pdf が生成される。まとめ以上の余白除去と書名・著者名の追加あたりをやっておけば、一応はまずまず使えるようになる。もっとも、kobo のPDF対応は、検索ができない・しおりの階層が無視される・操作性が悪いなど、不満な点も多々あるのが現状。というわけで、みなさんもぜひ CJKV Information Processing と Fonts \u0026 Encodings のPDFを買って携帯しましょう！CJKV Information Processing: Chinese, Japanese, Korean, and Vietnamese Computing作者: Ken Lunde出版社/メーカー: O'Reilly Media発売日: 2009/01/08メディア: ペーパーバック クリック: 6回この商品を含むブログ (11件) を見るFonts \u0026 Encodings: From Advanced Typography to Unicode and Everything in Between作者: Yannis Haralambous出版社/メーカー: O'Reilly Media発売日: 2007/10/06メディア: ペーパーバック購入: 3人 クリック: 42回この商品を含むブログ (11件) を見る*1:一部のページで下が切れてしまうが、これで妥協。","link":"https://shiromoji.hatenablog.jp/entry/20121218/1355855444","isoDate":"2012-12-17T18:30:44.000Z","dateMiliSeconds":1355769044000,"imageUrl":"http://cdn-ak.f.st-hatena.com/images/fotolife/m/mashabow/20121219/20121219014418.jpg","authorName":"mashabow"},{"title":"svivs の現状について","content":"\u003cp\u003e\u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/Twitter\"\u003eTwitter\u003c/a\u003e を見ていて、あーそういやそんなもんあったなーと思いだしたのですが、以前 svivs という\u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/%A5%C4%A1%BC%A5%EB\"\u003eツール\u003c/a\u003eを作りました。\u003c/p\u003e\n\n\u003cul\u003e\n\u003cli\u003e\u003ca href=\"http://shiromoji.net/tool/svivs/\"\u003eIVS\u0026#xFF08;\u0026#x7570;\u0026#x4F53;\u0026#x5B57;\u0026#x30B7;\u0026#x30FC;\u0026#x30B1;\u0026#x30F3;\u0026#x30B9;\u0026#xFF09;\u0026#x5165;\u0026#x529B;\u0026#x30C4;\u0026#x30FC;\u0026#x30EB; svivs - \u0026#x3057;\u0026#x308D;\u0026#x3082;\u0026#x3058;\u0026#x4F5C;\u0026#x696D;\u0026#x5BA4;\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003cdiv class=\"section\"\u003e\n    \u003ch4\u003e現状\u003c/h4\u003e\n    \u003cp\u003e当時は更新・拡張したい点などいくつかあったわけですが、結局のところ今まで放置状態になっています。理由としては、\u003c/p\u003e\n\n\u003cul\u003e\n\u003cli\u003e\u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/Ubuntu\"\u003eUbuntu\u003c/a\u003e をメインで使うようになったが、\u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/Adobe%20AIR\"\u003eAdobe AIR\u003c/a\u003e の開発・実行環境は \u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/Linux\"\u003eLinux\u003c/a\u003e に対応していない\u003c/li\u003e\n\u003cli\u003e当時はIVSをサポートするOS・ブラウザ・その他アプリケーションが少なかったため、多くの環境で比較的確実に利用できる \u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/Adobe%20AIR\"\u003eAdobe AIR\u003c/a\u003e を使っていたが、現在ではサポートが進んで問題にならなくなってきた\u003c/li\u003e\n\u003cli\u003eそもそも、\u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/Adobe%20AIR\"\u003eAdobe AIR\u003c/a\u003e 自体が結局世間ではあまり使われていない気がする\u003c/li\u003e\n\u003cli\u003eめんど(ry\u003c/li\u003e\n\u003c/ul\u003e\u003cp\u003eといったあたりで、残念ながら今後も放置状態が続くかと思われます。また、svivs 内部で利用しているIVDのバージョンが古いこともあり、今後の svivs の利用は\u003cstrong\u003e推奨しません\u003c/strong\u003e。次項の作業によってIVDを更新することは可能ですが、このような現状を把握した上で、自己責任でお願いします。\u003c/p\u003e\n\n\u003c/div\u003e\n\u003cdiv class=\"section\"\u003e\n    \u003ch4\u003esvivs で使われているIVDを更新するには\u003c/h4\u003e\n    \u003cp\u003e\u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/Unicode%20Consortium\"\u003eUnicode Consortium\u003c/a\u003e の公開するIVDは、これまで何回かアップデートが行われてきました。\u003c/p\u003e\n\n\u003cul\u003e\n\u003cli\u003e\u003ca href=\"http://www.unicode.org/ivd/\"\u003eIdeographic Variation Database\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e\u003cp\u003esvivs は当時最新版であった2010-11-14版のIVDを利用していますが、その後 \u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/Adobe\"\u003eAdobe\u003c/a\u003e-Japan1 と Hanyo-Denshi の両方のコレクションにIVSが追加された、2012-03-02版が出ています。これに対応させたい場合には、以下の作業を行なう必要があります\u003ca href=\"#f-4c4f26a9\" name=\"fn-4c4f26a9\" title=\"パスは Windows 7 64bit 環境での例。自分の環境に合わせて適宜読み替えてください。\"\u003e*1\u003c/a\u003e。\u003c/p\u003e\n\n\u003col\u003e\n\u003cli\u003e\u003ca href=\"http://www.unicode.org/ivd/#versions\"\u003eVersions of the IVD\u003c/a\u003e のリンクから、最新版の IVD_Sequences.txt をダウンロードする\u003c/li\u003e\n\u003cli\u003e\\Program Files (\u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/x86\"\u003ex86\u003c/a\u003e)\\svivs\\IVD_Sequences.txt を、ダウンロードした IVD_Sequences.txt で上書きする\u003c/li\u003e\n\u003cli\u003e\\Users\\{ユーザ名}\\AppData\\Roaming\\net.shiromoji.Svivs\\ivd.\u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/sqlite\"\u003esqlite\u003c/a\u003e を削除する\u003c/li\u003e\n\u003cli\u003esvivs を起動する\u003c/li\u003e\n\u003c/ol\u003e\u003cp\u003e\u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/Adobe\"\u003eAdobe\u003c/a\u003e-Japan1, Hanyo-Denshi 以外のコレクションが新設されるなどした場合には対応できませんので、ご注意ください。\u003c/p\u003e\n\n\u003c/div\u003e\u003cdiv class=\"footnote\"\u003e\n\u003cp class=\"footnote\"\u003e\u003ca href=\"#fn-4c4f26a9\" name=\"f-4c4f26a9\" class=\"footnote-number\"\u003e*1\u003c/a\u003e\u003cspan class=\"footnote-delimiter\"\u003e:\u003c/span\u003e\u003cspan class=\"footnote-text\"\u003eパスは \u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/Windows%207\"\u003eWindows 7\u003c/a\u003e 64bit 環境での例。自分の環境に合わせて適宜読み替えてください。\u003c/span\u003e\u003c/p\u003e\n\u003c/div\u003e","contentSnippet":"Twitter を見ていて、あーそういやそんなもんあったなーと思いだしたのですが、以前 svivs というツールを作りました。IVS（異体字シーケンス）入力ツール svivs - しろもじ作業室現状当時は更新・拡張したい点などいくつかあったわけですが、結局のところ今まで放置状態になっています。理由としては、Ubuntu をメインで使うようになったが、Adobe AIR の開発・実行環境は Linux に対応していない当時はIVSをサポートするOS・ブラウザ・その他アプリケーションが少なかったため、多くの環境で比較的確実に利用できる Adobe AIR を使っていたが、現在ではサポートが進んで問題にならなくなってきたそもそも、Adobe AIR 自体が結局世間ではあまり使われていない気がするめんど(ryといったあたりで、残念ながら今後も放置状態が続くかと思われます。また、svivs 内部で利用しているIVDのバージョンが古いこともあり、今後の svivs の利用は推奨しません。次項の作業によってIVDを更新することは可能ですが、このような現状を把握した上で、自己責任でお願いします。svivs で使われているIVDを更新するにはUnicode Consortium の公開するIVDは、これまで何回かアップデートが行われてきました。Ideographic Variation Databasesvivs は当時最新版であった2010-11-14版のIVDを利用していますが、その後 Adobe-Japan1 と Hanyo-Denshi の両方のコレクションにIVSが追加された、2012-03-02版が出ています。これに対応させたい場合には、以下の作業を行なう必要があります*1。Versions of the IVD のリンクから、最新版の IVD_Sequences.txt をダウンロードする\\Program Files (x86)\\svivs\\IVD_Sequences.txt を、ダウンロードした IVD_Sequences.txt で上書きする\\Users\\{ユーザ名}\\AppData\\Roaming\\net.shiromoji.Svivs\\ivd.sqlite を削除するsvivs を起動するAdobe-Japan1, Hanyo-Denshi 以外のコレクションが新設されるなどした場合には対応できませんので、ご注意ください。*1:パスは Windows 7 64bit 環境での例。自分の環境に合わせて適宜読み替えてください。","link":"https://shiromoji.hatenablog.jp/entry/20121113/1352824794","isoDate":"2012-11-12T16:39:54.000Z","dateMiliSeconds":1352738394000,"imageUrl":"https://cdn.blog.st-hatena.com/images/theme/og-image-1500.png","authorName":"mashabow"},{"title":"アウトラインのSVGからフォントを生成 #かな書いてみる","content":"\u003cp\u003eIVSやら何やら他の話題に飛びついていたので間が空いてしまったが、明朝かな書体制作のつづき。\u003ca href=\"http://d.hatena.ne.jp/mashabow/20120229/1330530950\"\u003e\u0026#x524D;\u0026#x56DE;\u0026#x306F;\u0026#x30A2;\u0026#x30A6;\u0026#x30C8;\u0026#x30E9;\u0026#x30A4;\u0026#x30F3;\u0026#x3092;\u0026#x4F5C;\u0026#x3063;\u0026#x305F;\u003c/a\u003eので、今回はここからフォントを生成したい。\u003c/p\u003e\n\n\u003cdiv class=\"section\"\u003e\n    \u003ch4\u003e\u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/SVG\"\u003eSVG\u003c/a\u003eの分割\u003c/h4\u003e\n    \n\u003cul\u003e\n\u003cli\u003e\u003ca href=\"http://shiromoji.net/font/zeromin/0.100/hiragana_1.svg\"\u003ehiragana_1.svg\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e\u003cp\u003eまず、これがアウトラインのファイル。\u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/Inkscape\"\u003eInkscape\u003c/a\u003e で作成し、\u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/SVG\"\u003eSVG\u003c/a\u003eとして保存した。アウトラインは outline という名前のレイヤーの中に作っている。仮想ボディのサイズは100pxとした。\u003c/p\u003e\u003cp\u003eこれをグリフごとに分割し、1文字1ファイルにする。今回は（も？）\u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/Perl\"\u003ePerl\u003c/a\u003e で簡単な\u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/%A5%B9%A5%AF%A5%EA%A5%D7%A5%C8\"\u003eスクリプト\u003c/a\u003eを書き、これを利用した。単純なものなので、path 要素以外の要素（グループも含む）に対応していないなどいろいろと制限はある。また \u003ca href=\"http://search.cpan.org/perldoc?XML::Simple\"\u003eXML::Simple\u003c/a\u003e を利用しているので、実行するには \u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/XML\"\u003eXML\u003c/a\u003e::Simple のインストールが必要。\u003c/p\u003e\n\n\u003cul\u003e\n\u003cli\u003e\u003ca href=\"http://shiromoji.net/font/zeromin/0.100/split_svg.pl\"\u003esplit_svg.pl\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e\u003cpre class=\"code lang-perl\" data-lang=\"perl\" data-unlink\u003e\u003cspan class=\"synPreProc\"\u003e#!/usr/bin/perl\u003c/span\u003e\n\u003cspan class=\"synComment\"\u003e#\u003c/span\u003e\n\u003cspan class=\"synComment\"\u003e# SVGをグリフごとに分割\u003c/span\u003e\n\u003cspan class=\"synComment\"\u003e# usage: perl split_svg.pl svg_sheet.svg list.txt\u003c/span\u003e\n\n\u003cspan class=\"synStatement\"\u003euse strict\u003c/span\u003e;\n\u003cspan class=\"synStatement\"\u003euse warnings\u003c/span\u003e;\n\u003cspan class=\"synStatement\"\u003euse \u003c/span\u003eautodie;\n\u003cspan class=\"synStatement\"\u003euse utf8\u003c/span\u003e;\n\u003cspan class=\"synStatement\"\u003euse \u003c/span\u003e\u003cspan class=\"synConstant\"\u003e5.010\u003c/span\u003e;\n\u003cspan class=\"synStatement\"\u003ebinmode\u003c/span\u003e \u003cspan class=\"synIdentifier\"\u003eSTDOUT\u003c/span\u003e, \u003cspan class=\"synConstant\"\u003e\u0026quot;:utf8\u0026quot;\u003c/span\u003e;\n\n\u003cspan class=\"synStatement\"\u003euse constant\u003c/span\u003e \u003cspan class=\"synConstant\"\u003eOUT_DIR\u003c/span\u003e =\u0026gt; \u003cspan class=\"synConstant\"\u003e\u0026quot;glyphs\u0026quot;\u003c/span\u003e;\n\u003cspan class=\"synStatement\"\u003euse constant\u003c/span\u003e \u003cspan class=\"synConstant\"\u003ePIXELS_PER_EM\u003c/span\u003e =\u0026gt;  \u003cspan class=\"synConstant\"\u003e100\u003c/span\u003e;\n\u003cspan class=\"synStatement\"\u003euse constant\u003c/span\u003e \u003cspan class=\"synConstant\"\u003eUNITS_PER_EM\u003c/span\u003e  =\u0026gt; \u003cspan class=\"synConstant\"\u003e1000\u003c/span\u003e;\n\n\u003cspan class=\"synStatement\"\u003euse \u003c/span\u003eXML::Simple;\n\n\u003cspan class=\"synStatement\"\u003emy\u003c/span\u003e (\u003cspan class=\"synIdentifier\"\u003e$svg_file\u003c/span\u003e, \u003cspan class=\"synIdentifier\"\u003e$list_file\u003c/span\u003e) = \u003cspan class=\"synIdentifier\"\u003e@ARGV\u003c/span\u003e;\n\n\u003cspan class=\"synComment\"\u003e# SVG 読み込み\u003c/span\u003e\n\u003cspan class=\"synStatement\"\u003emy\u003c/span\u003e \u003cspan class=\"synIdentifier\"\u003e$svg\u003c/span\u003e = XMLin(\u003cspan class=\"synIdentifier\"\u003e$svg_file\u003c/span\u003e, \u003cspan class=\"synConstant\"\u003eforcearray\u003c/span\u003e =\u0026gt; \u003cspan class=\"synConstant\"\u003e1\u003c/span\u003e, \u003cspan class=\"synConstant\"\u003ekeyattr\u003c/span\u003e =\u0026gt; []);\n\n\u003cspan class=\"synComment\"\u003e# 行数・列数を求める\u003c/span\u003e\n\u003cspan class=\"synStatement\"\u003emy\u003c/span\u003e \u003cspan class=\"synIdentifier\"\u003e$row_max\u003c/span\u003e = \u003cspan class=\"synStatement\"\u003eint\u003c/span\u003e (\u003cspan class=\"synIdentifier\"\u003e$svg-\u0026gt;{\u003c/span\u003e\u003cspan class=\"synConstant\"\u003eheight\u003c/span\u003e\u003cspan class=\"synIdentifier\"\u003e}\u003c/span\u003e / PIXELS_PER_EM) - \u003cspan class=\"synConstant\"\u003e1\u003c/span\u003e;\n\u003cspan class=\"synStatement\"\u003emy\u003c/span\u003e \u003cspan class=\"synIdentifier\"\u003e$col_max\u003c/span\u003e = \u003cspan class=\"synStatement\"\u003eint\u003c/span\u003e (\u003cspan class=\"synIdentifier\"\u003e$svg-\u0026gt;{\u003c/span\u003e\u003cspan class=\"synConstant\"\u003ewidth\u003c/span\u003e\u003cspan class=\"synIdentifier\"\u003e}\u003c/span\u003e / PIXELS_PER_EM) - \u003cspan class=\"synConstant\"\u003e1\u003c/span\u003e;\n\n\u003cspan class=\"synComment\"\u003e# outline レイヤーを探す\u003c/span\u003e\n\u003cspan class=\"synStatement\"\u003emy\u003c/span\u003e \u003cspan class=\"synIdentifier\"\u003e$groups\u003c/span\u003e = \u003cspan class=\"synIdentifier\"\u003e$svg-\u0026gt;{\u003c/span\u003e\u003cspan class=\"synConstant\"\u003eg\u003c/span\u003e\u003cspan class=\"synIdentifier\"\u003e}\u003c/span\u003e;\n\u003cspan class=\"synStatement\"\u003emy\u003c/span\u003e \u003cspan class=\"synIdentifier\"\u003e$group_outline\u003c/span\u003e;\n\u003cspan class=\"synStatement\"\u003eforeach\u003c/span\u003e \u003cspan class=\"synStatement\"\u003emy\u003c/span\u003e \u003cspan class=\"synIdentifier\"\u003e$group\u003c/span\u003e (\u003cspan class=\"synIdentifier\"\u003e@$groups\u003c/span\u003e) {\n  \u003cspan class=\"synStatement\"\u003eif\u003c/span\u003e (\u003cspan class=\"synIdentifier\"\u003e$group-\u0026gt;{\u003c/span\u003e\u003cspan class=\"synConstant\"\u003e'inkscape:label'\u003c/span\u003e\u003cspan class=\"synIdentifier\"\u003e}\u003c/span\u003e \u003cspan class=\"synStatement\"\u003eeq\u003c/span\u003e \u003cspan class=\"synConstant\"\u003e\u0026quot;outline\u0026quot;\u003c/span\u003e) {\n    \u003cspan class=\"synIdentifier\"\u003e$group_outline\u003c/span\u003e = \u003cspan class=\"synIdentifier\"\u003e$group\u003c/span\u003e;\n    \u003cspan class=\"synStatement\"\u003elast\u003c/span\u003e;\n  }\n}\n\u003cspan class=\"synStatement\"\u003edie\u003c/span\u003e \u003cspan class=\"synConstant\"\u003e\u0026quot;outlineレイヤーが存在しません\u0026quot;\u003c/span\u003e \u003cspan class=\"synStatement\"\u003eunless\u003c/span\u003e \u003cspan class=\"synStatement\"\u003edefined\u003c/span\u003e \u003cspan class=\"synIdentifier\"\u003e$group_outline\u003c/span\u003e;\n\n\u003cspan class=\"synComment\"\u003e# 変換行列を求める\u003c/span\u003e\n\u003cspan class=\"synStatement\"\u003emy\u003c/span\u003e \u003cspan class=\"synIdentifier\"\u003e$transform\u003c/span\u003e = \u003cspan class=\"synIdentifier\"\u003e$group_outline-\u0026gt;{\u003c/span\u003e\u003cspan class=\"synConstant\"\u003etransform\u003c/span\u003e\u003cspan class=\"synIdentifier\"\u003e}\u003c/span\u003e;\n\u003cspan class=\"synStatement\"\u003emy\u003c/span\u003e (\u003cspan class=\"synIdentifier\"\u003e$a\u003c/span\u003e, \u003cspan class=\"synIdentifier\"\u003e$b\u003c/span\u003e, \u003cspan class=\"synIdentifier\"\u003e$c\u003c/span\u003e, \u003cspan class=\"synIdentifier\"\u003e$d\u003c/span\u003e, \u003cspan class=\"synIdentifier\"\u003e$e\u003c/span\u003e, \u003cspan class=\"synIdentifier\"\u003e$f\u003c/span\u003e) = (\u003cspan class=\"synConstant\"\u003e1\u003c/span\u003e, \u003cspan class=\"synConstant\"\u003e0\u003c/span\u003e, \u003cspan class=\"synConstant\"\u003e0\u003c/span\u003e, \u003cspan class=\"synConstant\"\u003e1\u003c/span\u003e, \u003cspan class=\"synConstant\"\u003e0\u003c/span\u003e, \u003cspan class=\"synConstant\"\u003e0\u003c/span\u003e);\n\u003cspan class=\"synStatement\"\u003eif\u003c/span\u003e (!\u003cspan class=\"synStatement\"\u003edefined\u003c/span\u003e \u003cspan class=\"synIdentifier\"\u003e$transform\u003c/span\u003e) {\n  \u003cspan class=\"synComment\"\u003e# noop\u003c/span\u003e\n} \u003cspan class=\"synStatement\"\u003eelsif\u003c/span\u003e (\u003cspan class=\"synIdentifier\"\u003e$transform\u003c/span\u003e =~ \u003cspan class=\"synStatement\"\u003em/\u003c/span\u003e\u003cspan class=\"synConstant\"\u003etranslate\u003c/span\u003e\u003cspan class=\"synSpecial\"\u003e\\((?\u003c/span\u003e\u003cspan class=\"synConstant\"\u003e\u0026lt;tx\u0026gt;-\u003c/span\u003e\u003cspan class=\"synSpecial\"\u003e?\\d+(.\\d+)?(\u003c/span\u003e\u003cspan class=\"synConstant\"\u003ee-\u003c/span\u003e\u003cspan class=\"synSpecial\"\u003e?\\d+)?)\u003c/span\u003e\u003cspan class=\"synConstant\"\u003e,\u003c/span\u003e\u003cspan class=\"synSpecial\"\u003e(?\u003c/span\u003e\u003cspan class=\"synConstant\"\u003e\u0026lt;ty\u0026gt;-\u003c/span\u003e\u003cspan class=\"synSpecial\"\u003e?\\d+(.\\d+)?(\u003c/span\u003e\u003cspan class=\"synConstant\"\u003ee-\u003c/span\u003e\u003cspan class=\"synSpecial\"\u003e?\\d+)?)\\)\u003c/span\u003e\u003cspan class=\"synStatement\"\u003e/\u003c/span\u003e) {\n  \u003cspan class=\"synIdentifier\"\u003e$e\u003c/span\u003e = \u003cspan class=\"synIdentifier\"\u003e$+\u003c/span\u003e{tx};\n  \u003cspan class=\"synIdentifier\"\u003e$f\u003c/span\u003e = \u003cspan class=\"synIdentifier\"\u003e$+\u003c/span\u003e{ty};\n} \u003cspan class=\"synStatement\"\u003eelsif\u003c/span\u003e (\u003cspan class=\"synIdentifier\"\u003e$transform\u003c/span\u003e =~ \u003cspan class=\"synStatement\"\u003em/\u003c/span\u003e\u003cspan class=\"synConstant\"\u003ematrix\u003c/span\u003e\u003cspan class=\"synSpecial\"\u003e\\((?\u003c/span\u003e\u003cspan class=\"synConstant\"\u003e\u0026lt;a\u0026gt;-\u003c/span\u003e\u003cspan class=\"synSpecial\"\u003e?\\d+(.\\d+)?(\u003c/span\u003e\u003cspan class=\"synConstant\"\u003ee-\u003c/span\u003e\u003cspan class=\"synSpecial\"\u003e?\\d+)?)\u003c/span\u003e\u003cspan class=\"synConstant\"\u003e,\u003c/span\u003e\u003cspan class=\"synSpecial\"\u003e(?\u003c/span\u003e\u003cspan class=\"synConstant\"\u003e\u0026lt;b\u0026gt;-\u003c/span\u003e\u003cspan class=\"synSpecial\"\u003e?\\d+(.\\d+)?(\u003c/span\u003e\u003cspan class=\"synConstant\"\u003ee-\u003c/span\u003e\u003cspan class=\"synSpecial\"\u003e?\\d+)?)\\)\u003c/span\u003e\u003cspan class=\"synConstant\"\u003e,\u003c/span\u003e\u003cspan class=\"synSpecial\"\u003e(?\u003c/span\u003e\u003cspan class=\"synConstant\"\u003e\u0026lt;c\u0026gt;-\u003c/span\u003e\u003cspan class=\"synSpecial\"\u003e?\\d+(.\\d+)?(\u003c/span\u003e\u003cspan class=\"synConstant\"\u003ee-\u003c/span\u003e\u003cspan class=\"synSpecial\"\u003e?\\d+)?)\u003c/span\u003e\u003cspan class=\"synConstant\"\u003e,\u003c/span\u003e\u003cspan class=\"synSpecial\"\u003e(?\u003c/span\u003e\u003cspan class=\"synConstant\"\u003e\u0026lt;d\u0026gt;-\u003c/span\u003e\u003cspan class=\"synSpecial\"\u003e?\\d+(.\\d+)?(\u003c/span\u003e\u003cspan class=\"synConstant\"\u003ee-\u003c/span\u003e\u003cspan class=\"synSpecial\"\u003e?\\d+)?)\u003c/span\u003e\u003cspan class=\"synConstant\"\u003e,\u003c/span\u003e\u003cspan class=\"synSpecial\"\u003e(?\u003c/span\u003e\u003cspan class=\"synConstant\"\u003e\u0026lt;e\u0026gt;-\u003c/span\u003e\u003cspan class=\"synSpecial\"\u003e?\\d+(.\\d+)?(\u003c/span\u003e\u003cspan class=\"synConstant\"\u003ee-\u003c/span\u003e\u003cspan class=\"synSpecial\"\u003e?\\d+)?)\u003c/span\u003e\u003cspan class=\"synConstant\"\u003e,\u003c/span\u003e\u003cspan class=\"synSpecial\"\u003e(?\u003c/span\u003e\u003cspan class=\"synConstant\"\u003e\u0026lt;f\u0026gt;-\u003c/span\u003e\u003cspan class=\"synSpecial\"\u003e?\\d+(.\\d+)?(\u003c/span\u003e\u003cspan class=\"synConstant\"\u003ee-\u003c/span\u003e\u003cspan class=\"synSpecial\"\u003e?\\d+)?)\u003c/span\u003e\u003cspan class=\"synStatement\"\u003e/\u003c/span\u003e) {\n  \u003cspan class=\"synIdentifier\"\u003e$a\u003c/span\u003e = \u003cspan class=\"synIdentifier\"\u003e$+\u003c/span\u003e{a};  \u003cspan class=\"synIdentifier\"\u003e$c\u003c/span\u003e = \u003cspan class=\"synIdentifier\"\u003e$+\u003c/span\u003e{c};  \u003cspan class=\"synIdentifier\"\u003e$e\u003c/span\u003e = \u003cspan class=\"synIdentifier\"\u003e$+\u003c/span\u003e{e};\n  \u003cspan class=\"synIdentifier\"\u003e$b\u003c/span\u003e = \u003cspan class=\"synIdentifier\"\u003e$+\u003c/span\u003e{b};  \u003cspan class=\"synIdentifier\"\u003e$d\u003c/span\u003e = \u003cspan class=\"synIdentifier\"\u003e$+\u003c/span\u003e{d};  \u003cspan class=\"synIdentifier\"\u003e$f\u003c/span\u003e = \u003cspan class=\"synIdentifier\"\u003e$+\u003c/span\u003e{f};\n} \u003cspan class=\"synStatement\"\u003eelse\u003c/span\u003e {\n  \u003cspan class=\"synStatement\"\u003edie\u003c/span\u003e \u003cspan class=\"synConstant\"\u003e\u0026quot;未対応のtransformです: \u003c/span\u003e\u003cspan class=\"synIdentifier\"\u003e$transform\u003c/span\u003e\u003cspan class=\"synConstant\"\u003e\u0026quot;\u003c/span\u003e\n}\n\n\u003cspan class=\"synComment\"\u003e# グリフごとに path を格納する変数\u003c/span\u003e\n\u003cspan class=\"synStatement\"\u003emy\u003c/span\u003e \u003cspan class=\"synIdentifier\"\u003e@glyphs\u003c/span\u003e = ();\n\u003cspan class=\"synStatement\"\u003eforeach\u003c/span\u003e \u003cspan class=\"synStatement\"\u003emy\u003c/span\u003e \u003cspan class=\"synIdentifier\"\u003e$row\u003c/span\u003e (\u003cspan class=\"synConstant\"\u003e0\u003c/span\u003e .. \u003cspan class=\"synIdentifier\"\u003e$row_max\u003c/span\u003e) {\n  \u003cspan class=\"synStatement\"\u003eforeach\u003c/span\u003e \u003cspan class=\"synStatement\"\u003emy\u003c/span\u003e \u003cspan class=\"synIdentifier\"\u003e$col\u003c/span\u003e (\u003cspan class=\"synConstant\"\u003e0\u003c/span\u003e .. \u003cspan class=\"synIdentifier\"\u003e$col_max\u003c/span\u003e) {\n    \u003cspan class=\"synIdentifier\"\u003e$glyphs[$row][$col]\u003c/span\u003e = [];\n  }\n}\n\n\u003cspan class=\"synComment\"\u003e# @glyphs にパスを格納\u003c/span\u003e\n\u003cspan class=\"synStatement\"\u003emy\u003c/span\u003e \u003cspan class=\"synIdentifier\"\u003e$paths\u003c/span\u003e = \u003cspan class=\"synIdentifier\"\u003e$group_outline-\u0026gt;{\u003c/span\u003e\u003cspan class=\"synConstant\"\u003epath\u003c/span\u003e\u003cspan class=\"synIdentifier\"\u003e}\u003c/span\u003e;\n\u003cspan class=\"synStatement\"\u003eforeach\u003c/span\u003e \u003cspan class=\"synStatement\"\u003emy\u003c/span\u003e \u003cspan class=\"synIdentifier\"\u003e$path\u003c/span\u003e (\u003cspan class=\"synIdentifier\"\u003e@$paths\u003c/span\u003e) {\n  \u003cspan class=\"synStatement\"\u003emy\u003c/span\u003e \u003cspan class=\"synIdentifier\"\u003e@data_args\u003c/span\u003e = \u003cspan class=\"synStatement\"\u003esplit\u003c/span\u003e \u003cspan class=\"synStatement\"\u003e/\u003c/span\u003e\u003cspan class=\"synSpecial\"\u003e\\s+\u003c/span\u003e\u003cspan class=\"synStatement\"\u003e/\u003c/span\u003e, \u003cspan class=\"synIdentifier\"\u003e$path-\u0026gt;{\u003c/span\u003e\u003cspan class=\"synConstant\"\u003ed\u003c/span\u003e\u003cspan class=\"synIdentifier\"\u003e}\u003c/span\u003e;\n  \u003cspan class=\"synStatement\"\u003emy\u003c/span\u003e \u003cspan class=\"synIdentifier\"\u003e$new_data\u003c/span\u003e = \u003cspan class=\"synConstant\"\u003e\u0026quot;\u0026quot;\u003c/span\u003e;\n  \u003cspan class=\"synStatement\"\u003emy\u003c/span\u003e (\u003cspan class=\"synIdentifier\"\u003e$col\u003c/span\u003e, \u003cspan class=\"synIdentifier\"\u003e$row\u003c/span\u003e);\n  \u003cspan class=\"synStatement\"\u003emy\u003c/span\u003e \u003cspan class=\"synIdentifier\"\u003e$is_moveto_point\u003c/span\u003e = \u003cspan class=\"synConstant\"\u003e1\u003c/span\u003e;\n  \u003cspan class=\"synStatement\"\u003eforeach\u003c/span\u003e \u003cspan class=\"synStatement\"\u003emy\u003c/span\u003e \u003cspan class=\"synIdentifier\"\u003e$data_arg\u003c/span\u003e (\u003cspan class=\"synIdentifier\"\u003e@data_args\u003c/span\u003e) {\n    \u003cspan class=\"synStatement\"\u003eif\u003c/span\u003e (\u003cspan class=\"synIdentifier\"\u003e$data_arg\u003c/span\u003e =~ \u003cspan class=\"synStatement\"\u003em/\u003c/span\u003e\u003cspan class=\"synSpecial\"\u003e(?\u003c/span\u003e\u003cspan class=\"synConstant\"\u003e\u0026lt;x\u0026gt;-\u003c/span\u003e\u003cspan class=\"synSpecial\"\u003e?\\d+(.\\d+)?)\u003c/span\u003e\u003cspan class=\"synConstant\"\u003e,\u003c/span\u003e\u003cspan class=\"synSpecial\"\u003e(?\u003c/span\u003e\u003cspan class=\"synConstant\"\u003e\u0026lt;y\u0026gt;-\u003c/span\u003e\u003cspan class=\"synSpecial\"\u003e?\\d+(.\\d+)?)\u003c/span\u003e\u003cspan class=\"synStatement\"\u003e/\u003c/span\u003e) {\n      \u003cspan class=\"synStatement\"\u003emy\u003c/span\u003e \u003cspan class=\"synIdentifier\"\u003e$x\u003c/span\u003e = \u003cspan class=\"synIdentifier\"\u003e$+\u003c/span\u003e{x};\n      \u003cspan class=\"synStatement\"\u003emy\u003c/span\u003e \u003cspan class=\"synIdentifier\"\u003e$y\u003c/span\u003e = \u003cspan class=\"synIdentifier\"\u003e$+\u003c/span\u003e{\u003cspan class=\"synStatement\"\u003ey}\u003c/span\u003e\u003cspan class=\"synConstant\"\u003e;\u003c/span\u003e\n\u003cspan class=\"synConstant\"\u003e      if ($is_moveto_point) {\u003c/span\u003e\n\u003cspan class=\"synConstant\"\u003e        $x = $a * $x + $c * $y + $e;\u003c/span\u003e\n\u003cspan class=\"synConstant\"\u003e        $y = $b * $x + $d * $y + $f;\u003c/span\u003e\n\u003cspan class=\"synConstant\"\u003e        $col = int ($x / PIXELS_PER_EM);\u003c/span\u003e\n\u003cspan class=\"synConstant\"\u003e        $row = int ($y / PIXELS_PER_EM);\u003c/span\u003e\n\u003cspan class=\"synConstant\"\u003e        $x %= PIXELS_PER_EM;\u003c/span\u003e\n\u003cspan class=\"synConstant\"\u003e        $y %= PIXELS_PER_EM;\u003c/span\u003e\n\u003cspan class=\"synConstant\"\u003e        $is_moveto_point = 0;\u003c/span\u003e\n\u003cspan class=\"synConstant\"\u003e      \u003c/span\u003e\u003cspan class=\"synStatement\"\u003e}\u003c/span\u003e\n\u003cspan class=\"synConstant\"\u003e      $x *= UNITS_PER_EM / PIXELS_PER_EM;\u003c/span\u003e\n\u003cspan class=\"synConstant\"\u003e      $y *= UNITS_PER_EM / PIXELS_PER_EM;\u003c/span\u003e\n\u003cspan class=\"synConstant\"\u003e      $data_arg = \u0026quot;$x,$y\u0026quot;\u003c/span\u003e\n\u003cspan class=\"synConstant\"\u003e    \u003c/span\u003e\u003cspan class=\"synStatement\"\u003e}\u003c/span\u003e\n    \u003cspan class=\"synIdentifier\"\u003e$new_data\u003c/span\u003e .= \u003cspan class=\"synConstant\"\u003e\u0026quot;\u003c/span\u003e\u003cspan class=\"synIdentifier\"\u003e$data_arg\u003c/span\u003e\u003cspan class=\"synConstant\"\u003e \u0026quot;\u003c/span\u003e;\n  } \n  \u003cspan class=\"synStatement\"\u003enext\u003c/span\u003e \u003cspan class=\"synStatement\"\u003eif\u003c/span\u003e (\u003cspan class=\"synIdentifier\"\u003e$col\u003c/span\u003e \u0026lt; \u003cspan class=\"synConstant\"\u003e0\u003c/span\u003e || \u003cspan class=\"synIdentifier\"\u003e$col_max\u003c/span\u003e \u0026lt; \u003cspan class=\"synIdentifier\"\u003e$col\u003c/span\u003e || \u003cspan class=\"synIdentifier\"\u003e$row\u003c/span\u003e \u0026lt; \u003cspan class=\"synConstant\"\u003e0\u003c/span\u003e || \u003cspan class=\"synIdentifier\"\u003e$row_max\u003c/span\u003e \u0026lt; \u003cspan class=\"synIdentifier\"\u003e$row\u003c/span\u003e);\n  \u003cspan class=\"synIdentifier\"\u003e$path-\u0026gt;{\u003c/span\u003e\u003cspan class=\"synConstant\"\u003ed\u003c/span\u003e\u003cspan class=\"synIdentifier\"\u003e}\u003c/span\u003e = \u003cspan class=\"synIdentifier\"\u003e$new_data\u003c/span\u003e;\n  \u003cspan class=\"synStatement\"\u003epush\u003c/span\u003e \u003cspan class=\"synIdentifier\"\u003e@{$glyphs[$row][$col]}\u003c/span\u003e, \u003cspan class=\"synIdentifier\"\u003e$path\u003c/span\u003e;\n}\n\n\u003cspan class=\"synComment\"\u003e# リスト読み込み\u003c/span\u003e\n\u003cspan class=\"synStatement\"\u003emy\u003c/span\u003e \u003cspan class=\"synIdentifier\"\u003e@glyphname_list\u003c/span\u003e = ();\n\u003cspan class=\"synStatement\"\u003eopen\u003c/span\u003e \u003cspan class=\"synStatement\"\u003emy\u003c/span\u003e \u003cspan class=\"synIdentifier\"\u003e$fh_list\u003c/span\u003e, \u003cspan class=\"synConstant\"\u003e'\u0026lt;:utf8'\u003c/span\u003e, \u003cspan class=\"synIdentifier\"\u003e$list_file\u003c/span\u003e;\n\u003cspan class=\"synStatement\"\u003ewhile\u003c/span\u003e (\u003cspan class=\"synStatement\"\u003emy\u003c/span\u003e \u003cspan class=\"synIdentifier\"\u003e$line\u003c/span\u003e = \u0026lt;\u003cspan class=\"synIdentifier\"\u003e$fh_list\u003c/span\u003e\u0026gt;) {\n  \u003cspan class=\"synStatement\"\u003echomp\u003c/span\u003e \u003cspan class=\"synIdentifier\"\u003e$line\u003c/span\u003e;\n  \u003cspan class=\"synStatement\"\u003emy\u003c/span\u003e \u003cspan class=\"synIdentifier\"\u003e@list\u003c/span\u003e = \u003cspan class=\"synStatement\"\u003emap {\u003c/span\u003e \u003cspan class=\"synStatement\"\u003esprintf\u003c/span\u003e \u003cspan class=\"synConstant\"\u003e\u0026quot;u%x\u0026quot;\u003c/span\u003e, (\u003cspan class=\"synStatement\"\u003eunpack\u003c/span\u003e \u003cspan class=\"synConstant\"\u003e\u0026quot;U*\u0026quot;\u003c/span\u003e, \u003cspan class=\"synIdentifier\"\u003e$_\u003c/span\u003e) \u003cspan class=\"synStatement\"\u003e}\u003c/span\u003e \u003cspan class=\"synStatement\"\u003esplit\u003c/span\u003e \u003cspan class=\"synStatement\"\u003e/\u003c/span\u003e\u003cspan class=\"synConstant\"\u003e \u003c/span\u003e\u003cspan class=\"synSpecial\"\u003e+\u003c/span\u003e\u003cspan class=\"synStatement\"\u003e/\u003c/span\u003e, \u003cspan class=\"synIdentifier\"\u003e$line\u003c/span\u003e;\n  \u003cspan class=\"synStatement\"\u003epush\u003c/span\u003e \u003cspan class=\"synIdentifier\"\u003e@glyphname_list\u003c/span\u003e, \\\u003cspan class=\"synIdentifier\"\u003e@list\u003c/span\u003e;\n}\n\u003cspan class=\"synStatement\"\u003eclose\u003c/span\u003e \u003cspan class=\"synIdentifier\"\u003e$fh_list\u003c/span\u003e;\n\n\u003cspan class=\"synComment\"\u003e# 各グリフの SVG を生成\u003c/span\u003e\n\u003cspan class=\"synStatement\"\u003emkdir\u003c/span\u003e OUT_DIR \u003cspan class=\"synStatement\"\u003eif\u003c/span\u003e !\u003cspan class=\"synStatement\"\u003e-d\u003c/span\u003e OUT_DIR;\n\u003cspan class=\"synStatement\"\u003eforeach\u003c/span\u003e \u003cspan class=\"synStatement\"\u003emy\u003c/span\u003e \u003cspan class=\"synIdentifier\"\u003e$row\u003c/span\u003e (\u003cspan class=\"synConstant\"\u003e0\u003c/span\u003e .. \u003cspan class=\"synIdentifier\"\u003e$row_max\u003c/span\u003e) {\n  \u003cspan class=\"synStatement\"\u003eforeach\u003c/span\u003e \u003cspan class=\"synStatement\"\u003emy\u003c/span\u003e \u003cspan class=\"synIdentifier\"\u003e$col\u003c/span\u003e (\u003cspan class=\"synConstant\"\u003e0\u003c/span\u003e .. \u003cspan class=\"synIdentifier\"\u003e$col_max\u003c/span\u003e) {\n    \u003cspan class=\"synStatement\"\u003emy\u003c/span\u003e \u003cspan class=\"synIdentifier\"\u003e$svg\u003c/span\u003e;\n    \u003cspan class=\"synIdentifier\"\u003e$svg-\u0026gt;{\u003c/span\u003e\u003cspan class=\"synConstant\"\u003e'xmlns:sodipodi'\u003c/span\u003e\u003cspan class=\"synIdentifier\"\u003e}\u003c/span\u003e = \u003cspan class=\"synConstant\"\u003e\u0026quot;http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd\u0026quot;\u003c/span\u003e;\n    \u003cspan class=\"synIdentifier\"\u003e$svg-\u0026gt;{\u003c/span\u003e\u003cspan class=\"synConstant\"\u003e'xmlns:inkscape'\u003c/span\u003e\u003cspan class=\"synIdentifier\"\u003e}\u003c/span\u003e = \u003cspan class=\"synConstant\"\u003e\u0026quot;http://www.inkscape.org/namespaces/inkscape\u0026quot;\u003c/span\u003e;\n    \u003cspan class=\"synIdentifier\"\u003e$svg-\u0026gt;{\u003c/span\u003e\u003cspan class=\"synConstant\"\u003ewidth\u003c/span\u003e\u003cspan class=\"synIdentifier\"\u003e}\u003c/span\u003e = UNITS_PER_EM;\n    \u003cspan class=\"synIdentifier\"\u003e$svg-\u0026gt;{\u003c/span\u003e\u003cspan class=\"synConstant\"\u003eheight\u003c/span\u003e\u003cspan class=\"synIdentifier\"\u003e}\u003c/span\u003e = UNITS_PER_EM;\n    \u003cspan class=\"synIdentifier\"\u003e$svg-\u0026gt;{\u003c/span\u003e\u003cspan class=\"synConstant\"\u003epath\u003c/span\u003e\u003cspan class=\"synIdentifier\"\u003e}\u003c/span\u003e = \u003cspan class=\"synIdentifier\"\u003e$glyphs[$row][$col]\u003c/span\u003e;\n    \u003cspan class=\"synStatement\"\u003emy\u003c/span\u003e \u003cspan class=\"synIdentifier\"\u003e$svg_string\u003c/span\u003e = \u003cspan class=\"synConstant\"\u003e'\u0026lt;?xml version=\u0026quot;1.0\u0026quot; encoding=\u0026quot;UTF-8\u0026quot;?\u0026gt;'\u003c/span\u003e;\n    \u003cspan class=\"synIdentifier\"\u003e$svg_string\u003c/span\u003e .= \u003cspan class=\"synConstant\"\u003e\u0026quot;\u003c/span\u003e\u003cspan class=\"synSpecial\"\u003e\\n\u003c/span\u003e\u003cspan class=\"synConstant\"\u003e\u0026quot;\u003c/span\u003e . XMLout(\u003cspan class=\"synIdentifier\"\u003e$svg\u003c/span\u003e, \u003cspan class=\"synConstant\"\u003eRootName\u003c/span\u003e =\u0026gt; \u003cspan class=\"synConstant\"\u003e\u0026quot;svg\u0026quot;\u003c/span\u003e);\n    \u003cspan class=\"synStatement\"\u003emy\u003c/span\u003e \u003cspan class=\"synIdentifier\"\u003e$glyphname\u003c/span\u003e = \u003cspan class=\"synIdentifier\"\u003e$glyphname_list[$row][$col]\u003c/span\u003e;\n    \u003cspan class=\"synStatement\"\u003enext\u003c/span\u003e \u003cspan class=\"synStatement\"\u003eif\u003c/span\u003e (!\u003cspan class=\"synStatement\"\u003edefined\u003c/span\u003e \u003cspan class=\"synIdentifier\"\u003e$glyphname\u003c/span\u003e || \u003cspan class=\"synIdentifier\"\u003e$glyphname\u003c/span\u003e \u003cspan class=\"synStatement\"\u003eeq\u003c/span\u003e \u003cspan class=\"synConstant\"\u003e\u0026quot;u3000\u0026quot;\u003c/span\u003e); \u003cspan class=\"synComment\"\u003e# u3000：全角スペース\u003c/span\u003e\n    \u003cspan class=\"synStatement\"\u003eopen\u003c/span\u003e \u003cspan class=\"synStatement\"\u003emy\u003c/span\u003e \u003cspan class=\"synIdentifier\"\u003e$fh_out\u003c/span\u003e, \u003cspan class=\"synConstant\"\u003e'\u0026gt;'\u003c/span\u003e, OUT_DIR . \u003cspan class=\"synConstant\"\u003e\u0026quot;/\u003c/span\u003e\u003cspan class=\"synIdentifier\"\u003e$glyphname\u003c/span\u003e\u003cspan class=\"synConstant\"\u003e.svg\u0026quot;\u003c/span\u003e;\n    \u003cspan class=\"synStatement\"\u003eprint\u003c/span\u003e \u003cspan class=\"synIdentifier\"\u003e$fh_out\u003c/span\u003e \u003cspan class=\"synIdentifier\"\u003e$svg_string\u003c/span\u003e;\n    \u003cspan class=\"synStatement\"\u003eclose\u003c/span\u003e \u003cspan class=\"synIdentifier\"\u003e$fh_out\u003c/span\u003e;\n  }\n}\n\n\u003cspan class=\"synStatement\"\u003eexit\u003c/span\u003e \u003cspan class=\"synConstant\"\u003e0\u003c/span\u003e;\n\u003c/pre\u003e\u003cp\u003e\u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/SVG\"\u003eSVG\u003c/a\u003eのどのマスがどのグリフか、割り当て表も用意しておく。\u003c/p\u003e\n\n\u003cul\u003e\n\u003cli\u003e\u003ca href=\"http://shiromoji.net/font/zeromin/0.100/hiragana_list.txt\"\u003ehiragana_list.txt\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003cpre\u003eあ い う え お\nか き く け こ\nさ し す せ そ\nた ち つ て と\nな に ぬ ね の\nは ひ ふ へ ほ\nま み む め も\nや 　 ゆ 　 よ\nら り る れ ろ\nわ ゐ ん ゑ を\n\u003c/pre\u003e\u003cp\u003eこれを例えば\u003c/p\u003e\n\n\u003cpre\u003e\u003e \u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/perl\"\u003eperl\u003c/a\u003e split_\u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/svg\"\u003esvg\u003c/a\u003e.pl hiragana_1.\u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/svg\"\u003esvg\u003c/a\u003e hiragana_list.txt\n\u003c/pre\u003e\u003cp\u003eとして実行すれば、glyphs ディレクトリに一字一字の\u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/SVG\"\u003eSVG\u003c/a\u003eが生成される。\u003c/p\u003e\n\n\u003c/div\u003e\n\u003cdiv class=\"section\"\u003e\n    \u003ch4\u003e\u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/FontForge\"\u003eFontForge\u003c/a\u003e でフォント化\u003c/h4\u003e\n    \u003cp\u003eそして、このバラした\u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/SVG\"\u003eSVG\u003c/a\u003eファイルを \u003ca href=\"http://fontforge.sourceforge.net/ja/overview.html\"\u003eFontForge\u003c/a\u003e に取り込み、フォントを生成する。\u003c/p\u003e\u003cp\u003e\u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/FontForge\"\u003eFontForge\u003c/a\u003e では\u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/SVG\"\u003eSVG\u003c/a\u003eの1pxがフォントの1ユニットに相当する。また、OpenType の標準は1000ユニット/emなので、インポート元の\u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/SVG\"\u003eSVG\u003c/a\u003eを1000×1000pxにしておくとちょうど良い。今回は、split_\u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/svg\"\u003esvg\u003c/a\u003e.pl でバラすときに\u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/SVG\"\u003eSVG\u003c/a\u003eのサイズを1000×1000pxへ変換しているので、あとはそのままインポートするだけでよい。\u003c/p\u003e\n\n\u003cul\u003e\n\u003cli\u003e\u003ca href=\"http://shiromoji.net/font/zeromin/0.100/generate.pe\"\u003egenerate.pe\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003cpre\u003e#!/usr/bin/\u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/fontforge\"\u003efontforge\u003c/a\u003e -script\n\nif ($argc != 2)\n  Print(\"usage: \u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/fontforge\"\u003efontforge\u003c/a\u003e -script \" + $0 + \" [version]\")\n  Quit()\nendif\n\n_version      = $1\n_fontfilename = \"zeromin_\" + _version + \".otf\"\n_importfiles  = \"glyphs/u*.\u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/svg\"\u003esvg\u003c/a\u003e\"\n\nNew()\n\n# .notdef作成\nSelect(0x0000)\nSetWidth(1000)\nSetGlyphName(\".notdef\")\n\n# \u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/%A5%A8%A5%F3%A5%B3%A1%BC%A5%C9\"\u003eエンコード\u003c/a\u003eに\u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/Unicode\"\u003eUnicode\u003c/a\u003eを指定\nReencode(\"\u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/unicode\"\u003eunicode\u003c/a\u003e\")\n\n# \u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/SVG\"\u003eSVG\u003c/a\u003eをすべてインポート\nImport(_importfiles, 0)\n\n# 自動ヒントづけOFF\nSelectAll()\nDontAutoHint()\n\n# パスの統合\nRemoveOverlap()\n\n# 整数値に丸める\nRoundToInt()\n\n# 半角スペース作成\nSelect(0u0020)\nSetWidth(500)\n\n# 全角スペース作成\nSelect(0u3000)\nSetWidth(1000)\n\n# フォント情報設定\nSetFontNames(\"ZeroMin\",\\\n             \"ZeroMin\",\\\n             \"ZeroMin\",\\\n             \"Regular\",\\\n             \"\u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/%26%23169%3B\"\u003e\u0026#169;\u003c/a\u003e 2012 mashabow\",\\\n             _version) \nSetOS2Value(\"WinAscent\", 880)\nSetOS2Value(\"WinDescent\", 120)\nSetOS2Value(\"HHeadAscent\", 880)\nSetOS2Value(\"HHeadDescent\", -120)\n\n# OTF生成\nGenerate(_fontfilename)\nPrint(\"generated: \"+ _fontfilename)\n\nClose()\n\nQuit()\n\u003c/pre\u003e\u003cp\u003eこの\u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/%A5%B9%A5%AF%A5%EA%A5%D7%A5%C8\"\u003eスクリプト\u003c/a\u003eを \u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/FontForge\"\u003eFontForge\u003c/a\u003e で動かせば\u003ca href=\"#f-cf7ed247\" name=\"fn-cf7ed247\" title=\"unofficial fontforge-cygwin でのスクリプトの動かし方は[http://d.hatena.ne.jp/mashabow/20110802/1312290209:title=この記事]を参照。\"\u003e*1\u003c/a\u003e、とりあえずはフォントが生成される。最初の\u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/%CC%C0%C4%AB%C2%CE\"\u003e明朝体\u003c/a\u003eということで「ZeroMin」と仮に名付けてみた。\u003c/p\u003e\n\n\u003c/div\u003e\n\u003cdiv class=\"section\"\u003e\n    \u003ch4\u003e試し打ち\u003c/h4\u003e\n    \u003cp\u003e出来上がったフォントをインストールして、さっそく試し打ち。\u003c/p\u003e\n\n\u003cul\u003e\n\u003cli\u003e\u003ca href=\"http://shiromoji.net/font/zeromin/0.100/sample_0.100.pdf\"\u003esample_0.100.pdf\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e\u003cp\u003eんー。初めてにしてはまずまずなような気もしないでもないけど、やっぱり字面の大きさや寄り引き、太さなんかのバラつきが目立つ。実用にはちょっと堪えない。\u003c/p\u003e\u003cp\u003eというわけで、まだまだ先は長そう。\u003c/p\u003e\n\n\u003c/div\u003e\u003cdiv class=\"footnote\"\u003e\n\u003cp class=\"footnote\"\u003e\u003ca href=\"#fn-cf7ed247\" name=\"f-cf7ed247\" class=\"footnote-number\"\u003e*1\u003c/a\u003e\u003cspan class=\"footnote-delimiter\"\u003e:\u003c/span\u003e\u003cspan class=\"footnote-text\"\u003eunofficial \u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/fontforge\"\u003efontforge\u003c/a\u003e-\u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/cygwin\"\u003ecygwin\u003c/a\u003e での\u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/%A5%B9%A5%AF%A5%EA%A5%D7%A5%C8\"\u003eスクリプト\u003c/a\u003eの動かし方は\u003ca href=\"http://d.hatena.ne.jp/mashabow/20110802/1312290209\"\u003e\u0026#x3053;\u0026#x306E;\u0026#x8A18;\u0026#x4E8B;\u003c/a\u003eを参照。\u003c/span\u003e\u003c/p\u003e\n\u003c/div\u003e","contentSnippet":"IVSやら何やら他の話題に飛びついていたので間が空いてしまったが、明朝かな書体制作のつづき。前回はアウトラインを作ったので、今回はここからフォントを生成したい。SVGの分割hiragana_1.svgまず、これがアウトラインのファイル。Inkscape で作成し、SVGとして保存した。アウトラインは outline という名前のレイヤーの中に作っている。仮想ボディのサイズは100pxとした。これをグリフごとに分割し、1文字1ファイルにする。今回は（も？）Perl で簡単なスクリプトを書き、これを利用した。単純なものなので、path 要素以外の要素（グループも含む）に対応していないなどいろいろと制限はある。また XML::Simple を利用しているので、実行するには XML::Simple のインストールが必要。split_svg.pl#!/usr/bin/perl## SVGをグリフごとに分割# usage: perl split_svg.pl svg_sheet.svg list.txtuse strict;use warnings;use autodie;use utf8;use 5.010;binmode STDOUT, \":utf8\";use constant OUT_DIR =\u003e \"glyphs\";use constant PIXELS_PER_EM =\u003e  100;use constant UNITS_PER_EM  =\u003e 1000;use XML::Simple;my ($svg_file, $list_file) = @ARGV;# SVG 読み込みmy $svg = XMLin($svg_file, forcearray =\u003e 1, keyattr =\u003e []);# 行数・列数を求めるmy $row_max = int ($svg-\u003e{height} / PIXELS_PER_EM) - 1;my $col_max = int ($svg-\u003e{width} / PIXELS_PER_EM) - 1;# outline レイヤーを探すmy $groups = $svg-\u003e{g};my $group_outline;foreach my $group (@$groups) {  if ($group-\u003e{'inkscape:label'} eq \"outline\") {    $group_outline = $group;    last;  }}die \"outlineレイヤーが存在しません\" unless defined $group_outline;# 変換行列を求めるmy $transform = $group_outline-\u003e{transform};my ($a, $b, $c, $d, $e, $f) = (1, 0, 0, 1, 0, 0);if (!defined $transform) {  # noop} elsif ($transform =~ m/translate\\((?\u003ctx\u003e-?\\d+(.\\d+)?(e-?\\d+)?),(?\u003cty\u003e-?\\d+(.\\d+)?(e-?\\d+)?)\\)/) {  $e = $+{tx};  $f = $+{ty};} elsif ($transform =~ m/matrix\\((?\u003ca\u003e-?\\d+(.\\d+)?(e-?\\d+)?),(?\u003cb\u003e-?\\d+(.\\d+)?(e-?\\d+)?)\\),(?\u003cc\u003e-?\\d+(.\\d+)?(e-?\\d+)?),(?\u003cd\u003e-?\\d+(.\\d+)?(e-?\\d+)?),(?\u003ce\u003e-?\\d+(.\\d+)?(e-?\\d+)?),(?\u003cf\u003e-?\\d+(.\\d+)?(e-?\\d+)?)/) {  $a = $+{a};  $c = $+{c};  $e = $+{e};  $b = $+{b};  $d = $+{d};  $f = $+{f};} else {  die \"未対応のtransformです: $transform\"}# グリフごとに path を格納する変数my @glyphs = ();foreach my $row (0 .. $row_max) {  foreach my $col (0 .. $col_max) {    $glyphs[$row][$col] = [];  }}# @glyphs にパスを格納my $paths = $group_outline-\u003e{path};foreach my $path (@$paths) {  my @data_args = split /\\s+/, $path-\u003e{d};  my $new_data = \"\";  my ($col, $row);  my $is_moveto_point = 1;  foreach my $data_arg (@data_args) {    if ($data_arg =~ m/(?\u003cx\u003e-?\\d+(.\\d+)?),(?\u003cy\u003e-?\\d+(.\\d+)?)/) {      my $x = $+{x};      my $y = $+{y};      if ($is_moveto_point) {        $x = $a * $x + $c * $y + $e;        $y = $b * $x + $d * $y + $f;        $col = int ($x / PIXELS_PER_EM);        $row = int ($y / PIXELS_PER_EM);        $x %= PIXELS_PER_EM;        $y %= PIXELS_PER_EM;        $is_moveto_point = 0;      }      $x *= UNITS_PER_EM / PIXELS_PER_EM;      $y *= UNITS_PER_EM / PIXELS_PER_EM;      $data_arg = \"$x,$y\"    }    $new_data .= \"$data_arg \";  }   next if ($col \u003c 0 || $col_max \u003c $col || $row \u003c 0 || $row_max \u003c $row);  $path-\u003e{d} = $new_data;  push @{$glyphs[$row][$col]}, $path;}# リスト読み込みmy @glyphname_list = ();open my $fh_list, '\u003c:utf8', $list_file;while (my $line = \u003c$fh_list\u003e) {  chomp $line;  my @list = map { sprintf \"u%x\", (unpack \"U*\", $_) } split / +/, $line;  push @glyphname_list, \\@list;}close $fh_list;# 各グリフの SVG を生成mkdir OUT_DIR if !-d OUT_DIR;foreach my $row (0 .. $row_max) {  foreach my $col (0 .. $col_max) {    my $svg;    $svg-\u003e{'xmlns:sodipodi'} = \"http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd\";    $svg-\u003e{'xmlns:inkscape'} = \"http://www.inkscape.org/namespaces/inkscape\";    $svg-\u003e{width} = UNITS_PER_EM;    $svg-\u003e{height} = UNITS_PER_EM;    $svg-\u003e{path} = $glyphs[$row][$col];    my $svg_string = '\u003c?xml version=\"1.0\" encoding=\"UTF-8\"?\u003e';    $svg_string .= \"\\n\" . XMLout($svg, RootName =\u003e \"svg\");    my $glyphname = $glyphname_list[$row][$col];    next if (!defined $glyphname || $glyphname eq \"u3000\"); # u3000：全角スペース    open my $fh_out, '\u003e', OUT_DIR . \"/$glyphname.svg\";    print $fh_out $svg_string;    close $fh_out;  }}exit 0;SVGのどのマスがどのグリフか、割り当て表も用意しておく。hiragana_list.txtあ い う え おか き く け こさ し す せ そた ち つ て とな に ぬ ね のは ひ ふ へ ほま み む め もや 　 ゆ 　 よら り る れ ろわ ゐ ん ゑ をこれを例えば\u003e perl split_svg.pl hiragana_1.svg hiragana_list.txtとして実行すれば、glyphs ディレクトリに一字一字のSVGが生成される。FontForge でフォント化そして、このバラしたSVGファイルを FontForge に取り込み、フォントを生成する。FontForge ではSVGの1pxがフォントの1ユニットに相当する。また、OpenType の標準は1000ユニット/emなので、インポート元のSVGを1000×1000pxにしておくとちょうど良い。今回は、split_svg.pl でバラすときにSVGのサイズを1000×1000pxへ変換しているので、あとはそのままインポートするだけでよい。generate.pe#!/usr/bin/fontforge -scriptif ($argc != 2)  Print(\"usage: fontforge -script \" + $0 + \" [version]\")  Quit()endif_version      = $1_fontfilename = \"zeromin_\" + _version + \".otf\"_importfiles  = \"glyphs/u*.svg\"New()# .notdef作成Select(0x0000)SetWidth(1000)SetGlyphName(\".notdef\")# エンコードにUnicodeを指定Reencode(\"unicode\")# SVGをすべてインポートImport(_importfiles, 0)# 自動ヒントづけOFFSelectAll()DontAutoHint()# パスの統合RemoveOverlap()# 整数値に丸めるRoundToInt()# 半角スペース作成Select(0u0020)SetWidth(500)# 全角スペース作成Select(0u3000)SetWidth(1000)# フォント情報設定SetFontNames(\"ZeroMin\",\\             \"ZeroMin\",\\             \"ZeroMin\",\\             \"Regular\",\\             \"© 2012 mashabow\",\\             _version) SetOS2Value(\"WinAscent\", 880)SetOS2Value(\"WinDescent\", 120)SetOS2Value(\"HHeadAscent\", 880)SetOS2Value(\"HHeadDescent\", -120)# OTF生成Generate(_fontfilename)Print(\"generated: \"+ _fontfilename)Close()Quit()このスクリプトを FontForge で動かせば*1、とりあえずはフォントが生成される。最初の明朝体ということで「ZeroMin」と仮に名付けてみた。試し打ち出来上がったフォントをインストールして、さっそく試し打ち。sample_0.100.pdfんー。初めてにしてはまずまずなような気もしないでもないけど、やっぱり字面の大きさや寄り引き、太さなんかのバラつきが目立つ。実用にはちょっと堪えない。というわけで、まだまだ先は長そう。*1:unofficial fontforge-cygwin でのスクリプトの動かし方はこの記事を参照。","link":"https://shiromoji.hatenablog.jp/entry/20120314/1331744357","isoDate":"2012-03-13T16:59:17.000Z","dateMiliSeconds":1331657957000,"imageUrl":"https://cdn.blog.st-hatena.com/images/theme/og-image-1500.png","authorName":"mashabow"},{"title":"JIS X 0208 と JIS X 0213 が改正されていた件","content":"\u003cp\u003e\u003ca href=\"http://d.hatena.ne.jp/mashabow/20111222/1324570126\"\u003e\u0026#x6628;\u0026#x5E74;12\u0026#x6708;\u0026#x306B;\u0026#x5C0F;\u0026#x6797;\u0026#x3055;\u0026#x3093;\u0026#x306E;\u0026#x8B1B;\u0026#x6F14;\u0026#x3092;\u0026#x805E;\u0026#x3044;\u0026#x305F;\u003c/a\u003eとき、\u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/JIS%20X%200213\"\u003eJIS X 0213\u003c/a\u003e が近々改正されるというようなことをおっしゃっていた。そんなことはほとんど忘れていたのだが、\u003c/p\u003e\n\n    \u003cblockquote cite=\"http://toro.2ch.net/test/read.cgi/tech/1306595564/\"\u003e\n        \u003cp\u003e\u003cb\u003e584 デフォルトの名無しさん 2012/03/11(日) 13:26:15.37\u003c/b\u003e\u003cbr /\u003e\n　そういや結局0213って改正するの？ \u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/%BE%EF%CD%D1%B4%C1%BB%FA\"\u003e常用漢字\u003c/a\u003eの関係で \u003cbr /\u003e\n \u003cbr /\u003e\n\u003cb\u003e588 デフォルトの名無しさん 2012/03/11(日) 16:02:37.18\u003c/b\u003e\u003cbr /\u003e\n　JISCのサイト言ったらいつのまにか改正されててワロタ\u003cbr\u003e　誰も気づかなかったのか…\u003c/p\u003e\n\n        \u003ccite\u003e\u003ca href=\"http://toro.2ch.net/test/read.cgi/tech/1306595564/\"\u003e\u0026#x6587;\u0026#x5B57;\u0026#x30B3;\u0026#x30FC;\u0026#x30C9;\u0026#x7DCF;\u0026#x5408;\u0026#x30B9;\u0026#x30EC; part7\u003c/a\u003e\u003c/cite\u003e\n    \u003c/blockquote\u003e\n\u003cp\u003eな、なんだってー！(AAry\u003c/p\u003e\u003cp\u003e\u003ca href=\"http://www.jisc.go.jp/app/JPS/JPSO0020.html\"\u003eJISC\u0026#x306E;\u0026#x30B5;\u0026#x30A4;\u0026#x30C8;\u003c/a\u003eで調べてみると、たしかに2012年2月20日付で \u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/JIS%20X%200208\"\u003eJIS X 0208\u003c/a\u003e と \u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/JIS%20X%200213\"\u003eJIS X 0213\u003c/a\u003e が改正され、\u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/JIS%20X%200208\"\u003eJIS X 0208\u003c/a\u003e:2012 と \u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/JIS%20X%200213\"\u003eJIS X 0213\u003c/a\u003e:2012 になっている。それぞれ第5次規格、第3次規格にあたる。どちらも追補の形で出されており、PDFでは後ろ2ファイルが改正分になっている。\u003c/p\u003e\u003cp\u003e改正点はざっとこんな感じ。\u003c/p\u003e\n\n\u003cul\u003e\n\u003cli\u003e6.6.2「字体の表現としての字形」において、旧\u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/%BE%EF%CD%D1%B4%C1%BB%FA%C9%BD\"\u003e常用漢字表\u003c/a\u003e「（付）字体についての解説 第1 \u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/%CC%C0%C4%AB%C2%CE\"\u003e明朝体\u003c/a\u003e活字のデザインについて」から引用していた「例」を削除し、代わりに新\u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/%BE%EF%CD%D1%B4%C1%BB%FA%C9%BD\"\u003e常用漢字表\u003c/a\u003eから引用。\u003c/li\u003e\n\u003cli\u003e附属書6（参考）「漢字の分類及び配列」の（旧）常用音訓を示す「[常]」を削除。（0208のみ）\u003c/li\u003e\n\u003cli\u003e附属書12（参考）「この規格と\u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/%BE%EF%CD%D1%B4%C1%BB%FA%C9%BD\"\u003e常用漢字表\u003c/a\u003eとの対応」を追加。区点位置・例示字体・音訓を示す。\u003c/li\u003e\n\u003c/ul\u003e\u003cp\u003eというわけで、2010年11月30日の\u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/%BE%EF%CD%D1%B4%C1%BB%FA%C9%BD\"\u003e常用漢字表\u003c/a\u003e改定に合わせた小さな改正になっている。規格の内容自体に関しては、実質的な変更はない。\u003c/p\u003e\n","contentSnippet":"昨年12月に小林さんの講演を聞いたとき、JIS X 0213 が近々改正されるというようなことをおっしゃっていた。そんなことはほとんど忘れていたのだが、584 デフォルトの名無しさん 2012/03/11(日) 13:26:15.37常用漢字の関係で 588 デフォルトの名無しさん 2012/03/11(日) 16:02:37.18　誰も気づかなかったのか…文字コード総合スレ part7    な、なんだってー！(AAryJISCのサイトで調べてみると、たしかに2012年2月20日付で JIS X 0208 と JIS X 0213 が改正され、JIS X 0208:2012 と JIS X 0213:2012 になっている。それぞれ第5次規格、第3次規格にあたる。どちらも追補の形で出されており、PDFでは後ろ2ファイルが改正分になっている。改正点はざっとこんな感じ。6.6.2「字体の表現としての字形」において、旧常用漢字表「（付）字体についての解説 第1 明朝体活字のデザインについて」から引用していた「例」を削除し、代わりに新常用漢字表から引用。附属書6（参考）「漢字の分類及び配列」の（旧）常用音訓を示す「[常]」を削除。（0208のみ）附属書12（参考）「この規格と常用漢字表との対応」を追加。区点位置・例示字体・音訓を示す。というわけで、2010年11月30日の常用漢字表改定に合わせた小さな改正になっている。規格の内容自体に関しては、実質的な変更はない。","link":"https://shiromoji.hatenablog.jp/entry/20120311/1331456551","isoDate":"2012-03-11T09:02:31.000Z","dateMiliSeconds":1331456551000,"imageUrl":"https://cdn.blog.st-hatena.com/images/theme/og-image-1500.png","authorName":"mashabow"},{"title":"花園明朝OT＋Web フォントによるIVSと OpenType feature tag の表示テスト","content":"\u003cp\u003eブラウザ上で\u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/%B0%DB%C2%CE%BB%FA\"\u003e異体字\u003c/a\u003eを表示するには、2つの方法がある。\u003ca href=\"http://ja.wikipedia.org/wiki/%E7%95%B0%E4%BD%93%E5%AD%97%E3%82%BB%E3%83%AC%E3%82%AF%E3%82%BF\"\u003e\u0026#x7570;\u0026#x4F53;\u0026#x5B57;\u0026#x30BB;\u0026#x30EC;\u0026#x30AF;\u0026#x30BF;\u003c/a\u003eを使ってIVSで\u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/%B0%DB%C2%CE%BB%FA\"\u003e異体字\u003c/a\u003eを表現する方法と、CSS3の font-feature-settings プロパティを使って OpenType feature tag によるグリフ置換をする方法だ。今回、\u003ca href=\"http://shiromoji.net/font/HanaMinOT/\"\u003e\u0026#x82B1;\u0026#x5712;\u0026#x660E;\u0026#x671D;OT\u003c/a\u003eを Web フォントとして利用し、この2つの方法で\u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/%B0%DB%C2%CE%BB%FA\"\u003e異体字\u003c/a\u003eの表示テストを行った。\u003c/p\u003e\n\n\u003cdiv class=\"section\"\u003e\n    \u003ch4\u003e方法の具体的な解説\u003c/h4\u003e\n    \n\u003cdiv class=\"section\"\u003e\n    \u003ch5\u003eIVSによる方法\u003c/h5\u003e\n    \u003cp\u003eIVS（Ideographic Variation Sequence）は親字（基底文字）にVS（Variation Selector; U+E0100\u0026#8211;U+E01EF）をつけて\u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/%B0%DB%C2%CE%BB%FA\"\u003e異体字\u003c/a\u003eを表現する。詳しくは下の \u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/Wikipedia\"\u003eWikipedia\u003c/a\u003e の記事などを参照。\u003c/p\u003e\n\n\u003cul\u003e\n\u003cli\u003e\u003ca href=\"http://ja.wikipedia.org/wiki/%E7%95%B0%E4%BD%93%E5%AD%97%E3%82%BB%E3%83%AC%E3%82%AF%E3%82%BF\"\u003e\u0026#x7570;\u0026#x4F53;\u0026#x5B57;\u0026#x30BB;\u0026#x30EC;\u0026#x30AF;\u0026#x30BF; - Wikipedia\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e\u003cp\u003eこの方法で表現される\u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/%B0%DB%C2%CE%BB%FA\"\u003e異体字\u003c/a\u003eは、基底文字の包摂範囲内に含まれることになっている。プレーンテキストとして扱えるので、HTMLで表示したければそのままIVS（＝基底文字＋VS）を書けばよい。通常の文字と同様、数値\u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/%CA%B8%BB%FA%BB%B2%BE%C8\"\u003e文字参照\u003c/a\u003eを使って書くこともできる。フォントやOS、アプリケーションが対応していない場合には、通常の基底文字のグリフが単に表示される（ことが望まれるが、VSが豆腐などで表示されてしまうことが多い）。\u003c/p\u003e\u003cp\u003e例えばHTMLで\u003c/p\u003e\n\u003cpre class=\"code lang-html\" data-lang=\"html\" data-unlink\u003e葛　葛\u003cspan class=\"synSpecial\"\u003e\u0026amp;#xe0100;\u003c/span\u003e　葛\u003cspan class=\"synSpecial\"\u003e\u0026amp;#xe0101;\u003c/span\u003e\n\u003c/pre\u003e\u003cp\u003eと書けば、\u003c/p\u003e\n\n\u003cpre\u003e葛　葛\u0026#xe0100;　葛\u0026#xe0101;\n\u003c/pre\u003e\u003cp\u003eのように表示される。\u003c/p\u003e\n\n\u003c/div\u003e\n\u003cdiv class=\"section\"\u003e\n    \u003ch5\u003eOpenType feature tag による方法\u003c/h5\u003e\n    \u003cp\u003e\u003ca href=\"http://www.microsoft.com/typography/otspec/featurelist.htm\"\u003eOpenType \u0026#x306B;\u0026#x306F;\u0026#x3044;\u0026#x308D;\u0026#x3044;\u0026#x308D;\u0026#x306A;\u0026#x30BF;\u0026#x30B0;\u0026#x304C;\u0026#x5B9A;\u0026#x7FA9;\u0026#x3055;\u0026#x308C;\u0026#x3066;\u0026#x3044;\u0026#x308B;\u003c/a\u003eが、漢字に関係するタグは expt, hojo, jp78, jp83, jp90, nlck, trad, aalt などである。あるグリフから別のグリフへ、一対一や一対多で置換できる。\u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/Mac%20OS%20X\"\u003eMac OS X\u003c/a\u003e や \u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/InDesign\"\u003eInDesign\u003c/a\u003e、\u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/Illustrator\"\u003eIllustrator\u003c/a\u003e などでは以前から使われているが、それ以外の環境ではでは対応が進んでいないため、あまり使われていない。圧→壓 のように、包摂範囲外のグリフへの置換も定義されている。\u003c/p\u003e\u003cp\u003eプレーンテキストでは扱えないため、HTMLではCSS3の \u003ca href=\"http://dev.w3.org/csswg/css3-fonts/#font-feature-settings-prop\"\u003efont-feature-settings\u003c/a\u003e プロパティを利用してタグを指定する。これはまだドラフト段階なので、実際にはベンダー接頭辞をつけて利用することになる。\u003c/p\u003e\n\n\u003cul\u003e\n\u003cli\u003e\u003ca href=\"https://developer.mozilla.org/en/CSS/-moz-font-feature-settings\"\u003efont-feature-settings - MDN\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"http://blogs.msdn.com/b/ie_ja/archive/2012/01/17/css.aspx\"\u003eCSS \u0026#x30B3;\u0026#x30FC;\u0026#x30CA;\u0026#x30FC;: \u0026#x30D5;\u0026#x30A9;\u0026#x30F3;\u0026#x30C8;\u0026#x306E;\u0026#x5168;\u0026#x8981;\u0026#x7D20;\u0026#x3092;\u0026#x4F7F;\u0026#x7528;\u0026#x3059;\u0026#x308B; - IEBlog \u0026#x65E5;\u0026#x672C;\u0026#x8A9E;\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"http://maniac-chef.blogspot.com/2011/10/opentype-features-support-on-chrome.html\"\u003eManiac Chef: OpenType features support on Chrome\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e\u003cp\u003e例えば、jp90 タグを有効にするためには次のように指定する。\u003c/p\u003e\n\u003cpre class=\"code lang-css\" data-lang=\"css\" data-unlink\u003ehoge \u003cspan class=\"synIdentifier\"\u003e{\u003c/span\u003e\n  \u003cspan class=\"synType\"\u003efont\u003c/span\u003e-feature-settings:         \u003cspan class=\"synConstant\"\u003e\u0026quot;jp90\u0026quot;\u003c/span\u003e \u003cspan class=\"synConstant\"\u003e1\u003c/span\u003e;\n  -moz-\u003cspan class=\"synType\"\u003efont\u003c/span\u003e-feature-settings:    \u003cspan class=\"synConstant\"\u003e\u0026quot;jp90=1\u0026quot;\u003c/span\u003e;\n  -ms-\u003cspan class=\"synType\"\u003efont\u003c/span\u003e-feature-settings:     \u003cspan class=\"synConstant\"\u003e\u0026quot;jp90\u0026quot;\u003c/span\u003e \u003cspan class=\"synConstant\"\u003e1\u003c/span\u003e;\n  -webkit-\u003cspan class=\"synType\"\u003efont\u003c/span\u003e-feature-settings: \u003cspan class=\"synConstant\"\u003e\u0026quot;jp90\u0026quot;\u003c/span\u003e \u003cspan class=\"synConstant\"\u003e1\u003c/span\u003e;\n\u003cspan class=\"synIdentifier\"\u003e}\u003c/span\u003e\n\u003c/pre\u003e\u003cp\u003eaalt のような一対多の置換を含むタグにおいて、n 番目のグリフに置換したい場合には、上の 1 の部分に n を指定する。\u003c/p\u003e\n\u003cins datetime=\"2013-05-04T12:57:44+09:00\"\u003e\u003cp\u003e2013-05-03追記：この記事を書いた時点では -moz-font-feature-settings だけ指定方法が異なっていた（\"jp90=1\"）が、現在では他と同じ形式（\"jp90\" 1）に変更されている。\u003c/p\u003e\n\u003c/ins\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"section\"\u003e\n    \u003ch4\u003e表示のテスト\u003c/h4\u003e\n    \n\u003cul\u003e\n\u003cli\u003e\u003ca href=\"http://shiromoji.net/font/HanaMinOT/webfonttest/\"\u003e\u0026#x82B1;\u0026#x5712;\u0026#x660E;\u0026#x671D;OT\u0026#xFF0B;Web \u0026#x30D5;\u0026#x30A9;\u0026#x30F3;\u0026#x30C8;\u0026#x306B;\u0026#x3088;\u0026#x308B; OpenType feature tag \u0026#x3068;IVS\u0026#x306E;\u0026#x8868;\u0026#x793A;\u0026#x30C6;\u0026#x30B9;\u0026#x30C8; - \u0026#x3057;\u0026#x308D;\u0026#x3082;\u0026#x3058;\u0026#x4F5C;\u0026#x696D;\u0026#x5BA4;\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e\u003cp\u003e\u003ca href=\"http://shiromoji.net/font/HanaMinOT/\"\u003e\u0026#x82B1;\u0026#x5712;\u0026#x660E;\u0026#x671D;OT\u003c/a\u003e ver. 0.510 を Web フォントとして利用し、表示テストを行った。フォントフォーマットはOTFとWOFF（Web Open Font Format）。OTFからWOFFへの変換については、武蔵システムの\u003ca href=\"http://musashi.or.tv/woffconv.htm\"\u003eWOFF\u0026#x30B3;\u0026#x30F3;\u0026#x30D0;\u0026#x30FC;\u0026#x30BF;\u003c/a\u003eを利用した。\u003c/p\u003e\u003cp\u003e表示テストは \u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/Firefox\"\u003eFirefox\u003c/a\u003e, \u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/Safari\"\u003eSafari\u003c/a\u003e, \u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/Chrome\"\u003eChrome\u003c/a\u003e, \u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/Opera\"\u003eOpera\u003c/a\u003e, IE8 の各ブラウザで行い、すべて最新版を用いた。OSは \u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/Windows%20XP\"\u003eWindows XP\u003c/a\u003e SP3（そろそろ潮時ですかね…）。参考までに先日インストールした \u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/Windows%208\"\u003eWindows 8\u003c/a\u003e Comsumer Preview 上でもテストをしたが、\u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/Opera\"\u003eOpera\u003c/a\u003e と\u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/IE\"\u003eIE\u003c/a\u003e以外では差が見られなかった。\u003c/p\u003e\u003cp\u003e下の画像は、最も対応状況が優れていた \u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/Firefox\"\u003eFirefox\u003c/a\u003e での表示例。\u003c/p\u003e\u003cp\u003e\u003ca class=\"hatena-fotolife\" target=\"_blank\" href=\"http://cdn-ak.f.st-hatena.com/images/fotolife/m/mashabow/20120308/20120308161106_original.png\"\u003e\u003cimg class=\"hatena-fotolife\" src=\"http://cdn-ak.f.st-hatena.com/images/fotolife/m/mashabow/20120308/20120308161106.png?1331190697\" alt=\"\"\u003e\u003cbr\u003e▲ クリックで拡大\u003c/a\u003e\u003cbr /\u003e\n\u003c/p\u003e\n\n\u003c/div\u003e\n\u003cdiv class=\"section\"\u003e\n    \u003ch4\u003e結果一覧\u003c/h4\u003e\n    \n\u003ctable\u003e\n    \u003ctr\u003e\n    \u003cth\u003eブラウザ\u003c/th\u003e\n    \u003cth\u003eOS\u003c/th\u003e\n    \u003cth\u003eOTF\u003c/th\u003e\n    \u003cth\u003eWOFF\u003c/th\u003e\n    \u003cth\u003eIVS\u003c/th\u003e\n    \u003cth\u003etag\u003c/th\u003e\n    \u003c/tr\u003e\n    \u003ctr\u003e\n    \u003ctd\u003e\u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/Firefox\"\u003eFirefox\u003c/a\u003e 9.0\u003c/td\u003e\n    \u003ctd\u003eWin XP\u003c/td\u003e\n    \u003ctd\u003e○\u003c/td\u003e\n    \u003ctd\u003e○\u003c/td\u003e\n    \u003ctd\u003e○\u003c/td\u003e\n    \u003ctd\u003e○\u003c/td\u003e\n    \u003c/tr\u003e\n    \u003ctr\u003e\n    \u003ctd\u003e\u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/Safari\"\u003eSafari\u003c/a\u003e 5.1\u003c/td\u003e\n    \u003ctd\u003eWin XP\u003c/td\u003e\n    \u003ctd\u003e○\u003c/td\u003e\n    \u003ctd\u003e○\u003c/td\u003e\n    \u003ctd\u003e×\u003c/td\u003e\n    \u003ctd\u003e×\u003c/td\u003e\n    \u003c/tr\u003e\n    \u003ctr\u003e\n    \u003ctd\u003e\u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/Chrome\"\u003eChrome\u003c/a\u003e 17.0\u003c/td\u003e\n    \u003ctd\u003eWin XP\u003c/td\u003e\n    \u003ctd\u003e○\u003c/td\u003e\n    \u003ctd\u003e○\u003c/td\u003e\n    \u003ctd\u003e×\u003c/td\u003e\n    \u003ctd\u003e×\u003csup\u003e*\u003c/sup\u003e\u003c/td\u003e\n    \u003c/tr\u003e\n    \u003ctr\u003e\n    \u003ctd\u003e\u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/Opera\"\u003eOpera\u003c/a\u003e 11.61\u003c/td\u003e\n    \u003ctd\u003eWin XP\u003c/td\u003e\n    \u003ctd\u003e△\u003csup\u003e†\u003c/sup\u003e\u003c/td\u003e\n    \u003ctd\u003e△\u003csup\u003e†\u003c/sup\u003e\u003c/td\u003e\n    \u003ctd\u003e×\u003csup\u003e‡\u003c/sup\u003e\u003c/td\u003e\n    \u003ctd\u003e×\u003c/td\u003e\n    \u003c/tr\u003e\n    \u003ctr\u003e\n    \u003ctd\u003e\u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/IE\"\u003eIE\u003c/a\u003e 8.0\u003c/td\u003e\n    \u003ctd\u003eWin XP\u003c/td\u003e\n    \u003ctd\u003e×\u003c/td\u003e\n    \u003ctd\u003e×\u003c/td\u003e\n    \u003ctd\u003e×\u003c/td\u003e\n    \u003ctd\u003e×\u003c/td\u003e\n    \u003c/tr\u003e\n    \u003ctr\u003e\n    \u003ctd\u003e\u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/IE\"\u003eIE\u003c/a\u003e 10.0\u003c/td\u003e\n    \u003ctd\u003eWin 8 CP\u003c/td\u003e\n    \u003ctd\u003e○\u003c/td\u003e\n    \u003ctd\u003e○\u003c/td\u003e\n    \u003ctd\u003e○\u003c/td\u003e\n    \u003ctd\u003e△\u003csup\u003e§\u003c/sup\u003e\u003c/td\u003e\n    \u003c/tr\u003e\n\u003c/table\u003e\n\u003cdiv class=\"section\"\u003e\n    \u003ch5\u003eOTF\u003c/h5\u003e\n    \n\u003cul\u003e\n\u003cli\u003e○：OpenType フォーマットのフォントファイルを Web フォントとして利用できる。\u003c/li\u003e\n\u003cli\u003e×：対応しておらず、他のフォントで表示される。\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/div\u003e\n\u003cdiv class=\"section\"\u003e\n    \u003ch5\u003eWOFF\u003c/h5\u003e\n    \n\u003cul\u003e\n\u003cli\u003e○：WOFFフォーマットのフォントファイルを Web フォントとして利用できる。\u003c/li\u003e\n\u003cli\u003e×：対応しておらず、他のフォントで表示される。\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/div\u003e\n\u003cdiv class=\"section\"\u003e\n    \u003ch5\u003eIVS\u003c/h5\u003e\n    \n\u003cul\u003e\n\u003cli\u003e○：適切な\u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/%B0%DB%C2%CE%BB%FA\"\u003e異体字\u003c/a\u003eグリフが選択されて表示される。\u003c/li\u003e\n\u003cli\u003e×：VSが豆腐や中黒、空白として表示されてしまう。\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/div\u003e\n\u003cdiv class=\"section\"\u003e\n    \u003ch5\u003etag\u003c/h5\u003e\n    \n\u003cul\u003e\n\u003cli\u003e○：OpenType feature tag が利用できる。\u003c/li\u003e\n\u003cli\u003e×：対応しておらず、無視される。\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"section\"\u003e\n    \u003ch4\u003e結果一覧の註\u003c/h4\u003e\n    \n\u003cdiv class=\"section\"\u003e\n    \u003ch5\u003e* \u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/Chrome\"\u003eChrome\u003c/a\u003e における OpenType feature tag 対応\u003c/h5\u003e\n    \u003cp\u003e\u003cspan itemscope itemtype=\"http://schema.org/Photograph\"\u003e\u003ca href=\"http://f.hatena.ne.jp/mashabow/20120308160703\" class=\"hatena-fotolife\" itemprop=\"url\"\u003e\u003cimg src=\"http://cdn-ak.f.st-hatena.com/images/fotolife/m/mashabow/20120308/20120308160703.png\" alt=\"f:id:mashabow:20120308160703p:image\" title=\"f:id:mashabow:20120308160703p:image\" class=\"hatena-fotolife\" itemprop=\"image\"\u003e\u003c/a\u003e\u003c/span\u003e\u003c/p\u003e\u003cp\u003eexpt, hojo, jp78, jp83, jp90, nlck の各タグについては、指定するとデフォルトのフォントで描画されてしまうという不具合がある。trad, aalt については、無視される（これは対応していない場合に期待される動作）。expt, hojo, jp78, jp83, jp90, nlck はすべて一対一の置換である一方、trad, aalt には一対多の置換も含まれるという共通点がある。が、これが原因かどうかははっきりしない。\u003c/p\u003e\n\n\u003c/div\u003e\n\u003cdiv class=\"section\"\u003e\n    \u003ch5\u003e† \u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/Opera\"\u003eOpera\u003c/a\u003e における OpenType/WOFF 対応\u003c/h5\u003e\n    \u003cp\u003e\u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/Opera\"\u003eOpera\u003c/a\u003e は \u003ca href=\"http://dev.opera.com/articles/view/introducing-woff-web-open-font-format/\"\u003eTrueType, OpenType, SVG\u0026#x30D5;\u0026#x30A9;\u0026#x30F3;\u0026#x30C8;, WOFF\u0026#x306E;\u0026#x5404;\u0026#x5F62;\u0026#x5F0F;\u0026#x306B;\u0026#x5BFE;\u0026#x5FDC;\u0026#x3057;\u0026#x3066;\u0026#x3044;\u0026#x308B;\u0026#x3068;\u0026#x8B33;\u0026#x3063;\u0026#x3066;\u0026#x3044;\u0026#x308B;\u003c/a\u003eが、花園明朝OTでは表示できなかった。\u003ca href=\"http://musashi.or.tv/woffbrowser.htm\"\u003e\u0026#x6B66;\u0026#x8535;\u0026#x30B7;\u0026#x30B9;\u0026#x30C6;\u0026#x30E0;\u0026#x306E;\u0026#x30B5;\u0026#x30A4;\u0026#x30C8;\u0026#x306E;\u0026#x60C5;\u0026#x5831;\u003c/a\u003eでも、和文 OpenType や、そこから変換したWOFFは×になっている。CFFアウトラインの和文フォントがダメなんだろうか。\u003c/p\u003e\n\n\u003c/div\u003e\n\u003cdiv class=\"section\"\u003e\n    \u003ch5\u003e‡ \u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/Opera\"\u003eOpera\u003c/a\u003e におけるIVS対応\u003c/h5\u003e\n    \u003cp\u003e引用元が消えているが、\u003ca href=\"http://ja.wikipedia.org/wiki/%E7%95%B0%E4%BD%93%E5%AD%97%E3%82%BB%E3%83%AC%E3%82%AF%E3%82%BF#cite_ref-59\"\u003eWikipedia \u0026#x306B;\u0026#x3088;\u0026#x308C;\u0026#x3070; Windows 7 \u0026#x4E0A;\u0026#x306E; Opera \u0026#x3067;IVS\u0026#x304C;\u0026#x8868;\u0026#x793A;\u0026#x3067;\u0026#x304D;\u0026#x308B;\u003c/a\u003eらしい。表には載せなかったが、今回 \u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/Windows%208\"\u003eWindows 8\u003c/a\u003e Comsumer Preview 上の \u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/Opera\"\u003eOpera\u003c/a\u003e で表示できることを確認した。\u003c/p\u003e\n\n\u003c/div\u003e\n\u003cdiv class=\"section\"\u003e\n    \u003ch5\u003e§ IE10 における OpenType feature tag 対応\u003c/h5\u003e\n    \u003cp\u003eexpt, hojo, jp78, jp83, jp90, nlck の各タグは正常に機能しグリフ置換が行われるが、trad, aalt については無視される。\u003c/p\u003e\u003cp\u003eまた、IE10で花園明朝OTを表示させるとディセンダが大きく空いてしまうが、原因不明。\u003c/p\u003e\n\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"section\"\u003e\n    \u003ch4\u003eというわけで\u003c/h4\u003e\n    \u003cp\u003e\u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/Firefox\"\u003eFirefox\u003c/a\u003e がかなりいい感じ。他のブラウザの実装がいまいちなこともあり、実際に「使える」かどうかは疑問だが、覚えておくと何かの役に立つ……かも……？\u003c/p\u003e\n\n\u003c/div\u003e","contentSnippet":"ブラウザ上で異体字を表示するには、2つの方法がある。異体字セレクタを使ってIVSで異体字を表現する方法と、CSS3の font-feature-settings プロパティを使って OpenType feature tag によるグリフ置換をする方法だ。今回、花園明朝OTを Web フォントとして利用し、この2つの方法で異体字の表示テストを行った。方法の具体的な解説IVSによる方法IVS（Ideographic Variation Sequence）は親字（基底文字）にVS（Variation Selector; U+E0100–U+E01EF）をつけて異体字を表現する。詳しくは下の Wikipedia の記事などを参照。異体字セレクタ - Wikipediaこの方法で表現される異体字は、基底文字の包摂範囲内に含まれることになっている。プレーンテキストとして扱えるので、HTMLで表示したければそのままIVS（＝基底文字＋VS）を書けばよい。通常の文字と同様、数値文字参照を使って書くこともできる。フォントやOS、アプリケーションが対応していない場合には、通常の基底文字のグリフが単に表示される（ことが望まれるが、VSが豆腐などで表示されてしまうことが多い）。例えばHTMLで葛　葛\u0026#xe0100;　葛\u0026#xe0101;と書けば、葛　葛󠄀　葛󠄁のように表示される。OpenType feature tag による方法OpenType にはいろいろなタグが定義されているが、漢字に関係するタグは expt, hojo, jp78, jp83, jp90, nlck, trad, aalt などである。あるグリフから別のグリフへ、一対一や一対多で置換できる。Mac OS X や InDesign、Illustrator などでは以前から使われているが、それ以外の環境ではでは対応が進んでいないため、あまり使われていない。圧→壓 のように、包摂範囲外のグリフへの置換も定義されている。プレーンテキストでは扱えないため、HTMLではCSS3の font-feature-settings プロパティを利用してタグを指定する。これはまだドラフト段階なので、実際にはベンダー接頭辞をつけて利用することになる。font-feature-settings - MDNCSS コーナー: フォントの全要素を使用する - IEBlog 日本語Maniac Chef: OpenType features support on Chrome例えば、jp90 タグを有効にするためには次のように指定する。hoge {  font-feature-settings:         \"jp90\" 1;  -moz-font-feature-settings:    \"jp90=1\";  -ms-font-feature-settings:     \"jp90\" 1;  -webkit-font-feature-settings: \"jp90\" 1;}aalt のような一対多の置換を含むタグにおいて、n 番目のグリフに置換したい場合には、上の 1 の部分に n を指定する。2013-05-03追記：この記事を書いた時点では -moz-font-feature-settings だけ指定方法が異なっていた（\"jp90=1\"）が、現在では他と同じ形式（\"jp90\" 1）に変更されている。表示のテスト花園明朝OT＋Web フォントによる OpenType feature tag とIVSの表示テスト - しろもじ作業室花園明朝OT ver. 0.510 を Web フォントとして利用し、表示テストを行った。フォントフォーマットはOTFとWOFF（Web Open Font Format）。OTFからWOFFへの変換については、武蔵システムのWOFFコンバータを利用した。表示テストは Firefox, Safari, Chrome, Opera, IE8 の各ブラウザで行い、すべて最新版を用いた。OSは Windows XP SP3（そろそろ潮時ですかね…）。参考までに先日インストールした Windows 8 Comsumer Preview 上でもテストをしたが、Opera とIE以外では差が見られなかった。下の画像は、最も対応状況が優れていた Firefox での表示例。▲ クリックで拡大結果一覧ブラウザ    OS    OTF    WOFF    IVS    tag    Firefox 9.0    Win XP    ○    ○    ○    ○    Safari 5.1    Win XP    ○    ○    ×    ×    Chrome 17.0    Win XP    ○    ○    ×    ×*    Opera 11.61    Win XP    △†    △†    ×‡    ×    IE 8.0    Win XP    ×    ×    ×    ×    IE 10.0    Win 8 CP    ○    ○    ○    △§    OTF○：OpenType フォーマットのフォントファイルを Web フォントとして利用できる。×：対応しておらず、他のフォントで表示される。WOFF○：WOFFフォーマットのフォントファイルを Web フォントとして利用できる。×：対応しておらず、他のフォントで表示される。IVS○：適切な異体字グリフが選択されて表示される。×：VSが豆腐や中黒、空白として表示されてしまう。tag○：OpenType feature tag が利用できる。×：対応しておらず、無視される。結果一覧の註* Chrome における OpenType feature tag 対応expt, hojo, jp78, jp83, jp90, nlck の各タグについては、指定するとデフォルトのフォントで描画されてしまうという不具合がある。trad, aalt については、無視される（これは対応していない場合に期待される動作）。expt, hojo, jp78, jp83, jp90, nlck はすべて一対一の置換である一方、trad, aalt には一対多の置換も含まれるという共通点がある。が、これが原因かどうかははっきりしない。† Opera における OpenType/WOFF 対応Opera は TrueType, OpenType, SVGフォント, WOFFの各形式に対応していると謳っているが、花園明朝OTでは表示できなかった。武蔵システムのサイトの情報でも、和文 OpenType や、そこから変換したWOFFは×になっている。CFFアウトラインの和文フォントがダメなんだろうか。‡ Opera におけるIVS対応引用元が消えているが、Wikipedia によれば Windows 7 上の Opera でIVSが表示できるらしい。表には載せなかったが、今回 Windows 8 Comsumer Preview 上の Opera で表示できることを確認した。§ IE10 における OpenType feature tag 対応expt, hojo, jp78, jp83, jp90, nlck の各タグは正常に機能しグリフ置換が行われるが、trad, aalt については無視される。また、IE10で花園明朝OTを表示させるとディセンダが大きく空いてしまうが、原因不明。というわけでFirefox がかなりいい感じ。他のブラウザの実装がいまいちなこともあり、実際に「使える」かどうかは疑問だが、覚えておくと何かの役に立つ……かも……？","link":"https://shiromoji.hatenablog.jp/entry/20120308/1331194033","isoDate":"2012-03-08T08:07:13.000Z","dateMiliSeconds":1331194033000,"imageUrl":"http://cdn-ak.f.st-hatena.com/images/fotolife/m/mashabow/20120308/20120308161106.png?1331190697","authorName":"mashabow"},{"title":"花園明朝OTを0.510に更新、IVD 2012-03-02版に対応","content":"\u003cp\u003e\u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/Adobe\"\u003eAdobe\u003c/a\u003e-Japan1-6 準拠の漢字フォント・花園明朝OTを ver. 0.510 に更新。\u003c/p\u003e\n\n\u003cul\u003e\n\u003cli\u003e\u003ca href=\"http://shiromoji.net/font/HanaMinOT/\"\u003e\u0026#x82B1;\u0026#x5712;\u0026#x660E;\u0026#x671D;OT - \u0026#x3057;\u0026#x308D;\u0026#x3082;\u0026#x3058;\u0026#x4F5C;\u0026#x696D;\u0026#x5BA4;\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e\u003cp\u003e以下、主な変更点について解説。\u003c/p\u003e\n\n\u003cdiv class=\"section\"\u003e\n    \u003ch4\u003eIVD 2012-03-02 版に対応\u003c/h4\u003e\n    \u003cp\u003e今月2日に\u003ca href=\"http://www.unicode.org/ivd/\"\u003eIVD\u0026#xFF08;Ideographic Variation Database\u0026#xFF09;\u003c/a\u003eの最新版が公開され、\u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/Adobe\"\u003eAdobe\u003c/a\u003e-Japan1 に32個、Hanyo-Denshi\u003ca href=\"#f-75c27c15\" name=\"fn-75c27c15\" title=\"こちらは花園明朝OTには収録していない。\"\u003e*1\u003c/a\u003e に8,850個のIVSが追加された。この追加により、\u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/Adobe\"\u003eAdobe\u003c/a\u003e-Japan1-6 に含まれる14,664個の漢字グリフすべてがIVSでアクセスできるようになった。花園明朝OTは今回これに対応。\u003c/p\u003e\u003cp\u003e\u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/Adobe\"\u003eAdobe\u003c/a\u003e-Japan1 コレクションに追加されたIVSについては、以下のページに詳しい。\u003c/p\u003e\n\n\u003cul\u003e\n\u003cli\u003e\u003ca href=\"http://blogs.adobe.com/CCJKType/2012/03/new-ivd-version.html\"\u003eIVD Version 2012-03-02 Released \u0026laquo; CJK Type\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"http://www.unicode.org/ivd/pri/pri183/\"\u003eIdeographic Variation Database - PRI 183\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"http://d.hatena.ne.jp/NAOI/20110623/1308817376\"\u003ePRI 183\u0026#x306B;\u0026#x3064;\u0026#x3044;\u0026#x3066;\u0026#x306E;\u0026#x30E1;\u0026#x30E2; - Mac OS X\u0026#x306E;\u0026#x6587;\u0026#x5B57;\u0026#x30B3;\u0026#x30FC;\u0026#x30C9;\u0026#x554F;\u0026#x984C;\u0026#x306B;\u0026#x95A2;\u0026#x3059;\u0026#x308B;\u0026#x30E1;\u0026#x30E2;\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/div\u003e\n\u003cdiv class=\"section\"\u003e\n    \u003ch4\u003eCMap を UniJIS2004-UTF32-H ver. 1.011 に更新\u003c/h4\u003e\n    \u003cp\u003e\u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/%CA%B8%BB%FA%A5%B3%A1%BC%A5%C9\"\u003e文字コード\u003c/a\u003eとグリフ（CID）との対応表である CMap を、最新バージョンの1.011に更新した。1.010からの変更点は以下の通り。\u003c/p\u003e\n\n\u003cul\u003e\n\u003cli\u003eU+9FCC（\u0026#40908;）→ CID+20156 の対応が追加された\u003c/li\u003e\n\u003cli\u003eU+2329, 232A（\u0026#9001;, \u0026#9002;）→ CID+682, 683 の対応が追加された\u003c/li\u003e\n\u003c/ul\u003e\u003cp\u003e花園明朝OTは漢字フォントなので、関係するのは前者のみ。U+9FCC（\u0026#40908;）は1月31日リリースの \u003ca href=\"http://www.unicode.org/versions/Unicode6.1.0/\"\u003eUnicode 6.1.0\u003c/a\u003e で追加された統合漢字。\u003c/p\u003e\n\n\u003c/div\u003e\n\u003cdiv class=\"section\"\u003e\n    \u003ch4\u003eスペースのグリフを少し追加\u003c/h4\u003e\n    \u003cp\u003eCID+1（欧文スペース）, CID+3000（和文スペース）, CID+8720（CID+1 の vrt2 置換先グリフ）を追加した。CID+1, CID+8720 の文字幅はとりあえず半角として実装した。CID+8720 を追加した理由は次の項で。\u003c/p\u003e\n\n\u003c/div\u003e\n\u003cdiv class=\"section\"\u003e\n    \u003ch4\u003e\u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/Firefox\"\u003eFirefox\u003c/a\u003e において Web フォントに使用できない問題を解消\u003c/h4\u003e\n    \u003cp\u003e\u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/Firefox\"\u003eFirefox\u003c/a\u003e で花園明朝OTを Web フォントとして使おうとしても、ファイルのダウンロード自体は行われるものの花園明朝OTで描画されない問題があった。\u003c/p\u003e\n\n\u003cul\u003e\n\u003cli\u003e\u003ca href=\"http://d.hatena.ne.jp/mashabow/20110807/1312725162\"\u003e\u0026#x82B1;\u0026#x5712;\u0026#x660E;\u0026#x671D;OT\u0026#x304C; web font \u0026#x3067;\u0026#x4F7F;\u0026#x3048;\u0026#x306A;\u0026#x3044;\u0026#x3063;\u0026#x307D;\u0026#x3044; - \u0026#x3057;\u0026#x308D;\u0026#x3082;\u0026#x3058;\u0026#x30E1;\u0026#x30E2;\u0026#x30E9;\u0026#x30F3;\u0026#x30C0;\u0026#x30E0;\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e\u003cp\u003eこれについて、上の記事のコメントでえむけいさんから次のような情報をいただいた（ありがとうございます）。\u003c/p\u003e\n\n    \u003cblockquote cite=\"http://d.hatena.ne.jp/mashabow/20110807/1312725162#c1320299028\"\u003e\n        \u003cp\u003e\u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/Windows\"\u003eWindows\u003c/a\u003eでは、CFFアウトラインの\u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/OpenType%A5%D5%A5%A9%A5%F3%A5%C8\"\u003eOpenTypeフォント\u003c/a\u003eのGSUBテーブルにvrt2 featureが定義されていないのにvhea/vmtxテーブルがあると、OSに不正なフォントして弾かれます。インストールすれば使えるようですが、Webフォントをロードするための\u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/API\"\u003eAPI\u003c/a\u003eはWebから任意のデータを受け取る可能性があって、フォント\u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/%A5%EC%A5%F3%A5%C0%A5%EA%A5%F3%A5%B0\"\u003eレンダリング\u003c/a\u003eエンジンの\u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/%C0%C8%BC%E5%C0%AD\"\u003e脆弱性\u003c/a\u003eも実際に何度か発見されているので、チェックが厳しくなっているようです。 \u003cbr /\u003e\n縦書きグリフを追加するか、vhea/vmtxテーブルを削除してください。\u003c/p\u003e\n\n        \u003ccite\u003e\u003ca href=\"http://d.hatena.ne.jp/mashabow/20110807/1312725162#c1320299028\"\u003e\u0026#x82B1;\u0026#x5712;\u0026#x660E;\u0026#x671D;OT\u0026#x304C; web font \u0026#x3067;\u0026#x4F7F;\u0026#x3048;\u0026#x306A;\u0026#x3044;\u0026#x3063;\u0026#x307D;\u0026#x3044; - \u0026#x3057;\u0026#x308D;\u0026#x3082;\u0026#x3058;\u0026#x30E1;\u0026#x30E2;\u0026#x30E9;\u0026#x30F3;\u0026#x30C0;\u0026#x30E0;\u003c/a\u003e\u003c/cite\u003e\n    \u003c/blockquote\u003e\n\u003cp\u003eこのアドバイスに従い、縦書きグリフ CID+8720 を追加して以下のように vrt2 feature を定義した。\u003c/p\u003e\n\n\u003cpre\u003efeature vrt2 {\n  sub \\1 by \\8720;\n} vrt2;\n\u003c/pre\u003e\u003cp\u003eこれにより、\u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/Firefox\"\u003eFirefox\u003c/a\u003e での問題は解消されたようだ。縦書きグリフを追加するのではなく vhea/vmtx テーブルを削除する方法もあるが、これを試したところ \u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/Microsoft\"\u003eMicrosoft\u003c/a\u003e Word で縦書きができなくなった（花園明朝OTを指定してもMS明朝で描画される）ので採らなかった。\u003c/p\u003e\u003cp\u003eなお、上の記事では「\u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/Chrome\"\u003eChrome\u003c/a\u003e で試したら『エラー　このページの表示中に問題が発生しました』云々と出てページすら表示されなかった」と書いたが、こちらについては \u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/Chrome\"\u003eChrome\u003c/a\u003e のアップデートの過程で解消されていた様子。\u003c/p\u003e\n\n\u003c/div\u003e\u003cdiv class=\"footnote\"\u003e\n\u003cp class=\"footnote\"\u003e\u003ca href=\"#fn-75c27c15\" name=\"f-75c27c15\" class=\"footnote-number\"\u003e*1\u003c/a\u003e\u003cspan class=\"footnote-delimiter\"\u003e:\u003c/span\u003e\u003cspan class=\"footnote-text\"\u003eこちらは花園明朝OTには収録していない。\u003c/span\u003e\u003c/p\u003e\n\u003c/div\u003e","contentSnippet":"Adobe-Japan1-6 準拠の漢字フォント・花園明朝OTを ver. 0.510 に更新。花園明朝OT - しろもじ作業室以下、主な変更点について解説。IVD 2012-03-02 版に対応今月2日にIVD（Ideographic Variation Database）の最新版が公開され、Adobe-Japan1 に32個、Hanyo-Denshi*1 に8,850個のIVSが追加された。この追加により、Adobe-Japan1-6 に含まれる14,664個の漢字グリフすべてがIVSでアクセスできるようになった。花園明朝OTは今回これに対応。Adobe-Japan1 コレクションに追加されたIVSについては、以下のページに詳しい。IVD Version 2012-03-02 Released « CJK TypeIdeographic Variation Database - PRI 183PRI 183についてのメモ - Mac OS Xの文字コード問題に関するメモCMap を UniJIS2004-UTF32-H ver. 1.011 に更新文字コードとグリフ（CID）との対応表である CMap を、最新バージョンの1.011に更新した。1.010からの変更点は以下の通り。U+9FCC（鿌）→ CID+20156 の対応が追加されたU+2329, 232A（〈, 〉）→ CID+682, 683 の対応が追加された花園明朝OTは漢字フォントなので、関係するのは前者のみ。U+9FCC（鿌）は1月31日リリースの Unicode 6.1.0 で追加された統合漢字。スペースのグリフを少し追加CID+1（欧文スペース）, CID+3000（和文スペース）, CID+8720（CID+1 の vrt2 置換先グリフ）を追加した。CID+1, CID+8720 の文字幅はとりあえず半角として実装した。CID+8720 を追加した理由は次の項で。Firefox において Web フォントに使用できない問題を解消Firefox で花園明朝OTを Web フォントとして使おうとしても、ファイルのダウンロード自体は行われるものの花園明朝OTで描画されない問題があった。花園明朝OTが web font で使えないっぽい - しろもじメモランダムこれについて、上の記事のコメントでえむけいさんから次のような情報をいただいた（ありがとうございます）。Windowsでは、CFFアウトラインのOpenTypeフォントのGSUBテーブルにvrt2 featureが定義されていないのにvhea/vmtxテーブルがあると、OSに不正なフォントして弾かれます。インストールすれば使えるようですが、WebフォントをロードするためのAPIはWebから任意のデータを受け取る可能性があって、フォントレンダリングエンジンの脆弱性も実際に何度か発見されているので、チェックが厳しくなっているようです。 花園明朝OTが web font で使えないっぽい - しろもじメモランダム    このアドバイスに従い、縦書きグリフ CID+8720 を追加して以下のように vrt2 feature を定義した。feature vrt2 {  sub \\1 by \\8720;} vrt2;これにより、Firefox での問題は解消されたようだ。縦書きグリフを追加するのではなく vhea/vmtx テーブルを削除する方法もあるが、これを試したところ Microsoft Word で縦書きができなくなった（花園明朝OTを指定してもMS明朝で描画される）ので採らなかった。なお、上の記事では「Chrome で試したら『エラー　このページの表示中に問題が発生しました』云々と出てページすら表示されなかった」と書いたが、こちらについては Chrome のアップデートの過程で解消されていた様子。*1:こちらは花園明朝OTには収録していない。","link":"https://shiromoji.hatenablog.jp/entry/20120306/1331028598","isoDate":"2012-03-06T10:09:58.000Z","dateMiliSeconds":1331028598000,"imageUrl":"https://cdn.blog.st-hatena.com/images/theme/og-image-1500.png","authorName":"mashabow"}]},"__N_SSG":true},"page":"/members/[name]","query":{"name":"mashabow"},"buildId":"zE6JUI_e-kJpQQpVEzjP0","nextExport":false,"isFallback":false,"gsp":true,"head":[["meta",{"name":"viewport","content":"width=device-width"}],["meta",{"charSet":"utf-8"}],["link",{"rel":"icon shortcut","type":"image/png","href":"https://engineers.feedforce.jp/logo.png"}],["link",{"rel":"stylesheet","href":"https://fonts.googleapis.com/css2?family=Inter:wght@400;700\u0026display=swap"}],["title",{"children":"mashabow | Feedforce Engineers' Blogs"}],["meta",{"property":"og:title","content":"mashabow"}],["meta",{"property":"og:url","content":"https://engineers.feedforce.jp/members/mashabow"}],["meta",{"name":"twitter:card","content":"summary_large_image"}],["meta",{"property":"og:site","content":"Feedforce Engineers' Blogs"}],["meta",{"property":"og:image","content":"https://engineers.feedforce.jp/og.png"}],["link",{"rel":"canonical","href":"https://engineers.feedforce.jp/members/mashabow"}],["link",{"rel":"alternate","type":"application/rss+xml","title":"Feedforce Engineers' Blogs","href":"https://engineers.feedforce.jp/rss.xml"}],["link",{"rel":"alternate","type":"application/atom+xml","title":"Feedforce Engineers' Blogs","href":"https://engineers.feedforce.jp/atom.xml"}]]}</script><script nomodule="" src="/_next/static/chunks/polyfills-fa276ba060a4a8ac7eef.js"></script><script src="/_next/static/chunks/main-8a83f0fd99327c4684a8.js" async=""></script><script src="/_next/static/chunks/webpack-e067438c4cf4ef2ef178.js" async=""></script><script src="/_next/static/chunks/framework.1daf1ec1ecf144ee9147.js" async=""></script><script src="/_next/static/chunks/commons.9e003f150a446b53bdd9.js" async=""></script><script src="/_next/static/chunks/pages/_app-99db904e083fc7f74e35.js" async=""></script><script src="/_next/static/chunks/588505f8033a39c9ef82bc46b1145ac9fd1db500.ae3e4b7c37e822ff0f91.js" async=""></script><script src="/_next/static/chunks/pages/members/%5Bname%5D-42a7756adc6c0800b4dc.js" async=""></script><script src="/_next/static/zE6JUI_e-kJpQQpVEzjP0/_buildManifest.js" async=""></script><script src="/_next/static/zE6JUI_e-kJpQQpVEzjP0/_ssgManifest.js" async=""></script></body></html>