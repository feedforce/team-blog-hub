<!DOCTYPE html><html><head><meta name="viewport" content="width=device-width"/><meta charSet="utf-8"/><link rel="icon shortcut" type="image/png" href="https://engineers.feedforce.jp/logo.png"/><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Inter:wght@400;700&amp;display=swap"/><title>masutaka | Feedforce Engineers&#x27; Blogs</title><meta property="og:title" content="masutaka"/><meta property="og:url" content="https://engineers.feedforce.jp/members/masutaka"/><meta name="twitter:card" content="summary_large_image"/><meta property="og:site" content="Feedforce Engineers&#x27; Blogs"/><meta property="og:image" content="https://engineers.feedforce.jp/og.png"/><link rel="canonical" href="https://engineers.feedforce.jp/members/masutaka"/><link rel="alternate" type="application/rss+xml" title="Feedforce Engineers&#x27; Blogs" href="https://engineers.feedforce.jp/rss.xml"/><link rel="alternate" type="application/atom+xml" title="Feedforce Engineers&#x27; Blogs" href="https://engineers.feedforce.jp/atom.xml"/><link rel="preload" href="/_next/static/css/d7faf1fdf25fe7d3262e.css" as="style"/><link rel="stylesheet" href="/_next/static/css/d7faf1fdf25fe7d3262e.css" data-n-g=""/><noscript data-n-css="true"></noscript><link rel="preload" href="/_next/static/chunks/main-8a83f0fd99327c4684a8.js" as="script"/><link rel="preload" href="/_next/static/chunks/webpack-e067438c4cf4ef2ef178.js" as="script"/><link rel="preload" href="/_next/static/chunks/framework.1daf1ec1ecf144ee9147.js" as="script"/><link rel="preload" href="/_next/static/chunks/commons.9e003f150a446b53bdd9.js" as="script"/><link rel="preload" href="/_next/static/chunks/pages/_app-99db904e083fc7f74e35.js" as="script"/><link rel="preload" href="/_next/static/chunks/588505f8033a39c9ef82bc46b1145ac9fd1db500.7f1789362bee7bf8434b.js" as="script"/><link rel="preload" href="/_next/static/chunks/pages/members/%5Bname%5D-42a7756adc6c0800b4dc.js" as="script"/></head><body><div id="__next"><header class="site-header"><div class="content-wrapper"><div class="site-header__inner"><a class="site-header__logo-link" href="/"><img src="https://engineers.feedforce.jp/logo.svg" alt="Feedforce Engineers&#x27; Blogs" class="site-header__logo-img"/></a><div class="site-header__links"><a href="https://feedforcegroup.jp" class="site-header__link">Company</a><a href="https://github.com/feedforce" class="site-header__link">GitHub</a><a href="https://engineers.recruit.feedforce.jp" class="site-header__link">Recruit</a></div></div></div></header><section class="member"><div class="content-wrapper"><header class="member-header"><div class="member-header__avatar"><img src="https://www.gravatar.com/avatar/b7a93b5c3bcfa8f2f8047584cc16bf13?size=256" alt="masutaka" width="100" height="100" class="member-header__avatar-img"/></div><h1 class="member-header__name">masutaka</h1><p class="member-header__bio">カレー大好き！</p><div class="member-header__links"><a href="https://twitter.com/masutaka" class="member-header__link"><img src="https://engineers.feedforce.jp/icons/twitter.svg" alt="Twitterのユーザー@masutaka" width="22" height="22"/></a><a href="https://github.com/masutaka" class="member-header__link"><img src="https://engineers.feedforce.jp/icons/github.svg" alt="GitHubのユーザー@masutaka" width="22" height="22"/></a><a href="https://masutaka.net" class="member-header__link"><img src="https://engineers.feedforce.jp/icons/link.svg" alt="ウェブサイトのリンク" width="22" height="22"/></a></div></header><div class="member-posts-container"><div class="post-list"><article class="post-link"><a class="post-link__author" href="/members/masutaka"><img src="https://www.gravatar.com/avatar/b7a93b5c3bcfa8f2f8047584cc16bf13?size=256" class="post-link__author-img" width="35" height="35"/><div class="post-link__author-name"><div class="post-link__author-name">masutaka</div><time dateTime="2021-10-03T14:59:59.000Z" class="post-link__date">11 days ago</time></div></a><a href="https://masutaka.net/chalow/2021-10-03-1.html" class="post-link__main-link"><h2 class="post-link__title">RIZIN LANDMARK vol.1 の時間帯に発生した U-NEXT の障害体験メモ #RIZIN_LANDMARK #RIZIN_LANDMARK01</h2><div class="post-link__site"><img src="https://www.google.com/s2/favicons?domain=masutaka.net" width="14" height="14" class="post-link__site-favicon"/>masutaka.net</div></a></article><article class="post-link"><a class="post-link__author" href="/members/masutaka"><img src="https://www.gravatar.com/avatar/b7a93b5c3bcfa8f2f8047584cc16bf13?size=256" class="post-link__author-img" width="35" height="35"/><div class="post-link__author-name"><div class="post-link__author-name">masutaka</div><time dateTime="2021-09-27T14:59:59.000Z" class="post-link__date">17 days ago</time></div></a><a href="https://masutaka.net/chalow/2021-09-27-1.html" class="post-link__main-link"><h2 class="post-link__title">Terraform を使わずに Route 53 の DNS レコードを管理する方法を調べてみた</h2><div class="post-link__site"><img src="https://www.google.com/s2/favicons?domain=masutaka.net" width="14" height="14" class="post-link__site-favicon"/>masutaka.net</div></a></article><article class="post-link"><a class="post-link__author" href="/members/masutaka"><img src="https://www.gravatar.com/avatar/b7a93b5c3bcfa8f2f8047584cc16bf13?size=256" class="post-link__author-img" width="35" height="35"/><div class="post-link__author-name"><div class="post-link__author-name">masutaka</div><time dateTime="2021-08-30T06:00:00.000Z" class="post-link__date">a month ago</time></div></a><a href="https://developer.feedforce.jp/entry/2021/08/30/150000" class="post-link__main-link"><h2 class="post-link__title">Looker で Join 先の view の primary_key をいい感じにテストする方法をようやく見つけた</h2><div class="post-link__site"><img src="https://www.google.com/s2/favicons?domain=developer.feedforce.jp" width="14" height="14" class="post-link__site-favicon"/>developer.feedforce.jp</div></a></article><article class="post-link"><a class="post-link__author" href="/members/masutaka"><img src="https://www.gravatar.com/avatar/b7a93b5c3bcfa8f2f8047584cc16bf13?size=256" class="post-link__author-img" width="35" height="35"/><div class="post-link__author-name"><div class="post-link__author-name">masutaka</div><time dateTime="2021-08-25T14:59:59.000Z" class="post-link__date">2 months ago</time></div></a><a href="https://masutaka.net/chalow/2021-08-25-1.html" class="post-link__main-link"><h2 class="post-link__title">Manjaro でハイバネート出来るようにしたメモ</h2><div class="post-link__site"><img src="https://www.google.com/s2/favicons?domain=masutaka.net" width="14" height="14" class="post-link__site-favicon"/>masutaka.net</div></a></article><article class="post-link"><a class="post-link__author" href="/members/masutaka"><img src="https://www.gravatar.com/avatar/b7a93b5c3bcfa8f2f8047584cc16bf13?size=256" class="post-link__author-img" width="35" height="35"/><div class="post-link__author-name"><div class="post-link__author-name">masutaka</div><time dateTime="2021-08-16T06:00:00.000Z" class="post-link__date">2 months ago</time></div></a><a href="https://developer.feedforce.jp/entry/2021/08/16/150000" class="post-link__main-link"><h2 class="post-link__title">私が１年かけて辿り着いた Looker の情報収集方法を紹介する</h2><div class="post-link__site"><img src="https://www.google.com/s2/favicons?domain=developer.feedforce.jp" width="14" height="14" class="post-link__site-favicon"/>developer.feedforce.jp</div></a></article><article class="post-link"><a class="post-link__author" href="/members/masutaka"><img src="https://www.gravatar.com/avatar/b7a93b5c3bcfa8f2f8047584cc16bf13?size=256" class="post-link__author-img" width="35" height="35"/><div class="post-link__author-name"><div class="post-link__author-name">masutaka</div><time dateTime="2021-08-07T14:59:59.000Z" class="post-link__date">2 months ago</time></div></a><a href="https://masutaka.net/chalow/2021-08-07-1.html" class="post-link__main-link"><h2 class="post-link__title">Chrome から Firefox に乗り換えたよ</h2><div class="post-link__site"><img src="https://www.google.com/s2/favicons?domain=masutaka.net" width="14" height="14" class="post-link__site-favicon"/>masutaka.net</div></a></article><article class="post-link"><a class="post-link__author" href="/members/masutaka"><img src="https://www.gravatar.com/avatar/b7a93b5c3bcfa8f2f8047584cc16bf13?size=256" class="post-link__author-img" width="35" height="35"/><div class="post-link__author-name"><div class="post-link__author-name">masutaka</div><time dateTime="2021-07-28T14:59:59.000Z" class="post-link__date">3 months ago</time></div></a><a href="https://masutaka.net/chalow/2021-07-28-1.html" class="post-link__main-link"><h2 class="post-link__title">３月に無償提供となった Microsoft Power Automate Desktop を今さらながら使ってみた</h2><div class="post-link__site"><img src="https://www.google.com/s2/favicons?domain=masutaka.net" width="14" height="14" class="post-link__site-favicon"/>masutaka.net</div></a></article><article class="post-link"><a class="post-link__author" href="/members/masutaka"><img src="https://www.gravatar.com/avatar/b7a93b5c3bcfa8f2f8047584cc16bf13?size=256" class="post-link__author-img" width="35" height="35"/><div class="post-link__author-name"><div class="post-link__author-name">masutaka</div><time dateTime="2021-06-11T09:00:00.000Z" class="post-link__date">4 months ago</time></div></a><a href="https://developer.feedforce.jp/entry/2021/06/11/180000" class="post-link__main-link"><h2 class="post-link__title">『ここがつらいよ普段使いのLinux』という発表をした</h2><div class="post-link__site"><img src="https://www.google.com/s2/favicons?domain=developer.feedforce.jp" width="14" height="14" class="post-link__site-favicon"/>developer.feedforce.jp</div></a></article><article class="post-link"><a class="post-link__author" href="/members/masutaka"><img src="https://www.gravatar.com/avatar/b7a93b5c3bcfa8f2f8047584cc16bf13?size=256" class="post-link__author-img" width="35" height="35"/><div class="post-link__author-name"><div class="post-link__author-name">masutaka</div><time dateTime="2021-06-10T14:59:59.000Z" class="post-link__date">4 months ago</time></div></a><a href="https://masutaka.net/chalow/2021-06-10-1.html" class="post-link__main-link"><h2 class="post-link__title">Dependabot の Terraform 1.0 対応が完了した件</h2><div class="post-link__site"><img src="https://www.google.com/s2/favicons?domain=masutaka.net" width="14" height="14" class="post-link__site-favicon"/>masutaka.net</div></a></article><article class="post-link"><a class="post-link__author" href="/members/masutaka"><img src="https://www.gravatar.com/avatar/b7a93b5c3bcfa8f2f8047584cc16bf13?size=256" class="post-link__author-img" width="35" height="35"/><div class="post-link__author-name"><div class="post-link__author-name">masutaka</div><time dateTime="2021-05-30T14:59:59.000Z" class="post-link__date">4 months ago</time></div></a><a href="https://masutaka.net/chalow/2021-05-30-1.html" class="post-link__main-link"><h2 class="post-link__title">暑がりの私にはマスクチェーンがとても合ってる</h2><div class="post-link__site"><img src="https://www.google.com/s2/favicons?domain=masutaka.net" width="14" height="14" class="post-link__site-favicon"/>masutaka.net</div></a></article><article class="post-link"><a class="post-link__author" href="/members/masutaka"><img src="https://www.gravatar.com/avatar/b7a93b5c3bcfa8f2f8047584cc16bf13?size=256" class="post-link__author-img" width="35" height="35"/><div class="post-link__author-name"><div class="post-link__author-name">masutaka</div><time dateTime="2021-05-27T14:59:59.000Z" class="post-link__date">5 months ago</time></div></a><a href="https://masutaka.net/chalow/2021-05-27-1.html" class="post-link__main-link"><h2 class="post-link__title">Dependabot の Terraform 0.15 対応が進んでいる件</h2><div class="post-link__site"><img src="https://www.google.com/s2/favicons?domain=masutaka.net" width="14" height="14" class="post-link__site-favicon"/>masutaka.net</div></a></article><article class="post-link"><a class="post-link__author" href="/members/masutaka"><img src="https://www.gravatar.com/avatar/b7a93b5c3bcfa8f2f8047584cc16bf13?size=256" class="post-link__author-img" width="35" height="35"/><div class="post-link__author-name"><div class="post-link__author-name">masutaka</div><time dateTime="2021-05-23T14:59:59.000Z" class="post-link__date">5 months ago</time></div></a><a href="https://masutaka.net/chalow/2021-05-23-1.html" class="post-link__main-link"><h2 class="post-link__title">ノートパソコンクーラーを買い替えた</h2><div class="post-link__site"><img src="https://www.google.com/s2/favicons?domain=masutaka.net" width="14" height="14" class="post-link__site-favicon"/>masutaka.net</div></a></article><article class="post-link"><a class="post-link__author" href="/members/masutaka"><img src="https://www.gravatar.com/avatar/b7a93b5c3bcfa8f2f8047584cc16bf13?size=256" class="post-link__author-img" width="35" height="35"/><div class="post-link__author-name"><div class="post-link__author-name">masutaka</div><time dateTime="2021-05-20T14:59:59.000Z" class="post-link__date">5 months ago</time></div></a><a href="https://masutaka.net/chalow/2021-05-20-1.html" class="post-link__main-link"><h2 class="post-link__title">スマホ専用テプラ LR30 を買った</h2><div class="post-link__site"><img src="https://www.google.com/s2/favicons?domain=masutaka.net" width="14" height="14" class="post-link__site-favicon"/>masutaka.net</div></a></article><article class="post-link"><a class="post-link__author" href="/members/masutaka"><img src="https://www.gravatar.com/avatar/b7a93b5c3bcfa8f2f8047584cc16bf13?size=256" class="post-link__author-img" width="35" height="35"/><div class="post-link__author-name"><div class="post-link__author-name">masutaka</div><time dateTime="2021-05-06T14:59:59.000Z" class="post-link__date">5 months ago</time></div></a><a href="https://masutaka.net/chalow/2021-05-06-1.html" class="post-link__main-link"><h2 class="post-link__title">Windows ノートパソコン（ASUS VivoBook S15 M533IA）を買った</h2><div class="post-link__site"><img src="https://www.google.com/s2/favicons?domain=masutaka.net" width="14" height="14" class="post-link__site-favicon"/>masutaka.net</div></a></article><article class="post-link"><a class="post-link__author" href="/members/masutaka"><img src="https://www.gravatar.com/avatar/b7a93b5c3bcfa8f2f8047584cc16bf13?size=256" class="post-link__author-img" width="35" height="35"/><div class="post-link__author-name"><div class="post-link__author-name">masutaka</div><time dateTime="2021-04-10T14:59:59.000Z" class="post-link__date">6 months ago</time></div></a><a href="https://masutaka.net/chalow/2021-04-10-1.html" class="post-link__main-link"><h2 class="post-link__title">『こども地政学』を読んだ</h2><div class="post-link__site"><img src="https://www.google.com/s2/favicons?domain=masutaka.net" width="14" height="14" class="post-link__site-favicon"/>masutaka.net</div></a></article><article class="post-link"><a class="post-link__author" href="/members/masutaka"><img src="https://www.gravatar.com/avatar/b7a93b5c3bcfa8f2f8047584cc16bf13?size=256" class="post-link__author-img" width="35" height="35"/><div class="post-link__author-name"><div class="post-link__author-name">masutaka</div><time dateTime="2021-04-07T14:59:59.000Z" class="post-link__date">6 months ago</time></div></a><a href="https://masutaka.net/chalow/2021-04-07-1.html" class="post-link__main-link"><h2 class="post-link__title">Android の TODO アプリは TickTick が鉄板かも</h2><div class="post-link__site"><img src="https://www.google.com/s2/favicons?domain=masutaka.net" width="14" height="14" class="post-link__site-favicon"/>masutaka.net</div></a></article><article class="post-link"><a class="post-link__author" href="/members/masutaka"><img src="https://www.gravatar.com/avatar/b7a93b5c3bcfa8f2f8047584cc16bf13?size=256" class="post-link__author-img" width="35" height="35"/><div class="post-link__author-name"><div class="post-link__author-name">masutaka</div><time dateTime="2021-04-04T14:59:59.000Z" class="post-link__date">6 months ago</time></div></a><a href="https://masutaka.net/chalow/2021-04-04-1.html" class="post-link__main-link"><h2 class="post-link__title">縦置きスタンドを買って、ノートパソコンを床に置いちゃう問題を解消した</h2><div class="post-link__site"><img src="https://www.google.com/s2/favicons?domain=masutaka.net" width="14" height="14" class="post-link__site-favicon"/>masutaka.net</div></a></article><article class="post-link"><a class="post-link__author" href="/members/masutaka"><img src="https://www.gravatar.com/avatar/b7a93b5c3bcfa8f2f8047584cc16bf13?size=256" class="post-link__author-img" width="35" height="35"/><div class="post-link__author-name"><div class="post-link__author-name">masutaka</div><time dateTime="2021-03-24T14:59:59.000Z" class="post-link__date">7 months ago</time></div></a><a href="https://masutaka.net/chalow/2021-03-24-1.html" class="post-link__main-link"><h2 class="post-link__title">Anker のマグネットケーブルホルダーを使って、ケーブルが下に落ちちゃう問題を解消できた</h2><div class="post-link__site"><img src="https://www.google.com/s2/favicons?domain=masutaka.net" width="14" height="14" class="post-link__site-favicon"/>masutaka.net</div></a></article><article class="post-link"><a class="post-link__author" href="/members/masutaka"><img src="https://www.gravatar.com/avatar/b7a93b5c3bcfa8f2f8047584cc16bf13?size=256" class="post-link__author-img" width="35" height="35"/><div class="post-link__author-name"><div class="post-link__author-name">masutaka</div><time dateTime="2021-03-15T14:59:59.000Z" class="post-link__date">7 months ago</time></div></a><a href="https://masutaka.net/chalow/2021-03-15-1.html" class="post-link__main-link"><h2 class="post-link__title">現在の GitHub flow は v2 かな？</h2><div class="post-link__site"><img src="https://www.google.com/s2/favicons?domain=masutaka.net" width="14" height="14" class="post-link__site-favicon"/>masutaka.net</div></a></article><article class="post-link"><a class="post-link__author" href="/members/masutaka"><img src="https://www.gravatar.com/avatar/b7a93b5c3bcfa8f2f8047584cc16bf13?size=256" class="post-link__author-img" width="35" height="35"/><div class="post-link__author-name"><div class="post-link__author-name">masutaka</div><time dateTime="2021-03-14T14:59:59.000Z" class="post-link__date">7 months ago</time></div></a><a href="https://masutaka.net/chalow/2021-03-14-1.html" class="post-link__main-link"><h2 class="post-link__title">フィード（RSS/Atom）を配信していないサイトのフィードを Feed43 で作成する</h2><div class="post-link__site"><img src="https://www.google.com/s2/favicons?domain=masutaka.net" width="14" height="14" class="post-link__site-favicon"/>masutaka.net</div></a></article><article class="post-link"><a class="post-link__author" href="/members/masutaka"><img src="https://www.gravatar.com/avatar/b7a93b5c3bcfa8f2f8047584cc16bf13?size=256" class="post-link__author-img" width="35" height="35"/><div class="post-link__author-name"><div class="post-link__author-name">masutaka</div><time dateTime="2021-03-13T14:59:59.000Z" class="post-link__date">7 months ago</time></div></a><a href="https://masutaka.net/chalow/2021-03-13-1.html" class="post-link__main-link"><h2 class="post-link__title">『NO RULES』を読んだ</h2><div class="post-link__site"><img src="https://www.google.com/s2/favicons?domain=masutaka.net" width="14" height="14" class="post-link__site-favicon"/>masutaka.net</div></a></article><article class="post-link"><a class="post-link__author" href="/members/masutaka"><img src="https://www.gravatar.com/avatar/b7a93b5c3bcfa8f2f8047584cc16bf13?size=256" class="post-link__author-img" width="35" height="35"/><div class="post-link__author-name"><div class="post-link__author-name">masutaka</div><time dateTime="2021-03-09T14:59:59.000Z" class="post-link__date">7 months ago</time></div></a><a href="https://masutaka.net/chalow/2021-03-09-1.html" class="post-link__main-link"><h2 class="post-link__title">『集合論入門』の第１編まで読んであとは挫折した</h2><div class="post-link__site"><img src="https://www.google.com/s2/favicons?domain=masutaka.net" width="14" height="14" class="post-link__site-favicon"/>masutaka.net</div></a></article><article class="post-link"><a class="post-link__author" href="/members/masutaka"><img src="https://www.gravatar.com/avatar/b7a93b5c3bcfa8f2f8047584cc16bf13?size=256" class="post-link__author-img" width="35" height="35"/><div class="post-link__author-name"><div class="post-link__author-name">masutaka</div><time dateTime="2021-02-22T14:59:59.000Z" class="post-link__date">8 months ago</time></div></a><a href="https://masutaka.net/chalow/2021-02-22-1.html" class="post-link__main-link"><h2 class="post-link__title">『達人に学ぶSQL徹底指南書 第2版』を読んだ</h2><div class="post-link__site"><img src="https://www.google.com/s2/favicons?domain=masutaka.net" width="14" height="14" class="post-link__site-favicon"/>masutaka.net</div></a></article><article class="post-link"><a class="post-link__author" href="/members/masutaka"><img src="https://www.gravatar.com/avatar/b7a93b5c3bcfa8f2f8047584cc16bf13?size=256" class="post-link__author-img" width="35" height="35"/><div class="post-link__author-name"><div class="post-link__author-name">masutaka</div><time dateTime="2021-02-15T02:00:00.000Z" class="post-link__date">8 months ago</time></div></a><a href="https://developer.feedforce.jp/entry/2021/02/15/110000" class="post-link__main-link"><h2 class="post-link__title">全ての esa 新着記事を読みきれないので、最近はこの方法を使ってる</h2><div class="post-link__site"><img src="https://www.google.com/s2/favicons?domain=developer.feedforce.jp" width="14" height="14" class="post-link__site-favicon"/>developer.feedforce.jp</div></a></article><article class="post-link"><a class="post-link__author" href="/members/masutaka"><img src="https://www.gravatar.com/avatar/b7a93b5c3bcfa8f2f8047584cc16bf13?size=256" class="post-link__author-img" width="35" height="35"/><div class="post-link__author-name"><div class="post-link__author-name">masutaka</div><time dateTime="2021-02-03T02:00:00.000Z" class="post-link__date">8 months ago</time></div></a><a href="https://developer.feedforce.jp/entry/2021/02/03/110000" class="post-link__main-link"><h2 class="post-link__title">変化に耐え得る esa のカテゴリ設計を徹底的に考えてみた</h2><div class="post-link__site"><img src="https://www.google.com/s2/favicons?domain=developer.feedforce.jp" width="14" height="14" class="post-link__site-favicon"/>developer.feedforce.jp</div></a></article><article class="post-link"><a class="post-link__author" href="/members/masutaka"><img src="https://www.gravatar.com/avatar/b7a93b5c3bcfa8f2f8047584cc16bf13?size=256" class="post-link__author-img" width="35" height="35"/><div class="post-link__author-name"><div class="post-link__author-name">masutaka</div><time dateTime="2021-01-22T14:59:59.000Z" class="post-link__date">9 months ago</time></div></a><a href="https://masutaka.net/chalow/2021-01-22-1.html" class="post-link__main-link"><h2 class="post-link__title">pushover orb のメンテナーになった</h2><div class="post-link__site"><img src="https://www.google.com/s2/favicons?domain=masutaka.net" width="14" height="14" class="post-link__site-favicon"/>masutaka.net</div></a></article><article class="post-link"><a class="post-link__author" href="/members/masutaka"><img src="https://www.gravatar.com/avatar/b7a93b5c3bcfa8f2f8047584cc16bf13?size=256" class="post-link__author-img" width="35" height="35"/><div class="post-link__author-name"><div class="post-link__author-name">masutaka</div><time dateTime="2021-01-16T14:59:59.000Z" class="post-link__date">9 months ago</time></div></a><a href="https://masutaka.net/chalow/2021-01-16-1.html" class="post-link__main-link"><h2 class="post-link__title">tfupdate orb の circleci/orb-tools を v8.27.5 から v10.0.3 にアップデートした</h2><div class="post-link__site"><img src="https://www.google.com/s2/favicons?domain=masutaka.net" width="14" height="14" class="post-link__site-favicon"/>masutaka.net</div></a></article><article class="post-link"><a class="post-link__author" href="/members/masutaka"><img src="https://www.gravatar.com/avatar/b7a93b5c3bcfa8f2f8047584cc16bf13?size=256" class="post-link__author-img" width="35" height="35"/><div class="post-link__author-name"><div class="post-link__author-name">masutaka</div><time dateTime="2021-01-05T14:59:59.000Z" class="post-link__date">9 months ago</time></div></a><a href="https://masutaka.net/chalow/2021-01-05-1.html" class="post-link__main-link"><h2 class="post-link__title">思考を寝かせて、優先順位を決めるための「やるかもしれないリスト」がとてもうまくワークしている</h2><div class="post-link__site"><img src="https://www.google.com/s2/favicons?domain=masutaka.net" width="14" height="14" class="post-link__site-favicon"/>masutaka.net</div></a></article><article class="post-link"><a class="post-link__author" href="/members/masutaka"><img src="https://www.gravatar.com/avatar/b7a93b5c3bcfa8f2f8047584cc16bf13?size=256" class="post-link__author-img" width="35" height="35"/><div class="post-link__author-name"><div class="post-link__author-name">masutaka</div><time dateTime="2020-12-20T14:59:59.000Z" class="post-link__date">10 months ago</time></div></a><a href="https://masutaka.net/chalow/2020-12-20-1.html" class="post-link__main-link"><h2 class="post-link__title">『データマネジメントが30分でわかる本』を読んだ</h2><div class="post-link__site"><img src="https://www.google.com/s2/favicons?domain=masutaka.net" width="14" height="14" class="post-link__site-favicon"/>masutaka.net</div></a></article><article class="post-link"><a class="post-link__author" href="/members/masutaka"><img src="https://www.gravatar.com/avatar/b7a93b5c3bcfa8f2f8047584cc16bf13?size=256" class="post-link__author-img" width="35" height="35"/><div class="post-link__author-name"><div class="post-link__author-name">masutaka</div><time dateTime="2020-12-03T14:59:59.000Z" class="post-link__date">10 months ago</time></div></a><a href="https://masutaka.net/chalow/2020-12-03-1.html" class="post-link__main-link"><h2 class="post-link__title">優先度より優先順位のほうが偉い</h2><div class="post-link__site"><img src="https://www.google.com/s2/favicons?domain=masutaka.net" width="14" height="14" class="post-link__site-favicon"/>masutaka.net</div></a></article><article class="post-link"><a class="post-link__author" href="/members/masutaka"><img src="https://www.gravatar.com/avatar/b7a93b5c3bcfa8f2f8047584cc16bf13?size=256" class="post-link__author-img" width="35" height="35"/><div class="post-link__author-name"><div class="post-link__author-name">masutaka</div><time dateTime="2020-11-10T14:59:59.000Z" class="post-link__date">a year ago</time></div></a><a href="https://masutaka.net/chalow/2020-11-10-1.html" class="post-link__main-link"><h2 class="post-link__title">『理論から学ぶデータベース実践入門』を読んだ</h2><div class="post-link__site"><img src="https://www.google.com/s2/favicons?domain=masutaka.net" width="14" height="14" class="post-link__site-favicon"/>masutaka.net</div></a></article><article class="post-link"><a class="post-link__author" href="/members/masutaka"><img src="https://www.gravatar.com/avatar/b7a93b5c3bcfa8f2f8047584cc16bf13?size=256" class="post-link__author-img" width="35" height="35"/><div class="post-link__author-name"><div class="post-link__author-name">masutaka</div><time dateTime="2020-10-30T14:59:59.000Z" class="post-link__date">a year ago</time></div></a><a href="https://masutaka.net/chalow/2020-10-30-1.html" class="post-link__main-link"><h2 class="post-link__title">CircleCI の旧 UI で設定した Slack Integration の設定を確認も変更も削除もできない件への対応方法</h2><div class="post-link__site"><img src="https://www.google.com/s2/favicons?domain=masutaka.net" width="14" height="14" class="post-link__site-favicon"/>masutaka.net</div></a></article></div><div class="post-list-load"><button class="post-list-load__button">LOAD MORE</button></div></div></div></section><footer class="site-footer"><div class="content-wrapper"><p>© <!-- -->Feedforce Group Inc.</p></div></footer></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"member":{"name":"masutaka","role":"LookML Developer","bio":"カレー大好き！","avatarSrc":"https://www.gravatar.com/avatar/b7a93b5c3bcfa8f2f8047584cc16bf13?size=256","sources":["https://developer.feedforce.jp/rss/author/masutaka26","https://masutaka.net/chalow/cl.rss"],"twitterUsername":"masutaka","githubUsername":"masutaka","websiteUrl":"https://masutaka.net"},"postItems":[{"title":"RIZIN LANDMARK vol.1 の時間帯に発生した U-NEXT の障害体験メモ #RIZIN_LANDMARK #RIZIN_LANDMARK01","content":"RIZIN 初の、配信に特化した格闘技イベント RIZIN LANDMARK vol.1 が 2021-10-02（土）19:00 から開催されるはずだった。ちなみに 4 試合で ¥3,800 と、オトクな料金設定ではない。その時間に合わせて 18:45 頃に PC ブラウザで https://video.unext.jp/ にアクセスしたら、しばらく待たされた後 502 Bad Gateway が返ってきた。[502 Bad Gateway]U-NEXT 公式アカウントからはお知らせがあった。https://video.unext.jp/ 自体にアクセス出来ないため、サイト上でのお知らせは確認できず。loading...しばらく待ってもアクセスできなかった。スマホアプリならアクセスできるとの情報を目にしたため Android 版をダウンロードしたところ、エラーにはならず静止画を見られた。幸い Chromecast を持っていたため、テレビにキャストして大画面には出来た。PC ブラウザだと相変わらず 502 Bad Gateway が発生。その後 404 Not Found のケースや、CloudFront が返す nginx らしきエラー文言も確認できた。スマホアプリはしばらくお待ちくださいメッセージと BGM が流れるのみ。自分の経験上、Chromecast でスマホアプリをテレビにキャストするより、PC をテレビに HDMI 接続するほうが安定性が高いので、見られはしたが不安要素はあった。19:45 にスタジオの映像が繋がり、RIZIN CEO 榊原さんからお詫びとともに 20:00 に開催するとのお知らせがあった。実際開催され、21:30 頃の終了まで、特に問題なく視聴することが出来た。ただし、その間 PC ブラウザはエラーになり続けたようだ。途中でブラウザのタブを閉じたため、復旧時間は分からない。試合の合間に U-NEXT の CM が入ったのは視聴者体験として最悪だった。それも RIZIN に合わせたわけではない普通の U-NEXT の CM。もちろんその時はまだ障害発生中。いやー、最悪だったw参考: 当日の私のツイート勝手に想像したことPC ブラウザ経由のアクセスについて、RIZIN LANDMARK 視聴者だけでなく、U-NEXT 視聴者全体に影響が出ていたと思われる。PC ブラウザはエラーになり、スマホアプリは問題なかったことと、502 Bad Gateway という事象から、両者のバックエンドサーバー群は別だったと考えられる。ちなみに成人向けの https://video.hnext.jp/ に PC ブラウザでアクセスしたらこちらも問題なかった。こちらも別だと考えられる。PC ブラウザは 20:00 以降もエラーが解消されなかった。バックエンドサーバーをスケールアウトするのにそこまで時間がかかるものだろうか？video.unext.jp は CloudFront の IP アドレスと紐付いていた。https://video.unext.jp から適当に見つけた in.unext.jp は AWS ELB の IP アドレスだった。$ dig +short video.unext.jpd1p8rc5i9ac9qt.cloudfront.net.13.225.159.6813.225.159.10013.225.159.5613.225.159.96$ dig +short in.unext.jptd-bridge-43693737.ap-northeast-1.elb.amazonaws.com.35.74.87.6254.65.156.10152.193.64.209勝手に想像するに、バックエンドサーバーは素の EC2 インスタンスで、運用の事情でスケールアウトに時間がかかったのかな。ECS を使っていたにしても、EC2 インスタンスの台数の上限に達してしまったのかもしれない。AWS のサポートに連絡するも、すぐには上限を開放できなかったとか、もしくは土曜日ということもあり、障害発生時に当番エンジニアに連絡がつかなかったとか。格闘技イベントならではの事情榊原さんの総括によると、格闘技イベントは間際の購入が多いそう。RIZIN Live は前日までの購入だと 500 円安いけど、U-NEXT は何もない。視聴者としては、今回早く買うインセンティブはなかった。ちなみに私は前日に買った。計画的奴。それもあって調達すべきサーバーの台数を見誤り、今回の障害が発生したのだと思う。U-NEXT では今まで音楽イベントのライブ配信はあったそうだが、外でも配信をしていたそう（噂レベル）。格闘技の独占配信ライブは初めてだったようなので完全な見積もりミス。初めての時は、見積もりの 2 倍くらいにはすると思うのですがね。ちなみにライブ視聴数は公式にはお知らせはないが 10 万人には行かないそう。RIZIN としては「U-NEXT 独占配信」が仇となった。まとめ2021-10-02（土）18:30 頃から 21:00 過ぎまで（？）に U-NEXT を PC ブラウザで見られない障害が発生した。スマホアプリでは見られた。同時間帯は RIZIN LANDMARK vol.1 のライブ配信のまっただ中。格闘技イベントという性質上、ネット上では不満が爆発した。選手もいつまでか分からない中待たされて、大変だったと思う。RIZIN は U-NEXT とのタッグを今後も続けるのであれば、早く買えば少し安くなるなど、見積もりの制度を上げる施策は必須。加えて、試合の高揚感をぶち壊すような CM を流さないことはもちろん、U-NEXT 上でも RIZIN のユーザー体験が出来るような、コミュニケーションのすり合わせも。配信プラットフォームを冗長化することも必要かもしれないが、アライアンスという意味では難しいのかな？そもそも今後、朝倉海選手の海外転向、那須川選手のボクシング転向など、スター選手が減る中で、配信特化型イベントを続けられるかという問題はあると思う。その後の動きU-NEXT から謝罪のお知らせがありました。格闘技イベント『RIZIN LANDMARK』の配信につきまして - お知らせ｜U-NEXTヘルプセンター","contentSnippet":"RIZIN 初の、配信に特化した格闘技イベント RIZIN LANDMARK vol.1 が 2021-10-02（土）19:00 から開催されるはずだった。ちなみに 4 試合で ¥3,800 と、オトクな料金設定ではない。その時間に合わせて 18:45 頃に PC ブラウザで https://video.unext.jp/ にアクセスしたら、しばらく待たされた後 502 Bad Gateway が返ってきた。[502 Bad Gateway]U-NEXT 公式アカウントからはお知らせがあった。https://video.unext.jp/ 自体にアクセス出来ないため、サイト上でのお知らせは確認できず。loading...しばらく待ってもアクセスできなかった。スマホアプリならアクセスできるとの情報を目にしたため Android 版をダウンロードしたところ、エラーにはならず静止画を見られた。幸い Chromecast を持っていたため、テレビにキャストして大画面には出来た。PC ブラウザだと相変わらず 502 Bad Gateway が発生。その後 404 Not Found のケースや、CloudFront が返す nginx らしきエラー文言も確認できた。スマホアプリはしばらくお待ちくださいメッセージと BGM が流れるのみ。自分の経験上、Chromecast でスマホアプリをテレビにキャストするより、PC をテレビに HDMI 接続するほうが安定性が高いので、見られはしたが不安要素はあった。19:45 にスタジオの映像が繋がり、RIZIN CEO 榊原さんからお詫びとともに 20:00 に開催するとのお知らせがあった。実際開催され、21:30 頃の終了まで、特に問題なく視聴することが出来た。ただし、その間 PC ブラウザはエラーになり続けたようだ。途中でブラウザのタブを閉じたため、復旧時間は分からない。試合の合間に U-NEXT の CM が入ったのは視聴者体験として最悪だった。それも RIZIN に合わせたわけではない普通の U-NEXT の CM。もちろんその時はまだ障害発生中。いやー、最悪だったw参考: 当日の私のツイート勝手に想像したことPC ブラウザ経由のアクセスについて、RIZIN LANDMARK 視聴者だけでなく、U-NEXT 視聴者全体に影響が出ていたと思われる。PC ブラウザはエラーになり、スマホアプリは問題なかったことと、502 Bad Gateway という事象から、両者のバックエンドサーバー群は別だったと考えられる。ちなみに成人向けの https://video.hnext.jp/ に PC ブラウザでアクセスしたらこちらも問題なかった。こちらも別だと考えられる。PC ブラウザは 20:00 以降もエラーが解消されなかった。バックエンドサーバーをスケールアウトするのにそこまで時間がかかるものだろうか？video.unext.jp は CloudFront の IP アドレスと紐付いていた。https://video.unext.jp から適当に見つけた in.unext.jp は AWS ELB の IP アドレスだった。$ dig +short video.unext.jpd1p8rc5i9ac9qt.cloudfront.net.13.225.159.6813.225.159.10013.225.159.5613.225.159.96$ dig +short in.unext.jptd-bridge-43693737.ap-northeast-1.elb.amazonaws.com.35.74.87.6254.65.156.10152.193.64.209勝手に想像するに、バックエンドサーバーは素の EC2 インスタンスで、運用の事情でスケールアウトに時間がかかったのかな。ECS を使っていたにしても、EC2 インスタンスの台数の上限に達してしまったのかもしれない。AWS のサポートに連絡するも、すぐには上限を開放できなかったとか、もしくは土曜日ということもあり、障害発生時に当番エンジニアに連絡がつかなかったとか。格闘技イベントならではの事情榊原さんの総括によると、格闘技イベントは間際の購入が多いそう。RIZIN Live は前日までの購入だと 500 円安いけど、U-NEXT は何もない。視聴者としては、今回早く買うインセンティブはなかった。ちなみに私は前日に買った。計画的奴。それもあって調達すべきサーバーの台数を見誤り、今回の障害が発生したのだと思う。U-NEXT では今まで音楽イベントのライブ配信はあったそうだが、外でも配信をしていたそう（噂レベル）。格闘技の独占配信ライブは初めてだったようなので完全な見積もりミス。初めての時は、見積もりの 2 倍くらいにはすると思うのですがね。ちなみにライブ視聴数は公式にはお知らせはないが 10 万人には行かないそう。RIZIN としては「U-NEXT 独占配信」が仇となった。まとめ2021-10-02（土）18:30 頃から 21:00 過ぎまで（？）に U-NEXT を PC ブラウザで見られない障害が発生した。スマホアプリでは見られた。同時間帯は RIZIN LANDMARK vol.1 のライブ配信のまっただ中。格闘技イベントという性質上、ネット上では不満が爆発した。選手もいつまでか分からない中待たされて、大変だったと思う。RIZIN は U-NEXT とのタッグを今後も続けるのであれば、早く買えば少し安くなるなど、見積もりの制度を上げる施策は必須。加えて、試合の高揚感をぶち壊すような CM を流さないことはもちろん、U-NEXT 上でも RIZIN のユーザー体験が出来るような、コミュニケーションのすり合わせも。配信プラットフォームを冗長化することも必要かもしれないが、アライアンスという意味では難しいのかな？そもそも今後、朝倉海選手の海外転向、那須川選手のボクシング転向など、スター選手が減る中で、配信特化型イベントを続けられるかという問題はあると思う。その後の動きU-NEXT から謝罪のお知らせがありました。格闘技イベント『RIZIN LANDMARK』の配信につきまして - お知らせ｜U-NEXTヘルプセンター","link":"https://masutaka.net/chalow/2021-10-03-1.html","isoDate":"2021-10-03T14:59:59.000Z","dateMiliSeconds":1633273199000,"authorName":"masutaka"},{"title":"Terraform を使わずに Route 53 の DNS レコードを管理する方法を調べてみた","content":"この１年半はインフラエンジニアっぽい仕事から離れて、LookML 開発者として仕事をしています。自分としてはジョブチェンジで、モチベーションはめっちゃ高いです。うぉー！🔥LookML 開発に出来るだけ専念できるように配慮して頂いたり、自分でもそう心がけていますが、それでも DNS レコードの登録依頼や、その他諸々の相談がちょいちょいあります。DNS レコードは Route 53 で管理しています。言われるがままに登録していけば悩みはないのですが、何のために登録するのか？や、登録されているこのレコードは何だ？とか考え始めると地味に悩ましいものがあります。今の仕事では Terraform は使っていないし、このためだけに Terraform を導入するのはオーバー過ぎます。Terraform を導入したらアップデートし続けない選択肢はありませんが、変なエラーでハマって何時間も浪費することがあります。今の仕事の性質上、それは絶対に避けたいので、Terraform 以外で Route 53 の DNS レコードを管理する方法を調べてみました。SAM で管理できるか？つまり CloudFormation 管理下に置くか？ということです。Terraform ではツールのアップデートに追随する必要がありますが、SAM なら serverless-application-model のバージョンに追随すれば良いだけです。最新は 2016-10-31 なので、あまり考えなくて良さそうです。結論としては、止めたほうが良いと思いました。良くも悪くも CloudFormation 管理下に置かれるので、Route 53 Console 上で気軽に変更するとコードと乖離してしまいます。そのため常に SAM で変更する必要があります。もっとカジュアルに管理したいのです。ちなみにこんな template.yaml で DNS レコードを作れます。ただ更新がうまく出来なかった。それ以上は調べてない...。AWSTemplateFormatVersion: '2010-09-09'Transform: AWS::Serverless-2016-10-31Description: Managed by AWS SAMResources: Hoge: Type: AWS::Route53::RecordSet Properties: HostedZoneId: xxxxxxxxxxxxxx Name: hoge.masutaka.net. Type: TXT TTL: 300 ResourceRecords: - '\"abcdefgxyz\"'AWS CLI で管理できるか？そもそもエネルギーを注ぐところではないので、新しいツールは増やしたくないところ。そういう意味では AWS CLI でどこまで出来るかは興味がありました。AWS CLI を使った DNS レコードの設定方法はクラスメソッドさんのブログ記事が分かりやすいです。AWS CLI で Route53 のホストゾーンのレコードを操作してみた｜DevelopersIO作成したいレコード設定を書いて、それに対して CREATE/DELETE/UPSERT をするイメージです。UPSERT は UPDATE+INSERT の造語です。なければ作るし、あれば更新する。こんな Makefile があれば管理できるか検討しました。latest-update.json に変更したい設定を書き、route53-records.json に現在のレコードを全部記録します。AWS := awsIGNORE_EXIT_STATUS := || :JSON_FILE := latest-update.jsonROUTE53_RECORDS := route53-records.jsonWAIT_SEC := 5ZONE_ID := xxxxxxxxxxxxxx.PHONY: listlist:@$(AWS) route53 list-resource-record-sets --hosted-zone-id $(ZONE_ID).PHONY: applyapply:@$(AWS) route53 change-resource-record-sets --hosted-zone-id $(ZONE_ID) --change-batch file://$(JSON_FILE) $(IGNORE_EXIT_STATUS)@echo \"Wait $(WAIT_SEC) seconds...\"@sleep $(WAIT_SEC)@make --no-print-directory list \u0026gt; $(ROUTE53_RECORDS)結論としては、変更は出来るけど管理をするのは難しいと思いました。運用できなくはないのですが、管理のための管理になる気がしました。特に DELETE ではレコード名以外に TTL など現在の設定を全て指定する必要があります。面倒です。せめて各レコードのコメントを route53-records.json に残せれば良いのですが、json にはコメントを書けないので、コード管理する旨味がありません。Roadworker で管理できるか？最後に Roadworker を検討しました。Roadworker は Ruby 製のツールです。\"$ roadwork -e -o Routefile\" で Routefile ファイルにエクスポートして、以後は Routefile を変更し、\"$ roadwork -a\" で Route 53 に適用します。Routefile は Ruby の DSL なので、各レコードにコメントも残せます。Route 53 Console 上で変更するとコードと乖離するのは SAM と同じですが、状態もコードも Routefile に集約されるので、そこまで気にしなくて良いかもしれません。※ SAM は状態が CloudFormation に、コードは template.yaml に分かれるという理解。問題は Routefile 自体にはバージョンがないため、Roadworker 自体のバージョンを気にする必要があることでしょうか。Gemfile で Roadworker のバージョンを管理した方が良いと思います。でも今回のコンテキストではやりたくありません。まあ、気にせずグローバルにインストールすれば良いのですがね。自分が気にし過ぎなのか...。結論DNS レコード一覧の esa 記事作って、ゆるふわで把握することにします。（なんだそりゃ今回の課題を掘り下げると、DNS レコードにメモを残したいだけなんですよね。特に TXT レコードはよく分からないものが残りがちで、消して良いのか判断が難しいです。今回の中では Roadworker が及第点ではありますが、Routefile のための GitHub リポジトリが増える、新たなツールが登場するなど、デメリットがメリットを地味に上回り、オーバーだと判断しました。Route 53 の各レコードに「メモ」を書きたいだけだった。😭","contentSnippet":"この１年半はインフラエンジニアっぽい仕事から離れて、LookML 開発者として仕事をしています。自分としてはジョブチェンジで、モチベーションはめっちゃ高いです。うぉー！🔥LookML 開発に出来るだけ専念できるように配慮して頂いたり、自分でもそう心がけていますが、それでも DNS レコードの登録依頼や、その他諸々の相談がちょいちょいあります。DNS レコードは Route 53 で管理しています。言われるがままに登録していけば悩みはないのですが、何のために登録するのか？や、登録されているこのレコードは何だ？とか考え始めると地味に悩ましいものがあります。今の仕事では Terraform は使っていないし、このためだけに Terraform を導入するのはオーバー過ぎます。Terraform を導入したらアップデートし続けない選択肢はありませんが、変なエラーでハマって何時間も浪費することがあります。今の仕事の性質上、それは絶対に避けたいので、Terraform 以外で Route 53 の DNS レコードを管理する方法を調べてみました。SAM で管理できるか？つまり CloudFormation 管理下に置くか？ということです。Terraform ではツールのアップデートに追随する必要がありますが、SAM なら serverless-application-model のバージョンに追随すれば良いだけです。最新は 2016-10-31 なので、あまり考えなくて良さそうです。結論としては、止めたほうが良いと思いました。良くも悪くも CloudFormation 管理下に置かれるので、Route 53 Console 上で気軽に変更するとコードと乖離してしまいます。そのため常に SAM で変更する必要があります。もっとカジュアルに管理したいのです。ちなみにこんな template.yaml で DNS レコードを作れます。ただ更新がうまく出来なかった。それ以上は調べてない...。AWSTemplateFormatVersion: '2010-09-09'Transform: AWS::Serverless-2016-10-31Description: Managed by AWS SAMResources: Hoge: Type: AWS::Route53::RecordSet Properties: HostedZoneId: xxxxxxxxxxxxxx Name: hoge.masutaka.net. Type: TXT TTL: 300 ResourceRecords: - '\"abcdefgxyz\"'AWS CLI で管理できるか？そもそもエネルギーを注ぐところではないので、新しいツールは増やしたくないところ。そういう意味では AWS CLI でどこまで出来るかは興味がありました。AWS CLI を使った DNS レコードの設定方法はクラスメソッドさんのブログ記事が分かりやすいです。AWS CLI で Route53 のホストゾーンのレコードを操作してみた｜DevelopersIO作成したいレコード設定を書いて、それに対して CREATE/DELETE/UPSERT をするイメージです。UPSERT は UPDATE+INSERT の造語です。なければ作るし、あれば更新する。こんな Makefile があれば管理できるか検討しました。latest-update.json に変更したい設定を書き、route53-records.json に現在のレコードを全部記録します。AWS := awsIGNORE_EXIT_STATUS := || :JSON_FILE := latest-update.jsonROUTE53_RECORDS := route53-records.jsonWAIT_SEC := 5ZONE_ID := xxxxxxxxxxxxxx.PHONY: listlist:@$(AWS) route53 list-resource-record-sets --hosted-zone-id $(ZONE_ID).PHONY: applyapply:@$(AWS) route53 change-resource-record-sets --hosted-zone-id $(ZONE_ID) --change-batch file://$(JSON_FILE) $(IGNORE_EXIT_STATUS)@echo \"Wait $(WAIT_SEC) seconds...\"@sleep $(WAIT_SEC)@make --no-print-directory list \u003e $(ROUTE53_RECORDS)結論としては、変更は出来るけど管理をするのは難しいと思いました。運用できなくはないのですが、管理のための管理になる気がしました。特に DELETE ではレコード名以外に TTL など現在の設定を全て指定する必要があります。面倒です。せめて各レコードのコメントを route53-records.json に残せれば良いのですが、json にはコメントを書けないので、コード管理する旨味がありません。Roadworker で管理できるか？最後に Roadworker を検討しました。Roadworker は Ruby 製のツールです。\"$ roadwork -e -o Routefile\" で Routefile ファイルにエクスポートして、以後は Routefile を変更し、\"$ roadwork -a\" で Route 53 に適用します。Routefile は Ruby の DSL なので、各レコードにコメントも残せます。Route 53 Console 上で変更するとコードと乖離するのは SAM と同じですが、状態もコードも Routefile に集約されるので、そこまで気にしなくて良いかもしれません。※ SAM は状態が CloudFormation に、コードは template.yaml に分かれるという理解。問題は Routefile 自体にはバージョンがないため、Roadworker 自体のバージョンを気にする必要があることでしょうか。Gemfile で Roadworker のバージョンを管理した方が良いと思います。でも今回のコンテキストではやりたくありません。まあ、気にせずグローバルにインストールすれば良いのですがね。自分が気にし過ぎなのか...。結論DNS レコード一覧の esa 記事作って、ゆるふわで把握することにします。（なんだそりゃ今回の課題を掘り下げると、DNS レコードにメモを残したいだけなんですよね。特に TXT レコードはよく分からないものが残りがちで、消して良いのか判断が難しいです。今回の中では Roadworker が及第点ではありますが、Routefile のための GitHub リポジトリが増える、新たなツールが登場するなど、デメリットがメリットを地味に上回り、オーバーだと判断しました。Route 53 の各レコードに「メモ」を書きたいだけだった。😭","link":"https://masutaka.net/chalow/2021-09-27-1.html","isoDate":"2021-09-27T14:59:59.000Z","dateMiliSeconds":1632754799000,"authorName":"masutaka"},{"title":"Looker で Join 先の view の primary_key をいい感じにテストする方法をようやく見つけた","content":"\u003cp\u003eこんにちは、\u003ca href=\"http://blog.hatena.ne.jp/masutaka26/\" class=\"hatena-id-icon\"\u003e\u003cimg src=\"https://cdn.profile-image.st-hatena.com/users/masutaka26/profile.png\" width=\"16\" height=\"16\" alt=\"\" class=\"hatena-id-icon\"\u003eid:masutaka26\u003c/a\u003e です。\n先週はまるっと夏休みにしてました。今日からまた \u003ca href=\"https://ja.looker.com/\"\u003eLooker\u003c/a\u003e と戯れる日々が始まります。\u003c/p\u003e\n\n\u003cp\u003e丸１年 Looker と戯れてきて最近ようやく、\u003cstrong\u003eJoin 先の view でも\u003c/strong\u003e primary_key が壊れてないことを保証するテストの書き方が分かったので、今回紹介します。\u003c/p\u003e\n\n\u003cul class=\"table-of-contents\"\u003e\n    \u003cli\u003e\u003ca href=\"#Looker-における-primary_key-の役割\"\u003eLooker における primary_key の役割\u003c/a\u003e\u003c/li\u003e\n    \u003cli\u003e\u003ca href=\"#primary_key-の実装例\"\u003eprimary_key の実装例\u003c/a\u003e\u003c/li\u003e\n    \u003cli\u003e\u003ca href=\"#LookML-開発におけるテスト\"\u003eLookML 開発におけるテスト\u003c/a\u003e\u003c/li\u003e\n    \u003cli\u003e\u003ca href=\"#Join-先の-view-は-primary_key-をテスト出来ないことがある\"\u003eJoin 先の view は primary_key をテスト出来ないことがある\u003c/a\u003e\u003c/li\u003e\n    \u003cli\u003e\u003ca href=\"#Join-先の-view-の-primary_key-をいい感じにテストする\"\u003eJoin 先の view の primary_key をいい感じにテストする\u003c/a\u003e\u003c/li\u003e\n    \u003cli\u003e\u003ca href=\"#まとめと所感\"\u003eまとめと所感\u003c/a\u003e\u003c/li\u003e\n    \u003cli\u003e\u003ca href=\"#おまけ\"\u003eおまけ\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\n\u003ch2 id=\"Looker-における-primary_key-の役割\"\u003eLooker における primary_key の役割\u003c/h2\u003e\n\n\u003cp\u003eLooker には \u003ca href=\"https://help.looker.com/hc/en-us/articles/360023722974\"\u003eSymmetric Aggregates\u003c/a\u003e という、合計を重複させない素晴らしい仕組みがあります。以前このブログでも紹介しました。\u003c/p\u003e\n\n\u003cp\u003e\u003ciframe src=\"https://hatenablog-parts.com/embed?url=https%3A%2F%2Fdeveloper.feedforce.jp%2Fentry%2F2020%2F10%2F23%2F190000\" title=\"『4月から取り組んできたLookerの導入から実装までのお話（Redashとも比較）』という発表をした - Feedforce Developer Blog\" class=\"embed-card embed-blogcard\" scrolling=\"no\" frameborder=\"0\" style=\"display: block; width: 100%; height: 190px; max-width: 500px; margin: 10px 0px;\"\u003e\u003c/iframe\u003e\u003c/p\u003e\n\n\u003cp\u003eその Symmetric Aggregates では \u003ca href=\"https://docs.looker.com/reference/field-params/primary_key\"\u003eprimary_key\u003c/a\u003e が重要な役割を果たします。適切に設定されていないと、以下のような問題が発生します。\u003c/p\u003e\n\n\u003cul\u003e\n\u003cli\u003eprimary_key が重複すると fanout エラーが発生することがある\u003c/li\u003e\n\u003cli\u003eprimary_key が null だと Measure が 0 になることがある\u003c/li\u003e\n\u003c/ul\u003e\n\n\n\u003cp\u003eこのような問題は大概、ふわっと質問が来て発覚します。今のタスクを保留にして調査することは精神的になかなか辛いものがあり、それなりに時間も費やすことになるため、可能な限り事前に避けたいところです。\u003c/p\u003e\n\n\u003ch2 id=\"primary_key-の実装例\"\u003eprimary_key の実装例\u003c/h2\u003e\n\n\u003cp\u003e私が所属する \u003ca href=\"https://feedmatic.net/\"\u003eFeedmatic\u003c/a\u003e では、ウェブ広告や Google Analytics のデータを扱っています。正規化されたきれいなデータは少なく、Rails の id のようなユニークなカラムは存在しないことが多いです。\u003c/p\u003e\n\n\u003cp\u003eそのため、このようにいくつかの Dimension を組み合わせて primary_key を定義します。\u003c/p\u003e\n\n\u003cpre class=\"code\" data-lang=\"\" data-unlink\u003edimension: id {\n  primary_key: yes\n  type: string\n  sql: CONCAT(${dimension1}, ${dimension2}, IFNULL(${dimension3}, \u0026#39;\u0026#39;)) ;;\n  hidden: yes\n}\u003c/pre\u003e\n\n\n\u003cp\u003e※ \u003ca href=\"https://ja.wikipedia.org/wiki/%E3%83%87%E3%83%BC%E3%82%BF%E3%82%A6%E3%82%A7%E3%82%A2%E3%83%8F%E3%82%A6%E3%82%B9\"\u003eDWH\u003c/a\u003e は BigQuery を使っています。\u003c/p\u003e\n\n\u003cp\u003eこれで済めばよいのですが、上の例だとある日突然 dimension2 が null になり始めたり、全ての string 型の Dimension を使っても重複し始めることがあります。データの性格は理解していたつもりでしたが、実際どちらもありました。😭\u003c/p\u003e\n\n\u003ch2 id=\"LookML-開発におけるテスト\"\u003eLookML 開発におけるテスト\u003c/h2\u003e\n\n\u003cp\u003e以上の課題を解決するために、\u003ca href=\"https://docs.looker.com/reference/model-params/test\"\u003etest\u003c/a\u003e パラメータが使えます。\u003c/p\u003e\n\n\u003cp\u003e例えばこのような \u003ccode\u003eparent\u003c/code\u003e explore があったとします。Join がないのでシンプルです。\u003c/p\u003e\n\n\u003cpre class=\"code\" data-lang=\"\" data-unlink\u003eexplore: parent {\n  ...\n}\n\nview: parent {\n  dimension: id {\n    primary_key: yes\n    ...\n  }\n\n  measure: count {\n    type: count\n  }\n}\u003c/pre\u003e\n\n\n\u003cp\u003e私はこのようなテストを書いて、全ての \u003ccode\u003eparent.id\u003c/code\u003e が null でないことと、重複しないことを保証させています。\u003c/p\u003e\n\n\u003cpre class=\"code\" data-lang=\"\" data-unlink\u003etest: parent_id_is_not_null {\n  explore_source: parent {\n    column: id {}\n    sorts: [parent.id: asc]\n    limit: 1\n  }\n  assert: id_is_not_null {\n    expression: NOT is_null(${parent.id}) ;;\n  }\n}\n\ntest: parent_id_is_unique {\n  explore_source: parent {\n    column: id {}\n    column: count {}\n    sorts: [parent.count: desc]\n    limit: 1\n  }\n  assert: id_is_unique {\n    expression: ${parent.count} = 1 ;;\n  }\n}\u003c/pre\u003e\n\n\n\u003cp\u003e👉 ソート時に null が先頭と末尾のどちらに来るかは、DWH の実装によります。\u003c/p\u003e\n\n\u003ch2 id=\"Join-先の-view-は-primary_key-をテスト出来ないことがある\"\u003eJoin 先の view は primary_key をテスト出来ないことがある\u003c/h2\u003e\n\n\u003cp\u003eさて、\u003ccode\u003echild\u003c/code\u003e view を Join する必要が出てきました。\u003c/p\u003e\n\n\u003cpre class=\"code\" data-lang=\"\" data-unlink\u003eexplore: parent {\n  join: child {\n    type: left_outer\n    relationship: one_to_many\n    sql_on: ... ;;\n  }\n}\n\nview: parent {\n  dimension: id {\n    primary_key: yes\n    ...\n  }\n\n  measure: count {\n    type: count\n  }\n}\n\nview: child {\n  dimension: id {\n    primary_key: yes\n    ...\n  }\n\n  measure: count {\n    type: count\n    hidden: yes\n  }\n}\u003c/pre\u003e\n\n\n\u003cp\u003e同じように \u003ccode\u003echild.id\u003c/code\u003e のテストを書きましたが、うまくいきません。\u003ccode\u003eis_not_null\u003c/code\u003e はまだしも、\u003ccode\u003eis_unique\u003c/code\u003e がダメです。\u003c/p\u003e\n\n\u003cpre class=\"code\" data-lang=\"\" data-unlink\u003e# これは OK\ntest: parent_child_id_is_not_null {\n  explore_source: parent {\n    column: id { field: child.id }\n    sorts: [child.id: asc]\n    limit: 1\n  }\n  assert: child_id_is_not_null {\n    expression: NOT is_null(${child.id}) ;;\n  }\n}\n\n# parent の count になり、テストが通らない。\ntest: parent_child_id_is_unique {\n  explore_source: parent {\n    column: id { field: child.id }\n    column: count { field: child.count }\n    sorts: [parent.count: desc]\n    limit: 1\n  }\n  assert: child_id_is_unique {\n    expression: ${child.count} = 1 ;;\n  }\n}\u003c/pre\u003e\n\n\n\u003cp\u003eよく考えれば当たり前の話で、Join した状態でテストを書いているからです。そもそも \u003ccode\u003echild\u003c/code\u003e view の primary_key のテストをしたいだけなのに、Join は邪魔です。\u003c/p\u003e\n\n\u003ch2 id=\"Join-先の-view-の-primary_key-をいい感じにテストする\"\u003eJoin 先の view の primary_key をいい感じにテストする\u003c/h2\u003e\n\n\u003cp\u003e\u003ccode\u003echild\u003c/code\u003e view と同じファイルに、こっそり \u003ccode\u003echild\u003c/code\u003e explore を定義します。\u003ca href=\"https://docs.looker.com/ja/reference/explore-params/hidden-for-explore\"\u003ehidden\u003c/a\u003e にして存在を消しています。さらに \u003ca href=\"https://docs.looker.com/reference/explore-params/required_access_grants-for-explore\"\u003erequired_access_grants\u003c/a\u003e で、開発者以外の URL 直打ちによるアクセスも防いでいます。\u003c/p\u003e\n\n\u003cpre class=\"code\" data-lang=\"\" data-unlink\u003eview: child {\n  dimension: id {\n    primary_key: yes\n    ...\n  }\n\n  measure: count {\n    type: count\n    hidden: yes\n  }\n}\n\n# Define for test\nexplore: child {\n  hidden: yes\n  required_access_grants: [can_view_explores_for_tests]\n}\u003c/pre\u003e\n\n\n\u003cp\u003e\u003ca href=\"https://docs.looker.com/reference/model-params/access_grant\"\u003eaccess_grant\u003c/a\u003e である \u003ccode\u003ecan_view_explores_for_tests\u003c/code\u003e はこのような定義です。\u003c/p\u003e\n\n\u003cpre class=\"code\" data-lang=\"\" data-unlink\u003e# For tests\naccess_grant: can_view_explores_for_tests {\n  user_attribute: view_explores_for_tests\n  allowed_values: [\u0026#34;yes\u0026#34;]\n}\u003c/pre\u003e\n\n\n\u003cp\u003e\u003ca href=\"https://docs.looker.com/admin-options/settings/user-attributes\"\u003eUser attribute\u003c/a\u003e である \u003ccode\u003eview_explores_for_tests\u003c/code\u003e は、今回のような「Join 先の view をテストすること」全般に使います。User Access は \u003ccode\u003eNone\u003c/code\u003e、Default Value も \u003ccode\u003eno\u003c/code\u003e です。開発者用の Group を作り、その Group value を \u003ccode\u003eyes\u003c/code\u003e にしました。\u003c/p\u003e\n\n\u003cp\u003eここまでやらずとも全員アクセス不可でも良いのですが、テストが落ちた時に「クエリの探索」からの調査ができなくなるので、開発者にはアクセス権を与えるポリシーにしています。\u003c/p\u003e\n\n\u003cp\u003eあとは \u003ccode\u003eparent\u003c/code\u003e explore と同じようにテストを書くだけです。\u003c/p\u003e\n\n\u003cpre class=\"code\" data-lang=\"\" data-unlink\u003etest: child_id_is_not_null {\n  explore_source: child {\n    column: id {}\n    sorts: [child.id: asc]\n    limit: 1\n  }\n  assert: id_is_not_null {\n    expression: NOT is_null(${child.id}) ;;\n  }\n}\n\ntest: child_id_is_unique {\n  explore_source: child {\n    column: id {}\n    column: count {}\n    sorts: [child.count: desc]\n    limit: 1\n  }\n  assert: id_is_unique {\n    expression: ${child.count} = 1 ;;\n  }\n}\u003c/pre\u003e\n\n\n\u003cp\u003eテストは通っても、LookML validation error が発生するかもしれません。その時は \u003ca href=\"https://docs.looker.com/ja/reference/explore-params/fields-for-explore\"\u003efields\u003c/a\u003e パラメータを使って、露出する field を限定すると良いでしょう。\u003c/p\u003e\n\n\u003cpre class=\"code\" data-lang=\"\" data-unlink\u003e# Define for test\nexplore: child {\n  hidden: yes\n  required_access_grants: [can_view_explores_for_tests]\n  fields: [child.id, child.count] # Avoid LookML validation error\n}\u003c/pre\u003e\n\n\n\u003cp\u003eこのテクニックは \u003ca href=\"https://help.looker.com/hc/en-us/articles/360023586293-Error-Unknown-or-Inaccessible-Field\"\u003eError: Unknown or Inaccessible Field – Looker Help Center\u003c/a\u003e でも紹介されています。\u003c/p\u003e\n\n\u003ch2 id=\"まとめと所感\"\u003eまとめと所感\u003c/h2\u003e\n\n\u003cp\u003eLookML 開発者で、且つテストを書いていて、且つ Join 先の view の primary_key に課題を抱えている、大変ニッチな層向けに記事を書きました。どこかの誰かに参考になれば幸いです。\u003c/p\u003e\n\n\u003cp\u003eもっと良い方法や、今回のやり方はここがマズイとかあれば \u003ca href=\"https://twitter.com/masutaka\"\u003e@masutaka\u003c/a\u003e にお知らせ頂けると大変うれしいです。🙏\u003c/p\u003e\n\n\u003cp\u003eFeedmatic では今回のような view は数十もあり、primary_key のテストはまだ書き始めたばかりです。\u003c/p\u003e\n\n\u003cp\u003eLooker ではテストは直列でしか実行されないようで、書けば書くほど全テストが遅くなるのはモヤモヤしています。さすがに要望しようと思ってますが。\u003c/p\u003e\n\n\u003cp\u003eそれに関連して、最近ディレクトリやファイル構成を再検討しました。次回はその記事を書く予定です。\u003c/p\u003e\n\n\u003ch2 id=\"おまけ\"\u003eおまけ\u003c/h2\u003e\n\n\u003cp\u003e今回の記事を書く過程で、中の人が書いたベストプラクティスを見つけました。\u003c/p\u003e\n\n\u003cp\u003e\u003ciframe src=\"https://hatenablog-parts.com/embed?url=https%3A%2F%2Fcommunity.looker.com%2Flookml-5%2Flookml-data-tests-recommendations-and-best-practices-20815\" title=\"LookML Data Tests: Recommendations and Best Practices | Looker Community\" class=\"embed-card embed-webcard\" scrolling=\"no\" frameborder=\"0\" style=\"display: block; width: 100%; height: 155px; max-width: 500px; margin: 10px 0px;\"\u003e\u003c/iframe\u003e\u003c/p\u003e\n\n\u003cp\u003e今回の記事ほど細かいテクニックは書かれていませんが、全体を網羅した良記事なので要チェックです。\u003c/p\u003e\n","contentSnippet":"こんにちは、id:masutaka26 です。先週はまるっと夏休みにしてました。今日からまた Looker と戯れる日々が始まります。丸１年 Looker と戯れてきて最近ようやく、Join 先の view でも primary_key が壊れてないことを保証するテストの書き方が分かったので、今回紹介します。Looker における primary_key の役割primary_key の実装例LookML 開発におけるテストJoin 先の view は primary_key をテスト出来ないことがあるJoin 先の view の primary_key をいい感じにテストするまとめと所感おまけLooker における primary_key の役割Looker には Symmetric Aggregates という、合計を重複させない素晴らしい仕組みがあります。以前このブログでも紹介しました。その Symmetric Aggregates では primary_key が重要な役割を果たします。適切に設定されていないと、以下のような問題が発生します。primary_key が重複すると fanout エラーが発生することがあるprimary_key が null だと Measure が 0 になることがあるこのような問題は大概、ふわっと質問が来て発覚します。今のタスクを保留にして調査することは精神的になかなか辛いものがあり、それなりに時間も費やすことになるため、可能な限り事前に避けたいところです。primary_key の実装例私が所属する Feedmatic では、ウェブ広告や Google Analytics のデータを扱っています。正規化されたきれいなデータは少なく、Rails の id のようなユニークなカラムは存在しないことが多いです。そのため、このようにいくつかの Dimension を組み合わせて primary_key を定義します。dimension: id {  primary_key: yes  type: string  sql: CONCAT(${dimension1}, ${dimension2}, IFNULL(${dimension3}, '')) ;;  hidden: yes}※ DWH は BigQuery を使っています。これで済めばよいのですが、上の例だとある日突然 dimension2 が null になり始めたり、全ての string 型の Dimension を使っても重複し始めることがあります。データの性格は理解していたつもりでしたが、実際どちらもありました。😭LookML 開発におけるテスト以上の課題を解決するために、test パラメータが使えます。例えばこのような parent explore があったとします。Join がないのでシンプルです。explore: parent {  ...}view: parent {  dimension: id {    primary_key: yes    ...  }  measure: count {    type: count  }}私はこのようなテストを書いて、全ての parent.id が null でないことと、重複しないことを保証させています。test: parent_id_is_not_null {  explore_source: parent {    column: id {}    sorts: [parent.id: asc]    limit: 1  }  assert: id_is_not_null {    expression: NOT is_null(${parent.id}) ;;  }}test: parent_id_is_unique {  explore_source: parent {    column: id {}    column: count {}    sorts: [parent.count: desc]    limit: 1  }  assert: id_is_unique {    expression: ${parent.count} = 1 ;;  }}👉 ソート時に null が先頭と末尾のどちらに来るかは、DWH の実装によります。Join 先の view は primary_key をテスト出来ないことがあるさて、child view を Join する必要が出てきました。explore: parent {  join: child {    type: left_outer    relationship: one_to_many    sql_on: ... ;;  }}view: parent {  dimension: id {    primary_key: yes    ...  }  measure: count {    type: count  }}view: child {  dimension: id {    primary_key: yes    ...  }  measure: count {    type: count    hidden: yes  }}同じように child.id のテストを書きましたが、うまくいきません。is_not_null はまだしも、is_unique がダメです。# これは OKtest: parent_child_id_is_not_null {  explore_source: parent {    column: id { field: child.id }    sorts: [child.id: asc]    limit: 1  }  assert: child_id_is_not_null {    expression: NOT is_null(${child.id}) ;;  }}# parent の count になり、テストが通らない。test: parent_child_id_is_unique {  explore_source: parent {    column: id { field: child.id }    column: count { field: child.count }    sorts: [parent.count: desc]    limit: 1  }  assert: child_id_is_unique {    expression: ${child.count} = 1 ;;  }}よく考えれば当たり前の話で、Join した状態でテストを書いているからです。そもそも child view の primary_key のテストをしたいだけなのに、Join は邪魔です。Join 先の view の primary_key をいい感じにテストするchild view と同じファイルに、こっそり child explore を定義します。hidden にして存在を消しています。さらに required_access_grants で、開発者以外の URL 直打ちによるアクセスも防いでいます。view: child {  dimension: id {    primary_key: yes    ...  }  measure: count {    type: count    hidden: yes  }}# Define for testexplore: child {  hidden: yes  required_access_grants: [can_view_explores_for_tests]}access_grant である can_view_explores_for_tests はこのような定義です。# For testsaccess_grant: can_view_explores_for_tests {  user_attribute: view_explores_for_tests  allowed_values: [\"yes\"]}User attribute である view_explores_for_tests は、今回のような「Join 先の view をテストすること」全般に使います。User Access は None、Default Value も no です。開発者用の Group を作り、その Group value を yes にしました。ここまでやらずとも全員アクセス不可でも良いのですが、テストが落ちた時に「クエリの探索」からの調査ができなくなるので、開発者にはアクセス権を与えるポリシーにしています。あとは parent explore と同じようにテストを書くだけです。test: child_id_is_not_null {  explore_source: child {    column: id {}    sorts: [child.id: asc]    limit: 1  }  assert: id_is_not_null {    expression: NOT is_null(${child.id}) ;;  }}test: child_id_is_unique {  explore_source: child {    column: id {}    column: count {}    sorts: [child.count: desc]    limit: 1  }  assert: id_is_unique {    expression: ${child.count} = 1 ;;  }}テストは通っても、LookML validation error が発生するかもしれません。その時は fields パラメータを使って、露出する field を限定すると良いでしょう。# Define for testexplore: child {  hidden: yes  required_access_grants: [can_view_explores_for_tests]  fields: [child.id, child.count] # Avoid LookML validation error}このテクニックは Error: Unknown or Inaccessible Field – Looker Help Center でも紹介されています。まとめと所感LookML 開発者で、且つテストを書いていて、且つ Join 先の view の primary_key に課題を抱えている、大変ニッチな層向けに記事を書きました。どこかの誰かに参考になれば幸いです。もっと良い方法や、今回のやり方はここがマズイとかあれば @masutaka にお知らせ頂けると大変うれしいです。🙏Feedmatic では今回のような view は数十もあり、primary_key のテストはまだ書き始めたばかりです。Looker ではテストは直列でしか実行されないようで、書けば書くほど全テストが遅くなるのはモヤモヤしています。さすがに要望しようと思ってますが。それに関連して、最近ディレクトリやファイル構成を再検討しました。次回はその記事を書く予定です。おまけ今回の記事を書く過程で、中の人が書いたベストプラクティスを見つけました。今回の記事ほど細かいテクニックは書かれていませんが、全体を網羅した良記事なので要チェックです。","link":"https://developer.feedforce.jp/entry/2021/08/30/150000","isoDate":"2021-08-30T06:00:00.000Z","dateMiliSeconds":1630303200000,"imageUrl":"https://cdn-ak.f.st-hatena.com/images/fotolife/m/masutaka26/20201023/20201023184859.png","authorName":"masutaka"},{"title":"Manjaro でハイバネート出来るようにしたメモ","content":"４月から個人 PC を MacBook Air から Linux マシンに変えました。[2021-05-06-1]スライド P41 に書いたとおり、たまにスリープから復帰しなくてつらいです。仕方がないので「スリープしない設定にする。常にAC電源ON🤗」という運用でカバー（）をしていました。😭いつまでも続けるわけにもいかないので、今回重い腰を上げてハイバネート出来るようにしました。Linux (Xfce4) のスリープ方式私が使っているウィンドウマネージャーは Xfce4 です。電源管理の設定等で出てくるスリープ関連の用語と、自分なりの理解は以下のとおりです。情報源は Wikipedia です。😆・サスペンドメモリ以外の給電停止した状態。ACPI では S3 に相当する。・ハイバネートメモリの内容をストレージに移し電源断。ACPI では S4 に相当する。・ハイブリッドスリープサスペンドとハイバネートの中間だと思われるが、試したらすぐハイバネートしただけだった...。macOS (Big Sur) のスリープ方式macOS ではサスペンドやハイバネートの使い分けは不要で、意識するのは「スリープ」のみです。以下のような「セーフスリープ」という機構を備えているそうです。・スリープ状態になると、メモリの内容を保持したままストレージにも保存する・スリープ中にバッテリーが切れていなければ、復帰時にメモリの内容を使う・スリープ中にバッテリーが切れていたら、復帰時にストレージの内容を使う奨励はされていませんが、pmset コマンドでスリープ方式を「セーフスリープ」から「スリープ」または「ディープスリープ」に変更は出来るようです。「スリープ」は ACPI の S3 に相当し、「ディープスリープ」は S4 に相当するようなので、Xfce4 の「ハイブリッドスリープ」は「セーフスリープ」が本来の振る舞いなのかも。※ 状態としての「スリープ」と、その種類としての「スリープ」（と「セーフスリープ」「ディープスリープ」）があるので、文章がややこしいです。Linux と macOS の振る舞いの違いmacOS の素晴らしい点に、ユーザーにスリープをほぼ意識させない設計があると思います。サスペンドやハイバネートのような用語が現れないこともさることながら、MacBook なら蓋を開けばログイン画面が表示されるだけです。多少復帰がもたつくことはあるのはご愛嬌。Linux はサスペンドは同じとしても、ハイバネートは OS の起動から始まるので、「あれ？バッテリー切れてた？」と一瞬不安になります。Windows も同じという理解です。どの OS もバックグラウンドの処理は同じだと思います。macOS はユーザーへの見せ方がきれいですね。Manjaro でのハイバネート設定方法「サスペンドとハイバネート - ArchWiki」に従いました。以下の流れです。1. スワップファイルを作る2. 関連するカーネルパラメータを GRUB（ブートローダー）に追加する3. 関連するフックを initramfs に追加する1. スワップファイルを作る今回は /swapfile という 18GB のスワップファイルを作りました。$ sudo fallocate -l 18G /swapfile$ sudo chmod 600 /swapfile$ sudo mkswap /swapfile$ sudo swapon /swapfileこの VivoBook のメモリは 16GB です。RedHat の記事に従い、スワップファイルのサイズは 18GB にしました。無事作られました。$ swapon -showFilename Type Size Used Priority/swapfile file 18874364 0 -2永続化するために /etc/fstab に以下を追記しました。/swapfile none swap defaults 0 0ちなみに、今回のような任意サイズのファイルは dd でも作れます。ただ、dd は実際にファイル書き込みが発生するため、可能なら fallocate を使うほうが無駄がなくて良いと思います。参考記事: Linuxでサイズ指定してダミーファイルを作成する方法 - conf t2. 関連するカーネルパラメータを GRUB（ブートローダー）に追加する/etc/default/grub を以下のように変更しました。/swapfile が、どのデバイスの、どの位置（オフセット）に存在するかを教えています。--- /tmp/grub.orig2021-08-25 01:12:57.415049508 +0900+++ /etc/default/grub2021-08-23 23:42:08.875333968 +0900@@ -2,7 +2,7 @@ GRUB_TIMEOUT=5 GRUB_TIMEOUT_STYLE=hidden GRUB_DISTRIBUTOR=\"Manjaro\"-GRUB_CMDLINE_LINUX_DEFAULT=\"quiet apparmor=1 security=apparmor udev.log_priority=3\"+GRUB_CMDLINE_LINUX_DEFAULT=\"quiet apparmor=1 security=apparmor udev.log_priority=3 resume=UUID=52d772c6-e49d-4be0-9963-c9aae2a9e4f9 resume_offset=52037632\" GRUB_CMDLINE_LINUX=\"\" # If you want to enable the save default function, uncomment the followingGRUB_CMDLINE_LINUX がユーザー用の変数かと思い、初めはこれを使ってしまいましたが、リカバリモード用でした（GNU GRUB Manual 2.06: Simple configuration）。\"resume=UUID=52d772c6-e49d-4be0-9963-c9aae2a9e4f9\" で、/swapfile が置いてあるデバイスを教えています。雑に調べると /dev/nvme0n1p5 です。/swapfile なので当たり前ですが、\"/\" がマウントポイントです。$ df /swapfileFilesystem 1K-blocks Used Available Use% Mounted on/dev/nvme0n1p5 527306168 62862840 437583404 13% /\"resume=/dev/nvme0n1p5\" でも問題はないとは思いますが、外付けストレージの追加等で名前が変わるリスクはゼロではないため、UUID による永続的な命名方法を使いました。各デバイスの UUID 確認方法は簡単です（永続的なブロックデバイスの命名 - ArchWiki）。$ ls -alF /dev/disk/by-uuidtotal 0drwxr-xr-x 2 root root 100 8月 24 00:14 ./drwxr-xr-x 8 root root 160 8月 24 00:14 ../lrwxrwxrwx 1 root root 15 8月 24 00:14 2E80-83B2 -\u0026gt; ../../nvme0n1p1lrwxrwxrwx 1 root root 15 8月 24 00:14 52d772c6-e49d-4be0-9963-c9aae2a9e4f9 -\u0026gt; ../../nvme0n1p5lrwxrwxrwx 1 root root 15 8月 24 00:14 DA82730D8272ECFF -\u0026gt; ../../nvme0n1p4\"resume_offset=52037632\" で、/swapfile が /dev/nvme0n1p5 の先頭からどの位置（オフセット）に存在するかを教えています。filefrag というコマンドで分かるようです。$ sudo filefrag -v /swapfile | head -n 5Filesystem type is: ef53File size of /swapfile is 19327352832 (4718592 blocks of 4096 bytes) ext: logical_offset: physical_offset: length: expected: flags: 0: 0.. 0: 52037632.. 52037632: 1: 1: 1.. 2047: 52037633.. 52039679: 2047: unwrittenext4 はフラグメンテーションが起きづらいそうだけど、e4defrag で手動デフラグしたらオフセットは変わり得るのでは？と思いました。ちょっと怖いな。どうなんでしょう？/etc/default/grub を変更したら /boot/grub/grub.cfg を再作成します。$ sudo grub-mkconfig -o /boot/grub/grub.cfg3. 関連するフックを initramfs に追加する/etc/mkinitcpio.conf を以下のように変更しました。カーネル起動時に resume というモジュールがロードされるのかな。filesystems の前に追加するのがとても重要だそうです。--- /tmp/mkinitcpio.conf.orig2021-08-25 01:40:50.793227026 +0900+++ /etc/mkinitcpio.conf2021-08-23 23:07:04.396638336 +0900@@ -49,7 +49,7 @@ # ## NOTE: If you have /usr on a separate partition, you MUST include the # usr, fsck and shutdown hooks.-HOOKS=\"base udev autodetect modconf block keyboard keymap filesystems fsck\"+HOOKS=\"base udev autodetect modconf block keyboard keymap resume filesystems fsck\" # COMPRESSION # Use this to compress the initramfs image. By default, gzip compression/etc/mkinitcpio.conf を変更したら /boot/initramfs-*.img を再作成します。$ sudo mkinitcpio -p linux510linux510 は /etc/mkinitcpio.d/ 以下のファイルと対応していました。今回は /etc/mkinitcpio.d/linux510.preset しかなかったので、linux510 になりました。ちなみに mkinitcpio を引数なしで実行すると、dry run モードによる確認が出来ます。$ sudo mkinitcpio==\u0026gt; Starting dry run: 5.10.59-1-MANJARO -\u0026gt; Running build hook: [base] -\u0026gt; Running build hook: [udev] -\u0026gt; Running build hook: [autodetect] -\u0026gt; Running build hook: [modconf] -\u0026gt; Running build hook: [block] -\u0026gt; Running build hook: [keyboard] -\u0026gt; Running build hook: [keymap] -\u0026gt; Running build hook: [resume] -\u0026gt; Running build hook: [filesystems] -\u0026gt; Running build hook: [fsck]==\u0026gt; Generating module dependencies==\u0026gt; Dry run complete, use -g IMAGE to generate a real image注意点GRUB や Linux カーネルが更新されたら、2 や 3 の再設定が必要みたいです。面倒なので私は mitamae でゆるふわ構成管理しています。まとめハイバネート出来た時は、思わずおぉー！と声が出ました。他の OS では当たり前すぎるハイバネートですが、自分で設定すると感慨深いものがあります。これで VivoBook から気軽に AC 電源コードを抜けるようになりました。なんと当たり前な...。今までは気がつくと電源が落ちていたので、AC 電源コードも気も抜けませんでした。😭サスペンドは復帰時に画面が表示されず、電源ボタンを長押しするしかなくなることがあるので、まだ使えていません。前述の「サスペンドとハイバネート - ArchWiki」によると、この現象は多数報告されているそうです。そして、そのデバッグのベストプラクティスがこの記事とのこと。長いので気が向いたら調べます。たぶん、Linux カーネルと ATI のドライバの相性（）が悪いのだと思います。他の参考記事・Arch Linux 快適デスクトップ環境の構築 2019 - Qiita・Linux におけるラップトップマシン向け電力管理スイートの紹介（Pm-utils, Laptop-mode-tools, Powertop, TLP） – 怠惰の形而上学初めからインストールされていた TLP があればサスペンド（スリープ）は問題なく管理されているそう。Laptop-mode-tools はもう古いそう。なのにサスペンドだけだと数時間しかバッテリーがもたないのは、推して知るべし...。","contentSnippet":"４月から個人 PC を MacBook Air から Linux マシンに変えました。[2021-05-06-1]スライド P41 に書いたとおり、たまにスリープから復帰しなくてつらいです。仕方がないので「スリープしない設定にする。常にAC電源ON🤗」という運用でカバー（）をしていました。😭いつまでも続けるわけにもいかないので、今回重い腰を上げてハイバネート出来るようにしました。Linux (Xfce4) のスリープ方式私が使っているウィンドウマネージャーは Xfce4 です。電源管理の設定等で出てくるスリープ関連の用語と、自分なりの理解は以下のとおりです。情報源は Wikipedia です。😆・サスペンドメモリ以外の給電停止した状態。ACPI では S3 に相当する。・ハイバネートメモリの内容をストレージに移し電源断。ACPI では S4 に相当する。・ハイブリッドスリープサスペンドとハイバネートの中間だと思われるが、試したらすぐハイバネートしただけだった...。macOS (Big Sur) のスリープ方式macOS ではサスペンドやハイバネートの使い分けは不要で、意識するのは「スリープ」のみです。以下のような「セーフスリープ」という機構を備えているそうです。・スリープ状態になると、メモリの内容を保持したままストレージにも保存する・スリープ中にバッテリーが切れていなければ、復帰時にメモリの内容を使う・スリープ中にバッテリーが切れていたら、復帰時にストレージの内容を使う奨励はされていませんが、pmset コマンドでスリープ方式を「セーフスリープ」から「スリープ」または「ディープスリープ」に変更は出来るようです。「スリープ」は ACPI の S3 に相当し、「ディープスリープ」は S4 に相当するようなので、Xfce4 の「ハイブリッドスリープ」は「セーフスリープ」が本来の振る舞いなのかも。※ 状態としての「スリープ」と、その種類としての「スリープ」（と「セーフスリープ」「ディープスリープ」）があるので、文章がややこしいです。Linux と macOS の振る舞いの違いmacOS の素晴らしい点に、ユーザーにスリープをほぼ意識させない設計があると思います。サスペンドやハイバネートのような用語が現れないこともさることながら、MacBook なら蓋を開けばログイン画面が表示されるだけです。多少復帰がもたつくことはあるのはご愛嬌。Linux はサスペンドは同じとしても、ハイバネートは OS の起動から始まるので、「あれ？バッテリー切れてた？」と一瞬不安になります。Windows も同じという理解です。どの OS もバックグラウンドの処理は同じだと思います。macOS はユーザーへの見せ方がきれいですね。Manjaro でのハイバネート設定方法「サスペンドとハイバネート - ArchWiki」に従いました。以下の流れです。1. スワップファイルを作る2. 関連するカーネルパラメータを GRUB（ブートローダー）に追加する3. 関連するフックを initramfs に追加する1. スワップファイルを作る今回は /swapfile という 18GB のスワップファイルを作りました。$ sudo fallocate -l 18G /swapfile$ sudo chmod 600 /swapfile$ sudo mkswap /swapfile$ sudo swapon /swapfileこの VivoBook のメモリは 16GB です。RedHat の記事に従い、スワップファイルのサイズは 18GB にしました。無事作られました。$ swapon -showFilename Type Size Used Priority/swapfile file 18874364 0 -2永続化するために /etc/fstab に以下を追記しました。/swapfile none swap defaults 0 0ちなみに、今回のような任意サイズのファイルは dd でも作れます。ただ、dd は実際にファイル書き込みが発生するため、可能なら fallocate を使うほうが無駄がなくて良いと思います。参考記事: Linuxでサイズ指定してダミーファイルを作成する方法 - conf t2. 関連するカーネルパラメータを GRUB（ブートローダー）に追加する/etc/default/grub を以下のように変更しました。/swapfile が、どのデバイスの、どの位置（オフセット）に存在するかを教えています。--- /tmp/grub.orig2021-08-25 01:12:57.415049508 +0900+++ /etc/default/grub2021-08-23 23:42:08.875333968 +0900@@ -2,7 +2,7 @@ GRUB_TIMEOUT=5 GRUB_TIMEOUT_STYLE=hidden GRUB_DISTRIBUTOR=\"Manjaro\"-GRUB_CMDLINE_LINUX_DEFAULT=\"quiet apparmor=1 security=apparmor udev.log_priority=3\"+GRUB_CMDLINE_LINUX_DEFAULT=\"quiet apparmor=1 security=apparmor udev.log_priority=3 resume=UUID=52d772c6-e49d-4be0-9963-c9aae2a9e4f9 resume_offset=52037632\" GRUB_CMDLINE_LINUX=\"\" # If you want to enable the save default function, uncomment the followingGRUB_CMDLINE_LINUX がユーザー用の変数かと思い、初めはこれを使ってしまいましたが、リカバリモード用でした（GNU GRUB Manual 2.06: Simple configuration）。\"resume=UUID=52d772c6-e49d-4be0-9963-c9aae2a9e4f9\" で、/swapfile が置いてあるデバイスを教えています。雑に調べると /dev/nvme0n1p5 です。/swapfile なので当たり前ですが、\"/\" がマウントポイントです。$ df /swapfileFilesystem 1K-blocks Used Available Use% Mounted on/dev/nvme0n1p5 527306168 62862840 437583404 13% /\"resume=/dev/nvme0n1p5\" でも問題はないとは思いますが、外付けストレージの追加等で名前が変わるリスクはゼロではないため、UUID による永続的な命名方法を使いました。各デバイスの UUID 確認方法は簡単です（永続的なブロックデバイスの命名 - ArchWiki）。$ ls -alF /dev/disk/by-uuidtotal 0drwxr-xr-x 2 root root 100 8月 24 00:14 ./drwxr-xr-x 8 root root 160 8月 24 00:14 ../lrwxrwxrwx 1 root root 15 8月 24 00:14 2E80-83B2 -\u003e ../../nvme0n1p1lrwxrwxrwx 1 root root 15 8月 24 00:14 52d772c6-e49d-4be0-9963-c9aae2a9e4f9 -\u003e ../../nvme0n1p5lrwxrwxrwx 1 root root 15 8月 24 00:14 DA82730D8272ECFF -\u003e ../../nvme0n1p4\"resume_offset=52037632\" で、/swapfile が /dev/nvme0n1p5 の先頭からどの位置（オフセット）に存在するかを教えています。filefrag というコマンドで分かるようです。$ sudo filefrag -v /swapfile | head -n 5Filesystem type is: ef53File size of /swapfile is 19327352832 (4718592 blocks of 4096 bytes) ext: logical_offset: physical_offset: length: expected: flags: 0: 0.. 0: 52037632.. 52037632: 1: 1: 1.. 2047: 52037633.. 52039679: 2047: unwrittenext4 はフラグメンテーションが起きづらいそうだけど、e4defrag で手動デフラグしたらオフセットは変わり得るのでは？と思いました。ちょっと怖いな。どうなんでしょう？/etc/default/grub を変更したら /boot/grub/grub.cfg を再作成します。$ sudo grub-mkconfig -o /boot/grub/grub.cfg3. 関連するフックを initramfs に追加する/etc/mkinitcpio.conf を以下のように変更しました。カーネル起動時に resume というモジュールがロードされるのかな。filesystems の前に追加するのがとても重要だそうです。--- /tmp/mkinitcpio.conf.orig2021-08-25 01:40:50.793227026 +0900+++ /etc/mkinitcpio.conf2021-08-23 23:07:04.396638336 +0900@@ -49,7 +49,7 @@ # ## NOTE: If you have /usr on a separate partition, you MUST include the # usr, fsck and shutdown hooks.-HOOKS=\"base udev autodetect modconf block keyboard keymap filesystems fsck\"+HOOKS=\"base udev autodetect modconf block keyboard keymap resume filesystems fsck\" # COMPRESSION # Use this to compress the initramfs image. By default, gzip compression/etc/mkinitcpio.conf を変更したら /boot/initramfs-*.img を再作成します。$ sudo mkinitcpio -p linux510linux510 は /etc/mkinitcpio.d/ 以下のファイルと対応していました。今回は /etc/mkinitcpio.d/linux510.preset しかなかったので、linux510 になりました。ちなみに mkinitcpio を引数なしで実行すると、dry run モードによる確認が出来ます。$ sudo mkinitcpio==\u003e Starting dry run: 5.10.59-1-MANJARO -\u003e Running build hook: [base] -\u003e Running build hook: [udev] -\u003e Running build hook: [autodetect] -\u003e Running build hook: [modconf] -\u003e Running build hook: [block] -\u003e Running build hook: [keyboard] -\u003e Running build hook: [keymap] -\u003e Running build hook: [resume] -\u003e Running build hook: [filesystems] -\u003e Running build hook: [fsck]==\u003e Generating module dependencies==\u003e Dry run complete, use -g IMAGE to generate a real image注意点GRUB や Linux カーネルが更新されたら、2 や 3 の再設定が必要みたいです。面倒なので私は mitamae でゆるふわ構成管理しています。まとめハイバネート出来た時は、思わずおぉー！と声が出ました。他の OS では当たり前すぎるハイバネートですが、自分で設定すると感慨深いものがあります。これで VivoBook から気軽に AC 電源コードを抜けるようになりました。なんと当たり前な...。今までは気がつくと電源が落ちていたので、AC 電源コードも気も抜けませんでした。😭サスペンドは復帰時に画面が表示されず、電源ボタンを長押しするしかなくなることがあるので、まだ使えていません。前述の「サスペンドとハイバネート - ArchWiki」によると、この現象は多数報告されているそうです。そして、そのデバッグのベストプラクティスがこの記事とのこと。長いので気が向いたら調べます。たぶん、Linux カーネルと ATI のドライバの相性（）が悪いのだと思います。他の参考記事・Arch Linux 快適デスクトップ環境の構築 2019 - Qiita・Linux におけるラップトップマシン向け電力管理スイートの紹介（Pm-utils, Laptop-mode-tools, Powertop, TLP） – 怠惰の形而上学初めからインストールされていた TLP があればサスペンド（スリープ）は問題なく管理されているそう。Laptop-mode-tools はもう古いそう。なのにサスペンドだけだと数時間しかバッテリーがもたないのは、推して知るべし...。","link":"https://masutaka.net/chalow/2021-08-25-1.html","isoDate":"2021-08-25T14:59:59.000Z","dateMiliSeconds":1629903599000,"authorName":"masutaka"},{"title":"私が１年かけて辿り着いた Looker の情報収集方法を紹介する","content":"\u003cp\u003eこんばんは、\u003cdel\u003e徳川家ｙ\u003c/del\u003e \u003ca href=\"http://blog.hatena.ne.jp/masutaka26/\" class=\"hatena-id-icon\"\u003e\u003cimg src=\"https://cdn.profile-image.st-hatena.com/users/masutaka26/profile.png\" width=\"16\" height=\"16\" alt=\"\" class=\"hatena-id-icon\"\u003eid:masutaka26\u003c/a\u003e です。\u003c/p\u003e\n\n\u003cp\u003e以前紹介したように、去年から \u003ca href=\"https://ja.looker.com/\"\u003eLooker\u003c/a\u003e を使ったウェブ広告数値の可視化や BI \u003ca href=\"#f-25b67c2a\" name=\"fn-25b67c2a\" title=\"Business Intelligence\"\u003e*1\u003c/a\u003e に取り組んでいます。\u003c/p\u003e\n\n\u003cp\u003e\u003ciframe src=\"https://hatenablog-parts.com/embed?url=https%3A%2F%2Fdeveloper.feedforce.jp%2Fentry%2F2020%2F10%2F23%2F190000\" title=\"『4月から取り組んできたLookerの導入から実装までのお話（Redashとも比較）』という発表をした - Feedforce Developer Blog\" class=\"embed-card embed-blogcard\" scrolling=\"no\" frameborder=\"0\" style=\"display: block; width: 100%; height: 190px; max-width: 500px; margin: 10px 0px;\"\u003e\u003c/iframe\u003e\u003c/p\u003e\n\n\u003cp\u003eLookML 開発者として LookML を書き始めて困ったのが、Looker の情報が少ないように見えたことです。\u003c/p\u003e\n\n\u003cp\u003eLookML を含む Looker のドキュメントは充実しているのですが、それらを組み合わせた応用的なフロー情報が少なく感じました。ビジネスユーザー向けの情報も同様です。\u003c/p\u003e\n\n\u003cp\u003e現在は網羅的、かつ集約した情報を取得できているので、その方法をご紹介します。\u003c/p\u003e\n\n\u003cul class=\"table-of-contents\"\u003e\n    \u003cli\u003e\u003ca href=\"#情報源をリストアップする\"\u003e「情報源」をリストアップする\u003c/a\u003e\u003c/li\u003e\n    \u003cli\u003e\u003ca href=\"#少し脱線\"\u003e少し脱線...\u003c/a\u003e\u003c/li\u003e\n    \u003cli\u003e\u003ca href=\"#情報源の取得方法への課題\"\u003e「情報源」の取得方法への課題\u003c/a\u003e\u003c/li\u003e\n    \u003cli\u003e\u003ca href=\"#今はどうなったか\"\u003e今はどうなったか？\u003c/a\u003e\u003c/li\u003e\n    \u003cli\u003e\u003ca href=\"#Looker-Communityのフィードが存在した件\"\u003e「Looker Community」のフィードが存在した件\u003c/a\u003e\u003c/li\u003e\n    \u003cli\u003e\u003ca href=\"#Looker-の記事一覧--DevelopersIOのフィードを作った件\"\u003e「Looker の記事一覧 | DevelopersIO」のフィードを作った件\u003c/a\u003e\u003c/li\u003e\n    \u003cli\u003e\u003ca href=\"#まとめ\"\u003eまとめ\u003c/a\u003e\u003c/li\u003e\n    \u003cli\u003e\u003ca href=\"#追記\"\u003e追記\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\n\u003ch2 id=\"情報源をリストアップする\"\u003e「情報源」をリストアップする\u003c/h2\u003e\n\n\u003cp\u003e初めはこれらをたまに見に行ったり、Slack の \u003ccode\u003e/feed subscribe\u003c/code\u003e \u003ca href=\"#f-e46aea89\" name=\"fn-e46aea89\" title=\"Slack に RSS フィードを追加する | Slack\"\u003e*2\u003c/a\u003e で購読したりしてました。\u003c/p\u003e\n\n\u003cul\u003e\n\u003cli\u003e\u003ca href=\"https://community.looker.com/\"\u003eLooker Community\u003c/a\u003e\n\n\u003cul\u003e\n\u003cli\u003e公式フォーラム。英語で Question や Conversation が出来る\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e\u003cp\u003e\u003ca href=\"https://community.looker.com/%E3%82%B3%E3%83%9F%E3%83%A5%E3%83%8B%E3%83%86%E3%82%A3%E3%83%95%E3%82%A9%E3%83%BC%E3%83%A9%E3%83%A0-japanese-161\"\u003eLooker 日本語コミュニティフォーラム\u003c/a\u003e\u003c/p\u003e\n\n\u003cul\u003e\n\u003cli\u003e「Looker Community」の日本語版。\u003ca href=\"https://docs.looker.com/relnotes/intro\"\u003eRelease Notes\u003c/a\u003e の日本語訳には本当に感謝 🙏\u003c/li\u003e\n\u003cli\u003e\u003cp\u003e「ニュースと告知」「ヘルプとサポート」「コラム」はそれぞれ Subscribe 出来る。メールで通知される\u003c/p\u003e\n\n\u003cp\u003e  \u003cfigure class=\"figure-image figure-image-fotolife\" title=\"Looker 日本語コミュニティフォーラム\"\u003e\u003cspan itemscope itemtype=\"http://schema.org/Photograph\"\u003e\u003cimg src=\"https://cdn-ak.f.st-hatena.com/images/fotolife/m/masutaka26/20210815/20210815145002.png\" alt=\"f:id:masutaka26:20210815145002p:plain\" width=\"1200\" height=\"382\" loading=\"lazy\" title=\"\" class=\"hatena-fotolife\" itemprop=\"image\"\u003e\u003c/span\u003e\u003cfigcaption\u003eLooker 日本語コミュニティフォーラム\u003c/figcaption\u003e\u003c/figure\u003e\u003c/p\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e\u003cp\u003e\u003ca href=\"https://www.facebook.com/groups/721814241538725\"\u003eLooker APAC Forum | Facebook\u003c/a\u003e\u003c/p\u003e\n\n\u003cul\u003e\n\u003cli\u003eリリース案内や事例紹介など\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"https://dev.classmethod.jp/tags/looker/\"\u003eLooker の記事一覧 | DevelopersIO\u003c/a\u003e\n\n\u003cul\u003e\n\u003cli\u003eご存知クラスメソッドさんのブログ。国内最多の記事量と投稿頻度\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"https://zenn.dev/topics/looker\"\u003eLookerの記事一覧 | Zenn\u003c/a\u003e\n\n\u003cul\u003e\n\u003cli\u003eZenn にもそれなりの頻度で投稿される\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"https://qiita.com/tags/looker\"\u003eLooker - Qiita\u003c/a\u003e\n\n\u003cul\u003e\n\u003cli\u003eQiita はもう少し頻度は落ちるかな\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"https://twitter.com/search?q=%23looker%20lang%3Aja\u0026amp;f=live\u0026amp;vertical=default\"\u003e#looker lang:ja - Twitter 検索\u003c/a\u003e\n\n\u003cul\u003e\n\u003cli\u003e以上の情報をふわっと取得できる。\u003ccode\u003elooker lang:ja\u003c/code\u003e や \u003ccode\u003e#looker\u003c/code\u003e だとノイズが多いのでこれに落ち着いた\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\n\n\u003ch2 id=\"少し脱線\"\u003e少し脱線...\u003c/h2\u003e\n\n\u003cp\u003eLooker Community には過去一度だけ質問しました。\u003c/p\u003e\n\n\u003cp\u003e\u003ca href=\"https://community.looker.com/lookml-5/how-do-i-dynamically-switch-view-name-in-sql-parameter-of-dimension-27831\"\u003eHow do I dynamically switch view name in sql parameter of dimension? | Looker Community\u003c/a\u003e\u003c/p\u003e\n\n\u003cp\u003e私は日本語サポートに頼ることが多い傾向です。最近はだいぶ減らせています。\u003c/p\u003e\n\n\u003cp\u003e扱う情報を外に出せないので、外に出せるところまで昇華するのは難しいですね。🌀\u003c/p\u003e\n\n\u003cp\u003eLooker の水野さんが日本語訳して下さっている、Looker のリリースノート \u003ca href=\"#f-c898f381\" name=\"fn-c898f381\" title=\"例: Looker 21.12 リリースノート | Looker Community\"\u003e*3\u003c/a\u003e は、去年の 12 月から社内向けにこんな記事を書いて、Looker に徹底的に向き合うようにしています。\u003c/p\u003e\n\n\u003cp\u003e\u003cfigure class=\"figure-image figure-image-fotolife\" title=\"Looker 21.12 のリリースノートを眺めてみた\"\u003e\u003cspan itemscope itemtype=\"http://schema.org/Photograph\"\u003e\u003cimg src=\"https://cdn-ak.f.st-hatena.com/images/fotolife/m/masutaka26/20210815/20210815160438.png\" alt=\"f:id:masutaka26:20210815160438p:plain\" width=\"1200\" height=\"849\" loading=\"lazy\" title=\"\" class=\"hatena-fotolife\" itemprop=\"image\"\u003e\u003c/span\u003e\u003cfigcaption\u003eLooker 21.12 のリリースノートを眺めてみた\u003c/figcaption\u003e\u003c/figure\u003e\u003c/p\u003e\n\n\u003cp\u003e今まで書いた記事です。\u003c/p\u003e\n\n\u003cp\u003e\u003cfigure class=\"figure-image figure-image-fotolife\" title=\"Looker のリリースノートを眺めてみたシリーズ\"\u003e\u003cspan itemscope itemtype=\"http://schema.org/Photograph\"\u003e\u003cimg src=\"https://cdn-ak.f.st-hatena.com/images/fotolife/m/masutaka26/20210815/20210815160356.png\" alt=\"f:id:masutaka26:20210815160356p:plain\" width=\"1200\" height=\"887\" loading=\"lazy\" title=\"\" class=\"hatena-fotolife\" itemprop=\"image\"\u003e\u003c/span\u003e\u003cfigcaption\u003eLooker のリリースノートを眺めてみたシリーズ\u003c/figcaption\u003e\u003c/figure\u003e\u003c/p\u003e\n\n\u003ch2 id=\"情報源の取得方法への課題\"\u003e「情報源」の取得方法への課題\u003c/h2\u003e\n\n\u003cp\u003eRSS/Atom（フィード）を配信していないサイトがほとんどで、見に行くのがかなり面倒でした。\u003c/p\u003e\n\n\u003cp\u003eそのものズバリなフィードは Zenn と Qiita だけです。クラスメソッドさんは Looker タグのフィードが存在せず、当時は Twitter で捕捉してました。\u003c/p\u003e\n\n\u003ch2 id=\"今はどうなったか\"\u003e今はどうなったか？\u003c/h2\u003e\n\n\u003cp\u003eほぼすべてを社内の Slack channel \u003ccode\u003e#news-looker\u003c/code\u003e に集約させることが出来ました。\u003c/p\u003e\n\n\u003cp\u003e以下が実際に購読しているフィードです。\u003c/p\u003e\n\n\u003cul\u003e\n\u003cli\u003e\u003ca href=\"https://community.looker.com/feed/buzzcapture\"\u003ehttps://community.looker.com/feed/buzzcapture\u003c/a\u003e\n\n\u003cul\u003e\n\u003cli\u003e「Looker Community」のフィード。後述する\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"https://feed43.com/developersio-looker.xml\"\u003ehttps://feed43.com/developersio-looker.xml\u003c/a\u003e\n\n\u003cul\u003e\n\u003cli\u003e「Looker の記事一覧 | DevelopersIO」のフィード。後述する\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"https://zenn.dev/topics/looker/feed\"\u003ehttps://zenn.dev/topics/looker/feed\u003c/a\u003e\n\n\u003cul\u003e\n\u003cli\u003e「Lookerの記事一覧 | Zenn」のフィード\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"https://qiita.com/tags/looker/feed\"\u003ehttps://qiita.com/tags/looker/feed\u003c/a\u003e\n\n\u003cul\u003e\n\u003cli\u003e「Looker - Qiita」のフィード\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\n\n\u003cp\u003eTwitter は \u003ca href=\"https://ifttt.com/\"\u003eIFTTT\u003c/a\u003e を使って、同 channel に POST しています。\u003c/p\u003e\n\n\u003cul\u003e\n\u003cli\u003e\u003ccode\u003eIf\u003c/code\u003e New tweet from search \u003ccode\u003e#looker lang:ja -rt\u003c/code\u003e\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003eThen\u003c/code\u003e Post to channel\n\n\u003cul\u003e\n\u003cli\u003eChannel: \u003ccode\u003e#news-looker\u003c/code\u003e\u003c/li\u003e\n\u003cli\u003eMessage: \u003ccode\u003e@{{UserName}} : {{Text}} (via Twitter {{LinkToTweet}})\u003c/code\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\n\n\u003cp\u003e「Looker APAC Forum | Facebook」は集約できませんでしたが、Twitter にも流れることがあるので、一旦考えないことにしました。\u003c/p\u003e\n\n\u003ch2 id=\"Looker-Communityのフィードが存在した件\"\u003e「Looker Community」のフィードが存在した件\u003c/h2\u003e\n\n\u003cp\u003e\u003ca href=\"https://community.looker.com/%E3%83%8B%E3%83%A5%E3%83%BC%E3%82%B9%E3%81%A8%E5%91%8A%E7%9F%A5-100/%E3%82%AB%E3%83%86%E3%82%B4%E3%83%AA-the-kitchen-table-%E3%81%8C%E5%85%AC%E9%96%8B%E3%81%95%E3%82%8C%E3%81%BE%E3%81%97%E3%81%9F-24032?postid=45126#post45126\"\u003eLooker の水野さんに聞いたら、調べて教えて下さいました。\u003c/a\u003e🙏\u003c/p\u003e\n\n\u003cul\u003e\n\u003cli\u003e(1) 新しいトピックの投稿\n\n\u003cul\u003e\n\u003cli\u003e\u003ca href=\"https://community.looker.com/feed/topics\"\u003ehttps://community.looker.com/feed/topics\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e(2) 全ての新しい投稿（最初の投稿（タイトル＋ボディ）+ 全てのリプライ）\n\n\u003cul\u003e\n\u003cli\u003e\u003ca href=\"https://community.looker.com/feed/buzzcapture\"\u003ehttps://community.looker.com/feed/buzzcapture\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\n\n\u003cp\u003eアナウンス記事です。\n\u003ca href=\"https://community.looker.com/%E3%83%8B%E3%83%A5%E3%83%BC%E3%82%B9%E3%81%A8%E5%91%8A%E7%9F%A5-100/looker%E3%82%B3%E3%83%9F%E3%83%A5%E3%83%8B%E3%83%86%E3%82%A3%E3%81%AErss%E3%83%95%E3%82%A3%E3%83%BC%E3%83%89-25553?postid=46404#post46404\"\u003eLookerコミュニティのRSSフィード | Looker Community\u003c/a\u003e\u003c/p\u003e\n\n\u003cp\u003e(1) と (2) は両方とも「Looker 日本語コミュニティフォーラム」の情報も流れてきます。\u003c/p\u003e\n\n\u003cp\u003e今は (2) を購読しており、トラフィックはそれなりにあります。もちろんほぼ全て英語です。辛かったら (1) にすると良いと思います。\u003c/p\u003e\n\n\u003cp\u003e\u003ca href=\"https://community.looker.com/\"\u003ehttps://community.looker.com/\u003c/a\u003e の HTML には RSS/Atom 情報がないので、これらのフィードに気づける人は少ないと思います。Looker さんには是非お願いしたいところです。\u003c/p\u003e\n\n\u003ch2 id=\"Looker-の記事一覧--DevelopersIOのフィードを作った件\"\u003e「Looker の記事一覧 | DevelopersIO」のフィードを作った件\u003c/h2\u003e\n\n\u003cp\u003eないものは仕方がないので、\u003ca href=\"https://feed43.com/\"\u003eFeed43\u003c/a\u003e というサービスで作りました。\u003c/p\u003e\n\n\u003cp\u003e\u003ciframe src=\"https://hatenablog-parts.com/embed?url=https%3A%2F%2Fmasutaka.net%2Fchalow%2F2021-03-14-1.html\" title=\"フィード（RSS/Atom）を配信していないサイトのフィードを Feed43 で作成する\" class=\"embed-card embed-webcard\" scrolling=\"no\" frameborder=\"0\" style=\"display: block; width: 100%; height: 155px; max-width: 500px; margin: 10px 0px;\"\u003e\u003c/iframe\u003e\u003c/p\u003e\n\n\u003cp\u003e出来たのが \u003ca href=\"https://feed43.com/developersio-looker.xml\"\u003ehttps://feed43.com/developersio-looker.xml\u003c/a\u003e です。どなたでも購読可能です。よろしければどうぞ。\u003c/p\u003e\n\n\u003cp\u003eHTML をパースしているだけなので、HTML 構造が変わったら壊れることはあると思います。気づけたら直します。\u003c/p\u003e\n\n\u003cp\u003e本当は \u003ca href=\"https://dev.classmethod.jp/tags/looker/\"\u003ehttps://dev.classmethod.jp/tags/looker/\u003c/a\u003e のフィードがあれば良いのですけどね。今後に期待です。\u003c/p\u003e\n\n\u003cp\u003e[Update] そのものズバリ \u003ca href=\"https://dev.classmethod.jp/feed/?tag=looker\"\u003ehttps://dev.classmethod.jp/feed/?tag=looker\u003c/a\u003e を \u003ca href=\"https://twitter.com/sh19910711/status/1427429573117964306\"\u003eTwitterで教えて\u003c/a\u003e頂きました。ありがとうございます！\u003c/p\u003e\n\n\u003ch2 id=\"まとめ\"\u003eまとめ\u003c/h2\u003e\n\n\u003cp\u003e私が１年かけて辿り着いた、Looker の情報取得方法をご紹介しました。\u003c/p\u003e\n\n\u003cp\u003eこれで Looker の情報は大量にインプット出来たので、今後はコミュニティにアウトプットしていきます。🔥\n※ ネタは少しあるけど、時間がない。(^^;\u003c/p\u003e\n\n\u003cp\u003e皆さんにも参考になれば幸いです。他にもあれば \u003ca href=\"https://twitter.com/masutaka\"\u003e@masutaka\u003c/a\u003e に教えて下さい！\u003c/p\u003e\n\n\u003ch2 id=\"追記\"\u003e追記\u003c/h2\u003e\n\n\u003cblockquote\u003e\u003cp\u003e他にもあれば \u003ca href=\"https://twitter.com/masutaka\"\u003e@masutaka\u003c/a\u003e に教えて下さい！\u003c/p\u003e\u003c/blockquote\u003e\n\n\u003cp\u003e記事にも登場して頂いた Looker の水野さん \u003ca href=\"https://twitter.com/tomoya_cs\"\u003e@tomoya_cs\u003c/a\u003e をフォローするとさらに捗ると思います。\u003c/p\u003e\n\n\u003cp\u003e\u003cblockquote data-conversation=\"none\" class=\"twitter-tweet\" data-lang=\"ja\"\u003e\u003cp lang=\"ja\" dir=\"ltr\"\u003eLookerの情報収集本当に至難と思いますが、まとめていただきありがとうございます😭\u003cbr\u003eあとは私をフォローいただけると最新情報が入手しやすくなるかと（アウトプットがんばります🙇‍♂️） \u003ca href=\"https://t.co/eDQz8A5VCC\"\u003ehttps://t.co/eDQz8A5VCC\u003c/a\u003e\u003c/p\u003e\u0026mdash; tomoya | Looker CS (@tomoya_cs) \u003ca href=\"https://twitter.com/tomoya_cs/status/1428194155943972872?ref_src=twsrc%5Etfw\"\u003e2021年8月19日\u003c/a\u003e\u003c/blockquote\u003e \u003cscript async src=\"https://platform.twitter.com/widgets.js\" charset=\"utf-8\"\u003e\u003c/script\u003e \u003c/p\u003e\n\u003cdiv class=\"footnote\"\u003e\n\u003cp class=\"footnote\"\u003e\u003ca href=\"#fn-25b67c2a\" name=\"f-25b67c2a\" class=\"footnote-number\"\u003e*1\u003c/a\u003e\u003cspan class=\"footnote-delimiter\"\u003e:\u003c/span\u003e\u003cspan class=\"footnote-text\"\u003e\u003ca href=\"https://ja.wikipedia.org/wiki/%E3%83%93%E3%82%B8%E3%83%8D%E3%82%B9%E3%82%A4%E3%83%B3%E3%83%86%E3%83%AA%E3%82%B8%E3%82%A7%E3%83%B3%E3%82%B9\"\u003eBusiness Intelligence\u003c/a\u003e\u003c/span\u003e\u003c/p\u003e\n\u003cp class=\"footnote\"\u003e\u003ca href=\"#fn-e46aea89\" name=\"f-e46aea89\" class=\"footnote-number\"\u003e*2\u003c/a\u003e\u003cspan class=\"footnote-delimiter\"\u003e:\u003c/span\u003e\u003cspan class=\"footnote-text\"\u003e\u003ca href=\"https://slack.com/intl/ja-jp/help/articles/218688467-Slack-%E3%81%AB-RSS-%E3%83%95%E3%82%A3%E3%83%BC%E3%83%89%E3%82%92%E8%BF%BD%E5%8A%A0%E3%81%99%E3%82%8B\"\u003eSlack に RSS フィードを追加する | Slack\u003c/a\u003e\u003c/span\u003e\u003c/p\u003e\n\u003cp class=\"footnote\"\u003e\u003ca href=\"#fn-c898f381\" name=\"f-c898f381\" class=\"footnote-number\"\u003e*3\u003c/a\u003e\u003cspan class=\"footnote-delimiter\"\u003e:\u003c/span\u003e\u003cspan class=\"footnote-text\"\u003e例: \u003ca href=\"https://community.looker.com/%E3%83%8B%E3%83%A5%E3%83%BC%E3%82%B9%E3%81%A8%E5%91%8A%E7%9F%A5-100/looker-21-12-%E3%83%AA%E3%83%AA%E3%83%BC%E3%82%B9%E3%83%8E%E3%83%BC%E3%83%88-27799\"\u003eLooker 21.12 リリースノート | Looker Community\u003c/a\u003e\u003c/span\u003e\u003c/p\u003e\n\u003c/div\u003e","contentSnippet":"こんばんは、徳川家ｙ id:masutaka26 です。以前紹介したように、去年から Looker を使ったウェブ広告数値の可視化や BI *1 に取り組んでいます。LookML 開発者として LookML を書き始めて困ったのが、Looker の情報が少ないように見えたことです。LookML を含む Looker のドキュメントは充実しているのですが、それらを組み合わせた応用的なフロー情報が少なく感じました。ビジネスユーザー向けの情報も同様です。現在は網羅的、かつ集約した情報を取得できているので、その方法をご紹介します。「情報源」をリストアップする少し脱線...「情報源」の取得方法への課題今はどうなったか？「Looker Community」のフィードが存在した件「Looker の記事一覧 | DevelopersIO」のフィードを作った件まとめ追記「情報源」をリストアップする初めはこれらをたまに見に行ったり、Slack の /feed subscribe *2 で購読したりしてました。Looker Community公式フォーラム。英語で Question や Conversation が出来るLooker 日本語コミュニティフォーラム「Looker Community」の日本語版。Release Notes の日本語訳には本当に感謝 🙏「ニュースと告知」「ヘルプとサポート」「コラム」はそれぞれ Subscribe 出来る。メールで通知される  Looker 日本語コミュニティフォーラムLooker APAC Forum | Facebookリリース案内や事例紹介などLooker の記事一覧 | DevelopersIOご存知クラスメソッドさんのブログ。国内最多の記事量と投稿頻度Lookerの記事一覧 | ZennZenn にもそれなりの頻度で投稿されるLooker - QiitaQiita はもう少し頻度は落ちるかな#looker lang:ja - Twitter 検索以上の情報をふわっと取得できる。looker lang:ja や #looker だとノイズが多いのでこれに落ち着いた少し脱線...Looker Community には過去一度だけ質問しました。How do I dynamically switch view name in sql parameter of dimension? | Looker Community私は日本語サポートに頼ることが多い傾向です。最近はだいぶ減らせています。扱う情報を外に出せないので、外に出せるところまで昇華するのは難しいですね。🌀Looker の水野さんが日本語訳して下さっている、Looker のリリースノート *3 は、去年の 12 月から社内向けにこんな記事を書いて、Looker に徹底的に向き合うようにしています。Looker 21.12 のリリースノートを眺めてみた今まで書いた記事です。Looker のリリースノートを眺めてみたシリーズ「情報源」の取得方法への課題RSS/Atom（フィード）を配信していないサイトがほとんどで、見に行くのがかなり面倒でした。そのものズバリなフィードは Zenn と Qiita だけです。クラスメソッドさんは Looker タグのフィードが存在せず、当時は Twitter で捕捉してました。今はどうなったか？ほぼすべてを社内の Slack channel #news-looker に集約させることが出来ました。以下が実際に購読しているフィードです。https://community.looker.com/feed/buzzcapture「Looker Community」のフィード。後述するhttps://feed43.com/developersio-looker.xml「Looker の記事一覧 | DevelopersIO」のフィード。後述するhttps://zenn.dev/topics/looker/feed「Lookerの記事一覧 | Zenn」のフィードhttps://qiita.com/tags/looker/feed「Looker - Qiita」のフィードTwitter は IFTTT を使って、同 channel に POST しています。If New tweet from search #looker lang:ja -rtThen Post to channelChannel: #news-lookerMessage: @{{UserName}} : {{Text}} (via Twitter {{LinkToTweet}})「Looker APAC Forum | Facebook」は集約できませんでしたが、Twitter にも流れることがあるので、一旦考えないことにしました。「Looker Community」のフィードが存在した件Looker の水野さんに聞いたら、調べて教えて下さいました。🙏(1) 新しいトピックの投稿https://community.looker.com/feed/topics(2) 全ての新しい投稿（最初の投稿（タイトル＋ボディ）+ 全てのリプライ）https://community.looker.com/feed/buzzcaptureアナウンス記事です。LookerコミュニティのRSSフィード | Looker Community(1) と (2) は両方とも「Looker 日本語コミュニティフォーラム」の情報も流れてきます。今は (2) を購読しており、トラフィックはそれなりにあります。もちろんほぼ全て英語です。辛かったら (1) にすると良いと思います。https://community.looker.com/ の HTML には RSS/Atom 情報がないので、これらのフィードに気づける人は少ないと思います。Looker さんには是非お願いしたいところです。「Looker の記事一覧 | DevelopersIO」のフィードを作った件ないものは仕方がないので、Feed43 というサービスで作りました。出来たのが https://feed43.com/developersio-looker.xml です。どなたでも購読可能です。よろしければどうぞ。HTML をパースしているだけなので、HTML 構造が変わったら壊れることはあると思います。気づけたら直します。本当は https://dev.classmethod.jp/tags/looker/ のフィードがあれば良いのですけどね。今後に期待です。[Update] そのものズバリ https://dev.classmethod.jp/feed/?tag=looker を Twitterで教えて頂きました。ありがとうございます！まとめ私が１年かけて辿り着いた、Looker の情報取得方法をご紹介しました。これで Looker の情報は大量にインプット出来たので、今後はコミュニティにアウトプットしていきます。🔥※ ネタは少しあるけど、時間がない。(^^;皆さんにも参考になれば幸いです。他にもあれば @masutaka に教えて下さい！追記他にもあれば @masutaka に教えて下さい！記事にも登場して頂いた Looker の水野さん @tomoya_cs をフォローするとさらに捗ると思います。Lookerの情報収集本当に至難と思いますが、まとめていただきありがとうございます😭あとは私をフォローいただけると最新情報が入手しやすくなるかと（アウトプットがんばります🙇‍♂️） https://t.co/eDQz8A5VCC— tomoya | Looker CS (@tomoya_cs) 2021年8月19日  *1:Business Intelligence*2:Slack に RSS フィードを追加する | Slack*3:例: Looker 21.12 リリースノート | Looker Community","link":"https://developer.feedforce.jp/entry/2021/08/16/150000","isoDate":"2021-08-16T06:00:00.000Z","dateMiliSeconds":1629093600000,"imageUrl":"https://cdn-ak.f.st-hatena.com/images/fotolife/m/masutaka26/20201023/20201023184859.png","authorName":"masutaka"},{"title":"Chrome から Firefox に乗り換えたよ","content":"[2011-06-03-1] に Firefox から Chrome に乗り換えて以来です。ちょうど 10 年。iPhone から Android への乗り換え [2020-07-14-1] も 10 年だったし、飽きづらいマスタカも 10 年が周期みたいです。まあ、普通の人は乗り換えたことをいちいち記録しないし、もっとカジュアルにあっちこっち使う気はしてます。このブログの名前が「マスタカの ChangeLog メモ」なので記録せざるを得ないのです。もう大変。(\u003eo\u003c)飽きたのはありますが、この Issue がきっかけではあります。Xkeysnail と Chrome の組み合わせで、カーソル移動やタブ移動のキーが 2 回発行されてしまう問題です。もう修正されたようですが、回避方法がダウングレードしかなく地味に厄介でした。そんな私はブラウザ乗り換えで回避したという...。10 年前は Firefox と Keysnail を使っていました。個人 PC を Linux にしたことで、また同じ作者である mooz さん作の Xkeysnail を Firefox でも使うことには感慨深いものがあります。そういえば Manjaro (Linux) のデフォルトブラウザは Firefox でした。それも戻った理由ではあるかな。Chrome だと AUR でインストールする必要があるのですよね。10 年と書きましたが、その間 2 回ほど Firefox に戻ろうとしていました。2017 年の時は、20 日程度戻ってました。当時は Quantum として大型アップデートされた直後で、アドオンが割と壊れていた記憶。1Password アドオンはまだなかった。あと、Multi-Account Containers に惑わされてしまった。loading...loading...2019 年は 15 日くらい頑張っていました。2014 年製の MacBook Air が遅いのが諦めた要因だったような。\u003e 買えよ (^^;loading...loading...今回は乗り換えのハードルを低くするために個人 PC だけ乗り換えました。PC も速くなった [2021-05-06-1] ので、2019 年とは違います。会社の MacBook Pro はまだ（？）Chrome です。Firefox でまず戸惑うのが、Chrome のユーザー（プロファイル）切り替えに相当する機能が見当たらないことです。4 年前と変わらず、なぜか Multi-Account Containers を推してきますが、これはタブ単位でセッションを切り替える機能です。Firefox アカウントは切り替えられないので代わりにはなりません。代わりに \"about:profiles\" が使えます。アドレスバーにこれを入力して開くと、素朴な画面が開いてプロファイルの管理や起動が出来ます。\"$ firefox -P\" などと \"-P\" オプション付きで Firefox を開いても、似た機能を持つプロファイルマネージャーが起動します。公式ヘルプ: プロファイルマネージャーを使用して、Firefox のプロファイルを作成または削除する｜Firefox ヘルプ前回と同じように、私が使う数少ないアドオンの乗り換え記録も残しておきます。各タイトルは Chrome 拡張名です。1Passwordこれは普通にあります。X は気にしないでください。1Password X – パスワード保管庫Chrome 版は２つあって初心者を悩ませそうです。前者が X です。気にしないでください...。1Password – パスワード保管庫1Password 拡張機能 (パソコンのアプリが必要)ato-ichinenON にしている間、Google 検索を直近 1 年にするだけの Chrome 拡張です。技術系の調査は鮮度が大事なことがあるからです。よく考えたらブックマークレットで十分なので、こんなのを作りました。どうでも良いですが、名前は G1nen にしました。javascript:location.href=location.href+'\u0026amp;tbs=qdr:y'ついでに G2en というブックマークレットも作りました。これは Google の検索対象を英語サイトにします（情報源）。日本語の情報はノイズになることが多いので。だったら常に英語にしろよという意見は認めます。javascript:location.href=location.href+'\u0026amp;gl=us\u0026amp;hl=en\u0026amp;gws_rd=cr\u0026amp;pws=0'Create Link今開いているページや選択したリンクを、Markdown や任意のフォーマットでクリップボードにコピーする Chrome 拡張です。esa とか書いてるとよく使いますよね。Format Link に移行しました。若干上位互換風で、正規表現を使った置換も出来ます。Emoty絵文字を一覧から選んでクリップボードにコピー出来る Chrome 拡張です。フォーマットは :smile: などで、Unicode 絵文字ではありません。Emoji Cheatsheet に移行しました。こちらは Unicode 絵文字にも対応しています。Google Analytics オプトアウト アドオン (by Google)その名の通りの Chrome 拡張です。Chrome の機能を使って、自分のサイトや会社のサイトだけをオプトアウトしていました。宗教上の理由（）がないので、全サイトはオプトアウトしていません。良さげなアドオンが見つかっていません。情報求む。Google 翻訳その名の通りの Chrome 拡張です。選択範囲だけを翻訳したり、ページ全体を日本語に置き換えたり便利ですよね。To Google Translate に移行しました。https://translate.google.com/ が別タブで開いてしまうので大げさではあります。まあいいか...。Grammarly for Chromeスペルチェッカーサービス Grammarly の Chrome 拡張です。今年も気がついたら課金していたので、来年は課金しないようにしました。Grammarly for Firefox があります。ただ、Chrome と違って動作するサイトを絞れないので、フォームへの書き込みを邪魔することが多いです...。Keepa - Amazon Price TrackerAmazon の商品ページに価格変動グラフを挿入してくれる Chrome 拡張です。「安くなった。買い時だ。」「高いけど買っちゃおう。」などと判断の助けになります。← 結局買う奴Amazon Price Tracker - Keepa.com があります。LINELINE の Chrome アプリです。長めの文章が面倒な時に使ってました。Firefox 版はないみたいです。LINE をあまり使わないので問題なし。Save to PocketPocket の Chrome 拡張です。結局 Pocket に戻って来てしまいます。Firefox にはこの機能が組み込まれています。2015-04-21 にそんなニュースがありました。速報： MozillaがPocket（旧Read It Later）をFirefox本体に統合（追記あり） - Mozilla Fluxtwitter画像原寸ボタンtwitter.com や TweetDeck で小さくて見づらい画像を原寸サイズで、別タブにバババッと開く Chrome 拡張です。Twitter 原寸びゅーに移行しました。モーダルで開き、ショートカットキーでサイズを変えられるので、こちらの方が便利です。はてなブックマークご存知はてブの Chrome 拡張です。Hatena Bookmark があります。なぜか英語。新たに Firefox にインストールしたアドオンChrome では要らなかったが、Firefox でインストールしたアドオンを書いていきます。Copy Link Textリンクテキストをコピーするアドオンです。↑ だと \"Copy Link Text\" をコピーできます。信じられないことに Firefox ではこれが出来ないのです。4 年前のやつが残ってて、何をするアドオンか思い出すのに時間がかかりました...。Firefox で不要になったアドオン反対に、Chrome で使っていたが、Firefox で代わりは要らなかった Chrome 拡張を書いていきます。Close download barファイルをダウンロードすると現れるうざいフッターを Option-w や Alt-w で閉じられる Chrome 拡張です。地味だけど便利です。まとめ10 年ぶりに Firefox に戻ってきました。1 週間使っていますが、課題はありつつも、Firefox だと忘れてしまう程度には主張してきません。割と快適です。アドオンがエラーを起こすのはたまたまなんですかね？この記事を書いている間、Format Link が使えませんでした...。","contentSnippet":"[2011-06-03-1] に Firefox から Chrome に乗り換えて以来です。ちょうど 10 年。iPhone から Android への乗り換え [2020-07-14-1] も 10 年だったし、飽きづらいマスタカも 10 年が周期みたいです。まあ、普通の人は乗り換えたことをいちいち記録しないし、もっとカジュアルにあっちこっち使う気はしてます。このブログの名前が「マスタカの ChangeLog メモ」なので記録せざるを得ないのです。もう大変。(\u003eo 買えよ (^^;loading...loading...今回は乗り換えのハードルを低くするために個人 PC だけ乗り換えました。PC も速くなった [2021-05-06-1] ので、2019 年とは違います。会社の MacBook Pro はまだ（？）Chrome です。Firefox でまず戸惑うのが、Chrome のユーザー（プロファイル）切り替えに相当する機能が見当たらないことです。4 年前と変わらず、なぜか Multi-Account Containers を推してきますが、これはタブ単位でセッションを切り替える機能です。Firefox アカウントは切り替えられないので代わりにはなりません。代わりに \"about:profiles\" が使えます。アドレスバーにこれを入力して開くと、素朴な画面が開いてプロファイルの管理や起動が出来ます。\"$ firefox -P\" などと \"-P\" オプション付きで Firefox を開いても、似た機能を持つプロファイルマネージャーが起動します。公式ヘルプ: プロファイルマネージャーを使用して、Firefox のプロファイルを作成または削除する｜Firefox ヘルプ前回と同じように、私が使う数少ないアドオンの乗り換え記録も残しておきます。各タイトルは Chrome 拡張名です。1Passwordこれは普通にあります。X は気にしないでください。1Password X – パスワード保管庫Chrome 版は２つあって初心者を悩ませそうです。前者が X です。気にしないでください...。1Password – パスワード保管庫1Password 拡張機能 (パソコンのアプリが必要)ato-ichinenON にしている間、Google 検索を直近 1 年にするだけの Chrome 拡張です。技術系の調査は鮮度が大事なことがあるからです。よく考えたらブックマークレットで十分なので、こんなのを作りました。どうでも良いですが、名前は G1nen にしました。javascript:location.href=location.href+'\u0026tbs=qdr:y'ついでに G2en というブックマークレットも作りました。これは Google の検索対象を英語サイトにします（情報源）。日本語の情報はノイズになることが多いので。だったら常に英語にしろよという意見は認めます。javascript:location.href=location.href+'\u0026gl=us\u0026hl=en\u0026gws_rd=cr\u0026pws=0'Create Link今開いているページや選択したリンクを、Markdown や任意のフォーマットでクリップボードにコピーする Chrome 拡張です。esa とか書いてるとよく使いますよね。Format Link に移行しました。若干上位互換風で、正規表現を使った置換も出来ます。Emoty絵文字を一覧から選んでクリップボードにコピー出来る Chrome 拡張です。フォーマットは :smile: などで、Unicode 絵文字ではありません。Emoji Cheatsheet に移行しました。こちらは Unicode 絵文字にも対応しています。Google Analytics オプトアウト アドオン (by Google)その名の通りの Chrome 拡張です。Chrome の機能を使って、自分のサイトや会社のサイトだけをオプトアウトしていました。宗教上の理由（）がないので、全サイトはオプトアウトしていません。良さげなアドオンが見つかっていません。情報求む。Google 翻訳その名の通りの Chrome 拡張です。選択範囲だけを翻訳したり、ページ全体を日本語に置き換えたり便利ですよね。To Google Translate に移行しました。https://translate.google.com/ が別タブで開いてしまうので大げさではあります。まあいいか...。Grammarly for Chromeスペルチェッカーサービス Grammarly の Chrome 拡張です。今年も気がついたら課金していたので、来年は課金しないようにしました。Grammarly for Firefox があります。ただ、Chrome と違って動作するサイトを絞れないので、フォームへの書き込みを邪魔することが多いです...。Keepa - Amazon Price TrackerAmazon の商品ページに価格変動グラフを挿入してくれる Chrome 拡張です。「安くなった。買い時だ。」「高いけど買っちゃおう。」などと判断の助けになります。← 結局買う奴Amazon Price Tracker - Keepa.com があります。LINELINE の Chrome アプリです。長めの文章が面倒な時に使ってました。Firefox 版はないみたいです。LINE をあまり使わないので問題なし。Save to PocketPocket の Chrome 拡張です。結局 Pocket に戻って来てしまいます。Firefox にはこの機能が組み込まれています。2015-04-21 にそんなニュースがありました。速報： MozillaがPocket（旧Read It Later）をFirefox本体に統合（追記あり） - Mozilla Fluxtwitter画像原寸ボタンtwitter.com や TweetDeck で小さくて見づらい画像を原寸サイズで、別タブにバババッと開く Chrome 拡張です。Twitter 原寸びゅーに移行しました。モーダルで開き、ショートカットキーでサイズを変えられるので、こちらの方が便利です。はてなブックマークご存知はてブの Chrome 拡張です。Hatena Bookmark があります。なぜか英語。新たに Firefox にインストールしたアドオンChrome では要らなかったが、Firefox でインストールしたアドオンを書いていきます。Copy Link Textリンクテキストをコピーするアドオンです。↑ だと \"Copy Link Text\" をコピーできます。信じられないことに Firefox ではこれが出来ないのです。4 年前のやつが残ってて、何をするアドオンか思い出すのに時間がかかりました...。Firefox で不要になったアドオン反対に、Chrome で使っていたが、Firefox で代わりは要らなかった Chrome 拡張を書いていきます。Close download barファイルをダウンロードすると現れるうざいフッターを Option-w や Alt-w で閉じられる Chrome 拡張です。地味だけど便利です。まとめ10 年ぶりに Firefox に戻ってきました。1 週間使っていますが、課題はありつつも、Firefox だと忘れてしまう程度には主張してきません。割と快適です。アドオンがエラーを起こすのはたまたまなんですかね？この記事を書いている間、Format Link が使えませんでした...。","link":"https://masutaka.net/chalow/2021-08-07-1.html","isoDate":"2021-08-07T14:59:59.000Z","dateMiliSeconds":1628348399000,"authorName":"masutaka"},{"title":"３月に無償提供となった Microsoft Power Automate Desktop を今さらながら使ってみた","content":"※ 会社の「インフラ共有会」用に書いた記事の転載です。Windows PC を買った [2021-05-06-1] ので、個人で試せることに気づいてちょろっと試したって経緯です。Microsoft、自社製RPAツールを全Windows 10ユーザーに無償提供　マウスクリックやキーボード入力をGUIで自動化：Microsoft Ignite 2021 - ITmedia NEWS・動作するのは目の前の Windows PC。エクセルとかのマクロをパワーアップしたものに近いかも・ スケジュール（時間を指定した自動実行）の機能は見つけられなかった。寝ている間に自動実行とかは出来ない気がした・Chrome の「要素を検証」みたいな感覚で、クリックやフォームの位置を指定できる・要素名を変更するなど細かい微調整は出来ないようなので、id 名等が少しでも変わるとフローが動かなくなるかも・アクションの種類は多彩で、頑張れば「LINEビジネスアカウントでログインして、レポートをローカルフォルダにダウンロードし、それを Google スプレッドシートにインポート」は出来ると思う・今起動しているブラウザにも接続できるようなので、２段階認証突破のハードルは多少低そうPower Automate と Power Automate Desktop との違いはイマイチ理解できていない。難しい...。・Power Automate・Power Automate Desktop ← 今回はこっち多彩なアクション※ フローの新規作成画面です。[多彩なアクション]フローを作った様子https://www.myfitnesspal.com/ja/account/login にログインして csv ファイルをダウンロードするフローを作ったが、MyFitnesspal は「CSV ファイルをダウンロードするためのリンクを含んだメールが届きます」だと知った。試しに作るには大きすぎるため心が折れた。(^^;[設定例]インストール方法や実行方法などの紹介動画うぃんどうずしょしんしゃなので、わかりやすいどうがをみたよ。","contentSnippet":"※ 会社の「インフラ共有会」用に書いた記事の転載です。Windows PC を買った [2021-05-06-1] ので、個人で試せることに気づいてちょろっと試したって経緯です。Microsoft、自社製RPAツールを全Windows 10ユーザーに無償提供　マウスクリックやキーボード入力をGUIで自動化：Microsoft Ignite 2021 - ITmedia NEWS・動作するのは目の前の Windows PC。エクセルとかのマクロをパワーアップしたものに近いかも・ スケジュール（時間を指定した自動実行）の機能は見つけられなかった。寝ている間に自動実行とかは出来ない気がした・Chrome の「要素を検証」みたいな感覚で、クリックやフォームの位置を指定できる・要素名を変更するなど細かい微調整は出来ないようなので、id 名等が少しでも変わるとフローが動かなくなるかも・アクションの種類は多彩で、頑張れば「LINEビジネスアカウントでログインして、レポートをローカルフォルダにダウンロードし、それを Google スプレッドシートにインポート」は出来ると思う・今起動しているブラウザにも接続できるようなので、２段階認証突破のハードルは多少低そうPower Automate と Power Automate Desktop との違いはイマイチ理解できていない。難しい...。・Power Automate・Power Automate Desktop ← 今回はこっち多彩なアクション※ フローの新規作成画面です。[多彩なアクション]フローを作った様子https://www.myfitnesspal.com/ja/account/login にログインして csv ファイルをダウンロードするフローを作ったが、MyFitnesspal は「CSV ファイルをダウンロードするためのリンクを含んだメールが届きます」だと知った。試しに作るには大きすぎるため心が折れた。(^^;[設定例]インストール方法や実行方法などの紹介動画うぃんどうずしょしんしゃなので、わかりやすいどうがをみたよ。","link":"https://masutaka.net/chalow/2021-07-28-1.html","isoDate":"2021-07-28T14:59:59.000Z","dateMiliSeconds":1627484399000,"authorName":"masutaka"},{"title":"『ここがつらいよ普段使いのLinux』という発表をした","content":"\u003cp\u003eこんにちは \u003ca href=\"http://blog.hatena.ne.jp/masutaka26/\" class=\"hatena-id-icon\"\u003e\u003cimg src=\"https://cdn.profile-image.st-hatena.com/users/masutaka26/profile.png\" width=\"16\" height=\"16\" alt=\"\" class=\"hatena-id-icon\"\u003eid:masutaka26\u003c/a\u003e です。いよいよ明後日は \u003ca href=\"https://jp.rizinff.com/_ct/17440570\"\u003eRIZIN.28\u003c/a\u003e ですね！東京ドームで MMA（総合格闘技）のイベントが行われるのは、約 17 年半ぶりだそうです（Wikipedia 調べ）。ドキが胸胸します。\u003c/p\u003e\n\n\u003cp\u003e本日、週次の社内勉強会 \u003ca href=\"https://developer.feedforce.jp/archive/category/FFTT\"\u003eFFTT\u003c/a\u003e で『ここがつらいよ普段使いのLinux』という発表をしました。タイトルは違いますが、気にしないで下さい。\u003c/p\u003e\n\n\u003ciframe src=\"https://docs.google.com/presentation/d/e/2PACX-1vTBXZg9pczERJABgT3Uuu922Ktcc91HHl00QOtySt7fFtxrL4NZOcco1BtkK_pDuFkO0Uo-JuAwBkoC/embed?start=false\u0026loop=false\u0026delayms=3000\" frameborder=\"0\" width=\"960\" height=\"400\" allowfullscreen=\"true\" mozallowfullscreen=\"true\" webkitallowfullscreen=\"true\"\u003e\u003c/iframe\u003e\n\n\n\u003cp\u003eMac が重い時に IME 切り替えが一瞬遅れて、例えば「feedforce」とタイプする時に「ふぇえ...」になる現象に悩まされていました。\u003c/p\u003e\n\n\u003cp\u003eそこで約 10 年ぶりに Windows PC を購入して、同じく約 10 年ぶりに Linux を普段使いし始めました。\u003c/p\u003e\n\n\u003cp\u003e数々の諸問題が発生しましたが、無事全部解決（？）したお話です。\u003c/p\u003e\n\n\u003cul\u003e\n\u003cli\u003eキーボードショートカットがつらい\u003c/li\u003e\n\u003cli\u003eタッチパッドがつらい\u003c/li\u003e\n\u003cli\u003e指紋認証出来なくてつらい\u003c/li\u003e\n\u003cli\u003eたまにスリープから復帰しなくてつらい（一番つらい）\u003c/li\u003e\n\u003cli\u003eちょっとした画像編集に GIMP を使うのはつらい\u003c/li\u003e\n\u003c/ul\u003e\n\n\n\u003cp\u003eみんなも Mac を捨てて Linux を使うといいと思うよ！\u003c/p\u003e\n\n\u003cp\u003eそれでは！\u003c/p\u003e\n\n\u003cp\u003e\u003cdiv class=\"hatena-asin-detail\"\u003e\u003ca href=\"https://www.amazon.co.jp/exec/obidos/ASIN/4871908240/hatena-blog-22/\" class=\"hatena-asin-detail-image-link\" target=\"_blank\" rel=\"noopener\"\u003e\u003cimg src=\"https://m.media-amazon.com/images/I/51NEN46FW9L._SL500_.jpg\" class=\"hatena-asin-detail-image\" alt=\"だれでもできるLinuxセットアップ―無料(ただ)なのに頼れるOSリヌクス\" title=\"だれでもできるLinuxセットアップ―無料(ただ)なのに頼れるOSリヌクス\"\u003e\u003c/a\u003e\u003cdiv class=\"hatena-asin-detail-info\"\u003e\u003cp class=\"hatena-asin-detail-title\"\u003e\u003ca href=\"https://www.amazon.co.jp/exec/obidos/ASIN/4871908240/hatena-blog-22/\" target=\"_blank\" rel=\"noopener\"\u003eだれでもできるLinuxセットアップ―無料(ただ)なのに頼れるOSリヌクス\u003c/a\u003e\u003c/p\u003e\u003cul class=\"hatena-asin-detail-meta\"\u003e\u003cli\u003e\u003cspan class=\"hatena-asin-detail-label\"\u003e作者:\u003c/span\u003e\u003ca href=\"http://d.hatena.ne.jp/keyword/%CE%EB%CC%DA%20%C5%AF%BA%C8\" class=\"keyword\"\u003e鈴木 哲哉\u003c/a\u003e\u003c/li\u003e\u003cli\u003eオーエス出版\u003c/li\u003e\u003c/ul\u003e\u003ca href=\"https://www.amazon.co.jp/exec/obidos/ASIN/4871908240/hatena-blog-22/\" class=\"asin-detail-buy\" target=\"_blank\" rel=\"noopener\"\u003eAmazon\u003c/a\u003e\u003c/div\u003e\u003c/div\u003e\u003c/p\u003e\n","contentSnippet":"こんにちは id:masutaka26 です。いよいよ明後日は RIZIN.28 ですね！東京ドームで MMA（総合格闘技）のイベントが行われるのは、約 17 年半ぶりだそうです（Wikipedia 調べ）。ドキが胸胸します。本日、週次の社内勉強会 FFTT で『ここがつらいよ普段使いのLinux』という発表をしました。タイトルは違いますが、気にしないで下さい。Mac が重い時に IME 切り替えが一瞬遅れて、例えば「feedforce」とタイプする時に「ふぇえ...」になる現象に悩まされていました。そこで約 10 年ぶりに Windows PC を購入して、同じく約 10 年ぶりに Linux を普段使いし始めました。数々の諸問題が発生しましたが、無事全部解決（？）したお話です。キーボードショートカットがつらいタッチパッドがつらい指紋認証出来なくてつらいたまにスリープから復帰しなくてつらい（一番つらい）ちょっとした画像編集に GIMP を使うのはつらいみんなも Mac を捨てて Linux を使うといいと思うよ！それでは！だれでもできるLinuxセットアップ―無料(ただ)なのに頼れるOSリヌクス作者:鈴木 哲哉オーエス出版Amazon","link":"https://developer.feedforce.jp/entry/2021/06/11/180000","isoDate":"2021-06-11T09:00:00.000Z","dateMiliSeconds":1623402000000,"imageUrl":"https://m.media-amazon.com/images/I/51NEN46FW9L._SL500_.jpg","authorName":"masutaka"},{"title":"Dependabot の Terraform 1.0 対応が完了した件","content":"[2021-05-27-1] のつづき。この間に 1.0 がリリースされてましたね。先ほど、Lockfile (.terraform.lock.hcl) の対応が完了したそうです。https://github.com/dependabot/dependabot-core/issues/1176#issuecomment-858490407これで Dependabot での terraform 対応が完了しました。・terraform version は自動更新できない・provider version を自動更新できる。その際、.terraform.lock.hcl も更新されるはず・以前の Dependabot で対応されていた module version はどうなんだろう？使ってないので分からないdependabot.yml のドキュメントはこちら。circleci-tfupdate-orb はそろそろアーカイブしたいな。でも Dependabot だと terraform version は更新出来ないんだよね...。追記(2021-06-11):公式でもアナウンスされてました。Dependabot now supports Terraform 1.0｜GitHub Changelog","contentSnippet":"[2021-05-27-1] のつづき。この間に 1.0 がリリースされてましたね。先ほど、Lockfile (.terraform.lock.hcl) の対応が完了したそうです。https://github.com/dependabot/dependabot-core/issues/1176#issuecomment-858490407これで Dependabot での terraform 対応が完了しました。・terraform version は自動更新できない・provider version を自動更新できる。その際、.terraform.lock.hcl も更新されるはず・以前の Dependabot で対応されていた module version はどうなんだろう？使ってないので分からないdependabot.yml のドキュメントはこちら。circleci-tfupdate-orb はそろそろアーカイブしたいな。でも Dependabot だと terraform version は更新出来ないんだよね...。追記(2021-06-11):公式でもアナウンスされてました。Dependabot now supports Terraform 1.0｜GitHub Changelog","link":"https://masutaka.net/chalow/2021-06-10-1.html","isoDate":"2021-06-10T14:59:59.000Z","dateMiliSeconds":1623337199000,"authorName":"masutaka"},{"title":"暑がりの私にはマスクチェーンがとても合ってる","content":"去年の秋くらいからマスクチェーン（ストラップ）を使っています。私はとても暑がりなのと、マスクの着用感が好きではないので、かなり重宝しています。どのくらい暑がりかと言うと、中学生の時は暑くない水泳部に入ったり、毎日スーツを着る会社には絶対に入社しなかったり、今の会社が上場した時も暑かったので（スーツが必要な）東証には行かなかったり、まあそんな感じです。外に出た時にスッと外せるのがとても良いです。店で...","contentSnippet":"去年の秋くらいからマスクチェーン（ストラップ）を使っています。私はとても暑がりなのと、マスクの着用感が好きではないので、かなり重宝しています。どのくらい暑がりかと言うと、中学生の時は暑くない水泳部に入ったり、毎日スーツを着る会社には絶対に入社しなかったり、今の会社が上場した時も暑かったので（スーツが必要な）東証には行かなかったり、まあそんな感じです。外に出た時にスッと外せるのがとても良いです。店で...","link":"https://masutaka.net/chalow/2021-05-30-1.html","isoDate":"2021-05-30T14:59:59.000Z","dateMiliSeconds":1622386799000,"authorName":"masutaka"},{"title":"Dependabot の Terraform 0.15 対応が進んでいる件","content":"最近この Issue が活発になってきました。Terraform 0.15 support · Issue #1176 · dependabot/dependabot-core実はプロバイダーバージョンのアップデートだけならもう使えます。・プロバイダーバージョンのアップデートはもう動く・↑の後に必要な .terraform.lock.hcl の更新は実装中とのこと。現在は手動で \"$ terraform init -upgrade\" が必要・terraform バージョンのアップデートはロードマップに含まれていない↓プライベートリポジトリで動いている様子。[dependabot terraform1][dependabot terraform2]dependabot.yml のドキュメントはここにあるので、試してみるのも良いかもしれません。↓このブログが置いてあるリポジトリの .github/dependabot.yml です。daily はやり過ぎなのであとで減らそう。version: 2updates: - package-ecosystem: \"terraform\" directory: \"/terraform/aws\" schedule: interval: \"daily\" time: \"12:00\" timezone: \"Asia/Tokyo\" assignees: - \"masutaka\" open-pull-requests-limit: 10 - package-ecosystem: \"terraform\" directory: \"/terraform/heroku\" schedule: interval: \"daily\" time: \"12:00\" timezone: \"Asia/Tokyo\" assignees: - \"masutaka\" open-pull-requests-limit: 10今までの経緯とかTerraform 0.11 まで、Dependabot はモジュールのアップデートだけ対応していました。https://dependabot.com/docs/config-file/ でその痕跡を確認できます。※ Dependabot は GitHub に統合されたので、https://dependabot.com はもう古いです。ですが、Terraform 0.12 で HCL2 が導入されてから、全く動かなくなりました。前述の Issue も要望の嵐。@minamijoyo が tfupdate を作ってくれたので、私もその CircleCI Orb を作ってみるなど。※ 現在この Orb は terraform 本体とプロバイダーバージョンのアップデートのみ対応しています。terraform.lock.hcl の更新には対応していないので、手動で $ terraform init -upgrade が必要です。https://github.com/minamijoyo/tfupdate-circleci-example のサンプルコードは対応しているみたいです。","contentSnippet":"最近この Issue が活発になってきました。Terraform 0.15 support · Issue #1176 · dependabot/dependabot-core実はプロバイダーバージョンのアップデートだけならもう使えます。・プロバイダーバージョンのアップデートはもう動く・↑の後に必要な .terraform.lock.hcl の更新は実装中とのこと。現在は手動で \"$ terraform init -upgrade\" が必要・terraform バージョンのアップデートはロードマップに含まれていない↓プライベートリポジトリで動いている様子。[dependabot terraform1][dependabot terraform2]dependabot.yml のドキュメントはここにあるので、試してみるのも良いかもしれません。↓このブログが置いてあるリポジトリの .github/dependabot.yml です。daily はやり過ぎなのであとで減らそう。version: 2updates: - package-ecosystem: \"terraform\" directory: \"/terraform/aws\" schedule: interval: \"daily\" time: \"12:00\" timezone: \"Asia/Tokyo\" assignees: - \"masutaka\" open-pull-requests-limit: 10 - package-ecosystem: \"terraform\" directory: \"/terraform/heroku\" schedule: interval: \"daily\" time: \"12:00\" timezone: \"Asia/Tokyo\" assignees: - \"masutaka\" open-pull-requests-limit: 10今までの経緯とかTerraform 0.11 まで、Dependabot はモジュールのアップデートだけ対応していました。https://dependabot.com/docs/config-file/ でその痕跡を確認できます。※ Dependabot は GitHub に統合されたので、https://dependabot.com はもう古いです。ですが、Terraform 0.12 で HCL2 が導入されてから、全く動かなくなりました。前述の Issue も要望の嵐。@minamijoyo が tfupdate を作ってくれたので、私もその CircleCI Orb を作ってみるなど。※ 現在この Orb は terraform 本体とプロバイダーバージョンのアップデートのみ対応しています。terraform.lock.hcl の更新には対応していないので、手動で $ terraform init -upgrade が必要です。https://github.com/minamijoyo/tfupdate-circleci-example のサンプルコードは対応しているみたいです。","link":"https://masutaka.net/chalow/2021-05-27-1.html","isoDate":"2021-05-27T14:59:59.000Z","dateMiliSeconds":1622127599000,"authorName":"masutaka"},{"title":"ノートパソコンクーラーを買い替えた","content":"2 年使っていた冷却パッドが寿命っぽいので、エレコムのノートパソコンクーラーを買いました。心配していた冷却効果は申し分なく、ひとまずホッとしています。元々こちらの冷却パッドを使っていました。ゲーミング PC 向けみたいです。この動画お気に入りです。つい何度も見てしまう中毒性があります。少々デカイのが難点でしたが、冷却効果は申し分ありませんでした。ただ 2 年も使うとホコリが溜まってきます。分解は無理そう...","contentSnippet":"2 年使っていた冷却パッドが寿命っぽいので、エレコムのノートパソコンクーラーを買いました。心配していた冷却効果は申し分なく、ひとまずホッとしています。元々こちらの冷却パッドを使っていました。ゲーミング PC 向けみたいです。この動画お気に入りです。つい何度も見てしまう中毒性があります。少々デカイのが難点でしたが、冷却効果は申し分ありませんでした。ただ 2 年も使うとホコリが溜まってきます。分解は無理そう...","link":"https://masutaka.net/chalow/2021-05-23-1.html","isoDate":"2021-05-23T14:59:59.000Z","dateMiliSeconds":1621781999000,"authorName":"masutaka"},{"title":"スマホ専用テプラ LR30 を買った","content":"私はテプラが苦手です。あのワープロみたいなキーボードがダメ。パソコンと微妙に似ているけどちょっと違う、csh や tcsh みたいな立ち位置がダメです。← 分かりづらいでもこのテプラはスマホで文字を打てます。発表された当初から気にはなっていて、今さらながら買ってみました。6,000 円弱とそこまで高くないことと、あったら便利で邪魔にもならないと思ったからです。使った感想としては「そこまでオススメはしないけど悪くもない」です。良いところ：・Bluetooth 接続がとても楽。ペアリングが必要ない・スマホ操作なので普通のテプラよりは打ちやすい・電源が電池なので取り回しが楽。会社でコンセント探したなあ...良くないところ：・感熱プリントなので印刷が１年くらいしかもたない・同じ理由で印刷が安っぽい・良さそうな色のテープがない画像は見てのとおりオレガノです。たまたま家にあった赤ちゃん用のミルカーに入れています。これでバジリコと間違えることはないでしょう。[Tepra oregano]オレガノの容器はもっと良いのを探しています。なかなかないんだよなあ...。もし普通のテプラと同じ印刷方式と同じテープが使えて、スマホから使えて、そこそこの値段だったら買うかも。と思って改めて探したらあった・・・！(ToT) ただしアプリはヒドイみたい。","contentSnippet":"私はテプラが苦手です。あのワープロみたいなキーボードがダメ。パソコンと微妙に似ているけどちょっと違う、csh や tcsh みたいな立ち位置がダメです。← 分かりづらいでもこのテプラはスマホで文字を打てます。発表された当初から気にはなっていて、今さらながら買ってみました。6,000 円弱とそこまで高くないことと、あったら便利で邪魔にもならないと思ったからです。使った感想としては「そこまでオススメはしないけど悪くもない」です。良いところ：・Bluetooth 接続がとても楽。ペアリングが必要ない・スマホ操作なので普通のテプラよりは打ちやすい・電源が電池なので取り回しが楽。会社でコンセント探したなあ...良くないところ：・感熱プリントなので印刷が１年くらいしかもたない・同じ理由で印刷が安っぽい・良さそうな色のテープがない画像は見てのとおりオレガノです。たまたま家にあった赤ちゃん用のミルカーに入れています。これでバジリコと間違えることはないでしょう。[Tepra oregano]オレガノの容器はもっと良いのを探しています。なかなかないんだよなあ...。もし普通のテプラと同じ印刷方式と同じテープが使えて、スマホから使えて、そこそこの値段だったら買うかも。と思って改めて探したらあった・・・！(ToT) ただしアプリはヒドイみたい。","link":"https://masutaka.net/chalow/2021-05-20-1.html","isoDate":"2021-05-20T14:59:59.000Z","dateMiliSeconds":1621522799000,"authorName":"masutaka"},{"title":"Windows ノートパソコン（ASUS VivoBook S15 M533IA）を買った","content":"1 ヶ月ほど前になりますが、10 数年ぶりに Windows ノートパソコンを買いました。とても満足しています。ASUS VivoBook S15 M533IA-BQ0BLT（インディーブラック）[ASUS VivoBook S15 M533IA-BQ0BLT（インディーブラック）][2020-07-14-1] に iPhone から Android に乗り換えたことと関係していて、脱 Apple 計画の最終章（？）です。スペックはこんな感じです。トラックパッド右上に指紋認証用のセンサーも付いています。CPUAMD Ryzen™ 7 4700UMemory16GBStorage1TB SSDMonitor15.6inchKeyboard109 日本語（画像は 104 英語キーボード）今まで持っていたノートパソコンが Early 2014 の（！）MacBook Air だったので、めちゃめちゃ速くなりました。Ryzen いいですねー！Intel 版もあったのですが、Ryzen への興味とお値段から Ryzen にしました。そのお値段は ￥110,900 に 11,090 ヨドバシポイントが付いた形です。Amazon.co.jp は ￥99,810 だったので、Amazon.co.jp にしようかとは思いましたが、ヨドバシカメラ上野店で話しかけてきた店員さん 2 人に少しだけ敬意を払って、ヨドバシ.comで購入しました。今見たら在庫がなくなっているし、だいぶ高くなってます。ひゃー・ヨドバシ.com（￥134,150 - 13,415pt）・Amazon.co.jp（￥125,821 - 1,258pt）ここ 10 年はほぼ Apple 製品で暮らしていたので、Windows PC や CPU 事情は全く分からない人になっていました。ヨドバシカメラに視察に行ったあと、最終的にこの 3 つに絞ってうんうん考えていました。お値段はそれぞれ 20万、10万、14万と割と違います。・LG Gram 16Z90P-KA78J（インテル® Core™ i7-1165G7）・ASUS VivoBook S15 M533IA（AMD Ryzen™ 7 4700U）・ASUS VivoBook S15 S533EA（インテル® Core™ i7-1165G7）本当は英語キーボードが欲しかったのですよねえ...。でも国内だと VAIO を BTO するくらいしかないらしく、Amazon.com や eBay とか見てました。・Amazon.com \u003e LG Gram 16Z90P-K.AAB8U1（当時約￥190,535）・Amazon.com \u003e ASUS VivoBook S15 M533IA（売り切れ...）・Amazon.com \u003e ASUS VivoBook S15 S533EA（当時約￥140,802）少し前なら ASUS の物理ストアにキーボード換装サービスがあったらしいです。でも去年の 8/16 をもって閉店とのこと...。それもあって Amazon.com の VivoBook S15 M533IA 売り切れは本当に涙です。仕方がないので Amazon.com で Intel 版の S533EA をポチりましたが、英語キーボードに４万円は出せないなーと思い直しキャンセル。頭を冷やして考えを整理しました。・久しぶりの Windows PC なので、失敗する可能性はある・だとしたら、敢えて一番安い選択肢を採用してみよう。経験値をためて、2~3 年後により良い機種を買えば良いし・VivoBook は４色から選べるけど、それは無視して一番安い色にする・英語キーボードも今回はこだわらない。アプリで変えれば良いだろうそうなると、ASUS VivoBook S15 M533IA インディーブラックの日本語キーボード一択です。今度は迷いなく、ヨドバシ.comでポチりました。ポチったのが 3/29（月）、届いたのがその翌日です。さすがのヨドバシエクストリームです。結果的にスペック的には大満足でした。インディーブラックも落ち着いていて悪くないです。日本語キーボードになると、スペースキーがこんなに小さくなるのは驚きました。キーボードにこだわりがある人はきついかも。Windows PC は 15inch を超えると、テンキーがつく傾向があるのかな...？全く要らない...。Windows には慣れない...。Windows をまともに使ったのは XP が最後だったので全く変わったような、Vista や 7 を考えると XP と少しは似ているような...。頑張ります！P.S.ちゃんとしたレビューはこちらの記事が良いかと。ASUS VivoBook S15 M533IA レビュー：Ryzen 7 4700U搭載の高品質15.6インチスタンダードノートPC – こまめブログ","contentSnippet":"1 ヶ月ほど前になりますが、10 数年ぶりに Windows ノートパソコンを買いました。とても満足しています。ASUS VivoBook S15 M533IA-BQ0BLT（インディーブラック）[ASUS VivoBook S15 M533IA-BQ0BLT（インディーブラック）][2020-07-14-1] に iPhone から Android に乗り換えたことと関係していて、脱 Apple 計画の最終章（？）です。スペックはこんな感じです。トラックパッド右上に指紋認証用のセンサーも付いています。CPUAMD Ryzen™ 7 4700UMemory16GBStorage1TB SSDMonitor15.6inchKeyboard109 日本語（画像は 104 英語キーボード）今まで持っていたノートパソコンが Early 2014 の（！）MacBook Air だったので、めちゃめちゃ速くなりました。Ryzen いいですねー！Intel 版もあったのですが、Ryzen への興味とお値段から Ryzen にしました。そのお値段は ￥110,900 に 11,090 ヨドバシポイントが付いた形です。Amazon.co.jp は ￥99,810 だったので、Amazon.co.jp にしようかとは思いましたが、ヨドバシカメラ上野店で話しかけてきた店員さん 2 人に少しだけ敬意を払って、ヨドバシ.comで購入しました。今見たら在庫がなくなっているし、だいぶ高くなってます。ひゃー・ヨドバシ.com（￥134,150 - 13,415pt）・Amazon.co.jp（￥125,821 - 1,258pt）ここ 10 年はほぼ Apple 製品で暮らしていたので、Windows PC や CPU 事情は全く分からない人になっていました。ヨドバシカメラに視察に行ったあと、最終的にこの 3 つに絞ってうんうん考えていました。お値段はそれぞれ 20万、10万、14万と割と違います。・LG Gram 16Z90P-KA78J（インテル® Core™ i7-1165G7）・ASUS VivoBook S15 M533IA（AMD Ryzen™ 7 4700U）・ASUS VivoBook S15 S533EA（インテル® Core™ i7-1165G7）本当は英語キーボードが欲しかったのですよねえ...。でも国内だと VAIO を BTO するくらいしかないらしく、Amazon.com や eBay とか見てました。・Amazon.com \u003e LG Gram 16Z90P-K.AAB8U1（当時約￥190,535）・Amazon.com \u003e ASUS VivoBook S15 M533IA（売り切れ...）・Amazon.com \u003e ASUS VivoBook S15 S533EA（当時約￥140,802）少し前なら ASUS の物理ストアにキーボード換装サービスがあったらしいです。でも去年の 8/16 をもって閉店とのこと...。それもあって Amazon.com の VivoBook S15 M533IA 売り切れは本当に涙です。仕方がないので Amazon.com で Intel 版の S533EA をポチりましたが、英語キーボードに４万円は出せないなーと思い直しキャンセル。頭を冷やして考えを整理しました。・久しぶりの Windows PC なので、失敗する可能性はある・だとしたら、敢えて一番安い選択肢を採用してみよう。経験値をためて、2~3 年後により良い機種を買えば良いし・VivoBook は４色から選べるけど、それは無視して一番安い色にする・英語キーボードも今回はこだわらない。アプリで変えれば良いだろうそうなると、ASUS VivoBook S15 M533IA インディーブラックの日本語キーボード一択です。今度は迷いなく、ヨドバシ.comでポチりました。ポチったのが 3/29（月）、届いたのがその翌日です。さすがのヨドバシエクストリームです。結果的にスペック的には大満足でした。インディーブラックも落ち着いていて悪くないです。日本語キーボードになると、スペースキーがこんなに小さくなるのは驚きました。キーボードにこだわりがある人はきついかも。Windows PC は 15inch を超えると、テンキーがつく傾向があるのかな...？全く要らない...。Windows には慣れない...。Windows をまともに使ったのは XP が最後だったので全く変わったような、Vista や 7 を考えると XP と少しは似ているような...。頑張ります！P.S.ちゃんとしたレビューはこちらの記事が良いかと。ASUS VivoBook S15 M533IA レビュー：Ryzen 7 4700U搭載の高品質15.6インチスタンダードノートPC – こまめブログ","link":"https://masutaka.net/chalow/2021-05-06-1.html","isoDate":"2021-05-06T14:59:59.000Z","dateMiliSeconds":1620313199000,"authorName":"masutaka"},{"title":"『こども地政学』を読んだ","content":"以前から地政学には興味があったのでポチって読んでみました。子供向けの本で、漢字には全部ルビが振ってあります。でも大人向けの入門書としても良い気がしました。久々にさらっと読めて良い気分転換になったし、地政学の基礎の基礎を知れた気がします。日本って、ランドパワーの中国にとっては海に出ていくための邪魔な蓋でしかないのかー。追々、他の地政学の本も読んでみよう。","contentSnippet":"以前から地政学には興味があったのでポチって読んでみました。子供向けの本で、漢字には全部ルビが振ってあります。でも大人向けの入門書としても良い気がしました。久々にさらっと読めて良い気分転換になったし、地政学の基礎の基礎を知れた気がします。日本って、ランドパワーの中国にとっては海に出ていくための邪魔な蓋でしかないのかー。追々、他の地政学の本も読んでみよう。","link":"https://masutaka.net/chalow/2021-04-10-1.html","isoDate":"2021-04-10T14:59:59.000Z","dateMiliSeconds":1618066799000,"authorName":"masutaka"},{"title":"Android の TODO アプリは TickTick が鉄板かも","content":"iPhone から Android (Pixel 3a XL) に乗り換えて [2020-07-14-1]、普通に使える TODO アプリを探していました。私は基本デフォルト厨なので、Google の ToDo リスト か Google Keep で続けようと頑張りましたが、断念しました。ToDo リストは一度でも繰り返しを設定したタスクは他のリストに移動できないという、理解不能な仕様（？）でした。Google Keep は頑張って３ヶ月使いましたが、リマインダーアプリとしては xxx（伏せ字）でした。※ Note アプリとしては普通に便利なので、今も使っています。・未来のリマインダーを完了できない（早めに終わっても、その時間にならないと完了できない）・リマインダーを完了しても残る。さらにアーカイブする必要がある。Note 機能との魔合体の弊害と思われる・繰り返しのリマインダーを視界から消すのが面倒。完了してもアーカイブしてもまた現れる・他にもあったかも？そんな中行き着いたのが TickTick です。TikTok じゃないよ。とても良かったのでプレミアム会員（$27.99/year）になりましたが、無料でも十分使えます。普通のリマインダーアプリとして使える何が普通なのか難しいところですが、、こんな分類をしていると言えば分かりますかね？[TickTick のリスト]２週間毎とかのリマインダーも設定できるたまにこういうリマインダーがあるのですよね。加湿器の掃除とか。もちろん隔週や隔月なども出来ます。１時間後とかに思い出させるとかも出来るすぐ出来ない時ありますよね？そんな時にも後で思い出させてくれます。習慣づけの機能がある自分にはとても合いました。[TickTick の習慣]私はログを取るのが好きみたいで、なるべく途切れさせないように行動するようになりました。「飲酒をやめる」に至っては、今年の 1/31 以来続いています。そこまでストイックになる必要もないのですが、続けることが目的になっています。それに何もしなければ良いだけなので、この中では一番簡単です。その他私は使っていませんが、ポモドーロテクニックを支援する機能もあります。プレミアム会員用の機能かも？Android と iOS、Web など、さまざまなプラットフォームに対応しています。今使っているリマインダーアプリからの移行など、まとまった量の作業は Web 版でゴリッとやると良いかもです。あと、書き忘れましたが、私は仕事では TickTick を使ってません。プライベートだけです。仕事では Slack リマインダーや Gmail（Inbox Zero 運用、Snooze 機能）あたりでゆるふわ運用しています。仕事で使うツールはあまり増やしたくないのですよね。気にするものが増えてしまうので。Slack から Gmail に簡単に送信できれば、Gmail に集約できるんだけど...。まとめAndroid で普通の TODO アプリを求めて TickTick に行き着いたという話をしました。特に Android で TODO アプリに悩んでいる人は試すと良いと思います。無料でも十分使えますんで！","contentSnippet":"iPhone から Android (Pixel 3a XL) に乗り換えて [2020-07-14-1]、普通に使える TODO アプリを探していました。私は基本デフォルト厨なので、Google の ToDo リスト か Google Keep で続けようと頑張りましたが、断念しました。ToDo リストは一度でも繰り返しを設定したタスクは他のリストに移動できないという、理解不能な仕様（？）でした。Google Keep は頑張って３ヶ月使いましたが、リマインダーアプリとしては xxx（伏せ字）でした。※ Note アプリとしては普通に便利なので、今も使っています。・未来のリマインダーを完了できない（早めに終わっても、その時間にならないと完了できない）・リマインダーを完了しても残る。さらにアーカイブする必要がある。Note 機能との魔合体の弊害と思われる・繰り返しのリマインダーを視界から消すのが面倒。完了してもアーカイブしてもまた現れる・他にもあったかも？そんな中行き着いたのが TickTick です。TikTok じゃないよ。とても良かったのでプレミアム会員（$27.99/year）になりましたが、無料でも十分使えます。普通のリマインダーアプリとして使える何が普通なのか難しいところですが、、こんな分類をしていると言えば分かりますかね？[TickTick のリスト]２週間毎とかのリマインダーも設定できるたまにこういうリマインダーがあるのですよね。加湿器の掃除とか。もちろん隔週や隔月なども出来ます。１時間後とかに思い出させるとかも出来るすぐ出来ない時ありますよね？そんな時にも後で思い出させてくれます。習慣づけの機能がある自分にはとても合いました。[TickTick の習慣]私はログを取るのが好きみたいで、なるべく途切れさせないように行動するようになりました。「飲酒をやめる」に至っては、今年の 1/31 以来続いています。そこまでストイックになる必要もないのですが、続けることが目的になっています。それに何もしなければ良いだけなので、この中では一番簡単です。その他私は使っていませんが、ポモドーロテクニックを支援する機能もあります。プレミアム会員用の機能かも？Android と iOS、Web など、さまざまなプラットフォームに対応しています。今使っているリマインダーアプリからの移行など、まとまった量の作業は Web 版でゴリッとやると良いかもです。あと、書き忘れましたが、私は仕事では TickTick を使ってません。プライベートだけです。仕事では Slack リマインダーや Gmail（Inbox Zero 運用、Snooze 機能）あたりでゆるふわ運用しています。仕事で使うツールはあまり増やしたくないのですよね。気にするものが増えてしまうので。Slack から Gmail に簡単に送信できれば、Gmail に集約できるんだけど...。まとめAndroid で普通の TODO アプリを求めて TickTick に行き着いたという話をしました。特に Android で TODO アプリに悩んでいる人は試すと良いと思います。無料でも十分使えますんで！","link":"https://masutaka.net/chalow/2021-04-07-1.html","isoDate":"2021-04-07T14:59:59.000Z","dateMiliSeconds":1617807599000,"authorName":"masutaka"},{"title":"縦置きスタンドを買って、ノートパソコンを床に置いちゃう問題を解消した","content":"ここ１年はずっと家で仕事しているので、ノートパソコンは会社用と合わせて２台あります。最近 ASUS の Vivobook も買ったので、一時的に３台あります。そうなってくると地味に困るのが、使ってないパソコンの置き場所です。今までこういうダメな置き方をしていました。気をつけてはいますが、椅子が当たるかもしれませんし、パタンと倒れるかもしれません。[床に置く図]そこで、こんな縦置きスタンドを買いました。￥2,650 というお値段以外はとても満足しています。使ってみた図です。奥が 15.6inch の Vivobook、手前が 13inch MacBook Pro です。Vivobook はやや厚いので、付属の六角レンチで調節しました。[使ってみた図]このモデルは手前にタブレットやスマホも置けます。置いたのは 9.7inch の ZenPad です。３つ置いても、重量感があり安定しています。重さは 580g です。[タブレットも置いてみた図]サイズは 横 x 奥行き x 高さ = 15cm x 12cm x 4.8 cm なので、意外とコンパクトです。ゴムパッドも付いているので、デバイスに傷は付きづらいと思います。同じメーカーで別のモデルもあったので紹介しておきます。こちらはノートパソコン１台、タブレットまたはスマホ２台用です。奥行きが 9.5cm と多少小さいです。こちらはノートパソコン２台、タブレットまたはスマホ２台用です。大きそうに見えますが、私が買ったモデルと同じサイズです。前回のマグネットケーブルホルダー [2021-03-24-1] に引き続き、当たりを引けて良かったです。","contentSnippet":"ここ１年はずっと家で仕事しているので、ノートパソコンは会社用と合わせて２台あります。最近 ASUS の Vivobook も買ったので、一時的に３台あります。そうなってくると地味に困るのが、使ってないパソコンの置き場所です。今までこういうダメな置き方をしていました。気をつけてはいますが、椅子が当たるかもしれませんし、パタンと倒れるかもしれません。[床に置く図]そこで、こんな縦置きスタンドを買いました。￥2,650 というお値段以外はとても満足しています。使ってみた図です。奥が 15.6inch の Vivobook、手前が 13inch MacBook Pro です。Vivobook はやや厚いので、付属の六角レンチで調節しました。[使ってみた図]このモデルは手前にタブレットやスマホも置けます。置いたのは 9.7inch の ZenPad です。３つ置いても、重量感があり安定しています。重さは 580g です。[タブレットも置いてみた図]サイズは 横 x 奥行き x 高さ = 15cm x 12cm x 4.8 cm なので、意外とコンパクトです。ゴムパッドも付いているので、デバイスに傷は付きづらいと思います。同じメーカーで別のモデルもあったので紹介しておきます。こちらはノートパソコン１台、タブレットまたはスマホ２台用です。奥行きが 9.5cm と多少小さいです。こちらはノートパソコン２台、タブレットまたはスマホ２台用です。大きそうに見えますが、私が買ったモデルと同じサイズです。前回のマグネットケーブルホルダー [2021-03-24-1] に引き続き、当たりを引けて良かったです。","link":"https://masutaka.net/chalow/2021-04-04-1.html","isoDate":"2021-04-04T14:59:59.000Z","dateMiliSeconds":1617548399000,"authorName":"masutaka"},{"title":"Anker のマグネットケーブルホルダーを使って、ケーブルが下に落ちちゃう問題を解消できた","content":"今まではこんなんでした。3 本のケーブルを洗濯バサミ（）でまとめて、Anker の USB 急速充電器に引っかけています。かろうじて落ちません。すみません嘘つきました。たまに落ちます。[購入前]Anker のマグネットケーブルホルダーを使えばアラすっきり！少し様子がおかしいのは気にしない。[購入後]付属のクリップでケーブルを挟み込んで、台座に磁石で付く仕組みなのですが、直径 3.5mm 以下という制約がなかなかキツイ。今どき珍しい Mini DisplayPort ケーブルは無理だったので、別のクリップで凌ぎました。こちらの記事を見て買いました。商品レビューはこちらを見たほうが良いと思います。Ankerの「マグネットケーブルホルダー」を使い始めたら、デスクワークの快適性が格段に向上しちゃいました｜ROOMIE（ルーミー）","contentSnippet":"今まではこんなんでした。3 本のケーブルを洗濯バサミ（）でまとめて、Anker の USB 急速充電器に引っかけています。かろうじて落ちません。すみません嘘つきました。たまに落ちます。[購入前]Anker のマグネットケーブルホルダーを使えばアラすっきり！少し様子がおかしいのは気にしない。[購入後]付属のクリップでケーブルを挟み込んで、台座に磁石で付く仕組みなのですが、直径 3.5mm 以下という制約がなかなかキツイ。今どき珍しい Mini DisplayPort ケーブルは無理だったので、別のクリップで凌ぎました。こちらの記事を見て買いました。商品レビューはこちらを見たほうが良いと思います。Ankerの「マグネットケーブルホルダー」を使い始めたら、デスクワークの快適性が格段に向上しちゃいました｜ROOMIE（ルーミー）","link":"https://masutaka.net/chalow/2021-03-24-1.html","isoDate":"2021-03-24T14:59:59.000Z","dateMiliSeconds":1616597999000,"authorName":"masutaka"},{"title":"現在の GitHub flow は v2 かな？","content":"@kyanny さんの記事を自分なりに整理してみる。ずっと「マージした後にメインブランチを production デプロイする」というワークフローだと勘違いしていた。昔は「マージ後にデプロイ」だったが、いつの頃からか「マージ前にデプロイ」に変わったらしい。どこかでそんな話は聞いていたけど、実際のところはどうなんだろう？と以前から疑問だった。やっぱりそうだったか。現在の GitHub flowというか、GiHub の公式ガイドにそのものズバリ書いてあったのね。灯台下暗し...。Understanding the GitHub flow · GitHub Guides\"\u003e\" を数回クリックし、\"Deploy\" に進むと書いてある。With GitHub, you can deploy from a branch for final testing in production before merging to main.main ブランチにマージする前に、最後の確認をするために本番環境にデプロイする。If your branch causes issues, you can roll it back by deploying the existing main branch into production.もし問題が発生したら、main ブランチを本番環境にデプロイすることでロールバック出来る。main ブランチの protection rule は \"Require branches to be up to date before merging\" を有効にしているのかな。いずれにせよ、main ブランチの commit 全部入りのブランチをデプロイしているはず。以前の GitHub flow2011/8/31 の GitHub Flow – Scott Chacon にまとまっている。この頃の GitHub は従業員 35 人だったそう。\"we can merge it into master for deployment\" とあるので、この頃は確かに master ブランチにマージしたあとにデプロイしていたようだ。自分なりの整理Git は元々 Linux カーネルのバージョン管理をするためのツールとして開発された。その Linux カーネルの開発ではその性質上、Git Flow という重厚なブランチ戦略が使われていた。GitHub flow は Web アプリケーションに合った軽量なブランチ戦略として誕生し、時を経てその内容も変わっていた。以前の GitHub flow を v1、現在の GitHub flow を v2 と勝手にバージョニングすることにした。P.S.Apple っぽくするのだったら「新しい GitHub flow」なのかな？(^^;追記(2021-03-15):会社の同僚から「main（デフォルト）ブランチを常にリリース可能な状態に保つ」というルールが守られていれば、それが広義の GitHub flow でいいんじゃない？みたいな話を聞きました。なるほど。","contentSnippet":"@kyanny さんの記事を自分なりに整理してみる。ずっと「マージした後にメインブランチを production デプロイする」というワークフローだと勘違いしていた。昔は「マージ後にデプロイ」だったが、いつの頃からか「マージ前にデプロイ」に変わったらしい。どこかでそんな話は聞いていたけど、実際のところはどうなんだろう？と以前から疑問だった。やっぱりそうだったか。現在の GitHub flowというか、GiHub の公式ガイドにそのものズバリ書いてあったのね。灯台下暗し...。Understanding the GitHub flow · GitHub Guides\"\u003e\" を数回クリックし、\"Deploy\" に進むと書いてある。With GitHub, you can deploy from a branch for final testing in production before merging to main.main ブランチにマージする前に、最後の確認をするために本番環境にデプロイする。If your branch causes issues, you can roll it back by deploying the existing main branch into production.もし問題が発生したら、main ブランチを本番環境にデプロイすることでロールバック出来る。main ブランチの protection rule は \"Require branches to be up to date before merging\" を有効にしているのかな。いずれにせよ、main ブランチの commit 全部入りのブランチをデプロイしているはず。以前の GitHub flow2011/8/31 の GitHub Flow – Scott Chacon にまとまっている。この頃の GitHub は従業員 35 人だったそう。\"we can merge it into master for deployment\" とあるので、この頃は確かに master ブランチにマージしたあとにデプロイしていたようだ。自分なりの整理Git は元々 Linux カーネルのバージョン管理をするためのツールとして開発された。その Linux カーネルの開発ではその性質上、Git Flow という重厚なブランチ戦略が使われていた。GitHub flow は Web アプリケーションに合った軽量なブランチ戦略として誕生し、時を経てその内容も変わっていた。以前の GitHub flow を v1、現在の GitHub flow を v2 と勝手にバージョニングすることにした。P.S.Apple っぽくするのだったら「新しい GitHub flow」なのかな？(^^;追記(2021-03-15):会社の同僚から「main（デフォルト）ブランチを常にリリース可能な状態に保つ」というルールが守られていれば、それが広義の GitHub flow でいいんじゃない？みたいな話を聞きました。なるほど。","link":"https://masutaka.net/chalow/2021-03-15-1.html","isoDate":"2021-03-15T14:59:59.000Z","dateMiliSeconds":1615820399000,"authorName":"masutaka"},{"title":"フィード（RSS/Atom）を配信していないサイトのフィードを Feed43 で作成する","content":"「Looker の記事一覧｜DevelopersIO」が更新されたら Slack に POST したかったのです。トップページならフィードが配信されているけど、これだと多すぎます。ノンエンジニアである会社の同僚が https://feed43.com/ で作っているらしいので、試してみました。結果的にこのフィードを作れましたがめっちゃ面倒くさかったので、記録として残します。同僚すごい...。https://feed43.com/developersio-looker.xmlhttps://feed43.com/ の \"Create your first RSS feed\" をクリックして、指示に従って作ります。今回は https://dev.classmethod.jp/tags/looker/ です。入力し Reload します。[Feed43 Step1]HTML が取得され、\"extraction rules\" の入力を促されるのでそうします。[Feed43 Step2a]予想はしていましたが、これがめちゃめちゃ大変で時間がかかりました。1. HTML 構造を理解する2. 記事一覧に相当する HTML をテキストエディタに貼り付ける3. 記事の URL やタイトルなど、取り出したい箇所を {%} で置換し、Extract する4. Extract できたら儲けもの。不要な HTML を {*} で置換して、少しずつ小さくしていく最終的にこのルールを作ることが出来ました。\u003cdiv class=\"post{*}\"{*}\u0026gt;{*}\u003ca href=\"{%}\" class=\"link\"{*}\u0026gt;{*}\u003ch3 class=\"post-title\"{*}\u0026gt;{%}\u003c/h3\u0026gt;{*}\u003c/a\u0026gt;{*}\u003cp class=\"date\"{*}\u0026gt;{%}\u003c/p\u0026gt;{*}\u003c/div\u0026gt;{*} はワイルドカードです。関係ない HTML はこれで省略しましょう。スペースや改行、HTML コメントなども削除したら {*} にする必要はあるかも。{%} は正規表現の \\1, \\2 みたいなやつです。上の例だと 3 つあるので、あとで {%1}, {%2}, {%3} として取り出すことが出来ます。取り出せた様子です。[Feed43 Step2b]あとはフィードの output format を設定するだけです。[Feed43 Step3a]Preview ボタンをクリックすると、無事フィードが生成されました。[Feed43 Step3b]任意のファイル名に変換することが出来ます。今回は developersio-looker にしました。[Your feed is ready!]そして、私はこのあとハマりました...。Feed43 のアカウントを作って作業したためか、上の Make this feed private に User Name と Password が設定されてしまい、Slack から購読することが出来ませんでした。両方とも空にして Set すれば良いみたいです。Slack やフィードリーダーでは単純に https://feed43.com/developersio-looker.xml を購読すれば良いです。この URL をブラウザで開くと https://node2.feed43.com/developersio-looker.xml にリダイレクトされますが、こちらは変更され得ると思うので、購読してはいけません。変更され得ると言えば、サイトの HTML 構造も変わり得るので、いつかは壊れるでしょう。スクレイピングあるあるです。そしたらフィード経由で分かるのかしら？FAQ ページには載ってませんでした。検索すると似たような記事は見つかります。でも「めちゃめちゃ大変」なことが書かれていなかったので、今回記事を書きました。えぇ...追記(2021-08-17):https://dev.classmethod.jp/tags/looker/ のフィードは https://dev.classmethod.jp/feed/?tag=looker にありました。その後書いた会社ブログ記事へのリアクションで知りました。ありがとうございます。","contentSnippet":"「Looker の記事一覧｜DevelopersIO」が更新されたら Slack に POST したかったのです。トップページならフィードが配信されているけど、これだと多すぎます。ノンエンジニアである会社の同僚が https://feed43.com/ で作っているらしいので、試してみました。結果的にこのフィードを作れましたがめっちゃ面倒くさかったので、記録として残します。同僚すごい...。https://feed43.com/developersio-looker.xmlhttps://feed43.com/ の \"Create your first RSS feed\" をクリックして、指示に従って作ります。今回は https://dev.classmethod.jp/tags/looker/ です。入力し Reload します。[Feed43 Step1]HTML が取得され、\"extraction rules\" の入力を促されるのでそうします。[Feed43 Step2a]予想はしていましたが、これがめちゃめちゃ大変で時間がかかりました。1. HTML 構造を理解する2. 記事一覧に相当する HTML をテキストエディタに貼り付ける3. 記事の URL やタイトルなど、取り出したい箇所を {%} で置換し、Extract する4. Extract できたら儲けもの。不要な HTML を {*} で置換して、少しずつ小さくしていく最終的にこのルールを作ることが出来ました。\u003cdiv class=\"post{*}\"{*}\u003e{*}\u003ca href=\"{%}\" class=\"link\"{*}\u003e{*}\u003ch3 class=\"post-title\"{*}\u003e{%}\u003c/h3\u003e{*}\u003c/a\u003e{*}\u003cp class=\"date\"{*}\u003e{%}\u003c/p\u003e{*}\u003c/div\u003e{*} はワイルドカードです。関係ない HTML はこれで省略しましょう。スペースや改行、HTML コメントなども削除したら {*} にする必要はあるかも。{%} は正規表現の \\1, \\2 みたいなやつです。上の例だと 3 つあるので、あとで {%1}, {%2}, {%3} として取り出すことが出来ます。取り出せた様子です。[Feed43 Step2b]あとはフィードの output format を設定するだけです。[Feed43 Step3a]Preview ボタンをクリックすると、無事フィードが生成されました。[Feed43 Step3b]任意のファイル名に変換することが出来ます。今回は developersio-looker にしました。[Your feed is ready!]そして、私はこのあとハマりました...。Feed43 のアカウントを作って作業したためか、上の Make this feed private に User Name と Password が設定されてしまい、Slack から購読することが出来ませんでした。両方とも空にして Set すれば良いみたいです。Slack やフィードリーダーでは単純に https://feed43.com/developersio-looker.xml を購読すれば良いです。この URL をブラウザで開くと https://node2.feed43.com/developersio-looker.xml にリダイレクトされますが、こちらは変更され得ると思うので、購読してはいけません。変更され得ると言えば、サイトの HTML 構造も変わり得るので、いつかは壊れるでしょう。スクレイピングあるあるです。そしたらフィード経由で分かるのかしら？FAQ ページには載ってませんでした。検索すると似たような記事は見つかります。でも「めちゃめちゃ大変」なことが書かれていなかったので、今回記事を書きました。えぇ...追記(2021-08-17):https://dev.classmethod.jp/tags/looker/ のフィードは https://dev.classmethod.jp/feed/?tag=looker にありました。その後書いた会社ブログ記事へのリアクションで知りました。ありがとうございます。","link":"https://masutaka.net/chalow/2021-03-14-1.html","isoDate":"2021-03-14T14:59:59.000Z","dateMiliSeconds":1615733999000,"authorName":"masutaka"},{"title":"『NO RULES』を読んだ","content":"２ヶ月くらいかけてようやく読み終えました。ビジネス書を読み切れたのはいつ以来ぶりだろう？NETFLIXは「能力密度を高める」ことを最優先にしており、そんな超優秀な彼らに「個人における最高水準の報酬を払って」います。しかも、会社として成長できる環境を用意しているので、他の会社にも引き抜かれづらい理屈らしいです。ペパボのあんちぽさんが書いてた「いるだけで成長できる環境」を思い出しました。その原資はそれほど�...","contentSnippet":"２ヶ月くらいかけてようやく読み終えました。ビジネス書を読み切れたのはいつ以来ぶりだろう？NETFLIXは「能力密度を高める」ことを最優先にしており、そんな超優秀な彼らに「個人における最高水準の報酬を払って」います。しかも、会社として成長できる環境を用意しているので、他の会社にも引き抜かれづらい理屈らしいです。ペパボのあんちぽさんが書いてた「いるだけで成長できる環境」を思い出しました。その原資はそれほど�...","link":"https://masutaka.net/chalow/2021-03-13-1.html","isoDate":"2021-03-13T14:59:59.000Z","dateMiliSeconds":1615647599000,"authorName":"masutaka"},{"title":"『集合論入門』の第１編まで読んであとは挫折した","content":"[2021-02-22-1] の『達人に学ぶSQL徹底指南書 第2版』から派生して読みました。Amazon のレビューでは読みやすい読みやすいと書いてあったので、どんなに読みやすいか期待しつつ読み進めました。「第１編 集合の代数」は確かに読みやすかったですが、「第２編 濃度」から急に理解できなくなり、「第３編 順序数」も含めてペラペラとページをめくって終了しました。正確に書くと、SQL との関連性に期待して読み進めたが、距離が遠すぎて読むのを止めたといった感じです。焦るところではないので、そういうものだと受け入れました。以下は第１編の自分用メモです。高校の頃は数学が好きだったので、懐かしみながらメモを取りました。a ∈ Aa は A に属する、a は A の元（げん）であるa ∉ Aa は A に属さない、a は A の元（げん）でないA ⊆ B または B ⊇ AA は B の部分集合であるA ⊂ B または B ⊃ AA は B の真部分集合であるØ または {}空集合A ∪ BA と B の和集合。\"A cup B\" または \"A join B\" と読む。SQL では UNION なので、∪ は覚えやすい。A ∩ BA と B の共通部分（積集合）。\"A cap B\" または \"A meet B\" と読む。SQL では INTERSECT。A ∩ B = Ø の時（共通な元が１つもない）、A と B は「互いに素」である。A × BA と B の直積P.S.Kindle 版はハイライトやメモを取れませんでした。本気で理解しようとする人は煩わしいと感じるかも。","contentSnippet":"[2021-02-22-1] の『達人に学ぶSQL徹底指南書 第2版』から派生して読みました。Amazon のレビューでは読みやすい読みやすいと書いてあったので、どんなに読みやすいか期待しつつ読み進めました。「第１編 集合の代数」は確かに読みやすかったですが、「第２編 濃度」から急に理解できなくなり、「第３編 順序数」も含めてペラペラとページをめくって終了しました。正確に書くと、SQL との関連性に期待して読み進めたが、距離が遠すぎて読むのを止めたといった感じです。焦るところではないので、そういうものだと受け入れました。以下は第１編の自分用メモです。高校の頃は数学が好きだったので、懐かしみながらメモを取りました。a ∈ Aa は A に属する、a は A の元（げん）であるa ∉ Aa は A に属さない、a は A の元（げん）でないA ⊆ B または B ⊇ AA は B の部分集合であるA ⊂ B または B ⊃ AA は B の真部分集合であるØ または {}空集合A ∪ BA と B の和集合。\"A cup B\" または \"A join B\" と読む。SQL では UNION なので、∪ は覚えやすい。A ∩ BA と B の共通部分（積集合）。\"A cap B\" または \"A meet B\" と読む。SQL では INTERSECT。A ∩ B = Ø の時（共通な元が１つもない）、A と B は「互いに素」である。A × BA と B の直積P.S.Kindle 版はハイライトやメモを取れませんでした。本気で理解しようとする人は煩わしいと感じるかも。","link":"https://masutaka.net/chalow/2021-03-09-1.html","isoDate":"2021-03-09T14:59:59.000Z","dateMiliSeconds":1615301999000,"authorName":"masutaka"},{"title":"『達人に学ぶSQL徹底指南書 第2版』を読んだ","content":"[2020-12-20-1] にも書いた通り、去年の 4 月から SQL と格闘する毎日です。もっとも全部自分で書くわけではなく、Looker が出力する SQL を理解したり、発生したエラーやデータ不正の原因を SQL 視点で調査したり、検証用の使い捨ての SQL を書いたりといった感じです。つまりは SELECT 文しか書かないです。しかし、SELECT 文こそが SQL そのものと言っても良いため、現在のデータアーキテクト（データ整備人）という立ち位置での学習教材を探していました。そんな中思い出したのが本書になります。LookML 開発者としてはこの本に書かれた全てが「優先度高」ではないため、敢えて流し読みを心がけました。その中で重要だと思ったのはこのあたりでしょうか。・１ CASE 式のススメ・２ 必ずわかるウィンドウ関数・４ ３値論理と NULL・７ ウィンドウ関数で行間比較を行なう・８ 外部結合の使い方・１８ GROUP BY と PARTITION BYLooker が出力する SQL で見かけない気がする EXISTS, HAVING あたりは流し読みしたので、正直まだ理解していません。近いうちに読み返すと思います。それとは別に、「第１部 ９ SQL での集合演算」は興味深かったです。すなわち、和（UNION）、差（EXCEPT）、積（CROSS JOIN）です。商（DIVEDE BY）は「諸事情」により標準化が遅れているそうです。今まで雰囲気で UNION ALL を使うくらいだったので、集合演算は自分のスコープが広がった気がしました。「１５ 関係に始まり関係に終わる」に SQL の関係閉包性が UNIX のパイプの概念とよく似ているという記述も興味深かったです。UNIX ではファイルがさまざまなコマンドの入力・出力になるため、（標準）出力をパイプで次々と渡すことが出来ます。SQL では UNIX のファイルはテーブルに相当します。SELECT 文はテーブルを引数にとってテーブルを返すため、UNIX と同じように次々と出力を渡すことが出来ます。これを関係の閉包性と呼ぶそうです。これを知って、SQL に一気に親近感が湧きました。後半に進むにつれ、より抽象的な話になっていきます。集合論というワードはちょいちょい出てきて気になってましたが、後半の「SQLでは、集合論的な観点からプログラミングを考えることが上達の鍵」というセンテンスを見てちょっと学んでみようかと思い、評判が良さそうなこの本を購入しました。あまり気負わずに読んでみます。データアーキテクト（データ整備人）という文脈でオススメの本を見つけて、大変満足したというお話でした。","contentSnippet":"[2020-12-20-1] にも書いた通り、去年の 4 月から SQL と格闘する毎日です。もっとも全部自分で書くわけではなく、Looker が出力する SQL を理解したり、発生したエラーやデータ不正の原因を SQL 視点で調査したり、検証用の使い捨ての SQL を書いたりといった感じです。つまりは SELECT 文しか書かないです。しかし、SELECT 文こそが SQL そのものと言っても良いため、現在のデータアーキテクト（データ整備人）という立ち位置での学習教材を探していました。そんな中思い出したのが本書になります。LookML 開発者としてはこの本に書かれた全てが「優先度高」ではないため、敢えて流し読みを心がけました。その中で重要だと思ったのはこのあたりでしょうか。・１ CASE 式のススメ・２ 必ずわかるウィンドウ関数・４ ３値論理と NULL・７ ウィンドウ関数で行間比較を行なう・８ 外部結合の使い方・１８ GROUP BY と PARTITION BYLooker が出力する SQL で見かけない気がする EXISTS, HAVING あたりは流し読みしたので、正直まだ理解していません。近いうちに読み返すと思います。それとは別に、「第１部 ９ SQL での集合演算」は興味深かったです。すなわち、和（UNION）、差（EXCEPT）、積（CROSS JOIN）です。商（DIVEDE BY）は「諸事情」により標準化が遅れているそうです。今まで雰囲気で UNION ALL を使うくらいだったので、集合演算は自分のスコープが広がった気がしました。「１５ 関係に始まり関係に終わる」に SQL の関係閉包性が UNIX のパイプの概念とよく似ているという記述も興味深かったです。UNIX ではファイルがさまざまなコマンドの入力・出力になるため、（標準）出力をパイプで次々と渡すことが出来ます。SQL では UNIX のファイルはテーブルに相当します。SELECT 文はテーブルを引数にとってテーブルを返すため、UNIX と同じように次々と出力を渡すことが出来ます。これを関係の閉包性と呼ぶそうです。これを知って、SQL に一気に親近感が湧きました。後半に進むにつれ、より抽象的な話になっていきます。集合論というワードはちょいちょい出てきて気になってましたが、後半の「SQLでは、集合論的な観点からプログラミングを考えることが上達の鍵」というセンテンスを見てちょっと学んでみようかと思い、評判が良さそうなこの本を購入しました。あまり気負わずに読んでみます。データアーキテクト（データ整備人）という文脈でオススメの本を見つけて、大変満足したというお話でした。","link":"https://masutaka.net/chalow/2021-02-22-1.html","isoDate":"2021-02-22T14:59:59.000Z","dateMiliSeconds":1614005999000,"authorName":"masutaka"},{"title":"全ての esa 新着記事を読みきれないので、最近はこの方法を使ってる","content":"\u003cp\u003eこんにちは \u003ca href=\"http://blog.hatena.ne.jp/masutaka26/\" class=\"hatena-id-icon\"\u003e\u003cimg src=\"https://cdn.profile-image.st-hatena.com/users/masutaka26/profile.png\" width=\"16\" height=\"16\" alt=\"\" class=\"hatena-id-icon\"\u003eid:masutaka26\u003c/a\u003e です。最近好きな YouTuber はシバターです。シバターかわいいよ...。シバター...\u003c/p\u003e\n\n\u003cp\u003eフィードフォースでは先日紹介したとおり、ドキュメント共有ツールに \u003ca href=\"https://esa.io/\"\u003eesa\u003c/a\u003e を使っています。\u003c/p\u003e\n\n\u003cp\u003e\u003ciframe src=\"https://hatenablog-parts.com/embed?url=https%3A%2F%2Fdeveloper.feedforce.jp%2Fentry%2F2021%2F02%2F03%2F110000\" title=\"変化に耐え得る esa のカテゴリ設計を徹底的に考えてみた - Feedforce Developer Blog\" class=\"embed-card embed-blogcard\" scrolling=\"no\" frameborder=\"0\" style=\"display: block; width: 100%; height: 190px; max-width: 500px; margin: 10px 0px;\"\u003e\u003c/iframe\u003e\u003c/p\u003e\n\n\u003cp\u003eメンバー数は 90、デイリーアクティブメンバーは 69 くらいです。2/10 の新着記事数は 106 でした。情報共有が活発な会社で、体感でもとても多いです。\u003c/p\u003e\n\n\u003cp\u003e全ての新着記事と記事へのコメントは Slack の \u003ccode\u003e#esa-notify\u003c/code\u003e に通知されます。そこを全部読めば追えはしますが、いかんせんこの数です。\u003c/p\u003e\n\n\u003cp\u003e真面目に全部読むと、私の場合はかける時間に見合わないなと感じたので、最近は esa の検索を利用した方法を使っています。\u003c/p\u003e\n\n\u003cul class=\"table-of-contents\"\u003e\n    \u003cli\u003e\u003ca href=\"#使っている方法\"\u003e使っている方法\u003c/a\u003e\u003cul\u003e\n            \u003cli\u003e\u003ca href=\"#フォローした人の新着記事を読む\"\u003eフォローした人の新着記事を読む\u003c/a\u003e\u003c/li\u003e\n            \u003cli\u003e\u003ca href=\"#エゴサーチする\"\u003eエゴサーチする\u003c/a\u003e\u003c/li\u003e\n            \u003cli\u003e\u003ca href=\"#気になるキーワードに言及した新着記事を読む\"\u003e気になるキーワードに言及した新着記事を読む\u003c/a\u003e\u003c/li\u003e\n            \u003cli\u003e\u003ca href=\"#日報以外の最近更新された記事を読む\"\u003e日報以外の最近更新された記事を読む\u003c/a\u003e\u003c/li\u003e\n            \u003cli\u003e\u003ca href=\"#直近の記事を読む\"\u003e直近の記事を読む\u003c/a\u003e\u003c/li\u003e\n        \u003c/ul\u003e\n    \u003c/li\u003e\n    \u003cli\u003e\u003ca href=\"#公式ドキュメント\"\u003e公式ドキュメント\u003c/a\u003e\u003c/li\u003e\n    \u003cli\u003e\u003ca href=\"#ちょっとした悩み\"\u003eちょっとした悩み\u003c/a\u003e\u003c/li\u003e\n    \u003cli\u003e\u003ca href=\"#所感\"\u003e所感\u003c/a\u003e\u003c/li\u003e\n    \u003cli\u003e\u003ca href=\"#おまけ-ボツにした方法\"\u003eおまけ: ボツにした方法\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\n\u003ch2 id=\"使っている方法\"\u003e使っている方法\u003c/h2\u003e\n\n\u003ch3 id=\"フォローした人の新着記事を読む\"\u003eフォローした人の新着記事を読む\u003c/h3\u003e\n\n\u003cp\u003e検索クエリの例:\u003c/p\u003e\n\n\u003cpre\u003e\u003ccode\u003e@alice OR @bob OR @sapp sort:created-desc\n\u003c/code\u003e\u003c/pre\u003e\n\n\u003cp\u003e🔖 ブラウザのブックマーク: \u003ca href=\"https://feedforce.esa.io/posts?q=%40alice+OR+%40bob+OR+%40sapp+sort%3Acreated-desc\"\u003eFollow\u003c/a\u003e\u003c/p\u003e\n\n\u003cp\u003e上の例では alice, bob, sapp をフォローしているイメージです。\u003c/p\u003e\n\n\u003cp\u003e社長やプロダクトオーナーをフォローして、最近の会社の状況を把握するようにしています。他、自分が関心がある人もフォローしています。\u003c/p\u003e\n\n\u003cp\u003eメンバーは固定ではなくたまに入れ替えます。現在 16 人をフォローしています。\u003c/p\u003e\n\n\u003ch3 id=\"エゴサーチする\"\u003eエゴサーチする\u003c/h3\u003e\n\n\u003cp\u003e検索クエリの例:\u003c/p\u003e\n\n\u003cpre\u003e\u003ccode\u003eマスタカ -@me OR ますたか -@me OR masutaka -@me OR 増田 -@me sort:created-desc\n\u003c/code\u003e\u003c/pre\u003e\n\n\u003cp\u003e🔖 ブラウザのブックマーク: \u003ca href=\"https://feedforce.esa.io/posts?q=%E3%83%9E%E3%82%B9%E3%82%BF%E3%82%AB+-%40me+OR+%E3%81%BE%E3%81%99%E3%81%9F%E3%81%8B+-%40me+OR+masutaka+-%40me+OR+%E5%A2%97%E7%94%B0+-%40me+sort%3Acreated-desc\"\u003eEgosearch\u003c/a\u003e\u003c/p\u003e\n\n\u003cp\u003e「マスタカ」「ますたか」「masutaka」「増田」が含まれ、且つ自分の記事を除いた新着記事を全部読んでいます。\u003c/p\u003e\n\n\u003cp\u003e空メンション \u003ccode\u003emasutaka\u003c/code\u003e やアイコン絵文字 \u003ccode\u003e:@masutaka:\u003c/code\u003e、\u003ccode\u003e\u0026lt;!-- Boku ha masutaka nari. --\u0026gt;\u003c/code\u003e のような HTML コメントも捕捉出来ます。👁\u003c/p\u003e\n\n\u003ch3 id=\"気になるキーワードに言及した新着記事を読む\"\u003e気になるキーワードに言及した新着記事を読む\u003c/h3\u003e\n\n\u003cp\u003e検索クエリの例:\u003c/p\u003e\n\n\u003cpre\u003e\u003ccode\u003elooker -@me sort:created-desc\n\u003c/code\u003e\u003c/pre\u003e\n\n\u003cp\u003e🔖 ブラウザのブックマーク: \u003ca href=\"https://feedforce.esa.io/posts?q=looker+-%40me+sort%3Acreated-desc\"\u003eSearch Looker\u003c/a\u003e\u003c/p\u003e\n\n\u003cp\u003e「looker」が含まれ、且つ自分の記事を除いた新着記事を全部読んでいます。\u003c/p\u003e\n\n\u003ch3 id=\"日報以外の最近更新された記事を読む\"\u003e日報以外の最近更新された記事を読む\u003c/h3\u003e\n\n\u003cp\u003e検索クエリの例:\u003c/p\u003e\n\n\u003cpre\u003e\u003ccode\u003e-category:日報 sort:updated-desc\n\u003c/code\u003e\u003c/pre\u003e\n\n\u003cp\u003e🔖 ブラウザのブックマーク: \u003ca href=\"https://feedforce.esa.io/posts?q=-category%3A%E6%97%A5%E5%A0%B1+sort%3Aupdated-desc\"\u003e日報以外\u003c/a\u003e\u003c/p\u003e\n\n\u003cp\u003e\u003ccode\u003e日報/\u003c/code\u003e カテゴリ以外で、最近更新された記事をたまに読んでいます。新着記事でないことがポイントです。良さそうな WIP 記事を先取りできることがあります。🤗\u003c/p\u003e\n\n\u003ch3 id=\"直近の記事を読む\"\u003e直近の記事を読む\u003c/h3\u003e\n\n\u003cp\u003e退勤後とかは、新着記事一覧 \u003ccode\u003e/posts\u003c/code\u003e も見ます。\u003c/p\u003e\n\n\u003ch2 id=\"公式ドキュメント\"\u003e公式ドキュメント\u003c/h2\u003e\n\n\u003cp\u003eここまで使った検索クエリは、公式ドキュメント「\u003ca href=\"https://docs.esa.io/posts/104\"\u003ehelp/記事の検索方法\u003c/a\u003e」に書かれています。\u003c/p\u003e\n\n\u003cp\u003eOR 検索よりも AND 検索のほうが優先度が高いとは書かれていないので、行間を読む必要があります。括弧は使えないので、前述の「エゴサーチする」は自分にとって難易度が高かったです。\u003c/p\u003e\n\n\u003cp\u003eesa の皆様、その節はサポートありがとうございました。🙏\u003c/p\u003e\n\n\u003ch2 id=\"ちょっとした悩み\"\u003eちょっとした悩み\u003c/h2\u003e\n\n\u003cp\u003eスマホだと「フォローした人の新着記事を読む」が検索対象のメンバーアイコンで埋まるので、結構スクロールしないと記事にたどり着けません。メンバーアイコンと記事の境界も曖昧で、スクロールしすぎることがあります。\u003c/p\u003e\n\n\u003cp\u003e\u003cfigure class=\"figure-image figure-image-fotolife\" title=\"スマホだと数スクロールがメンバーアイコンで埋まる\"\u003e\u003cspan itemscope itemtype=\"http://schema.org/Photograph\"\u003e\u003cimg src=\"https://cdn-ak.f.st-hatena.com/images/fotolife/m/masutaka26/20210211/20210211183124.png\" alt=\"f:id:masutaka26:20210211183124p:plain\" title=\"\" class=\"hatena-fotolife\" itemprop=\"image\"\u003e\u003c/span\u003e\u003cfigcaption\u003eスマホだと数スクロールがメンバーアイコンで埋まる\u003c/figcaption\u003e\u003c/figure\u003e\u003c/p\u003e\n\n\u003cp\u003eもう少しメンバーアイコンのサイズが小さいと良いと思います。ﾁﾗｯﾁﾗｯ\u003c/p\u003e\n\n\u003ch2 id=\"所感\"\u003e所感\u003c/h2\u003e\n\n\u003cp\u003e全ての新着記事を読む代わりに、テーマを決めた複数の方法で esa 記事を読み、かける時間を減らしました。２ヶ月ほど使っており、なかなか満足しています。\u003c/p\u003e\n\n\u003cp\u003eただ、関心外のことが入って来づらくなることは、特にこのフルリモートワーク下では怖さを感じます。\u003c/p\u003e\n\n\u003cp\u003eカッチリやらずに、たまに \u003ccode\u003e#esa-notify\u003c/code\u003e を覗けばよいのですけどね。記事へのコメントだけを通知する Slack チャンネルでも作れば良いのかしら？\u003c/p\u003e\n\n\u003ch2 id=\"おまけ-ボツにした方法\"\u003eおまけ: ボツにした方法\u003c/h2\u003e\n\n\u003cp\u003eコメントもエゴサーチしようとしましたが、なんか期待通りの振る舞いではなかったです。\u003c/p\u003e\n\n\u003cpre\u003e\u003ccode\u003ecomment:マスタカ OR comment:ますたか OR comment:masutaka OR comment:増田 sort:created-desc\n\u003c/code\u003e\u003c/pre\u003e\n\n\u003cp\u003eコメント本文はきちんと検索出来ているようですが、検索結果はあくまで（コメント単位ではなく）記事単位なので、すでに読んだ記事のことが多いからかな？\u003c/p\u003e\n\n\u003cp\u003e他の方法で網羅できているようなので、まあいいかあと思いました。\u003c/p\u003e\n","contentSnippet":"こんにちは id:masutaka26 です。最近好きな YouTuber はシバターです。シバターかわいいよ...。シバター...フィードフォースでは先日紹介したとおり、ドキュメント共有ツールに esa を使っています。メンバー数は 90、デイリーアクティブメンバーは 69 くらいです。2/10 の新着記事数は 106 でした。情報共有が活発な会社で、体感でもとても多いです。全ての新着記事と記事へのコメントは Slack の #esa-notify に通知されます。そこを全部読めば追えはしますが、いかんせんこの数です。真面目に全部読むと、私の場合はかける時間に見合わないなと感じたので、最近は esa の検索を利用した方法を使っています。使っている方法フォローした人の新着記事を読むエゴサーチする気になるキーワードに言及した新着記事を読む日報以外の最近更新された記事を読む直近の記事を読む公式ドキュメントちょっとした悩み所感おまけ: ボツにした方法使っている方法フォローした人の新着記事を読む検索クエリの例:@alice OR @bob OR @sapp sort:created-desc🔖 ブラウザのブックマーク: Follow上の例では alice, bob, sapp をフォローしているイメージです。社長やプロダクトオーナーをフォローして、最近の会社の状況を把握するようにしています。他、自分が関心がある人もフォローしています。メンバーは固定ではなくたまに入れ替えます。現在 16 人をフォローしています。エゴサーチする検索クエリの例:マスタカ -@me OR ますたか -@me OR masutaka -@me OR 増田 -@me sort:created-desc🔖 ブラウザのブックマーク: Egosearch「マスタカ」「ますたか」「masutaka」「増田」が含まれ、且つ自分の記事を除いた新着記事を全部読んでいます。空メンション masutaka やアイコン絵文字 :@masutaka:、\u003c!-- Boku ha masutaka nari. --\u003e のような HTML コメントも捕捉出来ます。👁気になるキーワードに言及した新着記事を読む検索クエリの例:looker -@me sort:created-desc🔖 ブラウザのブックマーク: Search Looker「looker」が含まれ、且つ自分の記事を除いた新着記事を全部読んでいます。日報以外の最近更新された記事を読む検索クエリの例:-category:日報 sort:updated-desc🔖 ブラウザのブックマーク: 日報以外日報/ カテゴリ以外で、最近更新された記事をたまに読んでいます。新着記事でないことがポイントです。良さそうな WIP 記事を先取りできることがあります。🤗直近の記事を読む退勤後とかは、新着記事一覧 /posts も見ます。公式ドキュメントここまで使った検索クエリは、公式ドキュメント「help/記事の検索方法」に書かれています。OR 検索よりも AND 検索のほうが優先度が高いとは書かれていないので、行間を読む必要があります。括弧は使えないので、前述の「エゴサーチする」は自分にとって難易度が高かったです。esa の皆様、その節はサポートありがとうございました。🙏ちょっとした悩みスマホだと「フォローした人の新着記事を読む」が検索対象のメンバーアイコンで埋まるので、結構スクロールしないと記事にたどり着けません。メンバーアイコンと記事の境界も曖昧で、スクロールしすぎることがあります。スマホだと数スクロールがメンバーアイコンで埋まるもう少しメンバーアイコンのサイズが小さいと良いと思います。ﾁﾗｯﾁﾗｯ所感全ての新着記事を読む代わりに、テーマを決めた複数の方法で esa 記事を読み、かける時間を減らしました。２ヶ月ほど使っており、なかなか満足しています。ただ、関心外のことが入って来づらくなることは、特にこのフルリモートワーク下では怖さを感じます。カッチリやらずに、たまに #esa-notify を覗けばよいのですけどね。記事へのコメントだけを通知する Slack チャンネルでも作れば良いのかしら？おまけ: ボツにした方法コメントもエゴサーチしようとしましたが、なんか期待通りの振る舞いではなかったです。comment:マスタカ OR comment:ますたか OR comment:masutaka OR comment:増田 sort:created-descコメント本文はきちんと検索出来ているようですが、検索結果はあくまで（コメント単位ではなく）記事単位なので、すでに読んだ記事のことが多いからかな？他の方法で網羅できているようなので、まあいいかあと思いました。","link":"https://developer.feedforce.jp/entry/2021/02/15/110000","isoDate":"2021-02-15T02:00:00.000Z","dateMiliSeconds":1613354400000,"imageUrl":"https://cdn-ak.f.st-hatena.com/images/fotolife/m/masutaka26/20210212/20210212181026.png","authorName":"masutaka"},{"title":"変化に耐え得る esa のカテゴリ設計を徹底的に考えてみた","content":"\u003cp\u003eこんにちは \u003ca href=\"http://blog.hatena.ne.jp/masutaka26/\" class=\"hatena-id-icon\"\u003e\u003cimg src=\"https://cdn.profile-image.st-hatena.com/users/masutaka26/profile.png\" width=\"16\" height=\"16\" alt=\"\" class=\"hatena-id-icon\"\u003eid:masutaka26\u003c/a\u003e です。夜の散歩（意味深）に勤しむ毎日です。\u003c/p\u003e\n\n\u003cp\u003eフィードフォースではドキュメント共有ツールには \u003ca href=\"https://esa.io/\"\u003eesa\u003c/a\u003e と \u003ca href=\"https://www.google.com/intl/ja/docs/about/\"\u003eGoogle ドキュメント\u003c/a\u003e\u003csup id=\"fnref:1\"\u003e\u003ca href=\"#fn:1\" rel=\"footnote\"\u003e1\u003c/a\u003e\u003c/sup\u003eを、コミュニケーションツールには \u003ca href=\"https://slack.com/\"\u003eSlack\u003c/a\u003e を採用しています。\u003c/p\u003e\n\n\u003cp\u003e情報共有はかなり活発で、2021/2/1 現在の esa 記事数は 81,324 です\u003csup id=\"fnref:2\"\u003e\u003ca href=\"#fn:2\" rel=\"footnote\"\u003e2\u003c/a\u003e\u003c/sup\u003e。\u003c/p\u003e\n\n\u003cul class=\"table-of-contents\"\u003e\n    \u003cli\u003e\u003ca href=\"#現在のカテゴリ構成と課題\"\u003e現在のカテゴリ構成と課題\u003c/a\u003e\u003c/li\u003e\n    \u003cli\u003e\u003ca href=\"#チームのスピードを上げるための大原則\"\u003eチームのスピードを上げるための大原則\u003c/a\u003e\u003c/li\u003e\n    \u003cli\u003e\u003ca href=\"#チームのスピードを上げるための情報整理\"\u003eチームのスピードを上げるための情報整理\u003c/a\u003e\u003cul\u003e\n            \u003cli\u003e\u003ca href=\"#1-Flow-型と-Stock-型の記事を理解する\"\u003e1. Flow 型と Stock 型の記事を理解する\u003c/a\u003e\u003c/li\u003e\n            \u003cli\u003e\u003ca href=\"#2-基本は-Flow-型の記事にする\"\u003e2. 基本は Flow 型の記事にする\u003c/a\u003e\u003c/li\u003e\n            \u003cli\u003e\u003ca href=\"#3-議事録カテゴリは出来るだけ作らない\"\u003e3. 議事録カテゴリは出来るだけ作らない\u003c/a\u003e\u003c/li\u003e\n            \u003cli\u003e\u003ca href=\"#4-Slack-に流れていく情報も-Flow-型の記事にする\"\u003e4. Slack に流れていく情報も Flow 型の記事にする\u003c/a\u003e\u003c/li\u003e\n            \u003cli\u003e\u003ca href=\"#5-使い続けられる情報を-Stock-記事として引き上げる\"\u003e5. 使い続けられる情報を Stock 記事として引き上げる\u003c/a\u003e\u003c/li\u003e\n            \u003cli\u003e\u003ca href=\"#6-整理を頑張らないことで整理の難易度が低くなった\"\u003e6. 整理を頑張らないことで整理の難易度が低くなった\u003c/a\u003e\u003c/li\u003e\n            \u003cli\u003e\u003ca href=\"#7-esa-を全ての情報の起点にする\"\u003e7. esa を全ての情報の起点にする\u003c/a\u003e\u003c/li\u003e\n        \u003c/ul\u003e\n    \u003c/li\u003e\n    \u003cli\u003e\u003ca href=\"#それをチームでやるのは難しすぎない\"\u003eそれをチームでやるのは難しすぎない？\u003c/a\u003e\u003c/li\u003e\n    \u003cli\u003e\u003ca href=\"#esa-は難しい\"\u003eesa は難しい\u003c/a\u003e\u003c/li\u003e\n    \u003cli\u003e\u003ca href=\"#esa-の本当の正体\"\u003eesa の本当の正体\u003c/a\u003e\u003c/li\u003e\n    \u003cli\u003e\u003ca href=\"#esa-への要望\"\u003eesa への要望\u003c/a\u003e\u003c/li\u003e\n    \u003cli\u003e\u003ca href=\"#まとめ\"\u003eまとめ\u003c/a\u003e\u003c/li\u003e\n    \u003cli\u003e\u003ca href=\"#esa-公式アカウントからのアドバイス\"\u003eesa 公式アカウントからのアドバイス\u003c/a\u003e\u003c/li\u003e\n    \u003cli\u003e\u003ca href=\"#コラム\"\u003eコラム\u003c/a\u003e\u003cul\u003e\n            \u003cli\u003e\u003ca href=\"#記事のカテゴリ整理を頑張らない理由\"\u003e記事のカテゴリ整理を頑張らない理由\u003c/a\u003e\u003c/li\u003e\n            \u003cli\u003e\u003ca href=\"#Flow-カテゴリをどこまで許容するか\"\u003eFlow カテゴリをどこまで許容するか\u003c/a\u003e\u003c/li\u003e\n        \u003c/ul\u003e\n    \u003c/li\u003e\n\u003c/ul\u003e\n\n\u003ch2 id=\"現在のカテゴリ構成と課題\"\u003e現在のカテゴリ構成と課題\u003c/h2\u003e\n\n\u003cp\u003eトップカテゴリは厳密にルール化されていて、これらの種類以外のカテゴリが増えることはありません。\u003c/p\u003e\n\n\u003cul\u003e\n\u003cli\u003e\u003ccode\u003e日報/\u003c/code\u003e\n\n\u003cul\u003e\n\u003cli\u003e\u003ccode\u003e2021/02/01 (月)/masutaka\u003c/code\u003e といった記事が置かれる\u003c/li\u003e\n\u003cli\u003e曜日がないなど、型から外れた日報は小人さんによって速やかに修正される。Bot 並に早いw\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003eプロダクト1/\u003c/code\u003e\n\n\u003cul\u003e\n\u003cli\u003e実際には \u003ccode\u003eFeedmatic\u003c/code\u003e などのプロダクト名が入る\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e︙\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003eプロダクトN/\u003c/code\u003e\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003eプロジェクト/\u003c/code\u003e\n\n\u003cul\u003e\n\u003cli\u003e期間が決まっている系のプロジェクトカテゴリが並ぶ\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003eチーム/\u003c/code\u003e\n\n\u003cul\u003e\n\u003cli\u003e人事や情報セキュリティなどのチーム系カテゴリが並ぶ\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003eコミュニティ/\u003c/code\u003e\n\n\u003cul\u003e\n\u003cli\u003e技術系や読書会などのコミュニティ系カテゴリが並ぶ\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003eノウハウ/\u003c/code\u003e\n\n\u003cul\u003e\n\u003cli\u003e各種ツールのノウハウ系カテゴリが並ぶ\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003eFeedforce Inc./\u003c/code\u003e\n\n\u003cul\u003e\n\u003cli\u003e会社全体に関係する記事が置かれる\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003eUsers/\u003c/code\u003e\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003eTemplates/\u003c/code\u003e\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003eArchived/\u003c/code\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\n\n\u003cp\u003e例えば「プロダクト1」の下は、議事録系を除き基本的に \u003ca href=\"https://docs.esa.io/posts/298\"\u003eStock 型の記事\u003c/a\u003eになっており、「マニュアル」カテゴリの下にはさらに 15 の子カテゴリが生えているとします。\u003c/p\u003e\n\n\u003cul\u003e\n\u003cli\u003e\u003ccode\u003eプロダクト1/\u003c/code\u003e\n\n\u003cul\u003e\n\u003cli\u003e\u003ccode\u003e議事録/\u003c/code\u003e\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003e開発/\u003c/code\u003e\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003eコンサルティング/\u003c/code\u003e\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003eマーケティング/\u003c/code\u003e\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003eインシデント/\u003c/code\u003e\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003eナレッジ/\u003c/code\u003e\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003eマニュアル/\u003c/code\u003e\n\n\u003cul\u003e\n\u003cli\u003e子カテゴリ数は 15\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e︙\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003eその他/\u003c/code\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\n\n\u003cp\u003e※ 複数のプロダクトから作った架空カテゴリです。\u003c/p\u003e\n\n\u003cp\u003eここまでならよく整理されているように見えますが、実際は古くてメンテナンスされていない記事が多く、言ってしまえばノイズが多い状況です。情報共有されればされるほど、ノイズが増えてしまう悪循環です。\u003c/p\u003e\n\n\u003cp\u003eSlack に目を向けると、こちらもオープンではありますが、時にブログ記事並みのメッセージが投稿されることがあります。未読メッセージを読み進めると手が止まり、読み切るのが難しいと想像されます。\u003c/p\u003e\n\n\u003cp\u003e\u003cfigure class=\"figure-image figure-image-fotolife\" title=\"ブログ記事並みのメッセージ例。これで半分です。\"\u003e\u003cspan itemscope itemtype=\"http://schema.org/Photograph\"\u003e\u003cimg src=\"https://cdn-ak.f.st-hatena.com/images/fotolife/m/masutaka26/20210202/20210202171748.png\" alt=\"f:id:masutaka26:20210202171748p:plain\" title=\"\" class=\"hatena-fotolife\" itemprop=\"image\"\u003e\u003c/span\u003e\u003cfigcaption\u003eブログ記事並みのメッセージ例。これで半分です。\u003c/figcaption\u003e\u003c/figure\u003e\u003c/p\u003e\n\n\u003cp\u003e細切れの情報も多く川の流れのようで、断片化した情報をつなぎ合わせるのは難しいと思います。\u003c/p\u003e\n\n\u003cp\u003e世の中には情報共有が足りないことに悩む組織は多いと思いますが、活発になったとしても、適切に整理されていなければその量に溺れてしまいます。\u003c/p\u003e\n\n\u003cp\u003e一方で、最近のコロナ禍もあって 10 年前と今とでは変化のスピードは上がっています。変化に強いチーム設計、つまりは変化に強い情報整理設計が重要です。これをやらなければ、チームのスピードは徐々に下がっていくでしょう。\u003c/p\u003e\n\n\u003ch2 id=\"チームのスピードを上げるための大原則\"\u003eチームのスピードを上げるための大原則\u003c/h2\u003e\n\n\u003cp\u003e私が社内で様々なプロダクトを渡り歩いた経験上、チームのスピードを上げるためには以下の 2 点が重要だと感じています。\u003c/p\u003e\n\n\u003cul\u003e\n\u003cli\u003eノイズを減らす\u003c/li\u003e\n\u003cli\u003e情報を一ヶ所に集める\u003c/li\u003e\n\u003c/ul\u003e\n\n\n\u003cp\u003eマネージャーはこれらの阻害要因を減らす仕掛けを作る必要があります。\u003c/p\u003e\n\n\u003cp\u003eただ、そういったことが得意な方ばかりではありません。むしろ情報量が一番多く、一番困っているのは彼らかもしれません。マネージャーに余裕がなければ、それがボトルネックとなりチームのスピードが下がります。\u003c/p\u003e\n\n\u003cp\u003eこれからその対策を考察していきます。\u003c/p\u003e\n\n\u003ch2 id=\"チームのスピードを上げるための情報整理\"\u003eチームのスピードを上げるための情報整理\u003c/h2\u003e\n\n\u003cp\u003eはじめに書いておくと、出来るだけ整理を頑張らないことが重要です。\u003c/p\u003e\n\n\u003ch3 id=\"1-Flow-型と-Stock-型の記事を理解する\"\u003e1. Flow 型と Stock 型の記事を理解する\u003c/h3\u003e\n\n\u003cp\u003eまずは公式ドキュメント「\u003ca href=\"https://docs.esa.io/posts/298\"\u003e記事のストック・フローの分類と検索\u003c/a\u003e」を読んで、Flow 型と Stock 型の記事の存在を知り、理解します。\u003c/p\u003e\n\n\u003ch3 id=\"2-基本は-Flow-型の記事にする\"\u003e2. 基本は Flow 型の記事にする\u003c/h3\u003e\n\n\u003cp\u003e全て Flow 型にするくらいの気持ちで記事を作ります。記事が多くなっても視界に入りづらいし、整理する必要もないためです。\u003c/p\u003e\n\n\u003cp\u003e\u003cfigure class=\"figure-image figure-image-fotolife\" title=\"Flow 型記事の例\"\u003e\u003cspan itemscope itemtype=\"http://schema.org/Photograph\"\u003e\u003cimg src=\"https://cdn-ak.f.st-hatena.com/images/fotolife/m/masutaka26/20210131/20210131224825.png\" alt=\"f:id:masutaka26:20210131224825p:plain\" title=\"\" class=\"hatena-fotolife\" itemprop=\"image\"\u003e\u003c/span\u003e\u003cfigcaption\u003eFlow 型記事の例\u003c/figcaption\u003e\u003c/figure\u003e\u003c/p\u003e\n\n\u003cp\u003e書き捨ての記事であれば \u003ccode\u003eプロダクト1/2021/02/01/タイトル\u003c/code\u003e、今月中は更新する記事であれば \u003ccode\u003eプロダクト1/2021/02/タイトル\u003c/code\u003e で良いと思います。ただ、さすがに今年中更新する記事は Stock 型の記事にしたほうが良いと思います。\u003c/p\u003e\n\n\u003ch3 id=\"3-議事録カテゴリは出来るだけ作らない\"\u003e3. 議事録カテゴリは出来るだけ作らない\u003c/h3\u003e\n\n\u003cp\u003e\u003ccode\u003eプロダクト1/議事録/\u003c/code\u003e のような議事録カテゴリはできるだけ作らず、\u003ccode\u003eプロダクト1/2021/02/01/〇〇会議 議事録\u003c/code\u003e のようなカテゴリとタイトルにします。議事録のような使い続けない記事を視界に入れるのは、どちらかと言えばノイズだからです。\u003c/p\u003e\n\n\u003cp\u003e社内で以下のような階層をよく見かけますが\u003csup id=\"fnref:3\"\u003e\u003ca href=\"#fn:3\" rel=\"footnote\"\u003e3\u003c/a\u003e\u003c/sup\u003e、一回限りの会議の置き場所に悩んでしまいます。\u003c/p\u003e\n\n\u003cul\u003e\n\u003cli\u003e\u003ccode\u003eプロダクト1/議事録/\u003c/code\u003e\n\n\u003cul\u003e\n\u003cli\u003e\u003ccode\u003e〇〇会議/YYYY/MM/DD/〇〇会議\u003c/code\u003e\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003eプランニング/YYYY/MM/DD/プランニング\u003c/code\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\n\n\u003cp\u003e\u003ccode\u003eプロダクト1/議事録/20210201 〇×会議 議事録\u003c/code\u003e のような自由なパターンも現れたりして、さらに悩ましくなります。\u003c/p\u003e\n\n\u003cp\u003e過去の議事録をたどる目的でカテゴリを分けたいのであれば、記事の最初に「議事録一覧はこちら」みたいな検索リンクがあれば十分でしょう。\u003c/p\u003e\n\n\u003cp\u003e\u003cfigure class=\"figure-image figure-image-fotolife\" title=\"「議事録一覧はこちら」の一例\"\u003e\u003cspan itemscope itemtype=\"http://schema.org/Photograph\"\u003e\u003cimg src=\"https://cdn-ak.f.st-hatena.com/images/fotolife/m/masutaka26/20210203/20210203114624.png\" alt=\"f:id:masutaka26:20210203114624p:plain\" title=\"\" class=\"hatena-fotolife\" itemprop=\"image\"\u003e\u003c/span\u003e\u003cfigcaption\u003e「議事録一覧はこちら」の一例\u003c/figcaption\u003e\u003c/figure\u003e\u003c/p\u003e\n\n\u003cp\u003eそれでも作りたい場合は \u003ccode\u003eプロダクト1/議事録/〇〇会議/2021/02/01/〇〇会議 議事録\u003c/code\u003e のような記事名にして、後から \u003ccode\u003eプロダクト1/2021/02/01/〇〇会議 議事録\u003c/code\u003e に一括変換して視界から消せるように、設計するのが良いと思います。\u003c/p\u003e\n\n\u003cp\u003e一括変換の仕方は公式ドキュメント「\u003ca href=\"https://docs.esa.io/posts/207\"\u003e記事のカテゴリを一括変更\u003c/a\u003e」が分かりやすいです。\u003c/p\u003e\n\n\u003ch3 id=\"4-Slack-に流れていく情報も-Flow-型の記事にする\"\u003e4. Slack に流れていく情報も Flow 型の記事にする\u003c/h3\u003e\n\n\u003cp\u003eSlack にはブログ記事並みのメッセージが投稿されることがあります。\u003c/p\u003e\n\n\u003cp\u003eそうなりそうになったら迷わず \u003ccode\u003eプロダクト1/2021/02/01/○○のお願い\u003c/code\u003e といった Flow 型の記事を作り、その URL を Slack で共有します。\u003c/p\u003e\n\n\u003cp\u003e他の場面で引用したい時は意外とあるものですし、内容をあとで更新したいこともあります。Slack だと特にあとからの更新には不向きです。\u003c/p\u003e\n\n\u003cp\u003e何より当該記事をブラウザで開き、残りの Slack 未読メッセージをスイスイと読むことが出来ます。Slack に投稿されてしまうと、その長いメッセージを読みながら、他の channel に移動するのは億劫です。\u003c/p\u003e\n\n\u003ch3 id=\"5-使い続けられる情報を-Stock-記事として引き上げる\"\u003e5. 使い続けられる情報を Stock 記事として引き上げる\u003c/h3\u003e\n\n\u003cp\u003e結局のところ、ほとんどの情報は使い続けることはありません。具体的すぎるからです。そのような具体的な情報は寝かすことで、抽象度の高い情報、例えばカテゴリ名を炙り出せることがあります。\u003c/p\u003e\n\n\u003cp\u003e良いカテゴリ名が思いつかない時は、まだ抽象度が高くないと思うので、引き上げないほうが良いでしょう。\u003c/p\u003e\n\n\u003cp\u003eいくつかの Flow 記事をしばらく寝かしたら、あとから汎用的な抽象度の高い Stock 記事のアイディアが湧くこともあります。\u003c/p\u003e\n\n\u003cp\u003e\u003cfigure class=\"figure-image figure-image-fotolife\" title=\"あとで Stock 記事として抽出する\"\u003e\u003cspan itemscope itemtype=\"http://schema.org/Photograph\"\u003e\u003cimg src=\"https://cdn-ak.f.st-hatena.com/images/fotolife/m/masutaka26/20210201/20210201002905.png\" alt=\"f:id:masutaka26:20210201002905p:plain\" title=\"\" class=\"hatena-fotolife\" itemprop=\"image\"\u003e\u003c/span\u003e\u003c/figure\u003e\u003c/p\u003e\n\n\u003ch3 id=\"6-整理を頑張らないことで整理の難易度が低くなった\"\u003e6. 整理を頑張らないことで整理の難易度が低くなった\u003c/h3\u003e\n\n\u003cp\u003eここまででほとんどの記事は Flow 型の記事のはずです。冒頭に述べたノイズになるような記事は少なく、情報に溺れる確率は低いと思います。\u003c/p\u003e\n\n\u003cp\u003e使い回しが効かない具体的な情報を Flow 型の記事に追いやることで、整理の難易度を低くすることが出来ました。\u003c/p\u003e\n\n\u003ch3 id=\"7-esa-を全ての情報の起点にする\"\u003e7. esa を全ての情報の起点にする\u003c/h3\u003e\n\n\u003cp\u003eでは、Google ドキュメントも同じようにしましょう！とは思っていません。esa を全ての情報の起点にする勢いで、適宜 Google ドキュメントにリンクを張ると良いでしょう。\u003c/p\u003e\n\n\u003cp\u003eGoogle ドキュメントのフォルダ整理は出来るだけやらないほうが良いです。時間がいくらあっても足りません。Google Drive はただの情報プールです。Google Drive 内検索も優秀です。\u003c/p\u003e\n\n\u003ch2 id=\"それをチームでやるのは難しすぎない\"\u003eそれをチームでやるのは難しすぎない？\u003c/h2\u003e\n\n\u003cp\u003eそう思った方、正しい感覚です。\u003c/p\u003e\n\n\u003cp\u003e「チームのスピードを上げるための情報整理」は「私が考える esa 原理主義」に振り切って書きました。情報整理のスキルに関して少数精鋭チームでないと、運用するのは難しいと思います。\u003c/p\u003e\n\n\u003cp\u003e現在私は開発者 1 人、ビジネスメンバー 2 人のチームに所属しています。私主導でカテゴリを決めているので、これまで書いた方法で整理し、うまくいっている実感があります。\u003c/p\u003e\n\n\u003cp\u003e\u003cfigure class=\"figure-image figure-image-fotolife\" title=\"Flow 型の記事に対して、Stock 型の記事を少なく保てている\"\u003e\u003cspan itemscope itemtype=\"http://schema.org/Photograph\"\u003e\u003cimg src=\"https://cdn-ak.f.st-hatena.com/images/fotolife/m/masutaka26/20210131/20210131231051.png\" alt=\"f:id:masutaka26:20210131231051p:plain\" title=\"\" class=\"hatena-fotolife\" itemprop=\"image\"\u003e\u003c/span\u003e\u003cfigcaption\u003eFlow 型の記事に対して、Stock 型の記事を少なく保てている。\u003c/figcaption\u003e\u003c/figure\u003e\u003c/p\u003e\n\n\u003cp\u003eそういえば初期は Flow 型の記事しか作りませんでした。\u003c/p\u003e\n\n\u003ch2 id=\"esa-は難しい\"\u003eesa は難しい\u003c/h2\u003e\n\n\u003cp\u003eフィードフォースでは 1 年半ほど前まで Qiita:Team を使っていました。\u003c/p\u003e\n\n\u003cp\u003e\u003ciframe src=\"https://hatenablog-parts.com/embed?url=https%3A%2F%2Fdeveloper.feedforce.jp%2Fentry%2F2019%2F08%2F22%2F141055\" title=\"社内の情報共有ツールを Qiita:Team から esa に乗り換えました - Feedforce Developer Blog\" class=\"embed-card embed-blogcard\" scrolling=\"no\" frameborder=\"0\" style=\"display: block; width: 100%; height: 190px; max-width: 500px; margin: 10px 0px;\"\u003e\u003c/iframe\u003e\u003c/p\u003e\n\n\u003cp\u003eQiita:Team はほぼ Flow 型の記事しか書けないため、これまで話した問題は出てきませんでした。いや「表面化しなかった」が正確でしょう。\u003c/p\u003e\n\n\u003cp\u003eesa は Stock 型の記事も書けます。ブログと wiki が合体したようなツールなので、難しくないわけがありません。\u003c/p\u003e\n\n\u003cp\u003ewiki を書くためには抽象的思考が必要です。私の観測範囲では、半分以上の方は具体的思考に寄り過ぎているため、得意ではないという実感です。意識したことがないかもしれません。\u003c/p\u003e\n\n\u003ch2 id=\"esa-の本当の正体\"\u003eesa の本当の正体\u003c/h2\u003e\n\n\u003cp\u003e正直言って現在の esa は「情報整理のスキルに関して少数精鋭チーム」でないと、乗りこなすのは難しいと思います。\u003c/p\u003e\n\n\u003cp\u003eこれに気づいた時、Ruby という言語に似ていると思いました。\u003c/p\u003e\n\n\u003cp\u003eRuby は esa で採用されているプログラミング言語です。初心者はにこやかに迎えてくれますが、本番環境で使い続けるためには、コードで表現されていない振る舞いを読み解く必要があるなど、実は少数精鋭チーム向けの言語です。\u003c/p\u003e\n\n\u003cp\u003e\u003ca href=\"https://team.esa.io/\"\u003eesa LLC\u003c/a\u003e は少数精鋭チームのようなので、良くも悪くも「コンウェイの法則」が働いて、そのようなサービスになったのだと勝手に想像します。\u003c/p\u003e\n\n\u003ch2 id=\"esa-への要望\"\u003eesa への要望\u003c/h2\u003e\n\n\u003cp\u003e社員数 100 人オーバーが見えてくると、型（制約）の必要性を感じます。\u003c/p\u003e\n\n\u003cul\u003e\n\u003cli\u003e新規作成時にデフォルトカテゴリが Flow 型になるような、型を設定できると良い？\n\n\u003cul\u003e\n\u003cli\u003e例: \u003ccode\u003eプロダクト1/\u003c/code\u003e 以下での新規作成は、デフォルトカテゴリが \u003ccode\u003eプロダクト1/YYYY/MM/DD/\u003c/code\u003e になる\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003eフレームワーク的に、何らかのパターン以外のカテゴリを作れないようにする？\u003c/li\u003e\n\u003cli\u003e第一階層カテゴリ以下で、そのようなパターンを数種類から選べるようにする？\u003c/li\u003e\n\u003c/ul\u003e\n\n\n\u003cp\u003eどれも難しい話ですかね...？\u003c/p\u003e\n\n\u003cp\u003e現在社内で抱えている課題として「記事整理にハードルがある」は間違いなくあると思います。\u003c/p\u003e\n\n\u003cul\u003e\n\u003cli\u003eたくさんの記事を移動すると、\u003ccode\u003e/posts\u003c/code\u003e がその情報で埋まる\u003csup id=\"fnref:4\"\u003e\u003ca href=\"#fn:4\" rel=\"footnote\"\u003e4\u003c/a\u003e\u003c/sup\u003e\u003c/li\u003e\n\u003cli\u003e移動しただけなのに、記事に自分の小さなアイコンが付く\u003c/li\u003e\n\u003cli\u003eそもそも記事を 1 つ 1 つ移動するのが大変\u003c/li\u003e\n\u003cli\u003eタイトルに入れてしまった日付をカテゴリにして...とかまですると、API を使わざるを得ない\u003c/li\u003e\n\u003c/ul\u003e\n\n\n\u003cp\u003e出来れば Windows のエクスプローラのようなカジュアルさで、且つ履歴が残るとうれしいです。\u003c/p\u003e\n\n\u003cp\u003eあと、要望したことはありますが、現在の「カテゴリ以下の記事全て」に加えて、「カテゴリ直下の記事」「アーカイブした記事」を切り替えるような機能が欲しいです。\u003c/p\u003e\n\n\u003cp\u003eイメージとしては、GitHub の UI に「カテゴリ直下の記事」を加えたものです。\u003c/p\u003e\n\n\u003cp\u003e\u003cfigure class=\"figure-image figure-image-fotolife\" title=\"In, On, Archived を切り替えられるイメージ\"\u003e\u003cspan itemscope itemtype=\"http://schema.org/Photograph\"\u003e\u003cimg src=\"https://cdn-ak.f.st-hatena.com/images/fotolife/m/masutaka26/20210131/20210131231704.png\" alt=\"f:id:masutaka26:20210131231704p:plain\" title=\"\" class=\"hatena-fotolife\" itemprop=\"image\"\u003e\u003c/span\u003e\u003cfigcaption\u003eIn, On, Archived を切り替えられるイメージ\u003c/figcaption\u003e\u003c/figure\u003e\u003c/p\u003e\n\n\u003cp\u003e「カテゴリ直下の記事」は \u003ccode\u003eon:カテゴリ\u003c/code\u003e で検索できますが、知っているユーザーはごく僅かです。\u003c/p\u003e\n\n\u003cp\u003eアーカイブの認知も怪しくて、古い記事が残る要因かもしれません。一部カテゴリではこんな工夫をしています。\u003c/p\u003e\n\n\u003cp\u003e\u003cfigure class=\"figure-image figure-image-fotolife\" title=\"アーカイブという手段を認知させている例\"\u003e\u003cspan itemscope itemtype=\"http://schema.org/Photograph\"\u003e\u003cimg src=\"https://cdn-ak.f.st-hatena.com/images/fotolife/m/masutaka26/20210131/20210131232059.png\" alt=\"f:id:masutaka26:20210131232059p:plain\" title=\"\" class=\"hatena-fotolife\" itemprop=\"image\"\u003e\u003c/span\u003e\u003cfigcaption\u003eアーカイブという手段を認知させている例\u003c/figcaption\u003e\u003c/figure\u003e\u003c/p\u003e\n\n\u003cp\u003e難しいと思いますが、情報整理のスキルがそれほど高くなくても使える UI 設計をお願いしたいところです。🙏\u003c/p\u003e\n\n\u003cp\u003eもし、もっと詳しく私にヒアリングしたいなどあれば、masutaka@feedforce.jp または \u003ca href=\"https://twitter.com/masutaka\"\u003e@masutaka\u003c/a\u003e の DM までお知らせ下さい。\u003c/p\u003e\n\n\u003ch2 id=\"まとめ\"\u003eまとめ\u003c/h2\u003e\n\n\u003cp\u003e私から見える、フィードフォースで抱えている情報整理の課題をまとめ、チームのスピードを上げるための整理方法を提案しました。\u003c/p\u003e\n\n\u003cp\u003eただ、それは「私が考える esa 原理主義」に振り切っているため、チームで採用するのは難しいと思います。\u003c/p\u003e\n\n\u003cp\u003eカテゴリがデフォルト Flow 型になるなど、情報整理を頑張らず済む使い勝手になると、とてもうれしいです。\u003c/p\u003e\n\n\u003ch2 id=\"esa-公式アカウントからのアドバイス\"\u003eesa 公式アカウントからのアドバイス\u003c/h2\u003e\n\n\u003cblockquote\u003e\u003cul\u003e\n\u003cli\u003e新規作成時にデフォルトカテゴリが Flow 型になるような、型を設定できると良い？\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/blockquote\u003e\n\n\u003cp\u003eこちらのアドバイスを頂いたので早速試しました。良さそうです！\u003c/p\u003e\n\n\u003cp\u003e\u003cblockquote data-conversation=\"none\" class=\"twitter-tweet\" data-lang=\"ja\"\u003e\u003cp lang=\"ja\" dir=\"ltr\"\u003eあるカテゴリ配下で \u0026quot;Create a new post\u0026quot; ボタンで記事を新規作成するときに、カテゴリが一致するFlowのテンプレートがあれば、そのテンプレートが自動的にプリセットされるという機能があります。（続く→）\u003c/p\u003e\u0026mdash; esa_io (@esa_io) \u003ca href=\"https://twitter.com/esa_io/status/1356808249601712128?ref_src=twsrc%5Etfw\"\u003e2021年2月3日\u003c/a\u003e\u003c/blockquote\u003e \u003cscript async src=\"https://platform.twitter.com/widgets.js\" charset=\"utf-8\"\u003e\u003c/script\u003e \u003c/p\u003e\n\n\u003cp\u003e\u003cblockquote data-conversation=\"none\" class=\"twitter-tweet\" data-lang=\"ja\"\u003e\u003cp lang=\"ja\" dir=\"ltr\"\u003e例えば以下のテンプレートがあったとして\u003cbr\u003e\u003cbr\u003e- Templates/カテゴリ1/YYYY/MM/DD/テンプレートA\u003cbr\u003e- Templates/カテゴリ1/サブカテゴリ1/YYYY/MM/DD/テンプレートB\u003cbr\u003e\u003cbr\u003e「カテゴリ1」配下で記事作成→ テンプレートA \u003cbr\u003e「カテゴリ1/サブカテゴリ2」配下で記事作成 →テンプレートB \u003cbr\u003e\u003cbr\u003eがそれぞれ自動適用されます\u003c/p\u003e\u0026mdash; esa_io (@esa_io) \u003ca href=\"https://twitter.com/esa_io/status/1356808846379937795?ref_src=twsrc%5Etfw\"\u003e2021年2月3日\u003c/a\u003e\u003c/blockquote\u003e \u003cscript async src=\"https://platform.twitter.com/widgets.js\" charset=\"utf-8\"\u003e\u003c/script\u003e \u003c/p\u003e\n\n\u003cp\u003e後日アンサー記事も頂きました！「所感」にこの記事の感想が書いてあります。\n\u003ca href=\"https://docs.esa.io/posts/394\"\u003eProTip/2021/02/03/特定のカテゴリ配下の記事作成時に、テンプレートを適用する - docs.esa.io\u003c/a\u003e\u003c/p\u003e\n\n\u003ch2 id=\"コラム\"\u003eコラム\u003c/h2\u003e\n\n\u003cp\u003e自分の思いを書ききれないので、コラムに逃しました。(^^;\u003c/p\u003e\n\n\u003ch3 id=\"記事のカテゴリ整理を頑張らない理由\"\u003e記事のカテゴリ整理を頑張らない理由\u003c/h3\u003e\n\n\u003cp\u003eこんな理由からです。\u003c/p\u003e\n\n\u003col\u003e\n\u003cli\u003e歴史が証明している\u003c/li\u003e\n\u003cli\u003eesa の検索がそこそこ優秀\u003c/li\u003e\n\u003c/ol\u003e\n\n\n\u003cp\u003e今では信じられないかもしれませんが、1990 年代の Yahoo! JAPAN は、人間のスタッフがウェブサイトの情報を収集してカテゴリ分類して登録する、ディレクトリ型検索サービスでした\u003csup id=\"fnref:5\"\u003e\u003ca href=\"#fn:5\" rel=\"footnote\"\u003e5\u003c/a\u003e\u003c/sup\u003e。今はロボット型検索が使われているのは周知のとおりです。\u003c/p\u003e\n\n\u003cp\u003eそのため Stock 型の記事だけを作り続けるといずれ破綻することは、\u003ccode\u003e1\u003c/code\u003e 歴史が証明していると言えます（やや大げさ）。\u003c/p\u003e\n\n\u003cp\u003e\u003ccode\u003e2\u003c/code\u003e については、公式ドキュメント「\u003ca href=\"https://docs.esa.io/posts/104\"\u003e記事の検索方法\u003c/a\u003e」にある検索クエリで、それなりに検索できます（諸説あり）。「\u003ca href=\"https://docs.esa.io/posts/389\"\u003eキーワード検索しやすい記事にするコツ\u003c/a\u003e」も参考にすると良いでしょう。\u003c/p\u003e\n\n\u003ch3 id=\"Flow-カテゴリをどこまで許容するか\"\u003eFlow カテゴリをどこまで許容するか\u003c/h3\u003e\n\n\u003cp\u003eFlow カテゴリをどこまで許容するかは、悩ましいところです。\u003c/p\u003e\n\n\u003cp\u003e(a) 制約をつけずに自由に作ることを許容するか。\u003c/p\u003e\n\n\u003cul\u003e\n\u003cli\u003eプロダクト1\n\n\u003cul\u003e\n\u003cli\u003eセールス\n\n\u003cul\u003e\n\u003cli\u003e...\u003c/li\u003e\n\u003cli\u003eYYYY\n\n\u003cul\u003e\n\u003cli\u003eMM\n\n\u003cul\u003e\n\u003cli\u003eDD\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e開発\n\n\u003cul\u003e\n\u003cli\u003e○○機能\n\n\u003cul\u003e\n\u003cli\u003eYYYY\n\n\u003cul\u003e\n\u003cli\u003eMM\n\n\u003cul\u003e\n\u003cli\u003eDD\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003eYYYY\n\n\u003cul\u003e\n\u003cli\u003eMM\n\n\u003cul\u003e\n\u003cli\u003eDD\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003eYYYY\n\n\u003cul\u003e\n\u003cli\u003eMM\n\n\u003cul\u003e\n\u003cli\u003eDD\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\n\n\u003cp\u003e(b) 原理主義っぽく、１つの Flow カテゴリしか許容しないか。\u003c/p\u003e\n\n\u003cul\u003e\n\u003cli\u003eプロダクト1\n\n\u003cul\u003e\n\u003cli\u003eセールス\n\n\u003cul\u003e\n\u003cli\u003e...\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e開発\n\n\u003cul\u003e\n\u003cli\u003e...\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003eYYYY\n\n\u003cul\u003e\n\u003cli\u003eMM\n\n\u003cul\u003e\n\u003cli\u003eDD\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\n\n\u003cp\u003e(a) は職種横断的な情報共有を重視しないチームに合うと思います。中規模以上のチームです。\u003c/p\u003e\n\n\u003cp\u003e(b) は職種横断的な情報共有を重視するチームに合うと思います。小さなチームです。\u003c/p\u003e\n\n\u003cp\u003eはじめは (b) で作ってみて、やりづらくなってきたら (a) にすると良いでしょう。ただし、(a) の \u003ccode\u003eプロダクト1/開発/○○機能/YYYY/MM/DD/\u003c/code\u003e まで細かく Flow カテゴリを作るのは、把握が難しくなりそうですので、オススメはしません。\u003c/p\u003e\n\u003cdiv class=\"footnotes\"\u003e\n\u003chr/\u003e\n\u003col\u003e\n\u003cli id=\"fn:1\"\u003e\n\u003cp\u003e\u003ca href=\"https://workspace.google.co.jp/intl/ja/\"\u003eGoogle Workspace\u003c/a\u003e（旧称 G Suite）を契約しています。\u003ca href=\"#fnref:1\" rev=\"footnote\"\u003e\u0026#8617;\u003c/a\u003e\u003c/p\u003e\u003c/li\u003e\n\u003cli id=\"fn:2\"\u003e\n\u003cp\u003e現在のメンバー数は 90、最古の記事は 2014/4/3 です。\u003ca href=\"#fnref:2\" rev=\"footnote\"\u003e\u0026#8617;\u003c/a\u003e\u003c/p\u003e\u003c/li\u003e\n\u003cli id=\"fn:3\"\u003e\n\u003cp\u003e過去に推奨したことあります。ｽﾏﾇｽﾏﾇ\u0026hellip;。\u003ca href=\"#fnref:3\" rev=\"footnote\"\u003e\u0026#8617;\u003c/a\u003e\u003c/p\u003e\u003c/li\u003e\n\u003cli id=\"fn:4\"\u003e\n\u003cp\u003e\u003ccode\u003eArchived/\u003c/code\u003e 以下への移動は更新日時が変わらず \u003ccode\u003e/posts\u003c/code\u003e に現れないので、\u003ca href=\"https://docs.esa.io/posts/207\"\u003eカテゴリ一括変更\u003c/a\u003eと組み合わせれば、一応回避はできます。\u003ca href=\"#fnref:4\" rev=\"footnote\"\u003e\u0026#8617;\u003c/a\u003e\u003c/p\u003e\u003c/li\u003e\n\u003cli id=\"fn:5\"\u003e\n\u003cp\u003e今回の件で調べたところ、その\u003ca href=\"https://jp.techcrunch.com/2017/06/29/yahoo-to-shut-down-directory-search/\"\u003e「Yahoo!カテゴリ」は2018年3月29日まで動いていた\u003c/a\u003eことを知りびっくりしました\u003ca href=\"#fnref:5\" rev=\"footnote\"\u003e\u0026#8617;\u003c/a\u003e\u003c/p\u003e\u003c/li\u003e\n\u003c/ol\u003e\n\u003c/div\u003e\n\n","contentSnippet":"こんにちは id:masutaka26 です。夜の散歩（意味深）に勤しむ毎日です。フィードフォースではドキュメント共有ツールには esa と Google ドキュメント1を、コミュニケーションツールには Slack を採用しています。情報共有はかなり活発で、2021/2/1 現在の esa 記事数は 81,324 です2。現在のカテゴリ構成と課題チームのスピードを上げるための大原則チームのスピードを上げるための情報整理1. Flow 型と Stock 型の記事を理解する2. 基本は Flow 型の記事にする3. 議事録カテゴリは出来るだけ作らない4. Slack に流れていく情報も Flow 型の記事にする5. 使い続けられる情報を Stock 記事として引き上げる6. 整理を頑張らないことで整理の難易度が低くなった7. esa を全ての情報の起点にするそれをチームでやるのは難しすぎない？esa は難しいesa の本当の正体esa への要望まとめesa 公式アカウントからのアドバイスコラム記事のカテゴリ整理を頑張らない理由Flow カテゴリをどこまで許容するか現在のカテゴリ構成と課題トップカテゴリは厳密にルール化されていて、これらの種類以外のカテゴリが増えることはありません。日報/2021/02/01 (月)/masutaka といった記事が置かれる曜日がないなど、型から外れた日報は小人さんによって速やかに修正される。Bot 並に早いwプロダクト1/実際には Feedmatic などのプロダクト名が入る︙プロダクトN/プロジェクト/期間が決まっている系のプロジェクトカテゴリが並ぶチーム/人事や情報セキュリティなどのチーム系カテゴリが並ぶコミュニティ/技術系や読書会などのコミュニティ系カテゴリが並ぶノウハウ/各種ツールのノウハウ系カテゴリが並ぶFeedforce Inc./会社全体に関係する記事が置かれるUsers/Templates/Archived/例えば「プロダクト1」の下は、議事録系を除き基本的に Stock 型の記事になっており、「マニュアル」カテゴリの下にはさらに 15 の子カテゴリが生えているとします。プロダクト1/議事録/開発/コンサルティング/マーケティング/インシデント/ナレッジ/マニュアル/子カテゴリ数は 15︙その他/※ 複数のプロダクトから作った架空カテゴリです。ここまでならよく整理されているように見えますが、実際は古くてメンテナンスされていない記事が多く、言ってしまえばノイズが多い状況です。情報共有されればされるほど、ノイズが増えてしまう悪循環です。Slack に目を向けると、こちらもオープンではありますが、時にブログ記事並みのメッセージが投稿されることがあります。未読メッセージを読み進めると手が止まり、読み切るのが難しいと想像されます。ブログ記事並みのメッセージ例。これで半分です。細切れの情報も多く川の流れのようで、断片化した情報をつなぎ合わせるのは難しいと思います。世の中には情報共有が足りないことに悩む組織は多いと思いますが、活発になったとしても、適切に整理されていなければその量に溺れてしまいます。一方で、最近のコロナ禍もあって 10 年前と今とでは変化のスピードは上がっています。変化に強いチーム設計、つまりは変化に強い情報整理設計が重要です。これをやらなければ、チームのスピードは徐々に下がっていくでしょう。チームのスピードを上げるための大原則私が社内で様々なプロダクトを渡り歩いた経験上、チームのスピードを上げるためには以下の 2 点が重要だと感じています。ノイズを減らす情報を一ヶ所に集めるマネージャーはこれらの阻害要因を減らす仕掛けを作る必要があります。ただ、そういったことが得意な方ばかりではありません。むしろ情報量が一番多く、一番困っているのは彼らかもしれません。マネージャーに余裕がなければ、それがボトルネックとなりチームのスピードが下がります。これからその対策を考察していきます。チームのスピードを上げるための情報整理はじめに書いておくと、出来るだけ整理を頑張らないことが重要です。1. Flow 型と Stock 型の記事を理解するまずは公式ドキュメント「記事のストック・フローの分類と検索」を読んで、Flow 型と Stock 型の記事の存在を知り、理解します。2. 基本は Flow 型の記事にする全て Flow 型にするくらいの気持ちで記事を作ります。記事が多くなっても視界に入りづらいし、整理する必要もないためです。Flow 型記事の例書き捨ての記事であれば プロダクト1/2021/02/01/タイトル、今月中は更新する記事であれば プロダクト1/2021/02/タイトル で良いと思います。ただ、さすがに今年中更新する記事は Stock 型の記事にしたほうが良いと思います。3. 議事録カテゴリは出来るだけ作らないプロダクト1/議事録/ のような議事録カテゴリはできるだけ作らず、プロダクト1/2021/02/01/〇〇会議 議事録 のようなカテゴリとタイトルにします。議事録のような使い続けない記事を視界に入れるのは、どちらかと言えばノイズだからです。社内で以下のような階層をよく見かけますが3、一回限りの会議の置き場所に悩んでしまいます。プロダクト1/議事録/〇〇会議/YYYY/MM/DD/〇〇会議プランニング/YYYY/MM/DD/プランニングプロダクト1/議事録/20210201 〇×会議 議事録 のような自由なパターンも現れたりして、さらに悩ましくなります。過去の議事録をたどる目的でカテゴリを分けたいのであれば、記事の最初に「議事録一覧はこちら」みたいな検索リンクがあれば十分でしょう。「議事録一覧はこちら」の一例それでも作りたい場合は プロダクト1/議事録/〇〇会議/2021/02/01/〇〇会議 議事録 のような記事名にして、後から プロダクト1/2021/02/01/〇〇会議 議事録 に一括変換して視界から消せるように、設計するのが良いと思います。一括変換の仕方は公式ドキュメント「記事のカテゴリを一括変更」が分かりやすいです。4. Slack に流れていく情報も Flow 型の記事にするSlack にはブログ記事並みのメッセージが投稿されることがあります。そうなりそうになったら迷わず プロダクト1/2021/02/01/○○のお願い といった Flow 型の記事を作り、その URL を Slack で共有します。他の場面で引用したい時は意外とあるものですし、内容をあとで更新したいこともあります。Slack だと特にあとからの更新には不向きです。何より当該記事をブラウザで開き、残りの Slack 未読メッセージをスイスイと読むことが出来ます。Slack に投稿されてしまうと、その長いメッセージを読みながら、他の channel に移動するのは億劫です。5. 使い続けられる情報を Stock 記事として引き上げる結局のところ、ほとんどの情報は使い続けることはありません。具体的すぎるからです。そのような具体的な情報は寝かすことで、抽象度の高い情報、例えばカテゴリ名を炙り出せることがあります。良いカテゴリ名が思いつかない時は、まだ抽象度が高くないと思うので、引き上げないほうが良いでしょう。いくつかの Flow 記事をしばらく寝かしたら、あとから汎用的な抽象度の高い Stock 記事のアイディアが湧くこともあります。6. 整理を頑張らないことで整理の難易度が低くなったここまででほとんどの記事は Flow 型の記事のはずです。冒頭に述べたノイズになるような記事は少なく、情報に溺れる確率は低いと思います。使い回しが効かない具体的な情報を Flow 型の記事に追いやることで、整理の難易度を低くすることが出来ました。7. esa を全ての情報の起点にするでは、Google ドキュメントも同じようにしましょう！とは思っていません。esa を全ての情報の起点にする勢いで、適宜 Google ドキュメントにリンクを張ると良いでしょう。Google ドキュメントのフォルダ整理は出来るだけやらないほうが良いです。時間がいくらあっても足りません。Google Drive はただの情報プールです。Google Drive 内検索も優秀です。それをチームでやるのは難しすぎない？そう思った方、正しい感覚です。「チームのスピードを上げるための情報整理」は「私が考える esa 原理主義」に振り切って書きました。情報整理のスキルに関して少数精鋭チームでないと、運用するのは難しいと思います。現在私は開発者 1 人、ビジネスメンバー 2 人のチームに所属しています。私主導でカテゴリを決めているので、これまで書いた方法で整理し、うまくいっている実感があります。Flow 型の記事に対して、Stock 型の記事を少なく保てている。そういえば初期は Flow 型の記事しか作りませんでした。esa は難しいフィードフォースでは 1 年半ほど前まで Qiita:Team を使っていました。Qiita:Team はほぼ Flow 型の記事しか書けないため、これまで話した問題は出てきませんでした。いや「表面化しなかった」が正確でしょう。esa は Stock 型の記事も書けます。ブログと wiki が合体したようなツールなので、難しくないわけがありません。wiki を書くためには抽象的思考が必要です。私の観測範囲では、半分以上の方は具体的思考に寄り過ぎているため、得意ではないという実感です。意識したことがないかもしれません。esa の本当の正体正直言って現在の esa は「情報整理のスキルに関して少数精鋭チーム」でないと、乗りこなすのは難しいと思います。これに気づいた時、Ruby という言語に似ていると思いました。Ruby は esa で採用されているプログラミング言語です。初心者はにこやかに迎えてくれますが、本番環境で使い続けるためには、コードで表現されていない振る舞いを読み解く必要があるなど、実は少数精鋭チーム向けの言語です。esa LLC は少数精鋭チームのようなので、良くも悪くも「コンウェイの法則」が働いて、そのようなサービスになったのだと勝手に想像します。esa への要望社員数 100 人オーバーが見えてくると、型（制約）の必要性を感じます。新規作成時にデフォルトカテゴリが Flow 型になるような、型を設定できると良い？例: プロダクト1/ 以下での新規作成は、デフォルトカテゴリが プロダクト1/YYYY/MM/DD/ になるフレームワーク的に、何らかのパターン以外のカテゴリを作れないようにする？第一階層カテゴリ以下で、そのようなパターンを数種類から選べるようにする？どれも難しい話ですかね...？現在社内で抱えている課題として「記事整理にハードルがある」は間違いなくあると思います。たくさんの記事を移動すると、/posts がその情報で埋まる4移動しただけなのに、記事に自分の小さなアイコンが付くそもそも記事を 1 つ 1 つ移動するのが大変タイトルに入れてしまった日付をカテゴリにして...とかまですると、API を使わざるを得ない出来れば Windows のエクスプローラのようなカジュアルさで、且つ履歴が残るとうれしいです。あと、要望したことはありますが、現在の「カテゴリ以下の記事全て」に加えて、「カテゴリ直下の記事」「アーカイブした記事」を切り替えるような機能が欲しいです。イメージとしては、GitHub の UI に「カテゴリ直下の記事」を加えたものです。In, On, Archived を切り替えられるイメージ「カテゴリ直下の記事」は on:カテゴリ で検索できますが、知っているユーザーはごく僅かです。アーカイブの認知も怪しくて、古い記事が残る要因かもしれません。一部カテゴリではこんな工夫をしています。アーカイブという手段を認知させている例難しいと思いますが、情報整理のスキルがそれほど高くなくても使える UI 設計をお願いしたいところです。🙏もし、もっと詳しく私にヒアリングしたいなどあれば、masutaka@feedforce.jp または @masutaka の DM までお知らせ下さい。まとめ私から見える、フィードフォースで抱えている情報整理の課題をまとめ、チームのスピードを上げるための整理方法を提案しました。ただ、それは「私が考える esa 原理主義」に振り切っているため、チームで採用するのは難しいと思います。カテゴリがデフォルト Flow 型になるなど、情報整理を頑張らず済む使い勝手になると、とてもうれしいです。esa 公式アカウントからのアドバイス新規作成時にデフォルトカテゴリが Flow 型になるような、型を設定できると良い？こちらのアドバイスを頂いたので早速試しました。良さそうです！あるカテゴリ配下で \"Create a new post\" ボタンで記事を新規作成するときに、カテゴリが一致するFlowのテンプレートがあれば、そのテンプレートが自動的にプリセットされるという機能があります。（続く→）— esa_io (@esa_io) 2021年2月3日  例えば以下のテンプレートがあったとして- Templates/カテゴリ1/YYYY/MM/DD/テンプレートA- Templates/カテゴリ1/サブカテゴリ1/YYYY/MM/DD/テンプレートB「カテゴリ1」配下で記事作成→ テンプレートA 「カテゴリ1/サブカテゴリ2」配下で記事作成 →テンプレートB がそれぞれ自動適用されます— esa_io (@esa_io) 2021年2月3日  後日アンサー記事も頂きました！「所感」にこの記事の感想が書いてあります。ProTip/2021/02/03/特定のカテゴリ配下の記事作成時に、テンプレートを適用する - docs.esa.ioコラム自分の思いを書ききれないので、コラムに逃しました。(^^;記事のカテゴリ整理を頑張らない理由こんな理由からです。歴史が証明しているesa の検索がそこそこ優秀今では信じられないかもしれませんが、1990 年代の Yahoo! JAPAN は、人間のスタッフがウェブサイトの情報を収集してカテゴリ分類して登録する、ディレクトリ型検索サービスでした5。今はロボット型検索が使われているのは周知のとおりです。そのため Stock 型の記事だけを作り続けるといずれ破綻することは、1 歴史が証明していると言えます（やや大げさ）。2 については、公式ドキュメント「記事の検索方法」にある検索クエリで、それなりに検索できます（諸説あり）。「キーワード検索しやすい記事にするコツ」も参考にすると良いでしょう。Flow カテゴリをどこまで許容するかFlow カテゴリをどこまで許容するかは、悩ましいところです。(a) 制約をつけずに自由に作ることを許容するか。プロダクト1セールス...YYYYMMDD開発○○機能YYYYMMDDYYYYMMDDYYYYMMDD(b) 原理主義っぽく、１つの Flow カテゴリしか許容しないか。プロダクト1セールス...開発...YYYYMMDD(a) は職種横断的な情報共有を重視しないチームに合うと思います。中規模以上のチームです。(b) は職種横断的な情報共有を重視するチームに合うと思います。小さなチームです。はじめは (b) で作ってみて、やりづらくなってきたら (a) にすると良いでしょう。ただし、(a) の プロダクト1/開発/○○機能/YYYY/MM/DD/ まで細かく Flow カテゴリを作るのは、把握が難しくなりそうですので、オススメはしません。Google Workspace（旧称 G Suite）を契約しています。↩現在のメンバー数は 90、最古の記事は 2014/4/3 です。↩過去に推奨したことあります。ｽﾏﾇｽﾏﾇ…。↩Archived/ 以下への移動は更新日時が変わらず /posts に現れないので、カテゴリ一括変更と組み合わせれば、一応回避はできます。↩今回の件で調べたところ、その「Yahoo!カテゴリ」は2018年3月29日まで動いていたことを知りびっくりしました↩","link":"https://developer.feedforce.jp/entry/2021/02/03/110000","isoDate":"2021-02-03T02:00:00.000Z","dateMiliSeconds":1612317600000,"imageUrl":"https://cdn-ak.f.st-hatena.com/images/fotolife/m/masutaka26/20210202/20210202122517.png","authorName":"masutaka"},{"title":"pushover orb のメンテナーになった","content":"個人で Slack workspace を作るのはオーバースペックだという宗教的な理由から、各種通知は Pushover という通知サービスを利用しています。[2015-03-08-1] に紹介記事を書いてましたね。今は亡き im.kayac.com を便利にしたやつと言えば、分かる人には分かるでしょうか？長らく CI の失敗通知は CircleCI のコンソールを見て久しぶりに気づくという、ダメな運用をしていました。去年の 9 /13 に重い腰を上げて、CI が失敗したら Pushover に通知させようとしました。その時作った PR がこちらです。https://github.com/pbrisbin/pushover-orb/pull/1レビューして頂いたは良いが、放置してしまい、修正 commit をしたのが先日の 1/18。無事マージされましたが、作者様は GitHub Actions に移行しており、メンテナーにならないかとお誘いを受けました。https://github.com/pbrisbin/pushover-orb/pull/1#issuecomment-762920348ちょうど tfupdate orb で CircleCI Orb の勘所は掴んでいたので、喜んで承諾。リリース周りを整えたリポジトリがこちらです。メンテナーも変わったことだし、メジャーバージョンアップしつつ v2.0.0 をリリースしました。https://circleci.com/developer/orbs/orb/masutaka/pushover?version=2.0.0https://github.com/masutaka/pushover-orb/releases/tag/v2.0.0よろしければご利用くださいませ。","contentSnippet":"個人で Slack workspace を作るのはオーバースペックだという宗教的な理由から、各種通知は Pushover という通知サービスを利用しています。[2015-03-08-1] に紹介記事を書いてましたね。今は亡き im.kayac.com を便利にしたやつと言えば、分かる人には分かるでしょうか？長らく CI の失敗通知は CircleCI のコンソールを見て久しぶりに気づくという、ダメな運用をしていました。去年の 9 /13 に重い腰を上げて、CI が失敗したら Pushover に通知させようとしました。その時作った PR がこちらです。https://github.com/pbrisbin/pushover-orb/pull/1レビューして頂いたは良いが、放置してしまい、修正 commit をしたのが先日の 1/18。無事マージされましたが、作者様は GitHub Actions に移行しており、メンテナーにならないかとお誘いを受けました。https://github.com/pbrisbin/pushover-orb/pull/1#issuecomment-762920348ちょうど tfupdate orb で CircleCI Orb の勘所は掴んでいたので、喜んで承諾。リリース周りを整えたリポジトリがこちらです。メンテナーも変わったことだし、メジャーバージョンアップしつつ v2.0.0 をリリースしました。https://circleci.com/developer/orbs/orb/masutaka/pushover?version=2.0.0https://github.com/masutaka/pushover-orb/releases/tag/v2.0.0よろしければご利用くださいませ。","link":"https://masutaka.net/chalow/2021-01-22-1.html","isoDate":"2021-01-22T14:59:59.000Z","dateMiliSeconds":1611327599000,"authorName":"masutaka"},{"title":"tfupdate orb の circleci/orb-tools を v8.27.5 から v10.0.3 にアップデートした","content":"[2019-12-20-1] で circleci/orb-tools を解説しました。リリースフローがよく出来ていたので、感動した記憶があります。しかし、記事を書いた時にはすでに v9.0.0 がリリースされており、それはそれは大きな BREAKING CHANGES でした...。やる気が出なかったので、tfupdate orb で使っているバージョンはずっと据え置いていましたが、今日急にやる気になったので、最新の v10.0.3 にアップデートしました。当該 PR はこちらです。.circleci/config.yml がかなり短くなりました。https://github.com/masutaka/circleci-tfupdate-orb/pull/2公式ドキュメントや circleci/orb-tools のドキュメントはありますが、よく分からないのと、今までの経緯からあまり信用できないので、v10.0.3 のコードリーディングをして理解しました。circleci/orb-tools 自身の .circleci/config.yml も読みました。結果的にここまで複雑にする必要はなかったです。https://github.com/CircleCI-Public/orb-tools-orb/blob/v10.0.3/.circleci/config.yml今までは master ブランチに commit するたびに orb のバージョンが自動的に上がっていきました。セマンティックバージョンの制御はできません。現在はその commit message によって、orb バージョンを半自動的に上げられるようになりました。セマンティックバージョンを制御可能です。v8.27.5 で振る舞いmaster ブランチに commit が追加された時、src/commands または src/jobs 以下が変更されていれば minor version が、それ以外の変更では patch version が自動的に上がりました。major version はサポートされていませんでした。何も考えずに済んだので楽ではありましたが、制御できないのは不満があったのかもしれません。v10.0.3 での振る舞いmaster ブランチに commit が追加された時、当該 commit message に以下の文字列が含まれていれば（例）、その指定に従ってバージョンが上がります。[semver:major][semver:minor][semver:patch]必須パラメータ publish-version-tag が true の時は git tag も push してくれます。含まれている文字列が [semver:skip] の時はバージョンは上がりません。どれも含まれていない場合、必須パラメータ fail-if-semver-not-indicated によって、CI の成功/失敗を制御できます。私は false にしましたが、厳格にしたい時は true にすると良いと思います。覚えている自信はありませんが、この記事が未来の自分への助けになることでしょう。他に、必須パラメータ add-pr-comment を true にすると、紐づく PR にコメントを追加してくれるようです（例）。私は false です。P.S.公式ドキュメントや circleci/orb-tools 自身の .circleci/config.yml では orb-tools/trigger-integration-tests-workflow job を使って、新しい workflow をトリガーしていますが、その必要は感じなかったので、1 つの workflow の中で lint や publish を全部やりました。公式の例では .circleci/config.yml の中からは pipeline.parameters.run-integration-tests が true になるタイミングの理解が非常に分かりづらくて、無駄に複雑な workflow を書いてしまうと思いました。","contentSnippet":"[2019-12-20-1] で circleci/orb-tools を解説しました。リリースフローがよく出来ていたので、感動した記憶があります。しかし、記事を書いた時にはすでに v9.0.0 がリリースされており、それはそれは大きな BREAKING CHANGES でした...。やる気が出なかったので、tfupdate orb で使っているバージョンはずっと据え置いていましたが、今日急にやる気になったので、最新の v10.0.3 にアップデートしました。当該 PR はこちらです。.circleci/config.yml がかなり短くなりました。https://github.com/masutaka/circleci-tfupdate-orb/pull/2公式ドキュメントや circleci/orb-tools のドキュメントはありますが、よく分からないのと、今までの経緯からあまり信用できないので、v10.0.3 のコードリーディングをして理解しました。circleci/orb-tools 自身の .circleci/config.yml も読みました。結果的にここまで複雑にする必要はなかったです。https://github.com/CircleCI-Public/orb-tools-orb/blob/v10.0.3/.circleci/config.yml今までは master ブランチに commit するたびに orb のバージョンが自動的に上がっていきました。セマンティックバージョンの制御はできません。現在はその commit message によって、orb バージョンを半自動的に上げられるようになりました。セマンティックバージョンを制御可能です。v8.27.5 で振る舞いmaster ブランチに commit が追加された時、src/commands または src/jobs 以下が変更されていれば minor version が、それ以外の変更では patch version が自動的に上がりました。major version はサポートされていませんでした。何も考えずに済んだので楽ではありましたが、制御できないのは不満があったのかもしれません。v10.0.3 での振る舞いmaster ブランチに commit が追加された時、当該 commit message に以下の文字列が含まれていれば（例）、その指定に従ってバージョンが上がります。[semver:major][semver:minor][semver:patch]必須パラメータ publish-version-tag が true の時は git tag も push してくれます。含まれている文字列が [semver:skip] の時はバージョンは上がりません。どれも含まれていない場合、必須パラメータ fail-if-semver-not-indicated によって、CI の成功/失敗を制御できます。私は false にしましたが、厳格にしたい時は true にすると良いと思います。覚えている自信はありませんが、この記事が未来の自分への助けになることでしょう。他に、必須パラメータ add-pr-comment を true にすると、紐づく PR にコメントを追加してくれるようです（例）。私は false です。P.S.公式ドキュメントや circleci/orb-tools 自身の .circleci/config.yml では orb-tools/trigger-integration-tests-workflow job を使って、新しい workflow をトリガーしていますが、その必要は感じなかったので、1 つの workflow の中で lint や publish を全部やりました。公式の例では .circleci/config.yml の中からは pipeline.parameters.run-integration-tests が true になるタイミングの理解が非常に分かりづらくて、無駄に複雑な workflow を書いてしまうと思いました。","link":"https://masutaka.net/chalow/2021-01-16-1.html","isoDate":"2021-01-16T14:59:59.000Z","dateMiliSeconds":1610809199000,"authorName":"masutaka"},{"title":"思考を寝かせて、優先順位を決めるための「やるかもしれないリスト」がとてもうまくワークしている","content":"[2020-12-03-1] では優先度は優先順位の下位レイヤーであり、優先順位を決めることが大事という話をしました。では優先順位はどう決めると良いでしょうか？私はここ 10 年くらいの試行錯誤の末に「やるかもしれないリスト」という方法にたどり着きました。現在はこのような esa 上の 1 記事として存在しています。[画像]私が「やるかもしれないリスト」でやっていることはだいたい 3 つです。・頭の中を 1 つのテキストファイルにリストとして書き出し続ける・優先順位を並べ替え続ける・敢えて時間を置くことで、思考を寝かせ、よく練られた考えにし続ける2020-06-09 に作ってから 203 回更新しています。1 日 1 回以上更新している計算になります。アイディアを思いつくたびに追加したり順番を入れ替えたりしているので、このような更新回数になりました。こういうことはだいたい、仕事以外の時間、例えば散歩やシャワーの時に思いつきますよね。以下の 4 つのポリシーで「やるかもしれないリスト」を更新し続けています。1. 1 つのテキストファイルにするこの段階では、GitHub Issue や Trello、Asana などの便利なタスク管理ツールは使いません。そもそも「やるかもしれないリスト」はタスクに落とし込む前の、もっと曖昧なものを扱う方法です。各種タスク管理ツールは、具現化し、やることが決まったタスクを扱うツールだと思うので、その前の段階で使うのには適さないと考えています。思いついたベースでタスク管理ツールに追加していくと、重要度が低いものや、まだ考えが練られていないタスクが作られがちです。一度タスクにしてしまうと、思考を寝かせて考えを練るのは難しい気がしますし、順番もつけづらく、削除もやりづらいと思います。「やるかもしれないリスト」に一旦溜めることで、それらを避けることが出来ます。2. 番号付きリストにする先に話したとおり優先順位を決めることが目的の 1 つなので、その意図を反映した番号付きリスト（ordered list）にしています。ただのリスト（unordered list）にはしていません。さらに書くと、h1 や h2 などの構造化は、順番を付けづらくなるのでオススメはしません。前述の画像で構造化しているのは、私が現在一時的に複数プロジェクトに所属していたり、会社全体に関わることを多少やっているからです。繰り返しますが、順番を付けづらくなるのでオススメはしません。3. 説明はできるだけ簡素にする以下は実際のリストを抜粋したものです。1. xxx view の primary_key に媒体も加える [:slack:](URL) * Yahoo! JAPAN と Yahoo! が混在しているので、力技で直す必要がある1. primary_key のテストから始めてみる * primary_key が null でないテストはしたほうが良さそう1. Database Performance で 10 秒以上かかるクエリを減らす [:github:](Issue URL) * :bulb: 「ここから探索」して、Query Link を加えれば遅いクエリにたどり着ける各リストは説明を 1~2 行程度に留められる大きさにしています。大きすぎると、思い出したり順番を入れ替えるのが面倒になるので。あと、関連するリンクがあればそれも添えます。未来の自分への助けになります。とは言え、情報量が多くなることもあるため、その時は諦めて GitHub の Issue を作って、リストにリンクを添えます。4. バッサリ削除する思いつきで追記しているので、必要なくなることはあります。そのような時はバッサリ削除です。「やるかもしれないリスト」に溜め、時間を経過させることで、思考を寝かせ、考えを練ることを期待しているので、特に問題ではありません。考えを練ったことで、余計なことをやらずに済んでいます。それもあって「やるかもしれないリスト」という名前にしています。「やることリスト」ではないし「やりたいことリスト」でもないです。ついでに書くと、終わった作業もバッサリ削除して忘れます。markdown の checkbox などで終わったことを管理しません。以上のようなポリシーで「やるかもしれないリスト」を更新し続けると、自然と優先順位の高いものが上がってきます。次何やろうかなーと思った時は、上の方にあるものを GitHub の Issue にします。こうすれば、自然と優先順位を決めることができ、今必要なことに集中できます。考えが練られていないタスクが、タスク管理ツールに作られる確率は減ると思います。常に考え続けている状態なので、次の Q (Quarter) の計画はすぐ立てられると思いますし、ここ数年「やることが何もない」ことも起きていません。ここまでの考え方は『思考の整理学』という本から大いに影響を受けました。多少回りくどくて冗長な本だったと記憶していますが、「考えを寝かせる」この一点だけが自分に突き刺さりました。最初に書いた、散歩やシャワーの時に良いアイディアが浮かぶことが多いのは、まさに考えを寝かせているためだと思います。優先順位は [2020-12-03-1] で書いたように、期日や優先度などで決める必要がありますが、「やるかもしれないリスト」で考えを寝かせることで、いい感じに優先順位が決まると体感できています。自分の脳に整理をお任せしているような気分です。ここ数年「タスクを全部管理するなんて出来ないよなあ」ともやもやしていました。理由は簡単で、タスクに落とし込む前のものまで管理しようとしていたからです。よく練られたタスクであれば、数も少なく、フワッとしていることはないと思うので、管理（というか把握かな）出来そうです。「やるかもしれないリスト」の欠点欠点があるとすれば、チームへの展開が難しいことだと思います。メンバー 1 人 1 人が常に「考えを練って」いれば理想的ですが、現実的には不可能でしょう。ただ、チームリーダー的な人は、今回のような方法で「常に考え、思考を寝かせる」と良いと思いますし、そうしないと良くない状況に陥りそうです。※ 私の仕事は現在、開発者 1 人プロジェクトということもあるのか、とてもうまくワークしています。１つの「やるかもしれないリスト」を複数人で使うのもオススメしません。複数人だと思考の摺り合わせに時間がかかるからです。「やるかもしれないリスト」は常にアップデートし続けるものなので、常にお互いの考えが合っている必要がありますが、現実的でないと思います。まとめ自分の中でとてもうまくワークしている「やるかもしれないリスト」を紹介しました。「やるかもしれないリスト」を使って考えを寝かせることで、優先順位をいい感じに決められ、よく練られたタスクに集中できています。追記(2021-02-02):複数人で使うことをオススメしないことを追記しました。","contentSnippet":"[2020-12-03-1] では優先度は優先順位の下位レイヤーであり、優先順位を決めることが大事という話をしました。では優先順位はどう決めると良いでしょうか？私はここ 10 年くらいの試行錯誤の末に「やるかもしれないリスト」という方法にたどり着きました。現在はこのような esa 上の 1 記事として存在しています。[画像]私が「やるかもしれないリスト」でやっていることはだいたい 3 つです。・頭の中を 1 つのテキストファイルにリストとして書き出し続ける・優先順位を並べ替え続ける・敢えて時間を置くことで、思考を寝かせ、よく練られた考えにし続ける2020-06-09 に作ってから 203 回更新しています。1 日 1 回以上更新している計算になります。アイディアを思いつくたびに追加したり順番を入れ替えたりしているので、このような更新回数になりました。こういうことはだいたい、仕事以外の時間、例えば散歩やシャワーの時に思いつきますよね。以下の 4 つのポリシーで「やるかもしれないリスト」を更新し続けています。1. 1 つのテキストファイルにするこの段階では、GitHub Issue や Trello、Asana などの便利なタスク管理ツールは使いません。そもそも「やるかもしれないリスト」はタスクに落とし込む前の、もっと曖昧なものを扱う方法です。各種タスク管理ツールは、具現化し、やることが決まったタスクを扱うツールだと思うので、その前の段階で使うのには適さないと考えています。思いついたベースでタスク管理ツールに追加していくと、重要度が低いものや、まだ考えが練られていないタスクが作られがちです。一度タスクにしてしまうと、思考を寝かせて考えを練るのは難しい気がしますし、順番もつけづらく、削除もやりづらいと思います。「やるかもしれないリスト」に一旦溜めることで、それらを避けることが出来ます。2. 番号付きリストにする先に話したとおり優先順位を決めることが目的の 1 つなので、その意図を反映した番号付きリスト（ordered list）にしています。ただのリスト（unordered list）にはしていません。さらに書くと、h1 や h2 などの構造化は、順番を付けづらくなるのでオススメはしません。前述の画像で構造化しているのは、私が現在一時的に複数プロジェクトに所属していたり、会社全体に関わることを多少やっているからです。繰り返しますが、順番を付けづらくなるのでオススメはしません。3. 説明はできるだけ簡素にする以下は実際のリストを抜粋したものです。1. xxx view の primary_key に媒体も加える [:slack:](URL) * Yahoo! JAPAN と Yahoo! が混在しているので、力技で直す必要がある1. primary_key のテストから始めてみる * primary_key が null でないテストはしたほうが良さそう1. Database Performance で 10 秒以上かかるクエリを減らす [:github:](Issue URL) * :bulb: 「ここから探索」して、Query Link を加えれば遅いクエリにたどり着ける各リストは説明を 1~2 行程度に留められる大きさにしています。大きすぎると、思い出したり順番を入れ替えるのが面倒になるので。あと、関連するリンクがあればそれも添えます。未来の自分への助けになります。とは言え、情報量が多くなることもあるため、その時は諦めて GitHub の Issue を作って、リストにリンクを添えます。4. バッサリ削除する思いつきで追記しているので、必要なくなることはあります。そのような時はバッサリ削除です。「やるかもしれないリスト」に溜め、時間を経過させることで、思考を寝かせ、考えを練ることを期待しているので、特に問題ではありません。考えを練ったことで、余計なことをやらずに済んでいます。それもあって「やるかもしれないリスト」という名前にしています。「やることリスト」ではないし「やりたいことリスト」でもないです。ついでに書くと、終わった作業もバッサリ削除して忘れます。markdown の checkbox などで終わったことを管理しません。以上のようなポリシーで「やるかもしれないリスト」を更新し続けると、自然と優先順位の高いものが上がってきます。次何やろうかなーと思った時は、上の方にあるものを GitHub の Issue にします。こうすれば、自然と優先順位を決めることができ、今必要なことに集中できます。考えが練られていないタスクが、タスク管理ツールに作られる確率は減ると思います。常に考え続けている状態なので、次の Q (Quarter) の計画はすぐ立てられると思いますし、ここ数年「やることが何もない」ことも起きていません。ここまでの考え方は『思考の整理学』という本から大いに影響を受けました。多少回りくどくて冗長な本だったと記憶していますが、「考えを寝かせる」この一点だけが自分に突き刺さりました。最初に書いた、散歩やシャワーの時に良いアイディアが浮かぶことが多いのは、まさに考えを寝かせているためだと思います。優先順位は [2020-12-03-1] で書いたように、期日や優先度などで決める必要がありますが、「やるかもしれないリスト」で考えを寝かせることで、いい感じに優先順位が決まると体感できています。自分の脳に整理をお任せしているような気分です。ここ数年「タスクを全部管理するなんて出来ないよなあ」ともやもやしていました。理由は簡単で、タスクに落とし込む前のものまで管理しようとしていたからです。よく練られたタスクであれば、数も少なく、フワッとしていることはないと思うので、管理（というか把握かな）出来そうです。「やるかもしれないリスト」の欠点欠点があるとすれば、チームへの展開が難しいことだと思います。メンバー 1 人 1 人が常に「考えを練って」いれば理想的ですが、現実的には不可能でしょう。ただ、チームリーダー的な人は、今回のような方法で「常に考え、思考を寝かせる」と良いと思いますし、そうしないと良くない状況に陥りそうです。※ 私の仕事は現在、開発者 1 人プロジェクトということもあるのか、とてもうまくワークしています。１つの「やるかもしれないリスト」を複数人で使うのもオススメしません。複数人だと思考の摺り合わせに時間がかかるからです。「やるかもしれないリスト」は常にアップデートし続けるものなので、常にお互いの考えが合っている必要がありますが、現実的でないと思います。まとめ自分の中でとてもうまくワークしている「やるかもしれないリスト」を紹介しました。「やるかもしれないリスト」を使って考えを寝かせることで、優先順位をいい感じに決められ、よく練られたタスクに集中できています。追記(2021-02-02):複数人で使うことをオススメしないことを追記しました。","link":"https://masutaka.net/chalow/2021-01-05-1.html","isoDate":"2021-01-05T14:59:59.000Z","dateMiliSeconds":1609858799000,"authorName":"masutaka"},{"title":"『データマネジメントが30分でわかる本』を読んだ","content":"4 月からプログラマーからデータアーキテクト（データ整備人）にキャリアチェンジして（そうなの？）、Looker Advent Calendar 2020 のこの記事で知ったので読みました。￥500 と、大変お求めやすい価格になっています。データマネジメント知識体系 DMBOK（でぃんぼっく）の独自要約とケーススタディ集です。全 11 章それぞれで 30 秒、3 分、30 分コースを選ぶことが出来るので、ざっと読むのもじっくり読むのも自由な点が秀逸です。DMBOK 自体知らなかったので、取っ掛かりにはとても良い本でした。SLA はいずれ決めようかなーとか思ったりしました。","contentSnippet":"4 月からプログラマーからデータアーキテクト（データ整備人）にキャリアチェンジして（そうなの？）、Looker Advent Calendar 2020 のこの記事で知ったので読みました。￥500 と、大変お求めやすい価格になっています。データマネジメント知識体系 DMBOK（でぃんぼっく）の独自要約とケーススタディ集です。全 11 章それぞれで 30 秒、3 分、30 分コースを選ぶことが出来るので、ざっと読むのもじっくり読むのも自由な点が秀逸です。DMBOK 自体知らなかったので、取っ掛かりにはとても良い本でした。SLA はいずれ決めようかなーとか思ったりしました。","link":"https://masutaka.net/chalow/2020-12-20-1.html","isoDate":"2020-12-20T14:59:59.000Z","dateMiliSeconds":1608476399000,"authorName":"masutaka"},{"title":"優先度より優先順位のほうが偉い","content":"この記事は Feedforce Advent Calendar 2020 の 3 日目の記事です。昨日は kysnrm の「さよなら湯島」でした。私も今のところに住んで来年で 6 年になるので、8 回目の引っ越しを少し考えてますが、まだ状況が流動的なので悩ましい...。（ここから歌詞）優先度を付けると、高高高高高高とかになることあるよね。みんな優先度が高い。でも人間は一度に複数のタスクを処理することは出来ないよ。それに実際終わってみたら、終わった順番が付いているはずだよ。じゃあ 1, 2, 3... とタスクに順番を付けてみようか。つまりは優先順位ね。優先度より優先順位のほうが偉い。ダンダン優先度は優先順位を決める１つの要素でしかないよ。区別しようか。例えば他にもこんなのを考慮する必要があるよ。・期日・かかる時間・かかるお金・サービスへのインパクト（顧客増加、顧客満足度など）・他のタスクがどれだけ効率化するか？優先度より優先順位のほうが偉い。ダンダンダン先の例だと、優先度はだいたい「期日」と「サービスへのインパクト」でふんわり決まっていることが多いと思うよ。作業者は他の要素も考慮して「優先順位」を決めると良いよ。とは言え、考えすぎても難しいから、最初は「優先度」「かかる時間」「期日」から「優先順位」を決めると良いよ。タスクAのほうが優先度が高いけど、タスクBはすぐ終わりそうだし、タスクAの期日までまだ余裕があるから、タスクBを先にやろう的な。優先度より優先順位のほうが偉い。ダンダンダ、ダンつまりは優先度よりも優先順位は上位のレイヤー、優先度より優先順位のほうが偉いということよ！優先度より優先順位のほうが偉い。ダンダンダ、ダダン（号泣してみんな立ち上がる）（歌詞終わり）次回（？）は、私が使っている優先順位を決めるための具体的なテクニックをご紹介します。明日の Feedforce Advent Calendar 2020 は、八百くんがよく日報に書いていた AI Quest の話をしてくれるみたいです。お楽しみに。","contentSnippet":"この記事は Feedforce Advent Calendar 2020 の 3 日目の記事です。昨日は kysnrm の「さよなら湯島」でした。私も今のところに住んで来年で 6 年になるので、8 回目の引っ越しを少し考えてますが、まだ状況が流動的なので悩ましい...。（ここから歌詞）優先度を付けると、高高高高高高とかになることあるよね。みんな優先度が高い。でも人間は一度に複数のタスクを処理することは出来ないよ。それに実際終わってみたら、終わった順番が付いているはずだよ。じゃあ 1, 2, 3... とタスクに順番を付けてみようか。つまりは優先順位ね。優先度より優先順位のほうが偉い。ダンダン優先度は優先順位を決める１つの要素でしかないよ。区別しようか。例えば他にもこんなのを考慮する必要があるよ。・期日・かかる時間・かかるお金・サービスへのインパクト（顧客増加、顧客満足度など）・他のタスクがどれだけ効率化するか？優先度より優先順位のほうが偉い。ダンダンダン先の例だと、優先度はだいたい「期日」と「サービスへのインパクト」でふんわり決まっていることが多いと思うよ。作業者は他の要素も考慮して「優先順位」を決めると良いよ。とは言え、考えすぎても難しいから、最初は「優先度」「かかる時間」「期日」から「優先順位」を決めると良いよ。タスクAのほうが優先度が高いけど、タスクBはすぐ終わりそうだし、タスクAの期日までまだ余裕があるから、タスクBを先にやろう的な。優先度より優先順位のほうが偉い。ダンダンダ、ダンつまりは優先度よりも優先順位は上位のレイヤー、優先度より優先順位のほうが偉いということよ！優先度より優先順位のほうが偉い。ダンダンダ、ダダン（号泣してみんな立ち上がる）（歌詞終わり）次回（？）は、私が使っている優先順位を決めるための具体的なテクニックをご紹介します。明日の Feedforce Advent Calendar 2020 は、八百くんがよく日報に書いていた AI Quest の話をしてくれるみたいです。お楽しみに。","link":"https://masutaka.net/chalow/2020-12-03-1.html","isoDate":"2020-12-03T14:59:59.000Z","dateMiliSeconds":1607007599000,"authorName":"masutaka"},{"title":"『理論から学ぶデータベース実践入門』を読んだ","content":"4 月から Looker という BI ツールを使って、ウェブ広告の媒体数値や計測数値などの分析や可視化をすべく、日々取り組んでいます。ちょうど先月社内勉強会でそんな話をしました。現在扱っているデータは Web アプリケーションで扱うような、正規化されたきれいなデータではありません。NULL は頻繁に出てきますし、サブクエリ等でゴリッときれいにしてキャッシュする処理も書いたりします。いつの間にか想定外のレコードが入っていて、定義を変更することもあります。今までこのようなデータに向き合ったことはなかったので、こんなスキーマで良いのかなあ？とか思いながらの毎日でした。そんな中、数年前に 94 ページ目まで読んで挫折したこの本が頭にちらついていました。以前はふわっと読み始めたと記憶していますが、今回は割と明確な課題があります。今回は挫折しなさそうな気がしたのと、何かのヒントを期待して読むことにしました。結論から書くと P155 に明確な答えが書いてありました。リレーショナルモデルに適合しないデータをテーブルを用いて格納する場合は、リレーショナルモデルの原理原則に従う必要はまるでありません。そのようなテーブルでは、NULLを用いてもかまいませんし、正規化をする必要すらないでしょう。ここを読むまでは、仮にリレーショナルモデルの原理原則に従うのだとしたら、すべてのカラムで NULL を許容しているテーブルを ETL 等でリレーショナルモデルに適合したテーブルにクリーニングするのかなあ？でも現実的ではないなあ？など考えながら読んでいました。なので、急に答えが降ってきたようでした。SQL はリレーショナルモデルを扱うことが得意ですが、そうでないものも扱って良いと力強く書いてあります。もちろん用法用量を守って。特に目の前の課題が解決したわけではありませんが、なにか光が見えた気がしました。他の話も一応書いておくと、理論だけあって全部を理解するのはかなり難しく、特に第２〜４章は全く頭に入ってきませんでした。数年前はここで挫折...。ただし、第１章の SQL と集合の関係については比較的容易で、私が数年前に読んだ時は SQL への向き合い方が変わりました。気になる人は第１章だけでも読むと良いかもしれません。他も第９章の履歴データや第１３章のリファクタリングなども。なにか課題を抱えている人は、あまり気負わずに流して読むと良いかもしれません。","contentSnippet":"4 月から Looker という BI ツールを使って、ウェブ広告の媒体数値や計測数値などの分析や可視化をすべく、日々取り組んでいます。ちょうど先月社内勉強会でそんな話をしました。現在扱っているデータは Web アプリケーションで扱うような、正規化されたきれいなデータではありません。NULL は頻繁に出てきますし、サブクエリ等でゴリッときれいにしてキャッシュする処理も書いたりします。いつの間にか想定外のレコードが入っていて、定義を変更することもあります。今までこのようなデータに向き合ったことはなかったので、こんなスキーマで良いのかなあ？とか思いながらの毎日でした。そんな中、数年前に 94 ページ目まで読んで挫折したこの本が頭にちらついていました。以前はふわっと読み始めたと記憶していますが、今回は割と明確な課題があります。今回は挫折しなさそうな気がしたのと、何かのヒントを期待して読むことにしました。結論から書くと P155 に明確な答えが書いてありました。リレーショナルモデルに適合しないデータをテーブルを用いて格納する場合は、リレーショナルモデルの原理原則に従う必要はまるでありません。そのようなテーブルでは、NULLを用いてもかまいませんし、正規化をする必要すらないでしょう。ここを読むまでは、仮にリレーショナルモデルの原理原則に従うのだとしたら、すべてのカラムで NULL を許容しているテーブルを ETL 等でリレーショナルモデルに適合したテーブルにクリーニングするのかなあ？でも現実的ではないなあ？など考えながら読んでいました。なので、急に答えが降ってきたようでした。SQL はリレーショナルモデルを扱うことが得意ですが、そうでないものも扱って良いと力強く書いてあります。もちろん用法用量を守って。特に目の前の課題が解決したわけではありませんが、なにか光が見えた気がしました。他の話も一応書いておくと、理論だけあって全部を理解するのはかなり難しく、特に第２〜４章は全く頭に入ってきませんでした。数年前はここで挫折...。ただし、第１章の SQL と集合の関係については比較的容易で、私が数年前に読んだ時は SQL への向き合い方が変わりました。気になる人は第１章だけでも読むと良いかもしれません。他も第９章の履歴データや第１３章のリファクタリングなども。なにか課題を抱えている人は、あまり気負わずに流して読むと良いかもしれません。","link":"https://masutaka.net/chalow/2020-11-10-1.html","isoDate":"2020-11-10T14:59:59.000Z","dateMiliSeconds":1605020399000,"authorName":"masutaka"},{"title":"CircleCI の旧 UI で設定した Slack Integration の設定を確認も変更も削除もできない件への対応方法","content":"今年の春くらいに CircleCI の UI が新しくなったタイミングで、各プロジェクトで設定した Slack 通知用の設定ページはどこかにいってしまいました。こんな画面でした。[以前の Chat Integration]各プロジェクトの設定ページによると、現在は Slack orb を使う必要があるそう。例: https://app.circleci.com/settings/project/github/masutaka/example/slackそれはまあ移行すれば良いのですが、旧 UI で設定した Slack の Webhook URL を確認したくても出来ません。Slack orb に移行した場合に、旧 UI で設定した通知を無効にしてくれるのかも気になります。CircleCI のサポートに聞いたところ、残念ながらそのような UI は用意されておらず、Slack orb に移行しても自動的な無効化はしてくれないそう。マジすか・・・！Undocumented API を使って無効化が必要とのこと。新 UI では確認も変更も削除もできないとのこと。それはさすがに困る人が多いんじゃないかなあ...？全部サポート対応するのかしら。それはそれとして、この記事ではその Undocumented API を使って、旧 UI で設定した Slack Integration の確認と変更、削除のやり方をまとめます。説明しませんが、IRC も出来ると思います。※ 9 月にサポートに聞いた時、「Undocumented API を使うのは構わないのだけど、やり方自体も Undocumented なのは変なのでヘルプページに書いて欲しい」と伝えたけど、書かれてないようなのでこの記事を書いています。確認するこんな感じです。CIRCLE_TOKEN は https://app.circleci.com/settings/user/tokens で作ります。CIRCLE_TOKEN=xxxxxxVCS=ghORG=masutakaPROJECT=examplecurl \"https://circleci.com/api/v1.1/project/${VCS}/${ORG}/${PROJECT}/settings\" \\ -X GET \\ -H 'Content-Type: application/json; charset=utf-8' \\ -H \"Circle-Token: $CIRCLE_TOKEN\" \\ | jq '{ vcs_url: .vcs_url, slack_channel_override: .slack_channel_override, slack_channel: .slack_channel, slack_subdomain: .slack_subdomain, slack_api_token: .slack_api_token, slack_notify_prefs: .slack_notify_prefs, slack_webhook_url: .slack_webhook_url }'このような結果を得られます。{ \"vcs_url\": \"https://github.com/masutaka/example\", \"slack_channel_override\": null, \"slack_channel\": null, \"slack_subdomain\": null, \"slack_api_token\": null, \"slack_notify_prefs\": null, \"slack_webhook_url\": \"https://hooks.slack.com/services/*********/*********/************************\"}変更するPUT で変更します。以下の例では slack_notify_prefs と slack_webhook_url を変更しています。ちなみに前述の画像にある \"Fixed/Failed Only?\" にチェックを入れた状態が \"slack_notify_prefs\":\"smart\" みたいです。CIRCLE_TOKEN=xxxxxxVCS=ghORG=masutakaPROJECT=examplecurl \"https://circleci.com/api/v1.1/project/${VCS}/${ORG}/${PROJECT}/settings\" \\ -X PUT \\ -H 'Content-Type: application/json; charset=utf-8' \\ -H \"Circle-Token: $CIRCLE_TOKEN\" \\ --data-raw '{\"slack_notify_prefs\":\"smart\",\"slack_webhook_url\":\"https://hooks.slack.com/services/*********/*********/************************\"}'channel の変更は slack_channel の変更で良いと思いますが、おそらく slack_channel_override も指定も必要なはず。ただ、文字列で何を指定するのかは分かりませんでした。場合によりますが、Slack Webhook URL に紐付いた channel を変えたほうが楽だと思います。削除する削除も PUT を使います。Slack 関係の設定をすべて初期化（？）する点が異なります。CIRCLE_TOKEN=xxxxxxVCS=ghORG=masutakaPROJECT=examplecurl \"https://circleci.com/api/v1.1/project/${VCS}/${ORG}/${PROJECT}/settings\" \\ -X PUT \\ -H 'Content-Type: application/json; charset=utf-8' \\ -H \"Circle-Token: $CIRCLE_TOKEN\" \\ --data-raw '{\"slack_channel_override\":\"\",\"slack_channel\":null,\"slack_subdomain\":null,\"slack_api_token\":null,\"slack_notify_prefs\":null,\"slack_webhook_url\":\"\"}'おまけSlack Webhook URL がhttps://hooks.slack.com/services/XXXXXXXXX/YYYYYYYYYYY/ZZZZZZZZZZZZZZZZZZZZZZZZだったら、Slack の設定ページはhttps://slack.com/services/YYYYYYYYYYYです。https://example.slack.com/services/YYYYYYYYYYYのように Slack の workspace 名を指定する必要はあるかもしれません。","contentSnippet":"今年の春くらいに CircleCI の UI が新しくなったタイミングで、各プロジェクトで設定した Slack 通知用の設定ページはどこかにいってしまいました。こんな画面でした。[以前の Chat Integration]各プロジェクトの設定ページによると、現在は Slack orb を使う必要があるそう。例: https://app.circleci.com/settings/project/github/masutaka/example/slackそれはまあ移行すれば良いのですが、旧 UI で設定した Slack の Webhook URL を確認したくても出来ません。Slack orb に移行した場合に、旧 UI で設定した通知を無効にしてくれるのかも気になります。CircleCI のサポートに聞いたところ、残念ながらそのような UI は用意されておらず、Slack orb に移行しても自動的な無効化はしてくれないそう。マジすか・・・！Undocumented API を使って無効化が必要とのこと。新 UI では確認も変更も削除もできないとのこと。それはさすがに困る人が多いんじゃないかなあ...？全部サポート対応するのかしら。それはそれとして、この記事ではその Undocumented API を使って、旧 UI で設定した Slack Integration の確認と変更、削除のやり方をまとめます。説明しませんが、IRC も出来ると思います。※ 9 月にサポートに聞いた時、「Undocumented API を使うのは構わないのだけど、やり方自体も Undocumented なのは変なのでヘルプページに書いて欲しい」と伝えたけど、書かれてないようなのでこの記事を書いています。確認するこんな感じです。CIRCLE_TOKEN は https://app.circleci.com/settings/user/tokens で作ります。CIRCLE_TOKEN=xxxxxxVCS=ghORG=masutakaPROJECT=examplecurl \"https://circleci.com/api/v1.1/project/${VCS}/${ORG}/${PROJECT}/settings\" \\ -X GET \\ -H 'Content-Type: application/json; charset=utf-8' \\ -H \"Circle-Token: $CIRCLE_TOKEN\" \\ | jq '{ vcs_url: .vcs_url, slack_channel_override: .slack_channel_override, slack_channel: .slack_channel, slack_subdomain: .slack_subdomain, slack_api_token: .slack_api_token, slack_notify_prefs: .slack_notify_prefs, slack_webhook_url: .slack_webhook_url }'このような結果を得られます。{ \"vcs_url\": \"https://github.com/masutaka/example\", \"slack_channel_override\": null, \"slack_channel\": null, \"slack_subdomain\": null, \"slack_api_token\": null, \"slack_notify_prefs\": null, \"slack_webhook_url\": \"https://hooks.slack.com/services/*********/*********/************************\"}変更するPUT で変更します。以下の例では slack_notify_prefs と slack_webhook_url を変更しています。ちなみに前述の画像にある \"Fixed/Failed Only?\" にチェックを入れた状態が \"slack_notify_prefs\":\"smart\" みたいです。CIRCLE_TOKEN=xxxxxxVCS=ghORG=masutakaPROJECT=examplecurl \"https://circleci.com/api/v1.1/project/${VCS}/${ORG}/${PROJECT}/settings\" \\ -X PUT \\ -H 'Content-Type: application/json; charset=utf-8' \\ -H \"Circle-Token: $CIRCLE_TOKEN\" \\ --data-raw '{\"slack_notify_prefs\":\"smart\",\"slack_webhook_url\":\"https://hooks.slack.com/services/*********/*********/************************\"}'channel の変更は slack_channel の変更で良いと思いますが、おそらく slack_channel_override も指定も必要なはず。ただ、文字列で何を指定するのかは分かりませんでした。場合によりますが、Slack Webhook URL に紐付いた channel を変えたほうが楽だと思います。削除する削除も PUT を使います。Slack 関係の設定をすべて初期化（？）する点が異なります。CIRCLE_TOKEN=xxxxxxVCS=ghORG=masutakaPROJECT=examplecurl \"https://circleci.com/api/v1.1/project/${VCS}/${ORG}/${PROJECT}/settings\" \\ -X PUT \\ -H 'Content-Type: application/json; charset=utf-8' \\ -H \"Circle-Token: $CIRCLE_TOKEN\" \\ --data-raw '{\"slack_channel_override\":\"\",\"slack_channel\":null,\"slack_subdomain\":null,\"slack_api_token\":null,\"slack_notify_prefs\":null,\"slack_webhook_url\":\"\"}'おまけSlack Webhook URL がhttps://hooks.slack.com/services/XXXXXXXXX/YYYYYYYYYYY/ZZZZZZZZZZZZZZZZZZZZZZZZだったら、Slack の設定ページはhttps://slack.com/services/YYYYYYYYYYYです。https://example.slack.com/services/YYYYYYYYYYYのように Slack の workspace 名を指定する必要はあるかもしれません。","link":"https://masutaka.net/chalow/2020-10-30-1.html","isoDate":"2020-10-30T14:59:59.000Z","dateMiliSeconds":1604069999000,"authorName":"masutaka"},{"title":"『4月から取り組んできたLookerの導入から実装までのお話（Redashとも比較）』という発表をした","content":"\u003cp\u003eこんにちは \u003ca href=\"http://blog.hatena.ne.jp/masutaka26/\" class=\"hatena-id-icon\"\u003e\u003cimg src=\"https://cdn.profile-image.st-hatena.com/users/masutaka26/profile.png\" width=\"16\" height=\"16\" alt=\"\" class=\"hatena-id-icon\"\u003eid:masutaka26\u003c/a\u003e です。最近の趣味はリハビリと YouTube 鑑賞です。\u003c/p\u003e\n\n\u003cp\u003e本日、週次の社内勉強会 \u003ca href=\"https://developer.feedforce.jp/archive/category/FFTT\"\u003eFFTT\u003c/a\u003e で『4月から取り組んできたLookerの導入から実装までのお話（Redashとも比較）』という発表をしました。\u003c/p\u003e\n\n\u003ciframe src=\"https://docs.google.com/presentation/d/e/2PACX-1vQWgD1o2eZC69Mt9F9ln3xQL6Wx82W782cHe1YJEIPHWAdqp6tLEH_I29CyrMBbA9Ag0jmkMoQZ0QQp/embed?start=false\u0026loop=false\u0026delayms=3000\" frameborder=\"0\" width=\"960\" height=\"400\" allowfullscreen=\"true\" mozallowfullscreen=\"true\" webkitallowfullscreen=\"true\"\u003e\u003c/iframe\u003e\n\n\n\u003cp\u003e4 月から \u003ca href=\"https://jp.feedmatic.net/\"\u003eFeedmatic\u003c/a\u003e という弊社フィードフォースの広告運用サービスに BI ツールである \u003ca href=\"https://ja.looker.com/\"\u003eLooker\u003c/a\u003e を導入すべく、検討と実装をしてきました。\u003c/p\u003e\n\n\u003cp\u003e関わっているエンジニアは私一人で、社内の他のエンジニアからは何やってきたか分からないと思っていたので、今までのまとめ的な発表をしました。\u003c/p\u003e\n\n\u003cp\u003eネット上を探しても導入時の具体的な話は見つけられなかったので、誰かの参考になることも期待して、外向けも意識しています。\u003c/p\u003e\n\n\u003cp\u003eLooker ユーザ向けには P30 から「Symmetric 集計」を頑張って解説しています。説明が雑なのは認めます。🙏\u003c/p\u003e\n\n\u003cp\u003eLooker は学習コストは高いですが、かなりパワフルなツールなので、個人的には非常にやる気を出して燃えています。🔥\u003c/p\u003e\n\n\u003cp\u003eそれでは！\u003c/p\u003e\n","contentSnippet":"こんにちは id:masutaka26 です。最近の趣味はリハビリと YouTube 鑑賞です。本日、週次の社内勉強会 FFTT で『4月から取り組んできたLookerの導入から実装までのお話（Redashとも比較）』という発表をしました。4 月から Feedmatic という弊社フィードフォースの広告運用サービスに BI ツールである Looker を導入すべく、検討と実装をしてきました。関わっているエンジニアは私一人で、社内の他のエンジニアからは何やってきたか分からないと思っていたので、今までのまとめ的な発表をしました。ネット上を探しても導入時の具体的な話は見つけられなかったので、誰かの参考になることも期待して、外向けも意識しています。Looker ユーザ向けには P30 から「Symmetric 集計」を頑張って解説しています。説明が雑なのは認めます。🙏Looker は学習コストは高いですが、かなりパワフルなツールなので、個人的には非常にやる気を出して燃えています。🔥それでは！","link":"https://developer.feedforce.jp/entry/2020/10/23/190000","isoDate":"2020-10-23T10:00:00.000Z","dateMiliSeconds":1603447200000,"imageUrl":"https://cdn-ak.f.st-hatena.com/images/fotolife/m/masutaka26/20201023/20201023184859.png","authorName":"masutaka"},{"title":"Looker User Meetup in Tokyo #4（BEACON Japan 前夜祭）に参加した #lookermeetup","content":"【Looker ユーザー限定】Looker User Meetup in Tokyo #4 - connpass[Looker Logo]昨日開催されたこちらのイベントに参加しました。本日 9/3 から 4 週に渡って行われる Looker BEACON Japan の前夜祭です。よく考えたら Looker ユーザーの方々を拝見するのは初めてで、生の声を聴けたことが一番の成果でした。運営の方々、ありがとうございました。今は会社で Looker を導入し、そろそろ Jumpstart プログラムが終わるフェーズで、これからボッチ LookML 開発に拍車がかかるところです。実装がんばります・・・！以下、個人的なメモです。User Talk 1 : Lookerを利用した医療ビッグデータのマーケティング分析ツールの開発 医療データと Looker は相性が良かったとのこと。それにしても作り込んであるなあ。元が構造化されたデータで扱いやすいのかもしれないが、複雑なデータであることは確かっぽい。User Talk 2 : DeNAゲームタイトルの共通分析におけるLooker活用事例ソシャゲだけあって規模感がすごかった。スピーカーの鈴木さんによると、最大 5 人で LookML を開発していて、KPI ごとに担当者を分けているそう。5 人 x チーム数分のようだった。規模がすごいなあ。共通定義プロジェクトを用意して、継承（extends）して使っているそう。共通定義の定義が難易度高そうだった。どうなんだろう？User Talk 3 : トレタの分析環境とLookerへのこだわりRedash で行き詰まり（？）、Looker に移行したそう。分かる。とは言え、Looker はリターンが多い分、学習コストがかなり高いんだけど、その辺どうだったのかな。開発体制はスピーカーの CTO 鄧さんと業務委託 2 人で 3 ヶ月で作ったそう。Jumpstart 使ったのかな？あと 2 人くらい Looker のエバンジェリスト的な人（ビジネス職の人かな？）はいるっぽい。Explore はだいぶきれい。(1) や (2) は真似しようと思った。https://debezium.io/ 使って（？）MySQL から BigQuery に同期しているっぽい。数秒で同期とか言ってた気がする。User Talk 4 : 分析者でもプロダクト開発がしたい！と思ったら LookerYAMAP さんのダッシュボードが風情があるとザワザワしてた。リモートなのにザワザワが分かるくらいには。データ分析チーム（２人）で完結でき、フロントエンドエンジニアの力を借りずともリッチなダッシュボードを作ることが出来ているそう。あと２人、スポットで LookML 開発するために Developer 権限を与えているエンジニアはいるとのこと。Product Updates (BEACON Sneakpeak)Google Slide と Looker の統合は良さそう。Google Slide 上で Looker のグラフ（Look）とか生データをを表示できる。当日の #lookermeetup","contentSnippet":"【Looker ユーザー限定】Looker User Meetup in Tokyo #4 - connpass[Looker Logo]昨日開催されたこちらのイベントに参加しました。本日 9/3 から 4 週に渡って行われる Looker BEACON Japan の前夜祭です。よく考えたら Looker ユーザーの方々を拝見するのは初めてで、生の声を聴けたことが一番の成果でした。運営の方々、ありがとうございました。今は会社で Looker を導入し、そろそろ Jumpstart プログラムが終わるフェーズで、これからボッチ LookML 開発に拍車がかかるところです。実装がんばります・・・！以下、個人的なメモです。User Talk 1 : Lookerを利用した医療ビッグデータのマーケティング分析ツールの開発 医療データと Looker は相性が良かったとのこと。それにしても作り込んであるなあ。元が構造化されたデータで扱いやすいのかもしれないが、複雑なデータであることは確かっぽい。User Talk 2 : DeNAゲームタイトルの共通分析におけるLooker活用事例ソシャゲだけあって規模感がすごかった。スピーカーの鈴木さんによると、最大 5 人で LookML を開発していて、KPI ごとに担当者を分けているそう。5 人 x チーム数分のようだった。規模がすごいなあ。共通定義プロジェクトを用意して、継承（extends）して使っているそう。共通定義の定義が難易度高そうだった。どうなんだろう？User Talk 3 : トレタの分析環境とLookerへのこだわりRedash で行き詰まり（？）、Looker に移行したそう。分かる。とは言え、Looker はリターンが多い分、学習コストがかなり高いんだけど、その辺どうだったのかな。開発体制はスピーカーの CTO 鄧さんと業務委託 2 人で 3 ヶ月で作ったそう。Jumpstart 使ったのかな？あと 2 人くらい Looker のエバンジェリスト的な人（ビジネス職の人かな？）はいるっぽい。Explore はだいぶきれい。(1) や (2) は真似しようと思った。https://debezium.io/ 使って（？）MySQL から BigQuery に同期しているっぽい。数秒で同期とか言ってた気がする。User Talk 4 : 分析者でもプロダクト開発がしたい！と思ったら LookerYAMAP さんのダッシュボードが風情があるとザワザワしてた。リモートなのにザワザワが分かるくらいには。データ分析チーム（２人）で完結でき、フロントエンドエンジニアの力を借りずともリッチなダッシュボードを作ることが出来ているそう。あと２人、スポットで LookML 開発するために Developer 権限を与えているエンジニアはいるとのこと。Product Updates (BEACON Sneakpeak)Google Slide と Looker の統合は良さそう。Google Slide 上で Looker のグラフ（Look）とか生データをを表示できる。当日の #lookermeetup","link":"https://masutaka.net/chalow/2020-09-03-1.html","isoDate":"2020-09-03T14:59:59.000Z","dateMiliSeconds":1599145199000,"authorName":"masutaka"},{"title":"CircleCI の orb を fork して PR を送る前の動作確認方法","content":"今回 pbrisbin/pushover orb を変更した。PR を送る前に、動作確認がてらしばらく使っている。今後のためにやり方を残しておく。1. 動作確認用の orb を publish するために masutaka/pushover という scope を作る。orb の scope は一度作ったら削除できず、リネームしか出来ないようだ。自分用なので気にしないことにする。$ circleci orb create masutaka/pushoverYou are creating an orb called \"masutaka/pushover\".You will not be able to change the name of this orb.If you change your mind about the name, you will have to create a new orb with the new name.✔ Are you sure you wish to create the orb: `masutaka/pushover`: yOrb `masutaka/pushover` created.Please note that any versions you publish of this orb are world-readable.You can now register versions of `masutaka/pushover` using `circleci orb publish`.2. circleci/orb-tools を使うと面倒な publish を自動化出来る関係で、orb は src/ 以下の複数の .yml によって構成されていることが多い。ちょっと古くなっているが、以前 [2019-12-20-1] で説明した。以下のコマンドで src/ 以下の .yml を 1 つにまとめることが出来る。$ circleci config pack src \u0026gt; orb.yml3. 作られた orb.yml は orb publish サブコマンドで一時的に公開することが出来る。$ circleci orb publish orb.yml masutaka/pushover@dev:alphaOrb `masutaka/pushover@dev:alpha` was published.Please note that this is an open orb and is world-readable.Note that your dev label `dev:alpha` can be overwritten by anyone in your organization.Your dev orb will expire in 90 days unless a new version is published on the label `dev:alpha`.上に書いてあるとおり、いわゆる publish された状態にはなったが 90 日経つと使えなくなる。orb は 1.2.3 のようなセマンティックバージョンは消えないが、それ以外のバージョン（dev:alpha 等）は 90 日後に消える。orb info サブコマンドで情報を得ることが出来る。$ circleci orb info masutaka/pushover@dev:alphaThis orb hasn't published any versions yet.Total-commands: 1Total-executors: 1Total-jobs: 1## Statistics (30 days):Builds: 0Projects: 0Orgs: 0Learn more about this orb online in the CircleCI Orb Registry:https://circleci.com/orbs/registry/orb/masutaka/pushover4. 上記例の場合、.circleci/config.yml にはこのように書いて使う。orbs: pushover: masutaka/pushover@dev:alphaおまけ: 開発バージョンだけ公開された orb であれば、scope の情報は取れないようだ。$ circleci orb info masutaka/pushover# =\u0026gt; 開発バージョンしか公開していない scope の情報を取れない$ circleci orb info masutaka/tfupdate# =\u0026gt; セマンティックバージョンを公開しているので scope の情報を取れる","contentSnippet":"今回 pbrisbin/pushover orb を変更した。PR を送る前に、動作確認がてらしばらく使っている。今後のためにやり方を残しておく。1. 動作確認用の orb を publish するために masutaka/pushover という scope を作る。orb の scope は一度作ったら削除できず、リネームしか出来ないようだ。自分用なので気にしないことにする。$ circleci orb create masutaka/pushoverYou are creating an orb called \"masutaka/pushover\".You will not be able to change the name of this orb.If you change your mind about the name, you will have to create a new orb with the new name.✔ Are you sure you wish to create the orb: `masutaka/pushover`: yOrb `masutaka/pushover` created.Please note that any versions you publish of this orb are world-readable.You can now register versions of `masutaka/pushover` using `circleci orb publish`.2. circleci/orb-tools を使うと面倒な publish を自動化出来る関係で、orb は src/ 以下の複数の .yml によって構成されていることが多い。ちょっと古くなっているが、以前 [2019-12-20-1] で説明した。以下のコマンドで src/ 以下の .yml を 1 つにまとめることが出来る。$ circleci config pack src \u003e orb.yml3. 作られた orb.yml は orb publish サブコマンドで一時的に公開することが出来る。$ circleci orb publish orb.yml masutaka/pushover@dev:alphaOrb `masutaka/pushover@dev:alpha` was published.Please note that this is an open orb and is world-readable.Note that your dev label `dev:alpha` can be overwritten by anyone in your organization.Your dev orb will expire in 90 days unless a new version is published on the label `dev:alpha`.上に書いてあるとおり、いわゆる publish された状態にはなったが 90 日経つと使えなくなる。orb は 1.2.3 のようなセマンティックバージョンは消えないが、それ以外のバージョン（dev:alpha 等）は 90 日後に消える。orb info サブコマンドで情報を得ることが出来る。$ circleci orb info masutaka/pushover@dev:alphaThis orb hasn't published any versions yet.Total-commands: 1Total-executors: 1Total-jobs: 1## Statistics (30 days):Builds: 0Projects: 0Orgs: 0Learn more about this orb online in the CircleCI Orb Registry:https://circleci.com/orbs/registry/orb/masutaka/pushover4. 上記例の場合、.circleci/config.yml にはこのように書いて使う。orbs: pushover: masutaka/pushover@dev:alphaおまけ: 開発バージョンだけ公開された orb であれば、scope の情報は取れないようだ。$ circleci orb info masutaka/pushover# =\u003e 開発バージョンしか公開していない scope の情報を取れない$ circleci orb info masutaka/tfupdate# =\u003e セマンティックバージョンを公開しているので scope の情報を取れる","link":"https://masutaka.net/chalow/2020-09-02-1.html","isoDate":"2020-09-02T14:59:59.000Z","dateMiliSeconds":1599058799000,"authorName":"masutaka"},{"title":"テレビ用に HDMI 切替器を買った","content":"- MVOWIZON というメーカー- 今は ￥1,899 だけど、私は ￥1,399 で買えた - https://www.amazon.co.jp/gp/product/B087YRSHZK/ で購入したがすでにページがなかった- 5 入力 1 出力、リモコン付き、補助電源も可能でこのお値段はすごい- 3 入力 1 出力もある。現在 ￥1,198 - https://www.amazon.co.jp/dp/B07QQDV39T/- テレビと繋げるための HDMI ケーブルは別途必要だった - 30cm の https://www.amazon.co.jp/gp/product/B00QLF74BQ/ を買った- こんな感じで使用中。補助電源はせずに使えている - テレビ HDMI1: 個人用 MacBook Air（Thunderbolt） - テレビ HDMI2: 仕事用 MacBook Pro（USB Type-c） - テレビ HDMI3: 今回の HDMI 切替器 1. Chromecast 2. PS4 Pro 3. Nintendo Switch 4. 未使用 5. 未使用- HDMI 切替器を Mac と繋いだ時はうまくいかなかった- Nature Remo と連携したが、PS4 や Switch を ON にすると勝手に切り替わるのでほぼ使っていない- Google Home mini とも連携したが、そもそもテレビと Chromecast の区別がついていなかった（？）事情もあり挙動が不安定 - 成功する時は「セレクターのチャンネルを1にして」で OK。失敗することもある - Nature Remo にテレビとして登録する必要はあるっぽいダメな配線の例:[ダメな配線の例]","contentSnippet":"- MVOWIZON というメーカー- 今は ￥1,899 だけど、私は ￥1,399 で買えた - https://www.amazon.co.jp/gp/product/B087YRSHZK/ で購入したがすでにページがなかった- 5 入力 1 出力、リモコン付き、補助電源も可能でこのお値段はすごい- 3 入力 1 出力もある。現在 ￥1,198 - https://www.amazon.co.jp/dp/B07QQDV39T/- テレビと繋げるための HDMI ケーブルは別途必要だった - 30cm の https://www.amazon.co.jp/gp/product/B00QLF74BQ/ を買った- こんな感じで使用中。補助電源はせずに使えている - テレビ HDMI1: 個人用 MacBook Air（Thunderbolt） - テレビ HDMI2: 仕事用 MacBook Pro（USB Type-c） - テレビ HDMI3: 今回の HDMI 切替器 1. Chromecast 2. PS4 Pro 3. Nintendo Switch 4. 未使用 5. 未使用- HDMI 切替器を Mac と繋いだ時はうまくいかなかった- Nature Remo と連携したが、PS4 や Switch を ON にすると勝手に切り替わるのでほぼ使っていない- Google Home mini とも連携したが、そもそもテレビと Chromecast の区別がついていなかった（？）事情もあり挙動が不安定 - 成功する時は「セレクターのチャンネルを1にして」で OK。失敗することもある - Nature Remo にテレビとして登録する必要はあるっぽいダメな配線の例:[ダメな配線の例]","link":"https://masutaka.net/chalow/2020-08-21-1.html","isoDate":"2020-08-21T14:59:59.000Z","dateMiliSeconds":1598021999000,"authorName":"masutaka"},{"title":"個人的に実践している、Slack に振り回されない方法","content":"\u003cp\u003eこんにちは \u003ca href=\"http://blog.hatena.ne.jp/masutaka26/\" class=\"hatena-id-icon\"\u003e\u003cimg src=\"https://cdn.profile-image.st-hatena.com/users/masutaka26/profile.png\" width=\"16\" height=\"16\" alt=\"\" class=\"hatena-id-icon\"\u003eid:masutaka26\u003c/a\u003e です。足底筋膜炎は誤診のようでした。リハビリに勤しむ日々です。\u003c/p\u003e\n\n\u003cp\u003e今回は社内向けに書いた esa 記事が好評でしたので、少し改変してお届けします。\u003c/p\u003e\n\n\u003cp\u003eフィードフォースでは Slack を使っており、リモートワークにおけるコミュニケーションの手段も Slack がメインです。\u003c/p\u003e\n\n\u003cp\u003eSlack はチャットツールであるため、ある程度のリアルタイム性を求められますが、ただそれに従っていると振り回されてしまいます。\u003c/p\u003e\n\n\u003cp\u003e今回は私が実践しているいくつかの工夫を紹介します。他に良い方法があれば、是非教えてください。\u003c/p\u003e\n\n\u003cul class=\"table-of-contents\"\u003e\n    \u003cli\u003e\u003ca href=\"#今すぐできないことあとでやるあとで確認するは自分にリマインドする\"\u003e今すぐできないこと（あとでやる＆あとで確認する）は自分にリマインドする\u003c/a\u003e\u003c/li\u003e\n    \u003cli\u003e\u003ca href=\"#自分が他の人に依頼した時もリマインドを設定する\"\u003e自分が他の人に依頼した時もリマインドを設定する\u003c/a\u003e\u003c/li\u003e\n    \u003cli\u003e\u003ca href=\"#チャンネルは優先度を付ける\"\u003eチャンネルは優先度を付ける\u003c/a\u003e\u003c/li\u003e\n    \u003cli\u003e\u003ca href=\"#見なくなったチャンネルからはこまめに抜ける\"\u003e見なくなったチャンネルからはこまめに抜ける\u003c/a\u003e\u003c/li\u003e\n    \u003cli\u003e\u003ca href=\"#未読チャンネルはショートカットキーで移動する\"\u003e未読チャンネルはショートカットキーで移動する\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\n\u003ch2 id=\"今すぐできないことあとでやるあとで確認するは自分にリマインドする\"\u003e今すぐできないこと（あとでやる＆あとで確認する）は自分にリマインドする\u003c/h2\u003e\n\n\u003cp\u003e自分にリマインドすることで忘れることが出来る。同期的コミュニケーションを非同期に逃がす感じ。\u003c/p\u003e\n\n\u003cp\u003e\u003cspan itemscope itemtype=\"http://schema.org/Photograph\"\u003e\u003cimg src=\"https://cdn-ak.f.st-hatena.com/images/fotolife/m/masutaka26/20200627/20200627014903.png\" alt=\"f:id:masutaka26:20200627014903p:plain\" title=\"f:id:masutaka26:20200627014903p:plain\" class=\"hatena-fotolife\" itemprop=\"image\"\u003e\u003c/span\u003e\u003c/p\u003e\n\n\u003cp\u003e👇 \u003ccode\u003eslackbot\u003c/code\u003e からの DM で通知される。\u003c/p\u003e\n\n\u003cp\u003e\u003cspan itemscope itemtype=\"http://schema.org/Photograph\"\u003e\u003cimg src=\"https://cdn-ak.f.st-hatena.com/images/fotolife/m/masutaka26/20200627/20200627013415.jpg\" alt=\"f:id:masutaka26:20200627013415j:plain\" title=\"f:id:masutaka26:20200627013415j:plain\" class=\"hatena-fotolife\" itemprop=\"image\"\u003e\u003c/span\u003e\u003c/p\u003e\n\n\u003cp\u003eすぐ出来なくてさらに先延ばししたければ、Snooze する。出来ない時はゆるふわで良いので Snooze することが大事。放置しないようにしている。\u003c/p\u003e\n\n\u003cp\u003e👇 たまに \u003ccode\u003eslackbot\u003c/code\u003e の DM とかで \u003ccode\u003e/remind list\u003c/code\u003e して確認している。Snooze し忘れたりして、過去のリマインドが残っているとこんな感じになる。→ \u003ccode\u003ePast and Incomplete\u003c/code\u003e\u003c/p\u003e\n\n\u003cp\u003e\u003cspan itemscope itemtype=\"http://schema.org/Photograph\"\u003e\u003cimg src=\"https://cdn-ak.f.st-hatena.com/images/fotolife/m/masutaka26/20200627/20200627013716.png\" alt=\"f:id:masutaka26:20200627013716p:plain\" title=\"f:id:masutaka26:20200627013716p:plain\" class=\"hatena-fotolife\" itemprop=\"image\"\u003e\u003c/span\u003e\u003c/p\u003e\n\n\u003cp\u003e🌀 本当は Gmail の Inbox（受信トレイ）でリマインド管理したい。Snooze が使いやすいし。\u003c/p\u003e\n\n\u003ch2 id=\"自分が他の人に依頼した時もリマインドを設定する\"\u003e自分が他の人に依頼した時もリマインドを設定する\u003c/h2\u003e\n\n\u003cp\u003e相手が忘れても大丈夫になる。これも同期コミュニケーションから非同期への変換。\u003c/p\u003e\n\n\u003ch2 id=\"チャンネルは優先度を付ける\"\u003eチャンネルは優先度を付ける\u003c/h2\u003e\n\n\u003cp\u003e私の場合は \u003ccode\u003eStarred\u003c/code\u003e \u003e \u003ccode\u003eLow Priority\u003c/code\u003e \u003e \u003ccode\u003eChannels\u003c/code\u003e という優先度にしてます。\n（優先度が分からなくなるので、\u003ca href=\"https://slack.com/intl/ja-jp/help/articles/226410907-%E5%85%A8%E3%81%A6%E3%81%AE%E6%9C%AA%E8%AA%AD%E3%83%A1%E3%83%83%E3%82%BB%E3%83%BC%E3%82%B8%E3%82%92%E7%A2%BA%E8%AA%8D%E3%81%99%E3%82%8B\"\u003e全未読機能\u003c/a\u003eは使っていません）\u003c/p\u003e\n\n\u003cp\u003e\u003cspan itemscope itemtype=\"http://schema.org/Photograph\"\u003e\u003cimg src=\"https://cdn-ak.f.st-hatena.com/images/fotolife/m/masutaka26/20200627/20200627014706.png\" alt=\"f:id:masutaka26:20200627014706p:plain\" title=\"f:id:masutaka26:20200627014706p:plain\" class=\"hatena-fotolife\" itemprop=\"image\"\u003e\u003c/span\u003e\u003c/p\u003e\n\n\u003cp\u003e\u003ccode\u003eStarred\u003c/code\u003e と \u003ccode\u003eChannels\u003c/code\u003e は最初からあるグルーピングです。\u003ccode\u003eLow Priority\u003c/code\u003e は自分で作りました。\u003c/p\u003e\n\n\u003cp\u003e公式ヘルプ: \u003ca href=\"https://slack.com/intl/ja-jp/help/articles/201331016-%E3%83%81%E3%83%A3%E3%83%B3%E3%83%8D%E3%83%AB%E3%82%84%E3%83%80%E3%82%A4%E3%83%AC%E3%82%AF%E3%83%88%E3%83%A1%E3%83%83%E3%82%BB%E3%83%BC%E3%82%B8%E3%81%AB%E3%82%B9%E3%82%BF%E3%83%BC%E3%82%92%E4%BB%98%E3%81%91%E3%82%8B\"\u003eチャンネルやダイレクトメッセージにスターを付ける | Slack\u003c/a\u003e\u003c/p\u003e\n\n\u003cp\u003e💡 \u003ccode\u003eChannels\u003c/code\u003e の中には mute しているチャンネルもあります。\u003c/p\u003e\n\n\u003ch2 id=\"見なくなったチャンネルからはこまめに抜ける\"\u003e見なくなったチャンネルからはこまめに抜ける\u003c/h2\u003e\n\n\u003cp\u003e抜けたいチャンネルで \u003ccode\u003e/leave\u003c/code\u003e と発言すると、一瞬で抜けられるよ。\u003c/p\u003e\n\n\u003ch2 id=\"未読チャンネルはショートカットキーで移動する\"\u003e未読チャンネルはショートカットキーで移動する\u003c/h2\u003e\n\n\u003cul\u003e\n\u003cli\u003eWindows\n\n\u003cul\u003e\n\u003cli\u003e前の未読チャンネルや DM に移動: \u003ccode\u003eAlt\u003c/code\u003e \u003ccode\u003eShift\u003c/code\u003e \u003ccode\u003e↑\u003c/code\u003e\u003c/li\u003e\n\u003cli\u003e次の未読チャンネルや DM に移動: \u003ccode\u003eAlt\u003c/code\u003e \u003ccode\u003eShift\u003c/code\u003e \u003ccode\u003e↓\u003c/code\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003eMac\n\n\u003cul\u003e\n\u003cli\u003e前の未読チャンネルや DM に移動: \u003ccode\u003eOption\u003c/code\u003e \u003ccode\u003eShift\u003c/code\u003e \u003ccode\u003e↑\u003c/code\u003e\u003c/li\u003e\n\u003cli\u003e次の未読チャンネルや DM に移動: \u003ccode\u003eOption\u003c/code\u003e \u003ccode\u003eShift\u003c/code\u003e \u003ccode\u003e↓\u003c/code\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\n\n\u003cp\u003e公式ヘルプ: \u003ca href=\"https://slack.com/intl/ja-jp/help/articles/201374536-Slack-%E3%81%AE%E3%82%AD%E3%83%BC%E3%83%9C%E3%83%BC%E3%83%89%E3%82%B7%E3%83%A7%E3%83%BC%E3%83%88%E3%82%AB%E3%83%83%E3%83%88\"\u003eSlack のキーボードショートカット | Slack\u003c/a\u003e\u003c/p\u003e\n","contentSnippet":"こんにちは id:masutaka26 です。足底筋膜炎は誤診のようでした。リハビリに勤しむ日々です。今回は社内向けに書いた esa 記事が好評でしたので、少し改変してお届けします。フィードフォースでは Slack を使っており、リモートワークにおけるコミュニケーションの手段も Slack がメインです。Slack はチャットツールであるため、ある程度のリアルタイム性を求められますが、ただそれに従っていると振り回されてしまいます。今回は私が実践しているいくつかの工夫を紹介します。他に良い方法があれば、是非教えてください。今すぐできないこと（あとでやる＆あとで確認する）は自分にリマインドする自分が他の人に依頼した時もリマインドを設定するチャンネルは優先度を付ける見なくなったチャンネルからはこまめに抜ける未読チャンネルはショートカットキーで移動する今すぐできないこと（あとでやる＆あとで確認する）は自分にリマインドする自分にリマインドすることで忘れることが出来る。同期的コミュニケーションを非同期に逃がす感じ。👇 slackbot からの DM で通知される。すぐ出来なくてさらに先延ばししたければ、Snooze する。出来ない時はゆるふわで良いので Snooze することが大事。放置しないようにしている。👇 たまに slackbot の DM とかで /remind list して確認している。Snooze し忘れたりして、過去のリマインドが残っているとこんな感じになる。→ Past and Incomplete🌀 本当は Gmail の Inbox（受信トレイ）でリマインド管理したい。Snooze が使いやすいし。自分が他の人に依頼した時もリマインドを設定する相手が忘れても大丈夫になる。これも同期コミュニケーションから非同期への変換。チャンネルは優先度を付ける私の場合は Starred \u003e Low Priority \u003e Channels という優先度にしてます。（優先度が分からなくなるので、全未読機能は使っていません）Starred と Channels は最初からあるグルーピングです。Low Priority は自分で作りました。公式ヘルプ: チャンネルやダイレクトメッセージにスターを付ける | Slack💡 Channels の中には mute しているチャンネルもあります。見なくなったチャンネルからはこまめに抜ける抜けたいチャンネルで /leave と発言すると、一瞬で抜けられるよ。未読チャンネルはショートカットキーで移動するWindows前の未読チャンネルや DM に移動: Alt Shift ↑次の未読チャンネルや DM に移動: Alt Shift ↓Mac前の未読チャンネルや DM に移動: Option Shift ↑次の未読チャンネルや DM に移動: Option Shift ↓公式ヘルプ: Slack のキーボードショートカット | Slack","link":"https://developer.feedforce.jp/entry/2020/06/29/140000","isoDate":"2020-06-29T05:00:00.000Z","dateMiliSeconds":1593406800000,"imageUrl":"https://cdn-ak.f.st-hatena.com/images/fotolife/m/masutaka26/20200627/20200627155056.png","authorName":"masutaka"},{"title":"『HerokuでSidekiqを監視する方法を確立した』という発表をした","content":"\u003cp\u003eこんにちは \u003ca href=\"http://blog.hatena.ne.jp/masutaka26/\" class=\"hatena-id-icon\"\u003e\u003cimg src=\"https://cdn.profile-image.st-hatena.com/users/masutaka26/profile.png\" width=\"16\" height=\"16\" alt=\"\" class=\"hatena-id-icon\"\u003eid:masutaka26\u003c/a\u003e です。最近はドラクエウォークと足底筋膜炎との両立に悩んでいます。\u003c/p\u003e\n\n\u003cp\u003e先週の金曜日、週次の社内勉強会 \u003ca href=\"https://developer.feedforce.jp/archive/category/FFTT\"\u003eFFTT\u003c/a\u003e で『HerokuでSidekiqを監視する方法を確立した』という発表をしました。\u003c/p\u003e\n\n\u003ciframe src=\"https://docs.google.com/presentation/d/e/2PACX-1vTZAByBIEhPjehZJ8Jb3atZBJSpu1R371Z3qQZcolE99poCpdYHWfWl5tlH2pQxwBedoCBPYK8rTwoI/embed?start=false\u0026loop=false\u0026delayms=3000\" frameborder=\"0\" width=\"960\" height=\"400\" allowfullscreen=\"true\" mozallowfullscreen=\"true\" webkitallowfullscreen=\"true\"\u003e\u003c/iframe\u003e\n\n\n\u003cp\u003eHeroku で Sidekiq を監視する知見を見つけられなかったのが、このお題を選んだ経緯です。どなたかが参考になるとうれしいです。\u003c/p\u003e\n\n\u003cp\u003e今回は自宅からのリモート発表でした。物理発表と違って、話した内容よりもリアクションの分からなさによる戸惑いが気になってしまいました。（オイ\u003c/p\u003e\n\n\u003cp\u003e※ リアクションはしてくれてたみたいです。🙏\u003c/p\u003e\n\n\u003cp\u003e複数モニター必須とか、いろいろ知見がありそうなので、今後蓄積出来ると良さそうです。\u003c/p\u003e\n","contentSnippet":"こんにちは id:masutaka26 です。最近はドラクエウォークと足底筋膜炎との両立に悩んでいます。先週の金曜日、週次の社内勉強会 FFTT で『HerokuでSidekiqを監視する方法を確立した』という発表をしました。Heroku で Sidekiq を監視する知見を見つけられなかったのが、このお題を選んだ経緯です。どなたかが参考になるとうれしいです。今回は自宅からのリモート発表でした。物理発表と違って、話した内容よりもリアクションの分からなさによる戸惑いが気になってしまいました。（オイ※ リアクションはしてくれてたみたいです。🙏複数モニター必須とか、いろいろ知見がありそうなので、今後蓄積出来ると良さそうです。","link":"https://developer.feedforce.jp/entry/2020/03/02/140000","isoDate":"2020-03-02T05:00:00.000Z","dateMiliSeconds":1583125200000,"imageUrl":"https://cdn-ak.f.st-hatena.com/images/fotolife/m/masutaka26/20200302/20200302102630.png","authorName":"masutaka"},{"title":"Heroku Ruby Language Metrics のメトリクス収集の仕組みを調べた","content":"\u003cp\u003eこんにちは。\u003ca href=\"http://blog.hatena.ne.jp/masutaka26/\" class=\"hatena-id-icon\"\u003e\u003cimg src=\"https://cdn.profile-image.st-hatena.com/users/masutaka26/profile.png\" width=\"16\" height=\"16\" alt=\"\" class=\"hatena-id-icon\"\u003eid:masutaka26\u003c/a\u003e です。\u003c/p\u003e\n\n\u003cp\u003e半年くらい前から \u003ca href=\"https://devcenter.heroku.com/articles/language-runtime-metrics-ruby\"\u003eHeroku の Ruby Language Metrics\u003c/a\u003e (Public Beta) を使い始めました。その時、どのようにメトリクスを収集しているか調べたので、この記事にまとめます。（なぜこのタイミング...）\u003c/p\u003e\n\n\u003cp\u003e有効にする方法は前述の公式ドキュメントをどうぞ。\u003ca href=\"http://blog.hatena.ne.jp/sho7650/\" class=\"hatena-id-icon\"\u003e\u003cimg src=\"https://cdn.profile-image.st-hatena.com/users/sho7650/profile.png\" width=\"16\" height=\"16\" alt=\"\" class=\"hatena-id-icon\"\u003eid:sho7650\u003c/a\u003e の記事も併せて読むと分かりやすいと思います。\u003c/p\u003e\n\n\u003cp\u003e\u003ciframe src=\"https://hatenablog-parts.com/embed?url=https%3A%2F%2Fqiita.com%2Fsho7650%2Fitems%2F7315e78fa3e6aa75b85b\" title=\"[Ruby] より細かくMetricsを取得したい [Heroku] - Qiita\" class=\"embed-card embed-webcard\" scrolling=\"no\" frameborder=\"0\" style=\"display: block; width: 100%; height: 155px; max-width: 500px; margin: 10px 0px;\"\u003e\u003c/iframe\u003e\u003ccite class=\"hatena-citation\"\u003e\u003ca href=\"https://qiita.com/sho7650/items/7315e78fa3e6aa75b85b\"\u003eqiita.com\u003c/a\u003e\u003c/cite\u003e\u003c/p\u003e\n\n\u003cp\u003eところで、いつから Public Beta だったのですかね？ GA はいつになるのかな...？\u003c/p\u003e\n\n\u003ch2\u003e概要\u003c/h2\u003e\n\n\u003cp\u003e今回は Rails 前提で説明します。このような仕組みでメトリクスの収集と送信が行われます。\u003c/p\u003e\n\n\u003col\u003e\n\u003cli\u003e\u003ca href=\"https://github.com/heroku/heroku-buildpack-metrics/\"\u003eheroku/metrics buildpack\u003c/a\u003e により、Dyno 起動時に \u003ca href=\"https://github.com/heroku/agentmon\"\u003eagentmon\u003c/a\u003e がインストールされ、常駐する\u003c/li\u003e\n\u003cli\u003eRails が起動すると、\u003ca href=\"https://github.com/heroku/barnes\"\u003ebarnes\u003c/a\u003e gem がメトリクスを収集し始め、定期的に localhost の agentmon に送信する\u003c/li\u003e\n\u003cli\u003eagentmon は \u003ccode\u003ehttps://app.metrics.heroku.com/\u0026lt;dyno id\u0026gt;\u003c/code\u003e にメトリクスを送信する\u003c/li\u003e\n\u003cli\u003eエンジニアは Heroku Dashboard から Ruby のメトリクスを閲覧できる\u003c/li\u003e\n\u003c/ol\u003e\n\n\n\u003ch2\u003eagentmon のインストールと起動\u003c/h2\u003e\n\n\u003cp\u003e\u003ca href=\"https://github.com/heroku/heroku-buildpack-metrics/\"\u003eheroku/metrics buildpack\u003c/a\u003e によって、agentmon というデーモンがインストールされます。\u003c/p\u003e\n\n\u003cp\u003e\u003ca class=\"embedly-card\" href=\"https://github.com/heroku/agentmon\"\u003eheroku/agentmon\u003c/a\u003e\u003c/p\u003e\n\n\u003cp\u003eagentmon は後述する barnes gem から受け取ったメトリクスを \u003ccode\u003ehttps://app.metrics.heroku.com/\u0026lt;dyno id\u0026gt;\u003c/code\u003e に送信します。\u003c/p\u003e\n\n\u003cp\u003eこの URL は環境変数 \u003ccode\u003eHEROKU_METRICS_URL\u003c/code\u003e の値で、Heroku Dashboard から Enhanced Language Metrics を有効にすると、各 Dyno で定義されます。\u003c/p\u003e\n\n\u003cp\u003e面白いのは、Slug 生成時には \u003ca href=\"https://github.com/heroku/heroku-buildpack-metrics/blob/053529d2488d1108d8fd777c2ef6575d899dcf20/bin/compile#L15-L17\"\u003e/app/.profile.d/heroku-metrics-daemon.sh がインストールされる\u003c/a\u003eだけで、Dyno 起動時にこのスクリプトが実行され、\u003ca href=\"https://github.com/heroku/heroku-buildpack-metrics/blob/053529d2488d1108d8fd777c2ef6575d899dcf20/.profile.d/heroku-metrics-daemon.sh\"\u003eagentmon のインストールと起動が行われる\u003c/a\u003eことです。\u003c/p\u003e\n\n\u003cp\u003eDyno では通常 Puma などのプロセスしか起動されませんが、このような方法を使えばデーモンも起動できることを初めて知りました。\u003c/p\u003e\n\n\u003cp\u003eちなみに \u003ca href=\"https://devcenter.heroku.com/articles/buildpack-api#profile-d-scripts\"\u003eDyno が起動する時 /etc/profile によって \u003ccode\u003e/app/.profile.d/*.sh\u003c/code\u003e がすべて実行されます\u003c/a\u003e。\u003c/p\u003e\n\n\u003ch2\u003ebarnes gem によるメトリクス収集と送信\u003c/h2\u003e\n\n\u003cp\u003e\u003ca class=\"embedly-card\" href=\"https://github.com/heroku/barnes\"\u003eheroku/barnes\u003c/a\u003e\u003c/p\u003e\n\n\u003cp\u003eRails が起動すると、\u003ca href=\"https://github.com/heroku/barnes/blob/v0.0.8/lib/barnes.rb#L40-L64\"\u003eBarnes.start\u003c/a\u003e から呼ばれる \u003ca href=\"https://github.com/heroku/barnes/blob/v0.0.8/lib/barnes/periodic.rb#L31-L67\"\u003eBarnes::Periodic.new\u003c/a\u003e で Ruby のスレッドが作られます。\u003c/p\u003e\n\n\u003cp\u003e\u003ccode\u003eBarnes.start\u003c/code\u003e はすぐに終了しますが、作られたスレッドは非同期で実行されます。無限ループのスレッドなので、Rails が起動している間、起動し続けます。\u003c/p\u003e\n\n\u003cp\u003eこの無限ループでは 10 秒に 1 回、後述するメトリクスを収集し、localhost の agentmon に送信します。\u003c/p\u003e\n\n\u003cp\u003e送信するのはスレッド中のインスタンス変数 \u003ccode\u003e@reporter\u003c/code\u003e です。これは \u003ca href=\"https://github.com/heroku/barnes/blob/v0.0.8/lib/barnes/reporter.rb\"\u003eBarnes::Reporter\u003c/a\u003e のインスタンスで、\u003ccode\u003estatsd_client\u003c/code\u003e を介して agentmon に送信します。\u003c/p\u003e\n\n\u003cp\u003e\u003ccode\u003estatsd_client\u003c/code\u003e は \u003ccode\u003eBarnes::Reporter.new\u003c/code\u003e 時に渡されます。\n\u003ca href=\"https://github.com/heroku/barnes/blob/v0.0.8/lib/barnes.rb#L51\"\u003ehttps://github.com/heroku/barnes/blob/v0.0.8/lib/barnes.rb#L51\u003c/a\u003e\u003c/p\u003e\n\n\u003ch2\u003e収集されるメトリクス\u003c/h2\u003e\n\n\u003cp\u003e\u003ccode\u003eBarnes::ResourceUsage\u003c/code\u003e では収集されるメトリクスを一望できます。\n\u003ca href=\"https://github.com/heroku/barnes/blob/v0.0.8/lib/barnes/resource_usage.rb#L28-L63\"\u003ehttps://github.com/heroku/barnes/blob/v0.0.8/lib/barnes/resource_usage.rb#L28-L63\u003c/a\u003e\u003c/p\u003e\n\n\u003cp\u003e収集されるメトリクスと、収集方法です。\u003c/p\u003e\n\n\u003cul\u003e\n\u003cli\u003ePuma のメトリクス（ \u003ccode\u003eBarnes::Instruments::PumaInstrument\u003c/code\u003e ）\n\n\u003cul\u003e\n\u003cli\u003e\u003ca href=\"https://github.com/heroku/barnes/blob/v0.0.8/lib/barnes/instruments/puma_instrument.rb#L33-L48\"\u003ehttps://github.com/heroku/barnes/blob/v0.0.8/lib/barnes/instruments/puma_instrument.rb#L33-L48\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003eCPU 実行時間等のメトリクス（ \u003ccode\u003eBarnes::Instruments::Stopwatch\u003c/code\u003e ）\n\n\u003cul\u003e\n\u003cli\u003e\u003ca href=\"https://github.com/heroku/barnes/blob/v0.0.8/lib/barnes/instruments/stopwatch.rb#L36-L58\"\u003ehttps://github.com/heroku/barnes/blob/v0.0.8/lib/barnes/instruments/stopwatch.rb#L36-L58\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"https://docs.ruby-lang.org/ja/2.7.0/class/ObjectSpace.html#M_COUNT_OBJECTS\"\u003eObjectSpace.count_objects\u003c/a\u003e の結果（ \u003ccode\u003eBarnes::Instruments::ObjectSpaceCounter\u003c/code\u003e ）\n\n\u003cul\u003e\n\u003cli\u003e\u003ca href=\"https://github.com/heroku/barnes/blob/v0.0.8/lib/barnes/instruments/object_space_counter.rb#L27-L30\"\u003ehttps://github.com/heroku/barnes/blob/v0.0.8/lib/barnes/instruments/object_space_counter.rb#L27-L30\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"https://docs.ruby-lang.org/ja/2.7.0/method/GC/s/stat.html\"\u003eGC.stat\u003c/a\u003e の結果（ \u003ccode\u003eBarnes::Instruments::RubyGC\u003c/code\u003e ）\n\n\u003cul\u003e\n\u003cli\u003e\u003ca href=\"https://github.com/heroku/barnes/blob/v0.0.8/lib/barnes/instruments/ruby_gc.rb#L62-L84\"\u003ehttps://github.com/heroku/barnes/blob/v0.0.8/lib/barnes/instruments/ruby_gc.rb#L62-L84\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\n\n\u003ch2\u003eまとめ\u003c/h2\u003e\n\n\u003cp\u003eHeroku Ruby Language Metrics のメトリクス収集の仕組みを調べました。\u003c/p\u003e\n\n\u003cp\u003eただ有効にするだけだと、他のエンジニアに説明することができなかったことが、今回調べた動機です。\u003c/p\u003e\n\n\u003cp\u003e今回に限りませんが、Heroku は完全なブラックボックスではなく、調べると実装が透けて見えるのがとても良いと思います。\u003c/p\u003e\n\n\u003cscript async src=\"//cdn.embedly.com/widgets/platform.js\" charset=\"UTF-8\"\u003e\u003c/script\u003e\n\n","contentSnippet":"こんにちは。id:masutaka26 です。半年くらい前から Heroku の Ruby Language Metrics (Public Beta) を使い始めました。その時、どのようにメトリクスを収集しているか調べたので、この記事にまとめます。（なぜこのタイミング...）有効にする方法は前述の公式ドキュメントをどうぞ。id:sho7650 の記事も併せて読むと分かりやすいと思います。qiita.comところで、いつから Public Beta だったのですかね？ GA はいつになるのかな...？概要今回は Rails 前提で説明します。このような仕組みでメトリクスの収集と送信が行われます。heroku/metrics buildpack により、Dyno 起動時に agentmon がインストールされ、常駐するRails が起動すると、barnes gem がメトリクスを収集し始め、定期的に localhost の agentmon に送信するagentmon は https://app.metrics.heroku.com/\u003cdyno id\u003e にメトリクスを送信するエンジニアは Heroku Dashboard から Ruby のメトリクスを閲覧できるagentmon のインストールと起動heroku/metrics buildpack によって、agentmon というデーモンがインストールされます。heroku/agentmonagentmon は後述する barnes gem から受け取ったメトリクスを https://app.metrics.heroku.com/\u003cdyno id\u003e に送信します。この URL は環境変数 HEROKU_METRICS_URL の値で、Heroku Dashboard から Enhanced Language Metrics を有効にすると、各 Dyno で定義されます。面白いのは、Slug 生成時には /app/.profile.d/heroku-metrics-daemon.sh がインストールされるだけで、Dyno 起動時にこのスクリプトが実行され、agentmon のインストールと起動が行われることです。Dyno では通常 Puma などのプロセスしか起動されませんが、このような方法を使えばデーモンも起動できることを初めて知りました。ちなみに Dyno が起動する時 /etc/profile によって /app/.profile.d/*.sh がすべて実行されます。barnes gem によるメトリクス収集と送信heroku/barnesRails が起動すると、Barnes.start から呼ばれる Barnes::Periodic.new で Ruby のスレッドが作られます。Barnes.start はすぐに終了しますが、作られたスレッドは非同期で実行されます。無限ループのスレッドなので、Rails が起動している間、起動し続けます。この無限ループでは 10 秒に 1 回、後述するメトリクスを収集し、localhost の agentmon に送信します。送信するのはスレッド中のインスタンス変数 @reporter です。これは Barnes::Reporter のインスタンスで、statsd_client を介して agentmon に送信します。statsd_client は Barnes::Reporter.new 時に渡されます。https://github.com/heroku/barnes/blob/v0.0.8/lib/barnes.rb#L51収集されるメトリクスBarnes::ResourceUsage では収集されるメトリクスを一望できます。https://github.com/heroku/barnes/blob/v0.0.8/lib/barnes/resource_usage.rb#L28-L63収集されるメトリクスと、収集方法です。Puma のメトリクス（ Barnes::Instruments::PumaInstrument ）https://github.com/heroku/barnes/blob/v0.0.8/lib/barnes/instruments/puma_instrument.rb#L33-L48CPU 実行時間等のメトリクス（ Barnes::Instruments::Stopwatch ）https://github.com/heroku/barnes/blob/v0.0.8/lib/barnes/instruments/stopwatch.rb#L36-L58ObjectSpace.count_objects の結果（ Barnes::Instruments::ObjectSpaceCounter ）https://github.com/heroku/barnes/blob/v0.0.8/lib/barnes/instruments/object_space_counter.rb#L27-L30GC.stat の結果（ Barnes::Instruments::RubyGC ）https://github.com/heroku/barnes/blob/v0.0.8/lib/barnes/instruments/ruby_gc.rb#L62-L84まとめHeroku Ruby Language Metrics のメトリクス収集の仕組みを調べました。ただ有効にするだけだと、他のエンジニアに説明することができなかったことが、今回調べた動機です。今回に限りませんが、Heroku は完全なブラックボックスではなく、調べると実装が透けて見えるのがとても良いと思います。","link":"https://developer.feedforce.jp/entry/2020/02/13/150000","isoDate":"2020-02-13T06:00:00.000Z","dateMiliSeconds":1581573600000,"imageUrl":"https://cdn-ak.f.st-hatena.com/images/fotolife/m/masutaka26/20181113/20181113190345.png","authorName":"masutaka"},{"title":"Heroku Meetup #27 で『デプロイで止まらないバッチ処理を求めて』という話をしてきた #herokujp","content":"\u003cp\u003e土曜日にこんにちは \u003ca href=\"http://blog.hatena.ne.jp/masutaka26/\" class=\"hatena-id-icon\"\u003e\u003cimg src=\"https://cdn.profile-image.st-hatena.com/users/masutaka26/profile.png\" width=\"16\" height=\"16\" alt=\"\" class=\"hatena-id-icon\"\u003eid:masutaka26\u003c/a\u003e です。\u003c/p\u003e\n\n\u003cp\u003eこの記事は Heroku Advent Calendar 2019 の 14 日目の記事です。\u003c/p\u003e\n\n\u003cp\u003e\u003ciframe src=\"https://hatenablog-parts.com/embed?url=https%3A%2F%2Fqiita.com%2Fadvent-calendar%2F2019%2Fheroku\" title=\"Heroku Advent Calendar 2019 - Qiita\" class=\"embed-card embed-webcard\" scrolling=\"no\" frameborder=\"0\" style=\"display: block; width: 100%; height: 155px; max-width: 500px; margin: 10px 0px;\"\u003e\u003c/iframe\u003e\u003ccite class=\"hatena-citation\"\u003e\u003ca href=\"https://qiita.com/advent-calendar/2019/heroku\"\u003eqiita.com\u003c/a\u003e\u003c/cite\u003e\u003c/p\u003e\n\n\u003cp\u003e昨日は \u003ca href=\"https://qiita.com/takahito0508\"\u003e@takahito0508\u003c/a\u003e さんの『\u003ca href=\"https://qiita.com/takahito0508/items/0f30e441dd5fba673560\"\u003eSalesforce の Org Development 用の Buildpack を作った話\u003c/a\u003e』でした。Heroku の Buildpack は割と簡単な仕組みなので、ハードルが低いですよね。\u003c/p\u003e\n\n\u003cp\u003eさて、同じ日（2019/12/13）に開催された \u003ca href=\"https://herokujp.doorkeeper.jp/events/99972\"\u003eHeroku Meetup #27 \"Heroku Vitamin!\"\u003c/a\u003e で『デプロイで止まらないバッチ処理を求めて』というお題で発表してきました。\u003c/p\u003e\n\n\u003ciframe src=\"https://docs.google.com/presentation/d/e/2PACX-1vRVD7Gx345OvUDpoGaRxv5sYQB9uCpvFORJvhgKWySCxNd3WqQQEM4Gfpx0OJYoOyf2sY8GVUKD3spA/embed?start=false\u0026loop=false\u0026delayms=3000\" frameborder=\"0\" width=\"960\" height=\"400\" allowfullscreen=\"true\" mozallowfullscreen=\"true\" webkitallowfullscreen=\"true\"\u003e\u003c/iframe\u003e\n\n\n\u003cp\u003eHeroku meetup は\u003ca href=\"https://herokujp.doorkeeper.jp/events/93092\"\u003e前々回 #25\u003c/a\u003e 以来の参加と登壇です。\u003c/p\u003e\n\n\u003cp\u003e\u003ciframe src=\"https://hatenablog-parts.com/embed?url=https%3A%2F%2Fdeveloper.feedforce.jp%2Fentry%2F2019%2F07%2F29%2F140000\" title=\"Heroku Meetup #25 \u0026quot;Heroku Ghost\u0026quot; で 2 回話してきた #herokujp - Feedforce Developer Blog\" class=\"embed-card embed-blogcard\" scrolling=\"no\" frameborder=\"0\" style=\"display: block; width: 100%; height: 190px; max-width: 500px; margin: 10px 0px;\"\u003e\u003c/iframe\u003e\u003ccite class=\"hatena-citation\"\u003e\u003ca href=\"https://developer.feedforce.jp/entry/2019/07/29/140000\"\u003edeveloper.feedforce.jp\u003c/a\u003e\u003c/cite\u003e\u003c/p\u003e\n\n\u003ch2\u003e所感\u003c/h2\u003e\n\n\u003cp\u003e世の中では割と多くのバッチ処理が動いていると思います。ですが、Heroku 上でのバッチ処理はあまり情報がないので、今回紹介させて頂きました。技術スタックとしては、Rails の Active Job と Sidekiq です。\u003c/p\u003e\n\n\u003cp\u003e今回もニッチな発表ができてとても満足しています。会場にいる一人に刺されば大成功くらいの気持ちで発表していました。\u003c/p\u003e\n\n\u003cp\u003e中の人曰く、こんな One-Off Dyno の使い方をする人は初めて見たとのこと。(^^;\u003c/p\u003e\n\n\u003cp\u003e使い方としては問題ないそうですが、\u003ca href=\"https://devcenter.heroku.com/articles/dyno-runtime#private-spaces-runtime\"\u003ePrivate Spaces\u003c/a\u003e では Dyno の起動が遅いそうなので、そこはやや注意とのこと。\u003c/p\u003e\n\n\u003cp\u003e※ \u003ca href=\"https://ecbooster.jp/\"\u003eEC Booster\u003c/a\u003e では一般向けの \u003ca href=\"https://devcenter.heroku.com/articles/dyno-runtime#common-runtime\"\u003eCommon Runtime\u003c/a\u003e を使っています。\u003c/p\u003e\n\n\u003cp\u003eとは言え、\u003ca href=\"https://devcenter.heroku.com/articles/platform-api-reference#dyno-create\"\u003eDyno Create API\u003c/a\u003e は Dyno の起動完了を待たずに即座に終了するため、Private Spaces でも大丈夫みたいです。\u003c/p\u003e\n\n\u003cp\u003e\u003cblockquote class=\"twitter-tweet\" data-lang=\"ja\"\u003e\u003cp lang=\"ja\" dir=\"ltr\"\u003e.\u003ca href=\"https://twitter.com/masutaka?ref_src=twsrc%5Etfw\"\u003e@masutaka\u003c/a\u003e さんのお話 \u003ca href=\"https://twitter.com/hashtag/herokujp?src=hash\u0026amp;ref_src=twsrc%5Etfw\"\u003e#herokujp\u003c/a\u003e \u003ca href=\"https://t.co/RZnLFWq9qn\"\u003epic.twitter.com/RZnLFWq9qn\u003c/a\u003e\u003c/p\u003e\u0026mdash; Satoshi Nagano (@thisisnagano) \u003ca href=\"https://twitter.com/thisisnagano/status/1205437869453500416?ref_src=twsrc%5Etfw\"\u003e2019年12月13日\u003c/a\u003e\u003c/blockquote\u003e\u003cscript async src=\"https://platform.twitter.com/widgets.js\" charset=\"utf-8\"\u003e\u003c/script\u003e\u003c/p\u003e\n\n\u003cp\u003e明日は \u003ca href=\"https://qiita.com/seijikohara\"\u003e@seijikohara\u003c/a\u003e さんです。お楽しみに。\u003c/p\u003e\n","contentSnippet":"土曜日にこんにちは id:masutaka26 です。この記事は Heroku Advent Calendar 2019 の 14 日目の記事です。qiita.com昨日は @takahito0508 さんの『Salesforce の Org Development 用の Buildpack を作った話』でした。Heroku の Buildpack は割と簡単な仕組みなので、ハードルが低いですよね。さて、同じ日（2019/12/13）に開催された Heroku Meetup #27 \"Heroku Vitamin!\" で『デプロイで止まらないバッチ処理を求めて』というお題で発表してきました。Heroku meetup は前々回 #25 以来の参加と登壇です。developer.feedforce.jp所感世の中では割と多くのバッチ処理が動いていると思います。ですが、Heroku 上でのバッチ処理はあまり情報がないので、今回紹介させて頂きました。技術スタックとしては、Rails の Active Job と Sidekiq です。今回もニッチな発表ができてとても満足しています。会場にいる一人に刺されば大成功くらいの気持ちで発表していました。中の人曰く、こんな One-Off Dyno の使い方をする人は初めて見たとのこと。(^^;使い方としては問題ないそうですが、Private Spaces では Dyno の起動が遅いそうなので、そこはやや注意とのこと。※ EC Booster では一般向けの Common Runtime を使っています。とは言え、Dyno Create API は Dyno の起動完了を待たずに即座に終了するため、Private Spaces でも大丈夫みたいです。.@masutaka さんのお話 #herokujp pic.twitter.com/RZnLFWq9qn— Satoshi Nagano (@thisisnagano) 2019年12月13日明日は @seijikohara さんです。お楽しみに。","link":"https://developer.feedforce.jp/entry/2019/12/14/153000","isoDate":"2019-12-14T06:30:00.000Z","dateMiliSeconds":1576305000000,"imageUrl":"https://cdn-ak.f.st-hatena.com/images/fotolife/m/masutaka26/20191214/20191214151304.jpg","authorName":"masutaka"},{"title":"月末に起動したいバッチを sidekiq-cron で指定し、healthchecks.io で監視する","content":"\u003cp\u003eこんにちは。\u003ca href=\"http://blog.hatena.ne.jp/masutaka26/\" class=\"hatena-id-icon\"\u003e\u003cimg src=\"https://cdn.profile-image.st-hatena.com/users/masutaka26/profile.png\" width=\"16\" height=\"16\" alt=\"\" class=\"hatena-id-icon\"\u003eid:masutaka26\u003c/a\u003e です。\u003c/p\u003e\n\n\u003cp\u003e去年の 6/30 からジムに通い始めて、なんとか週に 2~3 のペースで続いています。サプリメントも半信半疑ながら毎日飲んでいますが、ドラッグストアや Amazon で買うと割と高いと思います。\u003c/p\u003e\n\n\u003cp\u003e個人的には \u003ca href=\"https://jp.iherb.com/\"\u003eiHerb\u003c/a\u003e がだいぶオススメです。以前 3.6kg のプロテインを買ったらなぜかキャンペーンが適用されて、30% オフの 6,517 円になりました。\u003c/p\u003e\n\n\u003cp\u003eさらにこの\u003ca href=\"https://www.youtube.com/watch?v=ue0EFA_SxZc\"\u003e案件動画\u003c/a\u003eを見て、プレワークアウトサプリ（C4 SPORT）にも手を出してしまいました。BCAA も飲んでいます。\u003c/p\u003e\n\n\u003cp\u003eTwitter とかで検索すると、初回 10% OFF の紹介コードが見つかると思います。さらにお得です。\u003c/p\u003e\n\n\u003cp\u003e何の記事でしたっけ...？そうだ、この記事は \u003ca href=\"https://adventar.org/calendars/4169\"\u003eFeedforce Advent Calendar 2019\u003c/a\u003e の 5 日目の記事です！\u003c/p\u003e\n\n\u003cp\u003e昨日は \u003ca href=\"http://blog.hatena.ne.jp/kano-e/\" class=\"hatena-id-icon\"\u003e\u003cimg src=\"https://cdn.profile-image.st-hatena.com/users/kano-e/profile.png\" width=\"16\" height=\"16\" alt=\"\" class=\"hatena-id-icon\"\u003eid:kano-e\u003c/a\u003e の「2019 年に会社ボドゲ棚から自宅に持ち帰ったボドゲたち」でした。変わらぬボドゲ愛・・・！\u003c/p\u003e\n\n\u003cp\u003e\u003ciframe src=\"https://hatenablog-parts.com/embed?url=http%3A%2F%2Fff-boardgame.hatenablog.com%2Fentry%2F2019%2F12%2F04%2F000000\" title=\"2019 年に会社ボドゲ棚から自宅に持ち帰ったボドゲたち - フィードフォース ボドゲ部\" class=\"embed-card embed-blogcard\" scrolling=\"no\" frameborder=\"0\" style=\"display: block; width: 100%; height: 190px; max-width: 500px; margin: 10px 0px;\"\u003e\u003c/iframe\u003e\u003ccite class=\"hatena-citation\"\u003e\u003ca href=\"http://ff-boardgame.hatenablog.com/entry/2019/12/04/000000\"\u003eff-boardgame.hatenablog.com\u003c/a\u003e\u003c/cite\u003e\u003c/p\u003e\n\n\u003ch2\u003esidekiq-cron で月末を指定する\u003c/h2\u003e\n\n\u003cp\u003e脈絡ありませんが、\u003ca href=\"https://github.com/ondrejbartas/sidekiq-cron\"\u003esidekiq-cron\u003c/a\u003e では \u003ccode\u003elast\u003c/code\u003e で月末を指定することが出来ます。\u003c/p\u003e\n\n\u003cp\u003e例えば \u003ccode\u003e0 12 last * * Asia/Tokyo\u003c/code\u003e の次回実行は \u003ccode\u003e2019/12/31 12:00 JST\u003c/code\u003e です。\u003ccode\u003e2019/11/30 12:00 JST\u003c/code\u003e は無事動きました。\u003c/p\u003e\n\n\u003cp\u003eこのような設定になります。\u003c/p\u003e\n\n\u003cpre class=\"code lang-yaml\" data-lang=\"yaml\" data-unlink\u003e\u003cspan class=\"synIdentifier\"\u003esample_job\u003c/span\u003e\u003cspan class=\"synSpecial\"\u003e:\u003c/span\u003e\n  \u003cspan class=\"synIdentifier\"\u003eactive_job\u003c/span\u003e\u003cspan class=\"synSpecial\"\u003e:\u003c/span\u003e \u003cspan class=\"synConstant\"\u003etrue\u003c/span\u003e\n  \u003cspan class=\"synIdentifier\"\u003ecron\u003c/span\u003e\u003cspan class=\"synSpecial\"\u003e:\u003c/span\u003e \u003cspan class=\"synConstant\"\u003e\u0026quot;0 12 last * * Asia/Tokyo\u0026quot;\u003c/span\u003e\n  \u003cspan class=\"synIdentifier\"\u003eclass\u003c/span\u003e\u003cspan class=\"synSpecial\"\u003e:\u003c/span\u003e \u003cspan class=\"synConstant\"\u003e\u0026quot;SampleJob\u0026quot;\u003c/span\u003e\n  \u003cspan class=\"synIdentifier\"\u003equeue\u003c/span\u003e\u003cspan class=\"synSpecial\"\u003e:\u003c/span\u003e default\n\u003c/pre\u003e\n\n\n\u003cp\u003eこの cron 書式は sidekiq-cron が依存する \u003ca href=\"https://github.com/floraison/fugit\"\u003efugit\u003c/a\u003e による実装です。\u003c/p\u003e\n\n\u003cp\u003e確認はしていませんが、\u003ccode\u003elast\u003c/code\u003e の他にも \u003ccode\u003e-1\u003c/code\u003e や \u003ccode\u003eL\u003c/code\u003e などが使えるようです。\u003c/p\u003e\n\n\u003cp\u003e🔗 \u003ca href=\"https://github.com/floraison/fugit/blob/v1.3.3/spec/cron_spec.rb#L734-L747\"\u003ehttps://github.com/floraison/fugit/blob/v1.3.3/spec/cron_spec.rb#L734-L747\u003c/a\u003e\u003c/p\u003e\n\n\u003cpre class=\"code lang-ruby\" data-lang=\"ruby\" data-unlink\u003econtext \u003cspan class=\"synSpecial\"\u003e'\u003c/span\u003e\u003cspan class=\"synConstant\"\u003enegative monthdays\u003c/span\u003e\u003cspan class=\"synSpecial\"\u003e'\u003c/span\u003e \u003cspan class=\"synStatement\"\u003edo\u003c/span\u003e\n\n  [\n    [ \u003cspan class=\"synSpecial\"\u003e'\u003c/span\u003e\u003cspan class=\"synConstant\"\u003e* * -1 * *\u003c/span\u003e\u003cspan class=\"synSpecial\"\u003e'\u003c/span\u003e, \u003cspan class=\"synSpecial\"\u003e'\u003c/span\u003e\u003cspan class=\"synConstant\"\u003e* * -1 * *\u003c/span\u003e\u003cspan class=\"synSpecial\"\u003e'\u003c/span\u003e ],\n    [ \u003cspan class=\"synSpecial\"\u003e'\u003c/span\u003e\u003cspan class=\"synConstant\"\u003e* * -7--1 * *\u003c/span\u003e\u003cspan class=\"synSpecial\"\u003e'\u003c/span\u003e, \u003cspan class=\"synSpecial\"\u003e'\u003c/span\u003e\u003cspan class=\"synConstant\"\u003e* * -7,-6,-5,-4,-3,-2,-1 * *\u003c/span\u003e\u003cspan class=\"synSpecial\"\u003e'\u003c/span\u003e ],\n    [ \u003cspan class=\"synSpecial\"\u003e'\u003c/span\u003e\u003cspan class=\"synConstant\"\u003e* * -1--27 * *\u003c/span\u003e\u003cspan class=\"synSpecial\"\u003e'\u003c/span\u003e, \u003cspan class=\"synSpecial\"\u003e'\u003c/span\u003e\u003cspan class=\"synConstant\"\u003e* * -31,-30,-29,-28,-27,-1 * *\u003c/span\u003e\u003cspan class=\"synSpecial\"\u003e'\u003c/span\u003e ],\n    [ \u003cspan class=\"synSpecial\"\u003e'\u003c/span\u003e\u003cspan class=\"synConstant\"\u003e* * -7--1/2 * *\u003c/span\u003e\u003cspan class=\"synSpecial\"\u003e'\u003c/span\u003e, \u003cspan class=\"synSpecial\"\u003e'\u003c/span\u003e\u003cspan class=\"synConstant\"\u003e* * -7,-5,-3,-1 * *\u003c/span\u003e\u003cspan class=\"synSpecial\"\u003e'\u003c/span\u003e ],\n    [ \u003cspan class=\"synSpecial\"\u003e'\u003c/span\u003e\u003cspan class=\"synConstant\"\u003e* * L * *\u003c/span\u003e\u003cspan class=\"synSpecial\"\u003e'\u003c/span\u003e, \u003cspan class=\"synSpecial\"\u003e'\u003c/span\u003e\u003cspan class=\"synConstant\"\u003e* * -1 * *\u003c/span\u003e\u003cspan class=\"synSpecial\"\u003e'\u003c/span\u003e ],\n    [ \u003cspan class=\"synSpecial\"\u003e'\u003c/span\u003e\u003cspan class=\"synConstant\"\u003e* * -7-L * *\u003c/span\u003e\u003cspan class=\"synSpecial\"\u003e'\u003c/span\u003e, \u003cspan class=\"synSpecial\"\u003e'\u003c/span\u003e\u003cspan class=\"synConstant\"\u003e* * -7,-6,-5,-4,-3,-2,-1 * *\u003c/span\u003e\u003cspan class=\"synSpecial\"\u003e'\u003c/span\u003e ],\n    [ \u003cspan class=\"synSpecial\"\u003e'\u003c/span\u003e\u003cspan class=\"synConstant\"\u003e* * last * *\u003c/span\u003e\u003cspan class=\"synSpecial\"\u003e'\u003c/span\u003e, \u003cspan class=\"synSpecial\"\u003e'\u003c/span\u003e\u003cspan class=\"synConstant\"\u003e* * -1 * *\u003c/span\u003e\u003cspan class=\"synSpecial\"\u003e'\u003c/span\u003e ],\n  ].each { |\u003cspan class=\"synIdentifier\"\u003ec\u003c/span\u003e, \u003cspan class=\"synIdentifier\"\u003ee\u003c/span\u003e|\n    it(\u003cspan class=\"synSpecial\"\u003e\u0026quot;\u003c/span\u003e\u003cspan class=\"synConstant\"\u003eparses \u003c/span\u003e\u003cspan class=\"synSpecial\"\u003e#{\u003c/span\u003ec\u003cspan class=\"synSpecial\"\u003e}\u0026quot;\u003c/span\u003e) { expect(\u003cspan class=\"synType\"\u003eFugit\u003c/span\u003e::\u003cspan class=\"synType\"\u003eCron\u003c/span\u003e.parse(c).to_cron_s).to eq(e) }\n  }\n\u003cspan class=\"synStatement\"\u003eend\u003c/span\u003e\n\u003c/pre\u003e\n\n\n\u003cp\u003e\u003ccode\u003enegative monthdays\u003c/code\u003e って表現は面白い。\u003c/p\u003e\n\n\u003ch2\u003ehealthchecks.io で月末のバッチを監視する\u003c/h2\u003e\n\n\u003cp\u003eバッチが本当に起動したかを監視するのは難しいと思います。月末の監視はさらに難しいと思います。\u003c/p\u003e\n\n\u003cp\u003e過度な依存は禁物ですが、\u003ca href=\"https://healthchecks.io/\"\u003ehealthchecks.io\u003c/a\u003e は選択肢に入れても良いかもしれません。以下の記事をどうぞ。\u003c/p\u003e\n\n\u003cp\u003e\u003ciframe src=\"https://hatenablog-parts.com/embed?url=https%3A%2F%2Fdeveloper.feedforce.jp%2Fentry%2F2018%2F10%2F09%2F140000\" title=\"terraform-provider-healthchecksio に足りない機能を実装したらコラボレータになれた - Feedforce Developer Blog\" class=\"embed-card embed-blogcard\" scrolling=\"no\" frameborder=\"0\" style=\"display: block; width: 100%; height: 190px; max-width: 500px; margin: 10px 0px;\"\u003e\u003c/iframe\u003e\u003ccite class=\"hatena-citation\"\u003e\u003ca href=\"https://developer.feedforce.jp/entry/2018/10/09/140000\"\u003edeveloper.feedforce.jp\u003c/a\u003e\u003c/cite\u003e\u003c/p\u003e\n\n\u003cp\u003e前述の cron 設定だと \u003ccode\u003e0 12 l * *\u003c/code\u003e で監視することが出来ます。\u003ccode\u003el\u003c/code\u003e は小文字のエルです。\u003c/p\u003e\n\n\u003cp\u003eterraform-provider-healthchecksio の設定例です。\u003c/p\u003e\n\n\u003cpre class=\"code lang-tf\" data-lang=\"tf\" data-unlink\u003eresource \u0026quot;\u003cspan class=\"synConstant\"\u003ehealthchecksio_check\u003c/span\u003e\u0026quot; \u0026quot;\u003cspan class=\"synConstant\"\u003esample_job\u003c/span\u003e\u0026quot; \u003cspan class=\"synSpecial\"\u003e{\u003c/span\u003e\n  name     \u003cspan class=\"synStatement\"\u003e=\u003c/span\u003e \u0026quot;\u003cspan class=\"synConstant\"\u003eSampleJob\u003c/span\u003e\u0026quot;\n  tags     \u003cspan class=\"synStatement\"\u003e=\u003c/span\u003e \u003cspan class=\"synSpecial\"\u003e[\u003c/span\u003e\u0026quot;\u003cspan class=\"synConstant\"\u003eproduction\u003c/span\u003e\u0026quot;\u003cspan class=\"synSpecial\"\u003e]\u003c/span\u003e\n  grace    \u003cspan class=\"synStatement\"\u003e=\u003c/span\u003e \u0026quot;\u003cspan class=\"synConstant\"\u003e60\u003c/span\u003e\u0026quot;\n  schedule \u003cspan class=\"synStatement\"\u003e=\u003c/span\u003e \u0026quot;\u003cspan class=\"synConstant\"\u003e0 12 l * *\u003c/span\u003e\u0026quot;\n  timezone \u003cspan class=\"synStatement\"\u003e=\u003c/span\u003e \u0026quot;\u003cspan class=\"synConstant\"\u003eAsia/Tokyo\u003c/span\u003e\u0026quot;\n  channels \u003cspan class=\"synStatement\"\u003e=\u003c/span\u003e \u003cspan class=\"synSpecial\"\u003e[\u003c/span\u003edata.healthchecksio_channel.slack.id\u003cspan class=\"synSpecial\"\u003e]\u003c/span\u003e\n\u003cspan class=\"synSpecial\"\u003e}\u003c/span\u003e\n\ndata \u0026quot;\u003cspan class=\"synConstant\"\u003ehealthchecksio_channel\u003c/span\u003e\u0026quot; \u0026quot;\u003cspan class=\"synConstant\"\u003eslack\u003c/span\u003e\u0026quot; \u003cspan class=\"synSpecial\"\u003e{\u003c/span\u003e\n  kind \u003cspan class=\"synStatement\"\u003e=\u003c/span\u003e \u0026quot;\u003cspan class=\"synConstant\"\u003eslack\u003c/span\u003e\u0026quot;\n\u003cspan class=\"synSpecial\"\u003e}\u003c/span\u003e\n\u003c/pre\u003e\n\n\n\u003cp\u003eこちらの cron 書式は \u003ca href=\"https://github.com/healthchecks/healthchecks\"\u003ehealthchecks\u003c/a\u003e が依存する \u003ca href=\"https://github.com/taichino/croniter\"\u003ecroniter\u003c/a\u003e による実装です。\u003c/p\u003e\n\n\u003cp\u003e\u003ccode\u003el\u003c/code\u003e 以外の指定は見当たりませんでした。\u003c/p\u003e\n\n\u003cp\u003e🔗 \u003ca href=\"https://github.com/taichino/croniter/blob/0.3.29/src/croniter/tests/test_croniter.py#L209-L223\"\u003ehttps://github.com/taichino/croniter/blob/0.3.29/src/croniter/tests/test_croniter.py#L209-L223\u003c/a\u003e\u003c/p\u003e\n\n\u003cpre class=\"code lang-python\" data-lang=\"python\" data-unlink\u003e\u003cspan class=\"synStatement\"\u003edef\u003c/span\u003e \u003cspan class=\"synIdentifier\"\u003etestLastDayOfMonth\u003c/span\u003e(self):\n    base = datetime(\u003cspan class=\"synConstant\"\u003e2015\u003c/span\u003e, \u003cspan class=\"synConstant\"\u003e9\u003c/span\u003e, \u003cspan class=\"synConstant\"\u003e4\u003c/span\u003e)\n    itr = croniter(\u003cspan class=\"synConstant\"\u003e'0 0 l * *'\u003c/span\u003e, base)\n    n1 = itr.get_next(datetime)\n    self.assertEqual(n1.month, \u003cspan class=\"synConstant\"\u003e9\u003c/span\u003e)\n    self.assertEqual(n1.day, \u003cspan class=\"synConstant\"\u003e30\u003c/span\u003e)\n    n2 = itr.get_next(datetime)\n    self.assertEqual(n2.month, \u003cspan class=\"synConstant\"\u003e10\u003c/span\u003e)\n    self.assertEqual(n2.day, \u003cspan class=\"synConstant\"\u003e31\u003c/span\u003e)\n    n3 = itr.get_next(datetime)\n    self.assertEqual(n3.month, \u003cspan class=\"synConstant\"\u003e11\u003c/span\u003e)\n    self.assertEqual(n3.day, \u003cspan class=\"synConstant\"\u003e30\u003c/span\u003e)\n    n4 = itr.get_next(datetime)\n    self.assertEqual(n4.month, \u003cspan class=\"synConstant\"\u003e12\u003c/span\u003e)\n    self.assertEqual(n4.day, \u003cspan class=\"synConstant\"\u003e31\u003c/span\u003e)\n\u003c/pre\u003e\n\n\n\u003cp\u003e2019 年もそろそろ終わりです。年末にだけ動くバッチを設定＆監視するのも良いかもしれません。\u003c/p\u003e\n\n\u003cp\u003e明日は、こばりゅうの記事です。ひこうきかっけー！？お楽しみに。\u003c/p\u003e\n","contentSnippet":"こんにちは。id:masutaka26 です。去年の 6/30 からジムに通い始めて、なんとか週に 2~3 のペースで続いています。サプリメントも半信半疑ながら毎日飲んでいますが、ドラッグストアや Amazon で買うと割と高いと思います。個人的には iHerb がだいぶオススメです。以前 3.6kg のプロテインを買ったらなぜかキャンペーンが適用されて、30% オフの 6,517 円になりました。さらにこの案件動画を見て、プレワークアウトサプリ（C4 SPORT）にも手を出してしまいました。BCAA も飲んでいます。Twitter とかで検索すると、初回 10% OFF の紹介コードが見つかると思います。さらにお得です。何の記事でしたっけ...？そうだ、この記事は Feedforce Advent Calendar 2019 の 5 日目の記事です！昨日は id:kano-e の「2019 年に会社ボドゲ棚から自宅に持ち帰ったボドゲたち」でした。変わらぬボドゲ愛・・・！ff-boardgame.hatenablog.comsidekiq-cron で月末を指定する脈絡ありませんが、sidekiq-cron では last で月末を指定することが出来ます。例えば 0 12 last * * Asia/Tokyo の次回実行は 2019/12/31 12:00 JST です。2019/11/30 12:00 JST は無事動きました。このような設定になります。sample_job:  active_job: true  cron: \"0 12 last * * Asia/Tokyo\"  class: \"SampleJob\"  queue: defaultこの cron 書式は sidekiq-cron が依存する fugit による実装です。確認はしていませんが、last の他にも -1 や L などが使えるようです。🔗 https://github.com/floraison/fugit/blob/v1.3.3/spec/cron_spec.rb#L734-L747context 'negative monthdays' do  [    [ '* * -1 * *', '* * -1 * *' ],    [ '* * -7--1 * *', '* * -7,-6,-5,-4,-3,-2,-1 * *' ],    [ '* * -1--27 * *', '* * -31,-30,-29,-28,-27,-1 * *' ],    [ '* * -7--1/2 * *', '* * -7,-5,-3,-1 * *' ],    [ '* * L * *', '* * -1 * *' ],    [ '* * -7-L * *', '* * -7,-6,-5,-4,-3,-2,-1 * *' ],    [ '* * last * *', '* * -1 * *' ],  ].each { |c, e|    it(\"parses #{c}\") { expect(Fugit::Cron.parse(c).to_cron_s).to eq(e) }  }endnegative monthdays って表現は面白い。healthchecks.io で月末のバッチを監視するバッチが本当に起動したかを監視するのは難しいと思います。月末の監視はさらに難しいと思います。過度な依存は禁物ですが、healthchecks.io は選択肢に入れても良いかもしれません。以下の記事をどうぞ。developer.feedforce.jp前述の cron 設定だと 0 12 l * * で監視することが出来ます。l は小文字のエルです。terraform-provider-healthchecksio の設定例です。resource \"healthchecksio_check\" \"sample_job\" {  name     = \"SampleJob\"  tags     = [\"production\"]  grace    = \"60\"  schedule = \"0 12 l * *\"  timezone = \"Asia/Tokyo\"  channels = [data.healthchecksio_channel.slack.id]}data \"healthchecksio_channel\" \"slack\" {  kind = \"slack\"}こちらの cron 書式は healthchecks が依存する croniter による実装です。l 以外の指定は見当たりませんでした。🔗 https://github.com/taichino/croniter/blob/0.3.29/src/croniter/tests/test_croniter.py#L209-L223def testLastDayOfMonth(self):    base = datetime(2015, 9, 4)    itr = croniter('0 0 l * *', base)    n1 = itr.get_next(datetime)    self.assertEqual(n1.month, 9)    self.assertEqual(n1.day, 30)    n2 = itr.get_next(datetime)    self.assertEqual(n2.month, 10)    self.assertEqual(n2.day, 31)    n3 = itr.get_next(datetime)    self.assertEqual(n3.month, 11)    self.assertEqual(n3.day, 30)    n4 = itr.get_next(datetime)    self.assertEqual(n4.month, 12)    self.assertEqual(n4.day, 31)2019 年もそろそろ終わりです。年末にだけ動くバッチを設定＆監視するのも良いかもしれません。明日は、こばりゅうの記事です。ひこうきかっけー！？お楽しみに。","link":"https://developer.feedforce.jp/entry/2019/12/05/101931","isoDate":"2019-12-05T01:19:31.000Z","dateMiliSeconds":1575508771000,"imageUrl":"https://cdn-ak.f.st-hatena.com/images/fotolife/m/masutaka26/20191205/20191205000250.png","authorName":"masutaka"},{"title":"Heroku Meetup #25 \"Heroku Ghost\" で 2 回話してきた #herokujp","content":"\u003cp\u003eこんにちは \u003ca href=\"http://blog.hatena.ne.jp/masutaka26/\" class=\"hatena-id-icon\"\u003e\u003cimg src=\"https://cdn.profile-image.st-hatena.com/users/masutaka26/profile.png\" width=\"16\" height=\"16\" alt=\"\" class=\"hatena-id-icon\"\u003eid:masutaka26\u003c/a\u003e です。\u003c/p\u003e\n\n\u003cp\u003e先週金曜日（2019/7/26）に開催された \u003ca href=\"https://herokujp.doorkeeper.jp/events/93092\"\u003eHeroku Meetup #25 \"Heroku Ghost\"\u003c/a\u003e で『デプロイ元をCircleCIからHerokuに乗り換えた』というお題で発表してきました。\u003c/p\u003e\n\n\u003ciframe src=\"https://docs.google.com/presentation/d/e/2PACX-1vRy7z2A77VE4UNCp7EhpFgeQr7fl8XqHolYwsaokN76rGCvoeo1SKh1hkNg3ew2D4pSLoQAz-iefLnR/embed?start=false\u0026loop=false\u0026delayms=3000\" frameborder=\"0\" width=\"960\" height=\"400\" allowfullscreen=\"true\" mozallowfullscreen=\"true\" webkitallowfullscreen=\"true\"\u003e\u003c/iframe\u003e\n\n\n\u003cp\u003eつい先日、現在関わっている \u003ca href=\"https://app.ecbooster.jp/\"\u003eEC Booster\u003c/a\u003e のデプロイフローを改善し、それなりに知見を得られたためです。\u003c/p\u003e\n\n\u003cp\u003eHeroku Meetup の参加は\u003ca href=\"https://herokujp.doorkeeper.jp/events/91348\"\u003e前回 #24\u003c/a\u003e に引き続き、セッションでの発表は\u003ca href=\"https://herokujp.doorkeeper.jp/events/82754\"\u003e前々回 #23\u003c/a\u003e 以来です。\u003c/p\u003e\n\n\u003cp\u003e前々回 #23 については自分のブログにも書きました。\u003c/p\u003e\n\n\u003cp\u003e\u003ca href=\"https://masutaka.net/chalow/2018-11-28-1.html\"\u003eHeroku Meetup #23 \"Heroku Dynamite!!\" で話してきた #herokujp / マスタカの ChangeLog メモ\u003c/a\u003e\u003c/p\u003e\n\n\u003ch2\u003eLT でも話した\u003c/h2\u003e\n\n\u003cp\u003eLT でも飛び込みで話しました。内容は \u003ca href=\"https://github.com/heroku/heroku-buildpack-google-chrome\"\u003eheroku-buildpack-google-chrome\u003c/a\u003e と \u003ca href=\"https://github.com/heroku/heroku-buildpack-chromedriver\"\u003eheroku-buildpack-chromedriver\u003c/a\u003e の細かすぎる話です。動かない Chrome や chromedriver のバイナリが本番環境にデプロイされることを防ぐ方法や、それに関して PR を出した話など。スライドの 41~43 ページ目が相当します。\u003c/p\u003e\n\n\u003cp\u003e無駄に元気な 1 日でした。\u003c/p\u003e\n\n\u003cp\u003e\u003cblockquote class=\"twitter-tweet\" data-lang=\"ja\"\u003e\u003cp lang=\"ja\" dir=\"ltr\"\u003e今日は会社で LT 1 本やって、Heroku meetup で通常セッション 1 本、その後に飛び込み（？）で LT 1 本やった。さすがにもうこの数をやることないかな？ \u003ca href=\"https://twitter.com/hashtag/herokujp?src=hash\u0026amp;ref_src=twsrc%5Etfw\"\u003e#herokujp\u003c/a\u003e\u003c/p\u003e\u0026mdash; Takashi MASUDA (@masutaka) \u003ca href=\"https://twitter.com/masutaka/status/1154719579374936065?ref_src=twsrc%5Etfw\"\u003e2019年7月26日\u003c/a\u003e\u003c/blockquote\u003e\u003cscript async src=\"https://platform.twitter.com/widgets.js\" charset=\"utf-8\"\u003e\u003c/script\u003e\u003c/p\u003e\n\n\u003cp\u003e※ 44~45 ページ目は、尺の関係で削ったブランチ戦略のメモです。ベストな戦略ではないので改善予定。\u003c/p\u003e\n\n\u003ch2\u003e雑感\u003c/h2\u003e\n\n\u003cp\u003e初心者向けの知見に比べて、一歩進んだ Heroku 知見はあまり Web 上に存在しない印象です。\u003c/p\u003e\n\n\u003cp\u003eここ 1 年近く、それなりに Heroku を学習してきて「かなりの規模まで Heroku で十分では？」「デプロイや Dyno の再起動で中断されるため苦手とされがちなバッチ処理も、簡単に克服できるのでは？」などと、考えが変わってきています。\u003c/p\u003e\n\n\u003cp\u003eこれからもブログや登壇などで、コミュニティに還元していきます。\u003c/p\u003e\n\n\u003cp\u003e\u003cblockquote class=\"twitter-tweet\" data-lang=\"ja\"\u003e\u003cp lang=\"ja\" dir=\"ltr\"\u003e本日の頂き物。キャップはスピーカー特典 \u003ca href=\"https://twitter.com/hashtag/herokujp?src=hash\u0026amp;ref_src=twsrc%5Etfw\"\u003e#herokujp\u003c/a\u003e \u003ca href=\"https://t.co/Whc3UVJrbg\"\u003epic.twitter.com/Whc3UVJrbg\u003c/a\u003e\u003c/p\u003e\u0026mdash; Takashi MASUDA (@masutaka) \u003ca href=\"https://twitter.com/masutaka/status/1154746086814150658?ref_src=twsrc%5Etfw\"\u003e2019年7月26日\u003c/a\u003e\u003c/blockquote\u003e\u003cscript async src=\"https://platform.twitter.com/widgets.js\" charset=\"utf-8\"\u003e\u003c/script\u003e\u003c/p\u003e\n","contentSnippet":"こんにちは id:masutaka26 です。先週金曜日（2019/7/26）に開催された Heroku Meetup #25 \"Heroku Ghost\" で『デプロイ元をCircleCIからHerokuに乗り換えた』というお題で発表してきました。つい先日、現在関わっている EC Booster のデプロイフローを改善し、それなりに知見を得られたためです。Heroku Meetup の参加は前回 #24 に引き続き、セッションでの発表は前々回 #23 以来です。前々回 #23 については自分のブログにも書きました。Heroku Meetup #23 \"Heroku Dynamite!!\" で話してきた #herokujp / マスタカの ChangeLog メモLT でも話したLT でも飛び込みで話しました。内容は heroku-buildpack-google-chrome と heroku-buildpack-chromedriver の細かすぎる話です。動かない Chrome や chromedriver のバイナリが本番環境にデプロイされることを防ぐ方法や、それに関して PR を出した話など。スライドの 41~43 ページ目が相当します。無駄に元気な 1 日でした。今日は会社で LT 1 本やって、Heroku meetup で通常セッション 1 本、その後に飛び込み（？）で LT 1 本やった。さすがにもうこの数をやることないかな？ #herokujp— Takashi MASUDA (@masutaka) 2019年7月26日※ 44~45 ページ目は、尺の関係で削ったブランチ戦略のメモです。ベストな戦略ではないので改善予定。雑感初心者向けの知見に比べて、一歩進んだ Heroku 知見はあまり Web 上に存在しない印象です。ここ 1 年近く、それなりに Heroku を学習してきて「かなりの規模まで Heroku で十分では？」「デプロイや Dyno の再起動で中断されるため苦手とされがちなバッチ処理も、簡単に克服できるのでは？」などと、考えが変わってきています。これからもブログや登壇などで、コミュニティに還元していきます。本日の頂き物。キャップはスピーカー特典 #herokujp pic.twitter.com/Whc3UVJrbg— Takashi MASUDA (@masutaka) 2019年7月26日","link":"https://developer.feedforce.jp/entry/2019/07/29/140000","isoDate":"2019-07-29T05:00:00.000Z","dateMiliSeconds":1564376400000,"imageUrl":"https://cdn-ak.f.st-hatena.com/images/fotolife/m/masutaka26/20181113/20181113190345.png","authorName":"masutaka"},{"title":"esa をネタに Emacs Lisp と Elm を無理やり繋げた発表をした","content":"\u003cp\u003eこんにちは。増田（\u003ca href=\"http://blog.hatena.ne.jp/masutaka26/\" class=\"hatena-id-icon\"\u003e\u003cimg src=\"https://cdn.profile-image.st-hatena.com/users/masutaka26/profile.png\" width=\"16\" height=\"16\" alt=\"\" class=\"hatena-id-icon\"\u003eid:masutaka26\u003c/a\u003e）です。今回はネタ探しに特に苦労しました。\u003c/p\u003e\n\n\u003cp\u003e週次の社内勉強会 \u003ca href=\"https://developer.feedforce.jp/archive/category/FFTT\"\u003eFFTT\u003c/a\u003e で『esaを支えたい技術』という発表をしました。\u003c/p\u003e\n\n\u003cp\u003e\u003ca href=\"https://esa.io/\"\u003eesa\u003c/a\u003e をネタに Emacs Lisp と \u003ca href=\"https://elm-lang.org/\"\u003eElm\u003c/a\u003e を無理やり繋げた内容です。ちょっと強引だった。\u003c/p\u003e\n\n\u003ch2\u003e発表の内容\u003c/h2\u003e\n\n\u003cscript async class=\"speakerdeck-embed\" data-id=\"61df048e1aec4413bd797af156bc5f21\" data-ratio=\"1.33333333333333\" src=\"//speakerdeck.com/assets/embed.js\"\u003e\u003c/script\u003e\n\n\n\u003cp\u003e流れとしては、↓ こんな感じです。\u003c/p\u003e\n\n\u003cul\u003e\n\u003cli\u003e先月 \u003ca href=\"https://github.com/masutaka/emacs-helm-esa\"\u003eemacs-helm-esa\u003c/a\u003e というツールを作ったよ\u003c/li\u003e\n\u003cli\u003eElm を学んだら、Emacs Lisp と Syntax が似ていたよ\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"https://github.com/masutaka/sandbox-elm-esa\"\u003eesa の検索をするだけの簡単なツール\u003c/a\u003eを作ったよ\u003c/li\u003e\n\u003c/ul\u003e\n\n\n\u003ch2\u003e発表の感想\u003c/h2\u003e\n\n\u003cp\u003e付箋紙に感想を書いてくれました。\u003ci class=\"blogicon-comment\" aria-hidden=\"true\"\u003e\u003c/i\u003e は私からのコメントです。\u003c/p\u003e\n\n\u003cul\u003e\n\u003cli\u003e関数型言語について学んでみたいと思っていたので、おすすめの順序を提示してくださり、参考になりました！\n\n\u003cul\u003e\n\u003cli\u003e\u003ci class=\"blogicon-comment\" aria-hidden=\"true\"\u003e\u003c/i\u003e 良かったです。Elm はだいぶ学びやすかったです\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003eElm、こうして見てみると Haskell にめっちゃ似てますね！\n\n\u003cul\u003e\n\u003cli\u003e\u003ci class=\"blogicon-comment\" aria-hidden=\"true\"\u003e\u003c/i\u003e そうなんですね\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e発表の流れで Elm の話になると思わなかった\n\n\u003cul\u003e\n\u003cli\u003e\u003ci class=\"blogicon-comment\" aria-hidden=\"true\"\u003e\u003c/i\u003e 強引でしたね (^^;\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003eElm ならふだんバックエンドのコード書いている人でもモダンなフロントエンド書けるって聞いたので勉強がんばる（決意）\n\n\u003cul\u003e\n\u003cli\u003e\u003ci class=\"blogicon-comment\" aria-hidden=\"true\"\u003e\u003c/i\u003e 刺激になってよかったです\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e良かったです！規模が大きくなってきても同じノリで書けるのも Elm は良い\n\n\u003cul\u003e\n\u003cli\u003e\u003ci class=\"blogicon-comment\" aria-hidden=\"true\"\u003e\u003c/i\u003e そういう感じなんですね。コンパイルが通ればだいたい動くのが楽でした\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003eElm の HTML を作るのがすごいですね！\n\n\u003cul\u003e\n\u003cli\u003e\u003ci class=\"blogicon-comment\" aria-hidden=\"true\"\u003e\u003c/i\u003e ですよね。\u003ca href=\"https://github.com/masutaka/sandbox-elm-esa/blob/b46bb8d405030a96ab3049a8aac1450decf0adf9/src/Main.elm#L93\"\u003eこの辺りの div や i\u003c/a\u003e は全部関数ですからね\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003eネタバレに慎重になりすぎでは！？\n\n\u003cul\u003e\n\u003cli\u003e\u003ci class=\"blogicon-comment\" aria-hidden=\"true\"\u003e\u003c/i\u003e 自分でも全く理解できません\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e来週にはこれが Chrome 拡張になっているんですかね？\n\n\u003cul\u003e\n\u003cli\u003e\u003ci class=\"blogicon-comment\" aria-hidden=\"true\"\u003e\u003c/i\u003e はい、次回以降の当番の方が必ず・・・！\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003eElm おもしろそう 🏃‍♀️🚶‍♂️ emacs ってすごいんですね\n\n\u003cul\u003e\n\u003cli\u003e\u003ci class=\"blogicon-comment\" aria-hidden=\"true\"\u003e\u003c/i\u003e とは言え、今の時代は emacs の他に優先順位の高いものがたくさんありますね 💦\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003eまさかの Elm とは！？\n\n\u003cul\u003e\n\u003cli\u003e\u003ci class=\"blogicon-comment\" aria-hidden=\"true\"\u003e\u003c/i\u003e 考えに考えた末の Elm です...\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003eこれで EC Booster Front 開発できますね\n\n\u003cul\u003e\n\u003cli\u003e\u003ci class=\"blogicon-comment\" aria-hidden=\"true\"\u003e\u003c/i\u003e 見ててくださいよ！これからのマスタカを！！１\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\n\n\u003ch2\u003e所感\u003c/h2\u003e\n\n\u003cp\u003e正直、外したかな？と思いながら発表してましたが、感想を読むと良い刺激を与えられたようで良かったです。\u003c/p\u003e\n\n\u003cp\u003e一方で新しい言語の説明は難しいうえ、皆さんに馴染みがない Emacs Lisp との比較をしたので、余計に分かりづらかったという...。\u003c/p\u003e\n\n\u003cp\u003eこうするとあまり盛り上がらないという学びを得たことと、個人的には大変満足のいく内容だったので、結果的には良かったです。\u003c/p\u003e\n\n\u003cp\u003eさて、次回の勉強会のネタはどうするかな...。\u003c/p\u003e\n\n\u003cp\u003e\u003cdiv class=\"hatena-asin-detail\"\u003e\u003ca href=\"https://www.amazon.co.jp/exec/obidos/ASIN/4863542224/hatena-blog-22/\"\u003e\u003cimg src=\"https://m.media-amazon.com/images/I/51G32HC7rSL.jpg\" class=\"hatena-asin-detail-image\" alt=\"基礎からわかる Elm\" title=\"基礎からわかる Elm\"\u003e\u003c/a\u003e\u003cdiv class=\"hatena-asin-detail-info\"\u003e\u003cp class=\"hatena-asin-detail-title\"\u003e\u003ca href=\"https://www.amazon.co.jp/exec/obidos/ASIN/4863542224/hatena-blog-22/\"\u003e基礎からわかる Elm\u003c/a\u003e\u003c/p\u003e\u003cul\u003e\u003cli\u003e\u003cspan class=\"hatena-asin-detail-label\"\u003e作者:\u003c/span\u003e\u003ca href=\"http://d.hatena.ne.jp/keyword/%C4%BB%B5%EF%20%CD%DB%B2%F0\" class=\"keyword\"\u003e鳥居 陽介\u003c/a\u003e\u003c/li\u003e\u003cli\u003e\u003cspan class=\"hatena-asin-detail-label\"\u003e発売日:\u003c/span\u003e 2019/02/27\u003c/li\u003e\u003cli\u003e\u003cspan class=\"hatena-asin-detail-label\"\u003eメディア:\u003c/span\u003e 単行本（ソフトカバー）\u003c/li\u003e\u003c/ul\u003e\u003c/div\u003e\u003cdiv class=\"hatena-asin-detail-foot\"\u003e\u003c/div\u003e\u003c/div\u003e\u003c/p\u003e\n","contentSnippet":"こんにちは。増田（id:masutaka26）です。今回はネタ探しに特に苦労しました。週次の社内勉強会 FFTT で『esaを支えたい技術』という発表をしました。esa をネタに Emacs Lisp と Elm を無理やり繋げた内容です。ちょっと強引だった。発表の内容流れとしては、↓ こんな感じです。先月 emacs-helm-esa というツールを作ったよElm を学んだら、Emacs Lisp と Syntax が似ていたよesa の検索をするだけの簡単なツールを作ったよ発表の感想付箋紙に感想を書いてくれました。 は私からのコメントです。関数型言語について学んでみたいと思っていたので、おすすめの順序を提示してくださり、参考になりました！ 良かったです。Elm はだいぶ学びやすかったですElm、こうして見てみると Haskell にめっちゃ似てますね！ そうなんですね発表の流れで Elm の話になると思わなかった 強引でしたね (^^;Elm ならふだんバックエンドのコード書いている人でもモダンなフロントエンド書けるって聞いたので勉強がんばる（決意） 刺激になってよかったです良かったです！規模が大きくなってきても同じノリで書けるのも Elm は良い そういう感じなんですね。コンパイルが通ればだいたい動くのが楽でしたElm の HTML を作るのがすごいですね！ ですよね。この辺りの div や i は全部関数ですからねネタバレに慎重になりすぎでは！？ 自分でも全く理解できません来週にはこれが Chrome 拡張になっているんですかね？ はい、次回以降の当番の方が必ず・・・！Elm おもしろそう 🏃‍♀️🚶‍♂️ emacs ってすごいんですね とは言え、今の時代は emacs の他に優先順位の高いものがたくさんありますね 💦まさかの Elm とは！？ 考えに考えた末の Elm です...これで EC Booster Front 開発できますね 見ててくださいよ！これからのマスタカを！！１所感正直、外したかな？と思いながら発表してましたが、感想を読むと良い刺激を与えられたようで良かったです。一方で新しい言語の説明は難しいうえ、皆さんに馴染みがない Emacs Lisp との比較をしたので、余計に分かりづらかったという...。こうするとあまり盛り上がらないという学びを得たことと、個人的には大変満足のいく内容だったので、結果的には良かったです。さて、次回の勉強会のネタはどうするかな...。基礎からわかる Elm作者:鳥居 陽介発売日: 2019/02/27メディア: 単行本（ソフトカバー）","link":"https://developer.feedforce.jp/entry/2019/07/01/140000","isoDate":"2019-07-01T05:00:00.000Z","dateMiliSeconds":1561957200000,"imageUrl":"https://images-fe.ssl-images-amazon.com/images/I/51G32HC7rSL._SL160_.jpg","authorName":"masutaka"},{"title":"Heroku で Chrome を使ったクローラの IP アドレスを固定する","content":"\u003cp\u003eこんにちは \u003ca href=\"http://blog.hatena.ne.jp/masutaka26/\" class=\"hatena-id-icon\"\u003e\u003cimg src=\"https://cdn.profile-image.st-hatena.com/users/masutaka26/profile.png\" width=\"16\" height=\"16\" alt=\"\" class=\"hatena-id-icon\"\u003eid:masutaka26\u003c/a\u003e です。\u003c/p\u003e\n\n\u003cp\u003e少し前に、Heroku の worker Dyno 上で動く、Chrome のクローラで IP アドレスを固定化出来ないか調査しました。\u003c/p\u003e\n\n\u003cp\u003e実装は見送られましたが、想定よりも難しく調査に時間がかかったので、この記事に残しておきます。\u003c/p\u003e\n\n\u003cp\u003e方法だけ知りたい方は、下の方にある「手順」をご覧ください。\u003c/p\u003e\n\n\u003cul class=\"table-of-contents\"\u003e\n    \u003cli\u003e\u003ca href=\"#Heroku-Add-on-を比較する\"\u003eHeroku Add-on を比較する\u003c/a\u003e\u003cul\u003e\n            \u003cli\u003e\u003ca href=\"#開発組織\"\u003e開発組織\u003c/a\u003e\u003c/li\u003e\n            \u003cli\u003e\u003ca href=\"#実装\"\u003e実装\u003c/a\u003e\u003c/li\u003e\n            \u003cli\u003e\u003ca href=\"#プラン\"\u003eプラン\u003c/a\u003e\u003c/li\u003e\n            \u003cli\u003e\u003ca href=\"#CLI-のインストール\"\u003eCLI のインストール\u003c/a\u003e\u003c/li\u003e\n            \u003cli\u003e\u003ca href=\"#Heroku-Buildpack\"\u003eHeroku Buildpack\u003c/a\u003e\u003c/li\u003e\n        \u003c/ul\u003e\n    \u003c/li\u003e\n    \u003cli\u003e\u003ca href=\"#コラム-固定-IP-アドレスへの私見\"\u003e[コラム] 固定 IP アドレスへの私見\u003c/a\u003e\u003c/li\u003e\n    \u003cli\u003e\u003ca href=\"#Chrome-のクローラで-IP-アドレスを固定化する\"\u003eChrome のクローラで IP アドレスを固定化する\u003c/a\u003e\u003cul\u003e\n            \u003cli\u003e\u003ca href=\"#試行錯誤の日々\"\u003e試行錯誤の日々\u003c/a\u003e\u003c/li\u003e\n            \u003cli\u003e\u003ca href=\"#ついに成功\"\u003eついに成功\u003c/a\u003e\u003c/li\u003e\n            \u003cli\u003e\u003ca href=\"#手順\"\u003e手順\u003c/a\u003e\u003c/li\u003e\n        \u003c/ul\u003e\n    \u003c/li\u003e\n    \u003cli\u003e\u003ca href=\"#QuotaGuard-Static-の注意事項\"\u003eQuotaGuard Static の注意事項\u003c/a\u003e\u003c/li\u003e\n    \u003cli\u003e\u003ca href=\"#まとめ\"\u003eまとめ\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\n\u003ch2 id=\"Heroku-Add-on-を比較する\"\u003eHeroku Add-on を比較する\u003c/h2\u003e\n\n\u003cp\u003e今回は \u003ca href=\"https://elements.heroku.com/addons/proximo\"\u003eProximo\u003c/a\u003e と \u003ca href=\"https://elements.heroku.com/addons/quotaguardstatic\"\u003eQuotaGuard Static\u003c/a\u003e を検討し、最終的に QuotaGuard Static を採用しました。\u003c/p\u003e\n\n\u003cp\u003e💡 他に \u003ca href=\"https://elements.heroku.com/addons/fixie\"\u003eFixie\u003c/a\u003e, \u003ca href=\"https://elements.heroku.com/addons/fixie-socks\"\u003eFixie Socks\u003c/a\u003e, \u003ca href=\"https://elements.heroku.com/addons/guru301\"\u003eGuru301\u003c/a\u003e などがあるようです。\u003c/p\u003e\n\n\u003cp\u003e以下、その理由です。\u003c/p\u003e\n\n\u003ch3 id=\"開発組織\"\u003e開発組織\u003c/h3\u003e\n\n\u003cp\u003eProximo は \u003ca href=\"https://github.com/pirateradio\"\u003ehttps://github.com/pirateradio\u003c/a\u003e を見た感じ \u003ca href=\"https://github.com/ddollar\"\u003e@ddollar\u003c/a\u003e の個人開発のようです。この方は \u003ca href=\"https://github.com/ddollar/foreman\"\u003eforeman\u003c/a\u003e などを作っており、多分すごい人です。\u003c/p\u003e\n\n\u003cp\u003eQuotaGuard Static は \u003ca href=\"https://www.quotaguard.com/\"\u003ehttps://www.quotaguard.com/\u003c/a\u003e によると \u003ca href=\"https://www.alpineshark.com/\"\u003eAlpine Shark, LLC\u003c/a\u003e のようです。会社のほうがちょっとだけ安心できます。\u003c/p\u003e\n\n\u003ch3 id=\"実装\"\u003e実装\u003c/h3\u003e\n\n\u003cp\u003eProximo は 1 つのようですが、QuotaGuard Static は 2 つの Proxy サーバで冗長化されているようです。Proxy サーバが落ちる確率は低いかもしれませんが、冗長化されているに越したことはありません。\u003c/p\u003e\n\n\u003cp\u003e🔗 \u003ca href=\"https://devcenter.heroku.com/articles/proximo#provisioning-the-proximo-add-on\"\u003ehttps://devcenter.heroku.com/articles/proximo#provisioning-the-proximo-add-on\u003c/a\u003e\u003c/p\u003e\n\n\u003cpre class=\"code\" data-lang=\"\" data-unlink\u003e$ heroku addons:create proximo:development\nAdding proximo to sharp-mountain-4005... done, v18 ($5/mo)\nYour static IP address is 10.9.8.7\u003c/pre\u003e\n\n\n\u003cp\u003e🔗 \u003ca href=\"https://devcenter.heroku.com/articles/quotaguardstatic#provisioning-the-add-on\"\u003ehttps://devcenter.heroku.com/articles/quotaguardstatic#provisioning-the-add-on\u003c/a\u003e\u003c/p\u003e\n\n\u003cpre class=\"code\" data-lang=\"\" data-unlink\u003e$ heroku addons:create quotaguardstatic:starter\n-----\u0026gt; Adding quotaguardstatic:starter to sharp-mountain-4005... done, v18 (free)\n-----\u0026gt; Your static IPs are [10.11.12.13, 14.15.16.17]\u003c/pre\u003e\n\n\n\u003ch3 id=\"プラン\"\u003eプラン\u003c/h3\u003e\n\n\u003cp\u003eQuotaGuard Static は無料プランがあるので始めやすいです。Proximo のプランは \u003ccode\u003e$5/mo\u003c/code\u003e からです。\u003c/p\u003e\n\n\u003cp\u003eちなみにどちらも \u003ccode\u003ePROXIMO_MASK\u003c/code\u003e や \u003ccode\u003eQUOTAGUARDSTATIC_MASK\u003c/code\u003e という環境変数を設定すると、一部のレンジの送信だけこれらのサービス経由にすることができ、料金を節約できます。\u003c/p\u003e\n\n\u003cp\u003e💡 正確に書くと \u003ccode\u003eQUOTAGUARDSTATIC_MASK\u003c/code\u003e は後述する qgsocksify 用の環境変数です。\u003c/p\u003e\n\n\u003ch3 id=\"CLI-のインストール\"\u003eCLI のインストール\u003c/h3\u003e\n\n\u003cp\u003eどちらも CLI が提供されており、必要に応じてインストールします。\u003c/p\u003e\n\n\u003cp\u003eProximo はインストール元が http なのがイマイチでした。https に変えてもアクセス不可です。\u003c/p\u003e\n\n\u003cpre class=\"code\" data-lang=\"\" data-unlink\u003e$ curl http://downloads.proximo.io/proximo-stacklet.tgz | tar xz\u003c/pre\u003e\n\n\n\u003cp\u003eQuotaGuard Static は普通に https でインストール出来ます。\u003c/p\u003e\n\n\u003cpre class=\"code\" data-lang=\"\" data-unlink\u003e$ curl https://s3.amazonaws.com/quotaguard/qgtunnel-latest.tar.gz | tar xz\n$ curl https://s3.amazonaws.com/quotaguard/quotaguard-socksify-latest.tar.gz | tar xz\u003c/pre\u003e\n\n\n\u003ch3 id=\"Heroku-Buildpack\"\u003eHeroku Buildpack\u003c/h3\u003e\n\n\u003cp\u003e今回の調査の過程で Heroku Buildpack を作りました。バイナリファイルをリポジトリに commit せずに済みます。よかったらどうぞ。\u003c/p\u003e\n\n\u003cul\u003e\n\u003cli\u003e\u003ca href=\"https://github.com/masutaka/heroku-buildpack-proximo\"\u003ehttps://github.com/masutaka/heroku-buildpack-proximo\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"https://github.com/masutaka/heroku-buildpack-qgtunnel\"\u003ehttps://github.com/masutaka/heroku-buildpack-qgtunnel\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"https://github.com/masutaka/heroku-buildpack-qgsocksify\"\u003ehttps://github.com/masutaka/heroku-buildpack-qgsocksify\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\n\n\u003ch2 id=\"コラム-固定-IP-アドレスへの私見\"\u003e[コラム] 固定 IP アドレスへの私見\u003c/h2\u003e\n\n\u003cp\u003eIP アドレスを固定化したいのは、どんなケースでしょうか。\u003c/p\u003e\n\n\u003cp\u003e多くはセキュリティ要件だと思いますが、私はあまり賛同できないです。\u003c/p\u003e\n\n\u003cp\u003eそもそも当該 IP アドレスは認証されておらず、所有者が変わることがあります。仕組み上それに気づくことは難しいため、逆にセキュリティリスクを増やすことになります。そういう意味では電話番号とよく似ています。\u003c/p\u003e\n\n\u003cp\u003eサービスのスケールの観点からもデメリットがあります。例えば Heroku から AWS に引っ越す時、固定 IP アドレスは変わってしまうでしょう。顧客との調整が必要ですし、間に開発会社が入っていると、より時間がかかります。\u003c/p\u003e\n\n\u003ch2 id=\"Chrome-のクローラで-IP-アドレスを固定化する\"\u003eChrome のクローラで IP アドレスを固定化する\u003c/h2\u003e\n\n\u003cp\u003e今回のケースでは Heroku の worker Dyno 上に \u003ca href=\"https://rubygems.org/gems/sidekiq\"\u003esidekiq\u003c/a\u003e が起動しており、\u003ca href=\"https://rubygems.org/gems/selenium-webdriver\"\u003eselenium-webdriver\u003c/a\u003e 経由で Chrome が子プロセスとして起動し、クロールします。\u003c/p\u003e\n\n\u003cpre\u003e\u003ccode\u003esidekiq\n└ Chrome\n   ↓\n   クロール先\n\u003c/code\u003e\u003c/pre\u003e\n\n\u003ch3 id=\"試行錯誤の日々\"\u003e試行錯誤の日々\u003c/h3\u003e\n\n\u003cp\u003e当初は sidekiq 自体に qgtunnel や qgsocksify をラップしましたが、うまくいきませんでした。よく考えたら納得です。\u003c/p\u003e\n\n\u003cp\u003eChrome に \u003ccode\u003e--proxy-server=http://\u0026lt;USERNAME\u0026gt;:\u0026lt;PASSWORD\u0026gt;@\u0026lt;HOSTNAME\u0026gt;:\u0026lt;PORT\u0026gt;\u003c/code\u003e や \u003ccode\u003e--proxy-auth=\u0026lt;USERNAME\u0026gt;:\u0026lt;PASSWORD\u0026gt;\u003c/code\u003e を指定してもダメ。\u003c/p\u003e\n\n\u003cp\u003eどうやら少なくとも Chrome 73 ではセキュリティ上の理由から、コマンドラインオプションから認証情報を設定できないようです。認証なしプロクシなら大丈夫ですが、QuotaGuard Static は商用サービスなので認証は必須です。\u003c/p\u003e\n\n\u003ch3 id=\"ついに成功\"\u003eついに成功\u003c/h3\u003e\n\n\u003cp\u003eダメ元で QuotaGuard Static のサポートに聞いたら、方法を知っており、無事クロール先にアクセスすることが出来ました。\u003c/p\u003e\n\n\u003cp\u003e👇 Dyno とクロール先を SOCKS5 トンネルで繋ぎ、それ経由でアクセスします。\u003c/p\u003e\n\n\u003cpre\u003e\u003ccode\u003esidekiq\n└ Chrome (4443 port)\n   ↓ (SOCKS5 tunnel)\n   QuotaGuard Static\n   ↓ (SOCKS5 tunnel)\n   クロール先 (443 port)\n\u003c/code\u003e\u003c/pre\u003e\n\n\u003cp\u003eTCP アクセスならなんでも IP アドレスを固定化出来そうです。\u003c/p\u003e\n\n\u003ch3 id=\"手順\"\u003e手順\u003c/h3\u003e\n\n\u003cp\u003e(1) 当該 Heroku App に QuotaGuard Static Add-on をインストールします。\u003c/p\u003e\n\n\u003cp\u003e(2) qgtunnel CLI もインストールします。前述の heroku-buildpack-qgtunnel を使うとお手軽です。\u003c/p\u003e\n\n\u003cpre class=\"code\" data-lang=\"\" data-unlink\u003e$ curl https://s3.amazonaws.com/quotaguard/qgtunnel-latest.tar.gz | tar xz\u003c/pre\u003e\n\n\n\u003cp\u003e(3) Heroku のダッシュボードから、QuotaGuard Static のダッシュボードに進み、\u003ccode\u003eSettings\u003c/code\u003e → \u003ccode\u003eSetup\u003c/code\u003e とクリックします。\u003c/p\u003e\n\n\u003cp\u003e\u003cspan itemscope itemtype=\"http://schema.org/Photograph\"\u003e\u003cimg src=\"https://cdn-ak.f.st-hatena.com/images/fotolife/m/masutaka26/20190425/20190425193848.png\" alt=\"f:id:masutaka26:20190425193848p:plain\" title=\"\" class=\"hatena-fotolife\" itemprop=\"image\"\u003e\u003c/span\u003e\u003c/p\u003e\n\n\u003cp\u003e(4) さらに \u003ccode\u003eTunnel\u003c/code\u003e → \u003ccode\u003eCreate Tunnel\u003c/code\u003e とクリックします。\u003c/p\u003e\n\n\u003cp\u003e\u003cspan itemscope itemtype=\"http://schema.org/Photograph\"\u003e\u003cimg src=\"https://cdn-ak.f.st-hatena.com/images/fotolife/m/masutaka26/20190425/20190425192905.png\" alt=\"f:id:masutaka26:20190425192905p:plain\" title=\"\" class=\"hatena-fotolife\" itemprop=\"image\"\u003e\u003c/span\u003e\u003c/p\u003e\n\n\u003cp\u003e(5) \u003ccode\u003eRemote Destination\u003c/code\u003e にクロール先を、\u003ccode\u003eLocal Port\u003c/code\u003e は 4443、\u003ccode\u003eTransparent\u003c/code\u003e は true に設定します。\u003ccode\u003eEncrypted\u003c/code\u003e は設定しません。\u003c/p\u003e\n\n\u003cp\u003e\u003cspan itemscope itemtype=\"http://schema.org/Photograph\"\u003e\u003cimg src=\"https://cdn-ak.f.st-hatena.com/images/fotolife/m/masutaka26/20190425/20190425193342.png\" alt=\"f:id:masutaka26:20190425193342p:plain\" title=\"\" class=\"hatena-fotolife\" itemprop=\"image\"\u003e\u003c/span\u003e\u003c/p\u003e\n\n\u003cp\u003e(6) トンネルが出来ました。\u003c/p\u003e\n\n\u003cp\u003e\u003cspan itemscope itemtype=\"http://schema.org/Photograph\"\u003e\u003cimg src=\"https://cdn-ak.f.st-hatena.com/images/fotolife/m/masutaka26/20190425/20190425193614.png\" alt=\"f:id:masutaka26:20190425193614p:plain\" title=\"\" class=\"hatena-fotolife\" itemprop=\"image\"\u003e\u003c/span\u003e\u003c/p\u003e\n\n\u003cul\u003e\n\u003cli\u003e127.0.0.1:4443 へのアクセスは destination.example.com:443 へのトンネルになります\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003eTransparent\u003c/code\u003e を有効したことにより、destination.example.com の DNS が 127.0.0.1 に上書きされました。destination.example.com:4443 へのアクセスは destination.example.com:443 と等価になります\u003c/li\u003e\n\u003cli\u003eすでに HTTPS を使っているため、\u003ccode\u003eEncrypted\u003c/code\u003e は必要ありません\u003c/li\u003e\n\u003c/ul\u003e\n\n\n\u003cp\u003e(7) selenium-webdriver に与える Chrome のバイナリを qgtunnel でラッピングします。今回は以下のようなシェルスクリプト bin/google-chrome-qgtunnel を作り、selenium-webdriver に指定しました。\u003c/p\u003e\n\n\u003cpre class=\"code lang-sh\" data-lang=\"sh\" data-unlink\u003e\u003cspan class=\"synComment\"\u003e#!/bin/sh -eu\u003c/span\u003e\n\n\u003cspan class=\"synStatement\"\u003eexec\u003c/span\u003e bin/qgtunnel \u003cspan class=\"synStatement\"\u003e\u0026quot;\u003c/span\u003e\u003cspan class=\"synPreProc\"\u003e$GOOGLE_CHROME_SHIM\u003c/span\u003e\u003cspan class=\"synStatement\"\u003e\u0026quot;\u003c/span\u003e \u003cspan class=\"synStatement\"\u003e\u0026quot;\u003c/span\u003e\u003cspan class=\"synPreProc\"\u003e$@\u003c/span\u003e\u003cspan class=\"synStatement\"\u003e\u0026quot;\u003c/span\u003e\n\u003c/pre\u003e\n\n\n\u003cp\u003e💡 \u003ca href=\"https://github.com/heroku/heroku-buildpack-google-chrome\"\u003eheroku-buildpack-google-chrome\u003c/a\u003e と \u003ca href=\"https://github.com/heroku/heroku-buildpack-chromedriver.git\"\u003eheroku-buildpack-chromedriver\u003c/a\u003e を使っています。環境変数 \u003ccode\u003eGOOGLE_CHROME_SHIM\u003c/code\u003e は \u003ccode\u003e/app/.apt/usr/bin/google-chrome\u003c/code\u003e です。\u003c/p\u003e\n\n\u003cp\u003e(8) 左側の \u003ccode\u003eOutbound\u003c/code\u003e をクリックし、SOCKS5 url を Heroku の環境変数 \u003ccode\u003eQUOTAGUARDSTATIC_URL\u003c/code\u003e に上書きします。\u003c/p\u003e\n\n\u003cp\u003e\u003cspan itemscope itemtype=\"http://schema.org/Photograph\"\u003e\u003cimg src=\"https://cdn-ak.f.st-hatena.com/images/fotolife/m/masutaka26/20190425/20190425191501.png\" alt=\"f:id:masutaka26:20190425191501p:plain\" title=\"\" class=\"hatena-fotolife\" itemprop=\"image\"\u003e\u003c/span\u003e\u003c/p\u003e\n\n\u003cp\u003e(9) 左側の \u003ccode\u003eTunnel\u003c/code\u003e から \u003ccode\u003eDownload Configuration\u003c/code\u003e をクリックし、\u003ccode\u003e.qgtunnel\u003c/code\u003e ファイルをリポジトリに commit します。\u003c/p\u003e\n\n\u003cp\u003e\u003cspan itemscope itemtype=\"http://schema.org/Photograph\"\u003e\u003cimg src=\"https://cdn-ak.f.st-hatena.com/images/fotolife/m/masutaka26/20190425/20190425203447.png\" alt=\"f:id:masutaka26:20190425203447p:plain\" title=\"\" class=\"hatena-fotolife\" itemprop=\"image\"\u003e\u003c/span\u003e\u003c/p\u003e\n\n\u003cp\u003e(10) 以上の設定により、destination.example.com:4443 へのアクセスが destination.example.com:443 に変換され、且つ IP アドレスも固定されます。\u003c/p\u003e\n\n\u003cp\u003eなにかトラブルがあったら Heroku の環境変数 \u003ccode\u003eQGTUNNEL_DEBUG\u003c/code\u003e に true をセットして、ログを確認すると良いと思います。\u003c/p\u003e\n\n\u003ch2 id=\"QuotaGuard-Static-の注意事項\"\u003eQuotaGuard Static の注意事項\u003c/h2\u003e\n\n\u003cp\u003eapp.json の addons に \u003ccode\u003equotaguardstatic\u003c/code\u003e を追加して、Review App を作ると Micro plan \u003ccode\u003e$19/mo\u003c/code\u003e で作られてしまいます。\u003ccode\u003equotaguardstatic:starter\u003c/code\u003e とかにしても同じです。\u003c/p\u003e\n\n\u003cp\u003eQuotaGuard Static のサポートに聞いたところ、Heroku のアカウント単位で設定を変える必要があるそう。問い合わせが必要です。\u003c/p\u003e\n\n\u003ch2 id=\"まとめ\"\u003eまとめ\u003c/h2\u003e\n\n\u003cp\u003eHeroku の worker Dyno 上で動く、Chrome のクローラで IP アドレスを固定化しました。\u003c/p\u003e\n\n\u003cp\u003e固定 IP アドレス対応は出来るだけ避けたほうが良いと思いますが、どうしても必要な時にこの記事が参考になれば幸いです。\u003c/p\u003e\n","contentSnippet":"こんにちは id:masutaka26 です。少し前に、Heroku の worker Dyno 上で動く、Chrome のクローラで IP アドレスを固定化出来ないか調査しました。実装は見送られましたが、想定よりも難しく調査に時間がかかったので、この記事に残しておきます。方法だけ知りたい方は、下の方にある「手順」をご覧ください。Heroku Add-on を比較する開発組織実装プランCLI のインストールHeroku Buildpack[コラム] 固定 IP アドレスへの私見Chrome のクローラで IP アドレスを固定化する試行錯誤の日々ついに成功手順QuotaGuard Static の注意事項まとめHeroku Add-on を比較する今回は Proximo と QuotaGuard Static を検討し、最終的に QuotaGuard Static を採用しました。💡 他に Fixie, Fixie Socks, Guru301 などがあるようです。以下、その理由です。開発組織Proximo は https://github.com/pirateradio を見た感じ @ddollar の個人開発のようです。この方は foreman などを作っており、多分すごい人です。QuotaGuard Static は https://www.quotaguard.com/ によると Alpine Shark, LLC のようです。会社のほうがちょっとだけ安心できます。実装Proximo は 1 つのようですが、QuotaGuard Static は 2 つの Proxy サーバで冗長化されているようです。Proxy サーバが落ちる確率は低いかもしれませんが、冗長化されているに越したことはありません。🔗 https://devcenter.heroku.com/articles/proximo#provisioning-the-proximo-add-on$ heroku addons:create proximo:developmentAdding proximo to sharp-mountain-4005... done, v18 ($5/mo)Your static IP address is 10.9.8.7🔗 https://devcenter.heroku.com/articles/quotaguardstatic#provisioning-the-add-on$ heroku addons:create quotaguardstatic:starter-----\u003e Adding quotaguardstatic:starter to sharp-mountain-4005... done, v18 (free)-----\u003e Your static IPs are [10.11.12.13, 14.15.16.17]プランQuotaGuard Static は無料プランがあるので始めやすいです。Proximo のプランは $5/mo からです。ちなみにどちらも PROXIMO_MASK や QUOTAGUARDSTATIC_MASK という環境変数を設定すると、一部のレンジの送信だけこれらのサービス経由にすることができ、料金を節約できます。💡 正確に書くと QUOTAGUARDSTATIC_MASK は後述する qgsocksify 用の環境変数です。CLI のインストールどちらも CLI が提供されており、必要に応じてインストールします。Proximo はインストール元が http なのがイマイチでした。https に変えてもアクセス不可です。$ curl http://downloads.proximo.io/proximo-stacklet.tgz | tar xzQuotaGuard Static は普通に https でインストール出来ます。$ curl https://s3.amazonaws.com/quotaguard/qgtunnel-latest.tar.gz | tar xz$ curl https://s3.amazonaws.com/quotaguard/quotaguard-socksify-latest.tar.gz | tar xzHeroku Buildpack今回の調査の過程で Heroku Buildpack を作りました。バイナリファイルをリポジトリに commit せずに済みます。よかったらどうぞ。https://github.com/masutaka/heroku-buildpack-proximohttps://github.com/masutaka/heroku-buildpack-qgtunnelhttps://github.com/masutaka/heroku-buildpack-qgsocksify[コラム] 固定 IP アドレスへの私見IP アドレスを固定化したいのは、どんなケースでしょうか。多くはセキュリティ要件だと思いますが、私はあまり賛同できないです。そもそも当該 IP アドレスは認証されておらず、所有者が変わることがあります。仕組み上それに気づくことは難しいため、逆にセキュリティリスクを増やすことになります。そういう意味では電話番号とよく似ています。サービスのスケールの観点からもデメリットがあります。例えば Heroku から AWS に引っ越す時、固定 IP アドレスは変わってしまうでしょう。顧客との調整が必要ですし、間に開発会社が入っていると、より時間がかかります。Chrome のクローラで IP アドレスを固定化する今回のケースでは Heroku の worker Dyno 上に sidekiq が起動しており、selenium-webdriver 経由で Chrome が子プロセスとして起動し、クロールします。sidekiq└ Chrome   ↓   クロール先試行錯誤の日々当初は sidekiq 自体に qgtunnel や qgsocksify をラップしましたが、うまくいきませんでした。よく考えたら納得です。Chrome に --proxy-server=http://\u003cUSERNAME\u003e:\u003cPASSWORD\u003e@\u003cHOSTNAME\u003e:\u003cPORT\u003e や --proxy-auth=\u003cUSERNAME\u003e:\u003cPASSWORD\u003e を指定してもダメ。どうやら少なくとも Chrome 73 ではセキュリティ上の理由から、コマンドラインオプションから認証情報を設定できないようです。認証なしプロクシなら大丈夫ですが、QuotaGuard Static は商用サービスなので認証は必須です。ついに成功ダメ元で QuotaGuard Static のサポートに聞いたら、方法を知っており、無事クロール先にアクセスすることが出来ました。👇 Dyno とクロール先を SOCKS5 トンネルで繋ぎ、それ経由でアクセスします。sidekiq└ Chrome (4443 port)   ↓ (SOCKS5 tunnel)   QuotaGuard Static   ↓ (SOCKS5 tunnel)   クロール先 (443 port)TCP アクセスならなんでも IP アドレスを固定化出来そうです。手順(1) 当該 Heroku App に QuotaGuard Static Add-on をインストールします。(2) qgtunnel CLI もインストールします。前述の heroku-buildpack-qgtunnel を使うとお手軽です。$ curl https://s3.amazonaws.com/quotaguard/qgtunnel-latest.tar.gz | tar xz(3) Heroku のダッシュボードから、QuotaGuard Static のダッシュボードに進み、Settings → Setup とクリックします。(4) さらに Tunnel → Create Tunnel とクリックします。(5) Remote Destination にクロール先を、Local Port は 4443、Transparent は true に設定します。Encrypted は設定しません。(6) トンネルが出来ました。127.0.0.1:4443 へのアクセスは destination.example.com:443 へのトンネルになりますTransparent を有効したことにより、destination.example.com の DNS が 127.0.0.1 に上書きされました。destination.example.com:4443 へのアクセスは destination.example.com:443 と等価になりますすでに HTTPS を使っているため、Encrypted は必要ありません(7) selenium-webdriver に与える Chrome のバイナリを qgtunnel でラッピングします。今回は以下のようなシェルスクリプト bin/google-chrome-qgtunnel を作り、selenium-webdriver に指定しました。#!/bin/sh -euexec bin/qgtunnel \"$GOOGLE_CHROME_SHIM\" \"$@\"💡 heroku-buildpack-google-chrome と heroku-buildpack-chromedriver を使っています。環境変数 GOOGLE_CHROME_SHIM は /app/.apt/usr/bin/google-chrome です。(8) 左側の Outbound をクリックし、SOCKS5 url を Heroku の環境変数 QUOTAGUARDSTATIC_URL に上書きします。(9) 左側の Tunnel から Download Configuration をクリックし、.qgtunnel ファイルをリポジトリに commit します。(10) 以上の設定により、destination.example.com:4443 へのアクセスが destination.example.com:443 に変換され、且つ IP アドレスも固定されます。なにかトラブルがあったら Heroku の環境変数 QGTUNNEL_DEBUG に true をセットして、ログを確認すると良いと思います。QuotaGuard Static の注意事項app.json の addons に quotaguardstatic を追加して、Review App を作ると Micro plan $19/mo で作られてしまいます。quotaguardstatic:starter とかにしても同じです。QuotaGuard Static のサポートに聞いたところ、Heroku のアカウント単位で設定を変える必要があるそう。問い合わせが必要です。まとめHeroku の worker Dyno 上で動く、Chrome のクローラで IP アドレスを固定化しました。固定 IP アドレス対応は出来るだけ避けたほうが良いと思いますが、どうしても必要な時にこの記事が参考になれば幸いです。","link":"https://developer.feedforce.jp/entry/2019/04/26/154540","isoDate":"2019-04-26T06:45:40.000Z","dateMiliSeconds":1556261140000,"imageUrl":"https://cdn-ak.f.st-hatena.com/images/fotolife/m/masutaka26/20181113/20181113190345.png","authorName":"masutaka"},{"title":"Heroku の Preboot 機能を深掘りした","content":"\u003cp\u003eこんにちは \u003ca href=\"http://blog.hatena.ne.jp/masutaka26/\" class=\"hatena-id-icon\"\u003e\u003cimg src=\"https://cdn.profile-image.st-hatena.com/users/masutaka26/profile.png\" width=\"16\" height=\"16\" alt=\"\" class=\"hatena-id-icon\"\u003eid:masutaka26\u003c/a\u003e です。\u003c/p\u003e\n\n\u003cp\u003eこの記事は Heroku Advent Calendar 2018 の 12 日目の記事です。\u003c/p\u003e\n\n\u003cp\u003e\u003ciframe src=\"https://hatenablog-parts.com/embed?url=https%3A%2F%2Fqiita.com%2Fadvent-calendar%2F2018%2Fheroku\" title=\"heroku Advent Calendar 2018 - Qiita\" class=\"embed-card embed-webcard\" scrolling=\"no\" frameborder=\"0\" style=\"display: block; width: 100%; height: 155px; max-width: 500px; margin: 10px 0px;\"\u003e\u003c/iframe\u003e\u003ccite class=\"hatena-citation\"\u003e\u003ca href=\"https://qiita.com/advent-calendar/2018/heroku\"\u003eqiita.com\u003c/a\u003e\u003c/cite\u003e\u003c/p\u003e\n\n\u003cp\u003e昨日は \u003ca href=\"https://qiita.com/takuchalle\"\u003e@takuchalle\u003c/a\u003e さんの『\u003ca href=\"https://blog.takuchalle.me/post/2018/12/11/heroku_use_wkhtmltoimage/\"\u003eHeroku で wkhtmltoimage を使う方法\u003c/a\u003e』でした。似たツールの \u003ca href=\"http://www.paulhammond.org/webkit2png/\"\u003ewebkit2png\u003c/a\u003e は使ったことがあります。webkit2png が動作するのは macOS だけですが、\u003ca href=\"https://wkhtmltopdf.org/\"\u003ewkhtmltoimage\u003c/a\u003e は Windows と Linux でも動作するのですね。へぇー。\u003c/p\u003e\n\n\u003cp\u003e先月、Heroku の Preboot 機能を調べる機会がありました。Web 上の日本語記事は Preboot が GA になった 2014 年頃の情報が多く、若干情報が古かったため、2018 年時点の最新の情報をまとめます。\u003c/p\u003e\n\n\u003cul class=\"table-of-contents\"\u003e\n    \u003cli\u003e\u003ca href=\"#Preboot-機能とは何か\"\u003ePreboot 機能とは何か\u003c/a\u003e\u003c/li\u003e\n    \u003cli\u003e\u003ca href=\"#どのように有効にするのか\"\u003eどのように有効にするのか\u003c/a\u003e\u003c/li\u003e\n    \u003cli\u003e\u003ca href=\"#使用する-Procfile\"\u003e使用する Procfile\u003c/a\u003e\u003c/li\u003e\n    \u003cli\u003e\u003ca href=\"#デプロイによる-heroku-ps-の変化\"\u003eデプロイによる heroku ps の変化\u003c/a\u003e\u003c/li\u003e\n    \u003cli\u003e\u003ca href=\"#デプロイ時の挙動\"\u003eデプロイ時の挙動\u003c/a\u003e\u003c/li\u003e\n    \u003cli\u003e\u003ca href=\"#デプロイ時のログ\"\u003eデプロイ時のログ\u003c/a\u003e\u003c/li\u003e\n    \u003cli\u003e\u003ca href=\"#再起動時の挙動\"\u003e再起動時の挙動\u003c/a\u003e\u003c/li\u003e\n    \u003cli\u003e\u003ca href=\"#再起動時のログ\"\u003e再起動時のログ\u003c/a\u003e\u003cul\u003e\n            \u003cli\u003e\u003ca href=\"#Web-dyno-1-台目\"\u003eWeb dyno 1 台目\u003c/a\u003e\u003c/li\u003e\n            \u003cli\u003e\u003ca href=\"#Web-dyno-2-台目\"\u003eWeb dyno 2 台目\u003c/a\u003e\u003c/li\u003e\n        \u003c/ul\u003e\n    \u003c/li\u003e\n    \u003cli\u003e\u003ca href=\"#注意事項\"\u003e注意事項\u003c/a\u003e\u003c/li\u003e\n    \u003cli\u003e\u003ca href=\"#まとめ\"\u003eまとめ\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\n\u003ch2 id=\"Preboot-機能とは何か\"\u003ePreboot 機能とは何か\u003c/h2\u003e\n\n\u003cp\u003e\u003ca href=\"https://devcenter.heroku.com/articles/production-check#dyno-redundancy\"\u003eProduction Check \u003e Dyno redundancy\u003c/a\u003e に書いてあるとおり、Heroku では冗長性確保のため、本番環境の Web Dyno は 2 台以上が奨励されています。\u003c/p\u003e\n\n\u003cblockquote\u003e\u003cp\u003eRunning at least 2 web dynos for any mission-critical app increases the probability that the app will remain available during a catastrophic event. Multiple dynos are also more likely to run on different physical infrastructure (for example, separate AWS Availability Zones), further increasing redundancy.\u003c/p\u003e\u003c/blockquote\u003e\n\n\u003cp\u003eただし、それだけだとデプロイや 1 日 1 回の自動再起動で、処理の遅延（\u003ca href=\"https://devcenter.heroku.com/articles/error-codes#h27-client-request-interrupted\"\u003eH27 - Client Request Interrupted\u003c/a\u003e）や \u003ca href=\"https://devcenter.heroku.com/articles/error-codes#h28-client-connection-idle\"\u003eH28 - Client Connection Idle\u003c/a\u003e が発生することがあります。\u003c/p\u003e\n\n\u003cp\u003e以下のグラフは Dyno Restart のタイミングで H27 と H28 Error が発生している様子です。このグラフはダッシュボードの Metrics から確認できます。\u003c/p\u003e\n\n\u003cp\u003e\u003cspan itemscope itemtype=\"http://schema.org/Photograph\"\u003e\u003cimg src=\"https://cdn-ak.f.st-hatena.com/images/fotolife/m/masutaka26/20181210/20181210191451.png\" alt=\"f:id:masutaka26:20181210191451p:plain\" title=\"f:id:masutaka26:20181210191451p:plain\" class=\"hatena-fotolife\" itemprop=\"image\"\u003e\u003c/span\u003e\u003c/p\u003e\n\n\u003cp\u003eこれを回避できるのが \u003ca href=\"https://devcenter.heroku.com/articles/preboot\"\u003ePreboot\u003c/a\u003e 機能です。\u003c/p\u003e\n\n\u003ch2 id=\"どのように有効にするのか\"\u003eどのように有効にするのか\u003c/h2\u003e\n\n\u003cp\u003eHeroku CLI で有効にできます。\u003c/p\u003e\n\n\u003cpre class=\"code console\" data-lang=\"console\" data-unlink\u003e$ heroku features:enable preboot -a YOUR_APP_NAME\u003c/pre\u003e\n\n\n\u003cp\u003e有効になりました。簡単ですね。\u003c/p\u003e\n\n\u003cpre class=\"code console\" data-lang=\"console\" data-unlink\u003e$ heroku features:info preboot -a YOUR_APP_NAME\n=== preboot\nDescription: Provide seamless web dyno deploys [general]\nDocs:        https://devcenter.heroku.com/articles/preboot\nEnabled:     true\u003c/pre\u003e\n\n\n\u003ch2 id=\"使用する-Procfile\"\u003e使用する Procfile\u003c/h2\u003e\n\n\u003cp\u003e今回はこの Procfile を使います。\u003c/p\u003e\n\n\u003cpre class=\"code lang-apache\" data-lang=\"apache\" data-unlink\u003erelease: bin/rails \u003cspan class=\"synConstant\"\u003edb\u003c/span\u003e:migrate \u003cspan class=\"synConstant\"\u003edb\u003c/span\u003e:seed\n\n\u003cspan class=\"synComment\"\u003e# Web app\u003c/span\u003e\nweb: bin/rails s -p $PORT -e $RAILS_ENV\nworker: PROCESS_TYPE=worker bundle exec sidekiq -C config/sidekiq.yml\n\n\u003cspan class=\"synComment\"\u003e# Ad app\u003c/span\u003e\nad_worker: PROCESS_TYPE=ad_worker bundle exec sidekiq -C config/sidekiq.yml\n\u003c/pre\u003e\n\n\n\u003cp\u003e\u003ccode\u003eweb\u003c/code\u003e, \u003ccode\u003eworker\u003c/code\u003e, \u003ccode\u003ead_worker\u003c/code\u003e という 3 つの process type を定義しています。今回注目する process type は \u003ccode\u003eweb\u003c/code\u003e だけです。\u003c/p\u003e\n\n\u003cp\u003e1 行目で \u003ccode\u003erelease\u003c/code\u003e も定義しているため、デプロイ時には One-Off Dyno\u003csup id=\"fnref:1\"\u003e\u003ca href=\"#fn:1\" rel=\"footnote\"\u003e1\u003c/a\u003e\u003c/sup\u003e で release 処理をしたあと、生成した Slug が Dyno に展開されていきます。\u003c/p\u003e\n\n\u003ch2 id=\"デプロイによる-heroku-ps-の変化\"\u003eデプロイによる heroku ps の変化\u003c/h2\u003e\n\n\u003cp\u003eそれでは \u003ccode\u003e$ watch 'heroku ps -a YOUR_APP_NAME'\u003c/code\u003e しつつ、デプロイの様子を観察していきましょう。macOS では watch コマンドは \u003ccode\u003e$ brew install watch\u003c/code\u003e 等でインストール出来ます。\u003c/p\u003e\n\n\u003cp\u003eWeb Dyno 1 台の場合、release Dyno の実行が終わると、web.1 Dyno のステータスが up → starting → up と変化します。starting 中にリクエストがあると、クライアントは待たされ、前述の H27 や H28 Error が発生します。\u003c/p\u003e\n\n\u003cp\u003e\u003cfigure class=\"figure-image figure-image-fotolife\" title=\"Web Dyno 1 台でデプロイした様子\"\u003e\u003cspan itemscope itemtype=\"http://schema.org/Photograph\"\u003e\u003cimg src=\"https://cdn-ak.f.st-hatena.com/images/fotolife/m/masutaka26/20181211/20181211131034.gif\" alt=\"f:id:masutaka26:20181211131034g:plain\" title=\"f:id:masutaka26:20181211131034g:plain\" class=\"hatena-fotolife\" itemprop=\"image\"\u003e\u003c/span\u003e\u003cfigcaption\u003eWeb Dyno 1 台でデプロイした様子\u003c/figcaption\u003e\u003c/figure\u003e\u003c/p\u003e\n\n\u003cp\u003eWeb Dyno 2 台かつ Preboot 無効でも、基本的に同じです。2 台同時に up → starting → up と変化します。\u003c/p\u003e\n\n\u003cp\u003e\u003cfigure class=\"figure-image figure-image-fotolife\" title=\"Web Dyno 2 台かつ Preboot 無効でデプロイした様子\"\u003e\u003cspan itemscope itemtype=\"http://schema.org/Photograph\"\u003e\u003cimg src=\"https://cdn-ak.f.st-hatena.com/images/fotolife/m/masutaka26/20181211/20181211131128.gif\" alt=\"f:id:masutaka26:20181211131128g:plain\" title=\"f:id:masutaka26:20181211131128g:plain\" class=\"hatena-fotolife\" itemprop=\"image\"\u003e\u003c/span\u003e\u003cfigcaption\u003eWeb Dyno 2 台かつ Preboot 無効でデプロイした様子\u003c/figcaption\u003e\u003c/figure\u003e\u003c/p\u003e\n\n\u003cp\u003eWeb Dyno 2 台かつ Preboot を有効にすると、期待した通り、1 台ずつ up → starting → up に\u003cstrong\u003eなりませんでした・・・！あれ？\u003c/strong\u003e\u003c/p\u003e\n\n\u003cp\u003e\u003cfigure class=\"figure-image figure-image-fotolife\" title=\"Web Dyno 2 台かつ Preboot 有効でデプロイした様子\"\u003e\u003cspan itemscope itemtype=\"http://schema.org/Photograph\"\u003e\u003cimg src=\"https://cdn-ak.f.st-hatena.com/images/fotolife/m/masutaka26/20181211/20181211133556.gif\" alt=\"f:id:masutaka26:20181211133556g:plain\" title=\"f:id:masutaka26:20181211133556g:plain\" class=\"hatena-fotolife\" itemprop=\"image\"\u003e\u003c/span\u003e\u003cfigcaption\u003eWeb Dyno 2 台かつ Preboot 有効でデプロイした様子\u003c/figcaption\u003e\u003c/figure\u003e\u003c/p\u003e\n\n\u003cblockquote\u003e\u003cul\u003e\n\u003cli\u003eLogs will show new dynos starting soon after the slug compile is finished. The output of \u003ccode\u003eheroku ps\u003c/code\u003e will immediately show the state (for example, \u003ccode\u003estarting\u003c/code\u003e or \u003ccode\u003eup\u003c/code\u003e) of the new dynos. Old dynos are still running but won’t appear in \u003ccode\u003eheroku ps\u003c/code\u003e.\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/blockquote\u003e\n\n\u003cp\u003e\u003ca href=\"https://devcenter.heroku.com/articles/preboot\"\u003ePreboot のドキュメント\u003c/a\u003eによると、heroku ps では確認できないようです。ただしログでは確認できるそう。\u003c/p\u003e\n\n\u003ch2 id=\"デプロイ時の挙動\"\u003eデプロイ時の挙動\u003c/h2\u003e\n\n\u003cblockquote\u003e\u003cul\u003e\n\u003cli\u003eApproximately 3 minutes after the deploy completes (or 2 minutes after your app’s boot timeout limit, which defaults to 1 minute), HTTP requests will start routing to the new dynos and simultaneously stop routing to the old dynos.\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/blockquote\u003e\n\n\u003cp\u003e遅くともデプロイ完了から約 3 分後、もしくはアプリケーションの起動タイムアウトリミット 2 分（デフォルトは 1 分）後、HTTP リクエストは新 Dyno に Routing されるそうです。\u003c/p\u003e\n\n\u003cblockquote\u003e\u003cul\u003e\n\u003cli\u003eShortly after the new dynos are fully live and serving user requests, the old dynos will be shut down. You’ll see them shut down in the logs as usual.\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/blockquote\u003e\n\n\u003cp\u003e新 Dyno が完全に起動し、ユーザリクエストを処理するとすぐに、旧 Dyno はシャットダウンされるようです。これもログで確認可能とのこと。\u003c/p\u003e\n\n\u003cp\u003eでは実際にログを見てみましょう。\u003c/p\u003e\n\n\u003ch2 id=\"デプロイ時のログ\"\u003eデプロイ時のログ\u003c/h2\u003e\n\n\u003cp\u003egit push 後まもなく、Web dyno の状態が \u003ccode\u003eup\u003c/code\u003e から \u003ccode\u003estarting\u003c/code\u003e に変わりました。\u003c/p\u003e\n\n\u003cpre class=\"code\" data-lang=\"\" data-unlink\u003eNov 28 14:58:51 heroku[web] notice Restarting\nNov 28 14:58:51 heroku[web] notice State changed from up to starting\nNov 28 14:58:51 heroku[web] notice Restarting\nNov 28 14:58:51 heroku[web] notice State changed from up to starting\u003c/pre\u003e\n\n\n\u003cp\u003e新 Web dyno 2 台で Puma (Web server) がそれぞれ起動を開始しました。\u003c/p\u003e\n\n\u003cpre class=\"code\" data-lang=\"\" data-unlink\u003eNov 28 14:59:17 heroku[web] notice Starting process with command `bin/rails s -p 24256 -e production`\nNov 28 14:59:19 heroku[web] notice Starting process with command `bin/rails s -p 15417 -e production`\nNov 28 14:59:21 app[web] info [heroku-exec] Starting\nNov 28 14:59:22 app[web] info [heroku-exec] Starting\nNov 28 14:59:31 app[web] info =\u0026gt; Booting Puma\nNov 28 14:59:31 app[web] info =\u0026gt; Rails 5.2.1 application starting in production\nNov 28 14:59:31 app[web] info =\u0026gt; Run `rails server -h` for more startup options\nNov 28 14:59:32 app[web] info =\u0026gt; Booting Puma\nNov 28 14:59:32 app[web] info =\u0026gt; Rails 5.2.1 application starting in production\nNov 28 14:59:32 app[web] info =\u0026gt; Run `rails server -h` for more startup options\u003c/pre\u003e\n\n\n\u003cp\u003eWeb dyno の状態が \u003ccode\u003estarting\u003c/code\u003e から \u003ccode\u003eup\u003c/code\u003e に変わりました。まだ Puma は起動しきっていません。\u003c/p\u003e\n\n\u003cpre class=\"code\" data-lang=\"\" data-unlink\u003eNov 28 14:59:33 heroku[web] notice State changed from starting to up\nNov 28 14:59:34 heroku[web] notice State changed from starting to up\u003c/pre\u003e\n\n\n\u003cp\u003e新 Web dyno 1 台で Puma が起動しきりました。問題はありませんが、手元で起動するよりずいぶん遅い気がします。\u003c/p\u003e\n\n\u003cpre class=\"code\" data-lang=\"\" data-unlink\u003eNov 28 15:02:03 app[web] info Puma starting in single mode...\nNov 28 15:02:03 app[web] info * Version 3.12.0 (ruby 2.5.3-p105), codename: Llamas in Pajamas\nNov 28 15:02:03 app[web] info * Min threads: 11, max threads: 11\nNov 28 15:02:03 app[web] info * Environment: production\nNov 28 15:02:03 app[web] info * Listening on tcp://0.0.0.0:24256\nNov 28 15:02:03 app[web] info Use Ctrl-C to stop\u003c/pre\u003e\n\n\n\u003cp\u003e旧 Web dyno 1 台で Puma が終了しました。前述の意訳では約 3 分とあるため合っています。\u003c/p\u003e\n\n\u003cpre class=\"code\" data-lang=\"\" data-unlink\u003eNov 28 15:02:19 heroku[web] notice Stopping all processes with SIGTERM\nNov 28 15:02:19 app[web] info Gracefully stopping, waiting for requests to finish\nNov 28 15:02:19 app[web] info === puma shutdown: 2018-11-28 06:02:19 +0000 ===\nNov 28 15:02:19 app[web] info Goodbye!\nNov 28 15:02:19 app[web] info Exiting\nNov 28 15:02:19 heroku[web] notice Process exited with status 143\u003c/pre\u003e\n\n\n\u003cp\u003eもうひとつの旧 Web dyno 1 台で Puma が終了しました。これも意訳のとおりです。\u003c/p\u003e\n\n\u003cpre class=\"code\" data-lang=\"\" data-unlink\u003eNov 28 15:03:25 heroku[web] notice Stopping all processes with SIGTERM\nNov 28 15:03:25 app[web] info Gracefully stopping, waiting for requests to finish\nNov 28 15:03:25 app[web] info === puma shutdown: 2018-11-28 06:03:25 +0000 ===\nNov 28 15:03:25 app[web] info Goodbye!\nNov 28 15:03:25 app[web] info Exiting\nNov 28 15:03:25 heroku[web] notice Process exited with status 143\u003c/pre\u003e\n\n\n\u003cp\u003eもうひとつの新 Web dyno 1 台で Puma が起動しきりました。\u003ccode\u003eBooting Puma\u003c/code\u003e からずいぶんと時間がかかりました。\u003c/p\u003e\n\n\u003cpre class=\"code\" data-lang=\"\" data-unlink\u003eNov 28 15:05:08 app[web] info Puma starting in single mode...\nNov 28 15:05:08 app[web] info * Version 3.12.0 (ruby 2.5.3-p105), codename: Llamas in Pajamas\nNov 28 15:05:08 app[web] info * Min threads: 11, max threads: 11\nNov 28 15:05:08 app[web] info * Environment: production\nNov 28 15:05:08 app[web] info * Listening on tcp://0.0.0.0:15417\nNov 28 15:05:08 app[web] info Use Ctrl-C to stop\u003c/pre\u003e\n\n\n\u003cp\u003ePuma の起動に時間がかかるのは謎ですが、Preboot のドキュメントと相違ないと理解しました。\u003c/p\u003e\n\n\u003ch2 id=\"再起動時の挙動\"\u003e再起動時の挙動\u003c/h2\u003e\n\n\u003cp\u003e再起動時の挙動も確認します。\u003c/p\u003e\n\n\u003cp\u003eHeroku ではアプリケーションの健全性を維持するため、\u003ca href=\"https://devcenter.heroku.com/articles/dynos#automatic-dyno-restarts\"\u003eDyno は 1 日に 1 回、自動的に再起動します\u003c/a\u003e。Dyno は差し替えられるため、ローカルファイルシステムの変更はすべて破棄されます。\u003c/p\u003e\n\n\u003cblockquote\u003e\u003cp\u003eThe new dynos will start receiving requests as soon as it binds to its assigned port. At this point, both the old and new dynos are receiving requests.\u003c/p\u003e\u003c/blockquote\u003e\n\n\u003cp\u003e新 Dyno は割り当てられたポートにバインドされると、すぐにリクエストを受信し始めます。この時点で、新旧の Dyno がリクエストを受信するそう。\u003c/p\u003e\n\n\u003cblockquote\u003e\u003cp\u003eApproximately 4 to 6 minutes after the restart is invoked, the old dynos will be shut down. You’ll see them shut down in the logs as usual.\u003c/p\u003e\u003c/blockquote\u003e\n\n\u003cp\u003e再起動が行われてから、約 4~6 分後に旧 Dyno がシャットダウンされるようです。これもログで確認可能とのこと。\u003c/p\u003e\n\n\u003cp\u003ePreboot が GA になった 2014 年頃は、まだ 1 日 1 回の再起動には対応していないようでした。現在は対応しているようです。\u003c/p\u003e\n\n\u003ch2 id=\"再起動時のログ\"\u003e再起動時のログ\u003c/h2\u003e\n\n\u003cp\u003e結論から書くと、1 台目が再起動し終えてから 2 台目が再起動していました。再起動においても、ドキュメントの通りに Preboot が機能しているようです。\u003c/p\u003e\n\n\u003ch3 id=\"Web-dyno-1-台目\"\u003eWeb dyno 1 台目\u003c/h3\u003e\n\n\u003cp\u003eWeb dyno 1 台の状態が \u003ccode\u003eup\u003c/code\u003e から \u003ccode\u003estarting\u003c/code\u003e に変わりました。\u003c/p\u003e\n\n\u003cpre class=\"code\" data-lang=\"\" data-unlink\u003eNov 30 11:41:22 heroku[web] notice Cycling\nNov 30 11:41:22 heroku[web] notice State changed from up to starting\u003c/pre\u003e\n\n\n\u003cp\u003e新 Web dyno 1 台で Puma が起動を開始しました。\u003c/p\u003e\n\n\u003cpre class=\"code\" data-lang=\"\" data-unlink\u003eNov 30 11:41:42 heroku[web] notice Starting process with command `bin/rails s -p 32434 -e production`\nNov 30 11:41:44 app[web] info [heroku-exec] Starting\nNov 30 11:41:50 app[web] info =\u0026gt; Booting Puma\nNov 30 11:41:50 app[web] info =\u0026gt; Rails 5.2.1.1 application starting in production\nNov 30 11:41:50 app[web] info =\u0026gt; Run `rails server -h` for more startup options\u003c/pre\u003e\n\n\n\u003cp\u003eWeb dyno 1 台の状態が \u003ccode\u003estarting\u003c/code\u003e から \u003ccode\u003eup\u003c/code\u003e に変わりました。まだ Puma は起動しきっていません。\u003c/p\u003e\n\n\u003cpre class=\"code\" data-lang=\"\" data-unlink\u003eNov 30 11:41:51 heroku[web] notice State changed from starting to up\u003c/pre\u003e\n\n\n\u003cp\u003e新 Web dyno 1 台で Puma が起動しきりました。相変わらず時間がかかります。\u003c/p\u003e\n\n\u003cpre class=\"code\" data-lang=\"\" data-unlink\u003eNov 30 11:45:45 app[web] info Puma starting in single mode...\nNov 30 11:45:45 app[web] info * Version 3.12.0 (ruby 2.5.3-p105), codename: Llamas in Pajamas\nNov 30 11:45:45 app[web] info * Min threads: 11, max threads: 11\nNov 30 11:45:45 app[web] info * Environment: production\nNov 30 11:45:45 app[web] info * Listening on tcp://0.0.0.0:32434\nNov 30 11:45:45 app[web] info Use Ctrl-C to stop\u003c/pre\u003e\n\n\n\u003cp\u003e旧 Web dyno 1 台で Puma が終了しました。前述の意訳では約 4~6 分後とありましたが、間を置かずに終了しました。\u003c/p\u003e\n\n\u003cpre class=\"code\" data-lang=\"\" data-unlink\u003eNov 30 11:45:55 heroku[web] notice Stopping all processes with SIGTERM\nNov 30 11:45:56 app[web] info Gracefully stopping, waiting for requests to finish\nNov 30 11:45:56 app[web] info === puma shutdown: 2018-11-30 02:45:55 +0000 ===\nNov 30 11:45:56 app[web] info Goodbye!\nNov 30 11:45:56 app[web] info Exiting\nNov 30 11:45:56 heroku[web] notice Process exited with status 143\u003c/pre\u003e\n\n\n\u003ch3 id=\"Web-dyno-2-台目\"\u003eWeb dyno 2 台目\u003c/h3\u003e\n\n\u003cp\u003eもうひとつの Web dyno 1 台の状態が \u003ccode\u003eup\u003c/code\u003e から \u003ccode\u003estarting\u003c/code\u003e に変わりました。14 分くらい差があります。\u003ca href=\"https://devcenter.heroku.com/articles/dynos#automatic-dyno-restarts\"\u003e最大 216 分のランダムな差がある\u003c/a\u003eようなので、記載通りです。\u003c/p\u003e\n\n\u003cpre class=\"code\" data-lang=\"\" data-unlink\u003eNov 30 12:00:41 heroku[web] notice Cycling\nNov 30 12:00:41 heroku[web] notice State changed from up to starting\u003c/pre\u003e\n\n\n\u003cp\u003e新 Web dyno 1 台で Puma が起動を開始しました。\u003c/p\u003e\n\n\u003cpre class=\"code\" data-lang=\"\" data-unlink\u003eNov 30 12:00:59 heroku[web] notice Starting process with command `bin/rails s -p 16965 -e production`\nNov 30 12:01:01 app[web] info [heroku-exec] Starting\nNov 30 12:01:08 app[web] info =\u0026gt; Booting Puma\nNov 30 12:01:08 app[web] info =\u0026gt; Rails 5.2.1.1 application starting in production\nNov 30 12:01:08 app[web] info =\u0026gt; Run `rails server -h` for more startup options\u003c/pre\u003e\n\n\n\u003cp\u003eWeb dyno 1 台の状態が \u003ccode\u003estarting\u003c/code\u003e から \u003ccode\u003eup\u003c/code\u003e に変わりました。まだ Puma は起動しきっていません。\u003c/p\u003e\n\n\u003cpre class=\"code\" data-lang=\"\" data-unlink\u003eNov 30 12:01:10 heroku[web] notice State changed from starting to up\u003c/pre\u003e\n\n\n\u003cp\u003e新 Web dyno 1 台で Puma が起動しきりました。今回は時間がかかりませんでした。\u003c/p\u003e\n\n\u003cpre class=\"code\" data-lang=\"\" data-unlink\u003eNov 30 12:01:15 app[web] info Puma starting in single mode...\nNov 30 12:01:15 app[web] info * Version 3.12.0 (ruby 2.5.3-p105), codename: Llamas in Pajamas\nNov 30 12:01:15 app[web] info * Min threads: 11, max threads: 11\nNov 30 12:01:15 app[web] info * Environment: production\nNov 30 12:01:15 app[web] info * Listening on tcp://0.0.0.0:16965\nNov 30 12:01:15 app[web] info Use Ctrl-C to stop\u003c/pre\u003e\n\n\n\u003cp\u003e旧 Web dyno 1 台で Puma が終了しました。今度は時間がかかりました。前述の意訳では約 4~6 分後とあるため合っています。\u003c/p\u003e\n\n\u003cpre class=\"code\" data-lang=\"\" data-unlink\u003eNov 30 12:05:14 heroku[web] notice Stopping all processes with SIGTERM\nNov 30 12:05:14 app[web] info Gracefully stopping, waiting for requests to finish\nNov 30 12:05:14 app[web] info === puma shutdown: 2018-11-30 03:05:14 +0000 ===\nNov 30 12:05:14 app[web] info Goodbye!\nNov 30 12:05:14 app[web] info Exiting\nNov 30 12:05:14 heroku[web] notice Process exited with status 143\u003c/pre\u003e\n\n\n\u003ch2 id=\"注意事項\"\u003e注意事項\u003c/h2\u003e\n\n\u003cp\u003ePreboot を有効にしてデプロイすると、無効時よりも時間をかけて Dyno が差し替わります。全ての Dyno に反映されるまで数分かかることもあるようです。この点はチームで把握しておく必要があります。\u003c/p\u003e\n\n\u003cp\u003e最大 3 分間、新旧の Dyno が重複するため、Add-on の同時接続数の制限に達する可能性があります。Heroku Postgres の場合は \u003ca href=\"https://github.com/heroku/heroku-buildpack-pgbouncer\"\u003epgbouncer buildpack\u003c/a\u003e を使うことが奨励されています。\u003c/p\u003e\n\n\u003cp\u003e新旧の Dyno が混在することにより、一度のデプロイで DB schema とアプリケーションコードを変更すると、不具合が発生する可能性があります。Preboot 機能を一旦無効にすることを勧めています。でも、Procfile に \u003ccode\u003erelease\u003c/code\u003e process type を定義していれば同じなので、個人的には気にならないですね。\u003c/p\u003e\n\n\u003cp\u003ePreboot 機能を使うためには、\u003cstrong\u003eDyno type が Standard-1X 以上\u003c/strong\u003eである必要があります。Dyno type が \u003ccode\u003eFree\u003c/code\u003e と \u003ccode\u003eHobby\u003c/code\u003e では Preboot を有効に出来ません。\u003c/p\u003e\n\n\u003cp\u003e\u003cstrong\u003ePreboot が適用されるのは Web Dyno だけ\u003c/strong\u003eです。自分で定義した \u003ccode\u003eworker\u003c/code\u003e Dyno 等は対象外です。\u003c/p\u003e\n\n\u003ch2 id=\"まとめ\"\u003eまとめ\u003c/h2\u003e\n\n\u003cp\u003eHeroku の Preboot 機能を深掘りし、有効にする必要性を理解しました。\u003c/p\u003e\n\n\u003cul\u003e\n\u003cli\u003eWeb Dyno を 2 台以上にしたら Preboot を有効にすると良さそう\u003c/li\u003e\n\u003cli\u003e前述の「注意事項」には留意したほうが良い\u003c/li\u003e\n\u003c/ul\u003e\n\n\n\u003cp\u003eしかし、こんなに長い記事になるとは...。\u003c/p\u003e\n\n\u003cp\u003e明日の \u003ca href=\"https://qiita.com/advent-calendar/2018/heroku\"\u003eheroku Advent Calendar 2018\u003c/a\u003e はまたまた \u003ca href=\"http://blog.hatena.ne.jp/masutaka26/\" class=\"hatena-id-icon\"\u003e\u003cimg src=\"https://cdn.profile-image.st-hatena.com/users/masutaka26/profile.png\" width=\"16\" height=\"16\" alt=\"\" class=\"hatena-id-icon\"\u003eid:masutaka26\u003c/a\u003e です。Bitbar の便利な Heroku plugin を紹介してくれるみたいです。お楽しみに。\u003c/p\u003e\n\u003cdiv class=\"footnotes\"\u003e\n\u003chr/\u003e\n\u003col\u003e\n\u003cli id=\"fn:1\"\u003e\n\u003cp\u003eこのような使い捨ての Dyno を \u003ca href=\"https://devcenter.heroku.com/articles/one-off-dynos\"\u003eOne-Off Dyno\u003c/a\u003e と呼びます。heroku run で使われる Dyno もそうです。\u003ca href=\"#fnref:1\" rev=\"footnote\"\u003e\u0026#8617;\u003c/a\u003e\u003c/p\u003e\u003c/li\u003e\n\u003c/ol\u003e\n\u003c/div\u003e\n\n","contentSnippet":"こんにちは id:masutaka26 です。この記事は Heroku Advent Calendar 2018 の 12 日目の記事です。qiita.com昨日は @takuchalle さんの『Heroku で wkhtmltoimage を使う方法』でした。似たツールの webkit2png は使ったことがあります。webkit2png が動作するのは macOS だけですが、wkhtmltoimage は Windows と Linux でも動作するのですね。へぇー。先月、Heroku の Preboot 機能を調べる機会がありました。Web 上の日本語記事は Preboot が GA になった 2014 年頃の情報が多く、若干情報が古かったため、2018 年時点の最新の情報をまとめます。Preboot 機能とは何かどのように有効にするのか使用する Procfileデプロイによる heroku ps の変化デプロイ時の挙動デプロイ時のログ再起動時の挙動再起動時のログWeb dyno 1 台目Web dyno 2 台目注意事項まとめPreboot 機能とは何かProduction Check \u003e Dyno redundancy に書いてあるとおり、Heroku では冗長性確保のため、本番環境の Web Dyno は 2 台以上が奨励されています。Running at least 2 web dynos for any mission-critical app increases the probability that the app will remain available during a catastrophic event. Multiple dynos are also more likely to run on different physical infrastructure (for example, separate AWS Availability Zones), further increasing redundancy.ただし、それだけだとデプロイや 1 日 1 回の自動再起動で、処理の遅延（H27 - Client Request Interrupted）や H28 - Client Connection Idle が発生することがあります。以下のグラフは Dyno Restart のタイミングで H27 と H28 Error が発生している様子です。このグラフはダッシュボードの Metrics から確認できます。これを回避できるのが Preboot 機能です。どのように有効にするのかHeroku CLI で有効にできます。$ heroku features:enable preboot -a YOUR_APP_NAME有効になりました。簡単ですね。$ heroku features:info preboot -a YOUR_APP_NAME=== prebootDescription: Provide seamless web dyno deploys [general]Docs:        https://devcenter.heroku.com/articles/prebootEnabled:     true使用する Procfile今回はこの Procfile を使います。release: bin/rails db:migrate db:seed# Web appweb: bin/rails s -p $PORT -e $RAILS_ENVworker: PROCESS_TYPE=worker bundle exec sidekiq -C config/sidekiq.yml# Ad appad_worker: PROCESS_TYPE=ad_worker bundle exec sidekiq -C config/sidekiq.ymlweb, worker, ad_worker という 3 つの process type を定義しています。今回注目する process type は web だけです。1 行目で release も定義しているため、デプロイ時には One-Off Dyno1 で release 処理をしたあと、生成した Slug が Dyno に展開されていきます。デプロイによる heroku ps の変化それでは $ watch 'heroku ps -a YOUR_APP_NAME' しつつ、デプロイの様子を観察していきましょう。macOS では watch コマンドは $ brew install watch 等でインストール出来ます。Web Dyno 1 台の場合、release Dyno の実行が終わると、web.1 Dyno のステータスが up → starting → up と変化します。starting 中にリクエストがあると、クライアントは待たされ、前述の H27 や H28 Error が発生します。Web Dyno 1 台でデプロイした様子Web Dyno 2 台かつ Preboot 無効でも、基本的に同じです。2 台同時に up → starting → up と変化します。Web Dyno 2 台かつ Preboot 無効でデプロイした様子Web Dyno 2 台かつ Preboot を有効にすると、期待した通り、1 台ずつ up → starting → up になりませんでした・・・！あれ？Web Dyno 2 台かつ Preboot 有効でデプロイした様子Logs will show new dynos starting soon after the slug compile is finished. The output of heroku ps will immediately show the state (for example, starting or up) of the new dynos. Old dynos are still running but won’t appear in heroku ps.Preboot のドキュメントによると、heroku ps では確認できないようです。ただしログでは確認できるそう。デプロイ時の挙動Approximately 3 minutes after the deploy completes (or 2 minutes after your app’s boot timeout limit, which defaults to 1 minute), HTTP requests will start routing to the new dynos and simultaneously stop routing to the old dynos.遅くともデプロイ完了から約 3 分後、もしくはアプリケーションの起動タイムアウトリミット 2 分（デフォルトは 1 分）後、HTTP リクエストは新 Dyno に Routing されるそうです。Shortly after the new dynos are fully live and serving user requests, the old dynos will be shut down. You’ll see them shut down in the logs as usual.新 Dyno が完全に起動し、ユーザリクエストを処理するとすぐに、旧 Dyno はシャットダウンされるようです。これもログで確認可能とのこと。では実際にログを見てみましょう。デプロイ時のログgit push 後まもなく、Web dyno の状態が up から starting に変わりました。Nov 28 14:58:51 heroku[web] notice RestartingNov 28 14:58:51 heroku[web] notice State changed from up to startingNov 28 14:58:51 heroku[web] notice RestartingNov 28 14:58:51 heroku[web] notice State changed from up to starting新 Web dyno 2 台で Puma (Web server) がそれぞれ起動を開始しました。Nov 28 14:59:17 heroku[web] notice Starting process with command `bin/rails s -p 24256 -e production`Nov 28 14:59:19 heroku[web] notice Starting process with command `bin/rails s -p 15417 -e production`Nov 28 14:59:21 app[web] info [heroku-exec] StartingNov 28 14:59:22 app[web] info [heroku-exec] StartingNov 28 14:59:31 app[web] info =\u003e Booting PumaNov 28 14:59:31 app[web] info =\u003e Rails 5.2.1 application starting in productionNov 28 14:59:31 app[web] info =\u003e Run `rails server -h` for more startup optionsNov 28 14:59:32 app[web] info =\u003e Booting PumaNov 28 14:59:32 app[web] info =\u003e Rails 5.2.1 application starting in productionNov 28 14:59:32 app[web] info =\u003e Run `rails server -h` for more startup optionsWeb dyno の状態が starting から up に変わりました。まだ Puma は起動しきっていません。Nov 28 14:59:33 heroku[web] notice State changed from starting to upNov 28 14:59:34 heroku[web] notice State changed from starting to up新 Web dyno 1 台で Puma が起動しきりました。問題はありませんが、手元で起動するよりずいぶん遅い気がします。Nov 28 15:02:03 app[web] info Puma starting in single mode...Nov 28 15:02:03 app[web] info * Version 3.12.0 (ruby 2.5.3-p105), codename: Llamas in PajamasNov 28 15:02:03 app[web] info * Min threads: 11, max threads: 11Nov 28 15:02:03 app[web] info * Environment: productionNov 28 15:02:03 app[web] info * Listening on tcp://0.0.0.0:24256Nov 28 15:02:03 app[web] info Use Ctrl-C to stop旧 Web dyno 1 台で Puma が終了しました。前述の意訳では約 3 分とあるため合っています。Nov 28 15:02:19 heroku[web] notice Stopping all processes with SIGTERMNov 28 15:02:19 app[web] info Gracefully stopping, waiting for requests to finishNov 28 15:02:19 app[web] info === puma shutdown: 2018-11-28 06:02:19 +0000 ===Nov 28 15:02:19 app[web] info Goodbye!Nov 28 15:02:19 app[web] info ExitingNov 28 15:02:19 heroku[web] notice Process exited with status 143もうひとつの旧 Web dyno 1 台で Puma が終了しました。これも意訳のとおりです。Nov 28 15:03:25 heroku[web] notice Stopping all processes with SIGTERMNov 28 15:03:25 app[web] info Gracefully stopping, waiting for requests to finishNov 28 15:03:25 app[web] info === puma shutdown: 2018-11-28 06:03:25 +0000 ===Nov 28 15:03:25 app[web] info Goodbye!Nov 28 15:03:25 app[web] info ExitingNov 28 15:03:25 heroku[web] notice Process exited with status 143もうひとつの新 Web dyno 1 台で Puma が起動しきりました。Booting Puma からずいぶんと時間がかかりました。Nov 28 15:05:08 app[web] info Puma starting in single mode...Nov 28 15:05:08 app[web] info * Version 3.12.0 (ruby 2.5.3-p105), codename: Llamas in PajamasNov 28 15:05:08 app[web] info * Min threads: 11, max threads: 11Nov 28 15:05:08 app[web] info * Environment: productionNov 28 15:05:08 app[web] info * Listening on tcp://0.0.0.0:15417Nov 28 15:05:08 app[web] info Use Ctrl-C to stopPuma の起動に時間がかかるのは謎ですが、Preboot のドキュメントと相違ないと理解しました。再起動時の挙動再起動時の挙動も確認します。Heroku ではアプリケーションの健全性を維持するため、Dyno は 1 日に 1 回、自動的に再起動します。Dyno は差し替えられるため、ローカルファイルシステムの変更はすべて破棄されます。The new dynos will start receiving requests as soon as it binds to its assigned port. At this point, both the old and new dynos are receiving requests.新 Dyno は割り当てられたポートにバインドされると、すぐにリクエストを受信し始めます。この時点で、新旧の Dyno がリクエストを受信するそう。Approximately 4 to 6 minutes after the restart is invoked, the old dynos will be shut down. You’ll see them shut down in the logs as usual.再起動が行われてから、約 4~6 分後に旧 Dyno がシャットダウンされるようです。これもログで確認可能とのこと。Preboot が GA になった 2014 年頃は、まだ 1 日 1 回の再起動には対応していないようでした。現在は対応しているようです。再起動時のログ結論から書くと、1 台目が再起動し終えてから 2 台目が再起動していました。再起動においても、ドキュメントの通りに Preboot が機能しているようです。Web dyno 1 台目Web dyno 1 台の状態が up から starting に変わりました。Nov 30 11:41:22 heroku[web] notice CyclingNov 30 11:41:22 heroku[web] notice State changed from up to starting新 Web dyno 1 台で Puma が起動を開始しました。Nov 30 11:41:42 heroku[web] notice Starting process with command `bin/rails s -p 32434 -e production`Nov 30 11:41:44 app[web] info [heroku-exec] StartingNov 30 11:41:50 app[web] info =\u003e Booting PumaNov 30 11:41:50 app[web] info =\u003e Rails 5.2.1.1 application starting in productionNov 30 11:41:50 app[web] info =\u003e Run `rails server -h` for more startup optionsWeb dyno 1 台の状態が starting から up に変わりました。まだ Puma は起動しきっていません。Nov 30 11:41:51 heroku[web] notice State changed from starting to up新 Web dyno 1 台で Puma が起動しきりました。相変わらず時間がかかります。Nov 30 11:45:45 app[web] info Puma starting in single mode...Nov 30 11:45:45 app[web] info * Version 3.12.0 (ruby 2.5.3-p105), codename: Llamas in PajamasNov 30 11:45:45 app[web] info * Min threads: 11, max threads: 11Nov 30 11:45:45 app[web] info * Environment: productionNov 30 11:45:45 app[web] info * Listening on tcp://0.0.0.0:32434Nov 30 11:45:45 app[web] info Use Ctrl-C to stop旧 Web dyno 1 台で Puma が終了しました。前述の意訳では約 4~6 分後とありましたが、間を置かずに終了しました。Nov 30 11:45:55 heroku[web] notice Stopping all processes with SIGTERMNov 30 11:45:56 app[web] info Gracefully stopping, waiting for requests to finishNov 30 11:45:56 app[web] info === puma shutdown: 2018-11-30 02:45:55 +0000 ===Nov 30 11:45:56 app[web] info Goodbye!Nov 30 11:45:56 app[web] info ExitingNov 30 11:45:56 heroku[web] notice Process exited with status 143Web dyno 2 台目もうひとつの Web dyno 1 台の状態が up から starting に変わりました。14 分くらい差があります。最大 216 分のランダムな差があるようなので、記載通りです。Nov 30 12:00:41 heroku[web] notice CyclingNov 30 12:00:41 heroku[web] notice State changed from up to starting新 Web dyno 1 台で Puma が起動を開始しました。Nov 30 12:00:59 heroku[web] notice Starting process with command `bin/rails s -p 16965 -e production`Nov 30 12:01:01 app[web] info [heroku-exec] StartingNov 30 12:01:08 app[web] info =\u003e Booting PumaNov 30 12:01:08 app[web] info =\u003e Rails 5.2.1.1 application starting in productionNov 30 12:01:08 app[web] info =\u003e Run `rails server -h` for more startup optionsWeb dyno 1 台の状態が starting から up に変わりました。まだ Puma は起動しきっていません。Nov 30 12:01:10 heroku[web] notice State changed from starting to up新 Web dyno 1 台で Puma が起動しきりました。今回は時間がかかりませんでした。Nov 30 12:01:15 app[web] info Puma starting in single mode...Nov 30 12:01:15 app[web] info * Version 3.12.0 (ruby 2.5.3-p105), codename: Llamas in PajamasNov 30 12:01:15 app[web] info * Min threads: 11, max threads: 11Nov 30 12:01:15 app[web] info * Environment: productionNov 30 12:01:15 app[web] info * Listening on tcp://0.0.0.0:16965Nov 30 12:01:15 app[web] info Use Ctrl-C to stop旧 Web dyno 1 台で Puma が終了しました。今度は時間がかかりました。前述の意訳では約 4~6 分後とあるため合っています。Nov 30 12:05:14 heroku[web] notice Stopping all processes with SIGTERMNov 30 12:05:14 app[web] info Gracefully stopping, waiting for requests to finishNov 30 12:05:14 app[web] info === puma shutdown: 2018-11-30 03:05:14 +0000 ===Nov 30 12:05:14 app[web] info Goodbye!Nov 30 12:05:14 app[web] info ExitingNov 30 12:05:14 heroku[web] notice Process exited with status 143注意事項Preboot を有効にしてデプロイすると、無効時よりも時間をかけて Dyno が差し替わります。全ての Dyno に反映されるまで数分かかることもあるようです。この点はチームで把握しておく必要があります。最大 3 分間、新旧の Dyno が重複するため、Add-on の同時接続数の制限に達する可能性があります。Heroku Postgres の場合は pgbouncer buildpack を使うことが奨励されています。新旧の Dyno が混在することにより、一度のデプロイで DB schema とアプリケーションコードを変更すると、不具合が発生する可能性があります。Preboot 機能を一旦無効にすることを勧めています。でも、Procfile に release process type を定義していれば同じなので、個人的には気にならないですね。Preboot 機能を使うためには、Dyno type が Standard-1X 以上である必要があります。Dyno type が Free と Hobby では Preboot を有効に出来ません。Preboot が適用されるのは Web Dyno だけです。自分で定義した worker Dyno 等は対象外です。まとめHeroku の Preboot 機能を深掘りし、有効にする必要性を理解しました。Web Dyno を 2 台以上にしたら Preboot を有効にすると良さそう前述の「注意事項」には留意したほうが良いしかし、こんなに長い記事になるとは...。明日の heroku Advent Calendar 2018 はまたまた id:masutaka26 です。Bitbar の便利な Heroku plugin を紹介してくれるみたいです。お楽しみに。このような使い捨ての Dyno を One-Off Dyno と呼びます。heroku run で使われる Dyno もそうです。↩","link":"https://developer.feedforce.jp/entry/2018/12/12/120000","isoDate":"2018-12-12T03:00:00.000Z","dateMiliSeconds":1544583600000,"imageUrl":"https://cdn-ak.f.st-hatena.com/images/fotolife/m/masutaka26/20181113/20181113190345.png","authorName":"masutaka"},{"title":"『Heroku と EC Booster と私』と『Heroku ちょこっと Deep Dive』という発表をした","content":"\u003cp\u003eこんにちは。増田（\u003ca href=\"http://blog.hatena.ne.jp/masutaka26/\" class=\"hatena-id-icon\"\u003e\u003cimg src=\"https://cdn.profile-image.st-hatena.com/users/masutaka26/profile.png\" width=\"16\" height=\"16\" alt=\"\" class=\"hatena-id-icon\"\u003eid:masutaka26\u003c/a\u003e）です。以前住んだ街を訪れるのが趣味です。\u003c/p\u003e\n\n\u003cp\u003e週次の社内勉強会 \u003ca href=\"https://developer.feedforce.jp/archive/category/FFTT\"\u003eFFTT\u003c/a\u003e で『Heroku と EC Booster と私』と『Heroku ちょこっと Deep Dive』という発表をしました。\u003c/p\u003e\n\n\u003cp\u003eまさかのダブルタイトル・・・！ スライドを作っていたら別々の話のような気がして、こうなりました。\u003c/p\u003e\n\n\u003ch2\u003e発表の内容\u003c/h2\u003e\n\n\u003cscript async class=\"speakerdeck-embed\" data-id=\"868618a13fbb4e8d8baf8f00c1f2e962\" data-ratio=\"1.33333333333333\" src=\"//speakerdeck.com/assets/embed.js\"\u003e\u003c/script\u003e\n\n\n\u003cp\u003e『Heroku と EC Booster と私』は主に社内向けの話です。最近の EC Booster のインフラを紹介する機会がなかったので、今回の発表の場を借りました。\u003c/p\u003e\n\n\u003cp\u003e『Heroku ちょこっと Deep Dive』では Heroku の Slug について、ちょこっと調べました。\u003c/p\u003e\n\n\u003cp\u003eHeroku では \u003ca href=\"https://jp.heroku.com/dynos\"\u003eDyno\u003c/a\u003e という軽量コンテナ上で、アプリケーションが動作します。アプリケーションは \u003ca href=\"https://devcenter.heroku.com/articles/slug-compiler\"\u003eSlug というパッケージに固められて\u003c/a\u003eいます。Slug にはアプリケーションコードの他に Buildpack や、Ruby なら bundle install されたライブラリ等が含められています。\u003c/p\u003e\n\n\u003cp\u003e最近 Heroku を Terraform で管理し始めた時に、\u003ca href=\"https://www.terraform.io/docs/providers/heroku/r/slug.html\"\u003eheroku_slug\u003c/a\u003e というリソースを見つけました。使いはしなかったのですが、自分で Slug を変更できる感覚がよく分からなくて調べたことが始まりでした。\u003c/p\u003e\n\n\u003cp\u003eまさか Scratch から作れるとは思いませんでしたし、Slug の中身やサイズの増減を把握する方法が分かったことは大きな収穫でした。\u003c/p\u003e\n\n\u003cp\u003e発表では話し忘れたのですが、Heroku は Stack に日々セキュリティパッチが当たって、24 時間以内に適用されることは大きなメリットです。小さなチームで当てるべきパッチの把握や適用をするのは、相当しんどいですからね。\u003c/p\u003e\n\n\u003cp\u003eそれでは、発表後に書いてくれた付箋への返信です。\u003c/p\u003e\n\n\u003ch2\u003e発表の感想\u003c/h2\u003e\n\n\u003cp\u003e付箋紙に感想を書いてくれました。\u003ci class=\"blogicon-comment\" aria-hidden=\"true\"\u003e\u003c/i\u003e は私からのコメントです。\u003c/p\u003e\n\n\u003cul\u003e\n\u003cli\u003e\u003cspan itemscope itemtype=\"http://schema.org/Photograph\"\u003e\u003cimg src=\"https://cdn-ak.f.st-hatena.com/images/fotolife/m/masutaka26/20181112/20181112233219.jpg\" alt=\"Heroku by yousuke?\" title=\"f:id:masutaka26:20181112233219j:plain\" class=\"hatena-fotolife\" itemprop=\"image\"\u003e\u003c/span\u003e\n\n\u003cul\u003e\n\u003cli\u003e\u003ci class=\"blogicon-comment\" aria-hidden=\"true\"\u003e\u003c/i\u003e いつもありがとうございます\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003eふだん Heroku Review App しか使ってなかったんですが、興味を持ちました\n\n\u003cul\u003e\n\u003cli\u003e\u003ci class=\"blogicon-comment\" aria-hidden=\"true\"\u003e\u003c/i\u003e Rails アプリの公開にも、小さなスクリプトの定期実行にも使えるので便利ですよ\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003eマッスル マスタカ！💪\n\n\u003cul\u003e\n\u003cli\u003e\u003ci class=\"blogicon-comment\" aria-hidden=\"true\"\u003e\u003c/i\u003e マッスル マッスル！💪\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003eHeroku 未だに HTTP 1.1 なんですよね\n\n\u003cul\u003e\n\u003cli\u003e\u003ci class=\"blogicon-comment\" aria-hidden=\"true\"\u003e\u003c/i\u003e そうなんですよねー 💦 さすがにそろそろ...\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e早く AWS + CloudFront 使いたい\n\n\u003cul\u003e\n\u003cli\u003e\u003ci class=\"blogicon-comment\" aria-hidden=\"true\"\u003e\u003c/i\u003e assets は CDN に逃したいですねー\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e(dfplus.)io はいまだにフロントは Heroku 使ってマスタカ\n\n\u003cul\u003e\n\u003cli\u003e\u003ci class=\"blogicon-comment\" aria-hidden=\"true\"\u003e\u003c/i\u003e そうでありマスタカ\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003ePush された tar ball に build された file が入るんですか\n\n\u003cul\u003e\n\u003cli\u003e\u003ci class=\"blogicon-comment\" aria-hidden=\"true\"\u003e\u003c/i\u003e そんな感じですー\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003eEC Booster のリリース時に Heroku を徹底的につかいたおすことを目標にしていたので、この発表もマスタカさんのふだんの仕事もとても感謝しています\n\n\u003cul\u003e\n\u003cli\u003e\u003ci class=\"blogicon-comment\" aria-hidden=\"true\"\u003e\u003c/i\u003e もったいないお言葉、ありがとうございます！\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e「Heroku は良いサービス」めっちゃわかる\n\n\u003cul\u003e\n\u003cli\u003e\u003ci class=\"blogicon-comment\" aria-hidden=\"true\"\u003e\u003c/i\u003e だよねー\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003eHeroku は良しなにやってくれるけど、その「良しなに」部分もちゃんとオープンになっているのすばらしい\n\n\u003cul\u003e\n\u003cli\u003e\u003ci class=\"blogicon-comment\" aria-hidden=\"true\"\u003e\u003c/i\u003e ですねー。ずっと謎だった Slug の正体が分かってよかったです\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003eプロダクション環境での Heroku 運用、勉強になりました\n\n\u003cul\u003e\n\u003cli\u003e\u003ci class=\"blogicon-comment\" aria-hidden=\"true\"\u003e\u003c/i\u003e まだまだ小さなサービスですからね。これから大きくなると、問題がたくさん出てきそうです\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003eなんか push したら動かしてくれる Heroku が裏で何やってるか知れてよかったです！ 最近便利な機能知って Heroku いいなーってなってます！\n\n\u003cul\u003e\n\u003cli\u003e\u003ci class=\"blogicon-comment\" aria-hidden=\"true\"\u003e\u003c/i\u003e ありがとうございます。他にも \u003ca href=\"https://www.heroku.com/continuous-integration\"\u003eHeroku CI\u003c/a\u003e や \u003ca href=\"https://devcenter.heroku.com/articles/pipelines#promoting\"\u003ePromoting\u003c/a\u003e など、まだ試せていない機能がありますねー\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e資料が分かりやすいです\n\n\u003cul\u003e\n\u003cli\u003e\u003ci class=\"blogicon-comment\" aria-hidden=\"true\"\u003e\u003c/i\u003e 安心安全な資料作りを心がけて参ります\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e資料の文字数がちょうど良くてとても見やすいと思いました\n\n\u003cul\u003e\n\u003cli\u003e\u003ci class=\"blogicon-comment\" aria-hidden=\"true\"\u003e\u003c/i\u003e 本当はもっと減らしたいのですが、あとから読める資料としても作ったので、今回の長さになりました\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003eボトルネックがないようなら Heroku 便利そう\n\n\u003cul\u003e\n\u003cli\u003e\u003ci class=\"blogicon-comment\" aria-hidden=\"true\"\u003e\u003c/i\u003e とは言え、パフォーマンスを突き詰めると厳しいと感じています。現在は割とバックグラウンド＆バッチ処理にフォーカスしています\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003eさすが弊社で Heroku に一番詳しい男！！\n\n\u003cul\u003e\n\u003cli\u003e\u003ci class=\"blogicon-comment\" aria-hidden=\"true\"\u003e\u003c/i\u003e 引き続きニッチな領域を攻めていきます\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003eマスタカさんは説明が上手だなと思いました（こなみ）\n\n\u003cul\u003e\n\u003cli\u003e\u003ci class=\"blogicon-comment\" aria-hidden=\"true\"\u003e\u003c/i\u003e ありがとうございます！\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003eHeroku..... なんだかんだ、難しいイメージがあります...\n\n\u003cul\u003e\n\u003cli\u003e\u003ci class=\"blogicon-comment\" aria-hidden=\"true\"\u003e\u003c/i\u003e 私も最初はそうでしたねー\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e身近に仕事で Heroku 使ってる人だー\n\n\u003cul\u003e\n\u003cli\u003e\u003ci class=\"blogicon-comment\" aria-hidden=\"true\"\u003e\u003c/i\u003e いえす！\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e初心者でも使えるけど奥が深い Heroku\n\n\u003cul\u003e\n\u003cli\u003e\u003ci class=\"blogicon-comment\" aria-hidden=\"true\"\u003e\u003c/i\u003e ですねー\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\n\n\u003ch2\u003e発表の感想の感想\u003c/h2\u003e\n\n\u003cp\u003eHeroku はバックエンドエンジニアには概ね好評ですが、フロントエンドエンジニアには割と不評な印象を受けました。\u003c/p\u003e\n\n\u003cp\u003eHTTP/3 という話が出てきた今、未だに HTTP/1.1 なのはだいぶ遅れてますし、パフォーマンスを突き詰めると、どうしてもレイテンシー問題に直面してしまいます。逆に言えば、この辺どうにかなれば最強だと思うのですが。🌀\u003c/p\u003e\n\n\u003cp\u003eHeroku の先を見据えてやっていきます。💪\u003c/p\u003e\n","contentSnippet":"こんにちは。増田（id:masutaka26）です。以前住んだ街を訪れるのが趣味です。週次の社内勉強会 FFTT で『Heroku と EC Booster と私』と『Heroku ちょこっと Deep Dive』という発表をしました。まさかのダブルタイトル・・・！ スライドを作っていたら別々の話のような気がして、こうなりました。発表の内容『Heroku と EC Booster と私』は主に社内向けの話です。最近の EC Booster のインフラを紹介する機会がなかったので、今回の発表の場を借りました。『Heroku ちょこっと Deep Dive』では Heroku の Slug について、ちょこっと調べました。Heroku では Dyno という軽量コンテナ上で、アプリケーションが動作します。アプリケーションは Slug というパッケージに固められています。Slug にはアプリケーションコードの他に Buildpack や、Ruby なら bundle install されたライブラリ等が含められています。最近 Heroku を Terraform で管理し始めた時に、heroku_slug というリソースを見つけました。使いはしなかったのですが、自分で Slug を変更できる感覚がよく分からなくて調べたことが始まりでした。まさか Scratch から作れるとは思いませんでしたし、Slug の中身やサイズの増減を把握する方法が分かったことは大きな収穫でした。発表では話し忘れたのですが、Heroku は Stack に日々セキュリティパッチが当たって、24 時間以内に適用されることは大きなメリットです。小さなチームで当てるべきパッチの把握や適用をするのは、相当しんどいですからね。それでは、発表後に書いてくれた付箋への返信です。発表の感想付箋紙に感想を書いてくれました。 は私からのコメントです。 いつもありがとうございますふだん Heroku Review App しか使ってなかったんですが、興味を持ちました Rails アプリの公開にも、小さなスクリプトの定期実行にも使えるので便利ですよマッスル マスタカ！💪 マッスル マッスル！💪Heroku 未だに HTTP 1.1 なんですよね そうなんですよねー 💦 さすがにそろそろ...早く AWS + CloudFront 使いたい assets は CDN に逃したいですねー(dfplus.)io はいまだにフロントは Heroku 使ってマスタカ そうでありマスタカPush された tar ball に build された file が入るんですか そんな感じですーEC Booster のリリース時に Heroku を徹底的につかいたおすことを目標にしていたので、この発表もマスタカさんのふだんの仕事もとても感謝しています もったいないお言葉、ありがとうございます！「Heroku は良いサービス」めっちゃわかる だよねーHeroku は良しなにやってくれるけど、その「良しなに」部分もちゃんとオープンになっているのすばらしい ですねー。ずっと謎だった Slug の正体が分かってよかったですプロダクション環境での Heroku 運用、勉強になりました まだまだ小さなサービスですからね。これから大きくなると、問題がたくさん出てきそうですなんか push したら動かしてくれる Heroku が裏で何やってるか知れてよかったです！ 最近便利な機能知って Heroku いいなーってなってます！ ありがとうございます。他にも Heroku CI や Promoting など、まだ試せていない機能がありますねー資料が分かりやすいです 安心安全な資料作りを心がけて参ります資料の文字数がちょうど良くてとても見やすいと思いました 本当はもっと減らしたいのですが、あとから読める資料としても作ったので、今回の長さになりましたボトルネックがないようなら Heroku 便利そう とは言え、パフォーマンスを突き詰めると厳しいと感じています。現在は割とバックグラウンド＆バッチ処理にフォーカスしていますさすが弊社で Heroku に一番詳しい男！！ 引き続きニッチな領域を攻めていきますマスタカさんは説明が上手だなと思いました（こなみ） ありがとうございます！Heroku..... なんだかんだ、難しいイメージがあります... 私も最初はそうでしたねー身近に仕事で Heroku 使ってる人だー いえす！初心者でも使えるけど奥が深い Heroku ですねー発表の感想の感想Heroku はバックエンドエンジニアには概ね好評ですが、フロントエンドエンジニアには割と不評な印象を受けました。HTTP/3 という話が出てきた今、未だに HTTP/1.1 なのはだいぶ遅れてますし、パフォーマンスを突き詰めると、どうしてもレイテンシー問題に直面してしまいます。逆に言えば、この辺どうにかなれば最強だと思うのですが。🌀Heroku の先を見据えてやっていきます。💪","link":"https://developer.feedforce.jp/entry/2018/11/14/140000","isoDate":"2018-11-14T05:00:00.000Z","dateMiliSeconds":1542171600000,"imageUrl":"https://cdn-ak.f.st-hatena.com/images/fotolife/m/masutaka26/20181113/20181113190345.png","authorName":"masutaka"},{"title":"terraform-provider-healthchecksio に足りない機能を実装したらコラボレータになれた","content":"\u003cp\u003eこんにちは、増田（\u003ca href=\"http://blog.hatena.ne.jp/masutaka26/\" class=\"hatena-id-icon\"\u003e\u003cimg src=\"https://cdn.profile-image.st-hatena.com/users/masutaka26/profile.png\" width=\"16\" height=\"16\" alt=\"\" class=\"hatena-id-icon\"\u003eid:masutaka26\u003c/a\u003e）です。秋は体が急に冷え、一年で一番体調を崩しやすいので、意識して風呂に浸かっています。元気です。\u003c/p\u003e\n\n\u003cp\u003e\u003ca href=\"http://blog.hatena.ne.jp/critical_alert/\" class=\"hatena-id-icon\"\u003e\u003cimg src=\"https://cdn.profile-image.st-hatena.com/users/critical_alert/profile.png\" width=\"16\" height=\"16\" alt=\"\" class=\"hatena-id-icon\"\u003eid:critical_alert\u003c/a\u003e から \u003ca href=\"https://healthchecks.io/\"\u003ehttps://healthchecks.io/\u003c/a\u003e を教えてもらいました。\u003c/p\u003e\n\n\u003cp\u003e\u003cspan itemscope itemtype=\"http://schema.org/Photograph\"\u003e\u003cimg src=\"https://cdn-ak.f.st-hatena.com/images/fotolife/m/masutaka26/20181007/20181007221520.png\" alt=\"f:id:masutaka26:20181007221520p:plain\" title=\"f:id:masutaka26:20181007221520p:plain\" class=\"hatena-fotolife\" itemprop=\"image\"\u003e\u003c/span\u003e\u003c/p\u003e\n\n\u003cp\u003ecron 系の定期実行ジョブが本当に実行されたかを監視してくれるサービスです。\u003c/p\u003e\n\n\u003cp\u003e以前、\u003ca href=\"https://github.com/ondrejbartas/sidekiq-cron\"\u003esidekiq-cron\u003c/a\u003e のバグで定期実行ジョブが実行されないことがあったので、なんらかの方法でお手軽に監視したいモチベーションがありました。\u003c/p\u003e\n\n\u003ch2\u003eterraform-provider-healthchecksio を発見\u003c/h2\u003e\n\n\u003cp\u003eコード化したいなーと思って調べたら、非公式の Terraform provider を発見。\u003c/p\u003e\n\n\u003cp\u003e\u003ca class=\"embedly-card\" href=\"https://github.com/kristofferahl/terraform-provider-healthchecksio\"\u003ekristofferahl/terraform-provider-healthchecksio\u003c/a\u003e\u003c/p\u003e\n\n\u003cscript async src=\"//cdn.embedly.com/widgets/platform.js\" charset=\"UTF-8\"\u003e\u003c/script\u003e\n\n\n\u003cp\u003eこういった設定は属人化しやすいため、Terraform でコード化できるのは助かります。\u003c/p\u003e\n\n\u003cp\u003eただ、この時点では schedule や timezone などに対応していなかったため、採用は断念しました。\u003c/p\u003e\n\n\u003cp\u003ehealthchecks.io 上でポチポチと監視用のエンドポイントを作成し、ビジネスロジックにも ping するコードを埋め込み、いい感じに動作していました。\u003c/p\u003e\n\n\u003ch2\u003e実装開始\u003c/h2\u003e\n\n\u003cp\u003e悶々とした日を送り続けたある日、調べてみたら意外と簡単に機能が実装できそうなことが分かりました。\u003c/p\u003e\n\n\u003cp\u003e👇 それで送ったのがこの PR。可能な限りのパラメータを使えるようになりました。\u003c/p\u003e\n\n\u003cul\u003e\n\u003cli\u003e\u003ca href=\"https://github.com/kristofferahl/terraform-provider-healthchecksio/pull/1\"\u003eAdd parameters by masutaka · Pull Request #1\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\n\n\u003cp\u003eterraform import もしたいなーと調べたら、たったの 3 行で対応出来ることが判明。👇 2 つ目の PR を出して無事マージされました。\u003c/p\u003e\n\n\u003cul\u003e\n\u003cli\u003e\u003ca href=\"https://github.com/kristofferahl/terraform-provider-healthchecksio/pull/2\"\u003eIntroduce terraform import by masutaka · Pull Request #2\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\n\n\u003cp\u003eついでにしれっとコラボレータに招待してくれて、commit 権を頂けました。やったぜ！\u003c/p\u003e\n\n\u003cp\u003e👇 先ほど 3 つ目の PR を出しました。非公式の Terraform provider なので、自分でバイナリを設置する必要があるのですよね。参考になりそうな Makefile を作りました。\u003c/p\u003e\n\n\u003cul\u003e\n\u003cli\u003e\u003ca href=\"https://github.com/kristofferahl/terraform-provider-healthchecksio/pull/3\"\u003eAdd examples/Makefile by masutaka · Pull Request #3\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\n\n\u003ch2\u003e今後の予定\u003c/h2\u003e\n\n\u003cblockquote\u003e\u003cp\u003eThe database failover process is manual, and the ops team consists of a single person, so multi-hour or even multi-day outages are possible!\u003c/p\u003e\n\n\u003cp\u003eWhile we can only guarantee a best effort availability, in practice the availability has exceeded 99.9% since the service publicly launched in July 2015.\u003c/p\u003e\n\n\u003cp\u003e\u003ca href=\"https://healthchecks.io/about/\"\u003ehttps://healthchecks.io/about/\u003c/a\u003e\u003c/p\u003e\u003c/blockquote\u003e\n\n\u003cp\u003ehealthchecks.io は安定稼働しており、2015 年 7 月のサービス開始以来、稼働率は 99.9% を超えているそうです。ただあくまでベストエフォート型の可用性しか保証していないので、過信は禁物です。いわゆる 1 人開発プロジェクトでもあります。\u003c/p\u003e\n\n\u003cp\u003e今後は Datadog で同じ監視が出来るか調査して、healthchecks.io と併用したいなーと思っています。\u003ca href=\"https://cronitor.io/\"\u003eCronitor\u003c/a\u003e も頭の片隅にあるけど、少しオーバースペック感があります。\u003c/p\u003e\n\n\u003ch2\u003eおまけ\u003c/h2\u003e\n\n\u003cp\u003ehealthchecks.io は OSS でもあり、GitHub 上にコードが公開されています。Django で実装されています。\u003c/p\u003e\n\n\u003cp\u003e\u003ca class=\"embedly-card\" href=\"https://github.com/healthchecks/healthchecks\"\u003ehealthchecks/healthchecks\u003c/a\u003e\u003c/p\u003e\n","contentSnippet":"こんにちは、増田（id:masutaka26）です。秋は体が急に冷え、一年で一番体調を崩しやすいので、意識して風呂に浸かっています。元気です。id:critical_alert から https://healthchecks.io/ を教えてもらいました。cron 系の定期実行ジョブが本当に実行されたかを監視してくれるサービスです。以前、sidekiq-cron のバグで定期実行ジョブが実行されないことがあったので、なんらかの方法でお手軽に監視したいモチベーションがありました。terraform-provider-healthchecksio を発見コード化したいなーと思って調べたら、非公式の Terraform provider を発見。kristofferahl/terraform-provider-healthchecksioこういった設定は属人化しやすいため、Terraform でコード化できるのは助かります。ただ、この時点では schedule や timezone などに対応していなかったため、採用は断念しました。healthchecks.io 上でポチポチと監視用のエンドポイントを作成し、ビジネスロジックにも ping するコードを埋め込み、いい感じに動作していました。実装開始悶々とした日を送り続けたある日、調べてみたら意外と簡単に機能が実装できそうなことが分かりました。👇 それで送ったのがこの PR。可能な限りのパラメータを使えるようになりました。Add parameters by masutaka · Pull Request #1terraform import もしたいなーと調べたら、たったの 3 行で対応出来ることが判明。👇 2 つ目の PR を出して無事マージされました。Introduce terraform import by masutaka · Pull Request #2ついでにしれっとコラボレータに招待してくれて、commit 権を頂けました。やったぜ！👇 先ほど 3 つ目の PR を出しました。非公式の Terraform provider なので、自分でバイナリを設置する必要があるのですよね。参考になりそうな Makefile を作りました。Add examples/Makefile by masutaka · Pull Request #3今後の予定The database failover process is manual, and the ops team consists of a single person, so multi-hour or even multi-day outages are possible!While we can only guarantee a best effort availability, in practice the availability has exceeded 99.9% since the service publicly launched in July 2015.https://healthchecks.io/about/healthchecks.io は安定稼働しており、2015 年 7 月のサービス開始以来、稼働率は 99.9% を超えているそうです。ただあくまでベストエフォート型の可用性しか保証していないので、過信は禁物です。いわゆる 1 人開発プロジェクトでもあります。今後は Datadog で同じ監視が出来るか調査して、healthchecks.io と併用したいなーと思っています。Cronitor も頭の片隅にあるけど、少しオーバースペック感があります。おまけhealthchecks.io は OSS でもあり、GitHub 上にコードが公開されています。Django で実装されています。healthchecks/healthchecks","link":"https://developer.feedforce.jp/entry/2018/10/09/140000","isoDate":"2018-10-09T05:00:00.000Z","dateMiliSeconds":1539061200000,"imageUrl":"https://cdn-ak.f.st-hatena.com/images/fotolife/m/masutaka26/20181007/20181007221520.png","authorName":"masutaka"},{"title":"先期の MVP に選ばれた","content":"\u003cp\u003eお元気にしてますか。増田（\u003ca href=\"http://blog.hatena.ne.jp/masutaka26/\" class=\"hatena-id-icon\"\u003e\u003cimg src=\"https://cdn.profile-image.st-hatena.com/users/masutaka26/profile.png\" width=\"16\" height=\"16\" alt=\"\" class=\"hatena-id-icon\"\u003eid:masutaka26\u003c/a\u003e）です。\u003c/p\u003e\n\n\u003cp\u003e先週の金曜日にフィードフォースにおける 2017 年度（2017年6月 〜 2018年5月）の納会が行われ、その中で初の MVP を受賞することができました。🎉\u003c/p\u003e\n\n\u003cp\u003e\u003cfigure class=\"figure-image figure-image-fotolife\" title=\"喜びのコメントを表明中のしがないますたか\"\u003e\u003cspan itemscope itemtype=\"http://schema.org/Photograph\"\u003e\u003cimg src=\"https://cdn-ak.f.st-hatena.com/images/fotolife/m/masutaka26/20180608/20180608194920.jpg\" alt=\"f:id:masutaka26:20180608194920j:plain\" title=\"f:id:masutaka26:20180608194920j:plain\" class=\"hatena-fotolife\" itemprop=\"image\"\u003e\u003c/span\u003e\u003cfigcaption\u003e喜びのコメントを表明中のしがないますたか\u003c/figcaption\u003e\u003c/figure\u003e\u003c/p\u003e\n\n\u003cp\u003e\u003cfigure class=\"figure-image figure-image-fotolife\" title=\"チーム賞ももらったヨ\"\u003e\u003cspan itemscope itemtype=\"http://schema.org/Photograph\"\u003e\u003cimg src=\"https://cdn-ak.f.st-hatena.com/images/fotolife/m/masutaka26/20180614/20180614005507.jpg\" alt=\"f:id:masutaka26:20180614005507j:plain\" title=\"f:id:masutaka26:20180614005507j:plain\" class=\"hatena-fotolife\" itemprop=\"image\"\u003e\u003c/span\u003e\u003cfigcaption\u003eチーム賞ももらったヨ\u003c/figcaption\u003e\u003c/figure\u003e\u003c/p\u003e\n\n\u003cp\u003e会社で賞を頂いたのは 4 年前のルーキー賞以来です。\u003c/p\u003e\n\n\u003cp\u003e\u003ciframe src=\"https://hatenablog-parts.com/embed?url=https%3A%2F%2Fmasutaka.net%2Fchalow%2F2014-06-13-1.html\" title=\"会社でルーキー賞に選ばれた\" class=\"embed-card embed-webcard\" scrolling=\"no\" frameborder=\"0\" style=\"display: block; width: 100%; height: 155px; max-width: 500px; margin: 10px 0px;\"\u003e\u003c/iframe\u003e\u003ccite class=\"hatena-citation\"\u003e\u003ca href=\"https://masutaka.net/chalow/2014-06-13-1.html\"\u003emasutaka.net\u003c/a\u003e\u003c/cite\u003e\u003c/p\u003e\n\n\u003cp\u003e\u003cdel\u003e四年寝太郎としては、取るべくして取った賞だと思いました（ｷﾘｯ\u003c/del\u003e\u003c/p\u003e\n\n\u003cp\u003e正直なところ、頑張ったで賞くらいはもらえたりして？とボンヤリ思っていましたが\u003ca href=\"#f-3841f537\" name=\"fn-3841f537\" title=\"そのような賞はありません\"\u003e*1\u003c/a\u003e、まさか MVP とは思いもよらず、発表の瞬間は素で驚きました。\u003c/p\u003e\n\n\u003cp\u003e2017 年度は以下のチームに所属していました。\u003c/p\u003e\n\n\u003cul\u003e\n\u003cli\u003e2017 年 6 月 〜 2018 年 3 月\n\n\u003cul\u003e\n\u003cli\u003e\u003ca href=\"https://dfplus.feedforce.jp/\"\u003eDF PLUS\u003c/a\u003e（社内では DF Maker と呼ばれる）\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e2018 年 4 月 〜 2018 年 5 月\n\n\u003cul\u003e\n\u003cli\u003e\u003ca href=\"https://ecbooster.jp/\"\u003eEC Booster\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\n\n\u003cp\u003eDF Maker ではサービスの信頼性向上にひたすら努める毎日でした。ECS でとんでもない量のエラーが発生して、３連休の間は暇を見つけてエラーログを確認してたなー（遠い目）。\u003c/p\u003e\n\n\u003cp\u003eEC Booster ではチームビルディングから始めました。👇️以下の記事にまとまっています。\u003c/p\u003e\n\n\u003cp\u003e\u003ciframe src=\"https://hatenablog-parts.com/embed?url=https%3A%2F%2Fdeveloper.feedforce.jp%2Fentry%2F2018%2F05%2F21%2F150000\" title=\"『開発基盤チームとして課題を探したらマネジメントをしていた』という発表をした - Feedforce Developer Blog\" class=\"embed-card embed-blogcard\" scrolling=\"no\" frameborder=\"0\" style=\"display: block; width: 100%; height: 190px; max-width: 500px; margin: 10px 0px;\"\u003e\u003c/iframe\u003e\u003ccite class=\"hatena-citation\"\u003e\u003ca href=\"https://developer.feedforce.jp/entry/2018/05/21/150000\"\u003edeveloper.feedforce.jp\u003c/a\u003e\u003c/cite\u003e\u003c/p\u003e\n\n\u003cp\u003eどちらにも共通することが、2 年目の優秀な若者と仕事ができたことです。私が若者を引っ張っていくぜーという感じではなくむしろ逆で、すでにサービスを知り尽くした若者から学ぶ日々でした（今もそうです）。\u003c/p\u003e\n\n\u003cp\u003eその中で、「こうすればチーム開発がドライブするだろう」や「こうすればサービスの質を高められるだろう」というアイディアを出し、実践し、小さな改善と失敗を繰り返したことが、結果としてチームの状況を良くしたりサービスの質を高めることが出来たのだと思います（現在進行系）。\u003c/p\u003e\n\n\u003cp\u003eもちろん、一緒に働くことができたチームの皆さんの協力があっての賞です。ありがとうございます。🙏\u003c/p\u003e\n\n\u003cp\u003eそれではまた 4 年後にお会いしましょう💤\u003c/p\u003e\n\u003cdiv class=\"footnote\"\u003e\n\u003cp class=\"footnote\"\u003e\u003ca href=\"#fn-3841f537\" name=\"f-3841f537\" class=\"footnote-number\"\u003e*1\u003c/a\u003e\u003cspan class=\"footnote-delimiter\"\u003e:\u003c/span\u003e\u003cspan class=\"footnote-text\"\u003eそのような賞はありません\u003c/span\u003e\u003c/p\u003e\n\u003c/div\u003e","contentSnippet":"お元気にしてますか。増田（id:masutaka26）です。先週の金曜日にフィードフォースにおける 2017 年度（2017年6月 〜 2018年5月）の納会が行われ、その中で初の MVP を受賞することができました。🎉喜びのコメントを表明中のしがないますたかチーム賞ももらったヨ会社で賞を頂いたのは 4 年前のルーキー賞以来です。masutaka.net四年寝太郎としては、取るべくして取った賞だと思いました（ｷﾘｯ正直なところ、頑張ったで賞くらいはもらえたりして？とボンヤリ思っていましたが*1、まさか MVP とは思いもよらず、発表の瞬間は素で驚きました。2017 年度は以下のチームに所属していました。2017 年 6 月 〜 2018 年 3 月DF PLUS（社内では DF Maker と呼ばれる）2018 年 4 月 〜 2018 年 5 月EC BoosterDF Maker ではサービスの信頼性向上にひたすら努める毎日でした。ECS でとんでもない量のエラーが発生して、３連休の間は暇を見つけてエラーログを確認してたなー（遠い目）。EC Booster ではチームビルディングから始めました。👇️以下の記事にまとまっています。developer.feedforce.jpどちらにも共通することが、2 年目の優秀な若者と仕事ができたことです。私が若者を引っ張っていくぜーという感じではなくむしろ逆で、すでにサービスを知り尽くした若者から学ぶ日々でした（今もそうです）。その中で、「こうすればチーム開発がドライブするだろう」や「こうすればサービスの質を高められるだろう」というアイディアを出し、実践し、小さな改善と失敗を繰り返したことが、結果としてチームの状況を良くしたりサービスの質を高めることが出来たのだと思います（現在進行系）。もちろん、一緒に働くことができたチームの皆さんの協力があっての賞です。ありがとうございます。🙏それではまた 4 年後にお会いしましょう💤*1:そのような賞はありません","link":"https://developer.feedforce.jp/entry/2018/06/15/130000","isoDate":"2018-06-15T04:00:00.000Z","dateMiliSeconds":1529035200000,"imageUrl":"https://cdn-ak.f.st-hatena.com/images/fotolife/m/masutaka26/20180614/20180614005507.jpg","authorName":"masutaka"},{"title":"『開発基盤チームとして課題を探したらマネジメントをしていた』という発表をした","content":"\u003cp\u003eこんにちは。増田（\u003ca href=\"http://blog.hatena.ne.jp/masutaka26/\" class=\"hatena-id-icon\"\u003e\u003cimg src=\"https://cdn.profile-image.st-hatena.com/users/masutaka26/profile.png\" width=\"16\" height=\"16\" alt=\"\" class=\"hatena-id-icon\"\u003eid:masutaka26\u003c/a\u003e）です。発表が無事終わり、何かゲームでも買おうかなと思ってます。\u003c/p\u003e\n\n\u003cp\u003eさて、フィードフォースでは毎週金曜日 16:00 から、社内技術勉強会を開催しています。当番制の持ち回りで技術に関連したことを発表します。\u003c/p\u003e\n\n\u003cp\u003e先週金曜日は私の当番で『開発基盤チームとして課題を探したらマネジメントをしていた』という発表をしました。\u003c/p\u003e\n\n\u003cp\u003e技術チーム以外の方もたくさん聞きに来てくれて、ありがたかったです。🙏\u003c/p\u003e\n\n\u003ch2\u003e発表の内容\u003c/h2\u003e\n\n\u003cscript async class=\"speakerdeck-embed\" data-id=\"978c7016bb7b473693f547116e8e704f\" data-ratio=\"1.33333333333333\" src=\"//speakerdeck.com/assets/embed.js\"\u003e\u003c/script\u003e\n\n\n\u003cp\u003e\u003ca href=\"http://developer.feedforce.jp/entry/2017/10/16/150000\"\u003e前回\u003c/a\u003e含めて、これまでの発表は全てコードが登場していました。今回のようなコードが登場しないマネジメントの話は、内容が拡散しがちで難しかったです。結局まとまりませんでした...。\u003c/p\u003e\n\n\u003cp\u003e今回は敢えて後から読めるプレゼン資料にしました。なのでプレゼン資料としては冗長な書き方になっています。\u003c/p\u003e\n\n\u003cp\u003eまとめるとこんな内容です。\u003c/p\u003e\n\n\u003cul\u003e\n\u003cli\u003eコミュニケーションの不確実性を解消することが、マネジメント（やチームビルディング）に必要なはず\u003c/li\u003e\n\u003cli\u003eそのため自ら場に飛び込んで、情報の非対称性を解消していった\u003c/li\u003e\n\u003cli\u003eこれからもソフトウェアを書くこと以外に課題解決の手段があればやっていく\u003c/li\u003e\n\u003cli\u003eそして徐々にマネジメントにかける時間を減らし、コードを書く時間を増やしていく\u003c/li\u003e\n\u003c/ul\u003e\n\n\n\u003cp\u003e今思えば、話し忘れたことがポロポロと出てきます。\u003c/p\u003e\n\n\u003cul\u003e\n\u003cli\u003eそもそもチームメンバーは自走できる方々で、ホワイトボード整理の時も方針だけ話したら勝手に整理されていった\n\n\u003cul\u003e\n\u003cli\u003e私は方向性を決めただけ\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003eチームに入りたてのときは少々オーバーリアクションを心がけ、徐々に普通に戻していく。\n\n\u003cul\u003e\n\u003cli\u003e何考えている人か分かってもらうことで、その後のコミュニケーションをスムーズにする\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\n\n\u003cp\u003e完璧な発表などありませんね。\u003c/p\u003e\n\n\u003ch2\u003e発表の感想\u003c/h2\u003e\n\n\u003cp\u003e付箋紙に感想を書いてくれました。\u003ci class=\"blogicon-comment\" aria-hidden=\"true\"\u003e\u003c/i\u003e は私からのコメントです。\u003c/p\u003e\n\n\u003cul\u003e\n\u003cli\u003eジョハリの窓の紹介ありがとうございます。勉強になります！\n\n\u003cul\u003e\n\u003cli\u003e\u003ci class=\"blogicon-comment\" aria-hidden=\"true\"\u003e\u003c/i\u003e 私も『\u003ca href=\"https://www.amazon.co.jp/dp/B079TLW41L/\"\u003eエンジニアリング組織論への招待\u003c/a\u003e』で初めて知りました。数年前にプロダクトオーナーの学習をした以来ですから...\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e自分はまだマネジメントからは程遠い存在なのですが、話しかけやすいオーラを出すことや、くだらないと思うことも質問することなどは、今すぐにでも実行出来るし、目指すことだと思いました。ありがとうございました！\n\n\u003cul\u003e\n\u003cli\u003e\u003ci class=\"blogicon-comment\" aria-hidden=\"true\"\u003e\u003c/i\u003e はい、個々が意識することが自走するチームや、個々のリーダーシップに繋がると思います\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e共感できる良い話でした\n\n\u003cul\u003e\n\u003cli\u003e\u003ci class=\"blogicon-comment\" aria-hidden=\"true\"\u003e\u003c/i\u003e あざす！\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e初公開の画像が見られて良かったです\n\n\u003cul\u003e\n\u003cli\u003e\u003ci class=\"blogicon-comment\" aria-hidden=\"true\"\u003e\u003c/i\u003e お粗末さまでした...\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e早くインフラ朝会にもどって来てください\n\n\u003cul\u003e\n\u003cli\u003e\u003ci class=\"blogicon-comment\" aria-hidden=\"true\"\u003e\u003c/i\u003e 今回の件が落ち着いたらインフラ朝会にもどりますよ。待っていてくださいね！\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e必要な情報とそうでもない情報の整理はものすごい HP/MP を消費しそう\n\n\u003cul\u003e\n\u003cli\u003e\u003ci class=\"blogicon-comment\" aria-hidden=\"true\"\u003e\u003c/i\u003e そうですね...\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003eマネジメントの成果はすぐには結果に現れないかも？どの位の頻度で振り返るべきなのか？\n\n\u003cul\u003e\n\u003cli\u003e\u003ci class=\"blogicon-comment\" aria-hidden=\"true\"\u003e\u003c/i\u003e イテレーションごとの振り返りで、チームを観察すれば良いです。マネジメントの成果かどうかは重要ではないと思います\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e◯◯を支える技術\n\n\u003cul\u003e\n\u003cli\u003e\u003ci class=\"blogicon-comment\" aria-hidden=\"true\"\u003e\u003c/i\u003e 次回はコードの話をしよう...\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e知識科学やり直さなきゃ・・・\n\n\u003cul\u003e\n\u003cli\u003e\u003ci class=\"blogicon-comment\" aria-hidden=\"true\"\u003e\u003c/i\u003e 私は今回で終了ですw\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003eチームの問題点を発見して、それを解決する手段を選ばないスタンスがすごい\n\n\u003cul\u003e\n\u003cli\u003e\u003ci class=\"blogicon-comment\" aria-hidden=\"true\"\u003e\u003c/i\u003e もう必死ですよ（笑）\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e「内心ではなく行動に注目する」は、認知行動療法などでも使われていますね（最近のトレンド？）\n\n\u003cul\u003e\n\u003cli\u003e\u003ci class=\"blogicon-comment\" aria-hidden=\"true\"\u003e\u003c/i\u003e へぇ〜\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003eなかなかボリュームある資料でしたが、作るのにどれくらいかかったのか気になります\n\n\u003cul\u003e\n\u003cli\u003e\u003ci class=\"blogicon-comment\" aria-hidden=\"true\"\u003e\u003c/i\u003e 先週土曜日の夜に草稿を作り「これでいけそう」という感触を得て、今週は平日の夜２日くらいで整理をしました。話す内容については一ヶ月くらい前から頭の中で考えたり、『\u003ca href=\"https://www.amazon.co.jp/dp/B079TLW41L/\"\u003eエンジニアリング組織論への招待\u003c/a\u003e』を全部読んだりしてました\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e最近疲弊してそうで心配でしたが、今日の発表で色々アウトプットしてもらって安心しました\n\n\u003cul\u003e\n\u003cli\u003e\u003ci class=\"blogicon-comment\" aria-hidden=\"true\"\u003e\u003c/i\u003e 気にかけて頂いてありがとうございます。これからも安心安全のマスタカをお届けして参ります\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003eうなずきすぎて首もげる\n\n\u003cul\u003e\n\u003cli\u003e\u003ci class=\"blogicon-comment\" aria-hidden=\"true\"\u003e\u003c/i\u003e ありがとうございます。参考になったことが各チームに還元されるとうれしいです\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003eマスタカさん自体はマネジメントよりコード書く方が好きなんでしょうか？\n\n\u003cul\u003e\n\u003cli\u003e\u003ci class=\"blogicon-comment\" aria-hidden=\"true\"\u003e\u003c/i\u003e そうですね。引き篭もってコードを書きたいです\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003eますたかさんのおかげでチームがちゃんと回りはじめた気がします\n\n\u003cul\u003e\n\u003cli\u003e\u003ci class=\"blogicon-comment\" aria-hidden=\"true\"\u003e\u003c/i\u003e そう言って頂けるとうれしいです。今がスタート地点だと捉え、精進してまいります\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e増田さんが参加されてから何かがスムーズになった実感があります（情報や知識だけでなく）\n\n\u003cul\u003e\n\u003cli\u003e\u003ci class=\"blogicon-comment\" aria-hidden=\"true\"\u003e\u003c/i\u003e うれしいですね。マネジメントは空気のような存在が良いと考えています\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003eマネジメントってどうやるか？のテクニックの面もあるけど、誰がやるか？の面も大きい気がしてます\n\n\u003cul\u003e\n\u003cli\u003e\u003ci class=\"blogicon-comment\" aria-hidden=\"true\"\u003e\u003c/i\u003e そうですね。例えば入ったばかりの職場だと、信頼関係を築くことから始まると思います。今回は同じ会社ということと、過去に一緒に働いたメンバーがいたことに助けられました\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003eEC Booster のこれからに期待しています！\n\n\u003cul\u003e\n\u003cli\u003e\u003ci class=\"blogicon-comment\" aria-hidden=\"true\"\u003e\u003c/i\u003e 💪\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e「場に飛び込む」「正しく伝わったと思わない」肝に銘じます！\n\n\u003cul\u003e\n\u003cli\u003e\u003ci class=\"blogicon-comment\" aria-hidden=\"true\"\u003e\u003c/i\u003e よろしくお願いします！\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e「エンジニアが発見した課題の解決フロー」読みたいです\n\n\u003cul\u003e\n\u003cli\u003e\u003ci class=\"blogicon-comment\" aria-hidden=\"true\"\u003e\u003c/i\u003e Slack で書いたとおり、割と普通のフローです。発表で話したエンジニア以外の方からの依頼と整合性を合わせてこうしました。まだ始めて間もなく 1 イテレーションも回してない状態ですがね...\n\n\u003col\u003e\n\u003cli\u003e Issue を作ると EC Booster waffle.io の Planning カラムに入る\u003c/li\u003e\n\u003cli\u003e 次の開発ミーティングで Planning カラムを空にする\u003c/li\u003e\n\u003cli\u003e スプリントでは Sprint Backlog に集中する\u003c/li\u003e\n\u003c/ol\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003efeedforce だとマネジメントオンリーじゃなくて、開発+マネジメントが最強という話を昨日クリストフとした\n\n\u003cul\u003e\n\u003cli\u003e\u003ci class=\"blogicon-comment\" aria-hidden=\"true\"\u003e\u003c/i\u003e 最強かは分かりませんが、コードも分かったほうが捗ると思います\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e仕事でもプライベートでも、コミュニティ内でオープンな発信をする人が多いと、円滑に物事が進みやすいなと考えられました。その逆もまた然りだったので...。かつ、人に伝えるときは具体的にするというのも大切かと思いました\n\n\u003cul\u003e\n\u003cli\u003e\u003ci class=\"blogicon-comment\" aria-hidden=\"true\"\u003e\u003c/i\u003e 他人は自分でないので、分かりやすく具体的なコミュニケーションが大事ですね\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e\u003cspan itemscope itemtype=\"http://schema.org/Photograph\"\u003e\u003cimg src=\"https://cdn-ak.f.st-hatena.com/images/fotolife/m/masutaka26/20180519/20180519155210.jpg\" alt=\"masutaka by yousuke\" title=\"f:id:masutaka26:20180519155210j:plain\" class=\"hatena-fotolife\" itemprop=\"image\"\u003e\u003c/span\u003e\n\n\u003cul\u003e\n\u003cli\u003e\u003ci class=\"blogicon-comment\" aria-hidden=\"true\"\u003e\u003c/i\u003e え、誰？（困惑）\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\n\n\u003ch2\u003e最後に\u003c/h2\u003e\n\n\u003cp\u003e\u003cdiv class=\"hatena-asin-detail\"\u003e\u003ca href=\"http://www.amazon.co.jp/exec/obidos/ASIN/4774196053/hatena-blog-22/\"\u003e\u003cimg src=\"https://images-fe.ssl-images-amazon.com/images/I/51zMvVL4MeL._SL160_.jpg\" class=\"hatena-asin-detail-image\" alt=\"エンジニアリング組織論への招待 ~不確実性に向き合う思考と組織のリファクタリング\" title=\"エンジニアリング組織論への招待 ~不確実性に向き合う思考と組織のリファクタリング\"\u003e\u003c/a\u003e\u003cdiv class=\"hatena-asin-detail-info\"\u003e\u003cp class=\"hatena-asin-detail-title\"\u003e\u003ca href=\"http://www.amazon.co.jp/exec/obidos/ASIN/4774196053/hatena-blog-22/\"\u003eエンジニアリング組織論への招待 ~不確実性に向き合う思考と組織のリファクタリング\u003c/a\u003e\u003c/p\u003e\u003cul\u003e\u003cli\u003e\u003cspan class=\"hatena-asin-detail-label\"\u003e作者:\u003c/span\u003e 広木大地\u003c/li\u003e\u003cli\u003e\u003cspan class=\"hatena-asin-detail-label\"\u003e出版社/メーカー:\u003c/span\u003e 技術評論社\u003c/li\u003e\u003cli\u003e\u003cspan class=\"hatena-asin-detail-label\"\u003e発売日:\u003c/span\u003e 2018/02/22\u003c/li\u003e\u003cli\u003e\u003cspan class=\"hatena-asin-detail-label\"\u003eメディア:\u003c/span\u003e 単行本（ソフトカバー）\u003c/li\u003e\u003cli\u003e\u003ca href=\"http://d.hatena.ne.jp/asin/4774196053/hatena-blog-22\" target=\"_blank\"\u003eこの商品を含むブログ (2件) を見る\u003c/a\u003e\u003c/li\u003e\u003c/ul\u003e\u003c/div\u003e\u003cdiv class=\"hatena-asin-detail-foot\"\u003e\u003c/div\u003e\u003c/div\u003e\u003c/p\u003e\n\n\u003cp\u003e良かったぞ。「エンジニア組織論」ではないことに注目。プロダクトオーナーやエンジニア以外の職種の方にも是非読んでもらいたいです。\u003c/p\u003e\n","contentSnippet":"こんにちは。増田（id:masutaka26）です。発表が無事終わり、何かゲームでも買おうかなと思ってます。さて、フィードフォースでは毎週金曜日 16:00 から、社内技術勉強会を開催しています。当番制の持ち回りで技術に関連したことを発表します。先週金曜日は私の当番で『開発基盤チームとして課題を探したらマネジメントをしていた』という発表をしました。技術チーム以外の方もたくさん聞きに来てくれて、ありがたかったです。🙏発表の内容前回含めて、これまでの発表は全てコードが登場していました。今回のようなコードが登場しないマネジメントの話は、内容が拡散しがちで難しかったです。結局まとまりませんでした...。今回は敢えて後から読めるプレゼン資料にしました。なのでプレゼン資料としては冗長な書き方になっています。まとめるとこんな内容です。コミュニケーションの不確実性を解消することが、マネジメント（やチームビルディング）に必要なはずそのため自ら場に飛び込んで、情報の非対称性を解消していったこれからもソフトウェアを書くこと以外に課題解決の手段があればやっていくそして徐々にマネジメントにかける時間を減らし、コードを書く時間を増やしていく今思えば、話し忘れたことがポロポロと出てきます。そもそもチームメンバーは自走できる方々で、ホワイトボード整理の時も方針だけ話したら勝手に整理されていった私は方向性を決めただけチームに入りたてのときは少々オーバーリアクションを心がけ、徐々に普通に戻していく。何考えている人か分かってもらうことで、その後のコミュニケーションをスムーズにする完璧な発表などありませんね。発表の感想付箋紙に感想を書いてくれました。 は私からのコメントです。ジョハリの窓の紹介ありがとうございます。勉強になります！ 私も『エンジニアリング組織論への招待』で初めて知りました。数年前にプロダクトオーナーの学習をした以来ですから...自分はまだマネジメントからは程遠い存在なのですが、話しかけやすいオーラを出すことや、くだらないと思うことも質問することなどは、今すぐにでも実行出来るし、目指すことだと思いました。ありがとうございました！ はい、個々が意識することが自走するチームや、個々のリーダーシップに繋がると思います共感できる良い話でした あざす！初公開の画像が見られて良かったです お粗末さまでした...早くインフラ朝会にもどって来てください 今回の件が落ち着いたらインフラ朝会にもどりますよ。待っていてくださいね！必要な情報とそうでもない情報の整理はものすごい HP/MP を消費しそう そうですね...マネジメントの成果はすぐには結果に現れないかも？どの位の頻度で振り返るべきなのか？ イテレーションごとの振り返りで、チームを観察すれば良いです。マネジメントの成果かどうかは重要ではないと思います◯◯を支える技術 次回はコードの話をしよう...知識科学やり直さなきゃ・・・ 私は今回で終了ですwチームの問題点を発見して、それを解決する手段を選ばないスタンスがすごい もう必死ですよ（笑）「内心ではなく行動に注目する」は、認知行動療法などでも使われていますね（最近のトレンド？） へぇ〜なかなかボリュームある資料でしたが、作るのにどれくらいかかったのか気になります 先週土曜日の夜に草稿を作り「これでいけそう」という感触を得て、今週は平日の夜２日くらいで整理をしました。話す内容については一ヶ月くらい前から頭の中で考えたり、『エンジニアリング組織論への招待』を全部読んだりしてました最近疲弊してそうで心配でしたが、今日の発表で色々アウトプットしてもらって安心しました 気にかけて頂いてありがとうございます。これからも安心安全のマスタカをお届けして参りますうなずきすぎて首もげる ありがとうございます。参考になったことが各チームに還元されるとうれしいですマスタカさん自体はマネジメントよりコード書く方が好きなんでしょうか？ そうですね。引き篭もってコードを書きたいですますたかさんのおかげでチームがちゃんと回りはじめた気がします そう言って頂けるとうれしいです。今がスタート地点だと捉え、精進してまいります増田さんが参加されてから何かがスムーズになった実感があります（情報や知識だけでなく） うれしいですね。マネジメントは空気のような存在が良いと考えていますマネジメントってどうやるか？のテクニックの面もあるけど、誰がやるか？の面も大きい気がしてます そうですね。例えば入ったばかりの職場だと、信頼関係を築くことから始まると思います。今回は同じ会社ということと、過去に一緒に働いたメンバーがいたことに助けられましたEC Booster のこれからに期待しています！ 💪「場に飛び込む」「正しく伝わったと思わない」肝に銘じます！ よろしくお願いします！「エンジニアが発見した課題の解決フロー」読みたいです Slack で書いたとおり、割と普通のフローです。発表で話したエンジニア以外の方からの依頼と整合性を合わせてこうしました。まだ始めて間もなく 1 イテレーションも回してない状態ですがね... Issue を作ると EC Booster waffle.io の Planning カラムに入る 次の開発ミーティングで Planning カラムを空にする スプリントでは Sprint Backlog に集中するfeedforce だとマネジメントオンリーじゃなくて、開発+マネジメントが最強という話を昨日クリストフとした 最強かは分かりませんが、コードも分かったほうが捗ると思います仕事でもプライベートでも、コミュニティ内でオープンな発信をする人が多いと、円滑に物事が進みやすいなと考えられました。その逆もまた然りだったので...。かつ、人に伝えるときは具体的にするというのも大切かと思いました 他人は自分でないので、分かりやすく具体的なコミュニケーションが大事ですね え、誰？（困惑）最後にエンジニアリング組織論への招待 ~不確実性に向き合う思考と組織のリファクタリング作者: 広木大地出版社/メーカー: 技術評論社発売日: 2018/02/22メディア: 単行本（ソフトカバー）この商品を含むブログ (2件) を見る良かったぞ。「エンジニア組織論」ではないことに注目。プロダクトオーナーやエンジニア以外の職種の方にも是非読んでもらいたいです。","link":"https://developer.feedforce.jp/entry/2018/05/21/150000","isoDate":"2018-05-21T06:00:00.000Z","dateMiliSeconds":1526882400000,"imageUrl":"https://images-fe.ssl-images-amazon.com/images/I/51zMvVL4MeL._SL160_.jpg","authorName":"masutaka"},{"title":"github-nippou という gem を golang で書き直したという発表をした","content":"\u003cp\u003eこんにちは。増田（\u003ca href=\"http://blog.hatena.ne.jp/masutaka26/\" class=\"hatena-id-icon\"\u003e\u003cimg src=\"https://cdn1.www.st-hatena.com/users/ma/masutaka26/profile.gif\" width=\"16\" height=\"16\" alt=\"\" class=\"hatena-id-icon\"\u003eid:masutaka26\u003c/a\u003e）です。社内勉強会の順番が来ると、２ヶ月前くらいからソワソワしてきます。\u003c/p\u003e\n\n\u003cp\u003eそんなわけで今回は『日報を golang で支える技術』というお題で発表しました。\u003c/p\u003e\n\n\u003ch2\u003e発表の内容\u003c/h2\u003e\n\n\u003cscript async class=\"speakerdeck-embed\" data-id=\"b96e99d03504492f85e58bff0c8d1171\" data-ratio=\"1.33333333333333\" src=\"//speakerdeck.com/assets/embed.js\"\u003e\u003c/script\u003e\n\n\n\u003cp\u003e以下、スライドからの抜粋です。\u003c/p\u003e\n\n\u003cul\u003e\n\u003cli\u003e背景など\n\n\u003cul\u003e\n\u003cli\u003e\u003ca href=\"https://masutaka.net/chalow/2016-04-09-1.html\"\u003e以前の社内勉強会で github-nippou という gem を紹介した\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003eひとつの ruby スクリプトからそこそこ作り込み、毎日便利に使っている\u003c/li\u003e\n\u003cli\u003e先日も同僚の \u003ca href=\"https://github.com/ryz310\"\u003e@ryz310\u003c/a\u003e から pull request をもらって、さらに便利になった\u003c/li\u003e\n\u003cli\u003eからの、golang への書き換えをした。その場でライブリリース\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003eモチベーション\n\n\u003cul\u003e\n\u003cli\u003e以前 \u003ca href=\"https://github.com/github/hub/releases/tag/v2.2.0\"\u003ehub コマンドが ruby から golang に移行した\u003c/a\u003eのを見て、一度やってみたかった\u003c/li\u003e\n\u003cli\u003erubygems の CLI を Dockerize してポータビリティを高めるのは何かが違うという気持ち\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"https://github.com/ryz310\"\u003e@ryz310\u003c/a\u003e からもらった元気\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e当たり前だけど、全て代わりの方法を調べて実装しなければいけなかった\n\n\u003cul\u003e\n\u003cli\u003eoctokit → go-github, thor → cobra など。Assets の取り扱いも変わる\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e良かったこと\n\n\u003cul\u003e\n\u003cli\u003e１バイナリになったのでインストールやアップデートが容易になった\u003c/li\u003e\n\u003cli\u003eパフォーマンスも予想外に上がった（当社比約２倍）\n\n\u003cul\u003e\n\u003cli\u003e以前調べた時は GitHub への API アクセスがボトルネックだったので、そこまで変わらないと思っていた\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e結果的にいろんなライブラリを使えて、良い素振りになった\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e困ったこと\n\n\u003cul\u003e\n\u003cli\u003eとにかく関数が長くなりがち\u003c/li\u003e\n\u003cli\u003egetXXX() 多くなりすぎ\u003c/li\u003e\n\u003cli\u003eファイル分割の意味\u003c/li\u003e\n\u003cli\u003e書けば書くほど golang っぽい書き方が分からなくなる\u003c/li\u003e\n\u003cli\u003eOOP ではないことへの戸惑い\u003c/li\u003e\n\u003cli\u003eruby が柔軟すぎて移植は難しかった。オススメはしない\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e疑問など\n\n\u003cul\u003e\n\u003cli\u003eclass設計で便利だった、private method の代わり\n\n\u003cul\u003e\n\u003cli\u003e設計し直すべきか\u003c/li\u003e\n\u003cli\u003eclassを 使わなかった頃の JS の知見を知りたい\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003eビジネスロジックのパッケージ名はどうすれば\n\n\u003cul\u003e\n\u003cli\u003e今回は lib にした\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e感想\n\n\u003cul\u003e\n\u003cli\u003e今後、rubygems で CLI ツールを作ることはないと思う。継続利用を考えると勧めづらい\u003c/li\u003e\n\u003cli\u003egolang は単一ファイルでの実装と実行に一番ハードルが低い気がしている\n\n\u003cul\u003e\n\u003cli\u003eもっと楽な言語あったら教えて\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e今後の予定\n\n\u003cul\u003e\n\u003cli\u003egolang っぽい書き方にする\u003c/li\u003e\n\u003cli\u003eもっとテストを書く\u003c/li\u003e\n\u003cli\u003egolang on Lambda や API サーバも学習する\u003c/li\u003e\n\u003cli\u003e『\u003ca href=\"https://www.amazon.co.jp/dp/B01FH3KRTI\"\u003eスターティングGo言語\u003c/a\u003e』を読み切る\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\n\n\u003ch2\u003e結果\u003c/h2\u003e\n\n\u003cp\u003e\u003cspan itemscope itemtype=\"http://schema.org/Photograph\"\u003e\u003cimg src=\"https://cdn-ak.f.st-hatena.com/images/fotolife/m/masutaka26/20171014/20171014163806.png\" alt=\"f:id:masutaka26:20171014163806p:plain\" title=\"f:id:masutaka26:20171014163806p:plain\" class=\"hatena-fotolife\" itemprop=\"image\"\u003e\u003c/span\u003e\u003c/p\u003e\n\n\u003cp\u003e↓\u003c/p\u003e\n\n\u003cp\u003e\u003cspan itemscope itemtype=\"http://schema.org/Photograph\"\u003e\u003cimg src=\"https://cdn-ak.f.st-hatena.com/images/fotolife/m/masutaka26/20171014/20171014163802.png\" alt=\"f:id:masutaka26:20171014163802p:plain\" title=\"f:id:masutaka26:20171014163802p:plain\" class=\"hatena-fotolife\" itemprop=\"image\"\u003e\u003c/span\u003e\u003c/p\u003e\n\n\u003cp\u003e\u003ca href=\"https://github.com/masutaka/github-nippou\"\u003ehttps://github.com/masutaka/github-nippou\u003c/a\u003e\u003c/p\u003e\n\n\u003ch2\u003e発表の感想\u003c/h2\u003e\n\n\u003cp\u003e付箋紙に感想を書いてくれました。\u003ci class=\"blogicon-comment\" aria-hidden=\"true\"\u003e\u003c/i\u003e は私からのコメントです。\u003c/p\u003e\n\n\u003cul\u003e\n\u003cli\u003eクラス設計周りの話は自分も悩んでいます\n\n\u003cul\u003e\n\u003cli\u003e\u003ci class=\"blogicon-comment\" aria-hidden=\"true\"\u003e\u003c/i\u003e ライブラリとか読んで学習します！\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003eGraphQL 対応の PR 出すぞ\n\n\u003cul\u003e\n\u003cli\u003e\u003ci class=\"blogicon-comment\" aria-hidden=\"true\"\u003e\u003c/i\u003e お待ちしております！\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003eGo の GraphQL のクライアント側はまだなさそう\n\n\u003cul\u003e\n\u003cli\u003e\u003ci class=\"blogicon-comment\" aria-hidden=\"true\"\u003e\u003c/i\u003e \u003ca href=\"https://github.com/graphql-go/graphql\"\u003egithub.com/graphql-go/graphql\u003c/a\u003e を見つけました。API リクエストを 1 回に出来るのかな？\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003eCLI は ruby \u0026lt; golang わかる。mruby も良いかも\n\n\u003cul\u003e\n\u003cli\u003e\u003ci class=\"blogicon-comment\" aria-hidden=\"true\"\u003e\u003c/i\u003e mruby はエコシステムが大変そうで...\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003eMakefile 参考にします\n\n\u003cul\u003e\n\u003cli\u003e\u003ci class=\"blogicon-comment\" aria-hidden=\"true\"\u003e\u003c/i\u003e あざす！\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003eMakefile 全く分からない... 勉強しないと！！\n\n\u003cul\u003e\n\u003cli\u003e\u003ci class=\"blogicon-comment\" aria-hidden=\"true\"\u003e\u003c/i\u003e 基本だったら１日くらいで分かりますよ。make はビルドを必要な時だけに抑えられるので良いです\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e流石ますたかさん とても面白く熱量ある発表でした\n\n\u003cul\u003e\n\u003cli\u003e\u003ci class=\"blogicon-comment\" aria-hidden=\"true\"\u003e\u003c/i\u003e ありがとうございます。熱量は大事にしてます\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e神回ですね\n\n\u003cul\u003e\n\u003cli\u003e\u003ci class=\"blogicon-comment\" aria-hidden=\"true\"\u003e\u003c/i\u003e もっと技術レベル上げていきます！\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e刺激を受けるいい話だった\n\n\u003cul\u003e\n\u003cli\u003e\u003ci class=\"blogicon-comment\" aria-hidden=\"true\"\u003e\u003c/i\u003e 刺激を与えるのがエンジニアとして使命のひとつだと思っています\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003eスピード up は nice 発見\n\n\u003cul\u003e\n\u003cli\u003e\u003ci class=\"blogicon-comment\" aria-hidden=\"true\"\u003e\u003c/i\u003e ですね\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e\u003cp\u003eやっぱりはやくなるものなんだなー\u003c/p\u003e\n\n\u003cp\u003e  \u003cspan itemscope itemtype=\"http://schema.org/Photograph\"\u003e\u003cimg src=\"https://cdn-ak.f.st-hatena.com/images/fotolife/m/masutaka26/20171014/20171014160652.jpg\" alt=\"f:id:masutaka26:20171014160652j:plain\" title=\"f:id:masutaka26:20171014160652j:plain\" class=\"hatena-fotolife\" itemprop=\"image\"\u003e\u003c/span\u003e\u003c/p\u003e\n\n\u003cul\u003e\n\u003cli\u003e\u003ci class=\"blogicon-comment\" aria-hidden=\"true\"\u003e\u003c/i\u003e 速いだけでテンションが上がります\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003egolang 熱の高まり・・・！！\n\n\u003cul\u003e\n\u003cli\u003e\u003ci class=\"blogicon-comment\" aria-hidden=\"true\"\u003e\u003c/i\u003e やりましょう！\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003ego モチベーションの高さの理由が分かりました！！\n\n\u003cul\u003e\n\u003cli\u003e\u003ci class=\"blogicon-comment\" aria-hidden=\"true\"\u003e\u003c/i\u003e もう必死ですよ\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003eずっと Go 書いてたのはこれだったのかー（棒）\n\n\u003cul\u003e\n\u003cli\u003e\u003ci class=\"blogicon-comment\" aria-hidden=\"true\"\u003e\u003c/i\u003e そうなんですよー（棒）\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003eGo 書きたい\n\n\u003cul\u003e\n\u003cli\u003e\u003ci class=\"blogicon-comment\" aria-hidden=\"true\"\u003e\u003c/i\u003e 今書きましょう！\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e\u003cp\u003eゴー書いてく！！\u003c/p\u003e\n\n\u003cp\u003e  \u003cspan itemscope itemtype=\"http://schema.org/Photograph\"\u003e\u003cimg src=\"https://cdn-ak.f.st-hatena.com/images/fotolife/m/masutaka26/20171014/20171014160710.jpg\" alt=\"f:id:masutaka26:20171014160710j:plain\" title=\"f:id:masutaka26:20171014160710j:plain\" class=\"hatena-fotolife\" itemprop=\"image\"\u003e\u003c/span\u003e\u003c/p\u003e\n\n\u003cul\u003e\n\u003cli\u003e\u003ci class=\"blogicon-comment\" aria-hidden=\"true\"\u003e\u003c/i\u003e ｱ､ﾊｲ\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003eざんねん！！わたし（@ryz310）の PR はここでおわってしまった！！\n\n\u003cul\u003e\n\u003cli\u003e\u003ci class=\"blogicon-comment\" aria-hidden=\"true\"\u003e\u003c/i\u003e またお待ちしております！（笑）\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003eバイナリ配布うれしい！\n\n\u003cul\u003e\n\u003cli\u003e\u003ci class=\"blogicon-comment\" aria-hidden=\"true\"\u003e\u003c/i\u003e ユーザの皆様のことを第一に考えております\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003eCLI は golang \u003cdel\u003eWeb やる気にはなら…\u003c/del\u003e\n\n\u003cul\u003e\n\u003cli\u003e\u003ci class=\"blogicon-comment\" aria-hidden=\"true\"\u003e\u003c/i\u003e 配布を考えるとそうですねー。今は GitHub でリリースしておけば、Homebrew や zplug など配布手段はいろいろありますし\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003eディストリビューション大変だなー\n\n\u003cul\u003e\n\u003cli\u003e\u003ci class=\"blogicon-comment\" aria-hidden=\"true\"\u003e\u003c/i\u003e gox で簡単に並列ビルドできるので、それほど大変ではなかったですね\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e知見 ライブデプロイ is つらい\n\n\u003cul\u003e\n\u003cli\u003e\u003ci class=\"blogicon-comment\" aria-hidden=\"true\"\u003e\u003c/i\u003e もうハラハラドキドキですよ\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003eライブデプロイメント\n\n\u003cul\u003e\n\u003cli\u003e\u003ci class=\"blogicon-comment\" aria-hidden=\"true\"\u003e\u003c/i\u003e やはり初回の CI は絶対失敗しますね...\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e（社内 Slack の）#golang を今後ともよろしくお願いします\n\n\u003cul\u003e\n\u003cli\u003e\u003ci class=\"blogicon-comment\" aria-hidden=\"true\"\u003e\u003c/i\u003e こちらこそ！\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\n\n\u003ch2\u003e最後に\u003c/h2\u003e\n\n\u003cp\u003eとにかく設計が目下の悩みです。良い情報があれば教えてください！\u003c/p\u003e\n","contentSnippet":"こんにちは。増田（id:masutaka26）です。社内勉強会の順番が来ると、２ヶ月前くらいからソワソワしてきます。そんなわけで今回は『日報を golang で支える技術』というお題で発表しました。発表の内容以下、スライドからの抜粋です。背景など以前の社内勉強会で github-nippou という gem を紹介したひとつの ruby スクリプトからそこそこ作り込み、毎日便利に使っている先日も同僚の @ryz310 から pull request をもらって、さらに便利になったからの、golang への書き換えをした。その場でライブリリースモチベーション以前 hub コマンドが ruby から golang に移行したのを見て、一度やってみたかったrubygems の CLI を Dockerize してポータビリティを高めるのは何かが違うという気持ち@ryz310 からもらった元気当たり前だけど、全て代わりの方法を調べて実装しなければいけなかったoctokit → go-github, thor → cobra など。Assets の取り扱いも変わる良かったこと１バイナリになったのでインストールやアップデートが容易になったパフォーマンスも予想外に上がった（当社比約２倍）以前調べた時は GitHub への API アクセスがボトルネックだったので、そこまで変わらないと思っていた結果的にいろんなライブラリを使えて、良い素振りになった困ったこととにかく関数が長くなりがちgetXXX() 多くなりすぎファイル分割の意味書けば書くほど golang っぽい書き方が分からなくなるOOP ではないことへの戸惑いruby が柔軟すぎて移植は難しかった。オススメはしない疑問などclass設計で便利だった、private method の代わり設計し直すべきかclassを 使わなかった頃の JS の知見を知りたいビジネスロジックのパッケージ名はどうすれば今回は lib にした感想今後、rubygems で CLI ツールを作ることはないと思う。継続利用を考えると勧めづらいgolang は単一ファイルでの実装と実行に一番ハードルが低い気がしているもっと楽な言語あったら教えて今後の予定golang っぽい書き方にするもっとテストを書くgolang on Lambda や API サーバも学習する『スターティングGo言語』を読み切る結果↓https://github.com/masutaka/github-nippou発表の感想付箋紙に感想を書いてくれました。 は私からのコメントです。クラス設計周りの話は自分も悩んでいます ライブラリとか読んで学習します！GraphQL 対応の PR 出すぞ お待ちしております！Go の GraphQL のクライアント側はまだなさそう github.com/graphql-go/graphql を見つけました。API リクエストを 1 回に出来るのかな？CLI は ruby \u003c golang わかる。mruby も良いかも mruby はエコシステムが大変そうで...Makefile 参考にします あざす！Makefile 全く分からない... 勉強しないと！！ 基本だったら１日くらいで分かりますよ。make はビルドを必要な時だけに抑えられるので良いです流石ますたかさん とても面白く熱量ある発表でした ありがとうございます。熱量は大事にしてます神回ですね もっと技術レベル上げていきます！刺激を受けるいい話だった 刺激を与えるのがエンジニアとして使命のひとつだと思っていますスピード up は nice 発見 ですねやっぱりはやくなるものなんだなー   速いだけでテンションが上がりますgolang 熱の高まり・・・！！ やりましょう！go モチベーションの高さの理由が分かりました！！ もう必死ですよずっと Go 書いてたのはこれだったのかー（棒） そうなんですよー（棒）Go 書きたい 今書きましょう！ゴー書いてく！！   ｱ､ﾊｲざんねん！！わたし（@ryz310）の PR はここでおわってしまった！！ またお待ちしております！（笑）バイナリ配布うれしい！ ユーザの皆様のことを第一に考えておりますCLI は golang Web やる気にはなら… 配布を考えるとそうですねー。今は GitHub でリリースしておけば、Homebrew や zplug など配布手段はいろいろありますしディストリビューション大変だなー gox で簡単に並列ビルドできるので、それほど大変ではなかったですね知見 ライブデプロイ is つらい もうハラハラドキドキですよライブデプロイメント やはり初回の CI は絶対失敗しますね...（社内 Slack の）#golang を今後ともよろしくお願いします こちらこそ！最後にとにかく設計が目下の悩みです。良い情報があれば教えてください！","link":"https://developer.feedforce.jp/entry/2017/10/16/150000","isoDate":"2017-10-16T06:00:00.000Z","dateMiliSeconds":1508133600000,"imageUrl":"https://cdn-ak.f.st-hatena.com/images/fotolife/m/masutaka26/20171014/20171014163802.png","authorName":"masutaka"}]},"__N_SSG":true},"page":"/members/[name]","query":{"name":"masutaka"},"buildId":"R0jaeYunf-473IVn0QjnN","nextExport":false,"isFallback":false,"gsp":true,"head":[["meta",{"name":"viewport","content":"width=device-width"}],["meta",{"charSet":"utf-8"}],["link",{"rel":"icon shortcut","type":"image/png","href":"https://engineers.feedforce.jp/logo.png"}],["link",{"rel":"stylesheet","href":"https://fonts.googleapis.com/css2?family=Inter:wght@400;700\u0026display=swap"}],["title",{"children":"masutaka | Feedforce Engineers' Blogs"}],["meta",{"property":"og:title","content":"masutaka"}],["meta",{"property":"og:url","content":"https://engineers.feedforce.jp/members/masutaka"}],["meta",{"name":"twitter:card","content":"summary_large_image"}],["meta",{"property":"og:site","content":"Feedforce Engineers' Blogs"}],["meta",{"property":"og:image","content":"https://engineers.feedforce.jp/og.png"}],["link",{"rel":"canonical","href":"https://engineers.feedforce.jp/members/masutaka"}],["link",{"rel":"alternate","type":"application/rss+xml","title":"Feedforce Engineers' Blogs","href":"https://engineers.feedforce.jp/rss.xml"}],["link",{"rel":"alternate","type":"application/atom+xml","title":"Feedforce Engineers' Blogs","href":"https://engineers.feedforce.jp/atom.xml"}]]}</script><script nomodule="" src="/_next/static/chunks/polyfills-fa276ba060a4a8ac7eef.js"></script><script src="/_next/static/chunks/main-8a83f0fd99327c4684a8.js" async=""></script><script src="/_next/static/chunks/webpack-e067438c4cf4ef2ef178.js" async=""></script><script src="/_next/static/chunks/framework.1daf1ec1ecf144ee9147.js" async=""></script><script src="/_next/static/chunks/commons.9e003f150a446b53bdd9.js" async=""></script><script src="/_next/static/chunks/pages/_app-99db904e083fc7f74e35.js" async=""></script><script src="/_next/static/chunks/588505f8033a39c9ef82bc46b1145ac9fd1db500.7f1789362bee7bf8434b.js" async=""></script><script src="/_next/static/chunks/pages/members/%5Bname%5D-42a7756adc6c0800b4dc.js" async=""></script><script src="/_next/static/R0jaeYunf-473IVn0QjnN/_buildManifest.js" async=""></script><script src="/_next/static/R0jaeYunf-473IVn0QjnN/_ssgManifest.js" async=""></script></body></html>