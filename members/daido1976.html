<!DOCTYPE html><html><head><meta name="viewport" content="width=device-width"/><meta charSet="utf-8"/><link rel="icon shortcut" type="image/png" href="https://engineers.feedforce.jp/logo.png"/><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Inter:wght@400;700&amp;display=swap"/><title>daido1976 | Feedforce Engineers&#x27; Blogs</title><meta property="og:title" content="daido1976"/><meta property="og:url" content="https://engineers.feedforce.jp/members/daido1976"/><meta name="twitter:card" content="summary_large_image"/><meta property="og:site" content="Feedforce Engineers&#x27; Blogs"/><meta property="og:image" content="https://engineers.feedforce.jp/og.png"/><link rel="canonical" href="https://engineers.feedforce.jp/members/daido1976"/><link rel="alternate" type="application/rss+xml" title="Feedforce Engineers&#x27; Blogs" href="https://engineers.feedforce.jp/rss.xml"/><link rel="alternate" type="application/atom+xml" title="Feedforce Engineers&#x27; Blogs" href="https://engineers.feedforce.jp/atom.xml"/><link rel="preload" href="/_next/static/css/d7faf1fdf25fe7d3262e.css" as="style"/><link rel="stylesheet" href="/_next/static/css/d7faf1fdf25fe7d3262e.css" data-n-g=""/><noscript data-n-css="true"></noscript><link rel="preload" href="/_next/static/chunks/main-8a83f0fd99327c4684a8.js" as="script"/><link rel="preload" href="/_next/static/chunks/webpack-e067438c4cf4ef2ef178.js" as="script"/><link rel="preload" href="/_next/static/chunks/framework.1daf1ec1ecf144ee9147.js" as="script"/><link rel="preload" href="/_next/static/chunks/commons.9e003f150a446b53bdd9.js" as="script"/><link rel="preload" href="/_next/static/chunks/pages/_app-99db904e083fc7f74e35.js" as="script"/><link rel="preload" href="/_next/static/chunks/588505f8033a39c9ef82bc46b1145ac9fd1db500.91c778663c9b9d266fd0.js" as="script"/><link rel="preload" href="/_next/static/chunks/pages/members/%5Bname%5D-42a7756adc6c0800b4dc.js" as="script"/></head><body><div id="__next"><header class="site-header"><div class="content-wrapper"><div class="site-header__inner"><a class="site-header__logo-link" href="/"><img src="https://engineers.feedforce.jp/logo.svg" alt="Feedforce Engineers&#x27; Blogs" class="site-header__logo-img"/></a><div class="site-header__links"><a href="https://feedforcegroup.jp" class="site-header__link">Company</a><a href="https://github.com/feedforce" class="site-header__link">GitHub</a><a href="https://engineers.recruit.feedforce.jp" class="site-header__link">Recruit</a></div></div></div></header><section class="member"><div class="content-wrapper"><header class="member-header"><div class="member-header__avatar"><img src="https://www.gravatar.com/avatar/d6717b12844bf915d4555cf7869532ec?size=256" alt="daido1976" width="100" height="100" class="member-header__avatar-img"/></div><h1 class="member-header__name">daido1976</h1><p class="member-header__bio">京都在住のフルリモートワーカーです</p><div class="member-header__links"><a href="https://twitter.com/daido1976" class="member-header__link"><img src="https://engineers.feedforce.jp/icons/twitter.svg" alt="Twitterのユーザー@daido1976" width="22" height="22"/></a><a href="https://github.com/daido1976" class="member-header__link"><img src="https://engineers.feedforce.jp/icons/github.svg" alt="GitHubのユーザー@daido1976" width="22" height="22"/></a><a href="https://daido1976.github.io" class="member-header__link"><img src="https://engineers.feedforce.jp/icons/link.svg" alt="ウェブサイトのリンク" width="22" height="22"/></a></div></header><div class="member-posts-container"><div class="post-list"><article class="post-link"><a class="post-link__author" href="/members/daido1976"><img src="https://www.gravatar.com/avatar/d6717b12844bf915d4555cf7869532ec?size=256" class="post-link__author-img" width="35" height="35"/><div class="post-link__author-name"><div class="post-link__author-name">daido1976</div><time dateTime="2021-11-05T00:50:50.000Z" class="post-link__date">10 months ago</time></div></a><a href="https://developer.feedforce.jp/entry/2021/11/05/095050" class="post-link__main-link"><h2 class="post-link__title">GitHub Packages を使ってプライベート gem を社内限定で公開した</h2><div class="post-link__site"><img src="https://www.google.com/s2/favicons?domain=developer.feedforce.jp" width="14" height="14" class="post-link__site-favicon"/>developer.feedforce.jp</div></a></article><article class="post-link"><a class="post-link__author" href="/members/daido1976"><img src="https://www.gravatar.com/avatar/d6717b12844bf915d4555cf7869532ec?size=256" class="post-link__author-img" width="35" height="35"/><div class="post-link__author-name"><div class="post-link__author-name">daido1976</div><time dateTime="2021-03-15T01:25:30.000Z" class="post-link__date">2 years ago</time></div></a><a href="https://developer.feedforce.jp/entry/2021/03/15/102530" class="post-link__main-link"><h2 class="post-link__title">Docker BuildKit の --secret フラグでイメージビルド時の秘匿情報を環境変数経由で渡せるようになっていた</h2><div class="post-link__site"><img src="https://www.google.com/s2/favicons?domain=developer.feedforce.jp" width="14" height="14" class="post-link__site-favicon"/>developer.feedforce.jp</div></a></article><article class="post-link"><a class="post-link__author" href="/members/daido1976"><img src="https://www.gravatar.com/avatar/d6717b12844bf915d4555cf7869532ec?size=256" class="post-link__author-img" width="35" height="35"/><div class="post-link__author-name"><div class="post-link__author-name">daido1976</div><time dateTime="2021-01-29T03:12:52.000Z" class="post-link__date">2 years ago</time></div></a><a href="https://developer.feedforce.jp/entry/2021/01/29/121252" class="post-link__main-link"><h2 class="post-link__title">Ruby 3.0 の「キーワード引数の分離」で委譲用のメソッドが壊れた場合の対応方法</h2><div class="post-link__site"><img src="https://www.google.com/s2/favicons?domain=developer.feedforce.jp" width="14" height="14" class="post-link__site-favicon"/>developer.feedforce.jp</div></a></article><article class="post-link"><a class="post-link__author" href="/members/daido1976"><img src="https://www.gravatar.com/avatar/d6717b12844bf915d4555cf7869532ec?size=256" class="post-link__author-img" width="35" height="35"/><div class="post-link__author-name"><div class="post-link__author-name">daido1976</div><time dateTime="2020-12-12T15:36:57.000Z" class="post-link__date">2 years ago</time></div></a><a href="https://developer.feedforce.jp/entry/2020/12/13/003657" class="post-link__main-link"><h2 class="post-link__title">私の好きなプログラミング動画 10 選</h2><div class="post-link__site"><img src="https://www.google.com/s2/favicons?domain=developer.feedforce.jp" width="14" height="14" class="post-link__site-favicon"/>developer.feedforce.jp</div></a></article><article class="post-link"><a class="post-link__author" href="/members/daido1976"><img src="https://www.gravatar.com/avatar/d6717b12844bf915d4555cf7869532ec?size=256" class="post-link__author-img" width="35" height="35"/><div class="post-link__author-name"><div class="post-link__author-name">daido1976</div><time dateTime="2020-10-21T02:15:37.000Z" class="post-link__date">2 years ago</time></div></a><a href="https://developer.feedforce.jp/entry/2020/10/21/111537" class="post-link__main-link"><h2 class="post-link__title">Next.js の Static HTML Export で生成したファイルを Lambda@Edge を使わずに CloudFront + S3 にデプロイする</h2><div class="post-link__site"><img src="https://www.google.com/s2/favicons?domain=developer.feedforce.jp" width="14" height="14" class="post-link__site-favicon"/>developer.feedforce.jp</div></a></article><article class="post-link"><a class="post-link__author" href="/members/daido1976"><img src="https://www.gravatar.com/avatar/d6717b12844bf915d4555cf7869532ec?size=256" class="post-link__author-img" width="35" height="35"/><div class="post-link__author-name"><div class="post-link__author-name">daido1976</div><time dateTime="2020-09-08T05:29:13.000Z" class="post-link__date">2 years ago</time></div></a><a href="https://developer.feedforce.jp/entry/2020/09/08/142913" class="post-link__main-link"><h2 class="post-link__title">ソーシャルPLUS を Rails 5.0 にアップグレードしました</h2><div class="post-link__site"><img src="https://www.google.com/s2/favicons?domain=developer.feedforce.jp" width="14" height="14" class="post-link__site-favicon"/>developer.feedforce.jp</div></a></article><article class="post-link"><a class="post-link__author" href="/members/daido1976"><img src="https://www.gravatar.com/avatar/d6717b12844bf915d4555cf7869532ec?size=256" class="post-link__author-img" width="35" height="35"/><div class="post-link__author-name"><div class="post-link__author-name">daido1976</div><time dateTime="2020-04-06T08:37:01.000Z" class="post-link__date">2 years ago</time></div></a><a href="https://developer.feedforce.jp/entry/2020/04/06/173701" class="post-link__main-link"><h2 class="post-link__title">AWS SDK for Ruby で S3 Select を使って S3 にある CSV ファイルからデータを抽出する</h2><div class="post-link__site"><img src="https://www.google.com/s2/favicons?domain=developer.feedforce.jp" width="14" height="14" class="post-link__site-favicon"/>developer.feedforce.jp</div></a></article><article class="post-link"><a class="post-link__author" href="/members/daido1976"><img src="https://www.gravatar.com/avatar/d6717b12844bf915d4555cf7869532ec?size=256" class="post-link__author-img" width="35" height="35"/><div class="post-link__author-name"><div class="post-link__author-name">daido1976</div><time dateTime="2020-02-05T08:29:27.000Z" class="post-link__date">3 years ago</time></div></a><a href="https://developer.feedforce.jp/entry/2020/02/05/172927" class="post-link__main-link"><h2 class="post-link__title">Pusher の Private channels と認証周りの処理を追いかけた</h2><div class="post-link__site"><img src="https://www.google.com/s2/favicons?domain=developer.feedforce.jp" width="14" height="14" class="post-link__site-favicon"/>developer.feedforce.jp</div></a></article><article class="post-link"><a class="post-link__author" href="/members/daido1976"><img src="https://www.gravatar.com/avatar/d6717b12844bf915d4555cf7869532ec?size=256" class="post-link__author-img" width="35" height="35"/><div class="post-link__author-name"><div class="post-link__author-name">daido1976</div><time dateTime="2019-09-04T05:00:00.000Z" class="post-link__date">3 years ago</time></div></a><a href="https://developer.feedforce.jp/entry/2019/09/04/140000" class="post-link__main-link"><h2 class="post-link__title">【2019年版】バックエンドエンジニアが React でモダンなフロントエンド開発を始めるまで</h2><div class="post-link__site"><img src="https://www.google.com/s2/favicons?domain=developer.feedforce.jp" width="14" height="14" class="post-link__site-favicon"/>developer.feedforce.jp</div></a></article><article class="post-link"><a class="post-link__author" href="/members/daido1976"><img src="https://www.gravatar.com/avatar/d6717b12844bf915d4555cf7869532ec?size=256" class="post-link__author-img" width="35" height="35"/><div class="post-link__author-name"><div class="post-link__author-name">daido1976</div><time dateTime="2018-12-22T10:16:20.000Z" class="post-link__date">4 years ago</time></div></a><a href="https://developer.feedforce.jp/entry/2018/12/22/191620" class="post-link__main-link"><h2 class="post-link__title">『オブジェクト指向設計実践ガイド』の読書会をやっています</h2><div class="post-link__site"><img src="https://www.google.com/s2/favicons?domain=developer.feedforce.jp" width="14" height="14" class="post-link__site-favicon"/>developer.feedforce.jp</div></a></article><article class="post-link"><a class="post-link__author" href="/members/daido1976"><img src="https://www.gravatar.com/avatar/d6717b12844bf915d4555cf7869532ec?size=256" class="post-link__author-img" width="35" height="35"/><div class="post-link__author-name"><div class="post-link__author-name">daido1976</div><time dateTime="2018-10-18T05:00:00.000Z" class="post-link__date">4 years ago</time></div></a><a href="https://developer.feedforce.jp/entry/2018/10/18/140000" class="post-link__main-link"><h2 class="post-link__title">弊社の新人エンジニア研修カリキュラムを惜しみなく公開してみる</h2><div class="post-link__site"><img src="https://www.google.com/s2/favicons?domain=developer.feedforce.jp" width="14" height="14" class="post-link__site-favicon"/>developer.feedforce.jp</div></a></article><article class="post-link"><a class="post-link__author" href="/members/daido1976"><img src="https://www.gravatar.com/avatar/d6717b12844bf915d4555cf7869532ec?size=256" class="post-link__author-img" width="35" height="35"/><div class="post-link__author-name"><div class="post-link__author-name">daido1976</div><time dateTime="2018-07-18T15:00:00.000Z" class="post-link__date">4 years ago</time></div></a><a href="https://developer.feedforce.jp/entry/2018/07/19/000000" class="post-link__main-link"><h2 class="post-link__title">新人エンジニア達がメタプログラミング Ruby の読書感想会をやった話</h2><div class="post-link__site"><img src="https://www.google.com/s2/favicons?domain=developer.feedforce.jp" width="14" height="14" class="post-link__site-favicon"/>developer.feedforce.jp</div></a></article></div></div></div></section><footer class="site-footer"><div class="content-wrapper"><p>© <!-- -->Feedforce Group Inc.</p></div></footer></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"member":{"name":"daido1976","bio":"京都在住のフルリモートワーカーです","avatarSrc":"https://www.gravatar.com/avatar/d6717b12844bf915d4555cf7869532ec?size=256","sources":["https://developer.feedforce.jp/rss/author/daido1976"],"twitterUsername":"daido1976","githubUsername":"daido1976","websiteUrl":"https://daido1976.github.io"},"postItems":[{"title":"GitHub Packages を使ってプライベート gem を社内限定で公開した","content":"\u003cp\u003eこんにちは、\u003ca href=\"http://blog.hatena.ne.jp/daido1976/\" class=\"hatena-id-icon\"\u003e\u003cimg src=\"https://cdn.profile-image.st-hatena.com/users/daido1976/profile.png\" width=\"16\" height=\"16\" alt=\"\" class=\"hatena-id-icon\"\u003eid:daido1976\u003c/a\u003e です。\u003c/p\u003e\n\n\u003cp\u003e先日 GitHub Packages を使ってプライベート gem を社内限定で公開したので、その方法をご紹介します。\u003c/p\u003e\n\n\u003cul class=\"table-of-contents\"\u003e\n    \u003cli\u003e\u003ca href=\"#GitHub-Packages-とは\"\u003eGitHub Packages とは\u003c/a\u003e\u003c/li\u003e\n    \u003cli\u003e\u003ca href=\"#既存のプライベート-gem-と-GitHub-Packages-との違い\"\u003e既存のプライベート gem と GitHub Packages との違い\u003c/a\u003e\u003c/li\u003e\n    \u003cli\u003e\u003ca href=\"#GitHub-Packages-を使ってプライベート-gem-を社内限定で公開する\"\u003eGitHub Packages を使ってプライベート gem を社内限定で公開する\u003c/a\u003e\u003cul\u003e\n            \u003cli\u003e\u003ca href=\"#gem-をリリースPublishする方法\"\u003egem をリリース（Publish）する方法\u003c/a\u003e\u003cul\u003e\n                    \u003cli\u003e\u003ca href=\"#ローカルからリリースする\"\u003eローカルからリリースする\u003c/a\u003e\u003c/li\u003e\n                    \u003cli\u003e\u003ca href=\"#CI-からリリースする\"\u003eCI からリリースする\u003c/a\u003e\u003c/li\u003e\n                \u003c/ul\u003e\n            \u003c/li\u003e\n            \u003cli\u003e\u003ca href=\"#各環境へのインストール方法\"\u003e各環境へのインストール方法\u003c/a\u003e\u003cul\u003e\n                    \u003cli\u003e\u003ca href=\"#ローカルや本番環境でのインストール\"\u003eローカルや本番環境でのインストール\u003c/a\u003e\u003c/li\u003e\n                    \u003cli\u003e\u003ca href=\"#Dependabot-でのインストール\"\u003eDependabot でのインストール\u003c/a\u003e\u003c/li\u003e\n                \u003c/ul\u003e\n            \u003c/li\u003e\n        \u003c/ul\u003e\n    \u003c/li\u003e\n    \u003cli\u003e\u003ca href=\"#関連記事\"\u003e関連記事\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\n\u003ch2 id=\"GitHub-Packages-とは\"\u003eGitHub Packages とは\u003c/h2\u003e\n\n\u003cp\u003e\u003ciframe src=\"https://hatenablog-parts.com/embed?url=https%3A%2F%2Fgithub.co.jp%2Ffeatures%2Fpackages\" title=\"Packages\" class=\"embed-card embed-webcard\" scrolling=\"no\" frameborder=\"0\" style=\"display: block; width: 100%; height: 155px; max-width: 500px; margin: 10px 0px;\"\u003e\u003c/iframe\u003e\u003ccite class=\"hatena-citation\"\u003e\u003ca href=\"https://github.co.jp/features/packages\"\u003egithub.co.jp\u003c/a\u003e\u003c/cite\u003e\u003c/p\u003e\n\n\u003cp\u003eGitHub Packages はライブラリ（パッケージ）のホスティングサービスです。\u003c/p\u003e\n\n\u003cp\u003eRuby の場合 \u003ccode\u003ehttps://rubygems.org\u003c/code\u003e の代わりに \u003ccode\u003ehttps://rubygems.pkg.github.com\u003c/code\u003e に公開するイメージで、認証には GitHub の personal access token などを使います。\u003c/p\u003e\n\n\u003ch2 id=\"既存のプライベート-gem-と-GitHub-Packages-との違い\"\u003e既存のプライベート gem と GitHub Packages との違い\u003c/h2\u003e\n\n\u003cp\u003e既存のプライベート gem は主に git のタグやブランチを指定する方法が用いられますが、以下のようにいくつかの問題があります。\u003c/p\u003e\n\n\u003cpre class=\"code lang-ruby\" data-lang=\"ruby\" data-unlink\u003e\u003cspan class=\"synComment\"\u003e# main ブランチの先端を使うのは再現性がない（ブランチ指定した場合も同じ）\u003c/span\u003e\ngem \u003cspan class=\"synSpecial\"\u003e'\u003c/span\u003e\u003cspan class=\"synConstant\"\u003emy_rubygem\u003c/span\u003e\u003cspan class=\"synSpecial\"\u003e'\u003c/span\u003e, \u003cspan class=\"synConstant\"\u003egithub\u003c/span\u003e: \u003cspan class=\"synSpecial\"\u003e'\u003c/span\u003e\u003cspan class=\"synConstant\"\u003emy_name/my_rubygem\u003c/span\u003e\u003cspan class=\"synSpecial\"\u003e'\u003c/span\u003e\n\u003cspan class=\"synComment\"\u003e# タグを指定しても書き換えられる可能性がある\u003c/span\u003e\ngem \u003cspan class=\"synSpecial\"\u003e'\u003c/span\u003e\u003cspan class=\"synConstant\"\u003emy_rubygem\u003c/span\u003e\u003cspan class=\"synSpecial\"\u003e'\u003c/span\u003e, \u003cspan class=\"synConstant\"\u003egithub\u003c/span\u003e: \u003cspan class=\"synSpecial\"\u003e'\u003c/span\u003e\u003cspan class=\"synConstant\"\u003emy_name/my_rubygem\u003c/span\u003e\u003cspan class=\"synSpecial\"\u003e'\u003c/span\u003e, \u003cspan class=\"synConstant\"\u003etag\u003c/span\u003e: \u003cspan class=\"synSpecial\"\u003e'\u003c/span\u003e\u003cspan class=\"synConstant\"\u003ev1.0.0\u003c/span\u003e\u003cspan class=\"synSpecial\"\u003e'\u003c/span\u003e\n\u003cspan class=\"synComment\"\u003e# コミットの参照を指定するのはシンプルに見づらい\u003c/span\u003e\ngem \u003cspan class=\"synSpecial\"\u003e'\u003c/span\u003e\u003cspan class=\"synConstant\"\u003emy_rubygem\u003c/span\u003e\u003cspan class=\"synSpecial\"\u003e'\u003c/span\u003e, \u003cspan class=\"synConstant\"\u003egithub\u003c/span\u003e: \u003cspan class=\"synSpecial\"\u003e'\u003c/span\u003e\u003cspan class=\"synConstant\"\u003emy_name/my_rubygem\u003c/span\u003e\u003cspan class=\"synSpecial\"\u003e'\u003c/span\u003e, \u003cspan class=\"synConstant\"\u003eref\u003c/span\u003e: \u003cspan class=\"synSpecial\"\u003e'\u003c/span\u003e\u003cspan class=\"synConstant\"\u003e4aded\u003c/span\u003e\u003cspan class=\"synSpecial\"\u003e'\u003c/span\u003e\n\u003c/pre\u003e\n\n\n\u003cp\u003eGitHub Packages は \u003ccode\u003erubygems.org\u003c/code\u003e と同じように、バージョン指定が明確かつ一度リリースしたバージョンは変更できないので安全です。\u003c/p\u003e\n\n\u003ch2 id=\"GitHub-Packages-を使ってプライベート-gem-を社内限定で公開する\"\u003eGitHub Packages を使ってプライベート gem を社内限定で公開する\u003c/h2\u003e\n\n\u003cp\u003eここからは実際に GitHub Packages を使ってプライベート gem を社内限定で公開する方法（主にリリースとインストールの仕方）を説明していきます。\u003c/p\u003e\n\n\u003cp\u003e今回は Organization は \u003ccode\u003efeedforce\u003c/code\u003e、gem の名前は \u003ccode\u003esocialplus-rails\u003c/code\u003e という想定です。\u003c/p\u003e\n\n\u003cp\u003e日本語版のドキュメントは文章やサンプルコードが古いケースがあるので、以下の英語版ドキュメントを参照した方が良いです。\u003c/p\u003e\n\n\u003cp\u003e\u003ca href=\"https://docs.github.com/en/packages/working-with-a-github-packages-registry/working-with-the-rubygems-registry\"\u003eWorking with the RubyGems registry - GitHub Docs\u003c/a\u003e\u003c/p\u003e\n\n\u003cp\u003e認証に使う personal access token の権限については以下のドキュメントが詳しいです。\u003c/p\u003e\n\n\u003cp\u003e\u003ca href=\"https://docs.github.com/en/packages/learn-github-packages/about-permissions-for-github-packages\"\u003eAbout permissions for GitHub Packages - GitHub Docs\u003c/a\u003e\u003c/p\u003e\n\n\u003ch3 id=\"gem-をリリースPublishする方法\"\u003egem をリリース（Publish）する方法\u003c/h3\u003e\n\n\u003cp\u003eまずは作成した gem をリリースする方法について説明します。\u003c/p\u003e\n\n\u003ch4 id=\"ローカルからリリースする\"\u003eローカルからリリースする\u003c/h4\u003e\n\n\u003cp\u003eまとめると以下のような手順になります。\u003c/p\u003e\n\n\u003col\u003e\n\u003cli\u003e\u003ccode\u003e〜/.gem/credentials\u003c/code\u003e に GitHub の personal access token を追加\n\n\u003cul\u003e\n\u003cli\u003e権限は \u003ccode\u003erepo\u003c/code\u003e と \u003ccode\u003ewrite:packages\u003c/code\u003e が必要\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003e$ gem build socialplus-rails.gemspec\u003c/code\u003e で gem をビルド\n\n\u003cul\u003e\n\u003cli\u003e\u003ccode\u003eSocialplusRails::VERSION\u003c/code\u003e は \u003ccode\u003e0.1.0\u003c/code\u003e を想定\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003e$ gem push --key github --host https://rubygems.pkg.github.com/feedforce socialplus-rails-0.1.0.gem\u003c/code\u003e で push する\n\n\u003cul\u003e\n\u003cli\u003eこの時に personal access token の権限が足りないとエラーになる\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003c/ol\u003e\n\n\n\u003cp\u003ePush が成功すると \u003ca href=\"https://github.com/orgs/feedforce/packages\"\u003ehttps://github.com/orgs/feedforce/packages\u003c/a\u003e のような Packages のページに反映されます 👏\u003c/p\u003e\n\n\u003cp\u003e\u003cspan itemscope itemtype=\"http://schema.org/Photograph\"\u003e\u003cimg src=\"https://cdn-ak.f.st-hatena.com/images/fotolife/d/daido1976/20211104/20211104160709.png\" alt=\"f:id:daido1976:20211104160709p:plain\" width=\"1200\" height=\"492\" loading=\"lazy\" title=\"\" class=\"hatena-fotolife\" itemprop=\"image\"\u003e\u003c/span\u003e\u003c/p\u003e\n\n\u003ch4 id=\"CI-からリリースする\"\u003eCI からリリースする\u003c/h4\u003e\n\n\u003cp\u003egem のソースコードを更新した際に毎回上記のようにローカルからリリースしても良いのですが、できれば CI からリリースできるように仕組み化したいものです。\u003c/p\u003e\n\n\u003cp\u003eCircleCI の場合、以下のような \u003ccode\u003erelease\u003c/code\u003e コマンドを定義して、リリース用のブランチがマージされた時に実行されるようにすれば OK です。\u003c/p\u003e\n\n\u003cpre class=\"code lang-yaml\" data-lang=\"yaml\" data-unlink\u003e\u003cspan class=\"synComment\"\u003e# .circleci/config.yml\u003c/span\u003e\n\n\u003cspan class=\"synIdentifier\"\u003eversion\u003c/span\u003e\u003cspan class=\"synSpecial\"\u003e:\u003c/span\u003e \u003cspan class=\"synConstant\"\u003e2.1\u003c/span\u003e\n\u003cspan class=\"synComment\"\u003e# ...\u003c/span\u003e\n\u003cspan class=\"synIdentifier\"\u003ecommands\u003c/span\u003e\u003cspan class=\"synSpecial\"\u003e:\u003c/span\u003e\n  \u003cspan class=\"synIdentifier\"\u003erelease\u003c/span\u003e\u003cspan class=\"synSpecial\"\u003e:\u003c/span\u003e\n    \u003cspan class=\"synIdentifier\"\u003edescription\u003c/span\u003e\u003cspan class=\"synSpecial\"\u003e:\u003c/span\u003e Release to GitHub Packages\n    \u003cspan class=\"synIdentifier\"\u003esteps\u003c/span\u003e\u003cspan class=\"synSpecial\"\u003e:\u003c/span\u003e\n      \u003cspan class=\"synStatement\"\u003e- \u003c/span\u003e\u003cspan class=\"synIdentifier\"\u003erun\u003c/span\u003e\u003cspan class=\"synSpecial\"\u003e:\u003c/span\u003e\n          \u003cspan class=\"synIdentifier\"\u003ename\u003c/span\u003e\u003cspan class=\"synSpecial\"\u003e:\u003c/span\u003e Create GitHub Packages Credentials\n          \u003cspan class=\"synIdentifier\"\u003ecommand\u003c/span\u003e\u003cspan class=\"synSpecial\"\u003e:\u003c/span\u003e |\n            mkdir ~/.gem || \u003cspan class=\"synConstant\"\u003etrue\u003c/span\u003e\n            echo -e \u003cspan class=\"synConstant\"\u003e\u0026quot;---\u003c/span\u003e\u003cspan class=\"synSpecial\"\u003e\\n\u003c/span\u003e\u003cspan class=\"synConstant\"\u003e:github: Bearer ${GITHUB_ACCESS_TOKEN}\u0026quot;\u003c/span\u003e \u0026gt; ~/.gem/credentials\n            chmod \u003cspan class=\"synConstant\"\u003e0600\u003c/span\u003e ~/.gem/credentials\n      \u003cspan class=\"synStatement\"\u003e- \u003c/span\u003e\u003cspan class=\"synIdentifier\"\u003erun\u003c/span\u003e\u003cspan class=\"synSpecial\"\u003e:\u003c/span\u003e\n          \u003cspan class=\"synIdentifier\"\u003ename\u003c/span\u003e\u003cspan class=\"synSpecial\"\u003e:\u003c/span\u003e Release Gem\n          \u003cspan class=\"synIdentifier\"\u003ecommand\u003c/span\u003e\u003cspan class=\"synSpecial\"\u003e:\u003c/span\u003e |\n            gem build socialplus-rails.gemspec\n            release_version=$(find . -name \u003cspan class=\"synConstant\"\u003e\u0026quot;socialplus-rails-*.gem\u0026quot;\u003c/span\u003e | sed -E \u003cspan class=\"synConstant\"\u003e's/\\.\\/socialplus-rails-(.*).gem/\\1/'\u003c/span\u003e)\n            gem push --key github --host https://rubygems.pkg.github.com/feedforce \u003cspan class=\"synConstant\"\u003e\u0026quot;socialplus-rails-${release_version}.gem\u0026quot;\u003c/span\u003e\n\u003c/pre\u003e\n\n\n\u003ch3 id=\"各環境へのインストール方法\"\u003e各環境へのインストール方法\u003c/h3\u003e\n\n\u003cp\u003eここからはリリースした gem を各環境へインストールする方法を説明します。\u003c/p\u003e\n\n\u003cp\u003eGemfile への記述は以下のようにします。\u003ca href=\"#f-ff64d70e\" name=\"fn-ff64d70e\" title=\"See. https://docs.github.com/en/packages/working-with-a-github-packages-registry/working-with-the-rubygems-registry#installing-a-package\"\u003e*1\u003c/a\u003e\u003c/p\u003e\n\n\u003cpre class=\"code lang-ruby\" data-lang=\"ruby\" data-unlink\u003e\u003cspan class=\"synComment\"\u003e# Gemfile\u003c/span\u003e\nsource \u003cspan class=\"synSpecial\"\u003e'\u003c/span\u003e\u003cspan class=\"synConstant\"\u003ehttps://rubygems.pkg.github.com/feedforce\u003c/span\u003e\u003cspan class=\"synSpecial\"\u003e'\u003c/span\u003e \u003cspan class=\"synStatement\"\u003edo\u003c/span\u003e\n  gem \u003cspan class=\"synSpecial\"\u003e'\u003c/span\u003e\u003cspan class=\"synConstant\"\u003esocialplus-rails\u003c/span\u003e\u003cspan class=\"synSpecial\"\u003e'\u003c/span\u003e, \u003cspan class=\"synSpecial\"\u003e'\u003c/span\u003e\u003cspan class=\"synConstant\"\u003e0.1.0\u003c/span\u003e\u003cspan class=\"synSpecial\"\u003e'\u003c/span\u003e\n\u003cspan class=\"synStatement\"\u003eend\u003c/span\u003e\n\u003c/pre\u003e\n\n\n\u003ch4 id=\"ローカルや本番環境でのインストール\"\u003eローカルや本番環境でのインストール\u003c/h4\u003e\n\n\u003cp\u003e以下のように \u003ccode\u003ebundle config\u003c/code\u003e コマンドで認証情報をセットしてから \u003ccode\u003ebundle install\u003c/code\u003e を行います。\u003ca href=\"#f-54facd0e\" name=\"fn-54facd0e\" title=\"環境変数を利用して認証情報をセットすることもできるようです\"\u003e*2\u003c/a\u003e\u003c/p\u003e\n\n\u003cpre class=\"code lang-sh\" data-lang=\"sh\" data-unlink\u003e\u003cspan class=\"synComment\"\u003e# `USERNAME:TOKEN` は `{GitHubのユーザ名}:{Personal access token}` という形です（例: `daido1976:7axxx`）\u003c/span\u003e\n$ bundle config https://rubygems.pkg.github.com/feedforce USERNAME:TOKEN\n$ bundle install\n\u003c/pre\u003e\n\n\n\u003cp\u003e※ インストール時の認証に利用する personal access token には \u003ccode\u003eread:packages\u003c/code\u003e の権限のみあれば OK です\u003c/p\u003e\n\n\u003ch4 id=\"Dependabot-でのインストール\"\u003eDependabot でのインストール\u003c/h4\u003e\n\n\u003cp\u003eGitHub Packages のプライベート gem をDependabot の更新対象にしたい場合は追加の設定が必要です。\u003c/p\u003e\n\n\u003cp\u003e以下のように設定ファイルで GitHub Packages の認証情報を渡す準備をします。\u003ca href=\"#f-52f8882d\" name=\"fn-52f8882d\" title=\"See. https://docs.github.com/en/code-security/supply-chain-security/keeping-your-dependencies-updated-automatically/configuration-options-for-dependency-updates#rubygems-server\"\u003e*3\u003c/a\u003e\u003c/p\u003e\n\n\u003cpre class=\"code lang-yaml\" data-lang=\"yaml\" data-unlink\u003e\u003cspan class=\"synComment\"\u003e# .github/dependabot.yml\u003c/span\u003e\n\n\u003cspan class=\"synIdentifier\"\u003eversion\u003c/span\u003e\u003cspan class=\"synSpecial\"\u003e:\u003c/span\u003e \u003cspan class=\"synConstant\"\u003e2\u003c/span\u003e\n\u003cspan class=\"synIdentifier\"\u003eregistries\u003c/span\u003e\u003cspan class=\"synSpecial\"\u003e:\u003c/span\u003e\n  \u003cspan class=\"synIdentifier\"\u003erubygems-pkg-github\u003c/span\u003e\u003cspan class=\"synSpecial\"\u003e:\u003c/span\u003e\n    \u003cspan class=\"synIdentifier\"\u003etype\u003c/span\u003e\u003cspan class=\"synSpecial\"\u003e:\u003c/span\u003e rubygems-server\n    \u003cspan class=\"synIdentifier\"\u003eurl\u003c/span\u003e\u003cspan class=\"synSpecial\"\u003e:\u003c/span\u003e https://rubygems.pkg.github.com\n   \u003cspan class=\"synComment\"\u003e # BUNDLE_GITHUB_TOKEN の値は `USERNAME:TOKEN` という形式です\u003c/span\u003e\n    \u003cspan class=\"synIdentifier\"\u003etoken\u003c/span\u003e\u003cspan class=\"synSpecial\"\u003e:\u003c/span\u003e \u003cspan class=\"synConstant\"\u003e\u0026quot;${{secrets.BUNDLE_GITHUB_TOKEN}}\u0026quot;\u003c/span\u003e\n\u003c/pre\u003e\n\n\n\u003cp\u003e以下ドキュメントを参考に GitHub Packages の認証情報（今回の例なら \u003ccode\u003eBUNDLE_GITHUB_TOKEN\u003c/code\u003e）を Dependabot 用の Secret として登録すれば完了です。\u003ca href=\"#f-e337a98d\" name=\"fn-e337a98d\" title=\"Secret はリポジトリ単位とオーガニゼーション単位のどちらでも設定できます\"\u003e*4\u003c/a\u003e\u003c/p\u003e\n\n\u003cp\u003e\u003ca href=\"https://docs.github.com/en/code-security/supply-chain-security/keeping-your-dependencies-updated-automatically/managing-encrypted-secrets-for-dependabot\"\u003eManaging encrypted secrets for Dependabot - GitHub Docs\u003c/a\u003e\u003c/p\u003e\n\n\u003ch2 id=\"関連記事\"\u003e関連記事\u003c/h2\u003e\n\n\u003cul\u003e\n\u003cli\u003e\u003ca href=\"https://tech.pepabo.com/2021/09/10/in-house-rubygems-registry-with-ghes-github-packages/\"\u003eGitHub Enterprise Server\u0026#x306E;GitHub Packages\u0026#x3067;\u0026#x793E;\u0026#x5185;\u0026#x7528;gem\u0026#x3092;\u0026#x30DB;\u0026#x30B9;\u0026#x30C8;\u0026#x3059;\u0026#x308B; - \u0026#x30DA;\u0026#x30D1;\u0026#x30DC;\u0026#x30C6;\u0026#x30C3;\u0026#x30AF;\u0026#x30D6;\u0026#x30ED;\u0026#x30B0;\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"https://tech.actindi.net/2020/06/12/180000\"\u003eGitHub Actions\u0026#x3092;\u0026#x5229;\u0026#x7528;\u0026#x3057;\u0026#x3066;gem\u0026#x3092;GitHub Packages\u0026#x306B;\u0026#x516C;\u0026#x958B;\u0026#x3059;\u0026#x308B; - \u0026#x30A2;\u0026#x30AF;\u0026#x30C8;\u0026#x30A4;\u0026#x30F3;\u0026#x30C7;\u0026#x30A3;\u0026#x958B;\u0026#x767A;\u0026#x8005;\u0026#x30D6;\u0026#x30ED;\u0026#x30B0;\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"https://chocoby.com/blog/2021/09/21/dependabot-github-packages-gem\"\u003eDependabot \u0026#x3067; GitHub Packages \u0026#x306B;\u0026#x516C;\u0026#x958B;\u0026#x3057;\u0026#x305F; Gem \u0026#x306E;\u0026#x30A2;\u0026#x30C3;\u0026#x30D7;\u0026#x30C7;\u0026#x30FC;\u0026#x30C8;\u0026#x3092;\u0026#x30C1;\u0026#x30A7;\u0026#x30C3;\u0026#x30AF;\u0026#x3059;\u0026#x308B; - \u0026#x6687;\u0026#x4EBA;\u0026#x3058;\u0026#x3083;\u0026#x306A;\u0026#x3044;\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\n\u003cdiv class=\"footnote\"\u003e\n\u003cp class=\"footnote\"\u003e\u003ca href=\"#fn-ff64d70e\" name=\"f-ff64d70e\" class=\"footnote-number\"\u003e*1\u003c/a\u003e\u003cspan class=\"footnote-delimiter\"\u003e:\u003c/span\u003e\u003cspan class=\"footnote-text\"\u003eSee. \u003ca href=\"https://docs.github.com/en/packages/working-with-a-github-packages-registry/working-with-the-rubygems-registry#installing-a-package\"\u003ehttps://docs.github.com/en/packages/working-with-a-github-packages-registry/working-with-the-rubygems-registry#installing-a-package\u003c/a\u003e\u003c/span\u003e\u003c/p\u003e\n\u003cp class=\"footnote\"\u003e\u003ca href=\"#fn-54facd0e\" name=\"f-54facd0e\" class=\"footnote-number\"\u003e*2\u003c/a\u003e\u003cspan class=\"footnote-delimiter\"\u003e:\u003c/span\u003e\u003cspan class=\"footnote-text\"\u003e\u003ca href=\"https://tech.pepabo.com/2021/09/10/in-house-rubygems-registry-with-ghes-github-packages/#%E3%83%AC%E3%82%B8%E3%82%B9%E3%83%88%E3%83%AA%E3%81%8B%E3%82%89%E3%81%AEgem%E3%81%AE%E3%83%80%E3%82%A6%E3%83%B3%E3%83%AD%E3%83%BC%E3%83%89\"\u003e環境変数を利用して認証情報をセットすることもできるようです\u003c/a\u003e\u003c/span\u003e\u003c/p\u003e\n\u003cp class=\"footnote\"\u003e\u003ca href=\"#fn-52f8882d\" name=\"f-52f8882d\" class=\"footnote-number\"\u003e*3\u003c/a\u003e\u003cspan class=\"footnote-delimiter\"\u003e:\u003c/span\u003e\u003cspan class=\"footnote-text\"\u003eSee. \u003ca href=\"https://docs.github.com/en/code-security/supply-chain-security/keeping-your-dependencies-updated-automatically/configuration-options-for-dependency-updates#rubygems-server\"\u003ehttps://docs.github.com/en/code-security/supply-chain-security/keeping-your-dependencies-updated-automatically/configuration-options-for-dependency-updates#rubygems-server\u003c/a\u003e\u003c/span\u003e\u003c/p\u003e\n\u003cp class=\"footnote\"\u003e\u003ca href=\"#fn-e337a98d\" name=\"f-e337a98d\" class=\"footnote-number\"\u003e*4\u003c/a\u003e\u003cspan class=\"footnote-delimiter\"\u003e:\u003c/span\u003e\u003cspan class=\"footnote-text\"\u003eSecret はリポジトリ単位とオーガニゼーション単位のどちらでも設定できます\u003c/span\u003e\u003c/p\u003e\n\u003c/div\u003e","contentSnippet":"こんにちは、id:daido1976 です。先日 GitHub Packages を使ってプライベート gem を社内限定で公開したので、その方法をご紹介します。GitHub Packages とは既存のプライベート gem と GitHub Packages との違いGitHub Packages を使ってプライベート gem を社内限定で公開するgem をリリース（Publish）する方法ローカルからリリースするCI からリリースする各環境へのインストール方法ローカルや本番環境でのインストールDependabot でのインストール関連記事GitHub Packages とはgithub.co.jpGitHub Packages はライブラリ（パッケージ）のホスティングサービスです。Ruby の場合 https://rubygems.org の代わりに https://rubygems.pkg.github.com に公開するイメージで、認証には GitHub の personal access token などを使います。既存のプライベート gem と GitHub Packages との違い既存のプライベート gem は主に git のタグやブランチを指定する方法が用いられますが、以下のようにいくつかの問題があります。# main ブランチの先端を使うのは再現性がない（ブランチ指定した場合も同じ）gem 'my_rubygem', github: 'my_name/my_rubygem'# タグを指定しても書き換えられる可能性があるgem 'my_rubygem', github: 'my_name/my_rubygem', tag: 'v1.0.0'# コミットの参照を指定するのはシンプルに見づらいgem 'my_rubygem', github: 'my_name/my_rubygem', ref: '4aded'GitHub Packages は rubygems.org と同じように、バージョン指定が明確かつ一度リリースしたバージョンは変更できないので安全です。GitHub Packages を使ってプライベート gem を社内限定で公開するここからは実際に GitHub Packages を使ってプライベート gem を社内限定で公開する方法（主にリリースとインストールの仕方）を説明していきます。今回は Organization は feedforce、gem の名前は socialplus-rails という想定です。日本語版のドキュメントは文章やサンプルコードが古いケースがあるので、以下の英語版ドキュメントを参照した方が良いです。Working with the RubyGems registry - GitHub Docs認証に使う personal access token の権限については以下のドキュメントが詳しいです。About permissions for GitHub Packages - GitHub Docsgem をリリース（Publish）する方法まずは作成した gem をリリースする方法について説明します。ローカルからリリースするまとめると以下のような手順になります。〜/.gem/credentials に GitHub の personal access token を追加権限は repo と write:packages が必要$ gem build socialplus-rails.gemspec で gem をビルドSocialplusRails::VERSION は 0.1.0 を想定$ gem push --key github --host https://rubygems.pkg.github.com/feedforce socialplus-rails-0.1.0.gem で push するこの時に personal access token の権限が足りないとエラーになるPush が成功すると https://github.com/orgs/feedforce/packages のような Packages のページに反映されます 👏CI からリリースするgem のソースコードを更新した際に毎回上記のようにローカルからリリースしても良いのですが、できれば CI からリリースできるように仕組み化したいものです。CircleCI の場合、以下のような release コマンドを定義して、リリース用のブランチがマージされた時に実行されるようにすれば OK です。# .circleci/config.ymlversion: 2.1# ...commands:  release:    description: Release to GitHub Packages    steps:      - run:          name: Create GitHub Packages Credentials          command: |            mkdir ~/.gem || true            echo -e \"---\\n:github: Bearer ${GITHUB_ACCESS_TOKEN}\" \u003e ~/.gem/credentials            chmod 0600 ~/.gem/credentials      - run:          name: Release Gem          command: |            gem build socialplus-rails.gemspec            release_version=$(find . -name \"socialplus-rails-*.gem\" | sed -E 's/\\.\\/socialplus-rails-(.*).gem/\\1/')            gem push --key github --host https://rubygems.pkg.github.com/feedforce \"socialplus-rails-${release_version}.gem\"各環境へのインストール方法ここからはリリースした gem を各環境へインストールする方法を説明します。Gemfile への記述は以下のようにします。*1# Gemfilesource 'https://rubygems.pkg.github.com/feedforce' do  gem 'socialplus-rails', '0.1.0'endローカルや本番環境でのインストール以下のように bundle config コマンドで認証情報をセットしてから bundle install を行います。*2# `USERNAME:TOKEN` は `{GitHubのユーザ名}:{Personal access token}` という形です（例: `daido1976:7axxx`）$ bundle config https://rubygems.pkg.github.com/feedforce USERNAME:TOKEN$ bundle install※ インストール時の認証に利用する personal access token には read:packages の権限のみあれば OK ですDependabot でのインストールGitHub Packages のプライベート gem をDependabot の更新対象にしたい場合は追加の設定が必要です。以下のように設定ファイルで GitHub Packages の認証情報を渡す準備をします。*3# .github/dependabot.ymlversion: 2registries:  rubygems-pkg-github:    type: rubygems-server    url: https://rubygems.pkg.github.com    # BUNDLE_GITHUB_TOKEN の値は `USERNAME:TOKEN` という形式です    token: \"${{secrets.BUNDLE_GITHUB_TOKEN}}\"以下ドキュメントを参考に GitHub Packages の認証情報（今回の例なら BUNDLE_GITHUB_TOKEN）を Dependabot 用の Secret として登録すれば完了です。*4Managing encrypted secrets for Dependabot - GitHub Docs関連記事GitHub Enterprise ServerのGitHub Packagesで社内用gemをホストする - ペパボテックブログGitHub Actionsを利用してgemをGitHub Packagesに公開する - アクトインディ開発者ブログDependabot で GitHub Packages に公開した Gem のアップデートをチェックする - 暇人じゃない*1:See. https://docs.github.com/en/packages/working-with-a-github-packages-registry/working-with-the-rubygems-registry#installing-a-package*2:環境変数を利用して認証情報をセットすることもできるようです*3:See. https://docs.github.com/en/code-security/supply-chain-security/keeping-your-dependencies-updated-automatically/configuration-options-for-dependency-updates#rubygems-server*4:Secret はリポジトリ単位とオーガニゼーション単位のどちらでも設定できます","link":"https://developer.feedforce.jp/entry/2021/11/05/095050","isoDate":"2021-11-05T00:50:50.000Z","dateMiliSeconds":1636073450000,"imageUrl":"https://cdn-ak.f.st-hatena.com/images/fotolife/d/daido1976/20211104/20211104160709.png","authorName":"daido1976"},{"title":"Docker BuildKit の --secret フラグでイメージビルド時の秘匿情報を環境変数経由で渡せるようになっていた","content":"\u003cp\u003eこんにちは、\u003ca href=\"http://blog.hatena.ne.jp/daido1976/\" class=\"hatena-id-icon\"\u003e\u003cimg src=\"https://cdn.profile-image.st-hatena.com/users/daido1976/profile.png\" width=\"16\" height=\"16\" alt=\"\" class=\"hatena-id-icon\"\u003eid:daido1976\u003c/a\u003e です。入社してもうすぐ 3 年が経ちます。\u003c/p\u003e\n\n\u003cp\u003eDocker BuildKit の --secret フラグについて、公式ドキュメントでの説明や関連する日本語記事はすでにいくつかあるのですが、2020/12/08 にリリースされた Docker Engine 20.10.0 で「秘匿情報を環境変数経由で渡せるようになっていたこと」への言及が見当たらなかったので書かせていただきます。\u003ca href=\"#f-140b8608\" name=\"fn-140b8608\" title=\"BuildKit や --secret フラグってそもそも何？という方は最下部の参考記事に詳しくまとまっておりますのでぜひご覧ください。\"\u003e*1\u003c/a\u003e（個人的にはとても嬉しいアップデートでした…！）\u003c/p\u003e\n\n\u003cp\u003eリリースノートの該当箇所は以下です。\u003c/p\u003e\n\n\u003cp\u003eSee. \u003ca href=\"https://docs.docker.com/engine/release-notes/#20100\"\u003ehttps://docs.docker.com/engine/release-notes/#20100\u003c/a\u003e\u003c/p\u003e\n\n\u003cblockquote\u003e\u003cul\u003e\n\u003cli\u003ebuildkit: secrets: allow providing secrets with env \u003ca href=\"https://github.com/moby/moby/pull/41234\"\u003emoby/moby#41234\u003c/a\u003e \u003ca href=\"https://github.com/docker/cli/pull/2656\"\u003edocker/cli#2656\u003c/a\u003e \u003ca href=\"https://github.com/moby/buildkit/pull/1534\"\u003emoby/buildkit#1534\u003c/a\u003e\n\n\u003cul\u003e\n\u003cli\u003eSupport \u003ccode\u003e--secret id=foo,env=MY_ENV\u003c/code\u003e as an alternative for storing a secret value to a file.\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003e--secret id=GIT_AUTH_TOKEN\u003c/code\u003e will load env if it exists and the file does not.\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/blockquote\u003e\n\n\u003ch2\u003e要点\u003c/h2\u003e\n\n\u003cul\u003e\n\u003cli\u003eDocker Engine 20.10.0 までは \u003ccode\u003e--secret id=my_secret,src=my_secret.txt\u003c/code\u003e のようにファイル経由でしか秘匿情報を渡せなかった\u003c/li\u003e\n\u003cli\u003e20.10.0 からは \u003ccode\u003e--secret id=my_env,env=MY_ENV\u003c/code\u003e のように環境変数経由で秘匿情報を渡せるようになった\u003c/li\u003e\n\u003cli\u003e上記の \u003ccode\u003e--secret id=my_env,env=MY_ENV\u003c/code\u003e にはショートハンドが用意されており \u003ccode\u003e--secret id=MY_ENV\u003c/code\u003e とも書ける（この場合 Dockerfile 側でも \u003ccode\u003eid\u003c/code\u003e は \u003ccode\u003eMY_ENV\u003c/code\u003e になる）\u003c/li\u003e\n\u003c/ul\u003e\n\n\n\u003ch2\u003e使い方\u003c/h2\u003e\n\n\u003cp\u003e基本的な使い方は \u003ca href=\"https://docs.docker.com/develop/develop-images/build_enhancements/#new-docker-build-secret-information\"\u003e公式ドキュメント\u003c/a\u003e に書いてあるのでそちらに説明を譲ります。\u003c/p\u003e\n\n\u003cp\u003e以下は主に上記の \u003ccode\u003e要点\u003c/code\u003e と公式ドキュメントに記載のない仕様を説明するための最小のサンプルコードです。\u003c/p\u003e\n\n\u003cp\u003eこんな Dockerfile があったとして、\u003c/p\u003e\n\n\u003cpre class=\"code lang-dockerfile\" data-lang=\"dockerfile\" data-unlink\u003e\u003cspan class=\"synComment\"\u003e# syntax = docker/dockerfile:1.2\u003c/span\u003e\n\u003cspan class=\"synStatement\"\u003eFROM \u003c/span\u003ealpine\n\n\u003cspan class=\"synComment\"\u003e# 1. docker build 時に `id` を明示的に指定する場合（例: `--secret id=my_env1,env=MY_ENV1` ）\u003c/span\u003e\n\u003cspan class=\"synStatement\"\u003eRUN \u003c/span\u003e--mount=type=secret,id=my_env1 cat /run/secrets/my_env1\n\u003cspan class=\"synComment\"\u003e# 2. docker build 時に `id` を明示的に指定しない場合（例: `--secret id=MY_ENV2`） \u003c/span\u003e\n\u003cspan class=\"synStatement\"\u003eRUN \u003c/span\u003e--mount=type=secret,id=MY_ENV2 cat /run/secrets/MY_ENV2\n\u003cspan class=\"synComment\"\u003e# 3. `dst` を指定した場合（`dst` を指定しないとデフォルトで `/run/secrets{id}` に秘匿情報が入ります）\u003c/span\u003e\n\u003cspan class=\"synStatement\"\u003eRUN \u003c/span\u003e--mount=type=secret,id=MY_ENV3,dst=/foobar cat /foobar\n\n\u003cspan class=\"synComment\"\u003e# 補足: key 名の指定は実はいろいろできるらしい\u003c/span\u003e\n\u003cspan class=\"synComment\"\u003e# https://github.com/moby/buildkit/blob/v0.8.2/frontend/dockerfile/instructions/commands_runmount.go#L154-L216\u003c/span\u003e\n\u003c/pre\u003e\n\n\n\u003cp\u003e以下のように \u003ccode\u003edocker build\u003c/code\u003e すると、環境変数経由で秘匿情報を渡すことができます。\u003c/p\u003e\n\n\u003cpre class=\"code lang-sh\" data-lang=\"sh\" data-unlink\u003e$ \u003cspan class=\"synStatement\"\u003eexport\u003c/span\u003e\u003cspan class=\"synIdentifier\"\u003e MY_ENV1=\u003c/span\u003e\u003cspan class=\"synStatement\"\u003e'\u003c/span\u003e\u003cspan class=\"synConstant\"\u003emy_env1!!!\u003c/span\u003e\u003cspan class=\"synStatement\"\u003e'\u003c/span\u003e \u0026amp;\u0026amp; \u003cspan class=\"synStatement\"\u003eexport\u003c/span\u003e\u003cspan class=\"synIdentifier\"\u003e MY_ENV2=\u003c/span\u003e\u003cspan class=\"synStatement\"\u003e'\u003c/span\u003e\u003cspan class=\"synConstant\"\u003emy_env2!!!\u003c/span\u003e\u003cspan class=\"synStatement\"\u003e'\u003c/span\u003e \u0026amp;\u0026amp; \u003cspan class=\"synStatement\"\u003eexport\u003c/span\u003e\u003cspan class=\"synIdentifier\"\u003e MY_ENV3=\u003c/span\u003e\u003cspan class=\"synStatement\"\u003e'\u003c/span\u003e\u003cspan class=\"synConstant\"\u003emy_env3!!!\u003c/span\u003e\u003cspan class=\"synStatement\"\u003e'\u003c/span\u003e\n\u003cspan class=\"synComment\"\u003e# 複数の秘匿情報を渡すには --secret フラグを複数使えば良い\u003c/span\u003e\n$ \u003cspan class=\"synIdentifier\"\u003eDOCKER_BUILDKIT\u003c/span\u003e=\u003cspan class=\"synConstant\"\u003e1\u003c/span\u003e docker build \u003cspan class=\"synSpecial\"\u003e--secret\u003c/span\u003e \u003cspan class=\"synIdentifier\"\u003eid\u003c/span\u003e=\u003cspan class=\"synIdentifier\"\u003emy_env1,env\u003c/span\u003e=MY_ENV1 \u003cspan class=\"synSpecial\"\u003e--secret\u003c/span\u003e \u003cspan class=\"synIdentifier\"\u003eid\u003c/span\u003e=MY_ENV2 \u003cspan class=\"synSpecial\"\u003e--secret\u003c/span\u003e \u003cspan class=\"synIdentifier\"\u003eid\u003c/span\u003e=MY_ENV3 \u003cspan class=\"synSpecial\"\u003e--no-cache\u003c/span\u003e \u003cspan class=\"synSpecial\"\u003e--progress=plain\u003c/span\u003e .\n\n\u003cspan class=\"synComment\"\u003e# ...\u003c/span\u003e\n\u003cspan class=\"synComment\"\u003e#8 [2/4] RUN --mount=type=secret,id=my_env1 cat /run/secrets/my_env1\u003c/span\u003e\n\u003cspan class=\"synComment\"\u003e#8 sha256:d32e4958843414fb006b5dbe7c259112f1bd481d17d84098c3d84f499793cb3b\u003c/span\u003e\n\u003cspan class=\"synComment\"\u003e#8 0.252 my_env1!!!#8 DONE 0.3s\u003c/span\u003e\n\n\u003cspan class=\"synComment\"\u003e#9 [3/4] RUN --mount=type=secret,id=MY_ENV2 cat /run/secrets/MY_ENV2\u003c/span\u003e\n\u003cspan class=\"synComment\"\u003e#9 sha256:4cc22ee3d7f39180f4f4f8167deaa481e852b2fc577c89a234fe88b9852952ba\u003c/span\u003e\n\u003cspan class=\"synComment\"\u003e#9 0.301 my_env2!!!#9 DONE 0.4s\u003c/span\u003e\n\n\u003cspan class=\"synComment\"\u003e#10 [4/4] RUN --mount=type=secret,id=MY_ENV3,dst=/foobar cat /foobar\u003c/span\u003e\n\u003cspan class=\"synComment\"\u003e#10 sha256:91f97f55e633c8ed675126abefa015110265a7fbd40e4aeaf88204dcb912cb26\u003c/span\u003e\n\u003cspan class=\"synComment\"\u003e#10 0.283 my_env3!!!#10 DONE 0.3s\u003c/span\u003e\n\u003cspan class=\"synComment\"\u003e# ...\u003c/span\u003e\n\u003c/pre\u003e\n\n\n\u003ch2\u003eDocker Compose で --secret フラグが使えないことへの対策\u003c/h2\u003e\n\n\u003cp\u003e余談ですが、Docker Compose には BuildKit が統合されているものの、2021年3月現在 --secret フラグは利用できません。（\u003ca href=\"https://github.com/docker/compose/pull/7046\"\u003e対応中らしき PR\u003c/a\u003e はある）\u003c/p\u003e\n\n\u003cp\u003e私のチームではワークアラウンドとして、開発環境でも \u003ccode\u003edocker-compose build\u003c/code\u003e ではなく \u003ccode\u003edocker build\u003c/code\u003e を使う方法を取りました。\u003c/p\u003e\n\n\u003cp\u003eDocker Compose では \u003ccode\u003edocker-compose.yml\u003c/code\u003e で指定しているイメージと同名のイメージがローカルにあればそちらを使ってくれるので、以下のような \u003ccode\u003edocker-compose.yml\u003c/code\u003e を書いて、\u003c/p\u003e\n\n\u003cpre class=\"code lang-yaml\" data-lang=\"yaml\" data-unlink\u003e\u003cspan class=\"synIdentifier\"\u003eversion\u003c/span\u003e\u003cspan class=\"synSpecial\"\u003e:\u003c/span\u003e \u003cspan class=\"synConstant\"\u003e'3'\u003c/span\u003e\n\n\u003cspan class=\"synIdentifier\"\u003eservices\u003c/span\u003e\u003cspan class=\"synSpecial\"\u003e:\u003c/span\u003e\n  \u003cspan class=\"synIdentifier\"\u003eapp\u003c/span\u003e\u003cspan class=\"synSpecial\"\u003e:\u003c/span\u003e\n    \u003cspan class=\"synIdentifier\"\u003ebuild\u003c/span\u003e\u003cspan class=\"synSpecial\"\u003e:\u003c/span\u003e .\n    \u003cspan class=\"synIdentifier\"\u003eimage\u003c/span\u003e\u003cspan class=\"synSpecial\"\u003e:\u003c/span\u003e my-app\n   \u003cspan class=\"synComment\"\u003e # ...\u003c/span\u003e\n\u003c/pre\u003e\n\n\n\n\n\u003cpre class=\"code lang-sh\" data-lang=\"sh\" data-unlink\u003e$ \u003cspan class=\"synIdentifier\"\u003eDOCKER_BUILDKIT\u003c/span\u003e=\u003cspan class=\"synConstant\"\u003e1\u003c/span\u003e docker build \u003cspan class=\"synSpecial\"\u003e-t\u003c/span\u003e my-app \u003cspan class=\"synSpecial\"\u003e--secret\u003c/span\u003e \u003cspan class=\"synIdentifier\"\u003eid\u003c/span\u003e=MY_ENV .\n\u003c/pre\u003e\n\n\n\u003cp\u003e上記のように \u003ccode\u003edocker build\u003c/code\u003e で同名のイメージを事前に作っておいて \u003ccode\u003edocker-compose\u003c/code\u003e から使う、という流れになります。\u003c/p\u003e\n\n\u003ch2\u003e参考記事\u003c/h2\u003e\n\n\u003cul\u003e\n\u003cli\u003e\u003ca href=\"https://medium.com/nttlabs/docker-v18-09-%E6%96%B0%E6%A9%9F%E8%83%BD-%E3%82%A4%E3%83%A1%E3%83%BC%E3%82%B8%E3%83%93%E3%83%AB%E3%83%89-%E3%82%BB%E3%82%AD%E3%83%A5%E3%83%AA%E3%83%86%E3%82%A3-9534714c26e2\"\u003eDocker 18.09 \u0026#x65B0;\u0026#x6A5F;\u0026#x80FD; (\u0026#x30A4;\u0026#x30E1;\u0026#x30FC;\u0026#x30B8;\u0026#x30D3;\u0026#x30EB;\u0026#x30C9;\u0026amp;\u0026#x30BB;\u0026#x30AD;\u0026#x30E5;\u0026#x30EA;\u0026#x30C6;\u0026#x30A3;) | by Akihiro Suda | nttlabs | Medium\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"https://blog.manabusakai.com/2018/12/docker-build-secret/\"\u003eDocker Engine 18.09 \u0026#x304B;\u0026#x3089;\u0026#x4F7F;\u0026#x3048;\u0026#x308B; Build-time secrets \u0026#x3092;\u0026#x8A66;\u0026#x3057;\u0026#x3066;\u0026#x307F;\u0026#x305F; | \u0026#x306F;\u0026#x3063;\u0026#x305F;\u0026#x308A;\u0026#x30A8;\u0026#x30F3;\u0026#x30B8;\u0026#x30CB;\u0026#x30A2;\u0026#x306E;\u0026#x5099;\u0026#x5FD8;\u0026#x9332;\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\n\u003cdiv class=\"footnote\"\u003e\n\u003cp class=\"footnote\"\u003e\u003ca href=\"#fn-140b8608\" name=\"f-140b8608\" class=\"footnote-number\"\u003e*1\u003c/a\u003e\u003cspan class=\"footnote-delimiter\"\u003e:\u003c/span\u003e\u003cspan class=\"footnote-text\"\u003eBuildKit や --secret フラグってそもそも何？という方は最下部の参考記事に詳しくまとまっておりますのでぜひご覧ください。\u003c/span\u003e\u003c/p\u003e\n\u003c/div\u003e","contentSnippet":"こんにちは、id:daido1976 です。入社してもうすぐ 3 年が経ちます。Docker BuildKit の --secret フラグについて、公式ドキュメントでの説明や関連する日本語記事はすでにいくつかあるのですが、2020/12/08 にリリースされた Docker Engine 20.10.0 で「秘匿情報を環境変数経由で渡せるようになっていたこと」への言及が見当たらなかったので書かせていただきます。*1（個人的にはとても嬉しいアップデートでした…！）リリースノートの該当箇所は以下です。See. https://docs.docker.com/engine/release-notes/#20100buildkit: secrets: allow providing secrets with env moby/moby#41234 docker/cli#2656 moby/buildkit#1534Support --secret id=foo,env=MY_ENV as an alternative for storing a secret value to a file.--secret id=GIT_AUTH_TOKEN will load env if it exists and the file does not.要点Docker Engine 20.10.0 までは --secret id=my_secret,src=my_secret.txt のようにファイル経由でしか秘匿情報を渡せなかった20.10.0 からは --secret id=my_env,env=MY_ENV のように環境変数経由で秘匿情報を渡せるようになった上記の --secret id=my_env,env=MY_ENV にはショートハンドが用意されており --secret id=MY_ENV とも書ける（この場合 Dockerfile 側でも id は MY_ENV になる）使い方基本的な使い方は 公式ドキュメント に書いてあるのでそちらに説明を譲ります。以下は主に上記の 要点 と公式ドキュメントに記載のない仕様を説明するための最小のサンプルコードです。こんな Dockerfile があったとして、# syntax = docker/dockerfile:1.2FROM alpine# 1. docker build 時に `id` を明示的に指定する場合（例: `--secret id=my_env1,env=MY_ENV1` ）RUN --mount=type=secret,id=my_env1 cat /run/secrets/my_env1# 2. docker build 時に `id` を明示的に指定しない場合（例: `--secret id=MY_ENV2`） RUN --mount=type=secret,id=MY_ENV2 cat /run/secrets/MY_ENV2# 3. `dst` を指定した場合（`dst` を指定しないとデフォルトで `/run/secrets{id}` に秘匿情報が入ります）RUN --mount=type=secret,id=MY_ENV3,dst=/foobar cat /foobar# 補足: key 名の指定は実はいろいろできるらしい# https://github.com/moby/buildkit/blob/v0.8.2/frontend/dockerfile/instructions/commands_runmount.go#L154-L216以下のように docker build すると、環境変数経由で秘匿情報を渡すことができます。$ export MY_ENV1='my_env1!!!' \u0026\u0026 export MY_ENV2='my_env2!!!' \u0026\u0026 export MY_ENV3='my_env3!!!'# 複数の秘匿情報を渡すには --secret フラグを複数使えば良い$ DOCKER_BUILDKIT=1 docker build --secret id=my_env1,env=MY_ENV1 --secret id=MY_ENV2 --secret id=MY_ENV3 --no-cache --progress=plain .# ...#8 [2/4] RUN --mount=type=secret,id=my_env1 cat /run/secrets/my_env1#8 sha256:d32e4958843414fb006b5dbe7c259112f1bd481d17d84098c3d84f499793cb3b#8 0.252 my_env1!!!#8 DONE 0.3s#9 [3/4] RUN --mount=type=secret,id=MY_ENV2 cat /run/secrets/MY_ENV2#9 sha256:4cc22ee3d7f39180f4f4f8167deaa481e852b2fc577c89a234fe88b9852952ba#9 0.301 my_env2!!!#9 DONE 0.4s#10 [4/4] RUN --mount=type=secret,id=MY_ENV3,dst=/foobar cat /foobar#10 sha256:91f97f55e633c8ed675126abefa015110265a7fbd40e4aeaf88204dcb912cb26#10 0.283 my_env3!!!#10 DONE 0.3s# ...Docker Compose で --secret フラグが使えないことへの対策余談ですが、Docker Compose には BuildKit が統合されているものの、2021年3月現在 --secret フラグは利用できません。（対応中らしき PR はある）私のチームではワークアラウンドとして、開発環境でも docker-compose build ではなく docker build を使う方法を取りました。Docker Compose では docker-compose.yml で指定しているイメージと同名のイメージがローカルにあればそちらを使ってくれるので、以下のような docker-compose.yml を書いて、version: '3'services:  app:    build: .    image: my-app    # ...$ DOCKER_BUILDKIT=1 docker build -t my-app --secret id=MY_ENV .上記のように docker build で同名のイメージを事前に作っておいて docker-compose から使う、という流れになります。参考記事Docker 18.09 新機能 (イメージビルド\u0026セキュリティ) | by Akihiro Suda | nttlabs | MediumDocker Engine 18.09 から使える Build-time secrets を試してみた | はったりエンジニアの備忘録*1:BuildKit や --secret フラグってそもそも何？という方は最下部の参考記事に詳しくまとまっておりますのでぜひご覧ください。","link":"https://developer.feedforce.jp/entry/2021/03/15/102530","isoDate":"2021-03-15T01:25:30.000Z","dateMiliSeconds":1615771530000,"imageUrl":"https://cdn.user.blog.st-hatena.com/default_entry_og_image/4268819/1588226000876991","authorName":"daido1976"},{"title":"Ruby 3.0 の「キーワード引数の分離」で委譲用のメソッドが壊れた場合の対応方法","content":"\u003cp\u003eこんにちは、\u003ca href=\"http://blog.hatena.ne.jp/daido1976/\" class=\"hatena-id-icon\"\u003e\u003cimg src=\"https://cdn.profile-image.st-hatena.com/users/daido1976/profile.png\" width=\"16\" height=\"16\" alt=\"\" class=\"hatena-id-icon\"\u003eid:daido1976\u003c/a\u003e です。\u003c/p\u003e\n\n\u003cp\u003eRuby 3.0 の「\u003ca href=\"https://bugs.ruby-lang.org/issues/14183\"\u003eキーワード引数の分離\u003c/a\u003e」が原因で委譲用のメソッドが壊れた場合、特に Ruby 2.6 ~ 3.0 で互換性を保ちながら対応する場合の日本語記事が見当たらなかったので、書かせていただきます。\u003c/p\u003e\n\n\u003ch2\u003eインスタンスメソッドが壊れた場合\u003c/h2\u003e\n\n\u003cp\u003e以下のコードは Ruby 3.0 より前のバージョンでは動きますが、3.0 からは \u003ccode\u003eMyClass#other_method\u003c/code\u003e の実行時に ArgumentError が起きるようになります。（2.7 の時も警告が出ます）\u003c/p\u003e\n\n\u003cpre class=\"code lang-ruby\" data-lang=\"ruby\" data-unlink\u003e\u003cspan class=\"synPreProc\"\u003eclass\u003c/span\u003e \u003cspan class=\"synType\"\u003eMyClass\u003c/span\u003e\n  \u003cspan class=\"synPreProc\"\u003edef\u003c/span\u003e \u003cspan class=\"synIdentifier\"\u003edelegating_method\u003c/span\u003e(*args)\n    other_method(*args)\n  \u003cspan class=\"synPreProc\"\u003eend\u003c/span\u003e\n\n  \u003cspan class=\"synPreProc\"\u003edef\u003c/span\u003e \u003cspan class=\"synIdentifier\"\u003eother_method\u003c/span\u003e(\u003cspan class=\"synConstant\"\u003evalue\u003c/span\u003e:)\n    p value\n  \u003cspan class=\"synPreProc\"\u003eend\u003c/span\u003e\n\u003cspan class=\"synPreProc\"\u003eend\u003c/span\u003e\n\n\u003cspan class=\"synType\"\u003eMyClass\u003c/span\u003e.new.delegating_method(\u003cspan class=\"synConstant\"\u003evalue\u003c/span\u003e: \u003cspan class=\"synSpecial\"\u003e'\u003c/span\u003e\u003cspan class=\"synConstant\"\u003evalue\u003c/span\u003e\u003cspan class=\"synSpecial\"\u003e'\u003c/span\u003e)\n\u003c/pre\u003e\n\n\n\u003cp\u003eこちらは公式の \u003ca href=\"https://www.ruby-lang.org/en/news/2019/12/12/separation-of-positional-and-keyword-arguments-in-ruby-3-0/#a-compatible-delegation\"\u003eSeparation of positional and keyword arguments in Ruby 3.0#a-compatible-delegation\u003c/a\u003e や \u003ca href=\"https://github.com/ruby/ruby2_keywords/\"\u003eruby2_keywords gem\u003c/a\u003e や \u003ca href=\"https://docs.ruby-lang.org/ja/latest/method/Module/i/ruby2_keywords.html\"\u003eModule#ruby2_keywords\u003c/a\u003e を参考に以下のようなコードで対応できます。\u003c/p\u003e\n\n\u003cpre class=\"code lang-ruby\" data-lang=\"ruby\" data-unlink\u003e\u003cspan class=\"synPreProc\"\u003eclass\u003c/span\u003e \u003cspan class=\"synType\"\u003eMyClass\u003c/span\u003e\n  \u003cspan class=\"synPreProc\"\u003edef\u003c/span\u003e \u003cspan class=\"synIdentifier\"\u003edelegating_method\u003c/span\u003e(*args)\n    other_method(*args)\n  \u003cspan class=\"synPreProc\"\u003eend\u003c/span\u003e\n\n  \u003cspan class=\"synPreProc\"\u003edef\u003c/span\u003e \u003cspan class=\"synIdentifier\"\u003eother_method\u003c/span\u003e(\u003cspan class=\"synConstant\"\u003evalue\u003c/span\u003e:)\n    p value\n  \u003cspan class=\"synPreProc\"\u003eend\u003c/span\u003e\n\n  \u003cspan class=\"synComment\"\u003e# この 1 行を追加する\u003c/span\u003e\n  ruby2_keywords \u003cspan class=\"synConstant\"\u003e:delegating_method\u003c/span\u003e \u003cspan class=\"synStatement\"\u003eif\u003c/span\u003e respond_to?(\u003cspan class=\"synConstant\"\u003e:ruby2_keywords\u003c/span\u003e, \u003cspan class=\"synConstant\"\u003etrue\u003c/span\u003e)\n\u003cspan class=\"synPreProc\"\u003eend\u003c/span\u003e\n\n\u003cspan class=\"synType\"\u003eMyClass\u003c/span\u003e.new.delegating_method(\u003cspan class=\"synConstant\"\u003evalue\u003c/span\u003e: \u003cspan class=\"synSpecial\"\u003e'\u003c/span\u003e\u003cspan class=\"synConstant\"\u003evalue\u003c/span\u003e\u003cspan class=\"synSpecial\"\u003e'\u003c/span\u003e)\n\u003c/pre\u003e\n\n\n\u003cp\u003eポイントは Ruby 2.7 や 3.0 でも旧来のスタイルで実行できるようにするための \u003ccode\u003eModule#ruby2_keywords\u003c/code\u003e が Ruby 2.6 以前では定義されてないので、\u003ca href=\"https://docs.ruby-lang.org/ja/latest/method/Object/i/respond_to=3f.html\"\u003eObject#respond_to?\u003c/a\u003e などでそのケアをしてあげる必要があることです。\u003c/p\u003e\n\n\u003ch2\u003eクラスメソッドが壊れた場合\u003c/h2\u003e\n\n\u003cp\u003eこちらがこの記事を書いた目的です。\u003c/p\u003e\n\n\u003cp\u003eサンプルコードに現実味を持たせるためにインスタンスメソッドの例とは少し変えています。クラスメソッドで引数を受けて、そのまま委譲して初期化するようなコードです。\u003c/p\u003e\n\n\u003cp\u003eこのコードも Ruby 3.0 からは ArgumentError が発生します。\u003c/p\u003e\n\n\u003cpre class=\"code lang-ruby\" data-lang=\"ruby\" data-unlink\u003e\u003cspan class=\"synPreProc\"\u003eclass\u003c/span\u003e \u003cspan class=\"synType\"\u003eMyClass\u003c/span\u003e\n  \u003cspan class=\"synPreProc\"\u003edef\u003c/span\u003e \u003cspan class=\"synConstant\"\u003eself\u003c/span\u003e.\u003cspan class=\"synIdentifier\"\u003edelegating_method\u003c/span\u003e(*args)\n    new(*args)\n  \u003cspan class=\"synPreProc\"\u003eend\u003c/span\u003e\n\n  \u003cspan class=\"synPreProc\"\u003edef\u003c/span\u003e \u003cspan class=\"synIdentifier\"\u003einitialize\u003c/span\u003e(\u003cspan class=\"synConstant\"\u003evalue\u003c/span\u003e:)\n    p value\n  \u003cspan class=\"synPreProc\"\u003eend\u003c/span\u003e\n\u003cspan class=\"synPreProc\"\u003eend\u003c/span\u003e\n\n\u003cspan class=\"synType\"\u003eMyClass\u003c/span\u003e.delegating_method(\u003cspan class=\"synConstant\"\u003evalue\u003c/span\u003e: \u003cspan class=\"synSpecial\"\u003e'\u003c/span\u003e\u003cspan class=\"synConstant\"\u003evalue\u003c/span\u003e\u003cspan class=\"synSpecial\"\u003e'\u003c/span\u003e)\n\u003c/pre\u003e\n\n\n\u003cp\u003eこちらはインスタンスメソッドの場合と違い、以下のように \u003ccode\u003eclass \u0026lt;\u0026lt; self\u003c/code\u003e で特異クラスをオープンしてから、\u003ccode\u003eModule#ruby2_keywords\u003c/code\u003e の対応をしてあげる必要があります。\u003c/p\u003e\n\n\u003cpre class=\"code lang-ruby\" data-lang=\"ruby\" data-unlink\u003e\u003cspan class=\"synPreProc\"\u003eclass\u003c/span\u003e \u003cspan class=\"synType\"\u003eMyClass\u003c/span\u003e\n  \u003cspan class=\"synPreProc\"\u003edef\u003c/span\u003e \u003cspan class=\"synConstant\"\u003eself\u003c/span\u003e.\u003cspan class=\"synIdentifier\"\u003edelegating_method\u003c/span\u003e(*args)\n    new(*args)\n  \u003cspan class=\"synPreProc\"\u003eend\u003c/span\u003e\n\n  \u003cspan class=\"synPreProc\"\u003edef\u003c/span\u003e \u003cspan class=\"synIdentifier\"\u003einitialize\u003c/span\u003e(\u003cspan class=\"synConstant\"\u003evalue\u003c/span\u003e:)\n    p value\n  \u003cspan class=\"synPreProc\"\u003eend\u003c/span\u003e\n\n  \u003cspan class=\"synComment\"\u003e# この 3 行を追加する\u003c/span\u003e\n  \u003cspan class=\"synPreProc\"\u003eclass\u003c/span\u003e \u0026lt;\u0026lt; \u003cspan class=\"synConstant\"\u003eself\u003c/span\u003e\n    ruby2_keywords \u003cspan class=\"synConstant\"\u003e:delegating_method\u003c/span\u003e \u003cspan class=\"synStatement\"\u003eif\u003c/span\u003e respond_to?(\u003cspan class=\"synConstant\"\u003e:ruby2_keywords\u003c/span\u003e, \u003cspan class=\"synConstant\"\u003etrue\u003c/span\u003e)\n  \u003cspan class=\"synPreProc\"\u003eend\u003c/span\u003e\n\u003cspan class=\"synPreProc\"\u003eend\u003c/span\u003e\n\n\u003cspan class=\"synType\"\u003eMyClass\u003c/span\u003e.delegating_method(\u003cspan class=\"synConstant\"\u003evalue\u003c/span\u003e: \u003cspan class=\"synSpecial\"\u003e'\u003c/span\u003e\u003cspan class=\"synConstant\"\u003evalue\u003c/span\u003e\u003cspan class=\"synSpecial\"\u003e'\u003c/span\u003e)\n\u003c/pre\u003e\n\n\n\u003cp\u003e\u003ci\u003e定義されたクラスメソッドの居場所が分からなくて、久しぶりに『\u003ca href=\"https://www.oreilly.co.jp/books/9784873117430/\"\u003eメタプログラミングRuby\u003c/a\u003e』の 5 章を開きました。\u003c/i\u003e\u003c/p\u003e\n\n\u003cp\u003eAlso see. \u003ca href=\"https://docs.ruby-lang.org/ja/latest/doc/spec=2fdef.html#singleton_class\"\u003ehttps://docs.ruby-lang.org/ja/latest/doc/spec=2fdef.html#singleton_class\u003c/a\u003e\u003c/p\u003e\n\n\u003ch2\u003e【おまけ】Ruby 2.6 ~ 3.0 で互換性を保たなくて良い場合\u003c/h2\u003e\n\n\u003cp\u003e公式の \u003ca href=\"https://www.ruby-lang.org/en/news/2019/12/12/separation-of-positional-and-keyword-arguments-in-ruby-3-0/#delegation-ruby-3\"\u003eSeparation of positional and keyword arguments in Ruby 3.0#delegation-ruby-3\u003c/a\u003e の通りにやれば OK です。\u003c/p\u003e\n","contentSnippet":"こんにちは、id:daido1976 です。Ruby 3.0 の「キーワード引数の分離」が原因で委譲用のメソッドが壊れた場合、特に Ruby 2.6 ~ 3.0 で互換性を保ちながら対応する場合の日本語記事が見当たらなかったので、書かせていただきます。インスタンスメソッドが壊れた場合以下のコードは Ruby 3.0 より前のバージョンでは動きますが、3.0 からは MyClass#other_method の実行時に ArgumentError が起きるようになります。（2.7 の時も警告が出ます）class MyClass  def delegating_method(*args)    other_method(*args)  end  def other_method(value:)    p value  endendMyClass.new.delegating_method(value: 'value')こちらは公式の Separation of positional and keyword arguments in Ruby 3.0#a-compatible-delegation や ruby2_keywords gem や Module#ruby2_keywords を参考に以下のようなコードで対応できます。class MyClass  def delegating_method(*args)    other_method(*args)  end  def other_method(value:)    p value  end  # この 1 行を追加する  ruby2_keywords :delegating_method if respond_to?(:ruby2_keywords, true)endMyClass.new.delegating_method(value: 'value')ポイントは Ruby 2.7 や 3.0 でも旧来のスタイルで実行できるようにするための Module#ruby2_keywords が Ruby 2.6 以前では定義されてないので、Object#respond_to? などでそのケアをしてあげる必要があることです。クラスメソッドが壊れた場合こちらがこの記事を書いた目的です。サンプルコードに現実味を持たせるためにインスタンスメソッドの例とは少し変えています。クラスメソッドで引数を受けて、そのまま委譲して初期化するようなコードです。このコードも Ruby 3.0 からは ArgumentError が発生します。class MyClass  def self.delegating_method(*args)    new(*args)  end  def initialize(value:)    p value  endendMyClass.delegating_method(value: 'value')こちらはインスタンスメソッドの場合と違い、以下のように class \u003c\u003c self で特異クラスをオープンしてから、Module#ruby2_keywords の対応をしてあげる必要があります。class MyClass  def self.delegating_method(*args)    new(*args)  end  def initialize(value:)    p value  end  # この 3 行を追加する  class \u003c\u003c self    ruby2_keywords :delegating_method if respond_to?(:ruby2_keywords, true)  endendMyClass.delegating_method(value: 'value')定義されたクラスメソッドの居場所が分からなくて、久しぶりに『メタプログラミングRuby』の 5 章を開きました。Also see. https://docs.ruby-lang.org/ja/latest/doc/spec=2fdef.html#singleton_class【おまけ】Ruby 2.6 ~ 3.0 で互換性を保たなくて良い場合公式の Separation of positional and keyword arguments in Ruby 3.0#delegation-ruby-3 の通りにやれば OK です。","link":"https://developer.feedforce.jp/entry/2021/01/29/121252","isoDate":"2021-01-29T03:12:52.000Z","dateMiliSeconds":1611889972000,"imageUrl":"https://cdn.user.blog.st-hatena.com/default_entry_og_image/4268819/1588226000876991","authorName":"daido1976"},{"title":"私の好きなプログラミング動画 10 選","content":"\u003cp\u003eこんにちは。\u003ca href=\"http://blog.hatena.ne.jp/daido1976/\" class=\"hatena-id-icon\"\u003e\u003cimg src=\"https://cdn.profile-image.st-hatena.com/users/daido1976/profile.png\" width=\"16\" height=\"16\" alt=\"\" class=\"hatena-id-icon\"\u003eid:daido1976\u003c/a\u003e です。\u003c/p\u003e\n\n\u003cp\u003eこの記事は \u003ca href=\"https://adventar.org/calendars/5560\"\u003eFeedforce Advent Calendar 2020\u003c/a\u003e の 12 日目の記事です！\u003c/p\u003e\n\n\u003cp\u003e昨日は \u003ca href=\"https://twitter.com/sukechannnn\"\u003e@sukechannnn\u003c/a\u003e の \u003ca href=\"https://developer.feedforce.jp/entry/2020/12/11/172338\"\u003eモブプロしてたらチームが大きく成長した話\u003c/a\u003e でした。社内の技術勉強会でも発表してくれたのですが、みんなの関心が高い話題だったので発表後の議論が大変盛り上がっていました！\u003c/p\u003e\n\n\u003chr /\u003e\n\n\u003cp\u003eちなみにこの記事は \u003ca href=\"https://zenn.dev/magurotuna/articles/d5621291b8da87\"\u003eYouTubeにあるライブコーディング動画を見て Rust を学ぼう\u003c/a\u003e という記事にインスパイアされて書いています。\u003c/p\u003e\n\n\u003cul class=\"table-of-contents\"\u003e\n    \u003cli\u003e\u003ca href=\"#はじめに\"\u003eはじめに\u003c/a\u003e\u003c/li\u003e\n    \u003cli\u003e\u003ca href=\"#好きな動画-10-選\"\u003e好きな動画 10 選\u003c/a\u003e\u003cul\u003e\n            \u003cli\u003e\u003ca href=\"#George-Hotz-のライブコーディング\"\u003eGeorge Hotz のライブコーディング\u003c/a\u003e\u003c/li\u003e\n            \u003cli\u003e\u003ca href=\"#低レイヤーガール\"\u003e低レイヤーガール\u003c/a\u003e\u003c/li\u003e\n            \u003cli\u003e\u003ca href=\"#High-Engineer\"\u003eHigh Engineer\u003c/a\u003e\u003c/li\u003e\n            \u003cli\u003e\u003ca href=\"#mayah-氏の実践コーディング面接\"\u003emayah 氏の「実践！コーディング面接」\u003c/a\u003e\u003c/li\u003e\n            \u003cli\u003e\u003ca href=\"#メルカリ社の開発ライブ実況\"\u003eメルカリ社の開発ライブ実況\u003c/a\u003e\u003c/li\u003e\n            \u003cli\u003e\u003ca href=\"#The-Coding-Train-のソートアルゴリズム解説\"\u003eThe Coding Train のソートアルゴリズム解説\u003c/a\u003e\u003c/li\u003e\n            \u003cli\u003e\u003ca href=\"#AWS-Black-Belt-Online-Seminar\"\u003eAWS Black Belt Online Seminar\u003c/a\u003e\u003c/li\u003e\n            \u003cli\u003e\u003ca href=\"#Authlete-社による-OAuth--OIDC-入門\"\u003eAuthlete 社による OAuth \u0026amp; OIDC 入門\u003c/a\u003e\u003c/li\u003e\n            \u003cli\u003e\u003ca href=\"#予備校のノリで学ぶ大学の数学物理\"\u003e予備校のノリで学ぶ「大学の数学・物理」\u003c/a\u003e\u003c/li\u003e\n            \u003cli\u003e\u003ca href=\"#t-kihira-氏のテトリスを1時間強で作ってみた\"\u003et-kihira 氏の「テトリスを1時間強で作ってみた」\u003c/a\u003e\u003c/li\u003e\n        \u003c/ul\u003e\n    \u003c/li\u003e\n    \u003cli\u003e\u003ca href=\"#最後に\"\u003e最後に\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\n\u003ch2 id=\"はじめに\"\u003eはじめに\u003c/h2\u003e\n\n\u003cp\u003e私はプログラミングに関する動画を見るのがとても好きです。\u003c/p\u003e\n\n\u003cp\u003e集中できる時は手を動かしたり本を読んだりした方が学習効率は良いと思うのですが、動画はご飯食べながら、お酒を飲みながら見られるのがとても良いですね。\u003c/p\u003e\n\n\u003cp\u003eまた、新しい技術を触る時などは手を動かす・本を読む前に動画でさらっと概要を掴んでから始めると、立ち上がりがスムーズになる気がします。\u003c/p\u003e\n\n\u003ch2 id=\"好きな動画-10-選\"\u003e好きな動画 10 選\u003c/h2\u003e\n\n\u003ch3 id=\"George-Hotz-のライブコーディング\"\u003eGeorge Hotz のライブコーディング\u003c/h3\u003e\n\n\u003ciframe width=\"560\" height=\"315\" src=\"https://www.youtube.com/embed/7Hlb8YX2-W8\" frameborder=\"0\" allow=\"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture\" allowfullscreen\u003e\u003c/iframe\u003e\n\n\n\u003cul\u003e\n\u003cli\u003eComma.ai のハッカー \u003ca href=\"https://ja.wikipedia.org/wiki/%E3%82%B8%E3%83%A7%E3%83%BC%E3%82%B8%E3%83%BB%E3%83%9B%E3%83%83%E3%83%84\"\u003eGeorge Hotz\u003c/a\u003e のライブコーディング動画\u003c/li\u003e\n\u003cli\u003eVim でプラグインほぼ使わずに print デバッグしながら書き殴る、それでも並の人を凌駕するコーディングの速さ\u003c/li\u003e\n\u003cli\u003eハマりまくるけど全部力技でガンガン解決していくのが見ていて気持ちいい、そして公式ドキュメントより Stack Overflow ガンガン見るのが意外でした\u003c/li\u003e\n\u003cli\u003e動画が 10 時間もあってその間ずっとコーディングしてるのがすごすぎます…！\u003c/li\u003e\n\u003c/ul\u003e\n\n\n\u003ch3 id=\"低レイヤーガール\"\u003e低レイヤーガール\u003c/h3\u003e\n\n\u003cp\u003e\u003ciframe src=\"https://hatenablog-parts.com/embed?url=https%3A%2F%2Fwww.youtube.com%2Fchannel%2FUCMsstGhINXdpMqo9tsElCMQ\" title=\"低レイヤーガール - YouTube\" class=\"embed-card embed-webcard\" scrolling=\"no\" frameborder=\"0\" style=\"display: block; width: 100%; height: 155px; max-width: 500px; margin: 10px 0px;\"\u003e\u003c/iframe\u003e\u003ccite class=\"hatena-citation\"\u003e\u003ca href=\"https://www.youtube.com/channel/UCMsstGhINXdpMqo9tsElCMQ\"\u003ewww.youtube.com\u003c/a\u003e\u003c/cite\u003e\u003c/p\u003e\n\n\u003ciframe width=\"560\" height=\"315\" src=\"https://www.youtube.com/embed/ZATzfSF3O58\" frameborder=\"0\" allow=\"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture\" allowfullscreen\u003e\u003c/iframe\u003e\n\n\n\u003cul\u003e\n\u003cli\u003e\u003ca href=\"https://twitter.com/d0iasm\"\u003e@d0iasm\u003c/a\u003e 氏、\u003ca href=\"https://twitter.com/hikalium\"\u003e@hikalium\u003c/a\u003e 氏、\u003ca href=\"https://twitter.com/saho_bofffff\"\u003e@saho_bofffff\u003c/a\u003e 氏によるライブコーディング \u0026amp; 雑談動画\u003c/li\u003e\n\u003cli\u003eゆるふわな語り口でコーディングを進めていますが、内容はゴリゴリの低レイヤープログラミング\u003c/li\u003e\n\u003cli\u003e少しでも気を抜けば置いてかれてしまうのでいつも正座して見ています\u003c/li\u003e\n\u003c/ul\u003e\n\n\n\u003ch3 id=\"High-Engineer\"\u003eHigh Engineer\u003c/h3\u003e\n\n\u003cp\u003e\u003ciframe src=\"https://hatenablog-parts.com/embed?url=https%3A%2F%2Fwww.youtube.com%2Fchannel%2FUCEM9ImNGpMRsG3MDhctxVtQ\" title=\"High Engineer - YouTube\" class=\"embed-card embed-webcard\" scrolling=\"no\" frameborder=\"0\" style=\"display: block; width: 100%; height: 155px; max-width: 500px; margin: 10px 0px;\"\u003e\u003c/iframe\u003e\u003ccite class=\"hatena-citation\"\u003e\u003ca href=\"https://www.youtube.com/channel/UCEM9ImNGpMRsG3MDhctxVtQ\"\u003ewww.youtube.com\u003c/a\u003e\u003c/cite\u003e\u003c/p\u003e\n\n\u003ciframe width=\"560\" height=\"315\" src=\"https://www.youtube.com/embed/fN7ic3uydaU\" frameborder=\"0\" allow=\"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture\" allowfullscreen\u003e\u003c/iframe\u003e\n\n\n\u003cul\u003e\n\u003cli\u003e\u003ca href=\"https://twitter.com/dowanna6\"\u003e@dowanna6\u003c/a\u003e 氏による Web エンジニア経験 2 年目未満の方に向けた各技術の解説動画\u003c/li\u003e\n\u003cli\u003e「Cookie」や「CORS」など Web プログラミングを行う上で必須となる知識を解説しています\u003c/li\u003e\n\u003cli\u003e既知の内容もありますが、基本的な概念を他の人にわかりやすく伝えるにはどうすれば良いか？の参考にしたくて見ています\u003c/li\u003e\n\u003c/ul\u003e\n\n\n\u003ch3 id=\"mayah-氏の実践コーディング面接\"\u003emayah 氏の「実践！コーディング面接」\u003c/h3\u003e\n\n\u003ciframe width=\"560\" height=\"315\" src=\"https://www.youtube.com/embed/_zfzjnMCmKU\" frameborder=\"0\" allow=\"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture\" allowfullscreen\u003e\u003c/iframe\u003e\n\n\n\u003cul\u003e\n\u003cli\u003e\u003ca href=\"https://twitter.com/mayahjp\"\u003e@mayahjp\u003c/a\u003e 氏によるコーディング面接の実践動画\u003c/li\u003e\n\u003cli\u003emayah 氏のヒントの出し方と追加質問がとてもリアルで参考になります\u003c/li\u003e\n\u003cli\u003e今はまだ一つしか実践動画がアップされてないので、今後の更新をとても楽しみにしているチャンネルの一つです\u003c/li\u003e\n\u003c/ul\u003e\n\n\n\u003ch3 id=\"メルカリ社の開発ライブ実況\"\u003eメルカリ社の開発ライブ実況\u003c/h3\u003e\n\n\u003ciframe width=\"560\" height=\"315\" src=\"https://www.youtube.com/embed/cWvAhmfZJZg\" frameborder=\"0\" allow=\"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture\" allowfullscreen\u003e\u003c/iframe\u003e\n\n\n\u003cul\u003e\n\u003cli\u003eお題は「Go で Todo アプリ用の API を作ってみましょう」と、大変シンプル\u003c/li\u003e\n\u003cli\u003eカスタマイズしまくりの Vim で高速コーディングする人、Dockerfile から書き始める人、gqlgen 使って GraphQL API を作り始める人、Go Playground で書き始める人など様々で楽しいです\u003c/li\u003e\n\u003cli\u003e他の実況動画は \u003ca href=\"https://www.youtube.com/playlist?list=PL5y9uEm8_ypV4pQypp7IGN3b-mq2bf65Z\"\u003eこちら\u003c/a\u003e から見られます\u003c/li\u003e\n\u003c/ul\u003e\n\n\n\u003ch3 id=\"The-Coding-Train-のソートアルゴリズム解説\"\u003eThe Coding Train のソートアルゴリズム解説\u003c/h3\u003e\n\n\u003ciframe width=\"560\" height=\"315\" src=\"https://www.youtube.com/embed/67k3I2GxTH8\" frameborder=\"0\" allow=\"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture\" allowfullscreen\u003e\u003c/iframe\u003e\n\n\n\n\n\u003ciframe width=\"560\" height=\"315\" src=\"https://www.youtube.com/embed/eqo2LxRADhU\" frameborder=\"0\" allow=\"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture\" allowfullscreen\u003e\u003c/iframe\u003e\n\n\n\u003cul\u003e\n\u003cli\u003eテンション高めにソートアルゴリズムを解説してくれる動画（他にも色んな種類の解説動画があります）\u003c/li\u003e\n\u003cli\u003e上記の動画ではバブルソート、クイックソートのアルゴリズムを概要〜実際の実装に至るまで大変わかりやすく解説してくれています\u003c/li\u003e\n\u003cli\u003e丁寧に図を描いて説明してくれるので英語がわからなくても雰囲気で理解できると思います\u003c/li\u003e\n\u003c/ul\u003e\n\n\n\u003ch3 id=\"AWS-Black-Belt-Online-Seminar\"\u003eAWS Black Belt Online Seminar\u003c/h3\u003e\n\n\u003ciframe width=\"560\" height=\"315\" src=\"https://www.youtube.com/embed/mmRKzzOvJJY\" frameborder=\"0\" allow=\"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture\" allowfullscreen\u003e\u003c/iframe\u003e\n\n\n\u003cul\u003e\n\u003cli\u003eAWS のサービス別の説明動画（上記は CloudFront の例）\u003c/li\u003e\n\u003cli\u003eAWS はドキュメントも充実していますが、動画も併用するとさらに理解度が深まります\u003c/li\u003e\n\u003cli\u003eちなみにサービスと動画の一覧は \u003ca href=\"https://aws.amazon.com/jp/aws-jp-introduction/aws-jp-webinar-service-cut/\"\u003eAWS サービス別資料\u003c/a\u003e から探すと良いです\u003c/li\u003e\n\u003c/ul\u003e\n\n\n\u003ch3 id=\"Authlete-社による-OAuth--OIDC-入門\"\u003eAuthlete 社による OAuth \u0026amp; OIDC 入門\u003c/h3\u003e\n\n\u003ciframe width=\"560\" height=\"315\" src=\"https://www.youtube.com/embed/PKPj_MmLq5E\" frameborder=\"0\" allow=\"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture\" allowfullscreen\u003e\u003c/iframe\u003e\n\n\n\u003cul\u003e\n\u003cli\u003e今まで見た中で一番わかりやすい OAuth \u0026amp; OIDC（OpenID Connect）の解説動画です\u003c/li\u003e\n\u003cli\u003eOAuth を学ぶにはこの動画を見た後に \u003ca href=\"https://www.amazon.co.jp/dp/4798159298\"\u003eOAuth 徹底入門\u003c/a\u003e の 3 章を参考に OAuth クライアントを自分で実装してみるのが一番手っ取り早いと思っています\u003c/li\u003e\n\u003c/ul\u003e\n\n\n\u003ch3 id=\"予備校のノリで学ぶ大学の数学物理\"\u003e予備校のノリで学ぶ「大学の数学・物理」\u003c/h3\u003e\n\n\u003ciframe width=\"560\" height=\"315\" src=\"https://www.youtube.com/embed/4p1rwfXbCoY\" frameborder=\"0\" allow=\"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture\" allowfullscreen\u003e\u003c/iframe\u003e\n\n\n\u003cul\u003e\n\u003cli\u003e数学が苦手なのにプログラマをやっているのがずっとコンプレックスで、少しずつ学習を始めています\u003c/li\u003e\n\u003cli\u003e高校数学で挫折した自分にもこの動画はものすごく分かりやすくて感動しました…！\u003c/li\u003e\n\u003c/ul\u003e\n\n\n\u003ch3 id=\"t-kihira-氏のテトリスを1時間強で作ってみた\"\u003et-kihira 氏の「テトリスを1時間強で作ってみた」\u003c/h3\u003e\n\n\u003cscript type=\"application/javascript\" src=\"https://embed.nicovideo.jp/watch/sm8517855/script?w=640\u0026h=360\"\u003e\u003c/script\u003e\n\n\n\u003cp\u003e\u003cnoscript\u003e\u003ca href=\"https://www.nicovideo.jp/watch/sm8517855\"\u003e【プログラミング】テトリスを1時間強で作ってみた【実況解説】\u003c/a\u003e\u003c/noscript\u003e\u003c/p\u003e\n\n\u003cul\u003e\n\u003cli\u003e10 年前の動画ですがライブコーディング系の動画の中ではこれが一番好きです\u003c/li\u003e\n\u003cli\u003eWindows プログラミングも C++ も全然わからないんですが、そんなの関係ないぐらいテンションの上がる動画です。多分今まで 20 回ぐらい見ています\u003c/li\u003e\n\u003cli\u003eエディタのインストールから始めるところやペイントでテトリスのブロックを自作する辺り、最高にプログラマだなって感じがします\u003c/li\u003e\n\u003c/ul\u003e\n\n\n\u003ch2 id=\"最後に\"\u003e最後に\u003c/h2\u003e\n\n\u003cp\u003e途中から「これはプログラミング動画なのか？」というものも含まれていますが、お気に入りなので外せませんでした。ご容赦ください。\u003c/p\u003e\n\n\u003cp\u003e会社の技術ブログなのを忘れて好き勝手に書いてしまいましたが、この記事を読んでくださった方にとってお気に入りの動画が見つかれば幸いです。\u003c/p\u003e\n\n\u003cp\u003e最後までお読みいただきありがとうございました＾＾\u003c/p\u003e\n\n\u003chr /\u003e\n\n\u003cp\u003e次回は去年のアドベントカレンダーで \u003ca href=\"https://note.com/nekonishi_m/n/n91df51dce2e4\"\u003e新卒でベンチャーに行くのは「もったいない」のか\u003c/a\u003e という名文を書いてくれた \u003ca href=\"https://twitter.com/nekonishi_m\"\u003eねこにしさん\u003c/a\u003e の出番です。お楽しみに！\u003c/p\u003e\n","contentSnippet":"こんにちは。id:daido1976 です。この記事は Feedforce Advent Calendar 2020 の 12 日目の記事です！昨日は @sukechannnn の モブプロしてたらチームが大きく成長した話 でした。社内の技術勉強会でも発表してくれたのですが、みんなの関心が高い話題だったので発表後の議論が大変盛り上がっていました！ちなみにこの記事は YouTubeにあるライブコーディング動画を見て Rust を学ぼう という記事にインスパイアされて書いています。はじめに好きな動画 10 選George Hotz のライブコーディング低レイヤーガールHigh Engineermayah 氏の「実践！コーディング面接」メルカリ社の開発ライブ実況The Coding Train のソートアルゴリズム解説AWS Black Belt Online SeminarAuthlete 社による OAuth \u0026 OIDC 入門予備校のノリで学ぶ「大学の数学・物理」t-kihira 氏の「テトリスを1時間強で作ってみた」最後にはじめに私はプログラミングに関する動画を見るのがとても好きです。集中できる時は手を動かしたり本を読んだりした方が学習効率は良いと思うのですが、動画はご飯食べながら、お酒を飲みながら見られるのがとても良いですね。また、新しい技術を触る時などは手を動かす・本を読む前に動画でさらっと概要を掴んでから始めると、立ち上がりがスムーズになる気がします。好きな動画 10 選George Hotz のライブコーディングComma.ai のハッカー George Hotz のライブコーディング動画Vim でプラグインほぼ使わずに print デバッグしながら書き殴る、それでも並の人を凌駕するコーディングの速さハマりまくるけど全部力技でガンガン解決していくのが見ていて気持ちいい、そして公式ドキュメントより Stack Overflow ガンガン見るのが意外でした動画が 10 時間もあってその間ずっとコーディングしてるのがすごすぎます…！低レイヤーガールwww.youtube.com@d0iasm 氏、@hikalium 氏、@saho_bofffff 氏によるライブコーディング \u0026 雑談動画ゆるふわな語り口でコーディングを進めていますが、内容はゴリゴリの低レイヤープログラミング少しでも気を抜けば置いてかれてしまうのでいつも正座して見ていますHigh Engineerwww.youtube.com@dowanna6 氏による Web エンジニア経験 2 年目未満の方に向けた各技術の解説動画「Cookie」や「CORS」など Web プログラミングを行う上で必須となる知識を解説しています既知の内容もありますが、基本的な概念を他の人にわかりやすく伝えるにはどうすれば良いか？の参考にしたくて見ていますmayah 氏の「実践！コーディング面接」@mayahjp 氏によるコーディング面接の実践動画mayah 氏のヒントの出し方と追加質問がとてもリアルで参考になります今はまだ一つしか実践動画がアップされてないので、今後の更新をとても楽しみにしているチャンネルの一つですメルカリ社の開発ライブ実況お題は「Go で Todo アプリ用の API を作ってみましょう」と、大変シンプルカスタマイズしまくりの Vim で高速コーディングする人、Dockerfile から書き始める人、gqlgen 使って GraphQL API を作り始める人、Go Playground で書き始める人など様々で楽しいです他の実況動画は こちら から見られますThe Coding Train のソートアルゴリズム解説テンション高めにソートアルゴリズムを解説してくれる動画（他にも色んな種類の解説動画があります）上記の動画ではバブルソート、クイックソートのアルゴリズムを概要〜実際の実装に至るまで大変わかりやすく解説してくれています丁寧に図を描いて説明してくれるので英語がわからなくても雰囲気で理解できると思いますAWS Black Belt Online SeminarAWS のサービス別の説明動画（上記は CloudFront の例）AWS はドキュメントも充実していますが、動画も併用するとさらに理解度が深まりますちなみにサービスと動画の一覧は AWS サービス別資料 から探すと良いですAuthlete 社による OAuth \u0026 OIDC 入門今まで見た中で一番わかりやすい OAuth \u0026 OIDC（OpenID Connect）の解説動画ですOAuth を学ぶにはこの動画を見た後に OAuth 徹底入門 の 3 章を参考に OAuth クライアントを自分で実装してみるのが一番手っ取り早いと思っています予備校のノリで学ぶ「大学の数学・物理」数学が苦手なのにプログラマをやっているのがずっとコンプレックスで、少しずつ学習を始めています高校数学で挫折した自分にもこの動画はものすごく分かりやすくて感動しました…！t-kihira 氏の「テトリスを1時間強で作ってみた」【プログラミング】テトリスを1時間強で作ってみた【実況解説】10 年前の動画ですがライブコーディング系の動画の中ではこれが一番好きですWindows プログラミングも C++ も全然わからないんですが、そんなの関係ないぐらいテンションの上がる動画です。多分今まで 20 回ぐらい見ていますエディタのインストールから始めるところやペイントでテトリスのブロックを自作する辺り、最高にプログラマだなって感じがします最後に途中から「これはプログラミング動画なのか？」というものも含まれていますが、お気に入りなので外せませんでした。ご容赦ください。会社の技術ブログなのを忘れて好き勝手に書いてしまいましたが、この記事を読んでくださった方にとってお気に入りの動画が見つかれば幸いです。最後までお読みいただきありがとうございました＾＾次回は去年のアドベントカレンダーで 新卒でベンチャーに行くのは「もったいない」のか という名文を書いてくれた ねこにしさん の出番です。お楽しみに！","link":"https://developer.feedforce.jp/entry/2020/12/13/003657","isoDate":"2020-12-12T15:36:57.000Z","dateMiliSeconds":1607787417000,"imageUrl":"https://cdn.user.blog.st-hatena.com/default_entry_og_image/4268819/1588226000876991","authorName":"daido1976"},{"title":"Next.js の Static HTML Export で生成したファイルを Lambda@Edge を使わずに CloudFront + S3 にデプロイする","content":"\u003cp\u003eこんにちは、\u003ca href=\"http://blog.hatena.ne.jp/daido1976/\" class=\"hatena-id-icon\"\u003e\u003cimg src=\"https://cdn.profile-image.st-hatena.com/users/daido1976/profile.png\" width=\"16\" height=\"16\" alt=\"\" class=\"hatena-id-icon\"\u003eid:daido1976\u003c/a\u003e です。\u003c/p\u003e\n\n\u003cp\u003e今回は Next.js の Static HTML Export で生成したファイルを Lambda@Edge を使わずに CloudFront + S3 にデプロイする方法を紹介します。\u003c/p\u003e\n\n\u003cul class=\"table-of-contents\"\u003e\n    \u003cli\u003e\u003ca href=\"#前提\"\u003e前提\u003c/a\u003e\u003cul\u003e\n            \u003cli\u003e\u003ca href=\"#Nextjs\"\u003eNext.js\u003c/a\u003e\u003c/li\u003e\n            \u003cli\u003e\u003ca href=\"#CloudFront--S3\"\u003eCloudFront + S3\u003c/a\u003e\u003c/li\u003e\n        \u003c/ul\u003e\n    \u003c/li\u003e\n    \u003cli\u003e\u003ca href=\"#やり方\"\u003eやり方\u003c/a\u003e\u003cul\u003e\n            \u003cli\u003e\u003ca href=\"#1-S3-側での静的ウェブサイトホスティングの設定\"\u003e1. S3 側での静的ウェブサイトホスティングの設定\u003c/a\u003e\u003c/li\u003e\n            \u003cli\u003e\u003ca href=\"#2-CloudFront-の-Origin-Domain-Name-の設定\"\u003e2. CloudFront の Origin Domain Name の設定\u003c/a\u003e\u003c/li\u003e\n            \u003cli\u003e\u003ca href=\"#3-Referer-を使って-CloudFront-から-S3-への直接アクセスを禁止する\"\u003e3. Referer を使って CloudFront から S3 への直接アクセスを禁止する\u003c/a\u003e\u003c/li\u003e\n            \u003cli\u003e\u003ca href=\"#4-Nextjs-側で各ページのファイル名を-indexhtml-にする設定\"\u003e4. Next.js 側で各ページのファイル名を index.html にする設定\u003c/a\u003e\u003c/li\u003e\n        \u003c/ul\u003e\n    \u003c/li\u003e\n    \u003cli\u003e\u003ca href=\"#参考\"\u003e参考\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\n\u003ch2 id=\"前提\"\u003e前提\u003c/h2\u003e\n\n\u003ch3 id=\"Nextjs\"\u003eNext.js\u003c/h3\u003e\n\n\u003cp\u003eNext.js のアプリで SSR を行う場合は Vercel やその他の Node.js 実行環境のあるサーバにデプロイする必要がありますが、そうでない場合は \u003ca href=\"https://nextjs.org/docs/advanced-features/static-html-export\"\u003eStatic HTML Export\u003c/a\u003e 機能を使って静的ページを出力し、任意の Web サーバにデプロイすることもできます。\u003c/p\u003e\n\n\u003cp\u003eStatic HTML Export 機能では通常 \u003ccode\u003epage/about.tsx\u003c/code\u003e というファイルから \u003ccode\u003e/about.html\u003c/code\u003e が生成されますが、これをそのまま S3 にアップロードして CloudFront 経由で \u003ccode\u003e/about\u003c/code\u003e にアクセスしても上手く動きません。\u003c/p\u003e\n\n\u003cp\u003eNext.js 側で生成されるファイルを \u003ccode\u003e/about.html\u003c/code\u003e から \u003ccode\u003e/about/index.html\u003c/code\u003e に変える \u003ca href=\"https://nextjs.org/docs/api-reference/next.config.js/exportPathMap#adding-a-trailing-slash\"\u003etrailingSlash: true\u003c/a\u003e という設定があるのでこれで一件落着と思いきや、CloudFront + S3 側でも課題がありました…。\u003c/p\u003e\n\n\u003ch3 id=\"CloudFront--S3\"\u003eCloudFront + S3\u003c/h3\u003e\n\n\u003cp\u003eNext.js の Static HTML Export 機能（\u0026amp; \u003ccode\u003etrailingSlash: true\u003c/code\u003e）でビルドされた \u003ccode\u003e/index.html\u003c/code\u003e と \u003ccode\u003e/about/index.html\u003c/code\u003e のように、ルートとサブディレクトリにインデックスドキュメントを含むファイル群をデプロイする際には以下の方法が考えられますが、それぞれに問題があります。\u003c/p\u003e\n\n\u003col\u003e\n\u003cli\u003eCloudFront の \u003ca href=\"https://docs.aws.amazon.com/ja_jp/AmazonCloudFront/latest/DeveloperGuide/DefaultRootObject.html\"\u003eDefault Root Object\u003c/a\u003e と \u003ca href=\"https://docs.aws.amazon.com/ja_jp/AmazonCloudFront/latest/DeveloperGuide/private-content-restricting-access-to-s3.html\"\u003eオリジンアクセスアイデンティティ\u003c/a\u003e を使う\n\n\u003cul\u003e\n\u003cli\u003eルートの index.html は表示できるがサブディレクトリの index.html が表示できない\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003eS3 の \u003ca href=\"https://docs.aws.amazon.com/ja_jp/AmazonS3/latest/dev/WebsiteHosting.html\"\u003e静的ウェブサイトホスティング\u003c/a\u003e 機能を有効にし、\u003ca href=\"https://docs.aws.amazon.com/ja_jp/AmazonS3/latest/dev/IndexDocumentSupport.html\"\u003eインデックスドキュメント\u003c/a\u003e を設定する\n\n\u003cul\u003e\n\u003cli\u003eルート、サブディレクトリともに index.html 表示できるが、S3への直接アクセスが禁止できない\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003c/ol\u003e\n\n\n\u003cp\u003e👆 の解決策として、以下の記事のように Lambda@Edge などを使って「末尾が \"/\" で終わっているアクセスのパスに index.html を付与する」というものが多いです。\u003c/p\u003e\n\n\u003cp\u003e\u003ciframe src=\"https://hatenablog-parts.com/embed?url=https%3A%2F%2Fdev.classmethod.jp%2Farticles%2Fdirectory-indexes-in-s3-origin-backed-cloudfront%2F\" title=\"できた！S3 オリジンへの直接アクセス制限と、インデックスドキュメント機能を共存させる方法 | Developers.IO\" class=\"embed-card embed-webcard\" scrolling=\"no\" frameborder=\"0\" style=\"display: block; width: 100%; height: 155px; max-width: 500px; margin: 10px 0px;\"\u003e\u003c/iframe\u003e\u003ccite class=\"hatena-citation\"\u003e\u003ca href=\"https://dev.classmethod.jp/articles/directory-indexes-in-s3-origin-backed-cloudfront/\"\u003edev.classmethod.jp\u003c/a\u003e\u003c/cite\u003e\u003c/p\u003e\n\n\u003cp\u003eが、管理するリソースはできるだけ増やしたくないのと、CloudFront の \u003ca href=\"https://docs.aws.amazon.com/ja_jp/AmazonCloudFront/latest/DeveloperGuide/RequestAndResponseBehaviorCustomOrigin.html\"\u003eBehavior\u003c/a\u003e を使ってマルチオリジン構成にしている時にはパス書き換えのロジックが複雑になってしまうので、できれば Lambda@Edge を使わず CloudFront + S3 だけでやる方法を見つけたいと考えていました。\u003c/p\u003e\n\n\u003cp\u003e結論としては、\u003ccode\u003e2. S3 の 静的ウェブサイトホスティング 機能を有効にし、インデックスドキュメント を設定する\u003c/code\u003e の方法を使いながら S3 への直接アクセスを禁止することができたので、その方法をご紹介します。\u003c/p\u003e\n\n\u003ch2 id=\"やり方\"\u003eやり方\u003c/h2\u003e\n\n\u003cp\u003e以下の AWS ナレッジセンターの記事を参考にしました。\u003c/p\u003e\n\n\u003cp\u003e\u003ca href=\"https://aws.amazon.com/jp/premiumsupport/knowledge-center/cloudfront-serve-static-website/#Using_a_website_endpoint_as_the_origin.2C_with_access_restricted_by_a_Referer_header\"\u003eCloudFront を使用して、Amazon S3 でホストされた静的ウェブサイトを公開するにはどうすればよいですか?#アクセスが Referer ヘッダーで制限されたオリジンとして、ウェブサイトのエンドポイントを使用する\u003c/a\u003e\u003c/p\u003e\n\n\u003cp\u003eざっくりしたアーキテクチャ図は以下になります。\u003c/p\u003e\n\n\u003cp\u003e\u003cspan itemscope itemtype=\"http://schema.org/Photograph\"\u003e\u003cimg src=\"https://cdn-ak.f.st-hatena.com/images/fotolife/d/daido1976/20201021/20201021094707.png\" alt=\"f:id:daido1976:20201021094707p:plain\" title=\"f:id:daido1976:20201021094707p:plain\" class=\"hatena-fotolife\" itemprop=\"image\"\u003e\u003c/span\u003e\u003c/p\u003e\n\n\u003ch3 id=\"1-S3-側での静的ウェブサイトホスティングの設定\"\u003e1. S3 側での静的ウェブサイトホスティングの設定\u003c/h3\u003e\n\n\u003cp\u003eS3 の静的ウェブサイトを有効にして、インデックスドキュメントを index.html にします。\u003c/p\u003e\n\n\u003cp\u003e以下のエンドポイントは後ほど CloudFront の Origin Domain Name に設定する必要があるので控えておきましょう。\u003c/p\u003e\n\n\u003cp\u003e\u003cspan itemscope itemtype=\"http://schema.org/Photograph\"\u003e\u003cimg src=\"https://cdn-ak.f.st-hatena.com/images/fotolife/d/daido1976/20201020/20201020084312.png\" alt=\"f:id:daido1976:20201020084312p:plain\" title=\"f:id:daido1976:20201020084312p:plain\" class=\"hatena-fotolife\" itemprop=\"image\"\u003e\u003c/span\u003e\u003c/p\u003e\n\n\u003ch3 id=\"2-CloudFront-の-Origin-Domain-Name-の設定\"\u003e2. CloudFront の Origin Domain Name の設定\u003c/h3\u003e\n\n\u003cp\u003eCloudFront の \u003ccode\u003eOrigins and Origin Groups\u003c/code\u003e タブから Origin の Edit を押下し、\u003c/p\u003e\n\n\u003cp\u003e\u003cspan itemscope itemtype=\"http://schema.org/Photograph\"\u003e\u003cimg src=\"https://cdn-ak.f.st-hatena.com/images/fotolife/d/daido1976/20201020/20201020084835.png\" alt=\"f:id:daido1976:20201020084835p:plain\" title=\"f:id:daido1976:20201020084835p:plain\" class=\"hatena-fotolife\" itemprop=\"image\"\u003e\u003c/span\u003e\u003c/p\u003e\n\n\u003cp\u003eOrigin Domain Name を S3 の Origin ではなく、\u003ccode\u003e1\u003c/code\u003e で取得した S3 の静的ウェブサイトのエンドポイント（ドメインの指定なので \u003ccode\u003ehttp://\u003c/code\u003e は不要）にします。\u003ca href=\"#f-9be4dc96\" name=\"fn-9be4dc96\" title=\"S3 の Origin は {bucket}.s3.amazonaws.com のような形式で、S3 の静的ウェブサイトのエンドポイントは {bucket}.s3-website-{region}.amazonaws.com のような形式です。間違えやすいので注意。\"\u003e*1\u003c/a\u003e\u003c/p\u003e\n\n\u003cp\u003e\u003cspan itemscope itemtype=\"http://schema.org/Photograph\"\u003e\u003cimg src=\"https://cdn-ak.f.st-hatena.com/images/fotolife/d/daido1976/20201020/20201020085837.png\" alt=\"f:id:daido1976:20201020085837p:plain\" title=\"f:id:daido1976:20201020085837p:plain\" class=\"hatena-fotolife\" itemprop=\"image\"\u003e\u003c/span\u003e\u003c/p\u003e\n\n\u003cp\u003eここまでは通常の静的ウェブサイトホスティングの設定と同じです。\u003c/p\u003e\n\n\u003ch3 id=\"3-Referer-を使って-CloudFront-から-S3-への直接アクセスを禁止する\"\u003e3. Referer を使って CloudFront から S3 への直接アクセスを禁止する\u003c/h3\u003e\n\n\u003cblockquote\u003e\u003cp\u003e[ヘッダー名] の [Origin カスタムヘッダー] に、[Referer] と入力します。[値] には、オリジンに転送するカスタムヘッダーを入力します (S3 バケット)。オリジンへのアクセスを制限するために、ランダムな値または他の人は知らない秘密の値を入力することができます。\u003c/p\u003e\u003c/blockquote\u003e\n\n\u003cp\u003eドキュメントに従ってそのまま Origin の編集画面でカスタムヘッダを設定します。\u003c/p\u003e\n\n\u003cp\u003e「ランダムな値または他の人は知らない秘密の値を入力することができます」とある通り、この Referer の値は URL ではなく適当な値でも構いません。\u003c/p\u003e\n\n\u003cp\u003e\u003cspan itemscope itemtype=\"http://schema.org/Photograph\"\u003e\u003cimg src=\"https://cdn-ak.f.st-hatena.com/images/fotolife/d/daido1976/20201020/20201020090510.png\" alt=\"f:id:daido1976:20201020090510p:plain\" title=\"f:id:daido1976:20201020090510p:plain\" class=\"hatena-fotolife\" itemprop=\"image\"\u003e\u003c/span\u003e\u003c/p\u003e\n\n\u003cp\u003e加えて、S3 コンソールから上記のカスタム Referer ヘッダーがリクエストに含まれることを条件として、\u003ccode\u003es3:GetObject\u003c/code\u003e を許可するバケットポリシーを追加します。\u003c/p\u003e\n\n\u003cp\u003e\u003ca href=\"https://docs.aws.amazon.com/ja_jp/AmazonS3/latest/dev/example-bucket-policies.html#example-bucket-policies-use-case-4\"\u003eバケットポリシーの例#特定の HTTP Referer へのアクセスの制限 - Amazon Simple Storage Service\u003c/a\u003e\u003c/p\u003e\n\n\u003cp\u003e\u003cspan itemscope itemtype=\"http://schema.org/Photograph\"\u003e\u003cimg src=\"https://cdn-ak.f.st-hatena.com/images/fotolife/d/daido1976/20201016/20201016135940.png\" alt=\"f:id:daido1976:20201016135940p:plain\" title=\"f:id:daido1976:20201016135940p:plain\" class=\"hatena-fotolife\" itemprop=\"image\"\u003e\u003c/span\u003e\u003c/p\u003e\n\n\u003cp\u003eこれで Referer ヘッダーに指定の値が含まれていないアクセスを禁止することができます。\u003ca href=\"#f-c001d0bd\" name=\"fn-c001d0bd\" title=\"実際は curl などでこの Referer の値をヘッダにセットすると CloudFront 経由でなくともアクセスできるのですが、今回は一般ユーザからの URL 直打ちによるアクセスが禁止できれば良いので、この方法で問題ないと判断しました。\"\u003e*2\u003c/a\u003e\u003c/p\u003e\n\n\u003ch3 id=\"4-Nextjs-側で各ページのファイル名を-indexhtml-にする設定\"\u003e4. Next.js 側で各ページのファイル名を index.html にする設定\u003c/h3\u003e\n\n\u003cp\u003e最後に Next.js の設定で \u003ccode\u003etrailingSlash: true\u003c/code\u003e を指定して、各ページのファイル名を index.html にします。\u003c/p\u003e\n\n\u003cp\u003e\u003ca href=\"https://nextjs.org/docs/api-reference/next.config.js/exportPathMap#adding-a-trailing-slash\"\u003ehttps://nextjs.org/docs/api-reference/next.config.js/exportPathMap#adding-a-trailing-slash\u003c/a\u003e\u003c/p\u003e\n\n\u003ch2 id=\"参考\"\u003e参考\u003c/h2\u003e\n\n\u003cul\u003e\n\u003cli\u003e\u003ca href=\"https://aws.amazon.com/jp/premiumsupport/knowledge-center/cloudfront-serve-static-website/#Using_a_website_endpoint_as_the_origin.2C_with_access_restricted_by_a_Referer_header\"\u003eCloudFront を使用して、Amazon S3 でホストされた静的ウェブサイトを公開するにはどうすればよいですか?#アクセスが Referer ヘッダーで制限されたオリジンとして、ウェブサイトのエンドポイントを使用する\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"https://docs.aws.amazon.com/ja_jp/AmazonS3/latest/dev/example-bucket-policies.html#example-bucket-policies-use-case-4\"\u003eバケットポリシーの例#特定の HTTP Referer へのアクセスの制限 - Amazon Simple Storage Service\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"https://docs.aws.amazon.com/ja_jp/AmazonCloudFront/latest/DeveloperGuide/add-origin-custom-headers.html\"\u003e\u0026#x30AA;\u0026#x30EA;\u0026#x30B8;\u0026#x30F3;\u0026#x30EA;\u0026#x30AF;\u0026#x30A8;\u0026#x30B9;\u0026#x30C8;\u0026#x3078;\u0026#x306E;\u0026#x30AB;\u0026#x30B9;\u0026#x30BF;\u0026#x30E0;\u0026#x30D8;\u0026#x30C3;\u0026#x30C0;\u0026#x30FC;\u0026#x306E;\u0026#x8FFD;\u0026#x52A0; - Amazon CloudFront\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\n\u003cdiv class=\"footnote\"\u003e\n\u003cp class=\"footnote\"\u003e\u003ca href=\"#fn-9be4dc96\" name=\"f-9be4dc96\" class=\"footnote-number\"\u003e*1\u003c/a\u003e\u003cspan class=\"footnote-delimiter\"\u003e:\u003c/span\u003e\u003cspan class=\"footnote-text\"\u003eS3 の Origin は {bucket}.s3.amazonaws.com のような形式で、S3 の静的ウェブサイトのエンドポイントは {bucket}.s3-website-{region}.amazonaws.com のような形式です。間違えやすいので注意。\u003c/span\u003e\u003c/p\u003e\n\u003cp class=\"footnote\"\u003e\u003ca href=\"#fn-c001d0bd\" name=\"f-c001d0bd\" class=\"footnote-number\"\u003e*2\u003c/a\u003e\u003cspan class=\"footnote-delimiter\"\u003e:\u003c/span\u003e\u003cspan class=\"footnote-text\"\u003e実際は curl などでこの Referer の値をヘッダにセットすると CloudFront 経由でなくともアクセスできるのですが、今回は一般ユーザからの URL 直打ちによるアクセスが禁止できれば良いので、この方法で問題ないと判断しました。\u003c/span\u003e\u003c/p\u003e\n\u003c/div\u003e","contentSnippet":"こんにちは、id:daido1976 です。今回は Next.js の Static HTML Export で生成したファイルを Lambda@Edge を使わずに CloudFront + S3 にデプロイする方法を紹介します。前提Next.jsCloudFront + S3やり方1. S3 側での静的ウェブサイトホスティングの設定2. CloudFront の Origin Domain Name の設定3. Referer を使って CloudFront から S3 への直接アクセスを禁止する4. Next.js 側で各ページのファイル名を index.html にする設定参考前提Next.jsNext.js のアプリで SSR を行う場合は Vercel やその他の Node.js 実行環境のあるサーバにデプロイする必要がありますが、そうでない場合は Static HTML Export 機能を使って静的ページを出力し、任意の Web サーバにデプロイすることもできます。Static HTML Export 機能では通常 page/about.tsx というファイルから /about.html が生成されますが、これをそのまま S3 にアップロードして CloudFront 経由で /about にアクセスしても上手く動きません。Next.js 側で生成されるファイルを /about.html から /about/index.html に変える trailingSlash: true という設定があるのでこれで一件落着と思いきや、CloudFront + S3 側でも課題がありました…。CloudFront + S3Next.js の Static HTML Export 機能（\u0026 trailingSlash: true）でビルドされた /index.html と /about/index.html のように、ルートとサブディレクトリにインデックスドキュメントを含むファイル群をデプロイする際には以下の方法が考えられますが、それぞれに問題があります。CloudFront の Default Root Object と オリジンアクセスアイデンティティ を使うルートの index.html は表示できるがサブディレクトリの index.html が表示できないS3 の 静的ウェブサイトホスティング 機能を有効にし、インデックスドキュメント を設定するルート、サブディレクトリともに index.html 表示できるが、S3への直接アクセスが禁止できない👆 の解決策として、以下の記事のように Lambda@Edge などを使って「末尾が \"/\" で終わっているアクセスのパスに index.html を付与する」というものが多いです。dev.classmethod.jpが、管理するリソースはできるだけ増やしたくないのと、CloudFront の Behavior を使ってマルチオリジン構成にしている時にはパス書き換えのロジックが複雑になってしまうので、できれば Lambda@Edge を使わず CloudFront + S3 だけでやる方法を見つけたいと考えていました。結論としては、2. S3 の 静的ウェブサイトホスティング 機能を有効にし、インデックスドキュメント を設定する の方法を使いながら S3 への直接アクセスを禁止することができたので、その方法をご紹介します。やり方以下の AWS ナレッジセンターの記事を参考にしました。CloudFront を使用して、Amazon S3 でホストされた静的ウェブサイトを公開するにはどうすればよいですか?#アクセスが Referer ヘッダーで制限されたオリジンとして、ウェブサイトのエンドポイントを使用するざっくりしたアーキテクチャ図は以下になります。1. S3 側での静的ウェブサイトホスティングの設定S3 の静的ウェブサイトを有効にして、インデックスドキュメントを index.html にします。以下のエンドポイントは後ほど CloudFront の Origin Domain Name に設定する必要があるので控えておきましょう。2. CloudFront の Origin Domain Name の設定CloudFront の Origins and Origin Groups タブから Origin の Edit を押下し、Origin Domain Name を S3 の Origin ではなく、1 で取得した S3 の静的ウェブサイトのエンドポイント（ドメインの指定なので http:// は不要）にします。*1ここまでは通常の静的ウェブサイトホスティングの設定と同じです。3. Referer を使って CloudFront から S3 への直接アクセスを禁止する[ヘッダー名] の [Origin カスタムヘッダー] に、[Referer] と入力します。[値] には、オリジンに転送するカスタムヘッダーを入力します (S3 バケット)。オリジンへのアクセスを制限するために、ランダムな値または他の人は知らない秘密の値を入力することができます。ドキュメントに従ってそのまま Origin の編集画面でカスタムヘッダを設定します。「ランダムな値または他の人は知らない秘密の値を入力することができます」とある通り、この Referer の値は URL ではなく適当な値でも構いません。加えて、S3 コンソールから上記のカスタム Referer ヘッダーがリクエストに含まれることを条件として、s3:GetObject を許可するバケットポリシーを追加します。バケットポリシーの例#特定の HTTP Referer へのアクセスの制限 - Amazon Simple Storage Serviceこれで Referer ヘッダーに指定の値が含まれていないアクセスを禁止することができます。*24. Next.js 側で各ページのファイル名を index.html にする設定最後に Next.js の設定で trailingSlash: true を指定して、各ページのファイル名を index.html にします。https://nextjs.org/docs/api-reference/next.config.js/exportPathMap#adding-a-trailing-slash参考CloudFront を使用して、Amazon S3 でホストされた静的ウェブサイトを公開するにはどうすればよいですか?#アクセスが Referer ヘッダーで制限されたオリジンとして、ウェブサイトのエンドポイントを使用するバケットポリシーの例#特定の HTTP Referer へのアクセスの制限 - Amazon Simple Storage Serviceオリジンリクエストへのカスタムヘッダーの追加 - Amazon CloudFront*1:S3 の Origin は {bucket}.s3.amazonaws.com のような形式で、S3 の静的ウェブサイトのエンドポイントは {bucket}.s3-website-{region}.amazonaws.com のような形式です。間違えやすいので注意。*2:実際は curl などでこの Referer の値をヘッダにセットすると CloudFront 経由でなくともアクセスできるのですが、今回は一般ユーザからの URL 直打ちによるアクセスが禁止できれば良いので、この方法で問題ないと判断しました。","link":"https://developer.feedforce.jp/entry/2020/10/21/111537","isoDate":"2020-10-21T02:15:37.000Z","dateMiliSeconds":1603246537000,"imageUrl":"https://cdn-ak.f.st-hatena.com/images/fotolife/d/daido1976/20201021/20201021094707.png","authorName":"daido1976"},{"title":"ソーシャルPLUS を Rails 5.0 にアップグレードしました","content":"\u003cp\u003e\u003cb\u003e[2021/08 追記]\u003c/b\u003e\u003c/p\u003e\n\n\u003cp\u003e現在は Rails 5.2 にアップグレード済みです。\u003c/p\u003e\n\n\u003chr /\u003e\n\n\u003cp\u003eこんにちは。今年の 4 月に EC Booster チームからソーシャルPLUS チームに異動してきた \u003ca href=\"http://blog.hatena.ne.jp/daido1976/\" class=\"hatena-id-icon\"\u003e\u003cimg src=\"https://cdn.profile-image.st-hatena.com/users/daido1976/profile.png\" width=\"16\" height=\"16\" alt=\"\" class=\"hatena-id-icon\"\u003eid:daido1976\u003c/a\u003e です。\u003c/p\u003e\n\n\u003cp\u003e今回はソーシャルPLUS の核となるソーシャルログインサービスの Rails アプリを 4.2 から 5.0 にアップグレードした話を書きます。\u003c/p\u003e\n\n\u003cp\u003eソーシャルPLUS のサービスや技術スタックについては以下の記事が詳しいのでご参照ください。\u003c/p\u003e\n\n\u003cp\u003e\u003ciframe src=\"https://hatenablog-parts.com/embed?url=https%3A%2F%2Fdeveloper.feedforce.jp%2Fentry%2F2019%2F11%2F25%2F120000\" title=\"ソーシャルPLUS の技術スタックを整理してみた - Feedforce Developer Blog\" class=\"embed-card embed-blogcard\" scrolling=\"no\" frameborder=\"0\" style=\"display: block; width: 100%; height: 190px; max-width: 500px; margin: 10px 0px;\"\u003e\u003c/iframe\u003e\u003ccite class=\"hatena-citation\"\u003e\u003ca href=\"https://developer.feedforce.jp/entry/2019/11/25/120000\"\u003edeveloper.feedforce.jp\u003c/a\u003e\u003c/cite\u003e\u003c/p\u003e\n\n\u003cul class=\"table-of-contents\"\u003e\n    \u003cli\u003e\u003ca href=\"#はじめに\"\u003eはじめに\u003c/a\u003e\u003c/li\u003e\n    \u003cli\u003e\u003ca href=\"#どんな状態の-Rails-アプリか\"\u003eどんな状態の Rails アプリか\u003c/a\u003e\u003c/li\u003e\n    \u003cli\u003e\u003ca href=\"#どれぐらいの期間かかったか\"\u003eどれぐらいの期間かかったか\u003c/a\u003e\u003c/li\u003e\n    \u003cli\u003e\u003ca href=\"#レビューの仕方\"\u003eレビューの仕方\u003c/a\u003e\u003c/li\u003e\n    \u003cli\u003e\u003ca href=\"#アップグレード時の-Tips\"\u003eアップグレード時の Tips\u003c/a\u003e\u003cul\u003e\n            \u003cli\u003e\u003ca href=\"#便利な-gem-たち\"\u003e便利な gem たち\u003c/a\u003e\u003cul\u003e\n                    \u003cli\u003e\u003ca href=\"#Strong-Parameters-対応に使える-be_strong-gem\"\u003eStrong Parameters 対応に使える be_strong gem\u003c/a\u003e\u003c/li\u003e\n                    \u003cli\u003e\u003ca href=\"#DEPRECATION-WARNING-のテストを変換する-rails5-spec-converter-gem\"\u003eDEPRECATION WARNING のテストを変換する rails5-spec-converter gem\u003c/a\u003e\u003c/li\u003e\n                \u003c/ul\u003e\n            \u003c/li\u003e\n            \u003cli\u003e\u003ca href=\"#カナリアリリース時のセッションデータ取得の不具合\"\u003eカナリアリリース時のセッションデータ取得の不具合\u003c/a\u003e\u003c/li\u003e\n        \u003c/ul\u003e\n    \u003c/li\u003e\n    \u003cli\u003e\u003ca href=\"#最後に\"\u003e最後に\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\n\u003ch2 id=\"はじめに\"\u003eはじめに\u003c/h2\u003e\n\n\u003cp\u003eRails 5.0 がリリースされたのは 2016 年、ということでアップグレードガイド的な記事はすでに素晴らしいものがたくさんあり、「rails 5 アップグレード」というキーワードやエラーメッセージをコピペして検索すれば大体の事象が解決できるはずです。\u003c/p\u003e\n\n\u003cp\u003eなので、今回はどんな状態の Rails アプリをどれぐらいの期間かけてどのように進めたかに焦点を当てて書いていきたいと思います。（あとは Tips も少々）\u003c/p\u003e\n\n\u003ch2 id=\"どんな状態の-Rails-アプリか\"\u003eどんな状態の Rails アプリか\u003c/h2\u003e\n\n\u003cp\u003e\u003cb\u003eアップグレード前の環境: Ruby 2.5.7, Rails 4.2.11.3 \u003c/b\u003e\u003c/p\u003e\n\n\u003cp\u003e2012 年に Rails 3 系からスタートし、2015 年の Rails 4 系へのアップグレードを経て、5 年ぶりにメジャーバージョンのアップグレードを行う Rails アプリです。\u003c/p\u003e\n\n\u003cp\u003e\u003ccode\u003erails stats\u003c/code\u003e コマンドの実行結果は以下の通りで、simplecov によるテストカバレッジは 92 % です。\u003c/p\u003e\n\n\u003cp\u003e\u003cspan itemscope itemtype=\"http://schema.org/Photograph\"\u003e\u003cimg src=\"https://cdn-ak.f.st-hatena.com/images/fotolife/d/daido1976/20200907/20200907175904.png\" alt=\"f:id:daido1976:20200907175904p:plain\" width=\"557\" height=\"600\" loading=\"lazy\" title=\"\" class=\"hatena-fotolife\" itemprop=\"image\"\u003e\u003c/span\u003e\u003c/p\u003e\n\n\u003cp\u003e技術的負債はそれなりに溜まっているものの、テストカバレッジが高いのが幸いでした。\u003c/p\u003e\n\n\u003ch2 id=\"どれぐらいの期間かかったか\"\u003eどれぐらいの期間かかったか\u003c/h2\u003e\n\n\u003cp\u003e約 1.5 ヶ月かかりました。\u003c/p\u003e\n\n\u003cp\u003e担当者の私が、今回アップグレードした Rails アプリをほぼ初めて触る状態ということもあり、コードリーディングや動作確認に手間取り、時間がかかりました。\u003c/p\u003e\n\n\u003cp\u003eまた、このアプリの技術的負債の一つとして gem をやたらとバージョン固定していたこともあり、Rails のアップグレードを行う前準備として固定された gem をアップデートする必要もありました。\u003c/p\u003e\n\n\u003ch2 id=\"レビューの仕方\"\u003eレビューの仕方\u003c/h2\u003e\n\n\u003cp\u003eコードレビューは Zoom を用いて同期的に行い、私がレビュアーに変更点を説明、動作確認項目を箇条書きにし、抜け漏れがないかチェックしてもらいました。\u003c/p\u003e\n\n\u003cp\u003eまた他の方がみて、変更の意図がわかりやすいように Commit メッセージの 2 行目以降に補足コメントをつけるなどの工夫をしました。\u003c/p\u003e\n\n\u003cp\u003e\u003cspan itemscope itemtype=\"http://schema.org/Photograph\"\u003e\u003cimg src=\"https://cdn-ak.f.st-hatena.com/images/fotolife/d/daido1976/20200908/20200908055938.png\" alt=\"f:id:daido1976:20200908055938p:plain\" width=\"1200\" height=\"449\" loading=\"lazy\" title=\"\" class=\"hatena-fotolife\" itemprop=\"image\"\u003e\u003c/span\u003e\u003c/p\u003e\n\n\u003ch2 id=\"アップグレード時の-Tips\"\u003eアップグレード時の Tips\u003c/h2\u003e\n\n\u003cp\u003eここからはアップグレード前にこれ知りたかった、という Tips を軽く紹介します。\u003c/p\u003e\n\n\u003ch3 id=\"便利な-gem-たち\"\u003e便利な gem たち\u003c/h3\u003e\n\n\u003ch4 id=\"Strong-Parameters-対応に使える-be_strong-gem\"\u003eStrong Parameters 対応に使える be_strong gem\u003c/h4\u003e\n\n\u003cp\u003e今回のアップグレードの懸念の一つとしてモデルにある大量の \u003ccode\u003eattr_accessible\u003c/code\u003e を Strong Parameters に移行するという作業があったのですが、その際に以下の gem が役立ちました。\u003c/p\u003e\n\n\u003cp\u003e\u003ciframe src=\"https://hatenablog-parts.com/embed?url=https%3A%2F%2Fgithub.com%2Fmonochromegane%2Fbe_strong\" title=\"GitHub - monochromegane/be_strong: Strong parameter converter.\" class=\"embed-card embed-webcard\" scrolling=\"no\" frameborder=\"0\" style=\"display: block; width: 100%; height: 155px; max-width: 500px; margin: 10px 0px;\"\u003e\u003c/iframe\u003e\u003ccite class=\"hatena-citation\"\u003e\u003ca href=\"https://github.com/monochromegane/be_strong\"\u003egithub.com\u003c/a\u003e\u003c/cite\u003e\u003c/p\u003e\n\n\u003cp\u003e使い方は以下の記事にわかりやすくまとまっています。\u003c/p\u003e\n\n\u003cp\u003e\u003ciframe src=\"https://hatenablog-parts.com/embed?url=https%3A%2F%2Ftech.pepabo.com%2F2015%2F12%2F18%2Fupgrade-to-strong-parameters%2F\" title=\"さくっとStrongParametersへ移行するbe_strongというgemをつくりました - ペパボテックブログ\" class=\"embed-card embed-webcard\" scrolling=\"no\" frameborder=\"0\" style=\"display: block; width: 100%; height: 155px; max-width: 500px; margin: 10px 0px;\"\u003e\u003c/iframe\u003e\u003ccite class=\"hatena-citation\"\u003e\u003ca href=\"https://tech.pepabo.com/2015/12/18/upgrade-to-strong-parameters/\"\u003etech.pepabo.com\u003c/a\u003e\u003c/cite\u003e\u003c/p\u003e\n\n\u003ch4 id=\"DEPRECATION-WARNING-のテストを変換する-rails5-spec-converter-gem\"\u003eDEPRECATION WARNING のテストを変換する rails5-spec-converter gem\u003c/h4\u003e\n\n\u003cpre class=\"code\" data-lang=\"\" data-unlink\u003eDEPRECATION WARNING: Using positional arguments in functional tests has been deprecated, ...\n\nDeprecated style:\nget :show, { id: 1 }, nil, { notice: \u0026#34;This is a flash message\u0026#34; }\n\nNew keyword style:\nget :show, params: { id: 1 }, flash: { notice: \u0026#34;This is a flash message\u0026#34; }, ...\u003c/pre\u003e\n\n\n\u003cp\u003e数ある DEPRECATION WARNING の中でも 👆 は警告文が長く、デバッグの邪魔になるので、Rails 5.0 へのアップグレードと同じ PR で修正しました。その際に以下の gem が大変便利でした。\u003c/p\u003e\n\n\u003cp\u003e\u003ciframe src=\"https://hatenablog-parts.com/embed?url=https%3A%2F%2Fgithub.com%2Ftjgrathwell%2Frails5-spec-converter\" title=\"GitHub - tjgrathwell/rails5-spec-converter: A tool to upgrade Rails 4-style specs to Rails 5-style\" class=\"embed-card embed-webcard\" scrolling=\"no\" frameborder=\"0\" style=\"display: block; width: 100%; height: 155px; max-width: 500px; margin: 10px 0px;\"\u003e\u003c/iframe\u003e\u003ccite class=\"hatena-citation\"\u003e\u003ca href=\"https://github.com/tjgrathwell/rails5-spec-converter\"\u003egithub.com\u003c/a\u003e\u003c/cite\u003e\u003c/p\u003e\n\n\u003ch3 id=\"カナリアリリース時のセッションデータ取得の不具合\"\u003eカナリアリリース時のセッションデータ取得の不具合\u003c/h3\u003e\n\n\u003cp\u003eソーシャルPLUS では大量のアクセスを捌く必要があるため、常時複数台のアプリケーションサーバが稼働しています。\u003c/p\u003e\n\n\u003cp\u003eそのためインパクトのある変更は可能な限りカナリアリリース\u003ca href=\"#f-df52a8d8\" name=\"fn-df52a8d8\" title=\"複数サーバのうちの一部にだけ新しいバージョンのアプリケーションをリリースするデプロイ手法\"\u003e*1\u003c/a\u003e を行い、バグ混入時の被害を最小限に留めるようにしています。\u003c/p\u003e\n\n\u003cp\u003e今回、Rails と一緒にアップデートされた rack gem にて、セッション ID を用いたセッションデータの取得ロジックに前方互換性がなく、カナリアリリース環境の時のみセッションデータが取得できなくなる不具合が見つかりました。\u003c/p\u003e\n\n\u003cp\u003e長くなってしまったので、詳細は以下の記事に書きました。\u003c/p\u003e\n\n\u003cp\u003e\u003ciframe src=\"https://hatenablog-parts.com/embed?url=https%3A%2F%2Fqiita.com%2Fdaido1976%2Fitems%2F7a6f4a304d661d98a11b\" title=\"Rails 4.2.x から 5.0.x にアップグレードする際にカナリアリリースすると session が取得できなくなる不具合を回避する - Qiita\" class=\"embed-card embed-webcard\" scrolling=\"no\" frameborder=\"0\" style=\"display: block; width: 100%; height: 155px; max-width: 500px; margin: 10px 0px;\"\u003e\u003c/iframe\u003e\u003ccite class=\"hatena-citation\"\u003e\u003ca href=\"https://qiita.com/daido1976/items/7a6f4a304d661d98a11b\"\u003eqiita.com\u003c/a\u003e\u003c/cite\u003e\u003c/p\u003e\n\n\u003ch2 id=\"最後に\"\u003e最後に\u003c/h2\u003e\n\n\u003cp\u003e時間はかかりましたが、結果的に移行時のエラーも無く Rails 5.0 へのアップグレードを完遂することができました。\u003c/p\u003e\n\n\u003cp\u003e\u003cspan itemscope itemtype=\"http://schema.org/Photograph\"\u003e\u003cimg src=\"https://cdn-ak.f.st-hatena.com/images/fotolife/d/daido1976/20200907/20200907184707.png\" alt=\"f:id:daido1976:20200907184707p:plain\" width=\"1200\" height=\"386\" loading=\"lazy\" title=\"\" class=\"hatena-fotolife\" itemprop=\"image\"\u003e\u003c/span\u003e\u003c/p\u003e\n\n\u003cp\u003e開発チームリーダーからお褒めの Unipos もいただけて嬉しかったです。\u003c/p\u003e\n\n\u003cp\u003eこの勢いで Rails 5.2 系までは一気に上げてしまいたいと思っているので引き続き頑張ります！\u003c/p\u003e\n\n\u003cp\u003eではまたお会いしましょう＾＾\u003c/p\u003e\n\u003cdiv class=\"footnote\"\u003e\n\u003cp class=\"footnote\"\u003e\u003ca href=\"#fn-df52a8d8\" name=\"f-df52a8d8\" class=\"footnote-number\"\u003e*1\u003c/a\u003e\u003cspan class=\"footnote-delimiter\"\u003e:\u003c/span\u003e\u003cspan class=\"footnote-text\"\u003e複数サーバのうちの一部にだけ新しいバージョンのアプリケーションをリリースするデプロイ手法\u003c/span\u003e\u003c/p\u003e\n\u003c/div\u003e","contentSnippet":"[2021/08 追記]現在は Rails 5.2 にアップグレード済みです。こんにちは。今年の 4 月に EC Booster チームからソーシャルPLUS チームに異動してきた id:daido1976 です。今回はソーシャルPLUS の核となるソーシャルログインサービスの Rails アプリを 4.2 から 5.0 にアップグレードした話を書きます。ソーシャルPLUS のサービスや技術スタックについては以下の記事が詳しいのでご参照ください。developer.feedforce.jpはじめにどんな状態の Rails アプリかどれぐらいの期間かかったかレビューの仕方アップグレード時の Tips便利な gem たちStrong Parameters 対応に使える be_strong gemDEPRECATION WARNING のテストを変換する rails5-spec-converter gemカナリアリリース時のセッションデータ取得の不具合最後にはじめにRails 5.0 がリリースされたのは 2016 年、ということでアップグレードガイド的な記事はすでに素晴らしいものがたくさんあり、「rails 5 アップグレード」というキーワードやエラーメッセージをコピペして検索すれば大体の事象が解決できるはずです。なので、今回はどんな状態の Rails アプリをどれぐらいの期間かけてどのように進めたかに焦点を当てて書いていきたいと思います。（あとは Tips も少々）どんな状態の Rails アプリかアップグレード前の環境: Ruby 2.5.7, Rails 4.2.11.3 2012 年に Rails 3 系からスタートし、2015 年の Rails 4 系へのアップグレードを経て、5 年ぶりにメジャーバージョンのアップグレードを行う Rails アプリです。rails stats コマンドの実行結果は以下の通りで、simplecov によるテストカバレッジは 92 % です。技術的負債はそれなりに溜まっているものの、テストカバレッジが高いのが幸いでした。どれぐらいの期間かかったか約 1.5 ヶ月かかりました。担当者の私が、今回アップグレードした Rails アプリをほぼ初めて触る状態ということもあり、コードリーディングや動作確認に手間取り、時間がかかりました。また、このアプリの技術的負債の一つとして gem をやたらとバージョン固定していたこともあり、Rails のアップグレードを行う前準備として固定された gem をアップデートする必要もありました。レビューの仕方コードレビューは Zoom を用いて同期的に行い、私がレビュアーに変更点を説明、動作確認項目を箇条書きにし、抜け漏れがないかチェックしてもらいました。また他の方がみて、変更の意図がわかりやすいように Commit メッセージの 2 行目以降に補足コメントをつけるなどの工夫をしました。アップグレード時の Tipsここからはアップグレード前にこれ知りたかった、という Tips を軽く紹介します。便利な gem たちStrong Parameters 対応に使える be_strong gem今回のアップグレードの懸念の一つとしてモデルにある大量の attr_accessible を Strong Parameters に移行するという作業があったのですが、その際に以下の gem が役立ちました。github.com使い方は以下の記事にわかりやすくまとまっています。tech.pepabo.comDEPRECATION WARNING のテストを変換する rails5-spec-converter gemDEPRECATION WARNING: Using positional arguments in functional tests has been deprecated, ...Deprecated style:get :show, { id: 1 }, nil, { notice: \"This is a flash message\" }New keyword style:get :show, params: { id: 1 }, flash: { notice: \"This is a flash message\" }, ...数ある DEPRECATION WARNING の中でも 👆 は警告文が長く、デバッグの邪魔になるので、Rails 5.0 へのアップグレードと同じ PR で修正しました。その際に以下の gem が大変便利でした。github.comカナリアリリース時のセッションデータ取得の不具合ソーシャルPLUS では大量のアクセスを捌く必要があるため、常時複数台のアプリケーションサーバが稼働しています。そのためインパクトのある変更は可能な限りカナリアリリース*1 を行い、バグ混入時の被害を最小限に留めるようにしています。今回、Rails と一緒にアップデートされた rack gem にて、セッション ID を用いたセッションデータの取得ロジックに前方互換性がなく、カナリアリリース環境の時のみセッションデータが取得できなくなる不具合が見つかりました。長くなってしまったので、詳細は以下の記事に書きました。qiita.com最後に時間はかかりましたが、結果的に移行時のエラーも無く Rails 5.0 へのアップグレードを完遂することができました。開発チームリーダーからお褒めの Unipos もいただけて嬉しかったです。この勢いで Rails 5.2 系までは一気に上げてしまいたいと思っているので引き続き頑張ります！ではまたお会いしましょう＾＾*1:複数サーバのうちの一部にだけ新しいバージョンのアプリケーションをリリースするデプロイ手法","link":"https://developer.feedforce.jp/entry/2020/09/08/142913","isoDate":"2020-09-08T05:29:13.000Z","dateMiliSeconds":1599542953000,"imageUrl":"https://cdn-ak.f.st-hatena.com/images/fotolife/d/daido1976/20200907/20200907175904.png","authorName":"daido1976"},{"title":"AWS SDK for Ruby で S3 Select を使って S3 にある CSV ファイルからデータを抽出する","content":"\u003cp\u003eこんにちは、\u003ca href=\"http://blog.hatena.ne.jp/daido1976/\" class=\"hatena-id-icon\"\u003e\u003cimg src=\"https://cdn.profile-image.st-hatena.com/users/daido1976/profile.png\" width=\"16\" height=\"16\" alt=\"\" class=\"hatena-id-icon\"\u003eid:daido1976\u003c/a\u003e です。つい先日 30 歳になりました。\u003c/p\u003e\n\n\u003cp\u003eS3 に置いてある大きめの CSV ファイルから特定のデータだけ抽出して取得するのに S3 Select は大変便利です。\u003c/p\u003e\n\n\u003cp\u003e\u003ca href=\"https://aws.amazon.com/jp/athena/\"\u003eAmazon Athena\u003c/a\u003e とは違い単一のファイルのみしか対象にできませんが、その分手軽に利用することができます。\u003c/p\u003e\n\n\u003cp\u003ePython や Go の日本語記事はあるものの、Ruby の記事がなかったので書かせていただきます。\u003c/p\u003e\n\n\u003ch2\u003e実行環境\u003c/h2\u003e\n\n\u003cul\u003e\n\u003cli\u003eRuby 2.7.0\u003c/li\u003e\n\u003cli\u003eaws-sdk-s3 1.60.2\u003c/li\u003e\n\u003c/ul\u003e\n\n\n\u003ch2\u003eコード例\u003c/h2\u003e\n\n\u003cp\u003e今回は複数の id をキーに CSV ファイルからデータを抽出する例を見てみましょう。\u003c/p\u003e\n\n\u003cp\u003e少し長いですが、以下のコードで動きます。\u003c/p\u003e\n\n\u003cp\u003e\u003ca href=\"https://docs.aws.amazon.com/sdk-for-ruby/v3/api/Aws/S3/Client.html#select_object_content-instance_method\"\u003eAws::S3::Client#select_object_content\u003c/a\u003e が Ruby から S3 Select を使うためのメソッドです。\u003c/p\u003e\n\n\u003cpre class=\"code lang-ruby\" data-lang=\"ruby\" data-unlink\u003e\u003cspan class=\"synPreProc\"\u003erequire\u003c/span\u003e \u003cspan class=\"synSpecial\"\u003e'\u003c/span\u003e\u003cspan class=\"synConstant\"\u003eaws-sdk-s3\u003c/span\u003e\u003cspan class=\"synSpecial\"\u003e'\u003c/span\u003e\n\u003cspan class=\"synPreProc\"\u003erequire\u003c/span\u003e \u003cspan class=\"synSpecial\"\u003e'\u003c/span\u003e\u003cspan class=\"synConstant\"\u003ecsv\u003c/span\u003e\u003cspan class=\"synSpecial\"\u003e'\u003c/span\u003e\n\ns3_client = \u003cspan class=\"synType\"\u003eAws\u003c/span\u003e::\u003cspan class=\"synType\"\u003eS3\u003c/span\u003e::\u003cspan class=\"synType\"\u003eClient\u003c/span\u003e.new(\u003cspan class=\"synConstant\"\u003eregion\u003c/span\u003e: \u003cspan class=\"synSpecial\"\u003e'\u003c/span\u003e\u003cspan class=\"synConstant\"\u003eap-northeast-1\u003c/span\u003e\u003cspan class=\"synSpecial\"\u003e'\u003c/span\u003e)\n\nbucket = \u003cspan class=\"synSpecial\"\u003e'\u003c/span\u003e\u003cspan class=\"synConstant\"\u003es3-select-sample\u003c/span\u003e\u003cspan class=\"synSpecial\"\u003e'\u003c/span\u003e\nkey = \u003cspan class=\"synSpecial\"\u003e'\u003c/span\u003e\u003cspan class=\"synConstant\"\u003etarget_sample_users.csv\u003c/span\u003e\u003cspan class=\"synSpecial\"\u003e'\u003c/span\u003e\n\n\u003cspan class=\"synComment\"\u003e# サンプル用のデータを準備する\u003c/span\u003e\ns3_client.put_object(\u003cspan class=\"synConstant\"\u003ebucket\u003c/span\u003e: bucket, \u003cspan class=\"synConstant\"\u003ekey\u003c/span\u003e: key, \u003cspan class=\"synConstant\"\u003ebody\u003c/span\u003e: \u003cspan class=\"synType\"\u003eFile\u003c/span\u003e.read(\u003cspan class=\"synSpecial\"\u003e'\u003c/span\u003e\u003cspan class=\"synConstant\"\u003esample_users.csv\u003c/span\u003e\u003cspan class=\"synSpecial\"\u003e'\u003c/span\u003e))\n\n\u003cspan class=\"synComment\"\u003e# 与えられた ids 配列の id で検索し、id と name だけ抽出するクエリを作成する\u003c/span\u003e\n\u003cspan class=\"synPreProc\"\u003edef\u003c/span\u003e \u003cspan class=\"synIdentifier\"\u003ebuild_query\u003c/span\u003e(ids)\n  \u0026lt;\u0026lt;~\u003cspan class=\"synConstant\"\u003eQUERY\u003c/span\u003e\n\u003cspan class=\"synConstant\"\u003e    SELECT\u003c/span\u003e\n\u003cspan class=\"synConstant\"\u003e    s.id\u003c/span\u003e\n\u003cspan class=\"synConstant\"\u003e    , s.name\u003c/span\u003e\n\u003cspan class=\"synConstant\"\u003e    FROM S3Object s\u003c/span\u003e\n\u003cspan class=\"synConstant\"\u003e    WHERE s.id\u003c/span\u003e\n\u003cspan class=\"synConstant\"\u003e    IN ('\u003c/span\u003e\u003cspan class=\"synSpecial\"\u003e#{\u003c/span\u003eids.join(\u003cspan class=\"synSpecial\"\u003e\u0026quot;\u003c/span\u003e\u003cspan class=\"synConstant\"\u003e', '\u003c/span\u003e\u003cspan class=\"synSpecial\"\u003e\u0026quot;\u003c/span\u003e)\u003cspan class=\"synSpecial\"\u003e}\u003c/span\u003e\u003cspan class=\"synConstant\"\u003e')\u003c/span\u003e\n\u003cspan class=\"synConstant\"\u003e  \u003c/span\u003e\u003cspan class=\"synSpecial\"\u003eQUERY\u003c/span\u003e\n\u003cspan class=\"synPreProc\"\u003eend\u003c/span\u003e\n\n\u003cspan class=\"synComment\"\u003e# `#select_object_content` に渡すパラメータを作成する\u003c/span\u003e\n\u003cspan class=\"synPreProc\"\u003edef\u003c/span\u003e \u003cspan class=\"synIdentifier\"\u003ebuild_params\u003c/span\u003e(bucket, key, query)\n  {\n    \u003cspan class=\"synConstant\"\u003ebucket\u003c/span\u003e: bucket,\n    \u003cspan class=\"synConstant\"\u003ekey\u003c/span\u003e: key,\n    \u003cspan class=\"synConstant\"\u003eexpression_type\u003c/span\u003e: \u003cspan class=\"synSpecial\"\u003e'\u003c/span\u003e\u003cspan class=\"synConstant\"\u003eSQL\u003c/span\u003e\u003cspan class=\"synSpecial\"\u003e'\u003c/span\u003e,\n    \u003cspan class=\"synConstant\"\u003eexpression\u003c/span\u003e: query,\n    \u003cspan class=\"synConstant\"\u003einput_serialization\u003c/span\u003e: {\n      \u003cspan class=\"synComment\"\u003e# field_delimiter を \u0026quot;\\t\u0026quot; にすることでタブ区切りのファイルにも対応可能\u003c/span\u003e\n      \u003cspan class=\"synConstant\"\u003ecsv\u003c/span\u003e: { \u003cspan class=\"synConstant\"\u003efile_header_info\u003c/span\u003e: \u003cspan class=\"synSpecial\"\u003e'\u003c/span\u003e\u003cspan class=\"synConstant\"\u003eUSE\u003c/span\u003e\u003cspan class=\"synSpecial\"\u003e'\u003c/span\u003e, \u003cspan class=\"synConstant\"\u003eallow_quoted_record_delimiter\u003c/span\u003e: \u003cspan class=\"synConstant\"\u003etrue\u003c/span\u003e, \u003cspan class=\"synConstant\"\u003erecord_delimiter\u003c/span\u003e: \u003cspan class=\"synSpecial\"\u003e\u0026quot;\\n\u0026quot;\u003c/span\u003e, \u003cspan class=\"synConstant\"\u003efield_delimiter\u003c/span\u003e: \u003cspan class=\"synSpecial\"\u003e'\u003c/span\u003e\u003cspan class=\"synConstant\"\u003e,\u003c/span\u003e\u003cspan class=\"synSpecial\"\u003e'\u003c/span\u003e }\n    },\n    \u003cspan class=\"synConstant\"\u003eoutput_serialization\u003c/span\u003e: {\n      \u003cspan class=\"synConstant\"\u003ecsv\u003c/span\u003e: { \u003cspan class=\"synConstant\"\u003erecord_delimiter\u003c/span\u003e: \u003cspan class=\"synSpecial\"\u003e\u0026quot;\\n\u0026quot;\u003c/span\u003e, \u003cspan class=\"synConstant\"\u003efield_delimiter\u003c/span\u003e: \u003cspan class=\"synSpecial\"\u003e'\u003c/span\u003e\u003cspan class=\"synConstant\"\u003e,\u003c/span\u003e\u003cspan class=\"synSpecial\"\u003e'\u003c/span\u003e }\n    }\n  }\n\u003cspan class=\"synPreProc\"\u003eend\u003c/span\u003e\n\n\u003cspan class=\"synComment\"\u003e# id が 1 と 50 のユーザを検索する\u003c/span\u003e\nquery = build_query([\u003cspan class=\"synConstant\"\u003e1\u003c/span\u003e, \u003cspan class=\"synConstant\"\u003e50\u003c/span\u003e])\nparams = build_params(bucket, key, query)\n\n\u003cspan class=\"synComment\"\u003e# S3 Select を使ってレスポンスを取得する\u003c/span\u003e\nresponse = s3_client.select_object_content(params)\n\n\u003cspan class=\"synComment\"\u003e# `#event_type == :records` の中にレコード（抽出されたデータ）が含まれる\u003c/span\u003e\ncsv_list = response.payload.select { |\u003cspan class=\"synIdentifier\"\u003ep\u003c/span\u003e| p.event_type == \u003cspan class=\"synConstant\"\u003e:records\u003c/span\u003e }.map(\u0026amp;\u003cspan class=\"synConstant\"\u003e:payload\u003c/span\u003e).map(\u0026amp;\u003cspan class=\"synConstant\"\u003e:read\u003c/span\u003e)\ncsv = \u003cspan class=\"synType\"\u003eCSV\u003c/span\u003e.parse(csv_list.join)\n\n\u003cspan class=\"synComment\"\u003e# マルチバイト文字列を扱う場合\u003c/span\u003e\ncsv.map \u003cspan class=\"synStatement\"\u003edo\u003c/span\u003e |\u003cspan class=\"synIdentifier\"\u003erow\u003c/span\u003e|\n  row.map { |\u003cspan class=\"synIdentifier\"\u003er\u003c/span\u003e| r.force_encoding(\u003cspan class=\"synSpecial\"\u003e'\u003c/span\u003e\u003cspan class=\"synConstant\"\u003eUTF-8\u003c/span\u003e\u003cspan class=\"synSpecial\"\u003e'\u003c/span\u003e) }\n\u003cspan class=\"synStatement\"\u003eend\u003c/span\u003e\n\np csv\n\u003c/pre\u003e\n\n\n\u003cp\u003e\u003ccode\u003esample_users.csv\u003c/code\u003e は以下のような CSV を想定しています。（値は \u003ca href=\"https://github.com/ffaker/ffaker\"\u003effaker gem\u003c/a\u003e を使って作成しました）\u003c/p\u003e\n\n\u003cpre class=\"code\" data-lang=\"\" data-unlink\u003eid,name,email,address,job\n0,小出整,idell@boyle.us,773-9409 群馬県大府市安芸区福山市0丁目4番4号,運転手\n1,坂口昭三,clifford.steuber@walshkutch.name,663-8507 東京都豊島区裾野市842,管理栄養士\n2,池間悠希,taunya.kerluke@hellerweimann.ca,898-7832 東京都港区鯖江市8丁目5番3号,理学療法士\n3,北野真美,rick.nitzsche@harvey.info,411-8019 静岡県大野市中村区駒ヶ根市9丁目4番9号,テレビディレクター\n4,関根京子,francene@cummings.com,809-0176 東京都練馬区夕張市524,クラブDJ\n5,熊本とうこ,bo.oconner@bradtkemiller.biz,423-3182 青森県柏原市佐渡市2丁目5番9号,指揮者\n...\n50,酒向彩香,seema.denesik@fahey.us,481-5386 宮崎県上高井郡にかほ市9丁目1番1号,クラブDJ\u003c/pre\u003e\n\n\n\u003cp\u003e上記コードを実行すると、出力は以下のようになります。\u003c/p\u003e\n\n\u003cpre class=\"code\" data-lang=\"\" data-unlink\u003e[[\u0026#34;1\u0026#34;, \u0026#34;坂口昭三\u0026#34;], [\u0026#34;50\u0026#34;, \u0026#34;酒向彩香\u0026#34;]]\u003c/pre\u003e\n\n\n\u003ch2\u003e補足\u003c/h2\u003e\n\n\u003cp\u003eレスポンスのサイズが不明な場合、S3 Select はデータを複数のイベントに分割し、ストリームとして返す仕様になっています。\u003c/p\u003e\n\n\u003cp\u003e今回は全てのデータが到着するのを待ってから処理するようなコードになっていますが、\u003ca href=\"https://aws.amazon.com/jp/blogs/developer/introducing-support-for-amazon-s3-select-in-the-aws-sdk-for-ruby/\"\u003eAWS Developer Blog\u003c/a\u003e にはストリームを活かして複数のイベントを非同期に処理する方法も記載されていますので、ご興味のある方はぜひご覧になってください。\u003c/p\u003e\n\n\u003cp\u003eちなみに S3 Select を S3 Management Console から試したい場合は以下の箇所から利用できます。ご参考まで。\u003c/p\u003e\n\n\u003cp\u003e\u003cfigure class=\"figure-image figure-image-fotolife\" title=\"最初この位置にあるの気づかなかった…\"\u003e\u003cspan itemscope itemtype=\"http://schema.org/Photograph\"\u003e\u003cimg src=\"https://cdn-ak.f.st-hatena.com/images/fotolife/d/daido1976/20200404/20200404205717.png\" alt=\"f:id:daido1976:20200404205717p:plain\" title=\"f:id:daido1976:20200404205717p:plain\" class=\"hatena-fotolife\" itemprop=\"image\"\u003e\u003c/span\u003e\u003cfigcaption\u003e最初この位置にあるの気づかなかった…\u003c/figcaption\u003e\u003c/figure\u003e\u003c/p\u003e\n\n\u003ch2\u003e結論\u003c/h2\u003e\n\n\u003cp\u003eS3 Select めっちゃ便利。\u003c/p\u003e\n\n\u003ch2\u003e参考\u003c/h2\u003e\n\n\u003cul\u003e\n\u003cli\u003e\u003ca href=\"https://aws.amazon.com/jp/blogs/developer/introducing-support-for-amazon-s3-select-in-the-aws-sdk-for-ruby/\"\u003eIntroducing support for Amazon S3 Select in the AWS SDK for Ruby | AWS Developer Blog\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"https://docs.aws.amazon.com/sdk-for-ruby/v3/api/Aws/S3/Client.html\"\u003eClass: Aws::S3::Client \u0026mdash; AWS SDK for Ruby V3\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"https://dev.classmethod.jp/articles/sugano-040-s3-select/\"\u003eAmazon S3 Select \u0026#x304C;\u0026#x4E00;\u0026#x822C;\u0026#x516C;\u0026#x958B;\u0026#x3055;\u0026#x308C;\u0026#x305F;\u0026#x306E;\u0026#x3067;\u0026#x4F7F;\u0026#x3063;\u0026#x3066;\u0026#x307F;\u0026#x305F;\u0026#xFF08;Python\u0026#xFF09; | Developers.IO\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"https://dev.classmethod.jp/articles/amazon-s3-select-with-aws-sdk-for-go/\"\u003eAWS SDK for Go \u0026#x3067; Amazon S3 Select \u0026#x3092;\u0026#x8A66;\u0026#x3057;\u0026#x3066;\u0026#x307F;\u0026#x305F; | Developers.IO\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\n","contentSnippet":"こんにちは、id:daido1976 です。つい先日 30 歳になりました。S3 に置いてある大きめの CSV ファイルから特定のデータだけ抽出して取得するのに S3 Select は大変便利です。Amazon Athena とは違い単一のファイルのみしか対象にできませんが、その分手軽に利用することができます。Python や Go の日本語記事はあるものの、Ruby の記事がなかったので書かせていただきます。実行環境Ruby 2.7.0aws-sdk-s3 1.60.2コード例今回は複数の id をキーに CSV ファイルからデータを抽出する例を見てみましょう。少し長いですが、以下のコードで動きます。Aws::S3::Client#select_object_content が Ruby から S3 Select を使うためのメソッドです。require 'aws-sdk-s3'require 'csv's3_client = Aws::S3::Client.new(region: 'ap-northeast-1')bucket = 's3-select-sample'key = 'target_sample_users.csv'# サンプル用のデータを準備するs3_client.put_object(bucket: bucket, key: key, body: File.read('sample_users.csv'))# 与えられた ids 配列の id で検索し、id と name だけ抽出するクエリを作成するdef build_query(ids)  \u003c\u003c~QUERY    SELECT    s.id    , s.name    FROM S3Object s    WHERE s.id    IN ('#{ids.join(\"', '\")}')  QUERYend# `#select_object_content` に渡すパラメータを作成するdef build_params(bucket, key, query)  {    bucket: bucket,    key: key,    expression_type: 'SQL',    expression: query,    input_serialization: {      # field_delimiter を \"\\t\" にすることでタブ区切りのファイルにも対応可能      csv: { file_header_info: 'USE', allow_quoted_record_delimiter: true, record_delimiter: \"\\n\", field_delimiter: ',' }    },    output_serialization: {      csv: { record_delimiter: \"\\n\", field_delimiter: ',' }    }  }end# id が 1 と 50 のユーザを検索するquery = build_query([1, 50])params = build_params(bucket, key, query)# S3 Select を使ってレスポンスを取得するresponse = s3_client.select_object_content(params)# `#event_type == :records` の中にレコード（抽出されたデータ）が含まれるcsv_list = response.payload.select { |p| p.event_type == :records }.map(\u0026:payload).map(\u0026:read)csv = CSV.parse(csv_list.join)# マルチバイト文字列を扱う場合csv.map do |row|  row.map { |r| r.force_encoding('UTF-8') }endp csvsample_users.csv は以下のような CSV を想定しています。（値は ffaker gem を使って作成しました）id,name,email,address,job0,小出整,idell@boyle.us,773-9409 群馬県大府市安芸区福山市0丁目4番4号,運転手1,坂口昭三,clifford.steuber@walshkutch.name,663-8507 東京都豊島区裾野市842,管理栄養士2,池間悠希,taunya.kerluke@hellerweimann.ca,898-7832 東京都港区鯖江市8丁目5番3号,理学療法士3,北野真美,rick.nitzsche@harvey.info,411-8019 静岡県大野市中村区駒ヶ根市9丁目4番9号,テレビディレクター4,関根京子,francene@cummings.com,809-0176 東京都練馬区夕張市524,クラブDJ5,熊本とうこ,bo.oconner@bradtkemiller.biz,423-3182 青森県柏原市佐渡市2丁目5番9号,指揮者...50,酒向彩香,seema.denesik@fahey.us,481-5386 宮崎県上高井郡にかほ市9丁目1番1号,クラブDJ上記コードを実行すると、出力は以下のようになります。[[\"1\", \"坂口昭三\"], [\"50\", \"酒向彩香\"]]補足レスポンスのサイズが不明な場合、S3 Select はデータを複数のイベントに分割し、ストリームとして返す仕様になっています。今回は全てのデータが到着するのを待ってから処理するようなコードになっていますが、AWS Developer Blog にはストリームを活かして複数のイベントを非同期に処理する方法も記載されていますので、ご興味のある方はぜひご覧になってください。ちなみに S3 Select を S3 Management Console から試したい場合は以下の箇所から利用できます。ご参考まで。最初この位置にあるの気づかなかった…結論S3 Select めっちゃ便利。参考Introducing support for Amazon S3 Select in the AWS SDK for Ruby | AWS Developer BlogClass: Aws::S3::Client — AWS SDK for Ruby V3Amazon S3 Select が一般公開されたので使ってみた（Python） | Developers.IOAWS SDK for Go で Amazon S3 Select を試してみた | Developers.IO","link":"https://developer.feedforce.jp/entry/2020/04/06/173701","isoDate":"2020-04-06T08:37:01.000Z","dateMiliSeconds":1586162221000,"imageUrl":"https://cdn-ak.f.st-hatena.com/images/fotolife/d/daido1976/20200404/20200404225418.jpg","authorName":"daido1976"},{"title":"Pusher の Private channels と認証周りの処理を追いかけた","content":"\u003cp\u003eこんにちは、\u003ca href=\"http://blog.hatena.ne.jp/daido1976/\" class=\"hatena-id-icon\"\u003e\u003cimg src=\"https://cdn.profile-image.st-hatena.com/users/daido1976/profile.png\" width=\"16\" height=\"16\" alt=\"\" class=\"hatena-id-icon\"\u003eid:daido1976\u003c/a\u003e です。もうすぐ 30 歳になります。\u003c/p\u003e\n\n\u003cp\u003ePusher の Private channels と認証周りの処理が公式ドキュメントを読んだだけでは全然わからなかったので、ライブラリの実装を追いかけてみました。\u003c/p\u003e\n\n\u003cul class=\"table-of-contents\"\u003e\n    \u003cli\u003e\u003ca href=\"#結論\"\u003e結論\u003c/a\u003e\u003c/li\u003e\n    \u003cli\u003e\u003ca href=\"#コード例\"\u003eコード例\u003c/a\u003e\u003cul\u003e\n            \u003cli\u003e\u003ca href=\"#クライアントJavaScript\"\u003eクライアント（JavaScript）\u003c/a\u003e\u003c/li\u003e\n            \u003cli\u003e\u003ca href=\"#サーバRails\"\u003eサーバ（Rails）\u003c/a\u003e\u003c/li\u003e\n        \u003c/ul\u003e\n    \u003c/li\u003e\n    \u003cli\u003e\u003ca href=\"#ライブラリの実装を追いかけた\"\u003eライブラリの実装を追いかけた\u003c/a\u003e\u003cul\u003e\n            \u003cli\u003e\u003ca href=\"#1-WebSocket-のコネクションを確立する\"\u003e1. WebSocket のコネクションを確立する\u003c/a\u003e\u003c/li\u003e\n            \u003cli\u003e\u003ca href=\"#2-App-Server-の-pusherauth-に-POST-リクエストして認証トークンを取得\"\u003e2. App Server の /pusher/auth に POST リクエストして認証トークンを取得\u003c/a\u003e\u003c/li\u003e\n            \u003cli\u003e\u003ca href=\"#3-認証トークンをライブラリ内でセットして当該チャンネルを-Subscribe-するリクエストを-Pusher-に送る\"\u003e3. 認証トークンをライブラリ内でセットして当該チャンネルを Subscribe するリクエストを Pusher に送る\u003c/a\u003e\u003c/li\u003e\n        \u003c/ul\u003e\n    \u003c/li\u003e\n    \u003cli\u003e\u003ca href=\"#参考\"\u003e参考\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\n\u003ch2 id=\"結論\"\u003e結論\u003c/h2\u003e\n\n\u003cp\u003e実装を追っていくと公式ドキュメントに載っている以下の図の通りになっていました。（当たり前）\u003c/p\u003e\n\n\u003cblockquote\u003e\u003cp\u003e\u003cfigure class=\"figure-image figure-image-fotolife\" title=\"https://pusher.com/docs/channels/server_api/authenticating-users\"\u003e\u003cspan itemscope itemtype=\"http://schema.org/Photograph\"\u003e\u003cimg src=\"https://cdn-ak.f.st-hatena.com/images/fotolife/d/daido1976/20200129/20200129205304.png\" alt=\"f:id:daido1976:20200129205304p:plain\" title=\"f:id:daido1976:20200129205304p:plain\" class=\"hatena-fotolife\" itemprop=\"image\"\u003e\u003c/span\u003e\u003cfigcaption\u003e\u003ca href=\"https://pusher.com/docs/channels/server_api/authenticating-users\"\u003ehttps://pusher.com/docs/channels/server_api/authenticating-users\u003c/a\u003e\u003c/figcaption\u003e\u003c/figure\u003e\u003c/p\u003e\u003c/blockquote\u003e\n\n\u003ch2 id=\"コード例\"\u003eコード例\u003c/h2\u003e\n\n\u003cp\u003e以下のコード例は抜粋ですが、Rails サーバとの通信を仮定しているので、ライブラリは \u003ca href=\"https://github.com/pusher/pusher-js\"\u003epusher-js\u003c/a\u003e と \u003ca href=\"https://github.com/pusher/pusher-http-ruby\"\u003epusher-http-ruby\u003c/a\u003e を利用する前提です。\u003c/p\u003e\n\n\u003ch3 id=\"クライアントJavaScript\"\u003eクライアント（JavaScript）\u003c/h3\u003e\n\n\u003cpre class=\"code lang-javascript\" data-lang=\"javascript\" data-unlink\u003e\u003cspan class=\"synStatement\"\u003econst\u003c/span\u003e pusher = \u003cspan class=\"synStatement\"\u003enew\u003c/span\u003e Pusher(\u003cspan class=\"synConstant\"\u003e\u0026quot;app_key\u0026quot;\u003c/span\u003e, \u003cspan class=\"synIdentifier\"\u003e{\u003c/span\u003e\n  auth: \u003cspan class=\"synIdentifier\"\u003e{\u003c/span\u003e\n    headers: \u003cspan class=\"synIdentifier\"\u003e{\u003c/span\u003e\n      \u003cspan class=\"synComment\"\u003e// トークンベースで認証を行う場合、ここに何らかの認証情報を載せる\u003c/span\u003e\n      \u003cspan class=\"synComment\"\u003e// ...\u003c/span\u003e\n    \u003cspan class=\"synIdentifier\"\u003e}\u003c/span\u003e\n  \u003cspan class=\"synIdentifier\"\u003e}\u003c/span\u003e\n\u003cspan class=\"synIdentifier\"\u003e}\u003c/span\u003e);\n\n\u003cspan class=\"synComment\"\u003e// User ごとの Private チャンネルを作成し、Subscribe する場合\u003c/span\u003e\n\u003cspan class=\"synStatement\"\u003econst\u003c/span\u003e channel = pusher.subscribe(`\u003cspan class=\"synStatement\"\u003eprivate\u003c/span\u003e-$\u003cspan class=\"synIdentifier\"\u003e{\u003c/span\u003euserId\u003cspan class=\"synIdentifier\"\u003e}\u003c/span\u003e`);\n\n\u003cspan class=\"synComment\"\u003e// 以下イベントに bind する処理などが続く...\u003c/span\u003e\n\u003c/pre\u003e\n\n\n\u003ch3 id=\"サーバRails\"\u003eサーバ（Rails）\u003c/h3\u003e\n\n\u003cpre class=\"code lang-ruby\" data-lang=\"ruby\" data-unlink\u003e\u003cspan class=\"synComment\"\u003e# Routing\u003c/span\u003e\n\u003cspan class=\"synType\"\u003eRails\u003c/span\u003e.application.routes.draw \u003cspan class=\"synStatement\"\u003edo\u003c/span\u003e\n  \u003cspan class=\"synComment\"\u003e# ...\u003c/span\u003e\n  post \u003cspan class=\"synSpecial\"\u003e'\u003c/span\u003e\u003cspan class=\"synConstant\"\u003e/pusher/auth\u003c/span\u003e\u003cspan class=\"synSpecial\"\u003e'\u003c/span\u003e, \u003cspan class=\"synConstant\"\u003eto\u003c/span\u003e: \u003cspan class=\"synSpecial\"\u003e'\u003c/span\u003e\u003cspan class=\"synConstant\"\u003epusher_auth#create\u003c/span\u003e\u003cspan class=\"synSpecial\"\u003e'\u003c/span\u003e\n\u003cspan class=\"synStatement\"\u003eend\u003c/span\u003e\n\u003c/pre\u003e\n\n\n\n\n\u003cpre class=\"code lang-ruby\" data-lang=\"ruby\" data-unlink\u003e\u003cspan class=\"synComment\"\u003e# Controller\u003c/span\u003e\n\u003cspan class=\"synPreProc\"\u003eclass\u003c/span\u003e \u003cspan class=\"synType\"\u003ePusherAuthController\u003c/span\u003e \u0026lt; \u003cspan class=\"synType\"\u003eApplicationController\u003c/span\u003e\n  \u003cspan class=\"synPreProc\"\u003edef\u003c/span\u003e \u003cspan class=\"synIdentifier\"\u003ecreate\u003c/span\u003e\n    \u003cspan class=\"synComment\"\u003e# クライアントから渡ってきた認証情報を使ってユーザを識別するコードは省略\u003c/span\u003e\n    \u003cspan class=\"synStatement\"\u003eif\u003c/span\u003e current_user\n      \u003cspan class=\"synComment\"\u003e# Pusher のクライアント作成のコードは省略\u003c/span\u003e\n      response = pusher_client.authenticate(params[\u003cspan class=\"synConstant\"\u003e:channel_name\u003c/span\u003e], params[\u003cspan class=\"synConstant\"\u003e:socket_id\u003c/span\u003e])\n      render \u003cspan class=\"synConstant\"\u003ejson\u003c/span\u003e: response\n    \u003cspan class=\"synStatement\"\u003eelse\u003c/span\u003e\n      render \u003cspan class=\"synConstant\"\u003ejson\u003c/span\u003e: {}, \u003cspan class=\"synConstant\"\u003estatus\u003c/span\u003e: \u003cspan class=\"synConstant\"\u003e403\u003c/span\u003e\n    \u003cspan class=\"synStatement\"\u003eend\u003c/span\u003e\n  \u003cspan class=\"synPreProc\"\u003eend\u003c/span\u003e\n\u003cspan class=\"synPreProc\"\u003eend\u003c/span\u003e\n\u003c/pre\u003e\n\n\n\u003ch2 id=\"ライブラリの実装を追いかけた\"\u003eライブラリの実装を追いかけた\u003c/h2\u003e\n\n\u003cp\u003e以下、ライブラリのコードを読む際に少しハマったので先にお伝えしておきます。\u003c/p\u003e\n\n\u003cp\u003epusher-js は Web、 React Native など複数のランタイムのビルドを生成できるようになっています。（ビルド時に webpack によって依存関係の解決が切り替わるようになっている）\u003csup id=\"fnref:1\"\u003e\u003ca href=\"#fn:1\" rel=\"footnote\"\u003e1\u003c/a\u003e\u003c/sup\u003e\u003c/p\u003e\n\n\u003cp\u003eプラットフォームに依存しない共通部分の実装は \u003ccode\u003ecore/\u003c/code\u003e 以下に、プラットフォームに依存する実装は \u003ccode\u003eruntimes/\u003c/code\u003e 以下に置いてあるのでご留意ください。\u003c/p\u003e\n\n\u003cp\u003eそれでは、公式ドキュメントの図に沿ってライブラリの実装を追っていきましょう。\u003c/p\u003e\n\n\u003ch3 id=\"1-WebSocket-のコネクションを確立する\"\u003e1. WebSocket のコネクションを確立する\u003c/h3\u003e\n\n\u003cp\u003e\u003cstrong\u003e公式ドキュメントの図でいうと 1~3 まで。\u003c/strong\u003e\u003c/p\u003e\n\n\u003cp\u003eコネクションの確立は \u003ca href=\"https://github.com/pusher/pusher-js/blob/v5.0.3/src/core/pusher.ts#L268\"\u003eRuntime.setup\u003c/a\u003e の中でやっています。（これは実装者が Pusher オブジェクトを new した時に呼ばれる）\u003c/p\u003e\n\n\u003cp\u003e具体的には上記の \u003ccode\u003eRuntime.setup\u003c/code\u003e の中で \u003ca href=\"https://github.com/pusher/pusher-js/blob/v5.0.3/src/runtimes/web/runtime.ts#L46\"\u003ePusher.ready が呼ばれ\u003c/a\u003e（実装は\u003ca href=\"https://github.com/pusher/pusher-js/blob/v5.0.3/src/core/pusher.ts#L34-L39\"\u003eここ\u003c/a\u003e）、その中で \u003ca href=\"https://github.com/pusher/pusher-js/blob/v5.0.3/src/core/pusher.ts#L164-L176\"\u003ePusher#connect\u003c/a\u003e が呼ばれてコネクションが確立されます。\u003c/p\u003e\n\n\u003cp\u003e※ 内部の処理は深かったので省略しますが、最終的には公式ドキュメントの図の通り \u003ca href=\"https://github.com/pusher/pusher-js/blob/v5.0.3/src/core/connection/protocol/protocol.ts#L73-L81\"\u003e\u003ccode\u003epusher:connection_established\u003c/code\u003e イベントが発火して\u003c/a\u003e  connected な状態になります。（Web のための \u003ccode\u003eRuntime.setup\u003c/code\u003e は \u003ca href=\"https://github.com/pusher/pusher-js/blob/v5.0.3/src/runtimes/web/runtime.ts#L43-L53\"\u003eこちら\u003c/a\u003e から始まりますので、興味のある方は追ってみてください）\u003c/p\u003e\n\n\u003ch3 id=\"2-App-Server-の-pusherauth-に-POST-リクエストして認証トークンを取得\"\u003e2. App Server の \u003ccode\u003e/pusher/auth\u003c/code\u003e に POST リクエストして認証トークンを取得\u003c/h3\u003e\n\n\u003cp\u003e\u003cstrong\u003e公式ドキュメントの図でいうと 4~6 まで。\u003c/strong\u003e\u003c/p\u003e\n\n\u003cp\u003eコネクションが確立されたら \u003ccode\u003ePusher#subscribe\u003c/code\u003e の \u003ca href=\"https://github.com/pusher/pusher-js/blob/v5.0.3/src/core/pusher.ts#L225-L230\"\u003eここの条件分岐\u003c/a\u003e に入り、\u003ca href=\"https://github.com/pusher/pusher-js/blob/v5.0.3/src/core/channels/channel.ts#L97\"\u003e*.Channel#authorize\u003c/a\u003e が呼ばれて App Server （コード例でいう Rails サーバ）の \u003ccode\u003e/pusher/auth\u003c/code\u003e\u003csup id=\"fnref:2\"\u003e\u003ca href=\"#fn:2\" rel=\"footnote\"\u003e2\u003c/a\u003e\u003c/sup\u003eに POST リクエスト\u003csup id=\"fnref:3\"\u003e\u003ca href=\"#fn:3\" rel=\"footnote\"\u003e3\u003c/a\u003e\u003c/sup\u003eして、App Server 側では \u003ca href=\"https://github.com/pusher/pusher-http-ruby/blob/v1.3.2/lib/pusher/channel.rb#L169-L175\"\u003eここ\u003c/a\u003e で認証トークン（\u003ccode\u003eauthentication_string\u003c/code\u003e） を詰めて、 \u003ca href=\"https://github.com/pusher/pusher-js/blob/v5.0.3/src/core/channels/channel.ts#L97-L110\"\u003e*.Channel#authorize の コールバック\u003c/a\u003e に返ってきます。\u003c/p\u003e\n\n\u003cp\u003eちなみにチャンネル名を見て Private かどうかを調べてるのは \u003ca href=\"https://github.com/pusher/pusher-js/blob/v5.0.3/src/core/channels/channels.ts#L64-L80\"\u003eここ\u003c/a\u003e です。\u003c/p\u003e\n\n\u003cp\u003e※ Public channels の場合は \u003ca href=\"https://github.com/pusher/pusher-js/blob/v5.0.3/src/core/channels/channel.ts#L37-L43\"\u003eここ\u003c/a\u003e で認証をスキップしています。\u003c/p\u003e\n\n\u003ch3 id=\"3-認証トークンをライブラリ内でセットして当該チャンネルを-Subscribe-するリクエストを-Pusher-に送る\"\u003e3. 認証トークンをライブラリ内でセットして当該チャンネルを Subscribe するリクエストを Pusher に送る\u003c/h3\u003e\n\n\u003cp\u003e\u003cstrong\u003e公式ドキュメントの図でいうと 7。\u003c/strong\u003e\u003c/p\u003e\n\n\u003cp\u003e認証トークンは \u003ca href=\"https://github.com/pusher/pusher-js/blob/v5.0.3/src/core/channels/channel.ts#L106\"\u003eここ\u003c/a\u003e で勝手にセットされ、 \u003ccode\u003epusher:subscribe\u003c/code\u003e のイベントが Pusher に送られます。（最終的には \u003ca href=\"https://github.com/pusher/pusher-js/blob/v5.0.3/src/core/transports/transport_connection.ts#L134\"\u003eここ\u003c/a\u003e で Pusher にデータが送られている）\u003c/p\u003e\n\n\u003ch2 id=\"参考\"\u003e参考\u003c/h2\u003e\n\n\u003cul\u003e\n\u003cli\u003e\u003ca href=\"https://pusher.com/docs/channels/server_api/authenticating-users\"\u003eAuthenticating users | Pusher docs\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"https://github.com/pusher/pusher-js\"\u003eGitHub - pusher/pusher-js: Pusher Javascript library | owner=@leesio\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"https://github.com/pusher/pusher-http-ruby\"\u003eGitHub - pusher/pusher-http-ruby: Ruby library for Pusher Channels HTTP API | owner=@annzenkina\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\n\u003cdiv class=\"footnotes\"\u003e\n\u003chr/\u003e\n\u003col\u003e\n\u003cli id=\"fn:1\"\u003e\n\u003cp\u003e\u003ca href=\"https://github.com/pusher/pusher-js#core-vs-platform-specific-code\"\u003ehttps://github.com/pusher/pusher-js#core-vs-platform-specific-code\u003c/a\u003e\u003ca href=\"#fnref:1\" rev=\"footnote\"\u003e\u0026#8617;\u003c/a\u003e\u003c/p\u003e\u003c/li\u003e\n\u003cli id=\"fn:2\"\u003e\n\u003cp\u003e\u003ccode\u003eauthEndpoint\u003c/code\u003e は何も指定しなければ \u003ccode\u003e/pusher/auth\u003c/code\u003e になります。（\u003ca href=\"https://github.com/pusher/pusher-js/blob/v5.0.3/src/core/defaults.ts#L41\"\u003eここでセットされてる\u003c/a\u003e）\u003ca href=\"#fnref:2\" rev=\"footnote\"\u003e\u0026#8617;\u003c/a\u003e\u003c/p\u003e\u003c/li\u003e\n\u003cli id=\"fn:3\"\u003e\n\u003cp\u003eApp Server 側に \u003ccode\u003ePOST /pusher/auth\u003c/code\u003e してるのは次のような流れ。Private チャンネルなので、\u003ccode\u003e#authorize\u003c/code\u003e したら \u003ca href=\"https://github.com/pusher/pusher-js/blob/v5.0.3/src/core/channels/private_channel.ts#L11-L19\"\u003ePrivateChannel#authorize\u003c/a\u003e が呼ばれます。\u003ca href=\"https://github.com/pusher/pusher-js/blob/v5.0.3/src/core/auth/pusher_authorizer.ts#L41-L44\"\u003ePusherAuthorizer#authorize\u003c/a\u003e の中で \u003ca href=\"https://github.com/pusher/pusher-js/blob/v5.0.3/src/runtimes/web/runtime.ts#L63-L65\"\u003eRuntime#getAuthorizers\u003c/a\u003e が呼ばれ、 \u003ca href=\"https://github.com/pusher/pusher-js/blob/v5.0.3/src/runtimes/isomorphic/auth/xhr_auth.ts#L10-L51\"\u003eこの ajax 関数\u003c/a\u003e が実行されます。\u003ca href=\"#fnref:3\" rev=\"footnote\"\u003e\u0026#8617;\u003c/a\u003e\u003c/p\u003e\u003c/li\u003e\n\u003c/ol\u003e\n\u003c/div\u003e\n\n","contentSnippet":"こんにちは、id:daido1976 です。もうすぐ 30 歳になります。Pusher の Private channels と認証周りの処理が公式ドキュメントを読んだだけでは全然わからなかったので、ライブラリの実装を追いかけてみました。結論コード例クライアント（JavaScript）サーバ（Rails）ライブラリの実装を追いかけた1. WebSocket のコネクションを確立する2. App Server の /pusher/auth に POST リクエストして認証トークンを取得3. 認証トークンをライブラリ内でセットして当該チャンネルを Subscribe するリクエストを Pusher に送る参考結論実装を追っていくと公式ドキュメントに載っている以下の図の通りになっていました。（当たり前）https://pusher.com/docs/channels/server_api/authenticating-usersコード例以下のコード例は抜粋ですが、Rails サーバとの通信を仮定しているので、ライブラリは pusher-js と pusher-http-ruby を利用する前提です。クライアント（JavaScript）const pusher = new Pusher(\"app_key\", {  auth: {    headers: {      // トークンベースで認証を行う場合、ここに何らかの認証情報を載せる      // ...    }  }});// User ごとの Private チャンネルを作成し、Subscribe する場合const channel = pusher.subscribe(`private-${userId}`);// 以下イベントに bind する処理などが続く...サーバ（Rails）# RoutingRails.application.routes.draw do  # ...  post '/pusher/auth', to: 'pusher_auth#create'end# Controllerclass PusherAuthController \u003c ApplicationController  def create    # クライアントから渡ってきた認証情報を使ってユーザを識別するコードは省略    if current_user      # Pusher のクライアント作成のコードは省略      response = pusher_client.authenticate(params[:channel_name], params[:socket_id])      render json: response    else      render json: {}, status: 403    end  endendライブラリの実装を追いかけた以下、ライブラリのコードを読む際に少しハマったので先にお伝えしておきます。pusher-js は Web、 React Native など複数のランタイムのビルドを生成できるようになっています。（ビルド時に webpack によって依存関係の解決が切り替わるようになっている）1プラットフォームに依存しない共通部分の実装は core/ 以下に、プラットフォームに依存する実装は runtimes/ 以下に置いてあるのでご留意ください。それでは、公式ドキュメントの図に沿ってライブラリの実装を追っていきましょう。1. WebSocket のコネクションを確立する公式ドキュメントの図でいうと 1~3 まで。コネクションの確立は Runtime.setup の中でやっています。（これは実装者が Pusher オブジェクトを new した時に呼ばれる）具体的には上記の Runtime.setup の中で Pusher.ready が呼ばれ（実装はここ）、その中で Pusher#connect が呼ばれてコネクションが確立されます。※ 内部の処理は深かったので省略しますが、最終的には公式ドキュメントの図の通り pusher:connection_established イベントが発火して  connected な状態になります。（Web のための Runtime.setup は こちら から始まりますので、興味のある方は追ってみてください）2. App Server の /pusher/auth に POST リクエストして認証トークンを取得公式ドキュメントの図でいうと 4~6 まで。コネクションが確立されたら Pusher#subscribe の ここの条件分岐 に入り、*.Channel#authorize が呼ばれて App Server （コード例でいう Rails サーバ）の /pusher/auth2に POST リクエスト3して、App Server 側では ここ で認証トークン（authentication_string） を詰めて、 *.Channel#authorize の コールバック に返ってきます。ちなみにチャンネル名を見て Private かどうかを調べてるのは ここ です。※ Public channels の場合は ここ で認証をスキップしています。3. 認証トークンをライブラリ内でセットして当該チャンネルを Subscribe するリクエストを Pusher に送る公式ドキュメントの図でいうと 7。認証トークンは ここ で勝手にセットされ、 pusher:subscribe のイベントが Pusher に送られます。（最終的には ここ で Pusher にデータが送られている）参考Authenticating users | Pusher docsGitHub - pusher/pusher-js: Pusher Javascript library | owner=@leesioGitHub - pusher/pusher-http-ruby: Ruby library for Pusher Channels HTTP API | owner=@annzenkinahttps://github.com/pusher/pusher-js#core-vs-platform-specific-code↩authEndpoint は何も指定しなければ /pusher/auth になります。（ここでセットされてる）↩App Server 側に POST /pusher/auth してるのは次のような流れ。Private チャンネルなので、#authorize したら PrivateChannel#authorize が呼ばれます。PusherAuthorizer#authorize の中で Runtime#getAuthorizers が呼ばれ、 この ajax 関数 が実行されます。↩","link":"https://developer.feedforce.jp/entry/2020/02/05/172927","isoDate":"2020-02-05T08:29:27.000Z","dateMiliSeconds":1580891367000,"imageUrl":"https://cdn.user.blog.st-hatena.com/default_entry_og_image/116461321/1514251518718655","authorName":"daido1976"},{"title":"【2019年版】バックエンドエンジニアが React でモダンなフロントエンド開発を始めるまで","content":"\u003cp\u003e\u003ca href=\"http://blog.hatena.ne.jp/daido1976/\" class=\"hatena-id-icon\"\u003e\u003cimg src=\"https://cdn.profile-image.st-hatena.com/users/daido1976/profile.png\" width=\"16\" height=\"16\" alt=\"\" class=\"hatena-id-icon\"\u003eid:daido1976\u003c/a\u003e です。入社してからあっという間に1年が経っていました。\u003c/p\u003e\n\n\u003cp\u003e直近3ヶ月ほどプライベートでフロントエンド開発の勉強をしていたのですが、ここ数年で CSS の Grid や React の Hooks が新しく導入されたことなどもあり、少し古いコンテンツだと教材として役立たない\u003csup id=\"fnref:1\"\u003e\u003ca href=\"#fn:1\" rel=\"footnote\"\u003e1\u003c/a\u003e\u003c/sup\u003e と感じることが多かったので、本記事では私が実際にやってみた中で \u003cstrong\u003e2019年時点で\u003c/strong\u003e オススメできると判断した教材や学び方を皆さんにご紹介したいと思います。\u003c/p\u003e\n\n\u003cul class=\"table-of-contents\"\u003e\n    \u003cli\u003e\u003ca href=\"#はじめに\"\u003eはじめに\u003c/a\u003e\u003c/li\u003e\n    \u003cli\u003e\u003ca href=\"#やったこと\"\u003eやったこと\u003c/a\u003e\u003cul\u003e\n            \u003cli\u003e\u003ca href=\"#JavaScript\"\u003eJavaScript\u003c/a\u003e\u003cul\u003e\n                    \u003cli\u003e\u003ca href=\"#MDN-の-JavaScript-の部分を読む--手を動かす\"\u003eMDN の JavaScript の部分を読む \u0026amp; 手を動かす\u003c/a\u003e\u003c/li\u003e\n                    \u003cli\u003e\u003ca href=\"#JavaScript-Primer-を読む\"\u003eJavaScript Primer を読む\u003c/a\u003e\u003c/li\u003e\n                    \u003cli\u003e\u003ca href=\"#YouTube-動画で-Promise-を学ぶ\"\u003eYouTube 動画で Promise を学ぶ\u003c/a\u003e\u003c/li\u003e\n                    \u003cli\u003e\u003ca href=\"#デバッグ方法を学ぶ\"\u003eデバッグ方法を学ぶ\u003c/a\u003e\u003c/li\u003e\n                \u003c/ul\u003e\n            \u003c/li\u003e\n            \u003cli\u003e\u003ca href=\"#React\"\u003eReact\u003c/a\u003e\u003cul\u003e\n                    \u003cli\u003e\u003ca href=\"#React-公式のチュートリアルを2周する\"\u003eReact 公式のチュートリアルを2周する\u003c/a\u003e\u003c/li\u003e\n                    \u003cli\u003e\u003ca href=\"#eggheadio-の動画で-Redux-を学ぶ\"\u003eegghead.io の動画で Redux を学ぶ\u003c/a\u003e\u003c/li\u003e\n                    \u003cli\u003e\u003ca href=\"#ヘルシンキ大学の-Web-開発カリキュラム-Full-Stack-Open-2019-をやる\"\u003eヘルシンキ大学の Web 開発カリキュラム Full Stack Open 2019 をやる\u003c/a\u003e\u003c/li\u003e\n                \u003c/ul\u003e\n            \u003c/li\u003e\n            \u003cli\u003e\u003ca href=\"#CSS\"\u003eCSS\u003c/a\u003e\u003cul\u003e\n                    \u003cli\u003e\u003ca href=\"#CSS-in-Depth-を読む--手を動かす\"\u003eCSS in Depth を読む \u0026amp; 手を動かす\u003c/a\u003e\u003c/li\u003e\n                \u003c/ul\u003e\n            \u003c/li\u003e\n            \u003cli\u003e\u003ca href=\"#その他\"\u003eその他\u003c/a\u003e\u003cul\u003e\n                    \u003cli\u003e\u003ca href=\"#Atomic-Design-を理解する\"\u003eAtomic Design を理解する\u003c/a\u003e\u003c/li\u003e\n                \u003c/ul\u003e\n            \u003c/li\u003e\n        \u003c/ul\u003e\n    \u003c/li\u003e\n    \u003cli\u003e\u003ca href=\"#最後に\"\u003e最後に\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\n\u003ch2 id=\"はじめに\"\u003eはじめに\u003c/h2\u003e\n\n\u003cp\u003e今回は実務レベルでフロントエンド開発できるスキルを身につけたい、という目標があったので \u003cstrong\u003eJavaScript\u003c/strong\u003e はもちろん所属チームである \u003ca href=\"https://ecbooster.jp/\"\u003eEC Booster\u003c/a\u003e で採用している \u003cstrong\u003eReact\u003c/strong\u003e、さらにフロントエンド開発において避けて通ることのできない \u003cstrong\u003eCSS\u003c/strong\u003e の学習を前提としています。\u003c/p\u003e\n\n\u003cp\u003e参考までに筆者のスペックは 👇 の記事の1年後をご想像ください。\u003c/p\u003e\n\n\u003cp\u003e\u003ciframe src=\"https://hatenablog-parts.com/embed?url=https%3A%2F%2Fdeveloper.feedforce.jp%2Fentry%2F2018%2F10%2F18%2F140000\" title=\"弊社の新人エンジニア研修カリキュラムを惜しみなく公開してみる - Feedforce Developer Blog\" class=\"embed-card embed-blogcard\" scrolling=\"no\" frameborder=\"0\" style=\"display: block; width: 100%; height: 190px; max-width: 500px; margin: 10px 0px;\"\u003e\u003c/iframe\u003e\u003ccite class=\"hatena-citation\"\u003e\u003ca href=\"https://developer.feedforce.jp/entry/2018/10/18/140000\"\u003edeveloper.feedforce.jp\u003c/a\u003e\u003c/cite\u003e\u003c/p\u003e\n\n\u003cp\u003e具体的にはこの後 Ruby や Rails を使って、SPA のための GraphQL API サーバや Google 広告系の API を利用したバッチ処理の実装など、バックエンド開発をメインに行なっていました。\u003c/p\u003e\n\n\u003ch2 id=\"やったこと\"\u003eやったこと\u003c/h2\u003e\n\n\u003ch3 id=\"JavaScript\"\u003eJavaScript\u003c/h3\u003e\n\n\u003ch4 id=\"MDN-の-JavaScript-の部分を読む--手を動かす\"\u003eMDN の JavaScript の部分を読む \u0026amp; 手を動かす\u003c/h4\u003e\n\n\u003cp\u003e\u003cstrong\u003e所要期間: 約5日\u003c/strong\u003e\u003c/p\u003e\n\n\u003cul\u003e\n\u003cli\u003eRails 開発をする前に Ruby の基礎をがっつりやったことで早期にキャッチアップできた経験から、まずは JavaScript の言語仕様をしっかり把握しようと思いました。\u003c/li\u003e\n\u003cli\u003eここでは React でも頻出の import/export、アロー関数、分割代入に加えて、変数のスコープ（Ruby と違って最初戸惑った）などについて学びました。\u003c/li\u003e\n\u003cli\u003e数行のスクリプトを書いて実行、をとにかくひたすら繰り返していました。\u003c/li\u003e\n\u003c/ul\u003e\n\n\n\u003cp\u003e\u003ciframe src=\"https://hatenablog-parts.com/embed?url=https%3A%2F%2Fdeveloper.mozilla.org%2Fja%2Fdocs%2FWeb%2FJavaScript\" title=\"JavaScript\" class=\"embed-card embed-webcard\" scrolling=\"no\" frameborder=\"0\" style=\"display: block; width: 100%; height: 155px; max-width: 500px; margin: 10px 0px;\"\u003e\u003c/iframe\u003e\u003ccite class=\"hatena-citation\"\u003e\u003ca href=\"https://developer.mozilla.org/ja/docs/Web/JavaScript\"\u003edeveloper.mozilla.org\u003c/a\u003e\u003c/cite\u003e\u003c/p\u003e\n\n\u003ch4 id=\"JavaScript-Primer-を読む\"\u003eJavaScript Primer を読む\u003c/h4\u003e\n\n\u003cp\u003e\u003cstrong\u003e所要期間: 約2日\u003c/strong\u003e\u003c/p\u003e\n\n\u003cul\u003e\n\u003cli\u003eこちらは ES2015 を前提とした JavaScript の入門書。\u003c/li\u003e\n\u003cli\u003eMDN で分かりづらかった部分を補完したり、ES2015 以降の仕様のみを把握したい時に利用しました。\u003c/li\u003e\n\u003c/ul\u003e\n\n\n\u003cp\u003e\u003ciframe src=\"https://hatenablog-parts.com/embed?url=https%3A%2F%2Fjsprimer.net%2F\" title=\"この書籍について · JavaScript Primer #jsprimer\" class=\"embed-card embed-webcard\" scrolling=\"no\" frameborder=\"0\" style=\"display: block; width: 100%; height: 155px; max-width: 500px; margin: 10px 0px;\"\u003e\u003c/iframe\u003e\u003ccite class=\"hatena-citation\"\u003e\u003ca href=\"https://jsprimer.net/\"\u003ejsprimer.net\u003c/a\u003e\u003c/cite\u003e\u003c/p\u003e\n\n\u003ch4 id=\"YouTube-動画で-Promise-を学ぶ\"\u003eYouTube 動画で Promise を学ぶ\u003c/h4\u003e\n\n\u003cp\u003e\u003cstrong\u003e所要期間: 約0.5日\u003c/strong\u003e\u003c/p\u003e\n\n\u003cul\u003e\n\u003cli\u003ePromise、難しいですよね…。\u003c/li\u003e\n\u003cli\u003e有名な \u003ca href=\"https://azu.github.io/promises-book/\"\u003eJavaScript Promiseの本\u003c/a\u003e を読んだのですが、自分には難しくて中々理解できませんでした。\u003c/li\u003e\n\u003cli\u003e色々探し回った結果、以下の YouTube 動画がものすごく分かりやすくて何とか概要を掴むことができました。\u003c/li\u003e\n\u003c/ul\u003e\n\n\n\u003cp\u003e\u003ciframe width=\"480\" height=\"270\" src=\"https://www.youtube.com/embed/QO4NXhWo_NM?feature=oembed\" frameborder=\"0\" allow=\"accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture\" allowfullscreen\u003e\u003c/iframe\u003e\u003ccite class=\"hatena-citation\"\u003e\u003ca href=\"https://youtu.be/QO4NXhWo_NM\"\u003eyoutu.be\u003c/a\u003e\u003c/cite\u003e\u003c/p\u003e\n\n\u003ch4 id=\"デバッグ方法を学ぶ\"\u003eデバッグ方法を学ぶ\u003c/h4\u003e\n\n\u003cp\u003e\u003cstrong\u003e所要期間: 約0.5日\u003c/strong\u003e\u003c/p\u003e\n\n\u003cul\u003e\n\u003cli\u003eRuby には \u003ccode\u003epry\u003c/code\u003e という大好きなデバッガー（としても使える）ライブラリがあるのですが、JavaScript にも \u003ccode\u003edebugger\u003c/code\u003e ステートメントという素晴らしいものがあるのだと知りました。\n\n\u003cul\u003e\n\u003cli\u003e\u003ca href=\"https://postd.cc/how-to-not-hate-javascript-tips-from-the-frontline/\"\u003eJavaScript\u0026#x306E;\u0026#x30C7;\u0026#x30D0;\u0026#x30C3;\u0026#x30B0;\u0026#x65B9;\u0026#x6CD5; \u0026ndash; JS\u0026#x3092;\u0026#x5ACC;\u0026#x3044;\u0026#x306B;\u0026#x306A;\u0026#x3089;\u0026#x306A;\u0026#x3044;\u0026#x305F;\u0026#x3081;\u0026#x306E;Tips | POSTD\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003eあと Chrome DevTools の使い方も以下の記事を読んで把握しました。\n\n\u003cul\u003e\n\u003cli\u003e\u003ca href=\"https://ics.media/entry/190517/\"\u003eChrome\u0026#x306E;\u0026#x30C7;\u0026#x30D9;\u0026#x30ED;\u0026#x30C3;\u0026#x30D1;\u0026#x30FC;\u0026#x30C4;\u0026#x30FC;\u0026#x30EB;\u0026#x3067;JS\u0026#x3092;\u0026#x30C7;\u0026#x30D0;\u0026#x30C3;\u0026#x30B0;\u0026#x3059;\u0026#x308B;\u0026#x65B9;\u0026#x6CD5;\u0026#xFF08;2019\u0026#x5E74;\u0026#x7248;\u0026#xFF09; - ICS MEDIA\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\n\n\u003ch3 id=\"React\"\u003eReact\u003c/h3\u003e\n\n\u003ch4 id=\"React-公式のチュートリアルを2周する\"\u003eReact 公式のチュートリアルを2周する\u003c/h4\u003e\n\n\u003cp\u003e\u003cstrong\u003e所要期間: 約2日\u003c/strong\u003e\u003c/p\u003e\n\n\u003cul\u003e\n\u003cli\u003eJS を学ぶ前に一度やり、JS を学んでからもう一度やりました。React の概要を掴むには良かったです。\u003c/li\u003e\n\u003cli\u003eただ、このチュートリアル内では Class Components が前提で Hooks については全く触れられてないので、後述の Full Stack Open 2019 で補完しました。\u003c/li\u003e\n\u003c/ul\u003e\n\n\n\u003cp\u003e\u003ciframe src=\"https://hatenablog-parts.com/embed?url=https%3A%2F%2Fja.reactjs.org%2Ftutorial%2Ftutorial.html\" title=\"チュートリアル：React の導入 – React\" class=\"embed-card embed-webcard\" scrolling=\"no\" frameborder=\"0\" style=\"display: block; width: 100%; height: 155px; max-width: 500px; margin: 10px 0px;\"\u003e\u003c/iframe\u003e\u003ccite class=\"hatena-citation\"\u003e\u003ca href=\"https://ja.reactjs.org/tutorial/tutorial.html\"\u003eja.reactjs.org\u003c/a\u003e\u003c/cite\u003e\u003c/p\u003e\n\n\u003ch4 id=\"eggheadio-の動画で-Redux-を学ぶ\"\u003eegghead.io の動画で Redux を学ぶ\u003c/h4\u003e\n\n\u003cp\u003e\u003cstrong\u003e所要期間: 約2日\u003c/strong\u003e\u003c/p\u003e\n\n\u003cul\u003e\n\u003cli\u003e\u003ca href=\"https://redux.js.org/\"\u003eRedux 公式のドキュメント\u003c/a\u003e をさっと読んでから Redux の作者である Dan Abramov 氏が作成した以下の動画を観ながら手を動かしました。\u003c/li\u003e\n\u003cli\u003e序盤で \u003ccode\u003ecreateStore\u003c/code\u003e を自分で実装してみようという内容があるのですが、それがとても分かりやすかったです。\u003c/li\u003e\n\u003c/ul\u003e\n\n\n\u003cp\u003e\u003ciframe src=\"https://hatenablog-parts.com/embed?url=https%3A%2F%2Fegghead.io%2Fcourses%2Fgetting-started-with-redux\" title=\"Getting Started with Redux\" class=\"embed-card embed-webcard\" scrolling=\"no\" frameborder=\"0\" style=\"display: block; width: 100%; height: 155px; max-width: 500px; margin: 10px 0px;\"\u003e\u003c/iframe\u003e\u003ccite class=\"hatena-citation\"\u003e\u003ca href=\"https://egghead.io/courses/getting-started-with-redux\"\u003eegghead.io\u003c/a\u003e\u003c/cite\u003e\u003c/p\u003e\n\n\u003ch4 id=\"ヘルシンキ大学の-Web-開発カリキュラム-Full-Stack-Open-2019-をやる\"\u003eヘルシンキ大学の Web 開発カリキュラム Full Stack Open 2019 をやる\u003c/h4\u003e\n\n\u003cp\u003e\u003cstrong\u003e所要期間: 約10日\u003c/strong\u003e\u003c/p\u003e\n\n\u003cul\u003e\n\u003cli\u003eReact × Express.js × MongoDB の構成でイチから SPA 作れるようになろうぜ、という趣旨のチュートリアル。\u003c/li\u003e\n\u003cli\u003eReact は Hooks 前提で、さらに Jest を使ったテスト、Redux、GraphQL などのコンテンツもあり、何より説明が半端なく分かりやすい。今だったら React 公式のチュートリアルすっ飛ばしてこっちやった方がいいかも、と思うほど素晴らしい。\u003c/li\u003e\n\u003cli\u003e今回はフロントエンド技術の習得に注力したかったので、バックエンド開発部分（Part3, 4 辺り）は飛ばしました。\u003c/li\u003e\n\u003c/ul\u003e\n\n\n\u003cp\u003e\u003ciframe src=\"https://hatenablog-parts.com/embed?url=https%3A%2F%2Ffullstackopen.com%2Fen\" title=\"Full Stack Open 2019\" class=\"embed-card embed-webcard\" scrolling=\"no\" frameborder=\"0\" style=\"display: block; width: 100%; height: 155px; max-width: 500px; margin: 10px 0px;\"\u003e\u003c/iframe\u003e\u003ccite class=\"hatena-citation\"\u003e\u003ca href=\"https://fullstackopen.com/en\"\u003efullstackopen.com\u003c/a\u003e\u003c/cite\u003e\u003c/p\u003e\n\n\u003ch3 id=\"CSS\"\u003eCSS\u003c/h3\u003e\n\n\u003ch4 id=\"CSS-in-Depth-を読む--手を動かす\"\u003eCSS in Depth を読む \u0026amp; 手を動かす\u003c/h4\u003e\n\n\u003cp\u003e\u003cstrong\u003e所要期間: 約5日\u003c/strong\u003e\u003c/p\u003e\n\n\u003cul\u003e\n\u003cli\u003eCSS がずっと苦手だった私を助け出してくれた一冊。Flexbox と Grid Layout の章を読んだだけで元を取れた気がします。\u003c/li\u003e\n\u003cli\u003eタイトルや出版社からしてめちゃくちゃアカデミックな内容を想像していたんですが、全然違いました。一つ一つのプロパティ指定について丁寧に解説してくれるようなとても優しい本です。\u003c/li\u003e\n\u003cli\u003e出版日が2018年とけっこう新しいのも嬉しい。\u003c/li\u003e\n\u003c/ul\u003e\n\n\n\u003cp\u003e\u003cdiv class=\"hatena-asin-detail\"\u003e\u003ca href=\"http://www.amazon.co.jp/exec/obidos/ASIN/1617293458/hatena-blog-22/\"\u003e\u003cimg src=\"https://images-fe.ssl-images-amazon.com/images/I/51Plttwa-aL._SL160_.jpg\" class=\"hatena-asin-detail-image\" alt=\"CSS in Depth\" title=\"CSS in Depth\"\u003e\u003c/a\u003e\u003cdiv class=\"hatena-asin-detail-info\"\u003e\u003cp class=\"hatena-asin-detail-title\"\u003e\u003ca href=\"http://www.amazon.co.jp/exec/obidos/ASIN/1617293458/hatena-blog-22/\"\u003eCSS in Depth\u003c/a\u003e\u003c/p\u003e\u003cul\u003e\u003cli\u003e\u003cspan class=\"hatena-asin-detail-label\"\u003e作者:\u003c/span\u003e Keith J. Grant\u003c/li\u003e\u003cli\u003e\u003cspan class=\"hatena-asin-detail-label\"\u003e出版社/メーカー:\u003c/span\u003e Manning Publications\u003c/li\u003e\u003cli\u003e\u003cspan class=\"hatena-asin-detail-label\"\u003e発売日:\u003c/span\u003e 2018/04/07\u003c/li\u003e\u003cli\u003e\u003cspan class=\"hatena-asin-detail-label\"\u003eメディア:\u003c/span\u003e ペーパーバック\u003c/li\u003e\u003cli\u003e\u003ca href=\"http://d.hatena.ne.jp/asin/1617293458/hatena-blog-22\" target=\"_blank\"\u003eこの商品を含むブログを見る\u003c/a\u003e\u003c/li\u003e\u003c/ul\u003e\u003c/div\u003e\u003cdiv class=\"hatena-asin-detail-foot\"\u003e\u003c/div\u003e\u003c/div\u003e\u003c/p\u003e\n\n\u003ch3 id=\"その他\"\u003eその他\u003c/h3\u003e\n\n\u003ch4 id=\"Atomic-Design-を理解する\"\u003eAtomic Design を理解する\u003c/h4\u003e\n\n\u003cp\u003e\u003cstrong\u003e所要期間: 約10分\u003c/strong\u003e\u003c/p\u003e\n\n\u003cul\u003e\n\u003cli\u003e弊チームでは Atomic Design に則ったディレクトリ構成をしているので、以下の記事を読んで概要を掴みました。\u003c/li\u003e\n\u003c/ul\u003e\n\n\n\u003cp\u003e\u003ciframe src=\"https://hatenablog-parts.com/embed?url=https%3A%2F%2Fdesign.dena.com%2Fdesign%2Fatomic-design-%25E3%2582%2592%25E5%2588%2586%25E3%2581%258B%25E3%2581%25A3%25E3%2581%259F%25E3%2581%25A4%25E3%2582%2582%25E3%2582%258A%25E3%2581%25AB%25E3%2581%25AA%25E3%2582%258B%2F\" title=\"Atomic Design を分かったつもりになる | DeNA DESIGN BLOG\" class=\"embed-card embed-webcard\" scrolling=\"no\" frameborder=\"0\" style=\"display: block; width: 100%; height: 155px; max-width: 500px; margin: 10px 0px;\"\u003e\u003c/iframe\u003e\u003ccite class=\"hatena-citation\"\u003e\u003ca href=\"https://design.dena.com/design/atomic-design-%E3%82%92%E5%88%86%E3%81%8B%E3%81%A3%E3%81%9F%E3%81%A4%E3%82%82%E3%82%8A%E3%81%AB%E3%81%AA%E3%82%8B/\"\u003edesign.dena.com\u003c/a\u003e\u003c/cite\u003e\u003c/p\u003e\n\n\u003ch2 id=\"最後に\"\u003e最後に\u003c/h2\u003e\n\n\u003cp\u003e以上の教材で学んだことで、Ruby と Rails を使ってのバックエンド開発しかほぼやったことなかった私でもある程度自走してフロントエンドのコードを読んだり書いたりできるようになりました。\u003c/p\u003e\n\n\u003cp\u003e\u003cstrong\u003e個人的には CSS in Depth とヘルシンキ大学の Full Stack Open 2019 が教材として最高でした。\u003c/strong\u003e\u003c/p\u003e\n\n\u003cp\u003e他の会社さまでも Rails 経験のみのエンジニアを採用して React も書けるように教育していく、みたいなケースがあると思います。そんな時にこの記事が参考になれば幸いです。\u003c/p\u003e\n\n\u003cp\u003eそれではまたお会いしましょう ＾＾\u003c/p\u003e\n\u003cdiv class=\"footnotes\"\u003e\n\u003chr/\u003e\n\u003col\u003e\n\u003cli id=\"fn:1\"\u003e\n\u003cp\u003e例えば \u003ca href=\"https://github.com/facebook/react/blob/master/CHANGELOG.md#1680-february-6-2019\"\u003eReact の Hooks が正式に導入されたのは2019年2月\u003c/a\u003e なので、2018年代のコンテンツでは Hooks について言及されていないものがほとんどです。\u003ca href=\"#fnref:1\" rev=\"footnote\"\u003e\u0026#8617;\u003c/a\u003e\u003c/p\u003e\u003c/li\u003e\n\u003c/ol\u003e\n\u003c/div\u003e\n\n","contentSnippet":"id:daido1976 です。入社してからあっという間に1年が経っていました。直近3ヶ月ほどプライベートでフロントエンド開発の勉強をしていたのですが、ここ数年で CSS の Grid や React の Hooks が新しく導入されたことなどもあり、少し古いコンテンツだと教材として役立たない1 と感じることが多かったので、本記事では私が実際にやってみた中で 2019年時点で オススメできると判断した教材や学び方を皆さんにご紹介したいと思います。はじめにやったことJavaScriptMDN の JavaScript の部分を読む \u0026 手を動かすJavaScript Primer を読むYouTube 動画で Promise を学ぶデバッグ方法を学ぶReactReact 公式のチュートリアルを2周するegghead.io の動画で Redux を学ぶヘルシンキ大学の Web 開発カリキュラム Full Stack Open 2019 をやるCSSCSS in Depth を読む \u0026 手を動かすその他Atomic Design を理解する最後にはじめに今回は実務レベルでフロントエンド開発できるスキルを身につけたい、という目標があったので JavaScript はもちろん所属チームである EC Booster で採用している React、さらにフロントエンド開発において避けて通ることのできない CSS の学習を前提としています。参考までに筆者のスペックは 👇 の記事の1年後をご想像ください。developer.feedforce.jp具体的にはこの後 Ruby や Rails を使って、SPA のための GraphQL API サーバや Google 広告系の API を利用したバッチ処理の実装など、バックエンド開発をメインに行なっていました。やったことJavaScriptMDN の JavaScript の部分を読む \u0026 手を動かす所要期間: 約5日Rails 開発をする前に Ruby の基礎をがっつりやったことで早期にキャッチアップできた経験から、まずは JavaScript の言語仕様をしっかり把握しようと思いました。ここでは React でも頻出の import/export、アロー関数、分割代入に加えて、変数のスコープ（Ruby と違って最初戸惑った）などについて学びました。数行のスクリプトを書いて実行、をとにかくひたすら繰り返していました。developer.mozilla.orgJavaScript Primer を読む所要期間: 約2日こちらは ES2015 を前提とした JavaScript の入門書。MDN で分かりづらかった部分を補完したり、ES2015 以降の仕様のみを把握したい時に利用しました。jsprimer.netYouTube 動画で Promise を学ぶ所要期間: 約0.5日Promise、難しいですよね…。有名な JavaScript Promiseの本 を読んだのですが、自分には難しくて中々理解できませんでした。色々探し回った結果、以下の YouTube 動画がものすごく分かりやすくて何とか概要を掴むことができました。youtu.beデバッグ方法を学ぶ所要期間: 約0.5日Ruby には pry という大好きなデバッガー（としても使える）ライブラリがあるのですが、JavaScript にも debugger ステートメントという素晴らしいものがあるのだと知りました。JavaScriptのデバッグ方法 – JSを嫌いにならないためのTips | POSTDあと Chrome DevTools の使い方も以下の記事を読んで把握しました。ChromeのデベロッパーツールでJSをデバッグする方法（2019年版） - ICS MEDIAReactReact 公式のチュートリアルを2周する所要期間: 約2日JS を学ぶ前に一度やり、JS を学んでからもう一度やりました。React の概要を掴むには良かったです。ただ、このチュートリアル内では Class Components が前提で Hooks については全く触れられてないので、後述の Full Stack Open 2019 で補完しました。ja.reactjs.orgegghead.io の動画で Redux を学ぶ所要期間: 約2日Redux 公式のドキュメント をさっと読んでから Redux の作者である Dan Abramov 氏が作成した以下の動画を観ながら手を動かしました。序盤で createStore を自分で実装してみようという内容があるのですが、それがとても分かりやすかったです。egghead.ioヘルシンキ大学の Web 開発カリキュラム Full Stack Open 2019 をやる所要期間: 約10日React × Express.js × MongoDB の構成でイチから SPA 作れるようになろうぜ、という趣旨のチュートリアル。React は Hooks 前提で、さらに Jest を使ったテスト、Redux、GraphQL などのコンテンツもあり、何より説明が半端なく分かりやすい。今だったら React 公式のチュートリアルすっ飛ばしてこっちやった方がいいかも、と思うほど素晴らしい。今回はフロントエンド技術の習得に注力したかったので、バックエンド開発部分（Part3, 4 辺り）は飛ばしました。fullstackopen.comCSSCSS in Depth を読む \u0026 手を動かす所要期間: 約5日CSS がずっと苦手だった私を助け出してくれた一冊。Flexbox と Grid Layout の章を読んだだけで元を取れた気がします。タイトルや出版社からしてめちゃくちゃアカデミックな内容を想像していたんですが、全然違いました。一つ一つのプロパティ指定について丁寧に解説してくれるようなとても優しい本です。出版日が2018年とけっこう新しいのも嬉しい。CSS in Depth作者: Keith J. Grant出版社/メーカー: Manning Publications発売日: 2018/04/07メディア: ペーパーバックこの商品を含むブログを見るその他Atomic Design を理解する所要期間: 約10分弊チームでは Atomic Design に則ったディレクトリ構成をしているので、以下の記事を読んで概要を掴みました。design.dena.com最後に以上の教材で学んだことで、Ruby と Rails を使ってのバックエンド開発しかほぼやったことなかった私でもある程度自走してフロントエンドのコードを読んだり書いたりできるようになりました。個人的には CSS in Depth とヘルシンキ大学の Full Stack Open 2019 が教材として最高でした。他の会社さまでも Rails 経験のみのエンジニアを採用して React も書けるように教育していく、みたいなケースがあると思います。そんな時にこの記事が参考になれば幸いです。それではまたお会いしましょう ＾＾例えば React の Hooks が正式に導入されたのは2019年2月 なので、2018年代のコンテンツでは Hooks について言及されていないものがほとんどです。↩","link":"https://developer.feedforce.jp/entry/2019/09/04/140000","isoDate":"2019-09-04T05:00:00.000Z","dateMiliSeconds":1567573200000,"imageUrl":"https://images-fe.ssl-images-amazon.com/images/I/51Plttwa-aL._SL160_.jpg","authorName":"daido1976"},{"title":"『オブジェクト指向設計実践ガイド』の読書会をやっています","content":"\u003cp\u003e\u003ca href=\"http://blog.hatena.ne.jp/daido1976/\" class=\"hatena-id-icon\"\u003e\u003cimg src=\"https://cdn.profile-image.st-hatena.com/users/daido1976/profile.png\" width=\"16\" height=\"16\" alt=\"\" class=\"hatena-id-icon\"\u003eid:daido1976\u003c/a\u003e です。入社してからあっという間に8ヶ月が経ちました。\u003c/p\u003e\n\n\u003cp\u003eこの記事は \u003ca href=\"https://adventar.org/calendars/3235\"\u003efeedforce Advent Calendar 2018\u003c/a\u003e の16日目の記事です。(遅くなってごめんなさい…)\u003c/p\u003e\n\n\u003cp\u003e15日目は \u003ca href=\"http://blog.hatena.ne.jp/pokotyamu/\" class=\"hatena-id-icon\"\u003e\u003cimg src=\"https://cdn.profile-image.st-hatena.com/users/pokotyamu/profile.png\" width=\"16\" height=\"16\" alt=\"\" class=\"hatena-id-icon\"\u003eid:pokotyamu\u003c/a\u003e が \u003ca href=\"https://pokotyamu.hatenablog.com/entry/2018/12/15/161234\"\u003e障害対応に強くなりたいのでレポートの書き方について考えてみた\u003c/a\u003e を書いてくれました！私も障害対応に強いエンジニアを目指して頑張りやす。\u003c/p\u003e\n\n\u003cp\u003eさて、今回は現在弊社で行っている『オブジェクト指向設計実践ガイド』の読書会の紹介をしたいと思います。\u003c/p\u003e\n\n\u003cp\u003eちなみに昨年も読書会は開催されていたようですね。\u003c/p\u003e\n\n\u003cp\u003e\u003ciframe src=\"https://hatenablog-parts.com/embed?url=https%3A%2F%2Fdeveloper.feedforce.jp%2Fentry%2F2017%2F10%2F27%2F183338\" title=\"『オブジェクト指向設計実践ガイド』を読んで - Feedforce Developer Blog\" class=\"embed-card embed-blogcard\" scrolling=\"no\" frameborder=\"0\" style=\"display: block; width: 100%; height: 190px; max-width: 500px; margin: 10px 0px;\"\u003e\u003c/iframe\u003e\u003ccite class=\"hatena-citation\"\u003e\u003ca href=\"https://developer.feedforce.jp/entry/2017/10/27/183338\"\u003edeveloper.feedforce.jp\u003c/a\u003e\u003c/cite\u003e\u003c/p\u003e\n\n\u003cp\u003e私個人としては前回の『メタプログラミングRuby』の読書会以来2度目の読書会です！\u003c/p\u003e\n\n\u003cp\u003e\u003ciframe src=\"https://hatenablog-parts.com/embed?url=https%3A%2F%2Fdeveloper.feedforce.jp%2Fentry%2F2018%2F07%2F19%2F000000\" title=\"新人エンジニア達がメタプログラミング Ruby の読書感想会をやった話 - Feedforce Developer Blog\" class=\"embed-card embed-blogcard\" scrolling=\"no\" frameborder=\"0\" style=\"display: block; width: 100%; height: 190px; max-width: 500px; margin: 10px 0px;\"\u003e\u003c/iframe\u003e\u003ccite class=\"hatena-citation\"\u003e\u003ca href=\"https://developer.feedforce.jp/entry/2018/07/19/000000\"\u003edeveloper.feedforce.jp\u003c/a\u003e\u003c/cite\u003e\u003c/p\u003e\n\n\u003ch2\u003eで、どんな感じ？\u003c/h2\u003e\n\n\u003ch3\u003eざっくり進め方\u003c/h3\u003e\n\n\u003cp\u003e週に一度、参加したいメンバーが集まって毎回1章ずつ進めていきます。(現在第3章まで終了)\u003c/p\u003e\n\n\u003cp\u003eその日やる章は読んできている前提で、事前に『気になったこと』『役立ちそうなこと』『疑問に思ったこと』『その他諸々話したいこと』などを付箋に書いてきてもらいます。\u003c/p\u003e\n\n\u003cp\u003eそれをホワイトボードに貼りながら、みんなであれこれ話し合います。その日の読書会の振り返りも含めて所要時間は1〜1.5時間ぐらいです。\u003c/p\u003e\n\n\u003ch3\u003e『オブジェクト指向設計実践ガイド』読書会のホワイトボード\u003c/h3\u003e\n\n\u003cp\u003e\u003cfigure class=\"figure-image figure-image-fotolife\" title=\"第3章のホワイトボード\"\u003e\u003cspan itemscope itemtype=\"http://schema.org/Photograph\"\u003e\u003cimg src=\"https://cdn-ak.f.st-hatena.com/images/fotolife/d/daido1976/20181220/20181220211224.jpg\" alt=\"f:id:daido1976:20181220211224j:plain\" title=\"f:id:daido1976:20181220211224j:plain\" class=\"hatena-fotolife\" itemprop=\"image\"\u003e\u003c/span\u003e\u003cfigcaption\u003e個人的にすごく好きな第3章のホワイトボード\u003c/figcaption\u003e\u003c/figure\u003e\u003c/p\u003e\n\n\u003ch3\u003e出てきた話題に個人的な感想を添えて\u003c/h3\u003e\n\n\u003cp\u003e先日やって記憶に新しい第3章の話が中心ですが、、、\u003c/p\u003e\n\n\u003ch4\u003eなんでもかんでも DI すればいいってもんでもない\u003c/h4\u003e\n\n\u003cp\u003eこういう本で出てきたテクニックってすぐプロダクトのコードで使いたくなるけど、何も考えずに DI しまくると、逆に読みづらいコードになるよね、というお話。\u003c/p\u003e\n\n\u003cp\u003e本書内でも依存を減らす別解として DI ではなく、以下の \u003ccode\u003eGear#wheel\u003c/code\u003e のようにクラス内の別メソッドにインスタンスの作成を切り出す方法も紹介されていましたね。\u003c/p\u003e\n\n\u003cpre class=\"code lang-ruby\" data-lang=\"ruby\" data-unlink\u003e\u003cspan class=\"synPreProc\"\u003eclass\u003c/span\u003e \u003cspan class=\"synType\"\u003eGear\u003c/span\u003e\n  \u003cspan class=\"synStatement\"\u003eattr_reader\u003c/span\u003e \u003cspan class=\"synConstant\"\u003e:chainring\u003c/span\u003e, \u003cspan class=\"synConstant\"\u003e:cog\u003c/span\u003e, \u003cspan class=\"synConstant\"\u003e:rim\u003c/span\u003e, \u003cspan class=\"synConstant\"\u003e:tire\u003c/span\u003e, \u003cspan class=\"synConstant\"\u003e:wheel\u003c/span\u003e\n  \u003cspan class=\"synPreProc\"\u003edef\u003c/span\u003e \u003cspan class=\"synIdentifier\"\u003einitialize\u003c/span\u003e(chainring, cog, rim, tire)\n    \u003cspan class=\"synIdentifier\"\u003e@chainring\u003c/span\u003e = chainring\n    \u003cspan class=\"synIdentifier\"\u003e@cog\u003c/span\u003e       = cog\n    \u003cspan class=\"synIdentifier\"\u003e@rim\u003c/span\u003e       = rim\n    \u003cspan class=\"synIdentifier\"\u003e@tire\u003c/span\u003e      = tire\n  \u003cspan class=\"synPreProc\"\u003eend\u003c/span\u003e\n\n  \u003cspan class=\"synPreProc\"\u003edef\u003c/span\u003e \u003cspan class=\"synIdentifier\"\u003egear_inches\u003c/span\u003e\n    ratio * wheel.diameter\n  \u003cspan class=\"synPreProc\"\u003eend\u003c/span\u003e\n\n  \u003cspan class=\"synPreProc\"\u003edef\u003c/span\u003e \u003cspan class=\"synIdentifier\"\u003ewheel\u003c/span\u003e\n    \u003cspan class=\"synIdentifier\"\u003e@wheel\u003c/span\u003e ||= \u003cspan class=\"synType\"\u003eWheel\u003c/span\u003e.new(rim, tire)\n  \u003cspan class=\"synPreProc\"\u003eend\u003c/span\u003e\n\u003cspan class=\"synComment\"\u003e# ...\u003c/span\u003e\n\u003c/pre\u003e\n\n\n\u003cp\u003eちなみに私は DI について Wikipedia で \u003ca href=\"https://ja.wikipedia.org/wiki/%E4%BE%9D%E5%AD%98%E6%80%A7%E3%81%AE%E6%B3%A8%E5%85%A5\"\u003e依存性の注入\u003c/a\u003e のページを10回ぐらい読んでも全然意味がわからなかったのですが、この本を読んですんなり理解が出来ました。\u003c/p\u003e\n\n\u003cp\u003e個人的には「Dependency injection (DI)」とか「依存性の注入」とか仰々しい名前があまり好きでないので、初学者に教える機会があれば「インスタンスの作成をクラスの外に切り出すと依存が減っていい感じに書けるよ」と言ってあげようと思います。\u003c/p\u003e\n\n\u003ch4\u003eキーワード引数と net/http の話\u003c/h4\u003e\n\n\u003cp\u003e第3章の中盤は「引数の順番への依存を取り除く」ための話が数ページに渡って続けられていたのですが、Ruby 2.4 ぐらいからプログラミングを始めたゆとりの私にとっては「ここに書いてあること全部、キーワード引数でよくないすか？？？」という感想でした。\u003c/p\u003e\n\n\u003cp\u003e実際大抵の場合はキーワード引数で代替できるという話でしたが、例えば Ruby の標準ライブラリである \u003ca href=\"https://docs.ruby-lang.org/ja/latest/library/net=2fhttp.html\"\u003enet/http\u003c/a\u003e の \u003ca href=\"https://docs.ruby-lang.org/ja/latest/class/Net=3a=3aHTTP.html\"\u003eNet::HTTP クラス\u003c/a\u003e だと、引数の数がむちゃくちゃ多いので全部キーワード引数になると辛いよねという話をしていただき、なるほどなーと思いました。\u003c/p\u003e\n\n\u003ch4\u003e「知っている」と「依存」は同義\u003c/h4\u003e\n\n\u003cp\u003e本書内では「○○を知っているオブジェクト」という言い回しがよく使われますが、オブジェクトが他のオブジェクトについて「知っている」ということは同時にオブジェクト同士が「依存関係にある」ことだ、と明言されており、これはわかりやすいねという話をしました。\u003c/p\u003e\n\n\u003cp\u003eよくアプリケーションを開発している時でも、「このクラス (モジュール) が○○を知ってるのって自然かな？」みたいな話が上がるのですが、その観点って大事なんだなと腹落ちしました。\u003c/p\u003e\n\n\u003ch3\u003e結論\u003c/h3\u003e\n\n\u003cp\u003e\u003cstrong\u003e『オブジェクト指向設計実践ガイド』めっちゃ勉強になります！！！\u003c/strong\u003e\u003c/p\u003e\n\n\u003cp\u003e\u003cdiv class=\"hatena-asin-detail\"\u003e\u003ca href=\"http://www.amazon.co.jp/exec/obidos/ASIN/477418361X/hatena-blog-22/\"\u003e\u003cimg src=\"https://images-fe.ssl-images-amazon.com/images/I/51-TCt0H4UL._SL160_.jpg\" class=\"hatena-asin-detail-image\" alt=\"オブジェクト指向設計実践ガイド ~Rubyでわかる 進化しつづける柔軟なアプリケーションの育て方\" title=\"オブジェクト指向設計実践ガイド ~Rubyでわかる 進化しつづける柔軟なアプリケーションの育て方\"\u003e\u003c/a\u003e\u003cdiv class=\"hatena-asin-detail-info\"\u003e\u003cp class=\"hatena-asin-detail-title\"\u003e\u003ca href=\"http://www.amazon.co.jp/exec/obidos/ASIN/477418361X/hatena-blog-22/\"\u003eオブジェクト指向設計実践ガイド ~Rubyでわかる 進化しつづける柔軟なアプリケーションの育て方\u003c/a\u003e\u003c/p\u003e\u003cul\u003e\u003cli\u003e\u003cspan class=\"hatena-asin-detail-label\"\u003e作者:\u003c/span\u003e Sandi Metz,?山泰基\u003c/li\u003e\u003cli\u003e\u003cspan class=\"hatena-asin-detail-label\"\u003e出版社/メーカー:\u003c/span\u003e 技術評論社\u003c/li\u003e\u003cli\u003e\u003cspan class=\"hatena-asin-detail-label\"\u003e発売日:\u003c/span\u003e 2016/09/02\u003c/li\u003e\u003cli\u003e\u003cspan class=\"hatena-asin-detail-label\"\u003eメディア:\u003c/span\u003e 大型本\u003c/li\u003e\u003cli\u003e\u003ca href=\"http://d.hatena.ne.jp/asin/477418361X/hatena-blog-22\" target=\"_blank\"\u003eこの商品を含むブログ (6件) を見る\u003c/a\u003e\u003c/li\u003e\u003c/ul\u003e\u003c/div\u003e\u003cdiv class=\"hatena-asin-detail-foot\"\u003e\u003c/div\u003e\u003c/div\u003e\u003c/p\u003e\n\n\u003ch2\u003e最後に\u003c/h2\u003e\n\n\u003cp\u003e今回は弊社で行っている『オブジェクト指向設計実践ガイド』の読書会の紹介をしました！\u003c/p\u003e\n\n\u003cp\u003eそれにしても、『オブジェクト指向設計実践ガイド』がたまにプードル本って呼ばれる理由が全然わからなかったのですが、原題が『Practical Object-Oriented Design in Ruby』だから頭文字を取って POODR (プードル) なんですね…！\u003c/p\u003e\n\n\u003cp\u003e\u003ca href=\"https://www.poodr.com/\"\u003ePractical Object-Oriented Design in Ruby\u003c/a\u003e\u003c/p\u003e\n\n\u003cp\u003e \u003ca href=\"https://adventar.org/calendars/3235\"\u003efeedforce Advent Calendar 2018\u003c/a\u003e  の17日目は \u003ca href=\"http://blog.hatena.ne.jp/daikiki/\" class=\"hatena-id-icon\"\u003e\u003cimg src=\"https://cdn.profile-image.st-hatena.com/users/daikiki/profile.png\" width=\"16\" height=\"16\" alt=\"\" class=\"hatena-id-icon\"\u003eid:daikiki\u003c/a\u003e の \u003ca href=\"http://omatsu-daichaso.hatenablog.com/entry/2018/12/17/003212\"\u003e情熱と強引さが人を巻き込む ~ゴルフで感じた身になる教訓~\u003c/a\u003e です！ゴルフの記事かと思ったら公私ともに活かせる「巻き込み力」のお話でした。ゴルフ好きな方もそうでない方もぜひご覧ください！\u003c/p\u003e\n\n\u003cp\u003eそれでは、またお会いしましょう ＾＾\u003c/p\u003e\n\n\u003cp\u003e\u003cfigure class=\"figure-image figure-image-fotolife\" title=\"みんなのオブジェクト指向設計実践ガイド (POODR本)\"\u003e\u003cspan itemscope itemtype=\"http://schema.org/Photograph\"\u003e\u003cimg src=\"https://cdn-ak.f.st-hatena.com/images/fotolife/d/daido1976/20181220/20181220211616.jpg\" alt=\"f:id:daido1976:20181220211616j:plain\" title=\"f:id:daido1976:20181220211616j:plain\" class=\"hatena-fotolife\" itemprop=\"image\"\u003e\u003c/span\u003e\u003cfigcaption\u003eみんなのオブジェクト指向設計実践ガイド (POODR本)\u003c/figcaption\u003e\u003c/figure\u003e\u003c/p\u003e\n","contentSnippet":"id:daido1976 です。入社してからあっという間に8ヶ月が経ちました。この記事は feedforce Advent Calendar 2018 の16日目の記事です。(遅くなってごめんなさい…)15日目は id:pokotyamu が 障害対応に強くなりたいのでレポートの書き方について考えてみた を書いてくれました！私も障害対応に強いエンジニアを目指して頑張りやす。さて、今回は現在弊社で行っている『オブジェクト指向設計実践ガイド』の読書会の紹介をしたいと思います。ちなみに昨年も読書会は開催されていたようですね。developer.feedforce.jp私個人としては前回の『メタプログラミングRuby』の読書会以来2度目の読書会です！developer.feedforce.jpで、どんな感じ？ざっくり進め方週に一度、参加したいメンバーが集まって毎回1章ずつ進めていきます。(現在第3章まで終了)その日やる章は読んできている前提で、事前に『気になったこと』『役立ちそうなこと』『疑問に思ったこと』『その他諸々話したいこと』などを付箋に書いてきてもらいます。それをホワイトボードに貼りながら、みんなであれこれ話し合います。その日の読書会の振り返りも含めて所要時間は1〜1.5時間ぐらいです。『オブジェクト指向設計実践ガイド』読書会のホワイトボード個人的にすごく好きな第3章のホワイトボード出てきた話題に個人的な感想を添えて先日やって記憶に新しい第3章の話が中心ですが、、、なんでもかんでも DI すればいいってもんでもないこういう本で出てきたテクニックってすぐプロダクトのコードで使いたくなるけど、何も考えずに DI しまくると、逆に読みづらいコードになるよね、というお話。本書内でも依存を減らす別解として DI ではなく、以下の Gear#wheel のようにクラス内の別メソッドにインスタンスの作成を切り出す方法も紹介されていましたね。class Gear  attr_reader :chainring, :cog, :rim, :tire, :wheel  def initialize(chainring, cog, rim, tire)    @chainring = chainring    @cog       = cog    @rim       = rim    @tire      = tire  end  def gear_inches    ratio * wheel.diameter  end  def wheel    @wheel ||= Wheel.new(rim, tire)  end# ...ちなみに私は DI について Wikipedia で 依存性の注入 のページを10回ぐらい読んでも全然意味がわからなかったのですが、この本を読んですんなり理解が出来ました。個人的には「Dependency injection (DI)」とか「依存性の注入」とか仰々しい名前があまり好きでないので、初学者に教える機会があれば「インスタンスの作成をクラスの外に切り出すと依存が減っていい感じに書けるよ」と言ってあげようと思います。キーワード引数と net/http の話第3章の中盤は「引数の順番への依存を取り除く」ための話が数ページに渡って続けられていたのですが、Ruby 2.4 ぐらいからプログラミングを始めたゆとりの私にとっては「ここに書いてあること全部、キーワード引数でよくないすか？？？」という感想でした。実際大抵の場合はキーワード引数で代替できるという話でしたが、例えば Ruby の標準ライブラリである net/http の Net::HTTP クラス だと、引数の数がむちゃくちゃ多いので全部キーワード引数になると辛いよねという話をしていただき、なるほどなーと思いました。「知っている」と「依存」は同義本書内では「○○を知っているオブジェクト」という言い回しがよく使われますが、オブジェクトが他のオブジェクトについて「知っている」ということは同時にオブジェクト同士が「依存関係にある」ことだ、と明言されており、これはわかりやすいねという話をしました。よくアプリケーションを開発している時でも、「このクラス (モジュール) が○○を知ってるのって自然かな？」みたいな話が上がるのですが、その観点って大事なんだなと腹落ちしました。結論『オブジェクト指向設計実践ガイド』めっちゃ勉強になります！！！オブジェクト指向設計実践ガイド ~Rubyでわかる 進化しつづける柔軟なアプリケーションの育て方作者: Sandi Metz,?山泰基出版社/メーカー: 技術評論社発売日: 2016/09/02メディア: 大型本この商品を含むブログ (6件) を見る最後に今回は弊社で行っている『オブジェクト指向設計実践ガイド』の読書会の紹介をしました！それにしても、『オブジェクト指向設計実践ガイド』がたまにプードル本って呼ばれる理由が全然わからなかったのですが、原題が『Practical Object-Oriented Design in Ruby』だから頭文字を取って POODR (プードル) なんですね…！Practical Object-Oriented Design in Ruby feedforce Advent Calendar 2018  の17日目は id:daikiki の 情熱と強引さが人を巻き込む ~ゴルフで感じた身になる教訓~ です！ゴルフの記事かと思ったら公私ともに活かせる「巻き込み力」のお話でした。ゴルフ好きな方もそうでない方もぜひご覧ください！それでは、またお会いしましょう ＾＾みんなのオブジェクト指向設計実践ガイド (POODR本)","link":"https://developer.feedforce.jp/entry/2018/12/22/191620","isoDate":"2018-12-22T10:16:20.000Z","dateMiliSeconds":1545473780000,"imageUrl":"https://images-fe.ssl-images-amazon.com/images/I/51-TCt0H4UL._SL160_.jpg","authorName":"daido1976"},{"title":"弊社の新人エンジニア研修カリキュラムを惜しみなく公開してみる","content":"\u003cp\u003eこんにちは！今年の4月にポテンシャル枠で入社した \u003ca href=\"http://blog.hatena.ne.jp/daido1976/\" class=\"hatena-id-icon\"\u003e\u003cimg src=\"https://cdn.profile-image.st-hatena.com/users/daido1976/profile.png\" width=\"16\" height=\"16\" alt=\"\" class=\"hatena-id-icon\"\u003eid:daido1976\u003c/a\u003e です！引き続き Rails に弄ばれる日々を過ごしています。\u003c/p\u003e\n\n\u003cp\u003eさて、今回は約4ヶ月間の新人エンジニア研修を受け終えた私が弊社の研修カリキュラムを公開し、まとめや実際に受けてみての感想を書いていきたいと思います。\u003c/p\u003e\n\n\u003ch2\u003e前提として\u003c/h2\u003e\n\n\u003cp\u003eフィードフォースでは今年4月〜5月のほぼ同時期に \u003ca href=\"https://e-navigator.feedforce.jp/\"\u003ee-Navigator\u003c/a\u003e というプログラムを通じて、私を含む3名の実務未経験エンジニアが入社しています。\u003c/p\u003e\n\n\u003cp\u003e今回の研修は、e-Navigator でもレビュアーだった \u003ca href=\"https://twitter.com/sukechannnn\"\u003e@sukechannnn\u003c/a\u003e がメンターとして上記3名の新人エンジニアをフォローする体制で進めました！\u003c/p\u003e\n\n\u003ch2\u003e研修の成果を3行で\u003c/h2\u003e\n\n\u003cul\u003e\n\u003cli\u003e\u003cstrong\u003e入社時に「プログラミング歴3ヶ月の超初心者エンジニア」だった私が\u003c/strong\u003e\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003eフィードフォースで約4ヶ月間の新人エンジニア研修を受けて\u003c/strong\u003e\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003e配属後にある程度自走してコードが書けるぐらいのスキルを身につけることが出来ました！\u003c/strong\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\n\n\u003ch2\u003eざっくりスケジュール\u003c/h2\u003e\n\n\u003ch3\u003e4月\u003c/h3\u003e\n\n\u003cul\u003e\n\u003cli\u003e\u003ca href=\"https://www.amazon.co.jp/exec/obidos/ASIN/4774193976/hatena-blog-22/\"\u003eプロを目指す人のためのRuby入門 言語仕様からテスト駆動開発・デバッグ技法まで\u003c/a\u003e の例題を解く \u0026amp; 読む\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"https://www.amazon.co.jp/exec/obidos/ASIN/4863542178/hatena-blog-22/\"\u003eわかばちゃんと学ぶ Git使い方入門\u003c/a\u003e を読む\u003c/li\u003e\n\u003cli\u003eVim 研修（vimtutor を2周する）\u003c/li\u003e\n\u003c/ul\u003e\n\n\n\u003ch3\u003e5月〜6月\u003c/h3\u003e\n\n\u003cul\u003e\n\u003cli\u003e\u003ca href=\"https://www.amazon.co.jp/exec/obidos/ASIN/4774165166/hatena-blog-22/\"\u003eパーフェクトRuby on Rails\u003c/a\u003e の1章〜5章を読む \u0026amp; 6章〜7章のアプリ作成\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"https://www.amazon.co.jp/exec/obidos/ASIN/4873117437/hatena-blog-22/\"\u003eメタプログラミングRuby 第2版\u003c/a\u003e を読む\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"https://www.amazon.co.jp/exec/obidos/ASIN/4774142042/hatena-blog-22/\"\u003eWebを支える技術\u003c/a\u003e を読む\u003c/li\u003e\n\u003cli\u003e社内スクラム研修\u003c/li\u003e\n\u003c/ul\u003e\n\n\n\u003ch3\u003e7月\u003c/h3\u003e\n\n\u003cul\u003e\n\u003cli\u003eローテーション配属研修（2チーム）\u003c/li\u003e\n\u003cli\u003eシンプルな Todo アプリの API 開発\u003c/li\u003e\n\u003cli\u003e社内フロントエンド研修\u003c/li\u003e\n\u003cli\u003e社内インフラ研修\u003c/li\u003e\n\u003c/ul\u003e\n\n\n\u003ch2\u003e各研修についてのまとめや感想\u003c/h2\u003e\n\n\u003ch3\u003e『プロを目指す人のためのRuby入門 言語仕様からテスト駆動開発・デバッグ技法まで』の例題を解く \u0026amp; 読む\u003c/h3\u003e\n\n\u003cp\u003e\u003cstrong\u003e所要期間: 約1ヶ月\u003c/strong\u003e\u003c/p\u003e\n\n\u003cul\u003e\n\u003cli\u003e表紙の \u003cstrong\u003e「Rails をやる前に、 Ruby を知ろう」\u003c/strong\u003e の通り、Rails での開発を意識しながらピュアな Ruby の基礎を学び直せる良書。\u003c/li\u003e\n\u003cli\u003eクラスやモジュールはふんわり知ってる程度でしたが、この本を読んで初めて自分で定義しました。\u003c/li\u003e\n\u003cli\u003e各章の例題を GitHub の PR ベースでレビューしてもらったり、本書内の Minitest を RSpec に変えてテスト書いたり、 RuboCop 導入したり、とメンターである \u003ca href=\"https://twitter.com/sukechannnn\"\u003e@sukechannnn\u003c/a\u003e のファインプレーが光りました。\u003c/li\u003e\n\u003c/ul\u003e\n\n\n\u003cp\u003e\u003cdiv class=\"hatena-asin-detail\"\u003e\u003ca href=\"http://www.amazon.co.jp/exec/obidos/ASIN/4774193976/hatena-blog-22/\"\u003e\u003cimg src=\"https://images-fe.ssl-images-amazon.com/images/I/51nY-YLt2ZL._SL160_.jpg\" class=\"hatena-asin-detail-image\" alt=\"プロを目指す人のためのRuby入門 言語仕様からテスト駆動開発・デバッグ技法まで (Software Design plusシリーズ)\" title=\"プロを目指す人のためのRuby入門 言語仕様からテスト駆動開発・デバッグ技法まで (Software Design plusシリーズ)\"\u003e\u003c/a\u003e\u003cdiv class=\"hatena-asin-detail-info\"\u003e\u003cp class=\"hatena-asin-detail-title\"\u003e\u003ca href=\"http://www.amazon.co.jp/exec/obidos/ASIN/4774193976/hatena-blog-22/\"\u003eプロを目指す人のためのRuby入門 言語仕様からテスト駆動開発・デバッグ技法まで (Software Design plusシリーズ)\u003c/a\u003e\u003c/p\u003e\u003cul\u003e\u003cli\u003e\u003cspan class=\"hatena-asin-detail-label\"\u003e作者:\u003c/span\u003e 伊藤淳一\u003c/li\u003e\u003cli\u003e\u003cspan class=\"hatena-asin-detail-label\"\u003e出版社/メーカー:\u003c/span\u003e 技術評論社\u003c/li\u003e\u003cli\u003e\u003cspan class=\"hatena-asin-detail-label\"\u003e発売日:\u003c/span\u003e 2017/11/25\u003c/li\u003e\u003cli\u003e\u003cspan class=\"hatena-asin-detail-label\"\u003eメディア:\u003c/span\u003e 大型本\u003c/li\u003e\u003cli\u003e\u003ca href=\"http://d.hatena.ne.jp/asin/4774193976/hatena-blog-22\" target=\"_blank\"\u003eこの商品を含むブログを見る\u003c/a\u003e\u003c/li\u003e\u003c/ul\u003e\u003c/div\u003e\u003cdiv class=\"hatena-asin-detail-foot\"\u003e\u003c/div\u003e\u003c/div\u003e\u003c/p\u003e\n\n\u003ch3\u003e『わかばちゃんと学ぶ Git使い方入門』 を読む\u003c/h3\u003e\n\n\u003cp\u003e\u003cstrong\u003e所要期間: 約3日\u003c/strong\u003e\u003c/p\u003e\n\n\u003cul\u003e\n\u003cli\u003e入門書の名の通り、Git の概要を掴むにはよかったです。\u003c/li\u003e\n\u003cli\u003eただ、研修としてはもう少し SourceTree に特化していない内容も知れるといいなと思いました。\u003c/li\u003e\n\u003c/ul\u003e\n\n\n\u003cp\u003e\u003cdiv class=\"hatena-asin-detail\"\u003e\u003ca href=\"http://www.amazon.co.jp/exec/obidos/ASIN/4863542178/hatena-blog-22/\"\u003e\u003cimg src=\"https://images-fe.ssl-images-amazon.com/images/I/51Mj8x5RpZL._SL160_.jpg\" class=\"hatena-asin-detail-image\" alt=\"わかばちゃんと学ぶ Git使い方入門〈GitHub、Bitbucket、SourceTree〉\" title=\"わかばちゃんと学ぶ Git使い方入門〈GitHub、Bitbucket、SourceTree〉\"\u003e\u003c/a\u003e\u003cdiv class=\"hatena-asin-detail-info\"\u003e\u003cp class=\"hatena-asin-detail-title\"\u003e\u003ca href=\"http://www.amazon.co.jp/exec/obidos/ASIN/4863542178/hatena-blog-22/\"\u003eわかばちゃんと学ぶ Git使い方入門〈GitHub、Bitbucket、SourceTree〉\u003c/a\u003e\u003c/p\u003e\u003cul\u003e\u003cli\u003e\u003cspan class=\"hatena-asin-detail-label\"\u003e作者:\u003c/span\u003e 湊川あい,DQNEO\u003c/li\u003e\u003cli\u003e\u003cspan class=\"hatena-asin-detail-label\"\u003e出版社/メーカー:\u003c/span\u003e シーアンドアール研究所\u003c/li\u003e\u003cli\u003e\u003cspan class=\"hatena-asin-detail-label\"\u003e発売日:\u003c/span\u003e 2017/04/21\u003c/li\u003e\u003cli\u003e\u003cspan class=\"hatena-asin-detail-label\"\u003eメディア:\u003c/span\u003e 単行本（ソフトカバー）\u003c/li\u003e\u003cli\u003e\u003ca href=\"http://d.hatena.ne.jp/asin/4863542178/hatena-blog-22\" target=\"_blank\"\u003eこの商品を含むブログ (3件) を見る\u003c/a\u003e\u003c/li\u003e\u003c/ul\u003e\u003c/div\u003e\u003cdiv class=\"hatena-asin-detail-foot\"\u003e\u003c/div\u003e\u003c/div\u003e\u003c/p\u003e\n\n\u003ch3\u003eVim 研修（vimtutor を2周する）\u003c/h3\u003e\n\n\u003cp\u003e\u003cstrong\u003e所要期間: 約2日\u003c/strong\u003e\u003c/p\u003e\n\n\u003cul\u003e\n\u003cli\u003evimtutor がナイス教材過ぎました…（しかも無料 \u0026amp; インストール不要）\u003c/li\u003e\n\u003cli\u003eVim への恐怖心がなくなったのはだいぶ大きかったです。（vimtutor やるまでは Vim 怖かった…）\u003c/li\u003e\n\u003c/ul\u003e\n\n\n\u003ch3\u003e『パーフェクトRuby on Rails』の1章〜5章を読む \u0026amp; 6章〜7章のアプリ作成\u003c/h3\u003e\n\n\u003cp\u003e\u003cstrong\u003e所要期間: 約1.5ヶ月\u003c/strong\u003e\u003c/p\u003e\n\n\u003cul\u003e\n\u003cli\u003e所要期間的に今回の新人エンジニア研修のメインだったように思います、 \u003ccode\u003erails new\u003c/code\u003e のところからがっつりレビューしてもらい、ログイン、CRUD、多対多の関連、E2E のテストまで、一通りの Rails アプリケーション開発を学べました。\u003c/li\u003e\n\u003cli\u003eプロダクトのコードはほぼ写経だったこともあり、RSpec でいい感じのテストを書くことに一番頭を使いました。このタイミングで当たり前にテストを書く習慣が身についたのはとても良かったです。\u003c/li\u003e\n\u003c/ul\u003e\n\n\n\u003cp\u003e\u003cdiv class=\"hatena-asin-detail\"\u003e\u003ca href=\"http://www.amazon.co.jp/exec/obidos/ASIN/4774165166/hatena-blog-22/\"\u003e\u003cimg src=\"https://images-fe.ssl-images-amazon.com/images/I/51gltg0grAL._SL160_.jpg\" class=\"hatena-asin-detail-image\" alt=\"パーフェクト Ruby on Rails\" title=\"パーフェクト Ruby on Rails\"\u003e\u003c/a\u003e\u003cdiv class=\"hatena-asin-detail-info\"\u003e\u003cp class=\"hatena-asin-detail-title\"\u003e\u003ca href=\"http://www.amazon.co.jp/exec/obidos/ASIN/4774165166/hatena-blog-22/\"\u003eパーフェクト Ruby on Rails\u003c/a\u003e\u003c/p\u003e\u003cul\u003e\u003cli\u003e\u003cspan class=\"hatena-asin-detail-label\"\u003e作者:\u003c/span\u003e すがわらまさのり,前島真一,近藤宇智朗,橋立友宏\u003c/li\u003e\u003cli\u003e\u003cspan class=\"hatena-asin-detail-label\"\u003e出版社/メーカー:\u003c/span\u003e 技術評論社\u003c/li\u003e\u003cli\u003e\u003cspan class=\"hatena-asin-detail-label\"\u003e発売日:\u003c/span\u003e 2014/06/06\u003c/li\u003e\u003cli\u003e\u003cspan class=\"hatena-asin-detail-label\"\u003eメディア:\u003c/span\u003e 大型本\u003c/li\u003e\u003cli\u003e\u003ca href=\"http://d.hatena.ne.jp/asin/4774165166/hatena-blog-22\" target=\"_blank\"\u003eこの商品を含むブログ (8件) を見る\u003c/a\u003e\u003c/li\u003e\u003c/ul\u003e\u003c/div\u003e\u003cdiv class=\"hatena-asin-detail-foot\"\u003e\u003c/div\u003e\u003c/div\u003e\u003c/p\u003e\n\n\u003ch3\u003e『メタプログラミングRuby 第2版』 を読む\u003c/h3\u003e\n\n\u003cp\u003e\u003cstrong\u003e所要期間: 約2週間\u003c/strong\u003e\u003c/p\u003e\n\n\u003cul\u003e\n\u003cli\u003eメタプログラミングについて学ぶというよりも、基礎を学び終えた初学者がより深く Ruby 内部の構造について学ぶ書という意味合いが強かったような気がします。\u003c/li\u003e\n\u003cli\u003eオブジェクトモデル、メソッド、ブロック、スコープ、クラス \u0026amp; モジュール定義について学び、この頃から \u003ccode\u003eirb\u003c/code\u003e や \u003ccode\u003epry\u003c/code\u003e 上で出てくる Ruby 組み込みのエラーメッセージが怖くなくなりました。\u003c/li\u003e\n\u003cli\u003eあと読書感想会は本当にやってよかったです。\n\n\u003cul\u003e\n\u003cli\u003e\u003ca href=\"https://developer.feedforce.jp/entry/2018/07/19/000000\"\u003e新人エンジニア達がメタプログラミング Ruby の読書感想会をやった話\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\n\n\u003cp\u003e\u003cdiv class=\"hatena-asin-detail\"\u003e\u003ca href=\"http://www.amazon.co.jp/exec/obidos/ASIN/4873117437/hatena-blog-22/\"\u003e\u003cimg src=\"https://images-fe.ssl-images-amazon.com/images/I/5102wwx0VzL._SL160_.jpg\" class=\"hatena-asin-detail-image\" alt=\"メタプログラミングRuby 第2版\" title=\"メタプログラミングRuby 第2版\"\u003e\u003c/a\u003e\u003cdiv class=\"hatena-asin-detail-info\"\u003e\u003cp class=\"hatena-asin-detail-title\"\u003e\u003ca href=\"http://www.amazon.co.jp/exec/obidos/ASIN/4873117437/hatena-blog-22/\"\u003eメタプログラミングRuby 第2版\u003c/a\u003e\u003c/p\u003e\u003cul\u003e\u003cli\u003e\u003cspan class=\"hatena-asin-detail-label\"\u003e作者:\u003c/span\u003e Paolo Perrotta,角征典\u003c/li\u003e\u003cli\u003e\u003cspan class=\"hatena-asin-detail-label\"\u003e出版社/メーカー:\u003c/span\u003e オライリージャパン\u003c/li\u003e\u003cli\u003e\u003cspan class=\"hatena-asin-detail-label\"\u003e発売日:\u003c/span\u003e 2015/10/10\u003c/li\u003e\u003cli\u003e\u003cspan class=\"hatena-asin-detail-label\"\u003eメディア:\u003c/span\u003e 大型本\u003c/li\u003e\u003cli\u003e\u003ca href=\"http://d.hatena.ne.jp/asin/4873117437/hatena-blog-22\" target=\"_blank\"\u003eこの商品を含むブログ (3件) を見る\u003c/a\u003e\u003c/li\u003e\u003c/ul\u003e\u003c/div\u003e\u003cdiv class=\"hatena-asin-detail-foot\"\u003e\u003c/div\u003e\u003c/div\u003e\u003c/p\u003e\n\n\u003ch3\u003e『Webを支える技術』 を読む\u003c/h3\u003e\n\n\u003cp\u003e\u003cstrong\u003e所要期間: 約1週間\u003c/strong\u003e\u003c/p\u003e\n\n\u003cul\u003e\n\u003cli\u003e実は入社前に一度読んだことがあったのですが、『パーフェクトRuby on Rails』のアプリ作成と並行して進めることで、より理解が深まりました。\u003c/li\u003e\n\u003cli\u003e2部の URI と 3部の HTTP がものすごく勉強になりました。特に HTTP のところは RSpec や cURL で値をいじって、返ってくる値も覗きながら読むと、ものすごく捗りました。\u003c/li\u003e\n\u003c/ul\u003e\n\n\n\u003cp\u003e\u003cdiv class=\"hatena-asin-detail\"\u003e\u003ca href=\"http://www.amazon.co.jp/exec/obidos/ASIN/4774142042/hatena-blog-22/\"\u003e\u003cimg src=\"https://images-fe.ssl-images-amazon.com/images/I/51qo6pgjaSL._SL160_.jpg\" class=\"hatena-asin-detail-image\" alt=\"Webを支える技術 -HTTP、URI、HTML、そしてREST (WEB+DB PRESS plus)\" title=\"Webを支える技術 -HTTP、URI、HTML、そしてREST (WEB+DB PRESS plus)\"\u003e\u003c/a\u003e\u003cdiv class=\"hatena-asin-detail-info\"\u003e\u003cp class=\"hatena-asin-detail-title\"\u003e\u003ca href=\"http://www.amazon.co.jp/exec/obidos/ASIN/4774142042/hatena-blog-22/\"\u003eWebを支える技術 -HTTP、URI、HTML、そしてREST (WEB+DB PRESS plus)\u003c/a\u003e\u003c/p\u003e\u003cul\u003e\u003cli\u003e\u003cspan class=\"hatena-asin-detail-label\"\u003e作者:\u003c/span\u003e 山本陽平\u003c/li\u003e\u003cli\u003e\u003cspan class=\"hatena-asin-detail-label\"\u003e出版社/メーカー:\u003c/span\u003e 技術評論社\u003c/li\u003e\u003cli\u003e\u003cspan class=\"hatena-asin-detail-label\"\u003e発売日:\u003c/span\u003e 2010/04/08\u003c/li\u003e\u003cli\u003e\u003cspan class=\"hatena-asin-detail-label\"\u003eメディア:\u003c/span\u003e 単行本（ソフトカバー）\u003c/li\u003e\u003cli\u003e\u003cspan class=\"hatena-asin-detail-label\"\u003e購入\u003c/span\u003e: 143人 \u003cspan class=\"hatena-asin-detail-label\"\u003eクリック\u003c/span\u003e: 4,320回\u003c/li\u003e\u003cli\u003e\u003ca href=\"http://d.hatena.ne.jp/asin/4774142042/hatena-blog-22\" target=\"_blank\"\u003eこの商品を含むブログ (183件) を見る\u003c/a\u003e\u003c/li\u003e\u003c/ul\u003e\u003c/div\u003e\u003cdiv class=\"hatena-asin-detail-foot\"\u003e\u003c/div\u003e\u003c/div\u003e\u003c/p\u003e\n\n\u003ch3\u003e社内スクラム研修\u003c/h3\u003e\n\n\u003cp\u003e\u003cstrong\u003e所要期間: 約0.5日\u003c/strong\u003e\u003c/p\u003e\n\n\u003cul\u003e\n\u003cli\u003e社内随一のアジャイルお兄さん \u003ca href=\"http://blog.hatena.ne.jp/pokotyamu/\" class=\"hatena-id-icon\"\u003e\u003cimg src=\"https://cdn.profile-image.st-hatena.com/users/pokotyamu/profile.png\" width=\"16\" height=\"16\" alt=\"\" class=\"hatena-id-icon\"\u003eid:pokotyamu\u003c/a\u003e によるスクラム研修。\u003c/li\u003e\n\u003cli\u003e座学パート1時間弱、レゴスクラムによる実践パート2時間強の研修で、スクラムの「守」の部分をがっつり学ぶことができました！\u003c/li\u003e\n\u003cli\u003e一緒に研修を受けた人事インターンの方が感想記事を書いてくれています。\u003c/li\u003e\n\u003c/ul\u003e\n\n\n\u003cp\u003e\u003ciframe src=\"https://hatenablog-parts.com/embed?url=https%3A%2F%2Fmedia.feedforce.jp%2Fn%2Fn51c711939059\" title=\"人事インターンがスクラム研修に参加してみた 〜非エンジニアも使える早く細かく改善する仕組み〜｜Feedforceのnote\" class=\"embed-card embed-webcard\" scrolling=\"no\" frameborder=\"0\" style=\"display: block; width: 100%; height: 155px; max-width: 500px; margin: 10px 0px;\"\u003e\u003c/iframe\u003e\u003ccite class=\"hatena-citation\"\u003e\u003ca href=\"https://media.feedforce.jp/n/n51c711939059\"\u003emedia.feedforce.jp\u003c/a\u003e\u003c/cite\u003e\u003c/p\u003e\n\n\u003ch3\u003eローテーション配属研修（2チーム）\u003c/h3\u003e\n\n\u003cp\u003e\u003cstrong\u003e所要期間: 各1週間ずつ\u003c/strong\u003e\u003c/p\u003e\n\n\u003cul\u003e\n\u003cli\u003e各チームに1週間ずつ、お試し配属のような形で実際のプロダクトのコードを触りながら、軽めの改修や新機能の一部を実装しました！\u003c/li\u003e\n\u003cli\u003e当時の雰囲気は以下の記事をご参照ください。\u003c/li\u003e\n\u003c/ul\u003e\n\n\n\u003cp\u003e\u003ciframe src=\"https://hatenablog-parts.com/embed?url=https%3A%2F%2Fdeveloper.feedforce.jp%2Fentry%2F2018%2F07%2F06%2F185249\" title=\"ペアプロならぬシェアプロが良かった話 - Feedforce Developer Blog\" class=\"embed-card embed-blogcard\" scrolling=\"no\" frameborder=\"0\" style=\"display: block; width: 100%; height: 190px; max-width: 500px; margin: 10px 0px;\"\u003e\u003c/iframe\u003e\u003ccite class=\"hatena-citation\"\u003e\u003ca href=\"https://developer.feedforce.jp/entry/2018/07/06/185249\"\u003edeveloper.feedforce.jp\u003c/a\u003e\u003c/cite\u003e\u003c/p\u003e\n\n\u003ch3\u003eシンプルな Todo アプリの API 開発\u003c/h3\u003e\n\n\u003cp\u003e\u003cstrong\u003e所要期間: 約1週間\u003c/strong\u003e\u003c/p\u003e\n\n\u003cul\u003e\n\u003cli\u003e\u003ca href=\"https://twitter.com/sukechannnn\"\u003e@sukechannnn\u003c/a\u003e が鬼のようなスピードで Swagger で書いてくれた仕様書をもとにゼロから Rails の API サーバを作りました。\u003c/li\u003e\n\u003cli\u003e後述するフロントエンド研修、インフラ研修と併せて、API の実装〜React で SPA 作成〜AWS でデプロイまで一貫して経験することで、イマドキの Web アプリケーション開発の全体像を掴むことが出来ました。\u003c/li\u003e\n\u003cli\u003e超シンプルなアプリケーションでしたが、『パーフェクトRuby on Rails』がほぼ写経だったこともあり、自分の頭を使って開発を進められて楽しかったです。\u003c/li\u003e\n\u003c/ul\u003e\n\n\n\u003ch3\u003e社内フロントエンド研修\u003c/h3\u003e\n\n\u003cp\u003e\u003cstrong\u003e所要期間: 約0.5日\u003c/strong\u003e\u003c/p\u003e\n\n\u003cul\u003e\n\u003cli\u003e\u003ca href=\"http://blog.hatena.ne.jp/hano_tea/\" class=\"hatena-id-icon\"\u003e\u003cimg src=\"https://cdn.profile-image.st-hatena.com/users/hano_tea/profile.png\" width=\"16\" height=\"16\" alt=\"\" class=\"hatena-id-icon\"\u003eid:hano_tea\u003c/a\u003e に基礎編、\u003ca href=\"http://blog.hatena.ne.jp/otofu-square/\" class=\"hatena-id-icon\"\u003e\u003cimg src=\"https://cdn.profile-image.st-hatena.com/users/otofu-square/profile.png\" width=\"16\" height=\"16\" alt=\"\" class=\"hatena-id-icon\"\u003eid:otofu-square\u003c/a\u003e に実践編を担当していただきました！\u003c/li\u003e\n\u003cli\u003e基礎編では SPA 作成に必要最低限の ES6、JSX の書き方を教えていただき、実践編では自作した Todo アプリ API を使った SPA を React で実装しました。\u003c/li\u003e\n\u003cli\u003eReact を触るのは初めてで JS もほとんど書いたことがなかったので、途中ちょっと取り残されそうになりましたが、なんとか食らいついて完成まで持っていくことができました！\u003c/li\u003e\n\u003c/ul\u003e\n\n\n\u003ch3\u003e社内インフラ研修\u003c/h3\u003e\n\n\u003cp\u003e\u003cstrong\u003e所要期間: 約0.5日\u003c/strong\u003e\u003c/p\u003e\n\n\u003cul\u003e\n\u003cli\u003e『Amazon Web Services 基礎からのネットワーク\u0026amp;サーバー構築』 を教本に自分で開発した Todo アプリ API を手動デプロイしてみようという研修です。\u003c/li\u003e\n\u003cli\u003e事前の知識として EC2 と S3 ぐらいは聞いたことあったものの、VPC？Internet Gateway？Route Table？みたいな状態でした…が、諸先輩方に一つ一つ丁寧に教えていただきデプロイまで持っていくことができました。\u003c/li\u003e\n\u003cli\u003e翌日 React で実装した SPA も Heroku にデプロイし、Web の世界に自作アプリが羽ばたいた時にはとても感動しました…！\u003c/li\u003e\n\u003c/ul\u003e\n\n\n\u003cp\u003e\u003cdiv class=\"hatena-asin-detail\"\u003e\u003ca href=\"http://www.amazon.co.jp/exec/obidos/ASIN/4822237443/hatena-blog-22/\"\u003e\u003cimg src=\"https://images-fe.ssl-images-amazon.com/images/I/51KpOuWyhYL._SL160_.jpg\" class=\"hatena-asin-detail-image\" alt=\"Amazon Web Services 基礎からのネットワーク\u0026サーバー構築 改訂版\" title=\"Amazon Web Services 基礎からのネットワーク\u0026サーバー構築 改訂版\"\u003e\u003c/a\u003e\u003cdiv class=\"hatena-asin-detail-info\"\u003e\u003cp class=\"hatena-asin-detail-title\"\u003e\u003ca href=\"http://www.amazon.co.jp/exec/obidos/ASIN/4822237443/hatena-blog-22/\"\u003eAmazon Web Services 基礎からのネットワーク\u0026サーバー構築 改訂版\u003c/a\u003e\u003c/p\u003e\u003cul\u003e\u003cli\u003e\u003cspan class=\"hatena-asin-detail-label\"\u003e作者:\u003c/span\u003e 玉川憲,片山暁雄,今井雄太,大澤文孝\u003c/li\u003e\u003cli\u003e\u003cspan class=\"hatena-asin-detail-label\"\u003e出版社/メーカー:\u003c/span\u003e 日経BP\u003c/li\u003e\u003cli\u003e\u003cspan class=\"hatena-asin-detail-label\"\u003e発売日:\u003c/span\u003e 2017/04/13\u003c/li\u003e\u003cli\u003e\u003cspan class=\"hatena-asin-detail-label\"\u003eメディア:\u003c/span\u003e 単行本\u003c/li\u003e\u003cli\u003e\u003ca href=\"http://d.hatena.ne.jp/asin/4822237443/hatena-blog-22\" target=\"_blank\"\u003eこの商品を含むブログを見る\u003c/a\u003e\u003c/li\u003e\u003c/ul\u003e\u003c/div\u003e\u003cdiv class=\"hatena-asin-detail-foot\"\u003e\u003c/div\u003e\u003c/div\u003e\u003c/p\u003e\n\n\u003ch2\u003eそして研修は続く…\u003c/h2\u003e\n\n\u003cp\u003e上記の研修に加えて、チーム配属後の研修図書として以下の本をプレゼントしていただきました！\u003c/p\u003e\n\n\u003cp\u003e\u003cdiv class=\"hatena-asin-detail\"\u003e\u003ca href=\"http://www.amazon.co.jp/exec/obidos/ASIN/4873115655/hatena-blog-22/\"\u003e\u003cimg src=\"https://images-fe.ssl-images-amazon.com/images/I/51MgH8Jmr3L._SL160_.jpg\" class=\"hatena-asin-detail-image\" alt=\"リーダブルコード ―より良いコードを書くためのシンプルで実践的なテクニック (Theory in practice)\" title=\"リーダブルコード ―より良いコードを書くためのシンプルで実践的なテクニック (Theory in practice)\"\u003e\u003c/a\u003e\u003cdiv class=\"hatena-asin-detail-info\"\u003e\u003cp class=\"hatena-asin-detail-title\"\u003e\u003ca href=\"http://www.amazon.co.jp/exec/obidos/ASIN/4873115655/hatena-blog-22/\"\u003eリーダブルコード ―より良いコードを書くためのシンプルで実践的なテクニック (Theory in practice)\u003c/a\u003e\u003c/p\u003e\u003cul\u003e\u003cli\u003e\u003cspan class=\"hatena-asin-detail-label\"\u003e作者:\u003c/span\u003e Dustin Boswell,Trevor Foucher,須藤功平,角征典\u003c/li\u003e\u003cli\u003e\u003cspan class=\"hatena-asin-detail-label\"\u003e出版社/メーカー:\u003c/span\u003e オライリージャパン\u003c/li\u003e\u003cli\u003e\u003cspan class=\"hatena-asin-detail-label\"\u003e発売日:\u003c/span\u003e 2012/06/23\u003c/li\u003e\u003cli\u003e\u003cspan class=\"hatena-asin-detail-label\"\u003eメディア:\u003c/span\u003e 単行本（ソフトカバー）\u003c/li\u003e\u003cli\u003e\u003cspan class=\"hatena-asin-detail-label\"\u003e購入\u003c/span\u003e: 68人 \u003cspan class=\"hatena-asin-detail-label\"\u003eクリック\u003c/span\u003e: 1,802回\u003c/li\u003e\u003cli\u003e\u003ca href=\"http://d.hatena.ne.jp/asin/4873115655/hatena-blog-22\" target=\"_blank\"\u003eこの商品を含むブログ (140件) を見る\u003c/a\u003e\u003c/li\u003e\u003c/ul\u003e\u003c/div\u003e\u003cdiv class=\"hatena-asin-detail-foot\"\u003e\u003c/div\u003e\u003c/div\u003e\u003c/p\u003e\n\n\u003cp\u003e\u003cdiv class=\"hatena-asin-detail\"\u003e\u003ca href=\"http://www.amazon.co.jp/exec/obidos/ASIN/477418361X/hatena-blog-22/\"\u003e\u003cimg src=\"https://images-fe.ssl-images-amazon.com/images/I/51-TCt0H4UL._SL160_.jpg\" class=\"hatena-asin-detail-image\" alt=\"オブジェクト指向設計実践ガイド ~Rubyでわかる 進化しつづける柔軟なアプリケーションの育て方\" title=\"オブジェクト指向設計実践ガイド ~Rubyでわかる 進化しつづける柔軟なアプリケーションの育て方\"\u003e\u003c/a\u003e\u003cdiv class=\"hatena-asin-detail-info\"\u003e\u003cp class=\"hatena-asin-detail-title\"\u003e\u003ca href=\"http://www.amazon.co.jp/exec/obidos/ASIN/477418361X/hatena-blog-22/\"\u003eオブジェクト指向設計実践ガイド ~Rubyでわかる 進化しつづける柔軟なアプリケーションの育て方\u003c/a\u003e\u003c/p\u003e\u003cul\u003e\u003cli\u003e\u003cspan class=\"hatena-asin-detail-label\"\u003e作者:\u003c/span\u003e Sandi Metz,?山泰基\u003c/li\u003e\u003cli\u003e\u003cspan class=\"hatena-asin-detail-label\"\u003e出版社/メーカー:\u003c/span\u003e 技術評論社\u003c/li\u003e\u003cli\u003e\u003cspan class=\"hatena-asin-detail-label\"\u003e発売日:\u003c/span\u003e 2016/09/02\u003c/li\u003e\u003cli\u003e\u003cspan class=\"hatena-asin-detail-label\"\u003eメディア:\u003c/span\u003e 大型本\u003c/li\u003e\u003cli\u003e\u003ca href=\"http://d.hatena.ne.jp/asin/477418361X/hatena-blog-22\" target=\"_blank\"\u003eこの商品を含むブログ (6件) を見る\u003c/a\u003e\u003c/li\u003e\u003c/ul\u003e\u003c/div\u003e\u003cdiv class=\"hatena-asin-detail-foot\"\u003e\u003c/div\u003e\u003c/div\u003e\u003c/p\u003e\n\n\u003cp\u003e\u003cdiv class=\"hatena-asin-detail\"\u003e\u003ca href=\"http://www.amazon.co.jp/exec/obidos/ASIN/4798144452/hatena-blog-22/\"\u003e\u003cimg src=\"https://images-fe.ssl-images-amazon.com/images/I/51sf73NhVTL._SL160_.jpg\" class=\"hatena-asin-detail-image\" alt=\"SQL 第2版 ゼロからはじめるデータベース操作 (プログラミング学習シリーズ)\" title=\"SQL 第2版 ゼロからはじめるデータベース操作 (プログラミング学習シリーズ)\"\u003e\u003c/a\u003e\u003cdiv class=\"hatena-asin-detail-info\"\u003e\u003cp class=\"hatena-asin-detail-title\"\u003e\u003ca href=\"http://www.amazon.co.jp/exec/obidos/ASIN/4798144452/hatena-blog-22/\"\u003eSQL 第2版 ゼロからはじめるデータベース操作 (プログラミング学習シリーズ)\u003c/a\u003e\u003c/p\u003e\u003cul\u003e\u003cli\u003e\u003cspan class=\"hatena-asin-detail-label\"\u003e作者:\u003c/span\u003e ミック\u003c/li\u003e\u003cli\u003e\u003cspan class=\"hatena-asin-detail-label\"\u003e出版社/メーカー:\u003c/span\u003e 翔泳社\u003c/li\u003e\u003cli\u003e\u003cspan class=\"hatena-asin-detail-label\"\u003e発売日:\u003c/span\u003e 2016/06/17\u003c/li\u003e\u003cli\u003e\u003cspan class=\"hatena-asin-detail-label\"\u003eメディア:\u003c/span\u003e 単行本（ソフトカバー）\u003c/li\u003e\u003cli\u003e\u003ca href=\"http://d.hatena.ne.jp/asin/4798144452/hatena-blog-22\" target=\"_blank\"\u003eこの商品を含むブログを見る\u003c/a\u003e\u003c/li\u003e\u003c/ul\u003e\u003c/div\u003e\u003cdiv class=\"hatena-asin-detail-foot\"\u003e\u003c/div\u003e\u003c/div\u003e\u003c/p\u003e\n\n\u003cp\u003e\u003cdiv class=\"hatena-asin-detail\"\u003e\u003ca href=\"http://www.amazon.co.jp/exec/obidos/ASIN/4797386479/hatena-blog-22/\"\u003e\u003cimg src=\"https://images-fe.ssl-images-amazon.com/images/I/51P7Lxl0cKL._SL160_.jpg\" class=\"hatena-asin-detail-image\" alt=\"ふつうのLinuxプログラミング 第2版 Linuxの仕組みから学べるgccプログラミングの王道\" title=\"ふつうのLinuxプログラミング 第2版 Linuxの仕組みから学べるgccプログラミングの王道\"\u003e\u003c/a\u003e\u003cdiv class=\"hatena-asin-detail-info\"\u003e\u003cp class=\"hatena-asin-detail-title\"\u003e\u003ca href=\"http://www.amazon.co.jp/exec/obidos/ASIN/4797386479/hatena-blog-22/\"\u003eふつうのLinuxプログラミング 第2版 Linuxの仕組みから学べるgccプログラミングの王道\u003c/a\u003e\u003c/p\u003e\u003cul\u003e\u003cli\u003e\u003cspan class=\"hatena-asin-detail-label\"\u003e作者:\u003c/span\u003e 青木峰郎\u003c/li\u003e\u003cli\u003e\u003cspan class=\"hatena-asin-detail-label\"\u003e出版社/メーカー:\u003c/span\u003e SBクリエイティブ\u003c/li\u003e\u003cli\u003e\u003cspan class=\"hatena-asin-detail-label\"\u003e発売日:\u003c/span\u003e 2017/09/22\u003c/li\u003e\u003cli\u003e\u003cspan class=\"hatena-asin-detail-label\"\u003eメディア:\u003c/span\u003e 単行本\u003c/li\u003e\u003cli\u003e\u003ca href=\"http://d.hatena.ne.jp/asin/4797386479/hatena-blog-22\" target=\"_blank\"\u003eこの商品を含むブログを見る\u003c/a\u003e\u003c/li\u003e\u003c/ul\u003e\u003c/div\u003e\u003cdiv class=\"hatena-asin-detail-foot\"\u003e\u003c/div\u003e\u003c/div\u003e\u003c/p\u003e\n\n\u003cp\u003e\u003cdiv class=\"hatena-asin-detail\"\u003e\u003ca href=\"http://www.amazon.co.jp/exec/obidos/ASIN/4797393165/hatena-blog-22/\"\u003e\u003cimg src=\"https://images-fe.ssl-images-amazon.com/images/I/513hw-04L8L._SL160_.jpg\" class=\"hatena-asin-detail-image\" alt=\"体系的に学ぶ 安全なWebアプリケーションの作り方 第2版 脆弱性が生まれる原理と対策の実践\" title=\"体系的に学ぶ 安全なWebアプリケーションの作り方 第2版 脆弱性が生まれる原理と対策の実践\"\u003e\u003c/a\u003e\u003cdiv class=\"hatena-asin-detail-info\"\u003e\u003cp class=\"hatena-asin-detail-title\"\u003e\u003ca href=\"http://www.amazon.co.jp/exec/obidos/ASIN/4797393165/hatena-blog-22/\"\u003e体系的に学ぶ 安全なWebアプリケーションの作り方 第2版 脆弱性が生まれる原理と対策の実践\u003c/a\u003e\u003c/p\u003e\u003cul\u003e\u003cli\u003e\u003cspan class=\"hatena-asin-detail-label\"\u003e作者:\u003c/span\u003e 徳丸浩\u003c/li\u003e\u003cli\u003e\u003cspan class=\"hatena-asin-detail-label\"\u003e出版社/メーカー:\u003c/span\u003e SBクリエイティブ\u003c/li\u003e\u003cli\u003e\u003cspan class=\"hatena-asin-detail-label\"\u003e発売日:\u003c/span\u003e 2018/06/21\u003c/li\u003e\u003cli\u003e\u003cspan class=\"hatena-asin-detail-label\"\u003eメディア:\u003c/span\u003e 単行本\u003c/li\u003e\u003cli\u003e\u003ca href=\"http://d.hatena.ne.jp/asin/4797393165/hatena-blog-22\" target=\"_blank\"\u003eこの商品を含むブログを見る\u003c/a\u003e\u003c/li\u003e\u003c/ul\u003e\u003c/div\u003e\u003cdiv class=\"hatena-asin-detail-foot\"\u003e\u003c/div\u003e\u003c/div\u003e\u003c/p\u003e\n\n\u003cp\u003eちなみに私は『リーダブルコード』『オブジェクト指向設計実践ガイド』『SQL ゼロからはじめるデータベース操作』を読み終えて、今は『ふつうのLinuxプログラミング』を読んでいるところです。\u003c/p\u003e\n\n\u003cp\u003e『オブジェクト指向設計実践ガイド』についてはとても良い本だったので、また社内で読書会を開催しようと思っています！\u003c/p\u003e\n\n\u003ch2\u003e最後に\u003c/h2\u003e\n\n\u003cp\u003e今回は弊社の新人エンジニア研修カリキュラムをご紹介しました！\u003c/p\u003e\n\n\u003cp\u003e来年以降の新人エンジニア研修には自分自身が積極的に関わっていきたいという考えもあり、カリキュラムをよりブラッシュアップさせていくためにも記事としてまとめ、研修の振り返りを行いました。\u003c/p\u003e\n\n\u003cp\u003eこの記事をきっかけに、もっとこうした方がいい、うちの会社ではこんなことやっている、みたいな情報が集まるといいなと思っています。\u003c/p\u003e\n\n\u003cp\u003eそれでは、またお会いしましょう ＾＾\u003c/p\u003e\n","contentSnippet":"こんにちは！今年の4月にポテンシャル枠で入社した id:daido1976 です！引き続き Rails に弄ばれる日々を過ごしています。さて、今回は約4ヶ月間の新人エンジニア研修を受け終えた私が弊社の研修カリキュラムを公開し、まとめや実際に受けてみての感想を書いていきたいと思います。前提としてフィードフォースでは今年4月〜5月のほぼ同時期に e-Navigator というプログラムを通じて、私を含む3名の実務未経験エンジニアが入社しています。今回の研修は、e-Navigator でもレビュアーだった @sukechannnn がメンターとして上記3名の新人エンジニアをフォローする体制で進めました！研修の成果を3行で入社時に「プログラミング歴3ヶ月の超初心者エンジニア」だった私がフィードフォースで約4ヶ月間の新人エンジニア研修を受けて配属後にある程度自走してコードが書けるぐらいのスキルを身につけることが出来ました！ざっくりスケジュール4月プロを目指す人のためのRuby入門 言語仕様からテスト駆動開発・デバッグ技法まで の例題を解く \u0026 読むわかばちゃんと学ぶ Git使い方入門 を読むVim 研修（vimtutor を2周する）5月〜6月パーフェクトRuby on Rails の1章〜5章を読む \u0026 6章〜7章のアプリ作成メタプログラミングRuby 第2版 を読むWebを支える技術 を読む社内スクラム研修7月ローテーション配属研修（2チーム）シンプルな Todo アプリの API 開発社内フロントエンド研修社内インフラ研修各研修についてのまとめや感想『プロを目指す人のためのRuby入門 言語仕様からテスト駆動開発・デバッグ技法まで』の例題を解く \u0026 読む所要期間: 約1ヶ月表紙の 「Rails をやる前に、 Ruby を知ろう」 の通り、Rails での開発を意識しながらピュアな Ruby の基礎を学び直せる良書。クラスやモジュールはふんわり知ってる程度でしたが、この本を読んで初めて自分で定義しました。各章の例題を GitHub の PR ベースでレビューしてもらったり、本書内の Minitest を RSpec に変えてテスト書いたり、 RuboCop 導入したり、とメンターである @sukechannnn のファインプレーが光りました。プロを目指す人のためのRuby入門 言語仕様からテスト駆動開発・デバッグ技法まで (Software Design plusシリーズ)作者: 伊藤淳一出版社/メーカー: 技術評論社発売日: 2017/11/25メディア: 大型本この商品を含むブログを見る『わかばちゃんと学ぶ Git使い方入門』 を読む所要期間: 約3日入門書の名の通り、Git の概要を掴むにはよかったです。ただ、研修としてはもう少し SourceTree に特化していない内容も知れるといいなと思いました。わかばちゃんと学ぶ Git使い方入門〈GitHub、Bitbucket、SourceTree〉作者: 湊川あい,DQNEO出版社/メーカー: シーアンドアール研究所発売日: 2017/04/21メディア: 単行本（ソフトカバー）この商品を含むブログ (3件) を見るVim 研修（vimtutor を2周する）所要期間: 約2日vimtutor がナイス教材過ぎました…（しかも無料 \u0026 インストール不要）Vim への恐怖心がなくなったのはだいぶ大きかったです。（vimtutor やるまでは Vim 怖かった…）『パーフェクトRuby on Rails』の1章〜5章を読む \u0026 6章〜7章のアプリ作成所要期間: 約1.5ヶ月所要期間的に今回の新人エンジニア研修のメインだったように思います、 rails new のところからがっつりレビューしてもらい、ログイン、CRUD、多対多の関連、E2E のテストまで、一通りの Rails アプリケーション開発を学べました。プロダクトのコードはほぼ写経だったこともあり、RSpec でいい感じのテストを書くことに一番頭を使いました。このタイミングで当たり前にテストを書く習慣が身についたのはとても良かったです。パーフェクト Ruby on Rails作者: すがわらまさのり,前島真一,近藤宇智朗,橋立友宏出版社/メーカー: 技術評論社発売日: 2014/06/06メディア: 大型本この商品を含むブログ (8件) を見る『メタプログラミングRuby 第2版』 を読む所要期間: 約2週間メタプログラミングについて学ぶというよりも、基礎を学び終えた初学者がより深く Ruby 内部の構造について学ぶ書という意味合いが強かったような気がします。オブジェクトモデル、メソッド、ブロック、スコープ、クラス \u0026 モジュール定義について学び、この頃から irb や pry 上で出てくる Ruby 組み込みのエラーメッセージが怖くなくなりました。あと読書感想会は本当にやってよかったです。新人エンジニア達がメタプログラミング Ruby の読書感想会をやった話メタプログラミングRuby 第2版作者: Paolo Perrotta,角征典出版社/メーカー: オライリージャパン発売日: 2015/10/10メディア: 大型本この商品を含むブログ (3件) を見る『Webを支える技術』 を読む所要期間: 約1週間実は入社前に一度読んだことがあったのですが、『パーフェクトRuby on Rails』のアプリ作成と並行して進めることで、より理解が深まりました。2部の URI と 3部の HTTP がものすごく勉強になりました。特に HTTP のところは RSpec や cURL で値をいじって、返ってくる値も覗きながら読むと、ものすごく捗りました。Webを支える技術 -HTTP、URI、HTML、そしてREST (WEB+DB PRESS plus)作者: 山本陽平出版社/メーカー: 技術評論社発売日: 2010/04/08メディア: 単行本（ソフトカバー）購入: 143人 クリック: 4,320回この商品を含むブログ (183件) を見る社内スクラム研修所要期間: 約0.5日社内随一のアジャイルお兄さん id:pokotyamu によるスクラム研修。座学パート1時間弱、レゴスクラムによる実践パート2時間強の研修で、スクラムの「守」の部分をがっつり学ぶことができました！一緒に研修を受けた人事インターンの方が感想記事を書いてくれています。media.feedforce.jpローテーション配属研修（2チーム）所要期間: 各1週間ずつ各チームに1週間ずつ、お試し配属のような形で実際のプロダクトのコードを触りながら、軽めの改修や新機能の一部を実装しました！当時の雰囲気は以下の記事をご参照ください。developer.feedforce.jpシンプルな Todo アプリの API 開発所要期間: 約1週間@sukechannnn が鬼のようなスピードで Swagger で書いてくれた仕様書をもとにゼロから Rails の API サーバを作りました。後述するフロントエンド研修、インフラ研修と併せて、API の実装〜React で SPA 作成〜AWS でデプロイまで一貫して経験することで、イマドキの Web アプリケーション開発の全体像を掴むことが出来ました。超シンプルなアプリケーションでしたが、『パーフェクトRuby on Rails』がほぼ写経だったこともあり、自分の頭を使って開発を進められて楽しかったです。社内フロントエンド研修所要期間: 約0.5日id:hano_tea に基礎編、id:otofu-square に実践編を担当していただきました！基礎編では SPA 作成に必要最低限の ES6、JSX の書き方を教えていただき、実践編では自作した Todo アプリ API を使った SPA を React で実装しました。React を触るのは初めてで JS もほとんど書いたことがなかったので、途中ちょっと取り残されそうになりましたが、なんとか食らいついて完成まで持っていくことができました！社内インフラ研修所要期間: 約0.5日『Amazon Web Services 基礎からのネットワーク\u0026サーバー構築』 を教本に自分で開発した Todo アプリ API を手動デプロイしてみようという研修です。事前の知識として EC2 と S3 ぐらいは聞いたことあったものの、VPC？Internet Gateway？Route Table？みたいな状態でした…が、諸先輩方に一つ一つ丁寧に教えていただきデプロイまで持っていくことができました。翌日 React で実装した SPA も Heroku にデプロイし、Web の世界に自作アプリが羽ばたいた時にはとても感動しました…！Amazon Web Services 基礎からのネットワーク\u0026サーバー構築 改訂版作者: 玉川憲,片山暁雄,今井雄太,大澤文孝出版社/メーカー: 日経BP発売日: 2017/04/13メディア: 単行本この商品を含むブログを見るそして研修は続く…上記の研修に加えて、チーム配属後の研修図書として以下の本をプレゼントしていただきました！リーダブルコード ―より良いコードを書くためのシンプルで実践的なテクニック (Theory in practice)作者: Dustin Boswell,Trevor Foucher,須藤功平,角征典出版社/メーカー: オライリージャパン発売日: 2012/06/23メディア: 単行本（ソフトカバー）購入: 68人 クリック: 1,802回この商品を含むブログ (140件) を見るオブジェクト指向設計実践ガイド ~Rubyでわかる 進化しつづける柔軟なアプリケーションの育て方作者: Sandi Metz,?山泰基出版社/メーカー: 技術評論社発売日: 2016/09/02メディア: 大型本この商品を含むブログ (6件) を見るSQL 第2版 ゼロからはじめるデータベース操作 (プログラミング学習シリーズ)作者: ミック出版社/メーカー: 翔泳社発売日: 2016/06/17メディア: 単行本（ソフトカバー）この商品を含むブログを見るふつうのLinuxプログラミング 第2版 Linuxの仕組みから学べるgccプログラミングの王道作者: 青木峰郎出版社/メーカー: SBクリエイティブ発売日: 2017/09/22メディア: 単行本この商品を含むブログを見る体系的に学ぶ 安全なWebアプリケーションの作り方 第2版 脆弱性が生まれる原理と対策の実践作者: 徳丸浩出版社/メーカー: SBクリエイティブ発売日: 2018/06/21メディア: 単行本この商品を含むブログを見るちなみに私は『リーダブルコード』『オブジェクト指向設計実践ガイド』『SQL ゼロからはじめるデータベース操作』を読み終えて、今は『ふつうのLinuxプログラミング』を読んでいるところです。『オブジェクト指向設計実践ガイド』についてはとても良い本だったので、また社内で読書会を開催しようと思っています！最後に今回は弊社の新人エンジニア研修カリキュラムをご紹介しました！来年以降の新人エンジニア研修には自分自身が積極的に関わっていきたいという考えもあり、カリキュラムをよりブラッシュアップさせていくためにも記事としてまとめ、研修の振り返りを行いました。この記事をきっかけに、もっとこうした方がいい、うちの会社ではこんなことやっている、みたいな情報が集まるといいなと思っています。それでは、またお会いしましょう ＾＾","link":"https://developer.feedforce.jp/entry/2018/10/18/140000","isoDate":"2018-10-18T05:00:00.000Z","dateMiliSeconds":1539838800000,"imageUrl":"https://images-fe.ssl-images-amazon.com/images/I/51nY-YLt2ZL._SL160_.jpg","authorName":"daido1976"},{"title":"新人エンジニア達がメタプログラミング Ruby の読書感想会をやった話","content":"\u003cp\u003eはじめまして！今年の4月にフィードフォースに入社した \u003ca href=\"http://blog.hatena.ne.jp/daido1976/\" class=\"hatena-id-icon\"\u003e\u003cimg src=\"https://cdn.profile-image.st-hatena.com/users/daido1976/profile.png\" width=\"16\" height=\"16\" alt=\"\" class=\"hatena-id-icon\"\u003eid:daido1976\u003c/a\u003e です！Rails に弄ばれる日々を過ごしています。\u003c/p\u003e\n\n\u003cp\u003eフィードフォースでは今年の4月と5月に私を含む計3名の新人エンジニア（開発実務未経験者）が入社をし、現在研修を受けている真っ最中です。\u003c/p\u003e\n\n\u003cp\u003e研修の一環として、『メタプログラミングRuby』を読んでいたのですが、初心者にはかなり難しい内容の本ということもあり、各自きちんと理解ができているかどうかチェックする意味も込めて社内で読書感想会を開催しました！\u003c/p\u003e\n\n\u003cp\u003e\u003cdiv class=\"hatena-asin-detail\"\u003e\u003ca href=\"http://www.amazon.co.jp/exec/obidos/ASIN/4873117437/hatena-blog-22/\"\u003e\u003cimg src=\"https://images-fe.ssl-images-amazon.com/images/I/5102wwx0VzL._SL160_.jpg\" class=\"hatena-asin-detail-image\" alt=\"メタプログラミングRuby 第2版\" title=\"メタプログラミングRuby 第2版\"\u003e\u003c/a\u003e\u003cdiv class=\"hatena-asin-detail-info\"\u003e\u003cp class=\"hatena-asin-detail-title\"\u003e\u003ca href=\"http://www.amazon.co.jp/exec/obidos/ASIN/4873117437/hatena-blog-22/\"\u003eメタプログラミングRuby 第2版\u003c/a\u003e\u003c/p\u003e\u003cul\u003e\u003cli\u003e\u003cspan class=\"hatena-asin-detail-label\"\u003e作者:\u003c/span\u003e Paolo Perrotta,角征典\u003c/li\u003e\u003cli\u003e\u003cspan class=\"hatena-asin-detail-label\"\u003e出版社/メーカー:\u003c/span\u003e オライリージャパン\u003c/li\u003e\u003cli\u003e\u003cspan class=\"hatena-asin-detail-label\"\u003e発売日:\u003c/span\u003e 2015/10/10\u003c/li\u003e\u003cli\u003e\u003cspan class=\"hatena-asin-detail-label\"\u003eメディア:\u003c/span\u003e 大型本\u003c/li\u003e\u003cli\u003e\u003ca href=\"http://d.hatena.ne.jp/asin/4873117437/hatena-blog-22\" target=\"_blank\"\u003eこの商品を含むブログ (3件) を見る\u003c/a\u003e\u003c/li\u003e\u003c/ul\u003e\u003c/div\u003e\u003cdiv class=\"hatena-asin-detail-foot\"\u003e\u003c/div\u003e\u003c/div\u003e\u003c/p\u003e\n\n\u003cp\u003eもちろん新人エンジニア達にとって技術書の読書感想会など初めてなので、過去社内で行われていた以下の記事を参考に。\u003c/p\u003e\n\n\u003cp\u003e\u003ciframe src=\"https://hatenablog-parts.com/embed?url=https%3A%2F%2Fdeveloper.feedforce.jp%2Fentry%2F2017%2F11%2F21%2F191055\" title=\"第一回社内読書感想会(テスト駆動開発)を実施しました - Feedforce Developer Blog\" class=\"embed-card embed-blogcard\" scrolling=\"no\" frameborder=\"0\" style=\"display: block; width: 100%; height: 190px; max-width: 500px; margin: 10px 0px;\"\u003e\u003c/iframe\u003e\u003ccite class=\"hatena-citation\"\u003e\u003ca href=\"https://developer.feedforce.jp/entry/2017/11/21/191055\"\u003edeveloper.feedforce.jp\u003c/a\u003e\u003c/cite\u003e\u003c/p\u003e\n\n\u003ch2\u003eで、どうだったの？\u003c/h2\u003e\n\n\u003ch3\u003e結論\u003c/h3\u003e\n\n\u003cp\u003e\u003cb\u003eめっちゃよかったです。\u003c/b\u003e\u003c/p\u003e\n\n\u003ch3\u003e今回の進め方\u003c/h3\u003e\n\n\u003cp\u003eまず、1日でやるには文量的に難しいと判断し、5日に分けて毎日1時間、1章ずつ進めていくことに。（それでも時間をオーバーしてしまうことが稀によくありました）\u003c/p\u003e\n\n\u003cp\u003e当日は以下のような進め方をしました。\u003c/p\u003e\n\n\u003col\u003e\n\u003cli\u003e事前に書いてきた付箋を全員で貼る\u003c/li\u003e\n\u003cli\u003eカテゴライズする\u003c/li\u003e\n\u003cli\u003e各自書いてきた付箋の内容を説明していく\u003c/li\u003e\n\u003cli\u003e議題の優先度を決める\u003c/li\u003e\n\u003cli\u003eディスカッションする\u003c/li\u003e\n\u003cli\u003eまとめをする\u003c/li\u003e\n\u003c/ol\u003e\n\n\n\u003ch3\u003e『メタプログラミングRuby』読書感想会のホワイトボード\u003c/h3\u003e\n\n\u003cp\u003e\u003cspan itemscope itemtype=\"http://schema.org/Photograph\"\u003e\u003cimg src=\"https://cdn-ak.f.st-hatena.com/images/fotolife/d/daido1976/20180719/20180719113422.jpg\" alt=\"f:id:daido1976:20180719113422j:plain\" title=\"f:id:daido1976:20180719113422j:plain\" class=\"hatena-fotolife\" itemprop=\"image\"\u003e\u003c/span\u003e\n\u003cspan style=\"color: #cccccc\"\u003e個人的に一番盛り上がった3章（メソッド）のホワイトボード\u003c/span\u003e\u003c/p\u003e\n\n\u003ch3\u003e良かった点\u003c/h3\u003e\n\n\u003ch4\u003e理解が曖昧な部分が明確になった\u003c/h4\u003e\n\n\u003cp\u003e本を読んで自分では理解できたと思っていても、それを言語化して他人に伝えようとするといかに理解できていないかわかるもの。今回の読書感想会でもまさにその経験ができ、自分が曖昧に理解していた部分が明確になり、今後どこを学んでいくべきかをはっきりさせられたように思います。\u003c/p\u003e\n\n\u003ch4\u003e他メンバーの感想や見解を聞けた\u003c/h4\u003e\n\n\u003cp\u003e新人エンジニアとはいえ数ヶ月の研修を経て、それぞれの考え方や興味を持つポイントにも個性が出始めてきています。同じ『メタプログラミングRuby』という本を読んでも、Ruby の内部処理に興味津々なメンバー、用語の意味に執着するメンバー（私です）、具体的なコード例を知りたがるメンバー、などそれぞれ違った観点の感想や見解が出てきてとても面白かったです。\u003c/p\u003e\n\n\u003ch4\u003e先輩エンジニアの方々に知見を共有してもらえた\u003c/h4\u003e\n\n\u003cp\u003e読書感想会を開催する前週に社内向けに「ご興味ある方は覗きに来てください」と呼びかけたところ、当日先輩エンジニアの方々が参加してくださり、我々新人エンジニア達の疑問点を図や具体的なコード例を用いてどんどん解消してくれました。\u003cb\u003e正直これが一番のメリットだったように思います。\u003c/b\u003e\u003c/p\u003e\n\n\u003cp\u003e\u003cspan itemscope itemtype=\"http://schema.org/Photograph\"\u003e\u003cimg src=\"https://cdn-ak.f.st-hatena.com/images/fotolife/d/daido1976/20180719/20180719140749.png\" alt=\"f:id:daido1976:20180719140749p:plain\" title=\"f:id:daido1976:20180719140749p:plain\" class=\"hatena-fotolife\" itemprop=\"image\"\u003e\u003c/span\u003e\n\u003cspan style=\"color: #cccccc\"\u003eQiita:Team で呼びかけてる様子\u003c/span\u003e\u003c/p\u003e\n\n\u003ch3\u003e反省点\u003c/h3\u003e\n\n\u003cul\u003e\n\u003cli\u003e最初の頃はだいぶ時間をオーバーしてしまった（ちなみに初回は1時間予定のところ、2.5時間もかかってしまいました…）\u003c/li\u003e\n\u003cli\u003e本を読んでから読書感想会を開催するまで少し期間が空いてしまい、読んだ内容をすっかり忘れてしまっていた（主に私の話ですが…）\u003c/li\u003e\n\u003c/ul\u003e\n\n\n\u003cp\u003eただ、基本的には良いことずくめの会だと感じたので、今後も機会があれば積極的に開催していきたいと思います！\u003c/p\u003e\n\n\u003ch3\u003e最後に\u003c/h3\u003e\n\n\u003cp\u003e今回は入社したばかりの新人エンジニア達が主体となって開催された『メタプログラミングRuby』読書感想会のご紹介をしました！\u003c/p\u003e\n\n\u003cp\u003e最後に私が本書を読んで一番感銘を受けた一文を引用して終わりたいと思います。\u003c/p\u003e\n\n\u003cblockquote\u003e\u003cp\u003e「（前略）メタプログラミングというものは存在しない。すべてはただのプログラミングじゃ。（後略）」p. 171\u003c/p\u003e\u003c/blockquote\u003e\n\n\u003cp\u003eそれでは、またお会いしましょう ＾＾\u003c/p\u003e\n\n\u003cp\u003e\u003cspan itemscope itemtype=\"http://schema.org/Photograph\"\u003e\u003cimg src=\"https://cdn-ak.f.st-hatena.com/images/fotolife/d/daido1976/20180719/20180719142700.jpg\" alt=\"f:id:daido1976:20180719142700j:plain\" title=\"f:id:daido1976:20180719142700j:plain\" class=\"hatena-fotolife\" itemprop=\"image\"\u003e\u003c/span\u003e\n\u003cspan style=\"color: #cccccc\"\u003e新人エンジニア達のメタプロRuby \u003c/span\u003e\u003c/p\u003e\n","contentSnippet":"はじめまして！今年の4月にフィードフォースに入社した id:daido1976 です！Rails に弄ばれる日々を過ごしています。フィードフォースでは今年の4月と5月に私を含む計3名の新人エンジニア（開発実務未経験者）が入社をし、現在研修を受けている真っ最中です。研修の一環として、『メタプログラミングRuby』を読んでいたのですが、初心者にはかなり難しい内容の本ということもあり、各自きちんと理解ができているかどうかチェックする意味も込めて社内で読書感想会を開催しました！メタプログラミングRuby 第2版作者: Paolo Perrotta,角征典出版社/メーカー: オライリージャパン発売日: 2015/10/10メディア: 大型本この商品を含むブログ (3件) を見るもちろん新人エンジニア達にとって技術書の読書感想会など初めてなので、過去社内で行われていた以下の記事を参考に。developer.feedforce.jpで、どうだったの？結論めっちゃよかったです。今回の進め方まず、1日でやるには文量的に難しいと判断し、5日に分けて毎日1時間、1章ずつ進めていくことに。（それでも時間をオーバーしてしまうことが稀によくありました）当日は以下のような進め方をしました。事前に書いてきた付箋を全員で貼るカテゴライズする各自書いてきた付箋の内容を説明していく議題の優先度を決めるディスカッションするまとめをする『メタプログラミングRuby』読書感想会のホワイトボード個人的に一番盛り上がった3章（メソッド）のホワイトボード良かった点理解が曖昧な部分が明確になった本を読んで自分では理解できたと思っていても、それを言語化して他人に伝えようとするといかに理解できていないかわかるもの。今回の読書感想会でもまさにその経験ができ、自分が曖昧に理解していた部分が明確になり、今後どこを学んでいくべきかをはっきりさせられたように思います。他メンバーの感想や見解を聞けた新人エンジニアとはいえ数ヶ月の研修を経て、それぞれの考え方や興味を持つポイントにも個性が出始めてきています。同じ『メタプログラミングRuby』という本を読んでも、Ruby の内部処理に興味津々なメンバー、用語の意味に執着するメンバー（私です）、具体的なコード例を知りたがるメンバー、などそれぞれ違った観点の感想や見解が出てきてとても面白かったです。先輩エンジニアの方々に知見を共有してもらえた読書感想会を開催する前週に社内向けに「ご興味ある方は覗きに来てください」と呼びかけたところ、当日先輩エンジニアの方々が参加してくださり、我々新人エンジニア達の疑問点を図や具体的なコード例を用いてどんどん解消してくれました。正直これが一番のメリットだったように思います。Qiita:Team で呼びかけてる様子反省点最初の頃はだいぶ時間をオーバーしてしまった（ちなみに初回は1時間予定のところ、2.5時間もかかってしまいました…）本を読んでから読書感想会を開催するまで少し期間が空いてしまい、読んだ内容をすっかり忘れてしまっていた（主に私の話ですが…）ただ、基本的には良いことずくめの会だと感じたので、今後も機会があれば積極的に開催していきたいと思います！最後に今回は入社したばかりの新人エンジニア達が主体となって開催された『メタプログラミングRuby』読書感想会のご紹介をしました！最後に私が本書を読んで一番感銘を受けた一文を引用して終わりたいと思います。「（前略）メタプログラミングというものは存在しない。すべてはただのプログラミングじゃ。（後略）」p. 171それでは、またお会いしましょう ＾＾新人エンジニア達のメタプロRuby","link":"https://developer.feedforce.jp/entry/2018/07/19/000000","isoDate":"2018-07-18T15:00:00.000Z","dateMiliSeconds":1531926000000,"imageUrl":"https://images-fe.ssl-images-amazon.com/images/I/5102wwx0VzL._SL160_.jpg","authorName":"daido1976"}]},"__N_SSG":true},"page":"/members/[name]","query":{"name":"daido1976"},"buildId":"XZokPDFcJqXxXohY_z-VP","nextExport":false,"isFallback":false,"gsp":true,"head":[["meta",{"name":"viewport","content":"width=device-width"}],["meta",{"charSet":"utf-8"}],["link",{"rel":"icon shortcut","type":"image/png","href":"https://engineers.feedforce.jp/logo.png"}],["link",{"rel":"stylesheet","href":"https://fonts.googleapis.com/css2?family=Inter:wght@400;700\u0026display=swap"}],["title",{"children":"daido1976 | Feedforce Engineers' Blogs"}],["meta",{"property":"og:title","content":"daido1976"}],["meta",{"property":"og:url","content":"https://engineers.feedforce.jp/members/daido1976"}],["meta",{"name":"twitter:card","content":"summary_large_image"}],["meta",{"property":"og:site","content":"Feedforce Engineers' Blogs"}],["meta",{"property":"og:image","content":"https://engineers.feedforce.jp/og.png"}],["link",{"rel":"canonical","href":"https://engineers.feedforce.jp/members/daido1976"}],["link",{"rel":"alternate","type":"application/rss+xml","title":"Feedforce Engineers' Blogs","href":"https://engineers.feedforce.jp/rss.xml"}],["link",{"rel":"alternate","type":"application/atom+xml","title":"Feedforce Engineers' Blogs","href":"https://engineers.feedforce.jp/atom.xml"}]]}</script><script nomodule="" src="/_next/static/chunks/polyfills-fa276ba060a4a8ac7eef.js"></script><script src="/_next/static/chunks/main-8a83f0fd99327c4684a8.js" async=""></script><script src="/_next/static/chunks/webpack-e067438c4cf4ef2ef178.js" async=""></script><script src="/_next/static/chunks/framework.1daf1ec1ecf144ee9147.js" async=""></script><script src="/_next/static/chunks/commons.9e003f150a446b53bdd9.js" async=""></script><script src="/_next/static/chunks/pages/_app-99db904e083fc7f74e35.js" async=""></script><script src="/_next/static/chunks/588505f8033a39c9ef82bc46b1145ac9fd1db500.91c778663c9b9d266fd0.js" async=""></script><script src="/_next/static/chunks/pages/members/%5Bname%5D-42a7756adc6c0800b4dc.js" async=""></script><script src="/_next/static/XZokPDFcJqXxXohY_z-VP/_buildManifest.js" async=""></script><script src="/_next/static/XZokPDFcJqXxXohY_z-VP/_ssgManifest.js" async=""></script></body></html>