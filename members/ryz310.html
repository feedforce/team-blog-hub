<!DOCTYPE html><html><head><meta name="viewport" content="width=device-width"/><meta charSet="utf-8"/><link rel="icon shortcut" type="image/png" href="https://engineers.feedforce.jp/logo.png"/><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Inter:wght@400;700&amp;display=swap"/><title>ryz310 | Feedforce Engineers&#x27; Blogs</title><meta property="og:title" content="ryz310"/><meta property="og:url" content="https://engineers.feedforce.jp/members/ryz310"/><meta name="twitter:card" content="summary_large_image"/><meta property="og:site" content="Feedforce Engineers&#x27; Blogs"/><meta property="og:image" content="https://engineers.feedforce.jp/og.png"/><link rel="canonical" href="https://engineers.feedforce.jp/members/ryz310"/><link rel="alternate" type="application/rss+xml" title="Feedforce Engineers&#x27; Blogs" href="https://engineers.feedforce.jp/rss.xml"/><link rel="alternate" type="application/atom+xml" title="Feedforce Engineers&#x27; Blogs" href="https://engineers.feedforce.jp/atom.xml"/><link rel="preload" href="/_next/static/css/d7faf1fdf25fe7d3262e.css" as="style"/><link rel="stylesheet" href="/_next/static/css/d7faf1fdf25fe7d3262e.css" data-n-g=""/><noscript data-n-css="true"></noscript><link rel="preload" href="/_next/static/chunks/main-8a83f0fd99327c4684a8.js" as="script"/><link rel="preload" href="/_next/static/chunks/webpack-e067438c4cf4ef2ef178.js" as="script"/><link rel="preload" href="/_next/static/chunks/framework.1daf1ec1ecf144ee9147.js" as="script"/><link rel="preload" href="/_next/static/chunks/commons.9e003f150a446b53bdd9.js" as="script"/><link rel="preload" href="/_next/static/chunks/pages/_app-99db904e083fc7f74e35.js" as="script"/><link rel="preload" href="/_next/static/chunks/588505f8033a39c9ef82bc46b1145ac9fd1db500.35a80b323597683276be.js" as="script"/><link rel="preload" href="/_next/static/chunks/pages/members/%5Bname%5D-42a7756adc6c0800b4dc.js" as="script"/></head><body><div id="__next"><header class="site-header"><div class="content-wrapper"><div class="site-header__inner"><a class="site-header__logo-link" href="/"><img src="https://engineers.feedforce.jp/logo.svg" alt="Feedforce Engineers&#x27; Blogs" class="site-header__logo-img"/></a><div class="site-header__links"><a href="https://feedforcegroup.jp" class="site-header__link">Company</a><a href="https://github.com/feedforce" class="site-header__link">GitHub</a><a href="https://engineers.recruit.feedforce.jp" class="site-header__link">Recruit</a></div></div></div></header><section class="member"><div class="content-wrapper"><header class="member-header"><div class="member-header__avatar"><img src="https://www.gravatar.com/userimage/47883079/b6f69b2794a96e21e5a037f511603d43?size=256" alt="ryz310" width="100" height="100" class="member-header__avatar-img"/></div><h1 class="member-header__name">ryz310</h1><p class="member-header__bio">ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢ã€‚ã‚¯ãƒ©ãƒ­ãƒ¯å¥½ãâš”ï¸</p><div class="member-header__links"><a href="https://twitter.com/ryosuke_sato" class="member-header__link"><img src="https://engineers.feedforce.jp/icons/twitter.svg" alt="Twitterã®ãƒ¦ãƒ¼ã‚¶ãƒ¼@ryosuke_sato" width="22" height="22"/></a><a href="https://github.com/ryz310" class="member-header__link"><img src="https://engineers.feedforce.jp/icons/github.svg" alt="GitHubã®ãƒ¦ãƒ¼ã‚¶ãƒ¼@ryz310" width="22" height="22"/></a><a href="https://rubygems.org/profiles/ryz310" class="member-header__link"><img src="https://engineers.feedforce.jp/icons/link.svg" alt="ã‚¦ã‚§ãƒ–ã‚µã‚¤ãƒˆã®ãƒªãƒ³ã‚¯" width="22" height="22"/></a></div></header><div class="member-posts-container"><div class="post-list"><article class="post-link"><a class="post-link__author" href="/members/ryz310"><img src="https://www.gravatar.com/userimage/47883079/b6f69b2794a96e21e5a037f511603d43?size=256" class="post-link__author-img" width="35" height="35"/><div class="post-link__author-name"><div class="post-link__author-name">ryz310</div><time dateTime="2021-09-24T02:30:00.000Z" class="post-link__date">4 months ago</time></div></a><a href="https://ryz310.hateblo.jp/entry/2021/09/24/113000" class="post-link__main-link"><h2 class="post-link__title">Rubocop Challenger ä½œè€…ãŒæ•™ãˆã‚‹ã‚ªã‚¹ã‚¹ãƒ¡ã®ä½¿ã„æ–¹ã€‚ ã€œ .rubocop_todo.yml è§£æ¶ˆå¾Œã‚‚æ¶ˆã•ãªã„ã§æ®‹ã—ã¦ãŠãã¨è‰¯ã„ã“ã¨ãŒã‚ã‚Šã¾ã™ï¼ã€œ</h2><div class="post-link__site"><img src="https://www.google.com/s2/favicons?domain=ryz310.hateblo.jp" width="14" height="14" class="post-link__site-favicon"/>ryz310.hateblo.jp</div></a></article><article class="post-link"><a class="post-link__author" href="/members/ryz310"><img src="https://www.gravatar.com/userimage/47883079/b6f69b2794a96e21e5a037f511603d43?size=256" class="post-link__author-img" width="35" height="35"/><div class="post-link__author-name"><div class="post-link__author-name">ryz310</div><time dateTime="2021-09-23T11:38:04.000Z" class="post-link__date">4 months ago</time></div></a><a href="https://ryz310.hateblo.jp/entry/2021/09/23/203804" class="post-link__main-link"><h2 class="post-link__title">MAU, DAU ã‚‚è¨ˆæ¸¬ã§ãã‚‹ã‚ˆã†ã«ãªã£ãŸ redis-objects-daily-counter v0.3.0</h2><div class="post-link__site"><img src="https://www.google.com/s2/favicons?domain=ryz310.hateblo.jp" width="14" height="14" class="post-link__site-favicon"/>ryz310.hateblo.jp</div></a></article><article class="post-link"><a class="post-link__author" href="/members/ryz310"><img src="https://www.gravatar.com/userimage/47883079/b6f69b2794a96e21e5a037f511603d43?size=256" class="post-link__author-img" width="35" height="35"/><div class="post-link__author-name"><div class="post-link__author-name">ryz310</div><time dateTime="2021-09-20T08:20:54.000Z" class="post-link__date">4 months ago</time></div></a><a href="https://ryz310.hateblo.jp/entry/2021/09/20/172054" class="post-link__main-link"><h2 class="post-link__title">Redis::Objects ã‚’ä½¿ã£ãŸã‚µãƒ¼ãƒ“ã‚¹æ”¹å–„ã¨æ–°ã—ã„ gem ã‚’ä½œã£ãŸãŠè©±</h2><div class="post-link__site"><img src="https://www.google.com/s2/favicons?domain=ryz310.hateblo.jp" width="14" height="14" class="post-link__site-favicon"/>ryz310.hateblo.jp</div></a></article><article class="post-link"><a class="post-link__author" href="/members/ryz310"><img src="https://www.gravatar.com/userimage/47883079/b6f69b2794a96e21e5a037f511603d43?size=256" class="post-link__author-img" width="35" height="35"/><div class="post-link__author-name"><div class="post-link__author-name">ryz310</div><time dateTime="2021-03-07T11:25:19.000Z" class="post-link__date">a year ago</time></div></a><a href="https://ryz310.hateblo.jp/entry/2021/03/07/202519" class="post-link__main-link"><h2 class="post-link__title">è‡ªä½œã® gem ã®åå‰ã‚’è€ƒãˆã‚‹ã®ã¯é›£ã—ã„</h2><div class="post-link__site"><img src="https://www.google.com/s2/favicons?domain=ryz310.hateblo.jp" width="14" height="14" class="post-link__site-favicon"/>ryz310.hateblo.jp</div></a></article><article class="post-link"><a class="post-link__author" href="/members/ryz310"><img src="https://www.gravatar.com/userimage/47883079/b6f69b2794a96e21e5a037f511603d43?size=256" class="post-link__author-img" width="35" height="35"/><div class="post-link__author-name"><div class="post-link__author-name">ryz310</div><time dateTime="2021-03-02T02:39:27.000Z" class="post-link__date">a year ago</time></div></a><a href="https://ryz310.hateblo.jp/entry/2021/03/02/113927" class="post-link__main-link"><h2 class="post-link__title">ActiveJob ã® retry_on ã« jitter ã¨ã„ã†ã‚ªãƒ—ã‚·ãƒ§ãƒ³ãŒã‚ã‚‹ã®çŸ¥ã£ã¦ã¾ã™ã‹ï¼Ÿ</h2><div class="post-link__site"><img src="https://www.google.com/s2/favicons?domain=ryz310.hateblo.jp" width="14" height="14" class="post-link__site-favicon"/>ryz310.hateblo.jp</div></a></article><article class="post-link"><a class="post-link__author" href="/members/ryz310"><img src="https://www.gravatar.com/userimage/47883079/b6f69b2794a96e21e5a037f511603d43?size=256" class="post-link__author-img" width="35" height="35"/><div class="post-link__author-name"><div class="post-link__author-name">ryz310</div><time dateTime="2021-02-23T13:27:20.000Z" class="post-link__date">a year ago</time></div></a><a href="https://ryz310.hateblo.jp/entry/2021/02/23/222720" class="post-link__main-link"><h2 class="post-link__title">RuboCop ã§é•åã—ã¦ã‚‹ã‚³ãƒ¼ãƒ‰ã‚’è‡ªå‹•çš„ã«ä¿®æ­£ã™ã‚‹ PR ä½œã£ã¦ãã‚ŒãŸã‚‰å¬‰ã—ã„ã‚„ã‚ã€‚ã§ãã‚‹ã§ãã‚Œã€‚</h2><div class="post-link__site"><img src="https://www.google.com/s2/favicons?domain=ryz310.hateblo.jp" width="14" height="14" class="post-link__site-favicon"/>ryz310.hateblo.jp</div></a></article><article class="post-link"><a class="post-link__author" href="/members/ryz310"><img src="https://www.gravatar.com/userimage/47883079/b6f69b2794a96e21e5a037f511603d43?size=256" class="post-link__author-img" width="35" height="35"/><div class="post-link__author-name"><div class="post-link__author-name">ryz310</div><time dateTime="2020-03-29T13:08:05.000Z" class="post-link__date">2 years ago</time></div></a><a href="https://ryz310.hateblo.jp/entry/2020/03/29/220805" class="post-link__main-link"><h2 class="post-link__title">my_api_client v0.16.0 ã‚’ãƒªãƒªãƒ¼ã‚¹ã—ã¾ã—ãŸğŸš€</h2><div class="post-link__site"><img src="https://www.google.com/s2/favicons?domain=ryz310.hateblo.jp" width="14" height="14" class="post-link__site-favicon"/>ryz310.hateblo.jp</div></a></article><article class="post-link"><a class="post-link__author" href="/members/ryz310"><img src="https://www.gravatar.com/userimage/47883079/b6f69b2794a96e21e5a037f511603d43?size=256" class="post-link__author-img" width="35" height="35"/><div class="post-link__author-name"><div class="post-link__author-name">ryz310</div><time dateTime="2020-03-21T07:38:49.000Z" class="post-link__date">2 years ago</time></div></a><a href="https://ryz310.hateblo.jp/entry/2020/03/21/163849" class="post-link__main-link"><h2 class="post-link__title">my_api_client v0.15.0 ã‚’ãƒªãƒªãƒ¼ã‚¹ã—ã¾ã—ãŸğŸš€</h2><div class="post-link__site"><img src="https://www.google.com/s2/favicons?domain=ryz310.hateblo.jp" width="14" height="14" class="post-link__site-favicon"/>ryz310.hateblo.jp</div></a></article><article class="post-link"><a class="post-link__author" href="/members/ryz310"><img src="https://www.gravatar.com/userimage/47883079/b6f69b2794a96e21e5a037f511603d43?size=256" class="post-link__author-img" width="35" height="35"/><div class="post-link__author-name"><div class="post-link__author-name">ryz310</div><time dateTime="2020-02-20T14:55:48.000Z" class="post-link__date">2 years ago</time></div></a><a href="https://ryz310.hateblo.jp/entry/2020/02/20/235548" class="post-link__main-link"><h2 class="post-link__title">é§†ã‘è¾¼ã¿ã§ Chrome 80 ã® SameSite=None; Secure ã®å¯¾å¿œã‚’ã‚„ã£ãŸğŸª</h2><div class="post-link__site"><img src="https://www.google.com/s2/favicons?domain=ryz310.hateblo.jp" width="14" height="14" class="post-link__site-favicon"/>ryz310.hateblo.jp</div></a></article><article class="post-link"><a class="post-link__author" href="/members/ryz310"><img src="https://www.gravatar.com/userimage/47883079/b6f69b2794a96e21e5a037f511603d43?size=256" class="post-link__author-img" width="35" height="35"/><div class="post-link__author-name"><div class="post-link__author-name">ryz310</div><time dateTime="2020-01-21T14:00:12.000Z" class="post-link__date">2 years ago</time></div></a><a href="https://ryz310.hateblo.jp/entry/2020/01/21/230012" class="post-link__main-link"><h2 class="post-link__title">my_api_client v0.13.0 ã‚’ãƒªãƒªãƒ¼ã‚¹ã—ã¾ã—ãŸğŸš€</h2><div class="post-link__site"><img src="https://www.google.com/s2/favicons?domain=ryz310.hateblo.jp" width="14" height="14" class="post-link__site-favicon"/>ryz310.hateblo.jp</div></a></article><article class="post-link"><a class="post-link__author" href="/members/ryz310"><img src="https://www.gravatar.com/userimage/47883079/b6f69b2794a96e21e5a037f511603d43?size=256" class="post-link__author-img" width="35" height="35"/><div class="post-link__author-name"><div class="post-link__author-name">ryz310</div><time dateTime="2020-01-19T06:28:26.000Z" class="post-link__date">2 years ago</time></div></a><a href="https://ryz310.hateblo.jp/entry/2020/01/19/152826" class="post-link__main-link"><h2 class="post-link__title">my_api_client v0.12.0 ã‚’ãƒªãƒªãƒ¼ã‚¹ã—ã¾ã—ãŸğŸš€</h2><div class="post-link__site"><img src="https://www.google.com/s2/favicons?domain=ryz310.hateblo.jp" width="14" height="14" class="post-link__site-favicon"/>ryz310.hateblo.jp</div></a></article><article class="post-link"><a class="post-link__author" href="/members/ryz310"><img src="https://www.gravatar.com/userimage/47883079/b6f69b2794a96e21e5a037f511603d43?size=256" class="post-link__author-img" width="35" height="35"/><div class="post-link__author-name"><div class="post-link__author-name">ryz310</div><time dateTime="2019-12-15T13:43:12.000Z" class="post-link__date">2 years ago</time></div></a><a href="https://ryz310.hateblo.jp/entry/2019/12/15/224312" class="post-link__main-link"><h2 class="post-link__title">ç§ã¨ gem</h2><div class="post-link__site"><img src="https://www.google.com/s2/favicons?domain=ryz310.hateblo.jp" width="14" height="14" class="post-link__site-favicon"/>ryz310.hateblo.jp</div></a></article><article class="post-link"><a class="post-link__author" href="/members/ryz310"><img src="https://www.gravatar.com/userimage/47883079/b6f69b2794a96e21e5a037f511603d43?size=256" class="post-link__author-img" width="35" height="35"/><div class="post-link__author-name"><div class="post-link__author-name">ryz310</div><time dateTime="2018-12-05T05:00:00.000Z" class="post-link__date">3 years ago</time></div></a><a href="https://developer.feedforce.jp/entry/2018/12/05/140000" class="post-link__main-link"><h2 class="post-link__title">ã¾ã  .rubocop_todo.yml ã§æ¶ˆè€—ã—ã¦ã‚‹ã®ï¼Ÿ</h2><div class="post-link__site"><img src="https://www.google.com/s2/favicons?domain=developer.feedforce.jp" width="14" height="14" class="post-link__site-favicon"/>developer.feedforce.jp</div></a></article><article class="post-link"><a class="post-link__author" href="/members/ryz310"><img src="https://www.gravatar.com/userimage/47883079/b6f69b2794a96e21e5a037f511603d43?size=256" class="post-link__author-img" width="35" height="35"/><div class="post-link__author-name"><div class="post-link__author-name">ryz310</div><time dateTime="2018-06-25T01:00:00.000Z" class="post-link__date">4 years ago</time></div></a><a href="https://developer.feedforce.jp/entry/2018/06/25/100000" class="post-link__main-link"><h2 class="post-link__title">10 åˆ†ã§ã‚ã‹ã‚‹ Ruby Guild</h2><div class="post-link__site"><img src="https://www.google.com/s2/favicons?domain=developer.feedforce.jp" width="14" height="14" class="post-link__site-favicon"/>developer.feedforce.jp</div></a></article><article class="post-link"><a class="post-link__author" href="/members/ryz310"><img src="https://www.gravatar.com/userimage/47883079/b6f69b2794a96e21e5a037f511603d43?size=256" class="post-link__author-img" width="35" height="35"/><div class="post-link__author-name"><div class="post-link__author-name">ryz310</div><time dateTime="2018-02-25T14:45:56.000Z" class="post-link__date">4 years ago</time></div></a><a href="https://developer.feedforce.jp/entry/2018/02/25/234556" class="post-link__main-link"><h2 class="post-link__title">ç¶šãƒ»Rails 5.2 é–‹ç™ºç’°å¢ƒã‚’ Docker ã§æ§‹ç¯‰ã™ã‚‹</h2><div class="post-link__site"><img src="https://www.google.com/s2/favicons?domain=developer.feedforce.jp" width="14" height="14" class="post-link__site-favicon"/>developer.feedforce.jp</div></a></article><article class="post-link"><a class="post-link__author" href="/members/ryz310"><img src="https://www.gravatar.com/userimage/47883079/b6f69b2794a96e21e5a037f511603d43?size=256" class="post-link__author-img" width="35" height="35"/><div class="post-link__author-name"><div class="post-link__author-name">ryz310</div><time dateTime="2018-02-11T05:00:12.000Z" class="post-link__date">4 years ago</time></div></a><a href="https://developer.feedforce.jp/entry/2018/02/11/140012" class="post-link__main-link"><h2 class="post-link__title">Rails 5.2 é–‹ç™ºç’°å¢ƒã‚’ Docker ã§æ§‹ç¯‰ã™ã‚‹</h2><div class="post-link__site"><img src="https://www.google.com/s2/favicons?domain=developer.feedforce.jp" width="14" height="14" class="post-link__site-favicon"/>developer.feedforce.jp</div></a></article><article class="post-link"><a class="post-link__author" href="/members/ryz310"><img src="https://www.gravatar.com/userimage/47883079/b6f69b2794a96e21e5a037f511603d43?size=256" class="post-link__author-img" width="35" height="35"/><div class="post-link__author-name"><div class="post-link__author-name">ryz310</div><time dateTime="2017-12-31T05:36:11.000Z" class="post-link__date">4 years ago</time></div></a><a href="https://developer.feedforce.jp/entry/2017/12/31/143611" class="post-link__main-link"><h2 class="post-link__title">mackerel ã®ã‚«ã‚¹ã‚¿ãƒ ãƒ¡ãƒˆãƒªãƒƒã‚¯ã‚’ echo ã§ãƒ¯ãƒ³ãƒ©ã‚¤ãƒŠãƒ¼ã—ãŸã£ãŸ</h2><div class="post-link__site"><img src="https://www.google.com/s2/favicons?domain=developer.feedforce.jp" width="14" height="14" class="post-link__site-favicon"/>developer.feedforce.jp</div></a></article><article class="post-link"><a class="post-link__author" href="/members/ryz310"><img src="https://www.gravatar.com/userimage/47883079/b6f69b2794a96e21e5a037f511603d43?size=256" class="post-link__author-img" width="35" height="35"/><div class="post-link__author-name"><div class="post-link__author-name">ryz310</div><time dateTime="2017-11-26T10:55:09.000Z" class="post-link__date">4 years ago</time></div></a><a href="https://developer.feedforce.jp/entry/2017/11/26/195509" class="post-link__main-link"><h2 class="post-link__title">Dynamoid ã®ä½¿ã„æ–¹ã€global_secondary_index ç·¨ã€‘</h2><div class="post-link__site"><img src="https://www.google.com/s2/favicons?domain=developer.feedforce.jp" width="14" height="14" class="post-link__site-favicon"/>developer.feedforce.jp</div></a></article><article class="post-link"><a class="post-link__author" href="/members/ryz310"><img src="https://www.gravatar.com/userimage/47883079/b6f69b2794a96e21e5a037f511603d43?size=256" class="post-link__author-img" width="35" height="35"/><div class="post-link__author-name"><div class="post-link__author-name">ryz310</div><time dateTime="2017-11-05T02:15:53.000Z" class="post-link__date">4 years ago</time></div></a><a href="https://developer.feedforce.jp/entry/2017/11/05/111553" class="post-link__main-link"><h2 class="post-link__title">Serverlessconf Tokyo 2017 ã«å‚åŠ ã—ã¦ãã¾ã—ãŸ</h2><div class="post-link__site"><img src="https://www.google.com/s2/favicons?domain=developer.feedforce.jp" width="14" height="14" class="post-link__site-favicon"/>developer.feedforce.jp</div></a></article><article class="post-link"><a class="post-link__author" href="/members/ryz310"><img src="https://www.gravatar.com/userimage/47883079/b6f69b2794a96e21e5a037f511603d43?size=256" class="post-link__author-img" width="35" height="35"/><div class="post-link__author-name"><div class="post-link__author-name">ryz310</div><time dateTime="2017-11-04T14:53:23.000Z" class="post-link__date">4 years ago</time></div></a><a href="https://developer.feedforce.jp/entry/2017/11/04/235323" class="post-link__main-link"><h2 class="post-link__title">Dynamoid ã®ä½¿ã„æ–¹ã€range ç·¨ã€‘</h2><div class="post-link__site"><img src="https://www.google.com/s2/favicons?domain=developer.feedforce.jp" width="14" height="14" class="post-link__site-favicon"/>developer.feedforce.jp</div></a></article></div></div></div></section><footer class="site-footer"><div class="content-wrapper"><p>Â© <!-- -->Feedforce Group Inc.</p></div></footer></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"member":{"name":"ryz310","bio":"ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢ã€‚ã‚¯ãƒ©ãƒ­ãƒ¯å¥½ãâš”ï¸","avatarSrc":"https://www.gravatar.com/userimage/47883079/b6f69b2794a96e21e5a037f511603d43?size=256","sources":["https://developer.feedforce.jp/rss/author/ryz310","https://ryz310.hateblo.jp/rss"],"twitterUsername":"ryosuke_sato","githubUsername":"ryz310","websiteUrl":"https://rubygems.org/profiles/ryz310"},"postItems":[{"title":"Rubocop Challenger ä½œè€…ãŒæ•™ãˆã‚‹ã‚ªã‚¹ã‚¹ãƒ¡ã®ä½¿ã„æ–¹ã€‚ ã€œ .rubocop_todo.yml è§£æ¶ˆå¾Œã‚‚æ¶ˆã•ãªã„ã§æ®‹ã—ã¦ãŠãã¨è‰¯ã„ã“ã¨ãŒã‚ã‚Šã¾ã™ï¼ã€œ","content":"\u003cp\u003e1 ãƒ¶æœˆã‚‚å‰ã«ãªã£ã¦ã—ã¾ã„ã¾ã—ãŸãŒã€ã‚¯ãƒ©ãƒƒã‚½ãƒ¼ãƒã® \u003ca href=\"https://twitter.com/yamat47\"\u003e@yamat47\u003c/a\u003e ã•ã‚“ãŒæ‹™ä½œã® \u003ca href=\"https://github.com/ryz310/rubocop_challenger\"\u003erubocop_challenger\u003c/a\u003e ã‚’ä½¿ã£ã¦ \u003ccode\u003e.rubocop_todo.yml\u003c/code\u003e ã‚’è§£æ¶ˆã—ãŸã€ã¨ã„ã†ãƒ–ãƒ­ã‚°ã‚’æ›¸ã„ã¦ä¸‹ã•ã„ã¾ã—ãŸã€‚\u003c/p\u003e\n\n\u003cp\u003eã‹ã¤ã¦ã®è‡ªåˆ†ã¨åŒã˜ã‚ˆã†ãªèª²é¡Œã‚’æŠ±ãˆã¦ã„ãŸæ–¹ã«è‡ªåˆ†ã® gem ã‚’å½¹ç«‹ã¦ã¦é ‚ã‘ãŸã®ã¯æœ¬å½“ã«å¬‰ã—ã„ã§ã™ã€‚\nãƒ–ãƒ­ã‚°åŒ–ã¾ã§ã—ã¦ä¸‹ã•ã£ãŸ @yamat47 ã•ã‚“ã€æœ¬å½“ã«ã‚ã‚ŠãŒã¨ã†ã”ã–ã„ã¾ã™ï¼\u003c/p\u003e\n\n\u003cblockquote class=\"twitter-tweet\"\u003e\u003cp lang=\"ja\" dir=\"ltr\"\u003eä»Šå¹´ã«å…¥ã£ã¦ã‹ã‚‰ã¡ã‚‡ã£ã¨ãšã¤é€²ã‚ã¦ãŸRuboCopã®Todoã¨ã®æˆ¦ã„ã‚’ã¾ã¨ã‚ã¦è¨˜äº‹ã«ã—ã¾ã—ãŸï¼ã“ã‚“ãªæ„Ÿã˜ã®ã€é–‹ç™ºè€…å‘ã‘ã®æ”¹å–„ã‚’ã™ã‚‹ã®ã‚‚ã‚ã¡ã‚ƒå¥½ãã§ã™ğŸ˜€\u003ca href=\"https://t.co/82F6xmAKko\"\u003ehttps://t.co/82F6xmAKko\u003c/a\u003e\u003c/p\u003e\u0026mdash; Takuya Yamaguchi (@yamat47) \u003ca href=\"https://twitter.com/yamat47/status/1427785662602743811?ref_src=twsrc%5Etfw\"\u003eAugust 18, 2021\u003c/a\u003e\u003c/blockquote\u003e\n\n\n\u003cp\u003e \u003cscript async src=\"https://platform.twitter.com/widgets.js\" charset=\"utf-8\"\u003e\u003c/script\u003e\u003c/p\u003e\n\n\u003cp\u003eã¾ãŸã€gem ã® README ã§ã¯ Circle CI ã‚’ä½¿ã£ãŸæ–¹æ³•ã—ã‹ç´¹ä»‹ã—ã¦ãªã‹ã£ãŸã®ã§ã™ãŒã€\u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/GitHub\"\u003eGitHub\u003c/a\u003e Actions ã‚’ä½¿ã£ãŸæ–¹æ³•ã«ã¤ã„ã¦ã‚‚è§£èª¬ã—ã¦é ‚ã„ã¦ãŠã‚Šã€é‡ã­é‡ã­æ„Ÿè¬æ„Ÿæ¿€ã§ã™ğŸ™\n\u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/GitHub\"\u003eGitHub\u003c/a\u003e ã® README ã‹ã‚‰ã‚‚ãƒªãƒ³ã‚¯è²¼ã‚‰ã›ã¦é ‚ãã¾ã—ãŸï¼\u003c/p\u003e\n\n\u003cp\u003e\u003ciframe src=\"https://hatenablog-parts.com/embed?url=https%3A%2F%2Fzenn.dev%2Fyamat47%2Farticles%2F219e14ebcf31a1d13ff4\" title=\"RuboCop Challengerã‚’GitHub Actionsã§å‹•ã‹ã™\" class=\"embed-card embed-webcard\" scrolling=\"no\" frameborder=\"0\" style=\"display: block; width: 100%; height: 155px; max-width: 500px; margin: 10px 0px;\"\u003e\u003c/iframe\u003e\u003ccite class=\"hatena-citation\"\u003e\u003ca href=\"https://zenn.dev/yamat47/articles/219e14ebcf31a1d13ff4\"\u003ezenn.dev\u003c/a\u003e\u003c/cite\u003e\u003c/p\u003e\n\n\u003ch2\u003eä¸€æ–¹ã§ã€ã²ã¨ã¤æ°—ã«ãªã£ãŸã“ã¨ãŒã€‚ã€‚\u003c/h2\u003e\n\n\u003cblockquote\u003e\u003cp\u003eè‡ªå‹•ã§è§£æ¶ˆã§ãã‚‹ã‚‚ã®ãŒãªããªã£ã¦ä»¥é™ã¯RuboCop Challengerã®ä»•çµ„ã¿ãŒä¸è¦ã«ãªã£ãŸã®ã§ã€æœ€å¾Œã¯å‰Šé™¤ã—ã¦ã—ã¾ã„ã¾ã—ãŸã€‚\u003c/p\u003e\n\n\u003cp\u003e\u003cimg src=\"https://tech.crassone.jp/images/posts/resolve-rubocop-todos-step-by-step/good-bye-rubocop-challenger.png\" alt=\"æ‰‹å‹•ã§å¯¾å¿œã—ãŸå±¥æ­´\" /\u003e\u003c/p\u003e\n\n\u003cp\u003eã‚ã‚ŠãŒã¨ã†ã€RuboCop Challenger...!!\u003c/p\u003e\u003c/blockquote\u003e\n\n\u003cp\u003eå¾…ã£ã¦ï¼\n\u003cstrong\u003eRubocop Challenger ã¯æ¶ˆã•ãªã„ã§æ®‹ã—ã¦ãŠãã¨è‰¯ã„ã“ã¨ãŒã‚ã‚Šã¾ã™ï¼\u003c/strong\u003e\u003c/p\u003e\n\n\u003ch2\u003eRubocop Challenger ã¯ v2.0.0 ã‹ã‚‰ bundle update æ©Ÿèƒ½ã‚‚å…¼ã­å‚™ãˆã¦ã„ã¾ã™\u003c/h2\u003e\n\n\u003cp\u003eæœ¬å®¶ RuboCop ã® gem ã‚’ã‚¢ãƒƒãƒ—ãƒ‡ãƒ¼ãƒˆã™ã‚‹æ™‚ã€æ–°ã—ãè¿½åŠ ã•ã‚ŒãŸ Cop ã«ã‚ˆã£ã¦ã‚¨ãƒ©ãƒ¼ãŒå‡ºã¦ã—ã¾ã£ãŸã€ã¨ã„ã†çµŒé¨“ã¯ç„¡ã„ã§ã—ã‚‡ã†ã‹ï¼Ÿ\nã“ã®ã‚¨ãƒ©ãƒ¼ã®è§£æ¶ˆãŒå„„åŠ«ã§ gem ã®ã‚¢ãƒƒãƒ—ãƒ‡ãƒ¼ãƒˆã‚’æ”¾ç½®ã—ã¦ã—ã¾ã£ã¦ã„ã‚‹æ–¹ã‚‚ã„ã‚‹ã‹ã‚‚çŸ¥ã‚Œã¾ã›ã‚“ã€‚\u003c/p\u003e\n\n\u003cp\u003eRubocop Challenger v1.0.0 ã®ãƒ†ãƒ¼ãƒã¯ã€Œè² å‚µã®è§£æ¶ˆã€ã ã£ãŸã‚“ã§ã™ãŒã€ v2.0.0 ã‹ã‚‰ã¯ã€ŒRuboCop ã¨ã®å…±ç”Ÿã€ã ã£ãŸã‚Šã—ã¾ã™ã€‚\u003c/p\u003e\n\n\u003cp\u003eèª°ã«ã‚‚è©±ã—ãŸã“ã¨ç„¡ã„ã®ã§ä»Šå§‹ã‚ã¦å…¬è¡¨ã—ã¾ã—ãŸâ†\u003c/p\u003e\n\n\u003cp\u003ev2.0.0 ä»¥ä¸Šã® Rubocop Challenger ã§ã¯æœ€åˆã« RuboCop é–¢é€£ã® gem ã«å¯¾ã—ã¦ \u003ccode\u003ebundle update\u003c/code\u003e ã‚’å®Ÿè¡Œã™ã‚‹ã‚ˆã†ã«ãªã£ã¦ã„ã¾ã™ã€‚\u003c/p\u003e\n\n\u003cp\u003eæœ€æ–°ã® RuboCop ã«ã‚¢ãƒƒãƒ—ãƒ‡ãƒ¼ãƒˆã—ãŸçŠ¶æ…‹ã§ Rubocop Challenge ã‚’å®Ÿè¡Œã™ã‚‹ã®ã§ã€æ–°ã—ãè¿½åŠ ã•ã‚ŒãŸ Cop ã«é•åã—ãŸã‚³ãƒ¼ãƒ‰ãŒã‚ã£ãŸå ´åˆã€ãã®å ´ã§å³ \u003ccode\u003eauto-correct\u003c/code\u003e ã‚’å®Ÿè¡Œã—ã€\u003ca href=\"https://github.com/ryz310/my_api_client/pull/616\"\u003eä»¥ä¸‹ã®ã‚ˆã†ãª PR\u003c/a\u003e ã‚’ä½œæˆã—ã¦ãã‚Œã¾ã™ã€‚\u003c/p\u003e\n\n\u003cp\u003e\u003cfigure class=\"figure-image figure-image-fotolife\" title=\"PR1\"\u003e\u003cspan itemscope itemtype=\"http://schema.org/Photograph\"\u003e\u003cimg src=\"https://cdn-ak.f.st-hatena.com/images/fotolife/r/ryz310/20210923/20210923205915.png\" alt=\"f:id:ryz310:20210923205915p:plain\" width=\"949\" height=\"388\" loading=\"lazy\" title=\"\" class=\"hatena-fotolife\" itemprop=\"image\"\u003e\u003c/span\u003e\u003cfigcaption\u003e\u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/RSpec\"\u003eRSpec\u003c/a\u003e/ExcessiveDocstringSpacing ã‚’ä¿®æ­£ã—ãŸ PR ãŒä½œæˆã•ã‚Œã¾ã—ãŸ\u003c/figcaption\u003e\u003c/figure\u003e\n\u003cfigure class=\"figure-image figure-image-fotolife\" title=\"PR2\"\u003e\u003cspan itemscope itemtype=\"http://schema.org/Photograph\"\u003e\u003cimg src=\"https://cdn-ak.f.st-hatena.com/images/fotolife/r/ryz310/20210923/20210923210041.png\" alt=\"f:id:ryz310:20210923210041p:plain\" width=\"1200\" height=\"455\" loading=\"lazy\" title=\"\" class=\"hatena-fotolife\" itemprop=\"image\"\u003e\u003c/span\u003e\u003cfigcaption\u003eåŒ PR ã§ \u003ccode\u003erubocop-rspec\u003c/code\u003e ãŒ v2.4.0 ã‹ã‚‰ v2.5.0 ã«ã‚¢ãƒƒãƒ—ãƒ‡ãƒ¼ãƒˆã•ã‚Œã¦ã„ã¾ã™\u003c/figcaption\u003e\u003c/figure\u003e\u003c/p\u003e\n\n\u003cp\u003eä¸€æ–¹ dependabot ã‚‚ \u003ccode\u003erubocop-rspec\u003c/code\u003e v2.5.0 ã® bundle update ã® PR ã‚’ä½œæˆã—ã¦ãã‚Œã¦ã„ã¾ã™ãŒã€ã“ã¡ã‚‰ã¯ CI ã® RuboCop ãƒã‚§ãƒƒã‚¯ã§ã‚¨ãƒ©ãƒ¼ã«ãªã£ã¦ã„ã¾ã™ã€‚\nRuboCop ã® CI ãƒã‚§ãƒƒã‚¯ã‚’ãƒ‘ã‚¹ã—ãªã„ã¨ merge å‡ºæ¥ãªã„è¨­å®šã«ã—ã¦ã„ã‚‹å ´åˆã‚‚å¤šã„ã¨æ€ã„ã¾ã™ãŒã€ã“ã‚Œã‚’ä¿®æ­£ã™ã‚‹ã®ã¯åœ°å‘³ã«é¢å€’ã§ã™ã€‚\u003c/p\u003e\n\n\u003cp\u003e\u003cfigure class=\"figure-image figure-image-fotolife\" title=\"aaa\"\u003e\u003cspan itemscope itemtype=\"http://schema.org/Photograph\"\u003e\u003cimg src=\"https://cdn-ak.f.st-hatena.com/images/fotolife/r/ryz310/20210923/20210923210548.png\" alt=\"f:id:ryz310:20210923210548p:plain\" width=\"936\" height=\"364\" loading=\"lazy\" title=\"\" class=\"hatena-fotolife\" itemprop=\"image\"\u003e\u003c/span\u003e\u003cspan itemscope itemtype=\"http://schema.org/Photograph\"\u003e\u003cimg src=\"https://cdn-ak.f.st-hatena.com/images/fotolife/r/ryz310/20210923/20210923210545.png\" alt=\"f:id:ryz310:20210923210545p:plain\" width=\"955\" height=\"291\" loading=\"lazy\" title=\"\" class=\"hatena-fotolife\" itemprop=\"image\"\u003e\u003c/span\u003e\u003cfigcaption\u003eRuboCop ã® CI ãƒã‚§ãƒƒã‚¯ã§ã‚¨ãƒ©ãƒ¼\u003c/figcaption\u003e\u003c/figure\u003e\u003c/p\u003e\n\n\u003cp\u003eã¡ãªã¿ã«é•åã—ãŸã‚³ãƒ¼ãƒ‰ãŒå­˜åœ¨ã—ãªã„å ´åˆã¯ \u003ca href=\"https://github.com/ryz310/rubocop_challenger/pull/531\"\u003eRe-generate .rubocop_todo.yml with RuboCop v1.21.0\u003c/a\u003e ã®ã‚ˆã†ãª PR ãŒä½œæˆã•ã‚Œã€ \u003ccode\u003ebundle update\u003c/code\u003e ã‚’å®Ÿè¡Œã—ãŸã ã‘ã® PR ãŒä½œæˆã•ã‚Œã¾ã™ã€‚\u003c/p\u003e\n\n\u003cp\u003eã“ã®æ©Ÿèƒ½ã¯åœ°å‘³ã«ä¾¿åˆ©ãªã®ã§ã€CI ã®ã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒ«å®Ÿè¡Œã‚’ä½¿ã£ã¦é€±ã‚¤ãƒãã‚‰ã„ã§å‹•ã‹ã™ã®ãŒã‚ªã‚¹ã‚¹ãƒ¡ã®ä½¿ã„æ–¹ã§ã™ã€‚\u003c/p\u003e\n\n\u003ch2\u003ev2.0.0 ä»¥é™ã® RuboCop Challenger ã¯ Gemfile ã«å«ã‚ãªã„äº‹ã‚’ã‚ªã‚¹ã‚¹ãƒ¡ã—ã¾ã™\u003c/h2\u003e\n\n\u003cp\u003e\u003ccode\u003ev2.0.0\u003c/code\u003e ã‚ãŸã‚Šã‹ã‚‰ RuboCop Challenger ã‚’ Gemfile ã«å«ã‚ã¦å®Ÿè¡Œã™ã‚‹ã¨ã€ä»–ã® gem ã¨ã®äº’æ›æ€§å•é¡Œã§ã‚¨ãƒ©ãƒ¼ã«ãªã‚‹ã‚±ãƒ¼ã‚¹ã‚’ç¢ºèªã—ã¦ãŠã‚Šã¾ã™ğŸ™\nç¾åœ¨ã§ã¯ä»¥ä¸‹ã®ã‚ˆã†ã« CI ã§ã®å®Ÿè¡Œæ™‚ã« \u003ccode\u003egem install rubocop_challenger\u003c/code\u003e ã‚’å®Ÿè¡Œã™ã‚‹æ–¹æ³•ã‚’ã‚ªã‚¹ã‚¹ãƒ¡ã—ã¦ãŠã‚Šã¾ã™ã€‚\u003c/p\u003e\n\n\u003cpre class=\"code lang-yaml\" data-lang=\"yaml\" data-unlink\u003e\u003cspan class=\"synComment\"\u003e# .circleci/config.yml\u003c/span\u003e\n\u003cspan class=\"synIdentifier\"\u003eversion\u003c/span\u003e\u003cspan class=\"synSpecial\"\u003e:\u003c/span\u003e \u003cspan class=\"synConstant\"\u003e2\u003c/span\u003e\n\n\u003cspan class=\"synIdentifier\"\u003ejobs\u003c/span\u003e\u003cspan class=\"synSpecial\"\u003e:\u003c/span\u003e\n  \u003cspan class=\"synIdentifier\"\u003erubocop_challenge\u003c/span\u003e\u003cspan class=\"synSpecial\"\u003e:\u003c/span\u003e\n    \u003cspan class=\"synIdentifier\"\u003edocker\u003c/span\u003e\u003cspan class=\"synSpecial\"\u003e:\u003c/span\u003e\n      \u003cspan class=\"synStatement\"\u003e- \u003c/span\u003e\u003cspan class=\"synIdentifier\"\u003eimage\u003c/span\u003e\u003cspan class=\"synSpecial\"\u003e:\u003c/span\u003e circleci/ruby:3.0\n    \u003cspan class=\"synIdentifier\"\u003eworking_directory\u003c/span\u003e\u003cspan class=\"synSpecial\"\u003e:\u003c/span\u003e ~/repo\n    \u003cspan class=\"synIdentifier\"\u003esteps\u003c/span\u003e\u003cspan class=\"synSpecial\"\u003e:\u003c/span\u003e\n      \u003cspan class=\"synStatement\"\u003e- \u003c/span\u003echeckout\n      \u003cspan class=\"synStatement\"\u003e- \u003c/span\u003e\u003cspan class=\"synIdentifier\"\u003erun\u003c/span\u003e\u003cspan class=\"synSpecial\"\u003e:\u003c/span\u003e\n          \u003cspan class=\"synIdentifier\"\u003ename\u003c/span\u003e\u003cspan class=\"synSpecial\"\u003e:\u003c/span\u003e Rubocop Challenge\n          \u003cspan class=\"synIdentifier\"\u003ecommand\u003c/span\u003e\u003cspan class=\"synSpecial\"\u003e:\u003c/span\u003e |\n            gem install rubocop_challenger\n            rubocop_challenger go \\\n              --email=rubocop-challenger@example.com \\\n              --name=\u0026quot;Rubocop Challenger\u0026quot;\n\n\u003cspan class=\"synIdentifier\"\u003eworkflows\u003c/span\u003e\u003cspan class=\"synSpecial\"\u003e:\u003c/span\u003e\n  \u003cspan class=\"synIdentifier\"\u003eversion\u003c/span\u003e\u003cspan class=\"synSpecial\"\u003e:\u003c/span\u003e \u003cspan class=\"synConstant\"\u003e2\u003c/span\u003e\n\n  \u003cspan class=\"synIdentifier\"\u003enightly\u003c/span\u003e\u003cspan class=\"synSpecial\"\u003e:\u003c/span\u003e\n    \u003cspan class=\"synIdentifier\"\u003etriggers\u003c/span\u003e\u003cspan class=\"synSpecial\"\u003e:\u003c/span\u003e\n      \u003cspan class=\"synStatement\"\u003e- \u003c/span\u003e\u003cspan class=\"synIdentifier\"\u003eschedule\u003c/span\u003e\u003cspan class=\"synSpecial\"\u003e:\u003c/span\u003e\n          \u003cspan class=\"synIdentifier\"\u003ecron\u003c/span\u003e\u003cspan class=\"synSpecial\"\u003e:\u003c/span\u003e \u003cspan class=\"synConstant\"\u003e\u0026quot;30 23 * * 1,2,3\u0026quot;\u003c/span\u003e\u003cspan class=\"synComment\"\u003e # 8:30am every Tuesday, Wednsday and Thursday (JST)\u003c/span\u003e\n          \u003cspan class=\"synIdentifier\"\u003efilters\u003c/span\u003e\u003cspan class=\"synSpecial\"\u003e:\u003c/span\u003e\n            \u003cspan class=\"synIdentifier\"\u003ebranches\u003c/span\u003e\u003cspan class=\"synSpecial\"\u003e:\u003c/span\u003e\n              \u003cspan class=\"synIdentifier\"\u003eonly\u003c/span\u003e\u003cspan class=\"synSpecial\"\u003e:\u003c/span\u003e\n                \u003cspan class=\"synStatement\"\u003e- \u003c/span\u003emaster\n    \u003cspan class=\"synIdentifier\"\u003ejobs\u003c/span\u003e\u003cspan class=\"synSpecial\"\u003e:\u003c/span\u003e\n      \u003cspan class=\"synStatement\"\u003e- \u003c/span\u003erubocop_challenge\n\u003c/pre\u003e\n\n\n\u003cp\u003eã“ã¡ã‚‰ã¯å®Œå…¨ã«è‡ªåˆ†ãŒã‚„ã‚‰ã‹ã—ãŸã¨ã„ã†ã‹ã€ä¼šç¤¾ã§æ›¸ã„ãŸä»¥ä¸‹ã®ãƒ–ãƒ­ã‚°ã®å†…å®¹ãŒå¤ã„ã¾ã¾æ›´æ–°ã—ãªã‹ã£ãŸãŸã‚ã€ \u003ccode\u003eGemfile\u003c/code\u003e ã« \u003ccode\u003erubocop_challenger\u003c/code\u003e ã‚’å…¥ã‚Œã¦ä½¿ã£ã¦ã„ã‚‹æ–¹ãŒæ²¢å±± (?) ã„ã‚‹ã‹ã‚‚çŸ¥ã‚Œã¾ã›ã‚“ã€‚\n\u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/GitHub\"\u003eGitHub\u003c/a\u003e ã® README ã§ã™ã‚‰é–“é•ã£ã¦ã„ãŸã®ã§ã€ã•ã£ãæ…Œã¦ã¦ä¿®æ­£ã—ã¾ã—ãŸã€‚ã€‚\u003c/p\u003e\n\n\u003cp\u003e\u003ciframe src=\"https://hatenablog-parts.com/embed?url=https%3A%2F%2Fdeveloper.feedforce.jp%2Fentry%2F2018%2F12%2F05%2F140000\" title=\"ã¾ã  .rubocop_todo.yml ã§æ¶ˆè€—ã—ã¦ã‚‹ã®ï¼Ÿ - Feedforce Developer Blog\" class=\"embed-card embed-blogcard\" scrolling=\"no\" frameborder=\"0\" style=\"display: block; width: 100%; height: 190px; max-width: 500px; margin: 10px 0px;\"\u003e\u003c/iframe\u003e\u003ccite class=\"hatena-citation\"\u003e\u003ca href=\"https://developer.feedforce.jp/entry/2018/12/05/140000\"\u003edeveloper.feedforce.jp\u003c/a\u003e\u003c/cite\u003e\u003c/p\u003e\n\n\u003cp\u003eå¤ã„æ–¹æ³•ã§ä½¿ã£ã¦ã—ã¾ã£ãŸçš†ã•ã‚“ã€æœ¬å½“ã«ã™ã¿ã¾ã›ã‚“ã€‚ã€‚\u003c/p\u003e\n\n\u003cp\u003e\u003ccode\u003erubocop_challenger\u003c/code\u003e ã‚’ Gemfile ã«å«ã‚ã‚‹ã®ãŒ\u003ccode\u003e.rubocop_todo.yml\u003c/code\u003e è§£æ¶ˆå¾Œã«ã‚¢ãƒ³ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ãŸããªã‚‹ç†ç”±ã®ä¸€ã¤ã ã¨æ€ã†ã®ã§ã€ã“ã‚Œã§ä½¿ã„ç¶šã‘ã‚‹äººãŒå¢—ãˆã¦ãã‚Œã‚‹ã¨å¬‰ã—ã„ã§ã™ğŸ™\u003c/p\u003e\n\n\u003ch2\u003eå®‰å…¨ãª auto-correct ã‹ã©ã†ã‹ãŒåˆ†ã‹ã‚Šã¾ã™\u003c/h2\u003e\n\n\u003cp\u003eç‰¹ã«ã‚¢ãƒŠã‚¦ãƒ³ã‚¹ã—ã¦ã„ãªã‹ã£ãŸæ°—ãŒã™ã‚‹ã®ã§ã¤ã„ã§ã«ã”ç´¹ä»‹ã—ã¦ãŠãã¨ã€æœ€æ–°ã® Rubocop Challenger ã§ã¯ã€Œå®‰å…¨ãª auto-correctã€ã‹ã©ã†ã‹ãŒåˆ†ã‹ã‚‹ã‚ˆã†ã«ãªã£ã¦ã„ã¦ã€ PR ã®æœ¬æ–‡ã«ä»¥ä¸‹ã®ã‚ˆã†ãªè¨˜è¿°ãŒå…¥ã‚‹ã‚ˆã†ã«ãªã£ã¦ã„ã¾ã™ã€‚\u003c/p\u003e\n\n\u003cp\u003e\u003cfigure class=\"figure-image figure-image-fotolife\" title=\"å®‰å…¨ãª auto-correct \"\u003e\u003cspan itemscope itemtype=\"http://schema.org/Photograph\"\u003e\u003cimg src=\"https://cdn-ak.f.st-hatena.com/images/fotolife/r/ryz310/20210923/20210923215918.png\" alt=\"f:id:ryz310:20210923215918p:plain\" width=\"426\" height=\"156\" loading=\"lazy\" title=\"\" class=\"hatena-fotolife\" itemprop=\"image\"\u003e\u003c/span\u003e\u003cfigcaption\u003eâœ… å®‰å…¨ãª auto-correct\u003c/figcaption\u003e\u003c/figure\u003e\u003c/p\u003e\n\n\u003cp\u003e\u003cfigure class=\"figure-image figure-image-fotolife\" title=\"å®‰å…¨ã§ãªã„ auto-correct\"\u003e\u003cspan itemscope itemtype=\"http://schema.org/Photograph\"\u003e\u003cimg src=\"https://cdn-ak.f.st-hatena.com/images/fotolife/r/ryz310/20210923/20210923220846.png\" alt=\"f:id:ryz310:20210923220846p:plain\" width=\"427\" height=\"168\" loading=\"lazy\" title=\"\" class=\"hatena-fotolife\" itemprop=\"image\"\u003e\u003c/span\u003e\u003cfigcaption\u003eâš ï¸ å®‰å…¨ã§ãªã„ auto-correct\u003c/figcaption\u003e\u003c/figure\u003e\u003c/p\u003e\n\n\u003cp\u003eRuboCop å…¬å¼ã«ã‚ˆã‚‹ã¨ã€Œå®‰å…¨ãª auto-correctã€ã®å ´åˆã€å…ƒã®\u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/%A5%BD%A1%BC%A5%B9%A5%B3%A1%BC%A5%C9\"\u003eã‚½ãƒ¼ã‚¹ã‚³ãƒ¼ãƒ‰\u003c/a\u003eãŒå£Šã‚Œã‚‹å¿ƒé…ã¯ç„¡ã„ã¨ã®ã“ã¨ãªã®ã§ã€ PR merge ã™ã‚‹éš›ã®åˆ¤æ–­ææ–™ã«ã—ã¦é ‚ã‘ã‚Œã°ã€‚\u003c/p\u003e\n","contentSnippet":"1 ãƒ¶æœˆã‚‚å‰ã«ãªã£ã¦ã—ã¾ã„ã¾ã—ãŸãŒã€ã‚¯ãƒ©ãƒƒã‚½ãƒ¼ãƒã® @yamat47 ã•ã‚“ãŒæ‹™ä½œã® rubocop_challenger ã‚’ä½¿ã£ã¦ .rubocop_todo.yml ã‚’è§£æ¶ˆã—ãŸã€ã¨ã„ã†ãƒ–ãƒ­ã‚°ã‚’æ›¸ã„ã¦ä¸‹ã•ã„ã¾ã—ãŸã€‚ã‹ã¤ã¦ã®è‡ªåˆ†ã¨åŒã˜ã‚ˆã†ãªèª²é¡Œã‚’æŠ±ãˆã¦ã„ãŸæ–¹ã«è‡ªåˆ†ã® gem ã‚’å½¹ç«‹ã¦ã¦é ‚ã‘ãŸã®ã¯æœ¬å½“ã«å¬‰ã—ã„ã§ã™ã€‚ãƒ–ãƒ­ã‚°åŒ–ã¾ã§ã—ã¦ä¸‹ã•ã£ãŸ @yamat47 ã•ã‚“ã€æœ¬å½“ã«ã‚ã‚ŠãŒã¨ã†ã”ã–ã„ã¾ã™ï¼ä»Šå¹´ã«å…¥ã£ã¦ã‹ã‚‰ã¡ã‚‡ã£ã¨ãšã¤é€²ã‚ã¦ãŸRuboCopã®Todoã¨ã®æˆ¦ã„ã‚’ã¾ã¨ã‚ã¦è¨˜äº‹ã«ã—ã¾ã—ãŸï¼ã“ã‚“ãªæ„Ÿã˜ã®ã€é–‹ç™ºè€…å‘ã‘ã®æ”¹å–„ã‚’ã™ã‚‹ã®ã‚‚ã‚ã¡ã‚ƒå¥½ãã§ã™ğŸ˜€https://t.co/82F6xmAKkoâ€” Takuya Yamaguchi (@yamat47) August 18, 2021 ã¾ãŸã€gem ã® README ã§ã¯ Circle CI ã‚’ä½¿ã£ãŸæ–¹æ³•ã—ã‹ç´¹ä»‹ã—ã¦ãªã‹ã£ãŸã®ã§ã™ãŒã€GitHub Actions ã‚’ä½¿ã£ãŸæ–¹æ³•ã«ã¤ã„ã¦ã‚‚è§£èª¬ã—ã¦é ‚ã„ã¦ãŠã‚Šã€é‡ã­é‡ã­æ„Ÿè¬æ„Ÿæ¿€ã§ã™ğŸ™GitHub ã® README ã‹ã‚‰ã‚‚ãƒªãƒ³ã‚¯è²¼ã‚‰ã›ã¦é ‚ãã¾ã—ãŸï¼zenn.devä¸€æ–¹ã§ã€ã²ã¨ã¤æ°—ã«ãªã£ãŸã“ã¨ãŒã€‚ã€‚è‡ªå‹•ã§è§£æ¶ˆã§ãã‚‹ã‚‚ã®ãŒãªããªã£ã¦ä»¥é™ã¯RuboCop Challengerã®ä»•çµ„ã¿ãŒä¸è¦ã«ãªã£ãŸã®ã§ã€æœ€å¾Œã¯å‰Šé™¤ã—ã¦ã—ã¾ã„ã¾ã—ãŸã€‚ã‚ã‚ŠãŒã¨ã†ã€RuboCop Challenger...!!å¾…ã£ã¦ï¼Rubocop Challenger ã¯æ¶ˆã•ãªã„ã§æ®‹ã—ã¦ãŠãã¨è‰¯ã„ã“ã¨ãŒã‚ã‚Šã¾ã™ï¼Rubocop Challenger ã¯ v2.0.0 ã‹ã‚‰ bundle update æ©Ÿèƒ½ã‚‚å…¼ã­å‚™ãˆã¦ã„ã¾ã™æœ¬å®¶ RuboCop ã® gem ã‚’ã‚¢ãƒƒãƒ—ãƒ‡ãƒ¼ãƒˆã™ã‚‹æ™‚ã€æ–°ã—ãè¿½åŠ ã•ã‚ŒãŸ Cop ã«ã‚ˆã£ã¦ã‚¨ãƒ©ãƒ¼ãŒå‡ºã¦ã—ã¾ã£ãŸã€ã¨ã„ã†çµŒé¨“ã¯ç„¡ã„ã§ã—ã‚‡ã†ã‹ï¼Ÿã“ã®ã‚¨ãƒ©ãƒ¼ã®è§£æ¶ˆãŒå„„åŠ«ã§ gem ã®ã‚¢ãƒƒãƒ—ãƒ‡ãƒ¼ãƒˆã‚’æ”¾ç½®ã—ã¦ã—ã¾ã£ã¦ã„ã‚‹æ–¹ã‚‚ã„ã‚‹ã‹ã‚‚çŸ¥ã‚Œã¾ã›ã‚“ã€‚Rubocop Challenger v1.0.0 ã®ãƒ†ãƒ¼ãƒã¯ã€Œè² å‚µã®è§£æ¶ˆã€ã ã£ãŸã‚“ã§ã™ãŒã€ v2.0.0 ã‹ã‚‰ã¯ã€ŒRuboCop ã¨ã®å…±ç”Ÿã€ã ã£ãŸã‚Šã—ã¾ã™ã€‚èª°ã«ã‚‚è©±ã—ãŸã“ã¨ç„¡ã„ã®ã§ä»Šå§‹ã‚ã¦å…¬è¡¨ã—ã¾ã—ãŸâ†v2.0.0 ä»¥ä¸Šã® Rubocop Challenger ã§ã¯æœ€åˆã« RuboCop é–¢é€£ã® gem ã«å¯¾ã—ã¦ bundle update ã‚’å®Ÿè¡Œã™ã‚‹ã‚ˆã†ã«ãªã£ã¦ã„ã¾ã™ã€‚æœ€æ–°ã® RuboCop ã«ã‚¢ãƒƒãƒ—ãƒ‡ãƒ¼ãƒˆã—ãŸçŠ¶æ…‹ã§ Rubocop Challenge ã‚’å®Ÿè¡Œã™ã‚‹ã®ã§ã€æ–°ã—ãè¿½åŠ ã•ã‚ŒãŸ Cop ã«é•åã—ãŸã‚³ãƒ¼ãƒ‰ãŒã‚ã£ãŸå ´åˆã€ãã®å ´ã§å³ auto-correct ã‚’å®Ÿè¡Œã—ã€ä»¥ä¸‹ã®ã‚ˆã†ãª PR ã‚’ä½œæˆã—ã¦ãã‚Œã¾ã™ã€‚RSpec/ExcessiveDocstringSpacing ã‚’ä¿®æ­£ã—ãŸ PR ãŒä½œæˆã•ã‚Œã¾ã—ãŸåŒ PR ã§ rubocop-rspec ãŒ v2.4.0 ã‹ã‚‰ v2.5.0 ã«ã‚¢ãƒƒãƒ—ãƒ‡ãƒ¼ãƒˆã•ã‚Œã¦ã„ã¾ã™ä¸€æ–¹ dependabot ã‚‚ rubocop-rspec v2.5.0 ã® bundle update ã® PR ã‚’ä½œæˆã—ã¦ãã‚Œã¦ã„ã¾ã™ãŒã€ã“ã¡ã‚‰ã¯ CI ã® RuboCop ãƒã‚§ãƒƒã‚¯ã§ã‚¨ãƒ©ãƒ¼ã«ãªã£ã¦ã„ã¾ã™ã€‚RuboCop ã® CI ãƒã‚§ãƒƒã‚¯ã‚’ãƒ‘ã‚¹ã—ãªã„ã¨ merge å‡ºæ¥ãªã„è¨­å®šã«ã—ã¦ã„ã‚‹å ´åˆã‚‚å¤šã„ã¨æ€ã„ã¾ã™ãŒã€ã“ã‚Œã‚’ä¿®æ­£ã™ã‚‹ã®ã¯åœ°å‘³ã«é¢å€’ã§ã™ã€‚RuboCop ã® CI ãƒã‚§ãƒƒã‚¯ã§ã‚¨ãƒ©ãƒ¼ã¡ãªã¿ã«é•åã—ãŸã‚³ãƒ¼ãƒ‰ãŒå­˜åœ¨ã—ãªã„å ´åˆã¯ Re-generate .rubocop_todo.yml with RuboCop v1.21.0 ã®ã‚ˆã†ãª PR ãŒä½œæˆã•ã‚Œã€ bundle update ã‚’å®Ÿè¡Œã—ãŸã ã‘ã® PR ãŒä½œæˆã•ã‚Œã¾ã™ã€‚ã“ã®æ©Ÿèƒ½ã¯åœ°å‘³ã«ä¾¿åˆ©ãªã®ã§ã€CI ã®ã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒ«å®Ÿè¡Œã‚’ä½¿ã£ã¦é€±ã‚¤ãƒãã‚‰ã„ã§å‹•ã‹ã™ã®ãŒã‚ªã‚¹ã‚¹ãƒ¡ã®ä½¿ã„æ–¹ã§ã™ã€‚v2.0.0 ä»¥é™ã® RuboCop Challenger ã¯ Gemfile ã«å«ã‚ãªã„äº‹ã‚’ã‚ªã‚¹ã‚¹ãƒ¡ã—ã¾ã™v2.0.0 ã‚ãŸã‚Šã‹ã‚‰ RuboCop Challenger ã‚’ Gemfile ã«å«ã‚ã¦å®Ÿè¡Œã™ã‚‹ã¨ã€ä»–ã® gem ã¨ã®äº’æ›æ€§å•é¡Œã§ã‚¨ãƒ©ãƒ¼ã«ãªã‚‹ã‚±ãƒ¼ã‚¹ã‚’ç¢ºèªã—ã¦ãŠã‚Šã¾ã™ğŸ™ç¾åœ¨ã§ã¯ä»¥ä¸‹ã®ã‚ˆã†ã« CI ã§ã®å®Ÿè¡Œæ™‚ã« gem install rubocop_challenger ã‚’å®Ÿè¡Œã™ã‚‹æ–¹æ³•ã‚’ã‚ªã‚¹ã‚¹ãƒ¡ã—ã¦ãŠã‚Šã¾ã™ã€‚# .circleci/config.ymlversion: 2jobs:  rubocop_challenge:    docker:      - image: circleci/ruby:3.0    working_directory: ~/repo    steps:      - checkout      - run:          name: Rubocop Challenge          command: |            gem install rubocop_challenger            rubocop_challenger go \\              --email=rubocop-challenger@example.com \\              --name=\"Rubocop Challenger\"workflows:  version: 2  nightly:    triggers:      - schedule:          cron: \"30 23 * * 1,2,3\" # 8:30am every Tuesday, Wednsday and Thursday (JST)          filters:            branches:              only:                - master    jobs:      - rubocop_challengeã“ã¡ã‚‰ã¯å®Œå…¨ã«è‡ªåˆ†ãŒã‚„ã‚‰ã‹ã—ãŸã¨ã„ã†ã‹ã€ä¼šç¤¾ã§æ›¸ã„ãŸä»¥ä¸‹ã®ãƒ–ãƒ­ã‚°ã®å†…å®¹ãŒå¤ã„ã¾ã¾æ›´æ–°ã—ãªã‹ã£ãŸãŸã‚ã€ Gemfile ã« rubocop_challenger ã‚’å…¥ã‚Œã¦ä½¿ã£ã¦ã„ã‚‹æ–¹ãŒæ²¢å±± (?) ã„ã‚‹ã‹ã‚‚çŸ¥ã‚Œã¾ã›ã‚“ã€‚GitHub ã® README ã§ã™ã‚‰é–“é•ã£ã¦ã„ãŸã®ã§ã€ã•ã£ãæ…Œã¦ã¦ä¿®æ­£ã—ã¾ã—ãŸã€‚ã€‚developer.feedforce.jpå¤ã„æ–¹æ³•ã§ä½¿ã£ã¦ã—ã¾ã£ãŸçš†ã•ã‚“ã€æœ¬å½“ã«ã™ã¿ã¾ã›ã‚“ã€‚ã€‚rubocop_challenger ã‚’ Gemfile ã«å«ã‚ã‚‹ã®ãŒ.rubocop_todo.yml è§£æ¶ˆå¾Œã«ã‚¢ãƒ³ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ãŸããªã‚‹ç†ç”±ã®ä¸€ã¤ã ã¨æ€ã†ã®ã§ã€ã“ã‚Œã§ä½¿ã„ç¶šã‘ã‚‹äººãŒå¢—ãˆã¦ãã‚Œã‚‹ã¨å¬‰ã—ã„ã§ã™ğŸ™å®‰å…¨ãª auto-correct ã‹ã©ã†ã‹ãŒåˆ†ã‹ã‚Šã¾ã™ç‰¹ã«ã‚¢ãƒŠã‚¦ãƒ³ã‚¹ã—ã¦ã„ãªã‹ã£ãŸæ°—ãŒã™ã‚‹ã®ã§ã¤ã„ã§ã«ã”ç´¹ä»‹ã—ã¦ãŠãã¨ã€æœ€æ–°ã® Rubocop Challenger ã§ã¯ã€Œå®‰å…¨ãª auto-correctã€ã‹ã©ã†ã‹ãŒåˆ†ã‹ã‚‹ã‚ˆã†ã«ãªã£ã¦ã„ã¦ã€ PR ã®æœ¬æ–‡ã«ä»¥ä¸‹ã®ã‚ˆã†ãªè¨˜è¿°ãŒå…¥ã‚‹ã‚ˆã†ã«ãªã£ã¦ã„ã¾ã™ã€‚âœ… å®‰å…¨ãª auto-correctâš ï¸ å®‰å…¨ã§ãªã„ auto-correctRuboCop å…¬å¼ã«ã‚ˆã‚‹ã¨ã€Œå®‰å…¨ãª auto-correctã€ã®å ´åˆã€å…ƒã®ã‚½ãƒ¼ã‚¹ã‚³ãƒ¼ãƒ‰ãŒå£Šã‚Œã‚‹å¿ƒé…ã¯ç„¡ã„ã¨ã®ã“ã¨ãªã®ã§ã€ PR merge ã™ã‚‹éš›ã®åˆ¤æ–­ææ–™ã«ã—ã¦é ‚ã‘ã‚Œã°ã€‚","link":"https://ryz310.hateblo.jp/entry/2021/09/24/113000","isoDate":"2021-09-24T02:30:00.000Z","dateMiliSeconds":1632450600000,"imageUrl":"https://cdn-ak.f.st-hatena.com/images/fotolife/r/ryz310/20210923/20210923205915.png","authorName":"ryz310"},{"title":"MAU, DAU ã‚‚è¨ˆæ¸¬ã§ãã‚‹ã‚ˆã†ã«ãªã£ãŸ redis-objects-daily-counter v0.3.0","content":"\u003cp\u003eå‰å›ã®ãƒ–ãƒ­ã‚°ã§ \u003ca href=\"https://github.com/ryz310/redis-objects-daily-counter\"\u003eredis-objects-daily-counter\u003c/a\u003e ã¨ã„ã† gem ã‚’ä½œã£ãŸã¨ã„ã†è©±ã‚’ã—ã¾ã—ãŸã€‚\u003c/p\u003e\n\n\u003cp\u003e\u003ciframe src=\"https://hatenablog-parts.com/embed?url=https%3A%2F%2Fryz310.hateblo.jp%2Fentry%2F2021%2F09%2F20%2F172054\" title=\"Redis::Objects ã‚’ä½¿ã£ãŸã‚µãƒ¼ãƒ“ã‚¹æ”¹å–„ã¨æ–°ã—ã„ gem ã‚’ä½œã£ãŸãŠè©± - é€ƒã’ã‚‹8å›ã§ä¼šå¿ƒã®ä¸€æ’ƒ\" class=\"embed-card embed-blogcard\" scrolling=\"no\" frameborder=\"0\" style=\"display: block; width: 100%; height: 190px; max-width: 500px; margin: 10px 0px;\"\u003e\u003c/iframe\u003e\u003ccite class=\"hatena-citation\"\u003e\u003ca href=\"https://ryz310.hateblo.jp/entry/2021/09/20/172054\"\u003eryz310.hateblo.jp\u003c/a\u003e\u003c/cite\u003e\u003c/p\u003e\n\n\u003cp\u003eä»Šå›ã¯ \u003ccode\u003ev0.3.0\u003c/code\u003e ã‚’ãƒªãƒªãƒ¼ã‚¹ã—ãŸã®ã§ãã¡ã‚‰ã®ã”ç´¹ä»‹ã§ã™ã€‚\u003c/p\u003e\n\n\u003ch2\u003eã€ãŠã•ã‚‰ã„ã€‘redis-objects-daily-counter ã¯ã©ã†ã„ã† gem ãªã®ã‹\u003c/h2\u003e\n\n\u003cp\u003e\u003ca href=\"https://github.com/nateware/redis-objects\"\u003eredis-objects\u003c/a\u003e gem ã®æ‹¡å¼µã¨ã—ã¦ä½œã‚‰ã‚Œã¦ãŠã‚Šã€æ—¥ä»˜ã®å¤‰æ›´æ¯ã«æ–°ã—ã„  counter ã‚’å®šç¾©ã—ã¦ãã‚Œã‚‹ \u003ccode\u003edaily_counter\u003c/code\u003e æ©Ÿèƒ½ã‚’æä¾›ã™ã‚‹ gem ã§ã™ã€‚\u003c/p\u003e\n\n\u003cp\u003eä¾‹ãˆã°ä»¥ä¸‹ã®ã‚ˆã†ãª \u003ccode\u003eHomepage\u003c/code\u003e ã¨ã„ã† class ã§ \u003ccode\u003edaily_counter :pv\u003c/code\u003e ã¨ã„ã†å®šç¾©ã‚’ã—ã¾ã™ã€‚\u003c/p\u003e\n\n\u003cpre class=\"code lang-ruby\" data-lang=\"ruby\" data-unlink\u003e\u003cspan class=\"synPreProc\"\u003eclass\u003c/span\u003e \u003cspan class=\"synType\"\u003eHomepage\u003c/span\u003e\n  \u003cspan class=\"synPreProc\"\u003einclude\u003c/span\u003e \u003cspan class=\"synType\"\u003eRedis\u003c/span\u003e::\u003cspan class=\"synType\"\u003eObjects\u003c/span\u003e\n\n  daily_counter \u003cspan class=\"synConstant\"\u003e:pv\u003c/span\u003e, \u003cspan class=\"synConstant\"\u003eexpireat\u003c/span\u003e: -\u0026gt; { \u003cspan class=\"synType\"\u003eTime\u003c/span\u003e.now + \u003cspan class=\"synConstant\"\u003e2_678_400\u003c/span\u003e } \u003cspan class=\"synComment\"\u003e# about a month\u003c/span\u003e\n\n  \u003cspan class=\"synPreProc\"\u003edef\u003c/span\u003e \u003cspan class=\"synIdentifier\"\u003eid\u003c/span\u003e\n    \u003cspan class=\"synConstant\"\u003e1\u003c/span\u003e\n  \u003cspan class=\"synPreProc\"\u003eend\u003c/span\u003e\n\u003cspan class=\"synPreProc\"\u003eend\u003c/span\u003e\n\u003c/pre\u003e\n\n\n\u003cp\u003eã™ã‚‹ã¨ä»¥ä¸‹ã®ã‚ˆã†ã« \u003ccode\u003e#pv\u003c/code\u003e ã¨ã„ã†\u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/%A5%A4%A5%F3%A5%B9%A5%BF%A5%F3%A5%B9\"\u003eã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹\u003c/a\u003eãƒ¡ã‚½ãƒƒãƒ‰ãŒä½¿ãˆã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã™ã€‚\nã“ã‚Œã¯ \u003ccode\u003eredis-objects\u003c/code\u003e gem ã® \u003ccode\u003ecounter\u003c/code\u003e ã®æ‹¡å¼µã§ã‚ã‚Šã€ \u003ccode\u003e#increment\u003c/code\u003e ã‚„ \u003ccode\u003e#decrement\u003c/code\u003e ã¨ã„ã†ãƒ¡ã‚½ãƒƒãƒ‰ã§ Redis ä¸Šã®å€¤ã‚’æ›´æ–°ã™ã‚‹ã“ã¨ãŒå¯èƒ½ã§ã™ã€‚\u003c/p\u003e\n\n\u003cpre class=\"code lang-ruby\" data-lang=\"ruby\" data-unlink\u003e\u003cspan class=\"synComment\"\u003e# 2021-04-01\u003c/span\u003e\nhomepage = \u003cspan class=\"synType\"\u003eHomepage\u003c/span\u003e.new\nhomepage.id \u003cspan class=\"synComment\"\u003e# 1\u003c/span\u003e\n\nhomepage.pv.increment\nhomepage.pv.increment\nhomepage.pv.increment\nputs homepage.pv.value \u003cspan class=\"synComment\"\u003e# 3\u003c/span\u003e\n\u003c/pre\u003e\n\n\n\u003cp\u003e\u003ccode\u003edaily_counter\u003c/code\u003e ãŒ \u003ccode\u003ecounter\u003c/code\u003e ã¨ã©ã®ã‚ˆã†ã«é•ã†ã‹ã¨ã„ã†ã¨ã€æ—¥ä»˜ãŒå¤‰ã‚ã‚‹ã¨Redis ä¸Šã® Key ãŒå¤‰åŒ–ã™ã‚‹ã¨ã„ã†ç‚¹ã§ã™ã€‚\u003c/p\u003e\n\n\u003cpre class=\"code lang-ruby\" data-lang=\"ruby\" data-unlink\u003e\u003cspan class=\"synComment\"\u003e# 2021-04-02 (next day)\u003c/span\u003e\nputs homepage.pv.value \u003cspan class=\"synComment\"\u003e# 0\u003c/span\u003e\nhomepage.pv.increment\nhomepage.pv.increment\nputs homepage.pv.value \u003cspan class=\"synComment\"\u003e# 2\u003c/span\u003e\n\u003c/pre\u003e\n\n\n\u003cp\u003eã“ã‚Œã¯ã€ \u003ccode\u003edaily_counter\u003c/code\u003e ãŒä»¥ä¸‹ã®ã‚ˆã†ãªãƒ«ãƒ¼ãƒ«ã«å‰‡ã£ã¦ Redis ã® Key ã«ã‚¢ã‚¯ã‚»ã‚¹ã™ã‚‹ã‚ˆã†ã«æŒ¯ã‚‹èˆã†ãŸã‚ã§ã™ã€‚\u003c/p\u003e\n\n\u003cpre class=\"code\" data-lang=\"\" data-unlink\u003emodel_name:id:field_name:yyyy-mm-dd\u003c/pre\u003e\n\n\n\u003cp\u003eãªãŠã€ã“ã®æ™‚ã®\u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/%A5%BF%A5%A4%A5%E0%A5%BE%A1%BC%A5%F3\"\u003eã‚¿ã‚¤ãƒ ã‚¾ãƒ¼ãƒ³\u003c/a\u003eã¯å®Ÿè¡Œä¸­ã® \u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/Ruby\"\u003eRuby\u003c/a\u003e ãƒ—ãƒ­ã‚»ã‚¹ã®æ¨™æº–\u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/%A5%BF%A5%A4%A5%E0%A5%BE%A1%BC%A5%F3\"\u003eã‚¿ã‚¤ãƒ ã‚¾ãƒ¼ãƒ³\u003c/a\u003eã«å¾“ã„ã¾ã™ãŒã€ \u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/Rails\"\u003eRails\u003c/a\u003e ä¸Šã§å®Ÿè¡Œã—ãŸå ´åˆã¯ \u003ccode\u003eapplication.rb\u003c/code\u003e ã§æŒ‡å®šã—ãŸ\u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/%A5%BF%A5%A4%A5%E0%A5%BE%A1%BC%A5%F3\"\u003eã‚¿ã‚¤ãƒ ã‚¾ãƒ¼ãƒ³\u003c/a\u003eã«å¾“ã„ã¾ã™ã€‚\u003c/p\u003e\n\n\u003cp\u003eæ—¥ä»˜ãŒå¤‰ã‚ã£ãŸå¾Œã‚‚ã€å‰æ—¥ã¾ã§ã® Key-\u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/Value\"\u003eValue\u003c/a\u003e ã¯å‰Šé™¤ã—ã¦ã„ãªã„ã®ã§ã€ \u003ccode\u003e#range\u003c/code\u003e ã‚„ \u003ccode\u003e#[]\u003c/code\u003e ã‚„ \u003ccode\u003e#at\u003c/code\u003e ã¨ã„ã†ãƒ¡ã‚½ãƒƒãƒ‰ã§ã‚¢ã‚¯ã‚»ã‚¹ã™ã‚‹ã“ã¨ãŒå¯èƒ½ã§ã™ã€‚\nã¡ãªã¿ã« \u003ccode\u003e#range\u003c/code\u003e ã‚„ \u003ccode\u003e#[]\u003c/code\u003e ã§ã¯å€¤ãŒè¿”å´ã•ã‚Œã¾ã™ãŒã€ \u003ccode\u003e#at\u003c/code\u003e ã§ã¯ \u003ccode\u003eRedis::Counter\u003c/code\u003e \u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/%A5%A4%A5%F3%A5%B9%A5%BF%A5%F3%A5%B9\"\u003eã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹\u003c/a\u003eãŒè¿”å´ã•ã‚Œã¾ã™ã€‚\n\u003ccode\u003ev0.2.0\u003c/code\u003e ã¾ã§ã¯ \u003ccode\u003e#[]\u003c/code\u003e ã¨ \u003ccode\u003e#at\u003c/code\u003e ã¯åŒã˜æŒ™å‹•ã§ã—ãŸãŒã€ \u003ccode\u003ev0.3.0\u003c/code\u003e ã‹ã‚‰ãã†ã„ã†å®Ÿè£…ã«å¤‰ã‚ã‚Šã¾ã—ãŸ ğŸ™\u003c/p\u003e\n\n\u003cpre class=\"code lang-ruby\" data-lang=\"ruby\" data-unlink\u003e\u003cspan class=\"synComment\"\u003e# 2021-04-01\u003c/span\u003e\nhomepage.pv.increment(\u003cspan class=\"synConstant\"\u003e3\u003c/span\u003e)\n\n\u003cspan class=\"synComment\"\u003e# 2021-04-02 (next day)\u003c/span\u003e\nhomepage.pv.increment(\u003cspan class=\"synConstant\"\u003e2\u003c/span\u003e)\n\n\u003cspan class=\"synComment\"\u003e# 2021-04-03 (next day)\u003c/span\u003e\nhomepage.pv.increment(\u003cspan class=\"synConstant\"\u003e5\u003c/span\u003e)\n\nhomepage.pv[\u003cspan class=\"synType\"\u003eDate\u003c/span\u003e.new(\u003cspan class=\"synConstant\"\u003e2021\u003c/span\u003e, \u003cspan class=\"synConstant\"\u003e4\u003c/span\u003e, \u003cspan class=\"synConstant\"\u003e1\u003c/span\u003e)] \u003cspan class=\"synComment\"\u003e# =\u0026gt; 3\u003c/span\u003e\nhomepage.pv[\u003cspan class=\"synType\"\u003eDate\u003c/span\u003e.new(\u003cspan class=\"synConstant\"\u003e2021\u003c/span\u003e, \u003cspan class=\"synConstant\"\u003e4\u003c/span\u003e, \u003cspan class=\"synConstant\"\u003e1\u003c/span\u003e), \u003cspan class=\"synConstant\"\u003e3\u003c/span\u003e] \u003cspan class=\"synComment\"\u003e# =\u0026gt; [3, 2, 5]\u003c/span\u003e\nhomepage.pv[\u003cspan class=\"synType\"\u003eDate\u003c/span\u003e.new(\u003cspan class=\"synConstant\"\u003e2021\u003c/span\u003e, \u003cspan class=\"synConstant\"\u003e4\u003c/span\u003e, \u003cspan class=\"synConstant\"\u003e1\u003c/span\u003e)..\u003cspan class=\"synType\"\u003eDate\u003c/span\u003e.new(\u003cspan class=\"synConstant\"\u003e2021\u003c/span\u003e, \u003cspan class=\"synConstant\"\u003e4\u003c/span\u003e, \u003cspan class=\"synConstant\"\u003e2\u003c/span\u003e)] \u003cspan class=\"synComment\"\u003e# =\u0026gt; [3, 2]\u003c/span\u003e\n\nhomepage.pv.delete_at(\u003cspan class=\"synType\"\u003eDate\u003c/span\u003e.new(\u003cspan class=\"synConstant\"\u003e2021\u003c/span\u003e, \u003cspan class=\"synConstant\"\u003e4\u003c/span\u003e, \u003cspan class=\"synConstant\"\u003e1\u003c/span\u003e))\nhomepage.pv.range(\u003cspan class=\"synType\"\u003eDate\u003c/span\u003e.new(\u003cspan class=\"synConstant\"\u003e2021\u003c/span\u003e, \u003cspan class=\"synConstant\"\u003e4\u003c/span\u003e, \u003cspan class=\"synConstant\"\u003e1\u003c/span\u003e), \u003cspan class=\"synType\"\u003eDate\u003c/span\u003e.new(\u003cspan class=\"synConstant\"\u003e2021\u003c/span\u003e, \u003cspan class=\"synConstant\"\u003e4\u003c/span\u003e, \u003cspan class=\"synConstant\"\u003e3\u003c/span\u003e)) \u003cspan class=\"synComment\"\u003e# =\u0026gt; [0, 2, 5]\u003c/span\u003e\nhomepage.pv.at(\u003cspan class=\"synType\"\u003eDate\u003c/span\u003e.new(\u003cspan class=\"synConstant\"\u003e2021\u003c/span\u003e, \u003cspan class=\"synConstant\"\u003e4\u003c/span\u003e, \u003cspan class=\"synConstant\"\u003e2\u003c/span\u003e)) \u003cspan class=\"synComment\"\u003e# =\u0026gt; #\u0026lt;Redis::Counter key=\u0026quot;homepage:1:pv:2021-04-02\u0026quot;\u0026gt;\u003c/span\u003e\nhomepage.pv.at(\u003cspan class=\"synType\"\u003eDate\u003c/span\u003e.new(\u003cspan class=\"synConstant\"\u003e2021\u003c/span\u003e, \u003cspan class=\"synConstant\"\u003e4\u003c/span\u003e, \u003cspan class=\"synConstant\"\u003e2\u003c/span\u003e)).value \u003cspan class=\"synComment\"\u003e# 2\u003c/span\u003e\n\u003c/pre\u003e\n\n\n\u003ch2\u003ev0.3.0 ã§è¿½åŠ ã•ã‚ŒãŸæ©Ÿèƒ½ã¨ã¯\u003c/h2\u003e\n\n\u003cp\u003e\u003ccode\u003edaily_counter\u003c/code\u003e ã«åŠ ãˆã¦ \u003ccode\u003edaily_set\u003c/code\u003e ãŒè¿½åŠ ã•ã‚Œã¾ã—ãŸã€‚\nã“ã¡ã‚‰ã¯ \u003ccode\u003eredis-objects\u003c/code\u003e gem ã® \u003ccode\u003eset\u003c/code\u003eã« \u003ccode\u003edaily-\u003c/code\u003e æ©Ÿèƒ½ã‚’è¿½åŠ ã—ãŸã‚‚ã®ã«ãªã‚Šã¾ã™ã€‚\u003c/p\u003e\n\n\u003cpre class=\"code lang-ruby\" data-lang=\"ruby\" data-unlink\u003e\u003cspan class=\"synPreProc\"\u003eclass\u003c/span\u003e \u003cspan class=\"synType\"\u003eHomepage\u003c/span\u003e\n  \u003cspan class=\"synPreProc\"\u003einclude\u003c/span\u003e \u003cspan class=\"synType\"\u003eRedis\u003c/span\u003e::\u003cspan class=\"synType\"\u003eObjects\u003c/span\u003e\n\n  daily_set \u003cspan class=\"synConstant\"\u003e:dau\u003c/span\u003e, \u003cspan class=\"synConstant\"\u003eexpireat\u003c/span\u003e: -\u0026gt; { \u003cspan class=\"synType\"\u003eTime\u003c/span\u003e.now + \u003cspan class=\"synConstant\"\u003e2_678_400\u003c/span\u003e } \u003cspan class=\"synComment\"\u003e# about a month\u003c/span\u003e\n\n  \u003cspan class=\"synPreProc\"\u003edef\u003c/span\u003e \u003cspan class=\"synIdentifier\"\u003eid\u003c/span\u003e\n    \u003cspan class=\"synConstant\"\u003e1\u003c/span\u003e\n  \u003cspan class=\"synPreProc\"\u003eend\u003c/span\u003e\n\u003cspan class=\"synPreProc\"\u003eend\u003c/span\u003e\n\nhomepage.dau \u0026lt;\u0026lt; \u003cspan class=\"synSpecial\"\u003e'\u003c/span\u003e\u003cspan class=\"synConstant\"\u003euser1\u003c/span\u003e\u003cspan class=\"synSpecial\"\u003e'\u003c/span\u003e\nhomepage.dau \u0026lt;\u0026lt; \u003cspan class=\"synSpecial\"\u003e'\u003c/span\u003e\u003cspan class=\"synConstant\"\u003euser2\u003c/span\u003e\u003cspan class=\"synSpecial\"\u003e'\u003c/span\u003e\nhomepage.dau \u0026lt;\u0026lt; \u003cspan class=\"synSpecial\"\u003e'\u003c/span\u003e\u003cspan class=\"synConstant\"\u003euser1\u003c/span\u003e\u003cspan class=\"synSpecial\"\u003e'\u003c/span\u003e \u003cspan class=\"synComment\"\u003e# dup ignored\u003c/span\u003e\nputs homepage.dau.members \u003cspan class=\"synComment\"\u003e# ['user1', 'user2']\u003c/span\u003e\nputs homepage.dau.length \u003cspan class=\"synComment\"\u003e# 2\u003c/span\u003e\nputs homepage.dau.count \u003cspan class=\"synComment\"\u003e# alias of #length\u003c/span\u003e\n\u003c/pre\u003e\n\n\n\u003cp\u003e\u003ccode\u003eset\u003c/code\u003e ã¯é‡è¤‡ã‚’å—ã‘ä»˜ã‘ãªã„ \u003ccode\u003eArray\u003c/code\u003e ã¨è€ƒãˆã¦è‰¯ã„ã¨æ€ã„ã¾ã™ã€‚\nä¸Šè¨˜ã®ä¾‹ã‚’è¦‹ã¦ã‚‚ã‚‰ã†ã¨åˆ†ã‹ã‚Šã¾ã™ãŒ \u003ccode\u003euser1\u003c/code\u003e ã‚’ 2 å›è¿½åŠ ã—ã¦ã‚‚ \u003ccode\u003e#members\u003c/code\u003e ã«ã‚ˆã‚‹å–å¾—çµæœã«ã¯ 1 ã¤ã—ã‹å«ã¾ã‚Œã¦ã„ã¾ã›ã‚“ã€‚\u003c/p\u003e\n\n\u003cp\u003eã“ã‚Œã‚’ä½¿ã£ã¦ä½•ãŒå®Ÿç¾ã§ãã‚‹ã‹ã¨ã„ã†ã¨ã€ DAU (Daily Active User) ã®è¨ˆæ¸¬ã§ã™ã€‚\nãƒ­ã‚°ã‚¤ãƒ³ã—ãŸãƒ¦ãƒ¼ã‚¶ãƒ¼ã® ID ã‚’ \u003ccode\u003edaily_set\u003c/code\u003e ã§å®šç¾©ã—ãŸå¤‰æ•°ã«è¿½åŠ ã—ã¦ã„ãã“ã¨ã§ã€ãã®æ—¥ã‚¢ã‚¯ãƒ†ã‚£ãƒ–ã ã£ãŸãƒ¦ãƒ¼ã‚¶ãƒ¼ä¸€è¦§ã¨ãã®æ•°ã‚’çŸ¥ã‚‹ã“ã¨ãŒå‡ºæ¥ã¾ã™ã€‚\u003c/p\u003e\n\n\u003cpre class=\"code lang-ruby\" data-lang=\"ruby\" data-unlink\u003e\u003cspan class=\"synComment\"\u003e# 2021-04-01\u003c/span\u003e\nhomepage.dau.merge(\u003cspan class=\"synSpecial\"\u003e'\u003c/span\u003e\u003cspan class=\"synConstant\"\u003euser1\u003c/span\u003e\u003cspan class=\"synSpecial\"\u003e'\u003c/span\u003e, \u003cspan class=\"synSpecial\"\u003e'\u003c/span\u003e\u003cspan class=\"synConstant\"\u003euser2\u003c/span\u003e\u003cspan class=\"synSpecial\"\u003e'\u003c/span\u003e)\nputs homepage.dau.members \u003cspan class=\"synComment\"\u003e# ['user1', 'user2']\u003c/span\u003e\n\n\u003cspan class=\"synComment\"\u003e# 2021-04-02 (next day)\u003c/span\u003e\nputs homepage.dau.members \u003cspan class=\"synComment\"\u003e# []\u003c/span\u003e\n\nhomepage.dau.merge(\u003cspan class=\"synSpecial\"\u003e'\u003c/span\u003e\u003cspan class=\"synConstant\"\u003euser2\u003c/span\u003e\u003cspan class=\"synSpecial\"\u003e'\u003c/span\u003e, \u003cspan class=\"synSpecial\"\u003e'\u003c/span\u003e\u003cspan class=\"synConstant\"\u003euser3\u003c/span\u003e\u003cspan class=\"synSpecial\"\u003e'\u003c/span\u003e)\nputs homepage.dau.members \u003cspan class=\"synComment\"\u003e# ['user2', 'user3']\u003c/span\u003e\n\n\u003cspan class=\"synComment\"\u003e# 2021-04-03 (next day)\u003c/span\u003e\nhomepage.dau.merge(\u003cspan class=\"synSpecial\"\u003e'\u003c/span\u003e\u003cspan class=\"synConstant\"\u003euser4\u003c/span\u003e\u003cspan class=\"synSpecial\"\u003e'\u003c/span\u003e)\n\nhomepage.dau.at(\u003cspan class=\"synType\"\u003eDate\u003c/span\u003e.new(\u003cspan class=\"synConstant\"\u003e2021\u003c/span\u003e, \u003cspan class=\"synConstant\"\u003e4\u003c/span\u003e, \u003cspan class=\"synConstant\"\u003e2\u003c/span\u003e)) \u003cspan class=\"synComment\"\u003e# =\u0026gt; #\u0026lt;Redis::Set key=\u0026quot;homepage:1:dau:2021-04-02\u0026quot;\u0026gt;\u003c/span\u003e\nhomepage.dau.at(\u003cspan class=\"synType\"\u003eDate\u003c/span\u003e.new(\u003cspan class=\"synConstant\"\u003e2021\u003c/span\u003e, \u003cspan class=\"synConstant\"\u003e4\u003c/span\u003e, \u003cspan class=\"synConstant\"\u003e2\u003c/span\u003e)).members \u003cspan class=\"synComment\"\u003e# =\u0026gt; ['user2', 'user3']\u003c/span\u003e\nhomepage.dau.at(\u003cspan class=\"synType\"\u003eDate\u003c/span\u003e.new(\u003cspan class=\"synConstant\"\u003e2021\u003c/span\u003e, \u003cspan class=\"synConstant\"\u003e4\u003c/span\u003e, \u003cspan class=\"synConstant\"\u003e2\u003c/span\u003e)).length \u003cspan class=\"synComment\"\u003e# =\u0026gt; 2\u003c/span\u003e\n\u003c/pre\u003e\n\n\n\u003cp\u003e\u003ccode\u003e#range\u003c/code\u003e ã‚„ \u003ccode\u003e#[]\u003c/code\u003e ã‚’ä½¿ã†äº‹ã§æŒ‡å®šã—ãŸæœŸé–“å†…ã®å€¤ã‚’çµåˆã™ã‚‹ã“ã¨ã‚‚å‡ºæ¥ã¾ã™ã€‚\nã“ã‚Œã«ã‚ˆã£ã¦ DAU ç›®çš„ã§è¨˜éŒ²ã—ãŸå€¤ã‹ã‚‰ MAU ã‚’æ±‚ã‚ã‚‹ã“ã¨ã‚‚å¯èƒ½ã§ã™ã€‚\u003c/p\u003e\n\n\u003cpre class=\"code lang-ruby\" data-lang=\"ruby\" data-unlink\u003ehomepage.dau[\u003cspan class=\"synType\"\u003eDate\u003c/span\u003e.new(\u003cspan class=\"synConstant\"\u003e2021\u003c/span\u003e, \u003cspan class=\"synConstant\"\u003e4\u003c/span\u003e, \u003cspan class=\"synConstant\"\u003e1\u003c/span\u003e)] \u003cspan class=\"synComment\"\u003e# =\u0026gt; ['user1', 'user2']\u003c/span\u003e\nhomepage.dau[\u003cspan class=\"synType\"\u003eDate\u003c/span\u003e.new(\u003cspan class=\"synConstant\"\u003e2021\u003c/span\u003e, \u003cspan class=\"synConstant\"\u003e4\u003c/span\u003e, \u003cspan class=\"synConstant\"\u003e1\u003c/span\u003e), \u003cspan class=\"synConstant\"\u003e3\u003c/span\u003e] \u003cspan class=\"synComment\"\u003e# =\u0026gt; ['user1', 'user2', 'user3', 'user4']\u003c/span\u003e\nhomepage.dau[\u003cspan class=\"synType\"\u003eDate\u003c/span\u003e.new(\u003cspan class=\"synConstant\"\u003e2021\u003c/span\u003e, \u003cspan class=\"synConstant\"\u003e4\u003c/span\u003e, \u003cspan class=\"synConstant\"\u003e1\u003c/span\u003e)..\u003cspan class=\"synType\"\u003eDate\u003c/span\u003e.new(\u003cspan class=\"synConstant\"\u003e2021\u003c/span\u003e, \u003cspan class=\"synConstant\"\u003e4\u003c/span\u003e, \u003cspan class=\"synConstant\"\u003e2\u003c/span\u003e)] \u003cspan class=\"synComment\"\u003e# =\u0026gt; ['user1', 'user2', 'user3']\u003c/span\u003e\n\nhomepage.dau.delete_at(\u003cspan class=\"synType\"\u003eDate\u003c/span\u003e.new(\u003cspan class=\"synConstant\"\u003e2021\u003c/span\u003e, \u003cspan class=\"synConstant\"\u003e4\u003c/span\u003e, \u003cspan class=\"synConstant\"\u003e1\u003c/span\u003e))\nhomepage.dau.range(\u003cspan class=\"synType\"\u003eDate\u003c/span\u003e.new(\u003cspan class=\"synConstant\"\u003e2021\u003c/span\u003e, \u003cspan class=\"synConstant\"\u003e4\u003c/span\u003e, \u003cspan class=\"synConstant\"\u003e1\u003c/span\u003e), \u003cspan class=\"synType\"\u003eDate\u003c/span\u003e.new(\u003cspan class=\"synConstant\"\u003e2021\u003c/span\u003e, \u003cspan class=\"synConstant\"\u003e4\u003c/span\u003e, \u003cspan class=\"synConstant\"\u003e3\u003c/span\u003e)) \u003cspan class=\"synComment\"\u003e# =\u0026gt; ['user2', 'user3', 'user4']\u003c/span\u003e\n\u003c/pre\u003e\n\n\n\u003cp\u003e\u003ccode\u003e#at\u003c/code\u003e ã§ä¸€æ—¥ãšã¤å€¤ã‚’å–å¾—ã—ã¦ \u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/Ruby\"\u003eRuby\u003c/a\u003e ã® \u003ccode\u003eArray#uniq\u003c/code\u003e ã‚’ä½¿ã£ã¦ã‚‚åŒã˜çµæœãŒå¾—ã‚‰ã‚Œã¾ã™ãŒã€ \u003ccode\u003e#range\u003c/code\u003e ã‚„ \u003ccode\u003e#[]\u003c/code\u003e ã®æ–¹ãŒå†…éƒ¨ã§ \u003ca href=\"https://redis.io/commands/sunion\"\u003eRedis ã® \u003ccode\u003eSUNION\u003c/code\u003e\u003c/a\u003e ã‚’åˆ©ç”¨ã™ã‚‹ãŸã‚é«˜é€Ÿã ã¨æ€ã„ã¾ã™ã€‚\u003c/p\u003e\n\n\u003cp\u003eã¡ãªã¿ã« \u003ccode\u003e#range\u003c/code\u003e ã‚„ \u003ccode\u003e#[]\u003c/code\u003e ã®çµæœã¯ \u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/Ruby\"\u003eRuby\u003c/a\u003e ã® Array ãªã®ã§ã€ \u003ccode\u003e#length\u003c/code\u003e ã‚’ä½¿ã£ã¦é•·ã•ã‚’æ±‚ã‚ã‚‹éš›ã¯å®Ÿè¡Œä¸­ã®ãƒã‚·ãƒ³ãƒªã‚½ãƒ¼ã‚¹ã‚’æ¶ˆè²»ã—ã¾ã™ã€‚\nä¸€æ–¹ \u003ccode\u003e#at\u003c/code\u003e ã§ã¯ \u003ccode\u003eRedis::Set\u003c/code\u003e ã‚’è¿”ã—ã¦ãŠã‚Šã€ \u003ccode\u003eRedis::Set#length\u003c/code\u003e ã¯å†…éƒ¨ã§ \u003ca href=\"https://redis.io/commands/scard\"\u003eRedis ã® \u003ccode\u003eSCARD\u003c/code\u003e\u003c/a\u003e ã‚’å®Ÿè¡Œã™ã‚‹ãŸã‚ã€ \u003ccode\u003e#length\u003c/code\u003e ã¯ \u003ccode\u003e#at\u003c/code\u003e ã‹ã‚‰ã®æ–¹ãŒé«˜é€Ÿã ã¨æ€ã„ã¾ã™ã€‚\nãŸã ã—ä¸€å®šæœŸé–“ã®å€¤ã®çµåˆã¯ \u003ccode\u003e#range\u003c/code\u003e ã‚„ \u003ccode\u003e#[]\u003c/code\u003e ã‚’ä½¿ã†å¿…è¦ãŒã‚ã‚‹ã®ã§ã€çµå±€ãƒã‚·ãƒ³ãƒªã‚½ãƒ¼ã‚¹ã®æ¶ˆè²»ã¯é¿ã‘ã‚‰ã‚Œãªã„ã§ã™ã­ã€‚ã€‚\u003c/p\u003e\n\n\u003cp\u003eã“ã®è¾ºã‚Šã®ä»•æ§˜ã¯å®Ÿè£…ã—ã¦ã„ã¦ã‹ãªã‚Šé ­ã‚’æ‚©ã¾ã›ã¾ã—ãŸã€‚ãªã®ã§ä»Šå¾Œã®ã‚¢ãƒƒãƒ—ãƒ‡ãƒ¼ãƒˆã§ç ´å£Šçš„ãªå¤‰æ›´ãŒå…¥ã‚‹ã‹ã‚‚çŸ¥ã‚Œã¾ã›ã‚“ã€‚\u003c/p\u003e\n\n\u003ch2\u003e\u003ccode\u003emonthly_set\u003c/code\u003e ãªã©ã‚‚å®Ÿè£…ã—ã¦ã‚ã‚Šã¾ã™\u003c/h2\u003e\n\n\u003cp\u003eå‰å›ã®è¨˜äº‹ã§ã‚‚ç´¹ä»‹ã—ãŸã‚ˆã†ãª \u003ccode\u003emonthly_counter\u003c/code\u003e ã«ç›¸å½“ã™ã‚‹ \u003ccode\u003emonthly_set\u003c/code\u003e ãªã©ã‚‚ä½¿ãˆã¾ã™ã€‚\nMAU, WAU, DAU ã§ä½¿ã„åˆ†ã‘ã‚‹ã¨è‰¯ã„ã‹ã¨æ€ã„ã¾ã™ã€‚\u003c/p\u003e\n\n\u003cul\u003e\n\u003cli\u003e\u003ccode\u003eannual_set\u003c/code\u003e\n\n\u003cul\u003e\n\u003cli\u003eKey format: \u003ccode\u003emodel_name:id:field_name:yyyy\u003c/code\u003e\u003c/li\u003e\n\u003cli\u003eRedis is a highly volatile key-\u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/value\"\u003evalue\u003c/a\u003e store, so I don't recommend using it.\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003emonthly_set\u003c/code\u003e\n\n\u003cul\u003e\n\u003cli\u003eKey format: \u003ccode\u003emodel_name:id:field_name:yyyy-mm\u003c/code\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003eweekly_set\u003c/code\u003e\n\n\u003cul\u003e\n\u003cli\u003eKey format: \u003ccode\u003emodel_name:id:field_name:yyyyWw\u003c/code\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003edaily_set\u003c/code\u003e\n\n\u003cul\u003e\n\u003cli\u003eKey format: \u003ccode\u003emodel_name:id:field_name:yyyy-mm-dd\u003c/code\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003ehourly_set\u003c/code\u003e\n\n\u003cul\u003e\n\u003cli\u003eKey format: \u003ccode\u003emodel_name:id:field_name:yyyy-mm-ddThh\u003c/code\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003eminutely_set\u003c/code\u003e\n\n\u003cul\u003e\n\u003cli\u003eKey format: \u003ccode\u003emodel_name:id:field_name:yyyy-mm-ddThh:mi\u003c/code\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\n","contentSnippet":"å‰å›ã®ãƒ–ãƒ­ã‚°ã§ redis-objects-daily-counter ã¨ã„ã† gem ã‚’ä½œã£ãŸã¨ã„ã†è©±ã‚’ã—ã¾ã—ãŸã€‚ryz310.hateblo.jpä»Šå›ã¯ v0.3.0 ã‚’ãƒªãƒªãƒ¼ã‚¹ã—ãŸã®ã§ãã¡ã‚‰ã®ã”ç´¹ä»‹ã§ã™ã€‚ã€ãŠã•ã‚‰ã„ã€‘redis-objects-daily-counter ã¯ã©ã†ã„ã† gem ãªã®ã‹redis-objects gem ã®æ‹¡å¼µã¨ã—ã¦ä½œã‚‰ã‚Œã¦ãŠã‚Šã€æ—¥ä»˜ã®å¤‰æ›´æ¯ã«æ–°ã—ã„  counter ã‚’å®šç¾©ã—ã¦ãã‚Œã‚‹ daily_counter æ©Ÿèƒ½ã‚’æä¾›ã™ã‚‹ gem ã§ã™ã€‚ä¾‹ãˆã°ä»¥ä¸‹ã®ã‚ˆã†ãª Homepage ã¨ã„ã† class ã§ daily_counter :pv ã¨ã„ã†å®šç¾©ã‚’ã—ã¾ã™ã€‚class Homepage  include Redis::Objects  daily_counter :pv, expireat: -\u003e { Time.now + 2_678_400 } # about a month  def id    1  endendã™ã‚‹ã¨ä»¥ä¸‹ã®ã‚ˆã†ã« #pv ã¨ã„ã†ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ãƒ¡ã‚½ãƒƒãƒ‰ãŒä½¿ãˆã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã™ã€‚ã“ã‚Œã¯ redis-objects gem ã® counter ã®æ‹¡å¼µã§ã‚ã‚Šã€ #increment ã‚„ #decrement ã¨ã„ã†ãƒ¡ã‚½ãƒƒãƒ‰ã§ Redis ä¸Šã®å€¤ã‚’æ›´æ–°ã™ã‚‹ã“ã¨ãŒå¯èƒ½ã§ã™ã€‚# 2021-04-01homepage = Homepage.newhomepage.id # 1homepage.pv.incrementhomepage.pv.incrementhomepage.pv.incrementputs homepage.pv.value # 3daily_counter ãŒ counter ã¨ã©ã®ã‚ˆã†ã«é•ã†ã‹ã¨ã„ã†ã¨ã€æ—¥ä»˜ãŒå¤‰ã‚ã‚‹ã¨Redis ä¸Šã® Key ãŒå¤‰åŒ–ã™ã‚‹ã¨ã„ã†ç‚¹ã§ã™ã€‚# 2021-04-02 (next day)puts homepage.pv.value # 0homepage.pv.incrementhomepage.pv.incrementputs homepage.pv.value # 2ã“ã‚Œã¯ã€ daily_counter ãŒä»¥ä¸‹ã®ã‚ˆã†ãªãƒ«ãƒ¼ãƒ«ã«å‰‡ã£ã¦ Redis ã® Key ã«ã‚¢ã‚¯ã‚»ã‚¹ã™ã‚‹ã‚ˆã†ã«æŒ¯ã‚‹èˆã†ãŸã‚ã§ã™ã€‚model_name:id:field_name:yyyy-mm-ddãªãŠã€ã“ã®æ™‚ã®ã‚¿ã‚¤ãƒ ã‚¾ãƒ¼ãƒ³ã¯å®Ÿè¡Œä¸­ã® Ruby ãƒ—ãƒ­ã‚»ã‚¹ã®æ¨™æº–ã‚¿ã‚¤ãƒ ã‚¾ãƒ¼ãƒ³ã«å¾“ã„ã¾ã™ãŒã€ Rails ä¸Šã§å®Ÿè¡Œã—ãŸå ´åˆã¯ application.rb ã§æŒ‡å®šã—ãŸã‚¿ã‚¤ãƒ ã‚¾ãƒ¼ãƒ³ã«å¾“ã„ã¾ã™ã€‚æ—¥ä»˜ãŒå¤‰ã‚ã£ãŸå¾Œã‚‚ã€å‰æ—¥ã¾ã§ã® Key-Value ã¯å‰Šé™¤ã—ã¦ã„ãªã„ã®ã§ã€ #range ã‚„ #[] ã‚„ #at ã¨ã„ã†ãƒ¡ã‚½ãƒƒãƒ‰ã§ã‚¢ã‚¯ã‚»ã‚¹ã™ã‚‹ã“ã¨ãŒå¯èƒ½ã§ã™ã€‚ã¡ãªã¿ã« #range ã‚„ #[] ã§ã¯å€¤ãŒè¿”å´ã•ã‚Œã¾ã™ãŒã€ #at ã§ã¯ Redis::Counter ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ãŒè¿”å´ã•ã‚Œã¾ã™ã€‚v0.2.0 ã¾ã§ã¯ #[] ã¨ #at ã¯åŒã˜æŒ™å‹•ã§ã—ãŸãŒã€ v0.3.0 ã‹ã‚‰ãã†ã„ã†å®Ÿè£…ã«å¤‰ã‚ã‚Šã¾ã—ãŸ ğŸ™# 2021-04-01homepage.pv.increment(3)# 2021-04-02 (next day)homepage.pv.increment(2)# 2021-04-03 (next day)homepage.pv.increment(5)homepage.pv[Date.new(2021, 4, 1)] # =\u003e 3homepage.pv[Date.new(2021, 4, 1), 3] # =\u003e [3, 2, 5]homepage.pv[Date.new(2021, 4, 1)..Date.new(2021, 4, 2)] # =\u003e [3, 2]homepage.pv.delete_at(Date.new(2021, 4, 1))homepage.pv.range(Date.new(2021, 4, 1), Date.new(2021, 4, 3)) # =\u003e [0, 2, 5]homepage.pv.at(Date.new(2021, 4, 2)) # =\u003e #\u003cRedis::Counter key=\"homepage:1:pv:2021-04-02\"\u003ehomepage.pv.at(Date.new(2021, 4, 2)).value # 2v0.3.0 ã§è¿½åŠ ã•ã‚ŒãŸæ©Ÿèƒ½ã¨ã¯daily_counter ã«åŠ ãˆã¦ daily_set ãŒè¿½åŠ ã•ã‚Œã¾ã—ãŸã€‚ã“ã¡ã‚‰ã¯ redis-objects gem ã® setã« daily- æ©Ÿèƒ½ã‚’è¿½åŠ ã—ãŸã‚‚ã®ã«ãªã‚Šã¾ã™ã€‚class Homepage  include Redis::Objects  daily_set :dau, expireat: -\u003e { Time.now + 2_678_400 } # about a month  def id    1  endendhomepage.dau \u003c\u003c 'user1'homepage.dau \u003c\u003c 'user2'homepage.dau \u003c\u003c 'user1' # dup ignoredputs homepage.dau.members # ['user1', 'user2']puts homepage.dau.length # 2puts homepage.dau.count # alias of #lengthset ã¯é‡è¤‡ã‚’å—ã‘ä»˜ã‘ãªã„ Array ã¨è€ƒãˆã¦è‰¯ã„ã¨æ€ã„ã¾ã™ã€‚ä¸Šè¨˜ã®ä¾‹ã‚’è¦‹ã¦ã‚‚ã‚‰ã†ã¨åˆ†ã‹ã‚Šã¾ã™ãŒ user1 ã‚’ 2 å›è¿½åŠ ã—ã¦ã‚‚ #members ã«ã‚ˆã‚‹å–å¾—çµæœã«ã¯ 1 ã¤ã—ã‹å«ã¾ã‚Œã¦ã„ã¾ã›ã‚“ã€‚ã“ã‚Œã‚’ä½¿ã£ã¦ä½•ãŒå®Ÿç¾ã§ãã‚‹ã‹ã¨ã„ã†ã¨ã€ DAU (Daily Active User) ã®è¨ˆæ¸¬ã§ã™ã€‚ãƒ­ã‚°ã‚¤ãƒ³ã—ãŸãƒ¦ãƒ¼ã‚¶ãƒ¼ã® ID ã‚’ daily_set ã§å®šç¾©ã—ãŸå¤‰æ•°ã«è¿½åŠ ã—ã¦ã„ãã“ã¨ã§ã€ãã®æ—¥ã‚¢ã‚¯ãƒ†ã‚£ãƒ–ã ã£ãŸãƒ¦ãƒ¼ã‚¶ãƒ¼ä¸€è¦§ã¨ãã®æ•°ã‚’çŸ¥ã‚‹ã“ã¨ãŒå‡ºæ¥ã¾ã™ã€‚# 2021-04-01homepage.dau.merge('user1', 'user2')puts homepage.dau.members # ['user1', 'user2']# 2021-04-02 (next day)puts homepage.dau.members # []homepage.dau.merge('user2', 'user3')puts homepage.dau.members # ['user2', 'user3']# 2021-04-03 (next day)homepage.dau.merge('user4')homepage.dau.at(Date.new(2021, 4, 2)) # =\u003e #\u003cRedis::Set key=\"homepage:1:dau:2021-04-02\"\u003ehomepage.dau.at(Date.new(2021, 4, 2)).members # =\u003e ['user2', 'user3']homepage.dau.at(Date.new(2021, 4, 2)).length # =\u003e 2#range ã‚„ #[] ã‚’ä½¿ã†äº‹ã§æŒ‡å®šã—ãŸæœŸé–“å†…ã®å€¤ã‚’çµåˆã™ã‚‹ã“ã¨ã‚‚å‡ºæ¥ã¾ã™ã€‚ã“ã‚Œã«ã‚ˆã£ã¦ DAU ç›®çš„ã§è¨˜éŒ²ã—ãŸå€¤ã‹ã‚‰ MAU ã‚’æ±‚ã‚ã‚‹ã“ã¨ã‚‚å¯èƒ½ã§ã™ã€‚homepage.dau[Date.new(2021, 4, 1)] # =\u003e ['user1', 'user2']homepage.dau[Date.new(2021, 4, 1), 3] # =\u003e ['user1', 'user2', 'user3', 'user4']homepage.dau[Date.new(2021, 4, 1)..Date.new(2021, 4, 2)] # =\u003e ['user1', 'user2', 'user3']homepage.dau.delete_at(Date.new(2021, 4, 1))homepage.dau.range(Date.new(2021, 4, 1), Date.new(2021, 4, 3)) # =\u003e ['user2', 'user3', 'user4']#at ã§ä¸€æ—¥ãšã¤å€¤ã‚’å–å¾—ã—ã¦ Ruby ã® Array#uniq ã‚’ä½¿ã£ã¦ã‚‚åŒã˜çµæœãŒå¾—ã‚‰ã‚Œã¾ã™ãŒã€ #range ã‚„ #[] ã®æ–¹ãŒå†…éƒ¨ã§ Redis ã® SUNION ã‚’åˆ©ç”¨ã™ã‚‹ãŸã‚é«˜é€Ÿã ã¨æ€ã„ã¾ã™ã€‚ã¡ãªã¿ã« #range ã‚„ #[] ã®çµæœã¯ Ruby ã® Array ãªã®ã§ã€ #length ã‚’ä½¿ã£ã¦é•·ã•ã‚’æ±‚ã‚ã‚‹éš›ã¯å®Ÿè¡Œä¸­ã®ãƒã‚·ãƒ³ãƒªã‚½ãƒ¼ã‚¹ã‚’æ¶ˆè²»ã—ã¾ã™ã€‚ä¸€æ–¹ #at ã§ã¯ Redis::Set ã‚’è¿”ã—ã¦ãŠã‚Šã€ Redis::Set#length ã¯å†…éƒ¨ã§ Redis ã® SCARD ã‚’å®Ÿè¡Œã™ã‚‹ãŸã‚ã€ #length ã¯ #at ã‹ã‚‰ã®æ–¹ãŒé«˜é€Ÿã ã¨æ€ã„ã¾ã™ã€‚ãŸã ã—ä¸€å®šæœŸé–“ã®å€¤ã®çµåˆã¯ #range ã‚„ #[] ã‚’ä½¿ã†å¿…è¦ãŒã‚ã‚‹ã®ã§ã€çµå±€ãƒã‚·ãƒ³ãƒªã‚½ãƒ¼ã‚¹ã®æ¶ˆè²»ã¯é¿ã‘ã‚‰ã‚Œãªã„ã§ã™ã­ã€‚ã€‚ã“ã®è¾ºã‚Šã®ä»•æ§˜ã¯å®Ÿè£…ã—ã¦ã„ã¦ã‹ãªã‚Šé ­ã‚’æ‚©ã¾ã›ã¾ã—ãŸã€‚ãªã®ã§ä»Šå¾Œã®ã‚¢ãƒƒãƒ—ãƒ‡ãƒ¼ãƒˆã§ç ´å£Šçš„ãªå¤‰æ›´ãŒå…¥ã‚‹ã‹ã‚‚çŸ¥ã‚Œã¾ã›ã‚“ã€‚monthly_set ãªã©ã‚‚å®Ÿè£…ã—ã¦ã‚ã‚Šã¾ã™å‰å›ã®è¨˜äº‹ã§ã‚‚ç´¹ä»‹ã—ãŸã‚ˆã†ãª monthly_counter ã«ç›¸å½“ã™ã‚‹ monthly_set ãªã©ã‚‚ä½¿ãˆã¾ã™ã€‚MAU, WAU, DAU ã§ä½¿ã„åˆ†ã‘ã‚‹ã¨è‰¯ã„ã‹ã¨æ€ã„ã¾ã™ã€‚annual_setKey format: model_name:id:field_name:yyyyRedis is a highly volatile key-value store, so I don't recommend using it.monthly_setKey format: model_name:id:field_name:yyyy-mmweekly_setKey format: model_name:id:field_name:yyyyWwdaily_setKey format: model_name:id:field_name:yyyy-mm-ddhourly_setKey format: model_name:id:field_name:yyyy-mm-ddThhminutely_setKey format: model_name:id:field_name:yyyy-mm-ddThh:mi","link":"https://ryz310.hateblo.jp/entry/2021/09/23/203804","isoDate":"2021-09-23T11:38:04.000Z","dateMiliSeconds":1632397084000,"imageUrl":"https://cdn.blog.st-hatena.com/images/theme/og-image-1500.png","authorName":"ryz310"},{"title":"Redis::Objects ã‚’ä½¿ã£ãŸã‚µãƒ¼ãƒ“ã‚¹æ”¹å–„ã¨æ–°ã—ã„ gem ã‚’ä½œã£ãŸãŠè©±","content":"\u003cp\u003eåŠå¹´ã¶ã‚Šãã‚‰ã„ã«ä¼šç¤¾ã®å‹‰å¼·ä¼šã§ç™ºè¡¨ã—ã¾ã—ãŸã€‚\u003c/p\u003e\n\n\u003ciframe class=\"speakerdeck-iframe\" frameborder=\"0\" src=\"https://speakerdeck.com/player/58bb74a90a8b444e8607850fc76d8eb7\" title=\"Redis::Objects ã§éŠã‚“ã§ã¿ã‚ˆã†\" allowfullscreen=\"true\" mozallowfullscreen=\"true\" webkitallowfullscreen=\"true\" style=\"border: 0px; background: padding-box padding-box rgba(0, 0, 0, 0.1); margin: 0px; padding: 0px; border-radius: 6px; box-shadow: rgba(0, 0, 0, 0.2) 0px 5px 40px; width: 560px; height: 314px;\"\u003e\u003c/iframe\u003e\n\n\n\u003cp\u003eRedis::Objects ã¨ã„ã† gem ã‚’ä½¿ã£ã¦ RDS ã«ã‹ã‹ã£ã¦ã„ãŸ IO è² è·ã‚’æ”¹å–„ã—ãŸã€ã¨ã„ã†è©±ã¨ã€ Redis::Objects ã‚’æ‹¡å¼µã™ã‚‹ gem ã‚’ä½œã£ãŸã¨ã„ã†è©±ï¼ˆå¾Œè¿°ï¼‰ã§ã™ã€‚\u003c/p\u003e\n\n\u003cp\u003e\u003ciframe src=\"https://hatenablog-parts.com/embed?url=https%3A%2F%2Fgithub.com%2Fryz310%2Fredis-objects-daily-counter\" title=\"GitHub - ryz310/redis-objects-daily-counter: Daily counter within Redis::Objects. Works with any class or ORM.\" class=\"embed-card embed-webcard\" scrolling=\"no\" frameborder=\"0\" style=\"display: block; width: 100%; height: 155px; max-width: 500px; margin: 10px 0px;\"\u003e\u003c/iframe\u003e\u003ccite class=\"hatena-citation\"\u003e\u003ca href=\"https://github.com/ryz310/redis-objects-daily-counter\"\u003egithub.com\u003c/a\u003e\u003c/cite\u003e\u003c/p\u003e\n\n\u003cp\u003eRedis ã‚’ä½¿ã£ã¦ DB ã®è² è·ã‚’ä¸‹ã’ã‚‹ç³»ã®ãŠè©±ã£ã¦ 2010 å¹´ä»£ã«ã•ã‚Œå°½ãã—ãŸæ„ŸãŒã‚ã£ã¦ã€ä»Šæ›´ãªæ°—ã‚‚ã™ã‚‹ã‚“ã§ã™ãŒã€ä¸€å‘¨å›ã£ã¦æœ€è¿‘èã‹ãªã„è©±ã ãªãƒ¼ã¨æ€ã£ã¦ã¾ã™ã€‚\nãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢ã§æœ€è¿‘ã‚µãƒ¼ãƒãƒ¼ã‚µã‚¤ãƒ‰ã‚‚è§¦ã‚‹æ©Ÿä¼šãŒå¢—ãˆãŸã‚ˆã†ãªæ–¹ã€…ã«ã‚¦ã‚±ãŒè‰¯ã‹ã£ãŸæ„Ÿã˜ãŒã‚ã‚Šã¾ã™ã­ã€‚\u003c/p\u003e\n\n\u003chr /\u003e\n\n\u003cp\u003eä¸€æ–¹ã§ç¤¾å†…ã®ã‚¤ãƒ³ãƒ•ãƒ©ã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢ã‹ã‚‰ã¯ Redis ã£ã¦ãƒ¡ãƒ³ãƒ†ãƒŠãƒ³ã‚¹ã®æ‰‹é–“ãŒæ›ã‹ã£ã¦è©•åˆ¤æ‚ªã„ã§ã™ã­ã€‚\nä½¿ã†ã ã‘ãªã‚‰æ‰‹è»½ã§æ¥½ãªã‚“ã§ã™ãŒã€\u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/AWS\"\u003eAWS\u003c/a\u003e ã®ã‚¢ãƒƒãƒ—ãƒ‡ãƒ¼ãƒˆã§ãƒ€ã‚¦ãƒ³ã‚¿ã‚¤ãƒ ãŒç™ºç”Ÿã™ã‚‹æ™‚ã«åˆ©ç”¨è€…å‘ã‘ã«ã‚¢ãƒŠã‚¦ãƒ³ã‚¹ã—ãªã„ã¨ã„ã‘ãªã‹ã£ãŸã‚Šã€‚\nãƒ€ã‚¦ãƒ³ã‚¿ã‚¤ãƒ ã¨è¨€ã£ã¦ã‚‚æ·±å¤œã«æ•°ç§’ã€œæ•°åˆ†ãªã®ã§å½±éŸ¿ã¯å°‘ãªã„ã¨æ€ã†ã‚“ã§ã™ãŒã€\u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/%A5%A8%A5%F3%A5%BF%A1%BC%A5%D7%A5%E9%A5%A4%A5%BA\"\u003eã‚¨ãƒ³ã‚¿ãƒ¼ãƒ—ãƒ©ã‚¤ã‚º\u003c/a\u003eå‘ã‘ã®ã‚µãƒ¼ãƒ“ã‚¹ã¨ã‹ã‚„ã£ã¦ã‚‹ã¨ã“ã®è¾ºã¯å³ã—ã„ã§ã™ã­ã€‚\u003c/p\u003e\n\n\u003cp\u003e\u003ca href=\"https://cloud.google.com/blog/ja/products/management-tools/sre-error-budgets-and-maintenance-windows\"\u003eSRE ã®ã‚¨ãƒ©ãƒ¼ãƒã‚¸ã‚§ãƒƒãƒˆã®æ¦‚å¿µ\u003c/a\u003e ãŒæ—¥æœ¬å…¨ä½“ã«æµ¸é€ã™ã‚Œã°ã‚½ãƒ•ãƒˆã‚¦ã‚§ã‚¢é–‹ç™ºã®ç”Ÿç”£æ€§ã¯åº•ä¸Šã’ã•ã‚Œã‚‹ã‚“ã˜ã‚ƒãªã„ã‹ã¨æ€ã†ã®ã§ã™ãŒã€ã“ã®è¾ºã¯æ™‚é–“ã‚’æ›ã‘ã¦å°‘ã—ãšã¤å•“è’™ã—ã¦ã„ãã—ã‹ç„¡ã„ã§ã™ã­ã€‚ä¾‹ãˆã°æ—¥æœ¬ã®ç”Ÿæ´»ã‚¤ãƒ³ãƒ•ãƒ©ï¼ˆé›»æ°—ãƒ»æ°´é“ãƒ»ã‚¬ã‚¹ã¨ã‹é›»è»Šã¨ã‹ï¼‰ã£ã¦ã‚ã£ã¡ã‚ƒé«˜æ°´æº–ãªã®ã§ã€ã‚½ãƒ•ãƒˆã‚¦ã‚§ã‚¢ã®ä¸–ç•Œã§ã‚‚100ï¼…ç¨¼åƒã™ã‚‹ã“ã¨ãŒå½“ãŸã‚Šå‰ã¨ã„ã†ä¾¡å€¤è¦³ã«ãªã£ã¦ã—ã¾ã†ã‚“ã˜ã‚ƒãªã„ã‹ãªã€ã¨æ€ã†ã®ã§ã™ãŒã€ã“ã®è¾ºã®ä¾¡å€¤è¦³ã¯è¡¨è£ä¸€ä½“ã¨ã„ã†ã‹ã€å½“ãŸã‚Šå‰ã¨æ„Ÿã˜ã¦ã„ã‚‹ã‹ã‚‰é«˜å“è³ªã«ãªã‚‹ä¸€æ–¹ã§ã€ç”Ÿç”£æ€§ã¯ä¸‹ãŒã£ã¦ã—ã¾ã†ã¨ã„ã†æ§‹å›³ã ã¨æ€ã£ã¦ã„ã¾ã™ã€‚\u003c/p\u003e\n\n\u003cp\u003e\u003ca href=\"https://www.nic.ad.jp/ja/materials/iw/2017/proceedings/s15/s15-fujisaki.pdf\"\u003ehttps://www.nic.ad.jp/ja/materials/iw/2017/proceedings/s15/s15-fujisaki.pdf\u003c/a\u003e\n\u003cfigure class=\"figure-image figure-image-fotolife\" title=\"SREã®ä¿¡æ¡ (Google)\"\u003e\u003cspan itemscope itemtype=\"http://schema.org/Photograph\"\u003e\u003cimg src=\"https://cdn-ak.f.st-hatena.com/images/fotolife/r/ryz310/20210920/20210920165304.png\" alt=\"f:id:ryz310:20210920165304p:plain\" width=\"963\" height=\"527\" loading=\"lazy\" title=\"\" class=\"hatena-fotolife\" itemprop=\"image\"\u003e\u003c/span\u003e\u003cfigcaption\u003eSREã®ä¿¡æ¡ (\u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/Google\"\u003eGoogle\u003c/a\u003e)\u003c/figcaption\u003e\u003c/figure\u003e\u003c/p\u003e\n\n\u003cp\u003eä¸€å¿œãƒ¡ãƒ³ãƒ†ãƒŠãƒ³ã‚¹ã®æ‰‹é–“ã€ã¨ã„ã†ç‚¹ã§ã¯å¤é ƒã« \u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/AWS\"\u003eAWS\u003c/a\u003e ã‹ã‚‰ \u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/Amazon\"\u003eAmazon\u003c/a\u003e MemoryDB for Redis ã¨ã„ã†ãƒ•ãƒ«ãƒãƒãƒ¼ã‚¸ãƒ‰ãª Redis ãŒç™ºè¡¨ã•ã‚Œã¦ã„ã¾ã™ã€‚\næ±äº¬ãƒªãƒ¼ã‚¸ãƒ§ãƒ³ã¯æœªå¯¾å¿œã§ã€æ›¸ãè¾¼ã¿é€Ÿåº¦ãŒé…ããªã£ã¦ã„ãŸã‚Šã€æ–™é‡‘ã‚‚è‹¥å¹²é«˜ããªã£ã¦ã„ãŸã‚Šã—ã¾ã™ãŒã€æ°—ã«ãªã‚‹ã‚µãƒ¼ãƒ“ã‚¹ã§ã¯ã‚ã‚Šã¾ã™ã­ã€‚\u003c/p\u003e\n\n\u003cp\u003e\u003ciframe src=\"https://hatenablog-parts.com/embed?url=https%3A%2F%2Fdev.classmethod.jp%2Farticles%2Faws-release-durable-redis-amazon-memorydb-for-redis%2F\" title=\"Redisã«è€ä¹…æ€§ãŒåŠ ã‚ã£ãŸAmazon MemoryDB for RedisãŒç™»å ´ | DevelopersIO\" class=\"embed-card embed-webcard\" scrolling=\"no\" frameborder=\"0\" style=\"display: block; width: 100%; height: 155px; max-width: 500px; margin: 10px 0px;\"\u003e\u003c/iframe\u003e\u003ccite class=\"hatena-citation\"\u003e\u003ca href=\"https://dev.classmethod.jp/articles/aws-release-durable-redis-amazon-memorydb-for-redis/\"\u003edev.classmethod.jp\u003c/a\u003e\u003c/cite\u003e\u003c/p\u003e\n\n\u003chr /\u003e\n\n\u003cp\u003eã•ã¦ã€ã“ã®è¨˜äº‹ã®ãƒ¡ã‚¤ãƒ³ã¯å†’é ­ã§è§¦ã‚ŒãŸ Redis::Objects ã‚’æ‹¡å¼µã™ã‚‹ gem ã‚’ä½œã£ãŸã‚ˆã€ã¨ã„ã†è©±ã§ã™ã€‚\u003c/p\u003e\n\n\u003cp\u003e\u003ciframe src=\"https://hatenablog-parts.com/embed?url=https%3A%2F%2Fgithub.com%2Fryz310%2Fredis-objects-daily-counter\" title=\"GitHub - ryz310/redis-objects-daily-counter: Daily counter within Redis::Objects. Works with any class or ORM.\" class=\"embed-card embed-webcard\" scrolling=\"no\" frameborder=\"0\" style=\"display: block; width: 100%; height: 155px; max-width: 500px; margin: 10px 0px;\"\u003e\u003c/iframe\u003e\u003ccite class=\"hatena-citation\"\u003e\u003ca href=\"https://github.com/ryz310/redis-objects-daily-counter\"\u003egithub.com\u003c/a\u003e\u003c/cite\u003e\u003c/p\u003e\n\n\u003cp\u003eç™ºç«¯ã¯ Redis::Objects ã® \u003ccode\u003ecounter\u003c/code\u003e ã‚’ä½¿ã£ã¦ã‚µãƒ¼ãƒ“ã‚¹ã®åŠ¹æœæ¸¬å®šï¼ˆãƒ¡ãƒ¼ãƒ«é…ä¿¡æ•°ã€CV æ•°ã€ãƒ­ã‚°ã‚¤ãƒ³æ•°ãªã©ï¼‰ã‚’ã—ãŸã„ãªãƒ¼ã¨è€ƒãˆãŸã“ã¨ãªã‚“ã§ã™ãŒã€åŠ¹æœæ¸¬å®šã£ã¦ä¸€å®šã®æœŸé–“æ¯ã«é›†è¨ˆã—ã¦æ”¹å–„ã—ãŸãƒ»ã—ã¦ã„ãªã„ã®æŒ‡æ¨™ã«ã—ãŸã„ã‚„ã¤ã˜ã‚ƒãªã„ã§ã™ã‹ï¼Ÿ\n\u003ccode\u003ecounter\u003c/code\u003e ã§ã‚«ã‚¦ãƒ³ãƒˆã‚¢ãƒƒãƒ—ã—ã¤ã¤ã€æ—¥æ¬¡ã®\u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/%A5%D0%A5%C3%A5%C1%BD%E8%CD%FD\"\u003eãƒãƒƒãƒå‡¦ç†\u003c/a\u003eã§é›†è¨ˆã™ã‚Œã°è‰¯ã„ã‚“ã§ã™ãŒã€ãã‚Œã ã¨ã‚ã¾ã‚Šæ°—è»½ã˜ã‚ƒãªã„ã¨ã„ã†ã‹ã€æ¸¬å®šå¯¾è±¡ã¨ãªã‚‹ã‚µãƒ¼ãƒ“ã‚¹é–‹ç™ºã®å¾Œã€æ¸¬å®šãƒ­ã‚¸ãƒƒã‚¯ã¨\u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/%A5%D0%A5%C3%A5%C1%BD%E8%CD%FD\"\u003eãƒãƒƒãƒå‡¦ç†\u003c/a\u003eã€ä¿å­˜å…ˆã® DB ãƒ†ãƒ¼ãƒ–ãƒ«ä½œæˆã¾ã§ã‚»ãƒƒãƒˆã§å®Ÿè£…ã—ãªã„ã¨å®Ÿç¾ã§ããªã„ã§ã™ã‚ˆã­ã€‚\u003c/p\u003e\n\n\u003cp\u003eã“ã‚Œã¯ã‚µã‚¯ãƒƒã¨å®Ÿè£…ã™ã‚‹ã«ã¯ \u003ccode\u003ecounter\u003c/code\u003e ãŒè‡ªå‹•ã§æ—¥æ¬¡ã§ä¿å­˜å…ˆã‚’åˆ‡ã‚Šæ›¿ãˆã¦ãã‚Œã‚Œã°è‰¯ã•ãã†ã€ã¨ã„ã†ã“ã¨ã§ã€ \u003ccode\u003eredis-objects-daily-counter\u003c/code\u003e ã¨ã„ã† gem ã¯ \u003ccode\u003edaily_counter\u003c/code\u003e ã¨ã„ã†æ—¥æ¬¡ã§ä¿å­˜å…ˆã‚’åˆ‡ã‚Šæ›¿ãˆã‚‹ã‚«ã‚¦ãƒ³ã‚¿ãƒ¼æ©Ÿèƒ½ã‚’æä¾›ã—ã¾ã™ã€‚\nRedis::Objects ã‚’æ‹¡å¼µã—ã¦ä½œã£ã¦ã‚ã‚‹ã®ã§ã€ä½¿ã„æ–¹ã¯ã»ã¼åŒã˜ã§ã€å¯¾è±¡ã¨ã—ãŸã„ Class ã« \u003ccode\u003einclude Redis::Objects\u003c/code\u003e ã‚’è¿½åŠ ã™ã‚‹ã¨ä½¿ãˆã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã™ã€‚\u003c/p\u003e\n\n\u003cpre class=\"code lang-ruby\" data-lang=\"ruby\" data-unlink\u003e\u003cspan class=\"synComment\"\u003e# Gemfile\u003c/span\u003e\ngem \u003cspan class=\"synSpecial\"\u003e'\u003c/span\u003e\u003cspan class=\"synConstant\"\u003eredis-objects-daily-counter\u003c/span\u003e\u003cspan class=\"synSpecial\"\u003e'\u003c/span\u003e\n\u003c/pre\u003e\n\n\n\n\n\u003cpre class=\"code lang-ruby\" data-lang=\"ruby\" data-unlink\u003e\u003cspan class=\"synPreProc\"\u003eclass\u003c/span\u003e \u003cspan class=\"synType\"\u003eHomepage\u003c/span\u003e\n  \u003cspan class=\"synPreProc\"\u003einclude\u003c/span\u003e \u003cspan class=\"synType\"\u003eRedis\u003c/span\u003e::\u003cspan class=\"synType\"\u003eObjects\u003c/span\u003e\n\n  daily_counter \u003cspan class=\"synConstant\"\u003e:pv\u003c/span\u003e, \u003cspan class=\"synConstant\"\u003eexpireat\u003c/span\u003e: -\u0026gt; { \u003cspan class=\"synType\"\u003eTime\u003c/span\u003e.now + \u003cspan class=\"synConstant\"\u003e2_678_400\u003c/span\u003e } \u003cspan class=\"synComment\"\u003e# about a month\u003c/span\u003e\n\n  \u003cspan class=\"synPreProc\"\u003edef\u003c/span\u003e \u003cspan class=\"synIdentifier\"\u003eid\u003c/span\u003e\n    \u003cspan class=\"synConstant\"\u003e1\u003c/span\u003e\n  \u003cspan class=\"synPreProc\"\u003eend\u003c/span\u003e\n\u003cspan class=\"synPreProc\"\u003eend\u003c/span\u003e\n\n\u003cspan class=\"synComment\"\u003e# 2021-04-01\u003c/span\u003e\nhomepage = \u003cspan class=\"synType\"\u003eHomepage\u003c/span\u003e.new\nhomepage.id \u003cspan class=\"synComment\"\u003e# 1\u003c/span\u003e\n\nhomepage.pv.increment\nhomepage.pv.increment\nhomepage.pv.increment\nputs homepage.pv.value \u003cspan class=\"synComment\"\u003e# 3\u003c/span\u003e\n\n\u003cspan class=\"synComment\"\u003e# 2021-04-02 (next day)\u003c/span\u003e\nputs homepage.pv.value \u003cspan class=\"synComment\"\u003e# 0\u003c/span\u003e\nhomepage.pv.increment\nhomepage.pv.increment\nputs homepage.pv.value \u003cspan class=\"synComment\"\u003e# 2\u003c/span\u003e\n\nstart_date = \u003cspan class=\"synType\"\u003eDate\u003c/span\u003e.new(\u003cspan class=\"synConstant\"\u003e2021\u003c/span\u003e, \u003cspan class=\"synConstant\"\u003e4\u003c/span\u003e, \u003cspan class=\"synConstant\"\u003e1\u003c/span\u003e)\nend_date = \u003cspan class=\"synType\"\u003eDate\u003c/span\u003e.new(\u003cspan class=\"synConstant\"\u003e2021\u003c/span\u003e, \u003cspan class=\"synConstant\"\u003e4\u003c/span\u003e, \u003cspan class=\"synConstant\"\u003e2\u003c/span\u003e)\nhomepage.pv.range(start_date, end_date) \u003cspan class=\"synComment\"\u003e# [3, 2]\u003c/span\u003e\n\u003c/pre\u003e\n\n\n\u003cp\u003e\u003ccode\u003e#increment\u003c/code\u003e \u003ccode\u003e#decrement\u003c/code\u003e ã¯ \u003ccode\u003ecounter\u003c/code\u003e ã¨åŒã˜ä½¿ã„å‹æ‰‹ã§ã™ã€‚ãŸã ã€æ—¥ä»˜ãŒå¤‰ã‚ã‚‹ã¨è‡ªå‹•çš„ã«ä¿å­˜å…ˆãŒåˆ‡ã‚Šæ›¿ã‚ã‚Šã¾ã™ã€‚\nã“ã‚Œã¯ Redis ã§ä¿å­˜ã—ã¦ã„ã‚‹ Key åãŒä»¥ä¸‹ã®ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆã«ãªã£ã¦ã„ã‚‹ãŸã‚ã§ã™ã€‚\u003c/p\u003e\n\n\u003cpre class=\"code\" data-lang=\"\" data-unlink\u003emodel_name:id:field_name:yyyy-mm-dd\u003c/pre\u003e\n\n\n\u003cp\u003eæ—¥ä»˜ãŒå¤‰ã‚ã£ãŸå¾Œã‚‚éå»ã®ãƒ¬ã‚³ãƒ¼ãƒ‰ã¯å‰Šé™¤ã•ã‚Œã¦ã„ãªã„ã®ã§ã€ä»¥ä¸‹ã®ã‚³ãƒ¼ãƒ‰ã§ã‚¢ã‚¯ã‚»ã‚¹å‡ºæ¥ã¾ã™ã€‚ã“ã®ä½¿ã„æ–¹ã¯åŒã˜ã Redis::Objects ã® \u003ccode\u003elist\u003c/code\u003e ã¨ä¼¼ãŸã‚ˆã†ãªä½¿ã„å‹æ‰‹ã«ãªã£ã¦ã„ã¾ã™ã€‚\u003c/p\u003e\n\n\u003cpre class=\"code lang-ruby\" data-lang=\"ruby\" data-unlink\u003e\u003cspan class=\"synComment\"\u003e# 2021-04-01\u003c/span\u003e\nhomepage.pv.increment(\u003cspan class=\"synConstant\"\u003e3\u003c/span\u003e)\n\n\u003cspan class=\"synComment\"\u003e# 2021-04-02 (next day)\u003c/span\u003e\nhomepage.pv.increment(\u003cspan class=\"synConstant\"\u003e2\u003c/span\u003e)\n\n\u003cspan class=\"synComment\"\u003e# 2021-04-03 (next day)\u003c/span\u003e\nhomepage.pv.increment(\u003cspan class=\"synConstant\"\u003e5\u003c/span\u003e)\n\nhomepage.pv[\u003cspan class=\"synType\"\u003eDate\u003c/span\u003e.new(\u003cspan class=\"synConstant\"\u003e2021\u003c/span\u003e, \u003cspan class=\"synConstant\"\u003e4\u003c/span\u003e, \u003cspan class=\"synConstant\"\u003e1\u003c/span\u003e)] \u003cspan class=\"synComment\"\u003e# =\u0026gt; 3\u003c/span\u003e\nhomepage.pv[\u003cspan class=\"synType\"\u003eDate\u003c/span\u003e.new(\u003cspan class=\"synConstant\"\u003e2021\u003c/span\u003e, \u003cspan class=\"synConstant\"\u003e4\u003c/span\u003e, \u003cspan class=\"synConstant\"\u003e1\u003c/span\u003e), \u003cspan class=\"synConstant\"\u003e3\u003c/span\u003e] \u003cspan class=\"synComment\"\u003e# =\u0026gt; [3, 2, 5]\u003c/span\u003e\nhomepage.pv[\u003cspan class=\"synType\"\u003eDate\u003c/span\u003e.new(\u003cspan class=\"synConstant\"\u003e2021\u003c/span\u003e, \u003cspan class=\"synConstant\"\u003e4\u003c/span\u003e, \u003cspan class=\"synConstant\"\u003e1\u003c/span\u003e)..\u003cspan class=\"synType\"\u003eDate\u003c/span\u003e.new(\u003cspan class=\"synConstant\"\u003e2021\u003c/span\u003e, \u003cspan class=\"synConstant\"\u003e4\u003c/span\u003e, \u003cspan class=\"synConstant\"\u003e2\u003c/span\u003e)] \u003cspan class=\"synComment\"\u003e# =\u0026gt; [3, 2]\u003c/span\u003e\n\nhomepage.pv.delete(\u003cspan class=\"synType\"\u003eDate\u003c/span\u003e.new(\u003cspan class=\"synConstant\"\u003e2021\u003c/span\u003e, \u003cspan class=\"synConstant\"\u003e4\u003c/span\u003e, \u003cspan class=\"synConstant\"\u003e1\u003c/span\u003e))\nhomepage.pv.range(\u003cspan class=\"synType\"\u003eDate\u003c/span\u003e.new(\u003cspan class=\"synConstant\"\u003e2021\u003c/span\u003e, \u003cspan class=\"synConstant\"\u003e4\u003c/span\u003e, \u003cspan class=\"synConstant\"\u003e1\u003c/span\u003e), \u003cspan class=\"synType\"\u003eDate\u003c/span\u003e.new(\u003cspan class=\"synConstant\"\u003e2021\u003c/span\u003e, \u003cspan class=\"synConstant\"\u003e4\u003c/span\u003e, \u003cspan class=\"synConstant\"\u003e3\u003c/span\u003e)) \u003cspan class=\"synComment\"\u003e# =\u0026gt; [0, 2, 5]\u003c/span\u003e\nhomepage.pv.at(\u003cspan class=\"synType\"\u003eDate\u003c/span\u003e.new(\u003cspan class=\"synConstant\"\u003e2021\u003c/span\u003e, \u003cspan class=\"synConstant\"\u003e4\u003c/span\u003e, \u003cspan class=\"synConstant\"\u003e2\u003c/span\u003e)) \u003cspan class=\"synComment\"\u003e# =\u0026gt; 2\u003c/span\u003e\n\u003c/pre\u003e\n\n\n\u003cp\u003eã“ã‚Œã§æ¸¬å®šå¯¾è±¡ã¨ãªã‚‹ã‚µãƒ¼ãƒ“ã‚¹ã‚’é–‹ç™ºã—ãŸå¾Œã€ \u003ccode\u003edaily_counter\u003c/code\u003e ã§æ¸¬å®šå‡¦ç†ã‚’å®Ÿè£…ã—ã¦ãŠãã ã‘ã§ OKã€‚\nã“ã®çŠ¶æ…‹ã§ãƒªãƒªãƒ¼ã‚¹ã™ã‚Œã°ãƒ‡ãƒ¼ã‚¿ã¯æºœã¾ã£ã¦ã„ãã®ã§ã€é€±æ¬¡ã‚„æœˆæ¬¡ã§é›†è¨ˆã™ã‚‹\u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/%A5%D0%A5%C3%A5%C1%BD%E8%CD%FD\"\u003eãƒãƒƒãƒå‡¦ç†\u003c/a\u003eã‚’å¾Œã§ã‚†ã£ãã‚Šå®Ÿè£…ã™ã‚Œã°è‰¯ã„ã§ã™ã€‚\n\u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/%A5%D0%A5%C3%A5%C1%BD%E8%CD%FD\"\u003eãƒãƒƒãƒå‡¦ç†\u003c/a\u003eå®Ÿè£…å‰ã«ã‚µãƒ¼ãƒãƒ¼å†…ã§ \u003ccode\u003e$ bin/rails console\u003c/code\u003e ã‚’å®Ÿè¡Œã—ã¦ \u003ccode\u003edaily_counter\u003c/code\u003e ã®å€¤ã‚’ç¢ºèªã—ãªãŒã‚‰\u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/%A5%D0%A5%C3%A5%C1%BD%E8%CD%FD\"\u003eãƒãƒƒãƒå‡¦ç†\u003c/a\u003eã®å®Ÿè£…ã‚’è€ƒãˆã‚‹ã€ã¨ã‹ã‚‚å‡ºæ¥ã¾ã™ã­ã€‚\nå…·ä½“çš„ãªãƒ‡ãƒ¼ã‚¿ã‚’è¦‹ãªãŒã‚‰ã®æ–¹ãŒé–‹ç™ºé›£æ˜“åº¦ã¯ä¸‹ãŒã‚Šã¾ã™ã€‚\u003c/p\u003e\n\n\u003cp\u003eã¡ãªã¿ã«ã§ã™ãŒã€ \u003cstrong\u003e\u003ccode\u003eexpireat\u003c/code\u003e ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã‚’æŒ‡å®šã—ã¦ãŠãã“ã¨ã‚’ã‚ªã‚¹ã‚¹ãƒ¡ã—ã¾ã™ã€‚\u003c/strong\u003e\ngem ã®ä»•æ§˜ä¸Šã€ã©ã‚“ã©ã‚“ Redis ä¸Šã®ãƒ¡ãƒ¢ãƒªã‚’åœ§è¿«ã—ã¦ã„ãã®ã§ã€ä¸€å®šæœŸé–“å¾Œã«è‡ªå‹•çš„ã«å‰Šé™¤ã™ã‚‹ã‚ˆã†ã«ã—ã¾ã—ã‚‡ã†ã€‚\u003c/p\u003e\n\n\u003chr /\u003e\n\n\u003cp\u003e\u003ccode\u003edaily_counter\u003c/code\u003e ãŒã‚ã‚‹ãªã‚‰é€±æ¬¡ã€æœˆæ¬¡ã€å¹´æ¬¡ã‚«ã‚¦ãƒ³ã‚¿ãƒ¼ãŒã‚ã£ã¦ã‚‚è‰¯ã„ã‚ˆã­ã€ãªã‚“ã ã£ãŸã‚‰æ¯æ™‚ã€æ¯åˆ†ã‚«ã‚¦ãƒ³ã‚¿ãƒ¼ã‚‚ã‚ã£ãŸã£ã¦è‰¯ã„ã˜ã‚ƒãªã„ã‹ã€ã¨ã„ã†äº‹ã§ \u003ccode\u003ev0.2.0\u003c/code\u003e ã§ã¯ãã‚Œã‚‰ãŒè¿½åŠ ã•ã‚Œã¦ã„ã¾ã™ã€‚\u003c/p\u003e\n\n\u003cp\u003eæ¯æ™‚ãƒ»æ¯åˆ†ã®ã‚«ã‚¦ãƒ³ã‚¿ãƒ¼ã¯ \u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/API\"\u003eAPI\u003c/a\u003e rate limit æ©Ÿèƒ½ã®å®Ÿè£…ã«ã‚‚è‰¯ã„ã‹ã‚‚ã—ã‚Œãªã„ã§ã™ã­ã€‚\u003c/p\u003e\n\n\u003cul\u003e\n\u003cli\u003e\u003ccode\u003eannual_counter\u003c/code\u003e\n\n\u003cul\u003e\n\u003cli\u003eKey format: \u003ccode\u003emodel_name:id:field_name:yyyy\u003c/code\u003e\u003c/li\u003e\n\u003cli\u003eRedis is a highly volatile key-\u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/value\"\u003evalue\u003c/a\u003e store, so I don't recommend using it.\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003emonthly_counter\u003c/code\u003e\n\n\u003cul\u003e\n\u003cli\u003eKey format: \u003ccode\u003emodel_name:id:field_name:yyyy-mm\u003c/code\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003eweekly_counter\u003c/code\u003e\n\n\u003cul\u003e\n\u003cli\u003eKey format: \u003ccode\u003emodel_name:id:field_name:yyyyWw\u003c/code\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003edaily_counter\u003c/code\u003e\n\n\u003cul\u003e\n\u003cli\u003eKey format: \u003ccode\u003emodel_name:id:field_name:yyyy-mm-dd\u003c/code\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003ehourly_counter\u003c/code\u003e\n\n\u003cul\u003e\n\u003cli\u003eKey format: \u003ccode\u003emodel_name:id:field_name:yyyy-mm-ddThh\u003c/code\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003eminutely_counter\u003c/code\u003e\n\n\u003cul\u003e\n\u003cli\u003eKey format: \u003ccode\u003emodel_name:id:field_name:yyyy-mm-ddThh:mi\u003c/code\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\n\n\u003cp\u003eä¸€å¿œå®Ÿè£…ã¯ã—ã¾ã—ãŸãŒã€ \u003ccode\u003eannual_counter\u003c/code\u003e ã®ã‚ˆã†ã«æœŸé–“ã®é•·ã„ã‚«ã‚¦ãƒ³ã‚¿ãƒ¼ã®åˆ©ç”¨ã¯ã‚ã¾ã‚Šã‚ªã‚¹ã‚¹ãƒ¡ã—ã¾ã›ã‚“ã€‚\nRedis ã£ã¦ãµã¨ã—ãŸæ‹å­ã«ãƒ‡ãƒ¼ã‚¿ãŒé£›ã‚“ã§ã—ã¾ã†å¯èƒ½æ€§ãŒã‚ã‚‹ã®ã§ã€ã‚ãã¾ã§ã‚­ãƒ£ãƒƒã‚·ãƒ¥çš„ãªä½ç½®ä»˜ã‘ã§åˆ©ç”¨ã™ã‚‹ã®ãŒè‰¯ã„ã¨æ€ã„ã¾ã™ã€‚\n\u003ccode\u003edaily_counter\u003c/code\u003e ã‚‚é€±æ¬¡ãƒ»æœˆæ¬¡ã§ RDS ã«é›†è¨ˆçµæœã‚’ä¿å­˜ã™ã‚‹é‹ç”¨ã‚’æƒ³å®šã—ã¦ã„ã¾ã™ã®ã§ã€‚\u003c/p\u003e\n\n\u003chr /\u003e\n\n\u003cp\u003eã¨ã„ã†ã‚ã‘ã§ä¹…ã€…ã®ãƒ–ãƒ­ã‚°æ›´æ–°ã§ã¯æ–°ã—ãä½œã£ãŸ \u003ccode\u003eredis-objects-daily-counter\u003c/code\u003e ã¨ã„ã† gem ã®ç´¹ä»‹ã‚’ã•ã›ã¦é ‚ãã¾ã—ãŸã€‚\nã“ã‚Œã‹ã‚‰å¼Šç¤¾ãƒ—ãƒ­ãƒ€ã‚¯ãƒˆã§ã‚‚åˆ©ç”¨ã—ã¦ã„ãäºˆå®šã§ã™ã—ã€è‰²ã€…ãªã‚µãƒ¼ãƒ“ã‚¹ã§ã‚‚æ´»ç”¨é ‚ã‘ã‚‹ã¨å¬‰ã—ã„ã§ã™ã€‚\u003c/p\u003e\n","contentSnippet":"åŠå¹´ã¶ã‚Šãã‚‰ã„ã«ä¼šç¤¾ã®å‹‰å¼·ä¼šã§ç™ºè¡¨ã—ã¾ã—ãŸã€‚Redis::Objects ã¨ã„ã† gem ã‚’ä½¿ã£ã¦ RDS ã«ã‹ã‹ã£ã¦ã„ãŸ IO è² è·ã‚’æ”¹å–„ã—ãŸã€ã¨ã„ã†è©±ã¨ã€ Redis::Objects ã‚’æ‹¡å¼µã™ã‚‹ gem ã‚’ä½œã£ãŸã¨ã„ã†è©±ï¼ˆå¾Œè¿°ï¼‰ã§ã™ã€‚github.comRedis ã‚’ä½¿ã£ã¦ DB ã®è² è·ã‚’ä¸‹ã’ã‚‹ç³»ã®ãŠè©±ã£ã¦ 2010 å¹´ä»£ã«ã•ã‚Œå°½ãã—ãŸæ„ŸãŒã‚ã£ã¦ã€ä»Šæ›´ãªæ°—ã‚‚ã™ã‚‹ã‚“ã§ã™ãŒã€ä¸€å‘¨å›ã£ã¦æœ€è¿‘èã‹ãªã„è©±ã ãªãƒ¼ã¨æ€ã£ã¦ã¾ã™ã€‚ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢ã§æœ€è¿‘ã‚µãƒ¼ãƒãƒ¼ã‚µã‚¤ãƒ‰ã‚‚è§¦ã‚‹æ©Ÿä¼šãŒå¢—ãˆãŸã‚ˆã†ãªæ–¹ã€…ã«ã‚¦ã‚±ãŒè‰¯ã‹ã£ãŸæ„Ÿã˜ãŒã‚ã‚Šã¾ã™ã­ã€‚ä¸€æ–¹ã§ç¤¾å†…ã®ã‚¤ãƒ³ãƒ•ãƒ©ã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢ã‹ã‚‰ã¯ Redis ã£ã¦ãƒ¡ãƒ³ãƒ†ãƒŠãƒ³ã‚¹ã®æ‰‹é–“ãŒæ›ã‹ã£ã¦è©•åˆ¤æ‚ªã„ã§ã™ã­ã€‚ä½¿ã†ã ã‘ãªã‚‰æ‰‹è»½ã§æ¥½ãªã‚“ã§ã™ãŒã€AWS ã®ã‚¢ãƒƒãƒ—ãƒ‡ãƒ¼ãƒˆã§ãƒ€ã‚¦ãƒ³ã‚¿ã‚¤ãƒ ãŒç™ºç”Ÿã™ã‚‹æ™‚ã«åˆ©ç”¨è€…å‘ã‘ã«ã‚¢ãƒŠã‚¦ãƒ³ã‚¹ã—ãªã„ã¨ã„ã‘ãªã‹ã£ãŸã‚Šã€‚ãƒ€ã‚¦ãƒ³ã‚¿ã‚¤ãƒ ã¨è¨€ã£ã¦ã‚‚æ·±å¤œã«æ•°ç§’ã€œæ•°åˆ†ãªã®ã§å½±éŸ¿ã¯å°‘ãªã„ã¨æ€ã†ã‚“ã§ã™ãŒã€ã‚¨ãƒ³ã‚¿ãƒ¼ãƒ—ãƒ©ã‚¤ã‚ºå‘ã‘ã®ã‚µãƒ¼ãƒ“ã‚¹ã¨ã‹ã‚„ã£ã¦ã‚‹ã¨ã“ã®è¾ºã¯å³ã—ã„ã§ã™ã­ã€‚SRE ã®ã‚¨ãƒ©ãƒ¼ãƒã‚¸ã‚§ãƒƒãƒˆã®æ¦‚å¿µ ãŒæ—¥æœ¬å…¨ä½“ã«æµ¸é€ã™ã‚Œã°ã‚½ãƒ•ãƒˆã‚¦ã‚§ã‚¢é–‹ç™ºã®ç”Ÿç”£æ€§ã¯åº•ä¸Šã’ã•ã‚Œã‚‹ã‚“ã˜ã‚ƒãªã„ã‹ã¨æ€ã†ã®ã§ã™ãŒã€ã“ã®è¾ºã¯æ™‚é–“ã‚’æ›ã‘ã¦å°‘ã—ãšã¤å•“è’™ã—ã¦ã„ãã—ã‹ç„¡ã„ã§ã™ã­ã€‚ä¾‹ãˆã°æ—¥æœ¬ã®ç”Ÿæ´»ã‚¤ãƒ³ãƒ•ãƒ©ï¼ˆé›»æ°—ãƒ»æ°´é“ãƒ»ã‚¬ã‚¹ã¨ã‹é›»è»Šã¨ã‹ï¼‰ã£ã¦ã‚ã£ã¡ã‚ƒé«˜æ°´æº–ãªã®ã§ã€ã‚½ãƒ•ãƒˆã‚¦ã‚§ã‚¢ã®ä¸–ç•Œã§ã‚‚100ï¼…ç¨¼åƒã™ã‚‹ã“ã¨ãŒå½“ãŸã‚Šå‰ã¨ã„ã†ä¾¡å€¤è¦³ã«ãªã£ã¦ã—ã¾ã†ã‚“ã˜ã‚ƒãªã„ã‹ãªã€ã¨æ€ã†ã®ã§ã™ãŒã€ã“ã®è¾ºã®ä¾¡å€¤è¦³ã¯è¡¨è£ä¸€ä½“ã¨ã„ã†ã‹ã€å½“ãŸã‚Šå‰ã¨æ„Ÿã˜ã¦ã„ã‚‹ã‹ã‚‰é«˜å“è³ªã«ãªã‚‹ä¸€æ–¹ã§ã€ç”Ÿç”£æ€§ã¯ä¸‹ãŒã£ã¦ã—ã¾ã†ã¨ã„ã†æ§‹å›³ã ã¨æ€ã£ã¦ã„ã¾ã™ã€‚https://www.nic.ad.jp/ja/materials/iw/2017/proceedings/s15/s15-fujisaki.pdfSREã®ä¿¡æ¡ (Google)ä¸€å¿œãƒ¡ãƒ³ãƒ†ãƒŠãƒ³ã‚¹ã®æ‰‹é–“ã€ã¨ã„ã†ç‚¹ã§ã¯å¤é ƒã« AWS ã‹ã‚‰ Amazon MemoryDB for Redis ã¨ã„ã†ãƒ•ãƒ«ãƒãƒãƒ¼ã‚¸ãƒ‰ãª Redis ãŒç™ºè¡¨ã•ã‚Œã¦ã„ã¾ã™ã€‚æ±äº¬ãƒªãƒ¼ã‚¸ãƒ§ãƒ³ã¯æœªå¯¾å¿œã§ã€æ›¸ãè¾¼ã¿é€Ÿåº¦ãŒé…ããªã£ã¦ã„ãŸã‚Šã€æ–™é‡‘ã‚‚è‹¥å¹²é«˜ããªã£ã¦ã„ãŸã‚Šã—ã¾ã™ãŒã€æ°—ã«ãªã‚‹ã‚µãƒ¼ãƒ“ã‚¹ã§ã¯ã‚ã‚Šã¾ã™ã­ã€‚dev.classmethod.jpã•ã¦ã€ã“ã®è¨˜äº‹ã®ãƒ¡ã‚¤ãƒ³ã¯å†’é ­ã§è§¦ã‚ŒãŸ Redis::Objects ã‚’æ‹¡å¼µã™ã‚‹ gem ã‚’ä½œã£ãŸã‚ˆã€ã¨ã„ã†è©±ã§ã™ã€‚github.comç™ºç«¯ã¯ Redis::Objects ã® counter ã‚’ä½¿ã£ã¦ã‚µãƒ¼ãƒ“ã‚¹ã®åŠ¹æœæ¸¬å®šï¼ˆãƒ¡ãƒ¼ãƒ«é…ä¿¡æ•°ã€CV æ•°ã€ãƒ­ã‚°ã‚¤ãƒ³æ•°ãªã©ï¼‰ã‚’ã—ãŸã„ãªãƒ¼ã¨è€ƒãˆãŸã“ã¨ãªã‚“ã§ã™ãŒã€åŠ¹æœæ¸¬å®šã£ã¦ä¸€å®šã®æœŸé–“æ¯ã«é›†è¨ˆã—ã¦æ”¹å–„ã—ãŸãƒ»ã—ã¦ã„ãªã„ã®æŒ‡æ¨™ã«ã—ãŸã„ã‚„ã¤ã˜ã‚ƒãªã„ã§ã™ã‹ï¼Ÿcounter ã§ã‚«ã‚¦ãƒ³ãƒˆã‚¢ãƒƒãƒ—ã—ã¤ã¤ã€æ—¥æ¬¡ã®ãƒãƒƒãƒå‡¦ç†ã§é›†è¨ˆã™ã‚Œã°è‰¯ã„ã‚“ã§ã™ãŒã€ãã‚Œã ã¨ã‚ã¾ã‚Šæ°—è»½ã˜ã‚ƒãªã„ã¨ã„ã†ã‹ã€æ¸¬å®šå¯¾è±¡ã¨ãªã‚‹ã‚µãƒ¼ãƒ“ã‚¹é–‹ç™ºã®å¾Œã€æ¸¬å®šãƒ­ã‚¸ãƒƒã‚¯ã¨ãƒãƒƒãƒå‡¦ç†ã€ä¿å­˜å…ˆã® DB ãƒ†ãƒ¼ãƒ–ãƒ«ä½œæˆã¾ã§ã‚»ãƒƒãƒˆã§å®Ÿè£…ã—ãªã„ã¨å®Ÿç¾ã§ããªã„ã§ã™ã‚ˆã­ã€‚ã“ã‚Œã¯ã‚µã‚¯ãƒƒã¨å®Ÿè£…ã™ã‚‹ã«ã¯ counter ãŒè‡ªå‹•ã§æ—¥æ¬¡ã§ä¿å­˜å…ˆã‚’åˆ‡ã‚Šæ›¿ãˆã¦ãã‚Œã‚Œã°è‰¯ã•ãã†ã€ã¨ã„ã†ã“ã¨ã§ã€ redis-objects-daily-counter ã¨ã„ã† gem ã¯ daily_counter ã¨ã„ã†æ—¥æ¬¡ã§ä¿å­˜å…ˆã‚’åˆ‡ã‚Šæ›¿ãˆã‚‹ã‚«ã‚¦ãƒ³ã‚¿ãƒ¼æ©Ÿèƒ½ã‚’æä¾›ã—ã¾ã™ã€‚Redis::Objects ã‚’æ‹¡å¼µã—ã¦ä½œã£ã¦ã‚ã‚‹ã®ã§ã€ä½¿ã„æ–¹ã¯ã»ã¼åŒã˜ã§ã€å¯¾è±¡ã¨ã—ãŸã„ Class ã« include Redis::Objects ã‚’è¿½åŠ ã™ã‚‹ã¨ä½¿ãˆã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã™ã€‚# Gemfilegem 'redis-objects-daily-counter'class Homepage  include Redis::Objects  daily_counter :pv, expireat: -\u003e { Time.now + 2_678_400 } # about a month  def id    1  endend# 2021-04-01homepage = Homepage.newhomepage.id # 1homepage.pv.incrementhomepage.pv.incrementhomepage.pv.incrementputs homepage.pv.value # 3# 2021-04-02 (next day)puts homepage.pv.value # 0homepage.pv.incrementhomepage.pv.incrementputs homepage.pv.value # 2start_date = Date.new(2021, 4, 1)end_date = Date.new(2021, 4, 2)homepage.pv.range(start_date, end_date) # [3, 2]#increment #decrement ã¯ counter ã¨åŒã˜ä½¿ã„å‹æ‰‹ã§ã™ã€‚ãŸã ã€æ—¥ä»˜ãŒå¤‰ã‚ã‚‹ã¨è‡ªå‹•çš„ã«ä¿å­˜å…ˆãŒåˆ‡ã‚Šæ›¿ã‚ã‚Šã¾ã™ã€‚ã“ã‚Œã¯ Redis ã§ä¿å­˜ã—ã¦ã„ã‚‹ Key åãŒä»¥ä¸‹ã®ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆã«ãªã£ã¦ã„ã‚‹ãŸã‚ã§ã™ã€‚model_name:id:field_name:yyyy-mm-ddæ—¥ä»˜ãŒå¤‰ã‚ã£ãŸå¾Œã‚‚éå»ã®ãƒ¬ã‚³ãƒ¼ãƒ‰ã¯å‰Šé™¤ã•ã‚Œã¦ã„ãªã„ã®ã§ã€ä»¥ä¸‹ã®ã‚³ãƒ¼ãƒ‰ã§ã‚¢ã‚¯ã‚»ã‚¹å‡ºæ¥ã¾ã™ã€‚ã“ã®ä½¿ã„æ–¹ã¯åŒã˜ã Redis::Objects ã® list ã¨ä¼¼ãŸã‚ˆã†ãªä½¿ã„å‹æ‰‹ã«ãªã£ã¦ã„ã¾ã™ã€‚# 2021-04-01homepage.pv.increment(3)# 2021-04-02 (next day)homepage.pv.increment(2)# 2021-04-03 (next day)homepage.pv.increment(5)homepage.pv[Date.new(2021, 4, 1)] # =\u003e 3homepage.pv[Date.new(2021, 4, 1), 3] # =\u003e [3, 2, 5]homepage.pv[Date.new(2021, 4, 1)..Date.new(2021, 4, 2)] # =\u003e [3, 2]homepage.pv.delete(Date.new(2021, 4, 1))homepage.pv.range(Date.new(2021, 4, 1), Date.new(2021, 4, 3)) # =\u003e [0, 2, 5]homepage.pv.at(Date.new(2021, 4, 2)) # =\u003e 2ã“ã‚Œã§æ¸¬å®šå¯¾è±¡ã¨ãªã‚‹ã‚µãƒ¼ãƒ“ã‚¹ã‚’é–‹ç™ºã—ãŸå¾Œã€ daily_counter ã§æ¸¬å®šå‡¦ç†ã‚’å®Ÿè£…ã—ã¦ãŠãã ã‘ã§ OKã€‚ã“ã®çŠ¶æ…‹ã§ãƒªãƒªãƒ¼ã‚¹ã™ã‚Œã°ãƒ‡ãƒ¼ã‚¿ã¯æºœã¾ã£ã¦ã„ãã®ã§ã€é€±æ¬¡ã‚„æœˆæ¬¡ã§é›†è¨ˆã™ã‚‹ãƒãƒƒãƒå‡¦ç†ã‚’å¾Œã§ã‚†ã£ãã‚Šå®Ÿè£…ã™ã‚Œã°è‰¯ã„ã§ã™ã€‚ãƒãƒƒãƒå‡¦ç†å®Ÿè£…å‰ã«ã‚µãƒ¼ãƒãƒ¼å†…ã§ $ bin/rails console ã‚’å®Ÿè¡Œã—ã¦ daily_counter ã®å€¤ã‚’ç¢ºèªã—ãªãŒã‚‰ãƒãƒƒãƒå‡¦ç†ã®å®Ÿè£…ã‚’è€ƒãˆã‚‹ã€ã¨ã‹ã‚‚å‡ºæ¥ã¾ã™ã­ã€‚å…·ä½“çš„ãªãƒ‡ãƒ¼ã‚¿ã‚’è¦‹ãªãŒã‚‰ã®æ–¹ãŒé–‹ç™ºé›£æ˜“åº¦ã¯ä¸‹ãŒã‚Šã¾ã™ã€‚ã¡ãªã¿ã«ã§ã™ãŒã€ expireat ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã‚’æŒ‡å®šã—ã¦ãŠãã“ã¨ã‚’ã‚ªã‚¹ã‚¹ãƒ¡ã—ã¾ã™ã€‚gem ã®ä»•æ§˜ä¸Šã€ã©ã‚“ã©ã‚“ Redis ä¸Šã®ãƒ¡ãƒ¢ãƒªã‚’åœ§è¿«ã—ã¦ã„ãã®ã§ã€ä¸€å®šæœŸé–“å¾Œã«è‡ªå‹•çš„ã«å‰Šé™¤ã™ã‚‹ã‚ˆã†ã«ã—ã¾ã—ã‚‡ã†ã€‚daily_counter ãŒã‚ã‚‹ãªã‚‰é€±æ¬¡ã€æœˆæ¬¡ã€å¹´æ¬¡ã‚«ã‚¦ãƒ³ã‚¿ãƒ¼ãŒã‚ã£ã¦ã‚‚è‰¯ã„ã‚ˆã­ã€ãªã‚“ã ã£ãŸã‚‰æ¯æ™‚ã€æ¯åˆ†ã‚«ã‚¦ãƒ³ã‚¿ãƒ¼ã‚‚ã‚ã£ãŸã£ã¦è‰¯ã„ã˜ã‚ƒãªã„ã‹ã€ã¨ã„ã†äº‹ã§ v0.2.0 ã§ã¯ãã‚Œã‚‰ãŒè¿½åŠ ã•ã‚Œã¦ã„ã¾ã™ã€‚æ¯æ™‚ãƒ»æ¯åˆ†ã®ã‚«ã‚¦ãƒ³ã‚¿ãƒ¼ã¯ API rate limit æ©Ÿèƒ½ã®å®Ÿè£…ã«ã‚‚è‰¯ã„ã‹ã‚‚ã—ã‚Œãªã„ã§ã™ã­ã€‚annual_counterKey format: model_name:id:field_name:yyyyRedis is a highly volatile key-value store, so I don't recommend using it.monthly_counterKey format: model_name:id:field_name:yyyy-mmweekly_counterKey format: model_name:id:field_name:yyyyWwdaily_counterKey format: model_name:id:field_name:yyyy-mm-ddhourly_counterKey format: model_name:id:field_name:yyyy-mm-ddThhminutely_counterKey format: model_name:id:field_name:yyyy-mm-ddThh:miä¸€å¿œå®Ÿè£…ã¯ã—ã¾ã—ãŸãŒã€ annual_counter ã®ã‚ˆã†ã«æœŸé–“ã®é•·ã„ã‚«ã‚¦ãƒ³ã‚¿ãƒ¼ã®åˆ©ç”¨ã¯ã‚ã¾ã‚Šã‚ªã‚¹ã‚¹ãƒ¡ã—ã¾ã›ã‚“ã€‚Redis ã£ã¦ãµã¨ã—ãŸæ‹å­ã«ãƒ‡ãƒ¼ã‚¿ãŒé£›ã‚“ã§ã—ã¾ã†å¯èƒ½æ€§ãŒã‚ã‚‹ã®ã§ã€ã‚ãã¾ã§ã‚­ãƒ£ãƒƒã‚·ãƒ¥çš„ãªä½ç½®ä»˜ã‘ã§åˆ©ç”¨ã™ã‚‹ã®ãŒè‰¯ã„ã¨æ€ã„ã¾ã™ã€‚daily_counter ã‚‚é€±æ¬¡ãƒ»æœˆæ¬¡ã§ RDS ã«é›†è¨ˆçµæœã‚’ä¿å­˜ã™ã‚‹é‹ç”¨ã‚’æƒ³å®šã—ã¦ã„ã¾ã™ã®ã§ã€‚ã¨ã„ã†ã‚ã‘ã§ä¹…ã€…ã®ãƒ–ãƒ­ã‚°æ›´æ–°ã§ã¯æ–°ã—ãä½œã£ãŸ redis-objects-daily-counter ã¨ã„ã† gem ã®ç´¹ä»‹ã‚’ã•ã›ã¦é ‚ãã¾ã—ãŸã€‚ã“ã‚Œã‹ã‚‰å¼Šç¤¾ãƒ—ãƒ­ãƒ€ã‚¯ãƒˆã§ã‚‚åˆ©ç”¨ã—ã¦ã„ãäºˆå®šã§ã™ã—ã€è‰²ã€…ãªã‚µãƒ¼ãƒ“ã‚¹ã§ã‚‚æ´»ç”¨é ‚ã‘ã‚‹ã¨å¬‰ã—ã„ã§ã™ã€‚","link":"https://ryz310.hateblo.jp/entry/2021/09/20/172054","isoDate":"2021-09-20T08:20:54.000Z","dateMiliSeconds":1632126054000,"imageUrl":"https://cdn-ak.f.st-hatena.com/images/fotolife/r/ryz310/20210920/20210920165304.png","authorName":"ryz310"},{"title":"è‡ªä½œã® gem ã®åå‰ã‚’è€ƒãˆã‚‹ã®ã¯é›£ã—ã„","content":"\u003ch2\u003eè‡ªä½œã® gem ã®åå‰ã‚’å¤‰ãˆãŸã„ã€‚\u003c/h2\u003e\n\n\u003cp\u003e\u003ccode\u003emy_api_client\u003c/code\u003e ã¨ã„ã†è‡ªä½œã® gem ãŒã‚ã‚Šã¾ã—ã¦ã€\u003ca href=\"https://ryz310.hateblo.jp/search?q=my_api_clien\"\u003eã“ã®ãƒ–ãƒ­ã‚°ã§ã¯ä½•åº¦ã‚‚ç´¹ä»‹ã—ã¦ã„ã‚‹\u003c/a\u003e ã‚“ã§ã™ãŒã€ãƒ‹ãƒƒãƒã™ãã‚‹ã®ã‹å®£ä¼ãŒä¸‹æ‰‹ã™ãã‚‹ã®ã‹ã€ä¸€å‘ã«ä½¿ã£ã¦ã¿ãŸã€ã¨ã„ã†å™‚ã‚’èãã¾ã›ã‚“ (Â´ãƒ»Ï‰ãƒ»ï½€)\u003c/p\u003e\n\n\u003cp\u003e\u003ciframe src=\"https://hatenablog-parts.com/embed?url=https%3A%2F%2Fgithub.com%2Fryz310%2Fmy_api_client\" title=\"ryz310/my_api_client\" class=\"embed-card embed-webcard\" scrolling=\"no\" frameborder=\"0\" style=\"display: block; width: 100%; height: 155px; max-width: 500px; margin: 10px 0px;\"\u003e\u003c/iframe\u003e\u003ccite class=\"hatena-citation\"\u003e\u003ca href=\"https://github.com/ryz310/my_api_client\"\u003egithub.com\u003c/a\u003e\u003c/cite\u003e\u003c/p\u003e\n\n\u003cp\u003eã¾ã‚å¼Šç¤¾ã®ãƒ—ãƒ­ãƒ€ã‚¯ãƒˆã®ä¸­ã§ã¯ã‚¬ãƒƒãƒ„ãƒªä½¿ã£ã¦ã‚‹ã‚“ã§åˆ¥ã«ãã‚Œã¯è‰¯ã„ã‚“ã§ã™ãŒã€ã‚‚ã†å°‘ã—ã¾ã¨ã‚‚ãªåå‰ã«ãªã‚‰ã‚“ã®ã‹ã­ã€ã¨ã„ã†ã‚³ãƒ¡ãƒ³ãƒˆã‚’é ‚ãã¾ã™ã€‚\nã„ã„æ©Ÿä¼šã ã—ã¡ã‚ƒã‚“ã¨è‰¯ã„åå‰ä»˜ã‘ã‚ˆã†ã¨æ€ã£ã¦è€ƒãˆã¾ã—ãŸã€‚ã©ã†ã›ãªã‚‰è‡ªåˆ†ãŒå¥½ããªã‚²ãƒ¼ãƒ ã‹ã‚‰ã„ã„åå‰ä»˜ã‘ãŸã„ãªã€ã¨æ€ã£ã¦ã€Luidaï¼ˆ\u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/%A5%EB%A5%A4%A1%BC%A5%C0\"\u003eãƒ«ã‚¤ãƒ¼ãƒ€\u003c/a\u003eï¼‰ã€ã¨ã„ã†åå‰ãŒæµ®ã‹ã³ã¾ã—ãŸã€‚\u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/%A5%C9%A5%E9%A5%AF%A5%A8\"\u003eãƒ‰ãƒ©ã‚¯ã‚¨\u003c/a\u003e III ã®ã‚ã‚Œã§ã™ã€‚\u003c/p\u003e\n\n\u003cp\u003e\u003cfigure class=\"figure-image figure-image-fotolife\" title=\"ã“ã“ã¯ãƒ«ã‚¤ãƒ¼ãƒ€ã®åº—\"\u003e\u003cspan itemscope itemtype=\"http://schema.org/Photograph\"\u003e\u003cimg src=\"https://cdn-ak.f.st-hatena.com/images/fotolife/r/ryz310/20201004/20201004001621.jpg\" alt=\"f:id:ryz310:20201004001621j:plain:w300\" title=\"\" class=\"hatena-fotolife\" style=\"width:300px\" itemprop=\"image\"\u003e\u003c/span\u003e\u003cfigcaption\u003eã“ã“ã¯\u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/%A5%EB%A5%A4%A1%BC%A5%C0\"\u003eãƒ«ã‚¤ãƒ¼ãƒ€\u003c/a\u003eã®åº—ã€‚æ—…äººãŸã¡ãŒä»²é–“ã‚’æ±‚ã‚ã¦ã‚ã¤ã¾ã‚‹å‡ºä¼šã„ã¨åˆ¥ã‚Œã®é…’å ´ã‚ˆã€‚\u003c/figcaption\u003e\u003c/figure\u003e\u003c/p\u003e\n\n\u003cp\u003e\u003ccode\u003emy_api_client\u003c/code\u003e ã¯ \u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/API\"\u003eAPI\u003c/a\u003e Client ã‚’ç°¡å˜ã«ä½œã£ãŸã‚Šãƒ†ã‚¹ãƒˆã—ãŸã‚Šã™ã‚‹ãŸã‚ã® gem ãªã®ã§ã€\u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/%CB%C1%B8%B1%BC%D4\"\u003eå†’é™ºè€…\u003c/a\u003eã‚’ç™»éŒ²ã—ã¦ä¸€ç·’ã«æ—…ã™ã‚‹\u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/%A5%EB%A5%A4%A1%BC%A5%C0\"\u003eãƒ«ã‚¤ãƒ¼ãƒ€\u003c/a\u003eã®åº—ã®ã‚¤ãƒ¡ãƒ¼ã‚¸ãŒãƒ”ãƒƒã‚¿ãƒªã ãªãƒ¼ã¨æ€ã£ãŸã‚“ã§ã™ã‚ˆã­ã€‚ã¨ã¯ã„ãˆ gem ã®åå‰ã‚’å¤‰ãˆã‚‹ã®ã£ã¦é¢å€’ã ã—ãã®ã†ã¡ã‚„ã‚ã†ã€ã£ã¦æ€ã£ã¦ãŸã‚‰åŠå¹´ãã‚‰ã„çµŒã£ã¡ã‚ƒã„ã¾ã—ãŸã‘ã©ã­ã€‚ä¸Šã®\u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/%A5%EB%A5%A4%A1%BC%A5%C0\"\u003eãƒ«ã‚¤ãƒ¼ãƒ€\u003c/a\u003eã®åº—ã®ç”»åƒã£ã¦ã‚ã–ã‚ã– \u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/iPhone\"\u003eiPhone\u003c/a\u003e ç‰ˆã®\u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/%A5%C9%A5%E9%A5%AF%A5%A8III\"\u003eãƒ‰ãƒ©ã‚¯ã‚¨III\u003c/a\u003e è²·ã£ã¦ã‚¹ã‚¯ã‚·ãƒ§æ’®ã£ãŸã‚“ã§ã™ãŒã€ãã®æ—¥ä»˜ãŒ 2020/10/04 ã§ã—ãŸ ğŸ˜‡\u003c/p\u003e\n\n\u003cp\u003eå¤šåˆ†ãã®ã†ã¡ã‚„ã‚Šã¾ã™ï¼ˆãƒ•ãƒ©ã‚°ï¼‰\u003c/p\u003e\n\n\u003ch2\u003emy_\u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/api\"\u003eapi\u003c/a\u003e_client v0.20.0 ã‚’ãƒªãƒªãƒ¼ã‚¹ã—ã¾ã—ãŸ ğŸš€\u003c/h2\u003e\n\n\u003cp\u003egem ã®åå‰ã¯å¤‰ã‚ã‚‰ãªã„ã‘ã©ã‚¢ãƒƒãƒ—ãƒ‡ãƒ¼ãƒˆã¯ã•ã‚Œã¦ã„ãã€‚\u003c/p\u003e\n\n\u003cp\u003e\u003ciframe src=\"https://hatenablog-parts.com/embed?url=https%3A%2F%2Fgithub.com%2Fryz310%2Fmy_api_client%2Freleases%2Ftag%2Fv0.20.0\" title=\"Release v0.20.0 (Mar 07, 2021) Â· ryz310/my_api_client\" class=\"embed-card embed-webcard\" scrolling=\"no\" frameborder=\"0\" style=\"display: block; width: 100%; height: 155px; max-width: 500px; margin: 10px 0px;\"\u003e\u003c/iframe\u003e\u003ccite class=\"hatena-citation\"\u003e\u003ca href=\"https://github.com/ryz310/my_api_client/releases/tag/v0.20.0\"\u003egithub.com\u003c/a\u003e\u003c/cite\u003e\u003c/p\u003e\n\n\u003cp\u003eå…ƒã€… \u003ccode\u003emy_api_client\u003c/code\u003e ã«ã¯ \u003ccode\u003e#pageable_get\u003c/code\u003e (alias: \u003ccode\u003e#pget\u003c/code\u003e) ã¨ã„ã†ãƒ¡ã‚½ãƒƒãƒ‰ãŒã‚ã‚Šã€\u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/REST%20API\"\u003eREST API\u003c/a\u003e ã®ãƒ¬ã‚¹ãƒãƒ³ã‚¹ \u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/JSON\"\u003eJSON\u003c/a\u003e ã«å«ã¾ã‚Œã‚‹ URL ã‚’é †ã«è¾¿ã£ã¦ãƒªã‚¯\u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/%A5%A8%A5%B9\"\u003eã‚¨ã‚¹\u003c/a\u003eãƒˆã™ã‚‹ \u003ccode\u003eEnumerator\u003c/code\u003e ã‚’å–å¾—ã™ã‚‹ã“ã¨ãŒå‡ºæ¥ã¾ã™ã€‚æ©Ÿèƒ½è‡ªä½“ã¯å®Ÿç›¸ã—ã¦ãƒ†ã‚¹ãƒˆã‚‚ã—ã¦ã‚ã‚‹ã‚‚ã®ã®ã€å®Ÿéš›ã®ãƒ—ãƒ­ãƒ€ã‚¯ãƒˆã§ä½¿ã†æ©Ÿä¼šãŒãªãé•·ã„ã“ã¨æ—¥ã®ç›®ã‚’è¦‹ãªã‹ã£ãŸã‚“ã§ã™ãŒã€ã“ã®åº¦ã¤ã„ã«å¼Šãƒ—ãƒ­ãƒ€ã‚¯ãƒˆã§åˆ©ç”¨ã™ã‚‹æ©Ÿä¼šãŒè¨ªã‚ŒãŸã®ã§ãƒãƒ¼ãƒ ã®ã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢ã«ä½¿ã£ã¦ã‚‚ã‚‰ã£ã¦ã‚‹ã‚“ã§ã™ãŒã€ \u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/RSpec\"\u003eRSpec\u003c/a\u003e ã‚’æ›¸ãéš›ã®ã‚¹ã‚¿ãƒ–åŒ–ãŒç‰¹ã«ã‚µãƒãƒ¼ãƒˆã•ã‚Œã¦ã„ãªãã¦ãƒ†ã‚¹ãƒˆã—ã¥ã‚‰ã„å•é¡ŒãŒã‚ã‚Šã¾ã—ãŸã€‚\u003c/p\u003e\n\n\u003cp\u003eä»Šå›ã®ã‚¢ãƒƒãƒ—ãƒ‡ãƒ¼ãƒˆã§ã¯ã€ã“ã® \u003ccode\u003e#pageable_get\u003c/code\u003e ã«å¯¾å¿œã™ã‚‹ã‚¹ã‚¿ãƒ–åŒ–ã‚’ã‚µãƒãƒ¼ãƒˆã—ã¦ã„ã¾ã™ã€‚ \u003ca href=\"https://github.com/ryz310/my_api_client/blob/master/README.jp.md#pageable-option\"\u003eè©³ã—ã„è§£èª¬ã¯ README.jp.md ã«ã‚‚æ›¸ã„ãŸ\u003c/a\u003e ã‚“ã§ã™ãŒã€ã›ã£ã‹ããªã®ã§ãƒ–ãƒ­ã‚°ã«ã‚‚è»¢è¨˜ã—ã¦ãŠãã¾ã™ã€‚ã¾ã‚æ–‡ç« ã§èª¬æ˜ã•ã‚Œã¦ã‚‚å®Ÿéš›ã«ä½¿ã£ã¦ã¿ãªã„ã¨ãƒ”ãƒ³ã¨æ¥ãªã„ã®ã¯ã‚ã‹ã£ã¦ã¾ã™ã‘ã©ã­ã€‚ã€‚ã€‚\u003c/p\u003e\n\n\u003chr /\u003e\n\n\u003cp\u003e\u003ccode\u003e#pageable_get\u003c/code\u003e  (\u003ccode\u003e#pget\u003c/code\u003e) ã‚’ä½¿ã£ãŸå®Ÿè£…ç”¨ã« \u003ccode\u003epageable\u003c/code\u003e ã¨ã„ã†ã‚ªãƒ—ã‚·ãƒ§ãƒ³ãŒåˆ©ç”¨ã§ãã¾ã™ã€‚\n\u003ccode\u003epageable\u003c/code\u003e ã«è¨­å®šã™ã‚‹å€¤ã¯ \u003ccode\u003eEnumerable\u003c/code\u003e ã§ã‚ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚\u003c/p\u003e\n\n\u003cpre class=\"code lang-ruby\" data-lang=\"ruby\" data-unlink\u003estub_api_client_all(\n  \u003cspan class=\"synType\"\u003eMyPaginationApiClient\u003c/span\u003e,\n  \u003cspan class=\"synConstant\"\u003epagination\u003c/span\u003e: {\n    \u003cspan class=\"synConstant\"\u003epageable\u003c/span\u003e: [\n      { \u003cspan class=\"synConstant\"\u003epage\u003c/span\u003e: \u003cspan class=\"synConstant\"\u003e1\u003c/span\u003e },\n      { \u003cspan class=\"synConstant\"\u003epage\u003c/span\u003e: \u003cspan class=\"synConstant\"\u003e2\u003c/span\u003e },\n      { \u003cspan class=\"synConstant\"\u003epage\u003c/span\u003e: \u003cspan class=\"synConstant\"\u003e3\u003c/span\u003e },\n    ],\n  }\n)\n\n\u003cspan class=\"synType\"\u003eMyPaginationApiClient\u003c/span\u003e.new.pagination.each \u003cspan class=\"synStatement\"\u003edo\u003c/span\u003e |\u003cspan class=\"synIdentifier\"\u003eresponse\u003c/span\u003e|\n  response.page \u003cspan class=\"synComment\"\u003e#=\u0026gt; 1, 2, 3\u003c/span\u003e\n\u003cspan class=\"synStatement\"\u003eend\u003c/span\u003e\n\u003c/pre\u003e\n\n\n\u003cp\u003eãªãŠã€ \u003ccode\u003eEnumerable\u003c/code\u003e ã®å„å€¤ã«ã¯ã“ã“ã¾ã§ç´¹ä»‹ã—ãŸ \u003ccode\u003eresponse\u003c/code\u003e, \u003ccode\u003eraise\u003c/code\u003e, \u003ccode\u003eProc\u003c/code\u003e ãªã©å…¨ã¦ã®ã‚ªãƒ—ã‚·ãƒ§ãƒ³ãŒåˆ©ç”¨å¯èƒ½ã§ã™ã€‚\u003c/p\u003e\n\n\u003cpre class=\"code lang-ruby\" data-lang=\"ruby\" data-unlink\u003estub_api_client_all(\n  \u003cspan class=\"synType\"\u003eMyPaginationApiClient\u003c/span\u003e,\n  \u003cspan class=\"synConstant\"\u003epagination\u003c/span\u003e: {\n    \u003cspan class=\"synConstant\"\u003epageable\u003c/span\u003e: [\n      { \u003cspan class=\"synConstant\"\u003eresponse\u003c/span\u003e: { \u003cspan class=\"synConstant\"\u003epage\u003c/span\u003e: \u003cspan class=\"synConstant\"\u003e1\u003c/span\u003e } },\n      { \u003cspan class=\"synConstant\"\u003epage\u003c/span\u003e: \u003cspan class=\"synConstant\"\u003e2\u003c/span\u003e },\n      -\u0026gt;(params) { { \u003cspan class=\"synConstant\"\u003epage\u003c/span\u003e: \u003cspan class=\"synConstant\"\u003e3\u003c/span\u003e, \u003cspan class=\"synConstant\"\u003euser_id\u003c/span\u003e: params[\u003cspan class=\"synConstant\"\u003e:user_id\u003c/span\u003e] } },\n      { \u003cspan class=\"synConstant\"\u003eraise\u003c/span\u003e: \u003cspan class=\"synType\"\u003eMyApiClient\u003c/span\u003e::\u003cspan class=\"synType\"\u003eClientError\u003c/span\u003e::\u003cspan class=\"synType\"\u003eIamTeapot\u003c/span\u003e },\n    ],\n  }\n)\n\u003c/pre\u003e\n\n\n\u003cp\u003eã¾ãŸã€ \u003ccode\u003eEnumerator\u003c/code\u003e ã‚’ä½¿ãˆã°ç„¡é™ã«ç¶šããƒšãƒ¼ã‚¸ãƒãƒ¼ã‚·ãƒ§ãƒ³ã‚’å®šç¾©ã™ã‚‹ã“ã¨ã‚‚ã§ãã¾ã™ã€‚\u003c/p\u003e\n\n\u003cpre class=\"code lang-ruby\" data-lang=\"ruby\" data-unlink\u003estub_api_client_all(\n  \u003cspan class=\"synType\"\u003eMyPaginationApiClient\u003c/span\u003e,\n  \u003cspan class=\"synConstant\"\u003epagination\u003c/span\u003e: {\n    \u003cspan class=\"synConstant\"\u003epageable\u003c/span\u003e: \u003cspan class=\"synType\"\u003eEnumerator\u003c/span\u003e.new \u003cspan class=\"synStatement\"\u003edo\u003c/span\u003e |\u003cspan class=\"synIdentifier\"\u003ey\u003c/span\u003e|\n      \u003cspan class=\"synStatement\"\u003eloop\u003c/span\u003e.with_index(\u003cspan class=\"synConstant\"\u003e1\u003c/span\u003e) \u003cspan class=\"synStatement\"\u003edo\u003c/span\u003e |\u003cspan class=\"synIdentifier\"\u003e_\u003c/span\u003e, \u003cspan class=\"synIdentifier\"\u003ei\u003c/span\u003e|\n        y \u0026lt;\u0026lt; { \u003cspan class=\"synConstant\"\u003epage\u003c/span\u003e: i }\n      \u003cspan class=\"synStatement\"\u003eend\u003c/span\u003e\n    \u003cspan class=\"synStatement\"\u003eend\u003c/span\u003e,\n  }\n)\n\u003c/pre\u003e\n\n","contentSnippet":"è‡ªä½œã® gem ã®åå‰ã‚’å¤‰ãˆãŸã„ã€‚my_api_client ã¨ã„ã†è‡ªä½œã® gem ãŒã‚ã‚Šã¾ã—ã¦ã€ã“ã®ãƒ–ãƒ­ã‚°ã§ã¯ä½•åº¦ã‚‚ç´¹ä»‹ã—ã¦ã„ã‚‹ ã‚“ã§ã™ãŒã€ãƒ‹ãƒƒãƒã™ãã‚‹ã®ã‹å®£ä¼ãŒä¸‹æ‰‹ã™ãã‚‹ã®ã‹ã€ä¸€å‘ã«ä½¿ã£ã¦ã¿ãŸã€ã¨ã„ã†å™‚ã‚’èãã¾ã›ã‚“ (Â´ãƒ»Ï‰ãƒ»ï½€)github.comã¾ã‚å¼Šç¤¾ã®ãƒ—ãƒ­ãƒ€ã‚¯ãƒˆã®ä¸­ã§ã¯ã‚¬ãƒƒãƒ„ãƒªä½¿ã£ã¦ã‚‹ã‚“ã§åˆ¥ã«ãã‚Œã¯è‰¯ã„ã‚“ã§ã™ãŒã€ã‚‚ã†å°‘ã—ã¾ã¨ã‚‚ãªåå‰ã«ãªã‚‰ã‚“ã®ã‹ã­ã€ã¨ã„ã†ã‚³ãƒ¡ãƒ³ãƒˆã‚’é ‚ãã¾ã™ã€‚ã„ã„æ©Ÿä¼šã ã—ã¡ã‚ƒã‚“ã¨è‰¯ã„åå‰ä»˜ã‘ã‚ˆã†ã¨æ€ã£ã¦è€ƒãˆã¾ã—ãŸã€‚ã©ã†ã›ãªã‚‰è‡ªåˆ†ãŒå¥½ããªã‚²ãƒ¼ãƒ ã‹ã‚‰ã„ã„åå‰ä»˜ã‘ãŸã„ãªã€ã¨æ€ã£ã¦ã€Luidaï¼ˆãƒ«ã‚¤ãƒ¼ãƒ€ï¼‰ã€ã¨ã„ã†åå‰ãŒæµ®ã‹ã³ã¾ã—ãŸã€‚ãƒ‰ãƒ©ã‚¯ã‚¨ III ã®ã‚ã‚Œã§ã™ã€‚ã“ã“ã¯ãƒ«ã‚¤ãƒ¼ãƒ€ã®åº—ã€‚æ—…äººãŸã¡ãŒä»²é–“ã‚’æ±‚ã‚ã¦ã‚ã¤ã¾ã‚‹å‡ºä¼šã„ã¨åˆ¥ã‚Œã®é…’å ´ã‚ˆã€‚my_api_client ã¯ API Client ã‚’ç°¡å˜ã«ä½œã£ãŸã‚Šãƒ†ã‚¹ãƒˆã—ãŸã‚Šã™ã‚‹ãŸã‚ã® gem ãªã®ã§ã€å†’é™ºè€…ã‚’ç™»éŒ²ã—ã¦ä¸€ç·’ã«æ—…ã™ã‚‹ãƒ«ã‚¤ãƒ¼ãƒ€ã®åº—ã®ã‚¤ãƒ¡ãƒ¼ã‚¸ãŒãƒ”ãƒƒã‚¿ãƒªã ãªãƒ¼ã¨æ€ã£ãŸã‚“ã§ã™ã‚ˆã­ã€‚ã¨ã¯ã„ãˆ gem ã®åå‰ã‚’å¤‰ãˆã‚‹ã®ã£ã¦é¢å€’ã ã—ãã®ã†ã¡ã‚„ã‚ã†ã€ã£ã¦æ€ã£ã¦ãŸã‚‰åŠå¹´ãã‚‰ã„çµŒã£ã¡ã‚ƒã„ã¾ã—ãŸã‘ã©ã­ã€‚ä¸Šã®ãƒ«ã‚¤ãƒ¼ãƒ€ã®åº—ã®ç”»åƒã£ã¦ã‚ã–ã‚ã– iPhone ç‰ˆã®ãƒ‰ãƒ©ã‚¯ã‚¨III è²·ã£ã¦ã‚¹ã‚¯ã‚·ãƒ§æ’®ã£ãŸã‚“ã§ã™ãŒã€ãã®æ—¥ä»˜ãŒ 2020/10/04 ã§ã—ãŸ ğŸ˜‡å¤šåˆ†ãã®ã†ã¡ã‚„ã‚Šã¾ã™ï¼ˆãƒ•ãƒ©ã‚°ï¼‰my_api_client v0.20.0 ã‚’ãƒªãƒªãƒ¼ã‚¹ã—ã¾ã—ãŸ ğŸš€gem ã®åå‰ã¯å¤‰ã‚ã‚‰ãªã„ã‘ã©ã‚¢ãƒƒãƒ—ãƒ‡ãƒ¼ãƒˆã¯ã•ã‚Œã¦ã„ãã€‚github.comå…ƒã€… my_api_client ã«ã¯ #pageable_get (alias: #pget) ã¨ã„ã†ãƒ¡ã‚½ãƒƒãƒ‰ãŒã‚ã‚Šã€REST API ã®ãƒ¬ã‚¹ãƒãƒ³ã‚¹ JSON ã«å«ã¾ã‚Œã‚‹ URL ã‚’é †ã«è¾¿ã£ã¦ãƒªã‚¯ã‚¨ã‚¹ãƒˆã™ã‚‹ Enumerator ã‚’å–å¾—ã™ã‚‹ã“ã¨ãŒå‡ºæ¥ã¾ã™ã€‚æ©Ÿèƒ½è‡ªä½“ã¯å®Ÿç›¸ã—ã¦ãƒ†ã‚¹ãƒˆã‚‚ã—ã¦ã‚ã‚‹ã‚‚ã®ã®ã€å®Ÿéš›ã®ãƒ—ãƒ­ãƒ€ã‚¯ãƒˆã§ä½¿ã†æ©Ÿä¼šãŒãªãé•·ã„ã“ã¨æ—¥ã®ç›®ã‚’è¦‹ãªã‹ã£ãŸã‚“ã§ã™ãŒã€ã“ã®åº¦ã¤ã„ã«å¼Šãƒ—ãƒ­ãƒ€ã‚¯ãƒˆã§åˆ©ç”¨ã™ã‚‹æ©Ÿä¼šãŒè¨ªã‚ŒãŸã®ã§ãƒãƒ¼ãƒ ã®ã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢ã«ä½¿ã£ã¦ã‚‚ã‚‰ã£ã¦ã‚‹ã‚“ã§ã™ãŒã€ RSpec ã‚’æ›¸ãéš›ã®ã‚¹ã‚¿ãƒ–åŒ–ãŒç‰¹ã«ã‚µãƒãƒ¼ãƒˆã•ã‚Œã¦ã„ãªãã¦ãƒ†ã‚¹ãƒˆã—ã¥ã‚‰ã„å•é¡ŒãŒã‚ã‚Šã¾ã—ãŸã€‚ä»Šå›ã®ã‚¢ãƒƒãƒ—ãƒ‡ãƒ¼ãƒˆã§ã¯ã€ã“ã® #pageable_get ã«å¯¾å¿œã™ã‚‹ã‚¹ã‚¿ãƒ–åŒ–ã‚’ã‚µãƒãƒ¼ãƒˆã—ã¦ã„ã¾ã™ã€‚ è©³ã—ã„è§£èª¬ã¯ README.jp.md ã«ã‚‚æ›¸ã„ãŸ ã‚“ã§ã™ãŒã€ã›ã£ã‹ããªã®ã§ãƒ–ãƒ­ã‚°ã«ã‚‚è»¢è¨˜ã—ã¦ãŠãã¾ã™ã€‚ã¾ã‚æ–‡ç« ã§èª¬æ˜ã•ã‚Œã¦ã‚‚å®Ÿéš›ã«ä½¿ã£ã¦ã¿ãªã„ã¨ãƒ”ãƒ³ã¨æ¥ãªã„ã®ã¯ã‚ã‹ã£ã¦ã¾ã™ã‘ã©ã­ã€‚ã€‚ã€‚#pageable_get  (#pget) ã‚’ä½¿ã£ãŸå®Ÿè£…ç”¨ã« pageable ã¨ã„ã†ã‚ªãƒ—ã‚·ãƒ§ãƒ³ãŒåˆ©ç”¨ã§ãã¾ã™ã€‚pageable ã«è¨­å®šã™ã‚‹å€¤ã¯ Enumerable ã§ã‚ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚stub_api_client_all(  MyPaginationApiClient,  pagination: {    pageable: [      { page: 1 },      { page: 2 },      { page: 3 },    ],  })MyPaginationApiClient.new.pagination.each do |response|  response.page #=\u003e 1, 2, 3endãªãŠã€ Enumerable ã®å„å€¤ã«ã¯ã“ã“ã¾ã§ç´¹ä»‹ã—ãŸ response, raise, Proc ãªã©å…¨ã¦ã®ã‚ªãƒ—ã‚·ãƒ§ãƒ³ãŒåˆ©ç”¨å¯èƒ½ã§ã™ã€‚stub_api_client_all(  MyPaginationApiClient,  pagination: {    pageable: [      { response: { page: 1 } },      { page: 2 },      -\u003e(params) { { page: 3, user_id: params[:user_id] } },      { raise: MyApiClient::ClientError::IamTeapot },    ],  })ã¾ãŸã€ Enumerator ã‚’ä½¿ãˆã°ç„¡é™ã«ç¶šããƒšãƒ¼ã‚¸ãƒãƒ¼ã‚·ãƒ§ãƒ³ã‚’å®šç¾©ã™ã‚‹ã“ã¨ã‚‚ã§ãã¾ã™ã€‚stub_api_client_all(  MyPaginationApiClient,  pagination: {    pageable: Enumerator.new do |y|      loop.with_index(1) do |_, i|        y \u003c\u003c { page: i }      end    end,  })","link":"https://ryz310.hateblo.jp/entry/2021/03/07/202519","isoDate":"2021-03-07T11:25:19.000Z","dateMiliSeconds":1615116319000,"imageUrl":"https://cdn-ak.f.st-hatena.com/images/fotolife/r/ryz310/20201004/20201004001621.jpg","authorName":"ryz310"},{"title":"ActiveJob ã® retry_on ã« jitter ã¨ã„ã†ã‚ªãƒ—ã‚·ãƒ§ãƒ³ãŒã‚ã‚‹ã®çŸ¥ã£ã¦ã¾ã™ã‹ï¼Ÿ","content":"\u003cp\u003eåƒ•ã¯çŸ¥ã‚‰ãªã‹ã£ãŸã§ã™ (ãƒ»âˆ€ãƒ»)\u003c/p\u003e\n\n\u003cblockquote class=\"twitter-tweet\"\u003e\u003cp lang=\"ja\" dir=\"ltr\"\u003e\u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/Rails\"\u003eRails\u003c/a\u003e ã§ ActiveJob ã® retry_on ãŒåŒæ™‚ã«ç™ºç«ã•ã‚Œã‚‹ã®ä½•ã¨ã‹ã—ãŸã„ãªãƒ¼ã¨æ€ã£ã¦èª¿ã¹ã¦ãŸã‚‰ã€\u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/Rails\"\u003eRails\u003c/a\u003e 6 ã‹ã‚‰ã¯ jitter ã¨ã„ã†ã‚ªãƒ—ã‚·ãƒ§ãƒ³ãŒæŒ‡å®šã§ãã‚‹ã‚ˆã†ã«ãªã£ã¦ã¦ã€ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã§ãƒªãƒˆãƒ©ã‚¤é–“éš”ã‚’ 15% ãƒ©ãƒ³ãƒ€ãƒã‚¤ã‚ºã—ã¦ãã‚Œã‚‹ã¨ã®äº‹ã€‚Rate Limit ã®å›é¿ã¨ã‹ã§ä¾¿åˆ©ã€‚ \u003ca href=\"https://t.co/kpIx6YVFEq\"\u003ehttps://t.co/kpIx6YVFEq\u003c/a\u003e\u003c/p\u003e\u0026mdash; ã‚µãƒˆã‚¦ãƒªãƒ§ã‚¦ã‚¹ã‚± (@ryosuke_sato) \u003ca href=\"https://twitter.com/ryosuke_sato/status/1365707024357466115?ref_src=twsrc%5Etfw\"\u003eFebruary 27, 2021\u003c/a\u003e\u003c/blockquote\u003e\n\n\n\u003cp\u003e \u003cscript async src=\"https://platform.twitter.com/widgets.js\" charset=\"utf-8\"\u003e\u003c/script\u003e\u003c/p\u003e\n\n\u003ch2\u003ejitter ã¨ã¯\u003c/h2\u003e\n\n\u003cp\u003e\u003ca href=\"https://github.com/rails/rails/blob/5aaaa1630a/activejob/CHANGELOG.md#rails-610-december-09-2020\"\u003eRails 6.1 ã‹ã‚‰è¿½åŠ ã•ã‚ŒãŸã‚ªãƒ—ã‚·ãƒ§ãƒ³\u003c/a\u003e ã§ã€ \u003ccode\u003eretry_on\u003c/code\u003e ã®å¾…ã¡æ™‚é–“ã«å¯¾ã—ã¦ä»»æ„ã®å‰²åˆã§ãƒãƒ©ã‘ã•ã›ã¦ãã‚Œã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã™ï¼ˆãƒ‡ãƒ•ã‚©ãƒ«ãƒˆ 15% ï¼‰ã€‚\u003c/p\u003e\n\n\u003cblockquote\u003e\u003cp\u003e\u003ca href=\"https://edgeapi.rubyonrails.org/classes/ActiveJob/Exceptions/ClassMethods.html#method-i-retry_on\"\u003eActiveJob::Exceptions::ClassMethods - retry_on\u003c/a\u003e\u003c/p\u003e\n\n\u003cp\u003e\u003ccode\u003e:jitter\u003c/code\u003e - A random delay of wait time used when calculating backoff. The default is 15% (0.15) which represents the upper bound of possible wait time (expressed as a percentage)\u003c/p\u003e\u003c/blockquote\u003e\n\n\u003ch3\u003eå®Ÿè£…ã‚’ç¢ºèªã—ã¦ã¿ãŸ\u003c/h3\u003e\n\n\u003cp\u003eã“ã®ãƒãƒ©ã‘ã•ã›æ–¹ãŒå¾…ã¡æ™‚é–“ã«å¯¾ã—ã¦å¢—ãˆã‚‹ã®ã‹æ¸›ã‚‹ã®ã‹ãŒæ°—ã«ãªã£ã¦å®Ÿè£…ã‚’è¦‹ã¦ã¿ã¾ã—ãŸã€‚å¢—ãˆã‚‹æ–¹å‘ã§ãƒãƒ©ã‘ã‚‹ã‚ˆã†ã§ã™ã€‚\nä¾‹ãˆã° \u003ccode\u003ewait: 60.seconds\u003c/code\u003e ã§ \u003ccode\u003ejitter: 0.5\u003c/code\u003e ã®å ´åˆã ã¨ã€æœ€å¤§ \u003ccode\u003e90\u003c/code\u003e ç§’ã®å¾…ã¡æ™‚é–“ã¨ãªã‚Šã¾ã™ã€‚\u003c/p\u003e\n\n\u003cp\u003eã†ã£ã‹ã‚Š \u003ccode\u003e100.0\u003c/code\u003e ã¨ã‹æŒ‡å®šã™ã‚‹ã¨æœ€å¤§ 10000% å¾…ã¡æ™‚é–“ãŒåŠ ç®—ã•ã‚Œã¡ã‚ƒã„ãã†ã§ã™ã€‚\né–“é•ãˆã¦æŒ‡å®šã—ãªã„ã‚ˆã†ã«ã”æ³¨æ„ä¸‹ã•ã„ğŸ™\u003c/p\u003e\n\n\u003cpre class=\"code rb\" data-lang=\"rb\" data-unlink\u003edelay = seconds_or_duration_or_algorithm.to_i\ndelay_jitter = determine_jitter_for_delay(delay, jitter)\ndelay + delay_jitter\u003c/pre\u003e\n\n\n\u003cp\u003eğŸ“ jitter ã®è¨ˆç®—å‡¦ç†ã¯ \u003ca href=\"https://github.com/rails/rails/blob/35e9812dfcb030d4c986532e7672ad8f8f95286f/activejob/lib/active_job/exceptions.rb#L132-L155\"\u003eã“ã®ã‚ãŸã‚Š\u003c/a\u003e\u003c/p\u003e\n\n\u003ch3\u003eã©ã†ã„ã†å ´é¢ã§ä½¿ã†ã®ï¼Ÿ\u003c/h3\u003e\n\n\u003cp\u003eã“ã®æ©Ÿèƒ½ãŒç„¡ã‹ã£ãŸå¾“æ¥ã ã¨ã€ãƒªãƒˆãƒ©ã‚¤å‡¦ç†ãŒä¸€æ–‰ã«èµ·å‹•ã—ã¦ã—ã¾ã†ã¨ã„ã†å•é¡ŒãŒã‚ã‚Šã¾ã—ãŸã€‚\u003c/p\u003e\n\n\u003cp\u003eä¾‹ãˆã°å¤–éƒ¨ã®ã‚µãƒ¼ãƒ“ã‚¹ã« \u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/API\"\u003eAPI\u003c/a\u003e ãƒªã‚¯\u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/%A5%A8%A5%B9\"\u003eã‚¨ã‚¹\u003c/a\u003eãƒˆã™ã‚‹ã‚ˆã†ãª Job ã‚’ä½œã£ãŸã¨ã—ã¾ã™ã€‚\u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/API\"\u003eAPI\u003c/a\u003e Rate Limit è¶…éã®ä¾‹å¤–ã‚’ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°ã—ã¦ã€ \u003ccode\u003eretry_on\u003c/code\u003e ã§ N åˆ†å¾Œã«ãƒªãƒˆãƒ©ã‚¤ã™ã‚‹ã‚ˆã†ã«å®Ÿè£…ã—ã¾ã™ã€‚\nã“ã®æ™‚ã€ 1000 ä»¶ã® Job ãŒåŒæ™‚ã«å®Ÿè¡Œã•ã‚Œ 900 ä»¶ãŒ Rate Limit è¶…éã¨ãªã£ãŸå ´åˆã€N åˆ†å¾Œã« 900 ä»¶ã® Job ãŒä¸€æ–‰ã«ãƒªãƒˆãƒ©ã‚¤ã•ã‚Œã¦ã—ã¾ã„ã€å†ã³ 800 ä»¶ãŒã‚¨ãƒ©ãƒ¼ã¨ãªã£ã¦ã—ã¾ã†ã€‚\nã“ã‚ŒãŒä½•åº¦ã‚‚ç¹°ã‚Šè¿”ã•ã‚Œã‚‹ã€ã¨ã„ã†ç¾è±¡ãŒèµ·ã“ã£ã¦ã¾ã—ãŸã€‚\u003c/p\u003e\n\n\u003ch3\u003e\u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/Rails\"\u003eRails\u003c/a\u003e 6.1 ä»¥å‰ã ã¨å›é¿ã§ããªã„ã®ï¼Ÿ\u003c/h3\u003e\n\n\u003cp\u003eå¾“æ¥ã® ActiveJob ã§ã‚‚ä¸€å¿œå›é¿ç­–ã¯ã‚ã£ã¦ã€ \u003ccode\u003ewait\u003c/code\u003e ã« \u003ccode\u003eProc\u003c/code\u003e ã‚’ä¸ãˆã¦ãƒ©ãƒ³ãƒ€ãƒ ãªå¾…ã¡æ™‚é–“ã‚’è¿”ã™ã‚ˆã†ãªå‡¦ç†ã‚’æ›¸ãã“ã¨ã§ä¼¼ãŸã‚ˆã†ãªå‹•ä½œã¯å¯èƒ½ã§ã™ã€‚\u003c/p\u003e\n\n\u003cpre class=\"code rb\" data-lang=\"rb\" data-unlink\u003eretry_on SomeError, wait: -\u0026gt; { rand(60..90).seconds }\u003c/pre\u003e\n\n\n\u003ch2\u003e\u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/iPad\"\u003eiPad\u003c/a\u003e \u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/Air\"\u003eAir\u003c/a\u003e (ç¬¬4ä¸–ä»£) è²·ã£ã¡ã‚ƒã£ãŸ\u003c/h2\u003e\n\n\u003cp\u003e\u003cfigure class=\"figure-image figure-image-fotolife\" title=\"iPad Air (ç¬¬4ä¸–ä»£)\"\u003e\u003cspan itemscope itemtype=\"http://schema.org/Photograph\"\u003e\u003cimg src=\"https://cdn-ak.f.st-hatena.com/images/fotolife/r/ryz310/20210302/20210302102542.jpg\" alt=\"f:id:ryz310:20210302102542j:plain\" title=\"\" class=\"hatena-fotolife\" itemprop=\"image\"\u003e\u003c/span\u003e\u003cfigcaption\u003e\u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/iPad\"\u003eiPad\u003c/a\u003e \u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/Air\"\u003eAir\u003c/a\u003e (ç¬¬4ä¸–ä»£)\u003c/figcaption\u003e\u003c/figure\u003e\u003c/p\u003e\n\n\u003cp\u003eè¿‘æ—¥ä¸­ã« \u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/iPad\"\u003eiPad\u003c/a\u003e Pro ã®æ–°å‹ãŒå‡ºã‚‹ã¨ã®å™‚ãŒã‚ã‚‹ãŒã€è»½ã„ \u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/Air\"\u003eAir\u003c/a\u003e ãŒã»ã—ã‹ã£ãŸã®ã§å•é¡Œ ğŸ† ï¼ˆçŸ¥ã‚‰ãªã‹ã£ãŸã‘ã©ã­ï¼‰\u003c/p\u003e\n\n\u003cp\u003eğŸ”— \u003ca href=\"https://iphone-mania.jp/news-350190/\"\u003eæ–°å‹iPad Proæ­è¼‰A14X/A14Zãƒãƒƒãƒ—ã®å‡¦ç†èƒ½åŠ›ã¯M1ãƒãƒƒãƒ—ã«åŒ¹æ•µã‹ - iPhone Mania\u003c/a\u003e\u003c/p\u003e\n","contentSnippet":"åƒ•ã¯çŸ¥ã‚‰ãªã‹ã£ãŸã§ã™ (ãƒ»âˆ€ãƒ»)Rails ã§ ActiveJob ã® retry_on ãŒåŒæ™‚ã«ç™ºç«ã•ã‚Œã‚‹ã®ä½•ã¨ã‹ã—ãŸã„ãªãƒ¼ã¨æ€ã£ã¦èª¿ã¹ã¦ãŸã‚‰ã€Rails 6 ã‹ã‚‰ã¯ jitter ã¨ã„ã†ã‚ªãƒ—ã‚·ãƒ§ãƒ³ãŒæŒ‡å®šã§ãã‚‹ã‚ˆã†ã«ãªã£ã¦ã¦ã€ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã§ãƒªãƒˆãƒ©ã‚¤é–“éš”ã‚’ 15% ãƒ©ãƒ³ãƒ€ãƒã‚¤ã‚ºã—ã¦ãã‚Œã‚‹ã¨ã®äº‹ã€‚Rate Limit ã®å›é¿ã¨ã‹ã§ä¾¿åˆ©ã€‚ https://t.co/kpIx6YVFEqâ€” ã‚µãƒˆã‚¦ãƒªãƒ§ã‚¦ã‚¹ã‚± (@ryosuke_sato) February 27, 2021 jitter ã¨ã¯Rails 6.1 ã‹ã‚‰è¿½åŠ ã•ã‚ŒãŸã‚ªãƒ—ã‚·ãƒ§ãƒ³ ã§ã€ retry_on ã®å¾…ã¡æ™‚é–“ã«å¯¾ã—ã¦ä»»æ„ã®å‰²åˆã§ãƒãƒ©ã‘ã•ã›ã¦ãã‚Œã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã™ï¼ˆãƒ‡ãƒ•ã‚©ãƒ«ãƒˆ 15% ï¼‰ã€‚ActiveJob::Exceptions::ClassMethods - retry_on:jitter - A random delay of wait time used when calculating backoff. The default is 15% (0.15) which represents the upper bound of possible wait time (expressed as a percentage)å®Ÿè£…ã‚’ç¢ºèªã—ã¦ã¿ãŸã“ã®ãƒãƒ©ã‘ã•ã›æ–¹ãŒå¾…ã¡æ™‚é–“ã«å¯¾ã—ã¦å¢—ãˆã‚‹ã®ã‹æ¸›ã‚‹ã®ã‹ãŒæ°—ã«ãªã£ã¦å®Ÿè£…ã‚’è¦‹ã¦ã¿ã¾ã—ãŸã€‚å¢—ãˆã‚‹æ–¹å‘ã§ãƒãƒ©ã‘ã‚‹ã‚ˆã†ã§ã™ã€‚ä¾‹ãˆã° wait: 60.seconds ã§ jitter: 0.5 ã®å ´åˆã ã¨ã€æœ€å¤§ 90 ç§’ã®å¾…ã¡æ™‚é–“ã¨ãªã‚Šã¾ã™ã€‚ã†ã£ã‹ã‚Š 100.0 ã¨ã‹æŒ‡å®šã™ã‚‹ã¨æœ€å¤§ 10000% å¾…ã¡æ™‚é–“ãŒåŠ ç®—ã•ã‚Œã¡ã‚ƒã„ãã†ã§ã™ã€‚é–“é•ãˆã¦æŒ‡å®šã—ãªã„ã‚ˆã†ã«ã”æ³¨æ„ä¸‹ã•ã„ğŸ™delay = seconds_or_duration_or_algorithm.to_idelay_jitter = determine_jitter_for_delay(delay, jitter)delay + delay_jitterğŸ“ jitter ã®è¨ˆç®—å‡¦ç†ã¯ ã“ã®ã‚ãŸã‚Šã©ã†ã„ã†å ´é¢ã§ä½¿ã†ã®ï¼Ÿã“ã®æ©Ÿèƒ½ãŒç„¡ã‹ã£ãŸå¾“æ¥ã ã¨ã€ãƒªãƒˆãƒ©ã‚¤å‡¦ç†ãŒä¸€æ–‰ã«èµ·å‹•ã—ã¦ã—ã¾ã†ã¨ã„ã†å•é¡ŒãŒã‚ã‚Šã¾ã—ãŸã€‚ä¾‹ãˆã°å¤–éƒ¨ã®ã‚µãƒ¼ãƒ“ã‚¹ã« API ãƒªã‚¯ã‚¨ã‚¹ãƒˆã™ã‚‹ã‚ˆã†ãª Job ã‚’ä½œã£ãŸã¨ã—ã¾ã™ã€‚API Rate Limit è¶…éã®ä¾‹å¤–ã‚’ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°ã—ã¦ã€ retry_on ã§ N åˆ†å¾Œã«ãƒªãƒˆãƒ©ã‚¤ã™ã‚‹ã‚ˆã†ã«å®Ÿè£…ã—ã¾ã™ã€‚ã“ã®æ™‚ã€ 1000 ä»¶ã® Job ãŒåŒæ™‚ã«å®Ÿè¡Œã•ã‚Œ 900 ä»¶ãŒ Rate Limit è¶…éã¨ãªã£ãŸå ´åˆã€N åˆ†å¾Œã« 900 ä»¶ã® Job ãŒä¸€æ–‰ã«ãƒªãƒˆãƒ©ã‚¤ã•ã‚Œã¦ã—ã¾ã„ã€å†ã³ 800 ä»¶ãŒã‚¨ãƒ©ãƒ¼ã¨ãªã£ã¦ã—ã¾ã†ã€‚ã“ã‚ŒãŒä½•åº¦ã‚‚ç¹°ã‚Šè¿”ã•ã‚Œã‚‹ã€ã¨ã„ã†ç¾è±¡ãŒèµ·ã“ã£ã¦ã¾ã—ãŸã€‚Rails 6.1 ä»¥å‰ã ã¨å›é¿ã§ããªã„ã®ï¼Ÿå¾“æ¥ã® ActiveJob ã§ã‚‚ä¸€å¿œå›é¿ç­–ã¯ã‚ã£ã¦ã€ wait ã« Proc ã‚’ä¸ãˆã¦ãƒ©ãƒ³ãƒ€ãƒ ãªå¾…ã¡æ™‚é–“ã‚’è¿”ã™ã‚ˆã†ãªå‡¦ç†ã‚’æ›¸ãã“ã¨ã§ä¼¼ãŸã‚ˆã†ãªå‹•ä½œã¯å¯èƒ½ã§ã™ã€‚retry_on SomeError, wait: -\u003e { rand(60..90).seconds }iPad Air (ç¬¬4ä¸–ä»£) è²·ã£ã¡ã‚ƒã£ãŸiPad Air (ç¬¬4ä¸–ä»£)è¿‘æ—¥ä¸­ã« iPad Pro ã®æ–°å‹ãŒå‡ºã‚‹ã¨ã®å™‚ãŒã‚ã‚‹ãŒã€è»½ã„ Air ãŒã»ã—ã‹ã£ãŸã®ã§å•é¡Œ ğŸ† ï¼ˆçŸ¥ã‚‰ãªã‹ã£ãŸã‘ã©ã­ï¼‰ğŸ”— æ–°å‹iPad Proæ­è¼‰A14X/A14Zãƒãƒƒãƒ—ã®å‡¦ç†èƒ½åŠ›ã¯M1ãƒãƒƒãƒ—ã«åŒ¹æ•µã‹ - iPhone Mania","link":"https://ryz310.hateblo.jp/entry/2021/03/02/113927","isoDate":"2021-03-02T02:39:27.000Z","dateMiliSeconds":1614652767000,"imageUrl":"https://cdn-ak.f.st-hatena.com/images/fotolife/r/ryz310/20210302/20210302102542.jpg","authorName":"ryz310"},{"title":"RuboCop ã§é•åã—ã¦ã‚‹ã‚³ãƒ¼ãƒ‰ã‚’è‡ªå‹•çš„ã«ä¿®æ­£ã™ã‚‹ PR ä½œã£ã¦ãã‚ŒãŸã‚‰å¬‰ã—ã„ã‚„ã‚ã€‚ã§ãã‚‹ã§ãã‚Œã€‚","content":"\u003cp\u003eä¹…ã€…ã®æ›´æ–°ã¯ Rubocop Challenger ã®è©±ã§ã™ã€‚\u003c/p\u003e\n\n\u003cp\u003eã“ã®ãƒ–ãƒ­ã‚°ã§ã¯è§¦ã‚ŒãŸã“ã¨ç„¡ã‹ã£ãŸã§ã™ãŒã€ \u003ca href=\"https://github.com/ryz310/rubocop_challenger\"\u003eãã†ã„ã† gem\u003c/a\u003e ã‚‚ä½œã£ã¦ã¾ã™ã€‚\nè‡ªå‹•çš„ã« \u003ccode\u003e.rubocop_todo.yml\u003c/code\u003e ã‹ã‚‰  \u003ccode\u003eCop supports --auto-correct.\u003c/code\u003e ã«ãªã£ã¦ã‚‹ Cop ã‚’æ‹¾ã£ã¦ãã¦ PR ä½œã£ã¦ãã‚Œã‚‹ã‚„ã¤ã§ã™ã€‚\u003c/p\u003e\n\n\u003cp\u003eã¡ã‚‡ã†ã© hey ç¤¾ã® CTO ã®è—¤æ‘ã•ã‚“ãŒåŒã˜äº‹ã‚’ã‚„ã£ã¦ã„ã¦ã¡ã‚‡ã£ã¨ãƒã‚ºã£ã¦ãŸã‚“ã§ã™ãŒã€è‡ªåˆ†ã® gem ä½¿ã£ã¦ã»ã—ã‹ã£ãŸãªãƒ¼ã¨åœ°å‘³ã«æ€ã£ã¦ãŸã‚Šã—ã¾ã™ã€‚è‡ªåˆ†ãŒä¸–ã®ä¸­ã«å¯¾ã—ã¦ã‚¢ãƒ”ãƒ¼ãƒ«ãŒè¶³ã‚Šã¦ãªã•ã™ãã¾ã—ãŸã­ ğŸ˜‡\u003c/p\u003e\n\n\u003cp\u003e\u003ciframe src=\"https://hatenablog-parts.com/embed?url=https%3A%2F%2Ftech.hey.jp%2Fentry%2F2020%2F10%2F23%2F111200\" title=\"ãŸã¾ã£ã¦ã—ã¾ã£ãŸ .rubocop_todo.yml ã‚’GitHub Actionsã§ç¶™ç¶šçš„ã‹ã¤è‡ªå‹•çš„ã«å€’ã™æ–¹æ³• - STORES Tech Blog\" class=\"embed-card embed-blogcard\" scrolling=\"no\" frameborder=\"0\" style=\"display: block; width: 100%; height: 190px; max-width: 500px; margin: 10px 0px;\"\u003e\u003c/iframe\u003e\u003ccite class=\"hatena-citation\"\u003e\u003ca href=\"https://tech.hey.jp/entry/2020/10/23/111200\"\u003etech.hey.jp\u003c/a\u003e\u003c/cite\u003e\u003c/p\u003e\n\n\u003cp\u003eä½•å¹´ã‹å‰ã«ä¼šç¤¾ã®ãƒ–ãƒ­ã‚°ã§æ›¸ã„ãŸã‚Šã¯ã—ã¦ãŸã®ã§ãƒªãƒ³ã‚¯è²¼ã£ã¦ãŠã âœ\u003c/p\u003e\n\n\u003cp\u003e\u003ciframe src=\"https://hatenablog-parts.com/embed?url=https%3A%2F%2Fdeveloper.feedforce.jp%2Fentry%2F2018%2F12%2F05%2F140000\" title=\"ã¾ã  .rubocop_todo.yml ã§æ¶ˆè€—ã—ã¦ã‚‹ã®ï¼Ÿ - Feedforce Developer Blog\" class=\"embed-card embed-blogcard\" scrolling=\"no\" frameborder=\"0\" style=\"display: block; width: 100%; height: 190px; max-width: 500px; margin: 10px 0px;\"\u003e\u003c/iframe\u003e\u003ccite class=\"hatena-citation\"\u003e\u003ca href=\"https://developer.feedforce.jp/entry/2018/12/05/140000\"\u003edeveloper.feedforce.jp\u003c/a\u003e\u003c/cite\u003e\u003c/p\u003e\n\n\u003ch2\u003eRubocop Challenger v2.3.0 ã‚’ãƒªãƒªãƒ¼ã‚¹ã—ã¾ã—ãŸ ğŸš€\u003c/h2\u003e\n\n\u003cp\u003e\u003ciframe src=\"https://hatenablog-parts.com/embed?url=https%3A%2F%2Fgithub.com%2Fryz310%2Frubocop_challenger%2Freleases%2Ftag%2Fv2.3.0\" title=\"Release v2.3.0 Â· ryz310/rubocop_challenger\" class=\"embed-card embed-webcard\" scrolling=\"no\" frameborder=\"0\" style=\"display: block; width: 100%; height: 155px; max-width: 500px; margin: 10px 0px;\"\u003e\u003c/iframe\u003e\u003ccite class=\"hatena-citation\"\u003e\u003ca href=\"https://github.com/ryz310/rubocop_challenger/releases/tag/v2.3.0\"\u003egithub.com\u003c/a\u003e\u003c/cite\u003e\u003c/p\u003e\n\n\u003cp\u003eã¨ã¯ã„ãˆæ–°æ©Ÿèƒ½ã¯ä¸€ã¤ã ã‘ã§ã€ auto-correct ã•ã‚ŒãŸ Cop ãŒ SafeAutocorrect ã‹ã©ã†ã‹ã‚’æ•™ãˆã¦ãã‚Œã‚‹ã€ã¨ã„ã†ã‚‚ã®ã§ã™ã€‚\u003c/p\u003e\n\n\u003cp\u003e\u003ca href=\"https://github.com/ryz310/rubocop_challenger/pull/465\"\u003eAdd description whether the challenge is created by safe autocorrect or not by ryz310 \u0026middot; Pull Request #465 \u0026middot; ryz310/rubocop_challenger \u0026middot; GitHub\u003c/a\u003e\u003c/p\u003e\n\n\u003cp\u003eã“ã‚“ãªæ„Ÿã˜ã® PR ãŒä½œæˆã•ã‚Œã¾ã™ã€‚ï¼ˆç”»åƒã¯å‹•ä½œç¢ºèªã§ä½œã£ãŸã‚‚ã®ãªã®ã§ã€å®Ÿéš›ã® \u003ccode\u003eStyle/Alias\u003c/code\u003e ã¯å¸¸ã« \u003ccode\u003eSafeAutocorrect: true\u003c/code\u003e ã«ãªã‚Šã¾ã™ï¼‰\u003c/p\u003e\n\n\u003cp\u003e\u003cimg src=\"https://user-images.githubusercontent.com/3985540/108836759-94096800-7614-11eb-8fb9-cb311711e120.png\" alt=\"Add description whether the challenge is created by safe autocorrect or not by ryz310 Â· Pull Request #465 Â· ryz310/rubocop_challenger\" /\u003e\n\u003cimg src=\"https://user-images.githubusercontent.com/3985540/108847589-392b3d00-7623-11eb-8c09-e5192edbbd80.png\" alt=\"Add description whether the challenge is created by safe autocorrect or not by ryz310 Â· Pull Request #465 Â· ryz310/rubocop_challenger\" /\u003e\u003c/p\u003e\n\n\u003cp\u003eãœã²ãŠè©¦ã—ä¸‹ã•ã„ ğŸ‘\u003c/p\u003e\n\n\u003ch2\u003eã¤ãã‚„ã‚ŠãŸã„ã“ã¨\u003c/h2\u003e\n\n\u003cp\u003eå…ˆæ—¥ \u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/GitHub\"\u003eGitHub\u003c/a\u003e ãŒ auto-merge æ©Ÿèƒ½ã‚’ãƒªãƒªãƒ¼ã‚¹ã—ã¾ã—ãŸã­ã€‚è‡ªåˆ†ã¯å³å…¨éƒ¨ã®\u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/%A5%EA%A5%DD%A5%B8%A5%C8%A5%EA\"\u003eãƒªãƒã‚¸ãƒˆãƒª\u003c/a\u003eã§æœ‰åŠ¹åŒ–ã—ã¾ã—ãŸ âœ…\u003c/p\u003e\n\n\u003cp\u003e\u003ciframe src=\"https://hatenablog-parts.com/embed?url=https%3A%2F%2Fgithub.blog%2Fchangelog%2F2021-02-04-pull-request-auto-merge-is-now-generally-available%2F\" title=\"Pull request auto-merge is now generally available - GitHub Changelog\" class=\"embed-card embed-webcard\" scrolling=\"no\" frameborder=\"0\" style=\"display: block; width: 100%; height: 155px; max-width: 500px; margin: 10px 0px;\"\u003e\u003c/iframe\u003e\u003ccite class=\"hatena-citation\"\u003e\u003ca href=\"https://github.blog/changelog/2021-02-04-pull-request-auto-merge-is-now-generally-available/\"\u003egithub.blog\u003c/a\u003e\u003c/cite\u003e\u003c/p\u003e\n\n\u003cp\u003eæ¬¡ã‚„ã‚ŠãŸã„æ©Ÿèƒ½ã¨ã—ã¦ã¯ \u003ccode\u003eSafeAutocorrect: true\u003c/code\u003e  ã®å ´åˆã¨ã‹ã¯ auto-merge ã‚’æœ‰åŠ¹åŒ–ã—ãŸ PR ã‚’ä½œã‚‹ã‚ˆã†ã«ã—ãŸã„ã‚“ã§ã™ã‚ˆã­ã€‚\u003c/p\u003e\n\n\u003cp\u003e\u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/GitHub\"\u003eGitHub\u003c/a\u003e ã® GraphQL \u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/API\"\u003eAPI\u003c/a\u003e ã§ã“ã®æ©Ÿèƒ½ã‚’æœ‰åŠ¹åŒ–ã§ãã‚‹ã‚‰ã—ã„ã§ã™ã€‚\u003c/p\u003e\n\n\u003cblockquote\u003e\u003cp\u003eGraphQL APIs will be rolling out later this week. The pull request webhook event also now includes actions that indicate when auto-merge is enabled or disabled.\u003c/p\u003e\u003c/blockquote\u003e\n\n\u003cp\u003eã¾ãŸæ™‚é–“ã‚ã‚‹æ™‚ã«ã§ã‚‚èª¿ã¹ã¾ã™ã€‚\u003c/p\u003e\n","contentSnippet":"ä¹…ã€…ã®æ›´æ–°ã¯ Rubocop Challenger ã®è©±ã§ã™ã€‚ã“ã®ãƒ–ãƒ­ã‚°ã§ã¯è§¦ã‚ŒãŸã“ã¨ç„¡ã‹ã£ãŸã§ã™ãŒã€ ãã†ã„ã† gem ã‚‚ä½œã£ã¦ã¾ã™ã€‚è‡ªå‹•çš„ã« .rubocop_todo.yml ã‹ã‚‰  Cop supports --auto-correct. ã«ãªã£ã¦ã‚‹ Cop ã‚’æ‹¾ã£ã¦ãã¦ PR ä½œã£ã¦ãã‚Œã‚‹ã‚„ã¤ã§ã™ã€‚ã¡ã‚‡ã†ã© hey ç¤¾ã® CTO ã®è—¤æ‘ã•ã‚“ãŒåŒã˜äº‹ã‚’ã‚„ã£ã¦ã„ã¦ã¡ã‚‡ã£ã¨ãƒã‚ºã£ã¦ãŸã‚“ã§ã™ãŒã€è‡ªåˆ†ã® gem ä½¿ã£ã¦ã»ã—ã‹ã£ãŸãªãƒ¼ã¨åœ°å‘³ã«æ€ã£ã¦ãŸã‚Šã—ã¾ã™ã€‚è‡ªåˆ†ãŒä¸–ã®ä¸­ã«å¯¾ã—ã¦ã‚¢ãƒ”ãƒ¼ãƒ«ãŒè¶³ã‚Šã¦ãªã•ã™ãã¾ã—ãŸã­ ğŸ˜‡tech.hey.jpä½•å¹´ã‹å‰ã«ä¼šç¤¾ã®ãƒ–ãƒ­ã‚°ã§æ›¸ã„ãŸã‚Šã¯ã—ã¦ãŸã®ã§ãƒªãƒ³ã‚¯è²¼ã£ã¦ãŠã âœdeveloper.feedforce.jpRubocop Challenger v2.3.0 ã‚’ãƒªãƒªãƒ¼ã‚¹ã—ã¾ã—ãŸ ğŸš€github.comã¨ã¯ã„ãˆæ–°æ©Ÿèƒ½ã¯ä¸€ã¤ã ã‘ã§ã€ auto-correct ã•ã‚ŒãŸ Cop ãŒ SafeAutocorrect ã‹ã©ã†ã‹ã‚’æ•™ãˆã¦ãã‚Œã‚‹ã€ã¨ã„ã†ã‚‚ã®ã§ã™ã€‚Add description whether the challenge is created by safe autocorrect or not by ryz310 Â· Pull Request #465 Â· ryz310/rubocop_challenger Â· GitHubã“ã‚“ãªæ„Ÿã˜ã® PR ãŒä½œæˆã•ã‚Œã¾ã™ã€‚ï¼ˆç”»åƒã¯å‹•ä½œç¢ºèªã§ä½œã£ãŸã‚‚ã®ãªã®ã§ã€å®Ÿéš›ã® Style/Alias ã¯å¸¸ã« SafeAutocorrect: true ã«ãªã‚Šã¾ã™ï¼‰ãœã²ãŠè©¦ã—ä¸‹ã•ã„ ğŸ‘ã¤ãã‚„ã‚ŠãŸã„ã“ã¨å…ˆæ—¥ GitHub ãŒ auto-merge æ©Ÿèƒ½ã‚’ãƒªãƒªãƒ¼ã‚¹ã—ã¾ã—ãŸã­ã€‚è‡ªåˆ†ã¯å³å…¨éƒ¨ã®ãƒªãƒã‚¸ãƒˆãƒªã§æœ‰åŠ¹åŒ–ã—ã¾ã—ãŸ âœ…github.blogæ¬¡ã‚„ã‚ŠãŸã„æ©Ÿèƒ½ã¨ã—ã¦ã¯ SafeAutocorrect: true  ã®å ´åˆã¨ã‹ã¯ auto-merge ã‚’æœ‰åŠ¹åŒ–ã—ãŸ PR ã‚’ä½œã‚‹ã‚ˆã†ã«ã—ãŸã„ã‚“ã§ã™ã‚ˆã­ã€‚GitHub ã® GraphQL API ã§ã“ã®æ©Ÿèƒ½ã‚’æœ‰åŠ¹åŒ–ã§ãã‚‹ã‚‰ã—ã„ã§ã™ã€‚GraphQL APIs will be rolling out later this week. The pull request webhook event also now includes actions that indicate when auto-merge is enabled or disabled.ã¾ãŸæ™‚é–“ã‚ã‚‹æ™‚ã«ã§ã‚‚èª¿ã¹ã¾ã™ã€‚","link":"https://ryz310.hateblo.jp/entry/2021/02/23/222720","isoDate":"2021-02-23T13:27:20.000Z","dateMiliSeconds":1614086840000,"imageUrl":"https://user-images.githubusercontent.com/3985540/108836759-94096800-7614-11eb-8fb9-cb311711e120.png","authorName":"ryz310"},{"title":"my_api_client v0.16.0 ã‚’ãƒªãƒªãƒ¼ã‚¹ã—ã¾ã—ãŸğŸš€","content":"\u003cp\u003eå‰å›ã®ãƒªãƒªãƒ¼ã‚¹ã‹ã‚‰ 1 é€±é–“ã»ã©ã§ã™ãŒã€ä»Šæ—¥äºˆå®šã—ã¦ã„ãŸãƒ©ã‚¤ãƒ–ãŒ\u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/%A5%B3%A5%ED%A5%CA%A5%A6%A5%A4%A5%EB%A5%B9\"\u003eã‚³ãƒ­ãƒŠã‚¦ã‚¤ãƒ«ã‚¹\u003c/a\u003eã®å½±éŸ¿ã§ä¸­æ­¢ã«ãªã£ãŸã®ã§æš‡ã‚’æŒã¦ä½™ã—ã¾ã—ãŸ ğŸ˜·\u003c/p\u003e\n\n\u003cp\u003e\u003ciframe src=\"https://hatenablog-parts.com/embed?url=https%3A%2F%2Fgithub.com%2Fryz310%2Fmy_api_client%2Freleases%2Ftag%2Fv0.16.0\" title=\"Release v0.16.0 Â· ryz310/my_api_client\" class=\"embed-card embed-webcard\" scrolling=\"no\" frameborder=\"0\" style=\"display: block; width: 100%; height: 155px; max-width: 500px; margin: 10px 0px;\"\u003e\u003c/iframe\u003e\u003ccite class=\"hatena-citation\"\u003e\u003ca href=\"https://github.com/ryz310/my_api_client/releases/tag/v0.16.0\"\u003egithub.com\u003c/a\u003e\u003c/cite\u003e\u003c/p\u003e\n\n\u003ch2\u003ev0.16.0 ã®æ–°æ©Ÿèƒ½\u003c/h2\u003e\n\n\u003cp\u003e2 ã¤ã‚ã‚Šã¾ã™ãŒã€ã©ã¡ã‚‰ã‚‚è‹¥å¹²ã® Breaking Change ã§ã™ã€‚\nã¨ã¯ã„ãˆæ™®é€šã«ä½¿ã£ã¦ã„ãŸã‚‰å…¨ãå½±éŸ¿ã‚’å—ã‘ãªã„ã¨æ€ã„ã¾ã™ã€‚\u003c/p\u003e\n\n\u003ch3\u003e\u003ca href=\"https://github.com/ryz310/my_api_client/pull/225([@ryz310](https://github.com/ryz310\"\u003eæ–°æ©Ÿèƒ½ 1. ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒ©ãŒã‚¨ãƒ©ãƒ¼ã‚’æ¤œå‡ºã—ãŸéš›ã¯å¸¸ã«ä¾‹å¤–ã‚’ raise ã™ã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã—ãŸ\u003c/a\u003e\u003c/h3\u003e\n\n\u003cp\u003e\u003ccode\u003emy_api_client\u003c/code\u003e ã§ã¯ \u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/JSON\"\u003eJSON\u003c/a\u003e \u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/API\"\u003eAPI\u003c/a\u003e ã‹ã‚‰ã®ãƒ¬ã‚¹ãƒãƒ³ã‚¹å†…å®¹ã«å¿œã˜ã¦ä¾‹å¤–ã‚’ç™ºç”Ÿã•ã›ã‚‹ \u003ccode\u003eerror_handling\u003c/code\u003e ã¨ã„ã†ãƒ¡ã‚½ãƒƒãƒ‰ãŒåˆ©ç”¨ã§ãã¾ã™ã€‚\u003c/p\u003e\n\n\u003cp\u003eä»¥ä¸‹ã« \u003ccode\u003eerror_handling\u003c/code\u003e ã‚’åˆ©ç”¨ã—ãŸä¾‹ã‚’ç¤ºã—ã¾ã™ã€‚\u003c/p\u003e\n\n\u003cpre class=\"code lang-ruby\" data-lang=\"ruby\" data-unlink\u003e\u003cspan class=\"synPreProc\"\u003eclass\u003c/span\u003e \u003cspan class=\"synType\"\u003eExampleApiClient\u003c/span\u003e \u0026lt; \u003cspan class=\"synType\"\u003eApplicationApiClient\u003c/span\u003e\n  endpoint \u003cspan class=\"synSpecial\"\u003e'\u003c/span\u003e\u003cspan class=\"synConstant\"\u003ehttps://example.com\u003c/span\u003e\u003cspan class=\"synSpecial\"\u003e'\u003c/span\u003e\n\n  error_handling \u003cspan class=\"synConstant\"\u003ejson\u003c/span\u003e: { \u003cspan class=\"synSpecial\"\u003e'\u003c/span\u003e\u003cspan class=\"synConstant\"\u003e$.errors.code\u003c/span\u003e\u003cspan class=\"synSpecial\"\u003e'\u003c/span\u003e: \u003cspan class=\"synConstant\"\u003e10\u003c/span\u003e }\n\n  error_handling \u003cspan class=\"synConstant\"\u003ejson\u003c/span\u003e: { \u003cspan class=\"synSpecial\"\u003e'\u003c/span\u003e\u003cspan class=\"synConstant\"\u003e$.errors.code\u003c/span\u003e\u003cspan class=\"synSpecial\"\u003e'\u003c/span\u003e: \u003cspan class=\"synConstant\"\u003e20\u003c/span\u003e }, \u003cspan class=\"synConstant\"\u003eraise\u003c/span\u003e: \u003cspan class=\"synType\"\u003eMyErrorClass\u003c/span\u003e\n\n  error_handling \u003cspan class=\"synConstant\"\u003ejson\u003c/span\u003e: { \u003cspan class=\"synSpecial\"\u003e'\u003c/span\u003e\u003cspan class=\"synConstant\"\u003e$.errors.code\u003c/span\u003e\u003cspan class=\"synSpecial\"\u003e'\u003c/span\u003e: \u003cspan class=\"synConstant\"\u003e30\u003c/span\u003e }, \u003cspan class=\"synConstant\"\u003ewith\u003c/span\u003e: \u003cspan class=\"synConstant\"\u003e:my_error_handling\u003c/span\u003e\n\n  error_handling \u003cspan class=\"synConstant\"\u003ejson\u003c/span\u003e: { \u003cspan class=\"synSpecial\"\u003e'\u003c/span\u003e\u003cspan class=\"synConstant\"\u003e$.errors.code\u003c/span\u003e\u003cspan class=\"synSpecial\"\u003e'\u003c/span\u003e: \u003cspan class=\"synConstant\"\u003e40\u003c/span\u003e } \u003cspan class=\"synStatement\"\u003edo\u003c/span\u003e |\u003cspan class=\"synIdentifier\"\u003eparams\u003c/span\u003e, \u003cspan class=\"synIdentifier\"\u003elogger\u003c/span\u003e|\n    \u003cspan class=\"synComment\"\u003e# Do something.\u003c/span\u003e\n  \u003cspan class=\"synStatement\"\u003eend\u003c/span\u003e\n\n  \u003cspan class=\"synComment\"\u003e# GET error/:code\u003c/span\u003e\n  \u003cspan class=\"synPreProc\"\u003edef\u003c/span\u003e \u003cspan class=\"synIdentifier\"\u003erequest\u003c/span\u003e\n    get \u003cspan class=\"synSpecial\"\u003e'\u003c/span\u003e\u003cspan class=\"synConstant\"\u003epath/to/resouce\u003c/span\u003e\u003cspan class=\"synSpecial\"\u003e'\u003c/span\u003e\n  \u003cspan class=\"synPreProc\"\u003eend\u003c/span\u003e\n\n  \u003cspan class=\"synStatement\"\u003eprivate\u003c/span\u003e\n\n  \u003cspan class=\"synPreProc\"\u003edef\u003c/span\u003e \u003cspan class=\"synIdentifier\"\u003emy_error_handling\u003c/span\u003e(params, logger)\n    \u003cspan class=\"synComment\"\u003e# Do something.\u003c/span\u003e\n  \u003cspan class=\"synPreProc\"\u003eend\u003c/span\u003e\n\u003cspan class=\"synPreProc\"\u003eend\u003c/span\u003e\n\u003c/pre\u003e\n\n\n\u003cp\u003eã“ã®ä¾‹ã®å ´åˆã€ \u003ccode\u003eExampleApiClient#request\u003c/code\u003e ã‚’å®Ÿè¡Œã™ã‚‹ã¨ \u003ccode\u003eGET https://example.com/path/to/resouce\u003c/code\u003e ã«å¯¾ã—ã¦ãƒªã‚¯\u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/%A5%A8%A5%B9\"\u003eã‚¨ã‚¹\u003c/a\u003eãƒˆãŒå®Ÿè¡Œã•ã‚Œã€ãƒ¬ã‚¹ãƒãƒ³ã‚¹ãƒœãƒ‡ã‚£ãŒ \u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/JSON\"\u003eJSON\u003c/a\u003e å½¢å¼ã ã£ãŸå ´åˆã€JSONPath \u003ccode\u003e$.error.code\u003c/code\u003e ã®å€¤ã«å¿œã˜ã¦ä»¥ä¸‹ã®å‡¦ç†ã‚’å®Ÿè¡Œã—ã¾ã™ã€‚\u003c/p\u003e\n\n\u003cul\u003e\n\u003cli\u003e\u003ccode\u003e10\u003c/code\u003e ã ã£ãŸå ´åˆ \u003ccode\u003eMyApiClient::Error\u003c/code\u003e ã‚’ç™ºç”Ÿã•ã›ã‚‹\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003e20\u003c/code\u003e ã ã£ãŸå ´åˆ \u003ccode\u003eMyErrorClass\u003c/code\u003e ã‚’ç™ºç”Ÿã•ã›ã‚‹\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003e30\u003c/code\u003e ã ã£ãŸå ´åˆ \u003ccode\u003e#my_error_handling\u003c/code\u003e ã‚’å®Ÿè¡Œã™ã‚‹ \u003cstrong\u003eï¼ˆä¾‹å¤–ã¯ç™ºç”Ÿã—ãªã„ï¼‰\u003c/strong\u003e\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003e40\u003c/code\u003e ã ã£ãŸå ´åˆ \u003ccode\u003edo ~ end\u003c/code\u003e ã‚’å®Ÿè¡Œã™ã‚‹ \u003cstrong\u003eï¼ˆä¾‹å¤–ã¯ç™ºç”Ÿã—ãªã„ï¼‰\u003c/strong\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\n\n\u003cp\u003e\u003ccode\u003eMyApiClient::Error\u003c/code\u003e ã¯ \u003ccode\u003eraise\u003c/code\u003e ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã§ä¾‹å¤–ã‚¯ãƒ©ã‚¹ã‚’æŒ‡å®šã—ãªã‹ã£ãŸå ´åˆã®ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã®ä¾‹å¤–ã‚¯ãƒ©ã‚¹ã§ã™ã€‚\u003c/p\u003e\n\n\u003cp\u003eã“ã®æ™‚ã€å¾“æ¥ã¯ \u003ccode\u003e30\u003c/code\u003e ã¨ \u003ccode\u003e40\u003c/code\u003e ã®ã‚ˆã†ã« \u003ccode\u003ewith\u003c/code\u003e ã‚„ \u003ccode\u003eblock\u003c/code\u003e ã‚’åˆ©ç”¨ã—ãŸå ´åˆã¯ã€å‡¦ç†ã®ä¸­ã§æ˜ç¤ºçš„ã« \u003ccode\u003eraise\u003c/code\u003e ã‚’å®Ÿè¡Œã—ãªã„é™ã‚Šã€ä¾‹å¤–ã¯ç™ºç”Ÿã—ã¾ã›ã‚“ã§ã—ãŸã€‚\nã‚¨ãƒ©ãƒ¼æ¤œå‡ºæ™‚ã«ä¾‹å¤–ã‚’ç™ºç”Ÿã•ã›ã‚‹ã‹ã©ã†ã‹ã¯ã€ \u003ccode\u003emy_api_client\u003c/code\u003e ã®åˆ©ç”¨è€…ã«å§”ã­ã‚‰ã‚Œã¦ã„ãŸå½¢ã«ãªã‚Šã¾ã™ã€‚\u003c/p\u003e\n\n\u003cp\u003eã—ã‹ã—ãªãŒã‚‰ã€ã“ã“ã«è‡ªç”±åº¦ã‚’æŒãŸã›ã‚‹ã‚ˆã‚Šã‚‚ã€ \u003cstrong\u003eã‚¨ãƒ©ãƒ¼æ¤œå‡ºæ™‚ã«ã¯å¿…ãš \u003ccode\u003eraise\u003c/code\u003e ã•ã›ã¦ \u003ccode\u003erescue\u003c/code\u003e ã§ç•°å¸¸æ™‚ã®å‡¦ç†ã‚’è¨˜è¿°ã™ã‚‹\u003c/strong\u003e ã€ã¨ã„ã†æ–¹å¼ã«çµ±ä¸€ã—ãŸæ–¹ãŒ \u003ccode\u003emy_api_client\u003c/code\u003e ã®åˆ©ç”¨æ–¹æ³•ã¨ã—ã¦ã‚‚ç†è§£ã—ã‚„ã™ãã€ç‰¹ã«å›°ã‚‹ã‚±ãƒ¼ã‚¹ã‚‚æƒ³å®šã•ã‚Œãªã‹ã£ãŸã“ã¨ã‹ã‚‰ã€ä»¥ä¸‹ã®ã‚ˆã†ã«å¤‰æ›´ã™ã‚‹ã“ã¨ã«ã—ã¾ã—ãŸã€‚\u003c/p\u003e\n\n\u003cul\u003e\n\u003cli\u003e\u003ccode\u003e10\u003c/code\u003e ã ã£ãŸå ´åˆ \u003ccode\u003eMyApiClient::Error\u003c/code\u003e ã‚’ç™ºç”Ÿã•ã›ã‚‹ \u003cstrong\u003eï¼ˆå¤‰æ›´ãªã—ï¼‰\u003c/strong\u003e\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003e20\u003c/code\u003e ã ã£ãŸå ´åˆ \u003ccode\u003eMyErrorClass\u003c/code\u003e ã‚’ç™ºç”Ÿã•ã›ã‚‹ \u003cstrong\u003eï¼ˆå¤‰æ›´ãªã—ï¼‰\u003c/strong\u003e\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003e30\u003c/code\u003e ã ã£ãŸå ´åˆ \u003ccode\u003e#my_error_handling\u003c/code\u003e ã‚’å®Ÿè¡Œã—ã€ \u003cstrong\u003e\u003ccode\u003eMyApiClient::Error\u003c/code\u003e ã‚’ç™ºç”Ÿã•ã›ã‚‹\u003c/strong\u003e\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003e40\u003c/code\u003e ã ã£ãŸå ´åˆ \u003ccode\u003edo ~ end\u003c/code\u003e ã‚’å®Ÿè¡Œã—ã€ \u003cstrong\u003e\u003ccode\u003eMyApiClient::Error\u003c/code\u003e ã‚’ç™ºç”Ÿã•ã›ã‚‹\u003c/strong\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\n\n\u003cp\u003eä»Šå¾Œã¯ã‚¨ãƒ©ãƒ¼æ¤œå‡ºæ™‚ã«ã¯å¸¸ã«ä½•ã‚‰ã‹ã®ä¾‹å¤–ãŒ \u003ccode\u003eraise\u003c/code\u003e ã•ã‚Œã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã™ã€‚\nä¸Šè¨˜ã®ä¾‹ã§ã¯ \u003ccode\u003eMyApiClient::Error\u003c/code\u003e ãŒç™ºç”Ÿã—ã¾ã™ãŒã€ \u003ccode\u003ewith\u003c/code\u003e ã‚„ \u003ccode\u003eblock\u003c/code\u003e ã¨åŒæ™‚ã« \u003ccode\u003eraise\u003c/code\u003e ã‚’æŒ‡å®šã™ã‚Œã°ã€ä»»æ„ã®ä¾‹å¤–ã‚¯ãƒ©ã‚¹ãŒç™ºç”Ÿã™ã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã™ã€‚\u003c/p\u003e\n\n\u003cp\u003eã“ã‚Œã«ã‚ˆã‚Šã€ \u003ccode\u003ewith\u003c/code\u003e ã‚„ \u003ccode\u003eblock\u003c/code\u003e ã¯ä¾‹å¤–ã®å‰å‡¦ç†ã¨ã„ã†ä½ç½®ä»˜ã‘ã«ãªã‚Šã¾ã™ã€‚\u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/%A5%E6%A1%BC%A5%B9%A5%B1%A1%BC%A5%B9\"\u003eãƒ¦ãƒ¼ã‚¹ã‚±ãƒ¼ã‚¹\u003c/a\u003eã¨ã—ã¦ã¯ãƒ­ã‚°å‡ºåŠ›ã‚„ slack ã¸ã®é€šçŸ¥ãªã©ãŒè€ƒãˆã‚‰ã‚Œã¾ã™ã€‚\u003c/p\u003e\n\n\u003ch3\u003e\u003ca href=\"https://github.com/ryz310/my_api_client/pull/226\"\u003eæ–°æ©Ÿèƒ½ 2. æ¨™æº–ã®ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒ©ãŒç”¨æ„ã•ã‚Œã¾ã—ãŸ\u003c/a\u003e\u003c/h3\u003e\n\n\u003cp\u003e\u003ccode\u003emy_api_client\u003c/code\u003e ã§ã¯ \u003ca href=\"https://github.com/ryz310/my_api_client/blob/e6e4d2265fc834925d45e023c7d43590f98b7171/README.jp.md#installation\"\u003egenerator æ©Ÿèƒ½\u003c/a\u003e ãŒç”¨æ„ã•ã‚Œã¦ãŠã‚Šã€ \u003ccode\u003e$ rails g api_client path/to/resource get:path/to/resource\u003c/code\u003e ã‚’å®Ÿè¡Œã™ã‚‹ã¨ä»¥ä¸‹ã®ãƒ•ã‚¡ã‚¤ãƒ«ãŒä½œæˆã•ã‚Œã¾ã™ã€‚\u003c/p\u003e\n\n\u003cpre class=\"code\" data-lang=\"\" data-unlink\u003ecreate  app/api_clients/application_api_client.rb\ncreate  app/api_clients/path/to/resource_api_client.rb\ninvoke  rspec\ncreate    spec/api_clients/path/to/resource_api_client_spec.rb` \u003c/pre\u003e\n\n\n\u003cp\u003eã“ã®æ™‚ã€ \u003ccode\u003eapplication_api_client.rb\u003c/code\u003e ã«æ¨™æº–ã®ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒ©ã®ä¾‹ãŒã„ãã¤ã‹è¨˜è¼‰ã•ã‚Œã‚‹ã®ã§ã™ãŒã€ä¾‹ã¨ã„ã†ã‚ˆã‚Šå¿…é ˆã®ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒ©ã ã‚ˆã­ã€ã¨ã„ã†ã“ã¨ã§ã€ \u003ccode\u003emy_api_client\u003c/code\u003e ã®å†…éƒ¨ã§æ¨™æº–å®Ÿè£…ã™ã‚‹ã‚ˆã†ã«ã—ã¾ã—ãŸã€‚\nã“ã‚Œã«ã‚ˆã‚Šã€\u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/%A5%B9%A5%C6%A1%BC%A5%BF%A5%B9%A5%B3%A1%BC%A5%C9\"\u003eã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ã‚³ãƒ¼ãƒ‰\u003c/a\u003e 4xx ã¨ 5xx ã®ãƒ¬ã‚¹ãƒãƒ³ã‚¹ã«å¯¾ã—ã¦ã¯æ¨™æº–ã§ä¾‹å¤–ãŒç™ºç”Ÿã™ã‚‹ã‚ˆã†ãªã‚Šã¾ã™ã€‚ã¾ãŸã€ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ç³»ã®ã‚¨ãƒ©ãƒ¼ã«å¯¾ã—ã¦ã‚‚æ¨™æº–ã§ \u003ccode\u003e300 msec\u003c/code\u003e é–“éš”ã‚’ç©ºã‘ã¦ 3 å›ãƒªãƒˆãƒ©ã‚¤ãŒè©¦è¡Œã•ã‚Œã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã™ã€‚ï¼ˆãƒªãƒˆãƒ©ã‚¤å‡¦ç†ã‚‚å¾“æ¥ã¯æ˜ç¤ºçš„ãªå®šç¾©ãŒå¿…é ˆã§ã—ãŸï¼‰\u003c/p\u003e\n\n\u003cpre class=\"code lang-ruby\" data-lang=\"ruby\" data-unlink\u003e\u003cspan class=\"synComment\"\u003e# å¾“æ¥ã® `application_api_client.rb` ã«å‡ºåŠ›ã•ã‚Œã¦ã„ãŸæ¨™æº–ã®ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒ©ä¾‹\u003c/span\u003e\nerror_handling \u003cspan class=\"synConstant\"\u003estatus_code\u003c/span\u003e: \u003cspan class=\"synConstant\"\u003e400\u003c/span\u003e..\u003cspan class=\"synConstant\"\u003e499\u003c/span\u003e, \u003cspan class=\"synConstant\"\u003eraise\u003c/span\u003e: \u003cspan class=\"synType\"\u003eMyApiClient\u003c/span\u003e::\u003cspan class=\"synType\"\u003eClientError\u003c/span\u003e\nerror_handling \u003cspan class=\"synConstant\"\u003estatus_code\u003c/span\u003e: \u003cspan class=\"synConstant\"\u003e500\u003c/span\u003e..\u003cspan class=\"synConstant\"\u003e599\u003c/span\u003e, \u003cspan class=\"synConstant\"\u003eraise\u003c/span\u003e: \u003cspan class=\"synType\"\u003eMyApiClient\u003c/span\u003e::\u003cspan class=\"synType\"\u003eServerError\u003c/span\u003e\n\n\u003cspan class=\"synComment\"\u003e# å¾“æ¥ã® `application_api_client.rb` ã«å‡ºåŠ›ã•ã‚Œã¦ã„ãŸæ¨™æº–ã®ãƒªãƒˆãƒ©ã‚¤å‡¦ç†ä¾‹\u003c/span\u003e\nretry_on \u003cspan class=\"synType\"\u003eMyApiClient\u003c/span\u003e::\u003cspan class=\"synType\"\u003eNetworkError\u003c/span\u003e, \u003cspan class=\"synConstant\"\u003ewait\u003c/span\u003e: \u003cspan class=\"synConstant\"\u003e5\u003c/span\u003e.seconds, \u003cspan class=\"synConstant\"\u003eattempts\u003c/span\u003e: \u003cspan class=\"synConstant\"\u003e3\u003c/span\u003e\n\u003c/pre\u003e\n\n\n\u003cp\u003eæ¨™æº–ã§å®šç¾©ã•ã‚Œã¦ã„ã‚‹ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒ©ã¯ \u003ca href=\"https://github.com/ryz310/my_api_client/blob/e6e4d2265fc834925d45e023c7d43590f98b7171/lib/my_api_client/default_error_handlers.rb\"\u003emy_api_client/default_error_handlers.rb\u003c/a\u003e ã‹ã‚‰å‚ç…§ã§ãã¾ã™ã€‚\u003c/p\u003e\n\n\u003cp\u003e\u003ccode\u003eerror_handling\u003c/code\u003e ã¯å¾Œã‹ã‚‰å®šç¾©ã—ãŸç‰©ãŒå„ªå…ˆã•ã‚Œã¾ã™ã®ã§ã€ä¾‹ãˆã°\u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/%A5%B9%A5%C6%A1%BC%A5%BF%A5%B9%A5%B3%A1%BC%A5%C9\"\u003eã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ã‚³ãƒ¼ãƒ‰\u003c/a\u003e \u003ccode\u003e400\u003c/code\u003e ã«å¯¾ã—ã¦ã¯ç‹¬è‡ªã®ä¾‹å¤–ã‚¯ãƒ©ã‚¹ã‚’ç™ºç”Ÿã•ã›ã‚‹ã‚ˆã†ã«ã—ãŸã„å ´åˆã€ç¶™æ‰¿å…ˆã®ã‚¯ãƒ©ã‚¹ã§ \u003ccode\u003eerror_handling status_code: 400, raise: MyErrorClass\u003c/code\u003e ã®ã‚ˆã†ã«å®šç¾©ã™ã‚Œã°ã€ \u003ccode\u003eMyErrorClass\u003c/code\u003e ãŒä¾‹å¤–ã¨ã—ã¦ç™ºç”Ÿã™ã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã™ã€‚\u003c/p\u003e\n\n\u003ch2\u003eæ‰€æ„Ÿ\u003c/h2\u003e\n\n\u003cp\u003eç¤¾å†…ã®ãƒ—ãƒ­ãƒ€ã‚¯ãƒˆç”¨ã«ä½œã£ãŸ gem ã§ã™ãŒã€å°‘ã—ãšã¤è‡ªåˆ†ä»¥å¤–ã®ã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢ã‚‚åˆ©ç”¨ã—ã¦ãã‚Œã‚‹ã‚ˆã†ã«ãªã£ã¦ãã¾ã—ãŸã€‚\nä¸€æ–¹ã§ã€è‡ªç”±åº¦ãŒé«˜éãã‚‹ã¨ç†ŸçŸ¥ã—ã¦ã„ãªã„ã¨ä½¿ãˆãªã„æ©Ÿèƒ½ãŒå¢—ãˆã¦ã—ã¾ã†ç‚¹ã‚’èª²é¡Œæ„Ÿã¨ã—ã¦æ„Ÿã˜ã‚‹ã‚ˆã†ã«ãªã£ã¦ãã¾ã—ãŸã€‚\u003c/p\u003e\n\n\u003cp\u003eãªã‚‹ã¹ãè‡ªç”±åº¦ã®é«˜ã„ gem ã‚’æ„è­˜ã—ã¤ã¤ã€æ¨™æº–ã®çŠ¶æ…‹ã§ã‚‚é«˜åº¦ãªæ©Ÿèƒ½ã®æ©æµã‚’å—ã‘ã‚‰ã‚Œã‚‹çŠ¶æ…‹ã‚’ç›®æŒ‡ã—ã¦ã„ããŸã„ã¨æ€ã„ã¾ã™ã€‚\u003c/p\u003e\n\n\u003cp\u003eæã‚‰ãæ¬¡ã®æ–°æ©Ÿèƒ½ã¯ \u003ccode\u003easync/await\u003c/code\u003e ã£ã½ã„æ©Ÿèƒ½ã€ã¾ãŸã¯ \u003ccode\u003esawyer\u003c/code\u003e gem ã®ä¾å­˜ã‹ã‚‰ã®è„±å´ãªã‚‹ã¨æ€ã„ã¾ã™ã€‚\u003c/p\u003e\n","contentSnippet":"å‰å›ã®ãƒªãƒªãƒ¼ã‚¹ã‹ã‚‰ 1 é€±é–“ã»ã©ã§ã™ãŒã€ä»Šæ—¥äºˆå®šã—ã¦ã„ãŸãƒ©ã‚¤ãƒ–ãŒã‚³ãƒ­ãƒŠã‚¦ã‚¤ãƒ«ã‚¹ã®å½±éŸ¿ã§ä¸­æ­¢ã«ãªã£ãŸã®ã§æš‡ã‚’æŒã¦ä½™ã—ã¾ã—ãŸ ğŸ˜·github.comv0.16.0 ã®æ–°æ©Ÿèƒ½2 ã¤ã‚ã‚Šã¾ã™ãŒã€ã©ã¡ã‚‰ã‚‚è‹¥å¹²ã® Breaking Change ã§ã™ã€‚ã¨ã¯ã„ãˆæ™®é€šã«ä½¿ã£ã¦ã„ãŸã‚‰å…¨ãå½±éŸ¿ã‚’å—ã‘ãªã„ã¨æ€ã„ã¾ã™ã€‚æ–°æ©Ÿèƒ½ 1. ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒ©ãŒã‚¨ãƒ©ãƒ¼ã‚’æ¤œå‡ºã—ãŸéš›ã¯å¸¸ã«ä¾‹å¤–ã‚’ raise ã™ã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã—ãŸmy_api_client ã§ã¯ JSON API ã‹ã‚‰ã®ãƒ¬ã‚¹ãƒãƒ³ã‚¹å†…å®¹ã«å¿œã˜ã¦ä¾‹å¤–ã‚’ç™ºç”Ÿã•ã›ã‚‹ error_handling ã¨ã„ã†ãƒ¡ã‚½ãƒƒãƒ‰ãŒåˆ©ç”¨ã§ãã¾ã™ã€‚ä»¥ä¸‹ã« error_handling ã‚’åˆ©ç”¨ã—ãŸä¾‹ã‚’ç¤ºã—ã¾ã™ã€‚class ExampleApiClient \u003c ApplicationApiClient  endpoint 'https://example.com'  error_handling json: { '$.errors.code': 10 }  error_handling json: { '$.errors.code': 20 }, raise: MyErrorClass  error_handling json: { '$.errors.code': 30 }, with: :my_error_handling  error_handling json: { '$.errors.code': 40 } do |params, logger|    # Do something.  end  # GET error/:code  def request    get 'path/to/resouce'  end  private  def my_error_handling(params, logger)    # Do something.  endendã“ã®ä¾‹ã®å ´åˆã€ ExampleApiClient#request ã‚’å®Ÿè¡Œã™ã‚‹ã¨ GET https://example.com/path/to/resouce ã«å¯¾ã—ã¦ãƒªã‚¯ã‚¨ã‚¹ãƒˆãŒå®Ÿè¡Œã•ã‚Œã€ãƒ¬ã‚¹ãƒãƒ³ã‚¹ãƒœãƒ‡ã‚£ãŒ JSON å½¢å¼ã ã£ãŸå ´åˆã€JSONPath $.error.code ã®å€¤ã«å¿œã˜ã¦ä»¥ä¸‹ã®å‡¦ç†ã‚’å®Ÿè¡Œã—ã¾ã™ã€‚10 ã ã£ãŸå ´åˆ MyApiClient::Error ã‚’ç™ºç”Ÿã•ã›ã‚‹20 ã ã£ãŸå ´åˆ MyErrorClass ã‚’ç™ºç”Ÿã•ã›ã‚‹30 ã ã£ãŸå ´åˆ #my_error_handling ã‚’å®Ÿè¡Œã™ã‚‹ ï¼ˆä¾‹å¤–ã¯ç™ºç”Ÿã—ãªã„ï¼‰40 ã ã£ãŸå ´åˆ do ~ end ã‚’å®Ÿè¡Œã™ã‚‹ ï¼ˆä¾‹å¤–ã¯ç™ºç”Ÿã—ãªã„ï¼‰MyApiClient::Error ã¯ raise ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã§ä¾‹å¤–ã‚¯ãƒ©ã‚¹ã‚’æŒ‡å®šã—ãªã‹ã£ãŸå ´åˆã®ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã®ä¾‹å¤–ã‚¯ãƒ©ã‚¹ã§ã™ã€‚ã“ã®æ™‚ã€å¾“æ¥ã¯ 30 ã¨ 40 ã®ã‚ˆã†ã« with ã‚„ block ã‚’åˆ©ç”¨ã—ãŸå ´åˆã¯ã€å‡¦ç†ã®ä¸­ã§æ˜ç¤ºçš„ã« raise ã‚’å®Ÿè¡Œã—ãªã„é™ã‚Šã€ä¾‹å¤–ã¯ç™ºç”Ÿã—ã¾ã›ã‚“ã§ã—ãŸã€‚ã‚¨ãƒ©ãƒ¼æ¤œå‡ºæ™‚ã«ä¾‹å¤–ã‚’ç™ºç”Ÿã•ã›ã‚‹ã‹ã©ã†ã‹ã¯ã€ my_api_client ã®åˆ©ç”¨è€…ã«å§”ã­ã‚‰ã‚Œã¦ã„ãŸå½¢ã«ãªã‚Šã¾ã™ã€‚ã—ã‹ã—ãªãŒã‚‰ã€ã“ã“ã«è‡ªç”±åº¦ã‚’æŒãŸã›ã‚‹ã‚ˆã‚Šã‚‚ã€ ã‚¨ãƒ©ãƒ¼æ¤œå‡ºæ™‚ã«ã¯å¿…ãš raise ã•ã›ã¦ rescue ã§ç•°å¸¸æ™‚ã®å‡¦ç†ã‚’è¨˜è¿°ã™ã‚‹ ã€ã¨ã„ã†æ–¹å¼ã«çµ±ä¸€ã—ãŸæ–¹ãŒ my_api_client ã®åˆ©ç”¨æ–¹æ³•ã¨ã—ã¦ã‚‚ç†è§£ã—ã‚„ã™ãã€ç‰¹ã«å›°ã‚‹ã‚±ãƒ¼ã‚¹ã‚‚æƒ³å®šã•ã‚Œãªã‹ã£ãŸã“ã¨ã‹ã‚‰ã€ä»¥ä¸‹ã®ã‚ˆã†ã«å¤‰æ›´ã™ã‚‹ã“ã¨ã«ã—ã¾ã—ãŸã€‚10 ã ã£ãŸå ´åˆ MyApiClient::Error ã‚’ç™ºç”Ÿã•ã›ã‚‹ ï¼ˆå¤‰æ›´ãªã—ï¼‰20 ã ã£ãŸå ´åˆ MyErrorClass ã‚’ç™ºç”Ÿã•ã›ã‚‹ ï¼ˆå¤‰æ›´ãªã—ï¼‰30 ã ã£ãŸå ´åˆ #my_error_handling ã‚’å®Ÿè¡Œã—ã€ MyApiClient::Error ã‚’ç™ºç”Ÿã•ã›ã‚‹40 ã ã£ãŸå ´åˆ do ~ end ã‚’å®Ÿè¡Œã—ã€ MyApiClient::Error ã‚’ç™ºç”Ÿã•ã›ã‚‹ä»Šå¾Œã¯ã‚¨ãƒ©ãƒ¼æ¤œå‡ºæ™‚ã«ã¯å¸¸ã«ä½•ã‚‰ã‹ã®ä¾‹å¤–ãŒ raise ã•ã‚Œã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã™ã€‚ä¸Šè¨˜ã®ä¾‹ã§ã¯ MyApiClient::Error ãŒç™ºç”Ÿã—ã¾ã™ãŒã€ with ã‚„ block ã¨åŒæ™‚ã« raise ã‚’æŒ‡å®šã™ã‚Œã°ã€ä»»æ„ã®ä¾‹å¤–ã‚¯ãƒ©ã‚¹ãŒç™ºç”Ÿã™ã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã™ã€‚ã“ã‚Œã«ã‚ˆã‚Šã€ with ã‚„ block ã¯ä¾‹å¤–ã®å‰å‡¦ç†ã¨ã„ã†ä½ç½®ä»˜ã‘ã«ãªã‚Šã¾ã™ã€‚ãƒ¦ãƒ¼ã‚¹ã‚±ãƒ¼ã‚¹ã¨ã—ã¦ã¯ãƒ­ã‚°å‡ºåŠ›ã‚„ slack ã¸ã®é€šçŸ¥ãªã©ãŒè€ƒãˆã‚‰ã‚Œã¾ã™ã€‚æ–°æ©Ÿèƒ½ 2. æ¨™æº–ã®ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒ©ãŒç”¨æ„ã•ã‚Œã¾ã—ãŸmy_api_client ã§ã¯ generator æ©Ÿèƒ½ ãŒç”¨æ„ã•ã‚Œã¦ãŠã‚Šã€ $ rails g api_client path/to/resource get:path/to/resource ã‚’å®Ÿè¡Œã™ã‚‹ã¨ä»¥ä¸‹ã®ãƒ•ã‚¡ã‚¤ãƒ«ãŒä½œæˆã•ã‚Œã¾ã™ã€‚create  app/api_clients/application_api_client.rbcreate  app/api_clients/path/to/resource_api_client.rbinvoke  rspeccreate    spec/api_clients/path/to/resource_api_client_spec.rb` ã“ã®æ™‚ã€ application_api_client.rb ã«æ¨™æº–ã®ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒ©ã®ä¾‹ãŒã„ãã¤ã‹è¨˜è¼‰ã•ã‚Œã‚‹ã®ã§ã™ãŒã€ä¾‹ã¨ã„ã†ã‚ˆã‚Šå¿…é ˆã®ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒ©ã ã‚ˆã­ã€ã¨ã„ã†ã“ã¨ã§ã€ my_api_client ã®å†…éƒ¨ã§æ¨™æº–å®Ÿè£…ã™ã‚‹ã‚ˆã†ã«ã—ã¾ã—ãŸã€‚ã“ã‚Œã«ã‚ˆã‚Šã€ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ã‚³ãƒ¼ãƒ‰ 4xx ã¨ 5xx ã®ãƒ¬ã‚¹ãƒãƒ³ã‚¹ã«å¯¾ã—ã¦ã¯æ¨™æº–ã§ä¾‹å¤–ãŒç™ºç”Ÿã™ã‚‹ã‚ˆã†ãªã‚Šã¾ã™ã€‚ã¾ãŸã€ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ç³»ã®ã‚¨ãƒ©ãƒ¼ã«å¯¾ã—ã¦ã‚‚æ¨™æº–ã§ 300 msec é–“éš”ã‚’ç©ºã‘ã¦ 3 å›ãƒªãƒˆãƒ©ã‚¤ãŒè©¦è¡Œã•ã‚Œã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã™ã€‚ï¼ˆãƒªãƒˆãƒ©ã‚¤å‡¦ç†ã‚‚å¾“æ¥ã¯æ˜ç¤ºçš„ãªå®šç¾©ãŒå¿…é ˆã§ã—ãŸï¼‰# å¾“æ¥ã® `application_api_client.rb` ã«å‡ºåŠ›ã•ã‚Œã¦ã„ãŸæ¨™æº–ã®ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒ©ä¾‹error_handling status_code: 400..499, raise: MyApiClient::ClientErrorerror_handling status_code: 500..599, raise: MyApiClient::ServerError# å¾“æ¥ã® `application_api_client.rb` ã«å‡ºåŠ›ã•ã‚Œã¦ã„ãŸæ¨™æº–ã®ãƒªãƒˆãƒ©ã‚¤å‡¦ç†ä¾‹retry_on MyApiClient::NetworkError, wait: 5.seconds, attempts: 3æ¨™æº–ã§å®šç¾©ã•ã‚Œã¦ã„ã‚‹ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒ©ã¯ my_api_client/default_error_handlers.rb ã‹ã‚‰å‚ç…§ã§ãã¾ã™ã€‚error_handling ã¯å¾Œã‹ã‚‰å®šç¾©ã—ãŸç‰©ãŒå„ªå…ˆã•ã‚Œã¾ã™ã®ã§ã€ä¾‹ãˆã°ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ã‚³ãƒ¼ãƒ‰ 400 ã«å¯¾ã—ã¦ã¯ç‹¬è‡ªã®ä¾‹å¤–ã‚¯ãƒ©ã‚¹ã‚’ç™ºç”Ÿã•ã›ã‚‹ã‚ˆã†ã«ã—ãŸã„å ´åˆã€ç¶™æ‰¿å…ˆã®ã‚¯ãƒ©ã‚¹ã§ error_handling status_code: 400, raise: MyErrorClass ã®ã‚ˆã†ã«å®šç¾©ã™ã‚Œã°ã€ MyErrorClass ãŒä¾‹å¤–ã¨ã—ã¦ç™ºç”Ÿã™ã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã™ã€‚æ‰€æ„Ÿç¤¾å†…ã®ãƒ—ãƒ­ãƒ€ã‚¯ãƒˆç”¨ã«ä½œã£ãŸ gem ã§ã™ãŒã€å°‘ã—ãšã¤è‡ªåˆ†ä»¥å¤–ã®ã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢ã‚‚åˆ©ç”¨ã—ã¦ãã‚Œã‚‹ã‚ˆã†ã«ãªã£ã¦ãã¾ã—ãŸã€‚ä¸€æ–¹ã§ã€è‡ªç”±åº¦ãŒé«˜éãã‚‹ã¨ç†ŸçŸ¥ã—ã¦ã„ãªã„ã¨ä½¿ãˆãªã„æ©Ÿèƒ½ãŒå¢—ãˆã¦ã—ã¾ã†ç‚¹ã‚’èª²é¡Œæ„Ÿã¨ã—ã¦æ„Ÿã˜ã‚‹ã‚ˆã†ã«ãªã£ã¦ãã¾ã—ãŸã€‚ãªã‚‹ã¹ãè‡ªç”±åº¦ã®é«˜ã„ gem ã‚’æ„è­˜ã—ã¤ã¤ã€æ¨™æº–ã®çŠ¶æ…‹ã§ã‚‚é«˜åº¦ãªæ©Ÿèƒ½ã®æ©æµã‚’å—ã‘ã‚‰ã‚Œã‚‹çŠ¶æ…‹ã‚’ç›®æŒ‡ã—ã¦ã„ããŸã„ã¨æ€ã„ã¾ã™ã€‚æã‚‰ãæ¬¡ã®æ–°æ©Ÿèƒ½ã¯ async/await ã£ã½ã„æ©Ÿèƒ½ã€ã¾ãŸã¯ sawyer gem ã®ä¾å­˜ã‹ã‚‰ã®è„±å´ãªã‚‹ã¨æ€ã„ã¾ã™ã€‚","link":"https://ryz310.hateblo.jp/entry/2020/03/29/220805","isoDate":"2020-03-29T13:08:05.000Z","dateMiliSeconds":1585487285000,"imageUrl":"https://cdn.blog.st-hatena.com/images/theme/og-image-1500.png","authorName":"ryz310"},{"title":"my_api_client v0.15.0 ã‚’ãƒªãƒªãƒ¼ã‚¹ã—ã¾ã—ãŸğŸš€","content":"\u003cp\u003eãã®å‰ã« \u003ccode\u003ev0.14.0\u003c/code\u003e ã‚‚ãƒªãƒªãƒ¼ã‚¹ã—ã¦ã„ã‚‹ã®ã§ã™ãŒã€ã“ã¡ã‚‰ã¯\u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/%A5%EA%A5%D5%A5%A1%A5%AF%A5%BF%A5%EA%A5%F3%A5%B0\"\u003eãƒªãƒ•ã‚¡ã‚¯ã‚¿ãƒªãƒ³ã‚°\u003c/a\u003eã¨ Integration Test ã®å®Ÿè£…ã ã‘ã§æ–°æ©Ÿèƒ½ã¯ã‚ã‚Šã¾ã›ã‚“ã§ã—ãŸã€‚\nå·®åˆ†ãŒ \u003ccode\u003e+2,799 -1,246\u003c/code\u003e ã‚‚ã‚ã‚‹ã®ã§ä¸­èº«ã¯çµæ§‹æ›¸ãæ›ã‚ã£ã¦ã„ã¾ã™ã€‚\u003c/p\u003e\n\n\u003cp\u003e\u003ca href=\"https://github.com/ryz310/my_api_client/releases/tag/v0.14.0\"\u003eRelease v0.14.0 \u0026middot; ryz310/my_api_client \u0026middot; GitHub\u003c/a\u003e\u003c/p\u003e\n\n\u003cp\u003eIntegration Test ã§ã¯ \u003ca href=\"https://rubyonjets.com/\"\u003eRuby on Jets\u003c/a\u003e ã‚’ä½¿ã£ã¦ \u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/AWS\"\u003eAWS\u003c/a\u003e Lambda ã§ã‚µãƒ¼ãƒãƒ¼ã‚’å»ºã¦ã¦ã€CI ã§ã®ãƒ†ã‚¹ãƒˆã§ \u003ccode\u003emy_api_client\u003c/code\u003e ã‚’ä½¿ã£ã¦å®Ÿéš›ã« HTTP ãƒªã‚¯\u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/%A5%A8%A5%B9\"\u003eã‚¨ã‚¹\u003c/a\u003eãƒˆãŒæˆåŠŸã™ã‚‹ã“ã¨ã‚’ç¢ºèªã—ã¦ã„ã‚‹ã®ã§ã€\u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/%A5%C7%A5%B0%A5%EC\"\u003eãƒ‡ã‚°ãƒ¬\u003c/a\u003eã®å¿ƒé…ãŒéšåˆ†ã¨ç·©å’Œã•ã‚Œã¾ã—ãŸ ğŸ˜Œ\u003c/p\u003e\n\n\u003ch2\u003eæ–°æ©Ÿèƒ½: Pagination \u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/API\"\u003eAPI\u003c/a\u003e ã®ã‚µãƒãƒ¼ãƒˆ\u003c/h2\u003e\n\n\u003cp\u003eã“ã“ã‹ã‚‰ã¯ \u003ccode\u003ev0.15.0\u003c/code\u003e ã®è©±ã«ãªã‚Šã¾ã™ã€‚\u003c/p\u003e\n\n\u003cp\u003e\u003ca href=\"https://github.com/ryz310/my_api_client/releases/tag/v0.15.0\"\u003eRelease v0.15.0 \u0026middot; ryz310/my_api_client \u0026middot; GitHub\u003c/a\u003e\u003c/p\u003e\n\n\u003cp\u003e\u003ccode\u003ev0.15.0\u003c/code\u003e ã®ãƒ¡ã‚¤ãƒ³æ©Ÿèƒ½ãŒ Pagination \u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/API\"\u003eAPI\u003c/a\u003e ã®ã‚µãƒãƒ¼ãƒˆã«ãªã‚Šã¾ã™ã€‚\u003ca href=\"https://jsonapi.org/\"\u003eJSON:API\u003c/a\u003e ã¨ã„ã†ã—ã£ã‹ã‚Šã¨ã—ãŸä»•æ§˜ã‚‚ã‚ã‚‹ã‚ˆã†ã§ã™ãŒã€ \u003ccode\u003emy_api_client\u003c/code\u003e ã§ã¯ãã“ã¾ã§å³å¯†ãªä»•æ§˜ã«å‰‡ã£ã¦ã„ã‚‹è¨³ã§ã¯ãªãã€ãƒ¬ã‚¹ãƒãƒ³ã‚¹ã«å«ã¾ã‚Œã‚‹ URL ã‚’èªè­˜ã—ã¦ enumerable ã« HTTP ãƒªã‚¯\u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/%A5%A8%A5%B9\"\u003eã‚¨ã‚¹\u003c/a\u003eãƒˆã‚’å®Ÿè¡Œã™ã‚‹ã€ã¨ã„ã†ã–ã£ãã‚Šã—ãŸæ©Ÿèƒ½ã«ãªã‚Šã¾ã™ã€‚\nãƒ¬ã‚¹ãƒãƒ³ã‚¹ãƒ˜ãƒƒãƒ€ã® \u003ccode\u003eLink\u003c/code\u003e ãªã©ã§æ¬¡ã®ãƒšãƒ¼ã‚¸ã® URL ã‚’è¿”ã™ã‚±ãƒ¼ã‚¹ã‚‚ã‚ã‚‹ã‚ˆã†ã§ã™ãŒã€ãã¡ã‚‰ã¯ç¾æ™‚ç‚¹ã§ã¯æœªå¯¾å¿œã§ã™ ğŸ™\u003c/p\u003e\n\n\u003cp\u003ePagination \u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/API\"\u003eAPI\u003c/a\u003e ã¨ã„ã†å˜èªã¯ \u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/Django\"\u003eDjango\u003c/a\u003e REST Framework ã® Pagination æ©Ÿèƒ½ã®èª¬æ˜ã§å‡ºã¦ãã¾ã™ã€‚\u003c/p\u003e\n\n\u003cp\u003e\u003ciframe src=\"https://hatenablog-parts.com/embed?url=https%3A%2F%2Fwww.django-rest-framework.org%2Fapi-guide%2Fpagination%2F\" title=\"Pagination - Django REST framework\" class=\"embed-card embed-webcard\" scrolling=\"no\" frameborder=\"0\" style=\"display: block; width: 100%; height: 155px; max-width: 500px; margin: 10px 0px;\"\u003e\u003c/iframe\u003e\u003ccite class=\"hatena-citation\"\u003e\u003ca href=\"https://www.django-rest-framework.org/api-guide/pagination/\"\u003ewww.django-rest-framework.org\u003c/a\u003e\u003c/cite\u003e\u003c/p\u003e\n\n\u003cp\u003eè¦ã™ã‚‹ã«ä¸€åº¦ã®ãƒªã‚¯\u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/%A5%A8%A5%B9\"\u003eã‚¨ã‚¹\u003c/a\u003eãƒˆã§çµæœã‚’å…¨ä»¶å–å¾—ã•ã›ã‚‹ã®ã§ã¯ãªãã€ä¸€å®šã®ä»¶æ•°ã‚’è¿”å´ã—ã€ç¶šãã‚’å–å¾—ã§ãã‚‹ Link ã‚’ä¸€ç·’ã«è¿”å´ã™ã‚‹ \u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/API\"\u003eAPI\u003c/a\u003e ã®ã“ã¨ã§ã™ã­ã€‚\u003c/p\u003e\n\n\u003cp\u003e\u003cstrong\u003eRequest:\u003c/strong\u003e\u003c/p\u003e\n\n\u003cpre class=\"code\" data-lang=\"\" data-unlink\u003eGET https://api.example.org/accounts/?page=4\u003c/pre\u003e\n\n\n\u003cp\u003e\u003cstrong\u003eResponse:\u003c/strong\u003e\u003c/p\u003e\n\n\u003cpre class=\"code lang-json\" data-lang=\"json\" data-unlink\u003e\u003cspan class=\"synError\"\u003eHTTP\u003c/span\u003e 200 \u003cspan class=\"synError\"\u003eOK\u003c/span\u003e\n\u003cspan class=\"synSpecial\"\u003e{\u003c/span\u003e\n    \u0026quot;\u003cspan class=\"synStatement\"\u003ecount\u003c/span\u003e\u0026quot;: 1023\n    \u0026quot;\u003cspan class=\"synStatement\"\u003enext\u003c/span\u003e\u0026quot;: \u0026quot;\u003cspan class=\"synConstant\"\u003ehttps://api.example.org/accounts/?page=5\u003c/span\u003e\u0026quot;,\n    \u0026quot;\u003cspan class=\"synStatement\"\u003eprevious\u003c/span\u003e\u0026quot;: \u0026quot;\u003cspan class=\"synConstant\"\u003ehttps://api.example.org/accounts/?page=3\u003c/span\u003e\u0026quot;,\n    \u0026quot;\u003cspan class=\"synStatement\"\u003eresults\u003c/span\u003e\u0026quot;: \u003cspan class=\"synSpecial\"\u003e[\u003c/span\u003e\n       â€¦\n    \u003cspan class=\"synSpecial\"\u003e]\u003c/span\u003e\n\u003cspan class=\"synSpecial\"\u003e}\u003c/span\u003e\n\u003c/pre\u003e\n\n\n\u003ch3\u003eä½¿ã„æ–¹\u003c/h3\u003e\n\n\u003cp\u003e\u003ccode\u003emy_api_client\u003c/code\u003e ã§ã®ä½¿ã„æ–¹ã¯ä»¥ä¸‹ã®ã‚ˆã†ã«ãªã‚Šã¾ã™ã€‚\u003c/p\u003e\n\n\u003cpre class=\"code lang-ruby\" data-lang=\"ruby\" data-unlink\u003e\u003cspan class=\"synPreProc\"\u003eclass\u003c/span\u003e \u003cspan class=\"synType\"\u003eMyPaginationApiClient\u003c/span\u003e \u0026lt; \u003cspan class=\"synType\"\u003eApplicationApiClient\u003c/span\u003e\n  endpoint \u003cspan class=\"synSpecial\"\u003e'\u003c/span\u003e\u003cspan class=\"synConstant\"\u003ehttps://example.com/v1\u003c/span\u003e\u003cspan class=\"synSpecial\"\u003e'\u003c/span\u003e\n\n  \u003cspan class=\"synComment\"\u003e# GET pagination?page=1\u003c/span\u003e\n  \u003cspan class=\"synPreProc\"\u003edef\u003c/span\u003e \u003cspan class=\"synIdentifier\"\u003epagination\u003c/span\u003e\n    pageable_get \u003cspan class=\"synSpecial\"\u003e'\u003c/span\u003e\u003cspan class=\"synConstant\"\u003epagination\u003c/span\u003e\u003cspan class=\"synSpecial\"\u003e'\u003c/span\u003e, \u003cspan class=\"synConstant\"\u003epaging\u003c/span\u003e: \u003cspan class=\"synSpecial\"\u003e'\u003c/span\u003e\u003cspan class=\"synConstant\"\u003e$.links.next\u003c/span\u003e\u003cspan class=\"synSpecial\"\u003e'\u003c/span\u003e, \u003cspan class=\"synConstant\"\u003eheaders\u003c/span\u003e: headers, \u003cspan class=\"synConstant\"\u003equery\u003c/span\u003e: { \u003cspan class=\"synConstant\"\u003epage\u003c/span\u003e: \u003cspan class=\"synConstant\"\u003e1\u003c/span\u003e }\n  \u003cspan class=\"synPreProc\"\u003eend\u003c/span\u003e\n\n  \u003cspan class=\"synStatement\"\u003eprivate\u003c/span\u003e\n\n  \u003cspan class=\"synPreProc\"\u003edef\u003c/span\u003e \u003cspan class=\"synIdentifier\"\u003eheaders\u003c/span\u003e\n    { \u003cspan class=\"synSpecial\"\u003e'\u003c/span\u003e\u003cspan class=\"synConstant\"\u003eContent-Type\u003c/span\u003e\u003cspan class=\"synSpecial\"\u003e'\u003c/span\u003e: \u003cspan class=\"synSpecial\"\u003e'\u003c/span\u003e\u003cspan class=\"synConstant\"\u003eapplication/json;charset=UTF-8\u003c/span\u003e\u003cspan class=\"synSpecial\"\u003e'\u003c/span\u003e }\n  \u003cspan class=\"synPreProc\"\u003eend\u003c/span\u003e\n\u003cspan class=\"synPreProc\"\u003eend\u003c/span\u003e\n\u003c/pre\u003e\n\n\n\u003cp\u003eé€šå¸¸ã§ã‚ã‚Œã° \u003ccode\u003e#get\u003c/code\u003e ã‚’ä½¿ã£ã¦ HTTP ãƒªã‚¯\u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/%A5%A8%A5%B9\"\u003eã‚¨ã‚¹\u003c/a\u003eãƒˆã‚’å®Ÿè¡Œã•ã›ã‚‹ã®ã§ã™ãŒã€ã“ã“ã§ã¯ \u003ccode\u003e#pageable_get\u003c/code\u003e ã¨ã„ã†ãƒ¡ã‚½ãƒƒãƒ‰ã‚’ä½¿ç”¨ã—ã¦ã„ã¾ã™ã€‚ \u003ccode\u003e#pageable_get\u003c/code\u003e ã ã¨é•·ã„ã®ã§ \u003ccode\u003e#pget\u003c/code\u003e ã¨ã„ã†\u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/%A5%A8%A5%A4%A5%EA%A5%A2%A5%B9\"\u003eã‚¨ã‚¤ãƒªã‚¢ã‚¹\u003c/a\u003eã‚‚ç”¨æ„ã—ã¦ã„ã¾ã™ã€‚\nã¾ãŸã€ \u003ccode\u003epaging\u003c/code\u003e ã¨ã„ã†ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰å¼•æ•°ã‚‚æ–°ãŸã«å‡ºã¦ãã¾ã—ãŸã€‚ \u003ccode\u003epaging\u003c/code\u003e ã§ã¯ãƒ¬ã‚¹ãƒãƒ³ã‚¹ã®ã©ã®éƒ¨åˆ†ã«æ¬¡ã®ãƒšãƒ¼ã‚¸ã® URL ãŒå«ã¾ã‚Œã‚‹ã‹ã‚’ JSONPath expression ã§æŒ‡å®šã—ã¾ã™ã€‚\u003c/p\u003e\n\n\u003cp\u003e\u003ciframe src=\"https://hatenablog-parts.com/embed?url=https%3A%2F%2Fgoessner.net%2Farticles%2FJsonPath%2Findex.html%23e2\" title=\"JSONPath - XPath for JSON\" class=\"embed-card embed-webcard\" scrolling=\"no\" frameborder=\"0\" style=\"display: block; width: 100%; height: 155px; max-width: 500px; margin: 10px 0px;\"\u003e\u003c/iframe\u003e\u003ccite class=\"hatena-citation\"\u003e\u003ca href=\"https://goessner.net/articles/JsonPath/index.html#e2\"\u003egoessner.net\u003c/a\u003e\u003c/cite\u003e\u003c/p\u003e\n\n\u003cp\u003eä»¥ä¸‹ã®ã‚ˆã†ãª \u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/JSON\"\u003eJSON\u003c/a\u003e ã§ã‚ã‚Œã°ã€ \u003ccode\u003e$.links.next\u003c/code\u003e ã¨ã„ã† JSONPath expression ã¯ \u003ccode\u003e\"https://example.com/pagination?page=3\"\u003c/code\u003e ã‚’å–å¾—ã—ã¾ã™ã€‚\u003c/p\u003e\n\n\u003cpre class=\"code lang-json\" data-lang=\"json\" data-unlink\u003e\u003cspan class=\"synSpecial\"\u003e{\u003c/span\u003e\n  \u0026quot;\u003cspan class=\"synStatement\"\u003elinks\u003c/span\u003e\u0026quot;: \u003cspan class=\"synSpecial\"\u003e{\u003c/span\u003e\n    \u0026quot;\u003cspan class=\"synStatement\"\u003enext\u003c/span\u003e\u0026quot;: \u0026quot;\u003cspan class=\"synConstant\"\u003ehttps://example.com/pagination?page=3\u003c/span\u003e\u0026quot;,\n    \u0026quot;\u003cspan class=\"synStatement\"\u003eprevious\u003c/span\u003e\u0026quot;: \u0026quot;\u003cspan class=\"synConstant\"\u003ehttps://example.com/pagination?page=1\u003c/span\u003e\u0026quot;\u003cspan class=\"synError\"\u003e,\u003c/span\u003e\n\u003cspan class=\"synError\"\u003e  }\u003c/span\u003e,\n  \u0026quot;\u003cspan class=\"synStatement\"\u003epage\u003c/span\u003e\u0026quot;: \u003cspan class=\"synConstant\"\u003e2\u003c/span\u003e\n}\n\u003c/pre\u003e\n\n\n\u003cp\u003eä½œæˆã—ãŸ \u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/API\"\u003eAPI\u003c/a\u003e Client ã¯ä»¥ä¸‹ã®ã‚ˆã†ã«ä½¿ç”¨ã§ãã¾ã™ã€‚\u003c/p\u003e\n\n\u003cpre class=\"code lang-ruby\" data-lang=\"ruby\" data-unlink\u003eapi_clinet = \u003cspan class=\"synType\"\u003eMyPaginationApiClient\u003c/span\u003e.new\napi_clinet.pagination.each \u003cspan class=\"synStatement\"\u003edo\u003c/span\u003e |\u003cspan class=\"synIdentifier\"\u003eresponse\u003c/span\u003e|\n  \u003cspan class=\"synComment\"\u003e# Do something.\u003c/span\u003e\n\u003cspan class=\"synStatement\"\u003eend\u003c/span\u003e\n\np = api_clinet.pagination\np.next \u003cspan class=\"synComment\"\u003e# =\u0026gt; 1st page result\u003c/span\u003e\np.next \u003cspan class=\"synComment\"\u003e# =\u0026gt; 2nd page result\u003c/span\u003e\np.next \u003cspan class=\"synComment\"\u003e# =\u0026gt; 3rd page result\u003c/span\u003e\n\u003c/pre\u003e\n\n\n\u003ch3\u003eçµæœã¯ \u003ccode\u003eEnumerator::Lazy\u003c/code\u003e ã§è¿”å´ã•ã‚Œã‚‹\u003c/h3\u003e\n\n\u003cp\u003e\u003ccode\u003e#pageable_get\u003c/code\u003e ã¯ \u003ccode\u003eEnumerator::Lazy\u003c/code\u003e ã‚’è¿”å´ã™ã‚‹ã®ã§ã€ \u003ccode\u003eEnumerable\u003c/code\u003e ã§å®šç¾©ã•ã‚Œã¦ã„ã‚‹ãƒ¡ã‚½ãƒƒãƒ‰ã¯ä¸€é€šã‚Šåˆ©ç”¨å¯èƒ½ã§ã™ã€‚\u003c/p\u003e\n\n\u003cp\u003e\u003ciframe src=\"https://hatenablog-parts.com/embed?url=https%3A%2F%2Fdocs.ruby-lang.org%2Fja%2Flatest%2Fclass%2FEnumerator%3D3a%3D3aLazy.html\" title=\"class Enumerator::Lazy (Ruby 2.7.0 ãƒªãƒ•ã‚¡ãƒ¬ãƒ³ã‚¹ãƒãƒ‹ãƒ¥ã‚¢ãƒ«)\" class=\"embed-card embed-webcard\" scrolling=\"no\" frameborder=\"0\" style=\"display: block; width: 100%; height: 155px; max-width: 500px; margin: 10px 0px;\"\u003e\u003c/iframe\u003e\u003ccite class=\"hatena-citation\"\u003e\u003ca href=\"https://docs.ruby-lang.org/ja/latest/class/Enumerator=3a=3aLazy.html\"\u003edocs.ruby-lang.org\u003c/a\u003e\u003c/cite\u003e\u003c/p\u003e\n\n\u003cp\u003e\u003ccode\u003eEnumerator\u003c/code\u003e ã§è¿”ã—ã¦ã—ã¾ã†ã¨ \u003ccode\u003e#take\u003c/code\u003e ã§ 100 ãƒšãƒ¼ã‚¸ç›®ã¾ã§çµæœã‚’å–å¾—ã™ã‚‹ã‚ˆã†ãªå‡¦ç†ã‚’è¨˜è¿°ã—ãŸã¨ãã«ã€\u003c/p\u003e\n\n\u003col\u003e\n\u003cli\u003e100 ãƒšãƒ¼ã‚¸åˆ†ã® HTTP ãƒªã‚¯\u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/%A5%A8%A5%B9\"\u003eã‚¨ã‚¹\u003c/a\u003eãƒˆã‚’å®Ÿè¡Œ\u003c/li\u003e\n\u003cli\u003eçµæœã‚’ \u003ccode\u003e#each\u003c/code\u003e ã§å›ã™\u003c/li\u003e\n\u003c/ol\u003e\n\n\n\u003cp\u003eã¨ã„ã†å‹•ãã«ãªã‚Šã€ 100 å›åˆ†ã® HTTP ãƒªã‚¯\u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/%A5%A8%A5%B9\"\u003eã‚¨ã‚¹\u003c/a\u003eãƒˆãŒå®Œäº†ã™ã‚‹ã¾ã§æ¬¡ã®å‡¦ç†ã«ç§»ã‚‹ã“ã¨ãŒã§ãã¾ã›ã‚“ã€‚\u003c/p\u003e\n\n\u003cp\u003e\u003ccode\u003eEnumerator::Lazy\u003c/code\u003e ã§ã‚ã‚Œã°ã€\u003c/p\u003e\n\n\u003col\u003e\n\u003cli\u003e1 ãƒšãƒ¼ã‚¸ç›®ã® HTTP ãƒªã‚¯\u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/%A5%A8%A5%B9\"\u003eã‚¨ã‚¹\u003c/a\u003eãƒˆã‚’å®Ÿè¡Œ\u003c/li\u003e\n\u003cli\u003eçµæœã‚’å‡¦ç†ã™ã‚‹\u003c/li\u003e\n\u003cli\u003e2ãƒšãƒ¼ã‚¸ç›®ã® HTTP ãƒªã‚¯\u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/%A5%A8%A5%B9\"\u003eã‚¨ã‚¹\u003c/a\u003eãƒˆã‚’å®Ÿè¡Œ\u003c/li\u003e\n\u003cli\u003eçµæœã‚’å‡¦ç†ã™ã‚‹\u003c/li\u003e\n\u003cli\u003e...\u003c/li\u003e\n\u003c/ol\u003e\n\n\n\u003cp\u003eã¨ã„ã†å‹•ãã«ãªã£ã¦ãã‚Œã¾ã™ã€‚ä¾¿åˆ©ã§ã™ã­ âœ¨\u003c/p\u003e\n\n\u003cp\u003e\u003ccode\u003eEnumerator\u003c/code\u003e ã¨ \u003ccode\u003eEnumerator::Lazy\u003c/code\u003e ã®é•ã„ã¯ä»¥ä¸‹ã®è¨˜äº‹ãŒå‚è€ƒã«ãªã‚‹ã¨æ€ã„ã¾ã™ã€‚\u003c/p\u003e\n\n\u003cp\u003e\u003ciframe src=\"https://hatenablog-parts.com/embed?url=https%3A%2F%2Fqiita.com%2Fgam0022%2Fitems%2F8acfc0c674b96060c03f\" title=\"Enumeratorã¨Enumerator::Lazyã®é•ã„ - Qiita\" class=\"embed-card embed-webcard\" scrolling=\"no\" frameborder=\"0\" style=\"display: block; width: 100%; height: 155px; max-width: 500px; margin: 10px 0px;\"\u003e\u003c/iframe\u003e\u003ccite class=\"hatena-citation\"\u003e\u003ca href=\"https://qiita.com/gam0022/items/8acfc0c674b96060c03f\"\u003eqiita.com\u003c/a\u003e\u003c/cite\u003e\u003c/p\u003e\n","contentSnippet":"ãã®å‰ã« v0.14.0 ã‚‚ãƒªãƒªãƒ¼ã‚¹ã—ã¦ã„ã‚‹ã®ã§ã™ãŒã€ã“ã¡ã‚‰ã¯ãƒªãƒ•ã‚¡ã‚¯ã‚¿ãƒªãƒ³ã‚°ã¨ Integration Test ã®å®Ÿè£…ã ã‘ã§æ–°æ©Ÿèƒ½ã¯ã‚ã‚Šã¾ã›ã‚“ã§ã—ãŸã€‚å·®åˆ†ãŒ +2,799 -1,246 ã‚‚ã‚ã‚‹ã®ã§ä¸­èº«ã¯çµæ§‹æ›¸ãæ›ã‚ã£ã¦ã„ã¾ã™ã€‚Release v0.14.0 Â· ryz310/my_api_client Â· GitHubIntegration Test ã§ã¯ Ruby on Jets ã‚’ä½¿ã£ã¦ AWS Lambda ã§ã‚µãƒ¼ãƒãƒ¼ã‚’å»ºã¦ã¦ã€CI ã§ã®ãƒ†ã‚¹ãƒˆã§ my_api_client ã‚’ä½¿ã£ã¦å®Ÿéš›ã« HTTP ãƒªã‚¯ã‚¨ã‚¹ãƒˆãŒæˆåŠŸã™ã‚‹ã“ã¨ã‚’ç¢ºèªã—ã¦ã„ã‚‹ã®ã§ã€ãƒ‡ã‚°ãƒ¬ã®å¿ƒé…ãŒéšåˆ†ã¨ç·©å’Œã•ã‚Œã¾ã—ãŸ ğŸ˜Œæ–°æ©Ÿèƒ½: Pagination API ã®ã‚µãƒãƒ¼ãƒˆã“ã“ã‹ã‚‰ã¯ v0.15.0 ã®è©±ã«ãªã‚Šã¾ã™ã€‚Release v0.15.0 Â· ryz310/my_api_client Â· GitHubv0.15.0 ã®ãƒ¡ã‚¤ãƒ³æ©Ÿèƒ½ãŒ Pagination API ã®ã‚µãƒãƒ¼ãƒˆã«ãªã‚Šã¾ã™ã€‚JSON:API ã¨ã„ã†ã—ã£ã‹ã‚Šã¨ã—ãŸä»•æ§˜ã‚‚ã‚ã‚‹ã‚ˆã†ã§ã™ãŒã€ my_api_client ã§ã¯ãã“ã¾ã§å³å¯†ãªä»•æ§˜ã«å‰‡ã£ã¦ã„ã‚‹è¨³ã§ã¯ãªãã€ãƒ¬ã‚¹ãƒãƒ³ã‚¹ã«å«ã¾ã‚Œã‚‹ URL ã‚’èªè­˜ã—ã¦ enumerable ã« HTTP ãƒªã‚¯ã‚¨ã‚¹ãƒˆã‚’å®Ÿè¡Œã™ã‚‹ã€ã¨ã„ã†ã–ã£ãã‚Šã—ãŸæ©Ÿèƒ½ã«ãªã‚Šã¾ã™ã€‚ãƒ¬ã‚¹ãƒãƒ³ã‚¹ãƒ˜ãƒƒãƒ€ã® Link ãªã©ã§æ¬¡ã®ãƒšãƒ¼ã‚¸ã® URL ã‚’è¿”ã™ã‚±ãƒ¼ã‚¹ã‚‚ã‚ã‚‹ã‚ˆã†ã§ã™ãŒã€ãã¡ã‚‰ã¯ç¾æ™‚ç‚¹ã§ã¯æœªå¯¾å¿œã§ã™ ğŸ™Pagination API ã¨ã„ã†å˜èªã¯ Django REST Framework ã® Pagination æ©Ÿèƒ½ã®èª¬æ˜ã§å‡ºã¦ãã¾ã™ã€‚www.django-rest-framework.orgè¦ã™ã‚‹ã«ä¸€åº¦ã®ãƒªã‚¯ã‚¨ã‚¹ãƒˆã§çµæœã‚’å…¨ä»¶å–å¾—ã•ã›ã‚‹ã®ã§ã¯ãªãã€ä¸€å®šã®ä»¶æ•°ã‚’è¿”å´ã—ã€ç¶šãã‚’å–å¾—ã§ãã‚‹ Link ã‚’ä¸€ç·’ã«è¿”å´ã™ã‚‹ API ã®ã“ã¨ã§ã™ã­ã€‚Request:GET https://api.example.org/accounts/?page=4Response:HTTP 200 OK{    \"count\": 1023    \"next\": \"https://api.example.org/accounts/?page=5\",    \"previous\": \"https://api.example.org/accounts/?page=3\",    \"results\": [       â€¦    ]}ä½¿ã„æ–¹my_api_client ã§ã®ä½¿ã„æ–¹ã¯ä»¥ä¸‹ã®ã‚ˆã†ã«ãªã‚Šã¾ã™ã€‚class MyPaginationApiClient \u003c ApplicationApiClient  endpoint 'https://example.com/v1'  # GET pagination?page=1  def pagination    pageable_get 'pagination', paging: '$.links.next', headers: headers, query: { page: 1 }  end  private  def headers    { 'Content-Type': 'application/json;charset=UTF-8' }  endendé€šå¸¸ã§ã‚ã‚Œã° #get ã‚’ä½¿ã£ã¦ HTTP ãƒªã‚¯ã‚¨ã‚¹ãƒˆã‚’å®Ÿè¡Œã•ã›ã‚‹ã®ã§ã™ãŒã€ã“ã“ã§ã¯ #pageable_get ã¨ã„ã†ãƒ¡ã‚½ãƒƒãƒ‰ã‚’ä½¿ç”¨ã—ã¦ã„ã¾ã™ã€‚ #pageable_get ã ã¨é•·ã„ã®ã§ #pget ã¨ã„ã†ã‚¨ã‚¤ãƒªã‚¢ã‚¹ã‚‚ç”¨æ„ã—ã¦ã„ã¾ã™ã€‚ã¾ãŸã€ paging ã¨ã„ã†ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰å¼•æ•°ã‚‚æ–°ãŸã«å‡ºã¦ãã¾ã—ãŸã€‚ paging ã§ã¯ãƒ¬ã‚¹ãƒãƒ³ã‚¹ã®ã©ã®éƒ¨åˆ†ã«æ¬¡ã®ãƒšãƒ¼ã‚¸ã® URL ãŒå«ã¾ã‚Œã‚‹ã‹ã‚’ JSONPath expression ã§æŒ‡å®šã—ã¾ã™ã€‚goessner.netä»¥ä¸‹ã®ã‚ˆã†ãª JSON ã§ã‚ã‚Œã°ã€ $.links.next ã¨ã„ã† JSONPath expression ã¯ \"https://example.com/pagination?page=3\" ã‚’å–å¾—ã—ã¾ã™ã€‚{  \"links\": {    \"next\": \"https://example.com/pagination?page=3\",    \"previous\": \"https://example.com/pagination?page=1\",  },  \"page\": 2}ä½œæˆã—ãŸ API Client ã¯ä»¥ä¸‹ã®ã‚ˆã†ã«ä½¿ç”¨ã§ãã¾ã™ã€‚api_clinet = MyPaginationApiClient.newapi_clinet.pagination.each do |response|  # Do something.endp = api_clinet.paginationp.next # =\u003e 1st page resultp.next # =\u003e 2nd page resultp.next # =\u003e 3rd page resultçµæœã¯ Enumerator::Lazy ã§è¿”å´ã•ã‚Œã‚‹#pageable_get ã¯ Enumerator::Lazy ã‚’è¿”å´ã™ã‚‹ã®ã§ã€ Enumerable ã§å®šç¾©ã•ã‚Œã¦ã„ã‚‹ãƒ¡ã‚½ãƒƒãƒ‰ã¯ä¸€é€šã‚Šåˆ©ç”¨å¯èƒ½ã§ã™ã€‚docs.ruby-lang.orgEnumerator ã§è¿”ã—ã¦ã—ã¾ã†ã¨ #take ã§ 100 ãƒšãƒ¼ã‚¸ç›®ã¾ã§çµæœã‚’å–å¾—ã™ã‚‹ã‚ˆã†ãªå‡¦ç†ã‚’è¨˜è¿°ã—ãŸã¨ãã«ã€100 ãƒšãƒ¼ã‚¸åˆ†ã® HTTP ãƒªã‚¯ã‚¨ã‚¹ãƒˆã‚’å®Ÿè¡Œçµæœã‚’ #each ã§å›ã™ã¨ã„ã†å‹•ãã«ãªã‚Šã€ 100 å›åˆ†ã® HTTP ãƒªã‚¯ã‚¨ã‚¹ãƒˆãŒå®Œäº†ã™ã‚‹ã¾ã§æ¬¡ã®å‡¦ç†ã«ç§»ã‚‹ã“ã¨ãŒã§ãã¾ã›ã‚“ã€‚Enumerator::Lazy ã§ã‚ã‚Œã°ã€1 ãƒšãƒ¼ã‚¸ç›®ã® HTTP ãƒªã‚¯ã‚¨ã‚¹ãƒˆã‚’å®Ÿè¡Œçµæœã‚’å‡¦ç†ã™ã‚‹2ãƒšãƒ¼ã‚¸ç›®ã® HTTP ãƒªã‚¯ã‚¨ã‚¹ãƒˆã‚’å®Ÿè¡Œçµæœã‚’å‡¦ç†ã™ã‚‹...ã¨ã„ã†å‹•ãã«ãªã£ã¦ãã‚Œã¾ã™ã€‚ä¾¿åˆ©ã§ã™ã­ âœ¨Enumerator ã¨ Enumerator::Lazy ã®é•ã„ã¯ä»¥ä¸‹ã®è¨˜äº‹ãŒå‚è€ƒã«ãªã‚‹ã¨æ€ã„ã¾ã™ã€‚qiita.com","link":"https://ryz310.hateblo.jp/entry/2020/03/21/163849","isoDate":"2020-03-21T07:38:49.000Z","dateMiliSeconds":1584776329000,"imageUrl":"https://cdn.blog.st-hatena.com/images/theme/og-image-1500.png","authorName":"ryz310"},{"title":"é§†ã‘è¾¼ã¿ã§ Chrome 80 ã® SameSite=None; Secure ã®å¯¾å¿œã‚’ã‚„ã£ãŸğŸª","content":"\u003cp\u003eã”å­˜çŸ¥ã®æ–¹ã‚‚å¤šã„ã‹ã¨æ€ã„ã¾ã™ãŒã€ \u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/Chrome\"\u003eChrome\u003c/a\u003e 80 ã‹ã‚‰ 3rd Party \u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/Cookie\"\u003eCookie\u003c/a\u003e ã®å–ã‚Šæ‰±ã„ãŒå³ã—ããªã‚Šã€ç‰¹ã«æŒ‡å®šãŒãªã„ã¨å¤–éƒ¨ã‚µã‚¤ãƒˆã® \u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/Cookie\"\u003eCookie\u003c/a\u003e ã¯ \u003cstrong\u003ePOSTãƒ»iframeãƒ»XHR ç­‰ã®ãƒªã‚¯\u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/%A5%A8%A5%B9\"\u003eã‚¨ã‚¹\u003c/a\u003eãƒˆ\u003c/strong\u003e  ã§é€ã‚‰ã‚Œãªããªã‚Šã¾ã™ã€‚\u003c/p\u003e\n\n\u003cp\u003e\u003ciframe src=\"https://hatenablog-parts.com/embed?url=https%3A%2F%2Fdevelopers-jp.googleblog.com%2F2019%2F11%2Fcookie-samesitenone-secure.html\" title=\"æ–°ã—ã„ Cookie è¨­å®š SameSite=None; Secure ã®æº–å‚™ã‚’å§‹ã‚ã¾ã—ã‚‡ã†\" class=\"embed-card embed-webcard\" scrolling=\"no\" frameborder=\"0\" style=\"display: block; width: 100%; height: 155px; max-width: 500px; margin: 10px 0px;\"\u003e\u003c/iframe\u003e\u003ccite class=\"hatena-citation\"\u003e\u003ca href=\"https://developers-jp.googleblog.com/2019/11/cookie-samesitenone-secure.html\"\u003edevelopers-jp.googleblog.com\u003c/a\u003e\u003c/cite\u003e\u003c/p\u003e\n\n\u003cblockquote\u003e\u003cp\u003e2 æœˆã® \u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/Chrome\"\u003eChrome\u003c/a\u003e 80 ä»¥é™ã€SameSite å€¤ãŒå®£è¨€ã•ã‚Œã¦ã„ãªã„ \u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/Cookie\"\u003eCookie\u003c/a\u003e ã¯ SameSite=Lax ã¨ã—ã¦æ‰±ã‚ã‚Œã¾ã™ã€‚å¤–éƒ¨ã‚¢ã‚¯ã‚»ã‚¹ã¯ã€SameSite=None; Secure è¨­å®šã®ã‚ã‚‹ \u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/Cookie\"\u003eCookie\u003c/a\u003e ã®ã¿å¯èƒ½ã«ãªã‚Šã¾ã™ã€‚ãŸã ã—ã€ã“ã‚Œã‚‰ãŒå®‰å…¨ãªæ¥ç¶šã‹ã‚‰ã‚¢ã‚¯ã‚»ã‚¹ã•ã‚Œã‚‹ã“ã¨ãŒæ¡ä»¶ã§ã™ã€‚\u003c/p\u003e\u003c/blockquote\u003e\n\n\u003cp\u003eã¨ã¯ã„ãˆå®Œå…¨ã«ç„¡åŠ¹ã«ãªã‚‹ã‚ã‘ã§ã¯ãªãã€ \u003ccode\u003eSameSite\u003c/code\u003e ã¨ã„ã†å±æ€§ãŒå®£è¨€ã•ã‚Œã¦ã„ãªã„ \u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/Cookie\"\u003eCookie\u003c/a\u003e ã¯ \u003ccode\u003eLax\u003c/code\u003e ã¨ã„ã†åŒºåˆ†ãŒãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã§é©ç”¨ã•ã‚Œã‚‹ã¨ã„ã†ç‰©ãªã®ã§ã€ã‚µãƒ¼ãƒãƒ¼ã‹ã‚‰è¿”ã™ \u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/Cookie\"\u003eCookie\u003c/a\u003e ã«å¯¾ã—ã¦æ˜ç¤ºçš„ã« \u003ccode\u003eSameSite\u003c/code\u003e ã‚’ \u003ccode\u003eNone\u003c/code\u003e ã«æŒ‡å®šã—ã¦ã€ã‹ã¤ \u003ccode\u003eSecure\u003c/code\u003e ã¨ã„ã†å±æ€§ã‚’ä»˜ä¸ã™ã‚Œã°ã€å¾“æ¥ã©ãŠã‚Š \u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/Cookie\"\u003eCookie\u003c/a\u003e ãŒé€ä¿¡ã•ã‚Œã¾ã™ã€‚\u003c/p\u003e\n\n\u003cp\u003eå»å¹´ã®ç§‹ãã‚‰ã„ã«ã‚‚ã“ã® \u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/Cookie\"\u003eCookie\u003c/a\u003e ã®å¯¾å¿œãŒå¿…è¦ã‹ã©ã†ã‹ã€ä¼šç¤¾ã§èª¿æŸ»ã—ã¦ã„ãŸã‚“ã§ã™ãŒã€ãã®æ™‚ç‚¹ã§ã¯å½±éŸ¿ã‚’å—ã‘ã‚‹ç®‡æ‰€ãŒç„¡ãã¦ã€ç‰¹ã«ä½•ã‚‚å¯¾å¿œã›ãšã«ã‚¹ãƒ«ãƒ¼ã—ã¦ã„ãŸã‚“ã§ã™ãŒã€ç¾åœ¨é–‹ç™ºã—ã¦ã‚‹æ–°æ©Ÿèƒ½ãŒ\u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/%A4%BF%A4%DE%A4%BF%A4%DE%A4%B3\"\u003eãŸã¾ãŸã¾ã“\u003c/a\u003eã®å½±éŸ¿ã‚’å—ã‘ã‚‹æ©Ÿèƒ½ã ã£ãŸãŸã‚ã€æ€¥é½å¯¾å¿œã™ã‚‹ã“ã¨ã«ãªã‚Šã¾ã—ãŸã€‚\u003c/p\u003e\n\n\u003cp\u003eçµæ§‹å³ã—ã„ãªã€ã¨æ€ã£ãŸã®ã¯ã€ã“ã‚ŒãŒåŸå› ã§å‹•ã‹ãªã„ã“ã¨ã«æ°—ä»˜ãã®ãŒçµæ§‹é›£ã—ã„ã‚“ã§ã™ã‚ˆã­ã€‚\n\u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/%A5%B7%A5%F3%A5%B0%A5%EB%A5%B5%A5%A4%A5%F3%A5%AA%A5%F3\"\u003eã‚·ãƒ³ã‚°ãƒ«ã‚µã‚¤ãƒ³ã‚ªãƒ³\u003c/a\u003eã¿ãŸã„ãªæ©Ÿèƒ½ã‚’ä½œã£ã¦ã‚‹ã¨\u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/%A5%C9%A5%E1%A5%A4%A5%F3\"\u003eãƒ‰ãƒ¡ã‚¤ãƒ³\u003c/a\u003eãŒç•°ãªã‚‹ã®ã§ 3rd Party \u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/Cookie\"\u003eCookie\u003c/a\u003e ã®æ‰±ã„ã«ãªã‚Šã¾ã™ã€‚\nãã—ã¦ \u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/Cookie\"\u003eCookie\u003c/a\u003e ã«å…¥ã£ã¦ã„ã‚‹ã¯ãšã® Session ID ãŒé€ã‚‰ã‚Œã¦ã“ãªã„ã®ã§ã€ã‚µãƒ¼ãƒãƒ¼å´ã§ Session ãŒè¦‹ã¤ã‹ã‚‰ãšã«ã‚¨ãƒ©ãƒ¼ã€‚\u003c/p\u003e\n\n\u003cp\u003eè‡ªåˆ†ã®æ‰‹å…ƒã® \u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/Chrome\"\u003eChrome\u003c/a\u003e ã¯ 79 ã§ã€ã¾ã ä¸Šè¨˜ã®åˆ¶é™ãŒå…¥ã£ã¦ã„ãªã‹ã£ãŸã‚“ã§ã™ãŒã€ä»¥å‰å½±éŸ¿ç¯„å›²ã‚’èª¿æŸ»ã—ãŸæ™‚ã« \u003ccode\u003echrome://flags\u003c/code\u003e ã‹ã‚‰æœ‰åŠ¹ã«ã™ã‚‹ãƒ•ãƒ©ã‚°ã‚’ ON ã«ã—ã¦ã„ãŸã®ã§ã€ä»–ã®ã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢ã®ç’°å¢ƒã§ã¯å‹•ä½œã™ã‚‹ã‘ã©ã€è‡ªåˆ†ã ã‘å‹•ã‹ãªã„ã¨ã„ã†ã“ã¨ã«ãªã‚Šã€ã‚‚ã—ã‹ã—ã¦ã€ã¨æ€ã£ã¦æ°—ä»˜ã„ãŸæ„Ÿã˜ã§ã™ã€‚\u003c/p\u003e\n\n\u003cp\u003eãƒªãƒªãƒ¼ã‚¹å¾Œã«æ°—ä»˜ã„ã¦ãŸã‚‰ãƒ¤ãƒã‹ã£ãŸã§ã™ã­ã€‚ã€‚\u003c/p\u003e\n\n\u003cp\u003eã§ã€ã“ã†ã„ã†å•é¡Œã¯ \u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/Rails\"\u003eRails\u003c/a\u003e ã¿ãŸã„ãª\u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/%A5%D5%A5%EC%A1%BC%A5%E0%A5%EF%A1%BC%A5%AF\"\u003eãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯\u003c/a\u003eã§å¯¾å¿œã—ã¦ãã‚Œã‚ˆã£ã¦æ°—æŒã¡ã«ãªã‚‹ã‚“ã§ã™ãŒã€ã¡ã‚ƒã‚“ã¨å¯¾å¿œã™ã‚‹ PR ã¯ä½œã‚‰ã‚Œã¦ã„ã¦ã€ã™ã§ã« merge ã‚‚ã•ã‚Œã¦ã„ã¾ã™ã€‚\u003c/p\u003e\n\n\u003cp\u003e\u003ciframe src=\"https://hatenablog-parts.com/embed?url=https%3A%2F%2Fgithub.com%2Frails%2Frails%2Fpull%2F28297\" title=\"Add SameSite to Cookies by cfabianski Â· Pull Request #28297 Â· rails/rails\" class=\"embed-card embed-webcard\" scrolling=\"no\" frameborder=\"0\" style=\"display: block; width: 100%; height: 155px; max-width: 500px; margin: 10px 0px;\"\u003e\u003c/iframe\u003e\u003ccite class=\"hatena-citation\"\u003e\u003ca href=\"https://github.com/rails/rails/pull/28297\"\u003egithub.com\u003c/a\u003e\u003c/cite\u003e\u003c/p\u003e\n\n\u003cp\u003eã§ã™ãŒã€ 2020/2/20 ç¾åœ¨ã€ã“ã‚Œã‚’åæ˜ ã—ãŸ \u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/Rails\"\u003eRails\u003c/a\u003e ã¯ã¾ã ãƒªãƒªãƒ¼ã‚¹ã•ã‚Œã¦ã„ãªã„ã¿ãŸã„ã§ã™ã­ã€‚ï¼ˆæœ€æ–°ãŒ 2019/12/19 ã«ãƒªãƒªãƒ¼ã‚¹ã•ã‚ŒãŸ \u003ccode\u003e6.0.2.1\u003c/code\u003e ï¼‰\nã¾ãŸã€ \u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/Rails\"\u003eRails\u003c/a\u003e 5.2 ã«åæ˜ ã•ã‚Œã‚‹ã‹ã©ã†ã‹ã¯å¾®å¦™ãªæ„Ÿã˜ã«ãªã£ã¦ã„ã¾ã™ã€‚\u003c/p\u003e\n\n\u003cp\u003e\u003ca href=\"https://github.com/rails/rails/pull/28297#issuecomment-577414543\"\u003ehttps://github.com/rails/rails/pull/28297#issuecomment-577414543\u003c/a\u003e\u003c/p\u003e\n\n\u003cblockquote\u003e\u003cp\u003eWe will backport to 6.0 as a bug fix, but I don't know this warrants a backport to a security only release like 5.2. \u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/Rails\"\u003eRails\u003c/a\u003e 6.0 was released 6 months ago, and upgrading applications could be high, high priority if that problem is so important.\u003c/p\u003e\n\n\u003cp\u003eãƒã‚°ä¿®æ­£ã¨ã—ã¦6.0ã«ãƒãƒƒã‚¯ãƒãƒ¼ãƒˆã—ã¾ã™ãŒã€ã“ã‚ŒãŒ5.2ã®ã‚ˆã†ãªã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ã®ã¿ã®ãƒªãƒªãƒ¼ã‚¹ã¸ã®ãƒãƒƒã‚¯ãƒãƒ¼ãƒˆã‚’ä¿è¨¼ã™ã‚‹ã‹ã©ã†ã‹ã‚ã‹ã‚Šã¾ã›ã‚“ã€‚ \u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/Rails\"\u003eRails\u003c/a\u003e 6.0ã¯6ã‹æœˆå‰ã«ãƒªãƒªãƒ¼ã‚¹ã•ã‚Œã¾ã—ãŸã€‚ãã®å•é¡ŒãŒéå¸¸ã«é‡è¦ãªå ´åˆã€ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã®ã‚¢ãƒƒãƒ—ã‚°ãƒ¬ãƒ¼ãƒ‰ã¯å„ªå…ˆåº¦ãŒé«˜ããªã‚‹å¯èƒ½æ€§ãŒã‚ã‚Šã¾ã™ã€‚\u003c/p\u003e\u003c/blockquote\u003e\n\n\u003cp\u003eè‡ªåˆ†ã®é–‹ç™ºç’°å¢ƒã¯æ¥ãšã‹ã—ãªãŒã‚‰ \u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/Rails\"\u003eRails\u003c/a\u003e 4.2 ï¼ˆä»Šå¹´ä¸­ã«ã‚¢ãƒƒãƒ—ãƒ‡ãƒ¼ãƒˆã—ã¾ã™ï¼ï¼‰ãªã®ã§ã€å½“ç„¶åæ˜ ã•ã‚Œã‚‹ã¯ãšã‚‚ãªã„ã®ã§ã€è‡ªå‰ã§ Rack ã‚’ä½œæˆã—ã¦å¯¾å¿œã—ã¾ã—ãŸã€‚\nå‚è€ƒã¾ã§ä»¥ä¸‹ã®ã‚ˆã†ãªã‚³ãƒ¼ãƒ‰ã«ãªã‚Šã¾ã™ã€‚\u003c/p\u003e\n\n\u003cpre class=\"code lang-ruby\" data-lang=\"ruby\" data-unlink\u003e\u003cspan class=\"synComment\"\u003e# config/initializers/custom_rack_middleware.rb\u003c/span\u003e\n\n\u003cspan class=\"synComment\"\u003e# \u003c/span\u003e\u003cspan class=\"synTodo\"\u003eNOTE\u003c/span\u003e\u003cspan class=\"synComment\"\u003e: Rails 6.0.x ã§ã‚ã‚Œã°ä»¥ä¸‹ã®å‡¦ç†ã¯ä¸è¦ã¨ãªã‚‹ã€‚\u003c/span\u003e\n\u003cspan class=\"synType\"\u003eRails\u003c/span\u003e.application.config.middleware.insert_before(\n  \u003cspan class=\"synType\"\u003eActionDispatch\u003c/span\u003e::\u003cspan class=\"synType\"\u003eCookies\u003c/span\u003e,\n  \u003cspan class=\"synType\"\u003eCustomRackMiddleware\u003c/span\u003e::\u003cspan class=\"synType\"\u003eSetSameSiteOptionOnCookie\u003c/span\u003e\n)\n\u003c/pre\u003e\n\n\n\n\n\u003cpre class=\"code lang-ruby\" data-lang=\"ruby\" data-unlink\u003e\u003cspan class=\"synComment\"\u003e# lib/custom_rack_middleware/set_same_site_option_on_cookie.rb\u003c/span\u003e\n\n\u003cspan class=\"synComment\"\u003e# \u003c/span\u003e\u003cspan class=\"synTodo\"\u003eTODO\u003c/span\u003e\u003cspan class=\"synComment\"\u003e: Rails 6.0.x ã«ã‚¢ãƒƒãƒ—ãƒ‡ãƒ¼ãƒˆã—ãŸã‚‰å‰Šé™¤ã™ã‚‹\u003c/span\u003e\n\u003cspan class=\"synPreProc\"\u003emodule\u003c/span\u003e \u003cspan class=\"synType\"\u003eCustomRackMiddleware\u003c/span\u003e\n  \u003cspan class=\"synPreProc\"\u003eclass\u003c/span\u003e \u003cspan class=\"synType\"\u003eSetSameSiteOptionOnCookie\u003c/span\u003e\n    \u003cspan class=\"synPreProc\"\u003edef\u003c/span\u003e \u003cspan class=\"synIdentifier\"\u003einitialize\u003c/span\u003e(app)\n      \u003cspan class=\"synIdentifier\"\u003e@app\u003c/span\u003e = app\n    \u003cspan class=\"synPreProc\"\u003eend\u003c/span\u003e\n\n    \u003cspan class=\"synPreProc\"\u003edef\u003c/span\u003e \u003cspan class=\"synIdentifier\"\u003ecall\u003c/span\u003e(env)\n      status, headers, body = \u003cspan class=\"synIdentifier\"\u003e@app\u003c/span\u003e.call(env)\n\n      cookies = headers[\u003cspan class=\"synSpecial\"\u003e'\u003c/span\u003e\u003cspan class=\"synConstant\"\u003eSet-Cookie\u003c/span\u003e\u003cspan class=\"synSpecial\"\u003e'\u003c/span\u003e]\n      \u003cspan class=\"synStatement\"\u003eif\u003c/span\u003e cookies.present?\n        processed_cookies = cookies.split(\u003cspan class=\"synSpecial\"\u003e\u0026quot;\\n\u0026quot;\u003c/span\u003e).map \u003cspan class=\"synStatement\"\u003edo\u003c/span\u003e |\u003cspan class=\"synIdentifier\"\u003ecookie\u003c/span\u003e|\n          \u003cspan class=\"synSpecial\"\u003e\u0026quot;#{\u003c/span\u003ecookie\u003cspan class=\"synSpecial\"\u003e}\u003c/span\u003e\u003cspan class=\"synConstant\"\u003e; SameSite=None; Secure\u003c/span\u003e\u003cspan class=\"synSpecial\"\u003e\u0026quot;\u003c/span\u003e\n        \u003cspan class=\"synStatement\"\u003eend\u003c/span\u003e\n        headers[\u003cspan class=\"synSpecial\"\u003e'\u003c/span\u003e\u003cspan class=\"synConstant\"\u003eSet-Cookie\u003c/span\u003e\u003cspan class=\"synSpecial\"\u003e'\u003c/span\u003e] = processed_cookies.join(\u003cspan class=\"synSpecial\"\u003e\u0026quot;\\n\u0026quot;\u003c/span\u003e)\n      \u003cspan class=\"synStatement\"\u003eend\u003c/span\u003e\n\n      [status, headers, body]\n    \u003cspan class=\"synPreProc\"\u003eend\u003c/span\u003e\n  \u003cspan class=\"synPreProc\"\u003eend\u003c/span\u003e\n\u003cspan class=\"synPreProc\"\u003eend\u003c/span\u003e\n\u003c/pre\u003e\n\n\n\u003cp\u003e\u003cstrong\u003e2020/02/22 è¿½è¨˜\u003c/strong\u003e\u003c/p\u003e\n\n\u003cp\u003eãƒ­ãƒ¼ã‚«ãƒ«ã®é–‹ç™ºç’°å¢ƒãªã© HTTP ãƒªã‚¯\u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/%A5%A8%A5%B9\"\u003eã‚¨ã‚¹\u003c/a\u003eãƒˆã‚’ã™ã‚‹ç’°å¢ƒã ã¨ã€ \u003ccode\u003eSameSite=None\u003c/code\u003e ã®è¨­å®šã‚’å…¥ã‚Œã‚‹ã¨ \u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/Cookie\"\u003eCookie\u003c/a\u003e ãŒé€ã‚‰ã‚Œãªããªã‚‹ã‚ˆã†ã§ã™ã€‚\u003c/p\u003e\n\n\u003cp\u003eãƒ­ãƒ¼ã‚«ãƒ«ã§ã¯ä¸Šè¿°ã® Rack ã‚’èª­ã¿è¾¼ã¾ã›ãªã„ã‚ˆã†ã«ã™ã‚‹ãªã©ã®å·¥å¤«ãŒå¿…è¦ã ã¨æ€ã„ã¾ã™ã€‚\u003c/p\u003e\n","contentSnippet":"ã”å­˜çŸ¥ã®æ–¹ã‚‚å¤šã„ã‹ã¨æ€ã„ã¾ã™ãŒã€ Chrome 80 ã‹ã‚‰ 3rd Party Cookie ã®å–ã‚Šæ‰±ã„ãŒå³ã—ããªã‚Šã€ç‰¹ã«æŒ‡å®šãŒãªã„ã¨å¤–éƒ¨ã‚µã‚¤ãƒˆã® Cookie ã¯ POSTãƒ»iframeãƒ»XHR ç­‰ã®ãƒªã‚¯ã‚¨ã‚¹ãƒˆ  ã§é€ã‚‰ã‚Œãªããªã‚Šã¾ã™ã€‚developers-jp.googleblog.com2 æœˆã® Chrome 80 ä»¥é™ã€SameSite å€¤ãŒå®£è¨€ã•ã‚Œã¦ã„ãªã„ Cookie ã¯ SameSite=Lax ã¨ã—ã¦æ‰±ã‚ã‚Œã¾ã™ã€‚å¤–éƒ¨ã‚¢ã‚¯ã‚»ã‚¹ã¯ã€SameSite=None; Secure è¨­å®šã®ã‚ã‚‹ Cookie ã®ã¿å¯èƒ½ã«ãªã‚Šã¾ã™ã€‚ãŸã ã—ã€ã“ã‚Œã‚‰ãŒå®‰å…¨ãªæ¥ç¶šã‹ã‚‰ã‚¢ã‚¯ã‚»ã‚¹ã•ã‚Œã‚‹ã“ã¨ãŒæ¡ä»¶ã§ã™ã€‚ã¨ã¯ã„ãˆå®Œå…¨ã«ç„¡åŠ¹ã«ãªã‚‹ã‚ã‘ã§ã¯ãªãã€ SameSite ã¨ã„ã†å±æ€§ãŒå®£è¨€ã•ã‚Œã¦ã„ãªã„ Cookie ã¯ Lax ã¨ã„ã†åŒºåˆ†ãŒãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã§é©ç”¨ã•ã‚Œã‚‹ã¨ã„ã†ç‰©ãªã®ã§ã€ã‚µãƒ¼ãƒãƒ¼ã‹ã‚‰è¿”ã™ Cookie ã«å¯¾ã—ã¦æ˜ç¤ºçš„ã« SameSite ã‚’ None ã«æŒ‡å®šã—ã¦ã€ã‹ã¤ Secure ã¨ã„ã†å±æ€§ã‚’ä»˜ä¸ã™ã‚Œã°ã€å¾“æ¥ã©ãŠã‚Š Cookie ãŒé€ä¿¡ã•ã‚Œã¾ã™ã€‚å»å¹´ã®ç§‹ãã‚‰ã„ã«ã‚‚ã“ã® Cookie ã®å¯¾å¿œãŒå¿…è¦ã‹ã©ã†ã‹ã€ä¼šç¤¾ã§èª¿æŸ»ã—ã¦ã„ãŸã‚“ã§ã™ãŒã€ãã®æ™‚ç‚¹ã§ã¯å½±éŸ¿ã‚’å—ã‘ã‚‹ç®‡æ‰€ãŒç„¡ãã¦ã€ç‰¹ã«ä½•ã‚‚å¯¾å¿œã›ãšã«ã‚¹ãƒ«ãƒ¼ã—ã¦ã„ãŸã‚“ã§ã™ãŒã€ç¾åœ¨é–‹ç™ºã—ã¦ã‚‹æ–°æ©Ÿèƒ½ãŒãŸã¾ãŸã¾ã“ã®å½±éŸ¿ã‚’å—ã‘ã‚‹æ©Ÿèƒ½ã ã£ãŸãŸã‚ã€æ€¥é½å¯¾å¿œã™ã‚‹ã“ã¨ã«ãªã‚Šã¾ã—ãŸã€‚çµæ§‹å³ã—ã„ãªã€ã¨æ€ã£ãŸã®ã¯ã€ã“ã‚ŒãŒåŸå› ã§å‹•ã‹ãªã„ã“ã¨ã«æ°—ä»˜ãã®ãŒçµæ§‹é›£ã—ã„ã‚“ã§ã™ã‚ˆã­ã€‚ã‚·ãƒ³ã‚°ãƒ«ã‚µã‚¤ãƒ³ã‚ªãƒ³ã¿ãŸã„ãªæ©Ÿèƒ½ã‚’ä½œã£ã¦ã‚‹ã¨ãƒ‰ãƒ¡ã‚¤ãƒ³ãŒç•°ãªã‚‹ã®ã§ 3rd Party Cookie ã®æ‰±ã„ã«ãªã‚Šã¾ã™ã€‚ãã—ã¦ Cookie ã«å…¥ã£ã¦ã„ã‚‹ã¯ãšã® Session ID ãŒé€ã‚‰ã‚Œã¦ã“ãªã„ã®ã§ã€ã‚µãƒ¼ãƒãƒ¼å´ã§ Session ãŒè¦‹ã¤ã‹ã‚‰ãšã«ã‚¨ãƒ©ãƒ¼ã€‚è‡ªåˆ†ã®æ‰‹å…ƒã® Chrome ã¯ 79 ã§ã€ã¾ã ä¸Šè¨˜ã®åˆ¶é™ãŒå…¥ã£ã¦ã„ãªã‹ã£ãŸã‚“ã§ã™ãŒã€ä»¥å‰å½±éŸ¿ç¯„å›²ã‚’èª¿æŸ»ã—ãŸæ™‚ã« chrome://flags ã‹ã‚‰æœ‰åŠ¹ã«ã™ã‚‹ãƒ•ãƒ©ã‚°ã‚’ ON ã«ã—ã¦ã„ãŸã®ã§ã€ä»–ã®ã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢ã®ç’°å¢ƒã§ã¯å‹•ä½œã™ã‚‹ã‘ã©ã€è‡ªåˆ†ã ã‘å‹•ã‹ãªã„ã¨ã„ã†ã“ã¨ã«ãªã‚Šã€ã‚‚ã—ã‹ã—ã¦ã€ã¨æ€ã£ã¦æ°—ä»˜ã„ãŸæ„Ÿã˜ã§ã™ã€‚ãƒªãƒªãƒ¼ã‚¹å¾Œã«æ°—ä»˜ã„ã¦ãŸã‚‰ãƒ¤ãƒã‹ã£ãŸã§ã™ã­ã€‚ã€‚ã§ã€ã“ã†ã„ã†å•é¡Œã¯ Rails ã¿ãŸã„ãªãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯ã§å¯¾å¿œã—ã¦ãã‚Œã‚ˆã£ã¦æ°—æŒã¡ã«ãªã‚‹ã‚“ã§ã™ãŒã€ã¡ã‚ƒã‚“ã¨å¯¾å¿œã™ã‚‹ PR ã¯ä½œã‚‰ã‚Œã¦ã„ã¦ã€ã™ã§ã« merge ã‚‚ã•ã‚Œã¦ã„ã¾ã™ã€‚github.comã§ã™ãŒã€ 2020/2/20 ç¾åœ¨ã€ã“ã‚Œã‚’åæ˜ ã—ãŸ Rails ã¯ã¾ã ãƒªãƒªãƒ¼ã‚¹ã•ã‚Œã¦ã„ãªã„ã¿ãŸã„ã§ã™ã­ã€‚ï¼ˆæœ€æ–°ãŒ 2019/12/19 ã«ãƒªãƒªãƒ¼ã‚¹ã•ã‚ŒãŸ 6.0.2.1 ï¼‰ã¾ãŸã€ Rails 5.2 ã«åæ˜ ã•ã‚Œã‚‹ã‹ã©ã†ã‹ã¯å¾®å¦™ãªæ„Ÿã˜ã«ãªã£ã¦ã„ã¾ã™ã€‚https://github.com/rails/rails/pull/28297#issuecomment-577414543We will backport to 6.0 as a bug fix, but I don't know this warrants a backport to a security only release like 5.2. Rails 6.0 was released 6 months ago, and upgrading applications could be high, high priority if that problem is so important.ãƒã‚°ä¿®æ­£ã¨ã—ã¦6.0ã«ãƒãƒƒã‚¯ãƒãƒ¼ãƒˆã—ã¾ã™ãŒã€ã“ã‚ŒãŒ5.2ã®ã‚ˆã†ãªã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ã®ã¿ã®ãƒªãƒªãƒ¼ã‚¹ã¸ã®ãƒãƒƒã‚¯ãƒãƒ¼ãƒˆã‚’ä¿è¨¼ã™ã‚‹ã‹ã©ã†ã‹ã‚ã‹ã‚Šã¾ã›ã‚“ã€‚ Rails 6.0ã¯6ã‹æœˆå‰ã«ãƒªãƒªãƒ¼ã‚¹ã•ã‚Œã¾ã—ãŸã€‚ãã®å•é¡ŒãŒéå¸¸ã«é‡è¦ãªå ´åˆã€ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã®ã‚¢ãƒƒãƒ—ã‚°ãƒ¬ãƒ¼ãƒ‰ã¯å„ªå…ˆåº¦ãŒé«˜ããªã‚‹å¯èƒ½æ€§ãŒã‚ã‚Šã¾ã™ã€‚è‡ªåˆ†ã®é–‹ç™ºç’°å¢ƒã¯æ¥ãšã‹ã—ãªãŒã‚‰ Rails 4.2 ï¼ˆä»Šå¹´ä¸­ã«ã‚¢ãƒƒãƒ—ãƒ‡ãƒ¼ãƒˆã—ã¾ã™ï¼ï¼‰ãªã®ã§ã€å½“ç„¶åæ˜ ã•ã‚Œã‚‹ã¯ãšã‚‚ãªã„ã®ã§ã€è‡ªå‰ã§ Rack ã‚’ä½œæˆã—ã¦å¯¾å¿œã—ã¾ã—ãŸã€‚å‚è€ƒã¾ã§ä»¥ä¸‹ã®ã‚ˆã†ãªã‚³ãƒ¼ãƒ‰ã«ãªã‚Šã¾ã™ã€‚# config/initializers/custom_rack_middleware.rb# NOTE: Rails 6.0.x ã§ã‚ã‚Œã°ä»¥ä¸‹ã®å‡¦ç†ã¯ä¸è¦ã¨ãªã‚‹ã€‚Rails.application.config.middleware.insert_before(  ActionDispatch::Cookies,  CustomRackMiddleware::SetSameSiteOptionOnCookie)# lib/custom_rack_middleware/set_same_site_option_on_cookie.rb# TODO: Rails 6.0.x ã«ã‚¢ãƒƒãƒ—ãƒ‡ãƒ¼ãƒˆã—ãŸã‚‰å‰Šé™¤ã™ã‚‹module CustomRackMiddleware  class SetSameSiteOptionOnCookie    def initialize(app)      @app = app    end    def call(env)      status, headers, body = @app.call(env)      cookies = headers['Set-Cookie']      if cookies.present?        processed_cookies = cookies.split(\"\\n\").map do |cookie|          \"#{cookie}; SameSite=None; Secure\"        end        headers['Set-Cookie'] = processed_cookies.join(\"\\n\")      end      [status, headers, body]    end  endend2020/02/22 è¿½è¨˜ãƒ­ãƒ¼ã‚«ãƒ«ã®é–‹ç™ºç’°å¢ƒãªã© HTTP ãƒªã‚¯ã‚¨ã‚¹ãƒˆã‚’ã™ã‚‹ç’°å¢ƒã ã¨ã€ SameSite=None ã®è¨­å®šã‚’å…¥ã‚Œã‚‹ã¨ Cookie ãŒé€ã‚‰ã‚Œãªããªã‚‹ã‚ˆã†ã§ã™ã€‚ãƒ­ãƒ¼ã‚«ãƒ«ã§ã¯ä¸Šè¿°ã® Rack ã‚’èª­ã¿è¾¼ã¾ã›ãªã„ã‚ˆã†ã«ã™ã‚‹ãªã©ã®å·¥å¤«ãŒå¿…è¦ã ã¨æ€ã„ã¾ã™ã€‚","link":"https://ryz310.hateblo.jp/entry/2020/02/20/235548","isoDate":"2020-02-20T14:55:48.000Z","dateMiliSeconds":1582210548000,"imageUrl":"https://cdn.blog.st-hatena.com/images/theme/og-image-1500.png","authorName":"ryz310"},{"title":"my_api_client v0.13.0 ã‚’ãƒªãƒªãƒ¼ã‚¹ã—ã¾ã—ãŸğŸš€","content":"\u003cp\u003e\u003ca href=\"https://ryz310.hateblo.jp/entry/2020/01/19/152826\"\u003eã¤ã„å…ˆæ—¥ã€v0.12.0 ã‚’ãƒªãƒªãƒ¼ã‚¹ã—ãŸã°ã‹ã‚Š\u003c/a\u003e ã§ã™ãŒã€ v0.13.0 ã‚’ãƒªãƒªãƒ¼ã‚¹ã—ã¾ã—ãŸã®ã§ã€å«ã¾ã‚Œã‚‹ PR ã®å†…å®¹ã«ã¤ã„ã¦è§£èª¬ã—ã¦ã„ãã¾ã™ã€‚ ã‚ˆã‚Šè©³ã—ã„ä½¿ã„æ–¹ã¯ \u003ca href=\"https://github.com/ryz310/my_api_client/blob/master/README.jp.md\"\u003eREADME.jp.md\u003c/a\u003e ã‚’ã”å‚ç…§ãã ã•ã„ã€‚\u003c/p\u003e\n\n\u003cp\u003e\u003ciframe src=\"https://hatenablog-parts.com/embed?url=https%3A%2F%2Fgithub.com%2Fryz310%2Fmy_api_client%2Fblob%2Fmaster%2FCHANGELOG.md%23v0130-jan-21-2020\" title=\"ryz310/my_api_client\" class=\"embed-card embed-webcard\" scrolling=\"no\" frameborder=\"0\" style=\"display: block; width: 100%; height: 155px; max-width: 500px; margin: 10px 0px;\"\u003e\u003c/iframe\u003e\u003ccite class=\"hatena-citation\"\u003e\u003ca href=\"https://github.com/ryz310/my_api_client/blob/master/CHANGELOG.md#v0130-jan-21-2020\"\u003egithub.com\u003c/a\u003e\u003c/cite\u003e\u003c/p\u003e\n\n\u003ch2\u003e\u003ca href=\"https://github.com/ryz310/my_api_client/pull/180\"\u003e#180\u003c/a\u003e Stub response on raising error (\u003ca href=\"https://github.com/ryz310\"\u003e@ryz310\u003c/a\u003e)\u003c/h2\u003e\n\n\u003cp\u003eä»Šå›ã¯ã“ã® PR ã®ã¿ã®æ›´æ–°ã§ã™ã€‚\nä»•äº‹ã§ spec æ›¸ã„ã¦ã‚‹æœ€ä¸­ã«ã€Œ\u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/API\"\u003eAPI\u003c/a\u003e ãƒªã‚¯\u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/%A5%A8%A5%B9\"\u003eã‚¨ã‚¹\u003c/a\u003eãƒˆã§ä¾‹å¤–ãŒç™ºç”Ÿã—ãŸéš›ã«ãƒ¬ã‚¹ãƒãƒ³ã‚¹å†…å®¹ã‚’ä¿å­˜ã™ã‚‹å‡¦ç†ã®ã‚¹ã‚¿ãƒ–åŒ–ã§ããªã„ã˜ã‚ƒã‚“ã€ã£ã¦ãªã£ã¦ä½œã‚Šã¾ã—ãŸã€‚\u003c/p\u003e\n\n\u003cp\u003e\u003ccode\u003emy_api_client\u003c/code\u003e ã§ã¯ä½œæˆã—ãŸ \u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/API\"\u003eAPI\u003c/a\u003e Client ã‚¯ãƒ©ã‚¹ã‚’ \u003ccode\u003estub_api_client\u003c/code\u003e ã¾ãŸã¯ \u003ccode\u003estub_api_client_all\u003c/code\u003e ã¨ã„ã†ãƒ¡ã‚½ãƒƒãƒ‰ã§ã‚¹ã‚¿ãƒ–åŒ–ã§ãã¾ã™ã€‚\nä¾‹ãˆã°ä»¥ä¸‹ã®ã‚ˆã†ãª \u003ccode\u003eExampleApiClient\u003c/code\u003e ã¨ã„ã†ã‚¯ãƒ©ã‚¹ã‚’å®šç¾©ã—ãŸæ™‚:\u003c/p\u003e\n\n\u003cpre class=\"code lang-ruby\" data-lang=\"ruby\" data-unlink\u003e\u003cspan class=\"synPreProc\"\u003eclass\u003c/span\u003e \u003cspan class=\"synType\"\u003eExampleApiClient\u003c/span\u003e \u0026lt; \u003cspan class=\"synType\"\u003eMyApiClient\u003c/span\u003e::\u003cspan class=\"synType\"\u003eBase\u003c/span\u003e\n  endpoint \u003cspan class=\"synSpecial\"\u003e'\u003c/span\u003e\u003cspan class=\"synConstant\"\u003ehttps://example.com\u003c/span\u003e\u003cspan class=\"synSpecial\"\u003e'\u003c/span\u003e\n\n  error_handling \u003cspan class=\"synConstant\"\u003estatus_code\u003c/span\u003e: \u003cspan class=\"synConstant\"\u003e400\u003c/span\u003e..\u003cspan class=\"synConstant\"\u003e499\u003c/span\u003e, \u003cspan class=\"synConstant\"\u003eraise\u003c/span\u003e: \u003cspan class=\"synType\"\u003eMyApiClient\u003c/span\u003e::\u003cspan class=\"synType\"\u003eClientError\u003c/span\u003e\n  error_handling \u003cspan class=\"synConstant\"\u003estatus_code\u003c/span\u003e: \u003cspan class=\"synConstant\"\u003e500\u003c/span\u003e..\u003cspan class=\"synConstant\"\u003e599\u003c/span\u003e, \u003cspan class=\"synConstant\"\u003eraise\u003c/span\u003e: \u003cspan class=\"synType\"\u003eMyApiClient\u003c/span\u003e::\u003cspan class=\"synType\"\u003eServerError\u003c/span\u003e\n\n  \u003cspan class=\"synComment\"\u003e# GET https://example.com/path/to/resouce\u003c/span\u003e\n  \u003cspan class=\"synPreProc\"\u003edef\u003c/span\u003e \u003cspan class=\"synIdentifier\"\u003erequest\u003c/span\u003e\n     get \u003cspan class=\"synSpecial\"\u003e'\u003c/span\u003e\u003cspan class=\"synConstant\"\u003epath/to/resouce\u003c/span\u003e\u003cspan class=\"synSpecial\"\u003e'\u003c/span\u003e\n  \u003cspan class=\"synPreProc\"\u003eend\u003c/span\u003e\n\u003cspan class=\"synPreProc\"\u003eend\u003c/span\u003e\n\u003c/pre\u003e\n\n\n\u003cp\u003e\u003ccode\u003estub_api_client_all\u003c/code\u003e ã‚’å®Ÿè¡Œã™ã‚‹ã¨ \u003ccode\u003eExampleApiClient\u003c/code\u003e ã®\u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/%A5%A4%A5%F3%A5%B9%A5%BF%A5%F3%A5%B9\"\u003eã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹\u003c/a\u003eãŒå…¨ã¦ã‚¹ã‚¿ãƒ–åŒ–ã•ã‚Œã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã™ã€‚\nä»¥ä¸‹ã®ä¾‹ã ã¨ã€ \u003ccode\u003e#request\u003c/code\u003e ã‚’å®Ÿè¡Œã—ãŸæ™‚ã€\u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/API\"\u003eAPI\u003c/a\u003e ã‹ã‚‰ \u003ccode\u003e{ \"message\": \"Hello world!\" }\u003c/code\u003e ã¨ã„ã† \u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/JSON\"\u003eJSON\u003c/a\u003e ãŒè¿”ã£ã¦ããŸæ™‚ã¨åŒã˜æŒ¯ã‚‹èˆã„ã‚’ã™ã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã™ã€‚\u003c/p\u003e\n\n\u003cpre class=\"code lang-ruby\" data-lang=\"ruby\" data-unlink\u003estub_api_client_all(\n  \u003cspan class=\"synType\"\u003eExampleApiClient\u003c/span\u003e,\n  \u003cspan class=\"synConstant\"\u003erequest\u003c/span\u003e: { \u003cspan class=\"synConstant\"\u003eresponse\u003c/span\u003e: { \u003cspan class=\"synConstant\"\u003emessage\u003c/span\u003e: \u003cspan class=\"synSpecial\"\u003e'\u003c/span\u003e\u003cspan class=\"synConstant\"\u003eHello world!\u003c/span\u003e\u003cspan class=\"synSpecial\"\u003e'\u003c/span\u003e } }\n)\n\napi_client = \u003cspan class=\"synType\"\u003eExampleApiClient\u003c/span\u003e.new\nresponse = api_client.request\nresponse.message \u003cspan class=\"synComment\"\u003e# =\u0026gt; 'Hello world!'\u003c/span\u003e\n\u003c/pre\u003e\n\n\n\u003cp\u003eã§ã€ \u003ccode\u003eerror_handling\u003c/code\u003e ã§\u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/%A5%B9%A5%C6%A1%BC%A5%BF%A5%B9%A5%B3%A1%BC%A5%C9\"\u003eã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ã‚³ãƒ¼ãƒ‰\u003c/a\u003eãŒ \u003ccode\u003e400..499\u003c/code\u003e ã®æ™‚ã¯ \u003ccode\u003eMyApiClient::ClientError\u003c/code\u003e ã¨ã„ã†ä¾‹å¤–ãŒç™ºç”Ÿã™ã‚‹ã€ã¨ã„ã†å®šç¾©ã«ãªã£ã¦ã„ã‚‹ã®ã§ã™ãŒã€ã“ã®ã‚ˆã†ãªä¾‹å¤–ãŒç™ºç”Ÿã—ãŸæ™‚ã®ãƒ†ã‚¹ãƒˆã‚’æ›¸ããŸã‚ã«ã€ \u003ccode\u003eraise\u003c/code\u003e ã®ã‚¹ã‚¿ãƒ–åŒ–ã‚‚å‡ºæ¥ã‚‹ã‚ˆã†ã«ãªã£ã¦ã„ã¾ã™ã€‚\u003c/p\u003e\n\n\u003cpre class=\"code lang-ruby\" data-lang=\"ruby\" data-unlink\u003estub_api_client_all(\n  \u003cspan class=\"synType\"\u003eExampleApiClient\u003c/span\u003e,\n  \u003cspan class=\"synConstant\"\u003erequest\u003c/span\u003e: { \u003cspan class=\"synConstant\"\u003eraise\u003c/span\u003e: \u003cspan class=\"synType\"\u003eMyApiClient\u003c/span\u003e::\u003cspan class=\"synType\"\u003eClientError\u003c/span\u003e }\n)\n\n\u003cspan class=\"synStatement\"\u003ebegin\u003c/span\u003e\n  api_client = \u003cspan class=\"synType\"\u003eExampleApiClient\u003c/span\u003e.new\n  response = api_client.request\n\u003cspan class=\"synStatement\"\u003erescue\u003c/span\u003e \u003cspan class=\"synType\"\u003eMyApiClient\u003c/span\u003e::\u003cspan class=\"synType\"\u003eClientError\u003c/span\u003e\n  puts \u003cspan class=\"synSpecial\"\u003e'\u003c/span\u003e\u003cspan class=\"synConstant\"\u003e4xx error!\u003c/span\u003e\u003cspan class=\"synSpecial\"\u003e'\u003c/span\u003e\n\u003cspan class=\"synStatement\"\u003eend\u003c/span\u003e\n\u003c/pre\u003e\n\n\n\u003cp\u003eå¤§æŠµã®å ´åˆã€ã“ã‚Œã‚‰ã®ã‚¹ã‚¿ãƒ–åŒ–ãŒã§ãã‚Œã°å•é¡Œãªã„ã®ã§ã™ãŒã€ä¾‹å¤–ç™ºç”Ÿæ™‚ã®ãƒ¬ã‚¹ãƒãƒ³ã‚¹ã‚’è¦‹ãŸã„ã€ã¨ã„ã†ã‚±ãƒ¼ã‚¹ã‚‚ç„¡ãã¯ãªã„ã‹ã¨æ€ã„ã¾ã™ã€‚\nä»•æ§˜ã¨ã—ã¦ã€ä¾‹å¤–\u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/%A5%A4%A5%F3%A5%B9%A5%BF%A5%F3%A5%B9\"\u003eã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹\u003c/a\u003eã® \u003ccode\u003e#params\u003c/code\u003e ã‚„ \u003ccode\u003e#matadata\u003c/code\u003e ã¨ã„ã†ãƒ¡ã‚½ãƒƒãƒ‰ã‹ã‚‰ãƒªã‚¯\u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/%A5%A8%A5%B9\"\u003eã‚¨ã‚¹\u003c/a\u003eãƒˆãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã¨ãƒ¬ã‚¹ãƒãƒ³ã‚¹ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã‚’å‚ç…§ã§ãã‚‹ã‚ˆã†ã«ãªã£ã¦ã„ã¾ã™ã€‚\u003c/p\u003e\n\n\u003cp\u003eå¾“æ¥ã®ã‚¹ã‚¿ãƒ–åŒ–ãƒ¡ã‚½ãƒƒãƒ‰ã§ã‚‚ä¸€å¿œæŒ‡å®šã§ããªãã¯ãªã‹ã£ãŸã‚“ã§ã™ãŒã€çµæ§‹æ‰‹é–“ã ã£ãŸã®ã§ \u003ccode\u003eraise\u003c/code\u003e ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã®æŒ‡å®šã‚’ä»¥ä¸‹ã®ã‚ˆã†ã«æ‹¡å¼µã—ã¾ã—ãŸã€‚\n\u003ccode\u003eraise\u003c/code\u003e ã¨ä¸€ç·’ã«æŒ‡å®šã—ãŸ \u003ccode\u003eresponse\u003c/code\u003e ãŒ \u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/API\"\u003eAPI\u003c/a\u003e ã®ãƒ¬ã‚¹ãƒãƒ³ã‚¹ã¨ã—ã¦è¿”ã•ã‚Œã¦ã€ãã‚ŒãŒä¾‹å¤–ã¨ã—ã¦å‡¦ç†ã•ã‚ŒãŸã€ã¨ã„ã†ã‚¹ã‚¿ãƒ–åŒ–ã«ãªã‚Šã¾ã™ã€‚\u003c/p\u003e\n\n\u003cpre class=\"code lang-ruby\" data-lang=\"ruby\" data-unlink\u003estub_api_client_all(\n  \u003cspan class=\"synType\"\u003eExampleApiClient\u003c/span\u003e,\n  \u003cspan class=\"synConstant\"\u003erequest\u003c/span\u003e: { \n    \u003cspan class=\"synConstant\"\u003eraise\u003c/span\u003e: \u003cspan class=\"synType\"\u003eMyApiClient\u003c/span\u003e::\u003cspan class=\"synType\"\u003eClientError\u003c/span\u003e,\n    \u003cspan class=\"synConstant\"\u003eresponse\u003c/span\u003e: { \u003cspan class=\"synConstant\"\u003eerror_code\u003c/span\u003e: \u003cspan class=\"synConstant\"\u003e10\u003c/span\u003e }\n  }\n)\n\n\u003cspan class=\"synStatement\"\u003ebegin\u003c/span\u003e\n  api_client = \u003cspan class=\"synType\"\u003eExampleApiClient\u003c/span\u003e.new\n  response = api_client.request\n\u003cspan class=\"synStatement\"\u003erescue\u003c/span\u003e \u003cspan class=\"synType\"\u003eMyApiClient\u003c/span\u003e::\u003cspan class=\"synType\"\u003eClientError\u003c/span\u003e =\u0026gt; e\n  e.params.response.data.error_code \u003cspan class=\"synComment\"\u003e#=\u0026gt; 10\u003c/span\u003e\n\u003cspan class=\"synStatement\"\u003eend\u003c/span\u003e\n\u003c/pre\u003e\n\n\n\u003cp\u003e\u003ccode\u003emy_api_client\u003c/code\u003e ã¯å†…éƒ¨ã§ \u003ca href=\"https://github.com/lostisland/sawyer\"\u003eSawyer\u003c/a\u003e ã‚’ä½¿ã£ã¦ã„ã¾ã™ã€‚\u003c/p\u003e\n\n\u003cp\u003e\u003ciframe src=\"https://hatenablog-parts.com/embed?url=https%3A%2F%2Fgithub.com%2Flostisland%2Fsawyer\" title=\"lostisland/sawyer\" class=\"embed-card embed-webcard\" scrolling=\"no\" frameborder=\"0\" style=\"display: block; width: 100%; height: 155px; max-width: 500px; margin: 10px 0px;\"\u003e\u003c/iframe\u003e\u003ccite class=\"hatena-citation\"\u003e\u003ca href=\"https://github.com/lostisland/sawyer\"\u003egithub.com\u003c/a\u003e\u003c/cite\u003e\u003c/p\u003e\n\n\u003cp\u003e\u003ccode\u003ee.params.response\u003c/code\u003e ãŒ \u003ccode\u003eSawyer::Response\u003c/code\u003e ã‚’ãã®ã¾ã¾è¿”ã—ã¦ã„ã‚‹ã®ã§ã€\u003ccode\u003eSawyer::Response#data\u003c/code\u003e ã‹ã‚‰ãƒ¬ã‚¹ãƒãƒ³ã‚¹ãƒœãƒ‡ã‚£ã‚’å‚ç…§ã§ãã¾ã™ã€‚\n\u003ccode\u003eSawyer::Response#data\u003c/code\u003e ã§ã¯ã€ãƒ¬ã‚¹ãƒãƒ³ã‚¹ã® \u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/JSON\"\u003eJSON\u003c/a\u003e ã‚’ \u003ca href=\"https://docs.ruby-lang.org/ja/latest/class/OpenStruct.html\"\u003eOpenStruct)\u003c/a\u003e ã®ã‚ˆã†ã«ãƒ¡ã‚½ãƒƒãƒ‰ã‚¢ã‚¯ã‚»ã‚¹ã§ãã‚‹ã‚ˆã†ã«å¤‰æ›ã—ã¦ãã‚Œã¾ã™ã€‚\u003c/p\u003e\n\n\u003cp\u003eãŸã ã—ã€ \u003ccode\u003eV1.0.0\u003c/code\u003e ã§ \u003ccode\u003eSawyer\u003c/code\u003e ã®ä¾å­˜ã‚’ç„¡ãã—ãŸã„ã¨è€ƒãˆã¦ã„ã‚‹ã®ã§ã€ã„ãšã‚Œ \u003ccode\u003e#data\u003c/code\u003e ã‚’æŒŸã‚€æ›¸ãæ–¹ã¯å¤‰æ›´ã«ãªã‚‹ã‹ã‚‚ã—ã‚Œã¾ã›ã‚“ã€‚\nä¸€å¿œã“ã†ã„ã†ä½¿ã„æ–¹ã‚‚ã§ãã¾ã™ã‚ˆã€ã¨ã„ã†æ–°æ©Ÿèƒ½ã§ã—ãŸã€‚\u003c/p\u003e\n","contentSnippet":"ã¤ã„å…ˆæ—¥ã€v0.12.0 ã‚’ãƒªãƒªãƒ¼ã‚¹ã—ãŸã°ã‹ã‚Š ã§ã™ãŒã€ v0.13.0 ã‚’ãƒªãƒªãƒ¼ã‚¹ã—ã¾ã—ãŸã®ã§ã€å«ã¾ã‚Œã‚‹ PR ã®å†…å®¹ã«ã¤ã„ã¦è§£èª¬ã—ã¦ã„ãã¾ã™ã€‚ ã‚ˆã‚Šè©³ã—ã„ä½¿ã„æ–¹ã¯ README.jp.md ã‚’ã”å‚ç…§ãã ã•ã„ã€‚github.com#180 Stub response on raising error (@ryz310)ä»Šå›ã¯ã“ã® PR ã®ã¿ã®æ›´æ–°ã§ã™ã€‚ä»•äº‹ã§ spec æ›¸ã„ã¦ã‚‹æœ€ä¸­ã«ã€ŒAPI ãƒªã‚¯ã‚¨ã‚¹ãƒˆã§ä¾‹å¤–ãŒç™ºç”Ÿã—ãŸéš›ã«ãƒ¬ã‚¹ãƒãƒ³ã‚¹å†…å®¹ã‚’ä¿å­˜ã™ã‚‹å‡¦ç†ã®ã‚¹ã‚¿ãƒ–åŒ–ã§ããªã„ã˜ã‚ƒã‚“ã€ã£ã¦ãªã£ã¦ä½œã‚Šã¾ã—ãŸã€‚my_api_client ã§ã¯ä½œæˆã—ãŸ API Client ã‚¯ãƒ©ã‚¹ã‚’ stub_api_client ã¾ãŸã¯ stub_api_client_all ã¨ã„ã†ãƒ¡ã‚½ãƒƒãƒ‰ã§ã‚¹ã‚¿ãƒ–åŒ–ã§ãã¾ã™ã€‚ä¾‹ãˆã°ä»¥ä¸‹ã®ã‚ˆã†ãª ExampleApiClient ã¨ã„ã†ã‚¯ãƒ©ã‚¹ã‚’å®šç¾©ã—ãŸæ™‚:class ExampleApiClient \u003c MyApiClient::Base  endpoint 'https://example.com'  error_handling status_code: 400..499, raise: MyApiClient::ClientError  error_handling status_code: 500..599, raise: MyApiClient::ServerError  # GET https://example.com/path/to/resouce  def request     get 'path/to/resouce'  endendstub_api_client_all ã‚’å®Ÿè¡Œã™ã‚‹ã¨ ExampleApiClient ã®ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ãŒå…¨ã¦ã‚¹ã‚¿ãƒ–åŒ–ã•ã‚Œã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã™ã€‚ä»¥ä¸‹ã®ä¾‹ã ã¨ã€ #request ã‚’å®Ÿè¡Œã—ãŸæ™‚ã€API ã‹ã‚‰ { \"message\": \"Hello world!\" } ã¨ã„ã† JSON ãŒè¿”ã£ã¦ããŸæ™‚ã¨åŒã˜æŒ¯ã‚‹èˆã„ã‚’ã™ã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã™ã€‚stub_api_client_all(  ExampleApiClient,  request: { response: { message: 'Hello world!' } })api_client = ExampleApiClient.newresponse = api_client.requestresponse.message # =\u003e 'Hello world!'ã§ã€ error_handling ã§ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ã‚³ãƒ¼ãƒ‰ãŒ 400..499 ã®æ™‚ã¯ MyApiClient::ClientError ã¨ã„ã†ä¾‹å¤–ãŒç™ºç”Ÿã™ã‚‹ã€ã¨ã„ã†å®šç¾©ã«ãªã£ã¦ã„ã‚‹ã®ã§ã™ãŒã€ã“ã®ã‚ˆã†ãªä¾‹å¤–ãŒç™ºç”Ÿã—ãŸæ™‚ã®ãƒ†ã‚¹ãƒˆã‚’æ›¸ããŸã‚ã«ã€ raise ã®ã‚¹ã‚¿ãƒ–åŒ–ã‚‚å‡ºæ¥ã‚‹ã‚ˆã†ã«ãªã£ã¦ã„ã¾ã™ã€‚stub_api_client_all(  ExampleApiClient,  request: { raise: MyApiClient::ClientError })begin  api_client = ExampleApiClient.new  response = api_client.requestrescue MyApiClient::ClientError  puts '4xx error!'endå¤§æŠµã®å ´åˆã€ã“ã‚Œã‚‰ã®ã‚¹ã‚¿ãƒ–åŒ–ãŒã§ãã‚Œã°å•é¡Œãªã„ã®ã§ã™ãŒã€ä¾‹å¤–ç™ºç”Ÿæ™‚ã®ãƒ¬ã‚¹ãƒãƒ³ã‚¹ã‚’è¦‹ãŸã„ã€ã¨ã„ã†ã‚±ãƒ¼ã‚¹ã‚‚ç„¡ãã¯ãªã„ã‹ã¨æ€ã„ã¾ã™ã€‚ä»•æ§˜ã¨ã—ã¦ã€ä¾‹å¤–ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã® #params ã‚„ #matadata ã¨ã„ã†ãƒ¡ã‚½ãƒƒãƒ‰ã‹ã‚‰ãƒªã‚¯ã‚¨ã‚¹ãƒˆãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã¨ãƒ¬ã‚¹ãƒãƒ³ã‚¹ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã‚’å‚ç…§ã§ãã‚‹ã‚ˆã†ã«ãªã£ã¦ã„ã¾ã™ã€‚å¾“æ¥ã®ã‚¹ã‚¿ãƒ–åŒ–ãƒ¡ã‚½ãƒƒãƒ‰ã§ã‚‚ä¸€å¿œæŒ‡å®šã§ããªãã¯ãªã‹ã£ãŸã‚“ã§ã™ãŒã€çµæ§‹æ‰‹é–“ã ã£ãŸã®ã§ raise ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã®æŒ‡å®šã‚’ä»¥ä¸‹ã®ã‚ˆã†ã«æ‹¡å¼µã—ã¾ã—ãŸã€‚raise ã¨ä¸€ç·’ã«æŒ‡å®šã—ãŸ response ãŒ API ã®ãƒ¬ã‚¹ãƒãƒ³ã‚¹ã¨ã—ã¦è¿”ã•ã‚Œã¦ã€ãã‚ŒãŒä¾‹å¤–ã¨ã—ã¦å‡¦ç†ã•ã‚ŒãŸã€ã¨ã„ã†ã‚¹ã‚¿ãƒ–åŒ–ã«ãªã‚Šã¾ã™ã€‚stub_api_client_all(  ExampleApiClient,  request: {     raise: MyApiClient::ClientError,    response: { error_code: 10 }  })begin  api_client = ExampleApiClient.new  response = api_client.requestrescue MyApiClient::ClientError =\u003e e  e.params.response.data.error_code #=\u003e 10endmy_api_client ã¯å†…éƒ¨ã§ Sawyer ã‚’ä½¿ã£ã¦ã„ã¾ã™ã€‚github.come.params.response ãŒ Sawyer::Response ã‚’ãã®ã¾ã¾è¿”ã—ã¦ã„ã‚‹ã®ã§ã€Sawyer::Response#data ã‹ã‚‰ãƒ¬ã‚¹ãƒãƒ³ã‚¹ãƒœãƒ‡ã‚£ã‚’å‚ç…§ã§ãã¾ã™ã€‚Sawyer::Response#data ã§ã¯ã€ãƒ¬ã‚¹ãƒãƒ³ã‚¹ã® JSON ã‚’ OpenStruct) ã®ã‚ˆã†ã«ãƒ¡ã‚½ãƒƒãƒ‰ã‚¢ã‚¯ã‚»ã‚¹ã§ãã‚‹ã‚ˆã†ã«å¤‰æ›ã—ã¦ãã‚Œã¾ã™ã€‚ãŸã ã—ã€ V1.0.0 ã§ Sawyer ã®ä¾å­˜ã‚’ç„¡ãã—ãŸã„ã¨è€ƒãˆã¦ã„ã‚‹ã®ã§ã€ã„ãšã‚Œ #data ã‚’æŒŸã‚€æ›¸ãæ–¹ã¯å¤‰æ›´ã«ãªã‚‹ã‹ã‚‚ã—ã‚Œã¾ã›ã‚“ã€‚ä¸€å¿œã“ã†ã„ã†ä½¿ã„æ–¹ã‚‚ã§ãã¾ã™ã‚ˆã€ã¨ã„ã†æ–°æ©Ÿèƒ½ã§ã—ãŸã€‚","link":"https://ryz310.hateblo.jp/entry/2020/01/21/230012","isoDate":"2020-01-21T14:00:12.000Z","dateMiliSeconds":1579615212000,"imageUrl":"https://cdn.blog.st-hatena.com/images/theme/og-image-1500.png","authorName":"ryz310"},{"title":"my_api_client v0.12.0 ã‚’ãƒªãƒªãƒ¼ã‚¹ã—ã¾ã—ãŸğŸš€","content":"\u003cp\u003e\u003ca href=\"https://github.com/ryz310/my_api_client\"\u003emy_api_client v0.12.0\u003c/a\u003e ã«å«ã¾ã‚Œã‚‹ PR ã®å†…å®¹ã«ã¤ã„ã¦è§£èª¬ã—ã¦ã„ãã¾ã™ã€‚\nã‚ˆã‚Šè©³ã—ã„ä½¿ã„æ–¹ã¯ \u003ca href=\"https://github.com/ryz310/my_api_client/blob/master/README.jp.md\"\u003eREADME.jp.md\u003c/a\u003e ã‚’ã”å‚ç…§ãã ã•ã„ã€‚\u003c/p\u003e\n\n\u003ch2\u003e\u003ca href=\"https://github.com/ryz310/my_api_client/pull/173\"\u003e#173\u003c/a\u003e Avoid sleep on testing\u003c/h2\u003e\n\n\u003cp\u003emy_\u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/api\"\u003eapi\u003c/a\u003e_client ã§ã¯ä»¥ä¸‹ã®ã‚ˆã†ã«æ›¸ãã¨ã€ä»»æ„ã®ä¾‹å¤–ã‚’è£œè¶³ã—ã¦è‡ªå‹•çš„ã« \u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/API\"\u003eAPI\u003c/a\u003e ãƒªã‚¯\u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/%A5%A8%A5%B9\"\u003eã‚¨ã‚¹\u003c/a\u003eãƒˆã‚’ãƒªãƒˆãƒ©ã‚¤ã—ã¦ãã‚Œã¾ã™ã€‚\nãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ç³»ã®ã‚¨ãƒ©ãƒ¼ã¨ã‹ã€ \u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/API\"\u003eAPI\u003c/a\u003e Rate Limit ã«å¼•ã£ã‹ã‹ã£ãŸæ™‚ã¨ã‹ã«ä¾¿åˆ©ãªã‚„ã¤ã§ã™ã­ã€‚\u003c/p\u003e\n\n\u003cp\u003e\u003ca href=\"https://edgeapi.rubyonrails.org/classes/ActiveJob/Exceptions/ClassMethods.html#method-i-retry_on\"\u003eActiveJob ã® \u003ccode\u003eretry_on\u003c/code\u003e\u003c/a\u003e ã¨ã»ã¼åŒã˜ä½¿ã„æ–¹ã«ãªã£ã¦ã„ã¾ã™ã€‚\u003c/p\u003e\n\n\u003cpre class=\"code lang-ruby\" data-lang=\"ruby\" data-unlink\u003e\u003cspan class=\"synPreProc\"\u003eclass\u003c/span\u003e \u003cspan class=\"synType\"\u003eExampleApiClient\u003c/span\u003e \u0026lt; \u003cspan class=\"synType\"\u003eMyApiClient\u003c/span\u003e::\u003cspan class=\"synType\"\u003eBase\u003c/span\u003e\n  endpoint \u003cspan class=\"synSpecial\"\u003e'\u003c/span\u003e\u003cspan class=\"synConstant\"\u003ehttps://example.com\u003c/span\u003e\u003cspan class=\"synSpecial\"\u003e'\u003c/span\u003e\n\n  retry_on \u003cspan class=\"synType\"\u003eMyApiClient\u003c/span\u003e::\u003cspan class=\"synType\"\u003eApiLimitError\u003c/span\u003e, \u003cspan class=\"synConstant\"\u003ewait\u003c/span\u003e: \u003cspan class=\"synConstant\"\u003e1\u003c/span\u003e.minute, \u003cspan class=\"synConstant\"\u003eattempts\u003c/span\u003e: \u003cspan class=\"synConstant\"\u003e3\u003c/span\u003e\n  error_handling \u003cspan class=\"synConstant\"\u003ejson\u003c/span\u003e: { \u003cspan class=\"synSpecial\"\u003e'\u003c/span\u003e\u003cspan class=\"synConstant\"\u003e$.errors.code\u003c/span\u003e\u003cspan class=\"synSpecial\"\u003e'\u003c/span\u003e: \u003cspan class=\"synConstant\"\u003e20\u003c/span\u003e }, \u003cspan class=\"synConstant\"\u003eraise\u003c/span\u003e: \u003cspan class=\"synType\"\u003eMyApiClient\u003c/span\u003e::\u003cspan class=\"synType\"\u003eApiLimitError\u003c/span\u003e\n\n  \u003cspan class=\"synComment\"\u003e# GET https://example.com/users\u003c/span\u003e\n  \u003cspan class=\"synPreProc\"\u003edef\u003c/span\u003e \u003cspan class=\"synIdentifier\"\u003eget_users\u003c/span\u003e\n    get \u003cspan class=\"synSpecial\"\u003e'\u003c/span\u003e\u003cspan class=\"synConstant\"\u003eusers\u003c/span\u003e\u003cspan class=\"synSpecial\"\u003e'\u003c/span\u003e\n  \u003cspan class=\"synPreProc\"\u003eend\u003c/span\u003e\n\u003cspan class=\"synPreProc\"\u003eend\u003c/span\u003e\n\u003c/pre\u003e\n\n\n\u003cp\u003eãã‚Œã¯è‰¯ã„ã‚“ã§ã™ãŒã€ \u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/rspec\"\u003erspec\u003c/a\u003e ä¸Šã§ \u003ccode\u003ewait\u003c/code\u003e ãŒåŠ¹ã„ã¦ã—ã¾ã£ã¦ã„ãŸã®ã§ã€ä¸Šè¨˜ã®ã‚³ãƒ¼ãƒ‰ã ã¨ãƒªãƒˆãƒ©ã‚¤3å›åˆ† wait ã™ã‚‹ã®ã§ã€åˆè¨ˆ 3 åˆ†ã‚‚å¾…ãŸã•ã‚Œã¦ã—ã¾ã£ã¦ã„ã¾ã—ãŸã€‚\nä¸€å¿œ \u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/rspec\"\u003erspec\u003c/a\u003e ã§ \u003ccode\u003esleep\u003c/code\u003e ã‚’ stub ã™ã‚‹ã¨ã‹ã‚„ã‚Œã°å›é¿ã§ãã¾ã™ãŒã€ãã‚‚ãã‚‚ãƒ†ã‚¹ãƒˆã§ã¯ wait ã‚’ç„¡è¦–ã—ã¦æ¬²ã—ã„ã§ã™ã‚ˆã­ã€‚\u003c/p\u003e\n\n\u003cp\u003emy_\u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/api\"\u003eapi\u003c/a\u003e_client ã§ã¯ \u003ccode\u003ebe_handled_as_an_error\u003c/code\u003e ã¨ã„ã† \u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/rspec\"\u003erspec\u003c/a\u003e ã® matcher ã‚’ç”¨æ„ã—ã¦ã„ã‚‹ã®ã§ã™ãŒã€ä»Šå›ã®å¯¾å¿œã§ã€ã“ã® macher ã‚’çµŒç”±ã—ã¦ãƒªãƒˆãƒ©ã‚¤ãŒå®Ÿè¡Œã•ã‚ŒãŸå ´åˆã¯ wait ã‚’ç„¡è¦–ã™ã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã—ãŸã€‚\u003c/p\u003e\n\n\u003cpre class=\"code lang-ruby\" data-lang=\"ruby\" data-unlink\u003e\u003cspan class=\"synType\"\u003eRSpec\u003c/span\u003e.describe \u003cspan class=\"synType\"\u003eExampleApiClient\u003c/span\u003e, \u003cspan class=\"synConstant\"\u003etype\u003c/span\u003e: \u003cspan class=\"synConstant\"\u003e:api_client\u003c/span\u003e \u003cspan class=\"synStatement\"\u003edo\u003c/span\u003e\n  let(\u003cspan class=\"synConstant\"\u003e:api_client\u003c/span\u003e) { described_class.new }\n\n  \u003cspan class=\"synComment\"\u003e# \u003c/span\u003e\u003cspan class=\"synTodo\"\u003eNOTE\u003c/span\u003e\u003cspan class=\"synComment\"\u003e: ãƒ¬ã‚¹ãƒãƒ³ã‚¹ã§ `{ \u0026quot;errors\u0026quot;: { \u0026quot;code\u0026quot;: 20 } }` ã‚’å—è¨ºã—ãŸéš›ã€3 å›ãƒªãƒˆãƒ©ã‚¤ãŒå®Ÿè¡Œã•ã‚ŒãŸå¾Œã« `MyApiClient::ApiLimitError` ã¨ã—ã¦ä¾‹å¤–å‡¦ç†ã•ã‚Œã‚‹ã€‚\u003c/span\u003e\n  it \u003cspan class=\"synStatement\"\u003edo\u003c/span\u003e\n    expect { api_request! }\n      .to be_handled_as_an_error(\u003cspan class=\"synType\"\u003eMyApiClient\u003c/span\u003e::\u003cspan class=\"synType\"\u003eApiLimitError\u003c/span\u003e)\n      .after_retry(\u003cspan class=\"synConstant\"\u003e3\u003c/span\u003e).times\n      .when_receive(\u003cspan class=\"synConstant\"\u003ebody\u003c/span\u003e: { \u003cspan class=\"synConstant\"\u003eerrors\u003c/span\u003e: { \u003cspan class=\"synConstant\"\u003ecode\u003c/span\u003e: \u003cspan class=\"synConstant\"\u003e20\u003c/span\u003e } }.to_json)\n  \u003cspan class=\"synStatement\"\u003eend\u003c/span\u003e\n\u003cspan class=\"synStatement\"\u003eend\u003c/span\u003e\n\u003c/pre\u003e\n\n\n\u003cp\u003eã¾ãŸã€ \u003ccode\u003eExampleApiClient\u003c/code\u003e ã¯ \u003ccode\u003estub_api_client\u003c/code\u003e ã‚„ \u003ccode\u003estub_api_client_all\u003c/code\u003e ã‚’ä½¿ç”¨ã™ã‚‹ã¨ã‚¹ã‚¿ãƒ–åŒ–ã§ãã¾ã™ã€‚\nã‚¹ã‚¿ãƒ–åŒ–ã—ãŸçŠ¶æ…‹ã ã¨ä»»æ„ã® \u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/API\"\u003eAPI\u003c/a\u003e ãƒ¬ã‚¹ãƒãƒ³ã‚¹ã‚’è¿”ã™ã‹ã€ä»»æ„ã®ä¾‹å¤–ã‚’ç™ºç”Ÿã•ã›ã‚‹ã€ã¨ã„ã†å‹•ä½œã«ãªã£ã¦ãƒªãƒˆãƒ©ã‚¤ãŒç™ºç”Ÿã—ãªããªã‚‹ã®ã§ã€ä¸Šè¨˜ã®å•é¡Œã¯ã‚ã‚Šã¾ã›ã‚“ã§ã—ãŸã€‚\u003c/p\u003e\n\n\u003cpre class=\"code lang-ruby\" data-lang=\"ruby\" data-unlink\u003estub_api_client_all(\u003cspan class=\"synType\"\u003eExampleApiClient\u003c/span\u003e, \u003cspan class=\"synConstant\"\u003eget_users\u003c/span\u003e: { \u003cspan class=\"synConstant\"\u003eusers\u003c/span\u003e: [{ \u003cspan class=\"synConstant\"\u003eid\u003c/span\u003e: \u003cspan class=\"synConstant\"\u003e1\u003c/span\u003e }, { \u003cspan class=\"synConstant\"\u003eid\u003c/span\u003e: \u003cspan class=\"synConstant\"\u003e2\u003c/span\u003e }, { \u003cspan class=\"synConstant\"\u003eid\u003c/span\u003e: \u003cspan class=\"synConstant\"\u003e3\u003c/span\u003e }] })\n\nresponse = \u003cspan class=\"synType\"\u003eExampleApiClient\u003c/span\u003e.new.get_users\nresponse.users \u003cspan class=\"synComment\"\u003e# =\u0026gt; [{ id: 1 }, { id: 2 }, { id: 3 }]\u003c/span\u003e\n\u003c/pre\u003e\n\n\n\u003ch2\u003e\u003ca href=\"https://github.com/ryz310/my_api_client/pull/175\"\u003e#175\u003c/a\u003e Verify arguments on error handling definition\u003c/h2\u003e\n\n\u003cp\u003e\u003ccode\u003eerror_handling\u003c/code\u003e ã®å®šç¾©ã§ãƒ¬ã‚¹ãƒãƒ³ã‚¹ã®\u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/%A5%B9%A5%C6%A1%BC%A5%BF%A5%B9%A5%B3%A1%BC%A5%C9\"\u003eã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ã‚³ãƒ¼ãƒ‰\u003c/a\u003eã‚’æŒ‡å®šã™ã‚‹ã“ã¨ãŒã§ãã‚‹ã‚“ã§ã™ãŒã€ã“ã®ã‚ªãƒ—ã‚·ãƒ§ãƒ³åãŒ \u003ccode\u003estatus_code\u003c/code\u003e ãªã®ã‹ \u003ccode\u003estatus\u003c/code\u003e ãªã®ã‹ã‚’ã‚ˆãé–“é•ãˆã‚‹ã€ã¨ã„ã†å•é¡ŒãŒã‚ã‚Šã¾ã—ãŸã€‚\u003ccode\u003e$ rails g api_client\u003c/code\u003e ã‚’ä½¿ç”¨ã™ã‚‹ã¨ãƒ†ãƒ³ãƒ—ãƒ¬ãŒä½œæˆã•ã‚Œã‚‹ã®ã§ã€ãã“ã‹ã‚‰ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°ã®å®šç¾©ã‚’è¡Œã†ã¨é–“é•ãˆã«ãã„ã®ã§ã™ãŒã€å¾Œã‹ã‚‰ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°ã‚’è¿½åŠ ã™ã‚‹æ™‚ã¨ã‹ã«ã‚„ã‚‰ã‹ã—ã¾ã™ã€‚ä½œè€…è‡ªèº«ã‚‚ãŸã¾ã«ã‚„ã‚‰ã‹ã—ã¦ã¾ã—ãŸğŸ˜‡\u003c/p\u003e\n\n\u003cpre class=\"code lang-ruby\" data-lang=\"ruby\" data-unlink\u003e\u003cspan class=\"synComment\"\u003e# æ­£è§£\u003c/span\u003e\nerror_handling \u003cspan class=\"synConstant\"\u003estatus_code\u003c/span\u003e: \u003cspan class=\"synConstant\"\u003e400\u003c/span\u003e..\u003cspan class=\"synConstant\"\u003e499\u003c/span\u003e, \u003cspan class=\"synConstant\"\u003eraise\u003c/span\u003e: \u003cspan class=\"synType\"\u003eMyApiClient\u003c/span\u003e::\u003cspan class=\"synType\"\u003eClientError\u003c/span\u003e\n\n\u003cspan class=\"synComment\"\u003e# é–“é•ã„\u003c/span\u003e\nerror_handling \u003cspan class=\"synConstant\"\u003estatus\u003c/span\u003e: \u003cspan class=\"synConstant\"\u003e400\u003c/span\u003e..\u003cspan class=\"synConstant\"\u003e499\u003c/span\u003e, \u003cspan class=\"synConstant\"\u003eraise\u003c/span\u003e: \u003cspan class=\"synType\"\u003eMyApiClient\u003c/span\u003e::\u003cspan class=\"synType\"\u003eClientError\u003c/span\u003e\n\u003c/pre\u003e\n\n\n\u003cp\u003eã“ã® PR ã®å¯¾å¿œã§é–“é•ã£ãŸã‚ªãƒ—ã‚·ãƒ§ãƒ³ã‚’æŒ‡å®šã™ã‚‹ã¨ä»¥ä¸‹ã®ã‚ˆã†ãªä¾‹å¤–ãŒç™ºç”Ÿã™ã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã—ãŸã€‚\u003c/p\u003e\n\n\u003cpre class=\"code\" data-lang=\"\" data-unlink\u003eRuntimeError:\n  Specified an incorrect option: `status`\n  You can use options that: [:response, :status_code, :json, :with, :raise, :block]\u003c/pre\u003e\n\n\n\u003ch2\u003e\u003ca href=\"https://github.com/ryz310/my_api_client/pull/176\"\u003e#176\u003c/a\u003e Provides a syntax sugar of \u003ccode\u003eretry_on\u003c/code\u003e on \u003ccode\u003eerror_handling\u003c/code\u003e\u003c/h2\u003e\n\n\u003cp\u003eæœ€åˆã® PR ã§ã‚‚å‡ºã¦ããŸ \u003ccode\u003eretry_on\u003c/code\u003e ã§ã™ãŒã€ \u003ccode\u003eerror_handling raise: MyApiClient::ApiLimitError\u003c/code\u003e ã§ã‚‚åŒã˜ä¾‹å¤–ã‚’æŒ‡å®šã—ã¦ã„ã¦ DRY ãªæ„Ÿã˜ã˜ã‚ƒãªã‹ã£ãŸã‚Šã€\u003ccode\u003eretry_on\u003c/code\u003e ã¨ \u003ccode\u003eerror_handling\u003c/code\u003e ã‚’ãã‚Œãã‚Œå®šç¾©ã—ã¦ã‚‹ã¨ãŠäº’ã„ã®é–¢é€£ãŒå®Ÿæ„Ÿã—ã¥ã‚‰ã„ã€ã¨ã„ã†ä¸æº€ãŒã‚ã‚Šã¾ã—ãŸã€‚\u003c/p\u003e\n\n\u003cpre class=\"code lang-ruby\" data-lang=\"ruby\" data-unlink\u003e\u003cspan class=\"synPreProc\"\u003eclass\u003c/span\u003e \u003cspan class=\"synType\"\u003eExampleApiClient\u003c/span\u003e \u0026lt; \u003cspan class=\"synType\"\u003eMyApiClient\u003c/span\u003e::\u003cspan class=\"synType\"\u003eBase\u003c/span\u003e\n  endpoint \u003cspan class=\"synSpecial\"\u003e'\u003c/span\u003e\u003cspan class=\"synConstant\"\u003ehttps://example.com\u003c/span\u003e\u003cspan class=\"synSpecial\"\u003e'\u003c/span\u003e\n\n  retry_on \u003cspan class=\"synType\"\u003eMyApiClient\u003c/span\u003e::\u003cspan class=\"synType\"\u003eApiLimitError\u003c/span\u003e, \u003cspan class=\"synConstant\"\u003ewait\u003c/span\u003e: \u003cspan class=\"synConstant\"\u003e1\u003c/span\u003e.minute, \u003cspan class=\"synConstant\"\u003eattempts\u003c/span\u003e: \u003cspan class=\"synConstant\"\u003e3\u003c/span\u003e\n  error_handling \u003cspan class=\"synConstant\"\u003ejson\u003c/span\u003e: { \u003cspan class=\"synSpecial\"\u003e'\u003c/span\u003e\u003cspan class=\"synConstant\"\u003e$.errors.code\u003c/span\u003e\u003cspan class=\"synSpecial\"\u003e'\u003c/span\u003e: \u003cspan class=\"synConstant\"\u003e20\u003c/span\u003e }, \u003cspan class=\"synConstant\"\u003eraise\u003c/span\u003e: \u003cspan class=\"synType\"\u003eMyApiClient\u003c/span\u003e::\u003cspan class=\"synType\"\u003eApiLimitError\u003c/span\u003e\n\n  \u003cspan class=\"synComment\"\u003e# GET https://example.com/users\u003c/span\u003e\n  \u003cspan class=\"synPreProc\"\u003edef\u003c/span\u003e \u003cspan class=\"synIdentifier\"\u003eget_users\u003c/span\u003e\n    get \u003cspan class=\"synSpecial\"\u003e'\u003c/span\u003e\u003cspan class=\"synConstant\"\u003eusers\u003c/span\u003e\u003cspan class=\"synSpecial\"\u003e'\u003c/span\u003e\n  \u003cspan class=\"synPreProc\"\u003eend\u003c/span\u003e\n\u003cspan class=\"synPreProc\"\u003eend\u003c/span\u003e\n\u003c/pre\u003e\n\n\n\u003cp\u003eã“ã® \u003ccode\u003ePR\u003c/code\u003e ã§ã¯ \u003ccode\u003eretry\u003c/code\u003e ã¨ã„ã†ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã‚’ \u003ccode\u003eerror_handling\u003c/code\u003e ã«è¿½åŠ ã—ã¦ã„ã¾ã™ã€‚ã“ã‚Œã«ã‚ˆã‚Šã€ä»¥ä¸‹ã® 2 ã¤ã®ã‚³ãƒ¼ãƒ‰ã¯ç­‰ä¾¡ã«ãªã‚Šã¾ã™ã€‚\u003c/p\u003e\n\n\u003cpre class=\"code lang-ruby\" data-lang=\"ruby\" data-unlink\u003eretry_on \u003cspan class=\"synType\"\u003eMyApiClient\u003c/span\u003e::\u003cspan class=\"synType\"\u003eApiLimitError\u003c/span\u003e, \u003cspan class=\"synConstant\"\u003ewait\u003c/span\u003e: \u003cspan class=\"synConstant\"\u003e1\u003c/span\u003e.minute, \u003cspan class=\"synConstant\"\u003eattempts\u003c/span\u003e: \u003cspan class=\"synConstant\"\u003e3\u003c/span\u003e\nerror_handling \u003cspan class=\"synConstant\"\u003ejson\u003c/span\u003e: { \u003cspan class=\"synSpecial\"\u003e'\u003c/span\u003e\u003cspan class=\"synConstant\"\u003e$.errors.code\u003c/span\u003e\u003cspan class=\"synSpecial\"\u003e'\u003c/span\u003e: \u003cspan class=\"synConstant\"\u003e20\u003c/span\u003e }, \u003cspan class=\"synConstant\"\u003eraise\u003c/span\u003e: \u003cspan class=\"synType\"\u003eMyApiClient\u003c/span\u003e::\u003cspan class=\"synType\"\u003eApiLimitError\u003c/span\u003e\n\u003c/pre\u003e\n\n\n\n\n\u003cpre class=\"code lang-ruby\" data-lang=\"ruby\" data-unlink\u003eerror_handling \u003cspan class=\"synConstant\"\u003ejson\u003c/span\u003e: { \u003cspan class=\"synSpecial\"\u003e'\u003c/span\u003e\u003cspan class=\"synConstant\"\u003e$.errors.code\u003c/span\u003e\u003cspan class=\"synSpecial\"\u003e'\u003c/span\u003e: \u003cspan class=\"synConstant\"\u003e20\u003c/span\u003e }, \n                          \u003cspan class=\"synConstant\"\u003eraise\u003c/span\u003e: \u003cspan class=\"synType\"\u003eMyApiClient\u003c/span\u003e::\u003cspan class=\"synType\"\u003eApiLimitError\u003c/span\u003e, \n                          \u003cspan class=\"synConstant\"\u003eretry\u003c/span\u003e: { \u003cspan class=\"synConstant\"\u003ewait\u003c/span\u003e: \u003cspan class=\"synConstant\"\u003e1\u003c/span\u003e.minute, \u003cspan class=\"synConstant\"\u003eattempts\u003c/span\u003e: \u003cspan class=\"synConstant\"\u003e3\u003c/span\u003e }\n\u003c/pre\u003e\n\n\n\u003cp\u003e\u003ccode\u003eretry_on\u003c/code\u003e ã«ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã‚’æŒ‡å®šã™ã‚‹å¿…è¦ãŒãªã‘ã‚Œã° \u003ccode\u003eretry: true\u003c/code\u003e ã¨æ›¸ã‘ã° OK ã§ã™ã€‚\u003c/p\u003e\n\n\u003cpre class=\"code lang-ruby\" data-lang=\"ruby\" data-unlink\u003eerror_handling \u003cspan class=\"synConstant\"\u003ejson\u003c/span\u003e: { \u003cspan class=\"synSpecial\"\u003e'\u003c/span\u003e\u003cspan class=\"synConstant\"\u003e$.errors.code\u003c/span\u003e\u003cspan class=\"synSpecial\"\u003e'\u003c/span\u003e: \u003cspan class=\"synConstant\"\u003e20\u003c/span\u003e }, \n                          \u003cspan class=\"synConstant\"\u003eraise\u003c/span\u003e: \u003cspan class=\"synType\"\u003eMyApiClient\u003c/span\u003e::\u003cspan class=\"synType\"\u003eApiLimitError\u003c/span\u003e, \n                          \u003cspan class=\"synConstant\"\u003eretry\u003c/span\u003e: \u003cspan class=\"synConstant\"\u003etrue\u003c/span\u003e\n\u003c/pre\u003e\n\n\n\u003cp\u003eãŸã ã—ã€ \u003ccode\u003eretry\u003c/code\u003e ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã‚’ä½¿ç”¨ã™ã‚‹éš›ã¯ä»¥ä¸‹ã®ç‚¹ã«æ³¨æ„ãŒå¿…è¦ã§ã™ã€‚\u003c/p\u003e\n\n\u003cul\u003e\n\u003cli\u003e\u003ccode\u003eerror_handling\u003c/code\u003e ã« \u003ccode\u003eraise\u003c/code\u003e ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã®æŒ‡å®šãŒå¿…é ˆã¨ãªã‚Šã¾ã™ã€‚\u003c/li\u003e\n\u003cli\u003eBlock ã‚’ä½¿ã£ãŸ \u003ccode\u003eerror_handling\u003c/code\u003e ã®å®šç¾©ã¯ç¦æ­¢ã•ã‚Œã¾ã™ã€‚\u003c/li\u003e\n\u003c/ul\u003e\n\n","contentSnippet":"my_api_client v0.12.0 ã«å«ã¾ã‚Œã‚‹ PR ã®å†…å®¹ã«ã¤ã„ã¦è§£èª¬ã—ã¦ã„ãã¾ã™ã€‚ã‚ˆã‚Šè©³ã—ã„ä½¿ã„æ–¹ã¯ README.jp.md ã‚’ã”å‚ç…§ãã ã•ã„ã€‚#173 Avoid sleep on testingmy_api_client ã§ã¯ä»¥ä¸‹ã®ã‚ˆã†ã«æ›¸ãã¨ã€ä»»æ„ã®ä¾‹å¤–ã‚’è£œè¶³ã—ã¦è‡ªå‹•çš„ã« API ãƒªã‚¯ã‚¨ã‚¹ãƒˆã‚’ãƒªãƒˆãƒ©ã‚¤ã—ã¦ãã‚Œã¾ã™ã€‚ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ç³»ã®ã‚¨ãƒ©ãƒ¼ã¨ã‹ã€ API Rate Limit ã«å¼•ã£ã‹ã‹ã£ãŸæ™‚ã¨ã‹ã«ä¾¿åˆ©ãªã‚„ã¤ã§ã™ã­ã€‚ActiveJob ã® retry_on ã¨ã»ã¼åŒã˜ä½¿ã„æ–¹ã«ãªã£ã¦ã„ã¾ã™ã€‚class ExampleApiClient \u003c MyApiClient::Base  endpoint 'https://example.com'  retry_on MyApiClient::ApiLimitError, wait: 1.minute, attempts: 3  error_handling json: { '$.errors.code': 20 }, raise: MyApiClient::ApiLimitError  # GET https://example.com/users  def get_users    get 'users'  endendãã‚Œã¯è‰¯ã„ã‚“ã§ã™ãŒã€ rspec ä¸Šã§ wait ãŒåŠ¹ã„ã¦ã—ã¾ã£ã¦ã„ãŸã®ã§ã€ä¸Šè¨˜ã®ã‚³ãƒ¼ãƒ‰ã ã¨ãƒªãƒˆãƒ©ã‚¤3å›åˆ† wait ã™ã‚‹ã®ã§ã€åˆè¨ˆ 3 åˆ†ã‚‚å¾…ãŸã•ã‚Œã¦ã—ã¾ã£ã¦ã„ã¾ã—ãŸã€‚ä¸€å¿œ rspec ã§ sleep ã‚’ stub ã™ã‚‹ã¨ã‹ã‚„ã‚Œã°å›é¿ã§ãã¾ã™ãŒã€ãã‚‚ãã‚‚ãƒ†ã‚¹ãƒˆã§ã¯ wait ã‚’ç„¡è¦–ã—ã¦æ¬²ã—ã„ã§ã™ã‚ˆã­ã€‚my_api_client ã§ã¯ be_handled_as_an_error ã¨ã„ã† rspec ã® matcher ã‚’ç”¨æ„ã—ã¦ã„ã‚‹ã®ã§ã™ãŒã€ä»Šå›ã®å¯¾å¿œã§ã€ã“ã® macher ã‚’çµŒç”±ã—ã¦ãƒªãƒˆãƒ©ã‚¤ãŒå®Ÿè¡Œã•ã‚ŒãŸå ´åˆã¯ wait ã‚’ç„¡è¦–ã™ã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã—ãŸã€‚RSpec.describe ExampleApiClient, type: :api_client do  let(:api_client) { described_class.new }  # NOTE: ãƒ¬ã‚¹ãƒãƒ³ã‚¹ã§ `{ \"errors\": { \"code\": 20 } }` ã‚’å—è¨ºã—ãŸéš›ã€3 å›ãƒªãƒˆãƒ©ã‚¤ãŒå®Ÿè¡Œã•ã‚ŒãŸå¾Œã« `MyApiClient::ApiLimitError` ã¨ã—ã¦ä¾‹å¤–å‡¦ç†ã•ã‚Œã‚‹ã€‚  it do    expect { api_request! }      .to be_handled_as_an_error(MyApiClient::ApiLimitError)      .after_retry(3).times      .when_receive(body: { errors: { code: 20 } }.to_json)  endendã¾ãŸã€ ExampleApiClient ã¯ stub_api_client ã‚„ stub_api_client_all ã‚’ä½¿ç”¨ã™ã‚‹ã¨ã‚¹ã‚¿ãƒ–åŒ–ã§ãã¾ã™ã€‚ã‚¹ã‚¿ãƒ–åŒ–ã—ãŸçŠ¶æ…‹ã ã¨ä»»æ„ã® API ãƒ¬ã‚¹ãƒãƒ³ã‚¹ã‚’è¿”ã™ã‹ã€ä»»æ„ã®ä¾‹å¤–ã‚’ç™ºç”Ÿã•ã›ã‚‹ã€ã¨ã„ã†å‹•ä½œã«ãªã£ã¦ãƒªãƒˆãƒ©ã‚¤ãŒç™ºç”Ÿã—ãªããªã‚‹ã®ã§ã€ä¸Šè¨˜ã®å•é¡Œã¯ã‚ã‚Šã¾ã›ã‚“ã§ã—ãŸã€‚stub_api_client_all(ExampleApiClient, get_users: { users: [{ id: 1 }, { id: 2 }, { id: 3 }] })response = ExampleApiClient.new.get_usersresponse.users # =\u003e [{ id: 1 }, { id: 2 }, { id: 3 }]#175 Verify arguments on error handling definitionerror_handling ã®å®šç¾©ã§ãƒ¬ã‚¹ãƒãƒ³ã‚¹ã®ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ã‚³ãƒ¼ãƒ‰ã‚’æŒ‡å®šã™ã‚‹ã“ã¨ãŒã§ãã‚‹ã‚“ã§ã™ãŒã€ã“ã®ã‚ªãƒ—ã‚·ãƒ§ãƒ³åãŒ status_code ãªã®ã‹ status ãªã®ã‹ã‚’ã‚ˆãé–“é•ãˆã‚‹ã€ã¨ã„ã†å•é¡ŒãŒã‚ã‚Šã¾ã—ãŸã€‚$ rails g api_client ã‚’ä½¿ç”¨ã™ã‚‹ã¨ãƒ†ãƒ³ãƒ—ãƒ¬ãŒä½œæˆã•ã‚Œã‚‹ã®ã§ã€ãã“ã‹ã‚‰ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°ã®å®šç¾©ã‚’è¡Œã†ã¨é–“é•ãˆã«ãã„ã®ã§ã™ãŒã€å¾Œã‹ã‚‰ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°ã‚’è¿½åŠ ã™ã‚‹æ™‚ã¨ã‹ã«ã‚„ã‚‰ã‹ã—ã¾ã™ã€‚ä½œè€…è‡ªèº«ã‚‚ãŸã¾ã«ã‚„ã‚‰ã‹ã—ã¦ã¾ã—ãŸğŸ˜‡# æ­£è§£error_handling status_code: 400..499, raise: MyApiClient::ClientError# é–“é•ã„error_handling status: 400..499, raise: MyApiClient::ClientErrorã“ã® PR ã®å¯¾å¿œã§é–“é•ã£ãŸã‚ªãƒ—ã‚·ãƒ§ãƒ³ã‚’æŒ‡å®šã™ã‚‹ã¨ä»¥ä¸‹ã®ã‚ˆã†ãªä¾‹å¤–ãŒç™ºç”Ÿã™ã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã—ãŸã€‚RuntimeError:  Specified an incorrect option: `status`  You can use options that: [:response, :status_code, :json, :with, :raise, :block]#176 Provides a syntax sugar of retry_on on error_handlingæœ€åˆã® PR ã§ã‚‚å‡ºã¦ããŸ retry_on ã§ã™ãŒã€ error_handling raise: MyApiClient::ApiLimitError ã§ã‚‚åŒã˜ä¾‹å¤–ã‚’æŒ‡å®šã—ã¦ã„ã¦ DRY ãªæ„Ÿã˜ã˜ã‚ƒãªã‹ã£ãŸã‚Šã€retry_on ã¨ error_handling ã‚’ãã‚Œãã‚Œå®šç¾©ã—ã¦ã‚‹ã¨ãŠäº’ã„ã®é–¢é€£ãŒå®Ÿæ„Ÿã—ã¥ã‚‰ã„ã€ã¨ã„ã†ä¸æº€ãŒã‚ã‚Šã¾ã—ãŸã€‚class ExampleApiClient \u003c MyApiClient::Base  endpoint 'https://example.com'  retry_on MyApiClient::ApiLimitError, wait: 1.minute, attempts: 3  error_handling json: { '$.errors.code': 20 }, raise: MyApiClient::ApiLimitError  # GET https://example.com/users  def get_users    get 'users'  endendã“ã® PR ã§ã¯ retry ã¨ã„ã†ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã‚’ error_handling ã«è¿½åŠ ã—ã¦ã„ã¾ã™ã€‚ã“ã‚Œã«ã‚ˆã‚Šã€ä»¥ä¸‹ã® 2 ã¤ã®ã‚³ãƒ¼ãƒ‰ã¯ç­‰ä¾¡ã«ãªã‚Šã¾ã™ã€‚retry_on MyApiClient::ApiLimitError, wait: 1.minute, attempts: 3error_handling json: { '$.errors.code': 20 }, raise: MyApiClient::ApiLimitErrorerror_handling json: { '$.errors.code': 20 },                           raise: MyApiClient::ApiLimitError,                           retry: { wait: 1.minute, attempts: 3 }retry_on ã«ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã‚’æŒ‡å®šã™ã‚‹å¿…è¦ãŒãªã‘ã‚Œã° retry: true ã¨æ›¸ã‘ã° OK ã§ã™ã€‚error_handling json: { '$.errors.code': 20 },                           raise: MyApiClient::ApiLimitError,                           retry: trueãŸã ã—ã€ retry ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã‚’ä½¿ç”¨ã™ã‚‹éš›ã¯ä»¥ä¸‹ã®ç‚¹ã«æ³¨æ„ãŒå¿…è¦ã§ã™ã€‚error_handling ã« raise ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã®æŒ‡å®šãŒå¿…é ˆã¨ãªã‚Šã¾ã™ã€‚Block ã‚’ä½¿ã£ãŸ error_handling ã®å®šç¾©ã¯ç¦æ­¢ã•ã‚Œã¾ã™ã€‚","link":"https://ryz310.hateblo.jp/entry/2020/01/19/152826","isoDate":"2020-01-19T06:28:26.000Z","dateMiliSeconds":1579415306000,"imageUrl":"https://cdn.blog.st-hatena.com/images/theme/og-image-1500.png","authorName":"ryz310"},{"title":"ç§ã¨ gem","content":"\u003cp\u003eã©ãƒ¼ã‚‚ã€ã‚µãƒˆã‚¦ãƒªãƒ§ã‚¦ã‚¹ã‚±ã§ã™ã€‚\n\u003ca href=\"https://ginza-rails.connpass.com/event/155467\"\u003eé‡‘æ›œæ—¥ã«ç™»å£‡ã—ãŸå‹‰å¼·ä¼š\u003c/a\u003e ã§ \u003cdel\u003eã†ã£ã‹ã‚Š\u003c/del\u003e ãƒ–ãƒ­ã‚°ä½œã‚‹ã£ã¦è¨€ã£ã¦ã—ã¾ã£ãŸã®ã§ 10 å¹´ã¶ã‚Šãã‚‰ã„ã«ãƒ–ãƒ­ã‚°ã‚’å¾©æ´»ã•ã›ã¦ã¿ã¾ã—ãŸã€‚ãƒ–ãƒ­ã‚°ã®ã‚¿ã‚¤ãƒˆãƒ«ã‚‚ 10 å¹´å‰ã®ã‚¿ã‚¤ãƒˆãƒ«ã¨åŒã˜ã§ã™ï¼ˆå…ƒãƒã‚¿ã¯\u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/%A5%D5%A5%A1%A5%DF%A5%B3%A5%F3\"\u003eãƒ•ã‚¡ãƒŸã‚³ãƒ³\u003c/a\u003eæ™‚ä»£ã®\u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/%A5%C9%A5%E9%A5%AF%A5%A8\"\u003eãƒ‰ãƒ©ã‚¯ã‚¨\u003c/a\u003e IVï¼‰\u003c/p\u003e\n\n\u003cp\u003eå‹‰å¼·ä¼šã®æ„Ÿæƒ³è¨˜äº‹ã¯è¿‘æ—¥ä¸­ã«æ›¸ã“ã†ã¨æ€ã„ã¾ã™âœï¸\u003c/p\u003e\n\n\u003ch2\u003eã“ã®è¨˜äº‹ã¯ Feedforce Advent Calendar 2019 ã® 15 æ—¥ç›®ã§ã™ã€‚\u003c/h2\u003e\n\n\u003cp\u003eã•ã¦ã€æœ€åˆã®è¨˜äº‹ã‹ã‚‰ã„ããªã‚Šä¼šç¤¾ã®\u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/%A5%A2%A5%C9%A5%D9%A5%F3%A5%C8%A5%AB%A5%EC%A5%F3%A5%C0%A1%BC\"\u003eã‚¢ãƒ‰ãƒ™ãƒ³ãƒˆã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼\u003c/a\u003eè¨˜äº‹ã«ãªã‚Šã¾ã™ğŸ™\u003c/p\u003e\n\n\u003cp\u003e\u003ciframe src=\"https://hatenablog-parts.com/embed?url=https%3A%2F%2Fadventar.org%2Fcalendars%2F4169\" title=\"feedforce Advent Calendar 2019 - Adventar\" class=\"embed-card embed-webcard\" scrolling=\"no\" frameborder=\"0\" style=\"display: block; width: 100%; height: 155px; max-width: 500px; margin: 10px 0px;\"\u003e\u003c/iframe\u003e\u003ccite class=\"hatena-citation\"\u003e\u003ca href=\"https://adventar.org/calendars/4169\"\u003eadventar.org\u003c/a\u003e\u003c/cite\u003e\u003c/p\u003e\n\n\u003cp\u003eæ˜¨æ—¥ã¯ Yutaka KAWAI ã•ã‚“ã®ã€Œã‚³ãƒ¼ãƒ’ãƒ¼ã¯ç§‘å­¦ã§ã‚ã‚‹ ~æŠ½å‡ºå™¨å…·ã«ã‚ˆã‚‹å‘³ã®é•ã„~ \u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/%A5%DA%A1%BC%A5%D1%A1%BC%A5%C9%A5%EA%A5%C3%A5%D7\"\u003eãƒšãƒ¼ãƒ‘ãƒ¼ãƒ‰ãƒªãƒƒãƒ—\u003c/a\u003eç·¨ã€ã§ã—ãŸã€‚\u003c/p\u003e\n\n\u003cp\u003e\u003ciframe src=\"https://hatenablog-parts.com/embed?url=https%3A%2F%2Fnote.com%2Futahca%2Fn%2Fn30594094e406\" title=\"ã‚³ãƒ¼ãƒ’ãƒ¼ã¯ç§‘å­¦ã§ã‚ã‚‹ ~æŠ½å‡ºå™¨å…·ã«ã‚ˆã‚‹å‘³ã®é•ã„~ ãƒšãƒ¼ãƒ‘ãƒ¼ãƒ‰ãƒªãƒƒãƒ—ç·¨ï½œYutaka KAWAIï½œnote\" class=\"embed-card embed-webcard\" scrolling=\"no\" frameborder=\"0\" style=\"display: block; width: 100%; height: 155px; max-width: 500px; margin: 10px 0px;\"\u003e\u003c/iframe\u003e\u003ccite class=\"hatena-citation\"\u003e\u003ca href=\"https://note.com/utahca/n/n30594094e406\"\u003enote.com\u003c/a\u003e\u003c/cite\u003e\u003c/p\u003e\n\n\u003cp\u003eçˆç²å±‹ã•ã‚“ã‹ãªï¼Ÿã£ã¦ãã‚‰ã„å‡„ã„è¨˜äº‹ã§ã—ãŸã­â˜•ï¸\nè¨˜äº‹ã«å‡ºã¦ããŸãƒ‰ãƒªãƒƒãƒ‘ãƒ¼ã¯å…¨ç¨®é¡æŒã£ã¦ã‚‹ã£ã¦ãƒ¤ãƒããªã„ã§ã™ã‹ï¼Ÿï¼Ÿï¼Ÿï¼ˆã‚‚ã¡ã‚ã‚“è‰¯ã„æ„å‘³ã§ï¼‰\u003c/p\u003e\n\n\u003cp\u003e\u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/%A5%DA%A1%BC%A5%D1%A1%BC%A5%C9%A5%EA%A5%C3%A5%D7\"\u003eãƒšãƒ¼ãƒ‘ãƒ¼ãƒ‰ãƒªãƒƒãƒ—\u003c/a\u003eç·¨ã£ã¦ã“ã¨ã¯ç¶šç·¨ã‚‚ã‚ã‚‹ã®ã‹ãªï¼Ÿ\nã“ã®æ„Ÿã˜ã§è¨˜äº‹ãŒé‡ç”£ã•ã‚ŒãŸã‚‰ãã®ã†ã¡æ›¸ç±åŒ–ã•ã‚Œã‚‹ã‹ã‚‚ã—ã‚Œã¾ã›ã‚“ğŸ“š\u003c/p\u003e\n\n\u003ch2\u003eæœ¬ç·¨\u003c/h2\u003e\n\n\u003cp\u003eäºˆå‘Šé€šã‚Šå€‹äººã§ gem ã‚’ä½œã‚‹æµã‚Œã«ã¤ã„ã¦è©±ãã†ã¨æ€ã†ã®ã§ã™ãŒã€\u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/%A5%A2%A5%C9%A5%D9%A5%F3%A5%C8%A5%AB%A5%EC%A5%F3%A5%C0%A1%BC\"\u003eã‚¢ãƒ‰ãƒ™ãƒ³ãƒˆã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼\u003c/a\u003eã‹ã‚‰æµã‚Œã¦ãã‚‹ã¨éã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢ã®æ–¹ã‚‚ãã£ã¨èª­ã¾ã‚Œã‚‹ã¨æ€ã†ã®ã§ã€ã‚ã‚“ã¾ã‚ŠæŠ€è¡“çš„ãªè©±é¡Œã«ã›ãšã«ãƒ•ãƒ¯ãƒƒã¨ã—ãŸè©±ã§ã‚‚ã—ã‚ˆã†ã‹ã¨æ€ã„ã¾ã™ã€‚\u003c/p\u003e\n\n\u003ch3\u003eãã‚‚ãã‚‚ gem ã£ã¦ãªã‚“ã ã£ã‘ï¼Ÿ\u003c/h3\u003e\n\n\u003cp\u003eãã‚‚ãã‚‚ gem ã£ã¦ã„ã†ã®ã¯ \u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/Ruby\"\u003eRuby\u003c/a\u003e ã§ã§ããŸãƒ©ã‚¤ãƒ–ãƒ©ãƒªã®äº‹ã§ã—ã¦ã€ä¾‹ãˆã°åƒ•ãŒå‡„ãä¾¿åˆ©ãªãƒ—ãƒ­ã‚°ãƒ©ãƒ ã‚’æ›¸ã„ã¦ã€ãã‚Œã‚’ gem ã¨ã—ã¦å…¬é–‹ã™ã‚Œã°ã€ä¸–ç•Œä¸­ã®äººãŒåƒ•ã®ã‚¤ã‚±ã¦ã‚‹ãƒ—ãƒ­ã‚°ãƒ©ãƒ ã‚’ä½¿ãˆã‚‹ã‚ˆã†ã«ãªã‚‹ã€ã¨ã„ã†ã‚‚ã®ã§ã™ã€‚ã¾ã•ã« \u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/Win-Win\"\u003eWin-Win\u003c/a\u003e ã—ã‹ãªã„ä»•çµ„ã¿ã€‚gem ã¯ä¸–ç•Œã‚’æ•‘ã„ã¾ã™ã€‚\u003c/p\u003e\n\n\u003cp\u003eä¸€æ–¹ã§ã€ãƒ—ãƒ­ã‚°ãƒ©ãƒ ã£ã¦ã®ã¯æ–°æ©Ÿèƒ½ãŒè¿½åŠ ã•ã‚ŒãŸã‚Šã€ä¸å…·åˆãŒä¿®æ­£ã•ã‚ŒãŸã‚Šã—ã¦æ—¥ã€…ã‚¢ãƒƒãƒ—ãƒ‡ãƒ¼ãƒˆãŒç¹°ã‚Šè¿”ã•ã‚Œã¦ã„ã¾ã™ã€‚\nã€Œã“ã®æ©Ÿèƒ½ã«ã¯ãƒãƒ¼ã‚¸ãƒ§ãƒ³ 1.3 ä»¥é™ã§ãªã„ã¨ä½¿ãˆã¾ã›ã‚“ã€ã¨ã‹ã€Œè‰²ã€…ã‚¤ã‚±ã¦ãªã„éƒ¨åˆ†ãŒå¤šã„ã‹ã‚‰ã“ã®æ©Ÿèƒ½ã¯å»ƒæ­¢ã—ã¾ã™ã€ã¨ã„ã†å¤‰æ›´ã‚‚ã‚ã‚‹ã®ã§ã€è‡ªåˆ†ã®ãƒ—ãƒ­ã‚°ãƒ©ãƒ ã¯ä¸€ä½“ã©ã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã® gem ã‚’ä½¿ã£ã¦ã„ã‚‹ã®ã‹ã€ã¨ã„ã†è©±ãŒç‰©å‡„ãé‡è¦ã ã£ãŸã‚Šã—ã¾ã™ã€‚\u003c/p\u003e\n\n\u003cp\u003egem ã«ã¯ã©ã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã‚’ä½¿ã£ã¦ã„ã‚‹ã®ã‹ï¼ˆä¾å­˜ã—ã¦ã„ã‚‹ã®ã‹ï¼‰ã¨ã„ã†æƒ…å ±ã‚’ç®¡ç†ã™ã‚‹æ©Ÿèƒ½ã‚‚å‚™ã‚ã£ã¦ã„ã¾ã™ã®ã§ã€ã‚ã‚‹æ—¥çªç„¶æ–°ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã§æŒ™å‹•ãŒå¤‰ã‚ã£ã¦ã‚‚ã€Œã†ã¡ã¯ä¸€å€‹å‰ã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ä½¿ã£ã¦ã¾ã™ï¼ã€ã¨ã„ã†ç®¡ç†ãŒã§ãã¦ã„ã‚Œã°å‹•ã‹ãªããªã‚‹ã“ã¨ã¯ãªã„ã®ã§ã™ã€‚\u003c/p\u003e\n\n\u003cp\u003eã¨ã¯ã„ãˆæ–°ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã§ã„ããªã‚Šãã‚“ãªãƒˆãƒ³ãƒ‡ãƒ¢å¤‰æ›´ã•ã‚ŒãŸã‚‰å›°ã‚Šã¾ã™ã‘ã©ã‚‚ã€‚\u003c/p\u003e\n\n\u003ch3\u003eåƒ•ãŒåˆã‚ã¦ä½œã£ãŸ gem\u003c/h3\u003e\n\n\u003cp\u003eè‡ªåˆ†ãŒç”Ÿã¾ã‚Œã¦åˆã‚ã¦ä½œã£ãŸ gem ã¯ã“ã® \u003ccode\u003erubocop_challenger\u003c/code\u003e ã¨ã„ã† gem ã§ã™ã€‚\u003c/p\u003e\n\n\u003cp\u003e\u003ciframe src=\"https://hatenablog-parts.com/embed?url=https%3A%2F%2Fgithub.com%2Fryz310%2Frubocop_challenger\" title=\"ryz310/rubocop_challenger\" class=\"embed-card embed-webcard\" scrolling=\"no\" frameborder=\"0\" style=\"display: block; width: 100%; height: 155px; max-width: 500px; margin: 10px 0px;\"\u003e\u003c/iframe\u003e\u003ccite class=\"hatena-citation\"\u003e\u003ca href=\"https://github.com/ryz310/rubocop_challenger\"\u003egithub.com\u003c/a\u003e\u003c/cite\u003e\u003c/p\u003e\n\n\u003cp\u003eä¸€èˆ¬çš„ã« gem ã¯ä»–ã®ãƒ—ãƒ­ã‚°ãƒ©ãƒ ã¨çµ„ã¿åˆã‚ã›ã¦ä½¿ã†äº‹ãŒå¤šã„ã®ã§ã™ãŒã€ \u003ccode\u003erubocop_challenger\u003c/code\u003e ã¯å˜ä½“ã§å‹•ä½œã™ã‚‹ã‚„ã¤ã§ã—ã¦ã€å®Ÿè¡Œã—ãŸ\u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/%A5%C7%A5%A3%A5%EC%A5%AF%A5%C8\"\u003eãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆ\u003c/a\u003eãƒªï¼ˆãƒ•ã‚©ãƒ«ãƒ€ï¼‰ã«ã‚ã‚‹ãƒ—ãƒ­ã‚°ãƒ©ãƒ ã®\u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/%A5%BD%A1%BC%A5%B9%A5%B3%A1%BC%A5%C9\"\u003eã‚½ãƒ¼ã‚¹ã‚³ãƒ¼ãƒ‰\u003c/a\u003eã‚’å°‘ã—ãšã¤ç¶ºéº—ã«ï¼ˆäººé–“ã«ã¨ã£ã¦èª­ã¿ã‚„ã™ãã—ãŸã‚Šã€æ›¸ãæ–¹ã®ãƒ«ãƒ¼ãƒ«ã‚’çµ±ä¸€ã—ãŸã‚Šï¼‰ã—ã¦ãã‚Œã‚‹ã€ã¨ã„ã† gem ã§ã™ã€‚\u003c/p\u003e\n\n\u003cp\u003eã¨ã„ã†ã¨ç‰©å‡„ã„ç¥ gem ã§ã™ãŒã€RuboCop ã¨ã„ã†\u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/%A5%BD%A1%BC%A5%B9%A5%B3%A1%BC%A5%C9\"\u003eã‚½ãƒ¼ã‚¹ã‚³ãƒ¼ãƒ‰\u003c/a\u003eã‚’è§£æã—ã¦ãã‚Œã‚‹ä¾¿åˆ©ãª gem ã‚’å†…éƒ¨ã§å‘¼ã³å‡ºã—ã¦ãƒ—ãƒ«ãƒªã‚¯ï¼ˆãƒ—ãƒ«ãƒªã‚¯ãŒä½•ãªã®ã‹ã¯ã‚°ã‚°ã£ã¦ãã ã•ã„ï¼‰ä½œã£ã¦ãã‚Œã‚‹ã€ã¨ã„ã†ä»•çµ„ã¿ã«ãªã£ã¦ã„ã‚‹ã®ã§ã€ã€Œäººé–“ãŒæ¯æ—¥æ‰‹ä½œæ¥­ã§ã‚„ã‚‰ãªã„ã¨ã„ã‘ãªã‹ã£ãŸäº‹ã‚’è‡ªå‹•çš„ã«ã‚„ã‚‹ã€ã¨ã„ã†ã®ãŒ \u003ccode\u003erubocop_challenger\u003c/code\u003e ã®æä¾›ã™ã‚‹ä¾¡å€¤ã«ãªã‚Šã¾ã™ ğŸ¤–\u003c/p\u003e\n\n\u003cp\u003eè©³ã—ãã¯ã¡ã‚‡ã†ã©ä¸€å¹´ãã‚‰ã„å‰ã«ä¼šç¤¾ã®ãƒ–ãƒ­ã‚°ã«æ›¸ã„ãŸã®ã§ã€ã”èˆˆå‘³ã‚ã‚Šã¾ã—ãŸã‚‰æ˜¯éã€‚å¤ã„å†…å®¹ãªã®ã§ã€ç¾åœ¨ã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã‹ã‚‰ã¯å°‘ã—ãšã‚Œã¦ã¾ã™ã‘ã©ã€‚\u003c/p\u003e\n\n\u003cp\u003e\u003ciframe src=\"https://hatenablog-parts.com/embed?url=https%3A%2F%2Fdeveloper.feedforce.jp%2Fentry%2F2018%2F12%2F05%2F140000\" title=\"ã¾ã  .rubocop_todo.yml ã§æ¶ˆè€—ã—ã¦ã‚‹ã®ï¼Ÿ - Feedforce Developer Blog\" class=\"embed-card embed-blogcard\" scrolling=\"no\" frameborder=\"0\" style=\"display: block; width: 100%; height: 190px; max-width: 500px; margin: 10px 0px;\"\u003e\u003c/iframe\u003e\u003ccite class=\"hatena-citation\"\u003e\u003ca href=\"https://developer.feedforce.jp/entry/2018/12/05/140000\"\u003edeveloper.feedforce.jp\u003c/a\u003e\u003c/cite\u003e\u003c/p\u003e\n\n\u003cp\u003eã¡ãªã¿ã«ã‚‚ã†ã™ã \u003ccode\u003ev2.0.0\u003c/code\u003e ã‚’ãƒªãƒªãƒ¼ã‚¹ã™ã‚‹äºˆå®šã§ã™ã€‚ï¼ˆpre ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã§ã™ãŒã€ç¾æ™‚ç‚¹ã§ã‚‚ã™ã§ã«ä½¿ãˆã¾ã™ï¼‰\u003c/p\u003e\n\n\u003ch3\u003eãƒ‹ãƒƒãƒãª gem\u003c/h3\u003e\n\n\u003cp\u003eåˆã‚ã¦ä½œã£ãŸã®ã¯ \u003ccode\u003erubocop_challenger\u003c/code\u003e ã¨ã„ã†ã€Œäººé–“ãŒæ¯æ—¥æ‰‹ä½œæ¥­ã§ã‚„ã‚‰ãªã„ã¨ã„ã‘ãªã‹ã£ãŸäº‹ã‚’è‡ªå‹•çš„ã«ã‚„ã‚‹ã€ gem ã§ã—ãŸã€‚\nå®Œå…¨ã«è‡ªåˆ†ã®ä¼šç¤¾ã®ãƒ—ãƒ­ãƒ€ã‚¯ãƒˆç”¨ã«ä½œã£ãŸ gem ã§ã—ãŸãŒã€ \u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/Twitter\"\u003eTwitter\u003c/a\u003e ãªã©ã‚’\u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/%A5%A8%A5%B4%A5%B5\"\u003eã‚¨ã‚´ã‚µ\u003c/a\u003eã—ã¦ã‚‹ã¨ã€ã¼ã¡ã¼ã¡ä½¿ã£ã¦é ‚ã‘ã¦ã„ã‚‹ã‚ˆã†ã§ã™ã€‚\nåŒã˜ã‚ˆã†ãªæ‚©ã¿ã‚’æŠ±ãˆã¦ã„ã‚‹äººã¯ä¸–ã®ä¸­ã«ã¯ã„ã‚‹ã‚‚ã‚“ã§ã™ã­âœ¨\u003c/p\u003e\n\n\u003cp\u003eã¨ã¯ã„ãˆã€ gem ã‚’å…¬é–‹ã—ãŸã‚‰ä¸–ç•Œä¸­ã®äººãŸã¡ãŒä½¿ã£ã¦ãã‚Œã‚‹ã€ã¨ã„ã†ã“ã¨ã«ã¯ä¸­ã€…ãªã‚‰ãªã„ã§ã™ã€‚\nä¸€å¿œé ‘å¼µã£ã¦è‹±èªã§èª¬æ˜ã‚’æ›¸ã„ãŸã‚Šã¯ã—ã¦ã„ã¾ã™ãŒã€å€‹äººã®ç™ºä¿¡åŠ›ã«ã¯é™ç•Œã‚‚ã‚ã‚Šã¾ã™ã—ã€ä½•ã‚ˆã‚Šãƒ‹ãƒƒãƒã§ã™ã€‚\u003c/p\u003e\n\n\u003cp\u003eã¨ã„ã†ã‹ã€å€‹äººãŒä½œã‚‹ gem ãªã‚“ã¦å¤§æŠµã¯ãƒ‹ãƒƒãƒãªã‚‚ã®ã«ãªã‚Šã¾ã™ã€‚\nã€Œã‚ãƒ¼ã€ã“ã‚“ãª gem ã‚ã£ãŸã‚‰ã‚ã£ã¡ã‚ƒä¾¿åˆ©ã‚„ã‚“ï¼Ÿã€ã¨ã„ã† gem ã¯å¤§æŠµä¸–ç•Œã®ã©ã“ã‹ã®èª°ã‹ãŒä½œã£ã¦ã¾ã™ã€‚\nãªã®ã§ã€ä»Šã¾ã§ã«ãªã„ã‚ˆã†ãªæ–°ã—ã„gem ã‚’ä½œã‚ã†ã¨æ€ã£ãŸã‚‰å¤§æŠµãƒ‹ãƒƒãƒã«ãªã‚Šã¾ã™ã€‚\u003c/p\u003e\n\n\u003cp\u003eã˜ã‚ƒã‚ gem ã‚’å…¬é–‹ã—ã¦ã‚‚å¤§ã—ã¦ä½¿ã£ã¦ã‚‚ã‚‰ãˆãªã„ã—ã€ã‚ã‚“ã¾ã‚Šæ„å‘³ãªã„ã˜ã‚ƒã‚“ã€ã£ã¦æ€ã†ã‹ã‚‚ã—ã‚Œã¾ã›ã‚“ãŒã€æ„å‘³ç„¡ãã¯ãªã„ã‚“ã§ã™ã‚ˆã­ğŸ‘\u003c/p\u003e\n\n\u003ch3\u003eåŠ¹èƒ½ 1. \u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/%A5%B9%A5%AD%A5%EB%A5%A2%A5%C3%A5%D7\"\u003eã‚¹ã‚­ãƒ«ã‚¢ãƒƒãƒ—\u003c/a\u003e\u003c/h3\u003e\n\n\u003cp\u003eã¾ãšã€ã‚ã£ã¡ã‚ƒãƒ—ãƒ­ã‚°ãƒ©ãƒ ã‚’æ›¸ãå‹‰å¼·ã«ãªã‚Šã¾ã™ã€‚\u003c/p\u003e\n\n\u003cp\u003e\u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/Ruby\"\u003eRuby\u003c/a\u003e ã§ Web é–‹ç™ºã‚’ã—ã¦ã„ã‚‹äººã¯å¤§æŠµ \u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/Ruby%20on%20Rails\"\u003eRuby on Rails\u003c/a\u003e ã‚’ä½¿ã£ã¦æ›¸ã„ã¦ã‚‹ã¨æ€ã„ã¾ã™ã€‚ã¡ãªã¿ã« \u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/Ruby%20on%20Rails\"\u003eRuby on Rails\u003c/a\u003e ã‚‚ gem ã§ã™ã€‚\n\u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/Ruby%20on%20Rails\"\u003eRuby on Rails\u003c/a\u003e ã¯å‡„ãã‚ˆãå‡ºæ¥ã¦ã„ã‚‹ã®ã§ã€Web é–‹ç™ºã®é›£ã—ã„éƒ¨åˆ†ã‚’ 9 å‰²ãã‚‰ã„ã®è‚©ä»£ã‚ã‚Šã—ã¦ãã‚Œã¾ã™ã€‚\u003c/p\u003e\n\n\u003cp\u003eã¨ã“ã‚ãŒã€è‡ªåˆ†ã§ä¸€ã‹ã‚‰ gem ã‚’ä½œã‚ã†ã¨ã™ã‚‹ã¨ã€è‡ªåˆ†ã®åŠ›ã§è§£æ±ºã—ãªã„ã¨ã„ã‘ãªã„ãƒ—ãƒ­ã‚°ãƒ©ãƒ çš„ãªèª²é¡ŒãŒã‚ã£ã¡ã‚ƒã‚ã‚Šã¾ã™ã€‚\nWeb é–‹ç™ºã¯ã‚¤ãƒ³ã‚¿ãƒ¼ãƒãƒƒãƒˆç‰¹æœ‰ã®èª²é¡ŒãŒå¤šã„ã§ã™ãŒã€ gem ã®é–‹ç™ºã«ã¯ Web é–‹ç™ºä»¥å¤–ã®çŸ¥è­˜ã‚‚è‰²ã€…è¦æ±‚ã•ã‚ŒãŸã‚Šã—ã¾ã™ã€‚\u003c/p\u003e\n\n\u003cp\u003eä½•ã‚ˆã‚Šã€è‡ªåˆ†è‡ªèº«ã§ä»•æ§˜ã‚’ä¸€ã‹ã‚‰è€ƒãˆãªã„ã¨ã„ã‘ãªã„ã®ã§ã€æ™®æ®µã®é–‹ç™ºä»¥ä¸Šã«æ„æ€æ±º\u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/%C4%EA%CE%CC\"\u003eå®šé‡\u003c/a\u003eãŒã‚ã£ã¡ã‚ƒå¤šã„ã§ã™ã€‚\nè‡ªåˆ†ã¯ \u003ccode\u003erubocop_challenger\u003c/code\u003e ä»¥å¤–ã«ã‚‚ãƒ¡ãƒ³ãƒ†ãƒŠãƒ³ã‚¹ã—ã¦ã„ã‚‹ gem ãŒ 3 ã¤ã»ã©ã‚ã‚Šã¾ã™ãŒã€ã“ã‚Œã‚‰ã®é–‹ç™ºã‚’é€šã—ã¦æ—¥é ƒã® Web é–‹ç™ºã®å“è³ªã‚‚ä¸€æ®µãƒ¬ãƒ™ãƒ«ãŒä¸ŠãŒã£ãŸãªã€ã¨æ„Ÿã˜ã‚‹äº‹ãŒå¤šã„ã§ã™ã€‚\u003c/p\u003e\n\n\u003cp\u003eãªã®ã§ã€gem ã®é–‹ç™ºã¯è‡ªåˆ†è‡ªèº«ã®ä¿®è¡Œã®ãŸã‚ã ã¨æ€ã£ã¦ã‚„ã‚‹ã¨è‰¯ã„ã‹ã‚‚ã—ã‚Œã¾ã›ã‚“ã€‚èª°ã‹ã«ä½¿ãˆã¦ã‚‚ã‚‰ãˆãŸã‚‰ãƒ©ãƒƒã‚­ãƒ¼ã€ã¿ãŸã„ãªã€‚\u003c/p\u003e\n\n\u003cp\u003eé€†ã«ä½¿ã£ã¦ã‚‚ã‚‰ãˆã‚‹äº‹ã‚’ãƒ¢ãƒãƒ™ãƒ¼ã‚·ãƒ§ãƒ³ã«ã™ã‚‹ã¨ã¡ã‚‡ã£ã¨è¾›ã„ã‹ã‚‚ã—ã‚Œãªã„ã§ã™ã€‚æ€ã£ãŸä»¥ä¸Šã«æµè¡Œã‚‰ãªã„ã€‚ã‚‚ã£ã¨æµè¡Œã‚Œï¼\u003c/p\u003e\n\n\u003ch3\u003eåŠ¹èƒ½ 2. \u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/%A5%DD%A1%BC%A5%C8%A5%D5%A5%A9%A5%EA%A5%AA\"\u003eãƒãƒ¼ãƒˆãƒ•ã‚©ãƒªã‚ª\u003c/a\u003e\u003c/h3\u003e\n\n\u003cp\u003egem ã‚’å…¬é–‹ã—ã¦ã‚‹ã›ã„ã‹ã€ä¼æ¥­ã‹ã‚‰ã®ã‚¹ã‚«ã‚¦ãƒˆãŒã‚ã£ã¡ã‚ƒæ¥ã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã™ã€‚\u003c/p\u003e\n\n\u003cp\u003eè‡ªåˆ†è‡ªèº«ã€ä¼šç¤¾ã®æ¡ç”¨æ´»å‹•ã«é–¢ã‚ã‚‹æ©Ÿä¼šãŒå¤šã„ã®ã§ã™ãŒã€ä¾‹ãˆã°ã‚¹ã‚«ã‚¦ãƒˆå€™è£œã‚’æ¢ã™éš›ã«å€™è£œè€…ã® \u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/GitHub\"\u003eGitHub\u003c/a\u003e ã¯å¿…ãšè¦‹ã‚‹ã‚ˆã†ã«ã—ã¦ã„ã¾ã™ã€‚\nãã®çµŒé¨“ã‹ã‚‰ã§ã™ãŒè‡ªåˆ†ã§ gem æ›¸ã„ã¦å…¬é–‹ã—ã¦ã„ã‚‹ã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢ã¯ä¸–ã®ä¸­ã® 1 å‰²ã‚‚ã„ãªã„ã‚“ã˜ã‚ƒãªã„ã‹ãªã€ã£ã¦æ€ã£ã¦ã„ã¾ã™ã€‚\u003c/p\u003e\n\n\u003cp\u003eè‡ªåˆ†ã‚‚ gem ã‚’ä½œã‚‹ã‚ˆã†ã«ãªã£ãŸã®ã¯ã“ã“ 1 ~ 2 å¹´ã§ã™ã—ã€å‰è·ã«ã„ãŸé ƒã ã¨æ™®æ®µã®ä»•äº‹ã®å¸°ã‚ŠãŒé…ã‹ã£ãŸã‚Šã‚‚ã—ãŸã®ã§å®¶ã«å¸°ã£ã¦ã‹ã‚‰ gem ã‚’ä½œã‚‹ã‚ˆã†ãªä½™è£•ã‚‚ã‚ã‚Šã¾ã›ã‚“ã§ã—ãŸã€‚ãªã®ã§ã€æœ¬äººã®ç†±é‡ã‚„ç’°å¢ƒãŒæ•´ã‚ãªã„ã¨ gem ã®é–‹ç™ºã¯é›£ã—ã„ã‹ã‚‚ã—ã‚Œã¾ã›ã‚“ã€‚\u003c/p\u003e\n\n\u003cp\u003eã—ã‹ã—ãªãŒã‚‰ã€è‡ªåˆ†ã‚‚æ¡ç”¨æ´»å‹•ã—ã¦ã„ã¦ã€ŒãŠã€‚ã“ã®äººã™ã”ã„ã‚„ã‚“ã€ã£ã¦ãªã‚‹ã®ã¯ \u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/GitHub\"\u003eGitHub\u003c/a\u003e ã‚„ Qiita ã¨ã‹ã§ä½•ã‹ã—ã‚‰ã‚¢ã‚¦ãƒˆãƒ—ãƒƒãƒˆã®ã‚ã‚‹æ–¹ãªã‚“ã§ã™ã‚ˆã­ã€‚\nã‚‚ã¡ã‚ã‚“ã‚¢ã‚¦ãƒˆãƒ—ãƒƒãƒˆãŒç„¡ãã¦ã‚‚å®Ÿéš›ä¼šã£ã¦ã¿ãŸã‚‰å‡„ã‹ã£ãŸã£ã¦äººã¯æ²¢å±±ã„ã‚‹ã‚“ã§ã™ãŒã€æ¡ç”¨æ´»å‹•ã ã¨ãã®äººã®ä»•äº‹ã§ã®ã‚¢ã‚¦ãƒˆãƒ—ãƒƒãƒˆã£ã¦è¦‹ãˆãªã„ã‚‚ã‚“ã§ã™ã‹ã‚‰ã€‚ã€‚\u003c/p\u003e\n\n\u003cp\u003eåˆ¥ã« gem ã˜ã‚ƒãªãã¦ã‚‚è‰¯ã„ã‚“ã§ã™ãŒã€è‡ªåˆ†è‡ªèº«ã®ã‚­ãƒ£ãƒªã‚¢å½¢æˆã‚’æ„è­˜ã™ã‚‹ãŸã‚ã®ã‚¢ã‚¦ãƒˆãƒ—ãƒƒãƒˆã®ä¸€ç’°ã¨ã—ã¦ã¨ã¦ã‚‚æœ‰ç”¨ã ã¨æ€ã„ã¾ã™ã€‚\u003c/p\u003e\n\n\u003ch3\u003eåŠ¹èƒ½ 3. é­”æ³•ã®ã‚¢ã‚¤ãƒ†ãƒ \u003c/h3\u003e\n\n\u003cp\u003eè‡ªåˆ†ãŒä»Šå¹´ä½œã£ãŸ gem ã« \u003ccode\u003emy_api_client\u003c/code\u003e ã¨ã„ã† gem ãŒã‚ã‚Šã¾ã—ã¦ã€\u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/API\"\u003eAPI\u003c/a\u003e Client ã‚’ä½œã‚‹ãŸã‚ã®\u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/%A5%D5%A5%EC%A1%BC%A5%E0%A5%EF%A1%BC%A5%AF\"\u003eãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯\u003c/a\u003eãªã‚“ã§ã™ãŒã€ã“ã‚Œã¯ãƒ—ãƒ­ãƒ€ã‚¯ãƒˆã®\u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/%A5%BD%A1%BC%A5%B9%A5%B3%A1%BC%A5%C9\"\u003eã‚½ãƒ¼ã‚¹ã‚³ãƒ¼ãƒ‰\u003c/a\u003eã«ã‚‚ä½¿ã£ã¦ã„ã¾ã™ã€‚\u003c/p\u003e\n\n\u003cp\u003eè‡ªåˆ†ãŒæºã‚ã£ã¦ã‚‹ã‚µãƒ¼ãƒ“ã‚¹ã¯ \u003ca href=\"https://socialplus.jp/\"\u003eã‚½ãƒ¼ã‚·ãƒ£ãƒ«PLUS\u003c/a\u003e ã¨ã„ã†ã‚‚ã®ã§ã—ã¦ã€ä¼æ¥­ã® Web ã‚µãƒ¼ãƒ“ã‚¹ã¨ã‚½ãƒ¼ã‚·ãƒ£ãƒ«ãƒ­ã‚°ã‚¤ãƒ³ãƒ—ãƒ­ãƒã‚¤ãƒ€ãƒ¼ï¼ˆ LINE ã¨ã‹ \u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/Twitter\"\u003eTwitter\u003c/a\u003e ã¨ã‹ï¼‰ã®ãƒãƒ–ã«ãªã£ã¦ã‚‹ã‚µãƒ¼ãƒ“ã‚¹ãªã‚“ã§ã™ã­ã€‚ãã®ã›ã„ã‚‚ã‚ã£ã¦ã€å¤–éƒ¨ã® Web \u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/API\"\u003eAPI\u003c/a\u003e ã¸ãƒªã‚¯\u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/%A5%A8%A5%B9\"\u003eã‚¨ã‚¹\u003c/a\u003eãƒˆã™ã‚‹ã¨ã„ã†å‡¦ç†ãŒå¤šãã€æ¯å›åŒã˜ã‚ˆã†ãªã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°ã‚„ãƒªãƒˆãƒ©ã‚¤ã®å‡¦ç†ã‚’ä½•åº¦ã‚‚æ›¸ã‹ãªã„ã¨ã„ã‘ãªãã¦å¤§å¤‰ã ã£ãŸè¨³ã§ã™ã€‚\u003c/p\u003e\n\n\u003cp\u003eã‚ã¨ã€ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ãŸéš›ã«ã€Œã‚½ãƒ¼ã‚·ãƒ£ãƒ«PLUSã€ã€Œã‚½ãƒ¼ã‚·ãƒ£ãƒ«PLUSã‚’åˆ©ç”¨ã—ã¦ã„ã‚‹ä¼æ¥­ã€ã€Œã‚½ãƒ¼ã‚·ãƒ£ãƒ«ãƒ­ã‚°ã‚¤ãƒ³ãƒ—ãƒ­ãƒã‚¤ãƒ€ã€ã®èª°ãŒåŸå› ãªã®ã‹ã‚’ç‰¹å®šã™ã‚‹ãŸã‚ã®æƒ…å ±ã‚’ãƒ­ã‚°ã«æ®‹ã™ã¨ã‹ã‚‚éƒ½åº¦å¯¾å¿œã—ãªã„ã¨ã„ã‘ãªãã¦è¶…å¤§å¤‰ã§ã—ãŸã€‚\u003c/p\u003e\n\n\u003cp\u003e\u003ccode\u003emy_api_client\u003c/code\u003e ã¯ãã®è¾ºã®å‡¦ç†ã‚’ã™ã£ãã‚Šç°¡å˜ã«æ›¸ã‘ã‚‹ã‚ˆã†ã«ã™ã‚‹ãŸã‚ã® gem ã§ã—ã¦ã€ã™ã£ãã‚Šç°¡å˜ãªã‚‚ã‚“ã ã‹ã‚‰ã€ãƒãƒ¼ãƒ ãƒ¡ã‚¤ãƒˆãŒ \u003ccode\u003emy_api_client\u003c/code\u003e ã‚’æ´»ç”¨ã—ã¦è‡ªç™ºçš„ã«ã‚¬ãƒ³ã‚¬ãƒ³èª²é¡Œã‚’è§£æ±ºã—ã¦ãã‚Œã‚‹ã€ã¨ã„ã†æœ€é«˜ã«ãƒ›ãƒƒãƒˆãªçŠ¶æ³ã‚’ç”£ã¿å‡ºã™ã“ã¨ã«ä¸€å½¹è²·ã£ã¦ãŠã‚Šã¾ã™ã€‚\u003c/p\u003e\n\n\u003cp\u003eã‚„ã£ã±ã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢ã‚‚äººé–“ãªã®ã§ã€æ™®æ®µã®æ¥­å‹™ã§å¿™ã—ã„ä¸­ã§æ”¹å–„æ´»å‹•ã‚‚åŒæ™‚ã«ã‚„ã‚ã†ãªã‚“ã¦ãƒ¢ãƒãƒ™ãƒ¼ã‚·ãƒ§ãƒ³ã¯æ™®é€šã¯æ¹§ã„ã¦ã“ãªã„è¨³ã§ã™ã€‚ã§ã‚‚ã€ã“ã‚Œã‚’ä½¿ãˆã°ã™ã£ãã‚Šç°¡å˜ã ã‚ˆã€ã£ã¦ã„ã†é­”æ³•ã®ã‚¢ã‚¤ãƒ†ãƒ ãŒã‚ã‚Œã°ã€ã¿ã‚“ãªã®é‡ã„è…°ã‚’å°‘ã—ã ã‘è»½ãã™ã‚‹äº‹ãŒã§ãã¾ã™ã€‚\u003c/p\u003e\n\n\u003cp\u003e\u003ccode\u003emy_api_client\u003c/code\u003e ã¯è‡ªåˆ†ã®ä¸­ã§ã‚‚å‰²ã¨ã‚ˆãã§ããŸ gem ãªã®ã§ã€æ¯å›ã“ã‚“ãªè‰¯ã„ gem ãŒä½œã‚Œã‚‹è¨³ã˜ã‚ƒãªã„ã§ã™ã‘ã©ã€ gem ã‚’ä½œã£ã¦ãƒãƒ¼ãƒ ã®ç”Ÿç”£æ€§ãŒä¸ŠãŒã‚‹ã£ã¦ã®ã¯ã‚„ã£ã±é­”æ³•ã®ã‚¢ã‚¤ãƒ†ãƒ ã ãªãã£ã¦æ€ã†ã‚“ã§ã™ã€‚gem ã¯ä¸–ç•Œã‚’æ•‘ã„ã¾ã™ï¼ï¼ˆï¼’å›ç›®ï¼‰\u003c/p\u003e\n\n\u003cp\u003eãªãŠã€ \u003ccode\u003emy_api_client\u003c/code\u003e ã«ã¤ã„ã¦ã¯ \u003ca href=\"https://ginza-rails.connpass.com/event/133628/\"\u003eéŠ€åº§ Rails #10\u003c/a\u003e ã§ç™»å£‡ã—ãŸã¨ãã®è³‡æ–™ãŒã‚ã‚‹ã®ã§è²¼ã£ã¦ãŠãã¾ã™ã€‚ã“ã‚Œã‚‚è‹¥å¹²å¤ã„ã®ã§ã€æœ€æ–°ã®ä»•æ§˜ã¨ã¯å°‘ã—ç•°ãªã‚‹ã‹ã‚‚ã—ã‚Œã¾ã›ã‚“ã€‚\næœ€æ–°ã®ä»•æ§˜ã¯ \u003ca href=\"https://github.com/ryz310/my_api_client/blob/master/README.jp.md\"\u003eã“ã¡ã‚‰\u003c/a\u003e ã‚’ã”è¦§ä¸‹ã•ã„ã€‚\u003c/p\u003e\n\n\u003cscript async class=\"speakerdeck-embed\" data-id=\"75d691da45b041deb3db8e6748d81638\" data-ratio=\"1.37081659973226\" src=\"//speakerdeck.com/assets/embed.js\"\u003e\u003c/script\u003e\n\n\n\u003ch3\u003eåŠ¹èƒ½ 4. ãŸã®ã—ã„\u003c/h3\u003e\n\n\u003cp\u003eæœ€å¾Œã¯ã“ã“ã«å¸°ã£ã¦ãã‚‹ã‚“ã§ã™ãŒã€è‡ªåˆ†ã® gem ã‚’ä½œã‚‹ã®ã¯ã‚„ã£ã±æ¥½ã—ã„ã®ã§ã™ã€‚ã„ããªã‚Šé ­æ‚ªã„æ–‡ç« ã«ãªã‚Šã¾ã—ãŸã€‚ã„ã¤ã‹ã‚‰é ­è‰¯ã„æ–‡ç« æ›¸ã„ã¦ã‚‹ã¨éŒ¯è¦šã—ã¦ã„ãŸï¼Ÿ\u003c/p\u003e\n\n\u003cp\u003eä»¥å‰å‹‰å¼·ä¼šã§ã€Œã“ã‚Œã¾ã§ã©ã†ã„ã†ã‚­ãƒ£ãƒªã‚¢ã‚’æ„è­˜ã—ã¦ã‚„ã£ã¦ãã¾ã—ãŸã‹ï¼Ÿã€ã£ã¦è‹¥æ‰‹ã®ã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢ã‹ã‚‰èã‹ã‚ŒãŸã®ã§ã™ãŒã€è‡ªåˆ†ã¿ãŸã„ãª 30 åŠã°ã®ã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢ã£ã¦ã€ã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢ã«ãªã£ãŸå½“åˆã¯ä»Šã¿ãŸã„ã«ã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢ãŒæŒã¦å›ƒã•ã‚Œã‚‹æ™‚ä»£ã§ã‚‚ãªã‹ã£ãŸã®ã§ã€è‡ªåˆ†ã‹ã‚‰ã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢ã«ãªã‚ã†ã£ã¦æ€ã£ãŸäººã¯å°‘ãªã‹ã‚‰ãšã€ŒãŸã ãƒ—ãƒ­ã‚°ãƒ©ãƒ ãŒå¥½ãã ã£ãŸã€ã£ã¦ã„ã†äººãŒå¤šã„ã‚“ã˜ã‚ƒãªã„ã§ã™ã‹ã­ï¼Ÿã‚ã‹ã‚“ãªã„ã§ã™ã‘ã©è‡ªåˆ†ã¯ãã†ã§ã—ãŸã€‚\u003c/p\u003e\n\n\u003cp\u003eè‡ªä½œã® gem ã‚’ä½œã£ã¦ã‚‹ã¨ã€Œã‚„ã£ã±ãƒ—ãƒ­ã‚°ãƒ©ãƒ æ›¸ãã®ã£ã¦æ¥½ã—ã„ã€ã£ã¦ã®ã‚’æ€ã„å‡ºã•ã›ã¦ãã‚Œã¾ã™ã€‚\nè‡ªåˆ†ã¯ä»–ã«ã‚‚è¶£å‘³ã§ãƒãƒ³ãƒ‰ã‚„ã£ãŸã‚Šçµµã‚’æã„ãŸã‚Šã—ã¦ã„ã¾ã™ãŒã€ãƒ—ãƒ­ã‚°ãƒ©ãƒŸãƒ³ã‚°ãŒå­ä¾›ã®é ƒã«å¥½ãã ã£ãŸå·¥ä½œã«ä¸€ç•ªè¿‘ã„ã‚ˆã†ãªæ°—ãŒã—ã¦ã„ã¾ã™ã€‚\u003c/p\u003e\n\n\u003cp\u003eä¸­ã€…ãƒ—ãƒ©ã‚¤ãƒ™ãƒ¼ãƒˆã§æ™‚é–“ã‚’ä½œã‚‹ã®ã¯é›£ã—ã„ã‚“ã§ã™ãŒã€ã‚„ã¯ã‚Šæ¥½ã—ã•ãŒä¸€ç•ªæ ¹åº•ã®åŸå‹•åŠ›ã«ãªã£ã¦ã„ã‚‹ã®ã‹ã‚‚ã—ã‚Œãªã„ã§ã™ã­ã€‚\u003c/p\u003e\n\n\u003ch2\u003eã¾ã¨ã¾ã‚‰ãªã„ã¾ã¨ã‚\u003c/h2\u003e\n\n\u003cp\u003eä¼šç¤¾ã®\u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/%A5%A2%A5%C9%A5%D9%A5%F3%A5%C8%A5%AB%A5%EC%A5%F3%A5%C0%A1%BC\"\u003eã‚¢ãƒ‰ãƒ™ãƒ³ãƒˆã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼\u003c/a\u003eå‘ã‘ã ã—ã€éã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢ã«ã‚‚ä¼ã‚ã‚‹ã‚ˆã†ãªãƒ•ãƒ¯ãƒƒã¨ã—ãŸæ–‡ç« ã«ã—ã‚ˆã†ã¨æ€ã£ã¦æ›¸ã„ã¦ãŸã‚‰ã€é€”ä¸­ã‹ã‚‰ä¿ºã®ãƒã‚¨ãƒ ã‚’æ›¸ãæ®´ã£ã¦ãŸã ã‘ã«ãªã£ãŸæ°—ãŒã—ã¾ã™ãŒã€å½¹ã«ç«‹ã¤ã‹ã©ã†ã‹ã¯ 2 ã®æ¬¡ã«ã—ã¦ã€ã¨ã‚Šã‚ãˆãš gem ä½œã£ã¦ã¿ã‚‹ã¨æ¥½ã—ã\u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/%A5%B9%A5%AD%A5%EB%A5%A2%A5%C3%A5%D7\"\u003eã‚¹ã‚­ãƒ«ã‚¢ãƒƒãƒ—\u003c/a\u003eã§ãã‚‹ã—ã€ã‚‚ã—ã‹ã—ãŸã‚‰èª°ã‹ã®é­”æ³•ã®ã‚¢ã‚¤ãƒ†ãƒ ã«ãªã£ã¦ã‚‹ã‹ã‚‚ã—ã‚Œãªã„ã‚ˆã€ã¨ã„ã†ãŠè©±ã§ã—ãŸã€‚\u003c/p\u003e\n\n\u003cp\u003eä¹…ã€…ã«ã‚†ã‚‹ã€œã„æ–‡ç« æ›¸ã„ã¦ã¦è‡ªåˆ†çš„ã«ã¯æ¥½ã—ã‹ã£ãŸã§ã™ ç¬‘\u003c/p\u003e\n\n\u003ch2\u003eã•ã¦ã€æ˜æ—¥ã® Advent Calendar ã¯ï¼Ÿï¼ˆCV. \u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/%B2%C3%C6%A3%A4%DF%A4%C9%A4%EA\"\u003eåŠ è—¤ã¿ã©ã‚Š\u003c/a\u003eï¼‰\u003c/h2\u003e\n\n\u003cp\u003e\u003ca href=\"https://adventar.org/calendars/4169\"\u003eFeedforce Advent Calendar 2019\u003c/a\u003eã€æ˜æ—¥ã¯ä¸Šå²¡å›ãŒã€Œé‡çƒã«ã¤ã„ã¦oré éš”\u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/%A5%A4%A5%F3%A5%BF%A1%BC%A5%F3\"\u003eã‚¤ãƒ³ã‚¿ãƒ¼ãƒ³\u003c/a\u003eã«ã¤ã„ã¦ã€æ›¸ã„ã¦ãã‚Œã‚‹ã¿ãŸã„ã§ã™ã€‚\u003c/p\u003e\n\n\u003cp\u003eæœ€è¿‘ã¯\u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/%A5%A4%A5%F3%A5%BF%A1%BC%A5%F3\"\u003eã‚¤ãƒ³ã‚¿ãƒ¼ãƒ³\u003c/a\u003eã‚‚é éš”ã§å‡ºæ¥ã‚‹ã‚“ã§ã™ã­ã€‚é‡çƒã‚‚é éš”\u003ca class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/%A5%A4%A5%F3%A5%BF%A1%BC%A5%F3\"\u003eã‚¤ãƒ³ã‚¿ãƒ¼ãƒ³\u003c/a\u003eã‚‚æœªçµŒé¨“ã®ã¾ã¾ãŠã˜ã•ã‚“ã«ãªã£ã¦ã—ã¾ã£ãŸã®ã§è‡ªåˆ†ã«ã¯æœªçŸ¥ã®é ˜åŸŸã§ã™âš¾ï¸ğŸ’¨\u003c/p\u003e\n\n\u003cp\u003eä¹ã†ã”æœŸå¾…ï¼\u003c/p\u003e\n","contentSnippet":"ã©ãƒ¼ã‚‚ã€ã‚µãƒˆã‚¦ãƒªãƒ§ã‚¦ã‚¹ã‚±ã§ã™ã€‚é‡‘æ›œæ—¥ã«ç™»å£‡ã—ãŸå‹‰å¼·ä¼š ã§ ã†ã£ã‹ã‚Š ãƒ–ãƒ­ã‚°ä½œã‚‹ã£ã¦è¨€ã£ã¦ã—ã¾ã£ãŸã®ã§ 10 å¹´ã¶ã‚Šãã‚‰ã„ã«ãƒ–ãƒ­ã‚°ã‚’å¾©æ´»ã•ã›ã¦ã¿ã¾ã—ãŸã€‚ãƒ–ãƒ­ã‚°ã®ã‚¿ã‚¤ãƒˆãƒ«ã‚‚ 10 å¹´å‰ã®ã‚¿ã‚¤ãƒˆãƒ«ã¨åŒã˜ã§ã™ï¼ˆå…ƒãƒã‚¿ã¯ãƒ•ã‚¡ãƒŸã‚³ãƒ³æ™‚ä»£ã®ãƒ‰ãƒ©ã‚¯ã‚¨ IVï¼‰å‹‰å¼·ä¼šã®æ„Ÿæƒ³è¨˜äº‹ã¯è¿‘æ—¥ä¸­ã«æ›¸ã“ã†ã¨æ€ã„ã¾ã™âœï¸ã“ã®è¨˜äº‹ã¯ Feedforce Advent Calendar 2019 ã® 15 æ—¥ç›®ã§ã™ã€‚ã•ã¦ã€æœ€åˆã®è¨˜äº‹ã‹ã‚‰ã„ããªã‚Šä¼šç¤¾ã®ã‚¢ãƒ‰ãƒ™ãƒ³ãƒˆã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼è¨˜äº‹ã«ãªã‚Šã¾ã™ğŸ™adventar.orgæ˜¨æ—¥ã¯ Yutaka KAWAI ã•ã‚“ã®ã€Œã‚³ãƒ¼ãƒ’ãƒ¼ã¯ç§‘å­¦ã§ã‚ã‚‹ ~æŠ½å‡ºå™¨å…·ã«ã‚ˆã‚‹å‘³ã®é•ã„~ ãƒšãƒ¼ãƒ‘ãƒ¼ãƒ‰ãƒªãƒƒãƒ—ç·¨ã€ã§ã—ãŸã€‚note.comçˆç²å±‹ã•ã‚“ã‹ãªï¼Ÿã£ã¦ãã‚‰ã„å‡„ã„è¨˜äº‹ã§ã—ãŸã­â˜•ï¸è¨˜äº‹ã«å‡ºã¦ããŸãƒ‰ãƒªãƒƒãƒ‘ãƒ¼ã¯å…¨ç¨®é¡æŒã£ã¦ã‚‹ã£ã¦ãƒ¤ãƒããªã„ã§ã™ã‹ï¼Ÿï¼Ÿï¼Ÿï¼ˆã‚‚ã¡ã‚ã‚“è‰¯ã„æ„å‘³ã§ï¼‰ãƒšãƒ¼ãƒ‘ãƒ¼ãƒ‰ãƒªãƒƒãƒ—ç·¨ã£ã¦ã“ã¨ã¯ç¶šç·¨ã‚‚ã‚ã‚‹ã®ã‹ãªï¼Ÿã“ã®æ„Ÿã˜ã§è¨˜äº‹ãŒé‡ç”£ã•ã‚ŒãŸã‚‰ãã®ã†ã¡æ›¸ç±åŒ–ã•ã‚Œã‚‹ã‹ã‚‚ã—ã‚Œã¾ã›ã‚“ğŸ“šæœ¬ç·¨äºˆå‘Šé€šã‚Šå€‹äººã§ gem ã‚’ä½œã‚‹æµã‚Œã«ã¤ã„ã¦è©±ãã†ã¨æ€ã†ã®ã§ã™ãŒã€ã‚¢ãƒ‰ãƒ™ãƒ³ãƒˆã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼ã‹ã‚‰æµã‚Œã¦ãã‚‹ã¨éã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢ã®æ–¹ã‚‚ãã£ã¨èª­ã¾ã‚Œã‚‹ã¨æ€ã†ã®ã§ã€ã‚ã‚“ã¾ã‚ŠæŠ€è¡“çš„ãªè©±é¡Œã«ã›ãšã«ãƒ•ãƒ¯ãƒƒã¨ã—ãŸè©±ã§ã‚‚ã—ã‚ˆã†ã‹ã¨æ€ã„ã¾ã™ã€‚ãã‚‚ãã‚‚ gem ã£ã¦ãªã‚“ã ã£ã‘ï¼Ÿãã‚‚ãã‚‚ gem ã£ã¦ã„ã†ã®ã¯ Ruby ã§ã§ããŸãƒ©ã‚¤ãƒ–ãƒ©ãƒªã®äº‹ã§ã—ã¦ã€ä¾‹ãˆã°åƒ•ãŒå‡„ãä¾¿åˆ©ãªãƒ—ãƒ­ã‚°ãƒ©ãƒ ã‚’æ›¸ã„ã¦ã€ãã‚Œã‚’ gem ã¨ã—ã¦å…¬é–‹ã™ã‚Œã°ã€ä¸–ç•Œä¸­ã®äººãŒåƒ•ã®ã‚¤ã‚±ã¦ã‚‹ãƒ—ãƒ­ã‚°ãƒ©ãƒ ã‚’ä½¿ãˆã‚‹ã‚ˆã†ã«ãªã‚‹ã€ã¨ã„ã†ã‚‚ã®ã§ã™ã€‚ã¾ã•ã« Win-Win ã—ã‹ãªã„ä»•çµ„ã¿ã€‚gem ã¯ä¸–ç•Œã‚’æ•‘ã„ã¾ã™ã€‚ä¸€æ–¹ã§ã€ãƒ—ãƒ­ã‚°ãƒ©ãƒ ã£ã¦ã®ã¯æ–°æ©Ÿèƒ½ãŒè¿½åŠ ã•ã‚ŒãŸã‚Šã€ä¸å…·åˆãŒä¿®æ­£ã•ã‚ŒãŸã‚Šã—ã¦æ—¥ã€…ã‚¢ãƒƒãƒ—ãƒ‡ãƒ¼ãƒˆãŒç¹°ã‚Šè¿”ã•ã‚Œã¦ã„ã¾ã™ã€‚ã€Œã“ã®æ©Ÿèƒ½ã«ã¯ãƒãƒ¼ã‚¸ãƒ§ãƒ³ 1.3 ä»¥é™ã§ãªã„ã¨ä½¿ãˆã¾ã›ã‚“ã€ã¨ã‹ã€Œè‰²ã€…ã‚¤ã‚±ã¦ãªã„éƒ¨åˆ†ãŒå¤šã„ã‹ã‚‰ã“ã®æ©Ÿèƒ½ã¯å»ƒæ­¢ã—ã¾ã™ã€ã¨ã„ã†å¤‰æ›´ã‚‚ã‚ã‚‹ã®ã§ã€è‡ªåˆ†ã®ãƒ—ãƒ­ã‚°ãƒ©ãƒ ã¯ä¸€ä½“ã©ã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã® gem ã‚’ä½¿ã£ã¦ã„ã‚‹ã®ã‹ã€ã¨ã„ã†è©±ãŒç‰©å‡„ãé‡è¦ã ã£ãŸã‚Šã—ã¾ã™ã€‚gem ã«ã¯ã©ã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã‚’ä½¿ã£ã¦ã„ã‚‹ã®ã‹ï¼ˆä¾å­˜ã—ã¦ã„ã‚‹ã®ã‹ï¼‰ã¨ã„ã†æƒ…å ±ã‚’ç®¡ç†ã™ã‚‹æ©Ÿèƒ½ã‚‚å‚™ã‚ã£ã¦ã„ã¾ã™ã®ã§ã€ã‚ã‚‹æ—¥çªç„¶æ–°ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã§æŒ™å‹•ãŒå¤‰ã‚ã£ã¦ã‚‚ã€Œã†ã¡ã¯ä¸€å€‹å‰ã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ä½¿ã£ã¦ã¾ã™ï¼ã€ã¨ã„ã†ç®¡ç†ãŒã§ãã¦ã„ã‚Œã°å‹•ã‹ãªããªã‚‹ã“ã¨ã¯ãªã„ã®ã§ã™ã€‚ã¨ã¯ã„ãˆæ–°ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã§ã„ããªã‚Šãã‚“ãªãƒˆãƒ³ãƒ‡ãƒ¢å¤‰æ›´ã•ã‚ŒãŸã‚‰å›°ã‚Šã¾ã™ã‘ã©ã‚‚ã€‚åƒ•ãŒåˆã‚ã¦ä½œã£ãŸ gemè‡ªåˆ†ãŒç”Ÿã¾ã‚Œã¦åˆã‚ã¦ä½œã£ãŸ gem ã¯ã“ã® rubocop_challenger ã¨ã„ã† gem ã§ã™ã€‚github.comä¸€èˆ¬çš„ã« gem ã¯ä»–ã®ãƒ—ãƒ­ã‚°ãƒ©ãƒ ã¨çµ„ã¿åˆã‚ã›ã¦ä½¿ã†äº‹ãŒå¤šã„ã®ã§ã™ãŒã€ rubocop_challenger ã¯å˜ä½“ã§å‹•ä½œã™ã‚‹ã‚„ã¤ã§ã—ã¦ã€å®Ÿè¡Œã—ãŸãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªï¼ˆãƒ•ã‚©ãƒ«ãƒ€ï¼‰ã«ã‚ã‚‹ãƒ—ãƒ­ã‚°ãƒ©ãƒ ã®ã‚½ãƒ¼ã‚¹ã‚³ãƒ¼ãƒ‰ã‚’å°‘ã—ãšã¤ç¶ºéº—ã«ï¼ˆäººé–“ã«ã¨ã£ã¦èª­ã¿ã‚„ã™ãã—ãŸã‚Šã€æ›¸ãæ–¹ã®ãƒ«ãƒ¼ãƒ«ã‚’çµ±ä¸€ã—ãŸã‚Šï¼‰ã—ã¦ãã‚Œã‚‹ã€ã¨ã„ã† gem ã§ã™ã€‚ã¨ã„ã†ã¨ç‰©å‡„ã„ç¥ gem ã§ã™ãŒã€RuboCop ã¨ã„ã†ã‚½ãƒ¼ã‚¹ã‚³ãƒ¼ãƒ‰ã‚’è§£æã—ã¦ãã‚Œã‚‹ä¾¿åˆ©ãª gem ã‚’å†…éƒ¨ã§å‘¼ã³å‡ºã—ã¦ãƒ—ãƒ«ãƒªã‚¯ï¼ˆãƒ—ãƒ«ãƒªã‚¯ãŒä½•ãªã®ã‹ã¯ã‚°ã‚°ã£ã¦ãã ã•ã„ï¼‰ä½œã£ã¦ãã‚Œã‚‹ã€ã¨ã„ã†ä»•çµ„ã¿ã«ãªã£ã¦ã„ã‚‹ã®ã§ã€ã€Œäººé–“ãŒæ¯æ—¥æ‰‹ä½œæ¥­ã§ã‚„ã‚‰ãªã„ã¨ã„ã‘ãªã‹ã£ãŸäº‹ã‚’è‡ªå‹•çš„ã«ã‚„ã‚‹ã€ã¨ã„ã†ã®ãŒ rubocop_challenger ã®æä¾›ã™ã‚‹ä¾¡å€¤ã«ãªã‚Šã¾ã™ ğŸ¤–è©³ã—ãã¯ã¡ã‚‡ã†ã©ä¸€å¹´ãã‚‰ã„å‰ã«ä¼šç¤¾ã®ãƒ–ãƒ­ã‚°ã«æ›¸ã„ãŸã®ã§ã€ã”èˆˆå‘³ã‚ã‚Šã¾ã—ãŸã‚‰æ˜¯éã€‚å¤ã„å†…å®¹ãªã®ã§ã€ç¾åœ¨ã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã‹ã‚‰ã¯å°‘ã—ãšã‚Œã¦ã¾ã™ã‘ã©ã€‚developer.feedforce.jpã¡ãªã¿ã«ã‚‚ã†ã™ã v2.0.0 ã‚’ãƒªãƒªãƒ¼ã‚¹ã™ã‚‹äºˆå®šã§ã™ã€‚ï¼ˆpre ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã§ã™ãŒã€ç¾æ™‚ç‚¹ã§ã‚‚ã™ã§ã«ä½¿ãˆã¾ã™ï¼‰ãƒ‹ãƒƒãƒãª gemåˆã‚ã¦ä½œã£ãŸã®ã¯ rubocop_challenger ã¨ã„ã†ã€Œäººé–“ãŒæ¯æ—¥æ‰‹ä½œæ¥­ã§ã‚„ã‚‰ãªã„ã¨ã„ã‘ãªã‹ã£ãŸäº‹ã‚’è‡ªå‹•çš„ã«ã‚„ã‚‹ã€ gem ã§ã—ãŸã€‚å®Œå…¨ã«è‡ªåˆ†ã®ä¼šç¤¾ã®ãƒ—ãƒ­ãƒ€ã‚¯ãƒˆç”¨ã«ä½œã£ãŸ gem ã§ã—ãŸãŒã€ Twitter ãªã©ã‚’ã‚¨ã‚´ã‚µã—ã¦ã‚‹ã¨ã€ã¼ã¡ã¼ã¡ä½¿ã£ã¦é ‚ã‘ã¦ã„ã‚‹ã‚ˆã†ã§ã™ã€‚åŒã˜ã‚ˆã†ãªæ‚©ã¿ã‚’æŠ±ãˆã¦ã„ã‚‹äººã¯ä¸–ã®ä¸­ã«ã¯ã„ã‚‹ã‚‚ã‚“ã§ã™ã­âœ¨ã¨ã¯ã„ãˆã€ gem ã‚’å…¬é–‹ã—ãŸã‚‰ä¸–ç•Œä¸­ã®äººãŸã¡ãŒä½¿ã£ã¦ãã‚Œã‚‹ã€ã¨ã„ã†ã“ã¨ã«ã¯ä¸­ã€…ãªã‚‰ãªã„ã§ã™ã€‚ä¸€å¿œé ‘å¼µã£ã¦è‹±èªã§èª¬æ˜ã‚’æ›¸ã„ãŸã‚Šã¯ã—ã¦ã„ã¾ã™ãŒã€å€‹äººã®ç™ºä¿¡åŠ›ã«ã¯é™ç•Œã‚‚ã‚ã‚Šã¾ã™ã—ã€ä½•ã‚ˆã‚Šãƒ‹ãƒƒãƒã§ã™ã€‚ã¨ã„ã†ã‹ã€å€‹äººãŒä½œã‚‹ gem ãªã‚“ã¦å¤§æŠµã¯ãƒ‹ãƒƒãƒãªã‚‚ã®ã«ãªã‚Šã¾ã™ã€‚ã€Œã‚ãƒ¼ã€ã“ã‚“ãª gem ã‚ã£ãŸã‚‰ã‚ã£ã¡ã‚ƒä¾¿åˆ©ã‚„ã‚“ï¼Ÿã€ã¨ã„ã† gem ã¯å¤§æŠµä¸–ç•Œã®ã©ã“ã‹ã®èª°ã‹ãŒä½œã£ã¦ã¾ã™ã€‚ãªã®ã§ã€ä»Šã¾ã§ã«ãªã„ã‚ˆã†ãªæ–°ã—ã„gem ã‚’ä½œã‚ã†ã¨æ€ã£ãŸã‚‰å¤§æŠµãƒ‹ãƒƒãƒã«ãªã‚Šã¾ã™ã€‚ã˜ã‚ƒã‚ gem ã‚’å…¬é–‹ã—ã¦ã‚‚å¤§ã—ã¦ä½¿ã£ã¦ã‚‚ã‚‰ãˆãªã„ã—ã€ã‚ã‚“ã¾ã‚Šæ„å‘³ãªã„ã˜ã‚ƒã‚“ã€ã£ã¦æ€ã†ã‹ã‚‚ã—ã‚Œã¾ã›ã‚“ãŒã€æ„å‘³ç„¡ãã¯ãªã„ã‚“ã§ã™ã‚ˆã­ğŸ‘åŠ¹èƒ½ 1. ã‚¹ã‚­ãƒ«ã‚¢ãƒƒãƒ—ã¾ãšã€ã‚ã£ã¡ã‚ƒãƒ—ãƒ­ã‚°ãƒ©ãƒ ã‚’æ›¸ãå‹‰å¼·ã«ãªã‚Šã¾ã™ã€‚Ruby ã§ Web é–‹ç™ºã‚’ã—ã¦ã„ã‚‹äººã¯å¤§æŠµ Ruby on Rails ã‚’ä½¿ã£ã¦æ›¸ã„ã¦ã‚‹ã¨æ€ã„ã¾ã™ã€‚ã¡ãªã¿ã« Ruby on Rails ã‚‚ gem ã§ã™ã€‚Ruby on Rails ã¯å‡„ãã‚ˆãå‡ºæ¥ã¦ã„ã‚‹ã®ã§ã€Web é–‹ç™ºã®é›£ã—ã„éƒ¨åˆ†ã‚’ 9 å‰²ãã‚‰ã„ã®è‚©ä»£ã‚ã‚Šã—ã¦ãã‚Œã¾ã™ã€‚ã¨ã“ã‚ãŒã€è‡ªåˆ†ã§ä¸€ã‹ã‚‰ gem ã‚’ä½œã‚ã†ã¨ã™ã‚‹ã¨ã€è‡ªåˆ†ã®åŠ›ã§è§£æ±ºã—ãªã„ã¨ã„ã‘ãªã„ãƒ—ãƒ­ã‚°ãƒ©ãƒ çš„ãªèª²é¡ŒãŒã‚ã£ã¡ã‚ƒã‚ã‚Šã¾ã™ã€‚Web é–‹ç™ºã¯ã‚¤ãƒ³ã‚¿ãƒ¼ãƒãƒƒãƒˆç‰¹æœ‰ã®èª²é¡ŒãŒå¤šã„ã§ã™ãŒã€ gem ã®é–‹ç™ºã«ã¯ Web é–‹ç™ºä»¥å¤–ã®çŸ¥è­˜ã‚‚è‰²ã€…è¦æ±‚ã•ã‚ŒãŸã‚Šã—ã¾ã™ã€‚ä½•ã‚ˆã‚Šã€è‡ªåˆ†è‡ªèº«ã§ä»•æ§˜ã‚’ä¸€ã‹ã‚‰è€ƒãˆãªã„ã¨ã„ã‘ãªã„ã®ã§ã€æ™®æ®µã®é–‹ç™ºä»¥ä¸Šã«æ„æ€æ±ºå®šé‡ãŒã‚ã£ã¡ã‚ƒå¤šã„ã§ã™ã€‚è‡ªåˆ†ã¯ rubocop_challenger ä»¥å¤–ã«ã‚‚ãƒ¡ãƒ³ãƒ†ãƒŠãƒ³ã‚¹ã—ã¦ã„ã‚‹ gem ãŒ 3 ã¤ã»ã©ã‚ã‚Šã¾ã™ãŒã€ã“ã‚Œã‚‰ã®é–‹ç™ºã‚’é€šã—ã¦æ—¥é ƒã® Web é–‹ç™ºã®å“è³ªã‚‚ä¸€æ®µãƒ¬ãƒ™ãƒ«ãŒä¸ŠãŒã£ãŸãªã€ã¨æ„Ÿã˜ã‚‹äº‹ãŒå¤šã„ã§ã™ã€‚ãªã®ã§ã€gem ã®é–‹ç™ºã¯è‡ªåˆ†è‡ªèº«ã®ä¿®è¡Œã®ãŸã‚ã ã¨æ€ã£ã¦ã‚„ã‚‹ã¨è‰¯ã„ã‹ã‚‚ã—ã‚Œã¾ã›ã‚“ã€‚èª°ã‹ã«ä½¿ãˆã¦ã‚‚ã‚‰ãˆãŸã‚‰ãƒ©ãƒƒã‚­ãƒ¼ã€ã¿ãŸã„ãªã€‚é€†ã«ä½¿ã£ã¦ã‚‚ã‚‰ãˆã‚‹äº‹ã‚’ãƒ¢ãƒãƒ™ãƒ¼ã‚·ãƒ§ãƒ³ã«ã™ã‚‹ã¨ã¡ã‚‡ã£ã¨è¾›ã„ã‹ã‚‚ã—ã‚Œãªã„ã§ã™ã€‚æ€ã£ãŸä»¥ä¸Šã«æµè¡Œã‚‰ãªã„ã€‚ã‚‚ã£ã¨æµè¡Œã‚Œï¼åŠ¹èƒ½ 2. ãƒãƒ¼ãƒˆãƒ•ã‚©ãƒªã‚ªgem ã‚’å…¬é–‹ã—ã¦ã‚‹ã›ã„ã‹ã€ä¼æ¥­ã‹ã‚‰ã®ã‚¹ã‚«ã‚¦ãƒˆãŒã‚ã£ã¡ã‚ƒæ¥ã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã™ã€‚è‡ªåˆ†è‡ªèº«ã€ä¼šç¤¾ã®æ¡ç”¨æ´»å‹•ã«é–¢ã‚ã‚‹æ©Ÿä¼šãŒå¤šã„ã®ã§ã™ãŒã€ä¾‹ãˆã°ã‚¹ã‚«ã‚¦ãƒˆå€™è£œã‚’æ¢ã™éš›ã«å€™è£œè€…ã® GitHub ã¯å¿…ãšè¦‹ã‚‹ã‚ˆã†ã«ã—ã¦ã„ã¾ã™ã€‚ãã®çµŒé¨“ã‹ã‚‰ã§ã™ãŒè‡ªåˆ†ã§ gem æ›¸ã„ã¦å…¬é–‹ã—ã¦ã„ã‚‹ã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢ã¯ä¸–ã®ä¸­ã® 1 å‰²ã‚‚ã„ãªã„ã‚“ã˜ã‚ƒãªã„ã‹ãªã€ã£ã¦æ€ã£ã¦ã„ã¾ã™ã€‚è‡ªåˆ†ã‚‚ gem ã‚’ä½œã‚‹ã‚ˆã†ã«ãªã£ãŸã®ã¯ã“ã“ 1 ~ 2 å¹´ã§ã™ã—ã€å‰è·ã«ã„ãŸé ƒã ã¨æ™®æ®µã®ä»•äº‹ã®å¸°ã‚ŠãŒé…ã‹ã£ãŸã‚Šã‚‚ã—ãŸã®ã§å®¶ã«å¸°ã£ã¦ã‹ã‚‰ gem ã‚’ä½œã‚‹ã‚ˆã†ãªä½™è£•ã‚‚ã‚ã‚Šã¾ã›ã‚“ã§ã—ãŸã€‚ãªã®ã§ã€æœ¬äººã®ç†±é‡ã‚„ç’°å¢ƒãŒæ•´ã‚ãªã„ã¨ gem ã®é–‹ç™ºã¯é›£ã—ã„ã‹ã‚‚ã—ã‚Œã¾ã›ã‚“ã€‚ã—ã‹ã—ãªãŒã‚‰ã€è‡ªåˆ†ã‚‚æ¡ç”¨æ´»å‹•ã—ã¦ã„ã¦ã€ŒãŠã€‚ã“ã®äººã™ã”ã„ã‚„ã‚“ã€ã£ã¦ãªã‚‹ã®ã¯ GitHub ã‚„ Qiita ã¨ã‹ã§ä½•ã‹ã—ã‚‰ã‚¢ã‚¦ãƒˆãƒ—ãƒƒãƒˆã®ã‚ã‚‹æ–¹ãªã‚“ã§ã™ã‚ˆã­ã€‚ã‚‚ã¡ã‚ã‚“ã‚¢ã‚¦ãƒˆãƒ—ãƒƒãƒˆãŒç„¡ãã¦ã‚‚å®Ÿéš›ä¼šã£ã¦ã¿ãŸã‚‰å‡„ã‹ã£ãŸã£ã¦äººã¯æ²¢å±±ã„ã‚‹ã‚“ã§ã™ãŒã€æ¡ç”¨æ´»å‹•ã ã¨ãã®äººã®ä»•äº‹ã§ã®ã‚¢ã‚¦ãƒˆãƒ—ãƒƒãƒˆã£ã¦è¦‹ãˆãªã„ã‚‚ã‚“ã§ã™ã‹ã‚‰ã€‚ã€‚åˆ¥ã« gem ã˜ã‚ƒãªãã¦ã‚‚è‰¯ã„ã‚“ã§ã™ãŒã€è‡ªåˆ†è‡ªèº«ã®ã‚­ãƒ£ãƒªã‚¢å½¢æˆã‚’æ„è­˜ã™ã‚‹ãŸã‚ã®ã‚¢ã‚¦ãƒˆãƒ—ãƒƒãƒˆã®ä¸€ç’°ã¨ã—ã¦ã¨ã¦ã‚‚æœ‰ç”¨ã ã¨æ€ã„ã¾ã™ã€‚åŠ¹èƒ½ 3. é­”æ³•ã®ã‚¢ã‚¤ãƒ†ãƒ è‡ªåˆ†ãŒä»Šå¹´ä½œã£ãŸ gem ã« my_api_client ã¨ã„ã† gem ãŒã‚ã‚Šã¾ã—ã¦ã€API Client ã‚’ä½œã‚‹ãŸã‚ã®ãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯ãªã‚“ã§ã™ãŒã€ã“ã‚Œã¯ãƒ—ãƒ­ãƒ€ã‚¯ãƒˆã®ã‚½ãƒ¼ã‚¹ã‚³ãƒ¼ãƒ‰ã«ã‚‚ä½¿ã£ã¦ã„ã¾ã™ã€‚è‡ªåˆ†ãŒæºã‚ã£ã¦ã‚‹ã‚µãƒ¼ãƒ“ã‚¹ã¯ ã‚½ãƒ¼ã‚·ãƒ£ãƒ«PLUS ã¨ã„ã†ã‚‚ã®ã§ã—ã¦ã€ä¼æ¥­ã® Web ã‚µãƒ¼ãƒ“ã‚¹ã¨ã‚½ãƒ¼ã‚·ãƒ£ãƒ«ãƒ­ã‚°ã‚¤ãƒ³ãƒ—ãƒ­ãƒã‚¤ãƒ€ãƒ¼ï¼ˆ LINE ã¨ã‹ Twitter ã¨ã‹ï¼‰ã®ãƒãƒ–ã«ãªã£ã¦ã‚‹ã‚µãƒ¼ãƒ“ã‚¹ãªã‚“ã§ã™ã­ã€‚ãã®ã›ã„ã‚‚ã‚ã£ã¦ã€å¤–éƒ¨ã® Web API ã¸ãƒªã‚¯ã‚¨ã‚¹ãƒˆã™ã‚‹ã¨ã„ã†å‡¦ç†ãŒå¤šãã€æ¯å›åŒã˜ã‚ˆã†ãªã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°ã‚„ãƒªãƒˆãƒ©ã‚¤ã®å‡¦ç†ã‚’ä½•åº¦ã‚‚æ›¸ã‹ãªã„ã¨ã„ã‘ãªãã¦å¤§å¤‰ã ã£ãŸè¨³ã§ã™ã€‚ã‚ã¨ã€ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ãŸéš›ã«ã€Œã‚½ãƒ¼ã‚·ãƒ£ãƒ«PLUSã€ã€Œã‚½ãƒ¼ã‚·ãƒ£ãƒ«PLUSã‚’åˆ©ç”¨ã—ã¦ã„ã‚‹ä¼æ¥­ã€ã€Œã‚½ãƒ¼ã‚·ãƒ£ãƒ«ãƒ­ã‚°ã‚¤ãƒ³ãƒ—ãƒ­ãƒã‚¤ãƒ€ã€ã®èª°ãŒåŸå› ãªã®ã‹ã‚’ç‰¹å®šã™ã‚‹ãŸã‚ã®æƒ…å ±ã‚’ãƒ­ã‚°ã«æ®‹ã™ã¨ã‹ã‚‚éƒ½åº¦å¯¾å¿œã—ãªã„ã¨ã„ã‘ãªãã¦è¶…å¤§å¤‰ã§ã—ãŸã€‚my_api_client ã¯ãã®è¾ºã®å‡¦ç†ã‚’ã™ã£ãã‚Šç°¡å˜ã«æ›¸ã‘ã‚‹ã‚ˆã†ã«ã™ã‚‹ãŸã‚ã® gem ã§ã—ã¦ã€ã™ã£ãã‚Šç°¡å˜ãªã‚‚ã‚“ã ã‹ã‚‰ã€ãƒãƒ¼ãƒ ãƒ¡ã‚¤ãƒˆãŒ my_api_client ã‚’æ´»ç”¨ã—ã¦è‡ªç™ºçš„ã«ã‚¬ãƒ³ã‚¬ãƒ³èª²é¡Œã‚’è§£æ±ºã—ã¦ãã‚Œã‚‹ã€ã¨ã„ã†æœ€é«˜ã«ãƒ›ãƒƒãƒˆãªçŠ¶æ³ã‚’ç”£ã¿å‡ºã™ã“ã¨ã«ä¸€å½¹è²·ã£ã¦ãŠã‚Šã¾ã™ã€‚ã‚„ã£ã±ã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢ã‚‚äººé–“ãªã®ã§ã€æ™®æ®µã®æ¥­å‹™ã§å¿™ã—ã„ä¸­ã§æ”¹å–„æ´»å‹•ã‚‚åŒæ™‚ã«ã‚„ã‚ã†ãªã‚“ã¦ãƒ¢ãƒãƒ™ãƒ¼ã‚·ãƒ§ãƒ³ã¯æ™®é€šã¯æ¹§ã„ã¦ã“ãªã„è¨³ã§ã™ã€‚ã§ã‚‚ã€ã“ã‚Œã‚’ä½¿ãˆã°ã™ã£ãã‚Šç°¡å˜ã ã‚ˆã€ã£ã¦ã„ã†é­”æ³•ã®ã‚¢ã‚¤ãƒ†ãƒ ãŒã‚ã‚Œã°ã€ã¿ã‚“ãªã®é‡ã„è…°ã‚’å°‘ã—ã ã‘è»½ãã™ã‚‹äº‹ãŒã§ãã¾ã™ã€‚my_api_client ã¯è‡ªåˆ†ã®ä¸­ã§ã‚‚å‰²ã¨ã‚ˆãã§ããŸ gem ãªã®ã§ã€æ¯å›ã“ã‚“ãªè‰¯ã„ gem ãŒä½œã‚Œã‚‹è¨³ã˜ã‚ƒãªã„ã§ã™ã‘ã©ã€ gem ã‚’ä½œã£ã¦ãƒãƒ¼ãƒ ã®ç”Ÿç”£æ€§ãŒä¸ŠãŒã‚‹ã£ã¦ã®ã¯ã‚„ã£ã±é­”æ³•ã®ã‚¢ã‚¤ãƒ†ãƒ ã ãªãã£ã¦æ€ã†ã‚“ã§ã™ã€‚gem ã¯ä¸–ç•Œã‚’æ•‘ã„ã¾ã™ï¼ï¼ˆï¼’å›ç›®ï¼‰ãªãŠã€ my_api_client ã«ã¤ã„ã¦ã¯ éŠ€åº§ Rails #10 ã§ç™»å£‡ã—ãŸã¨ãã®è³‡æ–™ãŒã‚ã‚‹ã®ã§è²¼ã£ã¦ãŠãã¾ã™ã€‚ã“ã‚Œã‚‚è‹¥å¹²å¤ã„ã®ã§ã€æœ€æ–°ã®ä»•æ§˜ã¨ã¯å°‘ã—ç•°ãªã‚‹ã‹ã‚‚ã—ã‚Œã¾ã›ã‚“ã€‚æœ€æ–°ã®ä»•æ§˜ã¯ ã“ã¡ã‚‰ ã‚’ã”è¦§ä¸‹ã•ã„ã€‚åŠ¹èƒ½ 4. ãŸã®ã—ã„æœ€å¾Œã¯ã“ã“ã«å¸°ã£ã¦ãã‚‹ã‚“ã§ã™ãŒã€è‡ªåˆ†ã® gem ã‚’ä½œã‚‹ã®ã¯ã‚„ã£ã±æ¥½ã—ã„ã®ã§ã™ã€‚ã„ããªã‚Šé ­æ‚ªã„æ–‡ç« ã«ãªã‚Šã¾ã—ãŸã€‚ã„ã¤ã‹ã‚‰é ­è‰¯ã„æ–‡ç« æ›¸ã„ã¦ã‚‹ã¨éŒ¯è¦šã—ã¦ã„ãŸï¼Ÿä»¥å‰å‹‰å¼·ä¼šã§ã€Œã“ã‚Œã¾ã§ã©ã†ã„ã†ã‚­ãƒ£ãƒªã‚¢ã‚’æ„è­˜ã—ã¦ã‚„ã£ã¦ãã¾ã—ãŸã‹ï¼Ÿã€ã£ã¦è‹¥æ‰‹ã®ã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢ã‹ã‚‰èã‹ã‚ŒãŸã®ã§ã™ãŒã€è‡ªåˆ†ã¿ãŸã„ãª 30 åŠã°ã®ã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢ã£ã¦ã€ã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢ã«ãªã£ãŸå½“åˆã¯ä»Šã¿ãŸã„ã«ã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢ãŒæŒã¦å›ƒã•ã‚Œã‚‹æ™‚ä»£ã§ã‚‚ãªã‹ã£ãŸã®ã§ã€è‡ªåˆ†ã‹ã‚‰ã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢ã«ãªã‚ã†ã£ã¦æ€ã£ãŸäººã¯å°‘ãªã‹ã‚‰ãšã€ŒãŸã ãƒ—ãƒ­ã‚°ãƒ©ãƒ ãŒå¥½ãã ã£ãŸã€ã£ã¦ã„ã†äººãŒå¤šã„ã‚“ã˜ã‚ƒãªã„ã§ã™ã‹ã­ï¼Ÿã‚ã‹ã‚“ãªã„ã§ã™ã‘ã©è‡ªåˆ†ã¯ãã†ã§ã—ãŸã€‚è‡ªä½œã® gem ã‚’ä½œã£ã¦ã‚‹ã¨ã€Œã‚„ã£ã±ãƒ—ãƒ­ã‚°ãƒ©ãƒ æ›¸ãã®ã£ã¦æ¥½ã—ã„ã€ã£ã¦ã®ã‚’æ€ã„å‡ºã•ã›ã¦ãã‚Œã¾ã™ã€‚è‡ªåˆ†ã¯ä»–ã«ã‚‚è¶£å‘³ã§ãƒãƒ³ãƒ‰ã‚„ã£ãŸã‚Šçµµã‚’æã„ãŸã‚Šã—ã¦ã„ã¾ã™ãŒã€ãƒ—ãƒ­ã‚°ãƒ©ãƒŸãƒ³ã‚°ãŒå­ä¾›ã®é ƒã«å¥½ãã ã£ãŸå·¥ä½œã«ä¸€ç•ªè¿‘ã„ã‚ˆã†ãªæ°—ãŒã—ã¦ã„ã¾ã™ã€‚ä¸­ã€…ãƒ—ãƒ©ã‚¤ãƒ™ãƒ¼ãƒˆã§æ™‚é–“ã‚’ä½œã‚‹ã®ã¯é›£ã—ã„ã‚“ã§ã™ãŒã€ã‚„ã¯ã‚Šæ¥½ã—ã•ãŒä¸€ç•ªæ ¹åº•ã®åŸå‹•åŠ›ã«ãªã£ã¦ã„ã‚‹ã®ã‹ã‚‚ã—ã‚Œãªã„ã§ã™ã­ã€‚ã¾ã¨ã¾ã‚‰ãªã„ã¾ã¨ã‚ä¼šç¤¾ã®ã‚¢ãƒ‰ãƒ™ãƒ³ãƒˆã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼å‘ã‘ã ã—ã€éã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢ã«ã‚‚ä¼ã‚ã‚‹ã‚ˆã†ãªãƒ•ãƒ¯ãƒƒã¨ã—ãŸæ–‡ç« ã«ã—ã‚ˆã†ã¨æ€ã£ã¦æ›¸ã„ã¦ãŸã‚‰ã€é€”ä¸­ã‹ã‚‰ä¿ºã®ãƒã‚¨ãƒ ã‚’æ›¸ãæ®´ã£ã¦ãŸã ã‘ã«ãªã£ãŸæ°—ãŒã—ã¾ã™ãŒã€å½¹ã«ç«‹ã¤ã‹ã©ã†ã‹ã¯ 2 ã®æ¬¡ã«ã—ã¦ã€ã¨ã‚Šã‚ãˆãš gem ä½œã£ã¦ã¿ã‚‹ã¨æ¥½ã—ãã‚¹ã‚­ãƒ«ã‚¢ãƒƒãƒ—ã§ãã‚‹ã—ã€ã‚‚ã—ã‹ã—ãŸã‚‰èª°ã‹ã®é­”æ³•ã®ã‚¢ã‚¤ãƒ†ãƒ ã«ãªã£ã¦ã‚‹ã‹ã‚‚ã—ã‚Œãªã„ã‚ˆã€ã¨ã„ã†ãŠè©±ã§ã—ãŸã€‚ä¹…ã€…ã«ã‚†ã‚‹ã€œã„æ–‡ç« æ›¸ã„ã¦ã¦è‡ªåˆ†çš„ã«ã¯æ¥½ã—ã‹ã£ãŸã§ã™ ç¬‘ã•ã¦ã€æ˜æ—¥ã® Advent Calendar ã¯ï¼Ÿï¼ˆCV. åŠ è—¤ã¿ã©ã‚Šï¼‰Feedforce Advent Calendar 2019ã€æ˜æ—¥ã¯ä¸Šå²¡å›ãŒã€Œé‡çƒã«ã¤ã„ã¦oré éš”ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ³ã«ã¤ã„ã¦ã€æ›¸ã„ã¦ãã‚Œã‚‹ã¿ãŸã„ã§ã™ã€‚æœ€è¿‘ã¯ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ³ã‚‚é éš”ã§å‡ºæ¥ã‚‹ã‚“ã§ã™ã­ã€‚é‡çƒã‚‚é éš”ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ³ã‚‚æœªçµŒé¨“ã®ã¾ã¾ãŠã˜ã•ã‚“ã«ãªã£ã¦ã—ã¾ã£ãŸã®ã§è‡ªåˆ†ã«ã¯æœªçŸ¥ã®é ˜åŸŸã§ã™âš¾ï¸ğŸ’¨ä¹ã†ã”æœŸå¾…ï¼","link":"https://ryz310.hateblo.jp/entry/2019/12/15/224312","isoDate":"2019-12-15T13:43:12.000Z","dateMiliSeconds":1576417392000,"imageUrl":"https://cdn.blog.st-hatena.com/images/theme/og-image-1500.png","authorName":"ryz310"},{"title":"ã¾ã  .rubocop_todo.yml ã§æ¶ˆè€—ã—ã¦ã‚‹ã®ï¼Ÿ","content":"\u003cp\u003eã©ã†ã‚‚ã€ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢ã®ã‚µãƒˆã‚¦ãƒªãƒ§ã‚¦ã‚¹ã‚±ã§ã™ âœŒï¸('Ï‰')âœŒï¸\u003c/p\u003e\n\n\u003cp\u003eè‹¥å¹²é‡£ã‚Šè‡­ã„ã‚¿ã‚¤ãƒˆãƒ«ã§ã™ãŒã€å…ˆæ—¥ \u003ca href=\"https://github.com/ryz310/rubocop_challenger\"\u003eRubocopChallenger\u003c/a\u003e ã¨ã„ã† gem ã® \u003ccode\u003ev1.0.0\u003c/code\u003e ã‚’ãƒªãƒªãƒ¼ã‚¹ã—ãŸã®ã§ç´¹ä»‹ã•ã›ã¦é ‚ãã¾ã™ ğŸ™\u003c/p\u003e\n\n\u003cp\u003e\u003ciframe src=\"https://hatenablog-parts.com/embed?url=https%3A%2F%2Fgithub.com%2Fryz310%2Frubocop_challenger\" title=\"GitHub - ryz310/rubocop_challenger: Make a clean your rubocop_todo.yml with CI\" class=\"embed-card embed-webcard\" scrolling=\"no\" frameborder=\"0\" style=\"display: block; width: 100%; height: 155px; max-width: 500px; margin: 10px 0px;\"\u003e\u003c/iframe\u003e\u003ccite class=\"hatena-citation\"\u003e\u003ca href=\"https://github.com/ryz310/rubocop_challenger\"\u003egithub.com\u003c/a\u003e\u003c/cite\u003e\u003c/p\u003e\n\n\u003ch2\u003eçµŒç·¯\u003c/h2\u003e\n\n\u003cp\u003eåƒ•ãŒæ‰€å±ã—ã¦ã„ã‚‹ \u003ca href=\"https://socialplus.jp/\"\u003eã‚½ãƒ¼ã‚·ãƒ£ãƒ«PLUS\u003c/a\u003e ã¯ 2012 å¹´é ƒã‹ã‚‰é–‹ç™ºãŒå§‹ã¾ã‚Šã¾ã—ãŸã€‚Rails ã®ãƒ—ãƒ­ãƒ€ã‚¯ãƒˆã¨ã—ã¦ã¯å¤æ ªã®æ–¹ã ã¨æ€ã„ã¾ã™ã€‚\u003c/p\u003e\n\n\u003cp\u003eã‚½ãƒ¼ã‚·ãƒ£ãƒ«PLUS ã« \u003ca href=\"https://github.com/rubocop-hq/rubocop\"\u003eRuboCop\u003c/a\u003e ãŒå°å…¥ã•ã‚ŒãŸã®ã¯ 2017/02 é ƒ \u003csup id=\"fnref:1\"\u003e\u003ca href=\"#fn:1\" rel=\"footnote\"\u003e1\u003c/a\u003e\u003c/sup\u003e ã§ã€ãã‚Œã¾ã§ç‰¹ã« RuboCop ã‚’æ„è­˜ã—ãŸã‚³ãƒ¼ãƒ‰ã§é–‹ç™ºã‚’é€²ã‚ã¦ã“ãªã‹ã£ãŸã®ã§ã€å·¨å¤§ãª .rubocop_todo.yml ãŒå‡ºåŠ›ã•ã‚Œã€ãã‚ŒãŒæ‰‹ä»˜ã‹ãšã®ã¾ã¾ã«ãªã£ã¦ã—ã¾ã£ã¦ã„ã¾ã—ãŸã€‚ã¡ãªã¿ã«å½“åˆã¯ \u003cstrong\u003e1669 è¡Œ 195 ç¨®é¡\u003c/strong\u003e ã®é•åãƒ«ãƒ¼ãƒ«ãŒã‚ã‚Šã¾ã—ãŸã€‚\u003c/p\u003e\n\n\u003cp\u003eã“ã®ã¾ã¾ã§ã¯ RuboCop ã®æ©æµãŒå—ã‘ã‚‰ã‚Œãªã„ã®ã§ã€ RuboCop Challenge ã¨ç§°ã—ã¦ (ä»¥å‰ \u003ca href=\"https://ja.wikipedia.org/wiki/%E3%82%A2%E3%82%A4%E3%82%B9%E3%83%BB%E3%83%90%E3%82%B1%E3%83%84%E3%83%BB%E3%83%81%E3%83%A3%E3%83%AC%E3%83%B3%E3%82%B8\"\u003eIce Bucket Challenge\u003c/a\u003e ãŒæµè¡Œã£ã¦ã„ãŸã®ã§) é€±ã‚¤ãƒã§ \u003ccode\u003e.rubocop_todo.yml\u003c/code\u003e ã‹ã‚‰é•åãƒ«ãƒ¼ãƒ«ã‚’ä¸€ã¤æ¶ˆã—ã¦ã€ auto-correct ã§ä¿®æ­£ã™ã‚‹ã€ã¨ã„ã†äº‹ã‚’ã‚„ã£ã¦ã„ãŸã®ã§ã™ãŒã€æ•°ãƒ¶æœˆï¼ˆæ•°é€±é–“ã ã£ãŸã‹ã‚‚ï¼‰ã§ã™ã£ã‹ã‚Šã‚„ã‚‹ã®ã‚’å¿˜ã‚Œã¦ã—ã¾ã„ã¾ã—ãŸ ğŸ˜‡\u003c/p\u003e\n\n\u003cp\u003eæœ€è¿‘ã¾ãŸ RuboCop Challenge ã‚’å†é–‹ã—ã‚ˆã†ã€ã¨ã„ã†æµã‚Œã«ãªã£ãŸã®ã§ã™ãŒã€æ‰‹å‹•ã§ã‚³ãƒ„ã‚³ãƒ„ã‚„ã‚‹ã®ã‚‚ç²¾ç¥çš„ã«ã—ã‚“ã©ããªã£ã¦æ¥ãŸã®ã§ã€ãªã‚“ã¨ã‹è‡ªå‹•åŒ–ã—ãŸã„ãªã€ã¨ã„ã†æ°—æŒã¡ã«ãªã‚Šã€æ‰‹å‹•ã§ã‚„ã£ã¦ã„ãŸ Rubocop Challenge ã‚’ Ruby ã‚¹ã‚¯ãƒªãƒ—ãƒˆã§å‹•ã‹ã›ã‚‹ã‚ˆã†ã«ã—ã¾ã—ãŸã€‚\næœ€åˆã¯å˜ç´”ãª Ruby ã‚¹ã‚¯ãƒªãƒ—ãƒˆã ã£ãŸã®ã§ã™ãŒã€ã›ã£ã‹ããªã®ã§ gem åŒ–ã—ã‚ˆã†ã€ã¨ã„ã†äº‹ã«ãªã‚Šã€ä½œæˆã—ãŸã®ãŒ RubocopChallenger ã§ã™ã€‚\u003c/p\u003e\n\n\u003cp\u003eã¨ã“ã‚ã§ã€å¼Šç¤¾ã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢ã® \u003ca href=\"http://blog.hatena.ne.jp/masutaka26/\" class=\"hatena-id-icon\"\u003e\u003cimg src=\"https://cdn.profile-image.st-hatena.com/users/masutaka26/profile.png\" width=\"16\" height=\"16\" alt=\"\" class=\"hatena-id-icon\"\u003eid:masutaka26\u003c/a\u003e ãŒ circleci-bundle-update-pr ã¨ã„ã† CI ã‚’åˆ©ç”¨ã—ãŸ Bundle Update ã®è‡ªå‹•æ›´æ–° gem ã‚’ä½œæˆã—ã¦ã„ã¾ã™ã€‚\u003c/p\u003e\n\n\u003cp\u003e\u003ciframe src=\"https://hatenablog-parts.com/embed?url=https%3A%2F%2Fgithub.com%2Fmasutaka%2Fcircleci-bundle-update-pr\" title=\"GitHub - masutaka/circleci-bundle-update-pr: Provide continues bundle update using CircleCI\" class=\"embed-card embed-webcard\" scrolling=\"no\" frameborder=\"0\" style=\"display: block; width: 100%; height: 155px; max-width: 500px; margin: 10px 0px;\"\u003e\u003c/iframe\u003e\u003ccite class=\"hatena-citation\"\u003e\u003ca href=\"https://github.com/masutaka/circleci-bundle-update-pr\"\u003egithub.com\u003c/a\u003e\u003c/cite\u003e\u003c/p\u003e\n\n\u003cp\u003eã“ã‚Œã«æ„ŸéŠ˜ã‚’å—ã‘ã¦ (ï¼Ÿ) è‡ªåˆ†ã® RubocopChallenger ã‚‚ CI ã‹ã‚‰\u003ccode\u003e$ rubocop --auto-correct\u003c/code\u003e ã‚’å®Ÿè¡Œã—ãŸçµæœãŒ PR ã¨ã—ã¦å±Šãã‚ˆã†ãªä»•çµ„ã¿ã«ãªã£ã¦ã„ã¾ã™ã€‚\u003c/p\u003e\n\n\u003ch2\u003eä½¿ã„æ–¹\u003c/h2\u003e\n\n\u003cp\u003e\u003cstrong\u003e2021-09-23 ä¿®æ­£\u003c/strong\u003e\u003c/p\u003e\n\n\u003ch3\u003e1. \u003ccode\u003e.circleci/config.yml\u003c/code\u003e ã®ç·¨é›†\u003c/h3\u003e\n\n\u003cp\u003eä»¥ä¸‹ã«è¨­å®šä¾‹ã‚’ç´¹ä»‹ã—ã¾ã™ã€‚\u003c/p\u003e\n\n\u003cpre class=\"code lang-yaml\" data-lang=\"yaml\" data-unlink\u003e\u003cspan class=\"synComment\"\u003e# .circleci/config.yml\u003c/span\u003e\n\u003cspan class=\"synIdentifier\"\u003eversion\u003c/span\u003e\u003cspan class=\"synSpecial\"\u003e:\u003c/span\u003e \u003cspan class=\"synConstant\"\u003e2\u003c/span\u003e\n\n\u003cspan class=\"synIdentifier\"\u003ejobs\u003c/span\u003e\u003cspan class=\"synSpecial\"\u003e:\u003c/span\u003e\n  \u003cspan class=\"synIdentifier\"\u003erubocop_challenge\u003c/span\u003e\u003cspan class=\"synSpecial\"\u003e:\u003c/span\u003e\n    \u003cspan class=\"synIdentifier\"\u003edocker\u003c/span\u003e\u003cspan class=\"synSpecial\"\u003e:\u003c/span\u003e\n      \u003cspan class=\"synStatement\"\u003e- \u003c/span\u003e\u003cspan class=\"synIdentifier\"\u003eimage\u003c/span\u003e\u003cspan class=\"synSpecial\"\u003e:\u003c/span\u003e circleci/ruby:2.5-node-browsers\n    \u003cspan class=\"synIdentifier\"\u003eworking_directory\u003c/span\u003e\u003cspan class=\"synSpecial\"\u003e:\u003c/span\u003e ~/repo\n    \u003cspan class=\"synIdentifier\"\u003esteps\u003c/span\u003e\u003cspan class=\"synSpecial\"\u003e:\u003c/span\u003e\n      \u003cspan class=\"synStatement\"\u003e- \u003c/span\u003echeckout\n      \u003cspan class=\"synStatement\"\u003e- \u003c/span\u003e\u003cspan class=\"synIdentifier\"\u003erun\u003c/span\u003e\u003cspan class=\"synSpecial\"\u003e:\u003c/span\u003e\n          \u003cspan class=\"synIdentifier\"\u003ename\u003c/span\u003e\u003cspan class=\"synSpecial\"\u003e:\u003c/span\u003e Rubocop Challenge\n          \u003cspan class=\"synIdentifier\"\u003ecommand\u003c/span\u003e\u003cspan class=\"synSpecial\"\u003e:\u003c/span\u003e |\n            gem install rubocop_challenger\n            bundle exec rubocop_challenger go \\\n              --email={RubocopChallenger ãŒ commit ã™ã‚‹éš›ã® user email} \\\n              --name=\u0026quot;{RubocopChallenger ãŒ commit ã™ã‚‹éš›ã® user name}\u0026quot;\n\n\u003cspan class=\"synIdentifier\"\u003eworkflows\u003c/span\u003e\u003cspan class=\"synSpecial\"\u003e:\u003c/span\u003e\n  \u003cspan class=\"synIdentifier\"\u003eversion\u003c/span\u003e\u003cspan class=\"synSpecial\"\u003e:\u003c/span\u003e \u003cspan class=\"synConstant\"\u003e2\u003c/span\u003e\n\n  \u003cspan class=\"synIdentifier\"\u003enightly\u003c/span\u003e\u003cspan class=\"synSpecial\"\u003e:\u003c/span\u003e\n    \u003cspan class=\"synIdentifier\"\u003etriggers\u003c/span\u003e\u003cspan class=\"synSpecial\"\u003e:\u003c/span\u003e\n      \u003cspan class=\"synStatement\"\u003e- \u003c/span\u003e\u003cspan class=\"synIdentifier\"\u003eschedule\u003c/span\u003e\u003cspan class=\"synSpecial\"\u003e:\u003c/span\u003e\n          \u003cspan class=\"synIdentifier\"\u003ecron\u003c/span\u003e\u003cspan class=\"synSpecial\"\u003e:\u003c/span\u003e \u003cspan class=\"synConstant\"\u003e\u0026quot;30 23 * * 1,2,3\u0026quot;\u003c/span\u003e\u003cspan class=\"synComment\"\u003e # ã“ã®è¨­å®šã®å ´åˆã€ç«æ°´æœ¨ ã®æ¯æœ 8:30 ã« RubocopChallnger ã® PR ãŒå±Šãã¾ã™\u003c/span\u003e\n          \u003cspan class=\"synIdentifier\"\u003efilters\u003c/span\u003e\u003cspan class=\"synSpecial\"\u003e:\u003c/span\u003e\n            \u003cspan class=\"synIdentifier\"\u003ebranches\u003c/span\u003e\u003cspan class=\"synSpecial\"\u003e:\u003c/span\u003e\n              \u003cspan class=\"synIdentifier\"\u003eonly\u003c/span\u003e\u003cspan class=\"synSpecial\"\u003e:\u003c/span\u003e\n                \u003cspan class=\"synStatement\"\u003e- \u003c/span\u003emaster\n    \u003cspan class=\"synIdentifier\"\u003ejobs\u003c/span\u003e\u003cspan class=\"synSpecial\"\u003e:\u003c/span\u003e\n      \u003cspan class=\"synStatement\"\u003e- \u003c/span\u003erubocop_challenge\n\u003c/pre\u003e\n\n\n\u003cp\u003eã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã®éš›ã€ \u003cstrong\u003eGemfile ã« \u003ccode\u003egem 'rubocop_challenger'\u003c/code\u003e ã‚’è¿½è¨˜ã—ãªã„ã‚ˆã†ã«ã”æ³¨æ„ä¸‹ã•ã„ã€‚\u003c/strong\u003e\nä»–ã® gem ã¨ã®äº’æ›æ€§å•é¡Œã«ã‚ˆã‚Šã€ rubocop_challenger å®Ÿè¡Œä¸­ã«ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã™ã‚‹ã‚±ãƒ¼ã‚¹ãŒã‚ã‚‹ã“ã¨ã‚’ç¢ºèªã—ã¦ãŠã‚Šã¾ã™ã€‚\u003c/p\u003e\n\n\u003ch3\u003e2. GitHub personal access token ã®ä½œæˆ\u003c/h3\u003e\n\n\u003cp\u003eRubocopChallenger ãŒ PR ã‚’ä½œæˆã™ã‚‹ãŸã‚ã« GitHub personal access token ãŒå¿…è¦ã«ãªã‚Šã¾ã™ã€‚\n\u003ca href=\"https://github.com/settings/tokens\"\u003eSettings\u003c/a\u003e ã‹ã‚‰ \u003ca href=\"https://github.com/settings/tokens/new\"\u003eGenerate new token\u003c/a\u003e ã‚’ã‚¯ãƒªãƒƒã‚¯ã—ã¦ access token ã‚’ä½œæˆã—ã¾ã™ã€‚\n\u003cstrong\u003eSelect Scopes\u003c/strong\u003e ã§ã¯ \u003ccode\u003erepo\u003c/code\u003e ã«ãƒã‚§ãƒƒã‚¯ âœ… ã‚’å…¥ã‚Œã¦ä¸‹ã•ã„ã€‚\u003c/p\u003e\n\n\u003cp\u003e\u003cimg src=\"https://github.com/ryz310/rubocop_challenger/raw/master/images/generate_token.png\" alt=\"Generate new token\" /\u003e\u003c/p\u003e\n\n\u003ch3\u003e3. CircleCI ã§ç’°å¢ƒå¤‰æ•°ã®è¨­å®š\u003c/h3\u003e\n\n\u003cp\u003eä»Šå›ã¯ \u003ca href=\"https://circleci.com/\"\u003eCircleCI\u003c/a\u003e ã§ã®åˆ©ç”¨ä¾‹ã‚’ç´¹ä»‹ã—ã¾ã™ ğŸ™\u003c/p\u003e\n\n\u003cp\u003e\u003ca href=\"https://circleci.com/dashboard\"\u003eãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ç”»é¢\u003c/a\u003e ã«ç§»å‹•ã—ã€ RubocopChallenger ã‚’é©ç”¨ã—ãŸã„ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã® \u003cstrong\u003eProject Settings\u003c/strong\u003e -\u003e \u003cstrong\u003eEnvironment Variables\u003c/strong\u003e ã¸ã¨ç§»å‹•ã—ã¾ã™ã€‚\n\u003cstrong\u003eAdd Variable\u003c/strong\u003e ã‚’ã‚¯ãƒªãƒƒã‚¯ã—ã¦ \u003ccode\u003eGITHUB_ACCESS_TOKEN\u003c/code\u003e ã¨ã„ã† Key ã§å…ˆç¨‹ä½œæˆã—ãŸ GitHub personal access token ã‚’è¨­å®šã—ã¾ã™ã€‚\u003c/p\u003e\n\n\u003cp\u003e\u003cimg src=\"https://github.com/ryz310/rubocop_challenger/raw/master/images/circleci_environment_variables.png\" alt=\"Environment Variables\" /\u003e\u003c/p\u003e\n\n\u003ch3\u003e5. ä½œæˆã•ã‚ŒãŸ PR ã®ç¢ºèª\u003c/h3\u003e\n\n\u003cp\u003eã“ã“ã¾ã§ã®æ‰‹é †ã‚’çµ‚ãˆã‚‹ã¨ã€ CircleCI ã«æŒ‡å®šã—ãŸã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒ«ã§ PR ãŒã•ã‚Œã‚‹ã‚ˆã†ã«ãªã‚‹ã¨æ€ã„ã¾ã™ã€‚\nå¾Œã¯ auto-correct ã®å†…å®¹ã‚’ç¢ºèªã—ã¦ã€ merge ã™ã‚‹ã ã‘ã§ã™ã€‚\u003c/p\u003e\n\n\u003cp\u003eä¸­ã«ã¯é©ç”¨ã—ãŸããªã„ãƒ«ãƒ¼ãƒ«ã‚‚å‡ºã¦ãã‚‹ã¨æ€ã„ã¾ã™ãŒã€ãã®å ´åˆã¯ \u003ccode\u003e.rubocop.yml\u003c/code\u003e ã«ãƒ«ãƒ¼ãƒ«ã‚’å†å®šç¾©ã—ã¦ auto-correct ã•ã‚Œãªã„ã‚ˆã†ã«ã—ã¾ã™ã€‚\u003c/p\u003e\n\n\u003ch2\u003eã©ã‚“ãª PR ãŒä½œæˆã•ã‚Œã‚‹ã®ã‹ï¼Ÿ\u003c/h2\u003e\n\n\u003cp\u003eã¡ã‚‡ã£ã¨ RubocopChallenger ã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ãŒå¤ã„é ƒã®ç‰©ã§ã™ãŒã€ \u003ca href=\"https://github.com/ryz310/rubocop_challenger/pull/97\"\u003eä»¥ä¸‹ã®ã‚ˆã†ãª PR\u003c/a\u003e ãŒè‡ªå‹•çš„ã«ä½œæˆã•ã‚Œã¾ã™ã€‚\u003c/p\u003e\n\n\u003cp\u003e\u003ca href=\"https://github.com/ryz310/rubocop_challenger/pull/97\"\u003e\u003cimg src=\"https://github.com/ryz310/rubocop_challenger/raw/master/images/rubocop_challenge.png\" alt=\"RubocopChallnge\" /\u003e\u003c/a\u003e\u003c/p\u003e\n\n\u003cp\u003eãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã®è¨­å®šã§ã¯ã€ \u003ccode\u003e.rubocop_todo.yml\u003c/code\u003e ã®ä¸­ã‹ã‚‰ \u003cstrong\u003eCop supports --auto-correct\u003c/strong\u003e ã‹ã¤ \u003cstrong\u003eOffense count ãŒæœ€å¤§\u003c/strong\u003e ã®ãƒ«ãƒ¼ãƒ«ã‚’æ¶ˆã—ã¦ã€ auto-correct ã—ãŸçµæœãŒ PR ã¨ã—ã¦ä½œæˆã•ã‚Œã¾ã™ã€‚\u003c/p\u003e\n\n\u003cp\u003eã¾ãŸã€ auto-correct ã®å¾Œã§ \u003ccode\u003e$ rubocop --auto-gen-config\u003c/code\u003e ã‚’å®Ÿè¡Œã—ã¦ \u003ccode\u003e.rubocop_todo.yml\u003c/code\u003e ã‚’å†ä½œæˆã—ã¦ã„ã¾ã™ã€‚ RuboCop ã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ãŒå¤‰ã‚ã£ãŸæ™‚ã¨ã‹ã« \u003ccode\u003e.rubocop_todo.yml\u003c/code\u003e ã«å‡ºåŠ›ã•ã‚Œã‚‹å†…å®¹ã‚‚è‹¥å¹²å¤‰ã‚ã£ã¦ã„ãŸã‚Šã™ã‚‹ã®ã§ã™ãŒã€æ¯å›æœ€æ–°ã®çŠ¶æ…‹ã«ä½œã‚Šç›´ã—ã¦ãã‚Œã‚‹ã®ãŒã¡ã‚‡ã£ã¨ä¾¿åˆ©ã ã£ãŸã‚Šã—ã¾ã™ã€‚\u003c/p\u003e\n\n\u003cp\u003eã¡ãªã¿ã« PR ã® \u003cstrong\u003eDescription\u003c/strong\u003e ã«è¡¨ç¤ºã•ã‚Œã¦ã„ã‚‹å†…å®¹ã¯ \u003ca href=\"https://www.rubydoc.info/gems/rubocop/RuboCop/Cop/Layout/AlignHash\"\u003eæœ¬å®¶ RuboCop ã® RubyDoc\u003c/a\u003e ã«è¨˜è¼‰ã•ã‚Œã¦ã„ã‚‹å†…å®¹ã¨åŒã˜ã‚‚ã®ã§ã™ã€‚ã“ã‚Œã‚’è¡¨ç¤ºã™ã‚‹ã®ã«åœ°å‘³ã«è‹¦åŠ´ã—ã¾ã—ãŸ ğŸ˜“\u003c/p\u003e\n\n\u003ch2\u003eé«˜åº¦ãªè¨­å®š\u003c/h2\u003e\n\n\u003cp\u003eRubocopChallnger ã«ã¯ã„ãã¤ã‹ã‚ªãƒ—ã‚·ãƒ§ãƒ³ãŒç”¨æ„ã•ã‚Œã¦ã„ã‚‹ã®ã§ã€ã”ç´¹ä»‹ã—ã¾ã™ã€‚\u003c/p\u003e\n\n\u003ch3\u003e\u003ccode\u003e--mode\u003c/code\u003e\u003c/h3\u003e\n\n\u003cp\u003eä¸Šè¿°ã®é€šã‚Šã€ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã§ã¯ auto-correct ã®å¯¾è±¡ã¯ \u003cstrong\u003eCop supports --auto-correct\u003c/strong\u003e ã‹ã¤ \u003cstrong\u003eOffense count ãŒæœ€å¤§\u003c/strong\u003e ã®ãƒ«ãƒ¼ãƒ«ãŒé¸æŠã•ã‚Œã¾ã™ãŒã€ \u003ccode\u003emode\u003c/code\u003e ã«æ¸¡ã™å€¤ã«ã‚ˆã£ã¦å¯¾è±¡ã‚’å¤‰æ›´ã™ã‚‹ã“ã¨ãŒå‡ºæ¥ã¾ã™ã€‚\u003c/p\u003e\n\n\u003cul\u003e\n\u003cli\u003e\u003ccode\u003emost_occurrence\u003c/code\u003e (ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆ)\n\n\u003cul\u003e\n\u003cli\u003e\u003cstrong\u003eOffense count ãŒæœ€å¤§\u003c/strong\u003e ã®ãƒ«ãƒ¼ãƒ«ã‚’é¸æŠã™ã‚‹\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003eleast_occurrence\u003c/code\u003e\n\n\u003cul\u003e\n\u003cli\u003e\u003cstrong\u003eOffense count ãŒæœ€å°\u003c/strong\u003e ã®ãƒ«ãƒ¼ãƒ«ã‚’é¸æŠã™ã‚‹\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003erandom\u003c/code\u003e\n\n\u003cul\u003e\n\u003cli\u003eå…¨ä½“ã‹ã‚‰ãƒ©ãƒ³ãƒ€ãƒ ã«é¸æŠã™ã‚‹\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\n\n\u003ch4\u003eä½¿ç”¨ä¾‹\u003c/h4\u003e\n\n\u003cpre class=\"code lang-sh\" data-lang=\"sh\" data-unlink\u003e$ bundle \u003cspan class=\"synStatement\"\u003eexec\u003c/span\u003e rubocop_challenger go \u003cspan class=\"synStatement\"\u003e\\\u003c/span\u003e\n    \u003cspan class=\"synSpecial\"\u003e--email=rubocop-challenger@example.com\u003c/span\u003e \u003cspan class=\"synStatement\"\u003e\\\u003c/span\u003e\n    \u003cspan class=\"synSpecial\"\u003e--name=\u003c/span\u003e\u003cspan class=\"synStatement\"\u003e\u0026quot;\u003c/span\u003e\u003cspan class=\"synConstant\"\u003eRubocop Challenger\u003c/span\u003e\u003cspan class=\"synStatement\"\u003e\u0026quot;\u003c/span\u003e \u003cspan class=\"synStatement\"\u003e\\\u003c/span\u003e\n    \u003cspan class=\"synSpecial\"\u003e--mode=random\u003c/span\u003e \n\u003c/pre\u003e\n\n\n\u003ch3\u003e\u003ccode\u003e--labels\u003c/code\u003e\u003c/h3\u003e\n\n\u003cp\u003eRubocopChallnger ãŒä½œæˆã™ã‚‹ PR ã«ä»˜ä¸ã•ã‚Œã‚‹ label ã‚’æŒ‡å®šã—ã¾ã™ã€‚ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã§ã¯ \u003cstrong\u003erubocop challenge\u003c/strong\u003e ã¨ã„ã†ãƒ©ãƒ™ãƒ«ãŒä»˜ä¸ã•ã‚Œã¾ã™ã€‚\nã‚½ãƒ¼ã‚·ãƒ£ãƒ«PLUS ã§ã¯ \u003ca href=\"https://waffle.io/\"\u003ewaffle.io\u003c/a\u003e ã‚’åˆ©ç”¨ã—ã¦ã„ãŸã‚Šã™ã‚‹ã®ã§ã™ãŒã€ãƒ¬ãƒ“ãƒ¥ãƒ¼å¾…ã¡çŠ¶æ…‹ã® label ã‚’ä»˜ä¸ã™ã‚‹ã‚ˆã†ã«ã™ã‚‹ã¨è¦‹è½ã¨ã—ãŒãªãã¦ä¾¿åˆ©ã§ã™ã€‚\u003c/p\u003e\n\n\u003cp\u003e\u003cstrong\u003eã‚¹ãƒšãƒ¼ã‚¹åŒºåˆ‡ã‚Š\u003c/strong\u003eã§è¤‡æ•°æŒ‡å®šã™ã‚‹ã“ã¨ãŒå‡ºæ¥ã¾ã™ã€‚\u003c/p\u003e\n\n\u003ch4\u003eä½¿ç”¨ä¾‹\u003c/h4\u003e\n\n\u003cpre class=\"code lang-sh\" data-lang=\"sh\" data-unlink\u003e$ bundle \u003cspan class=\"synStatement\"\u003eexec\u003c/span\u003e rubocop_challenger go \u003cspan class=\"synStatement\"\u003e\\\u003c/span\u003e\n    \u003cspan class=\"synSpecial\"\u003e--email=rubocop-challenger@example.com\u003c/span\u003e \u003cspan class=\"synStatement\"\u003e\\\u003c/span\u003e\n    \u003cspan class=\"synSpecial\"\u003e--name=\u003c/span\u003e\u003cspan class=\"synStatement\"\u003e\u0026quot;\u003c/span\u003e\u003cspan class=\"synConstant\"\u003eRubocop Challenger\u003c/span\u003e\u003cspan class=\"synStatement\"\u003e\u0026quot;\u003c/span\u003e \u003cspan class=\"synStatement\"\u003e\\\u003c/span\u003e\n    \u003cspan class=\"synSpecial\"\u003e--labels=\u003c/span\u003e\u003cspan class=\"synStatement\"\u003e\u0026quot;\u003c/span\u003e\u003cspan class=\"synConstant\"\u003erubocop challenge\u003c/span\u003e\u003cspan class=\"synStatement\"\u003e\u0026quot;\u003c/span\u003e \u003cspan class=\"synStatement\"\u003e\u0026quot;\u003c/span\u003e\u003cspan class=\"synConstant\"\u003ein progress\u003c/span\u003e\u003cspan class=\"synStatement\"\u003e\u0026quot;\u003c/span\u003e\n\u003c/pre\u003e\n\n\n\u003ch3\u003e\u003ccode\u003e--template\u003c/code\u003e\u003c/h3\u003e\n\n\u003cp\u003eä½œæˆã•ã‚Œã‚‹ PR ã‚’ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚ºã—ãŸã„å ´åˆãªã©ã‚ã‚‹ã‹ã¨æ€ã„ã¾ã™ã€‚\nãã®å ´åˆã¯ template ã« erb ãƒ•ã‚¡ã‚¤ãƒ«ã®ãƒ‘ã‚¹ã‚’æŒ‡å®šã™ã‚‹ã“ã¨ãŒå¯èƒ½ã§ã™ã€‚\u003c/p\u003e\n\n\u003cp\u003eãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã§ã¯ä»¥ä¸‹ã®ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆãŒä½¿ç”¨ã•ã‚Œã‚‹ã®ã§ã€å¿…è¦ã«å¿œã˜ã¦ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚ºã—ã¦ã”åˆ©ç”¨ä¸‹ã•ã„ ğŸ™\u003c/p\u003e\n\n\u003cp\u003e\u003ca href=\"https://github.com/ryz310/rubocop_challenger/blob/master/lib/templates/default.md.erb\"\u003ehttps://github.com/ryz310/rubocop_challenger/blob/master/lib/templates/default.md.erb\u003c/a\u003e\u003c/p\u003e\n\n\u003ch4\u003eä½¿ç”¨ä¾‹\u003c/h4\u003e\n\n\u003cpre class=\"code lang-sh\" data-lang=\"sh\" data-unlink\u003e$ bundle \u003cspan class=\"synStatement\"\u003eexec\u003c/span\u003e rubocop_challenger go \u003cspan class=\"synStatement\"\u003e\\\u003c/span\u003e\n    \u003cspan class=\"synSpecial\"\u003e--email=rubocop-challenger@example.com\u003c/span\u003e \u003cspan class=\"synStatement\"\u003e\\\u003c/span\u003e\n    \u003cspan class=\"synSpecial\"\u003e--name=\u003c/span\u003e\u003cspan class=\"synStatement\"\u003e\u0026quot;\u003c/span\u003e\u003cspan class=\"synConstant\"\u003eRubocop Challenger\u003c/span\u003e\u003cspan class=\"synStatement\"\u003e\u0026quot;\u003c/span\u003e \u003cspan class=\"synStatement\"\u003e\\\u003c/span\u003e\n    \u003cspan class=\"synSpecial\"\u003e--template=./path/to/template.md.erb\u003c/span\u003e\n\u003c/pre\u003e\n\n\n\u003ch3\u003e\u003ccode\u003e--no-regenerate-rubocop-todo\u003c/code\u003e\u003c/h3\u003e\n\n\u003cp\u003eä¸Šè¿°ã®é€šã‚Šã€ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã§ã¯ auto-correct ã®å¾Œã§ \u003ccode\u003e$ rubocop --auto-gen-config\u003c/code\u003e ã‚’å®Ÿè¡Œã—ã¦ .rubocop_todo.yml ã‚’å†ä½œæˆã—ã¦ã„ã¾ã™ã€‚ã“ã‚ŒãŒä¸è¦ãªå ´åˆã¯ no-regenerate-rubocop-todo ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã‚’æŒ‡å®šã—ã¾ã™ã€‚\u003c/p\u003e\n\n\u003ch4\u003eä½¿ç”¨ä¾‹\u003c/h4\u003e\n\n\u003cpre class=\"code lang-sh\" data-lang=\"sh\" data-unlink\u003e$ bundle \u003cspan class=\"synStatement\"\u003eexec\u003c/span\u003e rubocop_challenger go \u003cspan class=\"synStatement\"\u003e\\\u003c/span\u003e\n    \u003cspan class=\"synSpecial\"\u003e--email=rubocop-challenger@example.com\u003c/span\u003e \u003cspan class=\"synStatement\"\u003e\\\u003c/span\u003e\n    \u003cspan class=\"synSpecial\"\u003e--name=\u003c/span\u003e\u003cspan class=\"synStatement\"\u003e\u0026quot;\u003c/span\u003e\u003cspan class=\"synConstant\"\u003eRubocop Challenger\u003c/span\u003e\u003cspan class=\"synStatement\"\u003e\u0026quot;\u003c/span\u003e \u003cspan class=\"synStatement\"\u003e\\\u003c/span\u003e\n    \u003cspan class=\"synSpecial\"\u003e--no-regenerate-rubocop-todo\u003c/span\u003e\n\u003c/pre\u003e\n\n\n\u003ch2\u003eæ—¢çŸ¥ã®ä¸å…·åˆ \u003cstrong\u003e(v1.2.0 ã§è§£æ¶ˆæ¸ˆã¿)\u003c/strong\u003e\u003c/h2\u003e\n\n\u003cp\u003eRuboCop ã®ãƒ«ãƒ¼ãƒ«ã®ä¸­ã«ã¯ \u003cstrong\u003eCop supports --auto-correct\u003c/strong\u003e ã¨è¡¨è¨˜ã•ã‚Œã¦ã„ã‚‹ã«ã‚‚é–¢ã‚ã‚‰ãšã€éƒ¨åˆ†çš„ã«ã—ã‹ auto-correct ã—ã¦ãã‚Œãªã„ã‚‚ã®ãŒã‚ã‚Šã¾ã™ã€‚\nä¾‹ãˆã° \u003ccode\u003eStyle/Semicolon\u003c/code\u003e ãŒ auto-correct ã§ãã‚‹ã®ã¯è¡Œæœ«ã« \u003ccode\u003e;\u003c/code\u003e ãŒå­˜åœ¨ã™ã‚‹å ´åˆã ã‘ã®ã‚ˆã†ã§ã™ã€‚\u003c/p\u003e\n\n\u003cpre class=\"code lang-ruby\" data-lang=\"ruby\" data-unlink\u003eputs \u003cspan class=\"synSpecial\"\u003e'\u003c/span\u003e\u003cspan class=\"synConstant\"\u003ehoge\u003c/span\u003e\u003cspan class=\"synSpecial\"\u003e'\u003c/span\u003e; \u003cspan class=\"synComment\"\u003e# =\u0026gt; auto-correct ã•ã‚Œã‚‹\u003c/span\u003e\nputs \u003cspan class=\"synSpecial\"\u003e'\u003c/span\u003e\u003cspan class=\"synConstant\"\u003efuga\u003c/span\u003e\u003cspan class=\"synSpecial\"\u003e'\u003c/span\u003e; puts \u003cspan class=\"synSpecial\"\u003e'\u003c/span\u003e\u003cspan class=\"synConstant\"\u003epiyo\u003c/span\u003e\u003cspan class=\"synSpecial\"\u003e'\u003c/span\u003e \u003cspan class=\"synComment\"\u003e# =\u0026gt; auto-correct ã•ã‚Œãªã„\u003c/span\u003e\n\u003c/pre\u003e\n\n\n\u003cp\u003eã“ã®ã‚ˆã†ãªãƒ«ãƒ¼ãƒ«ãŒ auto-correct å¯¾è±¡ã«é¸ã°ã‚Œã‚‹ã¨ã€RubocopChallenger ã‚’å®Ÿè¡Œã—ãŸå¾Œã‚‚é•åãŒè§£æ±ºã•ã‚Œãšã€å¾Œç¶šã® \u003ccode\u003e$ rubocop --auto-gen-config\u003c/code\u003e ã§å†åº¦ \u003ccode\u003e.rubocop_todo.yml\u003c/code\u003e ã«å¯¾è±¡ãƒ«ãƒ¼ãƒ«ãŒå‡ºã¦ãã¦ã—ã¾ã†ã®ã§ã€ RubocopChallenger ãŒæ©Ÿèƒ½ã—ãªã„çŠ¶æ…‹ã«ãªã£ã¦ã—ã¾ã„ã¾ã™ã€‚\nç¾çŠ¶ã§ã¯ \u003ccode\u003eStyle/Semicolon\u003c/code\u003e ã®ã‚ˆã†ãªãƒ«ãƒ¼ãƒ«ã«é­é‡ã—ãŸå ´åˆã¯ã€æ‰‹å‹•ã§ \u003ccode\u003e.rubocop.yml\u003c/code\u003e ã«ãƒ«ãƒ¼ãƒ«ã‚’ç§»å‹•ã•ã›ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚\n\u003cdel\u003eä»Šã®ã¨ã“ã‚ RubocopChallenger å´ã§ã®å¯¾ç­–ã‚’æ€ã„ä»˜ã„ã¦ã„ãªã„ã®ã§ã€ã‚‚ã—è‰¯ã„ã‚¢ã‚¤ãƒ‡ã‚¢ãŒã‚ã‚Šã¾ã—ãŸã‚‰æ•™ãˆã¦ä¸‹ã•ã„ ğŸ™\u003c/del\u003e\u003c/p\u003e\n\n\u003cp\u003e\u003cstrong\u003e2019/03/26 è¿½è¨˜\u003c/strong\u003e\u003c/p\u003e\n\n\u003cp\u003eRubocopChallenger v1.2.0 ã§ Ignore ãƒªã‚¹ãƒˆæ©Ÿèƒ½ãŒè¿½åŠ ã•ã‚Œã¾ã—ãŸã€‚\nRubocopChallenger ã‚’å®Ÿè¡Œã—ãŸå¾Œã‚‚é•åãŒè§£æ±ºã•ã‚Œãšã€å¾Œç¶šã® \u003ccode\u003e$ rubocop --auto-gen-config\u003c/code\u003e ã§å†åº¦ \u003ccode\u003e.rubocop_todo.yml\u003c/code\u003e ã«å¯¾è±¡ãƒ«ãƒ¼ãƒ«ãŒå‡ºã¦ãã¦ã—ã¾ã£ãŸå ´åˆã€ \u003ccode\u003e.rubocop_challenger.yml\u003c/code\u003e ã¨ã„ã†ãƒ•ã‚¡ã‚¤ãƒ«ãŒä½œæˆã•ã‚Œã€å¯¾è±¡ãƒ«ãƒ¼ãƒ«ãŒ Ignore ãƒªã‚¹ãƒˆã«è¿½åŠ ã•ã‚Œã¾ã™ã€‚\nIgnore ãƒªã‚¹ãƒˆã«è¿½åŠ ã•ã‚ŒãŸãƒ«ãƒ¼ãƒ«ã¯æ¬¡å›ä»¥é™ã€ RubocopChallenger ã®å¯¾è±¡ãƒ«ãƒ¼ãƒ«ã¨ã—ã¦é¸æŠã•ã‚Œãªããªã‚‹ã®ã§ã€ç‰¹ã«ä½•ã‚‚ã—ãªãã¨ã‚‚é‹ç”¨ã‚’ç¶šã‘ã‚‹ã“ã¨ãŒå¯èƒ½ã¨ãªã‚Šã¾ã™ã€‚\u003c/p\u003e\n\n\u003ch2\u003eæœ€å¾Œã«\u003c/h2\u003e\n\n\u003cp\u003eå½“åˆã¯ \u003cstrong\u003e1669 è¡Œ 195 ç¨®é¡\u003c/strong\u003e ã®é•åãƒ«ãƒ¼ãƒ«ãŒ .rubocop_todo.yml ã«å­˜åœ¨ã—ã¦ã„ã¾ã—ãŸãŒã€ RubocopChallenger ã‚’å°å…¥ã—ã¦ã‹ã‚‰ 3 ãƒ¶æœˆã§ \u003cstrong\u003e1187 è¡Œ 132 ç¨®é¡\u003c/strong\u003e ã¾ã§æ¸›ã‚‰ã™ã“ã¨ãŒå‡ºæ¥ã¾ã—ãŸã€‚ auto-correct å¯èƒ½ãªé•åãƒ«ãƒ¼ãƒ«ã¯ã‚ã¨ 62 ç¨®é¡æ®‹ã£ã¦ã„ã‚‹ã®ã§ã€ã‚ã¨åŠåˆ†ãã‚‰ã„ã¾ã§ã¯æ¸›ã‚‰ã™ã“ã¨ãŒã§ããã†ã§ã™ã€‚\u003c/p\u003e\n\n\u003cp\u003eæœ¬è¨˜äº‹ã§ã¯è‚¥å¤§åŒ–ã—ã¦ã—ã¾ã£ãŸ .rubocop_todo.yml ã‚’è‡ªå‹•çš„ã«ä¿®æ­£ã—ã¦ã„ã RubocopChallnger ã‚’ç´¹ä»‹ã—ã€å°å…¥æ–¹æ³•ã«ã¤ã„ã¦è§£èª¬ã•ã›ã¦é ‚ãã¾ã—ãŸã€‚ .rubocop_todo.yml ãŒè‚¥å¤§åŒ–ã—ã¦å›°ã£ã¦ã„ã‚‹ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã§å½¹ç«‹ã¦ã¦é ‚ã‘ã‚Œã°å¹¸ã„ã§ã™ ğŸ™\u003c/p\u003e\n\n\u003cp\u003eã¾ãŸã€åˆ©ç”¨ã—ã¦ã¿ã¦ãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯ãªã©ã‚ã‚Œã° \u003ca href=\"https://github.com/ryz310/rubocop_challenger/issues\"\u003eIssue\u003c/a\u003e ã«ã¦ã”é€£çµ¡ä¸‹ã•ã„ã€‚ GitHub ã§ã¯é ‘å¼µã£ã¦æ‹™ã„è‹±èªã‚’æ›¸ãã‚ˆã†ã«ã—ã¦ã„ã¾ã™ãŒã€æ—¥æœ¬èªã§ã‚‚å¤§ä¸ˆå¤«ã§ã™ ğŸ™† PR ã‚‚å¤§æ­“è¿ã§ã™ã€‚ã©ã†ãå®œã—ããŠé¡˜ã„è‡´ã—ã¾ã™ ğŸ™‡\u003c/p\u003e\n\u003cdiv class=\"footnotes\"\u003e\n\u003chr/\u003e\n\u003col\u003e\n\u003cli id=\"fn:1\"\u003e\n\u003cp\u003eã¡ãªã¿ã«å°å…¥ã—ãŸã®ã¯è‡ªåˆ†ã§ã™\u003ca href=\"#fnref:1\" rev=\"footnote\"\u003e\u0026#8617;\u003c/a\u003e\u003c/p\u003e\u003c/li\u003e\n\u003c/ol\u003e\n\u003c/div\u003e\n\n","contentSnippet":"ã©ã†ã‚‚ã€ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢ã®ã‚µãƒˆã‚¦ãƒªãƒ§ã‚¦ã‚¹ã‚±ã§ã™ âœŒï¸('Ï‰')âœŒï¸è‹¥å¹²é‡£ã‚Šè‡­ã„ã‚¿ã‚¤ãƒˆãƒ«ã§ã™ãŒã€å…ˆæ—¥ RubocopChallenger ã¨ã„ã† gem ã® v1.0.0 ã‚’ãƒªãƒªãƒ¼ã‚¹ã—ãŸã®ã§ç´¹ä»‹ã•ã›ã¦é ‚ãã¾ã™ ğŸ™github.comçµŒç·¯åƒ•ãŒæ‰€å±ã—ã¦ã„ã‚‹ ã‚½ãƒ¼ã‚·ãƒ£ãƒ«PLUS ã¯ 2012 å¹´é ƒã‹ã‚‰é–‹ç™ºãŒå§‹ã¾ã‚Šã¾ã—ãŸã€‚Rails ã®ãƒ—ãƒ­ãƒ€ã‚¯ãƒˆã¨ã—ã¦ã¯å¤æ ªã®æ–¹ã ã¨æ€ã„ã¾ã™ã€‚ã‚½ãƒ¼ã‚·ãƒ£ãƒ«PLUS ã« RuboCop ãŒå°å…¥ã•ã‚ŒãŸã®ã¯ 2017/02 é ƒ 1 ã§ã€ãã‚Œã¾ã§ç‰¹ã« RuboCop ã‚’æ„è­˜ã—ãŸã‚³ãƒ¼ãƒ‰ã§é–‹ç™ºã‚’é€²ã‚ã¦ã“ãªã‹ã£ãŸã®ã§ã€å·¨å¤§ãª .rubocop_todo.yml ãŒå‡ºåŠ›ã•ã‚Œã€ãã‚ŒãŒæ‰‹ä»˜ã‹ãšã®ã¾ã¾ã«ãªã£ã¦ã—ã¾ã£ã¦ã„ã¾ã—ãŸã€‚ã¡ãªã¿ã«å½“åˆã¯ 1669 è¡Œ 195 ç¨®é¡ ã®é•åãƒ«ãƒ¼ãƒ«ãŒã‚ã‚Šã¾ã—ãŸã€‚ã“ã®ã¾ã¾ã§ã¯ RuboCop ã®æ©æµãŒå—ã‘ã‚‰ã‚Œãªã„ã®ã§ã€ RuboCop Challenge ã¨ç§°ã—ã¦ (ä»¥å‰ Ice Bucket Challenge ãŒæµè¡Œã£ã¦ã„ãŸã®ã§) é€±ã‚¤ãƒã§ .rubocop_todo.yml ã‹ã‚‰é•åãƒ«ãƒ¼ãƒ«ã‚’ä¸€ã¤æ¶ˆã—ã¦ã€ auto-correct ã§ä¿®æ­£ã™ã‚‹ã€ã¨ã„ã†äº‹ã‚’ã‚„ã£ã¦ã„ãŸã®ã§ã™ãŒã€æ•°ãƒ¶æœˆï¼ˆæ•°é€±é–“ã ã£ãŸã‹ã‚‚ï¼‰ã§ã™ã£ã‹ã‚Šã‚„ã‚‹ã®ã‚’å¿˜ã‚Œã¦ã—ã¾ã„ã¾ã—ãŸ ğŸ˜‡æœ€è¿‘ã¾ãŸ RuboCop Challenge ã‚’å†é–‹ã—ã‚ˆã†ã€ã¨ã„ã†æµã‚Œã«ãªã£ãŸã®ã§ã™ãŒã€æ‰‹å‹•ã§ã‚³ãƒ„ã‚³ãƒ„ã‚„ã‚‹ã®ã‚‚ç²¾ç¥çš„ã«ã—ã‚“ã©ããªã£ã¦æ¥ãŸã®ã§ã€ãªã‚“ã¨ã‹è‡ªå‹•åŒ–ã—ãŸã„ãªã€ã¨ã„ã†æ°—æŒã¡ã«ãªã‚Šã€æ‰‹å‹•ã§ã‚„ã£ã¦ã„ãŸ Rubocop Challenge ã‚’ Ruby ã‚¹ã‚¯ãƒªãƒ—ãƒˆã§å‹•ã‹ã›ã‚‹ã‚ˆã†ã«ã—ã¾ã—ãŸã€‚æœ€åˆã¯å˜ç´”ãª Ruby ã‚¹ã‚¯ãƒªãƒ—ãƒˆã ã£ãŸã®ã§ã™ãŒã€ã›ã£ã‹ããªã®ã§ gem åŒ–ã—ã‚ˆã†ã€ã¨ã„ã†äº‹ã«ãªã‚Šã€ä½œæˆã—ãŸã®ãŒ RubocopChallenger ã§ã™ã€‚ã¨ã“ã‚ã§ã€å¼Šç¤¾ã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢ã® id:masutaka26 ãŒ circleci-bundle-update-pr ã¨ã„ã† CI ã‚’åˆ©ç”¨ã—ãŸ Bundle Update ã®è‡ªå‹•æ›´æ–° gem ã‚’ä½œæˆã—ã¦ã„ã¾ã™ã€‚github.comã“ã‚Œã«æ„ŸéŠ˜ã‚’å—ã‘ã¦ (ï¼Ÿ) è‡ªåˆ†ã® RubocopChallenger ã‚‚ CI ã‹ã‚‰$ rubocop --auto-correct ã‚’å®Ÿè¡Œã—ãŸçµæœãŒ PR ã¨ã—ã¦å±Šãã‚ˆã†ãªä»•çµ„ã¿ã«ãªã£ã¦ã„ã¾ã™ã€‚ä½¿ã„æ–¹2021-09-23 ä¿®æ­£1. .circleci/config.yml ã®ç·¨é›†ä»¥ä¸‹ã«è¨­å®šä¾‹ã‚’ç´¹ä»‹ã—ã¾ã™ã€‚# .circleci/config.ymlversion: 2jobs:  rubocop_challenge:    docker:      - image: circleci/ruby:2.5-node-browsers    working_directory: ~/repo    steps:      - checkout      - run:          name: Rubocop Challenge          command: |            gem install rubocop_challenger            bundle exec rubocop_challenger go \\              --email={RubocopChallenger ãŒ commit ã™ã‚‹éš›ã® user email} \\              --name=\"{RubocopChallenger ãŒ commit ã™ã‚‹éš›ã® user name}\"workflows:  version: 2  nightly:    triggers:      - schedule:          cron: \"30 23 * * 1,2,3\" # ã“ã®è¨­å®šã®å ´åˆã€ç«æ°´æœ¨ ã®æ¯æœ 8:30 ã« RubocopChallnger ã® PR ãŒå±Šãã¾ã™          filters:            branches:              only:                - master    jobs:      - rubocop_challengeã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã®éš›ã€ Gemfile ã« gem 'rubocop_challenger' ã‚’è¿½è¨˜ã—ãªã„ã‚ˆã†ã«ã”æ³¨æ„ä¸‹ã•ã„ã€‚ä»–ã® gem ã¨ã®äº’æ›æ€§å•é¡Œã«ã‚ˆã‚Šã€ rubocop_challenger å®Ÿè¡Œä¸­ã«ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã™ã‚‹ã‚±ãƒ¼ã‚¹ãŒã‚ã‚‹ã“ã¨ã‚’ç¢ºèªã—ã¦ãŠã‚Šã¾ã™ã€‚2. GitHub personal access token ã®ä½œæˆRubocopChallenger ãŒ PR ã‚’ä½œæˆã™ã‚‹ãŸã‚ã« GitHub personal access token ãŒå¿…è¦ã«ãªã‚Šã¾ã™ã€‚Settings ã‹ã‚‰ Generate new token ã‚’ã‚¯ãƒªãƒƒã‚¯ã—ã¦ access token ã‚’ä½œæˆã—ã¾ã™ã€‚Select Scopes ã§ã¯ repo ã«ãƒã‚§ãƒƒã‚¯ âœ… ã‚’å…¥ã‚Œã¦ä¸‹ã•ã„ã€‚3. CircleCI ã§ç’°å¢ƒå¤‰æ•°ã®è¨­å®šä»Šå›ã¯ CircleCI ã§ã®åˆ©ç”¨ä¾‹ã‚’ç´¹ä»‹ã—ã¾ã™ ğŸ™ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ç”»é¢ ã«ç§»å‹•ã—ã€ RubocopChallenger ã‚’é©ç”¨ã—ãŸã„ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã® Project Settings -\u003e Environment Variables ã¸ã¨ç§»å‹•ã—ã¾ã™ã€‚Add Variable ã‚’ã‚¯ãƒªãƒƒã‚¯ã—ã¦ GITHUB_ACCESS_TOKEN ã¨ã„ã† Key ã§å…ˆç¨‹ä½œæˆã—ãŸ GitHub personal access token ã‚’è¨­å®šã—ã¾ã™ã€‚5. ä½œæˆã•ã‚ŒãŸ PR ã®ç¢ºèªã“ã“ã¾ã§ã®æ‰‹é †ã‚’çµ‚ãˆã‚‹ã¨ã€ CircleCI ã«æŒ‡å®šã—ãŸã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒ«ã§ PR ãŒã•ã‚Œã‚‹ã‚ˆã†ã«ãªã‚‹ã¨æ€ã„ã¾ã™ã€‚å¾Œã¯ auto-correct ã®å†…å®¹ã‚’ç¢ºèªã—ã¦ã€ merge ã™ã‚‹ã ã‘ã§ã™ã€‚ä¸­ã«ã¯é©ç”¨ã—ãŸããªã„ãƒ«ãƒ¼ãƒ«ã‚‚å‡ºã¦ãã‚‹ã¨æ€ã„ã¾ã™ãŒã€ãã®å ´åˆã¯ .rubocop.yml ã«ãƒ«ãƒ¼ãƒ«ã‚’å†å®šç¾©ã—ã¦ auto-correct ã•ã‚Œãªã„ã‚ˆã†ã«ã—ã¾ã™ã€‚ã©ã‚“ãª PR ãŒä½œæˆã•ã‚Œã‚‹ã®ã‹ï¼Ÿã¡ã‚‡ã£ã¨ RubocopChallenger ã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ãŒå¤ã„é ƒã®ç‰©ã§ã™ãŒã€ ä»¥ä¸‹ã®ã‚ˆã†ãª PR ãŒè‡ªå‹•çš„ã«ä½œæˆã•ã‚Œã¾ã™ã€‚ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã®è¨­å®šã§ã¯ã€ .rubocop_todo.yml ã®ä¸­ã‹ã‚‰ Cop supports --auto-correct ã‹ã¤ Offense count ãŒæœ€å¤§ ã®ãƒ«ãƒ¼ãƒ«ã‚’æ¶ˆã—ã¦ã€ auto-correct ã—ãŸçµæœãŒ PR ã¨ã—ã¦ä½œæˆã•ã‚Œã¾ã™ã€‚ã¾ãŸã€ auto-correct ã®å¾Œã§ $ rubocop --auto-gen-config ã‚’å®Ÿè¡Œã—ã¦ .rubocop_todo.yml ã‚’å†ä½œæˆã—ã¦ã„ã¾ã™ã€‚ RuboCop ã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ãŒå¤‰ã‚ã£ãŸæ™‚ã¨ã‹ã« .rubocop_todo.yml ã«å‡ºåŠ›ã•ã‚Œã‚‹å†…å®¹ã‚‚è‹¥å¹²å¤‰ã‚ã£ã¦ã„ãŸã‚Šã™ã‚‹ã®ã§ã™ãŒã€æ¯å›æœ€æ–°ã®çŠ¶æ…‹ã«ä½œã‚Šç›´ã—ã¦ãã‚Œã‚‹ã®ãŒã¡ã‚‡ã£ã¨ä¾¿åˆ©ã ã£ãŸã‚Šã—ã¾ã™ã€‚ã¡ãªã¿ã« PR ã® Description ã«è¡¨ç¤ºã•ã‚Œã¦ã„ã‚‹å†…å®¹ã¯ æœ¬å®¶ RuboCop ã® RubyDoc ã«è¨˜è¼‰ã•ã‚Œã¦ã„ã‚‹å†…å®¹ã¨åŒã˜ã‚‚ã®ã§ã™ã€‚ã“ã‚Œã‚’è¡¨ç¤ºã™ã‚‹ã®ã«åœ°å‘³ã«è‹¦åŠ´ã—ã¾ã—ãŸ ğŸ˜“é«˜åº¦ãªè¨­å®šRubocopChallnger ã«ã¯ã„ãã¤ã‹ã‚ªãƒ—ã‚·ãƒ§ãƒ³ãŒç”¨æ„ã•ã‚Œã¦ã„ã‚‹ã®ã§ã€ã”ç´¹ä»‹ã—ã¾ã™ã€‚--modeä¸Šè¿°ã®é€šã‚Šã€ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã§ã¯ auto-correct ã®å¯¾è±¡ã¯ Cop supports --auto-correct ã‹ã¤ Offense count ãŒæœ€å¤§ ã®ãƒ«ãƒ¼ãƒ«ãŒé¸æŠã•ã‚Œã¾ã™ãŒã€ mode ã«æ¸¡ã™å€¤ã«ã‚ˆã£ã¦å¯¾è±¡ã‚’å¤‰æ›´ã™ã‚‹ã“ã¨ãŒå‡ºæ¥ã¾ã™ã€‚most_occurrence (ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆ)Offense count ãŒæœ€å¤§ ã®ãƒ«ãƒ¼ãƒ«ã‚’é¸æŠã™ã‚‹least_occurrenceOffense count ãŒæœ€å° ã®ãƒ«ãƒ¼ãƒ«ã‚’é¸æŠã™ã‚‹randomå…¨ä½“ã‹ã‚‰ãƒ©ãƒ³ãƒ€ãƒ ã«é¸æŠã™ã‚‹ä½¿ç”¨ä¾‹$ bundle exec rubocop_challenger go \\    --email=rubocop-challenger@example.com \\    --name=\"Rubocop Challenger\" \\    --mode=random --labelsRubocopChallnger ãŒä½œæˆã™ã‚‹ PR ã«ä»˜ä¸ã•ã‚Œã‚‹ label ã‚’æŒ‡å®šã—ã¾ã™ã€‚ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã§ã¯ rubocop challenge ã¨ã„ã†ãƒ©ãƒ™ãƒ«ãŒä»˜ä¸ã•ã‚Œã¾ã™ã€‚ã‚½ãƒ¼ã‚·ãƒ£ãƒ«PLUS ã§ã¯ waffle.io ã‚’åˆ©ç”¨ã—ã¦ã„ãŸã‚Šã™ã‚‹ã®ã§ã™ãŒã€ãƒ¬ãƒ“ãƒ¥ãƒ¼å¾…ã¡çŠ¶æ…‹ã® label ã‚’ä»˜ä¸ã™ã‚‹ã‚ˆã†ã«ã™ã‚‹ã¨è¦‹è½ã¨ã—ãŒãªãã¦ä¾¿åˆ©ã§ã™ã€‚ã‚¹ãƒšãƒ¼ã‚¹åŒºåˆ‡ã‚Šã§è¤‡æ•°æŒ‡å®šã™ã‚‹ã“ã¨ãŒå‡ºæ¥ã¾ã™ã€‚ä½¿ç”¨ä¾‹$ bundle exec rubocop_challenger go \\    --email=rubocop-challenger@example.com \\    --name=\"Rubocop Challenger\" \\    --labels=\"rubocop challenge\" \"in progress\"--templateä½œæˆã•ã‚Œã‚‹ PR ã‚’ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚ºã—ãŸã„å ´åˆãªã©ã‚ã‚‹ã‹ã¨æ€ã„ã¾ã™ã€‚ãã®å ´åˆã¯ template ã« erb ãƒ•ã‚¡ã‚¤ãƒ«ã®ãƒ‘ã‚¹ã‚’æŒ‡å®šã™ã‚‹ã“ã¨ãŒå¯èƒ½ã§ã™ã€‚ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã§ã¯ä»¥ä¸‹ã®ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆãŒä½¿ç”¨ã•ã‚Œã‚‹ã®ã§ã€å¿…è¦ã«å¿œã˜ã¦ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚ºã—ã¦ã”åˆ©ç”¨ä¸‹ã•ã„ ğŸ™https://github.com/ryz310/rubocop_challenger/blob/master/lib/templates/default.md.erbä½¿ç”¨ä¾‹$ bundle exec rubocop_challenger go \\    --email=rubocop-challenger@example.com \\    --name=\"Rubocop Challenger\" \\    --template=./path/to/template.md.erb--no-regenerate-rubocop-todoä¸Šè¿°ã®é€šã‚Šã€ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã§ã¯ auto-correct ã®å¾Œã§ $ rubocop --auto-gen-config ã‚’å®Ÿè¡Œã—ã¦ .rubocop_todo.yml ã‚’å†ä½œæˆã—ã¦ã„ã¾ã™ã€‚ã“ã‚ŒãŒä¸è¦ãªå ´åˆã¯ no-regenerate-rubocop-todo ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã‚’æŒ‡å®šã—ã¾ã™ã€‚ä½¿ç”¨ä¾‹$ bundle exec rubocop_challenger go \\    --email=rubocop-challenger@example.com \\    --name=\"Rubocop Challenger\" \\    --no-regenerate-rubocop-todoæ—¢çŸ¥ã®ä¸å…·åˆ (v1.2.0 ã§è§£æ¶ˆæ¸ˆã¿)RuboCop ã®ãƒ«ãƒ¼ãƒ«ã®ä¸­ã«ã¯ Cop supports --auto-correct ã¨è¡¨è¨˜ã•ã‚Œã¦ã„ã‚‹ã«ã‚‚é–¢ã‚ã‚‰ãšã€éƒ¨åˆ†çš„ã«ã—ã‹ auto-correct ã—ã¦ãã‚Œãªã„ã‚‚ã®ãŒã‚ã‚Šã¾ã™ã€‚ä¾‹ãˆã° Style/Semicolon ãŒ auto-correct ã§ãã‚‹ã®ã¯è¡Œæœ«ã« ; ãŒå­˜åœ¨ã™ã‚‹å ´åˆã ã‘ã®ã‚ˆã†ã§ã™ã€‚puts 'hoge'; # =\u003e auto-correct ã•ã‚Œã‚‹puts 'fuga'; puts 'piyo' # =\u003e auto-correct ã•ã‚Œãªã„ã“ã®ã‚ˆã†ãªãƒ«ãƒ¼ãƒ«ãŒ auto-correct å¯¾è±¡ã«é¸ã°ã‚Œã‚‹ã¨ã€RubocopChallenger ã‚’å®Ÿè¡Œã—ãŸå¾Œã‚‚é•åãŒè§£æ±ºã•ã‚Œãšã€å¾Œç¶šã® $ rubocop --auto-gen-config ã§å†åº¦ .rubocop_todo.yml ã«å¯¾è±¡ãƒ«ãƒ¼ãƒ«ãŒå‡ºã¦ãã¦ã—ã¾ã†ã®ã§ã€ RubocopChallenger ãŒæ©Ÿèƒ½ã—ãªã„çŠ¶æ…‹ã«ãªã£ã¦ã—ã¾ã„ã¾ã™ã€‚ç¾çŠ¶ã§ã¯ Style/Semicolon ã®ã‚ˆã†ãªãƒ«ãƒ¼ãƒ«ã«é­é‡ã—ãŸå ´åˆã¯ã€æ‰‹å‹•ã§ .rubocop.yml ã«ãƒ«ãƒ¼ãƒ«ã‚’ç§»å‹•ã•ã›ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚ä»Šã®ã¨ã“ã‚ RubocopChallenger å´ã§ã®å¯¾ç­–ã‚’æ€ã„ä»˜ã„ã¦ã„ãªã„ã®ã§ã€ã‚‚ã—è‰¯ã„ã‚¢ã‚¤ãƒ‡ã‚¢ãŒã‚ã‚Šã¾ã—ãŸã‚‰æ•™ãˆã¦ä¸‹ã•ã„ ğŸ™2019/03/26 è¿½è¨˜RubocopChallenger v1.2.0 ã§ Ignore ãƒªã‚¹ãƒˆæ©Ÿèƒ½ãŒè¿½åŠ ã•ã‚Œã¾ã—ãŸã€‚RubocopChallenger ã‚’å®Ÿè¡Œã—ãŸå¾Œã‚‚é•åãŒè§£æ±ºã•ã‚Œãšã€å¾Œç¶šã® $ rubocop --auto-gen-config ã§å†åº¦ .rubocop_todo.yml ã«å¯¾è±¡ãƒ«ãƒ¼ãƒ«ãŒå‡ºã¦ãã¦ã—ã¾ã£ãŸå ´åˆã€ .rubocop_challenger.yml ã¨ã„ã†ãƒ•ã‚¡ã‚¤ãƒ«ãŒä½œæˆã•ã‚Œã€å¯¾è±¡ãƒ«ãƒ¼ãƒ«ãŒ Ignore ãƒªã‚¹ãƒˆã«è¿½åŠ ã•ã‚Œã¾ã™ã€‚Ignore ãƒªã‚¹ãƒˆã«è¿½åŠ ã•ã‚ŒãŸãƒ«ãƒ¼ãƒ«ã¯æ¬¡å›ä»¥é™ã€ RubocopChallenger ã®å¯¾è±¡ãƒ«ãƒ¼ãƒ«ã¨ã—ã¦é¸æŠã•ã‚Œãªããªã‚‹ã®ã§ã€ç‰¹ã«ä½•ã‚‚ã—ãªãã¨ã‚‚é‹ç”¨ã‚’ç¶šã‘ã‚‹ã“ã¨ãŒå¯èƒ½ã¨ãªã‚Šã¾ã™ã€‚æœ€å¾Œã«å½“åˆã¯ 1669 è¡Œ 195 ç¨®é¡ ã®é•åãƒ«ãƒ¼ãƒ«ãŒ .rubocop_todo.yml ã«å­˜åœ¨ã—ã¦ã„ã¾ã—ãŸãŒã€ RubocopChallenger ã‚’å°å…¥ã—ã¦ã‹ã‚‰ 3 ãƒ¶æœˆã§ 1187 è¡Œ 132 ç¨®é¡ ã¾ã§æ¸›ã‚‰ã™ã“ã¨ãŒå‡ºæ¥ã¾ã—ãŸã€‚ auto-correct å¯èƒ½ãªé•åãƒ«ãƒ¼ãƒ«ã¯ã‚ã¨ 62 ç¨®é¡æ®‹ã£ã¦ã„ã‚‹ã®ã§ã€ã‚ã¨åŠåˆ†ãã‚‰ã„ã¾ã§ã¯æ¸›ã‚‰ã™ã“ã¨ãŒã§ããã†ã§ã™ã€‚æœ¬è¨˜äº‹ã§ã¯è‚¥å¤§åŒ–ã—ã¦ã—ã¾ã£ãŸ .rubocop_todo.yml ã‚’è‡ªå‹•çš„ã«ä¿®æ­£ã—ã¦ã„ã RubocopChallnger ã‚’ç´¹ä»‹ã—ã€å°å…¥æ–¹æ³•ã«ã¤ã„ã¦è§£èª¬ã•ã›ã¦é ‚ãã¾ã—ãŸã€‚ .rubocop_todo.yml ãŒè‚¥å¤§åŒ–ã—ã¦å›°ã£ã¦ã„ã‚‹ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã§å½¹ç«‹ã¦ã¦é ‚ã‘ã‚Œã°å¹¸ã„ã§ã™ ğŸ™ã¾ãŸã€åˆ©ç”¨ã—ã¦ã¿ã¦ãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯ãªã©ã‚ã‚Œã° Issue ã«ã¦ã”é€£çµ¡ä¸‹ã•ã„ã€‚ GitHub ã§ã¯é ‘å¼µã£ã¦æ‹™ã„è‹±èªã‚’æ›¸ãã‚ˆã†ã«ã—ã¦ã„ã¾ã™ãŒã€æ—¥æœ¬èªã§ã‚‚å¤§ä¸ˆå¤«ã§ã™ ğŸ™† PR ã‚‚å¤§æ­“è¿ã§ã™ã€‚ã©ã†ãå®œã—ããŠé¡˜ã„è‡´ã—ã¾ã™ ğŸ™‡ã¡ãªã¿ã«å°å…¥ã—ãŸã®ã¯è‡ªåˆ†ã§ã™â†©","link":"https://developer.feedforce.jp/entry/2018/12/05/140000","isoDate":"2018-12-05T05:00:00.000Z","dateMiliSeconds":1543986000000,"imageUrl":"https://github.com/ryz310/rubocop_challenger/raw/master/images/generate_token.png","authorName":"ryz310"},{"title":"10 åˆ†ã§ã‚ã‹ã‚‹ Ruby Guild","content":"\u003cp\u003eã©ã†ã‚‚ã€ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢ã®ã‚µãƒˆã‚¦ãƒªãƒ§ã‚¦ã‚¹ã‚±ã§ã™ âœŒï¸('Ï‰')âœŒï¸\u003c/p\u003e\n\n\u003cp\u003eRubyKaigi 2018 ã‹ã‚‰æ—© 3 é€±é–“ã€‚ã“ã®è¨˜äº‹ã‚’èª­ã‚“ã§ã„ã‚‹æ–¹ã§ã‚‚å‚åŠ ã•ã‚ŒãŸæ–¹ãŒæ²¢å±±ã„ã‚‹ã®ã§ã¯ãªã„ã‹ã¨æ€ã„ã¾ã™ã€‚\nå€‹äººçš„ãªæ„Ÿæƒ³ã§ã™ãŒã€ä»Šå¹´ã¯ä¾‹å¹´ä»¥ä¸Šã«å……å®Ÿã—ã¦ã„ãŸã‚“ã˜ã‚ƒãªã„ã‹ãªã€ã¨å¤§æº€è¶³ã§ã™âœ¨\u003c/p\u003e\n\n\u003cp\u003eæ„Ÿæƒ³è¨˜äº‹ã¯ã“ã¡ã‚‰ã®è¨˜äº‹ã«è©³ã—ãã¾ã¨ã‚ã‚‰ã‚Œã¦ã„ã¾ã™ã€‚\u003c/p\u003e\n\n\u003cp\u003e\u003ciframe src=\"https://hatenablog-parts.com/embed?url=https%3A%2F%2Fdeveloper.feedforce.jp%2Fentry%2F2018%2F06%2F22%2F141314\" title=\"RubyKaigi 2018 ã«è¡Œã£ã¦ããŸã®ã§ä»Šæ›´æ‰€æ„Ÿãªã©ã‚’ã¾ã¨ã‚ã¾ã—ãŸ - Feedforce Developer Blog\" class=\"embed-card embed-blogcard\" scrolling=\"no\" frameborder=\"0\" style=\"display: block; width: 100%; height: 190px; max-width: 500px; margin: 10px 0px;\"\u003e\u003c/iframe\u003e\u003ccite class=\"hatena-citation\"\u003e\u003ca href=\"https://developer.feedforce.jp/entry/2018/06/22/141314\"\u003edeveloper.feedforce.jp\u003c/a\u003e\u003c/cite\u003e\u003c/p\u003e\n\n\u003cp\u003eã•ã¦ã€ä»Šå›ã® RubyKaigi ã®ç™ºè¡¨ã§ã¯ç¬¹ç”°ã•ã‚“ã‹ã‚‰ Guild ã®é€²æ—ã«ã¤ã„ã¦ã®ç™ºè¡¨ãŒã‚ã‚Šã¾ã—ãŸã€‚\u003c/p\u003e\n\n\u003cp\u003e\u003ca href=\"http://www.atdot.net/~ko1/activities/2018_rubykaigi2018.pdf\"\u003e\u003cimg src=\"https://cdn-ak.f.st-hatena.com/images/fotolife/r/ryz310/20180621/20180621190557.png\" alt=\"Guild Prototype\" /\u003e\u003c/a\u003e\u003c/p\u003e\n\n\u003cp\u003eã“ã® Guild ã®æ¦‚è¦ã«ã¤ã„ã¦ç¤¾å†…ã®ãƒ¡ãƒ³ãƒãƒ¼ã«è§£èª¬ã—ãŸã¨ã“ã‚ä¸­ã€…ã«å¥½è©•ã ã£ãŸã®ã§ã€ä»Šå›ã®è¨˜äº‹ã§ã¯ Guild ã¨ã¯ã©ã†ã„ã†ã‚‚ã®ãªã®ã‹ã‚’è¶…ã–ã£ãã‚Šã§ã™ãŒã”ç´¹ä»‹ã—ã¾ã™ã€‚\u003c/p\u003e\n\n\u003cul class=\"table-of-contents\"\u003e\n    \u003cli\u003e\u003ca href=\"#ãã‚‚ãã‚‚è«–ãªãœ-Guild-ãŒå¿…è¦ãªã®ã‹\"\u003eãã‚‚ãã‚‚è«–ã€‚ãªãœ Guild ãŒå¿…è¦ãªã®ã‹ï¼Ÿ\u003c/a\u003e\u003c/li\u003e\n    \u003cli\u003e\u003ca href=\"#Guild-ã¨-Thread-ã®é–¢ä¿‚\"\u003eGuild ã¨ Thread ã®é–¢ä¿‚\u003c/a\u003e\u003c/li\u003e\n    \u003cli\u003e\u003ca href=\"#Guild-é–“ã®ãƒ‡ãƒ¼ã‚¿ã®å—ã‘æ¸¡ã—\"\u003eGuild é–“ã®ãƒ‡ãƒ¼ã‚¿ã®å—ã‘æ¸¡ã—\u003c/a\u003e\u003c/li\u003e\n    \u003cli\u003e\u003ca href=\"#ãŠã‚ã‚Šã«\"\u003eãŠã‚ã‚Šã«\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\n\u003ch1 id=\"ãã‚‚ãã‚‚è«–ãªãœ-Guild-ãŒå¿…è¦ãªã®ã‹\"\u003eãã‚‚ãã‚‚è«–ã€‚ãªãœ Guild ãŒå¿…è¦ãªã®ã‹ï¼Ÿ\u003c/h1\u003e\n\n\u003cp\u003eã”å­˜çŸ¥ã®æ–¹ã‚‚å¤šã„ã‹ã¨æ€ã„ã¾ã™ãŒã€ç¾åœ¨ã® Ruby ã®ã‚¹ãƒ¬ãƒƒãƒ‰å‡¦ç†ã¯ãƒãƒ«ãƒã‚³ã‚¢ã«å¯¾å¿œã—ã¦ã„ã¾ã›ã‚“ã€‚\næœ€è¿‘ã® PC ã®æ®†ã©ã«ã¯ãƒãƒ«ãƒã‚³ã‚¢ CPU ãŒæ­è¼‰ã•ã‚Œã¦ã„ã‚‹ã¨æ€ã„ã¾ã™ãŒã€ï¼‘ã¤ã® Ruby ãƒ—ãƒ­ã‚»ã‚¹ãŒåˆ©ç”¨ã§ãã‚‹ã‚³ã‚¢ã¯ï¼‘ã¤ã ã‘ã§ã™ã€‚ã¤ã¾ã‚Šã€ä¸¦åˆ—å‡¦ç†ã¨è¨€ã£ã¦ã‚‚è¤‡æ•°ã®å‡¦ç†ã‚’æ™‚é–“åˆ†å‰²ã—ã¦å®Ÿè¡Œã—ã¦ã„ã‚‹ã ã‘ã¨ã„ã†äº‹ã«ãªã‚Šã¾ã™ã€‚ Guild ã¯ Ruby ã§ãƒãƒ«ãƒã‚³ã‚¢ã‚’ä½¿ã£ãŸä¸¦åˆ—å‡¦ç†ã‚’å®Ÿç¾ã™ã‚‹ãŸã‚ã«å¿…è¦ãªæ©Ÿèƒ½ã¨ãªã‚Šã¾ã™ã€‚\u003c/p\u003e\n\n\u003cp\u003eã¡ãªã¿ã« Guild ã¨ã„ã†åç§°ã¯ã‚ãã¾ã§ã‚³ãƒ¼ãƒ‰ãƒãƒ¼ãƒ ã§ã‚ã‚‹ãŸã‚ã€ãƒªãƒªãƒ¼ã‚¹æ™‚ã«ã¯åˆ¥ã®åç§°ã«ãªã‚‹ã¨æ€ã‚ã‚Œã¾ã™ã€‚\u003c/p\u003e\n\n\u003ch1 id=\"Guild-ã¨-Thread-ã®é–¢ä¿‚\"\u003eGuild ã¨ Thread ã®é–¢ä¿‚\u003c/h1\u003e\n\n\u003cp\u003e\u003cspan itemscope itemtype=\"http://schema.org/Photograph\"\u003e\u003cimg src=\"https://cdn-ak.f.st-hatena.com/images/fotolife/r/ryz310/20180621/20180621191002.png\" alt=\"f:id:ryz310:20180621191002p:plain\" title=\"f:id:ryz310:20180621191002p:plain\" class=\"hatena-fotolife\" itemprop=\"image\"\u003e\u003c/span\u003e\u003c/p\u003e\n\n\u003cp\u003eä¸Šå›³ã®ã‚ˆã†ã« Guild ã« Thread ãŒå†…åŒ…ã•ã‚Œã‚‹é–¢ä¿‚ã«ãªã‚Šã€ãƒ—ãƒ­ã‚»ã‚¹å…¨ä½“ã§ã„ã†ã¨ \u003ccode\u003eRubyVM â†’ Guild â†’ Thread â†’ Fiber\u003c/code\u003e ã¨ã„ã†é–¢ä¿‚ã«ãªã‚Šã¾ã™ã€‚\nã“ã‚Œã‚’è¸ã¾ãˆã¦ã€ Guild å°å…¥ã®å‰å¾Œã‚’å›³ã«èµ·ã“ã™ã¨ä»¥ä¸‹ã®ã‚ˆã†ã«ãªã‚Šã¾ã™ï¼ˆé›‘ãªå›³ã§æç¸®ã§ã™ã€‚ã€‚ğŸ™‡ï¼‰\u003c/p\u003e\n\n\u003cp\u003e\u003cspan itemscope itemtype=\"http://schema.org/Photograph\"\u003e\u003cimg src=\"https://cdn-ak.f.st-hatena.com/images/fotolife/r/ryz310/20180621/20180621183710.jpg\" alt=\"f:id:ryz310:20180621183710j:plain\" title=\"f:id:ryz310:20180621183710j:plain\" class=\"hatena-fotolife\" itemprop=\"image\"\u003e\u003c/span\u003e\u003c/p\u003e\n\n\u003cp\u003eåŒä¸€ Guild å†…ã® Thread ã¯å¾“æ¥ã©ãŠã‚Šã‚·ãƒ³ã‚°ãƒ«ã‚³ã‚¢ã§å‹•ä½œã—ã¾ã™ã€‚ã—ã‹ã—ã€ Guild ã‚’è¤‡æ•°å®šç¾©ã™ã‚‹ã“ã¨ã§ã€ãã‚Œãã‚Œã® Guild ã«æ‰€å±ã™ã‚‹ Thread ã¯ä¸¦åˆ—ã«å‹•ä½œã™ã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã™ã€‚\nGuild ãŒå®Ÿè£…ã•ã‚Œã¦ã„ãªã„ç¾åœ¨ã® Ruby ã¯ \u003ccode\u003eRubyVM â†’ Thread â†’ Fiber\u003c/code\u003e ã¨ã„ã†é–¢ä¿‚ã«ãªã‚Šã¾ã™ãŒã€è¨€ã„æ›ãˆã‚Œã°ã“ã‚Œã¯å˜ä¸€ã® Guild ã§ä½œã‚‰ã‚ŒãŸ Ruby ãƒ—ãƒ­ã‚°ãƒ©ãƒ ã¨ã¿ãªã›ã‚‹ã¨æ€ã„ã¾ã™ã€‚\nã“ã®ã“ã¨ã‹ã‚‰ã€Guild ãŒå®Ÿè£…ã•ã‚Œã¦ã‚‚å¾Œæ–¹äº’æ›æ€§ã¯ä¿ãŸã‚Œã‚‹ã®ã§ã¯ãªã„ã‹äºˆæƒ³ã•ã‚Œã¾ã™ã€‚\u003c/p\u003e\n\n\u003ch1 id=\"Guild-é–“ã®ãƒ‡ãƒ¼ã‚¿ã®å—ã‘æ¸¡ã—\"\u003eGuild é–“ã®ãƒ‡ãƒ¼ã‚¿ã®å—ã‘æ¸¡ã—\u003c/h1\u003e\n\n\u003cp\u003eGuild é–“ã§ã®ãƒ‡ãƒ¼ã‚¿å—ã‘æ¸¡ã—ã«ã¤ã„ã¦ã€ Shareable Object ã¨ Non-Shareable Object ã¨ã„ã†æ¦‚å¿µãŒå‡ºã¦ãã¾ã™ã€‚\nè©³ç´°ã¯ \u003ca href=\"http://www.atdot.net/~ko1/activities/2018_rubykaigi2018.pdf\"\u003eç™ºè¡¨ã‚¹ãƒ©ã‚¤ãƒ‰\u003c/a\u003e ã‚’è¦‹ã¦ã‚‚ã‚‰ã†ã¨ã—ã¦ã€å¤§é›‘æŠŠã«ä¸¡è€…ã®é•ã„ã‚’èª¬æ˜ã™ã‚‹ã¨ä»¥ä¸‹ã®ã‚ˆã†ã«ãªã‚Šã¾ã™ã€‚\u003c/p\u003e\n\n\u003cul\u003e\n\u003cli\u003eShareable Object\n\n\u003cul\u003e\n\u003cli\u003eGuild é–“ã§ãƒ‡ãƒ¼ã‚¿å…±æœ‰ãŒå¯èƒ½ãªã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆ\u003c/li\u003e\n\u003cli\u003eåŸºæœ¬çš„ã«å€¤ãŒå¤‰åŒ–ã—ãªã„ Immutable ãªãƒ‡ãƒ¼ã‚¿ãŒã“ã‚Œã«è©²å½“ã™ã‚‹\n\n\u003cul\u003e\n\u003cli\u003eConst ã‚„ Freeze ã—ãŸãƒ‡ãƒ¼ã‚¿ã®ã“ã¨\u003c/li\u003e\n\u003cli\u003eãŸã ã— Array ã‚„ Hash ã¯ Freeze ã—ã¦ã‚‚å†…å´ã®ãƒ‡ãƒ¼ã‚¿ã¾ã§ Freeze ã•ã‚Œãªã„ã®ã§ã€ Shareable ã¨ã¯ãªã‚‰ãªã„ã®ã§æ³¨æ„\n\n\u003cul\u003e\n\u003cli\u003eã“ã‚Œã«ã¤ã„ã¦ã¯ Deep Freeze ã‚’å®Ÿè£…ã™ã‚‹ã‹ã‚‚ã€ã¨ã®ã“ã¨ã€‚\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003eä»–ã«ã‚‚ Isolated Proc ã¨ã„ã†ã€ãƒ–ãƒ­ãƒƒã‚¯ã®å¤–å´ã®å¤‰æ•°ã¸ã®ã‚¢ã‚¯ã‚»ã‚¹ã‚’ç¦æ­¢ã—ãŸ Proc ã‚‚ã“ã‚Œã«è©²å½“ã—ã¾ã™ãŒã€è©³ç´°ã¯å‰²æ„›\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003eNon-Shareable Object\n\n\u003cul\u003e\n\u003cli\u003eGuild é–“ã§ãƒ‡ãƒ¼ã‚¿å…±æœ‰ãŒç¦æ­¢ã•ã‚Œã¦ã„ã‚‹ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆ\n\n\u003cul\u003e\n\u003cli\u003eãƒ‡ãƒ¼ã‚¿ã®å—ã‘æ¸¡ã—ãŒã§ããªã„è¨³ã§ã¯ãªã„ï¼ˆè©³ã—ãã¯å¾Œè¿°ï¼‰\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003eä¸»ã«ä¸€èˆ¬çš„ãªå¤‰æ•°ã®ã“ã¨\u003c/li\u003e\n\u003cli\u003eå˜ä¸€ã® Guild ã«ã®ã¿æ‰€å±ã™ã‚‹\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\n\n\u003cp\u003eShareable Object ã¯ Immutable (å€¤ãŒå¤‰åŒ–ã—ãªã„)ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆãªã®ã§ã€ä¸¦åˆ—å‡¦ç†ä¸­ã«ãƒ‡ãƒ¼ã‚¿ã‚’å…±æœ‰ã—ã¦ã‚‚å•é¡Œãªã„ã“ã¨ã¯ã‚¤ãƒ¡ãƒ¼ã‚¸ã—ã‚„ã™ã„ã‹ã¨æ€ã„ã¾ã™ã€‚\né‡è¦ãªã®ã¯ Non-Shareable Object ã®å—ã‘æ¸¡ã—ã§ã€ä»¥ä¸‹ã«ç¤ºã™ 2 ã¤ã®æ–¹æ³•ãŒã‚ã‚Šã¾ã™ã€‚\u003c/p\u003e\n\n\u003cul\u003e\n\u003cli\u003eCOPY\n\n\u003cul\u003e\n\u003cli\u003eãƒ‡ãƒ¼ã‚¿ã‚’ Guild é–“ã§å…±æœ‰ã™ã‚‹ã®ã§ã¯ãªãã€åˆ¥ã® Guild ã«ã‚³ãƒ”ãƒ¼ã—ã¦æ¸¡ã™\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003eMOVE\n\n\u003cul\u003e\n\u003cli\u003eåˆ¥ã® Guild ã«ãƒ‡ãƒ¼ã‚¿ã‚’æ¸¡ã™ã¨ã€å…ƒã® Guild ã‹ã‚‰ã¯è¦‹ãˆãªããªã‚‹\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\n\n\u003cp\u003eCOPY ã¯å‚ç…§æ¸¡ã—ã§ã¯ãªãå®Ÿä½“æ¸¡ã—ãªã®ã§ã€ï¼‘ã¤ã®ãƒ‡ãƒ¼ã‚¿ã«å¯¾ã—ã¦åŒæ™‚ã‚¢ã‚¯ã‚»ã‚¹ã™ã‚‹ã“ã¨ã«ã¯ãªã‚‰ãšã€ Thread-Safe ãªã‚„ã‚Šã¨ã‚Šã«ãªã‚Šã¾ã™ã€‚\nä¸€æ–¹ã® MOVE ã¯ã€ãƒ‡ãƒ¼ã‚¿ã‚’åˆ¥ã® Guild ã«æ¸¡ã™ã¨å…ƒã® Guild ã‹ã‚‰ã¯ã‚¢ã‚¯ã‚»ã‚¹ã§ããªããªã‚‹ã€ã‚«ãƒƒãƒˆã‚¢ãƒ³ãƒ‰ãƒšãƒ¼ã‚¹ãƒˆã®ã‚ˆã†ãªæŒ¯ã‚‹èˆã„ã«ãªã‚Šã¾ã™ã€‚\nã“ã¡ã‚‰ã‚‚åŒæ™‚ã‚¢ã‚¯ã‚»ã‚¹ãŒç™ºç”Ÿã—ãªã„ãŸã‚ã€ Thread-Safe ãªã‚„ã‚Šã¨ã‚Šã«ãªã‚Šã¾ã™ã€‚\u003c/p\u003e\n\n\u003cp\u003eã¡ãªã¿ã« MOVE ã‚ˆã‚Š COPY ãŒåˆ©ç”¨ã•ã‚Œã‚‹ã‚±ãƒ¼ã‚¹ãŒå¤šã„ã ã‚ã†ã¨ã®ã“ã¨ã§ã—ãŸã€‚\u003c/p\u003e\n\n\u003ch1 id=\"ãŠã‚ã‚Šã«\"\u003eãŠã‚ã‚Šã«\u003c/h1\u003e\n\n\u003cp\u003eRubyKaigi 2018 ã§ç™ºè¡¨ã•ã‚ŒãŸ Guild ã«ã¤ã„ã¦è¶…ã–ã£ãã‚Šã¨èª¬æ˜ã—ã¦ã¿ã¾ã—ãŸã€‚é–“é•ã£ã¦ã‚‹ã¨ã“ã‚ãŒã‚ã‚Œã°ã”æŒ‡æ‘˜é ‚ã‘ã¾ã™ã¨å¹¸ã„ã§ã™ğŸ™\nãªãŠã€é–‹ç™ºä¸­ã®ä»•æ§˜ãªã®ã§å®Ÿè£…ã¾ã§ã«ã„ãã¤ã‹ã®å¤‰æ›´ãŒã‚ã‚‹ã‹ã‚‚ã—ã‚Œã¾ã›ã‚“ã€‚\u003c/p\u003e\n\n\u003cp\u003eæƒ³åƒã§ã™ãŒã€ Sidekiq ã¨ã‹ Puma ã®ã‚ˆã†ãª Thread ãƒ™ãƒ¼ã‚¹ã®ã‚µãƒ¼ãƒ“ã‚¹ã¯ Guild ãŒå°å…¥ã•ã‚ŒãŸã‚‰åŠ‡çš„ã«ãƒ‘ãƒ•ã‚©ãƒ¼ãƒ³ã‚¹ãŒè‰¯ããªã‚‹ã‹ã‚‚ã—ã‚Œã¾ã›ã‚“ã­ã€‚\nã“ã‚Œã‹ã‚‰ã® Ruby ã®å¯èƒ½æ€§ã«æœŸå¾…ãŒé«˜ã¾ã‚Šã¾ã™âœ¨\u003c/p\u003e\n","contentSnippet":"ã©ã†ã‚‚ã€ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢ã®ã‚µãƒˆã‚¦ãƒªãƒ§ã‚¦ã‚¹ã‚±ã§ã™ âœŒï¸('Ï‰')âœŒï¸RubyKaigi 2018 ã‹ã‚‰æ—© 3 é€±é–“ã€‚ã“ã®è¨˜äº‹ã‚’èª­ã‚“ã§ã„ã‚‹æ–¹ã§ã‚‚å‚åŠ ã•ã‚ŒãŸæ–¹ãŒæ²¢å±±ã„ã‚‹ã®ã§ã¯ãªã„ã‹ã¨æ€ã„ã¾ã™ã€‚å€‹äººçš„ãªæ„Ÿæƒ³ã§ã™ãŒã€ä»Šå¹´ã¯ä¾‹å¹´ä»¥ä¸Šã«å……å®Ÿã—ã¦ã„ãŸã‚“ã˜ã‚ƒãªã„ã‹ãªã€ã¨å¤§æº€è¶³ã§ã™âœ¨æ„Ÿæƒ³è¨˜äº‹ã¯ã“ã¡ã‚‰ã®è¨˜äº‹ã«è©³ã—ãã¾ã¨ã‚ã‚‰ã‚Œã¦ã„ã¾ã™ã€‚developer.feedforce.jpã•ã¦ã€ä»Šå›ã® RubyKaigi ã®ç™ºè¡¨ã§ã¯ç¬¹ç”°ã•ã‚“ã‹ã‚‰ Guild ã®é€²æ—ã«ã¤ã„ã¦ã®ç™ºè¡¨ãŒã‚ã‚Šã¾ã—ãŸã€‚ã“ã® Guild ã®æ¦‚è¦ã«ã¤ã„ã¦ç¤¾å†…ã®ãƒ¡ãƒ³ãƒãƒ¼ã«è§£èª¬ã—ãŸã¨ã“ã‚ä¸­ã€…ã«å¥½è©•ã ã£ãŸã®ã§ã€ä»Šå›ã®è¨˜äº‹ã§ã¯ Guild ã¨ã¯ã©ã†ã„ã†ã‚‚ã®ãªã®ã‹ã‚’è¶…ã–ã£ãã‚Šã§ã™ãŒã”ç´¹ä»‹ã—ã¾ã™ã€‚ãã‚‚ãã‚‚è«–ã€‚ãªãœ Guild ãŒå¿…è¦ãªã®ã‹ï¼ŸGuild ã¨ Thread ã®é–¢ä¿‚Guild é–“ã®ãƒ‡ãƒ¼ã‚¿ã®å—ã‘æ¸¡ã—ãŠã‚ã‚Šã«ãã‚‚ãã‚‚è«–ã€‚ãªãœ Guild ãŒå¿…è¦ãªã®ã‹ï¼Ÿã”å­˜çŸ¥ã®æ–¹ã‚‚å¤šã„ã‹ã¨æ€ã„ã¾ã™ãŒã€ç¾åœ¨ã® Ruby ã®ã‚¹ãƒ¬ãƒƒãƒ‰å‡¦ç†ã¯ãƒãƒ«ãƒã‚³ã‚¢ã«å¯¾å¿œã—ã¦ã„ã¾ã›ã‚“ã€‚æœ€è¿‘ã® PC ã®æ®†ã©ã«ã¯ãƒãƒ«ãƒã‚³ã‚¢ CPU ãŒæ­è¼‰ã•ã‚Œã¦ã„ã‚‹ã¨æ€ã„ã¾ã™ãŒã€ï¼‘ã¤ã® Ruby ãƒ—ãƒ­ã‚»ã‚¹ãŒåˆ©ç”¨ã§ãã‚‹ã‚³ã‚¢ã¯ï¼‘ã¤ã ã‘ã§ã™ã€‚ã¤ã¾ã‚Šã€ä¸¦åˆ—å‡¦ç†ã¨è¨€ã£ã¦ã‚‚è¤‡æ•°ã®å‡¦ç†ã‚’æ™‚é–“åˆ†å‰²ã—ã¦å®Ÿè¡Œã—ã¦ã„ã‚‹ã ã‘ã¨ã„ã†äº‹ã«ãªã‚Šã¾ã™ã€‚ Guild ã¯ Ruby ã§ãƒãƒ«ãƒã‚³ã‚¢ã‚’ä½¿ã£ãŸä¸¦åˆ—å‡¦ç†ã‚’å®Ÿç¾ã™ã‚‹ãŸã‚ã«å¿…è¦ãªæ©Ÿèƒ½ã¨ãªã‚Šã¾ã™ã€‚ã¡ãªã¿ã« Guild ã¨ã„ã†åç§°ã¯ã‚ãã¾ã§ã‚³ãƒ¼ãƒ‰ãƒãƒ¼ãƒ ã§ã‚ã‚‹ãŸã‚ã€ãƒªãƒªãƒ¼ã‚¹æ™‚ã«ã¯åˆ¥ã®åç§°ã«ãªã‚‹ã¨æ€ã‚ã‚Œã¾ã™ã€‚Guild ã¨ Thread ã®é–¢ä¿‚ä¸Šå›³ã®ã‚ˆã†ã« Guild ã« Thread ãŒå†…åŒ…ã•ã‚Œã‚‹é–¢ä¿‚ã«ãªã‚Šã€ãƒ—ãƒ­ã‚»ã‚¹å…¨ä½“ã§ã„ã†ã¨ RubyVM â†’ Guild â†’ Thread â†’ Fiber ã¨ã„ã†é–¢ä¿‚ã«ãªã‚Šã¾ã™ã€‚ã“ã‚Œã‚’è¸ã¾ãˆã¦ã€ Guild å°å…¥ã®å‰å¾Œã‚’å›³ã«èµ·ã“ã™ã¨ä»¥ä¸‹ã®ã‚ˆã†ã«ãªã‚Šã¾ã™ï¼ˆé›‘ãªå›³ã§æç¸®ã§ã™ã€‚ã€‚ğŸ™‡ï¼‰åŒä¸€ Guild å†…ã® Thread ã¯å¾“æ¥ã©ãŠã‚Šã‚·ãƒ³ã‚°ãƒ«ã‚³ã‚¢ã§å‹•ä½œã—ã¾ã™ã€‚ã—ã‹ã—ã€ Guild ã‚’è¤‡æ•°å®šç¾©ã™ã‚‹ã“ã¨ã§ã€ãã‚Œãã‚Œã® Guild ã«æ‰€å±ã™ã‚‹ Thread ã¯ä¸¦åˆ—ã«å‹•ä½œã™ã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã™ã€‚Guild ãŒå®Ÿè£…ã•ã‚Œã¦ã„ãªã„ç¾åœ¨ã® Ruby ã¯ RubyVM â†’ Thread â†’ Fiber ã¨ã„ã†é–¢ä¿‚ã«ãªã‚Šã¾ã™ãŒã€è¨€ã„æ›ãˆã‚Œã°ã“ã‚Œã¯å˜ä¸€ã® Guild ã§ä½œã‚‰ã‚ŒãŸ Ruby ãƒ—ãƒ­ã‚°ãƒ©ãƒ ã¨ã¿ãªã›ã‚‹ã¨æ€ã„ã¾ã™ã€‚ã“ã®ã“ã¨ã‹ã‚‰ã€Guild ãŒå®Ÿè£…ã•ã‚Œã¦ã‚‚å¾Œæ–¹äº’æ›æ€§ã¯ä¿ãŸã‚Œã‚‹ã®ã§ã¯ãªã„ã‹äºˆæƒ³ã•ã‚Œã¾ã™ã€‚Guild é–“ã®ãƒ‡ãƒ¼ã‚¿ã®å—ã‘æ¸¡ã—Guild é–“ã§ã®ãƒ‡ãƒ¼ã‚¿å—ã‘æ¸¡ã—ã«ã¤ã„ã¦ã€ Shareable Object ã¨ Non-Shareable Object ã¨ã„ã†æ¦‚å¿µãŒå‡ºã¦ãã¾ã™ã€‚è©³ç´°ã¯ ç™ºè¡¨ã‚¹ãƒ©ã‚¤ãƒ‰ ã‚’è¦‹ã¦ã‚‚ã‚‰ã†ã¨ã—ã¦ã€å¤§é›‘æŠŠã«ä¸¡è€…ã®é•ã„ã‚’èª¬æ˜ã™ã‚‹ã¨ä»¥ä¸‹ã®ã‚ˆã†ã«ãªã‚Šã¾ã™ã€‚Shareable ObjectGuild é–“ã§ãƒ‡ãƒ¼ã‚¿å…±æœ‰ãŒå¯èƒ½ãªã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆåŸºæœ¬çš„ã«å€¤ãŒå¤‰åŒ–ã—ãªã„ Immutable ãªãƒ‡ãƒ¼ã‚¿ãŒã“ã‚Œã«è©²å½“ã™ã‚‹Const ã‚„ Freeze ã—ãŸãƒ‡ãƒ¼ã‚¿ã®ã“ã¨ãŸã ã— Array ã‚„ Hash ã¯ Freeze ã—ã¦ã‚‚å†…å´ã®ãƒ‡ãƒ¼ã‚¿ã¾ã§ Freeze ã•ã‚Œãªã„ã®ã§ã€ Shareable ã¨ã¯ãªã‚‰ãªã„ã®ã§æ³¨æ„ã“ã‚Œã«ã¤ã„ã¦ã¯ Deep Freeze ã‚’å®Ÿè£…ã™ã‚‹ã‹ã‚‚ã€ã¨ã®ã“ã¨ã€‚ä»–ã«ã‚‚ Isolated Proc ã¨ã„ã†ã€ãƒ–ãƒ­ãƒƒã‚¯ã®å¤–å´ã®å¤‰æ•°ã¸ã®ã‚¢ã‚¯ã‚»ã‚¹ã‚’ç¦æ­¢ã—ãŸ Proc ã‚‚ã“ã‚Œã«è©²å½“ã—ã¾ã™ãŒã€è©³ç´°ã¯å‰²æ„›Non-Shareable ObjectGuild é–“ã§ãƒ‡ãƒ¼ã‚¿å…±æœ‰ãŒç¦æ­¢ã•ã‚Œã¦ã„ã‚‹ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆãƒ‡ãƒ¼ã‚¿ã®å—ã‘æ¸¡ã—ãŒã§ããªã„è¨³ã§ã¯ãªã„ï¼ˆè©³ã—ãã¯å¾Œè¿°ï¼‰ä¸»ã«ä¸€èˆ¬çš„ãªå¤‰æ•°ã®ã“ã¨å˜ä¸€ã® Guild ã«ã®ã¿æ‰€å±ã™ã‚‹Shareable Object ã¯ Immutable (å€¤ãŒå¤‰åŒ–ã—ãªã„)ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆãªã®ã§ã€ä¸¦åˆ—å‡¦ç†ä¸­ã«ãƒ‡ãƒ¼ã‚¿ã‚’å…±æœ‰ã—ã¦ã‚‚å•é¡Œãªã„ã“ã¨ã¯ã‚¤ãƒ¡ãƒ¼ã‚¸ã—ã‚„ã™ã„ã‹ã¨æ€ã„ã¾ã™ã€‚é‡è¦ãªã®ã¯ Non-Shareable Object ã®å—ã‘æ¸¡ã—ã§ã€ä»¥ä¸‹ã«ç¤ºã™ 2 ã¤ã®æ–¹æ³•ãŒã‚ã‚Šã¾ã™ã€‚COPYãƒ‡ãƒ¼ã‚¿ã‚’ Guild é–“ã§å…±æœ‰ã™ã‚‹ã®ã§ã¯ãªãã€åˆ¥ã® Guild ã«ã‚³ãƒ”ãƒ¼ã—ã¦æ¸¡ã™MOVEåˆ¥ã® Guild ã«ãƒ‡ãƒ¼ã‚¿ã‚’æ¸¡ã™ã¨ã€å…ƒã® Guild ã‹ã‚‰ã¯è¦‹ãˆãªããªã‚‹COPY ã¯å‚ç…§æ¸¡ã—ã§ã¯ãªãå®Ÿä½“æ¸¡ã—ãªã®ã§ã€ï¼‘ã¤ã®ãƒ‡ãƒ¼ã‚¿ã«å¯¾ã—ã¦åŒæ™‚ã‚¢ã‚¯ã‚»ã‚¹ã™ã‚‹ã“ã¨ã«ã¯ãªã‚‰ãšã€ Thread-Safe ãªã‚„ã‚Šã¨ã‚Šã«ãªã‚Šã¾ã™ã€‚ä¸€æ–¹ã® MOVE ã¯ã€ãƒ‡ãƒ¼ã‚¿ã‚’åˆ¥ã® Guild ã«æ¸¡ã™ã¨å…ƒã® Guild ã‹ã‚‰ã¯ã‚¢ã‚¯ã‚»ã‚¹ã§ããªããªã‚‹ã€ã‚«ãƒƒãƒˆã‚¢ãƒ³ãƒ‰ãƒšãƒ¼ã‚¹ãƒˆã®ã‚ˆã†ãªæŒ¯ã‚‹èˆã„ã«ãªã‚Šã¾ã™ã€‚ã“ã¡ã‚‰ã‚‚åŒæ™‚ã‚¢ã‚¯ã‚»ã‚¹ãŒç™ºç”Ÿã—ãªã„ãŸã‚ã€ Thread-Safe ãªã‚„ã‚Šã¨ã‚Šã«ãªã‚Šã¾ã™ã€‚ã¡ãªã¿ã« MOVE ã‚ˆã‚Š COPY ãŒåˆ©ç”¨ã•ã‚Œã‚‹ã‚±ãƒ¼ã‚¹ãŒå¤šã„ã ã‚ã†ã¨ã®ã“ã¨ã§ã—ãŸã€‚ãŠã‚ã‚Šã«RubyKaigi 2018 ã§ç™ºè¡¨ã•ã‚ŒãŸ Guild ã«ã¤ã„ã¦è¶…ã–ã£ãã‚Šã¨èª¬æ˜ã—ã¦ã¿ã¾ã—ãŸã€‚é–“é•ã£ã¦ã‚‹ã¨ã“ã‚ãŒã‚ã‚Œã°ã”æŒ‡æ‘˜é ‚ã‘ã¾ã™ã¨å¹¸ã„ã§ã™ğŸ™ãªãŠã€é–‹ç™ºä¸­ã®ä»•æ§˜ãªã®ã§å®Ÿè£…ã¾ã§ã«ã„ãã¤ã‹ã®å¤‰æ›´ãŒã‚ã‚‹ã‹ã‚‚ã—ã‚Œã¾ã›ã‚“ã€‚æƒ³åƒã§ã™ãŒã€ Sidekiq ã¨ã‹ Puma ã®ã‚ˆã†ãª Thread ãƒ™ãƒ¼ã‚¹ã®ã‚µãƒ¼ãƒ“ã‚¹ã¯ Guild ãŒå°å…¥ã•ã‚ŒãŸã‚‰åŠ‡çš„ã«ãƒ‘ãƒ•ã‚©ãƒ¼ãƒ³ã‚¹ãŒè‰¯ããªã‚‹ã‹ã‚‚ã—ã‚Œã¾ã›ã‚“ã­ã€‚ã“ã‚Œã‹ã‚‰ã® Ruby ã®å¯èƒ½æ€§ã«æœŸå¾…ãŒé«˜ã¾ã‚Šã¾ã™âœ¨","link":"https://developer.feedforce.jp/entry/2018/06/25/100000","isoDate":"2018-06-25T01:00:00.000Z","dateMiliSeconds":1529888400000,"imageUrl":"https://cdn-ak.f.st-hatena.com/images/fotolife/r/ryz310/20180621/20180621190557.png","authorName":"ryz310"},{"title":"ç¶šãƒ»Rails 5.2 é–‹ç™ºç’°å¢ƒã‚’ Docker ã§æ§‹ç¯‰ã™ã‚‹","content":"\u003cp\u003eã©ã†ã‚‚ã€ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢ã®ã‚µãƒˆã‚¦ãƒªãƒ§ã‚¦ã‚¹ã‚±ã§ã™ âœŒï¸('Ï‰')âœŒï¸\u003c/p\u003e\n\n\u003cp\u003eå‰å›ã®è¨˜äº‹ã§ã¯ Docker ã‚’ä½¿ã£ã¦ Rails 5.2 ã®ç’°å¢ƒæ§‹ç¯‰ã‚’ã—ã¾ã—ãŸã€‚\nç¾åœ¨ã‚‚å¼•ãç¶šã Docker ã«ã¤ã„ã¦ã®ãŠè©±ã‚’ã—ã¾ã™ã€‚\u003c/p\u003e\n\n\u003cp\u003e\u003ciframe src=\"https://hatenablog-parts.com/embed?url=http%3A%2F%2Fdeveloper.feedforce.jp%2Fentry%2F2018%2F02%2F11%2F140012\" title=\"Rails 5.2 é–‹ç™ºç’°å¢ƒã‚’ Docker ã§æ§‹ç¯‰ã™ã‚‹ - Feedforce Developer Blog\" class=\"embed-card embed-blogcard\" scrolling=\"no\" frameborder=\"0\" style=\"display: block; width: 100%; height: 190px; max-width: 500px; margin: 10px 0px;\"\u003e\u003c/iframe\u003e\u003ccite class=\"hatena-citation\"\u003e\u003ca href=\"http://developer.feedforce.jp/entry/2018/02/11/140012\"\u003edeveloper.feedforce.jp\u003c/a\u003e\u003c/cite\u003e\u003c/p\u003e\n\n\u003cp\u003eãã®å¾Œã‚‚å¹¾ã¤ã‹æ‰‹ã‚’åŠ ãˆç¶šã‘ã¦ãŠã‚Šã¾ã—ã¦ã€ç¾åœ¨ã“ã®è¨˜äº‹ã‚’æ›¸ã„ã¦ã„ã‚‹æ™‚ç‚¹ã§ \u003ccode\u003ev1.3.0\u003c/code\u003e ã«ãªã‚Šã¾ã—ãŸ ğŸ‰\næ˜ã‚‰ã‹ã«åˆå›ã®ãƒŠãƒ³ãƒãƒªãƒ³ã‚°ã‚’é–“é•ãˆã¦ã„ãŸæ„ŸãŒã‚ã‚Šã¾ã™ãŒã€å°‘ã—ãšã¤ã‚¤ãƒ³ã‚¯ãƒªãƒ¡ãƒ³ãƒˆã•ã›ã¦ã„ãæ¥½ã—ã¿ã‚’å®Ÿæ„Ÿã§ãã¦è‰¯ã„ã§ã™ ç¬‘\u003c/p\u003e\n\n\u003ch2\u003eå‰å›ã‹ã‚‰ã®å¤‰æ›´ç‚¹ã«ã¤ã„ã¦\u003c/h2\u003e\n\n\u003cp\u003eã•ã¦ã€å‰å›ã®è¨˜äº‹ã¯ \u003ccode\u003ev1.0.0\u003c/code\u003e æ™‚ç‚¹ã®ã‚‚ã®ã§ã—ãŸãŒã€ã“ã“ã§ \u003ccode\u003ev1.3.0\u003c/code\u003e ã«ãªã£ãŸç¾åœ¨ã® \u003ccode\u003eDockerfile\u003c/code\u003e ã‚’è¦‹ã¦ã¿ã¾ã—ã‚‡ã†ã€‚\u003c/p\u003e\n\n\u003cpre class=\"code\" data-lang=\"\" data-unlink\u003e# Dockerfile\nFROM ryz310/rails-on-docker\u003c/pre\u003e\n\n\n\u003cp\u003eãªã‚“ã¨ï¼ãŸã£ãŸã®ï¼‘è¡Œã½ã£ã¡ã§ã™ï¼ï¼¼ï¼¼\\Ù©( 'Ï‰' )Ùˆ //ï¼ï¼\u003c/p\u003e\n\n\u003cp\u003eä½•è¨€ã£ã¦ã‚“ã ã‚³ã‚¤ãƒ„ã¨æ€ã‚ã‚Œãã†ã§ã™ãŒã€ã“ã‚Œã¯ã©ã†ã„ã†äº‹ã‹ã¨ã„ã†ã¨ã€å¤§éƒ¨åˆ†ã‚’ \u003ccode\u003ebase/Dockerfile\u003c/code\u003e ã«ç§»å‹•ã—ãŸãŸã‚ã§ã™ã€‚\u003c/p\u003e\n\n\u003cpre class=\"code\" data-lang=\"\" data-unlink\u003e# base/Dockerfile\nFROM ruby:2.5\nMAINTAINER ryz310@gmail.com\n\nRUN apt-get update -qq \u0026amp;\u0026amp; apt-get install -y build-essential libpq-dev nodejs\n\nWORKDIR /myapp\nENV BUNDLE_JOBS=32\n\nONBUILD ADD Gemfile /myapp/Gemfile\nONBUILD ADD Gemfile.lock /myapp/Gemfile.lock\nONBUILD RUN bundle install\nONBUILD ADD . /myapp\u003c/pre\u003e\n\n\n\u003cp\u003eã“ã® \u003ccode\u003ebase/Dockerfile\u003c/code\u003e ã®ã‚¤ãƒ¡ãƒ¼ã‚¸ã¯ \u003ca href=\"https://hub.docker.com/r/ryz310/rails-on-docker/\"\u003eåƒ•ã®Docker Hub\u003c/a\u003e ã«ç½®ã„ã¦ã‚ã‚Šã¾ã™ã€‚\u003c/p\u003e\n\n\u003cp\u003e\u003ccode\u003eONBUILD\u003c/code\u003e ãŒä»˜ã„ãŸã‚³ãƒãƒ³ãƒ‰ã¯ã“ã®ã‚¤ãƒ¡ãƒ¼ã‚¸ã‚’ç¶™æ‰¿ã—ãŸã‚¤ãƒ¡ãƒ¼ã‚¸ã§å®Ÿè¡Œã•ã‚Œã‚‹ãŸã‚ã€å…ˆã»ã©ã® \u003ccode\u003eDockerfile\u003c/code\u003e ã«ã¯ \u003ccode\u003eFROM\u003c/code\u003e ã—ã‹ã‚ã‚Šã¾ã›ã‚“ãŒã€ãƒ“ãƒ«ãƒ‰ã®éš›ã«ã¯ä»¥ä¸‹ã® 4 ã¤ã®ã‚³ãƒãƒ³ãƒ‰ãŒå®Ÿè¡Œã•ã‚Œã‚‹äº‹ã«ãªã‚Šã¾ã™ã€‚\u003c/p\u003e\n\n\u003cpre class=\"code\" data-lang=\"\" data-unlink\u003eADD Gemfile /myapp/Gemfile\nADD Gemfile.lock /myapp/Gemfile.lock\nRUN bundle install\nADD . /myapp\u003c/pre\u003e\n\n\n\u003cp\u003eæ„Ÿè¦šã¨ã—ã¦ã¯ã€ \u003ccode\u003ebase/Dockerfile\u003c/code\u003e ã§ Rails ã®èµ·å‹•ã«å¿…è¦ãªã‚µãƒ¼ãƒãƒ¼ç’°å¢ƒã‚’æ§‹ç¯‰ã—ã¦ã€ \u003ccode\u003eDockerfile\u003c/code\u003e ã§ Rails ãã®ã‚‚ã®ã‚’æ§‹ç¯‰ã—ã¦ã„ãã‚ˆã†ãªæ„Ÿã˜ã§ã™ã€‚\nRails ã®æ§‹ç¯‰ã«ã¯ RDS ã‚¤ãƒ¡ãƒ¼ã‚¸ãªã©ã‚‚å¿…é ˆã¨ãªã£ã¦ãã¾ã™ã®ã§ã€ãã‚Œã«ã¤ã„ã¦ã¯ \u003ccode\u003edocker-compose.yml\u003c/code\u003e ã¨çµ„ã¿åˆã‚ã›ã¦æ§‹ç¯‰ã—ã¦ã„ãã¾ã™ã€‚\u003c/p\u003e\n\n\u003cpre class=\"code\" data-lang=\"\" data-unlink\u003e# docker-compose.yml\nversion: \u0026#39;3\u0026#39;\nservices:\n  db:\n    image: mysql:5.7\n    volumes:\n      - mysql_data:/var/lib/mysql\n    environment:\n      MYSQL_ALLOW_EMPTY_PASSWORD: \u0026#39;yes\u0026#39;\n    ports:\n      - \u0026#34;3306:3306\u0026#34;\n  web:\n    build: .\n    image: web_image\n    command: bundle exec rails s -p 3000 -b \u0026#39;0.0.0.0\u0026#39;\n    volumes:\n      - .:/myapp\n      - bundle:/usr/local/bundle\n    ports:\n      - \u0026#34;3000:3000\u0026#34;\n    depends_on:\n      - db\n    environment:\n      DB_HOST: db\n  spring:\n    image: web_image\n    command: bundle exec spring server\n    volumes:\n      - .:/myapp\n      - bundle:/usr/local/bundle\n    tty: false\n    stdin_open: false\n    environment:\n      DB_HOST: db\nvolumes:\n  mysql_data:\n  bundle:\u003c/pre\u003e\n\n\n\u003cp\u003eã“ã“ã‚‚ \u003ccode\u003ev1.0.0\u003c/code\u003e ã®é ƒã‹ã‚‰ã„ãã¤ã‹å¤‰æ›´ãŒã‚ã‚Šã¾ã—ã¦ã€ä¾‹ãˆã° \u003ccode\u003eweb\u003c/code\u003e ã¨ \u003ccode\u003espring\u003c/code\u003e ã§åŒã˜å†…å®¹ã«ãªã‚‹ã‚ˆã†ã« \u003ccode\u003ev1.0.0\u003c/code\u003e ã§ã¯ YAML ã®ã‚¨ã‚¤ãƒªã‚¢ã‚¹ã‚’ä½¿ã£ã¦ã„ãŸã®ã§ã™ãŒã€ docker image ã§å…±æœ‰ã™ã‚‹æ–¹æ³•ã«å¤‰ãˆã¾ã—ãŸã€‚ã“ã®å®šç¾©ã®è¨˜è¿°ã«ã¤ã„ã¦å°‘ã—è£œè¶³ã—ã¾ã™ã€‚\u003c/p\u003e\n\n\u003cp\u003e\u003ccode\u003eweb\u003c/code\u003e ã®å®šç¾©ã§ \u003ccode\u003ebuild: .\u003c/code\u003e ã¨ \u003ccode\u003eimage: web_image\u003c/code\u003e ã¨è¨€ã†è¨˜è¿°ãŒã‚ã‚Šã¾ã™ãŒã€ã“ã‚Œã¯ Dockerfile ã‚’ãƒ“ãƒ«ãƒ‰ã—ã¦ \u003ccode\u003eweb_image\u003c/code\u003e ã¨ã„ã†ã‚¿ã‚°ã‚’ã¤ã‘ã‚‹ã€ã¨è¨€ã†æŒ¯ã‚‹èˆã„ã«ãªã‚Šã¾ã™ã€‚ä¸€æ–¹ã€ \u003ccode\u003espring\u003c/code\u003e ã®å®šç¾©ã® \u003ccode\u003eimage: web_image\u003c/code\u003e ã§ã¯ \u003ccode\u003eweb_image\u003c/code\u003e ã¨ã„ã†ã‚¿ã‚°ãŒä»˜ã„ãŸã‚¤ãƒ¡ãƒ¼ã‚¸ã‚’ä½¿ç”¨ã™ã‚‹ã€ã¨ã„ã†æŒ¯ã‚‹èˆã„ã«ãªã‚Šã¾ã™ã€‚ã“ã®è¾ºã¯ãªã‚“ã ã‹ã‚„ã‚„ã“ã—ã„ã§ã™ã­ ğŸ˜“\u003c/p\u003e\n\n\u003cp\u003eã¾ãŸã€ \u003ccode\u003ebundle:/usr/local/bundle\u003c/code\u003e ã‚’ volume ã«æŒ‡å®šã™ã‚‹äº‹ã§ã€\u003ccode\u003ebundle install\u003c/code\u003e ã®å†…å®¹ã‚’æ°¸ç¶šåŒ–ã™ã‚‹ã‚ˆã†ã«ã—ã¦ã‚ã‚Šã¾ã™ã€‚ã“ã‚Œã«ã‚ˆã‚Šã€\u003ccode\u003e$ docker-compose run --rm web bundle install\u003c/code\u003e ã¨ã„ã†ã‚³ãƒãƒ³ãƒ‰ãŒæœ‰åŠ¹ã«ãªã£ã¦ãã‚‹ã®ã§ã€Gemfile ã‚’æ›´æ–°ã—ãŸéš›ã«ä¸€ã‹ã‚‰ Build ã™ã‚‹å¿…è¦ãŒãªããªã‚Šã¾ã™ã€‚\nåŒæ§˜ã«ã€ MySQL ã‚‚ \u003ccode\u003emysql_data:/var/lib/mysql\u003c/code\u003e ã‚’ volume ã«æŒ‡å®šã™ã‚‹äº‹ã§ã€ãƒ†ãƒ¼ãƒ–ãƒ«ã®å†…å®¹ã‚’æ°¸ç¶šåŒ–ã™ã‚‹ã‚ˆã†ã«ã—ã¦ã„ã¾ã™ã€‚\u003c/p\u003e\n\n\u003ch2\u003eã¾ã¨ã‚\u003c/h2\u003e\n\n\u003cp\u003e\u003ccode\u003eONBUILD\u003c/code\u003e ã‚’ä½¿ç”¨ã™ã‚‹äº‹ã§ã€ä»–ã® Rails ã‚¢ãƒ—ãƒªã§ã‚‚åŒã˜ã‚¤ãƒ¡ãƒ¼ã‚¸ã‚’è»¢ç”¨ã§ãã‚‹ã‚ˆã†ã«ãªã£ãŸã®ãŒä¸€ç•ªã®æ”¹å–„ç‚¹ã§ã¯ãªã„ã‹ã¨æ€ã„ã¾ã™ã€‚\u003c/p\u003e\n\n\u003cp\u003eãŸã ã€Rails ã‚¢ãƒ—ãƒªå´ã®äº‹æƒ…ã§ä½•ã‹ \u003ccode\u003e$ apt-get install\u003c/code\u003e ã‚’åŠ ãˆãŸããªã£ãŸå ´åˆã«ã©ã†ã™ã‚‹ã®ã‹ã€ã¨ã„ã†èª²é¡Œæ„ŸãŒã‚ã‚Šã¾ã™ã€‚\u003ccode\u003ebase/Dockerfile\u003c/code\u003e ã¯æ±ç”¨çš„ãªç’°å¢ƒæ§‹ç¯‰ã‚’æ„è­˜ã—ã¦ã„ã‚‹ã®ã§ã€ã‚ã¾ã‚Šä¸€èˆ¬çš„ã§ãªã„ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã¯è¡Œã„ãŸãã‚ã‚Šã¾ã›ã‚“ã€‚ç†æƒ³ã¨ã—ã¦ã¯ã€Œå­ã‚¤ãƒ¡ãƒ¼ã‚¸ã€ã§ \u003ccode\u003e$ apt-get install\u003c/code\u003e ã•ã›ã¦ã€ã€Œå­«ã‚¤ãƒ¡ãƒ¼ã‚¸ã€ã§ä»Šå›ã®ã‚ˆã†ã« Rails ã®æ§‹ç¯‰ã‚’ã™ã‚‹æ§‹æˆãŒå®Ÿç¾ã§ãã‚Œã°è‰¯ã„ã®ã§ã¯ãªã„ã‹ã¨æ€ã„ã¾ã™ãŒã€ \u003ccode\u003eONBUILD\u003c/code\u003e ã‚’ã€Œå­ã‚¤ãƒ¡ãƒ¼ã‚¸ã€ã§ã‚¹ã‚­ãƒƒãƒ—ã•ã›ã‚‹ã¨ã‹å‡ºæ¥ã‚‹ã‚“ã§ã—ã‚‡ã†ã‹ï¼Ÿ\u003c/p\u003e\n\n\u003cp\u003eæ¬¡å›ã¯ã“ã®è¾ºã«ã¤ã„ã¦å°‘ã—èª¿ã¹ã¦ã„ã‘ã‚Œã°ã€ã¨æ€ã£ã¦ã„ã¾ã™ã€‚\u003c/p\u003e\n","contentSnippet":"ã©ã†ã‚‚ã€ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢ã®ã‚µãƒˆã‚¦ãƒªãƒ§ã‚¦ã‚¹ã‚±ã§ã™ âœŒï¸('Ï‰')âœŒï¸å‰å›ã®è¨˜äº‹ã§ã¯ Docker ã‚’ä½¿ã£ã¦ Rails 5.2 ã®ç’°å¢ƒæ§‹ç¯‰ã‚’ã—ã¾ã—ãŸã€‚ç¾åœ¨ã‚‚å¼•ãç¶šã Docker ã«ã¤ã„ã¦ã®ãŠè©±ã‚’ã—ã¾ã™ã€‚developer.feedforce.jpãã®å¾Œã‚‚å¹¾ã¤ã‹æ‰‹ã‚’åŠ ãˆç¶šã‘ã¦ãŠã‚Šã¾ã—ã¦ã€ç¾åœ¨ã“ã®è¨˜äº‹ã‚’æ›¸ã„ã¦ã„ã‚‹æ™‚ç‚¹ã§ v1.3.0 ã«ãªã‚Šã¾ã—ãŸ ğŸ‰æ˜ã‚‰ã‹ã«åˆå›ã®ãƒŠãƒ³ãƒãƒªãƒ³ã‚°ã‚’é–“é•ãˆã¦ã„ãŸæ„ŸãŒã‚ã‚Šã¾ã™ãŒã€å°‘ã—ãšã¤ã‚¤ãƒ³ã‚¯ãƒªãƒ¡ãƒ³ãƒˆã•ã›ã¦ã„ãæ¥½ã—ã¿ã‚’å®Ÿæ„Ÿã§ãã¦è‰¯ã„ã§ã™ ç¬‘å‰å›ã‹ã‚‰ã®å¤‰æ›´ç‚¹ã«ã¤ã„ã¦ã•ã¦ã€å‰å›ã®è¨˜äº‹ã¯ v1.0.0 æ™‚ç‚¹ã®ã‚‚ã®ã§ã—ãŸãŒã€ã“ã“ã§ v1.3.0 ã«ãªã£ãŸç¾åœ¨ã® Dockerfile ã‚’è¦‹ã¦ã¿ã¾ã—ã‚‡ã†ã€‚# DockerfileFROM ryz310/rails-on-dockerãªã‚“ã¨ï¼ãŸã£ãŸã®ï¼‘è¡Œã½ã£ã¡ã§ã™ï¼ï¼¼ï¼¼\\Ù©( 'Ï‰' )Ùˆ //ï¼ï¼ä½•è¨€ã£ã¦ã‚“ã ã‚³ã‚¤ãƒ„ã¨æ€ã‚ã‚Œãã†ã§ã™ãŒã€ã“ã‚Œã¯ã©ã†ã„ã†äº‹ã‹ã¨ã„ã†ã¨ã€å¤§éƒ¨åˆ†ã‚’ base/Dockerfile ã«ç§»å‹•ã—ãŸãŸã‚ã§ã™ã€‚# base/DockerfileFROM ruby:2.5MAINTAINER ryz310@gmail.comRUN apt-get update -qq \u0026\u0026 apt-get install -y build-essential libpq-dev nodejsWORKDIR /myappENV BUNDLE_JOBS=32ONBUILD ADD Gemfile /myapp/GemfileONBUILD ADD Gemfile.lock /myapp/Gemfile.lockONBUILD RUN bundle installONBUILD ADD . /myappã“ã® base/Dockerfile ã®ã‚¤ãƒ¡ãƒ¼ã‚¸ã¯ åƒ•ã®Docker Hub ã«ç½®ã„ã¦ã‚ã‚Šã¾ã™ã€‚ONBUILD ãŒä»˜ã„ãŸã‚³ãƒãƒ³ãƒ‰ã¯ã“ã®ã‚¤ãƒ¡ãƒ¼ã‚¸ã‚’ç¶™æ‰¿ã—ãŸã‚¤ãƒ¡ãƒ¼ã‚¸ã§å®Ÿè¡Œã•ã‚Œã‚‹ãŸã‚ã€å…ˆã»ã©ã® Dockerfile ã«ã¯ FROM ã—ã‹ã‚ã‚Šã¾ã›ã‚“ãŒã€ãƒ“ãƒ«ãƒ‰ã®éš›ã«ã¯ä»¥ä¸‹ã® 4 ã¤ã®ã‚³ãƒãƒ³ãƒ‰ãŒå®Ÿè¡Œã•ã‚Œã‚‹äº‹ã«ãªã‚Šã¾ã™ã€‚ADD Gemfile /myapp/GemfileADD Gemfile.lock /myapp/Gemfile.lockRUN bundle installADD . /myappæ„Ÿè¦šã¨ã—ã¦ã¯ã€ base/Dockerfile ã§ Rails ã®èµ·å‹•ã«å¿…è¦ãªã‚µãƒ¼ãƒãƒ¼ç’°å¢ƒã‚’æ§‹ç¯‰ã—ã¦ã€ Dockerfile ã§ Rails ãã®ã‚‚ã®ã‚’æ§‹ç¯‰ã—ã¦ã„ãã‚ˆã†ãªæ„Ÿã˜ã§ã™ã€‚Rails ã®æ§‹ç¯‰ã«ã¯ RDS ã‚¤ãƒ¡ãƒ¼ã‚¸ãªã©ã‚‚å¿…é ˆã¨ãªã£ã¦ãã¾ã™ã®ã§ã€ãã‚Œã«ã¤ã„ã¦ã¯ docker-compose.yml ã¨çµ„ã¿åˆã‚ã›ã¦æ§‹ç¯‰ã—ã¦ã„ãã¾ã™ã€‚# docker-compose.ymlversion: '3'services:  db:    image: mysql:5.7    volumes:      - mysql_data:/var/lib/mysql    environment:      MYSQL_ALLOW_EMPTY_PASSWORD: 'yes'    ports:      - \"3306:3306\"  web:    build: .    image: web_image    command: bundle exec rails s -p 3000 -b '0.0.0.0'    volumes:      - .:/myapp      - bundle:/usr/local/bundle    ports:      - \"3000:3000\"    depends_on:      - db    environment:      DB_HOST: db  spring:    image: web_image    command: bundle exec spring server    volumes:      - .:/myapp      - bundle:/usr/local/bundle    tty: false    stdin_open: false    environment:      DB_HOST: dbvolumes:  mysql_data:  bundle:ã“ã“ã‚‚ v1.0.0 ã®é ƒã‹ã‚‰ã„ãã¤ã‹å¤‰æ›´ãŒã‚ã‚Šã¾ã—ã¦ã€ä¾‹ãˆã° web ã¨ spring ã§åŒã˜å†…å®¹ã«ãªã‚‹ã‚ˆã†ã« v1.0.0 ã§ã¯ YAML ã®ã‚¨ã‚¤ãƒªã‚¢ã‚¹ã‚’ä½¿ã£ã¦ã„ãŸã®ã§ã™ãŒã€ docker image ã§å…±æœ‰ã™ã‚‹æ–¹æ³•ã«å¤‰ãˆã¾ã—ãŸã€‚ã“ã®å®šç¾©ã®è¨˜è¿°ã«ã¤ã„ã¦å°‘ã—è£œè¶³ã—ã¾ã™ã€‚web ã®å®šç¾©ã§ build: . ã¨ image: web_image ã¨è¨€ã†è¨˜è¿°ãŒã‚ã‚Šã¾ã™ãŒã€ã“ã‚Œã¯ Dockerfile ã‚’ãƒ“ãƒ«ãƒ‰ã—ã¦ web_image ã¨ã„ã†ã‚¿ã‚°ã‚’ã¤ã‘ã‚‹ã€ã¨è¨€ã†æŒ¯ã‚‹èˆã„ã«ãªã‚Šã¾ã™ã€‚ä¸€æ–¹ã€ spring ã®å®šç¾©ã® image: web_image ã§ã¯ web_image ã¨ã„ã†ã‚¿ã‚°ãŒä»˜ã„ãŸã‚¤ãƒ¡ãƒ¼ã‚¸ã‚’ä½¿ç”¨ã™ã‚‹ã€ã¨ã„ã†æŒ¯ã‚‹èˆã„ã«ãªã‚Šã¾ã™ã€‚ã“ã®è¾ºã¯ãªã‚“ã ã‹ã‚„ã‚„ã“ã—ã„ã§ã™ã­ ğŸ˜“ã¾ãŸã€ bundle:/usr/local/bundle ã‚’ volume ã«æŒ‡å®šã™ã‚‹äº‹ã§ã€bundle install ã®å†…å®¹ã‚’æ°¸ç¶šåŒ–ã™ã‚‹ã‚ˆã†ã«ã—ã¦ã‚ã‚Šã¾ã™ã€‚ã“ã‚Œã«ã‚ˆã‚Šã€$ docker-compose run --rm web bundle install ã¨ã„ã†ã‚³ãƒãƒ³ãƒ‰ãŒæœ‰åŠ¹ã«ãªã£ã¦ãã‚‹ã®ã§ã€Gemfile ã‚’æ›´æ–°ã—ãŸéš›ã«ä¸€ã‹ã‚‰ Build ã™ã‚‹å¿…è¦ãŒãªããªã‚Šã¾ã™ã€‚åŒæ§˜ã«ã€ MySQL ã‚‚ mysql_data:/var/lib/mysql ã‚’ volume ã«æŒ‡å®šã™ã‚‹äº‹ã§ã€ãƒ†ãƒ¼ãƒ–ãƒ«ã®å†…å®¹ã‚’æ°¸ç¶šåŒ–ã™ã‚‹ã‚ˆã†ã«ã—ã¦ã„ã¾ã™ã€‚ã¾ã¨ã‚ONBUILD ã‚’ä½¿ç”¨ã™ã‚‹äº‹ã§ã€ä»–ã® Rails ã‚¢ãƒ—ãƒªã§ã‚‚åŒã˜ã‚¤ãƒ¡ãƒ¼ã‚¸ã‚’è»¢ç”¨ã§ãã‚‹ã‚ˆã†ã«ãªã£ãŸã®ãŒä¸€ç•ªã®æ”¹å–„ç‚¹ã§ã¯ãªã„ã‹ã¨æ€ã„ã¾ã™ã€‚ãŸã ã€Rails ã‚¢ãƒ—ãƒªå´ã®äº‹æƒ…ã§ä½•ã‹ $ apt-get install ã‚’åŠ ãˆãŸããªã£ãŸå ´åˆã«ã©ã†ã™ã‚‹ã®ã‹ã€ã¨ã„ã†èª²é¡Œæ„ŸãŒã‚ã‚Šã¾ã™ã€‚base/Dockerfile ã¯æ±ç”¨çš„ãªç’°å¢ƒæ§‹ç¯‰ã‚’æ„è­˜ã—ã¦ã„ã‚‹ã®ã§ã€ã‚ã¾ã‚Šä¸€èˆ¬çš„ã§ãªã„ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã¯è¡Œã„ãŸãã‚ã‚Šã¾ã›ã‚“ã€‚ç†æƒ³ã¨ã—ã¦ã¯ã€Œå­ã‚¤ãƒ¡ãƒ¼ã‚¸ã€ã§ $ apt-get install ã•ã›ã¦ã€ã€Œå­«ã‚¤ãƒ¡ãƒ¼ã‚¸ã€ã§ä»Šå›ã®ã‚ˆã†ã« Rails ã®æ§‹ç¯‰ã‚’ã™ã‚‹æ§‹æˆãŒå®Ÿç¾ã§ãã‚Œã°è‰¯ã„ã®ã§ã¯ãªã„ã‹ã¨æ€ã„ã¾ã™ãŒã€ ONBUILD ã‚’ã€Œå­ã‚¤ãƒ¡ãƒ¼ã‚¸ã€ã§ã‚¹ã‚­ãƒƒãƒ—ã•ã›ã‚‹ã¨ã‹å‡ºæ¥ã‚‹ã‚“ã§ã—ã‚‡ã†ã‹ï¼Ÿæ¬¡å›ã¯ã“ã®è¾ºã«ã¤ã„ã¦å°‘ã—èª¿ã¹ã¦ã„ã‘ã‚Œã°ã€ã¨æ€ã£ã¦ã„ã¾ã™ã€‚","link":"https://developer.feedforce.jp/entry/2018/02/25/234556","isoDate":"2018-02-25T14:45:56.000Z","dateMiliSeconds":1519569956000,"imageUrl":"https://cdn.user.blog.st-hatena.com/default_entry_og_image/116461321/1514251518718655","authorName":"ryz310"},{"title":"Rails 5.2 é–‹ç™ºç’°å¢ƒã‚’ Docker ã§æ§‹ç¯‰ã™ã‚‹","content":"\u003cp\u003eã©ã†ã‚‚ã€ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢ã®ã‚µãƒˆã‚¦ãƒªãƒ§ã‚¦ã‚¹ã‚±ã§ã™ âœŒï¸('Ï‰')âœŒï¸\u003c/p\u003e\n\n\u003cp\u003eåƒ•ãŒæ‰€å±ã—ã¦ã„ã‚‹ \u003ca href=\"https://socialplus.jp/\"\u003eã‚½ãƒ¼ã‚·ãƒ£ãƒ«PLUS\u003c/a\u003e ãƒãƒ¼ãƒ ã§ã¯ Rails ã®é–‹ç™ºç’°å¢ƒã‚’ Docker ã§æ§‹ç¯‰ã—ã¦ã„ã¾ã™ã€‚\nè‡ªåˆ†ã‚‚æ—¥ã€…ãŠä¸–è©±ã«ãªã£ã¦ã„ã‚‹ Docker ã§ã™ãŒã€ã‚¤ãƒã‹ã‚‰ Dockerfile æ›¸ã„ãŸäº‹ãŒç„¡ã‹ã£ãŸã®ã§ã€ã‚„ã£ã¦ã¿ã¾ã—ãŸã€‚\u003c/p\u003e\n\n\u003cp\u003eã“ã¡ã‚‰ã®ãƒãƒ¥ãƒ¼ãƒˆãƒªã‚¢ãƒ«ã‚’å‚è€ƒã«ã—ã¦ã„ã¾ã™ã€‚\u003c/p\u003e\n\n\u003cp\u003e\u003ca href=\"http://docs.docker.jp/compose/rails.html\"\u003e\u0026#x30AF;\u0026#x30A4;\u0026#x30C3;\u0026#x30AF;\u0026#x30B9;\u0026#x30BF;\u0026#x30FC;\u0026#x30C8;\u0026#x30FB;\u0026#x30AC;\u0026#x30A4;\u0026#x30C9;\u0026#xFF1A;Docker Compose \u0026#x3068; Rails \u0026mdash; Docker-docs-ja 17.06.Beta \u0026#x30C9;\u0026#x30AD;\u0026#x30E5;\u0026#x30E1;\u0026#x30F3;\u0026#x30C8;\u003c/a\u003e\u003c/p\u003e\n\n\u003ch1\u003eã‚„ã£ã¦ã¿ãŸâœ¨\u003c/h1\u003e\n\n\u003cp\u003eæ—©é€Ÿã§ã™ãŒã“ã¡ã‚‰ãŒå®Œæˆå“ã® GitHub ãƒªãƒã‚¸ãƒˆãƒªã«ãªã‚Šã¾ã™ã€‚\n\u003ciframe src=\"https://hatenablog-parts.com/embed?url=https%3A%2F%2Fgithub.com%2Fryz310%2Frails-on-docker%2Ftree%2Fv1.0.0\" title=\"ryz310/rails-on-docker\" class=\"embed-card embed-webcard\" scrolling=\"no\" frameborder=\"0\" style=\"display: block; width: 100%; height: 155px; max-width: 500px; margin: 10px 0px;\"\u003e\u003c/iframe\u003e\u003ccite class=\"hatena-citation\"\u003e\u003ca href=\"https://github.com/ryz310/rails-on-docker/tree/v1.0.0\"\u003egithub.com\u003c/a\u003e\u003c/cite\u003e\u003c/p\u003e\n\n\u003cp\u003eã“ã®è¨˜äº‹ã¯ \u003ccode\u003ev1.0.0\u003c/code\u003e æ™‚ç‚¹ã§æ›¸ã„ã¦ã„ã¾ã™ãŒã€ãƒªãƒã‚¸ãƒˆãƒªã¯ä»Šå¾Œã‚‚æ›´æ–°ã•ã‚Œã¦ã„ãå¯èƒ½æ€§ãŒã‚ã‚Šã¾ã™ã€‚\u003c/p\u003e\n\n\u003ch2\u003eç’°å¢ƒ\u003c/h2\u003e\n\n\u003cul\u003e\n\u003cli\u003eDebian Stretch\u003c/li\u003e\n\u003cli\u003eRuby 2.5.0\u003c/li\u003e\n\u003cli\u003eRails 5.2.0.rc1\u003c/li\u003e\n\u003cli\u003eMySQL 5.7\u003c/li\u003e\n\u003c/ul\u003e\n\n\n\u003ch2\u003eã¤ã‹ã„ã‹ãŸ\u003c/h2\u003e\n\n\u003cp\u003eRails 5.2 ã§ç’°å¢ƒæ§‹ç¯‰ã—ãŸã¨è¨€ã„ã¾ã—ãŸãŒã€ãƒªãƒã‚¸ãƒˆãƒªã«ã¯ Rails ã®ã‚½ãƒ¼ã‚¹ã‚³ãƒ¼ãƒ‰ãŒä¸€åˆ‡å«ã¾ã‚Œã¦ã„ã¾ã›ã‚“ã€‚\nã“ã‚Œã¯ \u003ccode\u003erails new\u003c/code\u003e ã‹ã‚‰ Docker ã§ã‚„ã£ã¦ã„ããŸã‚ã§ã™ã€‚\nä»¥ä¸‹ã«æ‰‹é †ã‚’ç¤ºã—ã¾ã™ã®ã§ã€èˆˆå‘³ã‚ã‚‹æ–¹ã¯ãœã²è¨˜äº‹ã‚’èª­ã¿ãªãŒã‚‰ä¸€ç·’ã«ã‚„ã£ã¦ã¿ã¦ä¸‹ã•ã„ ğŸ™\u003c/p\u003e\n\n\u003ch3\u003e0. ãƒªãƒã‚¸ãƒˆãƒªã‚’ãƒ­ãƒ¼ã‚«ãƒ«ã«ã‚¯ãƒ­ãƒ¼ãƒ³ã™ã‚‹\u003c/h3\u003e\n\n\u003cpre class=\"code\" data-lang=\"\" data-unlink\u003e$ git clone https://github.com/ryz310/rails-on-docker.git\u003c/pre\u003e\n\n\n\u003ch3\u003e1. ä»¥ä¸‹ã®ã‚³ãƒãƒ³ãƒ‰ã‚’å®Ÿè¡Œã™ã‚‹\u003c/h3\u003e\n\n\u003cpre class=\"code\" data-lang=\"\" data-unlink\u003e$ docker-compose run web rails new . --force --database=mysql --skip-bundle --skip-git\u003c/pre\u003e\n\n\n\u003cp\u003e\u003ccode\u003erails new\u003c/code\u003e ã«ã‚ˆã£ã¦å¿…è¦ãªãƒ•ã‚¡ã‚¤ãƒ«ãŒã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã•ã‚Œã¾ã™ã€‚åŒæ™‚ã« Gemfile ã‚‚ Rails ç”¨ã«æ›´æ–°ã•ã‚Œã¾ã™ã€‚\næ®‹å¿µãªãŒã‚‰ã‚¢ãƒ—ãƒªåã¯æŒ‡å®šã§ããªã„ã®ã§ã€å¿…è¦ã«å¿œã˜ã¦å¤‰æ›´ã—ã¦ä¸‹ã•ã„ã€‚\u003c/p\u003e\n\n\u003cp\u003eãªãŠã€å¾Œè¿°ã® MySQL ãƒ‡ãƒ¼ã‚¿ã®æ°¸ç¶šåŒ–ã®ãŸã‚ MySQL ã®ãƒ‡ãƒ¼ã‚¿ãƒ•ã‚¡ã‚¤ãƒ«ã‚’å«ã‚ãªã„ã‚ˆã†ã«ãƒªãƒã‚¸ãƒˆãƒªã®æ–¹ã§ \u003ccode\u003e.gitignore\u003c/code\u003e ã‚’ç”¨æ„ã—ã¦ã„ã¾ã™ã€‚\nãã®ãŸã‚ \u003ccode\u003e--skip-git\u003c/code\u003e ã‚’ä»˜ã‘ã¦ Rails ã« \u003ccode\u003e.gitignore\u003c/code\u003e ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ä½œæˆã•ã›ãªã„ã‚ˆã†ã«ã—ã¦ã„ã¾ã™ãŒã€æ°¸ç¶šåŒ–ãŒä¸ç”¨ãªå ´åˆã¯ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã‚’å¤–ã—ã¦ä¸‹ã•ã„ã€‚\u003c/p\u003e\n\n\u003ch3\u003e2. æ›´æ–°ã•ã‚ŒãŸ \u003ccode\u003eGemfile\u003c/code\u003e ã§ä»¥ä¸‹ã®ã‚³ãƒ¡ãƒ³ãƒˆã‚¢ã‚¦ãƒˆã‚’å¤–ã™\u003c/h3\u003e\n\n\u003cpre class=\"code\" data-lang=\"\" data-unlink\u003e# gem \u0026#39;mini_racer\u0026#39;, platforms: :ruby\u003c/pre\u003e\n\n\n\u003cp\u003eä»¥å‰ã§ã‚ã‚Œã° \u003ccode\u003etherubyracer\u003c/code\u003e ã ã£ãŸã®ã§ã™ãŒã€ã„ã¤ã®é–“ã«ã‹ \u003ccode\u003emini_racer\u003c/code\u003e ã«å¤‰ã‚ã£ã¦ã„ãŸã®ã§ã™ã­ã€‚\u003c/p\u003e\n\n\u003cp\u003e\u003ciframe src=\"https://hatenablog-parts.com/embed?url=https%3A%2F%2Ftechracho.bpsinc.jp%2Fhachi8833%2F2017_06_09%2F41039\" title=\"é€±åˆŠRailsã‚¦ã‚©ãƒƒãƒï¼ˆ20170609ï¼‰ã¤ã„ã«therubyracerã‹ã‚‰mini_racerã¸ã€æ³¨æ„ã—ãªã„ã¨ãƒãƒã‚‹gemã€5.1ã§ã®Vue.jsã¨Turbolinksã®å…±å­˜ã»ã‹\" class=\"embed-card embed-webcard\" scrolling=\"no\" frameborder=\"0\" style=\"display: block; width: 100%; height: 155px; max-width: 500px; margin: 10px 0px;\"\u003e\u003c/iframe\u003e\u003ccite class=\"hatena-citation\"\u003e\u003ca href=\"https://techracho.bpsinc.jp/hachi8833/2017_06_09/41039\"\u003etechracho.bpsinc.jp\u003c/a\u003e\u003c/cite\u003e\u003c/p\u003e\n\n\u003cp\u003eTechRacho ã•ã‚“ã®é€±åˆŠRailsã‚¦ã‚©ãƒƒãƒã«ã¯ã„ã¤ã‚‚ãŠä¸–è©±ã«ãªã£ã¦ãŠã‚Šã¾ã™ ğŸ™\u003c/p\u003e\n\n\u003ch3\u003e3. \u003ccode\u003e$ docker-compose build\u003c/code\u003e ã‚’å®Ÿè¡Œã™ã‚‹\u003c/h3\u003e\n\n\u003cp\u003eGemfile ã‚’å¤‰æ›´ã—ãŸã®ã§å†èª­ã‚¤ãƒ¡ãƒ¼ã‚¸ã‚’ä½œã‚Šç›´ã—ã¾ã™ã€‚\u003c/p\u003e\n\n\u003ch3\u003e4. \u003ccode\u003econfig/database.yml\u003c/code\u003e ã‚’ä»¥ä¸‹ã®ã‚ˆã†ã«å¤‰æ›´ã™ã‚‹\u003c/h3\u003e\n\n\u003cpre class=\"code\" data-lang=\"\" data-unlink\u003edefault: \u0026amp;default\n  adapter: mysql2\n  encoding: utf8\n  pool: \u0026lt;%= ENV.fetch(\u0026#34;RAILS_MAX_THREADS\u0026#34;) { 5 } %\u0026gt;\n  username: root\n  password: xxxxxx # \u0026lt;- ã“ã“ã‚’å¤‰æ›´\n  host: db # \u0026lt;- ã“ã“ã‚’å¤‰æ›´\u003c/pre\u003e\n\n\n\u003cp\u003eã‚ãã¾ã§ãƒ­ãƒ¼ã‚«ãƒ«ã®é–‹ç™ºç’°å¢ƒæ§‹ç¯‰ãªã®ã§ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ã‚’éš ã—ãŸã‚Šã¨ã‹ã¯ã—ã¾ã›ã‚“ã€‚æœ¬ç•ªé‹ç”¨ã¨ã‹ã§ã‚„ã£ã¡ã‚ƒãƒ€ãƒ¡ã§ã™ã‚ˆï¼\nMySQL ã® Root ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ã¯ \u003ccode\u003edocker-compose.yml\u003c/code\u003e ã§æŒ‡å®šã—ã¦ã„ã¾ã™ã€‚å¿…è¦ã«å¿œã˜ã¦æ›¸ãæ›ãˆã¦ä¸‹ã•ã„ã€‚\u003c/p\u003e\n\n\u003cpre class=\"code\" data-lang=\"\" data-unlink\u003e  db:\n    image: mysql:5.7\n    volumes:\n      - .mysql_data:/var/lib/mysql\n    environment:\n      MYSQL_ROOT_PASSWORD: xxxxxx # \u0026lt;- ã“ã“ï¼\u003c/pre\u003e\n\n\n\u003ch3\u003e5. \u003ccode\u003e$ docker-compose up\u003c/code\u003e ã‚’å®Ÿè¡Œã™ã‚‹\u003c/h3\u003e\n\n\u003cp\u003eã‚³ãƒ³ãƒ†ãƒŠã‚’èµ·å‹•ã•ã›ã¾ã™ã€‚\u003c/p\u003e\n\n\u003ch3\u003e6. \u003ccode\u003e$ docker-compose exec spring spring rake db:create\u003c/code\u003e ã‚’å®Ÿè¡Œã™ã‚‹\u003c/h3\u003e\n\n\u003cp\u003eã‚³ãƒ³ãƒ†ãƒŠã¯èµ·å‹•ã—ã¦ã„ã¾ã™ãŒã€Rails ã§ä½¿ç”¨ã™ã‚‹ DB ãƒ†ãƒ¼ãƒ–ãƒ«ã¯ã¾ã ä½œæˆã•ã‚Œã¦ã„ãªã„ã®ã§ä½œæˆã—ã¾ã™ã€‚\nä½•æ°—ã« \u003ccode\u003espring\u003c/code\u003e ã‚’ä½¿ã£ã¦ã„ã‚‹ç‚¹ã«æ³¨ç›®ã§ã™ã€‚\u003c/p\u003e\n\n\u003ch3\u003e7. \u003ca href=\"http://localhost:3000/\"\u003ehttp://localhost:3000/\u003c/a\u003e ã«ã‚¢ã‚¯ã‚»ã‚¹ã—ã¦ Rails ãŒå‹•ã„ã¦ã„ã‚‹ã“ã¨ã‚’ç¢ºèª\u003c/h3\u003e\n\n\u003cp\u003eã“ã“ã¾ã§ã®æ“ä½œã§ Rails ãŒæ­£ã—ãå‹•ä½œã—ã¦ã„ã‚‹ã¯ãšã§ã™ã€‚\u003c/p\u003e\n\n\u003cp\u003e\u003cspan itemscope itemtype=\"http://schema.org/Photograph\"\u003e\u003cimg src=\"https://cdn-ak.f.st-hatena.com/images/fotolife/r/ryz310/20180211/20180211110115.png\" alt=\"f:id:ryz310:20180211110115p:plain\" title=\"f:id:ryz310:20180211110115p:plain\" class=\"hatena-fotolife\" itemprop=\"image\"\u003e\u003c/span\u003e\u003cfigcaption\u003eYay! Youâ€™re on Rails!\u003c/figcaption\u003e\u003c/figure\u003e\u003c/p\u003e\n\n\u003ch1\u003eãƒã‚¤ãƒ³ãƒˆ\u003c/h1\u003e\n\n\u003ch2\u003e\u003ccode\u003ebundle install\u003c/code\u003e ãŒæ¯å›èµ°ã‚‰ãªã„ã‚ˆã†ã«å·¥å¤«ã—ã¦ã„ã‚‹\u003c/h2\u003e\n\n\u003cp\u003eDockerfile ã§ WORKDIR ã« \u003ccode\u003e/tmp\u003c/code\u003e ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã‚’æŒ‡å®šã—ã¦ã„ã‚‹ã¨ã“ã‚ãŒãƒã‚¤ãƒ³ãƒˆã§ã™ã€‚\nã“ã‚Œã‚’ã›ãšã« \u003ccode\u003eWORKDIR /myapp\u003c/code\u003e ã‹ã‚‰ã® \u003ccode\u003eADD . /myapp\u003c/code\u003e ã‚’ã‚„ã£ã¦ã—ã¾ã†ã¨ã€ Rails ã®ã‚³ãƒ¼ãƒ‰ã«å¤‰æ›´ãŒã‚ã‚‹åº¦ã« \u003ccode\u003ebundle install\u003c/code\u003e ãŒæœ€åˆã‹ã‚‰å®Ÿè¡Œã•ã‚Œã¦ã—ã¾ã„ã¾ã™ã€‚\nGemfile ã¨ Gemfile.lock ã‚’ \u003ccode\u003e/tmp\u003c/code\u003e ã«æ ¼ç´ã™ã‚‹ã“ã¨ã§ã€ã“ã‚Œã‚‰ã®ãƒ•ã‚¡ã‚¤ãƒ«ã«å¤‰æ›´ãŒãªã„é™ã‚Š \u003ccode\u003ebundle install\u003c/code\u003e ãŒå®Ÿè¡Œã•ã‚Œãªã„ã‚ˆã†ã«ãªã£ã¦ã„ã¾ã™ã€‚\u003c/p\u003e\n\n\u003cpre class=\"code\" data-lang=\"\" data-unlink\u003eWORKDIR /tmp\nADD Gemfile Gemfile\nADD Gemfile.lock Gemfile.lock\nRUN bundle install\nWORKDIR /myapp\nADD . /myapp\u003c/pre\u003e\n\n\n\u003cp\u003eå‚è€ƒ: \u003ca href=\"https://easyramble.com/rails-development-on-docker.html#crayon-5a7fa9761d5ba051809395\"\u003eDocker\u0026#x3067;Rails + MySQL\u0026#x306E;\u0026#x958B;\u0026#x767A;\u0026#x74B0;\u0026#x5883;\u0026#x3092;\u0026#x69CB;\u0026#x7BC9; | EasyRamble\u003c/a\u003e\u003c/p\u003e\n\n\u003ch2\u003e\u003ccode\u003espring\u003c/code\u003e ã«å¯¾å¿œ\u003c/h2\u003e\n\n\u003cp\u003eRails ã§é–‹ç™ºã™ã‚‹ä¸Šã§æ¬ ã‹ã›ãªã„ \u003ccode\u003espring\u003c/code\u003e ã‚‚åˆ©ç”¨ã§ãã‚‹ã‚ˆã†ã«ã—ã¦ã‚ã‚Šã¾ã™ã€‚\nå‰è¿°ã® \u003ccode\u003erake db:create\u003c/code\u003e ã®æ™‚ã«ã‚‚å‡ºã¦ãã¾ã—ãŸãŒã€\u003ccode\u003e$ docker-compose exec spring spring rails console\u003c/code\u003e ã®ã‚ˆã†ã«ã—ã¦ä½¿ã„ã¾ã™ã€‚\n\u003ccode\u003espring\u003c/code\u003e ãŒ 2 å›å‡ºã¦ãã‚‹ã¨ã“ã‚ãŒãƒã‚¤ãƒ³ãƒˆã§ã™ã€‚ä¸€ã¤ç›®ã¯ã‚³ãƒ³ãƒ†ãƒŠã®ã‚µãƒ¼ãƒ“ã‚¹åã§ã™ã€‚\u003c/p\u003e\n\n\u003cp\u003eæ¯å›æ›¸ãã®ã¯ã ã‚‹ã„ã®ã§åƒ•ã¯ alias ã«ã—ã¦ã„ã¾ã™ã€‚fish shell ç”¨ãªã®ã§è‰¯ã„ã‚ˆã†ã«èª­ã¿æ›¿ãˆã¦ä¸‹ã•ã„ ğŸ™\u003c/p\u003e\n\n\u003cpre class=\"code\" data-lang=\"\" data-unlink\u003e# ~/.config/fish/config.fish\n\n# docker-compose aliases\nfunction fig\n  docker-compose $argv\nend\n\nfunction figspring\n  docker-compose exec spring spring $argv\nend\u003c/pre\u003e\n\n\n\n\n\u003cpre class=\"code\" data-lang=\"\" data-unlink\u003e# USAGE\n$ figspring rails c\u003c/pre\u003e\n\n\n\u003cp\u003eå‚è€ƒ: \u003ca href=\"https://qiita.com/kawasin73/items/2253523be18e5afd994f\"\u003e\u0026#x9AD8;\u0026#x901F;\u0026#x306B;\u0026#x958B;\u0026#x767A;\u0026#x3067;\u0026#x304D;\u0026#x308B; Docker + Rails\u0026#x958B;\u0026#x767A;\u0026#x74B0;\u0026#x5883;\u0026#x306E;\u0026#x30C6;\u0026#x30F3;\u0026#x30D7;\u0026#x30EC;\u0026#x30FC;\u0026#x30C8;\u0026#x3092;\u0026#x4F5C;\u0026#x3063;\u0026#x305F; - Qiita\u003c/a\u003e\u003c/p\u003e\n\n\u003ch2\u003eMySQL ãƒ‡ãƒ¼ã‚¿ã®æ°¸ç¶šåŒ–\u003c/h2\u003e\n\n\u003cp\u003eã‚¤ãƒ¡ãƒ¼ã‚¸ã‚’ä½œã‚Šç›´ã—ãŸæ™‚ã« MySQL ã®ãƒ‡ãƒ¼ã‚¿ãŒå¤±ã‚ã‚Œã¦ã—ã¾ã†ã®ã¯è¾›ã„ã‚‚ã®ãŒã‚ã‚Šã¾ã™ã€‚\næ¯å›ãƒ†ã‚¹ãƒˆç”¨ã®ãƒ‡ãƒ¼ã‚¿ã‚’ä¸€ã‹ã‚‰ä½œã‚Šç›´ã—ãŸããªã„ã®ã§ã€ \u003ccode\u003edocker-compose.yml\u003c/code\u003e ã§ä»¥ä¸‹ã®ã‚ˆã†ã«æŒ‡å®šã—ã¦MySQL ã®ãƒ‡ãƒ¼ã‚¿ã‚’æ°¸ç¶šåŒ–ã•ã›ã¦ã„ã¾ã™ã€‚\u003c/p\u003e\n\n\u003cpre class=\"code\" data-lang=\"\" data-unlink\u003e  db:\n    image: mysql:5.7\n    volumes:\n      - .mysql_data:/var/lib/mysql # \u0026lt;- ã“ã‚Œï¼\n    environment:\n      MYSQL_ROOT_PASSWORD: xxxxxx\u003c/pre\u003e\n\n\n\u003cp\u003e\u003ccode\u003e.mysql_data\u003c/code\u003e ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªä»¥ä¸‹ã« MySQL ã®ãƒ‡ãƒ¼ã‚¿ãŒæ ¼ç´ã•ã‚Œã¦ã„ã¾ã™ã€‚ãƒªãƒã‚¸ãƒˆãƒªã® \u003ccode\u003e.gitignore\u003c/code\u003e ã§ç„¡è¦–ã•ã›ã¦ã„ã¾ã™ã€‚\nè©¦ã—ã¦ã„ã¾ã›ã‚“ãŒã€å‚è€ƒã«ã•ã›ã¦é ‚ã„ãŸè¨˜äº‹ã«ã‚ˆã‚‹ã¨ Docker for Mac ä»¥å¤–ã®ç’°å¢ƒã§ã¯å•é¡ŒãŒç™ºç”Ÿã™ã‚‹ã‚ˆã†ã§ã™ã®ã§ã”æ³¨æ„ä¸‹ã•ã„ã€‚\nå¯¾å¿œæ–¹æ³•ã‚‚è¨˜äº‹å†…ã§ç´¹ä»‹ã•ã‚Œã¦ã„ã¾ã™ ğŸ™\u003c/p\u003e\n\n\u003cp\u003eå‚è€ƒ: \u003ca href=\"https://blog.leko.jp/post/how-to-mount-data-volume-to-local-with-docker-compose/\"\u003edocker compose\u0026#x3067;MySQL\u0026#x306E;\u0026#x30C7;\u0026#x30FC;\u0026#x30BF;\u0026#x9818;\u0026#x57DF;\u0026#x3092;\u0026#x30ED;\u0026#x30FC;\u0026#x30AB;\u0026#x30EB;\u0026#x306B;\u0026#x30DE;\u0026#x30A6;\u0026#x30F3;\u0026#x30C8;\u0026#x3059;\u0026#x308B; | WEB EGG\u003c/a\u003e\u003c/p\u003e\n\n\u003ch1\u003eã¾ã¨ã‚\u003c/h1\u003e\n\n\u003cp\u003eé€±æœ«ã«ä½•ã‹ã‚¢ãƒ—ãƒªã§ã‚‚æ›¸ã“ã†ã‹ã¨æ€ã£ãŸæ™‚ã«ã€ã¤ã„ã§ã« Docker ã§ç’°å¢ƒæ§‹ç¯‰ã‚‚ã‚„ã£ã¡ã‚ƒã†ã‹ã€ã¨æ€ã„ç«‹ã£ã¦æ›¸ãã¾ã—ãŸã€‚\nãã†ã“ã†ã—ã¦ã‚‹ã†ã¡ã«é€±æœ«ã®åŠåˆ†ãã‚‰ã„ãŒéãå»ã£ã¦ã„ã¾ã™ãŒã€ãã£ã¨ä»Šå¾Œã¯æ—ã‚‹ã¯ãšã€‚ã€‚ ğŸ˜‡\nä½•åº¦ã‚‚ç¢ºèªã—ã¦ã„ã¾ã™ãŒã€ã‚‚ã—é–“é•ã£ã¦ã„ã‚‹ç‚¹ã€ä¸ä¾¿ãªç‚¹ãªã©ã‚ã‚Šã¾ã—ãŸã‚‰ãã£ã¨æ•™ãˆã¦é ‚ã‘ã¾ã™ã¨å¹¸ã„ã§ã™ ğŸ™\nFork ã‚‚å¤§æ­“è¿ã§ã™ã—ã€èª°ã‹ã«ä½¿ã£ã¦ã‚‚ã‚‰ãˆã‚‹ã¨å¬‰ã—ã„ã§ã™ ğŸ˜\u003c/p\u003e\n","contentSnippet":"ã©ã†ã‚‚ã€ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢ã®ã‚µãƒˆã‚¦ãƒªãƒ§ã‚¦ã‚¹ã‚±ã§ã™ âœŒï¸('Ï‰')âœŒï¸åƒ•ãŒæ‰€å±ã—ã¦ã„ã‚‹ ã‚½ãƒ¼ã‚·ãƒ£ãƒ«PLUS ãƒãƒ¼ãƒ ã§ã¯ Rails ã®é–‹ç™ºç’°å¢ƒã‚’ Docker ã§æ§‹ç¯‰ã—ã¦ã„ã¾ã™ã€‚è‡ªåˆ†ã‚‚æ—¥ã€…ãŠä¸–è©±ã«ãªã£ã¦ã„ã‚‹ Docker ã§ã™ãŒã€ã‚¤ãƒã‹ã‚‰ Dockerfile æ›¸ã„ãŸäº‹ãŒç„¡ã‹ã£ãŸã®ã§ã€ã‚„ã£ã¦ã¿ã¾ã—ãŸã€‚ã“ã¡ã‚‰ã®ãƒãƒ¥ãƒ¼ãƒˆãƒªã‚¢ãƒ«ã‚’å‚è€ƒã«ã—ã¦ã„ã¾ã™ã€‚ã‚¯ã‚¤ãƒƒã‚¯ã‚¹ã‚¿ãƒ¼ãƒˆãƒ»ã‚¬ã‚¤ãƒ‰ï¼šDocker Compose ã¨ Rails â€” Docker-docs-ja 17.06.Beta ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã‚„ã£ã¦ã¿ãŸâœ¨æ—©é€Ÿã§ã™ãŒã“ã¡ã‚‰ãŒå®Œæˆå“ã® GitHub ãƒªãƒã‚¸ãƒˆãƒªã«ãªã‚Šã¾ã™ã€‚github.comã“ã®è¨˜äº‹ã¯ v1.0.0 æ™‚ç‚¹ã§æ›¸ã„ã¦ã„ã¾ã™ãŒã€ãƒªãƒã‚¸ãƒˆãƒªã¯ä»Šå¾Œã‚‚æ›´æ–°ã•ã‚Œã¦ã„ãå¯èƒ½æ€§ãŒã‚ã‚Šã¾ã™ã€‚ç’°å¢ƒDebian StretchRuby 2.5.0Rails 5.2.0.rc1MySQL 5.7ã¤ã‹ã„ã‹ãŸRails 5.2 ã§ç’°å¢ƒæ§‹ç¯‰ã—ãŸã¨è¨€ã„ã¾ã—ãŸãŒã€ãƒªãƒã‚¸ãƒˆãƒªã«ã¯ Rails ã®ã‚½ãƒ¼ã‚¹ã‚³ãƒ¼ãƒ‰ãŒä¸€åˆ‡å«ã¾ã‚Œã¦ã„ã¾ã›ã‚“ã€‚ã“ã‚Œã¯ rails new ã‹ã‚‰ Docker ã§ã‚„ã£ã¦ã„ããŸã‚ã§ã™ã€‚ä»¥ä¸‹ã«æ‰‹é †ã‚’ç¤ºã—ã¾ã™ã®ã§ã€èˆˆå‘³ã‚ã‚‹æ–¹ã¯ãœã²è¨˜äº‹ã‚’èª­ã¿ãªãŒã‚‰ä¸€ç·’ã«ã‚„ã£ã¦ã¿ã¦ä¸‹ã•ã„ ğŸ™0. ãƒªãƒã‚¸ãƒˆãƒªã‚’ãƒ­ãƒ¼ã‚«ãƒ«ã«ã‚¯ãƒ­ãƒ¼ãƒ³ã™ã‚‹$ git clone https://github.com/ryz310/rails-on-docker.git1. ä»¥ä¸‹ã®ã‚³ãƒãƒ³ãƒ‰ã‚’å®Ÿè¡Œã™ã‚‹$ docker-compose run web rails new . --force --database=mysql --skip-bundle --skip-gitrails new ã«ã‚ˆã£ã¦å¿…è¦ãªãƒ•ã‚¡ã‚¤ãƒ«ãŒã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã•ã‚Œã¾ã™ã€‚åŒæ™‚ã« Gemfile ã‚‚ Rails ç”¨ã«æ›´æ–°ã•ã‚Œã¾ã™ã€‚æ®‹å¿µãªãŒã‚‰ã‚¢ãƒ—ãƒªåã¯æŒ‡å®šã§ããªã„ã®ã§ã€å¿…è¦ã«å¿œã˜ã¦å¤‰æ›´ã—ã¦ä¸‹ã•ã„ã€‚ãªãŠã€å¾Œè¿°ã® MySQL ãƒ‡ãƒ¼ã‚¿ã®æ°¸ç¶šåŒ–ã®ãŸã‚ MySQL ã®ãƒ‡ãƒ¼ã‚¿ãƒ•ã‚¡ã‚¤ãƒ«ã‚’å«ã‚ãªã„ã‚ˆã†ã«ãƒªãƒã‚¸ãƒˆãƒªã®æ–¹ã§ .gitignore ã‚’ç”¨æ„ã—ã¦ã„ã¾ã™ã€‚ãã®ãŸã‚ --skip-git ã‚’ä»˜ã‘ã¦ Rails ã« .gitignore ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ä½œæˆã•ã›ãªã„ã‚ˆã†ã«ã—ã¦ã„ã¾ã™ãŒã€æ°¸ç¶šåŒ–ãŒä¸ç”¨ãªå ´åˆã¯ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã‚’å¤–ã—ã¦ä¸‹ã•ã„ã€‚2. æ›´æ–°ã•ã‚ŒãŸ Gemfile ã§ä»¥ä¸‹ã®ã‚³ãƒ¡ãƒ³ãƒˆã‚¢ã‚¦ãƒˆã‚’å¤–ã™# gem 'mini_racer', platforms: :rubyä»¥å‰ã§ã‚ã‚Œã° therubyracer ã ã£ãŸã®ã§ã™ãŒã€ã„ã¤ã®é–“ã«ã‹ mini_racer ã«å¤‰ã‚ã£ã¦ã„ãŸã®ã§ã™ã­ã€‚techracho.bpsinc.jpTechRacho ã•ã‚“ã®é€±åˆŠRailsã‚¦ã‚©ãƒƒãƒã«ã¯ã„ã¤ã‚‚ãŠä¸–è©±ã«ãªã£ã¦ãŠã‚Šã¾ã™ ğŸ™3. $ docker-compose build ã‚’å®Ÿè¡Œã™ã‚‹Gemfile ã‚’å¤‰æ›´ã—ãŸã®ã§å†èª­ã‚¤ãƒ¡ãƒ¼ã‚¸ã‚’ä½œã‚Šç›´ã—ã¾ã™ã€‚4. config/database.yml ã‚’ä»¥ä¸‹ã®ã‚ˆã†ã«å¤‰æ›´ã™ã‚‹default: \u0026default  adapter: mysql2  encoding: utf8  pool: \u003c%= ENV.fetch(\"RAILS_MAX_THREADS\") { 5 } %\u003e  username: root  password: xxxxxx # \u003c- ã“ã“ã‚’å¤‰æ›´  host: db # \u003c- ã“ã“ã‚’å¤‰æ›´ã‚ãã¾ã§ãƒ­ãƒ¼ã‚«ãƒ«ã®é–‹ç™ºç’°å¢ƒæ§‹ç¯‰ãªã®ã§ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ã‚’éš ã—ãŸã‚Šã¨ã‹ã¯ã—ã¾ã›ã‚“ã€‚æœ¬ç•ªé‹ç”¨ã¨ã‹ã§ã‚„ã£ã¡ã‚ƒãƒ€ãƒ¡ã§ã™ã‚ˆï¼MySQL ã® Root ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ã¯ docker-compose.yml ã§æŒ‡å®šã—ã¦ã„ã¾ã™ã€‚å¿…è¦ã«å¿œã˜ã¦æ›¸ãæ›ãˆã¦ä¸‹ã•ã„ã€‚  db:    image: mysql:5.7    volumes:      - .mysql_data:/var/lib/mysql    environment:      MYSQL_ROOT_PASSWORD: xxxxxx # \u003c- ã“ã“ï¼5. $ docker-compose up ã‚’å®Ÿè¡Œã™ã‚‹ã‚³ãƒ³ãƒ†ãƒŠã‚’èµ·å‹•ã•ã›ã¾ã™ã€‚6. $ docker-compose exec spring spring rake db:create ã‚’å®Ÿè¡Œã™ã‚‹ã‚³ãƒ³ãƒ†ãƒŠã¯èµ·å‹•ã—ã¦ã„ã¾ã™ãŒã€Rails ã§ä½¿ç”¨ã™ã‚‹ DB ãƒ†ãƒ¼ãƒ–ãƒ«ã¯ã¾ã ä½œæˆã•ã‚Œã¦ã„ãªã„ã®ã§ä½œæˆã—ã¾ã™ã€‚ä½•æ°—ã« spring ã‚’ä½¿ã£ã¦ã„ã‚‹ç‚¹ã«æ³¨ç›®ã§ã™ã€‚7. http://localhost:3000/ ã«ã‚¢ã‚¯ã‚»ã‚¹ã—ã¦ Rails ãŒå‹•ã„ã¦ã„ã‚‹ã“ã¨ã‚’ç¢ºèªã“ã“ã¾ã§ã®æ“ä½œã§ Rails ãŒæ­£ã—ãå‹•ä½œã—ã¦ã„ã‚‹ã¯ãšã§ã™ã€‚Yay! Youâ€™re on Rails!ãƒã‚¤ãƒ³ãƒˆbundle install ãŒæ¯å›èµ°ã‚‰ãªã„ã‚ˆã†ã«å·¥å¤«ã—ã¦ã„ã‚‹Dockerfile ã§ WORKDIR ã« /tmp ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã‚’æŒ‡å®šã—ã¦ã„ã‚‹ã¨ã“ã‚ãŒãƒã‚¤ãƒ³ãƒˆã§ã™ã€‚ã“ã‚Œã‚’ã›ãšã« WORKDIR /myapp ã‹ã‚‰ã® ADD . /myapp ã‚’ã‚„ã£ã¦ã—ã¾ã†ã¨ã€ Rails ã®ã‚³ãƒ¼ãƒ‰ã«å¤‰æ›´ãŒã‚ã‚‹åº¦ã« bundle install ãŒæœ€åˆã‹ã‚‰å®Ÿè¡Œã•ã‚Œã¦ã—ã¾ã„ã¾ã™ã€‚Gemfile ã¨ Gemfile.lock ã‚’ /tmp ã«æ ¼ç´ã™ã‚‹ã“ã¨ã§ã€ã“ã‚Œã‚‰ã®ãƒ•ã‚¡ã‚¤ãƒ«ã«å¤‰æ›´ãŒãªã„é™ã‚Š bundle install ãŒå®Ÿè¡Œã•ã‚Œãªã„ã‚ˆã†ã«ãªã£ã¦ã„ã¾ã™ã€‚WORKDIR /tmpADD Gemfile GemfileADD Gemfile.lock Gemfile.lockRUN bundle installWORKDIR /myappADD . /myappå‚è€ƒ: Dockerã§Rails + MySQLã®é–‹ç™ºç’°å¢ƒã‚’æ§‹ç¯‰ | EasyRamblespring ã«å¯¾å¿œRails ã§é–‹ç™ºã™ã‚‹ä¸Šã§æ¬ ã‹ã›ãªã„ spring ã‚‚åˆ©ç”¨ã§ãã‚‹ã‚ˆã†ã«ã—ã¦ã‚ã‚Šã¾ã™ã€‚å‰è¿°ã® rake db:create ã®æ™‚ã«ã‚‚å‡ºã¦ãã¾ã—ãŸãŒã€$ docker-compose exec spring spring rails console ã®ã‚ˆã†ã«ã—ã¦ä½¿ã„ã¾ã™ã€‚spring ãŒ 2 å›å‡ºã¦ãã‚‹ã¨ã“ã‚ãŒãƒã‚¤ãƒ³ãƒˆã§ã™ã€‚ä¸€ã¤ç›®ã¯ã‚³ãƒ³ãƒ†ãƒŠã®ã‚µãƒ¼ãƒ“ã‚¹åã§ã™ã€‚æ¯å›æ›¸ãã®ã¯ã ã‚‹ã„ã®ã§åƒ•ã¯ alias ã«ã—ã¦ã„ã¾ã™ã€‚fish shell ç”¨ãªã®ã§è‰¯ã„ã‚ˆã†ã«èª­ã¿æ›¿ãˆã¦ä¸‹ã•ã„ ğŸ™# ~/.config/fish/config.fish# docker-compose aliasesfunction fig  docker-compose $argvendfunction figspring  docker-compose exec spring spring $argvend# USAGE$ figspring rails cå‚è€ƒ: é«˜é€Ÿã«é–‹ç™ºã§ãã‚‹ Docker + Railsé–‹ç™ºç’°å¢ƒã®ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã‚’ä½œã£ãŸ - QiitaMySQL ãƒ‡ãƒ¼ã‚¿ã®æ°¸ç¶šåŒ–ã‚¤ãƒ¡ãƒ¼ã‚¸ã‚’ä½œã‚Šç›´ã—ãŸæ™‚ã« MySQL ã®ãƒ‡ãƒ¼ã‚¿ãŒå¤±ã‚ã‚Œã¦ã—ã¾ã†ã®ã¯è¾›ã„ã‚‚ã®ãŒã‚ã‚Šã¾ã™ã€‚æ¯å›ãƒ†ã‚¹ãƒˆç”¨ã®ãƒ‡ãƒ¼ã‚¿ã‚’ä¸€ã‹ã‚‰ä½œã‚Šç›´ã—ãŸããªã„ã®ã§ã€ docker-compose.yml ã§ä»¥ä¸‹ã®ã‚ˆã†ã«æŒ‡å®šã—ã¦MySQL ã®ãƒ‡ãƒ¼ã‚¿ã‚’æ°¸ç¶šåŒ–ã•ã›ã¦ã„ã¾ã™ã€‚  db:    image: mysql:5.7    volumes:      - .mysql_data:/var/lib/mysql # \u003c- ã“ã‚Œï¼    environment:      MYSQL_ROOT_PASSWORD: xxxxxx.mysql_data ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªä»¥ä¸‹ã« MySQL ã®ãƒ‡ãƒ¼ã‚¿ãŒæ ¼ç´ã•ã‚Œã¦ã„ã¾ã™ã€‚ãƒªãƒã‚¸ãƒˆãƒªã® .gitignore ã§ç„¡è¦–ã•ã›ã¦ã„ã¾ã™ã€‚è©¦ã—ã¦ã„ã¾ã›ã‚“ãŒã€å‚è€ƒã«ã•ã›ã¦é ‚ã„ãŸè¨˜äº‹ã«ã‚ˆã‚‹ã¨ Docker for Mac ä»¥å¤–ã®ç’°å¢ƒã§ã¯å•é¡ŒãŒç™ºç”Ÿã™ã‚‹ã‚ˆã†ã§ã™ã®ã§ã”æ³¨æ„ä¸‹ã•ã„ã€‚å¯¾å¿œæ–¹æ³•ã‚‚è¨˜äº‹å†…ã§ç´¹ä»‹ã•ã‚Œã¦ã„ã¾ã™ ğŸ™å‚è€ƒ: docker composeã§MySQLã®ãƒ‡ãƒ¼ã‚¿é ˜åŸŸã‚’ãƒ­ãƒ¼ã‚«ãƒ«ã«ãƒã‚¦ãƒ³ãƒˆã™ã‚‹ | WEB EGGã¾ã¨ã‚é€±æœ«ã«ä½•ã‹ã‚¢ãƒ—ãƒªã§ã‚‚æ›¸ã“ã†ã‹ã¨æ€ã£ãŸæ™‚ã«ã€ã¤ã„ã§ã« Docker ã§ç’°å¢ƒæ§‹ç¯‰ã‚‚ã‚„ã£ã¡ã‚ƒã†ã‹ã€ã¨æ€ã„ç«‹ã£ã¦æ›¸ãã¾ã—ãŸã€‚ãã†ã“ã†ã—ã¦ã‚‹ã†ã¡ã«é€±æœ«ã®åŠåˆ†ãã‚‰ã„ãŒéãå»ã£ã¦ã„ã¾ã™ãŒã€ãã£ã¨ä»Šå¾Œã¯æ—ã‚‹ã¯ãšã€‚ã€‚ ğŸ˜‡ä½•åº¦ã‚‚ç¢ºèªã—ã¦ã„ã¾ã™ãŒã€ã‚‚ã—é–“é•ã£ã¦ã„ã‚‹ç‚¹ã€ä¸ä¾¿ãªç‚¹ãªã©ã‚ã‚Šã¾ã—ãŸã‚‰ãã£ã¨æ•™ãˆã¦é ‚ã‘ã¾ã™ã¨å¹¸ã„ã§ã™ ğŸ™Fork ã‚‚å¤§æ­“è¿ã§ã™ã—ã€èª°ã‹ã«ä½¿ã£ã¦ã‚‚ã‚‰ãˆã‚‹ã¨å¬‰ã—ã„ã§ã™ ğŸ˜","link":"https://developer.feedforce.jp/entry/2018/02/11/140012","isoDate":"2018-02-11T05:00:12.000Z","dateMiliSeconds":1518325212000,"imageUrl":"https://cdn-ak.f.st-hatena.com/images/fotolife/r/ryz310/20180211/20180211110115.png","authorName":"ryz310"},{"title":"mackerel ã®ã‚«ã‚¹ã‚¿ãƒ ãƒ¡ãƒˆãƒªãƒƒã‚¯ã‚’ echo ã§ãƒ¯ãƒ³ãƒ©ã‚¤ãƒŠãƒ¼ã—ãŸã£ãŸ","content":"\u003cp\u003eã©ã†ã‚‚ã€ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢ã®ã‚µãƒˆã‚¦ãƒªãƒ§ã‚¦ã‚¹ã‚±ã§ã™ âœŒï¸('Ï‰')âœŒï¸\u003c/p\u003e\n\n\u003cp\u003eçªç„¶ã§ã™ãŒãƒ¯ãƒ†ã‚¯ã‚·ã€ Rails ã‚¢ãƒ—ãƒªã¯ãã“ãã“æ›¸ã‘ã‚‹æ–¹ãªã‚“ã§ã™ãŒã€ã‚¤ãƒ³ãƒ•ãƒ©ã¯ã‹ã‚‰ãã—ã ã£ãŸã‚Šã—ã¾ã™ã€‚ \u003ca href=\"https://dic.pixiv.net/a/%E3%82%AD%E3%83%A2%E3%83%BC%E3%82%A4%E3%82%AC%E3%83%BC%E3%83%AB%E3%82%BA\"\u003eãƒ•ãƒ«ã‚¹ã‚¿ãƒƒã‚¯ã˜ã‚ƒãªã„ã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢ãŒè¨±ã•ã‚Œã‚‹ã®ã¯å°å­¦ç”Ÿã¾ã§ã ã‚ˆã­ãƒ¼\u003c/a\u003eã€ã¨ã„ã†ã¡ã‚‡ã£ã¨æ‡ã‹ã—ã¿ã®ã‚ã‚‹ç…½ã‚ŠãŒç¤¾å†…ã®ã‹ã‚‰ã‚‚èã“ãˆã¦ããã†ãªã®ã§ã€æœ€è¿‘ã‚¤ãƒ³ãƒ•ãƒ©ã‚’å°‘ã—ãšã¤è§¦ã‚‹ã‚ˆã†ã«ã—ã¦ã„ã¾ã™ã€‚è§¦ã£ã¦ã¿ã‚‹ã¨ã‚¤ãƒ³ãƒ•ãƒ©ã‚‚è‰²ã€…æ¥½ã—ã„ã§ã™ã­ âœŒï¸('Ï‰')âœŒï¸\u003c/p\u003e\n\n\u003cp\u003eã¨ã¯ã„ãˆã€ã‚¤ãƒ³ãƒ•ãƒ©ã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢ãƒ¬ãƒ™ãƒ« 1 ã®è‡ªåˆ†ãŒã‚ã‚Œã“ã‚Œã‚„ã£ã¦ã‚‚éšœå®³ã«ç¹‹ãŒã‚‹ã ã‘ãªã®ã§ã€ã¾ãšã¯ãŠæ‰‹è»½ãªé›‘ç”¨ã‚¿ã‚¹ã‚¯ã‹ã‚‰å§‹ã‚ã‚‹ã“ã¨ã«ã—ã¾ã—ãŸã€‚\u003c/p\u003e\n\n\u003cp\u003eã•ã¦ã€å°‘ã—è©±ã¯å¤‰ã‚ã£ã¦ã€æœ€è¿‘ã€å¼Šç¤¾ã‚µãƒ¼ãƒ“ã‚¹ã§ Sidekiq ãƒ—ãƒ­ã‚»ã‚¹ã®ãƒ•ã‚¡ã‚¤ãƒ«ãƒ‡ã‚£ã‚¹ã‚¯ãƒªãƒ—ã‚¿ãŒæ€¥é¨°ã—ã¦ã‚µãƒ¼ãƒãƒ¼ãŒãƒ€ã‚¦ãƒ³ã™ã‚‹ã€ã¨ã„ã†éšœå®³ãŒä½•åº¦ã‹ç™ºç”Ÿã—ã¾ã—ãŸã€‚\nç¾è±¡ã¨ã—ã¦ã¯ Sidekiq ãƒ—ãƒ­ã‚»ã‚¹ã®ãƒ•ã‚¡ã‚¤ãƒ«ãƒ‡ã‚£ã‚¹ã‚¯ãƒªãƒ—ã‚¿ãŒä¸Šé™å€¤ (åˆæœŸå€¤ã¯ \u003ccode\u003e1024\u003c/code\u003e ) ã«é”ã™ã‚‹ã¨ã€ã‚µãƒ¼ãƒãƒ¼ã® CPU ä½¿ç”¨ç‡ãŒ 100 % ä»˜è¿‘ã¾ã§é”ã—ã¦ã—ã¾ã†ã€ã¨ã„ã†ã‚‚ã®ã ã£ãŸã®ã§ã€ãƒ•ã‚¡ã‚¤ãƒ«ãƒ‡ã‚£ã‚¹ã‚¯ãƒªãƒ—ã‚¿ã®ä¸Šé™ã‚’ \u003ccode\u003e65536\u003c/code\u003e ã¾ã§ä¸Šã’ã‚‹ã€ã¨ã„ã†ãƒ¯ãƒ¼ã‚¯ã‚¢ãƒ©ã‚¦ãƒ³ãƒ‰ãªå¯¾å¿œã§å‡Œã„ã§ã„ã¾ã—ãŸã€‚\u003c/p\u003e\n\n\u003cp\u003eç¾åœ¨ã¯è§£æ±ºæ¸ˆã¿ï¼ˆã“ã®åŸå› ã«ã¤ã„ã¦ã¯ã€åˆ¥é€”è¨˜äº‹ã«ã—ã¾ã™ï¼‰ã§ã™ãŒã€å½“æ™‚ã¯ãªãœãƒ•ã‚¡ã‚¤ãƒ«ãƒ‡ã‚£ã‚¹ã‚¯ãƒªãƒ—ã‚¿ã®æ•°ãŒä¸Šæ˜‡ã—ç¶šã‘ã¦ã—ã¾ã†ã®ã‹åŸå› ãŒå…¨ãã‚ã‹ã‚‰ãšã€ãƒãƒ¼ãƒ ã®ã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢ã¯å®‰çœ ã§ããªã„æ—¥ã€…ãŒç¶šã„ã¦ã„ã¾ã—ãŸã€‚ã¨ã‚Šã‚ãˆãš Sidekiq ã®ãƒ—ãƒ­ã‚»ã‚¹ã‚’ãƒªã‚¹ã‚¿ãƒ¼ãƒˆã™ã‚Œã°ãƒ•ã‚¡ã‚¤ãƒ«ãƒ‡ã‚£ã‚¹ã‚¯ãƒªãƒ—ã‚¿ã®æ•°ã¯ä¸€æ—¦ãƒªã‚»ãƒƒãƒˆã•ã‚Œã‚‹ã®ã§ã€ç›£è¦–ã—ã¦ã‚„ã°ããªã£ãŸã‚‰ã‚¢ãƒ©ãƒ¼ãƒˆã‚’é£›ã°ã—ã¦å†èµ·å‹•ã•ã›ã‚‹ã€ã¨ã„ã†æ–¹æ³•ã§ä¸€æ—¦ã¯å‡Œã¾ã™ã€‚ã¾ãŸã€ç¶™ç¶šã—ã¦ç›£è¦–ã™ã‚‹ã“ã¨ã§ã€åŸå› ã®è§£æ˜ã«ã‚‚ç¹‹ãŒã‚‹ã‹ã‚‚ã—ã‚Œã¾ã›ã‚“ã€‚\u003c/p\u003e\n\n\u003cp\u003eå¼Šç¤¾ã®ã‚µãƒ¼ãƒ“ã‚¹ã§ã¯ç›£è¦–ã« \u003ca href=\"https://mackerel.io/\"\u003emackerel\u003c/a\u003e ã‚’åˆ©ç”¨ã—ã¦ã„ã‚‹ã®ã§ã€ã‚«ã‚¹ã‚¿ãƒ ãƒ¡ãƒˆãƒªãƒƒã‚¯ã‚’ä½¿ã£ã¦ãŠæ‰‹è»½ã«ç›£è¦–ã•ã›ã‚ˆã†ã€ã¨ã„ã†ã“ã¨ã«ãªã‚Šã¾ã—ãŸã€‚\nmackerel ã®ã‚«ã‚¹ã‚¿ãƒ ãƒ¡ãƒˆãƒªãƒƒã‚¯ã®æŠ•ç¨¿æ–¹æ³•ã¯ \u003ca href=\"https://mackerel.io/ja/docs/entry/advanced/custom-metrics\"\u003eã“ã¡ã‚‰ã®è¨˜äº‹\u003c/a\u003e ã«ã¾ã¨ã¾ã£ã¦ã„ã¾ã™ã€‚\nè¦ç‚¹ã ã‘æŠœç²‹ã—ã¾ã™ã¨ã€ \u003ca href=\"https://mackerel.io/ja/docs/entry/spec/agent#config-file\"\u003emackerel-agent ã®è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«\u003c/a\u003e ã« \u003cstrong\u003eä»¥ä¸‹ã®æ›¸å¼ã§æ¨™æº–å‡ºåŠ›ã‚’å®Ÿè¡Œã™ã‚‹ã‚³ãƒãƒ³ãƒ‰ã‚’è¨˜è¿°\u003c/strong\u003e ã™ã‚Œã° OK ã§ã™ã€‚\u003c/p\u003e\n\n\u003cblockquote\u003e\u003cp\u003eè¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ã§æŒ‡å®šã™ã‚‹ã‚³ãƒãƒ³ãƒ‰ã¯ã€æ¨™æº–å‡ºåŠ›ã®å„è¡Œã«ä»¥ä¸‹ã®ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆã®å‡ºåŠ›ã‚’ã™ã‚‹ã“ã¨ãŒæœŸå¾…ã•ã‚Œã¾ã™ï¼ˆ\u003ccode\u003e\\t\u003c/code\u003e ã¯ã‚¿ãƒ–æ–‡å­—ã§ã™ï¼‰:\u003c/p\u003e\u003c/blockquote\u003e\n\n\u003cpre class=\"code\" data-lang=\"\" data-unlink\u003e{metric name}\\t{metric value}\\t{epoch seconds}\u003c/pre\u003e\n\n\n\u003cp\u003eãã—ã¦ä»¥ä¸‹ãŒãƒ•ã‚¡ã‚¤ãƒ«ãƒ‡ã‚£ã‚¹ã‚¯ãƒªãƒ—ã‚¿ã‚’ç›£è¦–ã™ã‚‹ãŸã‚ã®è¨­å®šã§ã™ï¼ˆå®Œæˆå“ãŒãƒ¬ãƒ³ã‚¸ã‹ã‚‰å‡ºã¦ãã‚‹ãƒ‘ãƒ†ã‚£ãƒ¼ãƒ³ï¼‰\u003c/p\u003e\n\n\u003cpre class=\"code\" data-lang=\"\" data-unlink\u003e[plugin.metrics.file_descriptor_count]\ncommand = \u0026#39;\u0026#39;\u0026#39;\n  echo -e \u0026#34;file_descriptor.sidekiq\\\\t$(sudo ls /proc/$(pgrep -f -u {user_name} sidekiq | head -1)/fd/ | wc -l)\\\\t$(date -u +%s)\u0026#34;\n\u0026#39;\u0026#39;\u0026#39;\u003c/pre\u003e\n\n\n\u003cp\u003eæ¨™æº–å‡ºåŠ›ã•ã‚Œã‚Œã° OK ãªã®ã§ã€ \u003ccode\u003eecho\u003c/code\u003e ã§ä»»æ„ã®æ–‡å­—åˆ—ã‚’å‡ºåŠ›ã™ã‚‹ã‚ˆã†ãªæ–¹æ³•ã§ã‚‚å®Ÿç¾å¯èƒ½ã§ã™ã€‚å†…éƒ¨ã§ \u003ccode\u003epgrep -f -u {user_name} sidekiq\u003c/code\u003e ã¨æ›¸ã„ã¦ã€ãƒ—ãƒ­ã‚»ã‚¹ ID ã‚’å–å¾—ã—ã¦ã„ã¾ã™ãŒã€ \u003ccode\u003e-u\u003c/code\u003e ã§ãƒ—ãƒ­ã‚»ã‚¹ã‚’å®Ÿè¡Œã—ã¦ã„ã‚‹ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚’æŒ‡å®šã—ãªã„ã¨ã€ \u003ccode\u003epgrep\u003c/code\u003e ã®ãƒ—ãƒ­ã‚»ã‚¹ ID ã‚’å–å¾—ã—ã¦ã—ã¾ã†ã‚±ãƒ¼ã‚¹ãŒã‚ã‚‹ã®ã§æ³¨æ„ãŒå¿…è¦ã§ã™ã€‚(mackerel-agent ã¯ \u003ccode\u003eroot\u003c/code\u003e ã§å®Ÿè¡Œã•ã‚Œã‚‹)\nåŒã˜è¦é ˜ã§ã€ä»–ã«ã‚‚ä»¥ä¸‹ã®ã‚ˆã†ã«æ›¸ã‘ã° \u003ccode\u003epuma\u003c/code\u003e ã®ãƒ•ã‚¡ã‚¤ãƒ«ãƒ‡ã‚£ã‚¹ã‚¯ãƒªãƒ—ã‚¿ã‚‚å–ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚\u003c/p\u003e\n\n\u003cpre class=\"code\" data-lang=\"\" data-unlink\u003e[plugin.metrics.file_descriptor_count]\ncommand = \u0026#39;\u0026#39;\u0026#39;\n  echo -e \u0026#34;file_descriptor.puma\\\\t$(sudo ls /proc/$(pgrep -f -u {user_name} puma.sock | head -1)/fd/ | wc -l)\\\\t$(date -u +%s)\u0026#34;\n  echo -e \u0026#34;file_descriptor.puma_cluster_worker\\\\t$(sudo ls /proc/$(pgrep -f -u {user_name} \u0026#39;puma: cluster worker\u0026#39; | head -1)/fd/ | wc -l)\\\\t$(date -u +%s)\u0026#34;\n\u0026#39;\u0026#39;\u0026#39;\u003c/pre\u003e\n\n\n\u003cp\u003eã¡ãªã¿ã«ã“ã®è¨˜äº‹ã‚’æ›¸ãã¨ãã«ã€ã‚‚ã—ã‚„ã¨æ€ã£ã¦èª¿ã¹ã¦ã¿ãŸã‚‰ã€ \u003ccode\u003emackerel-agent-plugins\u003c/code\u003e ã®ä¸­ã« \u003ca href=\"https://github.com/mackerelio/mackerel-agent-plugins/tree/master/mackerel-plugin-proc-fd\"\u003eä»»æ„ã®ãƒ—ãƒ­ã‚»ã‚¹ã®ãƒ•ã‚¡ã‚¤ãƒ«ãƒ‡ã‚£ã‚¹ã‚¯ãƒªãƒ—ã‚¿ã‚’ç›£è¦–ã™ã‚‹å¥´\u003c/a\u003e ãŒã‚ã‚Šã¾ã—ãŸ ğŸ˜“\nè©¦ã—ã¦ã„ã¾ã›ã‚“ãŒã€ã“ã£ã¡ã‚’ä½¿ã£ãŸæ–¹ãŒè‰¯ã„ã¨æ€ã„ã¾ã™ ğŸ˜‡\u003c/p\u003e\n\n\u003cp\u003eãã‚“ãªæ„Ÿã˜ã§ç›£è¦–ã§ããŸã‚°ãƒ©ãƒ•ãŒä»¥ä¸‹ã«ãªã‚Šã¾ã™ã€‚\u003c/p\u003e\n\n\u003cp\u003e\u003cspan itemscope itemtype=\"http://schema.org/Photograph\"\u003e\u003cimg src=\"https://cdn-ak.f.st-hatena.com/images/fotolife/r/ryz310/20171231/20171231142049.png\" alt=\"f:id:ryz310:20171231142049p:plain\" title=\"f:id:ryz310:20171231142049p:plain\" class=\"hatena-fotolife\" itemprop=\"image\"\u003e\u003c/span\u003e\u003c/p\u003e\n\n\u003cp\u003eãƒ•ã‚¡ã‚¤ãƒ«ãƒ‡ã‚£ã‚¹ã‚¯ãƒªãƒ—ã‚¿æ•°ãŒãƒ•ã‚¡ã‚¤ãƒŠãƒ«ãƒ•ã‚¡ãƒ³ã‚¿ã‚¸ãƒ¼ã® HP ã¿ãŸã„ã«ãªã£ã¦ã¾ã™ã­ã€‚ã€‚ã€‚\nã¨ã‚Šã‚ãˆãš \u003ccode\u003e10,000\u003c/code\u003e ã‚’è¶…ãˆãŸã‚‰ã‚¢ãƒ©ãƒ¼ãƒˆã‚’é£›ã°ã™ã‚ˆã†ã«è¨­å®šã—ã¾ã—ãŸãŒã€ãƒ‡ãƒ—ãƒ­ã‚¤ã™ã‚‹åº¦ã«ãƒªã‚»ãƒƒãƒˆã•ã‚Œã‚‹ã®ã§ã€çµå±€ã‚¢ãƒ©ãƒ¼ãƒˆãŒé£›ã¶ã“ã¨ã‚‚éšœå®³ãŒç™ºç”Ÿã™ã‚‹ã“ã¨ã‚‚ãªãã€å•é¡Œã¯è§£æ±ºã—ã¾ã—ãŸã€‚\u003c/p\u003e\n\n\u003cp\u003eæœ¬ç¨¿ã§ã¯ \u003ccode\u003eecho\u003c/code\u003e ã‚’ä½¿ã£ãŸãƒ¯ãƒ³ãƒ©ã‚¤ãƒŠãƒ¼ã§ã‚«ã‚¹ã‚¿ãƒ ãƒ¡ãƒˆãƒªãƒƒã‚¯ã‚’æŠ•ç¨¿ã™ã‚‹æ–¹æ³•ã‚’ç´¹ä»‹ã—ã¾ã—ãŸã€‚\n\u003ccode\u003emackerel-agent-plugins\u003c/code\u003e ã«è¼‰ã£ã¦ã„ãªã„ã‘ã©ãƒ¯ãƒ¼ã‚¯ã‚¢ãƒ©ã‚¦ãƒ³ãƒ‰ã§ã¨ã‚Šã‚ãˆãšç›£è¦–ã•ã›ãŸã„ã€ã¨ã„ã†æ™‚ã¯ä¾¿åˆ©ã ã¨æ€ã†ã®ã§ã€ã©ã“ã‹ã§ã”æ´»ç”¨ãã ã•ã„ ğŸ™\u003c/p\u003e\n","contentSnippet":"ã©ã†ã‚‚ã€ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢ã®ã‚µãƒˆã‚¦ãƒªãƒ§ã‚¦ã‚¹ã‚±ã§ã™ âœŒï¸('Ï‰')âœŒï¸çªç„¶ã§ã™ãŒãƒ¯ãƒ†ã‚¯ã‚·ã€ Rails ã‚¢ãƒ—ãƒªã¯ãã“ãã“æ›¸ã‘ã‚‹æ–¹ãªã‚“ã§ã™ãŒã€ã‚¤ãƒ³ãƒ•ãƒ©ã¯ã‹ã‚‰ãã—ã ã£ãŸã‚Šã—ã¾ã™ã€‚ ãƒ•ãƒ«ã‚¹ã‚¿ãƒƒã‚¯ã˜ã‚ƒãªã„ã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢ãŒè¨±ã•ã‚Œã‚‹ã®ã¯å°å­¦ç”Ÿã¾ã§ã ã‚ˆã­ãƒ¼ã€ã¨ã„ã†ã¡ã‚‡ã£ã¨æ‡ã‹ã—ã¿ã®ã‚ã‚‹ç…½ã‚ŠãŒç¤¾å†…ã®ã‹ã‚‰ã‚‚èã“ãˆã¦ããã†ãªã®ã§ã€æœ€è¿‘ã‚¤ãƒ³ãƒ•ãƒ©ã‚’å°‘ã—ãšã¤è§¦ã‚‹ã‚ˆã†ã«ã—ã¦ã„ã¾ã™ã€‚è§¦ã£ã¦ã¿ã‚‹ã¨ã‚¤ãƒ³ãƒ•ãƒ©ã‚‚è‰²ã€…æ¥½ã—ã„ã§ã™ã­ âœŒï¸('Ï‰')âœŒï¸ã¨ã¯ã„ãˆã€ã‚¤ãƒ³ãƒ•ãƒ©ã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢ãƒ¬ãƒ™ãƒ« 1 ã®è‡ªåˆ†ãŒã‚ã‚Œã“ã‚Œã‚„ã£ã¦ã‚‚éšœå®³ã«ç¹‹ãŒã‚‹ã ã‘ãªã®ã§ã€ã¾ãšã¯ãŠæ‰‹è»½ãªé›‘ç”¨ã‚¿ã‚¹ã‚¯ã‹ã‚‰å§‹ã‚ã‚‹ã“ã¨ã«ã—ã¾ã—ãŸã€‚ã•ã¦ã€å°‘ã—è©±ã¯å¤‰ã‚ã£ã¦ã€æœ€è¿‘ã€å¼Šç¤¾ã‚µãƒ¼ãƒ“ã‚¹ã§ Sidekiq ãƒ—ãƒ­ã‚»ã‚¹ã®ãƒ•ã‚¡ã‚¤ãƒ«ãƒ‡ã‚£ã‚¹ã‚¯ãƒªãƒ—ã‚¿ãŒæ€¥é¨°ã—ã¦ã‚µãƒ¼ãƒãƒ¼ãŒãƒ€ã‚¦ãƒ³ã™ã‚‹ã€ã¨ã„ã†éšœå®³ãŒä½•åº¦ã‹ç™ºç”Ÿã—ã¾ã—ãŸã€‚ç¾è±¡ã¨ã—ã¦ã¯ Sidekiq ãƒ—ãƒ­ã‚»ã‚¹ã®ãƒ•ã‚¡ã‚¤ãƒ«ãƒ‡ã‚£ã‚¹ã‚¯ãƒªãƒ—ã‚¿ãŒä¸Šé™å€¤ (åˆæœŸå€¤ã¯ 1024 ) ã«é”ã™ã‚‹ã¨ã€ã‚µãƒ¼ãƒãƒ¼ã® CPU ä½¿ç”¨ç‡ãŒ 100 % ä»˜è¿‘ã¾ã§é”ã—ã¦ã—ã¾ã†ã€ã¨ã„ã†ã‚‚ã®ã ã£ãŸã®ã§ã€ãƒ•ã‚¡ã‚¤ãƒ«ãƒ‡ã‚£ã‚¹ã‚¯ãƒªãƒ—ã‚¿ã®ä¸Šé™ã‚’ 65536 ã¾ã§ä¸Šã’ã‚‹ã€ã¨ã„ã†ãƒ¯ãƒ¼ã‚¯ã‚¢ãƒ©ã‚¦ãƒ³ãƒ‰ãªå¯¾å¿œã§å‡Œã„ã§ã„ã¾ã—ãŸã€‚ç¾åœ¨ã¯è§£æ±ºæ¸ˆã¿ï¼ˆã“ã®åŸå› ã«ã¤ã„ã¦ã¯ã€åˆ¥é€”è¨˜äº‹ã«ã—ã¾ã™ï¼‰ã§ã™ãŒã€å½“æ™‚ã¯ãªãœãƒ•ã‚¡ã‚¤ãƒ«ãƒ‡ã‚£ã‚¹ã‚¯ãƒªãƒ—ã‚¿ã®æ•°ãŒä¸Šæ˜‡ã—ç¶šã‘ã¦ã—ã¾ã†ã®ã‹åŸå› ãŒå…¨ãã‚ã‹ã‚‰ãšã€ãƒãƒ¼ãƒ ã®ã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢ã¯å®‰çœ ã§ããªã„æ—¥ã€…ãŒç¶šã„ã¦ã„ã¾ã—ãŸã€‚ã¨ã‚Šã‚ãˆãš Sidekiq ã®ãƒ—ãƒ­ã‚»ã‚¹ã‚’ãƒªã‚¹ã‚¿ãƒ¼ãƒˆã™ã‚Œã°ãƒ•ã‚¡ã‚¤ãƒ«ãƒ‡ã‚£ã‚¹ã‚¯ãƒªãƒ—ã‚¿ã®æ•°ã¯ä¸€æ—¦ãƒªã‚»ãƒƒãƒˆã•ã‚Œã‚‹ã®ã§ã€ç›£è¦–ã—ã¦ã‚„ã°ããªã£ãŸã‚‰ã‚¢ãƒ©ãƒ¼ãƒˆã‚’é£›ã°ã—ã¦å†èµ·å‹•ã•ã›ã‚‹ã€ã¨ã„ã†æ–¹æ³•ã§ä¸€æ—¦ã¯å‡Œã¾ã™ã€‚ã¾ãŸã€ç¶™ç¶šã—ã¦ç›£è¦–ã™ã‚‹ã“ã¨ã§ã€åŸå› ã®è§£æ˜ã«ã‚‚ç¹‹ãŒã‚‹ã‹ã‚‚ã—ã‚Œã¾ã›ã‚“ã€‚å¼Šç¤¾ã®ã‚µãƒ¼ãƒ“ã‚¹ã§ã¯ç›£è¦–ã« mackerel ã‚’åˆ©ç”¨ã—ã¦ã„ã‚‹ã®ã§ã€ã‚«ã‚¹ã‚¿ãƒ ãƒ¡ãƒˆãƒªãƒƒã‚¯ã‚’ä½¿ã£ã¦ãŠæ‰‹è»½ã«ç›£è¦–ã•ã›ã‚ˆã†ã€ã¨ã„ã†ã“ã¨ã«ãªã‚Šã¾ã—ãŸã€‚mackerel ã®ã‚«ã‚¹ã‚¿ãƒ ãƒ¡ãƒˆãƒªãƒƒã‚¯ã®æŠ•ç¨¿æ–¹æ³•ã¯ ã“ã¡ã‚‰ã®è¨˜äº‹ ã«ã¾ã¨ã¾ã£ã¦ã„ã¾ã™ã€‚è¦ç‚¹ã ã‘æŠœç²‹ã—ã¾ã™ã¨ã€ mackerel-agent ã®è¨­å®šãƒ•ã‚¡ã‚¤ãƒ« ã« ä»¥ä¸‹ã®æ›¸å¼ã§æ¨™æº–å‡ºåŠ›ã‚’å®Ÿè¡Œã™ã‚‹ã‚³ãƒãƒ³ãƒ‰ã‚’è¨˜è¿° ã™ã‚Œã° OK ã§ã™ã€‚è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ã§æŒ‡å®šã™ã‚‹ã‚³ãƒãƒ³ãƒ‰ã¯ã€æ¨™æº–å‡ºåŠ›ã®å„è¡Œã«ä»¥ä¸‹ã®ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆã®å‡ºåŠ›ã‚’ã™ã‚‹ã“ã¨ãŒæœŸå¾…ã•ã‚Œã¾ã™ï¼ˆ\\t ã¯ã‚¿ãƒ–æ–‡å­—ã§ã™ï¼‰:{metric name}\\t{metric value}\\t{epoch seconds}ãã—ã¦ä»¥ä¸‹ãŒãƒ•ã‚¡ã‚¤ãƒ«ãƒ‡ã‚£ã‚¹ã‚¯ãƒªãƒ—ã‚¿ã‚’ç›£è¦–ã™ã‚‹ãŸã‚ã®è¨­å®šã§ã™ï¼ˆå®Œæˆå“ãŒãƒ¬ãƒ³ã‚¸ã‹ã‚‰å‡ºã¦ãã‚‹ãƒ‘ãƒ†ã‚£ãƒ¼ãƒ³ï¼‰[plugin.metrics.file_descriptor_count]command = '''  echo -e \"file_descriptor.sidekiq\\\\t$(sudo ls /proc/$(pgrep -f -u {user_name} sidekiq | head -1)/fd/ | wc -l)\\\\t$(date -u +%s)\"'''æ¨™æº–å‡ºåŠ›ã•ã‚Œã‚Œã° OK ãªã®ã§ã€ echo ã§ä»»æ„ã®æ–‡å­—åˆ—ã‚’å‡ºåŠ›ã™ã‚‹ã‚ˆã†ãªæ–¹æ³•ã§ã‚‚å®Ÿç¾å¯èƒ½ã§ã™ã€‚å†…éƒ¨ã§ pgrep -f -u {user_name} sidekiq ã¨æ›¸ã„ã¦ã€ãƒ—ãƒ­ã‚»ã‚¹ ID ã‚’å–å¾—ã—ã¦ã„ã¾ã™ãŒã€ -u ã§ãƒ—ãƒ­ã‚»ã‚¹ã‚’å®Ÿè¡Œã—ã¦ã„ã‚‹ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚’æŒ‡å®šã—ãªã„ã¨ã€ pgrep ã®ãƒ—ãƒ­ã‚»ã‚¹ ID ã‚’å–å¾—ã—ã¦ã—ã¾ã†ã‚±ãƒ¼ã‚¹ãŒã‚ã‚‹ã®ã§æ³¨æ„ãŒå¿…è¦ã§ã™ã€‚(mackerel-agent ã¯ root ã§å®Ÿè¡Œã•ã‚Œã‚‹)åŒã˜è¦é ˜ã§ã€ä»–ã«ã‚‚ä»¥ä¸‹ã®ã‚ˆã†ã«æ›¸ã‘ã° puma ã®ãƒ•ã‚¡ã‚¤ãƒ«ãƒ‡ã‚£ã‚¹ã‚¯ãƒªãƒ—ã‚¿ã‚‚å–ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚[plugin.metrics.file_descriptor_count]command = '''  echo -e \"file_descriptor.puma\\\\t$(sudo ls /proc/$(pgrep -f -u {user_name} puma.sock | head -1)/fd/ | wc -l)\\\\t$(date -u +%s)\"  echo -e \"file_descriptor.puma_cluster_worker\\\\t$(sudo ls /proc/$(pgrep -f -u {user_name} 'puma: cluster worker' | head -1)/fd/ | wc -l)\\\\t$(date -u +%s)\"'''ã¡ãªã¿ã«ã“ã®è¨˜äº‹ã‚’æ›¸ãã¨ãã«ã€ã‚‚ã—ã‚„ã¨æ€ã£ã¦èª¿ã¹ã¦ã¿ãŸã‚‰ã€ mackerel-agent-plugins ã®ä¸­ã« ä»»æ„ã®ãƒ—ãƒ­ã‚»ã‚¹ã®ãƒ•ã‚¡ã‚¤ãƒ«ãƒ‡ã‚£ã‚¹ã‚¯ãƒªãƒ—ã‚¿ã‚’ç›£è¦–ã™ã‚‹å¥´ ãŒã‚ã‚Šã¾ã—ãŸ ğŸ˜“è©¦ã—ã¦ã„ã¾ã›ã‚“ãŒã€ã“ã£ã¡ã‚’ä½¿ã£ãŸæ–¹ãŒè‰¯ã„ã¨æ€ã„ã¾ã™ ğŸ˜‡ãã‚“ãªæ„Ÿã˜ã§ç›£è¦–ã§ããŸã‚°ãƒ©ãƒ•ãŒä»¥ä¸‹ã«ãªã‚Šã¾ã™ã€‚ãƒ•ã‚¡ã‚¤ãƒ«ãƒ‡ã‚£ã‚¹ã‚¯ãƒªãƒ—ã‚¿æ•°ãŒãƒ•ã‚¡ã‚¤ãƒŠãƒ«ãƒ•ã‚¡ãƒ³ã‚¿ã‚¸ãƒ¼ã® HP ã¿ãŸã„ã«ãªã£ã¦ã¾ã™ã­ã€‚ã€‚ã€‚ã¨ã‚Šã‚ãˆãš 10,000 ã‚’è¶…ãˆãŸã‚‰ã‚¢ãƒ©ãƒ¼ãƒˆã‚’é£›ã°ã™ã‚ˆã†ã«è¨­å®šã—ã¾ã—ãŸãŒã€ãƒ‡ãƒ—ãƒ­ã‚¤ã™ã‚‹åº¦ã«ãƒªã‚»ãƒƒãƒˆã•ã‚Œã‚‹ã®ã§ã€çµå±€ã‚¢ãƒ©ãƒ¼ãƒˆãŒé£›ã¶ã“ã¨ã‚‚éšœå®³ãŒç™ºç”Ÿã™ã‚‹ã“ã¨ã‚‚ãªãã€å•é¡Œã¯è§£æ±ºã—ã¾ã—ãŸã€‚æœ¬ç¨¿ã§ã¯ echo ã‚’ä½¿ã£ãŸãƒ¯ãƒ³ãƒ©ã‚¤ãƒŠãƒ¼ã§ã‚«ã‚¹ã‚¿ãƒ ãƒ¡ãƒˆãƒªãƒƒã‚¯ã‚’æŠ•ç¨¿ã™ã‚‹æ–¹æ³•ã‚’ç´¹ä»‹ã—ã¾ã—ãŸã€‚mackerel-agent-plugins ã«è¼‰ã£ã¦ã„ãªã„ã‘ã©ãƒ¯ãƒ¼ã‚¯ã‚¢ãƒ©ã‚¦ãƒ³ãƒ‰ã§ã¨ã‚Šã‚ãˆãšç›£è¦–ã•ã›ãŸã„ã€ã¨ã„ã†æ™‚ã¯ä¾¿åˆ©ã ã¨æ€ã†ã®ã§ã€ã©ã“ã‹ã§ã”æ´»ç”¨ãã ã•ã„ ğŸ™","link":"https://developer.feedforce.jp/entry/2017/12/31/143611","isoDate":"2017-12-31T05:36:11.000Z","dateMiliSeconds":1514698571000,"imageUrl":"https://cdn-ak.f.st-hatena.com/images/fotolife/r/ryz310/20171231/20171231142049.png","authorName":"ryz310"},{"title":"Dynamoid ã®ä½¿ã„æ–¹ã€global_secondary_index ç·¨ã€‘","content":"\u003cp\u003eã©ã†ã‚‚ã€ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢ã®ã‚µãƒˆã‚¦ãƒªãƒ§ã‚¦ã‚¹ã‚±ã§ã™ âœŒï¸('Ï‰')âœŒï¸\u003c/p\u003e\n\n\u003cp\u003e\u003ca href=\"http://developer.feedforce.jp/entry/2017/11/04/235323\"\u003eå‰å›\u003c/a\u003eã«å¼•ãç¶šãã€ Dynamoid ç¬¬3å¼¾ã§ã™ âœŒï¸('Ï‰')âœŒï¸\u003c/p\u003e\n\n\u003cp\u003eRails ã§ DynamoDB ã‚’åˆ©ç”¨ã™ã‚‹éš›ã® ORM ã¨ã—ã¦ \u003ccode\u003edynamoid\u003c/code\u003e ãŒã‚ã‚Šã¾ã™ã€‚\nä»Šå›ã¯ \u003ccode\u003edynamoid\u003c/code\u003e ã‹ã‚‰ Global Secondary Index (GSI) ã‚’åˆ©ç”¨ã™ã‚‹æ–¹æ³•ã«ã¤ã„ã¦ç´¹ä»‹ã—ã¾ã™ã€‚\u003c/p\u003e\n\n\u003cul class=\"table-of-contents\"\u003e\n    \u003cli\u003e\u003ca href=\"#Global-Secondary-Index-GSI-ã£ã¦ãªã‚“ã\"\u003eGlobal Secondary Index (GSI) ã£ã¦ãªã‚“ã\u003c/a\u003e\u003cul\u003e\n            \u003cli\u003e\u003ca href=\"#ä»Šå›ã‚‚åç§°ã®æ•´ç†ã‚’ã—ã¦ãŠãã¾ã™\"\u003eä»Šå›ã‚‚åç§°ã®æ•´ç†ã‚’ã—ã¦ãŠãã¾ã™\u003c/a\u003e\u003c/li\u003e\n            \u003cli\u003e\u003ca href=\"#GSI-ã¯æ¤œç´¢ã®ãŸã‚ã®ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹\"\u003eGSI ã¯æ¤œç´¢ã®ãŸã‚ã®ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹\u003c/a\u003e\u003c/li\u003e\n            \u003cli\u003e\u003ca href=\"#Local-Secondary-Index-LSI-ã‚‚ã‚ã‚‹ã‚„ã§\"\u003eLocal Secondary Index (LSI) ã‚‚ã‚ã‚‹ã‚„ã§\u003c/a\u003e\u003c/li\u003e\n            \u003cli\u003e\u003ca href=\"#ã©ã†ã„ã†ç”¨é€”ã§ä¾¿åˆ©ãªã®ã‹\"\u003eã©ã†ã„ã†ç”¨é€”ã§ä¾¿åˆ©ãªã®ã‹\u003c/a\u003e\u003c/li\u003e\n        \u003c/ul\u003e\n    \u003c/li\u003e\n    \u003cli\u003e\u003ca href=\"#Dynamoid-ã§ã®åˆ©ç”¨æ–¹æ³•\"\u003eDynamoid ã§ã®åˆ©ç”¨æ–¹æ³•\u003c/a\u003e\u003cul\u003e\n            \u003cli\u003e\u003ca href=\"#ãƒ†ãƒ¼ãƒ–ãƒ«å®šç¾©\"\u003eãƒ†ãƒ¼ãƒ–ãƒ«å®šç¾©\u003c/a\u003e\u003cul\u003e\n                    \u003cli\u003e\u003ca href=\"#where-ã‚’ä½¿ãˆã°-GSI-ã‚’ä½¿ã£ã¦è‡ªå‹•çš„ã«ã‚¯ã‚¨ãƒªã§æ¤œç´¢ã—ã¦ãã‚Œã‚‹\"\u003e#where ã‚’ä½¿ãˆã° GSI ã‚’ä½¿ã£ã¦è‡ªå‹•çš„ã«ã‚¯ã‚¨ãƒªã§æ¤œç´¢ã—ã¦ãã‚Œã‚‹\u003c/a\u003e\u003c/li\u003e\n                    \u003cli\u003e\u003ca href=\"#æ˜‡é †é™é †ã‚’å…¥ã‚Œæ›¿ãˆãŸã„å ´åˆ\"\u003eæ˜‡é †ãƒ»é™é †ã‚’å…¥ã‚Œæ›¿ãˆãŸã„å ´åˆ\u003c/a\u003e\u003c/li\u003e\n                \u003c/ul\u003e\n            \u003c/li\u003e\n        \u003c/ul\u003e\n    \u003c/li\u003e\n    \u003cli\u003e\u003ca href=\"#ã¾ã¨ã‚\"\u003eã¾ã¨ã‚\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\n\u003cp\u003e\u003ccode\u003edynamoid\u003c/code\u003e ã®å°å…¥æ–¹æ³•ã«ã¤ã„ã¦ã¯ä»¥å‰æ›¸ã„ãŸã“ã¡ã‚‰ã®è¨˜äº‹ã‚’å‚è€ƒã«ã—ã¦ã¿ã¦ä¸‹ã•ã„ã€‚\u003c/p\u003e\n\n\u003cp\u003e\u003ciframe src=\"https://hatenablog-parts.com/embed?url=http%3A%2F%2Ftech.feedforce.jp%2Fdynamodb-setup-on-rails.html\" title=\"DynamoDB ã‚’ Rails ã§ä½¿ãˆã‚‹ã‚ˆã†ã«ã™ã‚‹ãŸã‚ã®ã‚ã‚Œã“ã‚Œ | feedforce Engineers\u0026#39; blog\" class=\"embed-card embed-webcard\" scrolling=\"no\" frameborder=\"0\" style=\"display: block; width: 100%; height: 155px; max-width: 500px; margin: 10px 0px;\"\u003e\u003c/iframe\u003e\u003ccite class=\"hatena-citation\"\u003e\u003ca href=\"http://tech.feedforce.jp/dynamodb-setup-on-rails.html\"\u003etech.feedforce.jp\u003c/a\u003e\u003c/cite\u003e\u003c/p\u003e\n\n\u003ch1 id=\"Global-Secondary-Index-GSI-ã£ã¦ãªã‚“ã\"\u003eGlobal Secondary Index (GSI) ã£ã¦ãªã‚“ã\u003c/h1\u003e\n\n\u003ch2 id=\"ä»Šå›ã‚‚åç§°ã®æ•´ç†ã‚’ã—ã¦ãŠãã¾ã™\"\u003eä»Šå›ã‚‚åç§°ã®æ•´ç†ã‚’ã—ã¦ãŠãã¾ã™\u003c/h2\u003e\n\n\u003cp\u003eæ–‡ä¸­ã« Hash Key ã‚„ã‚‰ Range Key ã¨ã„ã†åç§°ãŒå‡ºã¦ãã¾ã™ãŒã€ç¾åœ¨ã¯åç§°ãŒç•°ãªã‚Šã¾ã™ã€‚\nã—ã‹ã—ã€ \u003ccode\u003edyanmoid\u003c/code\u003e ã§ã¯ç›¸å¤‰ã‚ã‚‰ãšæ—§åç§°ã®ã¾ã¾ (\u003ccode\u003ehash_key\u003c/code\u003e, \u003ccode\u003erange_key\u003c/code\u003e) ã§ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã‚’æŒ‡å®šã™ã‚‹ã®ã§ã€ä»Šå›ã‚‚æœ€åˆã«å¯¾å¿œè¡¨ã‚’è¨˜è¼‰ã—ã¦ãŠãã¾ã™ã€‚\u003c/p\u003e\n\n\u003ctable\u003e\n\u003cthead\u003e\n\u003ctr\u003e\n\u003cth style=\"text-align:center;\"\u003e æ—§åç§° \u003c/th\u003e\n\u003cth style=\"text-align:center;\"\u003e ç¾åç§° \u003c/th\u003e\n\u003c/tr\u003e\n\u003c/thead\u003e\n\u003ctbody\u003e\n\u003ctr\u003e\n\u003ctd style=\"text-align:center;\"\u003e Hash Key \u003c/td\u003e\n\u003ctd style=\"text-align:center;\"\u003e Partition Key \u003c/td\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd style=\"text-align:center;\"\u003e Range Key \u003c/td\u003e\n\u003ctd style=\"text-align:center;\"\u003e Sort Key \u003c/td\u003e\n\u003c/tr\u003e\n\u003c/tbody\u003e\n\u003c/table\u003e\n\n\n\u003ch2 id=\"GSI-ã¯æ¤œç´¢ã®ãŸã‚ã®ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹\"\u003eGSI ã¯æ¤œç´¢ã®ãŸã‚ã®ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹\u003c/h2\u003e\n\n\u003cp\u003eDynamoDB ã«ã¯ãƒ—ãƒ©ã‚¤ãƒãƒªã‚­ãƒ¼ã®æŒ‡å®šæ–¹æ³•ã¨ã—ã¦ã€å˜ä¸€ã® Partition Key ã‚’ä½¿ç”¨ã™ã‚‹æ–¹æ³•ã¨ã€Partition Key ã¨ Sort Key ã‚’çµ„ã¿åˆã‚ã›ã¦ä½¿ç”¨ã™ã‚‹æ–¹æ³•ãŒã‚ã‚Šã¾ã™ã€‚\nã“ã‚Œã«ã¤ã„ã¦ã¯å‰å›ã®ã€range ç·¨ã€‘ã®è¨˜äº‹ã§ã‚‚è§¦ã‚Œã¾ã—ãŸã€‚\u003c/p\u003e\n\n\u003cp\u003e\u003ciframe src=\"https://hatenablog-parts.com/embed?url=http%3A%2F%2Fdeveloper.feedforce.jp%2Fentry%2F2017%2F11%2F04%2F235323\" title=\"Dynamoid ã®ä½¿ã„æ–¹ã€range ç·¨ã€‘ - Feedforce Developer Blog\" class=\"embed-card embed-blogcard\" scrolling=\"no\" frameborder=\"0\" style=\"display: block; width: 100%; height: 190px; max-width: 500px; margin: 10px 0px;\"\u003e\u003c/iframe\u003e\u003ccite class=\"hatena-citation\"\u003e\u003ca href=\"http://developer.feedforce.jp/entry/2017/11/04/235323\"\u003edeveloper.feedforce.jp\u003c/a\u003e\u003c/cite\u003e\u003c/p\u003e\n\n\u003cp\u003eãƒ—ãƒ©ã‚¤ãƒãƒªã‚­ãƒ¼ã«æŒ‡å®šã•ã‚ŒãŸã‚«ãƒ©ãƒ ã«å¯¾ã—ã¦ã§ã‚ã‚Œã°ã€ãƒ¬ã‚³ãƒ¼ãƒ‰ã®æŠ½å‡ºã‚„ç¯„å›²æ¤œç´¢ãªã©ãŒå®Ÿè¡Œå¯èƒ½ã¨ãªã‚‹è¨³ã§ã™ãŒã€ãƒ—ãƒ©ã‚¤ãƒãƒªã‚­ãƒ¼ã«æŒ‡å®šã•ã‚Œã¦ã„ãªã„ã‚«ãƒ©ãƒ ã«å¯¾ã—ã¦ã¯æ¤œç´¢ãŒå®Ÿè¡Œã§ããšã€ãƒ†ãƒ¼ãƒ–ãƒ«ã®ãƒ•ãƒ«ã‚¹ã‚­ãƒ£ãƒ³ã‚’å®Ÿè¡Œã™ã‚‹ã“ã¨ã«ãªã£ã¦ã—ã¾ã„éåŠ¹ç‡ã§ã™ã€‚ãã“ã§ã€åˆ¥ã®ã‚«ãƒ©ãƒ ã«å¯¾ã—ã¦ã‚‚æ¤œç´¢ã‚’è¡Œã„ãŸã„å ´åˆã¯ GSI ã‚’è¨­å®šã—ã¦ã€ãƒ•ãƒ«ã‚¹ã‚­ãƒ£ãƒ³ã™ã‚‹ã“ã¨ãªãåŠ¹ç‡çš„ã«ãƒ‡ãƒ¼ã‚¿ã‚’æŠ½å‡ºã§ãã‚‹ã‚ˆã†ã«ã—ã¾ã™ã€‚\u003c/p\u003e\n\n\u003ciframe src=\"//www.slideshare.net/slideshow/embed_code/key/gHjtA6AS8rk0sB?startSlide=47\" width=\"595\" height=\"485\" style=\"border: 1px solid #CCC; border-width: 1px; margin-bottom: 5px; max-width: 100%;\" scrolling=\"no\" marginwidth=\"0\" marginheight=\"0\" frameborder=\"0\"\u003e \u003c/iframe\u003e\n\n\n\u003cp\u003eGSI ã‚‚ãƒ—ãƒ©ã‚¤ãƒãƒªã‚­ãƒ¼ã®æŒ‡å®šã¨åŒæ§˜ã«ã€å˜ä¸€ã® Partition Key ã®ã¿ã§æŒ‡å®šã™ã‚‹ã“ã¨ã‚‚ã€ Partition Key ã¨  Sort Key ã®çµ„ã¿åˆã‚ã›ã§æŒ‡å®šã™ã‚‹ã“ã¨ã‚‚å¯èƒ½ã§ã™ã€‚\nãŸã ã—ã€ \u003cstrong\u003eãƒ—ãƒ©ã‚¤ãƒãƒªã‚­ãƒ¼ã«ã¯ãƒ¦ãƒ‹ãƒ¼ã‚¯åˆ¶ç´„ãŒè¨­å®šã•ã‚Œã¾ã™ãŒã€ GSI ã«ã¯ãƒ¦ãƒ‹ãƒ¼ã‚¯åˆ¶ç´„ãŒå­˜åœ¨ã—ãªã„\u003c/strong\u003e ã®ã§ã€ãã®ç‚¹ã«ã¯æ³¨æ„ãŒå¿…è¦ã§ã™ã€‚\u003c/p\u003e\n\n\u003ch2 id=\"Local-Secondary-Index-LSI-ã‚‚ã‚ã‚‹ã‚„ã§\"\u003eLocal Secondary Index (LSI) ã‚‚ã‚ã‚‹ã‚„ã§\u003c/h2\u003e\n\n\u003cp\u003eLSI ã® Partition Key ã¯ãƒ—ãƒ©ã‚¤ãƒãƒªã‚­ãƒ¼ã¨å…±é€šã§ã™ã€‚Sort Key ã®éƒ¨åˆ†ã ã‘åˆ¥ã«è¨­å®šã—ãŸã„å ´åˆã«ä½¿ç”¨ã—ã¾ã™ã€‚ãã®ç‚¹ã‚’é™¤ã‘ã° GSI ã¨ã‚ˆãä¼¼ã¦ã„ã¾ã™ãŒã€ã“ã¡ã‚‰ã¯ãƒ†ãƒ¼ãƒ–ãƒ«ã®ä½œæˆæ™‚ã«ã—ã‹å®šç¾©ã™ã‚‹ã“ã¨ãŒã§ããªã„ã‚ˆã†ã§ã™ã€‚\u003c/p\u003e\n\n\u003ciframe src=\"//www.slideshare.net/slideshow/embed_code/key/gHjtA6AS8rk0sB?startSlide=46\" width=\"595\" height=\"485\" style=\"border: 1px solid #CCC; border-width: 1px; margin-bottom: 5px; max-width: 100%;\" scrolling=\"no\" marginwidth=\"0\" marginheight=\"0\" frameborder=\"0\"\u003e \u003c/iframe\u003e\n\n\n\u003cp\u003eãªãŠã€LSI ã‚‚\u003ccode\u003edynamoid\u003c/code\u003e ã‹ã‚‰æŒ‡å®šã™ã‚‹ã“ã¨ã¯å¯èƒ½ (\u003ccode\u003elocal_secondary_index\u003c/code\u003e ã‚’ä½¿ç”¨ã™ã‚‹) ã§ã™ãŒã€æœ¬ç¨¿ã§ã¯è§¦ã‚Œã¾ã›ã‚“ã€‚\u003c/p\u003e\n\n\u003ch2 id=\"ã©ã†ã„ã†ç”¨é€”ã§ä¾¿åˆ©ãªã®ã‹\"\u003eã©ã†ã„ã†ç”¨é€”ã§ä¾¿åˆ©ãªã®ã‹\u003c/h2\u003e\n\n\u003cp\u003eã‚ã¾ã‚Šè¤‡é›‘ãªãƒ†ãƒ¼ãƒ–ãƒ«è¨­è¨ˆãŒæ¨å¥¨ã•ã‚Œãªã„ DynamoDB ã§ã™ãŒã€ç°¡å˜ãªãƒ†ãƒ¼ãƒ–ãƒ«é–“ã®é–¢é€£ä»˜ã‘ã‚’è¡Œã„ãŸã„ã‚·ãƒ¼ãƒ³ãŒå‡ºã¦ãã¾ã™ã€‚è¦ªãƒ†ãƒ¼ãƒ–ãƒ«ã® ID ã‚’çµåˆã‚­ãƒ¼ã¨ã—ã¦å­ãƒ†ãƒ¼ãƒ–ãƒ«ã«è¨­å®šã—ãŸã„å ´åˆãªã©ã« GSI ã¯ä¾¿åˆ©ã§ã™ã€‚\nä»¥ä¸‹ã« User Table ã¨ User Comment Table ã®ä¾‹ã‚’ç¤ºã—ã¾ã™ã€‚User Comment Table ã«ã¯è¦ªãƒ†ãƒ¼ãƒ–ãƒ«ã§ã‚ã‚‹ User Table ã® ID ãŒ GSI ã® Partition Key ã¨ã—ã¦è¨­å®šã—ã¦ã‚ã‚Šã¾ã™ã€‚ã¾ãŸã€ã‚³ãƒ¡ãƒ³ãƒˆã®æŠ•ç¨¿æ—¥æ™‚ (Posted at) ã‚’ GSI ã® Sort Key ã¨ã—ã¦è¨­å®šã—ã¦ã„ã¾ã™ã€‚ã“ã‚Œã§ User æ¯ã«æŠ•ç¨¿æ—¥æ™‚é †ã«ã‚½ãƒ¼ãƒˆã—ãŸã‚³ãƒ¡ãƒ³ãƒˆã‚’å–å¾—ã™ã‚‹ã“ã¨ãŒã§ãã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã™ã€‚\u003c/p\u003e\n\n\u003cp\u003e\u003cstrong\u003eUser Table\u003c/strong\u003e\u003c/p\u003e\n\n\u003ctable\u003e\n\u003cthead\u003e\n\u003ctr\u003e\n\u003cth style=\"text-align:center;\"\u003e ID \u003c/th\u003e\n\u003cth\u003e name \u003c/th\u003e\n\u003c/tr\u003e\n\u003c/thead\u003e\n\u003ctbody\u003e\n\u003ctr\u003e\n\u003ctd style=\"text-align:center;\"\u003e 1 \u003c/td\u003e\n\u003ctd\u003e John \u003c/td\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd style=\"text-align:center;\"\u003e 2 \u003c/td\u003e\n\u003ctd\u003e Marry \u003c/td\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd style=\"text-align:center;\"\u003e 3 \u003c/td\u003e\n\u003ctd\u003e Taro \u003c/td\u003e\n\u003c/tr\u003e\n\u003c/tbody\u003e\n\u003c/table\u003e\n\n\n\u003cp\u003e\u003cstrong\u003eUser Comment Table\u003c/strong\u003e\u003c/p\u003e\n\n\u003ctable\u003e\n\u003cthead\u003e\n\u003ctr\u003e\n\u003cth style=\"text-align:center;\"\u003e ID (Primary Partition Key) \u003c/th\u003e\n\u003cth style=\"text-align:center;\"\u003e User ID (GSI Partition Key) \u003c/th\u003e\n\u003cth\u003e Posted at (GSI Sort Key) \u003c/th\u003e\n\u003cth style=\"text-align:center;\"\u003e Comment \u003c/th\u003e\n\u003c/tr\u003e\n\u003c/thead\u003e\n\u003ctbody\u003e\n\u003ctr\u003e\n\u003ctd style=\"text-align:center;\"\u003e 1 \u003c/td\u003e\n\u003ctd style=\"text-align:center;\"\u003e 1 \u003c/td\u003e\n\u003ctd\u003e 1509529916 \u003c/td\u003e\n\u003ctd style=\"text-align:center;\"\u003e Hello \u003c/td\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd style=\"text-align:center;\"\u003e 2 \u003c/td\u003e\n\u003ctd style=\"text-align:center;\"\u003e 1 \u003c/td\u003e\n\u003ctd\u003e 1509530052 \u003c/td\u003e\n\u003ctd style=\"text-align:center;\"\u003e I am John \u003c/td\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd style=\"text-align:center;\"\u003e 3 \u003c/td\u003e\n\u003ctd style=\"text-align:center;\"\u003e 1 \u003c/td\u003e\n\u003ctd\u003e 1509530085 \u003c/td\u003e\n\u003ctd style=\"text-align:center;\"\u003e How do you do? \u003c/td\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd style=\"text-align:center;\"\u003e 4 \u003c/td\u003e\n\u003ctd style=\"text-align:center;\"\u003e 2 \u003c/td\u003e\n\u003ctd\u003e 1509523925 \u003c/td\u003e\n\u003ctd style=\"text-align:center;\"\u003e Thanks a lot! \u003c/td\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd style=\"text-align:center;\"\u003e 5 \u003c/td\u003e\n\u003ctd style=\"text-align:center;\"\u003e 3 \u003c/td\u003e\n\u003ctd\u003e 1509527628 \u003c/td\u003e\n\u003ctd style=\"text-align:center;\"\u003e ã“ã‚“ã«ã¡ã¯ \u003c/td\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd style=\"text-align:center;\"\u003e 6 \u003c/td\u003e\n\u003ctd style=\"text-align:center;\"\u003e 3 \u003c/td\u003e\n\u003ctd\u003e 1509527101 \u003c/td\u003e\n\u003ctd style=\"text-align:center;\"\u003e ã©ã†ã‚‚ \u003c/td\u003e\n\u003c/tr\u003e\n\u003c/tbody\u003e\n\u003c/table\u003e\n\n\n\u003cp\u003eã¡ãªã¿ã«ã€ãƒ—ãƒ©ã‚¤ãƒãƒªã‚­ãƒ¼ã¨ GSI ã‚’é€†ã«è¨­å®šã—ã¦ã‚‚ã»ã¼æˆç«‹ã™ã‚‹ã®ã§ã™ãŒã€å‰è¿°ã—ãŸã‚ˆã†ã« GSI ã«ã¯ãƒ¦ãƒ‹ãƒ¼ã‚¯åˆ¶ç´„ãŒå­˜åœ¨ã—ãªã„ã®ã§ã€User Comment Table ã§ã¯ ID ã‚’ãƒ—ãƒ©ã‚¤ãƒãƒªã‚­ãƒ¼ã¨ã—ã¦ã€é‡è¤‡ãŒç”Ÿã˜ãªã„ã‚ˆã†ã«è¨­å®šã—ã¦ã‚ã‚Šã¾ã™ã€‚\u003c/p\u003e\n\n\u003ch1 id=\"Dynamoid-ã§ã®åˆ©ç”¨æ–¹æ³•\"\u003eDynamoid ã§ã®åˆ©ç”¨æ–¹æ³•\u003c/h1\u003e\n\n\u003ch2 id=\"ãƒ†ãƒ¼ãƒ–ãƒ«å®šç¾©\"\u003eãƒ†ãƒ¼ãƒ–ãƒ«å®šç¾©\u003c/h2\u003e\n\n\u003cp\u003eã“ã“ã‹ã‚‰ã¯å‰è¿°ã® User Table ã¨ User Comment Table ã‚’ \u003ccode\u003edynamoid\u003c/code\u003e ã‹ã‚‰åˆ©ç”¨ã™ã‚‹ä¾‹ã‚’ç¤ºã—ã¦ã„ãã¾ã™ã€‚\u003c/p\u003e\n\n\u003cpre class=\"code\" data-lang=\"\" data-unlink\u003eclass User\n  include Dynamoid::Document\n\n  table name: :users, key: :id\n\n  field :name, :string\n\n  # ç¾åœ¨ã®ãƒ¦ãƒ¼ã‚¶ãƒ¼ã«ç´ä»˜ãã‚³ãƒ¡ãƒ³ãƒˆã‚’ä½œæˆã™ã‚‹\n  def create_comment!(attributes = {})\n    attributes[:user_id] = id\n    UserComment.new(attributes).tap(\u0026amp;:save!)\n  end\n\n  # ç¾åœ¨ã®ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®ã‚³ãƒ¡ãƒ³ãƒˆä¸€è¦§ã‚’å–å¾—ã™ã‚‹\n  def comments\n    UserComment.where(user_id: id)\n  end\n\n  # ç¾åœ¨ã®ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®æœ€çµ‚ã‚³ãƒ¡ãƒ³ãƒˆã‚’å–å¾—ã™ã‚‹\n  def latest_comment\n    comments.scan_index_forward(false).scan_limit(1).all.first\n  end\nend\u003c/pre\u003e\n\n\n\n\n\u003cpre class=\"code\" data-lang=\"\" data-unlink\u003eclass UserComment\n  include Dynamoid::Document\n\n  table name: :user_comments, key: :id\n\n  field :user_id, :string\n  field :posted_at, :datetime\n\n  global_secondary_index hash_key: :user_id, \n                         range_key: :posted_at, \n                         projected_attributes: :all\nend\u003c/pre\u003e\n\n\n\u003cp\u003eâ€» ã¡ãªã¿ã« \u003ccode\u003edynamoid\u003c/code\u003e ã«ã¯ \u003ccode\u003ehas_many\u003c/code\u003e ã‚’åˆ©ç”¨ã—ã¦é–¢é€£ãƒ†ãƒ¼ãƒ–ãƒ«ã‚’å®Ÿç¾ã™ã‚‹æ–¹æ³•ãŒã‚ã‚‹ã®ã§ã™ãŒã€çµåˆã‚­ãƒ¼ã‚’è¦ªãƒ†ãƒ¼ãƒ–ãƒ«ã«æŒã¤è¨­è¨ˆã«ãªã‚‹ã®ãŒã‚ã¾ã‚Šå¥½ã¾ã—ããªã‹ã£ãŸã®ã§ã€è‡ªå‰ã§å®Ÿè£…ã—ã¦ã„ã¾ã™ã€‚\u003c/p\u003e\n\n\u003cp\u003eã„ãã¤ã‹æ³¨æ„ã™ã‚‹ç‚¹ãŒã‚ã£ã¦ã€ \u003ccode\u003eglobal_secondary_index\u003c/code\u003e ã§ä½¿ç”¨ã™ã‚‹ \u003ccode\u003ehash_key\u003c/code\u003e ã¨ \u003ccode\u003erange_key\u003c/code\u003e ã¯ \u003ccode\u003efield\u003c/code\u003e ã§å®šç¾©ã•ã‚Œã¦ã„ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚\nã¾ãŸã€ \u003ccode\u003eprojected_attributes: :all\u003c/code\u003e ã¨ã„ã†ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã‚’ã¤ã‘ãªã„ã¨å¾Œè¿°ã® \u003ccode\u003e#where\u003c/code\u003e ã§ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ã‚’åˆ©ç”¨ã—ãŸæ¤œç´¢ãŒè¡Œã‚ã‚Œã¾ã›ã‚“ã€‚ä¸€æ—¦ã“ã‚ŒãŒç„¡ã„çŠ¶æ…‹ã§ãƒªãƒªãƒ¼ã‚¹ã¨ã—ã¦ã—ã¾ã†ã¨ã€å°„å½±ã•ã‚Œã‚‹å±æ€§ãŒé™å®šã•ã‚ŒãŸ GSI ãŒä½œæˆã•ã‚Œã¦ã—ã¾ã„ã€å®Ÿè¡Œæ™‚ã«ã‚¨ãƒ©ãƒ¼ã«ãªã‚Šã¾ã™ã€‚ãã®å ´åˆã¯ AWS ãƒãƒã‚¸ãƒ¡ãƒ³ãƒˆã‚³ãƒ³ã‚½ãƒ¼ãƒ«ã‹ã‚‰ç›´æ¥ GSI ã‚’ä½œã‚Šç›´ã™ç¾½ç›®ã«ãªã‚Šã¾ã™ã®ã§ã”æ³¨æ„ãã ã•ã„ ğŸ™\u003c/p\u003e\n\n\u003cpre class=\"code\" data-lang=\"\" data-unlink\u003eOne or more parameter values were invalid: Select type ALL_ATTRIBUTES is not supported for global secondary index\u003c/pre\u003e\n\n\n\u003ch3 id=\"where-ã‚’ä½¿ãˆã°-GSI-ã‚’ä½¿ã£ã¦è‡ªå‹•çš„ã«ã‚¯ã‚¨ãƒªã§æ¤œç´¢ã—ã¦ãã‚Œã‚‹\"\u003e\u003ccode\u003e#where\u003c/code\u003e ã‚’ä½¿ãˆã° GSI ã‚’ä½¿ã£ã¦è‡ªå‹•çš„ã«ã‚¯ã‚¨ãƒªã§æ¤œç´¢ã—ã¦ãã‚Œã‚‹\u003c/h3\u003e\n\n\u003cp\u003e\u003ccode\u003e#comments\u003c/code\u003e ã¨ã„ã†ãƒ¡ã‚½ãƒƒãƒ‰ã®ä¸­ã§ \u003ccode\u003e#where\u003c/code\u003e ã‚’ä½¿ç”¨ã—ãŸæ¤œç´¢ãŒç™»å ´ã—ã¾ã™ãŒã€ GSI ãŒè¨­å®šã•ã‚Œã¦ã„ã‚Œã°ç‰¹åˆ¥ãªè¨˜è¿°ãŒãªãã¨ã‚‚è‡ªå‹•çš„ã«ã‚¯ã‚¨ãƒªæ¤œç´¢ãŒè¡Œã‚ã‚Œã¾ã™ã€‚\u003c/p\u003e\n\n\u003cpre class=\"code\" data-lang=\"\" data-unlink\u003eUserComment.where(user_id: id)\n# =\u0026gt; [#\u0026lt;UserComment:0x00007f44c86183e8\u0026gt;, ...]\u003c/pre\u003e\n\n\n\u003cp\u003eå‰è¿°ã®é€šã‚Š \u003ccode\u003eprojected_attributes: :all\u003c/code\u003e ãŒæŒ‡å®šã•ã‚Œã¦ã„ãªã„ã¨ãƒ•ãƒ«ã‚¹ã‚­ãƒ£ãƒ³ã•ã‚Œã¦ã—ã¾ã†ã®ã§ã”æ³¨æ„ãã ã•ã„ã€‚\u003c/p\u003e\n\n\u003ch3 id=\"æ˜‡é †é™é †ã‚’å…¥ã‚Œæ›¿ãˆãŸã„å ´åˆ\"\u003eæ˜‡é †ãƒ»é™é †ã‚’å…¥ã‚Œæ›¿ãˆãŸã„å ´åˆ\u003c/h3\u003e\n\n\u003cp\u003e\u003ccode\u003e#latest_comment\u003c/code\u003e ã¨ã„ã†ãƒ¡ã‚½ãƒƒãƒ‰å†…ã§ä½¿ç”¨ã—ã¦ã„ã¾ã™ãŒã€ \u003ccode\u003e#scan_index_forward(false)\u003c/code\u003e ã¨æŒ‡å®šã™ã‚‹ã¨é™é †ã§ã‚½ãƒ¼ãƒˆã•ã‚ŒãŸçŠ¶æ…‹ã§çµæœãŒè¿”ã£ã¦ãã¾ã™ã€‚æœªæŒ‡å®šã®å ´åˆã¯æ˜‡é †ã§ã‚½ãƒ¼ãƒˆã•ã‚Œã¾ã™ã€‚\nã¾ãŸã€ \u003ccode\u003e#scan_limit(n)\u003c/code\u003e ã¨æŒ‡å®šã™ã‚‹ã“ã¨ã§ã€å…ˆé ­ã‹ã‚‰ \u003ccode\u003en\u003c/code\u003e ä»¶ã®çµæœã«é™å®šã—ã¦å–å¾—ãŒå¯èƒ½ã§ã™ã€‚\u003ccode\u003e#latest_comment\u003c/code\u003e ã§ã¯ã“ã‚Œã‚‰ã‚’çµ„ã¿åˆã‚ã›ã¦æœ€çµ‚ã®ã‚³ãƒ¡ãƒ³ãƒˆã‚’å–å¾—ã—ã¦ã„ã¾ã™ã€‚\u003c/p\u003e\n\n\u003ch1 id=\"ã¾ã¨ã‚\"\u003eã¾ã¨ã‚\u003c/h1\u003e\n\n\u003cp\u003eæœ¬ç¨¿ã§ã¯ GSI ã¨ LSI ã¨ãƒ—ãƒ©ã‚¤ãƒãƒªã‚­ãƒ¼ã®é•ã„ã€å…·ä½“çš„ãªåˆ©ç”¨ç”¨é€”ã‚’ç´¹ä»‹ã—ã¾ã—ãŸã€‚\u003ca href=\"http://developer.feedforce.jp/entry/2017/11/04/235323\"\u003eå‰å›ã®è¨˜äº‹\u003c/a\u003eã§ã‚‚è§¦ã‚Œã¾ã—ãŸãŒã€ \u003ccode\u003edynamoid\u003c/code\u003e ã¯åˆå›å®Ÿè¡Œæ™‚ã«ãƒ†ãƒ¼ãƒ–ãƒ«ã‚„ GSI ãŒå­˜åœ¨ã—ã¦ã„ãªã„ã¨ä½œæˆã™ã‚‹ã€ã¨ã„ã†æŒ™å‹•ã«ãªã‚‹ãŸã‚ã€å¾Œã§è¨­è¨ˆã‚’å¤‰ãˆãŸããªã£ãŸå ´åˆã« GSI ã‚„æœ€æ‚ªãƒ†ãƒ¼ãƒ–ãƒ«ã‚’ä½œã‚Šç›´ã™ç¾½ç›®ã«ãªã‚Šã¾ã™ã€‚ç‰¹ã«åˆã‚ã¦åˆ©ç”¨ã™ã‚‹å ´åˆã¯è¨­è¨ˆã®å‹˜æ‰€ã‚’æ´ã‚€ã®ãŒé›£ã—ã„ã®ã§ã€ãƒªãƒªãƒ¼ã‚¹å‰ã«å…¥å¿µã«è¨­è¨ˆã‚’è¦‹ç›´ã™ã“ã¨ã‚’ãŠå‹§ã‚ã—ã¾ã™ã€‚ãã®ç‚¹ã§ã¯ RDS ä»¥ä¸Šã«æ…é‡ãªè¨­è¨ˆãŒæ±‚ã‚ã‚‰ã‚Œã‚‹ã‚ˆã†ã«æ„Ÿã˜ã¦ã„ã¾ã™ã€‚\nè‰²ã€…ã¨æ°—ã‚’ä»˜ã‘ãªã‘ã‚Œã°ãªã‚‰ãªã„ç‚¹ã‚‚å¤šã„ã§ã™ãŒã€ä¸¦åˆ—å‹•ä½œæ€§ã¯éå¸¸ã«é«˜ã„ã®ã§ã€åˆ©ç”¨ã—ãŸããªã‚‹ã‚·ãƒ¼ãƒ³ãŒå¿…ãšå‡ºã¦ãã‚‹ã¨æ€ã„ã¾ã™ã€‚ãã®éš›ã«æœ¬ç¨¿ãŒå°‘ã—ã§ã‚‚ãŠå½¹ã«ç«‹ã¦ã°å¹¸ã„ã§ã™ ğŸ™\u003c/p\u003e\n","contentSnippet":"ã©ã†ã‚‚ã€ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢ã®ã‚µãƒˆã‚¦ãƒªãƒ§ã‚¦ã‚¹ã‚±ã§ã™ âœŒï¸('Ï‰')âœŒï¸å‰å›ã«å¼•ãç¶šãã€ Dynamoid ç¬¬3å¼¾ã§ã™ âœŒï¸('Ï‰')âœŒï¸Rails ã§ DynamoDB ã‚’åˆ©ç”¨ã™ã‚‹éš›ã® ORM ã¨ã—ã¦ dynamoid ãŒã‚ã‚Šã¾ã™ã€‚ä»Šå›ã¯ dynamoid ã‹ã‚‰ Global Secondary Index (GSI) ã‚’åˆ©ç”¨ã™ã‚‹æ–¹æ³•ã«ã¤ã„ã¦ç´¹ä»‹ã—ã¾ã™ã€‚Global Secondary Index (GSI) ã£ã¦ãªã‚“ãä»Šå›ã‚‚åç§°ã®æ•´ç†ã‚’ã—ã¦ãŠãã¾ã™GSI ã¯æ¤œç´¢ã®ãŸã‚ã®ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹Local Secondary Index (LSI) ã‚‚ã‚ã‚‹ã‚„ã§ã©ã†ã„ã†ç”¨é€”ã§ä¾¿åˆ©ãªã®ã‹Dynamoid ã§ã®åˆ©ç”¨æ–¹æ³•ãƒ†ãƒ¼ãƒ–ãƒ«å®šç¾©#where ã‚’ä½¿ãˆã° GSI ã‚’ä½¿ã£ã¦è‡ªå‹•çš„ã«ã‚¯ã‚¨ãƒªã§æ¤œç´¢ã—ã¦ãã‚Œã‚‹æ˜‡é †ãƒ»é™é †ã‚’å…¥ã‚Œæ›¿ãˆãŸã„å ´åˆã¾ã¨ã‚dynamoid ã®å°å…¥æ–¹æ³•ã«ã¤ã„ã¦ã¯ä»¥å‰æ›¸ã„ãŸã“ã¡ã‚‰ã®è¨˜äº‹ã‚’å‚è€ƒã«ã—ã¦ã¿ã¦ä¸‹ã•ã„ã€‚tech.feedforce.jpGlobal Secondary Index (GSI) ã£ã¦ãªã‚“ãä»Šå›ã‚‚åç§°ã®æ•´ç†ã‚’ã—ã¦ãŠãã¾ã™æ–‡ä¸­ã« Hash Key ã‚„ã‚‰ Range Key ã¨ã„ã†åç§°ãŒå‡ºã¦ãã¾ã™ãŒã€ç¾åœ¨ã¯åç§°ãŒç•°ãªã‚Šã¾ã™ã€‚ã—ã‹ã—ã€ dyanmoid ã§ã¯ç›¸å¤‰ã‚ã‚‰ãšæ—§åç§°ã®ã¾ã¾ (hash_key, range_key) ã§ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã‚’æŒ‡å®šã™ã‚‹ã®ã§ã€ä»Šå›ã‚‚æœ€åˆã«å¯¾å¿œè¡¨ã‚’è¨˜è¼‰ã—ã¦ãŠãã¾ã™ã€‚ æ—§åç§°  ç¾åç§°  Hash Key  Partition Key  Range Key  Sort Key GSI ã¯æ¤œç´¢ã®ãŸã‚ã®ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹DynamoDB ã«ã¯ãƒ—ãƒ©ã‚¤ãƒãƒªã‚­ãƒ¼ã®æŒ‡å®šæ–¹æ³•ã¨ã—ã¦ã€å˜ä¸€ã® Partition Key ã‚’ä½¿ç”¨ã™ã‚‹æ–¹æ³•ã¨ã€Partition Key ã¨ Sort Key ã‚’çµ„ã¿åˆã‚ã›ã¦ä½¿ç”¨ã™ã‚‹æ–¹æ³•ãŒã‚ã‚Šã¾ã™ã€‚ã“ã‚Œã«ã¤ã„ã¦ã¯å‰å›ã®ã€range ç·¨ã€‘ã®è¨˜äº‹ã§ã‚‚è§¦ã‚Œã¾ã—ãŸã€‚developer.feedforce.jpãƒ—ãƒ©ã‚¤ãƒãƒªã‚­ãƒ¼ã«æŒ‡å®šã•ã‚ŒãŸã‚«ãƒ©ãƒ ã«å¯¾ã—ã¦ã§ã‚ã‚Œã°ã€ãƒ¬ã‚³ãƒ¼ãƒ‰ã®æŠ½å‡ºã‚„ç¯„å›²æ¤œç´¢ãªã©ãŒå®Ÿè¡Œå¯èƒ½ã¨ãªã‚‹è¨³ã§ã™ãŒã€ãƒ—ãƒ©ã‚¤ãƒãƒªã‚­ãƒ¼ã«æŒ‡å®šã•ã‚Œã¦ã„ãªã„ã‚«ãƒ©ãƒ ã«å¯¾ã—ã¦ã¯æ¤œç´¢ãŒå®Ÿè¡Œã§ããšã€ãƒ†ãƒ¼ãƒ–ãƒ«ã®ãƒ•ãƒ«ã‚¹ã‚­ãƒ£ãƒ³ã‚’å®Ÿè¡Œã™ã‚‹ã“ã¨ã«ãªã£ã¦ã—ã¾ã„éåŠ¹ç‡ã§ã™ã€‚ãã“ã§ã€åˆ¥ã®ã‚«ãƒ©ãƒ ã«å¯¾ã—ã¦ã‚‚æ¤œç´¢ã‚’è¡Œã„ãŸã„å ´åˆã¯ GSI ã‚’è¨­å®šã—ã¦ã€ãƒ•ãƒ«ã‚¹ã‚­ãƒ£ãƒ³ã™ã‚‹ã“ã¨ãªãåŠ¹ç‡çš„ã«ãƒ‡ãƒ¼ã‚¿ã‚’æŠ½å‡ºã§ãã‚‹ã‚ˆã†ã«ã—ã¾ã™ã€‚ GSI ã‚‚ãƒ—ãƒ©ã‚¤ãƒãƒªã‚­ãƒ¼ã®æŒ‡å®šã¨åŒæ§˜ã«ã€å˜ä¸€ã® Partition Key ã®ã¿ã§æŒ‡å®šã™ã‚‹ã“ã¨ã‚‚ã€ Partition Key ã¨  Sort Key ã®çµ„ã¿åˆã‚ã›ã§æŒ‡å®šã™ã‚‹ã“ã¨ã‚‚å¯èƒ½ã§ã™ã€‚ãŸã ã—ã€ ãƒ—ãƒ©ã‚¤ãƒãƒªã‚­ãƒ¼ã«ã¯ãƒ¦ãƒ‹ãƒ¼ã‚¯åˆ¶ç´„ãŒè¨­å®šã•ã‚Œã¾ã™ãŒã€ GSI ã«ã¯ãƒ¦ãƒ‹ãƒ¼ã‚¯åˆ¶ç´„ãŒå­˜åœ¨ã—ãªã„ ã®ã§ã€ãã®ç‚¹ã«ã¯æ³¨æ„ãŒå¿…è¦ã§ã™ã€‚Local Secondary Index (LSI) ã‚‚ã‚ã‚‹ã‚„ã§LSI ã® Partition Key ã¯ãƒ—ãƒ©ã‚¤ãƒãƒªã‚­ãƒ¼ã¨å…±é€šã§ã™ã€‚Sort Key ã®éƒ¨åˆ†ã ã‘åˆ¥ã«è¨­å®šã—ãŸã„å ´åˆã«ä½¿ç”¨ã—ã¾ã™ã€‚ãã®ç‚¹ã‚’é™¤ã‘ã° GSI ã¨ã‚ˆãä¼¼ã¦ã„ã¾ã™ãŒã€ã“ã¡ã‚‰ã¯ãƒ†ãƒ¼ãƒ–ãƒ«ã®ä½œæˆæ™‚ã«ã—ã‹å®šç¾©ã™ã‚‹ã“ã¨ãŒã§ããªã„ã‚ˆã†ã§ã™ã€‚ ãªãŠã€LSI ã‚‚dynamoid ã‹ã‚‰æŒ‡å®šã™ã‚‹ã“ã¨ã¯å¯èƒ½ (local_secondary_index ã‚’ä½¿ç”¨ã™ã‚‹) ã§ã™ãŒã€æœ¬ç¨¿ã§ã¯è§¦ã‚Œã¾ã›ã‚“ã€‚ã©ã†ã„ã†ç”¨é€”ã§ä¾¿åˆ©ãªã®ã‹ã‚ã¾ã‚Šè¤‡é›‘ãªãƒ†ãƒ¼ãƒ–ãƒ«è¨­è¨ˆãŒæ¨å¥¨ã•ã‚Œãªã„ DynamoDB ã§ã™ãŒã€ç°¡å˜ãªãƒ†ãƒ¼ãƒ–ãƒ«é–“ã®é–¢é€£ä»˜ã‘ã‚’è¡Œã„ãŸã„ã‚·ãƒ¼ãƒ³ãŒå‡ºã¦ãã¾ã™ã€‚è¦ªãƒ†ãƒ¼ãƒ–ãƒ«ã® ID ã‚’çµåˆã‚­ãƒ¼ã¨ã—ã¦å­ãƒ†ãƒ¼ãƒ–ãƒ«ã«è¨­å®šã—ãŸã„å ´åˆãªã©ã« GSI ã¯ä¾¿åˆ©ã§ã™ã€‚ä»¥ä¸‹ã« User Table ã¨ User Comment Table ã®ä¾‹ã‚’ç¤ºã—ã¾ã™ã€‚User Comment Table ã«ã¯è¦ªãƒ†ãƒ¼ãƒ–ãƒ«ã§ã‚ã‚‹ User Table ã® ID ãŒ GSI ã® Partition Key ã¨ã—ã¦è¨­å®šã—ã¦ã‚ã‚Šã¾ã™ã€‚ã¾ãŸã€ã‚³ãƒ¡ãƒ³ãƒˆã®æŠ•ç¨¿æ—¥æ™‚ (Posted at) ã‚’ GSI ã® Sort Key ã¨ã—ã¦è¨­å®šã—ã¦ã„ã¾ã™ã€‚ã“ã‚Œã§ User æ¯ã«æŠ•ç¨¿æ—¥æ™‚é †ã«ã‚½ãƒ¼ãƒˆã—ãŸã‚³ãƒ¡ãƒ³ãƒˆã‚’å–å¾—ã™ã‚‹ã“ã¨ãŒã§ãã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã™ã€‚User Table ID  name  1  John  2  Marry  3  Taro User Comment Table ID (Primary Partition Key)  User ID (GSI Partition Key)  Posted at (GSI Sort Key)  Comment  1  1  1509529916  Hello  2  1  1509530052  I am John  3  1  1509530085  How do you do?  4  2  1509523925  Thanks a lot!  5  3  1509527628  ã“ã‚“ã«ã¡ã¯  6  3  1509527101  ã©ã†ã‚‚ ã¡ãªã¿ã«ã€ãƒ—ãƒ©ã‚¤ãƒãƒªã‚­ãƒ¼ã¨ GSI ã‚’é€†ã«è¨­å®šã—ã¦ã‚‚ã»ã¼æˆç«‹ã™ã‚‹ã®ã§ã™ãŒã€å‰è¿°ã—ãŸã‚ˆã†ã« GSI ã«ã¯ãƒ¦ãƒ‹ãƒ¼ã‚¯åˆ¶ç´„ãŒå­˜åœ¨ã—ãªã„ã®ã§ã€User Comment Table ã§ã¯ ID ã‚’ãƒ—ãƒ©ã‚¤ãƒãƒªã‚­ãƒ¼ã¨ã—ã¦ã€é‡è¤‡ãŒç”Ÿã˜ãªã„ã‚ˆã†ã«è¨­å®šã—ã¦ã‚ã‚Šã¾ã™ã€‚Dynamoid ã§ã®åˆ©ç”¨æ–¹æ³•ãƒ†ãƒ¼ãƒ–ãƒ«å®šç¾©ã“ã“ã‹ã‚‰ã¯å‰è¿°ã® User Table ã¨ User Comment Table ã‚’ dynamoid ã‹ã‚‰åˆ©ç”¨ã™ã‚‹ä¾‹ã‚’ç¤ºã—ã¦ã„ãã¾ã™ã€‚class User  include Dynamoid::Document  table name: :users, key: :id  field :name, :string  # ç¾åœ¨ã®ãƒ¦ãƒ¼ã‚¶ãƒ¼ã«ç´ä»˜ãã‚³ãƒ¡ãƒ³ãƒˆã‚’ä½œæˆã™ã‚‹  def create_comment!(attributes = {})    attributes[:user_id] = id    UserComment.new(attributes).tap(\u0026:save!)  end  # ç¾åœ¨ã®ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®ã‚³ãƒ¡ãƒ³ãƒˆä¸€è¦§ã‚’å–å¾—ã™ã‚‹  def comments    UserComment.where(user_id: id)  end  # ç¾åœ¨ã®ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®æœ€çµ‚ã‚³ãƒ¡ãƒ³ãƒˆã‚’å–å¾—ã™ã‚‹  def latest_comment    comments.scan_index_forward(false).scan_limit(1).all.first  endendclass UserComment  include Dynamoid::Document  table name: :user_comments, key: :id  field :user_id, :string  field :posted_at, :datetime  global_secondary_index hash_key: :user_id,                          range_key: :posted_at,                          projected_attributes: :allendâ€» ã¡ãªã¿ã« dynamoid ã«ã¯ has_many ã‚’åˆ©ç”¨ã—ã¦é–¢é€£ãƒ†ãƒ¼ãƒ–ãƒ«ã‚’å®Ÿç¾ã™ã‚‹æ–¹æ³•ãŒã‚ã‚‹ã®ã§ã™ãŒã€çµåˆã‚­ãƒ¼ã‚’è¦ªãƒ†ãƒ¼ãƒ–ãƒ«ã«æŒã¤è¨­è¨ˆã«ãªã‚‹ã®ãŒã‚ã¾ã‚Šå¥½ã¾ã—ããªã‹ã£ãŸã®ã§ã€è‡ªå‰ã§å®Ÿè£…ã—ã¦ã„ã¾ã™ã€‚ã„ãã¤ã‹æ³¨æ„ã™ã‚‹ç‚¹ãŒã‚ã£ã¦ã€ global_secondary_index ã§ä½¿ç”¨ã™ã‚‹ hash_key ã¨ range_key ã¯ field ã§å®šç¾©ã•ã‚Œã¦ã„ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚ã¾ãŸã€ projected_attributes: :all ã¨ã„ã†ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã‚’ã¤ã‘ãªã„ã¨å¾Œè¿°ã® #where ã§ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ã‚’åˆ©ç”¨ã—ãŸæ¤œç´¢ãŒè¡Œã‚ã‚Œã¾ã›ã‚“ã€‚ä¸€æ—¦ã“ã‚ŒãŒç„¡ã„çŠ¶æ…‹ã§ãƒªãƒªãƒ¼ã‚¹ã¨ã—ã¦ã—ã¾ã†ã¨ã€å°„å½±ã•ã‚Œã‚‹å±æ€§ãŒé™å®šã•ã‚ŒãŸ GSI ãŒä½œæˆã•ã‚Œã¦ã—ã¾ã„ã€å®Ÿè¡Œæ™‚ã«ã‚¨ãƒ©ãƒ¼ã«ãªã‚Šã¾ã™ã€‚ãã®å ´åˆã¯ AWS ãƒãƒã‚¸ãƒ¡ãƒ³ãƒˆã‚³ãƒ³ã‚½ãƒ¼ãƒ«ã‹ã‚‰ç›´æ¥ GSI ã‚’ä½œã‚Šç›´ã™ç¾½ç›®ã«ãªã‚Šã¾ã™ã®ã§ã”æ³¨æ„ãã ã•ã„ ğŸ™One or more parameter values were invalid: Select type ALL_ATTRIBUTES is not supported for global secondary index#where ã‚’ä½¿ãˆã° GSI ã‚’ä½¿ã£ã¦è‡ªå‹•çš„ã«ã‚¯ã‚¨ãƒªã§æ¤œç´¢ã—ã¦ãã‚Œã‚‹#comments ã¨ã„ã†ãƒ¡ã‚½ãƒƒãƒ‰ã®ä¸­ã§ #where ã‚’ä½¿ç”¨ã—ãŸæ¤œç´¢ãŒç™»å ´ã—ã¾ã™ãŒã€ GSI ãŒè¨­å®šã•ã‚Œã¦ã„ã‚Œã°ç‰¹åˆ¥ãªè¨˜è¿°ãŒãªãã¨ã‚‚è‡ªå‹•çš„ã«ã‚¯ã‚¨ãƒªæ¤œç´¢ãŒè¡Œã‚ã‚Œã¾ã™ã€‚UserComment.where(user_id: id)# =\u003e [#\u003cUserComment:0x00007f44c86183e8\u003e, ...]å‰è¿°ã®é€šã‚Š projected_attributes: :all ãŒæŒ‡å®šã•ã‚Œã¦ã„ãªã„ã¨ãƒ•ãƒ«ã‚¹ã‚­ãƒ£ãƒ³ã•ã‚Œã¦ã—ã¾ã†ã®ã§ã”æ³¨æ„ãã ã•ã„ã€‚æ˜‡é †ãƒ»é™é †ã‚’å…¥ã‚Œæ›¿ãˆãŸã„å ´åˆ#latest_comment ã¨ã„ã†ãƒ¡ã‚½ãƒƒãƒ‰å†…ã§ä½¿ç”¨ã—ã¦ã„ã¾ã™ãŒã€ #scan_index_forward(false) ã¨æŒ‡å®šã™ã‚‹ã¨é™é †ã§ã‚½ãƒ¼ãƒˆã•ã‚ŒãŸçŠ¶æ…‹ã§çµæœãŒè¿”ã£ã¦ãã¾ã™ã€‚æœªæŒ‡å®šã®å ´åˆã¯æ˜‡é †ã§ã‚½ãƒ¼ãƒˆã•ã‚Œã¾ã™ã€‚ã¾ãŸã€ #scan_limit(n) ã¨æŒ‡å®šã™ã‚‹ã“ã¨ã§ã€å…ˆé ­ã‹ã‚‰ n ä»¶ã®çµæœã«é™å®šã—ã¦å–å¾—ãŒå¯èƒ½ã§ã™ã€‚#latest_comment ã§ã¯ã“ã‚Œã‚‰ã‚’çµ„ã¿åˆã‚ã›ã¦æœ€çµ‚ã®ã‚³ãƒ¡ãƒ³ãƒˆã‚’å–å¾—ã—ã¦ã„ã¾ã™ã€‚ã¾ã¨ã‚æœ¬ç¨¿ã§ã¯ GSI ã¨ LSI ã¨ãƒ—ãƒ©ã‚¤ãƒãƒªã‚­ãƒ¼ã®é•ã„ã€å…·ä½“çš„ãªåˆ©ç”¨ç”¨é€”ã‚’ç´¹ä»‹ã—ã¾ã—ãŸã€‚å‰å›ã®è¨˜äº‹ã§ã‚‚è§¦ã‚Œã¾ã—ãŸãŒã€ dynamoid ã¯åˆå›å®Ÿè¡Œæ™‚ã«ãƒ†ãƒ¼ãƒ–ãƒ«ã‚„ GSI ãŒå­˜åœ¨ã—ã¦ã„ãªã„ã¨ä½œæˆã™ã‚‹ã€ã¨ã„ã†æŒ™å‹•ã«ãªã‚‹ãŸã‚ã€å¾Œã§è¨­è¨ˆã‚’å¤‰ãˆãŸããªã£ãŸå ´åˆã« GSI ã‚„æœ€æ‚ªãƒ†ãƒ¼ãƒ–ãƒ«ã‚’ä½œã‚Šç›´ã™ç¾½ç›®ã«ãªã‚Šã¾ã™ã€‚ç‰¹ã«åˆã‚ã¦åˆ©ç”¨ã™ã‚‹å ´åˆã¯è¨­è¨ˆã®å‹˜æ‰€ã‚’æ´ã‚€ã®ãŒé›£ã—ã„ã®ã§ã€ãƒªãƒªãƒ¼ã‚¹å‰ã«å…¥å¿µã«è¨­è¨ˆã‚’è¦‹ç›´ã™ã“ã¨ã‚’ãŠå‹§ã‚ã—ã¾ã™ã€‚ãã®ç‚¹ã§ã¯ RDS ä»¥ä¸Šã«æ…é‡ãªè¨­è¨ˆãŒæ±‚ã‚ã‚‰ã‚Œã‚‹ã‚ˆã†ã«æ„Ÿã˜ã¦ã„ã¾ã™ã€‚è‰²ã€…ã¨æ°—ã‚’ä»˜ã‘ãªã‘ã‚Œã°ãªã‚‰ãªã„ç‚¹ã‚‚å¤šã„ã§ã™ãŒã€ä¸¦åˆ—å‹•ä½œæ€§ã¯éå¸¸ã«é«˜ã„ã®ã§ã€åˆ©ç”¨ã—ãŸããªã‚‹ã‚·ãƒ¼ãƒ³ãŒå¿…ãšå‡ºã¦ãã‚‹ã¨æ€ã„ã¾ã™ã€‚ãã®éš›ã«æœ¬ç¨¿ãŒå°‘ã—ã§ã‚‚ãŠå½¹ã«ç«‹ã¦ã°å¹¸ã„ã§ã™ ğŸ™","link":"https://developer.feedforce.jp/entry/2017/11/26/195509","isoDate":"2017-11-26T10:55:09.000Z","dateMiliSeconds":1511693709000,"imageUrl":"https://cdn.user.blog.st-hatena.com/default_entry_og_image/116461321/1514251518718655","authorName":"ryz310"},{"title":"Serverlessconf Tokyo 2017 ã«å‚åŠ ã—ã¦ãã¾ã—ãŸ","content":"\u003cp\u003eã©ã†ã‚‚ã€ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢ã®ã‚µãƒˆã‚¦ãƒªãƒ§ã‚¦ã‚¹ã‚±ã§ã™ âœŒï¸('Ï‰')âœŒï¸\u003c/p\u003e\n\n\u003cp\u003eå…ˆæ—¥ã®ãŠã¨ã†ãµå…ˆç”Ÿã®è¨˜äº‹ã«ã‚‚ã‚ã£ãŸã‚ˆã†ã«ã€\u003ca href=\"http://tokyo.serverlessconf.io/\"\u003eServerlessconf Tokyo 2017\u003c/a\u003e ã¨ã„ã†ã‚¤ãƒ™ãƒ³ãƒˆãŒéƒ½å†…ã§é–‹å‚¬ã•ã‚Œã¦ãŠã‚Šã¾ã—ãŸã€‚\u003c/p\u003e\n\n\u003cp\u003e\u003ciframe src=\"https://hatenablog-parts.com/embed?url=http%3A%2F%2Fdeveloper.feedforce.jp%2Fentry%2F2017%2F11%2F02%2F221452\" title=\"Serverlessconf Tokyo 2017 ã§ IBM Cloud Functions ã®ã‚¢ãƒ„ã„è©±ã‚’èã„ã¦ããŸ - Feedforce Developer Blog\" class=\"embed-card embed-blogcard\" scrolling=\"no\" frameborder=\"0\" style=\"display: block; width: 100%; height: 190px; max-width: 500px; margin: 10px 0px;\"\u003e\u003c/iframe\u003e\u003ccite class=\"hatena-citation\"\u003e\u003ca href=\"http://developer.feedforce.jp/entry/2017/11/02/221452\"\u003edeveloper.feedforce.jp\u003c/a\u003e\u003c/cite\u003e\u003c/p\u003e\n\n\u003cp\u003e11/3(é‡‘) ã®ãƒ¡ã‚¤ãƒ³ã‚«ãƒ³ãƒ•ã‚¡ãƒ¬ãƒ³ã‚¹ã«ã¯å¼Šç¤¾ã‹ã‚‰ã‚‚5åã»ã©å‚åŠ ã—ã¦ãŠã‚Šã€ã¿ã‚“ãªå¤§å­¦ç”Ÿã®é ƒã®100å€ãã‚‰ã„æ„è­˜é«˜ãå‹‰å¼·ã—ã¦å‚ã‚Šã¾ã—ãŸ âœŒï¸('Ï‰')âœŒï¸\nãŠæ˜¼ã”é£¯ã«å¼å½“å‡ºãŸã®ãŒå¬‰ã—ã‹ã£ãŸã§ã™ âœŒï¸('Ï‰')âœŒï¸\nã‚ã¨ã€é¦´æŸ“ã¿ã‚ã‚‹ãƒ¡ãƒ³ãƒ„ã§ã‚«ãƒ³ãƒ•ã‚¡ãƒ¬ãƒ³ã‚¹è¡Œãã¨ã€çµ‚ã‚ã£ã¦ã‹ã‚‰é£²ã¿ã«è¡Œã‘ã‚‹ã®ã‚‚è‰¯ã„ã§ã™ã­ âœŒï¸('Ï‰')âœŒï¸\u003c/p\u003e\n\n\u003cp\u003eã•ã¦ã€ä»Šå›ã®è¨˜äº‹ã§ã¯å½“æ—¥ã®ç™ºè¡¨å†…å®¹ã«ã¤ã„ã¦ã„ãã¤ã‹ãƒ€ã‚¤ã‚¸ã‚§ã‚¹ãƒˆã¨æ„Ÿæƒ³ã‚’æ›¸ã„ã¦ã„ããŸã„ã¨æ€ã„ã¾ã™ã€‚\u003c/p\u003e\n\n\u003cp\u003eã‚¹ãƒ©ã‚¤ãƒ‰ã¯ã“ã¡ã‚‰ã®ã‚µã‚¤ãƒˆã§ã¾ã¨ã‚ã‚‰ã‚Œã¦ã„ã‚‹ã‚ˆã†ã§å¤§å¤‰åŠ©ã‹ã‚Šã¾ã™ ğŸ™\u003c/p\u003e\n\n\u003cp\u003e\u003ciframe src=\"https://hatenablog-parts.com/embed?url=http%3A%2F%2Fwww.n-novice.com%2Fentry%2F2017%2F11%2F03%2F240000\" title=\"Serverlessconf Tokyo 2017 å…¬é–‹è³‡æ–™ - ã«ã‚ã‹ã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢å¥½ããªã“ã¨ã‚’æ›¸ãå‚™å¿˜éŒ²\" class=\"embed-card embed-blogcard\" scrolling=\"no\" frameborder=\"0\" style=\"display: block; width: 100%; height: 190px; max-width: 500px; margin: 10px 0px;\"\u003e\u003c/iframe\u003e\u003ccite class=\"hatena-citation\"\u003e\u003ca href=\"http://www.n-novice.com/entry/2017/11/03/240000\"\u003ewww.n-novice.com\u003c/a\u003e\u003c/cite\u003e\u003c/p\u003e\n\n\u003ch1\u003eã‚µãƒ¼ãƒãƒ¬ã‚¹ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£ã«ã‚ˆã‚‹æ™‚ç³»åˆ—ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã®æ§‹ç¯‰ã¨ç›£è¦–\u003c/h1\u003e\n\n\u003cscript async class=\"speakerdeck-embed\" data-id=\"c1e5e041140945188ca5b0de4ee32f34\" data-ratio=\"1.77777777777778\" src=\"//speakerdeck.com/assets/embed.js\"\u003e\u003c/script\u003e\n\n\n\u003cul\u003e\n\u003cli\u003eMackerel ã¨ã„ã†ç›£è¦–ã‚µãƒ¼ãƒ“ã‚¹ã‚’ã©ã®ã‚ˆã†ã«ç›£è¦–ãƒ»ç®¡ç†ã—ã¦ã„ã‚‹ã®ã‹ã€ã¨ã„ã†ãŠè©±\u003c/li\u003e\n\u003cli\u003eæ™‚ç³»åˆ—ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã®æ§‹æˆ\n\n\u003cul\u003e\n\u003cli\u003eKinesis Streams ã¸ä¿å­˜\u003c/li\u003e\n\u003cli\u003eLambda ã§ Redis ã¸ä¿å­˜\u003c/li\u003e\n\u003cli\u003eRedis ã«ä¸€å®šä»¶æ•°æºœã¾ã£ãŸã‚‰ DynamoDB ã¸ä¿å­˜\n\n\u003cul\u003e\n\u003cli\u003eä¸€åº¦ Redis ã‚’æŒŸã‚“ã§ã„ã‚‹ã®ã¯æ›¸ãè¾¼ã¿ã‚³ã‚¹ãƒˆã‚’æŠ‘ãˆã‚‹ãŸã‚\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003eDyanmoDB ã® TTL ã‚’è¶…ãˆã‚‹ãƒ‡ãƒ¼ã‚¿ã¯ S3 ã¸ä¿å­˜\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003eãƒ‡ãƒ¼ã‚¿ã®å‚ç…§æ€§ã«åˆã‚ã›ã¦æ›¸ãè¾¼ã¿å…ˆã‚’å¤‰æ›´ã—ã¦ã„ã‚‹ã®ã¯ãƒŠãƒ«ãƒ›ãƒ‰\u003c/li\u003e\n\u003cli\u003eç›£è¦–ã«ã¤ã„ã¦ã¾ã¨ã‚\n\n\u003cul\u003e\n\u003cli\u003eãƒ¡ãƒˆãƒªãƒƒã‚¯ã‚’å¯è¦–åŒ–ã—ã¦çœºã‚ã‚ˆã†\u003c/li\u003e\n\u003cli\u003eç›£è¦–ã®åŸºç¤ã¯å¹³å¸¸çŠ¶æ…‹ã‚’çŸ¥ã‚‹ã“ã¨\u003c/li\u003e\n\u003cli\u003eç³»å…¨ä½“ã®å¯ç”¨æ€§ã‚’ç›£è¦–ã—ã‚ˆã†\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\n\n\u003cp\u003eServerless ã‚’ä½¿ã£ãŸå…·ä½“çš„ãªè¨­è¨ˆä¾‹ã¨ã—ã¦ã€ã¨ã¦ã‚‚å‚è€ƒã«ãªã‚Šã¾ã™ã€‚\næ™‚ç³»åˆ—ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã®å®Ÿè£…ã¨ã—ã¦ã€è¤‡æ•°ã®ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸ã‚’ä¸Šæ‰‹ãçµ„ã¿åˆã‚ã›ã¦è¨­è¨ˆã•ã‚Œã¦ã„ã‚‹ã®ã¯è‰²ã€…ãªã‚·ãƒ¼ãƒ³ã§å¿œç”¨ã§ãã‚‹è¨­è¨ˆä¾‹ã§ã¯ãªã„ã§ã—ã‚‡ã†ã‹ã€‚\u003c/p\u003e\n\n\u003ch1\u003eJava ãƒãƒ¼ãƒ ãŒé¸æŠã—ãŸTypeScript ã«ã‚ˆã‚‹ AWS Lambda é–‹ç™º\u003c/h1\u003e\n\n\u003cp\u003e\u003ca href=\"http://riotz.works/slides/?2017-serverless-conf\"\u003eSlides | Riotz Works\u003c/a\u003e\u003c/p\u003e\n\n\u003cul\u003e\n\u003cli\u003eå›ºå®š IP ã‚’å®Ÿç¾ã™ã‚‹ã«ã¯ VPC lambda ãŒå¿…è¦\n\n\u003cul\u003e\n\u003cli\u003eVPC ã® lambda ã¯ã™ã”ãé…ã„\u003c/li\u003e\n\u003cli\u003eå›ºå®š IP ã«å¯¾ã™ã‚‹éœ€è¦ã¯ç¾åœ¨ã‚‚ä¸€å®šæ•°ã‚ã‚‹ã‚ˆã†ãªã®ã§ã€‚ã€‚ã€‚ï¼ˆæ—¥æœ¬ã§ã¯ç‰¹ã«ï¼‰\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003eãƒã‚¤ã‚¯ãƒ­åŒ–ãŒéå‰°ã§è¤‡é›‘ã«ãªã£ãŸ\n\n\u003cul\u003e\n\u003cli\u003eã©ã®ç¨‹åº¦ã®ç²’åº¦ã§ã‚µãƒ¼ãƒ“ã‚¹ã‚’åˆ‡ã‚Šåˆ†ã‘ã¦ã„ãã‹ã€ã¨ã„ã†ã®ã¯ç›¸å¤‰ã‚ã‚‰ãšã‚»ãƒ³ã‚¹ãŒå•ã‚ã‚Œã‚‹ãªã€ã¨ã„ã†å°è±¡\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003eè¨€èªæ¯ã«å®Ÿè¡Œé€Ÿåº¦ãŒãšã„ã¶ã‚“é•ã†\n\n\u003cul\u003e\n\u003cli\u003eä¸€åº¦ Java ã§å®Ÿè£…ã—ã¦ã€ã‚¹ãƒ”ãƒ¼ãƒ‰ãŒå‡ºãšã« TypeScript ã§å®Ÿè£…ã—ç›´ã—ãŸ\n\n\u003cul\u003e\n\u003cli\u003eJava ã¯åˆå›å®Ÿè¡Œæ™‚ã¯ã‚ªãƒ¼ãƒãƒ¼ãƒ˜ãƒƒãƒ‰ãŒå¤§ãã„\u003c/li\u003e\n\u003cli\u003eãƒãƒƒãƒå‡¦ç†ã®ã‚ˆã†ã«è¨ˆç®—é‡ãŒå¤šã„å‡¦ç†ã§ã‚ã‚Œã° Java ã®æ–¹ãŒé€Ÿã„ã‚ˆã†ã§ã™\u003c/li\u003e\n\u003cli\u003eAWS Lambdaã®å‡¦ç†æ€§èƒ½ã‚’è¨€èªæ¯ã«æ¸¬ã£ã¦ã¿ãŸ\n\n\u003cul\u003e\n\u003cli\u003e\u003ca href=\"http://acro-engineer.hatenablog.com/entry/2016/08/02/120000\"\u003ehttp://acro-engineer.hatenablog.com/entry/2016/08/02/120000\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\n\n\u003ch1\u003eServerlessã®ä¸–ç•Œã«ç‰¹åˆ¥ãªã“ã¨ãªã‚“ã¦ä½•ã‚‚ãªã‹ã£ãŸ\u003c/h1\u003e\n\n\u003cp\u003e\u003ciframe src=\"https://hatenablog-parts.com/embed?url=https%3A%2F%2Fslideship.com%2Fusers%2F%40marcy-terui%2Fpresentations%2F2017%2F11%2F5vUYExsSUrPbyjyjKA7J99%2F\" title=\"The mind of Serverless as a Software - Serverlessã®ä¸–ç•Œã«ç‰¹åˆ¥ãªã“ã¨ãªã‚“ã¦ä½•ã‚‚ãªã‹ã£ãŸ -\" class=\"embed-card embed-webcard\" scrolling=\"no\" frameborder=\"0\" style=\"display: block; width: 100%; height: 155px; max-width: 500px; margin: 10px 0px;\"\u003e\u003c/iframe\u003e\u003ccite class=\"hatena-citation\"\u003e\u003ca href=\"https://slideship.com/users/@marcy-terui/presentations/2017/11/5vUYExsSUrPbyjyjKA7J99/\"\u003eslideship.com\u003c/a\u003e\u003c/cite\u003e\u003c/p\u003e\n\n\u003cul\u003e\n\u003cli\u003eServerless ã§ã‚ˆãã‚ã‚‹èª²é¡Œã¨è§£æ±º\n\n\u003cul\u003e\n\u003cli\u003eFunctionã®é©åˆ‡ãªåˆ†å‰²ãƒ»çµ±åˆ\u003c/li\u003e\n\u003cli\u003eFunctionã‚„ã‚µãƒ¼ãƒ“ã‚¹é–“ã®ãƒ‡ãƒ¼ã‚¿ã®å—ã‘æ¸¡ã—\u003c/li\u003e\n\u003cli\u003eå¤–éƒ¨ã‚µãƒ¼ãƒ“ã‚¹ã®å‘¼ã³å‡ºã—ã¨ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°\u003c/li\u003e\n\u003cli\u003eãƒ†ã‚¹ãƒˆ\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003eã‚¹ãƒ©ã‚¤ãƒ‰ã«è‰²ã€…ãª Tips ãŒè©³ã—ãæ›¸ã‹ã‚Œã¦ã„ã‚‹ã®ã§ä¸€èª­ã™ã‚‹ã¨å‰\n\n\u003cul\u003e\n\u003cli\u003eãŸã ã€ç´¹ä»‹ã•ã‚Œã¦ã„ã‚‹æ–¹æ³•ã ã¨ Lambda Function ã®ç²’åº¦ãŒã‹ãªã‚Šç´°ã‹ããªã‚‹ã®ã§ã€ãã®è¾ºã®ç®¡ç†ã¯å¤§ä¸ˆå¤«ãªã®ã‹æ°—ã«ãªã‚Šã¾ã—ãŸ\u003c/li\u003e\n\u003cli\u003eãƒã‚¤ã‚¯ãƒ­åŒ–ã—ã™ãå•é¡Œã¨ã‹ã¯å¤§ä¸ˆå¤«ã§ã—ã‚‡ã†ã‹ï¼Ÿ\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003eã©ã†ã„ã†ã‚µãƒ¼ãƒ“ã‚¹ãŒ Serverless ã«å‘ã„ã¦ã„ã‚‹ã®ã‹ã€ã¨ã„ã†è©±ã‚‚å‡ºã¦ãã‚‹ã®ã§å‚è€ƒã«ãªã‚Šã¾ã™\n\n\u003cul\u003e\n\u003cli\u003eå€‹äººçš„ã«ã¯ç‰¹æ€§ã‚’æŠ¼ã•ãˆãŸä¸Šã§ã€å¾“æ¥ã® Rails ã®ã‚ˆã†ãªã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã¨ Serverless ã‚’ãƒã‚¤ãƒ–ãƒªãƒƒãƒ‰ã«çµ„ã¿åˆã‚ã›ã¦ä½¿ã†ã®ãŒè‰¯ã„ã¨è€ƒãˆã¦ã„ã¾ã™\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\n\n\u003ch1\u003eServerlessã¨ã‹è¨€ã†å‰ã«çŸ¥ã£ã¦ã»ã—ã„DBã®ã“ã¨\u003c/h1\u003e\n\n\u003cp\u003e\u003ciframe src=\"https://hatenablog-parts.com/embed?url=https%3A%2F%2Fslideship.com%2Fusers%2F%40marcy-terui%2Fpresentations%2F2017%2F11%2FNV8cP63mxs1tLw4qkct7Xd%2F\" title=\"Serverlessã¨ã‹è¨€ã†å‰ã«çŸ¥ã£ã¦ã»ã—ã„DBã®ã“ã¨\" class=\"embed-card embed-webcard\" scrolling=\"no\" frameborder=\"0\" style=\"display: block; width: 100%; height: 155px; max-width: 500px; margin: 10px 0px;\"\u003e\u003c/iframe\u003e\u003ccite class=\"hatena-citation\"\u003e\u003ca href=\"https://slideship.com/users/@marcy-terui/presentations/2017/11/NV8cP63mxs1tLw4qkct7Xd/\"\u003eslideship.com\u003c/a\u003e\u003c/cite\u003e\u003c/p\u003e\n\n\u003cul\u003e\n\u003cli\u003eä¸€å€‹å‰ã®ã¨åŒã˜ç™»å£‡è€…ã®æ–¹\n\n\u003cul\u003e\n\u003cli\u003eã“ã¡ã‚‰ã¯ DB ã«ã¤ã„ã¦ã® tips\u003c/li\u003e\n\u003cli\u003eã„ã„æ„Ÿã˜ã«ç…½ã‚‰ã‚Œã¦ã„ãŸã®ã§ã€æ¥é€±å¼Šç¤¾ã§é–‹å‚¬ã•ã‚Œã‚‹ \u003ca href=\"http://developer.feedforce.jp/entry/2017/11/02/190000\"\u003eLTå¤§ä¼š\u003c/a\u003e ã§ã‚‚ã“ã‚“ãªæ„Ÿã˜ã®ãƒãƒªã‚’æœŸå¾…ã—ã¦ã„ã¾ã™ âœŒï¸('Ï‰')âœŒï¸\n\n\u003cul\u003e\n\u003cli\u003e\u003ca href=\"http://developer.feedforce.jp/entry/2017/11/02/190000\"\u003e\u0026#x793E;\u0026#x5185;LT\u0026#x5927;\u0026#x4F1A;\u0026#x6E96;\u0026#x5099;\u0026#x4E2D; - Feedforce Developer Blog\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003eéåŒæœŸã§ä¸¦åˆ—æ•°ã‚’åˆ¶é™ã™ã‚Œã° RDS ã‚’ Lambda ã‹ã‚‰åˆ©ç”¨ã—ã¦ã‚‚å•é¡Œãªã„\n\n\u003cul\u003e\n\u003cli\u003eåŒæ™‚æ¥ç¶šæ•°ãŒçˆ†ç™ºã—ãªã„ã‚ˆã†ã«èª¿æ•´ã—ã¦ä½¿ãˆã° OK\n\n\u003cul\u003e\n\u003cli\u003eLambda ã‹ã‚‰ RDS ã‚’ä½¿ã£ã¦ã¯ã„ã‘ãªã„ã€ã¨ã„ã†ã®ãŒã‚»ã‚ªãƒªãƒ¼ã ã£ãŸã®ã§ã€ä½¿ãˆã‚‹ã¨è¨€ã„åˆ‡ã‚‹äººãŒã„ãŸã®ã¯ã‚¤ãƒ³ãƒ‘ã‚¯ãƒˆã‚ã£ãŸ\u003c/li\u003e\n\u003cli\u003eã¾ã‚ç¢ºã‹ã«ã€‚ä¾‹ãˆã° AWS Aurora ã® db.r3.large ã ã¨ æœ€å¤§æ¥ç¶šæ•°ãŒ 1,000 ã‚ã‚‹\n\n\u003cul\u003e\n\u003cli\u003e\u003ca href=\"http://docs.aws.amazon.com/ja_jp/AmazonRDS/latest/UserGuide/Aurora.Managing.html#Aurora.Managing.MaxConnections\"\u003ehttp://docs.aws.amazon.com/ja_jp/AmazonRDS/latest/UserGuide/Aurora.Managing.html#Aurora.Managing.MaxConnections\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003eåŒæ™‚ã« 1,000 ã‚’è¶…ãˆã‚‹ Lambda ãŒå®Ÿè¡Œã•ã‚Œãªã‘ã‚Œã°ç†å±ˆã®ä¸Šã§ã¯å¤§ä¸ˆå¤«ãªã¯ãš\u003c/li\u003e\n\u003cli\u003eç”¨æ³•ç”¨é‡ã‚’å®ˆã£ã¦æ­£ã—ããŠä½¿ã„ãã ã•ã„ã€ã¨ã„ã†ã‚„ã¤ã‹ã€‚ã€‚\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003eDynamoDB ã§ãƒ•ãƒ«ã‚¹ã‚­ãƒ£ãƒ³ã—ãŸã‚‰è² ã‘\n\n\u003cul\u003e\n\u003cli\u003eã“ã®è¾ºã¯æœ€è¿‘è‡ªåˆ†ã§ã‚‚å‹‰å¼·ã—ã¦ã„ãŸã®ã§å†ç¢ºèªã—ãªãŒã‚‰èã„ã¦ã„ã¾ã—ãŸï¼ˆå®£ä¼ï¼‰\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\n\n\u003cp\u003e\u003ciframe src=\"https://hatenablog-parts.com/embed?url=http%3A%2F%2Fdeveloper.feedforce.jp%2Fentry%2F2017%2F11%2F04%2F235323\" title=\"Dynamoid ã®ä½¿ã„æ–¹ã€range ç·¨ã€‘ - Feedforce Developer Blog\" class=\"embed-card embed-blogcard\" scrolling=\"no\" frameborder=\"0\" style=\"display: block; width: 100%; height: 190px; max-width: 500px; margin: 10px 0px;\"\u003e\u003c/iframe\u003e\u003ccite class=\"hatena-citation\"\u003e\u003ca href=\"http://developer.feedforce.jp/entry/2017/11/04/235323\"\u003edeveloper.feedforce.jp\u003c/a\u003e\u003c/cite\u003e\u003c/p\u003e\n\n\u003ch1\u003eçœŸã®ã‚µãƒ¼ãƒãƒ¬ã‚¹ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒˆã¨ã‚µãƒ¼ãƒãƒ¬ã‚¹æ™‚ä»£ã®ã‚²ãƒ¼ãƒ é–‹ç™ºãƒ»é‹ç”¨\u003c/h1\u003e\n\n\u003cscript async class=\"speakerdeck-embed\" data-id=\"100ed8972466451a8fab9450e51bb0c6\" data-ratio=\"1.77777777777778\" src=\"//speakerdeck.com/assets/embed.js\"\u003e\u003c/script\u003e\n\n\n\u003cp\u003eä»–ã®ç™ºè¡¨ã¨è¢«ã£ã¦ã—ã¾ã£ãŸã®ã§ã€å½“æ—¥ã®è¬›æ¼”ã¯è¦‹ã‚‰ã‚Œãªã‹ã£ãŸã®ã§ã™ãŒã€ãƒ–ãƒ­ã‚°ã®æ–¹ã‚’è¦‹ãŸã‚‰ã¨ã¦ã‚‚èˆˆå‘³æ·±ã„å†…å®¹ã ã£ãŸã®ã§ã”ç´¹ä»‹ã—ã¦ãŠãã¾ã™ğŸ™\u003c/p\u003e\n\n\u003cp\u003e\u003ciframe src=\"https://hatenablog-parts.com/embed?url=http%3A%2F%2Fgs2.hatenablog.com%2Fentry%2F2017%2F11%2F04%2F013215\" title=\"Serverlessconf Tokyo 2017 ã«ç™»å£‡ã—ã¾ã—ãŸã€‚ãã®ã»ã‹é›‘æ„Ÿ - GS2 Blog\" class=\"embed-card embed-blogcard\" scrolling=\"no\" frameborder=\"0\" style=\"display: block; width: 100%; height: 190px; max-width: 500px; margin: 10px 0px;\"\u003e\u003c/iframe\u003e\u003ccite class=\"hatena-citation\"\u003e\u003ca href=\"http://gs2.hatenablog.com/entry/2017/11/04/013215\"\u003egs2.hatenablog.com\u003c/a\u003e\u003c/cite\u003e\u003c/p\u003e\n\n\u003cblockquote\u003e\u003cp\u003eå®Ÿã¯ã€ç§ã‚‚SaaSã¯ã‚µãƒ¼ãƒãƒ¬ã‚¹ãªã®ã‹ï¼Ÿã¨ã„ã†äº‹ã«å¯¾ã—ã¦ã¯ã€ã¡ã‚‡ã£ã¨æ€ã†ã¨ã“ã‚ãŒã‚ã‚Šã¾ã™ã€‚\nç§ã¯ãƒ•ãƒ«ãƒãƒãƒ¼ã‚¸ãƒ‰ã‚µãƒ¼ãƒ“ã‚¹ã¯ã‚µãƒ¼ãƒãƒ¬ã‚¹ã ã¨æ€ã„ã¾ã™ãŒã€ãƒãƒãƒ¼ã‚¸ãƒ‰ã‚µãƒ¼ãƒ“ã‚¹ã¯ã‚µãƒ¼ãƒãƒ¬ã‚¹ã§ã¯ãªã„ã€‚ã¨æ€ã£ã¦ã„ã‚‹ãŸã‚ã§ã™ã€‚\nã¾ãŸã€åˆ¥ã®è¨€ã„æ–¹ã‚’ã™ã‚‹ã¨ã€ã‚¹ã‚±ãƒ¼ãƒ«ã«é™ç•ŒãŒã‚ã‚‹ãƒ¢ãƒã¯ã‚µãƒ¼ãƒãƒ¬ã‚¹ã§ã¯ãªã„ã€‚ã¨æ€ã£ã¦ã„ã¾ã™ã€‚\nã¤ã¾ã‚Šã€ä½¿ç”¨æ–¹æ³•ã•ãˆé–“é•ãˆãªã‘ã‚Œã°ã€Šå‹æ‰‹ã«ã€‹ã€Šç„¡é™ã«ã€‹ã‚¹ã‚±ãƒ¼ãƒ«ã™ã‚‹ãƒ•ãƒ«ãƒãƒãƒ¼ã‚¸ãƒ‰ã‚µãƒ¼ãƒ“ã‚¹ã“ããŒã‚µãƒ¼ãƒãƒ¬ã‚¹ã€‚ã¨è¨€ãˆã‚‹ã®ã§ã¯ãªã„ã‹ã€‚ã¨æ€ã£ã¦ã„ã¾ã™ã€‚\u003c/p\u003e\u003c/blockquote\u003e\n\n\u003cp\u003eSaaS ã®é‹ç”¨ãƒ»é–‹ç™ºã—ã¦ã‚‹äººã ã¨çµæ§‹é‡è¦ãªãƒ†ãƒ¼ãƒãªã®ã§ã¯ãªã„ã‹ã€ã¨æ€ã„ã¾ã™ã€‚\nSaaS ãªã‚“ã ã‹ã‚‰ãƒªã‚¯ã‚¨ã‚¹ãƒˆã©ã‚“ã ã‘é€ã£ã¦ã‚‚å‘ã“ã†å´ã§è‰¯ãã«è¨ˆã‚‰ã£ã¦ãã‚Œã‚‹ã‚„ã‚ã€‚ãã†æ€ã£ã¦ãŸæ™‚æœŸãŒä¿ºã«ã‚‚ã‚ã‚Šã¾ã—ãŸ ğŸ˜‡\nã¨ã¯è¨€ãˆã€SaaS åˆ©ç”¨è€…ã‹ã‚‰ãã†è¦‹ãˆã‚‹ã‚ˆã†ãªã‚µãƒ¼ãƒ“ã‚¹ã«ã—ãŸã„ã€ã¨ã„ã†æ€ã„ã¯ã‚ã‚Šã¾ã™ã€‚SaaS åˆ©ç”¨è€…ã¨ã—ã¦ã‚‚ SaaS ã®è£å´ã®ã“ã¨ã¯ä¸€åˆ‡è€ƒãˆãšã«åˆ©ç”¨ã—ãŸã„ã¨æ€ã†ã®ã§ã€‚ã€‚\nå¼Šç¤¾ã® \u003ca href=\"https://socialplus.jp/\"\u003eã‚½ãƒ¼ã‚·ãƒ£ãƒ« PLUS\u003c/a\u003e ã‚‚ SaaS ã§ã™ãŒã€åˆ©ç”¨ã—ã¦é ‚ã„ã¦ã„ã‚‹ã‚µã‚¤ãƒˆãŒã‚¤ãƒ™ãƒ³ãƒˆãªã©ã§ã‚¢ã‚¯ã‚»ã‚¹ãŒæ€¥é¨°ã™ã‚‹ã‚±ãƒ¼ã‚¹ãŒã‚ã‚Šã¾ã™ã®ã§ã€é–‹ç™ºãƒ»é‹ç”¨ã§ã¯ãã†ã„ã†ç‚¹ã«æ°—ã‚’é£ã£ã¦ã„ã¾ã™ã€‚\u003c/p\u003e\n\n\u003cul\u003e\n\u003cli\u003eã‚³ãƒ¼ãƒ«ãƒ‰ã‚¹ã‚¿ãƒ¼ãƒˆå¯¾ç­–\n\n\u003cul\u003e\n\u003cli\u003eã‚³ãƒ¼ãƒ«ãƒ‰ã‚¹ã‚¿ãƒ¼ãƒˆã¨ã¯\n\n\u003cul\u003e\n\u003cli\u003eLambda ã¯åˆå›å‘¼ã³å‡ºã—æ™‚ã‚„ã—ã°ã‚‰ãå‘¼ã°ã‚Œãªã‹ã£ãŸå¾Œã«å‘¼ã°ã‚ŒãŸã¨ãã¯ response time ãŒé•·ããªã‚‹\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e1 ã¤ã® Lambda Function ã«å…¨ãƒ­ã‚¸ãƒƒã‚¯ã‚’å…¥ã‚Œã‚‹\n\n\u003cul\u003e\n\u003cli\u003eAPI Gateway ã®ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆæ¯ã«ã©ã®ãƒ­ã‚¸ãƒƒã‚¯ã‚’å®Ÿè¡Œã™ã‚‹ã‹ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã§æ¸¡ã—ã¦ã„ã‚‹\u003c/li\u003e\n\u003cli\u003eã‚³ãƒ¼ãƒ«æ¯”ç‡ã®ä½ã„ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆã§ã‚‚ã‚³ãƒ¼ãƒ«ãƒ‰ã‚¹ã‚¿ãƒ¼ãƒˆã‚’å›é¿ã§ãã‚‹\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003eãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã§å‹•ä½œãŒå¤‰ã‚ã‚‹\n\n\u003cul\u003e\n\u003cli\u003eRails ã® Routing ã®ã‚ˆã†ãªã‚‚ã®ã¨ä½è—¤ã¯è§£é‡ˆã—ã¾ã—ãŸ\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003eä¸€å®šé–“éš”ã§ Lambda ã‚’èµ·ã“ã™ã‚ˆã†ã« Invoke ã•ã›ã‚‹æ–¹æ³•ã‚‚ã‚ã‚‹ãŒã€å€‹äººçš„ã«ã¯ Routing ã‚„ã‚‰ã›ã‚‹æ–¹å¼ã®æ–¹ãŒè‰¯ã„ã®ã§ã¯ãªã„ã‹ã€ã¨ã„ã†æ°—ãŒã™ã‚‹\n\n\u003cul\u003e\n\u003cli\u003eLambda Function ãŒå¤§é‡ã«ä½œã‚‰ã‚Œã¦ã—ã¾ã†ï¼ˆãƒã‚¤ã‚¯ãƒ­åŒ–ã—ã™ãå•é¡Œï¼‰ã¨ç®¡ç†ãŒé›£ã—ããªã‚‹ã®ã§ã¯ãªã„ã‹ã€ã¨ã„ã†æ€ã„ã‚‚ã‚ã£ã¦\u003c/li\u003e\n\u003cli\u003eã“ã®æ–¹æ³•ã¯å®Ÿéš›ã«è©¦ã—ã¦ã¿ãŸã„ã§ã™\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\n\n\u003ch1\u003eæ‰€æ„Ÿ\u003c/h1\u003e\n\n\u003cp\u003eServerless ã«é™ã£ãŸã“ã¨ã§ã¯ã‚ã‚Šã¾ã›ã‚“ãŒã€è¿‘å¹´ç™»å ´ã™ã‚‹æ–°æŠ€è¡“ã¯ãƒˆãƒ¬ãƒ¼ãƒ‰ã‚ªãƒ•ãªå´é¢ãŒå¼·ã„ã‚ˆã†ã«æ„Ÿã˜ã¦ã„ã¾ã™ã€‚\nä¸€æ˜”å‰ã¯ä»Šã¾ã§ã¯è§£ã®ç„¡ã‹ã£ãŸæŠ€è¡“çš„èª²é¡Œã‚’è§£æ±ºã™ã‚‹å½¢ã§æ–°ã—ã„æŠ€è¡“ãŒç™»å ´ã™ã‚‹ã€ã¨ã„ã†ã‚±ãƒ¼ã‚¹ãŒå¤šã‹ã£ãŸã®ã§ã¯ãªã„ã§ã—ã‚‡ã†ã‹ï¼Ÿ\nå¯¾ã—ã¦ä»Šã¯ã€æ—¢å­˜ã®æŠ€è¡“ã§ã‚‚ã§ããªãã¯ãªã„ã‘ã©ã€ç‰¹å®šã®ã‚±ãƒ¼ã‚¹ã§å›°ã‚‹ã‹ã‚‰ã€ãã‚Œã‚’è§£æ±ºã™ã‚‹æ–°ã—ã„æŠ€è¡“ãŒç™»å ´ã™ã‚‹ã€ã¨ã„ã†ã‚±ãƒ¼ã‚¹ãŒå¤šã„ã‚ˆã†ãªã€‚\nãã—ã¦ã€ãã®ç‰¹å®šã®ã‚±ãƒ¼ã‚¹ã‚’è§£æ±ºã™ã‚‹ãŸã‚ã«ã€ä¸€éƒ¨ã®ã“ã¨ã¯è¨±å®¹ã—ãªã‘ã‚Œã°ãªã‚‰ãªã„ã€ã¨ã„ã†å°è±¡ã§ã™ã€‚\nï¼ˆã¾ã‚å˜ç´”ã«åƒ•ã‚‚æ­³ã‚’ã¨ã£ã¦ã€ä¿å®ˆçš„ãªè€ƒãˆæ–¹ãŒå¼·ããªã£ã¦ããŸã ã‘ãªã®ã‹ã‚‚ã—ã‚Œã¾ã›ã‚“ã€‚ã€‚ï¼‰\u003c/p\u003e\n\n\u003cp\u003eä»Šå›ã®ã‚«ãƒ³ãƒ•ã‚¡ãƒ¬ãƒ³ã‚¹ã¯å®Ÿéš›ã®é–‹ç™ºè€…ã‹ã‚‰ã©ã†ã„ã†ãƒˆãƒ¬ãƒ¼ãƒ‰ã‚ªãƒ•ãŒã‚ã‚‹ã‹ã€ã¨ã„ã†è©±ãŒå‡ºã¦ããŸã“ã¨ã§ã€è‡ªåˆ†ã®ä¸­ã§æ”¹ã‚ã¦ Serverless ã¨å‘ãåˆã†è¦šæ‚Ÿã¨ã„ã†ã‹ã€ãƒ¢ãƒãƒ™ãƒ¼ã‚·ãƒ§ãƒ³ãŒå‡ºã¦ããŸã‚ˆã†ã«æ€ã„ã¾ã™ã€‚\u003c/p\u003e\n\n\u003cp\u003eã¨ã¯ã„ãˆã€å€‹äººçš„ã«ã¯ã€å¾“æ¥ã® Rails ã‚¢ãƒ—ãƒªã¨ Serverless ã‚’ãƒã‚¤ãƒ–ãƒªãƒƒãƒ‰ã«ä½¿ã£ãŸè¨­è¨ˆã«å–ã‚Šçµ„ã‚“ã§ã„ãã®ãŒç¾æ™‚ç‚¹ã§ã®æœ€é©è§£ã§ã¯ãªã„ã‹ã¨æ„Ÿã˜ã¦ã„ã¾ã™ã€‚\nã‚‚ã¡ã‚ã‚“ã€è¨­è¨ˆã‚’è€ƒãˆãŸä¸Šã§ Full-Serverless ãŒæœ€é©ã¨ãªã‚Œã°ã€ãã†ã„ã†ã‚¢ãƒ—ãƒªã‚’ä½œã£ã¦è¡Œãã¤ã‚‚ã‚Šã§ã™ãŒã€ãã‚Œãªã‚Šã«è¤‡é›‘ãªãƒ­ã‚¸ãƒƒã‚¯ã‚’è€ƒãˆã‚‹ã«ã¯ã¾ã  Full-Serverless ã¯æ—©ã„ã®ã§ã¯ãªã„ã‹ãªã€ã¨æ€ã„ã¾ã™ã€‚\nã‚„ã¯ã‚Šä¸¦åˆ—æ€§ã®é«˜ã•ãŒ Serverless ã®é­…åŠ›ãªã®ã§ã€ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã®åŸºæœ¬çš„ãªéƒ¨åˆ†ã¯å¾“æ¥é€šã‚Š Rails ã§ä½œæˆã—ã¦ã€ã‚¢ã‚¯ã‚»ã‚¹æ•°ãŒæ€¥ã«ã‚¹ãƒ‘ã‚¤ã‚¯ã™ã‚‹ã‚ˆã†ãªå ´æ‰€ã‚’å±€æ‰€çš„ã« Serverless ã«ã™ã‚‹ã‚ˆã†ãªè¨­è¨ˆã‚’ã“ã‚Œã‹ã‚‰è‰²ã€…è©¦ã—ã¦ã„ã“ã†ã¨è€ƒãˆã¦ã„ã¾ã™ã€‚\u003c/p\u003e\n\n\u003cp\u003eãŸã ã€Serverless ã®ã‚³ãƒ³ã‚»ãƒ—ãƒˆã¨ã—ã¦ã¯ã€ã‚½ãƒ•ãƒˆã‚¦ã‚§ã‚¢é–‹ç™ºã®ç”Ÿç”£æ€§ãã®ã‚‚ã®ã‚’å‘ä¸Šã•ã›ã‚‹ã“ã¨ãŒç›®çš„ã¨ã®ã“ã¨ã ã£ãŸã®ã§ã€å°†æ¥çš„ã«ã¯ãƒã‚¤ãƒ–ãƒªãƒƒãƒ‰ã‚ˆã‚Šã‚‚ Serverless ã«æŒ¯ã‚Šåˆ‡ã£ãŸè¨­è¨ˆãŒãƒ™ã‚¹ãƒˆã«ãªã£ã¦ã„ãã‹ã‚‚ã—ã‚Œã¾ã›ã‚“ã€‚ä»Šå¾Œã®ç™ºå±•ã«æœŸå¾…ã—ã¦ã„ã¾ã™ã€‚\u003c/p\u003e\n","contentSnippet":"ã©ã†ã‚‚ã€ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢ã®ã‚µãƒˆã‚¦ãƒªãƒ§ã‚¦ã‚¹ã‚±ã§ã™ âœŒï¸('Ï‰')âœŒï¸å…ˆæ—¥ã®ãŠã¨ã†ãµå…ˆç”Ÿã®è¨˜äº‹ã«ã‚‚ã‚ã£ãŸã‚ˆã†ã«ã€Serverlessconf Tokyo 2017 ã¨ã„ã†ã‚¤ãƒ™ãƒ³ãƒˆãŒéƒ½å†…ã§é–‹å‚¬ã•ã‚Œã¦ãŠã‚Šã¾ã—ãŸã€‚developer.feedforce.jp11/3(é‡‘) ã®ãƒ¡ã‚¤ãƒ³ã‚«ãƒ³ãƒ•ã‚¡ãƒ¬ãƒ³ã‚¹ã«ã¯å¼Šç¤¾ã‹ã‚‰ã‚‚5åã»ã©å‚åŠ ã—ã¦ãŠã‚Šã€ã¿ã‚“ãªå¤§å­¦ç”Ÿã®é ƒã®100å€ãã‚‰ã„æ„è­˜é«˜ãå‹‰å¼·ã—ã¦å‚ã‚Šã¾ã—ãŸ âœŒï¸('Ï‰')âœŒï¸ãŠæ˜¼ã”é£¯ã«å¼å½“å‡ºãŸã®ãŒå¬‰ã—ã‹ã£ãŸã§ã™ âœŒï¸('Ï‰')âœŒï¸ã‚ã¨ã€é¦´æŸ“ã¿ã‚ã‚‹ãƒ¡ãƒ³ãƒ„ã§ã‚«ãƒ³ãƒ•ã‚¡ãƒ¬ãƒ³ã‚¹è¡Œãã¨ã€çµ‚ã‚ã£ã¦ã‹ã‚‰é£²ã¿ã«è¡Œã‘ã‚‹ã®ã‚‚è‰¯ã„ã§ã™ã­ âœŒï¸('Ï‰')âœŒï¸ã•ã¦ã€ä»Šå›ã®è¨˜äº‹ã§ã¯å½“æ—¥ã®ç™ºè¡¨å†…å®¹ã«ã¤ã„ã¦ã„ãã¤ã‹ãƒ€ã‚¤ã‚¸ã‚§ã‚¹ãƒˆã¨æ„Ÿæƒ³ã‚’æ›¸ã„ã¦ã„ããŸã„ã¨æ€ã„ã¾ã™ã€‚ã‚¹ãƒ©ã‚¤ãƒ‰ã¯ã“ã¡ã‚‰ã®ã‚µã‚¤ãƒˆã§ã¾ã¨ã‚ã‚‰ã‚Œã¦ã„ã‚‹ã‚ˆã†ã§å¤§å¤‰åŠ©ã‹ã‚Šã¾ã™ ğŸ™www.n-novice.comã‚µãƒ¼ãƒãƒ¬ã‚¹ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£ã«ã‚ˆã‚‹æ™‚ç³»åˆ—ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã®æ§‹ç¯‰ã¨ç›£è¦–Mackerel ã¨ã„ã†ç›£è¦–ã‚µãƒ¼ãƒ“ã‚¹ã‚’ã©ã®ã‚ˆã†ã«ç›£è¦–ãƒ»ç®¡ç†ã—ã¦ã„ã‚‹ã®ã‹ã€ã¨ã„ã†ãŠè©±æ™‚ç³»åˆ—ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã®æ§‹æˆKinesis Streams ã¸ä¿å­˜Lambda ã§ Redis ã¸ä¿å­˜Redis ã«ä¸€å®šä»¶æ•°æºœã¾ã£ãŸã‚‰ DynamoDB ã¸ä¿å­˜ä¸€åº¦ Redis ã‚’æŒŸã‚“ã§ã„ã‚‹ã®ã¯æ›¸ãè¾¼ã¿ã‚³ã‚¹ãƒˆã‚’æŠ‘ãˆã‚‹ãŸã‚DyanmoDB ã® TTL ã‚’è¶…ãˆã‚‹ãƒ‡ãƒ¼ã‚¿ã¯ S3 ã¸ä¿å­˜ãƒ‡ãƒ¼ã‚¿ã®å‚ç…§æ€§ã«åˆã‚ã›ã¦æ›¸ãè¾¼ã¿å…ˆã‚’å¤‰æ›´ã—ã¦ã„ã‚‹ã®ã¯ãƒŠãƒ«ãƒ›ãƒ‰ç›£è¦–ã«ã¤ã„ã¦ã¾ã¨ã‚ãƒ¡ãƒˆãƒªãƒƒã‚¯ã‚’å¯è¦–åŒ–ã—ã¦çœºã‚ã‚ˆã†ç›£è¦–ã®åŸºç¤ã¯å¹³å¸¸çŠ¶æ…‹ã‚’çŸ¥ã‚‹ã“ã¨ç³»å…¨ä½“ã®å¯ç”¨æ€§ã‚’ç›£è¦–ã—ã‚ˆã†Serverless ã‚’ä½¿ã£ãŸå…·ä½“çš„ãªè¨­è¨ˆä¾‹ã¨ã—ã¦ã€ã¨ã¦ã‚‚å‚è€ƒã«ãªã‚Šã¾ã™ã€‚æ™‚ç³»åˆ—ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã®å®Ÿè£…ã¨ã—ã¦ã€è¤‡æ•°ã®ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸ã‚’ä¸Šæ‰‹ãçµ„ã¿åˆã‚ã›ã¦è¨­è¨ˆã•ã‚Œã¦ã„ã‚‹ã®ã¯è‰²ã€…ãªã‚·ãƒ¼ãƒ³ã§å¿œç”¨ã§ãã‚‹è¨­è¨ˆä¾‹ã§ã¯ãªã„ã§ã—ã‚‡ã†ã‹ã€‚Java ãƒãƒ¼ãƒ ãŒé¸æŠã—ãŸTypeScript ã«ã‚ˆã‚‹ AWS Lambda é–‹ç™ºSlides | Riotz Workså›ºå®š IP ã‚’å®Ÿç¾ã™ã‚‹ã«ã¯ VPC lambda ãŒå¿…è¦VPC ã® lambda ã¯ã™ã”ãé…ã„å›ºå®š IP ã«å¯¾ã™ã‚‹éœ€è¦ã¯ç¾åœ¨ã‚‚ä¸€å®šæ•°ã‚ã‚‹ã‚ˆã†ãªã®ã§ã€‚ã€‚ã€‚ï¼ˆæ—¥æœ¬ã§ã¯ç‰¹ã«ï¼‰ãƒã‚¤ã‚¯ãƒ­åŒ–ãŒéå‰°ã§è¤‡é›‘ã«ãªã£ãŸã©ã®ç¨‹åº¦ã®ç²’åº¦ã§ã‚µãƒ¼ãƒ“ã‚¹ã‚’åˆ‡ã‚Šåˆ†ã‘ã¦ã„ãã‹ã€ã¨ã„ã†ã®ã¯ç›¸å¤‰ã‚ã‚‰ãšã‚»ãƒ³ã‚¹ãŒå•ã‚ã‚Œã‚‹ãªã€ã¨ã„ã†å°è±¡è¨€èªæ¯ã«å®Ÿè¡Œé€Ÿåº¦ãŒãšã„ã¶ã‚“é•ã†ä¸€åº¦ Java ã§å®Ÿè£…ã—ã¦ã€ã‚¹ãƒ”ãƒ¼ãƒ‰ãŒå‡ºãšã« TypeScript ã§å®Ÿè£…ã—ç›´ã—ãŸJava ã¯åˆå›å®Ÿè¡Œæ™‚ã¯ã‚ªãƒ¼ãƒãƒ¼ãƒ˜ãƒƒãƒ‰ãŒå¤§ãã„ãƒãƒƒãƒå‡¦ç†ã®ã‚ˆã†ã«è¨ˆç®—é‡ãŒå¤šã„å‡¦ç†ã§ã‚ã‚Œã° Java ã®æ–¹ãŒé€Ÿã„ã‚ˆã†ã§ã™AWS Lambdaã®å‡¦ç†æ€§èƒ½ã‚’è¨€èªæ¯ã«æ¸¬ã£ã¦ã¿ãŸhttp://acro-engineer.hatenablog.com/entry/2016/08/02/120000Serverlessã®ä¸–ç•Œã«ç‰¹åˆ¥ãªã“ã¨ãªã‚“ã¦ä½•ã‚‚ãªã‹ã£ãŸslideship.comServerless ã§ã‚ˆãã‚ã‚‹èª²é¡Œã¨è§£æ±ºFunctionã®é©åˆ‡ãªåˆ†å‰²ãƒ»çµ±åˆFunctionã‚„ã‚µãƒ¼ãƒ“ã‚¹é–“ã®ãƒ‡ãƒ¼ã‚¿ã®å—ã‘æ¸¡ã—å¤–éƒ¨ã‚µãƒ¼ãƒ“ã‚¹ã®å‘¼ã³å‡ºã—ã¨ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°ãƒ†ã‚¹ãƒˆã‚¹ãƒ©ã‚¤ãƒ‰ã«è‰²ã€…ãª Tips ãŒè©³ã—ãæ›¸ã‹ã‚Œã¦ã„ã‚‹ã®ã§ä¸€èª­ã™ã‚‹ã¨å‰ãŸã ã€ç´¹ä»‹ã•ã‚Œã¦ã„ã‚‹æ–¹æ³•ã ã¨ Lambda Function ã®ç²’åº¦ãŒã‹ãªã‚Šç´°ã‹ããªã‚‹ã®ã§ã€ãã®è¾ºã®ç®¡ç†ã¯å¤§ä¸ˆå¤«ãªã®ã‹æ°—ã«ãªã‚Šã¾ã—ãŸãƒã‚¤ã‚¯ãƒ­åŒ–ã—ã™ãå•é¡Œã¨ã‹ã¯å¤§ä¸ˆå¤«ã§ã—ã‚‡ã†ã‹ï¼Ÿã©ã†ã„ã†ã‚µãƒ¼ãƒ“ã‚¹ãŒ Serverless ã«å‘ã„ã¦ã„ã‚‹ã®ã‹ã€ã¨ã„ã†è©±ã‚‚å‡ºã¦ãã‚‹ã®ã§å‚è€ƒã«ãªã‚Šã¾ã™å€‹äººçš„ã«ã¯ç‰¹æ€§ã‚’æŠ¼ã•ãˆãŸä¸Šã§ã€å¾“æ¥ã® Rails ã®ã‚ˆã†ãªã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã¨ Serverless ã‚’ãƒã‚¤ãƒ–ãƒªãƒƒãƒ‰ã«çµ„ã¿åˆã‚ã›ã¦ä½¿ã†ã®ãŒè‰¯ã„ã¨è€ƒãˆã¦ã„ã¾ã™Serverlessã¨ã‹è¨€ã†å‰ã«çŸ¥ã£ã¦ã»ã—ã„DBã®ã“ã¨slideship.comä¸€å€‹å‰ã®ã¨åŒã˜ç™»å£‡è€…ã®æ–¹ã“ã¡ã‚‰ã¯ DB ã«ã¤ã„ã¦ã® tipsã„ã„æ„Ÿã˜ã«ç…½ã‚‰ã‚Œã¦ã„ãŸã®ã§ã€æ¥é€±å¼Šç¤¾ã§é–‹å‚¬ã•ã‚Œã‚‹ LTå¤§ä¼š ã§ã‚‚ã“ã‚“ãªæ„Ÿã˜ã®ãƒãƒªã‚’æœŸå¾…ã—ã¦ã„ã¾ã™ âœŒï¸('Ï‰')âœŒï¸ç¤¾å†…LTå¤§ä¼šæº–å‚™ä¸­ - Feedforce Developer BlogéåŒæœŸã§ä¸¦åˆ—æ•°ã‚’åˆ¶é™ã™ã‚Œã° RDS ã‚’ Lambda ã‹ã‚‰åˆ©ç”¨ã—ã¦ã‚‚å•é¡Œãªã„åŒæ™‚æ¥ç¶šæ•°ãŒçˆ†ç™ºã—ãªã„ã‚ˆã†ã«èª¿æ•´ã—ã¦ä½¿ãˆã° OKLambda ã‹ã‚‰ RDS ã‚’ä½¿ã£ã¦ã¯ã„ã‘ãªã„ã€ã¨ã„ã†ã®ãŒã‚»ã‚ªãƒªãƒ¼ã ã£ãŸã®ã§ã€ä½¿ãˆã‚‹ã¨è¨€ã„åˆ‡ã‚‹äººãŒã„ãŸã®ã¯ã‚¤ãƒ³ãƒ‘ã‚¯ãƒˆã‚ã£ãŸã¾ã‚ç¢ºã‹ã«ã€‚ä¾‹ãˆã° AWS Aurora ã® db.r3.large ã ã¨ æœ€å¤§æ¥ç¶šæ•°ãŒ 1,000 ã‚ã‚‹http://docs.aws.amazon.com/ja_jp/AmazonRDS/latest/UserGuide/Aurora.Managing.html#Aurora.Managing.MaxConnectionsåŒæ™‚ã« 1,000 ã‚’è¶…ãˆã‚‹ Lambda ãŒå®Ÿè¡Œã•ã‚Œãªã‘ã‚Œã°ç†å±ˆã®ä¸Šã§ã¯å¤§ä¸ˆå¤«ãªã¯ãšç”¨æ³•ç”¨é‡ã‚’å®ˆã£ã¦æ­£ã—ããŠä½¿ã„ãã ã•ã„ã€ã¨ã„ã†ã‚„ã¤ã‹ã€‚ã€‚DynamoDB ã§ãƒ•ãƒ«ã‚¹ã‚­ãƒ£ãƒ³ã—ãŸã‚‰è² ã‘ã“ã®è¾ºã¯æœ€è¿‘è‡ªåˆ†ã§ã‚‚å‹‰å¼·ã—ã¦ã„ãŸã®ã§å†ç¢ºèªã—ãªãŒã‚‰èã„ã¦ã„ã¾ã—ãŸï¼ˆå®£ä¼ï¼‰developer.feedforce.jpçœŸã®ã‚µãƒ¼ãƒãƒ¬ã‚¹ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒˆã¨ã‚µãƒ¼ãƒãƒ¬ã‚¹æ™‚ä»£ã®ã‚²ãƒ¼ãƒ é–‹ç™ºãƒ»é‹ç”¨ä»–ã®ç™ºè¡¨ã¨è¢«ã£ã¦ã—ã¾ã£ãŸã®ã§ã€å½“æ—¥ã®è¬›æ¼”ã¯è¦‹ã‚‰ã‚Œãªã‹ã£ãŸã®ã§ã™ãŒã€ãƒ–ãƒ­ã‚°ã®æ–¹ã‚’è¦‹ãŸã‚‰ã¨ã¦ã‚‚èˆˆå‘³æ·±ã„å†…å®¹ã ã£ãŸã®ã§ã”ç´¹ä»‹ã—ã¦ãŠãã¾ã™ğŸ™gs2.hatenablog.comå®Ÿã¯ã€ç§ã‚‚SaaSã¯ã‚µãƒ¼ãƒãƒ¬ã‚¹ãªã®ã‹ï¼Ÿã¨ã„ã†äº‹ã«å¯¾ã—ã¦ã¯ã€ã¡ã‚‡ã£ã¨æ€ã†ã¨ã“ã‚ãŒã‚ã‚Šã¾ã™ã€‚ç§ã¯ãƒ•ãƒ«ãƒãƒãƒ¼ã‚¸ãƒ‰ã‚µãƒ¼ãƒ“ã‚¹ã¯ã‚µãƒ¼ãƒãƒ¬ã‚¹ã ã¨æ€ã„ã¾ã™ãŒã€ãƒãƒãƒ¼ã‚¸ãƒ‰ã‚µãƒ¼ãƒ“ã‚¹ã¯ã‚µãƒ¼ãƒãƒ¬ã‚¹ã§ã¯ãªã„ã€‚ã¨æ€ã£ã¦ã„ã‚‹ãŸã‚ã§ã™ã€‚ã¾ãŸã€åˆ¥ã®è¨€ã„æ–¹ã‚’ã™ã‚‹ã¨ã€ã‚¹ã‚±ãƒ¼ãƒ«ã«é™ç•ŒãŒã‚ã‚‹ãƒ¢ãƒã¯ã‚µãƒ¼ãƒãƒ¬ã‚¹ã§ã¯ãªã„ã€‚ã¨æ€ã£ã¦ã„ã¾ã™ã€‚ã¤ã¾ã‚Šã€ä½¿ç”¨æ–¹æ³•ã•ãˆé–“é•ãˆãªã‘ã‚Œã°ã€Šå‹æ‰‹ã«ã€‹ã€Šç„¡é™ã«ã€‹ã‚¹ã‚±ãƒ¼ãƒ«ã™ã‚‹ãƒ•ãƒ«ãƒãƒãƒ¼ã‚¸ãƒ‰ã‚µãƒ¼ãƒ“ã‚¹ã“ããŒã‚µãƒ¼ãƒãƒ¬ã‚¹ã€‚ã¨è¨€ãˆã‚‹ã®ã§ã¯ãªã„ã‹ã€‚ã¨æ€ã£ã¦ã„ã¾ã™ã€‚SaaS ã®é‹ç”¨ãƒ»é–‹ç™ºã—ã¦ã‚‹äººã ã¨çµæ§‹é‡è¦ãªãƒ†ãƒ¼ãƒãªã®ã§ã¯ãªã„ã‹ã€ã¨æ€ã„ã¾ã™ã€‚SaaS ãªã‚“ã ã‹ã‚‰ãƒªã‚¯ã‚¨ã‚¹ãƒˆã©ã‚“ã ã‘é€ã£ã¦ã‚‚å‘ã“ã†å´ã§è‰¯ãã«è¨ˆã‚‰ã£ã¦ãã‚Œã‚‹ã‚„ã‚ã€‚ãã†æ€ã£ã¦ãŸæ™‚æœŸãŒä¿ºã«ã‚‚ã‚ã‚Šã¾ã—ãŸ ğŸ˜‡ã¨ã¯è¨€ãˆã€SaaS åˆ©ç”¨è€…ã‹ã‚‰ãã†è¦‹ãˆã‚‹ã‚ˆã†ãªã‚µãƒ¼ãƒ“ã‚¹ã«ã—ãŸã„ã€ã¨ã„ã†æ€ã„ã¯ã‚ã‚Šã¾ã™ã€‚SaaS åˆ©ç”¨è€…ã¨ã—ã¦ã‚‚ SaaS ã®è£å´ã®ã“ã¨ã¯ä¸€åˆ‡è€ƒãˆãšã«åˆ©ç”¨ã—ãŸã„ã¨æ€ã†ã®ã§ã€‚ã€‚å¼Šç¤¾ã® ã‚½ãƒ¼ã‚·ãƒ£ãƒ« PLUS ã‚‚ SaaS ã§ã™ãŒã€åˆ©ç”¨ã—ã¦é ‚ã„ã¦ã„ã‚‹ã‚µã‚¤ãƒˆãŒã‚¤ãƒ™ãƒ³ãƒˆãªã©ã§ã‚¢ã‚¯ã‚»ã‚¹ãŒæ€¥é¨°ã™ã‚‹ã‚±ãƒ¼ã‚¹ãŒã‚ã‚Šã¾ã™ã®ã§ã€é–‹ç™ºãƒ»é‹ç”¨ã§ã¯ãã†ã„ã†ç‚¹ã«æ°—ã‚’é£ã£ã¦ã„ã¾ã™ã€‚ã‚³ãƒ¼ãƒ«ãƒ‰ã‚¹ã‚¿ãƒ¼ãƒˆå¯¾ç­–ã‚³ãƒ¼ãƒ«ãƒ‰ã‚¹ã‚¿ãƒ¼ãƒˆã¨ã¯Lambda ã¯åˆå›å‘¼ã³å‡ºã—æ™‚ã‚„ã—ã°ã‚‰ãå‘¼ã°ã‚Œãªã‹ã£ãŸå¾Œã«å‘¼ã°ã‚ŒãŸã¨ãã¯ response time ãŒé•·ããªã‚‹1 ã¤ã® Lambda Function ã«å…¨ãƒ­ã‚¸ãƒƒã‚¯ã‚’å…¥ã‚Œã‚‹API Gateway ã®ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆæ¯ã«ã©ã®ãƒ­ã‚¸ãƒƒã‚¯ã‚’å®Ÿè¡Œã™ã‚‹ã‹ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã§æ¸¡ã—ã¦ã„ã‚‹ã‚³ãƒ¼ãƒ«æ¯”ç‡ã®ä½ã„ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆã§ã‚‚ã‚³ãƒ¼ãƒ«ãƒ‰ã‚¹ã‚¿ãƒ¼ãƒˆã‚’å›é¿ã§ãã‚‹ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã§å‹•ä½œãŒå¤‰ã‚ã‚‹Rails ã® Routing ã®ã‚ˆã†ãªã‚‚ã®ã¨ä½è—¤ã¯è§£é‡ˆã—ã¾ã—ãŸä¸€å®šé–“éš”ã§ Lambda ã‚’èµ·ã“ã™ã‚ˆã†ã« Invoke ã•ã›ã‚‹æ–¹æ³•ã‚‚ã‚ã‚‹ãŒã€å€‹äººçš„ã«ã¯ Routing ã‚„ã‚‰ã›ã‚‹æ–¹å¼ã®æ–¹ãŒè‰¯ã„ã®ã§ã¯ãªã„ã‹ã€ã¨ã„ã†æ°—ãŒã™ã‚‹Lambda Function ãŒå¤§é‡ã«ä½œã‚‰ã‚Œã¦ã—ã¾ã†ï¼ˆãƒã‚¤ã‚¯ãƒ­åŒ–ã—ã™ãå•é¡Œï¼‰ã¨ç®¡ç†ãŒé›£ã—ããªã‚‹ã®ã§ã¯ãªã„ã‹ã€ã¨ã„ã†æ€ã„ã‚‚ã‚ã£ã¦ã“ã®æ–¹æ³•ã¯å®Ÿéš›ã«è©¦ã—ã¦ã¿ãŸã„ã§ã™æ‰€æ„ŸServerless ã«é™ã£ãŸã“ã¨ã§ã¯ã‚ã‚Šã¾ã›ã‚“ãŒã€è¿‘å¹´ç™»å ´ã™ã‚‹æ–°æŠ€è¡“ã¯ãƒˆãƒ¬ãƒ¼ãƒ‰ã‚ªãƒ•ãªå´é¢ãŒå¼·ã„ã‚ˆã†ã«æ„Ÿã˜ã¦ã„ã¾ã™ã€‚ä¸€æ˜”å‰ã¯ä»Šã¾ã§ã¯è§£ã®ç„¡ã‹ã£ãŸæŠ€è¡“çš„èª²é¡Œã‚’è§£æ±ºã™ã‚‹å½¢ã§æ–°ã—ã„æŠ€è¡“ãŒç™»å ´ã™ã‚‹ã€ã¨ã„ã†ã‚±ãƒ¼ã‚¹ãŒå¤šã‹ã£ãŸã®ã§ã¯ãªã„ã§ã—ã‚‡ã†ã‹ï¼Ÿå¯¾ã—ã¦ä»Šã¯ã€æ—¢å­˜ã®æŠ€è¡“ã§ã‚‚ã§ããªãã¯ãªã„ã‘ã©ã€ç‰¹å®šã®ã‚±ãƒ¼ã‚¹ã§å›°ã‚‹ã‹ã‚‰ã€ãã‚Œã‚’è§£æ±ºã™ã‚‹æ–°ã—ã„æŠ€è¡“ãŒç™»å ´ã™ã‚‹ã€ã¨ã„ã†ã‚±ãƒ¼ã‚¹ãŒå¤šã„ã‚ˆã†ãªã€‚ãã—ã¦ã€ãã®ç‰¹å®šã®ã‚±ãƒ¼ã‚¹ã‚’è§£æ±ºã™ã‚‹ãŸã‚ã«ã€ä¸€éƒ¨ã®ã“ã¨ã¯è¨±å®¹ã—ãªã‘ã‚Œã°ãªã‚‰ãªã„ã€ã¨ã„ã†å°è±¡ã§ã™ã€‚ï¼ˆã¾ã‚å˜ç´”ã«åƒ•ã‚‚æ­³ã‚’ã¨ã£ã¦ã€ä¿å®ˆçš„ãªè€ƒãˆæ–¹ãŒå¼·ããªã£ã¦ããŸã ã‘ãªã®ã‹ã‚‚ã—ã‚Œã¾ã›ã‚“ã€‚ã€‚ï¼‰ä»Šå›ã®ã‚«ãƒ³ãƒ•ã‚¡ãƒ¬ãƒ³ã‚¹ã¯å®Ÿéš›ã®é–‹ç™ºè€…ã‹ã‚‰ã©ã†ã„ã†ãƒˆãƒ¬ãƒ¼ãƒ‰ã‚ªãƒ•ãŒã‚ã‚‹ã‹ã€ã¨ã„ã†è©±ãŒå‡ºã¦ããŸã“ã¨ã§ã€è‡ªåˆ†ã®ä¸­ã§æ”¹ã‚ã¦ Serverless ã¨å‘ãåˆã†è¦šæ‚Ÿã¨ã„ã†ã‹ã€ãƒ¢ãƒãƒ™ãƒ¼ã‚·ãƒ§ãƒ³ãŒå‡ºã¦ããŸã‚ˆã†ã«æ€ã„ã¾ã™ã€‚ã¨ã¯ã„ãˆã€å€‹äººçš„ã«ã¯ã€å¾“æ¥ã® Rails ã‚¢ãƒ—ãƒªã¨ Serverless ã‚’ãƒã‚¤ãƒ–ãƒªãƒƒãƒ‰ã«ä½¿ã£ãŸè¨­è¨ˆã«å–ã‚Šçµ„ã‚“ã§ã„ãã®ãŒç¾æ™‚ç‚¹ã§ã®æœ€é©è§£ã§ã¯ãªã„ã‹ã¨æ„Ÿã˜ã¦ã„ã¾ã™ã€‚ã‚‚ã¡ã‚ã‚“ã€è¨­è¨ˆã‚’è€ƒãˆãŸä¸Šã§ Full-Serverless ãŒæœ€é©ã¨ãªã‚Œã°ã€ãã†ã„ã†ã‚¢ãƒ—ãƒªã‚’ä½œã£ã¦è¡Œãã¤ã‚‚ã‚Šã§ã™ãŒã€ãã‚Œãªã‚Šã«è¤‡é›‘ãªãƒ­ã‚¸ãƒƒã‚¯ã‚’è€ƒãˆã‚‹ã«ã¯ã¾ã  Full-Serverless ã¯æ—©ã„ã®ã§ã¯ãªã„ã‹ãªã€ã¨æ€ã„ã¾ã™ã€‚ã‚„ã¯ã‚Šä¸¦åˆ—æ€§ã®é«˜ã•ãŒ Serverless ã®é­…åŠ›ãªã®ã§ã€ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã®åŸºæœ¬çš„ãªéƒ¨åˆ†ã¯å¾“æ¥é€šã‚Š Rails ã§ä½œæˆã—ã¦ã€ã‚¢ã‚¯ã‚»ã‚¹æ•°ãŒæ€¥ã«ã‚¹ãƒ‘ã‚¤ã‚¯ã™ã‚‹ã‚ˆã†ãªå ´æ‰€ã‚’å±€æ‰€çš„ã« Serverless ã«ã™ã‚‹ã‚ˆã†ãªè¨­è¨ˆã‚’ã“ã‚Œã‹ã‚‰è‰²ã€…è©¦ã—ã¦ã„ã“ã†ã¨è€ƒãˆã¦ã„ã¾ã™ã€‚ãŸã ã€Serverless ã®ã‚³ãƒ³ã‚»ãƒ—ãƒˆã¨ã—ã¦ã¯ã€ã‚½ãƒ•ãƒˆã‚¦ã‚§ã‚¢é–‹ç™ºã®ç”Ÿç”£æ€§ãã®ã‚‚ã®ã‚’å‘ä¸Šã•ã›ã‚‹ã“ã¨ãŒç›®çš„ã¨ã®ã“ã¨ã ã£ãŸã®ã§ã€å°†æ¥çš„ã«ã¯ãƒã‚¤ãƒ–ãƒªãƒƒãƒ‰ã‚ˆã‚Šã‚‚ Serverless ã«æŒ¯ã‚Šåˆ‡ã£ãŸè¨­è¨ˆãŒãƒ™ã‚¹ãƒˆã«ãªã£ã¦ã„ãã‹ã‚‚ã—ã‚Œã¾ã›ã‚“ã€‚ä»Šå¾Œã®ç™ºå±•ã«æœŸå¾…ã—ã¦ã„ã¾ã™ã€‚","link":"https://developer.feedforce.jp/entry/2017/11/05/111553","isoDate":"2017-11-05T02:15:53.000Z","dateMiliSeconds":1509848153000,"imageUrl":"https://cdn-ak.f.st-hatena.com/images/fotolife/t/tmd45/20171103/20171103011524.jpg","authorName":"ryz310"},{"title":"Dynamoid ã®ä½¿ã„æ–¹ã€range ç·¨ã€‘","content":"\u003cp\u003eã©ã†ã‚‚ã€ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢ã®ã‚µãƒˆã‚¦ãƒªãƒ§ã‚¦ã‚¹ã‚±ã§ã™ âœŒï¸('Ï‰')âœŒï¸\u003c/p\u003e\n\n\u003cp\u003eæœ€è¿‘ã“ã†ã—ã¦ \u003ca href=\"http://developer.feedforce.jp/entry/2017/10/12/100000\"\u003eå¼Šç¤¾ã® tech ãƒ–ãƒ­ã‚°ãŒç§»è»¢ã—ãŸ\u003c/a\u003e è¨³ã§ã™ãŒã€è‡ªç¤¾ã§ç®¡ç†ã—ã¦ã‚‹ãƒ–ãƒ­ã‚°ã ã¨æŠ•ç¨¿ãƒ•ãƒ­ãƒ¼ãŒã‚ã‚“ã©ãã•ã„ã¨åƒ•ãŒãƒœãƒ¤ã„ãŸã®ãŒç§»è»¢ç†ç”±ã®ä¸€ç«¯ã ã£ãŸã‚Šã—ã¾ã™ ğŸ˜\nã§ã‚‚ç§»è»¢ä½œæ¥­ã—ãŸã®ã¯åƒ•ã˜ã‚ƒãªãã¦ã€çƒã ã‘æŠ•ã’ã¦ã©ã£ã‹è¡Œãã¾ã—ãŸ ğŸ˜\nç§»è»¢ã‚ã‚ŠãŒã¨ã†ã”ã–ã„ã¾ã™ ğŸ™‡\u003c/p\u003e\n\n\u003cp\u003eç§»è»¢ã—ã¦ä¸€ç™ºç›®ã®æŠ•ç¨¿ãªã®ã§å¼µã‚Šåˆ‡ã£ã¦å‚ã‚Šã¾ã™ ğŸ’ª\u003c/p\u003e\n\n\u003cp\u003eã•ã¦ã€Rails ã§ DynamoDB ã‚’åˆ©ç”¨ã™ã‚‹éš›ã® ORM ã¨ã—ã¦ \u003ccode\u003edynamoid\u003c/code\u003e ãŒã‚ã‚Šã¾ã™ã€‚\nä»Šå›ã¯ \u003ccode\u003edynamoid\u003c/code\u003e ã‹ã‚‰ Hash-Range Table (Partition Key ã¨ Sort Key ã®è¤‡åˆ) ã‚’åˆ©ç”¨ã™ã‚‹æ–¹æ³•ã«ã¤ã„ã¦ç´¹ä»‹ã—ã¾ã™ã€‚\u003c/p\u003e\n\n\u003cp\u003e\u003ccode\u003edynamoid\u003c/code\u003e ã®å°å…¥æ–¹æ³•ã«ã¤ã„ã¦ã¯ä»¥å‰æ›¸ã„ãŸã“ã¡ã‚‰ã®è¨˜äº‹ã‚’å‚è€ƒã«ã—ã¦ã¿ã¦ä¸‹ã•ã„ã€‚\u003c/p\u003e\n\n\u003cp\u003e\u003ciframe src=\"https://hatenablog-parts.com/embed?url=http%3A%2F%2Ftech.feedforce.jp%2Fdynamodb-setup-on-rails.html\" title=\"DynamoDB ã‚’ Rails ã§ä½¿ãˆã‚‹ã‚ˆã†ã«ã™ã‚‹ãŸã‚ã®ã‚ã‚Œã“ã‚Œ | feedforce Engineers\u0026#39; blog\" class=\"embed-card embed-webcard\" scrolling=\"no\" frameborder=\"0\" style=\"display: block; width: 100%; height: 155px; max-width: 500px; margin: 10px 0px;\"\u003e\u003c/iframe\u003e\u003ccite class=\"hatena-citation\"\u003e\u003ca href=\"http://tech.feedforce.jp/dynamodb-setup-on-rails.html\"\u003etech.feedforce.jp\u003c/a\u003e\u003c/cite\u003e\u003c/p\u003e\n\n\u003ch1\u003eHash-Range Table ã£ã¦ãªã‚“ã\u003c/h1\u003e\n\n\u003ch2\u003eãã®å‰ã«åç§°ã®æ•´ç†ã‚’ã—ã¦ãŠãã¾ã™\u003c/h2\u003e\n\n\u003cp\u003eã‚¿ã‚¤ãƒˆãƒ«ã« ã€range ç·¨ã€‘ã¨æ›¸ã„ã¦ã„ã‚‹ã®ã§ã™ãŒã€ã“ã‚Œã¯ Sort Key ã®äº‹ã‚’æŒ‡ã—ã¾ã™ã€‚\nã©ã†ã‚„ã‚‰ DynamoDB ã¯åˆæœŸã®é ƒã¨ç¾åœ¨ã§ä¸€éƒ¨ã®åç§°ãŒå¤‰åŒ–ã—ãŸã‚ˆã†ã§ã™ã€‚\nã—ã‹ã—ã€ \u003ccode\u003eDyanmoid\u003c/code\u003e ã§ã¯ç›¸å¤‰ã‚ã‚‰ãšæ—§åç§°ã®ã¾ã¾ (\u003ccode\u003ehash_key\u003c/code\u003e, \u003ccode\u003erange_key\u003c/code\u003e) ã§ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã‚’æŒ‡å®šã™ã‚‹ã®ã§ã€å¯¾å¿œè¡¨ã‚’è¨˜è¼‰ã—ã¦ãŠãã¾ã™ã€‚\u003c/p\u003e\n\n\u003ctable\u003e\n\u003cthead\u003e\n\u003ctr\u003e\n\u003cth style=\"text-align:center;\"\u003e æ—§åç§° \u003c/th\u003e\n\u003cth style=\"text-align:center;\"\u003e ç¾åç§° \u003c/th\u003e\n\u003c/tr\u003e\n\u003c/thead\u003e\n\u003ctbody\u003e\n\u003ctr\u003e\n\u003ctd style=\"text-align:center;\"\u003e Hash Key \u003c/td\u003e\n\u003ctd style=\"text-align:center;\"\u003e Partition Key \u003c/td\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd style=\"text-align:center;\"\u003e Range Key \u003c/td\u003e\n\u003ctd style=\"text-align:center;\"\u003e Sort Key \u003c/td\u003e\n\u003c/tr\u003e\n\u003c/tbody\u003e\n\u003c/table\u003e\n\n\n\u003ch2\u003eDyanmoDB ã«ã¯ 2 ç¨®é¡ã®ãƒ—ãƒ©ã‚¤ãƒãƒªã‚­ãƒ¼ãŒã‚ã‚‹\u003c/h2\u003e\n\n\u003cp\u003eã“ã¡ã‚‰ã®ã‚¹ãƒ©ã‚¤ãƒ‰ãŒåˆ†ã‹ã‚Šã‚„ã™ã„ã®ã§ã™ãŒã€ DynamoDB ã®ãƒ†ãƒ¼ãƒ–ãƒ«å®šç¾©ã¨ã—ã¦ Hash Table ã¨ Hash-Range Table ã¨ã„ã†ã‚‚ã®ãŒã‚ã‚Šã¾ã™ã€‚\u003c/p\u003e\n\n\u003ciframe src=\"//www.slideshare.net/slideshow/embed_code/key/gHjtA6AS8rk0sB?startSlide=24\" width=\"595\" height=\"485\" style=\"border: 1px solid #CCC; border-width: 1px; margin-bottom: 5px; max-width: 100%;\" scrolling=\"no\" marginwidth=\"0\" marginheight=\"0\" frameborder=\"0\"\u003e \u003c/iframe\u003e\n\n\n\n\n\u003ciframe src=\"//www.slideshare.net/slideshow/embed_code/key/gHjtA6AS8rk0sB?startSlide=26\" width=\"595\" height=\"485\" style=\"border: 1px solid #CCC; border-width: 1px; margin-bottom: 5px; max-width: 100%;\" scrolling=\"no\" marginwidth=\"0\" marginheight=\"0\" frameborder=\"0\"\u003e \u003c/iframe\u003e\n\n\n\u003cul\u003e\n\u003cli\u003eHash Table\n\n\u003cul\u003e\n\u003cli\u003eHash Key (Partition Key) ã¨ã„ã†ä¸€ã¤ã®ã‚«ãƒ©ãƒ ã®å€¤ã§ãƒ—ãƒ©ã‚¤ãƒãƒªã‚­ãƒ¼ã‚’è¡¨ç¾ã™ã‚‹ãƒ†ãƒ¼ãƒ–ãƒ«\u003c/li\u003e\n\u003cli\u003eã“ã®æ§‹æˆã ã¨ Hash Key ã¯ \u003cstrong\u003eé‡è¤‡ã•ã›ã‚‹ã“ã¨ãŒã§ããªã„\u003c/strong\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003eHash-Range Table\n\n\u003cul\u003e\n\u003cli\u003eHash Key ã¨ Range Key (Partition Key,  Sort Key) ã®äºŒã¤ã®å€¤ã§ãƒ—ãƒ©ã‚¤ãƒãƒªã‚­ãƒ¼ã‚’è¡¨ç¾ã™ã‚‹\u003c/li\u003e\n\u003cli\u003eRange Key ãŒç•°ãªã£ã¦ã„ã‚Œã°ã€åŒä¸€ã® Hash Key ã‚’æŒã¤ãƒ¬ã‚³ãƒ¼ãƒ‰ãŒè¤‡æ•°å­˜åœ¨ã—ã¦ã‚‚è‰¯ã„\u003c/li\u003e\n\u003cli\u003eã‚¹ã‚­ãƒ£ãƒ³ã‚ˆã‚Šé«˜é€Ÿãªã‚¯ã‚¨ãƒª \u003csup id=\"fnref:1\"\u003e\u003ca href=\"#fn:1\" rel=\"footnote\"\u003e1\u003c/a\u003e\u003c/sup\u003e ã§è¤‡æ•°ã®ãƒ¬ã‚³ãƒ¼ãƒ‰ã‚’å–å¾—ã™ã‚‹ã“ã¨ãŒå¯èƒ½\n\n\u003cul\u003e\n\u003cli\u003eã‚¹ã‚­ãƒ£ãƒ³ã ã¨ç‰©å‡„ãã‚³ã‚¹ãƒˆãŒé«˜ã„ã®ã§ã€åŸºæœ¬çš„ã«ã‚¯ã‚¨ãƒªã ã‘ã§ãƒ‡ãƒ¼ã‚¿å–å¾—ã§ãã‚‹ã‚ˆã†ã«è¨­è¨ˆã™ã¹ã\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003eRange Key ã§ã®æ˜‡é †ãƒ»é™é †ã§ã®ã‚½ãƒ¼ãƒˆãŒå¯èƒ½\u003c/li\u003e\n\u003cli\u003eRange Key ã«å¯¾ã—ã¦ã® \u003ca href=\"http://docs.aws.amazon.com/ja_jp/amazondynamodb/latest/developerguide/Query.html#Query.KeyConditionExpressions\"\u003eç¯„å›²æ¤œç´¢\u003c/a\u003e ã‚‚å¯èƒ½\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\n\n\u003ch1\u003e\u003ccode\u003edynamoid\u003c/code\u003e ã§ã®åˆ©ç”¨æ–¹æ³•\u003c/h1\u003e\n\n\u003ch2\u003eãƒ†ãƒ¼ãƒ–ãƒ«å®šç¾©\u003c/h2\u003e\n\n\u003cpre class=\"code\" data-lang=\"\" data-unlink\u003eclass User\n  include Dynamoid::Document\n\n  table name: :users, key: :hash_key\n  range :range_key, :string # \u0026lt;= ã“ã‚Œ\nend\u003c/pre\u003e\n\n\n\u003cp\u003e\u003ccode\u003erange :(ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰å), :(ãƒ‡ãƒ¼ã‚¿å‹)\u003c/code\u003e ã§ Range Key ã®å®šç¾©ãŒå¯èƒ½ã§ã™ã€‚\nã¡ã‚‡ã£ã¨è©¦ã›ã¦ã„ãªã„ã®ã§ã™ãŒã€AWS ã‚³ãƒ³ã‚½ãƒ¼ãƒ«ã‹ã‚‰ã ã¨ãƒ†ãƒ¼ãƒ–ãƒ«ä½œæˆæ™‚ã«ã—ã‹ Range Key (ã‚½ãƒ¼ãƒˆã‚­ãƒ¼) ã‚’å®šç¾©ã§ããªã„ã®ã§ã€æ—¢ã«å­˜åœ¨ã—ã¦ã„ã‚‹ãƒ†ãƒ¼ãƒ–ãƒ«ã«é€”ä¸­ã§ \u003ccode\u003erange\u003c/code\u003e ã®å®šç¾©ã‚’åŠ ãˆã¦ã‚‚å‹•ä½œã—ãªã„ã¨æ€ã„ã¾ã™ã€‚\u003c/p\u003e\n\n\u003ch2\u003eä½¿ã„æ–¹\u003c/h2\u003e\n\n\u003cp\u003eDynamoid ã«ã‚‚ ActiveRecord ã¨åŒã˜ã‚ˆã†ã« \u003ccode\u003e#where\u003c/code\u003e ã¨ã„ã†ãƒ¡ã‚½ãƒƒãƒ‰ãŒå®Ÿè£…ã•ã‚Œã¦ã„ã¾ã™ã€‚\nãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã§ã¯å†…éƒ¨ã§ã©ã®ã‚ˆã†ãªå‹•ãã‚’ã™ã‚‹ã®ã‹ãŒè¦‹å½“ãŸã‚‰ãªã‹ã£ãŸã®ã§ã€å®Ÿè£…ã‹ã‚‰ç¢ºèªã—ãŸã®ã§ã™ãŒã€æ¤œç´¢æ¡ä»¶ã« Hash Key ã‚„ Range Key ãŒå«ã¾ã‚Œã¦ã„ã‚‹ã‹ã©ã†ã‹ã‚’åˆ¤æ–­ã—ã¦ã€ã‚¯ã‚¨ãƒªãŒä½¿ãˆã‚‹å ´åˆã¯ã‚¯ã‚¨ãƒªã§æ¤œç´¢ã—ã¦ãã‚Œã‚‹ã‚ˆã†ã§ã™ã€‚\u003c/p\u003e\n\n\u003cpre class=\"code\" data-lang=\"\" data-unlink\u003eUser.where(hash_key: \u0026#39;hash_key\u0026#39;) # ã‚¯ã‚¨ãƒªã§æ¤œç´¢ã•ã‚Œã‚‹\nUser.where(hash_key: \u0026#39;hash_key\u0026#39;, range_key: \u0026#39;range_key\u0026#39;) # ã‚¯ã‚¨ãƒªã§æ¤œç´¢ã•ã‚Œã‚‹\nUser.where(name: \u0026#39;name\u0026#39;) # Hash Key ãŒç„¡ã„ã®ã§ã‚¹ã‚­ãƒ£ãƒ³ãŒå®Ÿè¡Œã•ã‚Œã‚‹\u003c/pre\u003e\n\n\n\u003cp\u003eãŸã ã—ã€å¼•æ•°ã®æŒ‡å®šæ–¹æ³•ã‚„å®šç¾©ã®ä»•æ–¹ãŒå°‘ã—ã§ã‚‚é–“é•ã£ã¦ã„ã‚‹ã¨ \u003ccode\u003e#where\u003c/code\u003e ã§ã‚¹ã‚­ãƒ£ãƒ³ãŒå®Ÿè¡Œã•ã‚Œã¦ã—ã¾ã£ã¦ã„ã‚‹ã‚±ãƒ¼ã‚¹ãŒã‚ã‚Šã¾ã™ã€‚æœ¬å½“ã«ã‚¯ã‚¨ãƒªæ¤œç´¢ã•ã‚Œã¦ã„ã‚‹ã‹ã€å¿µã®ãŸã‚ Rails ã®ãƒ­ã‚°å‡ºåŠ›ã‚’ç¢ºèªã—ã€ã‚¹ã‚­ãƒ£ãƒ³ãŒå®Ÿè¡Œã•ã‚Œã¦ã„ãªã„ã‹ã©ã†ã‹ç¢ºèªã™ã‚‹ã‚ˆã†ã«ã—ã¦ä¸‹ã•ã„ âš ï¸\u003c/p\u003e\n\n\u003cp\u003e\u003ccode\u003e#where\u003c/code\u003e ã®ä½¿ã„æ–¹ã¯ ActiveRecord ã¨ã»ã¼åŒã˜ã§ã™ã€‚\u003c/p\u003e\n\n\u003cpre class=\"code\" data-lang=\"\" data-unlink\u003eUser.where(hash_key: \u0026#39;hash_key\u0026#39;).all # =\u0026gt; [#\u0026lt;User:0x000000076ed848\u0026gt;, #\u0026lt;User:0x0000000779abb0\u0026gt;, ...]\nUser.where(hash_key: \u0026#39;hash_key\u0026#39;).each do |user|\n  user # =\u0026gt; #\u0026lt;User:0x000000076ed848\u0026gt;\nend\nUser.where(hash_key: \u0026#39;hash_key\u0026#39;).first # =\u0026gt; #\u0026lt;User:0x000000048cb050\u0026gt;\nUser.where(hash_key: \u0026#39;hash_key\u0026#39;).last # =\u0026gt; #\u0026lt;User:0x000000048cb050\u0026gt;\u003c/pre\u003e\n\n\n\u003cp\u003eãã—ã¦ã€ \u003ccode\u003erange_key\u003c/code\u003e ã«å¯¾ã—ã¦ \u003ccode\u003egt\u003c/code\u003e, \u003ccode\u003elt\u003c/code\u003e, \u003ccode\u003egte\u003c/code\u003e, \u003ccode\u003elte\u003c/code\u003e, \u003ccode\u003ebegins_with\u003c/code\u003e, \u003ccode\u003ebetween\u003c/code\u003e ã®æ¼”ç®—å­ãŒä½¿ç”¨ã§ãã¾ã™ã€‚\u003c/p\u003e\n\n\u003cpre class=\"code\" data-lang=\"\" data-unlink\u003eUser.where(hash_key: \u0026#39;hash_key\u0026#39;, \u0026#39;range_key.gt\u0026#39;: 123)\nUser.where(hash_key: \u0026#39;hash_key\u0026#39;, \u0026#39;range_key.lt\u0026#39;: 123)\nUser.where(hash_key: \u0026#39;hash_key\u0026#39;, \u0026#39;range_key.gte\u0026#39;: 123)\nUser.where(hash_key: \u0026#39;hash_key\u0026#39;, \u0026#39;range_key.lte\u0026#39;: 123)\nUser.where(hash_key: \u0026#39;hash_key\u0026#39;, \u0026#39;range_key.begins_with\u0026#39;: \u0026#39;range_\u0026#39;)\nUser.where(hash_key: \u0026#39;hash_key\u0026#39;, \u0026#39;range_key.between\u0026#39;: [100, 200])\u003c/pre\u003e\n\n\n\u003ch2\u003eãƒãƒã‚Šãƒã‚¤ãƒ³ãƒˆ\u003c/h2\u003e\n\n\u003cp\u003eã“ã“ã‹ã‚‰ã¯ Range Key ã‚’ \u003ccode\u003edyanmoid\u003c/code\u003e ã‚’ä½¿ã£ã¦ã„ã¦ãƒãƒã£ãŸç‚¹ã‚’ã„ãã¤ã‹ç´¹ä»‹ã—ãŸã„ã¨æ€ã„ã¾ã™ã€‚\u003c/p\u003e\n\n\u003ch3\u003e\u003ccode\u003erange\u003c/code\u003e ã‚’å®šç¾©ã—ã¦ã„ã‚‹ã¨ \u003ccode\u003e#find_by_id\u003c/code\u003e ã®å‹•ä½œãŒå¤‰ã‚ã‚‹\u003c/h3\u003e\n\n\u003cpre class=\"code\" data-lang=\"\" data-unlink\u003e# Hash Table ã¨ã—ã¦åˆ©ç”¨\nclass User\n  include Dynamoid::Document\n\n  table name: :users, key: :hash_key\nend\n\n# OK!\nUser.find_by_id(\u0026#39;hash_key\u0026#39;)\n# =\u0026gt; #\u0026lt;User:0x000000048cb050\u0026gt;\u003c/pre\u003e\n\n\n\n\n\u003cpre class=\"code\" data-lang=\"\" data-unlink\u003e# Hash-Range Table ã¨ã—ã¦åˆ©ç”¨\nclass User\n  include Dynamoid::Document\n\n  table name: :users, key: :hash_key\n  range :range_key, :string\nend\n\n# Error!\nUser.find_by_id(\u0026#39;hash_key\u0026#39;)\n# =\u0026gt; Aws::DynamoDB::Errors::ValidationException: The provided key element does not match the schema\u003c/pre\u003e\n\n\n\u003cp\u003eã‚“ã‚“ï¼Ÿï¼Ÿã£ã¦ãªã£ãŸã®ã§ã™ãŒã€ã“ã†ã„ã†äº‹ã‚‰ã—ã„ã§ã™ã€‚\u003c/p\u003e\n\n\u003cul\u003e\n\u003cli\u003e\u003ccode\u003e#find_by_id\u003c/code\u003e ã¯å†…éƒ¨çš„ã«ã¯ \u003ccode\u003eAws::DynamoDB::Client#get_item\u003c/code\u003e ã‚’å‘¼ã³å‡ºã—ã¦ã„ã‚‹\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003e#get_item\u003c/code\u003e ã¯çµæœãŒä¸€æ„ã«å®šã¾ã‚‹æ¤œç´¢æ¡ä»¶ã‚’æŒ‡å®šã—ãªã„ã¨ã‚¨ãƒ©ãƒ¼ã«ãªã‚‹\n\n\u003cul\u003e\n\u003cli\u003eã¤ã¾ã‚Š \u003ccode\u003erange_key (primary sort key)\u003c/code\u003e ã‚’å®šç¾©ã—ã¦ã„ã‚‹å ´åˆã¯å¼•æ•°ä¸€ã¤ã ã¨ã‚¨ãƒ©ãƒ¼\u003c/li\u003e\n\u003cli\u003eå¼•æ•°ã« \u003ccode\u003erange_key\u003c/code\u003e ã‚’æŒ‡å®šã™ã‚Œã° OK\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\n\n\u003cpre class=\"code\" data-lang=\"\" data-unlink\u003eLine::User.find_by_id(\u0026#39;hash_key\u0026#39;, range_key: \u0026#39;range_key\u0026#39;)\n# =\u0026gt; #\u0026lt;User:0x000000048cb050\u0026gt;\n# OK!\u003c/pre\u003e\n\n\n\u003ch3\u003e\u003ccode\u003ehas_many\u003c/code\u003e ã¯ Hash-Range Table ã«å¯¾å¿œã—ã¦ã„ãªã„\u003c/h3\u003e\n\n\u003cp\u003e\u003ccode\u003edynamoid\u003c/code\u003e ã§ã¯ ActiveRecord ã®ã‚ˆã†ãª \u003ccode\u003ehas_many\u003c/code\u003e \u003ccode\u003ehas_one\u003c/code\u003e \u003ccode\u003ebelongs_to\u003c/code\u003e ãŒå®šç¾©ã•ã‚Œã¦ã„ã‚‹ã®ã§ã™ãŒã€ Hash-Range Table ã ã¨ä¸Šæ‰‹ãå‹•ä½œã—ã¾ã›ã‚“ã€‚\nå†…éƒ¨ã®å®Ÿè£…ã‚’è¦‹ã¦ã¿ã¾ã—ãŸãŒã€ Hash Table ã®çŠ¶æ…‹ã§åˆ©ç”¨ã™ã‚‹ã“ã¨ãŒå‰æã¨ãªã£ã¦ã„ã‚‹ã‚ˆã†ã§ã—ãŸã€‚\u003c/p\u003e\n\n\u003cp\u003eHash Table ã§ã‚ã‚Œã°ã“ã‚“ãªæ„Ÿã˜ã§åˆ©ç”¨ã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚\u003c/p\u003e\n\n\u003cpre class=\"code\" data-lang=\"\" data-unlink\u003eclass User\n  include Dynamoid::Document\n\n  table name: :users, key: :hash_key\n  has_many :talks, class: Talk\nend\n\nclass Talk\n  include Dynamoid::Document\n\n  table name: :talks, key: :hash_key\n  belongs_to :user, class: User\nend\n\nuser = User.create(name: \u0026#39;Taro\u0026#39;)\nuser.talks.create(content: \u0026#39;Hello world\u0026#39;)\u003c/pre\u003e\n\n\n\u003ch1\u003eã¾ã¨ã‚\u003c/h1\u003e\n\n\u003cp\u003eHash Table ã¨ Hash-Range Table ã®é•ã„ã‹ã‚‰ã€ Dynamoid ã«ãŠã‘ã‚‹å®Ÿè£…æ–¹æ³•ã«ã¤ã„ã¦ã‚’ç´¹ä»‹ã—ã¾ã—ãŸã€‚\nDynamoid ã‚’åˆ©ç”¨ã—ãŸå ´åˆã¯ migration ã‚’æ˜ç¤ºçš„ã«å®Ÿè¡Œã™ã‚‹è¨³ã§ã¯ãªã„ãŸã‚ã€Rails ã®ã‚½ãƒ¼ã‚¹ã‚³ãƒ¼ãƒ‰ã¨ DyanmoDB ã®ãƒ†ãƒ¼ãƒ–ãƒ«ã®å®Ÿæ…‹ãŒå¿…ãšã—ã‚‚ä¸€è‡´ã—ã¦ã„ãªã„ã‚±ãƒ¼ã‚¹ãŒã‚ã‚‹ç‚¹ãŒãƒãƒã‚Šã©ã“ã‚ã®ã‚ˆã†ãªæ°—ãŒã—ã¾ã™ã€‚\næœ¬ç¨¿ã§ç´¹ä»‹ã—ãŸ Hash-Range Table ãŒ DynamoDB ã¨ Dynamoid ä¸¡æ–¹ã§æ­£ã—ãè¨­å®šã•ã‚Œã¦ã„ã‚‹ã‹ã‚’ãƒªãƒªãƒ¼ã‚¹å‰ã«å…¥å¿µã«ãƒã‚§ãƒƒã‚¯ã—ãŸæ–¹ãŒè‰¯ã„ã§ã—ã‚‡ã†ã€‚\u003c/p\u003e\n\u003cdiv class=\"footnotes\"\u003e\n\u003chr/\u003e\n\u003col\u003e\n\u003cli id=\"fn:1\"\u003e\n\u003cp\u003e\u003ca href=\"http://docs.aws.amazon.com/ja_jp/amazondynamodb/latest/developerguide/QueryAndScanGuidelines.html\"\u003eã‚¯ã‚¨ãƒªã¨ã‚¹ã‚­ãƒ£ãƒ³ã®ãƒ™ã‚¹ãƒˆãƒ—ãƒ©ã‚¯ãƒ†ã‚£ã‚¯ã‚¹\u003c/a\u003e\u003ca href=\"#fnref:1\" rev=\"footnote\"\u003e\u0026#8617;\u003c/a\u003e\u003c/p\u003e\u003c/li\u003e\n\u003c/ol\u003e\n\u003c/div\u003e\n\n","contentSnippet":"ã©ã†ã‚‚ã€ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢ã®ã‚µãƒˆã‚¦ãƒªãƒ§ã‚¦ã‚¹ã‚±ã§ã™ âœŒï¸('Ï‰')âœŒï¸æœ€è¿‘ã“ã†ã—ã¦ å¼Šç¤¾ã® tech ãƒ–ãƒ­ã‚°ãŒç§»è»¢ã—ãŸ è¨³ã§ã™ãŒã€è‡ªç¤¾ã§ç®¡ç†ã—ã¦ã‚‹ãƒ–ãƒ­ã‚°ã ã¨æŠ•ç¨¿ãƒ•ãƒ­ãƒ¼ãŒã‚ã‚“ã©ãã•ã„ã¨åƒ•ãŒãƒœãƒ¤ã„ãŸã®ãŒç§»è»¢ç†ç”±ã®ä¸€ç«¯ã ã£ãŸã‚Šã—ã¾ã™ ğŸ˜ã§ã‚‚ç§»è»¢ä½œæ¥­ã—ãŸã®ã¯åƒ•ã˜ã‚ƒãªãã¦ã€çƒã ã‘æŠ•ã’ã¦ã©ã£ã‹è¡Œãã¾ã—ãŸ ğŸ˜ç§»è»¢ã‚ã‚ŠãŒã¨ã†ã”ã–ã„ã¾ã™ ğŸ™‡ç§»è»¢ã—ã¦ä¸€ç™ºç›®ã®æŠ•ç¨¿ãªã®ã§å¼µã‚Šåˆ‡ã£ã¦å‚ã‚Šã¾ã™ ğŸ’ªã•ã¦ã€Rails ã§ DynamoDB ã‚’åˆ©ç”¨ã™ã‚‹éš›ã® ORM ã¨ã—ã¦ dynamoid ãŒã‚ã‚Šã¾ã™ã€‚ä»Šå›ã¯ dynamoid ã‹ã‚‰ Hash-Range Table (Partition Key ã¨ Sort Key ã®è¤‡åˆ) ã‚’åˆ©ç”¨ã™ã‚‹æ–¹æ³•ã«ã¤ã„ã¦ç´¹ä»‹ã—ã¾ã™ã€‚dynamoid ã®å°å…¥æ–¹æ³•ã«ã¤ã„ã¦ã¯ä»¥å‰æ›¸ã„ãŸã“ã¡ã‚‰ã®è¨˜äº‹ã‚’å‚è€ƒã«ã—ã¦ã¿ã¦ä¸‹ã•ã„ã€‚tech.feedforce.jpHash-Range Table ã£ã¦ãªã‚“ããã®å‰ã«åç§°ã®æ•´ç†ã‚’ã—ã¦ãŠãã¾ã™ã‚¿ã‚¤ãƒˆãƒ«ã« ã€range ç·¨ã€‘ã¨æ›¸ã„ã¦ã„ã‚‹ã®ã§ã™ãŒã€ã“ã‚Œã¯ Sort Key ã®äº‹ã‚’æŒ‡ã—ã¾ã™ã€‚ã©ã†ã‚„ã‚‰ DynamoDB ã¯åˆæœŸã®é ƒã¨ç¾åœ¨ã§ä¸€éƒ¨ã®åç§°ãŒå¤‰åŒ–ã—ãŸã‚ˆã†ã§ã™ã€‚ã—ã‹ã—ã€ Dyanmoid ã§ã¯ç›¸å¤‰ã‚ã‚‰ãšæ—§åç§°ã®ã¾ã¾ (hash_key, range_key) ã§ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã‚’æŒ‡å®šã™ã‚‹ã®ã§ã€å¯¾å¿œè¡¨ã‚’è¨˜è¼‰ã—ã¦ãŠãã¾ã™ã€‚ æ—§åç§°  ç¾åç§°  Hash Key  Partition Key  Range Key  Sort Key DyanmoDB ã«ã¯ 2 ç¨®é¡ã®ãƒ—ãƒ©ã‚¤ãƒãƒªã‚­ãƒ¼ãŒã‚ã‚‹ã“ã¡ã‚‰ã®ã‚¹ãƒ©ã‚¤ãƒ‰ãŒåˆ†ã‹ã‚Šã‚„ã™ã„ã®ã§ã™ãŒã€ DynamoDB ã®ãƒ†ãƒ¼ãƒ–ãƒ«å®šç¾©ã¨ã—ã¦ Hash Table ã¨ Hash-Range Table ã¨ã„ã†ã‚‚ã®ãŒã‚ã‚Šã¾ã™ã€‚  Hash TableHash Key (Partition Key) ã¨ã„ã†ä¸€ã¤ã®ã‚«ãƒ©ãƒ ã®å€¤ã§ãƒ—ãƒ©ã‚¤ãƒãƒªã‚­ãƒ¼ã‚’è¡¨ç¾ã™ã‚‹ãƒ†ãƒ¼ãƒ–ãƒ«ã“ã®æ§‹æˆã ã¨ Hash Key ã¯ é‡è¤‡ã•ã›ã‚‹ã“ã¨ãŒã§ããªã„Hash-Range TableHash Key ã¨ Range Key (Partition Key,  Sort Key) ã®äºŒã¤ã®å€¤ã§ãƒ—ãƒ©ã‚¤ãƒãƒªã‚­ãƒ¼ã‚’è¡¨ç¾ã™ã‚‹Range Key ãŒç•°ãªã£ã¦ã„ã‚Œã°ã€åŒä¸€ã® Hash Key ã‚’æŒã¤ãƒ¬ã‚³ãƒ¼ãƒ‰ãŒè¤‡æ•°å­˜åœ¨ã—ã¦ã‚‚è‰¯ã„ã‚¹ã‚­ãƒ£ãƒ³ã‚ˆã‚Šé«˜é€Ÿãªã‚¯ã‚¨ãƒª 1 ã§è¤‡æ•°ã®ãƒ¬ã‚³ãƒ¼ãƒ‰ã‚’å–å¾—ã™ã‚‹ã“ã¨ãŒå¯èƒ½ã‚¹ã‚­ãƒ£ãƒ³ã ã¨ç‰©å‡„ãã‚³ã‚¹ãƒˆãŒé«˜ã„ã®ã§ã€åŸºæœ¬çš„ã«ã‚¯ã‚¨ãƒªã ã‘ã§ãƒ‡ãƒ¼ã‚¿å–å¾—ã§ãã‚‹ã‚ˆã†ã«è¨­è¨ˆã™ã¹ãRange Key ã§ã®æ˜‡é †ãƒ»é™é †ã§ã®ã‚½ãƒ¼ãƒˆãŒå¯èƒ½Range Key ã«å¯¾ã—ã¦ã® ç¯„å›²æ¤œç´¢ ã‚‚å¯èƒ½dynamoid ã§ã®åˆ©ç”¨æ–¹æ³•ãƒ†ãƒ¼ãƒ–ãƒ«å®šç¾©class User  include Dynamoid::Document  table name: :users, key: :hash_key  range :range_key, :string # \u003c= ã“ã‚Œendrange :(ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰å), :(ãƒ‡ãƒ¼ã‚¿å‹) ã§ Range Key ã®å®šç¾©ãŒå¯èƒ½ã§ã™ã€‚ã¡ã‚‡ã£ã¨è©¦ã›ã¦ã„ãªã„ã®ã§ã™ãŒã€AWS ã‚³ãƒ³ã‚½ãƒ¼ãƒ«ã‹ã‚‰ã ã¨ãƒ†ãƒ¼ãƒ–ãƒ«ä½œæˆæ™‚ã«ã—ã‹ Range Key (ã‚½ãƒ¼ãƒˆã‚­ãƒ¼) ã‚’å®šç¾©ã§ããªã„ã®ã§ã€æ—¢ã«å­˜åœ¨ã—ã¦ã„ã‚‹ãƒ†ãƒ¼ãƒ–ãƒ«ã«é€”ä¸­ã§ range ã®å®šç¾©ã‚’åŠ ãˆã¦ã‚‚å‹•ä½œã—ãªã„ã¨æ€ã„ã¾ã™ã€‚ä½¿ã„æ–¹Dynamoid ã«ã‚‚ ActiveRecord ã¨åŒã˜ã‚ˆã†ã« #where ã¨ã„ã†ãƒ¡ã‚½ãƒƒãƒ‰ãŒå®Ÿè£…ã•ã‚Œã¦ã„ã¾ã™ã€‚ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã§ã¯å†…éƒ¨ã§ã©ã®ã‚ˆã†ãªå‹•ãã‚’ã™ã‚‹ã®ã‹ãŒè¦‹å½“ãŸã‚‰ãªã‹ã£ãŸã®ã§ã€å®Ÿè£…ã‹ã‚‰ç¢ºèªã—ãŸã®ã§ã™ãŒã€æ¤œç´¢æ¡ä»¶ã« Hash Key ã‚„ Range Key ãŒå«ã¾ã‚Œã¦ã„ã‚‹ã‹ã©ã†ã‹ã‚’åˆ¤æ–­ã—ã¦ã€ã‚¯ã‚¨ãƒªãŒä½¿ãˆã‚‹å ´åˆã¯ã‚¯ã‚¨ãƒªã§æ¤œç´¢ã—ã¦ãã‚Œã‚‹ã‚ˆã†ã§ã™ã€‚User.where(hash_key: 'hash_key') # ã‚¯ã‚¨ãƒªã§æ¤œç´¢ã•ã‚Œã‚‹User.where(hash_key: 'hash_key', range_key: 'range_key') # ã‚¯ã‚¨ãƒªã§æ¤œç´¢ã•ã‚Œã‚‹User.where(name: 'name') # Hash Key ãŒç„¡ã„ã®ã§ã‚¹ã‚­ãƒ£ãƒ³ãŒå®Ÿè¡Œã•ã‚Œã‚‹ãŸã ã—ã€å¼•æ•°ã®æŒ‡å®šæ–¹æ³•ã‚„å®šç¾©ã®ä»•æ–¹ãŒå°‘ã—ã§ã‚‚é–“é•ã£ã¦ã„ã‚‹ã¨ #where ã§ã‚¹ã‚­ãƒ£ãƒ³ãŒå®Ÿè¡Œã•ã‚Œã¦ã—ã¾ã£ã¦ã„ã‚‹ã‚±ãƒ¼ã‚¹ãŒã‚ã‚Šã¾ã™ã€‚æœ¬å½“ã«ã‚¯ã‚¨ãƒªæ¤œç´¢ã•ã‚Œã¦ã„ã‚‹ã‹ã€å¿µã®ãŸã‚ Rails ã®ãƒ­ã‚°å‡ºåŠ›ã‚’ç¢ºèªã—ã€ã‚¹ã‚­ãƒ£ãƒ³ãŒå®Ÿè¡Œã•ã‚Œã¦ã„ãªã„ã‹ã©ã†ã‹ç¢ºèªã™ã‚‹ã‚ˆã†ã«ã—ã¦ä¸‹ã•ã„ âš ï¸#where ã®ä½¿ã„æ–¹ã¯ ActiveRecord ã¨ã»ã¼åŒã˜ã§ã™ã€‚User.where(hash_key: 'hash_key').all # =\u003e [#\u003cUser:0x000000076ed848\u003e, #\u003cUser:0x0000000779abb0\u003e, ...]User.where(hash_key: 'hash_key').each do |user|  user # =\u003e #\u003cUser:0x000000076ed848\u003eendUser.where(hash_key: 'hash_key').first # =\u003e #\u003cUser:0x000000048cb050\u003eUser.where(hash_key: 'hash_key').last # =\u003e #\u003cUser:0x000000048cb050\u003eãã—ã¦ã€ range_key ã«å¯¾ã—ã¦ gt, lt, gte, lte, begins_with, between ã®æ¼”ç®—å­ãŒä½¿ç”¨ã§ãã¾ã™ã€‚User.where(hash_key: 'hash_key', 'range_key.gt': 123)User.where(hash_key: 'hash_key', 'range_key.lt': 123)User.where(hash_key: 'hash_key', 'range_key.gte': 123)User.where(hash_key: 'hash_key', 'range_key.lte': 123)User.where(hash_key: 'hash_key', 'range_key.begins_with': 'range_')User.where(hash_key: 'hash_key', 'range_key.between': [100, 200])ãƒãƒã‚Šãƒã‚¤ãƒ³ãƒˆã“ã“ã‹ã‚‰ã¯ Range Key ã‚’ dyanmoid ã‚’ä½¿ã£ã¦ã„ã¦ãƒãƒã£ãŸç‚¹ã‚’ã„ãã¤ã‹ç´¹ä»‹ã—ãŸã„ã¨æ€ã„ã¾ã™ã€‚range ã‚’å®šç¾©ã—ã¦ã„ã‚‹ã¨ #find_by_id ã®å‹•ä½œãŒå¤‰ã‚ã‚‹# Hash Table ã¨ã—ã¦åˆ©ç”¨class User  include Dynamoid::Document  table name: :users, key: :hash_keyend# OK!User.find_by_id('hash_key')# =\u003e #\u003cUser:0x000000048cb050\u003e# Hash-Range Table ã¨ã—ã¦åˆ©ç”¨class User  include Dynamoid::Document  table name: :users, key: :hash_key  range :range_key, :stringend# Error!User.find_by_id('hash_key')# =\u003e Aws::DynamoDB::Errors::ValidationException: The provided key element does not match the schemaã‚“ã‚“ï¼Ÿï¼Ÿã£ã¦ãªã£ãŸã®ã§ã™ãŒã€ã“ã†ã„ã†äº‹ã‚‰ã—ã„ã§ã™ã€‚#find_by_id ã¯å†…éƒ¨çš„ã«ã¯ Aws::DynamoDB::Client#get_item ã‚’å‘¼ã³å‡ºã—ã¦ã„ã‚‹#get_item ã¯çµæœãŒä¸€æ„ã«å®šã¾ã‚‹æ¤œç´¢æ¡ä»¶ã‚’æŒ‡å®šã—ãªã„ã¨ã‚¨ãƒ©ãƒ¼ã«ãªã‚‹ã¤ã¾ã‚Š range_key (primary sort key) ã‚’å®šç¾©ã—ã¦ã„ã‚‹å ´åˆã¯å¼•æ•°ä¸€ã¤ã ã¨ã‚¨ãƒ©ãƒ¼å¼•æ•°ã« range_key ã‚’æŒ‡å®šã™ã‚Œã° OKLine::User.find_by_id('hash_key', range_key: 'range_key')# =\u003e #\u003cUser:0x000000048cb050\u003e# OK!has_many ã¯ Hash-Range Table ã«å¯¾å¿œã—ã¦ã„ãªã„dynamoid ã§ã¯ ActiveRecord ã®ã‚ˆã†ãª has_many has_one belongs_to ãŒå®šç¾©ã•ã‚Œã¦ã„ã‚‹ã®ã§ã™ãŒã€ Hash-Range Table ã ã¨ä¸Šæ‰‹ãå‹•ä½œã—ã¾ã›ã‚“ã€‚å†…éƒ¨ã®å®Ÿè£…ã‚’è¦‹ã¦ã¿ã¾ã—ãŸãŒã€ Hash Table ã®çŠ¶æ…‹ã§åˆ©ç”¨ã™ã‚‹ã“ã¨ãŒå‰æã¨ãªã£ã¦ã„ã‚‹ã‚ˆã†ã§ã—ãŸã€‚Hash Table ã§ã‚ã‚Œã°ã“ã‚“ãªæ„Ÿã˜ã§åˆ©ç”¨ã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚class User  include Dynamoid::Document  table name: :users, key: :hash_key  has_many :talks, class: Talkendclass Talk  include Dynamoid::Document  table name: :talks, key: :hash_key  belongs_to :user, class: Userenduser = User.create(name: 'Taro')user.talks.create(content: 'Hello world')ã¾ã¨ã‚Hash Table ã¨ Hash-Range Table ã®é•ã„ã‹ã‚‰ã€ Dynamoid ã«ãŠã‘ã‚‹å®Ÿè£…æ–¹æ³•ã«ã¤ã„ã¦ã‚’ç´¹ä»‹ã—ã¾ã—ãŸã€‚Dynamoid ã‚’åˆ©ç”¨ã—ãŸå ´åˆã¯ migration ã‚’æ˜ç¤ºçš„ã«å®Ÿè¡Œã™ã‚‹è¨³ã§ã¯ãªã„ãŸã‚ã€Rails ã®ã‚½ãƒ¼ã‚¹ã‚³ãƒ¼ãƒ‰ã¨ DyanmoDB ã®ãƒ†ãƒ¼ãƒ–ãƒ«ã®å®Ÿæ…‹ãŒå¿…ãšã—ã‚‚ä¸€è‡´ã—ã¦ã„ãªã„ã‚±ãƒ¼ã‚¹ãŒã‚ã‚‹ç‚¹ãŒãƒãƒã‚Šã©ã“ã‚ã®ã‚ˆã†ãªæ°—ãŒã—ã¾ã™ã€‚æœ¬ç¨¿ã§ç´¹ä»‹ã—ãŸ Hash-Range Table ãŒ DynamoDB ã¨ Dynamoid ä¸¡æ–¹ã§æ­£ã—ãè¨­å®šã•ã‚Œã¦ã„ã‚‹ã‹ã‚’ãƒªãƒªãƒ¼ã‚¹å‰ã«å…¥å¿µã«ãƒã‚§ãƒƒã‚¯ã—ãŸæ–¹ãŒè‰¯ã„ã§ã—ã‚‡ã†ã€‚ã‚¯ã‚¨ãƒªã¨ã‚¹ã‚­ãƒ£ãƒ³ã®ãƒ™ã‚¹ãƒˆãƒ—ãƒ©ã‚¯ãƒ†ã‚£ã‚¯ã‚¹â†©","link":"https://developer.feedforce.jp/entry/2017/11/04/235323","isoDate":"2017-11-04T14:53:23.000Z","dateMiliSeconds":1509807203000,"imageUrl":"https://cdn.user.blog.st-hatena.com/default_entry_og_image/116461321/1514251518718655","authorName":"ryz310"}]},"__N_SSG":true},"page":"/members/[name]","query":{"name":"ryz310"},"buildId":"y6HlcMxfohCOugLf79Epk","nextExport":false,"isFallback":false,"gsp":true,"head":[["meta",{"name":"viewport","content":"width=device-width"}],["meta",{"charSet":"utf-8"}],["link",{"rel":"icon shortcut","type":"image/png","href":"https://engineers.feedforce.jp/logo.png"}],["link",{"rel":"stylesheet","href":"https://fonts.googleapis.com/css2?family=Inter:wght@400;700\u0026display=swap"}],["title",{"children":"ryz310 | Feedforce Engineers' Blogs"}],["meta",{"property":"og:title","content":"ryz310"}],["meta",{"property":"og:url","content":"https://engineers.feedforce.jp/members/ryz310"}],["meta",{"name":"twitter:card","content":"summary_large_image"}],["meta",{"property":"og:site","content":"Feedforce Engineers' Blogs"}],["meta",{"property":"og:image","content":"https://engineers.feedforce.jp/og.png"}],["link",{"rel":"canonical","href":"https://engineers.feedforce.jp/members/ryz310"}],["link",{"rel":"alternate","type":"application/rss+xml","title":"Feedforce Engineers' Blogs","href":"https://engineers.feedforce.jp/rss.xml"}],["link",{"rel":"alternate","type":"application/atom+xml","title":"Feedforce Engineers' Blogs","href":"https://engineers.feedforce.jp/atom.xml"}]]}</script><script nomodule="" src="/_next/static/chunks/polyfills-fa276ba060a4a8ac7eef.js"></script><script src="/_next/static/chunks/main-8a83f0fd99327c4684a8.js" async=""></script><script src="/_next/static/chunks/webpack-e067438c4cf4ef2ef178.js" async=""></script><script src="/_next/static/chunks/framework.1daf1ec1ecf144ee9147.js" async=""></script><script src="/_next/static/chunks/commons.9e003f150a446b53bdd9.js" async=""></script><script src="/_next/static/chunks/pages/_app-99db904e083fc7f74e35.js" async=""></script><script src="/_next/static/chunks/588505f8033a39c9ef82bc46b1145ac9fd1db500.35a80b323597683276be.js" async=""></script><script src="/_next/static/chunks/pages/members/%5Bname%5D-42a7756adc6c0800b4dc.js" async=""></script><script src="/_next/static/y6HlcMxfohCOugLf79Epk/_buildManifest.js" async=""></script><script src="/_next/static/y6HlcMxfohCOugLf79Epk/_ssgManifest.js" async=""></script></body></html>