<?xml version="1.0" encoding="utf-8"?>
<rss version="2.0">
    <channel>
        <title>Feedforce Engineers' Blogs</title>
        <link>https://engineers.feedforce.jp</link>
        <description>フィードフォースグループに所属するエンジニアのブログ記事をまとめています。</description>
        <lastBuildDate>Thu, 05 May 2022 01:34:05 GMT</lastBuildDate>
        <docs>https://validator.w3.org/feed/docs/rss2.html</docs>
        <generator>https://github.com/jpmonette/feed</generator>
        <image>
            <title>Feedforce Engineers' Blogs</title>
            <url>https://engineers.feedforce.jp/logo.png</url>
            <link>https://engineers.feedforce.jp</link>
        </image>
        <copyright>© Feedforce Inc.</copyright>
        <item>
            <title><![CDATA[『本を聴く毎日を送っています』という LT をした]]></title>
            <link>https://masutaka.net/2022-04-09-1/</link>
            <guid>https://masutaka.net/2022-04-09-1/</guid>
            <pubDate>Sat, 09 Apr 2022 00:00:00 GMT</pubDate>
            <description><![CDATA[私が所属しているフィードフォースでは、毎月 FFLT という LT 大会があります。
最近久しぶりに参加していて、昨日は本当に久しぶりに LT をしました。久しぶりすぎて LT が 5 分であることを気にかけなかったという&hellip;。いや、もちろん覚えてはいたのですが（汗）。
 お題は [2022-03-06-1] や [2022-03-30-1] でそれとなく書いていた「Kindle 本を聴く」方法です。
すべてのケースに合うわけでも、ベストな方法でもありませんが、集中力が必要で眠くなりがちな本を読むという作業を省エネ化出来たことは、自分にとって価値あるものでした。
まだまだ最適化が必要なので、やっていきます。]]></description>
        </item>
        <item>
            <title><![CDATA[『銃・病原菌・鉄』を読み終えた]]></title>
            <link>https://masutaka.net/2022-03-30-1/</link>
            <guid>https://masutaka.net/2022-03-30-1/</guid>
            <pubDate>Wed, 30 Mar 2022 00:00:00 GMT</pubDate>
            <description><![CDATA[購入から６年半以上。下巻の途中で数年止まっていましたが、今月えいやっと読み終えました。
※ 正確に書くと、Kindle 本をオーディオブック化して聴き終えました。
上巻はもはや覚えていませんが、全体を通して覚えていることは「人種間に能力の優劣などなく、地理的環境的なアドバンテージが文化的な発展の違いに繋がった」ことです。
例えばユーラシア大陸は大陸は横に長いため、作物や技術が伝播しやすいです。緯度が変わらないため、気候が似通っているからです。しかし、南北アメリカ大陸やアフリカ大陸は縦に長いため、ユーラシア大陸に比べて伝播が遅かったり、途中で止まったりします。こちらを知れただけで読んだ価値がありました。
下巻の最後では、なぜヨーロッパの国々はアメリカ大陸やアジア諸国で植民地支配が広がったのに、中国はそうでなかったのかという興味深い話が解説されていました。
ヨーロッパは国の数が多く競争が激しいため、新しい技術が開発されたら取り入れざるを得ず、ある国の支援が得られなくても他の国でなら可能（コロンブスの話）という事情が生まれるそうです。
一方で中国は１つの王朝が統一しているため、例えば外洋航海の禁止という決定事項が中国全土に浸透し、その決定が愚かだったかの検証さえ出来なくなってしまったそう。
Kindle 本をオーディオブック化するスキルを身に付けたので、これからもジャンジャン読んで聴いていきます。
  P.S.
これから読む予定。
日本の地理学は『銃・病原菌・鉄』をいかに語るのか―英語圏と日本における受容過程の比較検討から― ]]></description>
        </item>
        <item>
            <title><![CDATA[1Password に SSH キーをインポートしたら UX として良かった]]></title>
            <link>https://masutaka.net/2022-03-29-1/</link>
            <guid>https://masutaka.net/2022-03-29-1/</guid>
            <pubDate>Tue, 29 Mar 2022 00:00:00 GMT</pubDate>
            <description><![CDATA[ 1password 8 beta の macOS バージョンで ssh キーをすべて扱うようにした - HsbtDiary(2022-03-18)  SSH and Git, meet 1Password 🥰｜1Password   macOS はベータ版をインストールする必要があるが、メインマシンの Manjaro (Linux) の 1Password はすでに 8.6.1 だったので、試しに使ってみた。
1Password には SSH 秘密鍵をインポートする。1Password 内では秘密鍵から公開鍵を作ってくれる。~/.ssh/ 以下の SSH キーは秘密鍵と公開鍵の両方とも不要になる。
UNIX Socket ファイルが出来るようなので、~/.ssh/config で設定をそこに向ければ勝手に使ってくれる。こんなことが出来るんだ。
Host * IdentityAgent &#34;~/.1password/agent.sock&#34; ただ、git fetch や git pull のたびに指紋認証が要求されるので、利用頻度が多い GitHub なんかは今まで通りが良い気はした。
Host github.com IdentityFile &#34;~/.ssh/github_ed25519&#34; IdentityAgent none Host * IdentityAgent &#34;~/.1password/agent.sock&#34; ssh config は設定が上書かれないことには注意。先にマッチしたほうが優先される。
ssh_config(5) - Linux manual page ]]></description>
        </item>
        <item>
            <title><![CDATA[『だから僕たちは、組織を変えていける』を読んだ]]></title>
            <link>https://masutaka.net/2022-03-10-1/</link>
            <guid>https://masutaka.net/2022-03-10-1/</guid>
            <pubDate>Thu, 10 Mar 2022 00:00:00 GMT</pubDate>
            <description><![CDATA[組織に課題を持った同僚が紹介していたので、ポチッとしました。
 読んだ感想としては、まあそうだよねって感じで異論とかはなかった。なんなら自分は読む前から理解していたつもりだし、やる気溢れるメンタルで実践してたつもり。※ 現在一人開発なので難易度が低い。
でも、組織で実践出来る風景が全く思い浮かばない。
日本は不満を撒き散らす社員が多く、やる気に満ちた社員が少ない　「とんでもなく時代遅れ」な組織が抱える問題点 - ログミーBiz こちらの記事が紹介記事。今の会社は不満を撒き散らす社員は思いつかないし、とんでもなく時代遅れな会社でもないと思う。やる気のありなしはフルリモートワークもあってよく分からない。
バラバラなピースをどう完成させていけば良いのかな。自分はまだ正解が分からない。]]></description>
        </item>
        <item>
            <title><![CDATA[『読む力 最新スキル大全』を読んだ]]></title>
            <link>https://masutaka.net/2022-03-06-1/</link>
            <guid>https://masutaka.net/2022-03-06-1/</guid>
            <pubDate>Sun, 06 Mar 2022 00:00:00 GMT</pubDate>
            <description><![CDATA[コロナ禍に突入して丸２年。よく散歩をするようになりました。基本在宅ワークなので、意識的に散歩しないとさすがに健康リスクが高いからです。
散歩は考えを整理するのにもとても良くて、直近の課題への良いアイディアが出てきたり、寝かせた課題への解決策がふっと浮き上がってきたりします。[2021-01-05-1] でも書いた件です。馴染みの曲を聞きながら、いつもと同じコースを歩くと、特に効果的です。
それと相反してはしまうのですが、最近はそれに飽きてしまい、散歩中に技術系や格闘技系、歴史系の Podcast をよく聞くようになりました。ちなみにインプットモードになるので、思考の整理にはなりません。(^^;
そんな中、格闘家の青木選手 きっかけで Voicy の存在を知り、他に聞くものないかなーと探して見つけたのが、佐々木俊尚さんの Voicy でした。
 佐々木さんは @sasakitoshinao での朝のキュレーションが有名なジャーナリストで、私は 2011 年ごろからフォローしていたと思います。※ よくアンチが湧いていますが、そんな変なことは言ってないと思うんだよなあ。
私、朝はツイッターをあまり見ないので、佐々木さんとは一方的に疎遠みたいになってました。そんなこんなで懐かしい気持ちで聞き始め、とうとう過去の放送を全部聞いてしまいました。放送開始は去年の 9 月で、佐々木さんは毎朝 Voicy を配信しているので、それなりの数です。
そんな佐々木さんが本を出しました。お礼の気持ち半分、佐々木さんの情報収集方法を知ること半分で購入してみました。
 読んだ感想としては「良い本だとは思うけど、マッチする人とそうでもない人がいると思う」かなあ？
私の情報収集方法は、佐々木さんほど深くはありませんが、似たりよったりです。肝心の「マルチタスクワーキング」は、ちょっと使わないかなあ？なんでだろう？
私がプログラマーだから、割とガッツリしたタスクが多いから？会社員だから、請求書作るだとかの細かいタスクが少ないから？ ※ 過去にポモドーロやタスクシュート [2016-10-26-1] は試した上での感想です。
だいたい毎日、仕事を始めたら溜まった Slack 読んでウォーミングアップして、あとはそれなりの大きさのタスクをガーッと処理する感じです。不惑の年はとうに越しましたが、集中力が続かない悩みはあまり感じたことはありません。
あ、キリが悪いところで止めるテクニックは、プログラマーの間ではテストを失敗させた状態で作業を止めるテクニックとして知られていて、私もたまに使いますね。
一方でビジネス職の人には、情報収集方法や仕事の仕方は参考になるかもしれません。Feedly, Pocket, Twitter（のリスト）など、存在や良さげな使い方はプログラマーよりは知らないかもしれませんし、タスクの粒度は小さく、種類は多い印象があります。
ということで、気になる方はポチッとすると良いと思いました。
ここまでで、私ひとつ嘘をつきました。
「『読む力 最新スキル大全』を読んだ」と書きましたが、実際には Fire HD 8 の「Kindle 読み上げ」で全部聞きました。読んでいません。皮肉みたいになって、なんだかすみません。
 「マルチタスクワーキング」は集中力など要らない、時間を細切れに使えという提案ですが、聞くという解はあると思います。
さすがに私も本を読む集中力は頻繁に切れます。Twitter は見ちゃうし、格闘技系 YouTube も気になる。
そんな課題がある中で、Podcast や Voicy は異様に捗っていました。どうやら今の生活にマッチしていたようです。
だったら本も聞いてしまえば、集中力が切れる課題を解決できるかな？と試した最初の本が『読む力 最新スキル大全』でした。伏線回収？
もしかしたら、佐々木さんの Voicy を聞いているうちに「集中力なんか要らない」という仮説を認識し、それと Podcast や Voicy が生活にマッチしていることがうまく結びついて、課題を解決できたのかもしれません。
などと、この記事を書いていて思いました。
「Kindle 読み上げ」を使って、どのように本を聞いているかは、近々記事にする予定です。いろいろあって大変でした。(^^;]]></description>
        </item>
        <item>
            <title><![CDATA[『GitHubセキュリティ Organization運用のベストプラクティス』を読んだ]]></title>
            <link>https://masutaka.net/2022-03-03-1/</link>
            <guid>https://masutaka.net/2022-03-03-1/</guid>
            <pubDate>Thu, 03 Mar 2022 00:00:00 GMT</pubDate>
            <description><![CDATA[昨日、職場の同僚から教えてもらった、昨日公開されたこちらの本を読みました。
GitHubセキュリティ Organization運用のベストプラクティス 著者は @tmknom さん。[2019-05-07-1] に読んだ『Pragmatic Terraform on AWS』改め『実践Terraform 』の著者でもあります。
今の会社は 2014 年から GitHub を使っています。当初は全部分かりまっせ！という設定ボリュームでしたが、時を経てものすごくてんこ盛りになり、把握しきれない設定項目も増えてきました。
本書によって、それらの棚卸しが出来た気がします。
本自体のボリュームは大きくないので、流し読みすることも出来ますし、適度に GiHub Docs へのリンクになっているため、ガッツリ読むことも出来ます。
いたく感動したため、少額ながらサポートさせて頂きました。(^^)
欲張りすぎずにコツコツ改善していくことが大事だと、自分をリセット出来た気がします。]]></description>
        </item>
        <item>
            <title><![CDATA[ECサイトのタイトルと説明文から取り扱いカテゴリの予測を行った]]></title>
            <link>https://developer.feedforce.jp/entry/2022/02/21/104757</link>
            <guid>https://developer.feedforce.jp/entry/2022/02/21/104757</guid>
            <pubDate>Mon, 21 Feb 2022 01:47:57 GMT</pubDate>
            <description><![CDATA[<p>こんにちは　 データサイエンティストの八百俊哉です。最近は家でカクテルを作ることにはまっています。</p>

<p><strong>今回はEC BoosterのクライントのECサイトのタイトルと説明文を用いることで、どのカテゴリの商品を扱っているのか予測する仕組みを作成しました</strong>ので、その方法を紹介します。</p>

<p>弊社のサービス<a href="https://ecbooster.jp/">EC Booster</a>は、Google ショッピング広告の自動運用による自社EC自動集客サービスです。主要ECシステムと連携することで、Google の検索結果画面に画像付きで自社商品を訴求することが可能となります。</p>

<h1>分析背景</h1>

<p>EC Boosterを利用いただくことで、Google ショッピング広告を自動運用することができます。
Googleショッピング広告では広告出稿する際に、<strong>Googleが自動的にそれぞれの商品にgoogle product categoryというカテゴリ情報を割り当てます。</strong></p>

<p><iframe src="https://hatenablog-parts.com/embed?url=https%3A%2F%2Fsupport.google.com%2Fmerchants%2Fanswer%2F6324436%3Fhl%3Dja" title="Google 商品カテゴリ [google_product_category] - Google Merchant Center ヘルプ" class="embed-card embed-webcard" scrolling="no" frameborder="0" style="display: block; width: 100%; height: 155px; max-width: 500px; margin: 10px 0px;"></iframe><cite class="hatena-citation"><a href="https://support.google.com/merchants/answer/6324436?hl=ja">support.google.com</a></cite></p>

<p>しかしながら、<strong>Googleが自動的に割り振った商品ごとのカテゴリ情報はEC Booster側からは確認することができません。</strong></p>

<blockquote><p>Google's category of the item (see Google product taxonomy). When querying products, this field will contain the user provided value. There is currently no way to get back the auto assigned google product categories through the API.
<cite><a href="https://developers.google.com/shopping-content/reference/rest/v2.1/products?hl=en#Product.FIELDS.google_product_category">https://developers.google.com/shopping-content/reference/rest/v2.1/products?hl=en#Product.FIELDS.google_product_category</a></cite></p></blockquote>

<p>商品ごとに割り振られたカテゴリがわからないと、それぞれのクライントがどのような商品を扱っているのかわからなくなります。</p>

<p>その結果、<strong>クライアントの実績を取扱商品カテゴリごとに集計したり、扱っているカテゴリごとのサポートを行ったりすることができなくなってしまいます。</strong></p>

<p>そこで今回は<strong>クライントごとに取扱商品カテゴリをEC Booster側で予測する</strong>ことで、上に挙げたような課題を解決するような仕組みを作成しました。</p>

<h1>学習・予測に必要なデータの収集</h1>

<p>EC Boosterは現在有料プラン約300のクライントとフリープラン約2000のクライントにご利用いただいております。（<a href="https://ssl4.eir-parts.net/doc/7068/tdnet/2065834/00.pdf">2022年5月第2四半期 決算説明資料より</a>）</p>

<p><strong>学習データ生成のために、有料プランユーザーを中心に約470のクライントに対して手動でカテゴリを割り振るという作業を実施しました。</strong>また、このデータの作成はそれぞれのクライントのホームページを目視で確認し、適切なカテゴリを割り振りました。</p>

<p>次に学習・予測に必要な入力データの収集を行いました。<strong>今回はそれぞれのクライントのタイトルと説明文を用いて学習をします。</strong>
<strong>そのため以下に示すようにそれぞれのホームページからtitleとdescriptionのスクレイピングを行いました。
</strong>
<figure class="figure-image figure-image-fotolife" title="タイトル(title)、説明文(description)の例"><span itemscope itemtype="http://schema.org/Photograph"><img src="https://cdn-ak.f.st-hatena.com/images/fotolife/n/newton800/20220215/20220215113752.png" alt="f:id:newton800:20220215113752p:plain" width="1200" height="575" loading="lazy" title="" class="hatena-fotolife" itemprop="image"></span><figcaption>タイトル(title)、説明文(description)の例</figcaption></figure></p>

<p>それぞれのtitleとdescriptionが収集できると以下のようなデータになります。</p>

<table>
<thead>
<tr>
<th>  shop_id  </th>
<th>  手入力カテゴリ  </th>
<th> title</th>
<th> description</th>
</tr>
</thead>
<tbody>
<tr>
<td>  A  </td>
<td>  カテゴリA  </td>
<td> レトロな服を買うならA  </td>
<td> レトロな服を買うならAで決まり!!お問い合わせは...  </td>
</tr>
<tr>
<td>  B  </td>
<td>  カテゴリB  </td>
<td> 高級食材のB </td>
<td> 高級食材を買うならBが安い!!  </td>
</tr>
<tr>
<td>  C  </td>
<td>  カテゴリC  </td>
<td> 車のパーツはC </td>
<td> パーツの取付も行います!!  </td>
</tr>
</tbody>
</table>


<p>すべてのtitleとdescriptionを収集すると、手動でカテゴリを定めたデータ数と等しいデータ数になるので約470の学習データが集まったことになります。</p>

<h1>学習</h1>

<p>今回はBERTを用いて学習・予測を行いました。</p>

<p><a href="https://arxiv.org/abs/1810.04805">BERT（Bidirectional Encoder Representations from Transformers）</a>とは2018年にGoogleから発表された自然言語モデルです。</p>

<p>また、私自身BERTに精通しているわけではないので、今回は勉強も兼ねて「<a href="https://www.amazon.co.jp/dp/B098J9M4PP/ref=dp-kindle-redirect?_encoding=UTF8&amp;btkr=1">BERTによる自然言語処理入門 ―Transformersを使った実践プログラミング</a>」を参考に学習を実施しました。</p>

<p>第6章にBERTによる文章分類というものがあるので、そちらを一部書き換えて使用しました。</p>

<h1>工夫したポイント</h1>

<p>モデルやpre-trained modelは本で紹介されている通りのものを使用しましたが、<strong>18カテゴリへの分類問題で正解率が62%前後しか確保できていないため、この精度では運用できない</strong>と判断し、以下のような工夫を行いました。</p>

<h2>工夫したポイント①　2種類の予測モデルを用いる</h2>

<p>精度改善のために元々1つの予測モデルで学習・予測行っていたものを、2つの予測モデルで行うように変更しました。それぞれの予測モデルは以下のような役割を担っています。</p>

<table>
<thead>
<tr>
<th>  予測モデル  </th>
<th>  役割  </th>
</tr>
</thead>
<tbody>
<tr>
<td>  予測モデル1  </td>
<td>  データ量が多いカテゴリを予測するモデル。簡単な予測問題を間違えない。また、データ数が少ないカテゴリはまとめて「その他」と予測する。  </td>
</tr>
<tr>
<td>  予測モデル2  </td>
<td>  予測モデル1で「その他」と予測されたデータを、それぞれのカテゴリに割り振る予測モデル。データ数が少なく難しいカテゴリに対して予測を行うので正解率は低い。  </td>
</tr>
</tbody>
</table>


<p>手動で割り振られた約470データのカテゴリは以下のようになっており、<strong>学習に使用できるデータ量がカテゴリごとにばらつきが大きいことがわかります。</strong> <strong>またデータ量が少ないカテゴリは、多くの場合低い精度を示していました。</strong></p>

<p><span itemscope itemtype="http://schema.org/Photograph"><img src="https://cdn-ak.f.st-hatena.com/images/fotolife/n/newton800/20220216/20220216105400.png" alt="f:id:newton800:20220216105400p:plain" width="601" height="372" loading="lazy" title="" class="hatena-fotolife" itemprop="image"></span></p>

<p><br></p>

<p>予測モデル1では、データ量が少ないカテゴリは「その他」とまとめてしまい学習を行いました。予測モデル2では「その他」をより細分化するための学習を行いました。</p>

<p><br></p>

<p><span itemscope itemtype="http://schema.org/Photograph"><img src="https://cdn-ak.f.st-hatena.com/images/fotolife/n/newton800/20220216/20220216111039.png" alt="f:id:newton800:20220216111039p:plain" width="951" height="393" loading="lazy" title="" class="hatena-fotolife" itemprop="image"></span></p>

<p><br>
しかしながら、<strong>この方法だけではデータ量が少ないカテゴリを学習している予測モデル2はこれまで通り低い精度でした</strong>ので、以下に示す工夫ポイント2を導入することにしました。</p>

<h2>工夫したポイント②　 自信のない予測は、後で人手で確認するようなフローにする</h2>

<p>これまでは出力されたカテゴリの全てを信頼するようにしていましたが、<strong>一定の信頼値以下の予測に関しては後で人手で確認するというフローを導入</strong>しました。</p>

<p><span itemscope itemtype="http://schema.org/Photograph"><img src="https://cdn-ak.f.st-hatena.com/images/fotolife/n/newton800/20220216/20220216111955.png" alt="f:id:newton800:20220216111955p:plain" width="951" height="441" loading="lazy" title="" class="hatena-fotolife" itemprop="image"></span></p>

<p>そうすることで、<strong>予測結果の信頼値が高いものは予測結果がそのまま採用され、信頼値が低いものは人が後で確認する</strong>という流れになりました。また人が後で確認してカテゴリを定めたデータは、学習モデルの精度向上のための再学習に使用することができます。</p>

<h2>工夫したポイントを導入した結果</h2>

<p>元々正解率が62%だったものが上に示したような<strong>工夫ポイントを導入することで正解率は91%まで向上しました。</strong>また、そのうち2割ほどが人手での再確認を要するものとなりました。</p>

<h1>さいごに</h1>

<p>工夫したポイント②の「自信のない予測は、後で人手で確認するようなフローにする」はちょっとせこいのではないか？と思われる方もいるかもしれません。しかし、残りの全てのクライントに手動で割り振ることと比較すると業務量としてはかなり削減できることになっています。（8割軽減）</p>

<p><strong>「機械にできる簡単なタスクは機械に任せてしまって、人間は本当に考えないといけないような業務に集中できる」ような分析やサービス作りに携わっていきたいなぁと改めて感じた業務でした。</strong></p>

<p>最後までありがとうございました。</p>

<p>P.S. 工夫ポイント1はlossの設計をうまくやれば不要だったりするのかなぁなんて思ったり...</p>
]]></description>
            <enclosure url="https://cdn.user.blog.st-hatena.com/default_entry_og_image/4268819/1588226000876991" length="0" type="image//default_entry_og_image/4268819/1588226000876991"/>
        </item>
        <item>
            <title><![CDATA[Wi-Fi 6 ルーターを買うまでの長い検討メモと結論、そして数日使った感想]]></title>
            <link>https://masutaka.net/2022-02-16-1/</link>
            <guid>https://masutaka.net/2022-02-16-1/</guid>
            <pubDate>Wed, 16 Feb 2022 00:00:00 GMT</pubDate>
            <description><![CDATA[2019/4/1 に買った WN-AX2033GR2/E を Wi-Fi 6 対応ルーターにグレードアップしたくなった。
 ￥5,980 という超安値で買って、特に不満はないどころかかなり満足して使っていたのだけど、ウェブに関わるものとしては最新技術を追いかけたほうが良いと思うし、Wi-Fi 6 ルーターを体感してはみたい。変わるのか変わらないのかを知りたかった。※ 人はそれを物欲と呼びます。
などと @meihong のツイートを見て勝手に意識が高まっていた。
loading...
   if (localStorage.getItem("pref-theme") === "light") { const elements = document.getElementsByClassName('twitter-tweet'); for (let i = 0; i  ※ 補足すると、[2018-04-30-1] に某 B 社のルーターを買ったものの失敗し、1 年後に上の WN-AX2033GR2/E で取り返した感じです。
今までの Wi-Fi 規格名は「IEEE 802.11ac」だったんだね。もはや忘れていた。Wi-Fi 6 が出たタイミングで、&ldquo;Wi-Fi 5&rdquo; という新呼称が付いたらしい。Wi-Fi 5 に 2.4GHz 帯がないことも知らなかった。いや気にしてなかった？
初心者向け 次世代Wi-Fi規格“Wi-Fi 6”とは？ Happy Wi-Fi Life - エレコム株式会社    Wi-Fi 規格名 最大通信速度 周波数 新呼称     IEEE 802.]]></description>
        </item>
        <item>
            <title><![CDATA[Gmail のフィルターをコード管理して心の平穏を得ることが出来た]]></title>
            <link>https://masutaka.net/2022-02-13-1/</link>
            <guid>https://masutaka.net/2022-02-13-1/</guid>
            <pubDate>Sun, 13 Feb 2022 00:00:00 GMT</pubDate>
            <description><![CDATA[最近は人間からのメールは減り、機械からのメールが多くを占めるようになりました。その中にはメールを停止できなかったり、メール購読を義務付けられた酷いサービスもあります。
私は仕事もプライベートもインボックス・ゼロを実践しています。それもあって今まで Gmail の検索演算子 をチマチマと調べて、チマチマと設定していましたが、以前から全てを自分の管理下に起きたい欲求がありました。この度ついに強い衝動にかられたので、ゴリッと管理し始めました。
gmailctl を使うことにした こちらの記事にも影響されて、私的には gmailctl が良いという結論に達しました。
Gmail filters as a code. Using gmailctl to create filters and…｜by Hans Jakob Emmel｜The Startup｜Medium   最初は gmailfilters を試したのですが、既存の Gmail フィルターがほとんど消えてしまいました。本末転倒。つらすぎます&hellip;。(ToT)
Export や例外処理にバグがあるように見えました。
gmailctl の README.md Comparison with existing projects でも言及されている gmail-britta は Ruby 製で任意のコードを書けてしまうので、こちらも選択肢から外しました。
任意のコードを書けてしまうと、凝った設定をする可能性があります。今回は単なる設定に過ぎないので、Terraform の HCL のような宣言型で設定できる gmailctl を採用しました。作者が Google で働いていることも少し考慮に入れました。(^^)v
gmailctl の導入方法 &ldquo;$ gmailctl init&rdquo; のテキストナビゲーションに従います。Google の OAuth クライアントを作る必要がありますが、これが結構厄介でした。
$ gmailctl init The credentials are not initialized.]]></description>
        </item>
        <item>
            <title><![CDATA[操作ログを用いた行動パターン変化の検知]]></title>
            <link>https://developer.feedforce.jp/entry/2022/02/09/110824</link>
            <guid>https://developer.feedforce.jp/entry/2022/02/09/110824</guid>
            <pubDate>Wed, 09 Feb 2022 02:08:24 GMT</pubDate>
            <description><![CDATA[<p>こんにちは　
データサイエンティストの<a href="https://twitter.com/feed_yao">八百俊哉</a>です。
最近は花粉が飛んでいることを感じています。目がかゆい。</p>

<p>今回はdfplus.ioの操作ログを用いてクライアントの行動パターン変化を検知する仕組みを作成し、社内で有効活用された事例がありますので、その手法と成果を紹介します。</p>

<p>弊社のサービス<a href="https://dfplus.io/">dfplus.io</a>はマーケティング・広告運用チームのためのデータフィード管理ツールになります。様々な商品・商材データをマーケティングでフル活用できるようになるサービスです。</p>

<h1>分析背景</h1>

<p>dfplus.ioでの解約理由の一つに<strong>「クライアントの担当者が変更する際に引き継ぎがうまくできず、dfplus.ioの使い方がわからなくなってしまう」</strong>というケースがありました。</p>

<p>dfplus.ioカスタマーサクセスチーム（※以下CSチーム）では、<strong>クライアント側から事前に担当者の変更のご連絡を頂いた場合は新しいご担当者様にdfplus.ioの操作や活用に関するご案内をしております。しかし、クライアント側からご連絡がない場合は担当者の変更に気付くことができずそのご案内ができないという課題</strong>がありました。</p>

<p>その為なんらかの方法でクライアントの担当者の変更を検知することができると、新しい担当者にCSチームからdfplus.ioの操作や活用に関するご案内をすることができます。</p>

<p>そこで今回は<strong>操作ログを用いて行動パターンの変化を検知するという分析を実施し、クライアントの担当者の変更に気がつけるようにしました。</strong></p>

<h1>操作ログを用いて行動パターンを可視化</h1>

<p>dfplus.ioには全部で90個のAPIが存在します。どのアカウントがいつどのAPIを使用したのかのデータがすべて蓄積されている状態です。以下が実際に今回の分析で使用したデータになります。</p>

<p><figure class="figure-image figure-image-fotolife" title="実際に使用した元データ"><span itemscope itemtype="http://schema.org/Photograph"><img src="https://cdn-ak.f.st-hatena.com/images/fotolife/n/newton800/20220208/20220208141429.png" alt="f:id:newton800:20220208141429p:plain" width="643" height="173" loading="lazy" title="" class="hatena-fotolife" itemprop="image"></span><figcaption>実際に使用した元データ</figcaption></figure></p>

<p>今回はこちらのデータを用いて各クライアントの行動パターンを作成しました。以下が実際の操作ログを用いて作成できた行動パターンの可視化例です。</p>

<p><span itemscope itemtype="http://schema.org/Photograph"><img src="https://cdn-ak.f.st-hatena.com/images/fotolife/n/newton800/20220209/20220209092518.png" alt="f:id:newton800:20220209092518p:plain" width="778" height="531" loading="lazy" title="" class="hatena-fotolife" itemprop="image"></span></p>

<p>それぞれの<strong>APIに0~89の通し番号を割り振り、x軸</strong>としました。また、<strong>y軸には日数を使用</strong>して上のように可視化しました。</p>

<p>1日のうち1度でもAPIを操作すれば、(x(API番号), y(操作日)) = 1となるようにしており、画素値は0か1しか取らないようになっています。(画像で表現するときは1を255としている。)</p>

<p><strong>それらのデータを月ごとに切り分け、前月とその前の月の行動パターンを比較することで、行動パターンの変化を確認しました。</strong></p>

<p>上の画像の例だと2021年12月と2022年01月を比較することで、変化の検知を行うということになります。</p>

<h1>行動パターン変化の定義</h1>

<p>ここから2つの月の行動パターンを比較していきます。</p>

<p>はじめは画像同士をそのまま引き算することで変化量を求めようと思いました。しかし、仮にdfplus.ioを使用する業務が1日遅れになってしまったクライアントがいた場合、同じ作業をしているにも関わらず、行動パターン変化量が大きくなってしまいます。</p>

<p>そこで行動パターン変化量(<img src="https://chart.apis.google.com/chart?cht=tx&chl=%20d" alt=" d"/>)を以下のように定義しました。</p>

<div align="center">
<img src="https://chart.apis.google.com/chart?cht=tx&chl=%20d%20%3D%20%20%5Cdfrac%7B%5Csum%20%5E%7B89%7D_%7Bx%3D0%7D%5Cleft%28%20%5Csum%20%5E%7B30%7D_%7By%3D0%7Dp_%7Bx%2Cy%7D%5E%7Bbetore%7D-%5Csum%20%5E%7B30%7D_%7By%3D0%7Dp_%7Bx%2Cy%7D%5E%7Bafter%7D%5Cright%29%20%5E%7B2%7D%7D%7B%5Cleft%28%20%5Csum%20%5E%7B89%7D_%7Bx%3D0%7D%5Csum%20%5E%7B30%7D_%7By%3D0%7Dp_%7Bx%2Cy%7D%5E%7Bbetore%7D%2B%5Csum%20%5E%7B89%7D_%7Bx%3D0%7D%5Csum%20%5E%7B30%7D_%7By%3D0%7Dp_%7Bx%2Cy%7D%5E%7Bafter%7D%5Cright%29%20%7D%5C%5C%20" alt=" d =  \dfrac{\sum ^{89}_{x=0}\left( \sum ^{30}_{y=0}p_{x,y}^{betore}-\sum ^{30}_{y=0}p_{x,y}^{after}\right) ^{2}}{\left( \sum ^{89}_{x=0}\sum ^{30}_{y=0}p_{x,y}^{betore}+\sum ^{89}_{x=0}\sum ^{30}_{y=0}p_{x,y}^{after}\right) }\\ "/>
</div>


<p></p></p>

<div align="center">
<img src="https://chart.apis.google.com/chart?cht=tx&chl=%20%0Ap_%7Bx%2Cy%7D%20%3D%20%5Cleft%5C%7B%0A%5Cbegin%7Barray%7D%7Bll%7D%0A1%20%26%20%E6%93%8D%E4%BD%9C%E3%81%8C%E3%81%82%E3%81%A3%E3%81%9F%E5%A0%B4%E5%90%88%5C%5C%0A0%20%26%20%E6%93%8D%E4%BD%9C%E3%81%8C%E3%81%AA%E3%81%8B%E3%81%A3%E3%81%9F%E5%A0%B4%E5%90%88%0A%5Cend%7Barray%7D%0A%5Cright.%0A" alt=" 
p_{x,y} = \left\{
\begin{array}{ll}
1 &amp; &#x64CD;&#x4F5C;&#x304C;&#x3042;&#x3063;&#x305F;&#x5834;&#x5408;\\
0 &amp; &#x64CD;&#x4F5C;&#x304C;&#x306A;&#x304B;&#x3063;&#x305F;&#x5834;&#x5408;
\end{array}
\right.
"/>
</div>


<p></p></p>

<p>もともとは分子の部分だけを用いて行動パターン変化量と定義していましたが、そうすると必然的に操作頻度が多いユーザーの変化量が多くなってしまい、月に数度しか使用しないクライアントの行動パターン変化量がとても小さくなってしまうという課題がありました。</p>

<p>そこで上のように分母に全体の操作頻度を導入することで、操作頻度による評価のばらつきを削減しました。</p>

<p>行動パターン変化量(<img src="https://chart.apis.google.com/chart?cht=tx&chl=%20d" alt=" d"/>)がいくつ以上になれば、行動パターンが変化したと言えるかについては、CSチームと<img src="https://chart.apis.google.com/chart?cht=tx&chl=%20d" alt=" d"/>と行動パターンの可視化画像を確認の上、決定しております。今後もその閾値については調整を行っていく予定になります。</p>

<h1>実際に検知できた例</h1>

<p><strong>これらの仕組みを使用することで毎月10件前後の変化検知があります。
その検知結果をCSチームで確認し、ご案内が必要だと判断した場合にCSチームからクライアントに連絡を実施するという流れになっています。</strong></p>

<p>以下は実際に担当者の変更の検知に成功した事例です。</p>

<p><span itemscope itemtype="http://schema.org/Photograph"><img src="https://cdn-ak.f.st-hatena.com/images/fotolife/n/newton800/20220208/20220208160800.png" alt="f:id:newton800:20220208160800p:plain" width="721" height="361" loading="lazy" title="" class="hatena-fotolife" itemprop="image"></span></p>

<p>可視化された行動パターンからも確認できるように、<strong>2021年11月までは頻繁に使用されていましたが、2021月12月の前半以降は使用回数が激減しています。</strong></p>

<p><strong>実際にこちらのクライアントは担当者が退職されており、担当者の変更検知の成功例となりました。</strong></p>

<p>以下は、実際にCSチームから頂いた連絡です。
<span itemscope itemtype="http://schema.org/Photograph"><img src="https://cdn-ak.f.st-hatena.com/images/fotolife/n/newton800/20220208/20220208161732.png" alt="f:id:newton800:20220208161732p:plain" width="883" height="251" loading="lazy" title="" class="hatena-fotolife" itemprop="image"></span></p>

<h1>さいごに</h1>

<p>今回は操作ログを用いた行動パターン変化の検知について紹介しました。
こちらの分析案件は、ヒアリングから現在まで1年ほどかけて現状の形になりました。入社2年目の私にとってはかなり長い間実施した業務になります。</p>

<p>今回は触れられていませんが、現在に至るまで紆余曲折ありました。最後まで諦めずに現在の形にできて非常に嬉しく感じます。</p>

<p>現在運用から4ヶ月ほど経過しており、実際に担当者の変更が検知できた事例が2件となっています。引き続き運用を続けていくことで、より多くの成果が残せると考えています。</p>

<p>最後までお付き合いいただき、ありがとうございました。</p>
]]></description>
            <enclosure url="https://cdn.user.blog.st-hatena.com/default_entry_og_image/4268819/1588226000876991" length="0" type="image//default_entry_og_image/4268819/1588226000876991"/>
        </item>
        <item>
            <title><![CDATA[『ボッチLookML開発者兼データ整備人を連れてきたよ！』という発表をした]]></title>
            <link>https://developer.feedforce.jp/entry/2022/02/04/180000</link>
            <guid>https://developer.feedforce.jp/entry/2022/02/04/180000</guid>
            <pubDate>Fri, 04 Feb 2022 09:00:00 GMT</pubDate>
            <description><![CDATA[<p>こんにちは <a href="http://blog.hatena.ne.jp/masutaka26/" class="hatena-id-icon"><img src="https://cdn.profile-image.st-hatena.com/users/masutaka26/profile.png" width="16" height="16" alt="" class="hatena-id-icon">id:masutaka26</a> です。</p>

<p>本日、週次の社内勉強会 <a href="https://developer.feedforce.jp/archive/category/FFTT">FFTT</a> で『ボッチLookML開発者兼データ整備人を連れてきたよ！』というひどいタイトルの発表をしました。</p>

<iframe src="https://docs.google.com/presentation/d/e/2PACX-1vTv911SmUBM9fAk-IKQM9139Q29fU7INnUHwbFeOBxolqyybPdlcFHW2dAHBTgr3P9J_kL0Xdhbe38L/embed?start=false&loop=false&delayms=3000" frameborder="0" width="960" height="410" allowfullscreen="true" mozallowfullscreen="true" webkitallowfullscreen="true"></iframe>


<p>2020 年 4 月から Looker に関わって得たことをまとめた内容であるとともに、1 年半近く前からのアップデートになります。</p>

<p><iframe src="https://hatenablog-parts.com/embed?url=https%3A%2F%2Fdeveloper.feedforce.jp%2Fentry%2F2020%2F10%2F23%2F190000" title="『4月から取り組んできたLookerの導入から実装までのお話（Redashとも比較）』という発表をした - Feedforce Developer Blog" class="embed-card embed-blogcard" scrolling="no" frameborder="0" style="display: block; width: 100%; height: 190px; max-width: 500px; margin: 10px 0px;"></iframe><cite class="hatena-citation"><a href="https://developer.feedforce.jp/entry/2020/10/23/190000">developer.feedforce.jp</a></cite></p>

<p>世に出ている Looker の情報はキラキラしているものが多く、ツラい話をそれほど目にしません。<s>絶対にあるはずなのに！😭</s></p>

<p>それならば！とツラい話や解決が困難な話を散りばめさせてもらいました。課題が共有されて初めて知見が役に立つと思いますからね。<em>解決した課題もあるよ（小声）。</em></p>

<p>それでは良い週末を！(^^)/</p>
]]></description>
            <enclosure url="https://cdn-ak.f.st-hatena.com/images/fotolife/m/masutaka26/20201023/20201023184859.png" length="0" type="image/png"/>
        </item>
        <item>
            <title><![CDATA[仮想通貨ウォレットを知るために MetaMask と Coincheck のアカウントを作って、仮想通貨を送金してみた]]></title>
            <link>https://masutaka.net/2022-01-19-1/</link>
            <guid>https://masutaka.net/2022-01-19-1/</guid>
            <pubDate>Wed, 19 Jan 2022 00:00:00 GMT</pubDate>
            <description><![CDATA[最近、PodCast や Voicy をよく聞くようになりました。今さらながら散歩や掃除中の「ながら聞き」を覚えたからです。
格闘技や歴史、テック系をよく聞きます。Off Topic も分からないなりに最近は聞く関係で、仮想通貨やウォレット、Web3 関連の話題は気にはなってました。何も分からない&hellip;。
という流れで、先週会社でこのツイートが共有されていて「あ、これ進研ゼミで見た Off Topic で聞いたやつだ！」と思い、勢いで試してみました。
loading...
   if (localStorage.getItem("pref-theme") === "light") { const elements = document.getElementsByClassName('twitter-tweet'); for (let i = 0; i  この記事も共有されていたので、一旦何も考えずに従いました。
MetaMask(メタマスク)とは？使い方やログイン方法をスマホ版・PC版ごとに解説｜InvestNavi（インヴェストナビ） ビッコレのアカウント作成は不要 いきなりですが不要です。
記事中の動画には登場人物が３人います。
① MetaMask ② Coincheck ③ ビッコレ これ、最後まで関係が分からず混乱していたのですが、私は③ビッコレのアカウント作成は不要でした。記事を書いている会社が運営しているサービスなので、紹介するのは分かるのですがね。
ビッコレは「ポイ活」をしてビットコインをゲットするサービスみたいです。ポイ活とか、ビッコレとか略称っぽいのが多くてワイは疲れました&hellip;。
LINE の友達になると 250 円相当のビットコインはもらえるのですが、如何せん少なすぎて Coincheck に送金できません。あと、友達をビッコレに招待すると 1,000 円もらえるみたいですが、私は仮想通貨自体には夢を持っていないのでね&hellip;。
今回はあくまで雰囲気を知ることが目的なので、私にはビッコレアカウント作成は不要でした。
結果的には、動画をざっと見て①MetaMaskと②Coincheckのアカウントを作るだけで良かったです。記事はより詳しく書いてあって、動画の後に読むと分かりやすかったです。
仮想通貨の体験だけなら MetaMask も不要 ちなみに Coincheck もウォレットの機能は持っているので、MetaMask は必須ではないのですが、記事によると
 イーサリアムブロックチェーンに連動する金融サービス、ゲーム、NFTを利用するには、仮想通貨ウォレットであるMetaMaskを通して決済しなくてはいけません。
 という話はあるみたいです。なるほど。分からん。
あとは秘密鍵（シークレットリカバリーフレーズ）がオフラインで管理されることになるため、Coincheck などよりリスクが分散されてはいる理解です。
心が折れそうになった Coincheck の本人確認 Coincheck のアカウントを作った後に必要な「本人確認」が非常に厄介でした。私は４回失敗しました。２０回くらい動画撮りましたよ&hellip;。]]></description>
        </item>
        <item>
            <title><![CDATA[LINE絵文字概観]]></title>
            <link>https://shiromoji.hatenablog.jp/entry/2022/01/16/235051</link>
            <guid>https://shiromoji.hatenablog.jp/entry/2022/01/16/235051</guid>
            <pubDate>Sun, 16 Jan 2022 14:50:51 GMT</pubDate>
            <description><![CDATA[<p>LINEで使える3種類の絵文字について、昨年末の<a href="https://developer.feedforce.jp/archive/category/FFTT">社内勉強会</a>でざっくりと解説しました。そのときのスライドを上げておきます。ざっくり概観なので、厳密でない表現や調査が不十分な箇所はありますが、雰囲気はつかめるんじゃないでしょうか。</p>

<iframe class="speakerdeck-iframe" style="border: 0px none; background: rgba(0, 0, 0, 0.1) none repeat scroll 0% 0% padding-box; margin: 0px; padding: 0px; border-radius: 6px; box-shadow: rgba(0, 0, 0, 0.2) 0px 5px 40px; width: 560px; height: 314px;" src="https://speakerdeck.com/player/535cc3eccd204aeca4e9ce68e8175768" title="LINE絵文字概観 / FFTT #465" allowfullscreen="true" mozallowfullscreen="true" webkitallowfullscreen="true" data-ratio="1.78343949044586" frameborder="0"></iframe>


<h2>参考ページ</h2>

<ul>
<li><a href="https://linecorp.com/ja/pr/news/ja/2018/2160">【LINE】「デコ文字」に続き、トークがもっと楽しくなる新機能が登場　人気キャラクターが“絵文字”になった「LINE絵文字」を本日より発売開始 | ニュース | LINE株式会社</a></li>
<li><a href="https://linecorp.com/ja/pr/news/ja/2018/2410">【LINE Creators Market】LINE、「LINEクリエイターズ絵文字」を2018年11月中に販売開始、絵文字制作に関する申請ガイドラインを本日より公開 | ニュース | LINE株式会社</a></li>
<li><a href="https://linecorp.com/ja/pr/news/ja/2021/3898">LINE、メッセージ内で動く「アニメーション絵文字」を発売開始 | ニュース | LINE株式会社</a></li>
<li><a href="https://creator.line.me/ja/guideline/emoji/">絵文字 ―ガイドライン - LINE Creators Market</a></li>
<li><a href="https://unicode.org/emoji/charts/emoji-versions.html">Emoji Versions, v14.0</a></li>
<li><a href="https://unicode.org/emoji/charts/emoji-counts.html">Emoji Counts, v14.0</a></li>
<li><a href="https://developers.line.biz/ja/docs/messaging-api/emoji-list/">送信可能なLINE絵文字リスト | LINE Developers</a></li>
<li><a href="https://www.rfc-editor.org/rfc/rfc8259.html#section-8.1">8.1. Character Encoding ― RFC 8259: The JavaScript Object Notation (JSON) Data Interchange Format</a></li>
<li><a href="https://www.unicode.org/versions/Unicode14.0.0/ch23.pdf#page=23">23.5 Private-Use Characters ― The Unicode Standard Version 14.0</a></li>
<li><a href="https://store.line.me/emojishop/home/creators/ja">LINE クリエイターズ絵文字 - 話題の新着絵文字など | LINE STORE</a></li>
<li><a href="https://developers.line.biz/ja/docs/messaging-api/message-types/#text-messages">テキストメッセージ ― メッセージタイプ | LINE Developers</a>（送信側）</li>
<li><a href="https://developers.line.biz/ja/reference/messaging-api/#wh-text">テキスト ― Messaging APIリファレンス | LINE Developers</a>（受信側）</li>
<li><a href="https://store.line.me/emojishop/product/5bc84438031a6704f8cff722/ja">カナヘイのピスケ&amp;うさぎ 絵文字 2 - LINE絵文字 | LINE STORE</a></li>
<li><a href="https://emojipedia.org/shortcodes/">⏩ Emoji Shortcodes</a></li>
<li><a href="https://developers.line.biz/ja/news/2021/11/30/line-original-unicode-emojis-will-be-discontinued/">ニュース：2022年3月31日をもって、Messaging APIの「LINE独自のUnicode絵文字」を廃止します | LINE Developers</a></li>
</ul>

]]></description>
            <enclosure url="https://cdn-ak.f.st-hatena.com/images/fotolife/m/mashabow/20220116/20220116235025.png" length="0" type="image/png"/>
        </item>
        <item>
            <title><![CDATA[Manjaro で CD をリッピングする]]></title>
            <link>https://masutaka.net/2021-12-30-1/</link>
            <guid>https://masutaka.net/2021-12-30-1/</guid>
            <pubDate>Thu, 30 Dec 2021 00:00:00 GMT</pubDate>
            <description><![CDATA[Asunder という GUI ツールを使えば、簡単にリッピング出来る。
$ sudo pacman -S asunder エンコーダがないので、Asunder 上で直接 AAC(.m4a) に変換出来ない。「設定」で促されるがままに fdkaac をインストールすれば OK 。
$ sudo pacman -S fdkaac デフォルトの CDDB サーバ gnudb.gnudb.org:8880 だと、『青天を衝けI』のサントラは引けなかった。有志の方が立てたサーバだと引けた。
 サーバ: freedbtest.dyndns.org
ポート: 80
 ただ『青天を衝けII』は引けなかった。Linux からでもこの freedbtest サーバに登録は出来ると思うが、サイト に書かれているのは Windows アプリ CDex での登録方法のみ。
iTunes だとどちらのサントラも引けた。iTunes は Gracenote という CDDB サーバを使っているらしい？ちなみに CDDB は Gracenote の登録商標らしい。
freedbtest サーバに登録できたとしても、YouTube Music に登録するためには、各 .m4a ファイルにアートワークを登録しないと寂しいことになる。なんらかの方法で .m4a ファイルを編集する必要がある。
そういえば .mp3 ファイルの時は Emacs の mpg123.el 経由で id3put を使って編集した記憶。当時はアートワークなんてものはなかったけどね。懐かしい&hellip;。]]></description>
        </item>
        <item>
            <title><![CDATA[2021 年に買って良かったもの 7 選（ガチ）]]></title>
            <link>https://masutaka.net/2021-12-26-1/</link>
            <guid>https://masutaka.net/2021-12-26-1/</guid>
            <pubDate>Sun, 26 Dec 2021 00:00:00 GMT</pubDate>
            <description><![CDATA[年末ということで、今年買って良かったものを紹介します。月に 1 本書くことにしている、ブログ記事のネタが思いつかないこともあり&hellip;。
1. Anker Magnetic Cable Holder  これはマジおすすめです。机の下にケーブルが落ちて拾うストレスがなくなりました。
当時の机の天板は少しツルツルで、今はザラザラですが、どちらも全く問題なく吸着しています。シールタイプではないので、剥がした時に跡が残らないのも良いです。
詳しくは [2021-03-24-1] をどうぞ。
2. ノートパソコンスタンド  これも良かったです。パソコンを使わない時、個人用と仕事用のどちらも邪魔なく縦置き出来るようになりました。会社の同僚曰く「複数台を縦置きするスタンドの発想はなかったかも……」とのこと。
詳しくは [2021-04-04-1] をどうぞ。
3. スマホスタンド  スタンド絡みでもう一丁。個人的には今年の MVP です。
今使っている Pixel 3a XL [2020-07-14-1] は裏側に指紋センサーがあります。今まで机の上に平置きしていたので、スマホを使おうとすると以下の 2 ステップ必要でした。
 スマホを持ち上げる 指紋認証する  このスタンドのおかげで 1 ステップ減らせました。
 指紋認証する  横置きも出来るし、裏側のリングを伸ばして壁などにかけられるし、スマホリングにもなるので、万能感があります。普通のスマホスタンドと違って場所を取ることもありません。お値段も 1,000 円ちょっとです。
4. MacBook Pro 用クーラー  机の上がらみでさらにもう一丁。私の 2 代目 MacBook Pro 用クーラーです。これがないと指先が熱くて仕事になりません。
完全に仕事用に買いました。個人用の VivoBook では全く不要です。自分の中では正直言って、MacBook Pro は欠陥商品です。あ、ディスってしまった&hellip;。M1 MacBook Pro では不要なことを祈ります。
詳しくは [2021-05-23-1] をどうぞ。]]></description>
        </item>
        <item>
            <title><![CDATA[Causal Impactを用いた入札単価調整の効果検証]]></title>
            <link>https://developer.feedforce.jp/entry/2021/12/21/154206</link>
            <guid>https://developer.feedforce.jp/entry/2021/12/21/154206</guid>
            <pubDate>Tue, 21 Dec 2021 06:42:06 GMT</pubDate>
            <description><![CDATA[<p>こんにちは　機械学習エンジニアの<a href="https://twitter.com/feed_yao">八百俊哉</a>です。最近はバレーボールをやることにハマっており、激しめに運動しています。今日も筋肉痛です。</p>

<p>今回はGoogle広告の入札単価調整が広告成果にどのような影響を与えるのかCausal Impactを用いて検証を実施しましたので、その結果を共有したいと思います。</p>

<h1>分析背景</h1>

<p>弊社のサービス<a href="https://ecbooster.jp/">EC Booster</a>は、Google ショッピング広告の自動運用による自社EC自動集客サービスです。主要ECシステムと連携することで、Google の検索結果画面に画像付きで自社商品を訴求することが可能となります。</p>

<p>Google 広告には<a href="https://support.google.com/google-ads/answer/2732132?hl=ja">入札単価調整</a>という機能があり、それをショッピング広告でも使用することによって効率的に広告配信を行うことができるとされています。
そこで<strong>今回はEC Boosterで入札単価調整を実施することで、どれほど広告の実績がよくなるのかを検証しました。</strong></p>

<h1>Causal Impactを用いた効果検証</h1>

<p>今回使用した効果検証の方法である<a href="https://google.github.io/CausalImpact/CausalImpact.html">Causal Impact</a>をご紹介します。</p>

<p><strong>Causal ImpactとはGoogleが作成したベイズ構造時系列モデルを使用した因果推論のためのパッケージになります。</strong></p>

<p>仕組みを簡単に表現すると、あるイベントが介入した日を境に「過去の実績から推定される反事実」と「実際に観測された事実」を比較することによって、イベントの効果の大きさを測ると言うものです。</p>

<p><span itemscope itemtype="http://schema.org/Photograph"><img src="https://cdn-ak.f.st-hatena.com/images/fotolife/n/newton800/20211215/20211215120354.png" alt="f:id:newton800:20211215120354p:plain" width="761" height="261" loading="lazy" title="" class="hatena-fotolife" itemprop="image"></span></p>

<p>今回は実際に検証したことを紹介する記事になりますので、これ以上詳しくCausal Impactの仕組みについては言及しないです。
より詳しくCausal Impactについて知りたい方は以下の書籍が参考になるので是非読んでみてください。</p>

<p><iframe src="https://hatenablog-parts.com/embed?url=https%3A%2F%2Fwww.amazon.co.jp%2F%25E3%2583%2587%25E3%2583%25BC%25E3%2582%25BF%25E8%25A7%25A3%25E6%259E%2590%25E3%2581%25AE%25E3%2581%259F%25E3%2582%2581%25E3%2581%25AE%25E7%25B5%25B1%25E8%25A8%2588%25E3%2583%25A2%25E3%2583%2587%25E3%2583%25AA%25E3%2583%25B3%25E3%2582%25B0%25E5%2585%25A5%25E9%2596%2580%25E2%2580%2595%25E2%2580%2595%25E4%25B8%2580%25E8%2588%25AC%25E5%258C%2596%25E7%25B7%259A%25E5%25BD%25A2%25E3%2583%25A2%25E3%2583%2587%25E3%2583%25AB%25E3%2583%25BB%25E9%259A%258E%25E5%25B1%25A4%25E3%2583%2599%25E3%2582%25A4%25E3%2582%25BA%25E3%2583%25A2%25E3%2583%2587%25E3%2583%25AB%25E3%2583%25BBMCMC-%25E7%25A2%25BA%25E7%258E%2587%25E3%2581%25A8%25E6%2583%2585%25E5%25A0%25B1%25E3%2581%25AE%25E7%25A7%2591%25E5%25AD%25A6-%25E4%25B9%2585%25E4%25BF%259D-%25E6%258B%2593%25E5%25BC%25A5%2Fdp%2F400006973X" title="データ解析のための統計モデリング入門――一般化線形モデル・階層ベイズモデル・MCMC (確率と情報の科学) | 久保 拓弥 |本 | 通販 | Amazon" class="embed-card embed-webcard" scrolling="no" frameborder="0" style="display: block; width: 100%; height: 155px; max-width: 500px; margin: 10px 0px;"></iframe><cite class="hatena-citation"><a href="https://www.amazon.co.jp/%E3%83%87%E3%83%BC%E3%82%BF%E8%A7%A3%E6%9E%90%E3%81%AE%E3%81%9F%E3%82%81%E3%81%AE%E7%B5%B1%E8%A8%88%E3%83%A2%E3%83%87%E3%83%AA%E3%83%B3%E3%82%B0%E5%85%A5%E9%96%80%E2%80%95%E2%80%95%E4%B8%80%E8%88%AC%E5%8C%96%E7%B7%9A%E5%BD%A2%E3%83%A2%E3%83%87%E3%83%AB%E3%83%BB%E9%9A%8E%E5%B1%A4%E3%83%99%E3%82%A4%E3%82%BA%E3%83%A2%E3%83%87%E3%83%AB%E3%83%BBMCMC-%E7%A2%BA%E7%8E%87%E3%81%A8%E6%83%85%E5%A0%B1%E3%81%AE%E7%A7%91%E5%AD%A6-%E4%B9%85%E4%BF%9D-%E6%8B%93%E5%BC%A5/dp/400006973X">www.amazon.co.jp</a></cite></p>

<p><iframe src="https://hatenablog-parts.com/embed?url=https%3A%2F%2Fwww.amazon.co.jp%2F%25E6%2599%2582%25E7%25B3%25BB%25E5%2588%2597%25E5%2588%2586%25E6%259E%2590%25E3%2581%25A8%25E7%258A%25B6%25E6%2585%258B%25E7%25A9%25BA%25E9%2596%2593%25E3%2583%25A2%25E3%2583%2587%25E3%2583%25AB%25E3%2581%25AE%25E5%259F%25BA%25E7%25A4%258E-R%25E3%2581%25A8Stan%25E3%2581%25A7%25E5%25AD%25A6%25E3%2581%25B6%25E7%2590%2586%25E8%25AB%2596%25E3%2581%25A8%25E5%25AE%259F%25E8%25A3%2585-%25E9%25A6%25AC%25E5%25A0%25B4-%25E7%259C%259F%25E5%2593%2589%2Fdp%2F4903814874" title="時系列分析と状態空間モデルの基礎: RとStanで学ぶ理論と実装 | 真哉, 馬場 |本 | 通販 | Amazon" class="embed-card embed-webcard" scrolling="no" frameborder="0" style="display: block; width: 100%; height: 155px; max-width: 500px; margin: 10px 0px;"></iframe><cite class="hatena-citation"><a href="https://www.amazon.co.jp/%E6%99%82%E7%B3%BB%E5%88%97%E5%88%86%E6%9E%90%E3%81%A8%E7%8A%B6%E6%85%8B%E7%A9%BA%E9%96%93%E3%83%A2%E3%83%87%E3%83%AB%E3%81%AE%E5%9F%BA%E7%A4%8E-R%E3%81%A8Stan%E3%81%A7%E5%AD%A6%E3%81%B6%E7%90%86%E8%AB%96%E3%81%A8%E5%AE%9F%E8%A3%85-%E9%A6%AC%E5%A0%B4-%E7%9C%9F%E5%93%89/dp/4903814874">www.amazon.co.jp</a></cite></p>

<h1>入札単価調整はコンバージョン率に良い効果をもたらしている</h1>

<p>入札単価調整を実施することで、広告効果の高いユーザーに対して積極的に入札を行うようになり、逆に広告効果の低いユーザーに対しては入札を控えるようになります。</p>

<p>そのようにすることで、コンバージョン率の向上が期待されていました。コンバージョン率が向上するとコンバージョン数が上がり、最終的には費用対効果であるROASの向上までが考えられます。</p>

<p>実際に分析前に立てられた仮説は以下です。</p>

<p><figure class="figure-image figure-image-fotolife" title="分析前に立てた仮説"><span itemscope itemtype="http://schema.org/Photograph"><img src="https://cdn-ak.f.st-hatena.com/images/fotolife/n/newton800/20211221/20211221153325.png" alt="f:id:newton800:20211221153325p:plain" width="691" height="171" loading="lazy" title="" class="hatena-fotolife" itemprop="image"></span><figcaption>分析前に立てた仮説</figcaption></figure></p>

<p>それでは実際に入札単価調整を実施することで、広告成果がどう変化したのかを紹介します。</p>

<p>入札単価調整を行う前の実績と入札単価調整を行った後の実績を用いてCausal Impactを実施しました。</p>

<p>その結果以下のようにそれぞれの広告成果に入札単価調整が影響を与えているということがわかりました。</p>

<p><figure class="figure-image figure-image-fotolife" title="分析を実施することで分かった結果の一部抜粋"><span itemscope itemtype="http://schema.org/Photograph"><img src="https://cdn-ak.f.st-hatena.com/images/fotolife/n/newton800/20211221/20211221153346.png" alt="f:id:newton800:20211221153346p:plain" width="691" height="171" loading="lazy" title="" class="hatena-fotolife" itemprop="image"></span><figcaption>分析を実施することで分かった結果の一部抜粋</figcaption></figure></p>

<p>結果から<strong>コンバージョン率が向上することによってコンバージョン数が向上していることが確認されました。</strong>（他の要素も向上していますが、今回はコンバージョン率に焦点を当てています）</p>

<p>実際にCVRに関してのCausal Impactの実行結果は以下のようになっていました。（一部公開できない部分は黒くしてます）</p>

<p><span itemscope itemtype="http://schema.org/Photograph"><img src="https://cdn-ak.f.st-hatena.com/images/fotolife/n/newton800/20211215/20211215123528.png" alt="f:id:newton800:20211215123528p:plain" width="1180" height="590" loading="lazy" title="" class="hatena-fotolife" itemprop="image"></span></p>

<p>上段に図示された実線が実際に観測されたコンバージョン率で青い点線が過去の傾向を元にした予測コンバージョン率になります。入札単価調を開始した縦の点線の位置から、予測コンバージョン率（入札単価調整を仮にやっていない場合）よりも実際に観測されたコンバージョン率（入札単価調整を実施した場合）の方が大きくなっていることがわかります。</p>

<p>中段に図示されたものが入札単価調整の効果となります。入札単価調整を実施してから、コンバージョン率が増加したといえそうです。</p>

<p>下段に図示されたものは増加したコンバージョン率の累計値になります。</p>

<p><strong>このようなことから入札単価調整は、コンバージョン率向上に貢献していることがわかりました。</strong></p>

<h1>そして現在入札単価調整は</h1>

<p>このような分析もあり、EC Boosterでは現在入札単価調整は全てのユーザーに対して適用されるように設定されています。</p>

<p>このようにEC Boosterの裏側では効果検証を繰り返し、より広告成果が良くなるように最適化を実施しています。</p>

<h1>さいごに</h1>

<p>最後までお付き合いいただきありがとうございます。
弊社のデータ分析チームに新卒入社してはや2年弱ほど経過し、少しずつ成果が出せるようになってきました。</p>

<p>今後はより積極的にデータ分析に関する情報発信を行っていきたいと考えています。よろしくお願いします。</p>

<p>P.S.祖父母に自分の仕事伝えるのが難しいです。</p>
]]></description>
            <enclosure url="https://cdn-ak.f.st-hatena.com/images/fotolife/n/newton800/20211215/20211215120354.png" length="0" type="image/png"/>
        </item>
        <item>
            <title><![CDATA[LookML 開発で使っているディレクトリ構造を紹介する]]></title>
            <link>https://developer.feedforce.jp/entry/2021/12/13/110000</link>
            <guid>https://developer.feedforce.jp/entry/2021/12/13/110000</guid>
            <pubDate>Mon, 13 Dec 2021 02:00:00 GMT</pubDate>
            <description><![CDATA[<p>こんにちは、<a href="http://blog.hatena.ne.jp/masutaka26/" class="hatena-id-icon"><img src="https://cdn.profile-image.st-hatena.com/users/masutaka26/profile.png" width="16" height="16" alt="" class="hatena-id-icon">id:masutaka26</a> です。</p>

<p>この記事は Looker Advent Calendar 2021 の 13 日目の記事です。</p>

<p><iframe src="https://hatenablog-parts.com/embed?url=https%3A%2F%2Fqiita.com%2Fadvent-calendar%2F2021%2Flooker" title="Calendar for Looker | Advent Calendar 2021 - Qiita" class="embed-card embed-webcard" scrolling="no" frameborder="0" style="display: block; width: 100%; height: 155px; max-width: 500px; margin: 10px 0px;"></iframe><cite class="hatena-citation"><a href="https://qiita.com/advent-calendar/2021/looker">qiita.com</a></cite></p>

<p>昨日は Yappli 阿部さんの「<a href="https://tech.yappli.io/entry/2021/12/12/Sexy_Tech_for_You_9">Lookerの目標値やストップワードを、Googleスプレッドシート連携でお手軽管理【Sexy Tech for You #9】</a>」でした。Looker を使うとこのような LookML を書くだけで、ビジネスユーザーが SQL を書くことなく、本業に集中できるのはとても良いですよね。</p>

<p>個人的には、SQL ベースの派生テーブルの中で join するよりも、explore で join したほうが Looker らしく、メンテナンス性が良い気がしました。<a href="https://help.looker.com/hc/en-us/articles/360023722974">symmetric 集計</a>が働くため、ファンアウトも避けられます。wikipedia テーブルに関しては、永続的な派生テーブル（PDT）を使って BigQuery のスキャンサイズを抑えるのも良さそうです。</p>

<p>、、、( ﾟдﾟ)ハッ！ついマジレスをしてしまいました。💦</p>

<p>今回は dimension が null の measure を（0 ではなく）ø にする少しマニアックな記事を書く予定でしたが、先日の <a href="https://looker-japan-user-group.connpass.com/event/233775/">Looker User Meetup Online #7</a> で、LookML のディレクトリ構造を知りたいというチャットをお見かけしたので、今回はその話を書くことにしました。</p>

<ul class="table-of-contents">
    <li><a href="#今回のプロジェクトの規模感">今回のプロジェクトの規模感</a></li>
    <li><a href="#デフォルトのディレクトリ構造">デフォルトのディレクトリ構造？</a></li>
    <li><a href="#特別なファイル形式を知る">特別なファイル形式を知る</a></li>
    <li><a href="#最近使っているディレクトリ構造">最近使っているディレクトリ構造</a><ul>
            <li><a href="#bigquery">bigquery/</a></li>
            <li><a href="#model1modellkml">model1.model.lkml</a></li>
            <li><a href="#explores">explores/</a></li>
            <li><a href="#views">views/</a></li>
            <li><a href="#tests">tests/</a></li>
            <li><a href="#manifestlkml">manifest.lkml</a></li>
        </ul>
    </li>
    <li><a href="#まとめ">まとめ</a></li>
    <li><a href="#2021-12-29-追記">2021-12-29 追記</a></li>
</ul>

<h2 id="今回のプロジェクトの規模感">今回のプロジェクトの規模感</h2>

<p>プロジェクトの規模感によってディレクトリ構造は変わると思うので、先に書いておきます。</p>

<ul>
<li>Looker インスタンスに 1 つだけ LookML プロジェクトが存在する</li>
<li>BigQuery Dataset 76 個</li>
<li><code>.lkml</code> ファイル 277 個

<ul>
<li><code>.model.lkml</code> ファイル 1 個</li>
<li><code>.explore.lkml</code> ファイル 56 個</li>
<li><code>.view.lkml</code> ファイル 139 個</li>
<li><code>.test.lkml</code> ファイル 78 個</li>
</ul>
</li>
<li>LookML 開発者 1 名</li>
</ul>


<h2 id="デフォルトのディレクトリ構造">デフォルトのディレクトリ構造？</h2>

<p>この記事を書くまで誤解をしていたのですが、デフォルトのディレクトリ構造というものはなかったのですね。この記事を書くために改めて Blank Project を作ったら、ファイルもディレクトリも何もないプロジェクトが作られました。</p>

<p>モデルファイルを作るとこのようなコードが展開されるので、<code>.view.lkml</code> に関しては <code>/views/</code> 以下に作る方が多いと思います。私もそうでした。</p>

<pre class="code" data-lang="" data-unlink>include: &#34;/views/*.view.lkml&#34;                # include all views in the views/ folder in this project
# include: &#34;/**/*.view.lkml&#34;                 # include all views in this project
# include: &#34;my_dashboard.dashboard.lookml&#34;   # include a lookml dashboard called my_dashboard</pre>


<p>例えばこのようになります。</p>

<pre class="code" data-lang="" data-unlink>feedmatic.model.lkml
views
├── all_media.view.lkml
└── ga.view.lkml</pre>


<p>開発初期は <code>feedmatic.model.lkml</code> に view 以外の、explore や datagroup などをズラズラと書いていました。</p>

<h2 id="特別なファイル形式を知る">特別なファイル形式を知る</h2>

<p>ご存知の通り、LookML のファイル形式は <code>.lkml</code> です。</p>

<p>LookML 開発が続くと <code>.model.lkml</code> や <code>.view.lkml</code> などが増えていきますが、この中で唯一意味を持つのが <code>.model.lkml</code> です<sup id="fnref:1"><a href="#fn:1" rel="footnote">1</a></sup>。その他のファイル形式は整理のために自由に作ることが出来ます。</p>

<p>例えば <code>feedmatic.model.lkml</code> を作ると、<code>feedmatic</code> というモデルが定義されます。<code>https://{{your looker domain}}/projects</code> で確認できます。<code>all_media.view.lkml</code> を作っても、何かが作られるわけではありません。</p>

<p>以上の知識を持った上で、公式ドキュメントを読むと理解が深まるかもしれません。</p>

<p><iframe src="https://hatenablog-parts.com/embed?url=https%3A%2F%2Fdocs.looker.com%2Fja%2Fdata-modeling%2Flearning-lookml%2Flookml-terms-and-concepts" title="LookMLの用語と概念" class="embed-card embed-webcard" scrolling="no" frameborder="0" style="display: block; width: 100%; height: 155px; max-width: 500px; margin: 10px 0px;"></iframe></p>

<h2 id="最近使っているディレクトリ構造">最近使っているディレクトリ構造</h2>

<p>こんな感じです。それぞれ解説していきます。</p>

<pre class="code" data-lang="" data-unlink>bigquery
├── spreadsheet1
│   ├── define.json
│   └── schema.json
└── spreadsheet2
    ├── define.json
    └── schema.json
model1.model.lkml
explores
├── corp
│   ├── base.explore.lkml
│   ├── name1.explore.lkml
│   └── name2.explore.lkml
├── explore1.explore.lkml
└── explore2.explore.lkml
views
├── corp
│   ├── base.view.lkml
│   ├── name1.view.lkml
│   └── name2.view.lkml
├── view1.view.lkml
└── view2.view.lkml
tests
└── model1
    ├── corp
    │   ├── name1.test.lkml
    │   └── name2.test.lkml
    ├── explore1.test.lkml
    └── explore2.test.lkml
manifest.lkml</pre>


<h3 id="bigquery">bigquery/</h3>

<p>いきなり LookML 関係ありません。💦</p>

<p>BigQuery はデータソースに Google スプレッドシートを指定でき、そのスキーマ定義はコード化することが出来ます。</p>

<p>コード化することで変更履歴を Git で管理できますし、BigQuery CLI を使って簡単に Dataset や Table を作ったり、削除したりが出来ます。</p>

<pre class="code" data-lang="" data-unlink>$ bq mk spreadsheet1
$ bq mk --external_table_definition=./define.json spreadsheet1.gsheet
$ bq rm -r spreadsheet1</pre>


<p>破壊的な変更をする時は、バージョン名を付けた Dataset を新規作成し、LookML から参照先を変えます。こうすることで、本番環境に影響を与えずに開発することが出来ます。</p>

<pre class="code" data-lang="" data-unlink>$ bq mk spreadsheet1_v2
$ bq mk --external_table_definition=./define.json spreadsheet1_v2.gsheet</pre>


<p>スキーマ定義は公式ドキュメントをご覧下さい。需要があればそんな記事を書きます。</p>

<p><iframe src="https://hatenablog-parts.com/embed?url=https%3A%2F%2Fcloud.google.com%2Fconfig-connector%2Fdocs%2Freference%2Fresource-docs%2Fbigquery%2Fbigquerytable%3Fhl%3Dja" title="BigQueryTable  |  Config Connector Documentation  |  Google Cloud" class="embed-card embed-webcard" scrolling="no" frameborder="0" style="display: block; width: 100%; height: 155px; max-width: 500px; margin: 10px 0px;"></iframe></p>

<p>他の Dataset は ETL ツール<sup id="fnref:2"><a href="#fn:2" rel="footnote">2</a></sup>が作るためコード化はしていません。</p>

<h3 id="model1modellkml">model1.model.lkml</h3>

<p>中心となるこのファイルは軽いです。本当にこの程度しか書いていません。</p>

<pre class="code" data-lang="" data-unlink>connection: &#34;docs_bigquery_db&#34;

include: &#34;/explores/**/*.explore&#34;
include: &#34;/tests/model1/**/*.test&#34;

named_value_format: jpy_0 {
  value_format: &#34;\¥#,##0&#34;
}

named_value_format: jpy_1 {
  value_format: &#34;\¥#,##0.0&#34;
}

# for test
access_grant: can_view_explores_for_tests {
  user_attribute: view_explores_for_tests
  allowed_values: [&#34;yes&#34;]
}</pre>


<p>必要な定義は <code>connection</code> と <code>include</code> だけです。</p>

<p>include 対象を全ての <code>.explore.lkml</code> と、このモデルに関連するテスト（<code>tests/feedmatic/</code> 以下全ての <code>.test.lkml</code>）だけにしていることがポイントです。つまり <code>.model.lkml</code> は <code>.explore.lkml</code> と自分の <code>.test.lkml</code> しか知りません。</p>

<p>あとは蛇足で、<code>named_value_format</code> と、<a href="/entry/2021/08/30/150000">前回紹介したテスト</a>に必要な <code>access_grant</code> だけです。</p>

<h3 id="explores">explores/</h3>

<p>1 つの explore を 1 つのファイルに定義しています。</p>

<p><code>explores/explore1.explore.lkml</code> はこのように書いています。<code>.explore.lkml</code> は <code>.view.lkml</code> しか知りません。</p>

<pre class="code" data-lang="" data-unlink>include: &#34;/views/**/*.view&#34;

explore: explore1 {
  # ...
}</pre>


<p>紆余曲折あり、<code>explores/corp/name1.explore.lkml</code> のような取引先ごとの explore もあります。</p>

<p>基本となる <code>explores/corp/base.explore.lkml</code> はこのような定義です。ファイル名と explore 名を変えていることがポイントです。Ruby の慣習を参考にしました。</p>

<pre class="code" data-lang="" data-unlink>explore: corp_base {
  extension: required
  # ...
}</pre>


<p><code>corp_base</code> explore を継承する、各取引先の explore はこのような定義です。</p>

<pre class="code" data-lang="" data-unlink>include: &#34;./base.explore&#34;
include: &#34;/views/**/*.view&#34;

explore: corp_name1 {
  extends: [corp_base]
  # ...
}</pre>


<h3 id="views">views/</h3>

<p>view も explore と同様に、1 view 1 ファイルに定義しています。</p>

<p><code>views/view1.view.lkml</code> です。<code>.view.lkml</code> は <code>.model.lkml</code>, <code>.explore.lkml</code>, <code>.test.lkml</code> の誰も知りません。</p>

<pre class="code" data-lang="" data-unlink>view: view1 {
  # ...
}</pre>


<p>取引先ごとの view も同じです。<code>views/corp/base.view.lkml</code> はこんな感じで、</p>

<pre class="code" data-lang="" data-unlink>view: corp_base {
  extension: required
  # ...
}</pre>


<p>継承先の <code>views/corp/name1.view.lkml</code> はこんな感じです。</p>

<pre class="code" data-lang="" data-unlink>include: &#34;./base.view&#34;

view: corp_name1 {
  extends: [corp_base]
  # ...
}</pre>


<h3 id="tests">tests/</h3>

<p>テストはかなり書いており、2021-12-13 現在、184 もあります。</p>

<p>ほぼ explore 単位でファイル分割しています。分割することで、ファイル単位のテストが可能になっています。</p>

<p>こちらのベストプラクティスに従っています。</p>

<p><iframe src="https://hatenablog-parts.com/embed?url=https%3A%2F%2Fcommunity.looker.com%2Flookml-5%2Flookml-data-tests-recommendations-and-best-practices-20815" title="LookML Data Tests: Recommendations and Best Practices | Looker Community" class="embed-card embed-webcard" scrolling="no" frameborder="0" style="display: block; width: 100%; height: 155px; max-width: 500px; margin: 10px 0px;"></iframe></p>

<p>テスト対象はこんな感じです。</p>

<ul>
<li>(1) LookML で特別な実装をしていて、壊れても気づくのが難しそうな実装</li>
<li>(2) <code>primary_key</code> が重複していないか？ null になっていないか？を全ての view に対して</li>
</ul>


<p>(2) は前回詳しく書きました。</p>

<p><iframe src="https://hatenablog-parts.com/embed?url=https%3A%2F%2Fdeveloper.feedforce.jp%2Fentry%2F2021%2F08%2F30%2F150000" title="Looker で Join 先の view の primary_key をいい感じにテストする方法をようやく見つけた - Feedforce Developer Blog" class="embed-card embed-blogcard" scrolling="no" frameborder="0" style="display: block; width: 100%; height: 190px; max-width: 500px; margin: 10px 0px;"></iframe></p>

<p>実行に時間がかかることが悩みで以前こんな Topic を作りましたが、反応ゼロでした。みなさん課題ではないのかしら？💦</p>

<p><iframe src="https://hatenablog-parts.com/embed?url=https%3A%2F%2Fcommunity.looker.com%2Flookml-5%2Fis-it-possible-to-run-tests-in-parallel-28222" title="Is it possible to run tests in parallel? | Looker Community" class="embed-card embed-webcard" scrolling="no" frameborder="0" style="display: block; width: 100%; height: 155px; max-width: 500px; margin: 10px 0px;"></iframe></p>

<p><code>primary_key</code> は壊れた時に気づくのが難しく、LookML 開発者が私だけということもあるため、機械的に全ての <code>primary_key</code> をテスト出来るようにしています。ただ、全テストは結構時間がかかるので、日に 1 回くらいの頻度で手動実行しています。CI したい...。</p>

<h3 id="manifestlkml">manifest.lkml</h3>

<p>ディレクトリ構造とは関係ありませんが、manifest.lkml についても触れておきましょう。</p>

<p><code>bigquery/</code> の項で書いたとおり、テーブル定義に破壊的な変更を加える時は <code>dataset_v2</code> のように Dataset 名にゆるふわバージョンを付けています。つまり割とカジュアルに Dataset 名が変わります。</p>

<p>そのため、このように manifest.lkml で全ての Dataset 名を定義しています<sup id="fnref:3"><a href="#fn:3" rel="footnote">3</a></sup>。Dataset 名は複数箇所で使われ得るためです。</p>

<pre class="code" data-lang="" data-unlink>constant: table_name1  { value: &#34;`table1_v2.gsheet`&#34; }
constant: table_name2  { value: &#34;`table2.view`&#34; }</pre>


<p>利用例です。</p>

<pre class="code" data-lang="" data-unlink>sql_table_name: @{table_name1} ;;</pre>


<h2 id="まとめ">まとめ</h2>

<p>現在 LookML 開発で使っているディレクトリ構造を紹介しました。中規模くらいまでの LookML プロジェクトには使える実感があります。</p>

<p>ただ、最近はファイル数が多くなってきて、<code>.view.lkml</code> を追加した時に変更する <code>.explore.lkml</code> と <code>.test.lkml</code> の距離が遠く、実装しづらい課題があります。</p>

<p>Refinements を使えば解決できるのだろうか、もっと再利用性のあるコードにしたいなど、悩みは尽きないです。</p>

<p>こちらの記事は読んで手も動かしたのですが、巨大なファイルを分割する、Blocks のようなライブラリをカスタマイズする（？）、以外の使い方を見いだせていません。</p>

<p><iframe src="https://hatenablog-parts.com/embed?url=https%3A%2F%2Fcommunity.looker.com%2F%25E3%2582%25B3%25E3%2583%25A9%25E3%2583%25A0-103%2Frefinements%25E3%2582%2592%25E4%25BD%25BF%25E3%2581%25A3%25E3%2581%25A6lookml%25E3%2581%25AE%25E3%2582%25B3%25E3%2583%25BC%25E3%2583%2589%25E3%2582%2592%25E6%2595%25B4%25E7%2590%2586%25E3%2581%2599%25E3%2582%258B-18809" title="Refinementsを使ってLookMLのコードを整理する | Looker Community" class="embed-card embed-webcard" scrolling="no" frameborder="0" style="display: block; width: 100%; height: 155px; max-width: 500px; margin: 10px 0px;"></iframe></p>

<p>皆さんのディレクトリ構造も是非教えて下さい！</p>

<h2 id="2021-12-29-追記">2021-12-29 追記</h2>

<p><a href="https://community.looker.com/lookml-5/what-is-the-looker-recommended-folder-structure-for-lookml-development-28826">What is the looker recommended folder structure for LookML development ? | Looker Community</a></p>

<p>Looker Community にもお悩みの方がいらっしゃいました。返信している Dawid さんはよくお見かけする方で、かなりの熟練者だと思います。</p>

<p>そんな彼も、今回私が書いた記事のような物理的な構造が良いのか、論理的な構造が良いのか、未だに試行錯誤しているようです。</p>

<p>始めは物理的なディレクトリ構造から始めて、徐々に変化しながら論理的な構造に近づくのかもしれません。その頃にはステージに応じたベストプラクティスが出ていると良いですね。</p>
<div class="footnotes">
<hr/>
<ol>
<li id="fn:1">
<p>正確に書くと <code>manifest.lkml</code> や <code>.strings.json</code> などもありますが、一旦考えなくて良いと思います。<a href="#fnref:1" rev="footnote">&#8617;</a></p></li>
<li id="fn:2">
<p><a href="https://funnel.io/">Funnel.io</a> を使っています。<a href="#fnref:2" rev="footnote">&#8617;</a></p></li>
<li id="fn:3">
<p>1 行で書いているのはソートしやすくするためです。<a href="#fnref:3" rev="footnote">&#8617;</a></p></li>
</ol>
</div>

]]></description>
            <enclosure url="https://cdn-ak.f.st-hatena.com/images/fotolife/m/masutaka26/20201023/20201023184859.png" length="0" type="image/png"/>
        </item>
        <item>
            <title><![CDATA[『論理が伝わる　世界標準の「書く技術」』を読んだ]]></title>
            <link>https://masutaka.net/2021-11-29-1/</link>
            <guid>https://masutaka.net/2021-11-29-1/</guid>
            <pubDate>Mon, 29 Nov 2021 00:00:00 GMT</pubDate>
            <description><![CDATA[職場の同僚が勧めていたので遅ればせながら読みました。私が 20 年近くかけてたどり着いた技術（未だに不完全です）を、この本で習得出来る人が羨ましいです。
 仕事で少しでも文章を書く人全てにオススメします。ブログを書く人にもオススメできます。反対に、物語を書くための技術ではありません。
欧米では論理的な文章はパラグラフを使って書くそうです。パラグラフで書けば各パラグラフの先頭文をつまみ食いする、流し読みが出来ます。副次効果として、速読出来る文章になります。もちろんじっくり読むことも出来ます。論理的な文章は物語などと違って、関係者以外は流し読みしたいことが多いですからね。
特筆すべきことは、この本自体がパラグラフで書かれていることです。流し読みできます。しました。
パラグラフを適切に使っていれば、文字どおり見た目が良くなると感じてきました。良いメールやブログを書けた時は、見た目に惚れ惚れして何度も眺めたものです。
社内の日報や手順書、インシデントレポートなどの文書に目を向けると、なんでも箇条書きにされていることが多い印象です。関係性がないものが羅列されており、すごくネストしていることもあります。
パラグラフで書けば良いのにと、よく思ってきましたが、今まで説得するすべがありませんでした。これからは「この本読んで」で良さそうです。私もこれから意識的にこの本の技術を使います。
プログラミングにも通じそうです。悪いプログラムは全部読まないと理解できませんが、良いプログラムは先頭の一文（interface）を読めば何となく理解できます。
同じ著者のプレゼン版もあり、Kindle 版は 330 円割引だったので積みました。いつか読もう。あかん&hellip;。
 ]]></description>
        </item>
        <item>
            <title><![CDATA[サービス側にメールアドレスを公開しない方法を調べた（Firefox Relay や 1Password + Fastmail のお話）]]></title>
            <link>https://masutaka.net/2021-11-17-1/</link>
            <guid>https://masutaka.net/2021-11-17-1/</guid>
            <pubDate>Wed, 17 Nov 2021 00:00:00 GMT</pubDate>
            <description><![CDATA[[2021-08-07-1] にデフォルトブラウザを Firefox に変えて、3 ヶ月くらい続いている。
昔と違って、基本的な使い勝手や見た目は Chrome と違いがない。当たり前だけど Chrome と比べて良い点も悪い点もある。総合的に割と良い選択をしたと思っている。※ 変化できないことやロックインされることを、最近極端に恐れるようになった事情あり。
なにかの通知で Firefox Monitor から、自分のメールアドレスやパスワードの流出を確認できることを知った。1Password でも出来るやつね。
その Firefox Monitor 経由で Firefox Relay も知った。リリース当時のニュースは見ていたと思うので、「思い出した」が正確だと思うけど。
無料でアカウント作成時に使える捨てメアドを自動生成して本来のメールアドレスを守る「Firefox Relay」レビュー - GIGAZINE ということで、せっかくなので軽く調べてみた。流れで、類似サービスである 1Password+Fastmail や Apple のやつも。
Firefox Relay https://relay.firefox.com 無料だと 5 つまでランダムなメールアドレスを作れる。
日曜日はそれ以上作れなかったので、ベータリリースから 1 年以上経ってまだ正式リリースされてないんだ？と改めてログインして確認したら、Premium⁩ プランが現れていた・・・！
PayPal 払いの $0.99⁩/month。本格的に使うとなるとロックインされるのは確か。さてどう判断するか。
メールエイリアスを 5 つ作ったから Premium プランが現れたのか、ログイン後数日経ったから現れたのか。どっちだろう？
オフィシャルで Add-on があるので、割と簡単に作れそう。
Firefox Relay – 🦊 Firefox (ja) 向け拡張機能を入手 追記(2021-11-18):
なんとびっくり！このタイミングでの正式リリースでした。メールエイリアスのドメインも relay.firefox.com から mozmail.com に変わってた。
Firefox上でサービス登録用の捨てメアドを無限に自動生成して管理してくれる「Firefox Relay Premium」が登場 - GIGAZINE 1Password + Fastmail https://1password.]]></description>
        </item>
        <item>
            <title><![CDATA[Shopifyの埋め込みアプリにメニューをつける方法]]></title>
            <link>https://rewired.cloud/shopify-app-navigation-menu/</link>
            <guid>https://rewired.cloud/shopify-app-navigation-menu/</guid>
            <pubDate>Sun, 07 Nov 2021 23:20:54 GMT</pubDate>
            <description><![CDATA[<p><img src="https://rewired.cloud/wp-content/uploads/2021/11/211108_appmenu_TITLE-520x300.png" class="webfeedsFeaturedVisual" width="520" height="300" /></p>こんにちは、mashabow です。LINE で CRM を実現する Shopify アプリ「ソーシャルPLUS」の、フロントエンド開発を担当しています。 アプリに機能が増えてくると、埋め込みアプリ（マーチャントの方に触 ... ]]></description>
        </item>
        <item>
            <title><![CDATA[GitHub Packages を使ってプライベート gem を社内限定で公開した]]></title>
            <link>https://developer.feedforce.jp/entry/2021/11/05/095050</link>
            <guid>https://developer.feedforce.jp/entry/2021/11/05/095050</guid>
            <pubDate>Fri, 05 Nov 2021 00:50:50 GMT</pubDate>
            <description><![CDATA[<p>こんにちは、<a href="http://blog.hatena.ne.jp/daido1976/" class="hatena-id-icon"><img src="https://cdn.profile-image.st-hatena.com/users/daido1976/profile.png" width="16" height="16" alt="" class="hatena-id-icon">id:daido1976</a> です。</p>

<p>先日 GitHub Packages を使ってプライベート gem を社内限定で公開したので、その方法をご紹介します。</p>

<ul class="table-of-contents">
    <li><a href="#GitHub-Packages-とは">GitHub Packages とは</a></li>
    <li><a href="#既存のプライベート-gem-と-GitHub-Packages-との違い">既存のプライベート gem と GitHub Packages との違い</a></li>
    <li><a href="#GitHub-Packages-を使ってプライベート-gem-を社内限定で公開する">GitHub Packages を使ってプライベート gem を社内限定で公開する</a><ul>
            <li><a href="#gem-をリリースPublishする方法">gem をリリース（Publish）する方法</a><ul>
                    <li><a href="#ローカルからリリースする">ローカルからリリースする</a></li>
                    <li><a href="#CI-からリリースする">CI からリリースする</a></li>
                </ul>
            </li>
            <li><a href="#各環境へのインストール方法">各環境へのインストール方法</a><ul>
                    <li><a href="#ローカルや本番環境でのインストール">ローカルや本番環境でのインストール</a></li>
                    <li><a href="#Dependabot-でのインストール">Dependabot でのインストール</a></li>
                </ul>
            </li>
        </ul>
    </li>
    <li><a href="#関連記事">関連記事</a></li>
</ul>

<h2 id="GitHub-Packages-とは">GitHub Packages とは</h2>

<p><iframe src="https://hatenablog-parts.com/embed?url=https%3A%2F%2Fgithub.co.jp%2Ffeatures%2Fpackages" title="Packages" class="embed-card embed-webcard" scrolling="no" frameborder="0" style="display: block; width: 100%; height: 155px; max-width: 500px; margin: 10px 0px;"></iframe><cite class="hatena-citation"><a href="https://github.co.jp/features/packages">github.co.jp</a></cite></p>

<p>GitHub Packages はライブラリ（パッケージ）のホスティングサービスです。</p>

<p>Ruby の場合 <code>https://rubygems.org</code> の代わりに <code>https://rubygems.pkg.github.com</code> に公開するイメージで、認証には GitHub の personal access token などを使います。</p>

<h2 id="既存のプライベート-gem-と-GitHub-Packages-との違い">既存のプライベート gem と GitHub Packages との違い</h2>

<p>既存のプライベート gem は主に git のタグやブランチを指定する方法が用いられますが、以下のようにいくつかの問題があります。</p>

<pre class="code lang-ruby" data-lang="ruby" data-unlink><span class="synComment"># main ブランチの先端を使うのは再現性がない（ブランチ指定した場合も同じ）</span>
gem <span class="synSpecial">'</span><span class="synConstant">my_rubygem</span><span class="synSpecial">'</span>, <span class="synConstant">github</span>: <span class="synSpecial">'</span><span class="synConstant">my_name/my_rubygem</span><span class="synSpecial">'</span>
<span class="synComment"># タグを指定しても書き換えられる可能性がある</span>
gem <span class="synSpecial">'</span><span class="synConstant">my_rubygem</span><span class="synSpecial">'</span>, <span class="synConstant">github</span>: <span class="synSpecial">'</span><span class="synConstant">my_name/my_rubygem</span><span class="synSpecial">'</span>, <span class="synConstant">tag</span>: <span class="synSpecial">'</span><span class="synConstant">v1.0.0</span><span class="synSpecial">'</span>
<span class="synComment"># コミットの参照を指定するのはシンプルに見づらい</span>
gem <span class="synSpecial">'</span><span class="synConstant">my_rubygem</span><span class="synSpecial">'</span>, <span class="synConstant">github</span>: <span class="synSpecial">'</span><span class="synConstant">my_name/my_rubygem</span><span class="synSpecial">'</span>, <span class="synConstant">ref</span>: <span class="synSpecial">'</span><span class="synConstant">4aded</span><span class="synSpecial">'</span>
</pre>


<p>GitHub Packages は <code>rubygems.org</code> と同じように、バージョン指定が明確かつ一度リリースしたバージョンは変更できないので安全です。</p>

<h2 id="GitHub-Packages-を使ってプライベート-gem-を社内限定で公開する">GitHub Packages を使ってプライベート gem を社内限定で公開する</h2>

<p>ここからは実際に GitHub Packages を使ってプライベート gem を社内限定で公開する方法（主にリリースとインストールの仕方）を説明していきます。</p>

<p>今回は Organization は <code>feedforce</code>、gem の名前は <code>socialplus-rails</code> という想定です。</p>

<p>日本語版のドキュメントは文章やサンプルコードが古いケースがあるので、以下の英語版ドキュメントを参照した方が良いです。</p>

<p><a href="https://docs.github.com/en/packages/working-with-a-github-packages-registry/working-with-the-rubygems-registry">Working with the RubyGems registry - GitHub Docs</a></p>

<p>認証に使う personal access token の権限については以下のドキュメントが詳しいです。</p>

<p><a href="https://docs.github.com/en/packages/learn-github-packages/about-permissions-for-github-packages">About permissions for GitHub Packages - GitHub Docs</a></p>

<h3 id="gem-をリリースPublishする方法">gem をリリース（Publish）する方法</h3>

<p>まずは作成した gem をリリースする方法について説明します。</p>

<h4 id="ローカルからリリースする">ローカルからリリースする</h4>

<p>まとめると以下のような手順になります。</p>

<ol>
<li><code>〜/.gem/credentials</code> に GitHub の personal access token を追加

<ul>
<li>権限は <code>repo</code> と <code>write:packages</code> が必要</li>
</ul>
</li>
<li><code>$ gem build socialplus-rails.gemspec</code> で gem をビルド

<ul>
<li><code>SocialplusRails::VERSION</code> は <code>0.1.0</code> を想定</li>
</ul>
</li>
<li><code>$ gem push --key github --host https://rubygems.pkg.github.com/feedforce socialplus-rails-0.1.0.gem</code> で push する

<ul>
<li>この時に personal access token の権限が足りないとエラーになる</li>
</ul>
</li>
</ol>


<p>Push が成功すると <a href="https://github.com/orgs/feedforce/packages">https://github.com/orgs/feedforce/packages</a> のような Packages のページに反映されます 👏</p>

<p><span itemscope itemtype="http://schema.org/Photograph"><img src="https://cdn-ak.f.st-hatena.com/images/fotolife/d/daido1976/20211104/20211104160709.png" alt="f:id:daido1976:20211104160709p:plain" width="1200" height="492" loading="lazy" title="" class="hatena-fotolife" itemprop="image"></span></p>

<h4 id="CI-からリリースする">CI からリリースする</h4>

<p>gem のソースコードを更新した際に毎回上記のようにローカルからリリースしても良いのですが、できれば CI からリリースできるように仕組み化したいものです。</p>

<p>CircleCI の場合、以下のような <code>release</code> コマンドを定義して、リリース用のブランチがマージされた時に実行されるようにすれば OK です。</p>

<pre class="code lang-yaml" data-lang="yaml" data-unlink><span class="synComment"># .circleci/config.yml</span>

<span class="synIdentifier">version</span><span class="synSpecial">:</span> <span class="synConstant">2.1</span>
<span class="synComment"># ...</span>
<span class="synIdentifier">commands</span><span class="synSpecial">:</span>
  <span class="synIdentifier">release</span><span class="synSpecial">:</span>
    <span class="synIdentifier">description</span><span class="synSpecial">:</span> Release to GitHub Packages
    <span class="synIdentifier">steps</span><span class="synSpecial">:</span>
      <span class="synStatement">- </span><span class="synIdentifier">run</span><span class="synSpecial">:</span>
          <span class="synIdentifier">name</span><span class="synSpecial">:</span> Create GitHub Packages Credentials
          <span class="synIdentifier">command</span><span class="synSpecial">:</span> |
            mkdir ~/.gem || <span class="synConstant">true</span>
            echo -e <span class="synConstant">&quot;---</span><span class="synSpecial">\n</span><span class="synConstant">:github: Bearer ${GITHUB_ACCESS_TOKEN}&quot;</span> &gt; ~/.gem/credentials
            chmod <span class="synConstant">0600</span> ~/.gem/credentials
      <span class="synStatement">- </span><span class="synIdentifier">run</span><span class="synSpecial">:</span>
          <span class="synIdentifier">name</span><span class="synSpecial">:</span> Release Gem
          <span class="synIdentifier">command</span><span class="synSpecial">:</span> |
            gem build socialplus-rails.gemspec
            release_version=$(find . -name <span class="synConstant">&quot;socialplus-rails-*.gem&quot;</span> | sed -E <span class="synConstant">'s/\.\/socialplus-rails-(.*).gem/\1/'</span>)
            gem push --key github --host https://rubygems.pkg.github.com/feedforce <span class="synConstant">&quot;socialplus-rails-${release_version}.gem&quot;</span>
</pre>


<h3 id="各環境へのインストール方法">各環境へのインストール方法</h3>

<p>ここからはリリースした gem を各環境へインストールする方法を説明します。</p>

<p>Gemfile への記述は以下のようにします。<a href="#f-ff64d70e" name="fn-ff64d70e" title="See. https://docs.github.com/en/packages/working-with-a-github-packages-registry/working-with-the-rubygems-registry#installing-a-package">*1</a></p>

<pre class="code lang-ruby" data-lang="ruby" data-unlink><span class="synComment"># Gemfile</span>
source <span class="synSpecial">'</span><span class="synConstant">https://rubygems.pkg.github.com/feedforce</span><span class="synSpecial">'</span> <span class="synStatement">do</span>
  gem <span class="synSpecial">'</span><span class="synConstant">socialplus-rails</span><span class="synSpecial">'</span>, <span class="synSpecial">'</span><span class="synConstant">0.1.0</span><span class="synSpecial">'</span>
<span class="synStatement">end</span>
</pre>


<h4 id="ローカルや本番環境でのインストール">ローカルや本番環境でのインストール</h4>

<p>以下のように <code>bundle config</code> コマンドで認証情報をセットしてから <code>bundle install</code> を行います。<a href="#f-54facd0e" name="fn-54facd0e" title="環境変数を利用して認証情報をセットすることもできるようです">*2</a></p>

<pre class="code lang-sh" data-lang="sh" data-unlink><span class="synComment"># `USERNAME:TOKEN` は `{GitHubのユーザ名}:{Personal access token}` という形です（例: `daido1976:7axxx`）</span>
$ bundle config https://rubygems.pkg.github.com/feedforce USERNAME:TOKEN
$ bundle install
</pre>


<p>※ インストール時の認証に利用する personal access token には <code>read:packages</code> の権限のみあれば OK です</p>

<h4 id="Dependabot-でのインストール">Dependabot でのインストール</h4>

<p>GitHub Packages のプライベート gem をDependabot の更新対象にしたい場合は追加の設定が必要です。</p>

<p>以下のように設定ファイルで GitHub Packages の認証情報を渡す準備をします。<a href="#f-52f8882d" name="fn-52f8882d" title="See. https://docs.github.com/en/code-security/supply-chain-security/keeping-your-dependencies-updated-automatically/configuration-options-for-dependency-updates#rubygems-server">*3</a></p>

<pre class="code lang-yaml" data-lang="yaml" data-unlink><span class="synComment"># .github/dependabot.yml</span>

<span class="synIdentifier">version</span><span class="synSpecial">:</span> <span class="synConstant">2</span>
<span class="synIdentifier">registries</span><span class="synSpecial">:</span>
  <span class="synIdentifier">rubygems-pkg-github</span><span class="synSpecial">:</span>
    <span class="synIdentifier">type</span><span class="synSpecial">:</span> rubygems-server
    <span class="synIdentifier">url</span><span class="synSpecial">:</span> https://rubygems.pkg.github.com
   <span class="synComment"> # BUNDLE_GITHUB_TOKEN の値は `USERNAME:TOKEN` という形式です</span>
    <span class="synIdentifier">token</span><span class="synSpecial">:</span> <span class="synConstant">&quot;${{secrets.BUNDLE_GITHUB_TOKEN}}&quot;</span>
</pre>


<p>以下ドキュメントを参考に GitHub Packages の認証情報（今回の例なら <code>BUNDLE_GITHUB_TOKEN</code>）を Dependabot 用の Secret として登録すれば完了です。<a href="#f-e337a98d" name="fn-e337a98d" title="Secret はリポジトリ単位とオーガニゼーション単位のどちらでも設定できます">*4</a></p>

<p><a href="https://docs.github.com/en/code-security/supply-chain-security/keeping-your-dependencies-updated-automatically/managing-encrypted-secrets-for-dependabot">Managing encrypted secrets for Dependabot - GitHub Docs</a></p>

<h2 id="関連記事">関連記事</h2>

<ul>
<li><a href="https://tech.pepabo.com/2021/09/10/in-house-rubygems-registry-with-ghes-github-packages/">GitHub Enterprise Server&#x306E;GitHub Packages&#x3067;&#x793E;&#x5185;&#x7528;gem&#x3092;&#x30DB;&#x30B9;&#x30C8;&#x3059;&#x308B; - &#x30DA;&#x30D1;&#x30DC;&#x30C6;&#x30C3;&#x30AF;&#x30D6;&#x30ED;&#x30B0;</a></li>
<li><a href="https://tech.actindi.net/2020/06/12/180000">GitHub Actions&#x3092;&#x5229;&#x7528;&#x3057;&#x3066;gem&#x3092;GitHub Packages&#x306B;&#x516C;&#x958B;&#x3059;&#x308B; - &#x30A2;&#x30AF;&#x30C8;&#x30A4;&#x30F3;&#x30C7;&#x30A3;&#x958B;&#x767A;&#x8005;&#x30D6;&#x30ED;&#x30B0;</a></li>
<li><a href="https://chocoby.com/blog/2021/09/21/dependabot-github-packages-gem">Dependabot &#x3067; GitHub Packages &#x306B;&#x516C;&#x958B;&#x3057;&#x305F; Gem &#x306E;&#x30A2;&#x30C3;&#x30D7;&#x30C7;&#x30FC;&#x30C8;&#x3092;&#x30C1;&#x30A7;&#x30C3;&#x30AF;&#x3059;&#x308B; - &#x6687;&#x4EBA;&#x3058;&#x3083;&#x306A;&#x3044;</a></li>
</ul>

<div class="footnote">
<p class="footnote"><a href="#fn-ff64d70e" name="f-ff64d70e" class="footnote-number">*1</a><span class="footnote-delimiter">:</span><span class="footnote-text">See. <a href="https://docs.github.com/en/packages/working-with-a-github-packages-registry/working-with-the-rubygems-registry#installing-a-package">https://docs.github.com/en/packages/working-with-a-github-packages-registry/working-with-the-rubygems-registry#installing-a-package</a></span></p>
<p class="footnote"><a href="#fn-54facd0e" name="f-54facd0e" class="footnote-number">*2</a><span class="footnote-delimiter">:</span><span class="footnote-text"><a href="https://tech.pepabo.com/2021/09/10/in-house-rubygems-registry-with-ghes-github-packages/#%E3%83%AC%E3%82%B8%E3%82%B9%E3%83%88%E3%83%AA%E3%81%8B%E3%82%89%E3%81%AEgem%E3%81%AE%E3%83%80%E3%82%A6%E3%83%B3%E3%83%AD%E3%83%BC%E3%83%89">環境変数を利用して認証情報をセットすることもできるようです</a></span></p>
<p class="footnote"><a href="#fn-52f8882d" name="f-52f8882d" class="footnote-number">*3</a><span class="footnote-delimiter">:</span><span class="footnote-text">See. <a href="https://docs.github.com/en/code-security/supply-chain-security/keeping-your-dependencies-updated-automatically/configuration-options-for-dependency-updates#rubygems-server">https://docs.github.com/en/code-security/supply-chain-security/keeping-your-dependencies-updated-automatically/configuration-options-for-dependency-updates#rubygems-server</a></span></p>
<p class="footnote"><a href="#fn-e337a98d" name="f-e337a98d" class="footnote-number">*4</a><span class="footnote-delimiter">:</span><span class="footnote-text">Secret はリポジトリ単位とオーガニゼーション単位のどちらでも設定できます</span></p>
</div>]]></description>
            <enclosure url="https://cdn-ak.f.st-hatena.com/images/fotolife/d/daido1976/20211104/20211104160709.png" length="0" type="image/png"/>
        </item>
        <item>
            <title><![CDATA[ニチレイフーズダイレクトが自分に合うかも]]></title>
            <link>https://masutaka.net/2021-10-27-1/</link>
            <guid>https://masutaka.net/2021-10-27-1/</guid>
            <pubDate>Wed, 27 Oct 2021 00:00:00 GMT</pubDate>
            <description><![CDATA[ニチレイフーズダイレクト が良い感じです。
loading...
   if (localStorage.getItem("pref-theme") === "light") { const elements = document.getElementsByClassName('twitter-tweet'); for (let i = 0; i  loading...
   if (localStorage.getItem("pref-theme") === "light") { const elements = document.getElementsByClassName('twitter-tweet'); for (let i = 0; i  loading...
   if (localStorage.getItem("pref-theme") === "light") { const elements = document.getElementsByClassName('twitter-tweet'); for (let i = 0; i  サービスを知ったのはこのサイトです。
ひとり暮らしの僕が「宅食＆食材宅配サービス」を15個試したら、自炊の“苦手度”が下がった 一食あたり 700 円ちょっと。全体的に油控えめなのか、薄味なのか、自分に合います。
容器が薄いので冷凍庫を有効に使えるのも良い感じです。うちの中型冷蔵庫だと 8 食は余裕で入りました。]]></description>
        </item>
        <item>
            <title><![CDATA[OAuth の state パラメータに JWT を使ってステートレスにする]]></title>
            <link>https://developer.feedforce.jp/entry/2021/10/25/120000</link>
            <guid>https://developer.feedforce.jp/entry/2021/10/25/120000</guid>
            <pubDate>Mon, 25 Oct 2021 03:00:00 GMT</pubDate>
            <description><![CDATA[<p><a href="https://socialplus.jp/">ソーシャルPLUS</a> の <a href="http://blog.hatena.ne.jp/mashabow/" class="hatena-id-icon"><img src="https://cdn.profile-image.st-hatena.com/users/mashabow/profile.png" width="16" height="16" alt="" class="hatena-id-icon">id:mashabow</a> です。今回は、個人で開発している Slack アプリ <a href="https://github.com/mashabow/slack-rota">Rota</a> を OAuth に対応させたときに、へーっと思った話の紹介です。</p>

<p>ちなみにこの Rota は、指定した曜日・時間が来るたびに、ローテーションを順次お知らせしてくれる Slack アプリです。</p>

<p><span itemscope itemtype="http://schema.org/Photograph"><img src="https://cdn-ak.f.st-hatena.com/images/fotolife/m/mashabow/20211025/20211025113857.png" alt="f:id:mashabow:20211025113857p:plain" width="1338" height="242" loading="lazy" title="" class="hatena-fotolife" itemprop="image"></span></p>

<p><iframe src="https://hatenablog-parts.com/embed?url=https%3A%2F%2Fgithub.com%2Fmashabow%2Fslack-rota" title="GitHub - mashabow/slack-rota: 日々のローテーションをお知らせする Slack アプリ" class="embed-card embed-webcard" scrolling="no" frameborder="0" style="display: block; width: 100%; height: 155px; max-width: 500px; margin: 10px 0px;"></iframe><cite class="hatena-citation"><a href="https://github.com/mashabow/slack-rota">github.com</a></cite></p>

<h2>経緯</h2>

<p>この Slack アプリ Rota は、Slack 公式が出している <a href="https://slack.dev/bolt-js/ja-jp/tutorial/getting-started">Bolt</a> というフレームワークを使っています。</p>

<p><iframe src="https://hatenablog-parts.com/embed?url=https%3A%2F%2Fslack.dev%2Fbolt-js%2Fja-jp%2Ftutorial%2Fgetting-started" title="Slack | Bolt for JavaScript" class="embed-card embed-webcard" scrolling="no" frameborder="0" style="display: block; width: 100%; height: 155px; max-width: 500px; margin: 10px 0px;"></iframe><cite class="hatena-citation"><a href="https://slack.dev/bolt-js/ja-jp/tutorial/getting-started">slack.dev</a></cite></p>

<p>Slack アプリを任意のワークスペースにインストールしてもらうためには、OAuth に対応させる必要があります。今回は Bolt のおかげで<a href="https://github.com/mashabow/slack-rota/issues/43">比較的簡単に対応できた</a>のですが、その中で出てきた <code>stateSecret</code> というオプションがどう使われるのか、いまいちわかりません。Bolt の<a href="https://slack.dev/bolt-js/ja-jp/reference#%E3%83%AC%E3%82%B7%E3%83%BC%E3%83%90%E3%83%BC%E3%82%AA%E3%83%97%E3%82%B7%E3%83%A7%E3%83%B3">リファレンス</a>には</p>

<blockquote><p>  CSRF 攻撃を防ぐために OAuth の設定時に渡すことができる、推奨のパラメーター（文字列）。</p></blockquote>

<p>と説明があるので、OAuth の <code>state</code> パラメータに関係がありそうですが……。</p>

<p>というわけで、気になって中身をのぞいてみました。</p>

<h2><code>state</code> パラメータのおさらい</h2>

<p>その前に、そもそも OAuth の <code>state</code> パラメータって何？という方もいるかもしれません。こちらの記事で非常にわかりやすく図解されているのですが、要は <strong>CSRF 対策</strong>のためのものです。</p>

<p><iframe src="https://hatenablog-parts.com/embed?url=https%3A%2F%2Ftech-lab.sios.jp%2Farchives%2F8492" title="OAuthやOpenID Connectで使われるstateパラメーターについて | SIOS Tech. Lab" class="embed-card embed-webcard" scrolling="no" frameborder="0" style="display: block; width: 100%; height: 155px; max-width: 500px; margin: 10px 0px;"></iframe><cite class="hatena-citation"><a href="https://tech-lab.sios.jp/archives/8492">tech-lab.sios.jp</a></cite></p>

<p>この記事に倣って図解すると、Slack アプリの場合はこういう関係ですね。</p>

<p><span itemscope itemtype="http://schema.org/Photograph"><img src="https://cdn-ak.f.st-hatena.com/images/fotolife/m/mashabow/20211022/20211022222035.png" alt="f:id:mashabow:20211022222035p:plain" width="2000" height="1120" loading="lazy" title="" class="hatena-fotolife" itemprop="image"></span></p>

<p><code>state</code> パラメータを使うと 3. の前でチェックが入るため、このような CSRF 攻撃を防ぐことができます。</p>

<p><span itemscope itemtype="http://schema.org/Photograph"><img src="https://cdn-ak.f.st-hatena.com/images/fotolife/m/mashabow/20211022/20211022222117.png" alt="f:id:mashabow:20211022222117p:plain" width="2000" height="1121" loading="lazy" title="" class="hatena-fotolife" itemprop="image"></span></p>

<h2>保存をしない state store…？</h2>

<p>話を戻して、Bolt の <code>stateSecret</code> オプションを追いかけてみます。Bolt の OAuth まわりの処理は、<a href="https://github.com/slackapi/node-slack-sdk/tree/%40slack/oauth%402.3.0/packages/oauth">@slack/oauth</a> というライブラリで実装されています。@slack/oauth の README を読んでみると、<a href="https://github.com/slackapi/node-slack-sdk/blob/%40slack/oauth%402.3.0/packages/oauth/README.md#using-a-custom-state-store">Using a custom state store</a> に説明がありました。</p>

<blockquote><p>A state store handles generating the OAuth <code>state</code> parameter in the installation URL for a given set of options, and verifying the <code>state</code> in the OAuth callback and returning those same options.</p></blockquote>

<p>ふむふむ。ここまでは上で確認したような話ですね。<code>state</code> パラメータを生成しておいて、コールバック（認可画面からのリダイレクト）のときにその値が正しいかチェックする。そして、@slack/oauth が <em>options</em> と呼んでいるオブジェクト（Slack ワークスペースの ID やスコープの情報が入る）を返します。このようなインターフェイスを、state store と言っているようです。</p>

<p><span itemscope itemtype="http://schema.org/Photograph"><img src="https://cdn-ak.f.st-hatena.com/images/fotolife/m/mashabow/20211022/20211022222224.png" alt="f:id:mashabow:20211022222224p:plain" width="2000" height="1120" loading="lazy" title="" class="hatena-fotolife" itemprop="image"></span></p>

<p>次に行きます。state store のデフォルトの実装である <code>ClearStateStore</code>の説明です。</p>

<blockquote><p>The default state store, <code>ClearStateStore</code>, does not use any storage. Instead, it signs the options (using the <code>stateSecret</code>) and encodes them along with a signature into <code>state</code>. Later during the OAuth callback, it verifies the signature.</p></blockquote>

<p>なんと。state store という名前から「どこかに <code>state</code> パラメータと options の組を保存するんだろうな」と思っていたんですが、<code>ClearStateStore</code> では<strong>どちらも保存していない</strong>ようです。</p>

<h2>JWT を使った <code>ClearStateStore</code></h2>

<p>では、<code>ClearStateStore</code> の実装を見てみましょう。以下に出てくる <code>sign()</code> と <code>verify()</code> は、JWT を扱うための npm ライブラリ <a href="https://www.npmjs.com/package/jsonwebtoken">jsonwebtoken</a> の関数です。</p>

<p><a href="https://github.com/slackapi/node-slack-sdk/blob/%40slack/oauth%402.3.0/packages/oauth/src/index.ts#L17-L36">node-slack-sdk/index.ts at @slack/oauth@2.3.0 &middot; slackapi/node-slack-sdk &middot; GitHub</a></p>

<pre class="code lang-typescript" data-lang="typescript" data-unlink><span class="synStatement">public</span> <span class="synStatement">async</span> generateStateParam<span class="synStatement">(</span>installOptions: InstallURLOptions<span class="synStatement">,</span> now: <span class="synSpecial">Date</span><span class="synStatement">)</span>: <span class="synSpecial">Promise</span><span class="synStatement">&lt;</span><span class="synType">string</span><span class="synStatement">&gt;</span> <span class="synIdentifier">{</span>
  <span class="synStatement">return</span> sign<span class="synStatement">(</span><span class="synIdentifier">{</span> installOptions<span class="synStatement">,</span> now: now.toJSON<span class="synStatement">()</span> <span class="synIdentifier">}</span><span class="synStatement">,</span> <span class="synIdentifier">this</span>.stateSecret<span class="synStatement">);</span>
<span class="synIdentifier">}</span>
</pre>


<p>認可画面に遷移する際、<code>generateStateParam()</code> で  <code>state</code> パラメータを生成します。ここでは、options （上のコードでは <code>installOptions</code>）と時刻をペイロードとする JWT を生成して、返しています。冒頭で「なにこれ？」と思った <strong><code>stateSecret</code> は、JWT の署名に使う共通鍵</strong>だったんですね。</p>

<p><span itemscope itemtype="http://schema.org/Photograph"><img src="https://cdn-ak.f.st-hatena.com/images/fotolife/m/mashabow/20211022/20211022222430.png" alt="f:id:mashabow:20211022222430p:plain" width="2000" height="1120" loading="lazy" title="" class="hatena-fotolife" itemprop="image"></span></p>

<pre class="code lang-typescript" data-lang="typescript" data-unlink><span class="synStatement">public</span> <span class="synStatement">async</span> verifyStateParam<span class="synStatement">(</span>_now: <span class="synSpecial">Date</span><span class="synStatement">,</span> state: <span class="synType">string</span><span class="synStatement">)</span>: <span class="synSpecial">Promise</span><span class="synStatement">&lt;</span>InstallURLOptions<span class="synStatement">&gt;</span> <span class="synIdentifier">{</span>
  <span class="synComment">// decode the state using the secret</span>
  <span class="synType">const</span> decoded: StateObj <span class="synStatement">=</span> verify<span class="synStatement">(</span>state<span class="synStatement">,</span> <span class="synIdentifier">this</span>.stateSecret<span class="synStatement">)</span> <span class="synStatement">as</span> StateObj<span class="synStatement">;</span>

  <span class="synComment">// return installOptions</span>
  <span class="synStatement">return</span> decoded.installOptions<span class="synStatement">;</span>
<span class="synIdentifier">}</span>
</pre>


<p>認可後のリダイレクトでは、<code>verifyStateParam()</code> で  <code>state</code> パラメータを検証します。ここでは、共通鍵 <code>stateSecret</code> で JWT の署名を検証しています。ペイロードが改竄されていればここでエラーになり、処理が中断されます。検証が通ったら、ペイロードの options を取り出して返します。</p>

<p><span itemscope itemtype="http://schema.org/Photograph"><img src="https://cdn-ak.f.st-hatena.com/images/fotolife/m/mashabow/20211022/20211022222510.png" alt="f:id:mashabow:20211022222510p:plain" width="2000" height="1120" loading="lazy" title="" class="hatena-fotolife" itemprop="image"></span></p>

<h2>CSRF 対策になっていることを確認</h2>

<p>この <code>ClearStateStore</code> で本当に CSRF 攻撃が防げるのか、確認してみましょう。</p>

<p>まずは通常の攻撃シナリオ。悪い人が自分のワークスペースで認可を行い、リダイレクト URL を取得します（1.）。このリダイレクト URL には、<code>state</code> パラメータが含まれています。このリダイレクト URL をそのまま A さんに送りつけ、 A さんに踏ませる（2.）とどうなるでしょうか？</p>

<p><span itemscope itemtype="http://schema.org/Photograph"><img src="https://cdn-ak.f.st-hatena.com/images/fotolife/m/mashabow/20211022/20211022222531.png" alt="f:id:mashabow:20211022222531p:plain" width="2000" height="1121" loading="lazy" title="" class="hatena-fotolife" itemprop="image"></span></p>

<p>Slack アプリの <code>ClearStateStore</code> は、まず  <code>state</code> パラメータの有効性を検証します（3.）。JWT の署名を検証するわけですが、このシナリオでは、悪い人の JWT は何も改竄されていません。したがって、<strong>JWT は有効</strong>だと判断され、処理は続行されます。次に、JWT から options を取り出し（4.）、これを使って Slack からアクセストークンを取得します（5.）。Slack からは悪い人のアクセストークンが返ってきますが、Slack アプリは<strong>それを悪い人のアクセストークンだとして（正しく）格納</strong>します（6.）。したがって、A さんには何も影響ありません。</p>

<p>別のシナリオも検討してみます。先ほどのシナリオで見たように、Slack アプリは JWT から options を取り出し、アクセストークンを取得・格納していました。JWT の中の options を書き換えれば、悪い人のアクセストークンを A さんのものとして格納できないでしょうか？</p>

<p><span itemscope itemtype="http://schema.org/Photograph"><img src="https://cdn-ak.f.st-hatena.com/images/fotolife/m/mashabow/20211022/20211022222547.png" alt="f:id:mashabow:20211022222547p:plain" width="2000" height="1120" loading="lazy" title="" class="hatena-fotolife" itemprop="image"></span></p>

<p>はい、これは JWT の署名検証で引っかかるので、不可能ですね。</p>

<p>以上のことから、一般的な <code>state</code> パラメータの実装と同じく、<code>ClearStateStore</code> でも CSRF 対策になっていることがわかりました。</p>

<h2>まとめ</h2>

<p>というわけで、JWT をうまいこと使うと、<code>state</code> パラメータを OAuth クライアントに保存しておく必要がなくなります。通常の実装だと、生成した <code>state</code> パラメータを適当な key-value ストアなどに保存しますが、これが不要になるのは楽ですね。ステートレスになるので FaaS との相性もよくなります（とはいえもちろん、取得したアクセストークンはどこかに保存しておく必要があります）。</p>

<p>今回は Bolt を使って Slack アプリのインストール処理を実装しましたが、OAuth まわりの詳細についてはほとんど意識することなく実現でき、かなり楽ちんで快適でした。よく考えられてますね。</p>

<h2>おまけ</h2>

<p>ソーシャルPLUS では、現在フロントエンドエンジニア・バックエンドエンジニアを募集中です。Shopify アプリのリリースや LINE 社との業務提携を経て、やりたいことがますます盛りだくさんな状況です。</p>

<p><iframe src="https://hatenablog-parts.com/embed?url=https%3A%2F%2Fopen.talentio.com%2F1%2Fc%2Ffeedforce%2Frequisitions%2Fdetail%2F21755" title="フロントエンドエンジニア【Shopifyアプリ開発/ID連携サービス/React/TypeScript】 / 株式会社フィードフォース" class="embed-card embed-webcard" scrolling="no" frameborder="0" style="display: block; width: 100%; height: 155px; max-width: 500px; margin: 10px 0px;"></iframe><cite class="hatena-citation"><a href="https://open.talentio.com/1/c/feedforce/requisitions/detail/21755">open.talentio.com</a></cite></p>

<p><iframe src="https://hatenablog-parts.com/embed?url=https%3A%2F%2Fopen.talentio.com%2F1%2Fc%2Ffeedforce%2Frequisitions%2Fdetail%2F21802" title="Railsエンジニア【Shopify App開発/ID連携サービス】 / 株式会社フィードフォース" class="embed-card embed-webcard" scrolling="no" frameborder="0" style="display: block; width: 100%; height: 155px; max-width: 500px; margin: 10px 0px;"></iframe><cite class="hatena-citation"><a href="https://open.talentio.com/1/c/feedforce/requisitions/detail/21802">open.talentio.com</a></cite></p>

<p>ご興味ありましたら、カジュアル面談にぜひどうぞ！</p>
]]></description>
            <enclosure url="https://cdn-ak.f.st-hatena.com/images/fotolife/m/mashabow/20211022/20211022222547.png" length="0" type="image/png"/>
        </item>
        <item>
            <title><![CDATA[RIZIN LANDMARK vol.1 の時間帯に発生した U-NEXT の障害体験メモ #RIZIN_LANDMARK #RIZIN_LANDMARK01]]></title>
            <link>https://masutaka.net/2021-10-03-1/</link>
            <guid>https://masutaka.net/2021-10-03-1/</guid>
            <pubDate>Sun, 03 Oct 2021 00:00:00 GMT</pubDate>
            <description><![CDATA[RIZIN 初の、配信に特化した格闘技イベント RIZIN LANDMARK vol.1 が 2021-10-02（土）19:00 から開催されるはずだった。ちなみに 4 試合で ¥3,800 と、オトクな料金設定ではない。
その時間に合わせて 18:45 頃に PC ブラウザで https://video.unext.jp/ にアクセスしたら、しばらく待たされた後 502 Bad Gateway が返ってきた。
U-NEXT 公式アカウントからはお知らせがあった。https://video.unext.jp/ 自体にアクセス出来ないため、サイト上でのお知らせは確認できず。
loading...
   if (localStorage.getItem("pref-theme") === "light") { const elements = document.getElementsByClassName('twitter-tweet'); for (let i = 0; i  しばらく待ってもアクセスできなかった。スマホアプリならアクセスできるとの情報を目にしたため Android 版をダウンロードしたところ、エラーにはならず静止画を見られた。幸い Chromecast を持っていたため、テレビにキャストして大画面には出来た。
PC ブラウザだと相変わらず 502 Bad Gateway が発生。その後 404 Not Found のケースや、CloudFront が返す nginx らしきエラー文言も確認できた。スマホアプリはしばらくお待ちくださいメッセージと BGM が流れるのみ。
自分の経験上、Chromecast でスマホアプリをテレビにキャストするより、PC をテレビに HDMI 接続するほうが安定性が高いので、見られはしたが不安要素はあった。]]></description>
        </item>
        <item>
            <title><![CDATA[【Shopify】Liquid 上で「現在の日付から◯日後」を表現する方法]]></title>
            <link>https://rewired.cloud/how-to-add-days-to-date-shopify/</link>
            <guid>https://rewired.cloud/how-to-add-days-to-date-shopify/</guid>
            <pubDate>Fri, 01 Oct 2021 01:05:52 GMT</pubDate>
            <description><![CDATA[<p><img src="https://rewired.cloud/wp-content/uploads/2021/09/211001_day-to-date_title-520x300.jpg" class="webfeedsFeaturedVisual" width="520" height="300" /></p>　 「◯日後」を表現したいシーンは多い 製品ページや顧客へのメールに配送予定日を表示したり、レッスンや新商品の予約可能日を自動的に変更するなど、Eコマースのインターフェースで「今から◯日後」を表現したいシーンは多いと思い ... ]]></description>
        </item>
        <item>
            <title><![CDATA[Terraform を使わずに Route 53 の DNS レコードを管理する方法を調べてみた]]></title>
            <link>https://masutaka.net/2021-09-27-1/</link>
            <guid>https://masutaka.net/2021-09-27-1/</guid>
            <pubDate>Mon, 27 Sep 2021 00:00:00 GMT</pubDate>
            <description><![CDATA[この１年半はインフラエンジニアっぽい仕事から離れて、LookML 開発者として仕事をしています。自分としてはジョブチェンジで、モチベーションはめっちゃ高いです。うぉー！🔥
LookML 開発に出来るだけ専念できるように配慮して頂いたり、自分でもそう心がけていますが、それでも DNS レコードの登録依頼や、その他諸々の相談がちょいちょいあります。
DNS レコードは Route 53 で管理しています。言われるがままに登録していけば悩みはないのですが、何のために登録するのか？や、登録されているこのレコードは何だ？とか考え始めると地味に悩ましいものがあります。
今の仕事では Terraform は使っていないし、このためだけに Terraform を導入するのはオーバー過ぎます。
Terraform を導入したらアップデートし続けない選択肢はありませんが、変なエラーでハマって何時間も浪費することがあります。今の仕事の性質上、それは絶対に避けたいので、Terraform 以外で Route 53 の DNS レコードを管理する方法を調べてみました。
SAM で管理できるか？ つまり CloudFormation 管理下に置くか？ということです。
Terraform ではツールのアップデートに追随する必要がありますが、SAM なら serverless-application-model のバージョンに追随すれば良いだけです。最新は 2016/10/31 なので、あまり考えなくて良さそうです。
  結論としては、止めたほうが良いと思いました。良くも悪くも CloudFormation 管理下に置かれるので、Route 53 Console 上で気軽に変更するとコードと乖離してしまいます。そのため常に SAM で変更する必要があります。もっとカジュアルに管理したいのです。
ちなみにこんな template.yaml で DNS レコードを作れます。ただ更新がうまく出来なかった。それ以上は調べてない&hellip;。
AWSTemplateFormatVersion: &#39;2010-09-09&#39; Transform: AWS::Serverless-2016-10-31 Description: Managed by AWS SAM Resources: Hoge: Type: AWS::Route53::RecordSet Properties: HostedZoneId: xxxxxxxxxxxxxx Name: hoge.masutaka.net. Type: TXT TTL: 300 ResourceRecords: - &#39;&#34;abcdefgxyz&#34;&#39; AWS CLI で管理できるか？ そもそもエネルギーを注ぐところではないので、新しいツールは増やしたくないところ。そういう意味では AWS CLI でどこまで出来るかは興味がありました。]]></description>
        </item>
        <item>
            <title><![CDATA[Rubocop Challenger 作者が教えるオススメの使い方。 〜 .rubocop_todo.yml 解消後も消さないで残しておくと良いことがあります！〜]]></title>
            <link>https://ryz310.hateblo.jp/entry/2021/09/24/113000</link>
            <guid>https://ryz310.hateblo.jp/entry/2021/09/24/113000</guid>
            <pubDate>Fri, 24 Sep 2021 02:30:00 GMT</pubDate>
            <description><![CDATA[<p>1 ヶ月も前になってしまいましたが、クラッソーネの <a href="https://twitter.com/yamat47">@yamat47</a> さんが拙作の <a href="https://github.com/ryz310/rubocop_challenger">rubocop_challenger</a> を使って <code>.rubocop_todo.yml</code> を解消した、というブログを書いて下さいました。</p>

<p>かつての自分と同じような課題を抱えていた方に自分の gem を役立てて頂けたのは本当に嬉しいです。
ブログ化までして下さった @yamat47 さん、本当にありがとうございます！</p>

<blockquote class="twitter-tweet"><p lang="ja" dir="ltr">今年に入ってからちょっとずつ進めてたRuboCopのTodoとの戦いをまとめて記事にしました！こんな感じの、開発者向けの改善をするのもめちゃ好きです😀<a href="https://t.co/82F6xmAKko">https://t.co/82F6xmAKko</a></p>&mdash; Takuya Yamaguchi (@yamat47) <a href="https://twitter.com/yamat47/status/1427785662602743811?ref_src=twsrc%5Etfw">August 18, 2021</a></blockquote>


<p> <script async src="https://platform.twitter.com/widgets.js" charset="utf-8"></script></p>

<p>また、gem の README では Circle CI を使った方法しか紹介してなかったのですが、<a class="keyword" href="http://d.hatena.ne.jp/keyword/GitHub">GitHub</a> Actions を使った方法についても解説して頂いており、重ね重ね感謝感激です🙏
<a class="keyword" href="http://d.hatena.ne.jp/keyword/GitHub">GitHub</a> の README からもリンク貼らせて頂きました！</p>

<p><iframe src="https://hatenablog-parts.com/embed?url=https%3A%2F%2Fzenn.dev%2Fyamat47%2Farticles%2F219e14ebcf31a1d13ff4" title="RuboCop ChallengerをGitHub Actionsで動かす" class="embed-card embed-webcard" scrolling="no" frameborder="0" style="display: block; width: 100%; height: 155px; max-width: 500px; margin: 10px 0px;"></iframe><cite class="hatena-citation"><a href="https://zenn.dev/yamat47/articles/219e14ebcf31a1d13ff4">zenn.dev</a></cite></p>

<h2>一方で、ひとつ気になったことが。。</h2>

<blockquote><p>自動で解消できるものがなくなって以降はRuboCop Challengerの仕組みが不要になったので、最後は削除してしまいました。</p>

<p><img src="https://tech.crassone.jp/images/posts/resolve-rubocop-todos-step-by-step/good-bye-rubocop-challenger.png" alt="手動で対応した履歴" /></p>

<p>ありがとう、RuboCop Challenger...!!</p></blockquote>

<p>待って！
<strong>Rubocop Challenger は消さないで残しておくと良いことがあります！</strong></p>

<h2>Rubocop Challenger は v2.0.0 から bundle update 機能も兼ね備えています</h2>

<p>本家 RuboCop の gem をアップデートする時、新しく追加された Cop によってエラーが出てしまった、という経験は無いでしょうか？
このエラーの解消が億劫で gem のアップデートを放置してしまっている方もいるかも知れません。</p>

<p>Rubocop Challenger v1.0.0 のテーマは「負債の解消」だったんですが、 v2.0.0 からは「RuboCop との共生」だったりします。</p>

<p>誰にも話したこと無いので今始めて公表しました←</p>

<p>v2.0.0 以上の Rubocop Challenger では最初に RuboCop 関連の gem に対して <code>bundle update</code> を実行するようになっています。</p>

<p>最新の RuboCop にアップデートした状態で Rubocop Challenge を実行するので、新しく追加された Cop に違反したコードがあった場合、その場で即 <code>auto-correct</code> を実行し、<a href="https://github.com/ryz310/my_api_client/pull/616">以下のような PR</a> を作成してくれます。</p>

<p><figure class="figure-image figure-image-fotolife" title="PR1"><span itemscope itemtype="http://schema.org/Photograph"><img src="https://cdn-ak.f.st-hatena.com/images/fotolife/r/ryz310/20210923/20210923205915.png" alt="f:id:ryz310:20210923205915p:plain" width="949" height="388" loading="lazy" title="" class="hatena-fotolife" itemprop="image"></span><figcaption><a class="keyword" href="http://d.hatena.ne.jp/keyword/RSpec">RSpec</a>/ExcessiveDocstringSpacing を修正した PR が作成されました</figcaption></figure>
<figure class="figure-image figure-image-fotolife" title="PR2"><span itemscope itemtype="http://schema.org/Photograph"><img src="https://cdn-ak.f.st-hatena.com/images/fotolife/r/ryz310/20210923/20210923210041.png" alt="f:id:ryz310:20210923210041p:plain" width="1200" height="455" loading="lazy" title="" class="hatena-fotolife" itemprop="image"></span><figcaption>同 PR で <code>rubocop-rspec</code> が v2.4.0 から v2.5.0 にアップデートされています</figcaption></figure></p>

<p>一方 dependabot も <code>rubocop-rspec</code> v2.5.0 の bundle update の PR を作成してくれていますが、こちらは CI の RuboCop チェックでエラーになっています。
RuboCop の CI チェックをパスしないと merge 出来ない設定にしている場合も多いと思いますが、これを修正するのは地味に面倒です。</p>

<p><figure class="figure-image figure-image-fotolife" title="aaa"><span itemscope itemtype="http://schema.org/Photograph"><img src="https://cdn-ak.f.st-hatena.com/images/fotolife/r/ryz310/20210923/20210923210548.png" alt="f:id:ryz310:20210923210548p:plain" width="936" height="364" loading="lazy" title="" class="hatena-fotolife" itemprop="image"></span><span itemscope itemtype="http://schema.org/Photograph"><img src="https://cdn-ak.f.st-hatena.com/images/fotolife/r/ryz310/20210923/20210923210545.png" alt="f:id:ryz310:20210923210545p:plain" width="955" height="291" loading="lazy" title="" class="hatena-fotolife" itemprop="image"></span><figcaption>RuboCop の CI チェックでエラー</figcaption></figure></p>

<p>ちなみに違反したコードが存在しない場合は <a href="https://github.com/ryz310/rubocop_challenger/pull/531">Re-generate .rubocop_todo.yml with RuboCop v1.21.0</a> のような PR が作成され、 <code>bundle update</code> を実行しただけの PR が作成されます。</p>

<p>この機能は地味に便利なので、CI のスケジュール実行を使って週イチくらいで動かすのがオススメの使い方です。</p>

<h2>v2.0.0 以降の RuboCop Challenger は Gemfile に含めない事をオススメします</h2>

<p><code>v2.0.0</code> あたりから RuboCop Challenger を Gemfile に含めて実行すると、他の gem との互換性問題でエラーになるケースを確認しております🙏
現在では以下のように CI での実行時に <code>gem install rubocop_challenger</code> を実行する方法をオススメしております。</p>

<pre class="code lang-yaml" data-lang="yaml" data-unlink><span class="synComment"># .circleci/config.yml</span>
<span class="synIdentifier">version</span><span class="synSpecial">:</span> <span class="synConstant">2</span>

<span class="synIdentifier">jobs</span><span class="synSpecial">:</span>
  <span class="synIdentifier">rubocop_challenge</span><span class="synSpecial">:</span>
    <span class="synIdentifier">docker</span><span class="synSpecial">:</span>
      <span class="synStatement">- </span><span class="synIdentifier">image</span><span class="synSpecial">:</span> circleci/ruby:3.0
    <span class="synIdentifier">working_directory</span><span class="synSpecial">:</span> ~/repo
    <span class="synIdentifier">steps</span><span class="synSpecial">:</span>
      <span class="synStatement">- </span>checkout
      <span class="synStatement">- </span><span class="synIdentifier">run</span><span class="synSpecial">:</span>
          <span class="synIdentifier">name</span><span class="synSpecial">:</span> Rubocop Challenge
          <span class="synIdentifier">command</span><span class="synSpecial">:</span> |
            gem install rubocop_challenger
            rubocop_challenger go \
              --email=rubocop-challenger@example.com \
              --name=&quot;Rubocop Challenger&quot;

<span class="synIdentifier">workflows</span><span class="synSpecial">:</span>
  <span class="synIdentifier">version</span><span class="synSpecial">:</span> <span class="synConstant">2</span>

  <span class="synIdentifier">nightly</span><span class="synSpecial">:</span>
    <span class="synIdentifier">triggers</span><span class="synSpecial">:</span>
      <span class="synStatement">- </span><span class="synIdentifier">schedule</span><span class="synSpecial">:</span>
          <span class="synIdentifier">cron</span><span class="synSpecial">:</span> <span class="synConstant">&quot;30 23 * * 1,2,3&quot;</span><span class="synComment"> # 8:30am every Tuesday, Wednsday and Thursday (JST)</span>
          <span class="synIdentifier">filters</span><span class="synSpecial">:</span>
            <span class="synIdentifier">branches</span><span class="synSpecial">:</span>
              <span class="synIdentifier">only</span><span class="synSpecial">:</span>
                <span class="synStatement">- </span>master
    <span class="synIdentifier">jobs</span><span class="synSpecial">:</span>
      <span class="synStatement">- </span>rubocop_challenge
</pre>


<p>こちらは完全に自分がやらかしたというか、会社で書いた以下のブログの内容が古いまま更新しなかったため、 <code>Gemfile</code> に <code>rubocop_challenger</code> を入れて使っている方が沢山 (?) いるかも知れません。
<a class="keyword" href="http://d.hatena.ne.jp/keyword/GitHub">GitHub</a> の README ですら間違っていたので、さっき慌てて修正しました。。</p>

<p><iframe src="https://hatenablog-parts.com/embed?url=https%3A%2F%2Fdeveloper.feedforce.jp%2Fentry%2F2018%2F12%2F05%2F140000" title="まだ .rubocop_todo.yml で消耗してるの？ - Feedforce Developer Blog" class="embed-card embed-blogcard" scrolling="no" frameborder="0" style="display: block; width: 100%; height: 190px; max-width: 500px; margin: 10px 0px;"></iframe><cite class="hatena-citation"><a href="https://developer.feedforce.jp/entry/2018/12/05/140000">developer.feedforce.jp</a></cite></p>

<p>古い方法で使ってしまった皆さん、本当にすみません。。</p>

<p><code>rubocop_challenger</code> を Gemfile に含めるのが<code>.rubocop_todo.yml</code> 解消後にアンインストールしたくなる理由の一つだと思うので、これで使い続ける人が増えてくれると嬉しいです🙏</p>

<h2>安全な auto-correct かどうかが分かります</h2>

<p>特にアナウンスしていなかった気がするのでついでにご紹介しておくと、最新の Rubocop Challenger では「安全な auto-correct」かどうかが分かるようになっていて、 PR の本文に以下のような記述が入るようになっています。</p>

<p><figure class="figure-image figure-image-fotolife" title="安全な auto-correct "><span itemscope itemtype="http://schema.org/Photograph"><img src="https://cdn-ak.f.st-hatena.com/images/fotolife/r/ryz310/20210923/20210923215918.png" alt="f:id:ryz310:20210923215918p:plain" width="426" height="156" loading="lazy" title="" class="hatena-fotolife" itemprop="image"></span><figcaption>✅ 安全な auto-correct</figcaption></figure></p>

<p><figure class="figure-image figure-image-fotolife" title="安全でない auto-correct"><span itemscope itemtype="http://schema.org/Photograph"><img src="https://cdn-ak.f.st-hatena.com/images/fotolife/r/ryz310/20210923/20210923220846.png" alt="f:id:ryz310:20210923220846p:plain" width="427" height="168" loading="lazy" title="" class="hatena-fotolife" itemprop="image"></span><figcaption>⚠️ 安全でない auto-correct</figcaption></figure></p>

<p>RuboCop 公式によると「安全な auto-correct」の場合、元の<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%BD%A1%BC%A5%B9%A5%B3%A1%BC%A5%C9">ソースコード</a>が壊れる心配は無いとのことなので、 PR merge する際の判断材料にして頂ければ。</p>
]]></description>
            <enclosure url="https://cdn-ak.f.st-hatena.com/images/fotolife/r/ryz310/20210923/20210923205915.png" length="0" type="image/png"/>
        </item>
        <item>
            <title><![CDATA[MAU, DAU も計測できるようになった redis-objects-daily-counter v0.3.0]]></title>
            <link>https://ryz310.hateblo.jp/entry/2021/09/23/203804</link>
            <guid>https://ryz310.hateblo.jp/entry/2021/09/23/203804</guid>
            <pubDate>Thu, 23 Sep 2021 11:38:04 GMT</pubDate>
            <description><![CDATA[<p>前回のブログで <a href="https://github.com/ryz310/redis-objects-daily-counter">redis-objects-daily-counter</a> という gem を作ったという話をしました。</p>

<p><iframe src="https://hatenablog-parts.com/embed?url=https%3A%2F%2Fryz310.hateblo.jp%2Fentry%2F2021%2F09%2F20%2F172054" title="Redis::Objects を使ったサービス改善と新しい gem を作ったお話 - 逃げる8回で会心の一撃" class="embed-card embed-blogcard" scrolling="no" frameborder="0" style="display: block; width: 100%; height: 190px; max-width: 500px; margin: 10px 0px;"></iframe><cite class="hatena-citation"><a href="https://ryz310.hateblo.jp/entry/2021/09/20/172054">ryz310.hateblo.jp</a></cite></p>

<p>今回は <code>v0.3.0</code> をリリースしたのでそちらのご紹介です。</p>

<h2>【おさらい】redis-objects-daily-counter はどういう gem なのか</h2>

<p><a href="https://github.com/nateware/redis-objects">redis-objects</a> gem の拡張として作られており、日付の変更毎に新しい  counter を定義してくれる <code>daily_counter</code> 機能を提供する gem です。</p>

<p>例えば以下のような <code>Homepage</code> という class で <code>daily_counter :pv</code> という定義をします。</p>

<pre class="code lang-ruby" data-lang="ruby" data-unlink><span class="synPreProc">class</span> <span class="synType">Homepage</span>
  <span class="synPreProc">include</span> <span class="synType">Redis</span>::<span class="synType">Objects</span>

  daily_counter <span class="synConstant">:pv</span>, <span class="synConstant">expireat</span>: -&gt; { <span class="synType">Time</span>.now + <span class="synConstant">2_678_400</span> } <span class="synComment"># about a month</span>

  <span class="synPreProc">def</span> <span class="synIdentifier">id</span>
    <span class="synConstant">1</span>
  <span class="synPreProc">end</span>
<span class="synPreProc">end</span>
</pre>


<p>すると以下のように <code>#pv</code> という<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%A4%A5%F3%A5%B9%A5%BF%A5%F3%A5%B9">インスタンス</a>メソッドが使えるようになります。
これは <code>redis-objects</code> gem の <code>counter</code> の拡張であり、 <code>#increment</code> や <code>#decrement</code> というメソッドで Redis 上の値を更新することが可能です。</p>

<pre class="code lang-ruby" data-lang="ruby" data-unlink><span class="synComment"># 2021-04-01</span>
homepage = <span class="synType">Homepage</span>.new
homepage.id <span class="synComment"># 1</span>

homepage.pv.increment
homepage.pv.increment
homepage.pv.increment
puts homepage.pv.value <span class="synComment"># 3</span>
</pre>


<p><code>daily_counter</code> が <code>counter</code> とどのように違うかというと、日付が変わるとRedis 上の Key が変化するという点です。</p>

<pre class="code lang-ruby" data-lang="ruby" data-unlink><span class="synComment"># 2021-04-02 (next day)</span>
puts homepage.pv.value <span class="synComment"># 0</span>
homepage.pv.increment
homepage.pv.increment
puts homepage.pv.value <span class="synComment"># 2</span>
</pre>


<p>これは、 <code>daily_counter</code> が以下のようなルールに則って Redis の Key にアクセスするように振る舞うためです。</p>

<pre class="code" data-lang="" data-unlink>model_name:id:field_name:yyyy-mm-dd</pre>


<p>なお、この時の<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%BF%A5%A4%A5%E0%A5%BE%A1%BC%A5%F3">タイムゾーン</a>は実行中の <a class="keyword" href="http://d.hatena.ne.jp/keyword/Ruby">Ruby</a> プロセスの標準<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%BF%A5%A4%A5%E0%A5%BE%A1%BC%A5%F3">タイムゾーン</a>に従いますが、 <a class="keyword" href="http://d.hatena.ne.jp/keyword/Rails">Rails</a> 上で実行した場合は <code>application.rb</code> で指定した<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%BF%A5%A4%A5%E0%A5%BE%A1%BC%A5%F3">タイムゾーン</a>に従います。</p>

<p>日付が変わった後も、前日までの Key-<a class="keyword" href="http://d.hatena.ne.jp/keyword/Value">Value</a> は削除していないので、 <code>#range</code> や <code>#[]</code> や <code>#at</code> というメソッドでアクセスすることが可能です。
ちなみに <code>#range</code> や <code>#[]</code> では値が返却されますが、 <code>#at</code> では <code>Redis::Counter</code> <a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%A4%A5%F3%A5%B9%A5%BF%A5%F3%A5%B9">インスタンス</a>が返却されます。
<code>v0.2.0</code> までは <code>#[]</code> と <code>#at</code> は同じ挙動でしたが、 <code>v0.3.0</code> からそういう実装に変わりました 🙏</p>

<pre class="code lang-ruby" data-lang="ruby" data-unlink><span class="synComment"># 2021-04-01</span>
homepage.pv.increment(<span class="synConstant">3</span>)

<span class="synComment"># 2021-04-02 (next day)</span>
homepage.pv.increment(<span class="synConstant">2</span>)

<span class="synComment"># 2021-04-03 (next day)</span>
homepage.pv.increment(<span class="synConstant">5</span>)

homepage.pv[<span class="synType">Date</span>.new(<span class="synConstant">2021</span>, <span class="synConstant">4</span>, <span class="synConstant">1</span>)] <span class="synComment"># =&gt; 3</span>
homepage.pv[<span class="synType">Date</span>.new(<span class="synConstant">2021</span>, <span class="synConstant">4</span>, <span class="synConstant">1</span>), <span class="synConstant">3</span>] <span class="synComment"># =&gt; [3, 2, 5]</span>
homepage.pv[<span class="synType">Date</span>.new(<span class="synConstant">2021</span>, <span class="synConstant">4</span>, <span class="synConstant">1</span>)..<span class="synType">Date</span>.new(<span class="synConstant">2021</span>, <span class="synConstant">4</span>, <span class="synConstant">2</span>)] <span class="synComment"># =&gt; [3, 2]</span>

homepage.pv.delete_at(<span class="synType">Date</span>.new(<span class="synConstant">2021</span>, <span class="synConstant">4</span>, <span class="synConstant">1</span>))
homepage.pv.range(<span class="synType">Date</span>.new(<span class="synConstant">2021</span>, <span class="synConstant">4</span>, <span class="synConstant">1</span>), <span class="synType">Date</span>.new(<span class="synConstant">2021</span>, <span class="synConstant">4</span>, <span class="synConstant">3</span>)) <span class="synComment"># =&gt; [0, 2, 5]</span>
homepage.pv.at(<span class="synType">Date</span>.new(<span class="synConstant">2021</span>, <span class="synConstant">4</span>, <span class="synConstant">2</span>)) <span class="synComment"># =&gt; #&lt;Redis::Counter key=&quot;homepage:1:pv:2021-04-02&quot;&gt;</span>
homepage.pv.at(<span class="synType">Date</span>.new(<span class="synConstant">2021</span>, <span class="synConstant">4</span>, <span class="synConstant">2</span>)).value <span class="synComment"># 2</span>
</pre>


<h2>v0.3.0 で追加された機能とは</h2>

<p><code>daily_counter</code> に加えて <code>daily_set</code> が追加されました。
こちらは <code>redis-objects</code> gem の <code>set</code>に <code>daily-</code> 機能を追加したものになります。</p>

<pre class="code lang-ruby" data-lang="ruby" data-unlink><span class="synPreProc">class</span> <span class="synType">Homepage</span>
  <span class="synPreProc">include</span> <span class="synType">Redis</span>::<span class="synType">Objects</span>

  daily_set <span class="synConstant">:dau</span>, <span class="synConstant">expireat</span>: -&gt; { <span class="synType">Time</span>.now + <span class="synConstant">2_678_400</span> } <span class="synComment"># about a month</span>

  <span class="synPreProc">def</span> <span class="synIdentifier">id</span>
    <span class="synConstant">1</span>
  <span class="synPreProc">end</span>
<span class="synPreProc">end</span>

homepage.dau &lt;&lt; <span class="synSpecial">'</span><span class="synConstant">user1</span><span class="synSpecial">'</span>
homepage.dau &lt;&lt; <span class="synSpecial">'</span><span class="synConstant">user2</span><span class="synSpecial">'</span>
homepage.dau &lt;&lt; <span class="synSpecial">'</span><span class="synConstant">user1</span><span class="synSpecial">'</span> <span class="synComment"># dup ignored</span>
puts homepage.dau.members <span class="synComment"># ['user1', 'user2']</span>
puts homepage.dau.length <span class="synComment"># 2</span>
puts homepage.dau.count <span class="synComment"># alias of #length</span>
</pre>


<p><code>set</code> は重複を受け付けない <code>Array</code> と考えて良いと思います。
上記の例を見てもらうと分かりますが <code>user1</code> を 2 回追加しても <code>#members</code> による取得結果には 1 つしか含まれていません。</p>

<p>これを使って何が実現できるかというと、 DAU (Daily Active User) の計測です。
ログインしたユーザーの ID を <code>daily_set</code> で定義した変数に追加していくことで、その日アクティブだったユーザー一覧とその数を知ることが出来ます。</p>

<pre class="code lang-ruby" data-lang="ruby" data-unlink><span class="synComment"># 2021-04-01</span>
homepage.dau.merge(<span class="synSpecial">'</span><span class="synConstant">user1</span><span class="synSpecial">'</span>, <span class="synSpecial">'</span><span class="synConstant">user2</span><span class="synSpecial">'</span>)
puts homepage.dau.members <span class="synComment"># ['user1', 'user2']</span>

<span class="synComment"># 2021-04-02 (next day)</span>
puts homepage.dau.members <span class="synComment"># []</span>

homepage.dau.merge(<span class="synSpecial">'</span><span class="synConstant">user2</span><span class="synSpecial">'</span>, <span class="synSpecial">'</span><span class="synConstant">user3</span><span class="synSpecial">'</span>)
puts homepage.dau.members <span class="synComment"># ['user2', 'user3']</span>

<span class="synComment"># 2021-04-03 (next day)</span>
homepage.dau.merge(<span class="synSpecial">'</span><span class="synConstant">user4</span><span class="synSpecial">'</span>)

homepage.dau.at(<span class="synType">Date</span>.new(<span class="synConstant">2021</span>, <span class="synConstant">4</span>, <span class="synConstant">2</span>)) <span class="synComment"># =&gt; #&lt;Redis::Set key=&quot;homepage:1:dau:2021-04-02&quot;&gt;</span>
homepage.dau.at(<span class="synType">Date</span>.new(<span class="synConstant">2021</span>, <span class="synConstant">4</span>, <span class="synConstant">2</span>)).members <span class="synComment"># =&gt; ['user2', 'user3']</span>
homepage.dau.at(<span class="synType">Date</span>.new(<span class="synConstant">2021</span>, <span class="synConstant">4</span>, <span class="synConstant">2</span>)).length <span class="synComment"># =&gt; 2</span>
</pre>


<p><code>#range</code> や <code>#[]</code> を使う事で指定した期間内の値を結合することも出来ます。
これによって DAU 目的で記録した値から MAU を求めることも可能です。</p>

<pre class="code lang-ruby" data-lang="ruby" data-unlink>homepage.dau[<span class="synType">Date</span>.new(<span class="synConstant">2021</span>, <span class="synConstant">4</span>, <span class="synConstant">1</span>)] <span class="synComment"># =&gt; ['user1', 'user2']</span>
homepage.dau[<span class="synType">Date</span>.new(<span class="synConstant">2021</span>, <span class="synConstant">4</span>, <span class="synConstant">1</span>), <span class="synConstant">3</span>] <span class="synComment"># =&gt; ['user1', 'user2', 'user3', 'user4']</span>
homepage.dau[<span class="synType">Date</span>.new(<span class="synConstant">2021</span>, <span class="synConstant">4</span>, <span class="synConstant">1</span>)..<span class="synType">Date</span>.new(<span class="synConstant">2021</span>, <span class="synConstant">4</span>, <span class="synConstant">2</span>)] <span class="synComment"># =&gt; ['user1', 'user2', 'user3']</span>

homepage.dau.delete_at(<span class="synType">Date</span>.new(<span class="synConstant">2021</span>, <span class="synConstant">4</span>, <span class="synConstant">1</span>))
homepage.dau.range(<span class="synType">Date</span>.new(<span class="synConstant">2021</span>, <span class="synConstant">4</span>, <span class="synConstant">1</span>), <span class="synType">Date</span>.new(<span class="synConstant">2021</span>, <span class="synConstant">4</span>, <span class="synConstant">3</span>)) <span class="synComment"># =&gt; ['user2', 'user3', 'user4']</span>
</pre>


<p><code>#at</code> で一日ずつ値を取得して <a class="keyword" href="http://d.hatena.ne.jp/keyword/Ruby">Ruby</a> の <code>Array#uniq</code> を使っても同じ結果が得られますが、 <code>#range</code> や <code>#[]</code> の方が内部で <a href="https://redis.io/commands/sunion">Redis の <code>SUNION</code></a> を利用するため高速だと思います。</p>

<p>ちなみに <code>#range</code> や <code>#[]</code> の結果は <a class="keyword" href="http://d.hatena.ne.jp/keyword/Ruby">Ruby</a> の Array なので、 <code>#length</code> を使って長さを求める際は実行中のマシンリソースを消費します。
一方 <code>#at</code> では <code>Redis::Set</code> を返しており、 <code>Redis::Set#length</code> は内部で <a href="https://redis.io/commands/scard">Redis の <code>SCARD</code></a> を実行するため、 <code>#length</code> は <code>#at</code> からの方が高速だと思います。
ただし一定期間の値の結合は <code>#range</code> や <code>#[]</code> を使う必要があるので、結局マシンリソースの消費は避けられないですね。。</p>

<p>この辺りの仕様は実装していてかなり頭を悩ませました。なので今後のアップデートで破壊的な変更が入るかも知れません。</p>

<h2><code>monthly_set</code> なども実装してあります</h2>

<p>前回の記事でも紹介したような <code>monthly_counter</code> に相当する <code>monthly_set</code> なども使えます。
MAU, WAU, DAU で使い分けると良いかと思います。</p>

<ul>
<li><code>annual_set</code>

<ul>
<li>Key format: <code>model_name:id:field_name:yyyy</code></li>
<li>Redis is a highly volatile key-<a class="keyword" href="http://d.hatena.ne.jp/keyword/value">value</a> store, so I don't recommend using it.</li>
</ul>
</li>
<li><code>monthly_set</code>

<ul>
<li>Key format: <code>model_name:id:field_name:yyyy-mm</code></li>
</ul>
</li>
<li><code>weekly_set</code>

<ul>
<li>Key format: <code>model_name:id:field_name:yyyyWw</code></li>
</ul>
</li>
<li><code>daily_set</code>

<ul>
<li>Key format: <code>model_name:id:field_name:yyyy-mm-dd</code></li>
</ul>
</li>
<li><code>hourly_set</code>

<ul>
<li>Key format: <code>model_name:id:field_name:yyyy-mm-ddThh</code></li>
</ul>
</li>
<li><code>minutely_set</code>

<ul>
<li>Key format: <code>model_name:id:field_name:yyyy-mm-ddThh:mi</code></li>
</ul>
</li>
</ul>

]]></description>
            <enclosure url="https://cdn.blog.st-hatena.com/images/theme/og-image-1500.png" length="0" type="image/png"/>
        </item>
        <item>
            <title><![CDATA[Redis::Objects を使ったサービス改善と新しい gem を作ったお話]]></title>
            <link>https://ryz310.hateblo.jp/entry/2021/09/20/172054</link>
            <guid>https://ryz310.hateblo.jp/entry/2021/09/20/172054</guid>
            <pubDate>Mon, 20 Sep 2021 08:20:54 GMT</pubDate>
            <description><![CDATA[<p>半年ぶりくらいに会社の勉強会で発表しました。</p>

<iframe class="speakerdeck-iframe" frameborder="0" src="https://speakerdeck.com/player/58bb74a90a8b444e8607850fc76d8eb7" title="Redis::Objects で遊んでみよう" allowfullscreen="true" mozallowfullscreen="true" webkitallowfullscreen="true" style="border: 0px; background: padding-box padding-box rgba(0, 0, 0, 0.1); margin: 0px; padding: 0px; border-radius: 6px; box-shadow: rgba(0, 0, 0, 0.2) 0px 5px 40px; width: 560px; height: 314px;"></iframe>


<p>Redis::Objects という gem を使って RDS にかかっていた IO 負荷を改善した、という話と、 Redis::Objects を拡張する gem を作ったという話（後述）です。</p>

<p><iframe src="https://hatenablog-parts.com/embed?url=https%3A%2F%2Fgithub.com%2Fryz310%2Fredis-objects-daily-counter" title="GitHub - ryz310/redis-objects-daily-counter: Daily counter within Redis::Objects. Works with any class or ORM." class="embed-card embed-webcard" scrolling="no" frameborder="0" style="display: block; width: 100%; height: 155px; max-width: 500px; margin: 10px 0px;"></iframe><cite class="hatena-citation"><a href="https://github.com/ryz310/redis-objects-daily-counter">github.com</a></cite></p>

<p>Redis を使って DB の負荷を下げる系のお話って 2010 年代にされ尽くした感があって、今更な気もするんですが、一周回って最近聞かない話だなーと思ってます。
フロントエンドエンジニアで最近サーバーサイドも触る機会が増えたような方々にウケが良かった感じがありますね。</p>

<hr />

<p>一方で社内のインフラエンジニアからは Redis ってメンテナンスの手間が掛かって評判悪いですね。
使うだけなら手軽で楽なんですが、<a class="keyword" href="http://d.hatena.ne.jp/keyword/AWS">AWS</a> のアップデートでダウンタイムが発生する時に利用者向けにアナウンスしないといけなかったり。
ダウンタイムと言っても深夜に数秒〜数分なので影響は少ないと思うんですが、<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%A8%A5%F3%A5%BF%A1%BC%A5%D7%A5%E9%A5%A4%A5%BA">エンタープライズ</a>向けのサービスとかやってるとこの辺は厳しいですね。</p>

<p><a href="https://cloud.google.com/blog/ja/products/management-tools/sre-error-budgets-and-maintenance-windows">SRE のエラーバジェットの概念</a> が日本全体に浸透すればソフトウェア開発の生産性は底上げされるんじゃないかと思うのですが、この辺は時間を掛けて少しずつ啓蒙していくしか無いですね。例えば日本の生活インフラ（電気・水道・ガスとか電車とか）ってめっちゃ高水準なので、ソフトウェアの世界でも100％稼働することが当たり前という価値観になってしまうんじゃないかな、と思うのですが、この辺の価値観は表裏一体というか、当たり前と感じているから高品質になる一方で、生産性は下がってしまうという構図だと思っています。</p>

<p><a href="https://www.nic.ad.jp/ja/materials/iw/2017/proceedings/s15/s15-fujisaki.pdf">https://www.nic.ad.jp/ja/materials/iw/2017/proceedings/s15/s15-fujisaki.pdf</a>
<figure class="figure-image figure-image-fotolife" title="SREの信条 (Google)"><span itemscope itemtype="http://schema.org/Photograph"><img src="https://cdn-ak.f.st-hatena.com/images/fotolife/r/ryz310/20210920/20210920165304.png" alt="f:id:ryz310:20210920165304p:plain" width="963" height="527" loading="lazy" title="" class="hatena-fotolife" itemprop="image"></span><figcaption>SREの信条 (<a class="keyword" href="http://d.hatena.ne.jp/keyword/Google">Google</a>)</figcaption></figure></p>

<p>一応メンテナンスの手間、という点では夏頃に <a class="keyword" href="http://d.hatena.ne.jp/keyword/AWS">AWS</a> から <a class="keyword" href="http://d.hatena.ne.jp/keyword/Amazon">Amazon</a> MemoryDB for Redis というフルマネージドな Redis が発表されています。
東京リージョンは未対応で、書き込み速度が遅くなっていたり、料金も若干高くなっていたりしますが、気になるサービスではありますね。</p>

<p><iframe src="https://hatenablog-parts.com/embed?url=https%3A%2F%2Fdev.classmethod.jp%2Farticles%2Faws-release-durable-redis-amazon-memorydb-for-redis%2F" title="Redisに耐久性が加わったAmazon MemoryDB for Redisが登場 | DevelopersIO" class="embed-card embed-webcard" scrolling="no" frameborder="0" style="display: block; width: 100%; height: 155px; max-width: 500px; margin: 10px 0px;"></iframe><cite class="hatena-citation"><a href="https://dev.classmethod.jp/articles/aws-release-durable-redis-amazon-memorydb-for-redis/">dev.classmethod.jp</a></cite></p>

<hr />

<p>さて、この記事のメインは冒頭で触れた Redis::Objects を拡張する gem を作ったよ、という話です。</p>

<p><iframe src="https://hatenablog-parts.com/embed?url=https%3A%2F%2Fgithub.com%2Fryz310%2Fredis-objects-daily-counter" title="GitHub - ryz310/redis-objects-daily-counter: Daily counter within Redis::Objects. Works with any class or ORM." class="embed-card embed-webcard" scrolling="no" frameborder="0" style="display: block; width: 100%; height: 155px; max-width: 500px; margin: 10px 0px;"></iframe><cite class="hatena-citation"><a href="https://github.com/ryz310/redis-objects-daily-counter">github.com</a></cite></p>

<p>発端は Redis::Objects の <code>counter</code> を使ってサービスの効果測定（メール配信数、CV 数、ログイン数など）をしたいなーと考えたことなんですが、効果測定って一定の期間毎に集計して改善した・していないの指標にしたいやつじゃないですか？
<code>counter</code> でカウントアップしつつ、日次の<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%D0%A5%C3%A5%C1%BD%E8%CD%FD">バッチ処理</a>で集計すれば良いんですが、それだとあまり気軽じゃないというか、測定対象となるサービス開発の後、測定ロジックと<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%D0%A5%C3%A5%C1%BD%E8%CD%FD">バッチ処理</a>、保存先の DB テーブル作成までセットで実装しないと実現できないですよね。</p>

<p>これはサクッと実装するには <code>counter</code> が自動で日次で保存先を切り替えてくれれば良さそう、ということで、 <code>redis-objects-daily-counter</code> という gem は <code>daily_counter</code> という日次で保存先を切り替えるカウンター機能を提供します。
Redis::Objects を拡張して作ってあるので、使い方はほぼ同じで、対象としたい Class に <code>include Redis::Objects</code> を追加すると使えるようになります。</p>

<pre class="code lang-ruby" data-lang="ruby" data-unlink><span class="synComment"># Gemfile</span>
gem <span class="synSpecial">'</span><span class="synConstant">redis-objects-daily-counter</span><span class="synSpecial">'</span>
</pre>




<pre class="code lang-ruby" data-lang="ruby" data-unlink><span class="synPreProc">class</span> <span class="synType">Homepage</span>
  <span class="synPreProc">include</span> <span class="synType">Redis</span>::<span class="synType">Objects</span>

  daily_counter <span class="synConstant">:pv</span>, <span class="synConstant">expireat</span>: -&gt; { <span class="synType">Time</span>.now + <span class="synConstant">2_678_400</span> } <span class="synComment"># about a month</span>

  <span class="synPreProc">def</span> <span class="synIdentifier">id</span>
    <span class="synConstant">1</span>
  <span class="synPreProc">end</span>
<span class="synPreProc">end</span>

<span class="synComment"># 2021-04-01</span>
homepage = <span class="synType">Homepage</span>.new
homepage.id <span class="synComment"># 1</span>

homepage.pv.increment
homepage.pv.increment
homepage.pv.increment
puts homepage.pv.value <span class="synComment"># 3</span>

<span class="synComment"># 2021-04-02 (next day)</span>
puts homepage.pv.value <span class="synComment"># 0</span>
homepage.pv.increment
homepage.pv.increment
puts homepage.pv.value <span class="synComment"># 2</span>

start_date = <span class="synType">Date</span>.new(<span class="synConstant">2021</span>, <span class="synConstant">4</span>, <span class="synConstant">1</span>)
end_date = <span class="synType">Date</span>.new(<span class="synConstant">2021</span>, <span class="synConstant">4</span>, <span class="synConstant">2</span>)
homepage.pv.range(start_date, end_date) <span class="synComment"># [3, 2]</span>
</pre>


<p><code>#increment</code> <code>#decrement</code> は <code>counter</code> と同じ使い勝手です。ただ、日付が変わると自動的に保存先が切り替わります。
これは Redis で保存している Key 名が以下のフォーマットになっているためです。</p>

<pre class="code" data-lang="" data-unlink>model_name:id:field_name:yyyy-mm-dd</pre>


<p>日付が変わった後も過去のレコードは削除されていないので、以下のコードでアクセス出来ます。この使い方は同じく Redis::Objects の <code>list</code> と似たような使い勝手になっています。</p>

<pre class="code lang-ruby" data-lang="ruby" data-unlink><span class="synComment"># 2021-04-01</span>
homepage.pv.increment(<span class="synConstant">3</span>)

<span class="synComment"># 2021-04-02 (next day)</span>
homepage.pv.increment(<span class="synConstant">2</span>)

<span class="synComment"># 2021-04-03 (next day)</span>
homepage.pv.increment(<span class="synConstant">5</span>)

homepage.pv[<span class="synType">Date</span>.new(<span class="synConstant">2021</span>, <span class="synConstant">4</span>, <span class="synConstant">1</span>)] <span class="synComment"># =&gt; 3</span>
homepage.pv[<span class="synType">Date</span>.new(<span class="synConstant">2021</span>, <span class="synConstant">4</span>, <span class="synConstant">1</span>), <span class="synConstant">3</span>] <span class="synComment"># =&gt; [3, 2, 5]</span>
homepage.pv[<span class="synType">Date</span>.new(<span class="synConstant">2021</span>, <span class="synConstant">4</span>, <span class="synConstant">1</span>)..<span class="synType">Date</span>.new(<span class="synConstant">2021</span>, <span class="synConstant">4</span>, <span class="synConstant">2</span>)] <span class="synComment"># =&gt; [3, 2]</span>

homepage.pv.delete(<span class="synType">Date</span>.new(<span class="synConstant">2021</span>, <span class="synConstant">4</span>, <span class="synConstant">1</span>))
homepage.pv.range(<span class="synType">Date</span>.new(<span class="synConstant">2021</span>, <span class="synConstant">4</span>, <span class="synConstant">1</span>), <span class="synType">Date</span>.new(<span class="synConstant">2021</span>, <span class="synConstant">4</span>, <span class="synConstant">3</span>)) <span class="synComment"># =&gt; [0, 2, 5]</span>
homepage.pv.at(<span class="synType">Date</span>.new(<span class="synConstant">2021</span>, <span class="synConstant">4</span>, <span class="synConstant">2</span>)) <span class="synComment"># =&gt; 2</span>
</pre>


<p>これで測定対象となるサービスを開発した後、 <code>daily_counter</code> で測定処理を実装しておくだけで OK。
この状態でリリースすればデータは溜まっていくので、週次や月次で集計する<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%D0%A5%C3%A5%C1%BD%E8%CD%FD">バッチ処理</a>を後でゆっくり実装すれば良いです。
<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%D0%A5%C3%A5%C1%BD%E8%CD%FD">バッチ処理</a>実装前にサーバー内で <code>$ bin/rails console</code> を実行して <code>daily_counter</code> の値を確認しながら<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%D0%A5%C3%A5%C1%BD%E8%CD%FD">バッチ処理</a>の実装を考える、とかも出来ますね。
具体的なデータを見ながらの方が開発難易度は下がります。</p>

<p>ちなみにですが、 <strong><code>expireat</code> オプションを指定しておくことをオススメします。</strong>
gem の仕様上、どんどん Redis 上のメモリを圧迫していくので、一定期間後に自動的に削除するようにしましょう。</p>

<hr />

<p><code>daily_counter</code> があるなら週次、月次、年次カウンターがあっても良いよね、なんだったら毎時、毎分カウンターもあったって良いじゃないか、という事で <code>v0.2.0</code> ではそれらが追加されています。</p>

<p>毎時・毎分のカウンターは <a class="keyword" href="http://d.hatena.ne.jp/keyword/API">API</a> rate limit 機能の実装にも良いかもしれないですね。</p>

<ul>
<li><code>annual_counter</code>

<ul>
<li>Key format: <code>model_name:id:field_name:yyyy</code></li>
<li>Redis is a highly volatile key-<a class="keyword" href="http://d.hatena.ne.jp/keyword/value">value</a> store, so I don't recommend using it.</li>
</ul>
</li>
<li><code>monthly_counter</code>

<ul>
<li>Key format: <code>model_name:id:field_name:yyyy-mm</code></li>
</ul>
</li>
<li><code>weekly_counter</code>

<ul>
<li>Key format: <code>model_name:id:field_name:yyyyWw</code></li>
</ul>
</li>
<li><code>daily_counter</code>

<ul>
<li>Key format: <code>model_name:id:field_name:yyyy-mm-dd</code></li>
</ul>
</li>
<li><code>hourly_counter</code>

<ul>
<li>Key format: <code>model_name:id:field_name:yyyy-mm-ddThh</code></li>
</ul>
</li>
<li><code>minutely_counter</code>

<ul>
<li>Key format: <code>model_name:id:field_name:yyyy-mm-ddThh:mi</code></li>
</ul>
</li>
</ul>


<p>一応実装はしましたが、 <code>annual_counter</code> のように期間の長いカウンターの利用はあまりオススメしません。
Redis ってふとした拍子にデータが飛んでしまう可能性があるので、あくまでキャッシュ的な位置付けで利用するのが良いと思います。
<code>daily_counter</code> も週次・月次で RDS に集計結果を保存する運用を想定していますので。</p>

<hr />

<p>というわけで久々のブログ更新では新しく作った <code>redis-objects-daily-counter</code> という gem の紹介をさせて頂きました。
これから弊社プロダクトでも利用していく予定ですし、色々なサービスでも活用頂けると嬉しいです。</p>
]]></description>
            <enclosure url="https://cdn-ak.f.st-hatena.com/images/fotolife/r/ryz310/20210920/20210920165304.png" length="0" type="image/png"/>
        </item>
        <item>
            <title><![CDATA[ゲスト購入時、Shopify は customer をどう扱っているのか]]></title>
            <link>https://rewired.cloud/how-shopify-handle-the-customer-when-checkout-as-a-guest/</link>
            <guid>https://rewired.cloud/how-shopify-handle-the-customer-when-checkout-as-a-guest/</guid>
            <pubDate>Wed, 08 Sep 2021 06:23:36 GMT</pubDate>
            <description><![CDATA[<p><img src="https://rewired.cloud/wp-content/uploads/2021/09/210908_customer_title-520x300.jpg" class="webfeedsFeaturedVisual" width="520" height="300" /></p>Shopify は 設定 &#62; チェックアウト から購入時のアカウント登録の要否を設定できます。 アカウントを無効化する ゲストとしてのみチェックアウトが可能 アカウントを任意にする ゲストとして、またはカスタマーア ... ]]></description>
        </item>
        <item>
            <title><![CDATA[Amazon EKS で高負荷時に CoreDNS が原因で稀にネットワークエラーが発生していた時のトラブルシュート]]></title>
            <link>https://developer.feedforce.jp/entry/2021/09/02/134725</link>
            <guid>https://developer.feedforce.jp/entry/2021/09/02/134725</guid>
            <pubDate>Thu, 02 Sep 2021 04:47:25 GMT</pubDate>
            <description><![CDATA[<p>ソーシャルPLUS の開発チームでインフラエンジニア をやっています <a href="http://blog.hatena.ne.jp/mayuki123/" class="hatena-id-icon"><img src="https://cdn.profile-image.st-hatena.com/users/mayuki123/profile.png" width="16" height="16" alt="" class="hatena-id-icon">id:mayuki123</a> です。今月からフィードフォースから分社化をした株式会社ソーシャルPLUS の所属となりましたが、仕事内容は変わらずにサービスのインフラ改善を進めていく事になるかと思います。</p>

<p>2019年11月に技術スタックを整理してみたという記事から2年弱経過していますが、ソーシャルPLUSのインフラ環境は、一部アプリケーションについてはコンテナ環境を Amazon EKS にホスティングして本番運用するようになりました。あと数ヶ月ほどで全ての環境がEC2からコンテナに置き換えられると良いなと思っています(願望)。</p>

<p><iframe src="https://hatenablog-parts.com/embed?url=https%3A%2F%2Fdeveloper.feedforce.jp%2Fentry%2F2019%2F11%2F25%2F120000" title="ソーシャルPLUS の技術スタックを整理してみた - Feedforce Developer Blog" class="embed-card embed-blogcard" scrolling="no" frameborder="0" style="display: block; width: 100%; height: 190px; max-width: 500px; margin: 10px 0px;"></iframe><cite class="hatena-citation"><a href="https://developer.feedforce.jp/entry/2019/11/25/120000">developer.feedforce.jp</a></cite></p>

<p>そして、既に利用されている機能の一部を Amazon EKS に移行して、しばらく経過した時にアプリケーションでネットワークエラーが稀に発生していました。原因調査をした結果が CoreDNS の負荷によるものと発覚するまでのトラブルシュートの流れについて、記事として書き残しておきます。</p>

<ul class="table-of-contents">
    <li><a href="#発生していた事象">発生していた事象</a></li>
    <li><a href="#Datadog-を活用した原因調査">Datadog を活用した原因調査</a><ul>
            <li><a href="#アプリケーションの負荷状況">アプリケーションの負荷状況</a></li>
            <li><a href="#EKS-上のコンテナの調査">EKS 上のコンテナの調査</a></li>
        </ul>
    </li>
    <li><a href="#EKS-のCoreDNS-の調査">EKS のCoreDNS の調査</a><ul>
            <li><a href="#CoreDNS-のデバッグログの有効化">CoreDNS のデバッグログの有効化</a></li>
            <li><a href="#Kubernetes-の名前解決について">Kubernetes の名前解決について</a></li>
        </ul>
    </li>
    <li><a href="#CoreDNS-の負荷軽減">CoreDNS の負荷軽減</a><ul>
            <li><a href="#ドメインの末尾にドット--を追加する">ドメインの末尾にドット (.) を追加する</a></li>
            <li><a href="#etcresolvconf-で-ndots1-の設定をする">/etc/resolv.conf で ndots:1 の設定をする</a></li>
            <li><a href="#その他の-CoreDNS-の負荷軽減の方法">その他の CoreDNS の負荷軽減の方法</a></li>
        </ul>
    </li>
    <li><a href="#最終的な結果">最終的な結果</a></li>
    <li><a href="#おわりに">おわりに</a></li>
    <li><a href="#おまけ">おまけ</a></li>
</ul>

<h2 id="発生していた事象">発生していた事象</h2>

<p>ソーシャルPLUSでは、バックエンドのアプリケーションでエラーが発生した時に、Bugsnag を利用して Slack 通知するようにしています。ある時に<code>Mysql2::Error::ConnectionError</code> が発生しました。単発のネットワークエラーの場合はアプリケーションがリトライする事でサービス影響がない事も多く、一時的な問題と思って静観する事があるかと思います。しかし、また数日後に同じ事象が発生しました。</p>

<p><span itemscope itemtype="http://schema.org/Photograph"><img src="https://cdn-ak.f.st-hatena.com/images/fotolife/m/mayuki123/20210830/20210830152912.png" alt="f:id:mayuki123:20210830152912p:plain" width="667" height="258" loading="lazy" title="" class="hatena-fotolife" itemprop="image"></span></p>

<p><a href="https://ja.wikipedia.org/wiki/%E3%83%8F%E3%82%A4%E3%83%B3%E3%83%AA%E3%83%83%E3%83%92%E3%81%AE%E6%B3%95%E5%89%87">ハインリッヒの1：29：300の法則</a>のように、ちょっとした異常を見落としていると重大なサービス障害となってしまう可能性があるので、原因調査を始めます。</p>

<h2 id="Datadog-を活用した原因調査">Datadog を活用した原因調査</h2>

<p>ソーシャルPLUSでは、モニタリングサービスの Datadog を利用しているのでメトリクスやログの調査を出来るようになっています。どこが原因かを探り始めました。</p>

<h3 id="アプリケーションの負荷状況">アプリケーションの負荷状況</h3>

<p>まずはアプリケーションで利用するサーバの負荷状況を確認する所から始めました。<code>Mysql2::Error::ConnectionError</code> が発生した時刻は EKS の Node の CPU 使用率が 70% ほどで、アプリケーションで負荷のかかる処理の最中でした。また、データベースの負荷は少し前に負荷対策の改善をした事もあって、今回の事件の犯人ではなさそうです。他にもEC2 と DB 間でネットワークのボトルネックがないかなどの確認はしましたが、CPU 使用率が高い以外の問題は特に見つかりませんでした。完全犯罪でしょうか。</p>

<h3 id="EKS-上のコンテナの調査">EKS 上のコンテナの調査</h3>

<p>サーバ単体の問題ではないとすると、Amazon EKS で何か起きている事を疑うことにしました。EKSで動かしているコンテナのログは Datadog Logs に送っているので、<strong>エラーが発生していたアプリケーション以外のログ</strong> を確認していると、MySQL の ConnectionError が発生した時間帯に下記の Warning のメッセージが出ている事に気づきました。このログは Amazon Kinesis Data Firehose にログを送る Fluent Bit のコンテナで発生しており、エラーが発生してたアプリケーションとは異なるノードに存在してました。</p>

<blockquote><p>[yyyy/mm/dd hh:mm:ss] [ warn] [net] getaddrinfo(host='kinesis.ap-northeast-1.amazonaws.com'): Name or service not known</p></blockquote>

<p>同時刻に特定のアプリケーション以外のコンテナも影響を受けていることから、EKS の中で問題がありそうです。元々、EKSに関する技術ブログは目を通すようにしていた事もあり、Kubernetes の DNS の名前解決で問題が発生する場合があるというのは知っていたので、CoreDNSに焦点を当てて調べることにしました。アウトプットをしてくれる人たちには、いつも感謝をしています。</p>

<ul>
<li><a href="https://medium.com/cloutive/production-ready-eks-coredns-configuration-6fea830606f8">Production Ready EKS CoreDNS Configuration | by Serkan Capkan | Cloutive Technology Solutions - Tech Blog | Medium</a></li>
<li><a href="https://creators-note.chatwork.com/entry/2021/01/05/104206#%E4%B8%80%E5%AE%9A%E6%95%B0%E3%81%AEPod%E4%BB%A5%E4%B8%8A%E3%81%AB%E3%81%AA%E3%82%8B%E3%81%A8%E3%82%B5%E3%83%BC%E3%83%93%E3%82%B9%E3%81%8C%E4%B8%8D%E5%AE%89%E5%AE%9A%E3%81%AB%E3%81%AA%E3%82%8B">EKS&#x3067;DNS&#x3092;&#x5B89;&#x5B9A;&#x3055;&#x305B;&#x308B;&#x305F;&#x3081;&#x306B;&#x5BFE;&#x5FDC;&#x3057;&#x305F;&#x3053;&#x3068; - Chatwork Creator&#39;s Note</a></li>
<li><a href="https://labs.gree.jp/blog/2020/01/20271/">&#x30B9;&#x30DE;&#x30DB;&#x30B2;&#x30FC;&#x30E0;&#x306E; API &#x30B5;&#x30FC;&#x30D0;&#x306B;&#x304A;&#x3051;&#x308B; EKS &#x306E;&#x904B;&#x7528;&#x4E8B;&#x4F8B; | &#x30A8;&#x30F3;&#x30B8;&#x30CB;&#x30A2;&#x30D6;&#x30ED;&#x30B0; | GREE Engineering</a></li>
</ul>


<h2 id="EKS-のCoreDNS-の調査">EKS のCoreDNS の調査</h2>

<p>Datadog Agent で Kurbernetes の各種メトリクスを収集していて、EKS の CoreDNS の状況も Datadog の Metric Explorer で確認する事が出来るようになっています。</p>

<ul>
<li><a href="https://docs.datadoghq.com/ja/integrations/coredns/?tab=docker#%E3%83%A1%E3%83%88%E3%83%AA%E3%82%AF%E3%82%B9">Datadog で取得可能な CoreDNS のメトリクス</a></li>
</ul>


<p><code>coredns.request_count</code> を確認すると特定の時間帯で CoreDNS へのリクエストが多い状態で、このタイミングでの CoreDNS Pod の CPU 負荷は10％前後でしたが、それ以外に不審なメトリクスは存在しませんでした。まだ事象の原因との確信は持てないですが、負荷がそれなりにかかっていることは確かなのでリクエストが多くなる理由を調べます。</p>

<p><span itemscope itemtype="http://schema.org/Photograph"><img src="https://cdn-ak.f.st-hatena.com/images/fotolife/m/mayuki123/20210831/20210831151005.png" alt="f:id:mayuki123:20210831151005p:plain" width="522" height="200" loading="lazy" title="" class="hatena-fotolife" itemprop="image"></span></p>

<h3 id="CoreDNS-のデバッグログの有効化">CoreDNS のデバッグログの有効化</h3>

<p>まずは CoreDNS のデバッグログを確認したいとなるかと思いますが、EKS の CoreDNS はデフォルトだとデバッグログの出力がオフの状態のため、どのようなリクエストが到達しているのかは確認する事ができません。CoreDNS のログを有効化する方法は AWS のナレッジベースにある記事に方法が記載されています。</p>

<ul>
<li><a href="https://aws.amazon.com/jp/premiumsupport/knowledge-center/eks-dns-failure/">Amazon EKS &#x3067;&#x306E; DNS &#x969C;&#x5BB3;&#x306E;&#x30C8;&#x30E9;&#x30D6;&#x30EB;&#x30B7;&#x30E5;&#x30FC;&#x30C6;&#x30A3;&#x30F3;&#x30B0;</a></li>
</ul>


<p>この記事によると、Namespace(<code>kube-system</code>) に Configmap (<code>coredns</code>) があるので、Corefile 設定に <code>log</code> を追加するとデバッグログ が出力されるようになります。</p>

<pre class="code" data-lang="" data-unlink># kubectl -n kube-system edit configmap coredns
kind: ConfigMap
apiVersion: v1
data:
  Corefile: |
    .:53 {
        log    # Enabling CoreDNS Logging
        errors
        health
        kubernetes cluster.local in-addr.arpa ip6.arpa {
          pods insecure
          upstream
          fallthrough in-addr.arpa ip6.arpa
        }
        ...</pre>


<p>上記の設定をすると CoreDNS のPod の標準出力にデバッグログ が出力されるようになります。私の触っていた EKS の環境の場合は、数分ほどで CoreDNS の Pod で reload が発生して元の設定（デバッグログ がオフ）に戻るようになってました。</p>

<h3 id="Kubernetes-の名前解決について">Kubernetes の名前解決について</h3>

<p>次にKubernetes 上のコンテナはどのように名前解決するのかを知っておく必要があります。Kurbernetes の Pod の DNS リゾルバー(<code>/etc/resolv.conf</code>) のデフォルト設定は下記のようになっています。</p>

<pre class="code" data-lang="" data-unlink>% kubectl exec fluent-bit-46zvl -- cat /etc/resolv.conf
nameserver 172.20.0.10
search logging.svc.cluster.local svc.cluster.local cluster.local
options ndots:5</pre>


<p>この状態で Fluent Bit のコンテナから Amazon Kinesis の API エンドポイントに疎通する場合は、CoreDNS に8回のリクエストが発生します。これは、IPv4 , IPv6 の2種類の名前解決を <code>search</code> の数だけ名前解決を試みた後で EKS 外に名前解決をする設定になっているからです。この設定になっているおかげで Kubernetes の Service を使った名前解決が出来るようになっています。</p>

<p><span itemscope itemtype="http://schema.org/Photograph"><img src="https://cdn-ak.f.st-hatena.com/images/fotolife/m/mayuki123/20210831/20210831154909.png" alt="f:id:mayuki123:20210831154909p:plain" width="1200" height="328" loading="lazy" title="" class="hatena-fotolife" itemprop="image"></span></p>

<p>また、<code>options ndots:5</code> の設定は <code>.</code> の数が 5個以上の時は最初から外部に名前解決するようになります。そのため、Amazon Aurora や ElastiCache などのデータベースへの クラスターエンドポイントは <code>.</code> の数が五個以上あるので、CoreDNSへのリクエスト回数は少なくて済みます。ここを意識しなくてよいのはありがたいですね。</p>

<p>ソーシャルPLUSというプロダクトの特性上、EKS 内のアプリケーションから外部サービスの API を実行する機会が多々あります。特定のタイミングで外部のサービスに大量のAPIリクエストを実行した際に、CoreDNS へのリクエストが増大してしまい不安定になってしまったのではと考えられます。</p>

<h2 id="CoreDNS-の負荷軽減">CoreDNS の負荷軽減</h2>

<p>Kurbernetes 上のコンテナの名前解決を知ると、外部サービスのAPI を実行する際には CoreDNS へのリクエストが多くなる事が分かりました。ここで、CoreDNS へのリクエスト数を減らす方法は下記の二つがあります。これも AWS のナレッジベースに方法が記載されているので、詳細は下記の記事を読む方が良いと思います。</p>

<ul>
<li><a href="https://aws.amazon.com/jp/premiumsupport/knowledge-center/eks-dns-failure/">Amazon EKS &#x3067;&#x306E; DNS &#x969C;&#x5BB3;&#x306E;&#x30C8;&#x30E9;&#x30D6;&#x30EB;&#x30B7;&#x30E5;&#x30FC;&#x30C6;&#x30A3;&#x30F3;&#x30B0;</a></li>
</ul>


<h3 id="ドメインの末尾にドット--を追加する">ドメインの末尾にドット (.) を追加する</h3>

<p>接続先のドメインの最後に <code>.</code> をつけると、EKS の内部で名前解決を複数回しないようになり、CoreDNS へのリクエストの総数が減ります。一例をあげると、<code>example.com</code> ではなく、 <code>example.com.</code> とする事で最初から EKS の外部に名前解決をしてくれるようになります。ドメインが SDK の内部で定義されているような場合など、変更出来ない場合はこの方法は利用出来ないかと思います。</p>

<h3 id="etcresolvconf-で-ndots1-の設定をする"><code>/etc/resolv.conf</code> で ndots:1 の設定をする</h3>

<p><code>/etc/resolv.conf</code> に <code>options ndots:5</code> とデフォルトで設定されている数値を <code>1</code> にする事で、ドメインに <code>.</code> が含まれている場合は常に EKS の外部に名前解決するようになります。Kubernetes の Manifest に <code>spec.dnsConfig</code> パラメータを設定する事で Pod 単位で変更が出来ます。ただし、この設定をすると EKS 内部で名前解決をしなくなってしまいますが、<code>&lt;name&gt;.&lt;namespace&gt;.svc.cluster.local.</code> のように最後に <code>.</code> をつけると名前解決出来ました。Kurbernetes の Service の数が多いとこの方法を周知させるのも大変だと思います。</p>

<pre class="code" data-lang="" data-unlink>apiVersion: apps/v1
kind: Deployment
metadata:
  name: hoge
spec:
  template:
    spec:
      dnsConfig:
        options:
          - name: ndots
            value: &#34;1&#34;</pre>


<h3 id="その他の-CoreDNS-の負荷軽減の方法">その他の CoreDNS の負荷軽減の方法</h3>

<p>上記の二つの方法は CoreDNS へのリクエスト数を減らすことで、負荷を軽減するようなアプローチでした。CoreDNS の Pod 数はデフォルトで 2個となりますが、CoreDNS のPod をオートスケールする手段もあります。</p>

<ul>
<li><a href="https://kubernetes.io/docs/tasks/administer-cluster/dns-horizontal-autoscaling/">Autoscale the DNS Service in a Cluster</a></li>
</ul>


<p>また、Daemonset で DNS キャッシュをノード単位で配置するという方法もあります。</p>

<ul>
<li><a href="https://kubernetes.io/ja/docs/tasks/administer-cluster/nodelocaldns/">KubernetesクラスターでNodeLocal DNSキャッシュを使用する</a></li>
</ul>


<p>この辺りは他の方が書いた技術ブログも多くあるかと思うので、この記事では特に説明はしないです。</p>

<h2 id="最終的な結果">最終的な結果</h2>

<p>ソーシャルPLUSでは最終的に根本原因の CoreDNS へのリクエスト数を減らすために <code>/etc/resolv.conf</code> で <code>ndots:1</code> の設定をするようにしました。この設定をアプリケーションの Pod に適応した所、CoreDNS へのリクエスト数は 25% ほどと目に見えて減少させる事が出来ました。キャプチャは載せてないですが、CoreDNS の Pod の CPU使用率も 以前の半分ほどになったので、負荷軽減の目的は達成しました。</p>

<p><span itemscope itemtype="http://schema.org/Photograph"><img src="https://cdn-ak.f.st-hatena.com/images/fotolife/m/mayuki123/20210831/20210831171734.png" alt="f:id:mayuki123:20210831171734p:plain" width="527" height="187" loading="lazy" title="" class="hatena-fotolife" itemprop="image"></span></p>

<p>ここまで、確信を持てないまま CoreDNS の負荷軽減に取り組みましたが、元々のネットワークエラーであった <code>Mysql2::Error::ConnectionError</code> のエラーは再発しなくなりました。また、EKS 上の他のコンテナも <code>Name or service not known</code> のような名前解決が出来ないといったエラーも発生しなくなりました。CoreDNS の負荷を減らす事で悩まされていた問題の解消が出来たと思います。今回のように比較的早い段階で気づく事が出来たので、お客さんへのサービス影響のある問題に発展せずに済みました。</p>

<p>今後、利用者数が増えてより負荷のかかる状況になってきた時には再発する可能性はありますが、早い段階で気付けるように日々確認するダッシュボードにメトリクスを追加するようにしています。その時がきた場合は CoreDNS の Pod 数の調整や DNS キャッシュの導入が必要になりそうです。</p>

<h2 id="おわりに">おわりに</h2>

<p>最終的には Pod の DNS 設定を調整するだけでネットワークエラーは解決しました。この記事では、結果だけではなくて解決に至るまでの経緯をメインにまとめてみました。実施していて良かったと思うことを下記にまとめます。これらの事が出来ていなければ、今回のようなネットワークエラーはたまに発生する事象として、根本原因の追及は出来なかったと思うので、サービスのオブザーバビリティを整備する事や日々の情報収集は大事ですね。</p>

<ul>
<li>アプリケーションのエラーを Slack に通知していた</li>
<li>Kurbernetes のメトリクスを Datadog で確認できる状態だった</li>
<li>コンテナのログを一元的に Datadog Logs  で閲覧できるようにしていた</li>
<li>他の人の技術ブログから Kubernetes の CoreDNS が不安定になることを知っていた</li>
</ul>


<p>この記事に間違っている内容や、もっと良い改善方法がある事をご存知の方がいましたら、優しく教えてください。</p>

<h2 id="おまけ">おまけ</h2>

<p>現在、ソーシャルPLUS では作りたい機能が山ほどある状況でまだまだ成長するサービスになると思うので、成長を続けるサービスに携わりたいエンジニアやデザイナーのご応募をお待ちしております！サイトにはまだないですが、インフラエンジニアも近いうちに募集をする事にはなると思います。</p>

<p><iframe src="https://hatenablog-parts.com/embed?url=https%3A%2F%2Fopen.talentio.com%2F1%2Fc%2Ffeedforce%2Frequisitions%2Fdetail%2F21802" title="Railsエンジニア【Shopify App開発/ID連携サービス】 / 株式会社フィードフォース" class="embed-card embed-webcard" scrolling="no" frameborder="0" style="display: block; width: 100%; height: 155px; max-width: 500px; margin: 10px 0px;"></iframe><cite class="hatena-citation"><a href="https://open.talentio.com/1/c/feedforce/requisitions/detail/21802">open.talentio.com</a></cite></p>

<p><iframe src="https://hatenablog-parts.com/embed?url=https%3A%2F%2Fopen.talentio.com%2F1%2Fc%2Ffeedforce%2Frequisitions%2Fdetail%2F21755" title="フロントエンドエンジニア【Shopifyアプリ開発/ID連携サービス/React/TypeScript】 / 株式会社フィードフォース" class="embed-card embed-webcard" scrolling="no" frameborder="0" style="display: block; width: 100%; height: 155px; max-width: 500px; margin: 10px 0px;"></iframe><cite class="hatena-citation"><a href="https://open.talentio.com/1/c/feedforce/requisitions/detail/21755">open.talentio.com</a></cite></p>

<p><iframe src="https://hatenablog-parts.com/embed?url=https%3A%2F%2Fopen.talentio.com%2F1%2Fc%2Ffeedforce%2Frequisitions%2Fdetail%2F21760" title="UI/UXデザイナー【ID連携サービス/マーケティング支援SaaS】 / 株式会社フィードフォース" class="embed-card embed-webcard" scrolling="no" frameborder="0" style="display: block; width: 100%; height: 155px; max-width: 500px; margin: 10px 0px;"></iframe><cite class="hatena-citation"><a href="https://open.talentio.com/1/c/feedforce/requisitions/detail/21760">open.talentio.com</a></cite></p>

<p>フィードフォース の他のサービスもエンジニアを募集してますので、興味があればご応募お待ちしております！</p>

<p><iframe src="https://hatenablog-parts.com/embed?url=https%3A%2F%2Fengineers.recruit.feedforce.jp%2F%3F_ga%3D2.157559610.1029003260.1630297434-1923366822.1626416415%23entry" title="フィードフォース エンジニア・デザイナー採用サイト" class="embed-card embed-webcard" scrolling="no" frameborder="0" style="display: block; width: 100%; height: 155px; max-width: 500px; margin: 10px 0px;"></iframe><cite class="hatena-citation"><a href="https://engineers.recruit.feedforce.jp/?_ga=2.157559610.1029003260.1630297434-1923366822.1626416415#entry">engineers.recruit.feedforce.jp</a></cite></p>
]]></description>
            <enclosure url="https://cdn.user.blog.st-hatena.com/default_entry_og_image/4268819/1588226000876991" length="0" type="image//default_entry_og_image/4268819/1588226000876991"/>
        </item>
        <item>
            <title><![CDATA[Looker で Join 先の view の primary_key をいい感じにテストする方法をようやく見つけた]]></title>
            <link>https://developer.feedforce.jp/entry/2021/08/30/150000</link>
            <guid>https://developer.feedforce.jp/entry/2021/08/30/150000</guid>
            <pubDate>Mon, 30 Aug 2021 06:00:00 GMT</pubDate>
            <description><![CDATA[<p>こんにちは、<a href="http://blog.hatena.ne.jp/masutaka26/" class="hatena-id-icon"><img src="https://cdn.profile-image.st-hatena.com/users/masutaka26/profile.png" width="16" height="16" alt="" class="hatena-id-icon">id:masutaka26</a> です。
先週はまるっと夏休みにしてました。今日からまた <a href="https://ja.looker.com/">Looker</a> と戯れる日々が始まります。</p>

<p>丸１年 Looker と戯れてきて最近ようやく、<strong>Join 先の view でも</strong> primary_key が壊れてないことを保証するテストの書き方が分かったので、今回紹介します。</p>

<ul class="table-of-contents">
    <li><a href="#Looker-における-primary_key-の役割">Looker における primary_key の役割</a></li>
    <li><a href="#primary_key-の実装例">primary_key の実装例</a></li>
    <li><a href="#LookML-開発におけるテスト">LookML 開発におけるテスト</a></li>
    <li><a href="#Join-先の-view-は-primary_key-をテスト出来ないことがある">Join 先の view は primary_key をテスト出来ないことがある</a></li>
    <li><a href="#Join-先の-view-の-primary_key-をいい感じにテストする">Join 先の view の primary_key をいい感じにテストする</a></li>
    <li><a href="#まとめと所感">まとめと所感</a></li>
    <li><a href="#おまけ">おまけ</a></li>
</ul>

<h2 id="Looker-における-primary_key-の役割">Looker における primary_key の役割</h2>

<p>Looker には <a href="https://help.looker.com/hc/en-us/articles/360023722974">Symmetric Aggregates</a> という、合計を重複させない素晴らしい仕組みがあります。以前このブログでも紹介しました。</p>

<p><iframe src="https://hatenablog-parts.com/embed?url=https%3A%2F%2Fdeveloper.feedforce.jp%2Fentry%2F2020%2F10%2F23%2F190000" title="『4月から取り組んできたLookerの導入から実装までのお話（Redashとも比較）』という発表をした - Feedforce Developer Blog" class="embed-card embed-blogcard" scrolling="no" frameborder="0" style="display: block; width: 100%; height: 190px; max-width: 500px; margin: 10px 0px;"></iframe></p>

<p>その Symmetric Aggregates では <a href="https://docs.looker.com/reference/field-params/primary_key">primary_key</a> が重要な役割を果たします。適切に設定されていないと、以下のような問題が発生します。</p>

<ul>
<li>primary_key が重複すると fanout エラーが発生することがある</li>
<li>primary_key が null だと Measure が 0 になることがある</li>
</ul>


<p>このような問題は大概、ふわっと質問が来て発覚します。今のタスクを保留にして調査することは精神的になかなか辛いものがあり、それなりに時間も費やすことになるため、可能な限り事前に避けたいところです。</p>

<h2 id="primary_key-の実装例">primary_key の実装例</h2>

<p>私が所属する <a href="https://feedmatic.net/">Feedmatic</a> では、ウェブ広告や Google Analytics のデータを扱っています。正規化されたきれいなデータは少なく、Rails の id のようなユニークなカラムは存在しないことが多いです。</p>

<p>そのため、このようにいくつかの Dimension を組み合わせて primary_key を定義します。</p>

<pre class="code" data-lang="" data-unlink>dimension: id {
  primary_key: yes
  type: string
  sql: CONCAT(${dimension1}, ${dimension2}, IFNULL(${dimension3}, &#39;&#39;)) ;;
  hidden: yes
}</pre>


<p>※ <a href="https://ja.wikipedia.org/wiki/%E3%83%87%E3%83%BC%E3%82%BF%E3%82%A6%E3%82%A7%E3%82%A2%E3%83%8F%E3%82%A6%E3%82%B9">DWH</a> は BigQuery を使っています。</p>

<p>これで済めばよいのですが、上の例だとある日突然 dimension2 が null になり始めたり、全ての string 型の Dimension を使っても重複し始めることがあります。データの性格は理解していたつもりでしたが、実際どちらもありました。😭</p>

<h2 id="LookML-開発におけるテスト">LookML 開発におけるテスト</h2>

<p>以上の課題を解決するために、<a href="https://docs.looker.com/reference/model-params/test">test</a> パラメータが使えます。</p>

<p>例えばこのような <code>parent</code> explore があったとします。Join がないのでシンプルです。</p>

<pre class="code" data-lang="" data-unlink>explore: parent {
  ...
}

view: parent {
  dimension: id {
    primary_key: yes
    ...
  }

  measure: count {
    type: count
  }
}</pre>


<p>私はこのようなテストを書いて、全ての <code>parent.id</code> が null でないことと、重複しないことを保証させています。</p>

<pre class="code" data-lang="" data-unlink>test: parent_id_is_not_null {
  explore_source: parent {
    column: id {}
    sorts: [parent.id: asc]
    limit: 1
  }
  assert: id_is_not_null {
    expression: NOT is_null(${parent.id}) ;;
  }
}

test: parent_id_is_unique {
  explore_source: parent {
    column: id {}
    column: count {}
    sorts: [parent.count: desc]
    limit: 1
  }
  assert: id_is_unique {
    expression: ${parent.count} = 1 ;;
  }
}</pre>


<p>👉 ソート時に null が先頭と末尾のどちらに来るかは、DWH の実装によります。</p>

<h2 id="Join-先の-view-は-primary_key-をテスト出来ないことがある">Join 先の view は primary_key をテスト出来ないことがある</h2>

<p>さて、<code>child</code> view を Join する必要が出てきました。</p>

<pre class="code" data-lang="" data-unlink>explore: parent {
  join: child {
    type: left_outer
    relationship: one_to_many
    sql_on: ... ;;
  }
}

view: parent {
  dimension: id {
    primary_key: yes
    ...
  }

  measure: count {
    type: count
  }
}

view: child {
  dimension: id {
    primary_key: yes
    ...
  }

  measure: count {
    type: count
    hidden: yes
  }
}</pre>


<p>同じように <code>child.id</code> のテストを書きましたが、うまくいきません。<code>is_not_null</code> はまだしも、<code>is_unique</code> がダメです。</p>

<pre class="code" data-lang="" data-unlink># これは OK
test: parent_child_id_is_not_null {
  explore_source: parent {
    column: id { field: child.id }
    sorts: [child.id: asc]
    limit: 1
  }
  assert: child_id_is_not_null {
    expression: NOT is_null(${child.id}) ;;
  }
}

# parent の count になり、テストが通らない。
test: parent_child_id_is_unique {
  explore_source: parent {
    column: id { field: child.id }
    column: count { field: child.count }
    sorts: [parent.count: desc]
    limit: 1
  }
  assert: child_id_is_unique {
    expression: ${child.count} = 1 ;;
  }
}</pre>


<p>よく考えれば当たり前の話で、Join した状態でテストを書いているからです。そもそも <code>child</code> view の primary_key のテストをしたいだけなのに、Join は邪魔です。</p>

<h2 id="Join-先の-view-の-primary_key-をいい感じにテストする">Join 先の view の primary_key をいい感じにテストする</h2>

<p><code>child</code> view と同じファイルに、こっそり <code>child</code> explore を定義します。<a href="https://docs.looker.com/ja/reference/explore-params/hidden-for-explore">hidden</a> にして存在を消しています。さらに <a href="https://docs.looker.com/reference/explore-params/required_access_grants-for-explore">required_access_grants</a> で、開発者以外の URL 直打ちによるアクセスも防いでいます。</p>

<pre class="code" data-lang="" data-unlink>view: child {
  dimension: id {
    primary_key: yes
    ...
  }

  measure: count {
    type: count
    hidden: yes
  }
}

# Define for test
explore: child {
  hidden: yes
  required_access_grants: [can_view_explores_for_tests]
}</pre>


<p><a href="https://docs.looker.com/reference/model-params/access_grant">access_grant</a> である <code>can_view_explores_for_tests</code> はこのような定義です。</p>

<pre class="code" data-lang="" data-unlink># For tests
access_grant: can_view_explores_for_tests {
  user_attribute: view_explores_for_tests
  allowed_values: [&#34;yes&#34;]
}</pre>


<p><a href="https://docs.looker.com/admin-options/settings/user-attributes">User attribute</a> である <code>view_explores_for_tests</code> は、今回のような「Join 先の view をテストすること」全般に使います。User Access は <code>None</code>、Default Value も <code>no</code> です。開発者用の Group を作り、その Group value を <code>yes</code> にしました。</p>

<p>ここまでやらずとも全員アクセス不可でも良いのですが、テストが落ちた時に「クエリの探索」からの調査ができなくなるので、開発者にはアクセス権を与えるポリシーにしています。</p>

<p>あとは <code>parent</code> explore と同じようにテストを書くだけです。</p>

<pre class="code" data-lang="" data-unlink>test: child_id_is_not_null {
  explore_source: child {
    column: id {}
    sorts: [child.id: asc]
    limit: 1
  }
  assert: id_is_not_null {
    expression: NOT is_null(${child.id}) ;;
  }
}

test: child_id_is_unique {
  explore_source: child {
    column: id {}
    column: count {}
    sorts: [child.count: desc]
    limit: 1
  }
  assert: id_is_unique {
    expression: ${child.count} = 1 ;;
  }
}</pre>


<p>テストは通っても、LookML validation error が発生するかもしれません。その時は <a href="https://docs.looker.com/ja/reference/explore-params/fields-for-explore">fields</a> パラメータを使って、露出する field を限定すると良いでしょう。</p>

<pre class="code" data-lang="" data-unlink># Define for test
explore: child {
  hidden: yes
  required_access_grants: [can_view_explores_for_tests]
  fields: [child.id, child.count] # Avoid LookML validation error
}</pre>


<p>このテクニックは <a href="https://help.looker.com/hc/en-us/articles/360023586293-Error-Unknown-or-Inaccessible-Field">Error: Unknown or Inaccessible Field – Looker Help Center</a> でも紹介されています。</p>

<h2 id="まとめと所感">まとめと所感</h2>

<p>LookML 開発者で、且つテストを書いていて、且つ Join 先の view の primary_key に課題を抱えている、大変ニッチな層向けに記事を書きました。どこかの誰かに参考になれば幸いです。</p>

<p>もっと良い方法や、今回のやり方はここがマズイとかあれば <a href="https://twitter.com/masutaka">@masutaka</a> にお知らせ頂けると大変うれしいです。🙏</p>

<p>Feedmatic では今回のような view は数十もあり、primary_key のテストはまだ書き始めたばかりです。</p>

<p>Looker ではテストは直列でしか実行されないようで、書けば書くほど全テストが遅くなるのはモヤモヤしています。さすがに要望しようと思ってますが。</p>

<p>それに関連して、最近ディレクトリやファイル構成を再検討しました。次回はその記事を書く予定です。</p>

<h2 id="おまけ">おまけ</h2>

<p>今回の記事を書く過程で、中の人が書いたベストプラクティスを見つけました。</p>

<p><iframe src="https://hatenablog-parts.com/embed?url=https%3A%2F%2Fcommunity.looker.com%2Flookml-5%2Flookml-data-tests-recommendations-and-best-practices-20815" title="LookML Data Tests: Recommendations and Best Practices | Looker Community" class="embed-card embed-webcard" scrolling="no" frameborder="0" style="display: block; width: 100%; height: 155px; max-width: 500px; margin: 10px 0px;"></iframe></p>

<p>今回の記事ほど細かいテクニックは書かれていませんが、全体を網羅した良記事なので要チェックです。</p>
]]></description>
            <enclosure url="https://cdn-ak.f.st-hatena.com/images/fotolife/m/masutaka26/20201023/20201023184859.png" length="0" type="image/png"/>
        </item>
        <item>
            <title><![CDATA[Manjaro でハイバネート出来るようにしたメモ]]></title>
            <link>https://masutaka.net/2021-08-25-1/</link>
            <guid>https://masutaka.net/2021-08-25-1/</guid>
            <pubDate>Wed, 25 Aug 2021 00:00:00 GMT</pubDate>
            <description><![CDATA[４月から個人 PC を MacBook Air から Linux マシンに変えました。[2021-05-06-1] スライド P41 に書いたとおり、たまにスリープから復帰しなくてつらいです。仕方がないので「スリープしない設定にする。常にAC電源ON🤗」という運用でカバー（）をしていました。😭
 いつまでも続けるわけにもいかないので、今回重い腰を上げてハイバネート出来るようにしました。
Linux (Xfce4) のスリープ方式 私が使っているウィンドウマネージャーは Xfce4 です。電源管理の設定等で出てくるスリープ関連の用語と、自分なりの理解は以下のとおりです。情報源は Wikipedia です。😆
・サスペンド
メモリ以外の給電停止した状態。ACPI では S3 に相当する。
・ハイバネート
メモリの内容をストレージに移し電源断。ACPI では S4 に相当する。
・ハイブリッドスリープ
サスペンドとハイバネートの中間だと思われるが、試したらすぐハイバネートしただけだった&hellip;。
macOS (Big Sur) のスリープ方式 macOS ではサスペンドやハイバネートの使い分けは不要で、意識するのは「スリープ」のみです。以下のような「セーフスリープ 」という機構を備えているそうです。
・スリープ状態になると、メモリの内容を保持したままストレージにも保存する
・スリープ中にバッテリーが切れていなければ、復帰時にメモリの内容を使う
・スリープ中にバッテリーが切れていたら、復帰時にストレージの内容を使う
奨励はされていませんが、pmset コマンドでスリープ方式を「セーフスリープ」から「スリープ」または「ディープスリープ」に変更は出来るようです。
「スリープ」は ACPI の S3 に相当し、「ディープスリープ」は S4 に相当するようなので、Xfce4 の「ハイブリッドスリープ」は「セーフスリープ」が本来の振る舞いなのかも。
※ 状態としての「スリープ」と、その種類としての「スリープ」（と「セーフスリープ」「ディープスリープ」）があるので、文章がややこしいです。
Linux と macOS の振る舞いの違い macOS の素晴らしい点に、ユーザーにスリープをほぼ意識させない設計があると思います。
サスペンドやハイバネートのような用語が現れないこともさることながら、MacBook なら蓋を開けばログイン画面が表示されるだけです。多少復帰がもたつくことはあるのはご愛嬌。
Linux はサスペンドは同じとしても、ハイバネートは OS の起動から始まるので、「あれ？バッテリー切れてた？」と一瞬不安になります。Windows も同じという理解です。
どの OS もバックグラウンドの処理は同じだと思います。macOS はユーザーへの見せ方がきれいですね。]]></description>
        </item>
        <item>
            <title><![CDATA[私が１年かけて辿り着いた Looker の情報収集方法を紹介する]]></title>
            <link>https://developer.feedforce.jp/entry/2021/08/16/150000</link>
            <guid>https://developer.feedforce.jp/entry/2021/08/16/150000</guid>
            <pubDate>Mon, 16 Aug 2021 06:00:00 GMT</pubDate>
            <description><![CDATA[<p>こんばんは、<del>徳川家ｙ</del> <a href="http://blog.hatena.ne.jp/masutaka26/" class="hatena-id-icon"><img src="https://cdn.profile-image.st-hatena.com/users/masutaka26/profile.png" width="16" height="16" alt="" class="hatena-id-icon">id:masutaka26</a> です。</p>

<p>以前紹介したように、去年から <a href="https://ja.looker.com/">Looker</a> を使ったウェブ広告数値の可視化や BI <a href="#f-25b67c2a" name="fn-25b67c2a" title="Business Intelligence">*1</a> に取り組んでいます。</p>

<p><iframe src="https://hatenablog-parts.com/embed?url=https%3A%2F%2Fdeveloper.feedforce.jp%2Fentry%2F2020%2F10%2F23%2F190000" title="『4月から取り組んできたLookerの導入から実装までのお話（Redashとも比較）』という発表をした - Feedforce Developer Blog" class="embed-card embed-blogcard" scrolling="no" frameborder="0" style="display: block; width: 100%; height: 190px; max-width: 500px; margin: 10px 0px;"></iframe></p>

<p>LookML 開発者として LookML を書き始めて困ったのが、Looker の情報が少ないように見えたことです。</p>

<p>LookML を含む Looker のドキュメントは充実しているのですが、それらを組み合わせた応用的なフロー情報が少なく感じました。ビジネスユーザー向けの情報も同様です。</p>

<p>現在は網羅的、かつ集約した情報を取得できているので、その方法をご紹介します。</p>

<ul class="table-of-contents">
    <li><a href="#情報源をリストアップする">「情報源」をリストアップする</a></li>
    <li><a href="#少し脱線">少し脱線...</a></li>
    <li><a href="#情報源の取得方法への課題">「情報源」の取得方法への課題</a></li>
    <li><a href="#今はどうなったか">今はどうなったか？</a></li>
    <li><a href="#Looker-Communityのフィードが存在した件">「Looker Community」のフィードが存在した件</a></li>
    <li><a href="#Looker-の記事一覧--DevelopersIOのフィードを作った件">「Looker の記事一覧 | DevelopersIO」のフィードを作った件</a></li>
    <li><a href="#まとめ">まとめ</a></li>
    <li><a href="#追記">追記</a></li>
</ul>

<h2 id="情報源をリストアップする">「情報源」をリストアップする</h2>

<p>初めはこれらをたまに見に行ったり、Slack の <code>/feed subscribe</code> <a href="#f-e46aea89" name="fn-e46aea89" title="Slack に RSS フィードを追加する | Slack">*2</a> で購読したりしてました。</p>

<ul>
<li><a href="https://community.looker.com/">Looker Community</a>

<ul>
<li>公式フォーラム。英語で Question や Conversation が出来る</li>
</ul>
</li>
<li><p><a href="https://community.looker.com/%E3%82%B3%E3%83%9F%E3%83%A5%E3%83%8B%E3%83%86%E3%82%A3%E3%83%95%E3%82%A9%E3%83%BC%E3%83%A9%E3%83%A0-japanese-161">Looker 日本語コミュニティフォーラム</a></p>

<ul>
<li>「Looker Community」の日本語版。<a href="https://docs.looker.com/relnotes/intro">Release Notes</a> の日本語訳には本当に感謝 🙏</li>
<li><p>「ニュースと告知」「ヘルプとサポート」「コラム」はそれぞれ Subscribe 出来る。メールで通知される</p>

<p>  <figure class="figure-image figure-image-fotolife" title="Looker 日本語コミュニティフォーラム"><span itemscope itemtype="http://schema.org/Photograph"><img src="https://cdn-ak.f.st-hatena.com/images/fotolife/m/masutaka26/20210815/20210815145002.png" alt="f:id:masutaka26:20210815145002p:plain" width="1200" height="382" loading="lazy" title="" class="hatena-fotolife" itemprop="image"></span><figcaption>Looker 日本語コミュニティフォーラム</figcaption></figure></p></li>
</ul>
</li>
<li><p><a href="https://www.facebook.com/groups/721814241538725">Looker APAC Forum | Facebook</a></p>

<ul>
<li>リリース案内や事例紹介など</li>
</ul>
</li>
<li><a href="https://dev.classmethod.jp/tags/looker/">Looker の記事一覧 | DevelopersIO</a>

<ul>
<li>ご存知クラスメソッドさんのブログ。国内最多の記事量と投稿頻度</li>
</ul>
</li>
<li><a href="https://zenn.dev/topics/looker">Lookerの記事一覧 | Zenn</a>

<ul>
<li>Zenn にもそれなりの頻度で投稿される</li>
</ul>
</li>
<li><a href="https://qiita.com/tags/looker">Looker - Qiita</a>

<ul>
<li>Qiita はもう少し頻度は落ちるかな</li>
</ul>
</li>
<li><a href="https://twitter.com/search?q=%23looker%20lang%3Aja&amp;f=live&amp;vertical=default">#looker lang:ja - Twitter 検索</a>

<ul>
<li>以上の情報をふわっと取得できる。<code>looker lang:ja</code> や <code>#looker</code> だとノイズが多いのでこれに落ち着いた</li>
</ul>
</li>
</ul>


<h2 id="少し脱線">少し脱線...</h2>

<p>Looker Community には過去一度だけ質問しました。</p>

<p><a href="https://community.looker.com/lookml-5/how-do-i-dynamically-switch-view-name-in-sql-parameter-of-dimension-27831">How do I dynamically switch view name in sql parameter of dimension? | Looker Community</a></p>

<p>私は日本語サポートに頼ることが多い傾向です。最近はだいぶ減らせています。</p>

<p>扱う情報を外に出せないので、外に出せるところまで昇華するのは難しいですね。🌀</p>

<p>Looker の水野さんが日本語訳して下さっている、Looker のリリースノート <a href="#f-c898f381" name="fn-c898f381" title="例: Looker 21.12 リリースノート | Looker Community">*3</a> は、去年の 12 月から社内向けにこんな記事を書いて、Looker に徹底的に向き合うようにしています。</p>

<p><figure class="figure-image figure-image-fotolife" title="Looker 21.12 のリリースノートを眺めてみた"><span itemscope itemtype="http://schema.org/Photograph"><img src="https://cdn-ak.f.st-hatena.com/images/fotolife/m/masutaka26/20210815/20210815160438.png" alt="f:id:masutaka26:20210815160438p:plain" width="1200" height="849" loading="lazy" title="" class="hatena-fotolife" itemprop="image"></span><figcaption>Looker 21.12 のリリースノートを眺めてみた</figcaption></figure></p>

<p>今まで書いた記事です。</p>

<p><figure class="figure-image figure-image-fotolife" title="Looker のリリースノートを眺めてみたシリーズ"><span itemscope itemtype="http://schema.org/Photograph"><img src="https://cdn-ak.f.st-hatena.com/images/fotolife/m/masutaka26/20210815/20210815160356.png" alt="f:id:masutaka26:20210815160356p:plain" width="1200" height="887" loading="lazy" title="" class="hatena-fotolife" itemprop="image"></span><figcaption>Looker のリリースノートを眺めてみたシリーズ</figcaption></figure></p>

<h2 id="情報源の取得方法への課題">「情報源」の取得方法への課題</h2>

<p>RSS/Atom（フィード）を配信していないサイトがほとんどで、見に行くのがかなり面倒でした。</p>

<p>そのものズバリなフィードは Zenn と Qiita だけです。クラスメソッドさんは Looker タグのフィードが存在せず、当時は Twitter で捕捉してました。</p>

<h2 id="今はどうなったか">今はどうなったか？</h2>

<p>ほぼすべてを社内の Slack channel <code>#news-looker</code> に集約させることが出来ました。</p>

<p>以下が実際に購読しているフィードです。</p>

<ul>
<li><a href="https://community.looker.com/feed/buzzcapture">https://community.looker.com/feed/buzzcapture</a>

<ul>
<li>「Looker Community」のフィード。後述する</li>
</ul>
</li>
<li><a href="https://feed43.com/developersio-looker.xml">https://feed43.com/developersio-looker.xml</a>

<ul>
<li>「Looker の記事一覧 | DevelopersIO」のフィード。後述する</li>
</ul>
</li>
<li><a href="https://zenn.dev/topics/looker/feed">https://zenn.dev/topics/looker/feed</a>

<ul>
<li>「Lookerの記事一覧 | Zenn」のフィード</li>
</ul>
</li>
<li><a href="https://qiita.com/tags/looker/feed">https://qiita.com/tags/looker/feed</a>

<ul>
<li>「Looker - Qiita」のフィード</li>
</ul>
</li>
</ul>


<p>Twitter は <a href="https://ifttt.com/">IFTTT</a> を使って、同 channel に POST しています。</p>

<ul>
<li><code>If</code> New tweet from search <code>#looker OR LookML lang:ja -rt</code></li>
<li><code>Then</code> Post to channel

<ul>
<li>Channel: <code>#news-looker</code></li>
<li>Message: <code>@{{UserName}} : {{Text}} (via Twitter {{LinkToTweet}})</code></li>
</ul>
</li>
</ul>


<p>「Looker APAC Forum | Facebook」は集約できませんでしたが、Twitter にも流れることがあるので、一旦考えないことにしました。</p>

<h2 id="Looker-Communityのフィードが存在した件">「Looker Community」のフィードが存在した件</h2>

<p><a href="https://community.looker.com/%E3%83%8B%E3%83%A5%E3%83%BC%E3%82%B9%E3%81%A8%E5%91%8A%E7%9F%A5-100/%E3%82%AB%E3%83%86%E3%82%B4%E3%83%AA-the-kitchen-table-%E3%81%8C%E5%85%AC%E9%96%8B%E3%81%95%E3%82%8C%E3%81%BE%E3%81%97%E3%81%9F-24032?postid=45126#post45126">Looker の水野さんに聞いたら、調べて教えて下さいました。</a>🙏</p>

<ul>
<li>(1) 新しいトピックの投稿

<ul>
<li><a href="https://community.looker.com/feed/topics">https://community.looker.com/feed/topics</a></li>
</ul>
</li>
<li>(2) 全ての新しい投稿（最初の投稿（タイトル＋ボディ）+ 全てのリプライ）

<ul>
<li><a href="https://community.looker.com/feed/buzzcapture">https://community.looker.com/feed/buzzcapture</a></li>
</ul>
</li>
</ul>


<p>アナウンス記事です。
<a href="https://community.looker.com/%E3%83%8B%E3%83%A5%E3%83%BC%E3%82%B9%E3%81%A8%E5%91%8A%E7%9F%A5-100/looker%E3%82%B3%E3%83%9F%E3%83%A5%E3%83%8B%E3%83%86%E3%82%A3%E3%81%AErss%E3%83%95%E3%82%A3%E3%83%BC%E3%83%89-25553?postid=46404#post46404">LookerコミュニティのRSSフィード | Looker Community</a></p>

<p>(1) と (2) は両方とも「Looker 日本語コミュニティフォーラム」の情報も流れてきます。</p>

<p>今は (2) を購読しており、トラフィックはそれなりにあります。もちろんほぼ全て英語です。辛かったら (1) にすると良いと思います。</p>

<p><a href="https://community.looker.com/">https://community.looker.com/</a> の HTML には RSS/Atom 情報がないので、これらのフィードに気づける人は少ないと思います。Looker さんには是非お願いしたいところです。</p>

<h2 id="Looker-の記事一覧--DevelopersIOのフィードを作った件">「Looker の記事一覧 | DevelopersIO」のフィードを作った件</h2>

<p>ないものは仕方がないので、<a href="https://feed43.com/">Feed43</a> というサービスで作りました。</p>

<p><iframe src="https://hatenablog-parts.com/embed?url=https%3A%2F%2Fmasutaka.net%2Fchalow%2F2021-03-14-1.html" title="フィード（RSS/Atom）を配信していないサイトのフィードを Feed43 で作成する" class="embed-card embed-webcard" scrolling="no" frameborder="0" style="display: block; width: 100%; height: 155px; max-width: 500px; margin: 10px 0px;"></iframe></p>

<p>出来たのが <a href="https://feed43.com/developersio-looker.xml">https://feed43.com/developersio-looker.xml</a> です。どなたでも購読可能です。よろしければどうぞ。</p>

<p>HTML をパースしているだけなので、HTML 構造が変わったら壊れることはあると思います。気づけたら直します。</p>

<p>本当は <a href="https://dev.classmethod.jp/tags/looker/">https://dev.classmethod.jp/tags/looker/</a> のフィードがあれば良いのですけどね。今後に期待です。</p>

<p>[Update] そのものズバリ <a href="https://dev.classmethod.jp/feed/?tag=looker">https://dev.classmethod.jp/feed/?tag=looker</a> を <a href="https://twitter.com/sh19910711/status/1427429573117964306">Twitterで教えて</a>頂きました。ありがとうございます！</p>

<h2 id="まとめ">まとめ</h2>

<p>私が１年かけて辿り着いた、Looker の情報取得方法をご紹介しました。</p>

<p>これで Looker の情報は大量にインプット出来たので、今後はコミュニティにアウトプットしていきます。🔥
※ ネタは少しあるけど、時間がない。(^^;</p>

<p>皆さんにも参考になれば幸いです。他にもあれば <a href="https://twitter.com/masutaka">@masutaka</a> に教えて下さい！</p>

<h2 id="追記">追記</h2>

<blockquote><p>他にもあれば <a href="https://twitter.com/masutaka">@masutaka</a> に教えて下さい！</p></blockquote>

<p>記事にも登場して頂いた Looker の水野さん <a href="https://twitter.com/tomoya_cs">@tomoya_cs</a> をフォローするとさらに捗ると思います。</p>

<p><blockquote data-conversation="none" class="twitter-tweet" data-lang="ja"><p lang="ja" dir="ltr">Lookerの情報収集本当に至難と思いますが、まとめていただきありがとうございます😭<br>あとは私をフォローいただけると最新情報が入手しやすくなるかと（アウトプットがんばります🙇‍♂️） <a href="https://t.co/eDQz8A5VCC">https://t.co/eDQz8A5VCC</a></p>&mdash; tomoya | Looker CS (@tomoya_cs) <a href="https://twitter.com/tomoya_cs/status/1428194155943972872?ref_src=twsrc%5Etfw">2021年8月19日</a></blockquote> <script async src="https://platform.twitter.com/widgets.js" charset="utf-8"></script> </p>
<div class="footnote">
<p class="footnote"><a href="#fn-25b67c2a" name="f-25b67c2a" class="footnote-number">*1</a><span class="footnote-delimiter">:</span><span class="footnote-text"><a href="https://ja.wikipedia.org/wiki/%E3%83%93%E3%82%B8%E3%83%8D%E3%82%B9%E3%82%A4%E3%83%B3%E3%83%86%E3%83%AA%E3%82%B8%E3%82%A7%E3%83%B3%E3%82%B9">Business Intelligence</a></span></p>
<p class="footnote"><a href="#fn-e46aea89" name="f-e46aea89" class="footnote-number">*2</a><span class="footnote-delimiter">:</span><span class="footnote-text"><a href="https://slack.com/intl/ja-jp/help/articles/218688467-Slack-%E3%81%AB-RSS-%E3%83%95%E3%82%A3%E3%83%BC%E3%83%89%E3%82%92%E8%BF%BD%E5%8A%A0%E3%81%99%E3%82%8B">Slack に RSS フィードを追加する | Slack</a></span></p>
<p class="footnote"><a href="#fn-c898f381" name="f-c898f381" class="footnote-number">*3</a><span class="footnote-delimiter">:</span><span class="footnote-text">例: <a href="https://community.looker.com/%E3%83%8B%E3%83%A5%E3%83%BC%E3%82%B9%E3%81%A8%E5%91%8A%E7%9F%A5-100/looker-21-12-%E3%83%AA%E3%83%AA%E3%83%BC%E3%82%B9%E3%83%8E%E3%83%BC%E3%83%88-27799">Looker 21.12 リリースノート | Looker Community</a></span></p>
</div>]]></description>
            <enclosure url="https://cdn-ak.f.st-hatena.com/images/fotolife/m/masutaka26/20201023/20201023184859.png" length="0" type="image/png"/>
        </item>
        <item>
            <title><![CDATA[Chrome から Firefox に乗り換えたよ]]></title>
            <link>https://masutaka.net/2021-08-07-1/</link>
            <guid>https://masutaka.net/2021-08-07-1/</guid>
            <pubDate>Sat, 07 Aug 2021 00:00:00 GMT</pubDate>
            <description><![CDATA[[2011-06-03-1] に Firefox から Chrome に乗り換えて以来です。ちょうど 10 年。iPhone から Android への乗り換え [2020-07-14-1] も 10 年だったし、飽きづらいマスタカも 10 年が周期みたいです。
まあ、普通の人は乗り換えたことをいちいち記録しないし、もっとカジュアルにあっちこっち使う気はしてます。
このブログの名前が「マスタカの ChangeLog メモ」なので記録せざるを得ないのです。もう大変。(&gt;o&lt;)
飽きたのはありますが、この Issue がきっかけではあります。Xkeysnail と Chrome の組み合わせで、カーソル移動やタブ移動のキーが 2 回発行されてしまう問題です。もう修正されたようですが、回避方法がダウングレードしかなく地味に厄介でした。そんな私はブラウザ乗り換えで回避したという&hellip;。
10 年前は Firefox と Keysnail を使っていました。個人 PC を Linux にした ことで、また同じ作者である mooz さん作の Xkeysnail を Firefox でも使うことには感慨深いものがあります。
そういえば Manjaro (Linux) のデフォルトブラウザは Firefox でした。それも戻った理由ではあるかな。Chrome だと AUR でインストールする必要があるのですよね。
10 年と書きましたが、その間 2 回ほど Firefox に戻ろうとしていました。
2017 年の時は、20 日程度戻ってました。当時は Quantum として大型アップデートされた直後で、アドオンが割と壊れていた記憶。1Password アドオンはまだなかった。あと、Multi-Account Containers に惑わされてしまった。
loading...]]></description>
        </item>
        <item>
            <title><![CDATA[３月に無償提供となった Microsoft Power Automate Desktop を今さらながら使ってみた]]></title>
            <link>https://masutaka.net/2021-07-28-1/</link>
            <guid>https://masutaka.net/2021-07-28-1/</guid>
            <pubDate>Wed, 28 Jul 2021 00:00:00 GMT</pubDate>
            <description><![CDATA[※ 会社の「インフラ共有会」用に書いた記事の転載です。Windows PC を買った [2021-05-06-1] ので、個人で試せることに気づいてちょろっと試したって経緯です。
Microsoft、自社製RPAツールを全Windows 10ユーザーに無償提供　マウスクリックやキーボード入力をGUIで自動化：Microsoft Ignite 2021 - ITmedia NEWS ・動作するのは目の前の Windows PC。エクセルとかのマクロをパワーアップしたものに近いかも
・ スケジュール（時間を指定した自動実行）の機能は見つけられなかった。寝ている間に自動実行とかは出来ない気がした
・Chrome の「要素を検証」みたいな感覚で、クリックやフォームの位置を指定できる
・要素名を変更するなど細かい微調整は出来ないようなので、id 名等が少しでも変わるとフローが動かなくなるかも
・アクションの種類は多彩で、頑張れば「LINEビジネスアカウントでログインして、レポートをローカルフォルダにダウンロードし、それを Google スプレッドシートにインポート」は出来ると思う
・今起動しているブラウザにも接続できるようなので、２段階認証突破のハードルは多少低そう
Power Automate と Power Automate Desktop との違いはイマイチ理解できていない。難しい&hellip;。
・Power Automate ・Power Automate Desktop ← 今回はこっち
多彩なアクション ※ フローの新規作成画面です。
フローを作った様子 https://www.myfitnesspal.com/ja/account/login にログインして csv ファイルをダウンロードするフローを作ったが、MyFitnesspal は「CSV ファイルをダウンロードするためのリンクを含んだメールが届きます」だと知った。試しに作るには大きすぎるため心が折れた。(^^;
インストール方法や実行方法などの紹介動画 うぃんどうずしょしんしゃなので、わかりやすいどうがをみたよ。
 ]]></description>
        </item>
        <item>
            <title><![CDATA[Firestore エミュレーターを使ったテスト同士の競合が起きないようにしていい感じにテストできるようにした話]]></title>
            <link>https://developer.feedforce.jp/entry/2021/07/07/103917</link>
            <guid>https://developer.feedforce.jp/entry/2021/07/07/103917</guid>
            <pubDate>Wed, 07 Jul 2021 01:39:17 GMT</pubDate>
            <description><![CDATA[<p>こんにちは、エンジニアの <a href="http://blog.hatena.ne.jp/len_prog/" class="hatena-id-icon"><img src="https://cdn.profile-image.st-hatena.com/users/len_prog/profile.png" width="16" height="16" alt="" class="hatena-id-icon">id:len_prog</a> です。</p>

<p>私が所属している <a href="https://ecbooster.jp/">EC Booster</a> チームでは、「<a href="https://support.ecbooster.jp/ja/articles/4854572-%E3%82%AB%E3%82%A4%E3%82%BC%E3%83%B3%E3%82%AB%E3%83%BC%E3%83%89%E3%81%AE%E6%A6%82%E8%A6%81%E3%81%A8%E4%BD%BF%E7%94%A8%E6%96%B9%E6%B3%95%E3%81%AB%E3%81%A4%E3%81%84%E3%81%A6">カイゼンカード</a>」機能の開発に Firebase を採用しています。<br />
その中でも特に Cloud Functions for Firebase と Cloud Firestore をメインで使用しており、これらの採用により短い開発期間で機能をリリースすることができました 🎉</p>

<p>しかし、Firebase を採用したことで苦労したことが全く無かったわけではありません。<br />
特に、テスト周りはインターネット上にもあまり情報が多くない状況で、色々ハマりながら開発をしてきました。</p>

<p>そこで、今回の記事では、いくつかあったハマりごとの中でも特に厄介だったものについて対策を書いていきます。</p>

<h1>Firestore Emulator のプロジェクト共有時のデータ競合</h1>

<p><a href="https://firebase.google.com/docs/emulator-suite?hl=ja">Firebase Local Emulator Suite</a> を使って Firestore に接続するテストを書いていた際に、<br />
テストを単体で実行した場合には通るのに、他のテストと並列に実行した場合のみドキュメントの状態が予期せぬものになりテストが落ちてしまうことに悩まされました。</p>

<p>調査の結果、これは、接続先プロジェクトがすべてのテストで同じになってしまっているのが原因ということが分かりました。</p>

<p>この状態で同じドキュメントを書き換えるテストが並列で走ってしまった場合、実行タイミングによってはドキュメントが予期せぬ状態になってしまいます。<br />
また、テスト結果が不安定だとテストが信用できず、実装を保証するものになりません。</p>

<p>このままでは役に立つテストが書けないと思い試行錯誤した結果、<strong>テストごとに違うプロジェクトの Firestore に接続する</strong>ことでそれぞれのテストが独立した状態で実行でき、結果としてデータ競合が防げることが分かりました。</p>

<p>以下、サンプルアプリケーションを用いてこの方法について書いていきます。</p>

<h1>サンプルアプリケーションの概要</h1>

<p>今回は、サンプルとして簡易的な RPG を開発することを想定します。<br />
ゲームに登場するキャラクターは、以下のような構造のドキュメントを持つ <code>characters</code> コレクションで管理されています。</p>

<pre class="code lang-typescript" data-lang="typescript" data-unlink><span class="synIdentifier">{</span>
  name: <span class="synType">string</span><span class="synStatement">;</span>
  level: <span class="synType">number</span><span class="synStatement">;</span>
  job: <span class="synType">string</span><span class="synStatement">;</span>
<span class="synIdentifier">}</span>
</pre>


<p>また、このゲームでは以下の行動のみが可能と仮定します(これだけじゃゲームとして成り立たないと思いますが、簡単のためということでお許しください)</p>

<ul>
<li>キャラクターは、レベルアップすることができる</li>
<li>キャラクターは、転職することができる

<ul>
<li>転職すると、キャラクターのレベルが1に戻る</li>
</ul>
</li>
</ul>


<p>なお、アプリケーション上においてキャラクターのレベルアップは、<code>characterLevelUpUseCase</code>、キャラクターの転職は <code>characterJobChangeUseCase</code> という関数を呼ぶことで行えることとします。</p>

<p>ここからは、実際にこれら2つの関数のテストコードが競合する様子を見ていきます。</p>

<h1>データ競合発生時の構成</h1>

<p><span itemscope itemtype="http://schema.org/Photograph"><img src="https://cdn-ak.f.st-hatena.com/images/fotolife/l/len_prog/20210624/20210624165133.png" alt="f:id:len_prog:20210624165133p:plain:w500" width="1200" height="790" loading="lazy" title="" class="hatena-fotolife" style="width:500px" itemprop="image"></span></p>

<p><code>characterJobChangeUseCase</code> と <code>characterLevelUpUseCase</code> が <code>my-game</code> プロジェクトの Firestore を共有してしまっています。<br />
この状態で両方の関数から同じドキュメントを書き換えてしまった場合、データ競合が発生する可能性があります。<br />
この場合、実際のコードは以下のようになります。</p>

<pre class="code lang-typescript" data-lang="typescript" data-unlink><span class="synComment">// functions/src/usecases/characterJobChangeUseCase.spec.ts</span>
<span class="synStatement">import</span> * <span class="synStatement">as</span> admin <span class="synStatement">from</span> <span class="synConstant">&quot;firebase-admin&quot;</span><span class="synStatement">;</span>
<span class="synStatement">import</span> <span class="synIdentifier">{</span> characterJobChangeUseCase <span class="synIdentifier">}</span> <span class="synStatement">from</span> <span class="synConstant">&quot;@/usecases/characterJobChangeUseCase&quot;</span><span class="synStatement">;</span>

admin.initializeApp<span class="synStatement">(</span><span class="synIdentifier">{</span>
  projectId: <span class="synConstant">&quot;my-game&quot;</span><span class="synStatement">,</span> <span class="synComment">// ここが問題</span>
<span class="synIdentifier">}</span><span class="synStatement">);</span>

<span class="synStatement">const</span> charactersCollection <span class="synStatement">=</span> admin
  .firestore<span class="synStatement">()</span>
  .collection<span class="synStatement">(</span><span class="synConstant">&quot;characters&quot;</span><span class="synStatement">);</span>

describe<span class="synStatement">(</span>characterJobChangeUseCase<span class="synStatement">,</span> <span class="synStatement">()</span> <span class="synStatement">=&gt;</span> <span class="synIdentifier">{</span>
  <span class="synStatement">const</span> targetCharacterId <span class="synStatement">=</span> <span class="synConstant">&quot;target-character-id&quot;</span><span class="synStatement">;</span>

  beforeEach<span class="synStatement">(async</span> <span class="synStatement">()</span> <span class="synStatement">=&gt;</span> <span class="synIdentifier">{</span>
    <span class="synStatement">await</span> charactersCollection.doc<span class="synStatement">(</span>targetCharacterId<span class="synStatement">)</span>.set<span class="synStatement">(</span><span class="synIdentifier">{</span>
        name: <span class="synConstant">&quot;アルス&quot;</span><span class="synStatement">,</span>
        level: <span class="synConstant">10</span><span class="synStatement">,</span>
        job: <span class="synConstant">&quot;すっぴん&quot;</span><span class="synStatement">;</span>
    <span class="synIdentifier">}</span><span class="synStatement">);</span>
  <span class="synIdentifier">}</span><span class="synStatement">);</span>

  afterEach<span class="synStatement">(async</span> <span class="synStatement">()</span> <span class="synStatement">=&gt;</span> <span class="synIdentifier">{</span>
    <span class="synStatement">await</span> charactersCollection.doc<span class="synStatement">(</span>targetCharacterId<span class="synStatement">)</span>.<span class="synStatement">delete();</span>
  <span class="synIdentifier">}</span><span class="synStatement">);</span>

  it<span class="synStatement">(</span><span class="synConstant">&quot;キャラクターが転職した場合、レベルが1に戻ること&quot;</span><span class="synStatement">,</span> <span class="synStatement">async</span> <span class="synStatement">()</span> <span class="synStatement">=&gt;</span> <span class="synIdentifier">{</span>
    <span class="synStatement">await</span> characterJobChangeUseCase<span class="synStatement">(</span>targetCharacterId<span class="synStatement">);</span> <span class="synComment">// characterJobChangeUsecase#handle に渡された引数の ID を持つユーザーのレベルが1に戻る</span>
    <span class="synStatement">const</span> jobChangedCharacter <span class="synStatement">=</span> <span class="synStatement">(await</span> charactersCollection.doc<span class="synStatement">(</span>targetCharacterId<span class="synStatement">)</span>.get<span class="synStatement">())</span>.data<span class="synStatement">();</span>

    expect<span class="synStatement">(</span>jobChangedCharacter.level<span class="synStatement">)</span>.toBe<span class="synStatement">(</span><span class="synConstant">1</span><span class="synStatement">);</span> <span class="synComment">// 実行タイミング次第では、1になるはずが11になってしまう！</span>
  <span class="synIdentifier">}</span><span class="synStatement">);</span>
<span class="synIdentifier">}</span><span class="synStatement">);</span>
</pre>




<pre class="code lang-typescript" data-lang="typescript" data-unlink><span class="synComment">// functions/src/usecases/characterLevelUpUseCase.spec.ts</span>
<span class="synStatement">import</span> * <span class="synStatement">as</span> admin <span class="synStatement">from</span> <span class="synConstant">&quot;firebase-admin&quot;</span><span class="synStatement">;</span>
<span class="synStatement">import</span> <span class="synIdentifier">{</span> characterLevelUpUseCase <span class="synIdentifier">}</span> <span class="synStatement">from</span> <span class="synConstant">&quot;@/usecases/characterLevelUpUseCase&quot;</span><span class="synStatement">;</span>

admin.initializeApp<span class="synStatement">(</span><span class="synIdentifier">{</span>
  projectId: <span class="synConstant">&quot;my-game&quot;</span><span class="synStatement">,</span> <span class="synComment">// ここが問題</span>
<span class="synIdentifier">}</span><span class="synStatement">);</span>

<span class="synStatement">const</span> charactersCollection <span class="synStatement">=</span> admin
  .firestore<span class="synStatement">()</span>
  .collection<span class="synStatement">(</span><span class="synConstant">&quot;characters&quot;</span><span class="synStatement">);</span>

describe<span class="synStatement">(</span>characterLevelUpUseCase<span class="synStatement">,</span> <span class="synStatement">()</span> <span class="synStatement">=&gt;</span> <span class="synIdentifier">{</span>
  <span class="synStatement">const</span> targetCharacterId <span class="synStatement">=</span> <span class="synConstant">&quot;target-character-id&quot;</span><span class="synStatement">;</span>

  beforeEach<span class="synStatement">(async</span> <span class="synStatement">()</span> <span class="synStatement">=&gt;</span> <span class="synIdentifier">{</span>
    <span class="synStatement">await</span> charactersCollection.doc<span class="synStatement">(</span>targetCharacterId<span class="synStatement">)</span>.set<span class="synStatement">(</span><span class="synIdentifier">{</span>
        name: <span class="synConstant">&quot;アルス&quot;</span><span class="synStatement">,</span>
        level: <span class="synConstant">10</span><span class="synStatement">,</span>
        job: <span class="synConstant">&quot;すっぴん&quot;</span><span class="synStatement">;</span>
    <span class="synIdentifier">}</span><span class="synStatement">);</span>
  <span class="synIdentifier">}</span><span class="synStatement">);</span>

  afterEach<span class="synStatement">(async</span> <span class="synStatement">()</span> <span class="synStatement">=&gt;</span> <span class="synIdentifier">{</span>
    <span class="synStatement">await</span> charactersCollection.doc<span class="synStatement">(</span>targetCharacterId<span class="synStatement">)</span>.<span class="synStatement">delete();</span>
  <span class="synIdentifier">}</span><span class="synStatement">);</span>

  it<span class="synStatement">(</span><span class="synConstant">&quot;キャラクターがレベルアップした場合、レベルが1上がること&quot;</span><span class="synStatement">,</span> <span class="synStatement">async</span> <span class="synStatement">()</span> <span class="synStatement">=&gt;</span> <span class="synIdentifier">{</span>
    <span class="synStatement">await</span> characterLevelUpUseCase<span class="synStatement">(</span>targetCharacterId<span class="synStatement">);</span> <span class="synComment">// characterJobChangeUsecase#handle に渡された引数の ID を持つユーザーのレベルが1上がる</span>
    <span class="synStatement">const</span> grownCharacter <span class="synStatement">=</span> <span class="synStatement">(await</span> charactersCollection.doc<span class="synStatement">(</span>targetCharacterId<span class="synStatement">)</span>.get<span class="synStatement">())</span>.data<span class="synStatement">();</span>

    expect<span class="synStatement">(</span>grownCharacter.level<span class="synStatement">)</span>.toBe<span class="synStatement">(</span><span class="synConstant">11</span><span class="synStatement">);</span> <span class="synComment">// 実行タイミング次第では、11になるはずが1に戻ってしまう！</span>
  <span class="synIdentifier">}</span><span class="synStatement">);</span>
<span class="synIdentifier">}</span><span class="synStatement">);</span>
</pre>


<p>見ての通り、両方のテストが <code>my-game</code> プロジェクトの Firestore の、ID: <code>target-character-id</code> のドキュメントを更新してしまっています。<br />
これらのテストコードを並列で実行した場合、<strong>キャラクターが転職したのにレベルが1に戻らない</strong>、<strong>キャラクターがレベルアップしたはずなのになぜかレベル1に戻ってしまう</strong>など予期せぬ状態になってしまい、
テストが落ちてしまう可能性があります。</p>

<p>この状態ではテストコードが信用できないので、テストごとに向き先プロジェクトを変えてこの問題を解決していきます。</p>

<h1>データ競合解決後の構成</h1>

<p><span itemscope itemtype="http://schema.org/Photograph"><img src="https://cdn-ak.f.st-hatena.com/images/fotolife/l/len_prog/20210705/20210705113933.png" alt="f:id:len_prog:20210705113933p:plain:w500" width="1200" height="779" loading="lazy" title="" class="hatena-fotolife" style="width:500px" itemprop="image"></span></p>

<p>上図②③のようにテストごとに接続先プロジェクトを独立させることで、他のテストとの並列実行が原因のデータ競合を防ぐことができます。<br />
具体的には、以下のように <code>admin.initializeApp()</code>の第一引数に他のテストと重複しないプロジェクトID を渡すようにします。</p>

<pre class="code lang-typescript" data-lang="typescript" data-unlink><span class="synComment">// functions/src/usecases/characterJobChangeUseCase.spec.ts</span>

admin.initializeApp<span class="synStatement">(</span><span class="synIdentifier">{</span>
  projectId: <span class="synConstant">&quot;character-job-change-use-case-spec&quot;</span><span class="synStatement">,</span> <span class="synComment">//  図の②に対応</span>
<span class="synIdentifier">}</span><span class="synStatement">);</span>

<span class="synComment">// functions/src/usecases/characterLevelUpUseCase.spec.ts</span>

admin.initializeApp<span class="synStatement">(</span><span class="synIdentifier">{</span>
  projectId: <span class="synConstant">&quot;character-level-up-use-case-spec&quot;</span><span class="synStatement">,</span> <span class="synComment">// 図の③に対応</span>
<span class="synIdentifier">}</span><span class="synStatement">);</span>
</pre>


<p>変更後のコードの全体像は以下のようになります。</p>

<pre class="code lang-typescript" data-lang="typescript" data-unlink><span class="synComment">// functions/src/usecases/characterJobChangeUseCase.spec.ts</span>
<span class="synStatement">import</span> * <span class="synStatement">as</span> admin <span class="synStatement">from</span> <span class="synConstant">&quot;firebase-admin&quot;</span><span class="synStatement">;</span>
<span class="synStatement">import</span> <span class="synIdentifier">{</span> characterJobChangeUseCase <span class="synIdentifier">}</span> <span class="synStatement">from</span> <span class="synConstant">&quot;@/usecases/characterJobChangeUseCase&quot;</span><span class="synStatement">;</span>

admin.initializeApp<span class="synStatement">(</span><span class="synIdentifier">{</span>
  projectId: <span class="synConstant">&quot;character-job-change-use-case-spec&quot;</span><span class="synStatement">,</span> <span class="synComment">//  図の②に対応</span>
<span class="synIdentifier">}</span><span class="synStatement">);</span>

<span class="synComment">// ここから下は構成変更前のコードと同じ</span>

<span class="synStatement">const</span> charactersCollection <span class="synStatement">=</span> admin
  .firestore<span class="synStatement">()</span>
  .collection<span class="synStatement">(</span><span class="synConstant">&quot;characters&quot;</span><span class="synStatement">);</span>

describe<span class="synStatement">(</span>characterJobChangeUseCase<span class="synStatement">,</span> <span class="synStatement">()</span> <span class="synStatement">=&gt;</span> <span class="synIdentifier">{</span>
  <span class="synStatement">const</span> targetCharacterId <span class="synStatement">=</span> <span class="synConstant">&quot;target-character-id&quot;</span><span class="synStatement">;</span>

  beforeEach<span class="synStatement">(async</span> <span class="synStatement">()</span> <span class="synStatement">=&gt;</span> <span class="synIdentifier">{</span>
    <span class="synStatement">await</span> charactersCollection.doc<span class="synStatement">(</span>targetCharacterId<span class="synStatement">)</span>.set<span class="synStatement">(</span><span class="synIdentifier">{</span>
        name: <span class="synConstant">&quot;アルス&quot;</span><span class="synStatement">,</span>
        level: <span class="synConstant">10</span><span class="synStatement">,</span>
        job: <span class="synConstant">&quot;すっぴん&quot;</span><span class="synStatement">;</span>
    <span class="synIdentifier">}</span><span class="synStatement">);</span>
  <span class="synIdentifier">}</span><span class="synStatement">);</span>

  afterEach<span class="synStatement">(async</span> <span class="synStatement">()</span> <span class="synStatement">=&gt;</span> <span class="synIdentifier">{</span>
    <span class="synStatement">await</span> charactersCollection.doc<span class="synStatement">(</span>targetCharacterId<span class="synStatement">)</span>.<span class="synStatement">delete();</span>
  <span class="synIdentifier">}</span><span class="synStatement">);</span>

  it<span class="synStatement">(</span><span class="synConstant">&quot;キャラクターが転職した場合、レベルが1に戻ること&quot;</span><span class="synStatement">,</span> <span class="synStatement">async</span> <span class="synStatement">()</span> <span class="synStatement">=&gt;</span> <span class="synIdentifier">{</span>
    <span class="synStatement">await</span> characterJobChangeUseCase<span class="synStatement">(</span>targetCharacterId<span class="synStatement">);</span> <span class="synComment">// characterJobChangeUsecase#handle に渡された引数の ID を持つユーザーのレベルが1に戻る</span>
    <span class="synStatement">const</span> jobChangedCharacter <span class="synStatement">=</span> <span class="synStatement">(await</span> charactersCollection.doc<span class="synStatement">(</span>targetCharacterId<span class="synStatement">)</span>.get<span class="synStatement">())</span>.data<span class="synStatement">();</span>

    expect<span class="synStatement">(</span>jobChangedCharacter.level<span class="synStatement">)</span>.toBe<span class="synStatement">(</span><span class="synConstant">1</span><span class="synStatement">);</span> <span class="synComment">// 転職するとレベルが1に戻ることを検証できるようになった</span>
  <span class="synIdentifier">}</span><span class="synStatement">);</span>
<span class="synIdentifier">}</span><span class="synStatement">);</span>
</pre>




<pre class="code lang-typescript" data-lang="typescript" data-unlink><span class="synComment">// functions/src/usecases/characterLevelUpUseCase.spec.ts</span>
<span class="synStatement">import</span> * <span class="synStatement">as</span> admin <span class="synStatement">from</span> <span class="synConstant">&quot;firebase-admin&quot;</span><span class="synStatement">;</span>
<span class="synStatement">import</span> <span class="synIdentifier">{</span> characterLevelUpUseCase <span class="synIdentifier">}</span> <span class="synStatement">from</span> <span class="synConstant">&quot;@/usecases/characterLevelUpUseCase&quot;</span><span class="synStatement">;</span>

admin.initializeApp<span class="synStatement">(</span><span class="synIdentifier">{</span>
  projectId: <span class="synConstant">&quot;character-level-up-use-case-spec&quot;</span><span class="synStatement">,</span> <span class="synComment">// 図の③に対応</span>
<span class="synIdentifier">}</span><span class="synStatement">);</span>

<span class="synComment">// ここから下は構成変更前のコードと同じ</span>

<span class="synStatement">const</span> charactersCollection <span class="synStatement">=</span> admin
  .firestore<span class="synStatement">()</span>
  .collection<span class="synStatement">(</span><span class="synConstant">&quot;characters&quot;</span><span class="synStatement">);</span>

describe<span class="synStatement">(</span>characterLevelUpUseCase<span class="synStatement">,</span> <span class="synStatement">()</span> <span class="synStatement">=&gt;</span> <span class="synIdentifier">{</span>
  <span class="synStatement">const</span> targetCharacterId <span class="synStatement">=</span> <span class="synConstant">&quot;target-character-id&quot;</span><span class="synStatement">;</span>

  beforeEach<span class="synStatement">(async</span> <span class="synStatement">()</span> <span class="synStatement">=&gt;</span> <span class="synIdentifier">{</span>
    <span class="synStatement">await</span> charactersCollection.doc<span class="synStatement">(</span>targetCharacterId<span class="synStatement">)</span>.set<span class="synStatement">(</span><span class="synIdentifier">{</span>
        name: <span class="synConstant">&quot;アルス&quot;</span><span class="synStatement">,</span>
        level: <span class="synConstant">10</span><span class="synStatement">,</span>
        job: <span class="synConstant">&quot;すっぴん&quot;</span><span class="synStatement">;</span>
    <span class="synIdentifier">}</span><span class="synStatement">);</span>
  <span class="synIdentifier">}</span><span class="synStatement">);</span>

  afterEach<span class="synStatement">(async</span> <span class="synStatement">()</span> <span class="synStatement">=&gt;</span> <span class="synIdentifier">{</span>
    <span class="synStatement">await</span> charactersCollection.doc<span class="synStatement">(</span>targetCharacterId<span class="synStatement">)</span>.<span class="synStatement">delete();</span>
  <span class="synIdentifier">}</span><span class="synStatement">);</span>

  it<span class="synStatement">(</span><span class="synConstant">&quot;キャラクターがレベルアップした場合、レベルが1上がること&quot;</span><span class="synStatement">,</span> <span class="synStatement">async</span> <span class="synStatement">()</span> <span class="synStatement">=&gt;</span> <span class="synIdentifier">{</span>
    <span class="synStatement">await</span> characterLevelUpUseCase<span class="synStatement">(</span>targetCharacterId<span class="synStatement">);</span> <span class="synComment">// characterJobChangeUsecase#handle に渡された引数の ID を持つユーザーのレベルが1上がる</span>
    <span class="synStatement">const</span> grownCharacter <span class="synStatement">=</span> <span class="synStatement">(await</span> charactersCollection.doc<span class="synStatement">(</span>targetCharacterId<span class="synStatement">)</span>.get<span class="synStatement">())</span>.data<span class="synStatement">();</span>

    expect<span class="synStatement">(</span>grownCharacter.level<span class="synStatement">)</span>.toBe<span class="synStatement">(</span><span class="synConstant">11</span><span class="synStatement">);</span> <span class="synComment">// レベルアップした場合にレベルが1上がることを検証できるようになった</span>
  <span class="synIdentifier">}</span><span class="synStatement">);</span>
<span class="synIdentifier">}</span><span class="synStatement">);</span>
</pre>


<p>このようにテストごとに向き先プロジェクトを変えることで、それぞれのテストで担保したいことをちゃんと担保できるようになります。</p>

<h1>ちょっと微妙な点</h1>

<p>上記の方法でテストごとに独立した環境の Firestore を操作できるようになり、データ競合を防げるようになりました。</p>

<p>しかし、この方法にはひとつだけ微妙な点があります。<br />
問題の説明のために、先程掲載した<code>競合解決後の構成図</code>を再掲します。</p>

<p><span itemscope itemtype="http://schema.org/Photograph"><img src="https://cdn-ak.f.st-hatena.com/images/fotolife/l/len_prog/20210705/20210705113933.png" alt="f:id:len_prog:20210705113933p:plain:w500" width="1200" height="779" loading="lazy" title="" class="hatena-fotolife" style="width:500px" itemprop="image"></span></p>

<p>上図①の接続先は、<code>$ firebase use</code> で指定したプロジェクトか、<code>$ firebase emulators:start</code> に <code>--project</code>を渡した場合にはそのプロジェクトになり、そのほかの方法で変えることは今のところできないようです。</p>

<p>そのため、プロジェクトをテストごとに分けた場合、上図②③のテスト中にテスト自体は動くものの、Firebase Emulator の UI からデータの内容を見ることはできなくなります。</p>

<p>一応、接続先を <code>$ firebase use</code> で指定しているものに切り替えるようコードを書き換えたりすればデバッグはできますが、
いちいち書き換えの手間が生じるので若干面倒です。</p>

<p>また、これは Firebase Enulator の UI で立ち上がっているすべてのプロジェクトの Firestore を見られるようになれば解決する問題ではあり、実際に <a href="https://github.com/firebase/firebase-tools-ui">firebase/firebase-tools-ui</a> リポジトリに <a href="https://github.com/firebase/firebase-tools-ui/issues/281">issue</a> も立っていますが、すぐに対応が終わりそうには見えない状況なので、しばらくは不便な状況が続くことが予想されます。</p>

<h1>所感</h1>

<p>Firebase は便利ですが、当然ながら全くハマらずに開発できる銀の弾丸ではないですね。<br />
しかし、基本的には便利でドキュメントもそれなりに読みやすく、個人的には使っていて満足感があります。</p>

<p>今後も日々の開発で得た Firebase や GCP 周りの TIPS を書いていけたらと思っておりますので、よろしくお願いいたします 🙏</p>
]]></description>
            <enclosure url="https://cdn-ak.f.st-hatena.com/images/fotolife/l/len_prog/20210705/20210705113933.png" length="0" type="image/png"/>
        </item>
        <item>
            <title><![CDATA[Apple Silicon Mac で複数 Terraform バージョンを管理するために asdf-terraform-build を作った]]></title>
            <link>https://blog.tsub.me/post/create-asdf-terraform-build/</link>
            <guid>https://blog.tsub.me/post/create-asdf-terraform-build/</guid>
            <pubDate>Sat, 19 Jun 2021 08:41:36 GMT</pubDate>
            <description><![CDATA[<p><a href="https://github.com/tsub/asdf-terraform-build"><img src="https://gh-card.dev/repos/tsub/asdf-terraform-build.svg?fullname=" alt="tsub/asdf-terraform-build - GitHub" /></a></p>

<p></p>]]></description>
        </item>
        <item>
            <title><![CDATA[一年間の育休から復帰しました]]></title>
            <link>https://developer.feedforce.jp/entry/2021/06/16/120000</link>
            <guid>https://developer.feedforce.jp/entry/2021/06/16/120000</guid>
            <pubDate>Wed, 16 Jun 2021 03:00:00 GMT</pubDate>
            <description><![CDATA[<p>こんにちは、インフラエンジニアの <a href="http://blog.hatena.ne.jp/tsub511/" class="hatena-id-icon"><img src="https://cdn.profile-image.st-hatena.com/users/tsub511/profile.png" width="16" height="16" alt="" class="hatena-id-icon">id:tsub511</a> です。実は去年の 1 月から 1 年間育休を取っており、今年の 1 月から復帰していました。</p>

<p>復帰してから記事を書くのが遅くなってしまいましたが、社内勉強会で話したスライドや育休から復帰してみてどうだったかをまとめてみました。</p>

<h2>社内勉強会で話した</h2>

<p>今年の 3 月頃に社内の技術勉強会 <a href="https://developer.feedforce.jp/archive/category/FFTT">FFTT</a> で発表しました。
(技術勉強会という立て付けですが、技術に限らず本人が話したいことを話して良い場です)</p>

<script async class="speakerdeck-embed" data-id="e196f600db8d42c4841227d36b76f3b5" data-ratio="1.77777777777778" src="//speakerdeck.com/assets/embed.js"></script>


<p>なぜ一年間の育休を取得したのか、育児の知見などがスライド内に書いてありますので気になる方はご覧ください！</p>

<p>ちなみに当時のスライド内ではねんねトレーニング (ネントレ) をやっていると書いてありますが、実は現在はやってません。</p>

<p>理由はネントレの効果が見られなくなったためです。</p>

<p>今年の 4 月くらいから寝付きが悪くなり、胸や背中をトントンしないと寝てくれなくなってしまいました。</p>

<p>それ以降夜通し寝てくれないことも増えてしまい、再度ネントレにチャレンジしましたが夜泣きは改善されなかったため、夜泣きの原因は寝かしつけ方法と直接関係ないのでは？と思いネントレをやめました。</p>

<p>ちょうどその頃から奥歯が生え始めていたので、それが原因だったのではないかとは思っています。</p>

<p>ここ最近は歯の痛みが落ち着いたのか、夜泣きが少し減ってきたような気がします。と思ってたらまた夜泣きが復活しました... 😭</p>

<p>やっぱりセルフねんねしてくれてた頃と比べて寝かしつけにかかる時間は増えましたが...</p>

<p>寝かしつけで悩んでいる方にとって少しでも参考になれば幸いです。
(自分はめっちゃ悩んだ)</p>

<h2>育休から復帰した感想</h2>

<p>スライド内でも触れていましたが、やはり一番感じたことは一年間というそれなりに長い期間にも関わらず、普段有給を取るのとそこまで大きく変わらないくらいの感覚でした。</p>

<p>もちろん育休を取るという話をしてからチーム内での調整は行いましたが、取得する障壁は特にありませんでした。
チームメンバーも育休は取得する前提で育休期間中はどう進めていくのか、という話にフォーカスしている印象でした。</p>

<p>そして、一年間の育休を終えて復帰する際にもすんなり業務に戻ることができました。</p>

<p>人事やチームメンバーが自分の育休中の変化を事前に記事にまとめてくれていたこともあり、キャッチアップも大体 2 週間くらいで完了しました。</p>

<p>復帰がスムーズにいった理由の 1 つにチーム体制や使用技術に大きな変化がなかったことも大きいと思います。</p>

<p>以下の記事でも軽く触れていますので良ければご覧ください。</p>

<p><iframe src="https://hatenablog-parts.com/embed?url=https%3A%2F%2Fmedia.feedforce.jp%2Fn%2Fn98075add5154" title="「謙虚な人が多い」「有休みたいに育休がとれる」エンジニアが語る、フィードフォースのぶっちゃけ裏話｜フィードフォースのnote" class="embed-card embed-webcard" scrolling="no" frameborder="0" style="display: block; width: 100%; height: 155px; max-width: 500px; margin: 10px 0px;"></iframe></p>

<h2>働き方の変化</h2>

<p>育休取得前後 (子どもが生まれる前後) での大きな変化の 1 つとして、働き方がかなり変わりました。</p>

<p>子どもが生まれる前は 10:00 ~ 19:00 で働いており、モチベーションや体力がある日は少し長めに働いたり、反対に効率の悪い日は早めに退勤したりという働き方をしていました。</p>

<p>子どもが生まれた後は保育園や子どもの就寝時間の都合で 8:00 ~ 17:00 で働くこととなり、保育園の送り迎えや夕飯の支度などがあるので長めに働くということができなくなりました。</p>

<p>また、プライベートの時間で技術的な勉強をやることもほとんどなくなってしまいました。</p>

<p>やる時間が全くないわけではないのですが、ゲームなどでリフレッシュしないと育児疲れが厳しいのと、まとまった時間が取りづらいのが理由です。</p>

<p>子どもが起きている間はなかなか PC を広げて作業しづらいですし、寝ている間も夜泣きなどでいつ泣くか分からないので集中して作業ができないです。</p>

<p>とはいえプライベートで開発する時間を取れなくても個人的にはそこまでストレスになっていなくて、今はそういう時期と割り切っています。</p>

<p>また仕事で直接使えるような技術の検証であれば、チームの計画に入れて業務時間内で進められるのでなんとかなっています。</p>

<h2>終わりに</h2>

<p>育休から復帰してまだ半年程度なので育児もまだまだこれからという感じですが、仕事との両立を引き続き頑張っていきたいと思います 💪</p>

<p>ちなみに自分が育休から復帰した前後で他のエンジニアも育休を取得していました。よければこちらの記事もぜひご覧ください！</p>

<p><iframe src="https://hatenablog-parts.com/embed?url=https%3A%2F%2Fmedia.feedforce.jp%2Fn%2Fn6cf3af35cb86" title="「家庭あっての職業人」限られた時間で成果を出すためにパパエンジニアが取り組んでいること｜フィードフォースのnote" class="embed-card embed-webcard" scrolling="no" frameborder="0" style="display: block; width: 100%; height: 155px; max-width: 500px; margin: 10px 0px;"></iframe></p>
]]></description>
            <enclosure url="https://cdn.user.blog.st-hatena.com/default_entry_og_image/4268819/1588226000876991" length="0" type="image//default_entry_og_image/4268819/1588226000876991"/>
        </item>
        <item>
            <title><![CDATA[『ここがつらいよ普段使いのLinux』という発表をした]]></title>
            <link>https://developer.feedforce.jp/entry/2021/06/11/180000</link>
            <guid>https://developer.feedforce.jp/entry/2021/06/11/180000</guid>
            <pubDate>Fri, 11 Jun 2021 09:00:00 GMT</pubDate>
            <description><![CDATA[<p>こんにちは <a href="http://blog.hatena.ne.jp/masutaka26/" class="hatena-id-icon"><img src="https://cdn.profile-image.st-hatena.com/users/masutaka26/profile.png" width="16" height="16" alt="" class="hatena-id-icon">id:masutaka26</a> です。いよいよ明後日は <a href="https://jp.rizinff.com/_ct/17440570">RIZIN.28</a> ですね！東京ドームで MMA（総合格闘技）のイベントが行われるのは、約 17 年半ぶりだそうです（Wikipedia 調べ）。ドキが胸胸します。</p>

<p>本日、週次の社内勉強会 <a href="https://developer.feedforce.jp/archive/category/FFTT">FFTT</a> で『ここがつらいよ普段使いのLinux』という発表をしました。タイトルは違いますが、気にしないで下さい。</p>

<iframe src="https://docs.google.com/presentation/d/e/2PACX-1vTBXZg9pczERJABgT3Uuu922Ktcc91HHl00QOtySt7fFtxrL4NZOcco1BtkK_pDuFkO0Uo-JuAwBkoC/embed?start=false&loop=false&delayms=3000" frameborder="0" width="960" height="400" allowfullscreen="true" mozallowfullscreen="true" webkitallowfullscreen="true"></iframe>


<p>Mac が重い時に IME 切り替えが一瞬遅れて、例えば「feedforce」とタイプする時に「ふぇえ...」になる現象に悩まされていました。</p>

<p>そこで約 10 年ぶりに Windows PC を購入して、同じく約 10 年ぶりに Linux を普段使いし始めました。</p>

<p>数々の諸問題が発生しましたが、無事全部解決（？）したお話です。</p>

<ul>
<li>キーボードショートカットがつらい</li>
<li>タッチパッドがつらい</li>
<li>指紋認証出来なくてつらい</li>
<li>たまにスリープから復帰しなくてつらい（一番つらい）</li>
<li>ちょっとした画像編集に GIMP を使うのはつらい</li>
</ul>


<p>みんなも Mac を捨てて Linux を使うといいと思うよ！</p>

<p>それでは！</p>

<p><div class="hatena-asin-detail"><a href="https://www.amazon.co.jp/exec/obidos/ASIN/4871908240/hatena-blog-22/" class="hatena-asin-detail-image-link" target="_blank" rel="noopener"><img src="https://m.media-amazon.com/images/I/51NEN46FW9L._SL500_.jpg" class="hatena-asin-detail-image" alt="だれでもできるLinuxセットアップ―無料(ただ)なのに頼れるOSリヌクス" title="だれでもできるLinuxセットアップ―無料(ただ)なのに頼れるOSリヌクス"></a><div class="hatena-asin-detail-info"><p class="hatena-asin-detail-title"><a href="https://www.amazon.co.jp/exec/obidos/ASIN/4871908240/hatena-blog-22/" target="_blank" rel="noopener">だれでもできるLinuxセットアップ―無料(ただ)なのに頼れるOSリヌクス</a></p><ul class="hatena-asin-detail-meta"><li><span class="hatena-asin-detail-label">作者:</span><a href="http://d.hatena.ne.jp/keyword/%CE%EB%CC%DA%20%C5%AF%BA%C8" class="keyword">鈴木 哲哉</a></li><li>オーエス出版</li></ul><a href="https://www.amazon.co.jp/exec/obidos/ASIN/4871908240/hatena-blog-22/" class="asin-detail-buy" target="_blank" rel="noopener">Amazon</a></div></div></p>
]]></description>
            <enclosure url="https://m.media-amazon.com/images/I/51NEN46FW9L._SL500_.jpg" length="0" type="image/jpg"/>
        </item>
        <item>
            <title><![CDATA[【2021年夏】半期に1度の Engineer’s Principles Award 受賞者を紹介します]]></title>
            <link>https://developer.feedforce.jp/entry/2021/06/11/164253</link>
            <guid>https://developer.feedforce.jp/entry/2021/06/11/164253</guid>
            <pubDate>Fri, 11 Jun 2021 07:42:53 GMT</pubDate>
            <description><![CDATA[<p><span itemscope itemtype="http://schema.org/Photograph"><img src="https://cdn-ak.f.st-hatena.com/images/fotolife/f/feedforce_recruit/20210611/20210611163915.jpg" alt="f:id:feedforce_recruit:20210611163915j:plain" width="1200" height="700" loading="lazy" title="" class="hatena-fotolife" itemprop="image"></span></p>

<p>こんにちは。人事の今岡と申します。
2021年もあっという間に6月ですね。</p>

<p>フィードフォースでは先日オンライン納会が開催され、半期に一度の「Engineer’s Principles Award 2021 Summer」の受賞者が発表されました。
今回アワードを受賞した開発メンバーと表彰内容をご紹介します。</p>

<p>前回の表彰者紹介はコチラ</p>

<p><iframe src="https://hatenablog-parts.com/embed?url=https%3A%2F%2Fdeveloper.feedforce.jp%2Fentry%2F2020%2F12%2F28%2F131042" title="半期に1度の Engineer’s Principles Award 受賞者を紹介します - Feedforce Developer Blog" class="embed-card embed-blogcard" scrolling="no" frameborder="0" style="display: block; width: 100%; height: 190px; max-width: 500px; margin: 10px 0px;"></iframe><cite class="hatena-citation"><a href="https://developer.feedforce.jp/entry/2020/12/28/131042">developer.feedforce.jp</a></cite></p>

<h2>Engineer’s Principles Award とは</h2>

<p>Engineer’s Principles とは、フィードフォースの開発メンバー向けに現場が主体となって設定した、5つの行動指針です。
半期に一度、開発メンバー同士で投票を行い、行動指針の項目ごとに最も体現しているメンバーが選ばれ表彰されます。</p>

<p>Engineer’s Principles についてはこちら</p>

<p><iframe src="https://hatenablog-parts.com/embed?url=https%3A%2F%2Fmedia.feedforce.jp%2Fn%2Fnd1f2236470b3" title="フィードフォースが目指すエンジニア像とは。「Engineer’s Principles」を紹介します｜フィードフォースのnote" class="embed-card embed-webcard" scrolling="no" frameborder="0" style="display: block; width: 100%; height: 155px; max-width: 500px; margin: 10px 0px;"></iframe><cite class="hatena-citation"><a href="https://media.feedforce.jp/n/nd1f2236470b3">media.feedforce.jp</a></cite></p>

<h2>受賞者紹介</h2>

<p>※表彰コメントは本来社内向けのものであるため一部変更させていただいています。受賞者によって各種アカウントを載せています。</p>

<h3>🏆「Stay Humble; 常に謙虚であるべし」受賞者</h3>

<h4>@len_prog さん</h4>

<p>表彰コメント：<br />
社内でメジャーな Rails 以外でバックエンドを実装する際に、なぜそうするのかという理由やレイヤーの切り方を他のメンバーにわかりやすく説明していました。
一方、自分自身で苦手なことがあった場合に、他の人に相談したり、フィードバックを求めそれを受け入れる姿勢は、まさに Stay Humble だと思いました。</p>

<p><i class="blogicon-twitter"></i> <a href="https://twitter.com/len_prog">Len (@len_prog)</a> , <i class="blogicon-entry"></i> <a href="https://len-prog.hatenablog.com/">Blog</a></p>

<h4>@katsunn さん</h4>

<p>表彰コメント：<br />
事前に色々なアイデアを用意しつつも、相談の過程でお互いの認識や意図を踏まえたうえで改善を進めていく一方、ただ受け入れるだけではなく、
プロフェッショナルとして自分なりに咀嚼したアウトプットにしていく姿勢が非常に素晴らしく、ベンチマークにすべきだと感じました。</p>

<p><i class="blogicon-twitter"></i>  <a href="https://twitter.com/nomo_017">のもち(@nomo_017)</a></p>

<h3>🏆「Be Positive &amp; Proactive; 常に肯定的・主体的であるべし」受賞者</h3>

<h4>@sukechannnn さん</h4>

<p>表彰コメント：<br />
エンジニアとして様々なチームビルディングや開発手法を試しているだけではなく、ビジネス視点からも方向性を考え、
プロダクトオーナーとしてプロダクトを成長させようとしている姿勢は、まさにこの言葉にぴったりだと思います。</p>

<p><i class="blogicon-twitter"></i> <a href="https://twitter.com/sukechannnn"> sukechannnn (@sukechannnn)</a> , <i class="fa fa-github" aria-hidden="true"></i> <a href="https://github.com/sukechannnn">sukechannnn</a></p>

<h4>@daido1976 さん</h4>

<p>表彰コメント：<br />
分野を問わず新しいことに前向きに挑戦し、気になったことはどんどん質問するのに加え、
育休中のメンバーに代わって、率先してチームを引っ張っている行動力が素晴らしいと思いました。</p>

<p><i class="blogicon-twitter"></i>  <a href="https://twitter.com/daido1976">Daido Shota (@daido1976)</a> , <i class="fa fa-github" aria-hidden="true"></i>  <a href="https://github.com/daido1976"> daido1976</a></p>

<h3>🏆「Be Prepared; 常に来たるべき機会に備えるべし」受賞者</h3>

<h4>@daido1976 さん</h4>

<p>表彰コメント：<br />
自分のキャリアや目指すべき方向を踏まえつつ、常にアンテナを立てて知識を広く持とうとしている姿勢がよいと感じています。
さらに、そうして蓄積したスキルを開発だけではなく、自ら手を挙げ講師をつとめた新卒向け Web 研修にも活かしている点がまさに Be Prepared だと思いました。</p>

<p><i class="blogicon-twitter"></i>  <a href="https://twitter.com/daido1976">Daido Shota (@daido1976)</a> , <i class="fa fa-github" aria-hidden="true"></i>  <a href="https://github.com/daido1976"> daido1976</a></p>

<h4>@namikingsoft さん</h4>

<p>表彰コメント：<br />
Omni Hub の開発において、あまり開発経験がなかったはずの Rust を使いこなしつつ WAF を含めたインフラ構築をしていて、
@namikingsoft さんの強みが発揮される局面でした。また dfplus.io でもパフォーマンス改善でコアな知識を活かすなど、まさにこれまでの準備の賜物だと思います。</p>

<p><i class="fa fa-github" aria-hidden="true"></i> <a href="https://github.com/namikingsoft">namikingsoft</a></p>

<h3>🏆「Share All; 己の知見、試行、失敗、遍く共有すべし」受賞者</h3>

<h4>@masutaka さん</h4>

<p>表彰コメント：<br />
Looker 導入において知見や失敗など社内共有しているほか、そもそも  esa にどう記録すべきかといった、「共有のための知見の共有」にまで配慮しています。
Slack や esa 、Blog への共有はエンジニアのみならず、全社的にプラスの影響を与えていて、まさに共有の神様と言えるでしょう。</p>

<p><i class="blogicon-twitter"></i> <a href="https://twitter.com/masutaka">Takashi Masuda (@masutaka)</a> , <i class="fa fa-github" aria-hidden="true"></i> <a href="https://github.com/masutaka">masutaka</a> , <i class="blogicon-entry"></i> <a href="https://masutaka.net/">Blog</a></p>

<h4>@kogai さん</h4>

<p>表彰コメント：<br />
Shopify 周りでは、社内だけでなく社外に対してのプレゼンスを示しています。また Omni Hub の開発で多忙な中、
社内勉強会 Rust の会では実際の新規事業のプロダクトコードを題材に実践的な知見を共有するなど、その共有力はフィードフォースエンジニアの鑑（かがみ）だと思います。</p>

<p><i class="blogicon-twitter"></i> <a href="https://twitter.com/iamchawan">茶碗 (@iamchawan)</a> ,<i class="fa fa-github" aria-hidden="true"></i> <a href="https://github.com/kogai">kogai</a> , <i class="blogicon-entry"></i> <a href="https://k9bookshelf.com/blogs/development">Blog</a></p>

<h3>🏆「Just Do It; 全力でやりきるべし」受賞者</h3>

<h4>@namikingsoftさん</h4>

<p>表彰コメント：<br />
Omni  Hub リリースまでの道筋をきちんと立ててスケジュール以上の速さで完走して去っていくその姿は、まさに Just Do It でした。</p>

<p><i class="fa fa-github" aria-hidden="true"></i> <a href="https://github.com/namikingsoft">namikingsoft</a></p>

<h2>周囲の賞賛・承認を共有するよい機会に</h2>

<p>以上、延べ9名の受賞者でした。</p>

<p>表彰コメントは、<strong>開発メンバー同士の投票時に自由記述できるコメントがもとになっているので</strong>、周囲からの賞賛・承認の声を全社で共有できるよい機会となっています。</p>

<p>前回に引き続き連続受賞しているメンバーもいますが、投票コメントには毎回違ったエピソードが集まっており、日ごろから継続的に実践をしているからこそ周りのエンジニアの目に留まるのだと感じました。</p>

<p>受賞者のみなさん、おめでとうございました！</p>
]]></description>
            <enclosure url="https://cdn.user.blog.st-hatena.com/default_entry_og_image/4268819/1588226000876991" length="0" type="image//default_entry_og_image/4268819/1588226000876991"/>
        </item>
        <item>
            <title><![CDATA[Dependabot の Terraform 1.0 対応が完了した件]]></title>
            <link>https://masutaka.net/2021-06-10-1/</link>
            <guid>https://masutaka.net/2021-06-10-1/</guid>
            <pubDate>Thu, 10 Jun 2021 00:00:00 GMT</pubDate>
            <description><![CDATA[[2021-05-27-1] のつづき。この間に 1.0 がリリースされてました ね。
先ほど、Lockfile (.terraform.lock.hcl) の対応が完了したそうです。
https://github.com/dependabot/dependabot-core/issues/1176#issuecomment-858490407 これで Dependabot での terraform 対応が完了しました。
・terraform version は自動更新できない
・provider version を自動更新できる。その際、.terraform.lock.hcl も更新されるはず
・以前の Dependabot で対応されていた module version はどうなんだろう？使ってないので分からない
dependabot.yml のドキュメントはこちら。 circleci-tfupdate-orb はそろそろアーカイブしたいな。でも Dependabot だと terraform version は更新出来ないんだよね&hellip;。
追記(2021-06-11):
公式でもアナウンスされてました。
Dependabot now supports Terraform 1.0｜GitHub Changelog ]]></description>
        </item>
        <item>
            <title><![CDATA[プランニングの難しさを乗り越えて...スクラム開発が良い感じになった話]]></title>
            <link>https://developer.feedforce.jp/entry/2021/05/31/104813</link>
            <guid>https://developer.feedforce.jp/entry/2021/05/31/104813</guid>
            <pubDate>Mon, 31 May 2021 01:48:13 GMT</pubDate>
            <description><![CDATA[<p>こんにちは。フィードフォースの <a href="https://ecbooster.jp/">EC Booster</a> チームで開発（主にプロダクトオーナー）をしている <a href="https://twitter.com/sukechannnn">@sukechannnn</a> です。元々ずっとバックエンドエンジニアでしたが、最近プロダクトオーナーをやるようになりました（理由はのちほど！）。</p>

<p>昨年のアドベントカレンダーで <a href="https://developer.feedforce.jp/entry/2020/12/11/172338">半年モブプロしたらチームが大きく成長した話</a> というブログを書いたのですが、2021年3月から <strong>モブプロを取り入れたスクラム開発</strong> をしています。それに伴って、"モブプロ" と "個人タスク⇢レビュー" の両軸で開発するようになりました（<a href="https://prtimes.jp/main/html/rd/p/000000040.000071307.html">先日リリースしたカイゼンカード</a> はスクラムで開発しました）。</p>

<p><iframe src="https://hatenablog-parts.com/embed?url=https%3A%2F%2Fdeveloper.feedforce.jp%2Fentry%2F2020%2F12%2F11%2F172338" title="半年モブプロしたらチームが大きく成長した話 - Feedforce Developer Blog" class="embed-card embed-blogcard" scrolling="no" frameborder="0" style="display: block; width: 100%; height: 190px; max-width: 500px; margin: 10px 0px;"></iframe></p>

<p>今は良い感じに回っていますが、そうなるまでに色々と試行錯誤したので、そこで得た学びをお伝えできればと思います。全員リモートワークで開発するなら、モブプロを取り入れたスクラムはおすすめです！</p>

<ul class="table-of-contents">
    <li><a href="#モブプロの良さと難しさ">モブプロの良さと難しさ</a></li>
    <li><a href="#そうだスクラムしよう">そうだ、スクラムしよう！</a></li>
    <li><a href="#プランニングが終わらない問題">プランニングが終わらない問題</a></li>
    <li><a href="#原因はissue-が散らかっていることだった">原因は「issue が散らかっていること」だった</a></li>
    <li><a href="#issue-をグルーピング優先順位はそれぞれで">issue をグルーピング、優先順位はそれぞれで</a></li>
    <li><a href="#まとめ">まとめ</a></li>
</ul>

<h2 id="モブプロの良さと難しさ">モブプロの良さと難しさ</h2>

<p>モブプロ中心の開発を初めた当初は、以下の利点を感じていました。</p>

<ul>
<li>ドメイン知識の共有がしやすい</li>
<li>コンテキストの共有がしやすい（"何をどう作るか" という議論もしやすい）</li>
<li>レビューが要らない</li>
<li>リモートワークでもさみしくない（だいじ）</li>
</ul>


<p>しばらくモブプロを続ける中で、開発メンバー全員がドメイン知識やフロント〜バックエンド全体の技術的な知識を共有している状態になりました。なので、なにか悩みがあってモブプロで共有すると「わかる〜」となるし、何より単純に仲良くなったと思います（ﾖｼｯ!!）。</p>

<p>一方で、だんだんと <strong>モブプロだけ</strong> の開発が窮屈になってきました。</p>

<ul>
<li>知識の共有が進んできて "全員でやらなくても良くない？" というタスクが増えてきた</li>
<li>個人でじっくり考えた方が良いタスクもあるのが分かった（新しい技術の調査、設計の見直しなど）</li>
</ul>


<p>これはチームが成長したことで出てきた嬉しい悩みなのですが、とはいえ完全にモブプロを辞めるのも上述したメリットを失いそうで怖い...。チーム全員で「今後どう開発していこう？」というのを話し合い、<strong>モブプロを取り入れたスクラム開発</strong> を試してみることにしました。</p>

<h2 id="そうだスクラムしよう">そうだ、スクラムしよう！</h2>

<p>スクラム開発をしようと思ったのは、ストーリーポイント<a href="#f-9495249b" name="fn-9495249b" title="ストーリーポイント：プロダクトバックログ（タスク）を見積もるためにチームが使う単位で、前回の見積もりに対する相対評価を用いる">*1</a>で見積もって <strong>ベロシティ<a href="#f-33d76d3d" name="fn-33d76d3d" title="ベロシティ：スプリントの期間でチームが届けることができる見積もり（ストーリーポイント）の合計のこと">*2</a>を測りたい</strong> という別の目的もありました。</p>

<p>モブプロで開発していると新機能のメイン開発は着実に進んでいくのですが、それ以外の細かいタスク（主に保守系）が見積もりづらい状況で、空いた時間にやるという形になってしまっていました（それ用に時間は設けていましたが）。</p>

<p>モブプロ以外の個人タスクを計画的にやりたい、見積もりもしっかりやりたい、ということで、スクラムを導入することで、<strong>モブプロと個人開発のいいとこ取り</strong> をしようと考えました。</p>

<ul>
<li>新機能開発などのコンテキストの共有が重要なタスクは引き続きモブプロでやる

<ul>
<li>ストーリーポイントで見積もる</li>
</ul>
</li>
<li>それ以外は個人タスクとして各自で進められるように、プランニングでしっかり整理する

<ul>
<li>個人タスクもストーリーポイントで見積もる</li>
</ul>
</li>
<li>全てのタスクをストーリーポイントで見積もるのでベロシティが測れるようになる

<ul>
<li>振り返りで見積もりの精度を上げられる</li>
</ul>
</li>
</ul>


<p>めっちゃ良さそう...そう思っていざやってみたところ、１つ大きな壁にぶち当たってしまいました。</p>

<h2 id="プランニングが終わらない問題">プランニングが終わらない問題</h2>

<p><a href="https://www.shoeisha.co.jp/book/detail/9784798130507">エッセンシャルスクラム</a>にもある通り、１週間のプランニングに２時間以上かけるべきではありません。僕らは「１スプリント=１週間」で回しているため、２時間の予定で始めたプランニングですが、これが終わらない...。最初から何回かは４時間以上かかり、全員ヘトヘトになってしまいました。</p>

<p>モブプロはプランニングが簡単です。全員やることが同じなので、基本的にタスクが直列で繋がっていきます。そのため「今スプリントはここから⇢ここまで」という感じで Sprint Backlog 的なものを決めることができました。</p>

<p>しかし、スクラムの見積もりはもっと横断的なものです。単純に、今取り組んでいるものだけ見れば良いのではなく、これから取り組むものをたくさんある issue から選ぶ必要があります。そう、この <strong>たくさんある issue の中から今スプリントにやるタスクを選ぶこと</strong> に時間がかかってしまうのです。</p>

<p>以前にもスクラム開発を試したことがあるのですが、その時もこれが原因でプランニングがとても大変でした。気にするトピックが多すぎてだんだん何について議論してるか分からなくなり、空中戦になってしまうんですよね...。</p>

<p>その原因は、主に以下の２つでした。</p>

<ul>
<li>バックログの整理/管理に責任を持つ人（プロダクトオーナー<a href="#f-339964b7" name="fn-339964b7" title="プロダクトオーナー：プロダクトバックログの管理をする人で、優先順位を付けることに責任を持つ（１人の人間が務める、委員会ではない）">*3</a>）がいなかった</li>
<li>issue の数と種類が多く、バックログリファインメント<a href="#f-f2375d03" name="fn-f2375d03" title="バックログリファインメント：プランニングの前にプロダクトバックログを見直し、プランニング可能な状態にしておくこと">*4</a>をしても整理しきれなかった</li>
</ul>


<p>プロダクトオーナー不在の問題は、元々それっぽいことをしていた僕が、改めてプロダクトオーナーやりますと手を上げ、バックログ管理の責任を持つことになりました。</p>

<p>それでも、バックログリファインメントが上手く行かない問題は残っていました。リファインメントの概念は理解していて、しっかり時間も取っていたのに、いざプランニングをすると色々な issue を見すぎて伸びてしまう...。過去に何度も直面したこの問題に、改めて取り組むことにしました。</p>

<h2 id="原因はissue-が散らかっていることだった">原因は「issue が散らかっていること」だった</h2>

<p>僕たちが開発している EC Booster は、ショッピング広告の自動運用やデータフィードの更新など、様々なジョブが裏で動いています。そのため、運用作業が日々発生し、運用の中で見つかる例外ケースやバグの修正が多々あります。
また、フロントエンドとバックエンドを全員が開発するため、１つのリポジトリで管理していることもあり、色々な種類の issue が１つのレーンに入り乱れてしまっていました。</p>

<p>そのため、優先順位を付けるのも難しく、また「次スプリントで何をどこまでやるか？」を判断するのが難しくなってしまっていました。</p>

<p>プロダクトバックログを整理しなければ、というのは分かっているのですが、スクラムに関する本やブログには整理の方法は書いてありません。どうやって整理したら分かりやすくなるかな...と考えていたところ、同僚が共有してくれた以下の記事が参考になりました。</p>

<p><a href="https://note.com/gonjyu/n/nd7bf3efa0728">エンジニア歴17年の俺が、事業系の開発タスクをバンバン投げてくる非エンジニアに、保守の必要性を死ぬほど分かりやすく説明する。</a></p>

<p>この記事の中で「issueには "種類" がある」と言っていて、issue の種類別に整理された図が載っていました。これだ...！</p>

<h2 id="issue-をグルーピング優先順位はそれぞれで">issue をグルーピング、優先順位はそれぞれで</h2>

<p>上記の記事を参考に、issue を <strong>新機能開発</strong>、<strong>バグ修正/運用改善</strong>、<strong>ライブラリーアップデート</strong> に分けて、それぞれのレーンで優先順位を付けるようにしました。</p>

<p><figure class="figure-image figure-image-fotolife" title="issue をグルーピング、優先順位はそれぞれで"><span itemscope itemtype="http://schema.org/Photograph"><img src="https://cdn-ak.f.st-hatena.com/images/fotolife/s/sukechannnn/20210526/20210526215948.png" alt="f:id:sukechannnn:20210526215948p:plain" title="" class="hatena-fotolife" itemprop="image"></span><figcaption>issue をグルーピング、優先順位はそれぞれで</figcaption></figure></p>

<p>issue の種類が同じなので、優先順位を付けるのは簡単です。さらに、スプリントバックログに入れるタスクを <strong>新機能開発：運用系 = ６：４</strong> の割合にする、という決めを作りました。さらに、何回かスプリントを回してベロシティも見えてきました。</p>

<p>ここまで情報が揃うと <strong>次のスプリントで何をやるか決める基準</strong> ができてきます。</p>

<p>そもそもの「次のプランニングでどの issue について話すか？」というのも、それぞれのレーンで優先順位が高い issue を６：４のバランスとベロシティを参考に選べるようになりました。<strong>プランニングの前</strong>にプロダクトオーナーが（開発チームと協力しながら）当たりを付けておくことで、プランニングで話すトピックを事前に共有できるようになり、開発メンバーそれぞれが事前に頭を整理しておくこともできるようになりました。</p>

<p>これにより、プランニングがかなりスムーズに進むようになったので、いよいよスクラムが回り始めました。新機能開発はモブプロの同期的な開発で、それ以外のタスクは個人タスク⇢レビューという非同期な開発で進められるようになり、デリバリーの最大化を目指しつつ、個人の稼働率も上げられるようになりました。</p>

<p><figure class="figure-image figure-image-fotolife" title="GitHub Project を使ってタスク管理してる様子...横に長いんですが、情報が整理されてる方が優先順位を付けやすい"><span itemscope itemtype="http://schema.org/Photograph"><img src="https://cdn-ak.f.st-hatena.com/images/fotolife/s/sukechannnn/20210526/20210526212511.png" alt="f:id:sukechannnn:20210526212511p:plain" title="" class="hatena-fotolife" itemprop="image"></span><figcaption>GitHub Project を使ってタスク管理してる様子...横に長いんですが、情報が整理されてる方が優先順位を付けやすい</figcaption></figure></p>

<h2 id="まとめ">まとめ</h2>

<p>issue をグルーピングしそれぞれで優先順位を付けたことで、プランニングが時間内に収まるようになっただけでなく、プランニングで話すトピックを絞ったことでより深い議論をすることができるようになりました。今は「モブプロを取り入れたスクラム」がとても良い感じに回っています！</p>

<p>↓ EC Booster チームでの「スプリントの回し方」資料を公開しているので、気になった方はぜひ見てみてください！（もっとこうしたら良いよ！という助言などあれば頂けると嬉しいです！）</p>

<iframe src="https://docs.google.com/presentation/d/e/2PACX-1vTQY639rUAwDDtLfj_c9WbU1E0IlDSFzAbrP-XFCmbg8V_sNKPX_pCvKpiy50CQpS02nXvZnQHBb6JT/embed?start=false&loop=false&delayms=3000" frameborder="0" width="960" height="569" allowfullscreen="true" mozallowfullscreen="true" webkitallowfullscreen="true"></iframe>


<p>こんな感じ開発している EC Booster ですが、ただ今 <strong>バックエンド（Ruby, Rails）が得意なエンジニアを猛烈に必要としています！！！</strong></p>

<p>もしちょっっっとでも興味があれば、 <strong>僕とお話しましょう！</strong> 以下から気軽に応募してください！
<a href="https://open.talentio.com/1/c/feedforce/requisitions/detail/19785">https://open.talentio.com/1/c/feedforce/requisitions/detail/19785</a></p>

<p>最後まで読んでいただき、ありがとうございました！</p>
<div class="footnote">
<p class="footnote"><a href="#fn-9495249b" name="f-9495249b" class="footnote-number">*1</a><span class="footnote-delimiter">:</span><span class="footnote-text"><a href="https://www.ryuzee.com/contents/blog/3716">ストーリーポイント</a>：プロダクトバックログ（タスク）を見積もるためにチームが使う単位で、前回の見積もりに対する相対評価を用いる</span></p>
<p class="footnote"><a href="#fn-33d76d3d" name="f-33d76d3d" class="footnote-number">*2</a><span class="footnote-delimiter">:</span><span class="footnote-text"><a href="https://www.ryuzee.com/contents/blog/4802">ベロシティ</a>：スプリントの期間でチームが届けることができる見積もり（ストーリーポイント）の合計のこと</span></p>
<p class="footnote"><a href="#fn-339964b7" name="f-339964b7" class="footnote-number">*3</a><span class="footnote-delimiter">:</span><span class="footnote-text"><a href="https://www.ryuzee.com/contents/blog/7143">プロダクトオーナー</a>：プロダクトバックログの管理をする人で、優先順位を付けることに責任を持つ（１人の人間が務める、委員会ではない）</span></p>
<p class="footnote"><a href="#fn-f2375d03" name="f-f2375d03" class="footnote-number">*4</a><span class="footnote-delimiter">:</span><span class="footnote-text"><a href="https://www.ryuzee.com/contents/blog/5024">バックログリファインメント</a>：プランニングの前にプロダクトバックログを見直し、プランニング可能な状態にしておくこと</span></p>
</div>]]></description>
            <enclosure url="https://cdn-ak.f.st-hatena.com/images/fotolife/s/sukechannnn/20210526/20210526215948.png" length="0" type="image/png"/>
        </item>
        <item>
            <title><![CDATA[暑がりの私にはマスクチェーンがとても合ってる]]></title>
            <link>https://masutaka.net/2021-05-30-1/</link>
            <guid>https://masutaka.net/2021-05-30-1/</guid>
            <pubDate>Sun, 30 May 2021 00:00:00 GMT</pubDate>
            <description><![CDATA[去年の秋くらいからマスクチェーン（ストラップ）を使っています。私はとても暑がりなのと、マスクの着用感が好きではないので、かなり重宝しています。
どのくらい暑がりかと言うと、中学生の時は暑くない水泳部に入ったり、毎日スーツを着る会社には絶対に入社しなかったり、今の会社が上場した時も暑かったので（スーツが必要な）東証には行かなかったり、まあそんな感じです。
外に出た時にスッと外せるのがとても良いです。店で食事をする時、ベタッと置かずに済むのも良いです。
弱点は強風です。一度強風に煽られて外れたことがあります。どうにかならないかな&hellip;？
最近買って、とても気に入ったのがこちらです。約 70cm あり、チェーンもしっかりしています。男性向けらしいです。
 その少し前に買ったのがこちら。メンズと書いてありますが、女性向けかなと思いました。55cm と少し短いのと、見た目よりもチェーンがずっと細いからです。細いせいでやや絡まりやすいです。クロスの飾りは結構きれいで、マスクをした時に主張してくれます。チェーンの長さが足りないので常用はしませんが、特別な日（）には付けようと思いました。
 こちらは入門者向けかな？最初に買いました。当時の値段も ￥398 でとても安かったです。ストラップの長さは 60cm です。このくらいは欲しいところです。後ろで止めると、耳が痛くならないみたいです。しかし４本は要らなかった&hellip;。
 これから暑い夏が始まるので、さらに活躍してくれそうです。]]></description>
        </item>
        <item>
            <title><![CDATA[Dependabot の Terraform 0.15 対応が進んでいる件]]></title>
            <link>https://masutaka.net/2021-05-27-1/</link>
            <guid>https://masutaka.net/2021-05-27-1/</guid>
            <pubDate>Thu, 27 May 2021 00:00:00 GMT</pubDate>
            <description><![CDATA[最近この Issue が活発になってきました。
Terraform 0.15 support · Issue #1176 · dependabot/dependabot-core 実はプロバイダーバージョンのアップデートだけならもう使えます。
・プロバイダーバージョンのアップデートはもう動く
・↑の後に必要な .terraform.lock.hcl の更新は実装中とのこと。現在は手動で &ldquo;$ terraform init -upgrade&rdquo; が必要
・terraform バージョンのアップデートはロードマップに含まれていない ↓プライベートリポジトリで動いている様子。
dependabot.yml のドキュメントはここにある ので、試してみるのも良いかもしれません。
↓このブログが置いてあるリポジトリの .github/dependabot.yml です。daily はやり過ぎなのであとで減らそう。
version: 2 updates: - package-ecosystem: &#34;terraform&#34; directory: &#34;/terraform/aws&#34; schedule: interval: &#34;daily&#34; time: &#34;12:00&#34; timezone: &#34;Asia/Tokyo&#34; assignees: - &#34;masutaka&#34; open-pull-requests-limit: 10 - package-ecosystem: &#34;terraform&#34; directory: &#34;/terraform/heroku&#34; schedule: interval: &#34;daily&#34; time: &#34;12:00&#34; timezone: &#34;Asia/Tokyo&#34; assignees: - &#34;masutaka&#34; open-pull-requests-limit: 10 今までの経緯とか Terraform 0.]]></description>
        </item>
        <item>
            <title><![CDATA[エンジニアキャリアパスをアップデートしました]]></title>
            <link>https://developer.feedforce.jp/entry/career_path_revised_2021</link>
            <guid>https://developer.feedforce.jp/entry/career_path_revised_2021</guid>
            <pubDate>Mon, 24 May 2021 02:00:00 GMT</pubDate>
            <description><![CDATA[<p>こんにちは、<a href="https://twitter.com/meihong">meihong</a> です。</p>

<p>株式会社フィードフォースでは<a href="https://media.feedforce.jp/n/nc7a2e89635eb">定期評価ではなく本人の希望するタイミングで評価を行う制度</a>を導入しています。具体的には、各等級ごとに満たすべき基準・条件、またはスキルがあらかじめ提示されており、それを満たしていれば次の等級に進める制度になります。</p>

<p><iframe src="https://hatenablog-parts.com/embed?url=https%3A%2F%2Fmedia.feedforce.jp%2Fn%2Fn222a08fd3e2b" title="半年に1回の評価制度を毎月の評価制度に変えた話｜フィードフォースのnote" class="embed-card embed-webcard" scrolling="no" frameborder="0" style="display: block; width: 100%; height: 155px; max-width: 500px; margin: 10px 0px;"></iframe><cite class="hatena-citation"><a href="https://media.feedforce.jp/n/n222a08fd3e2b">media.feedforce.jp</a></cite></p>

<p>この基準やスキルを私たちはキャリアパスと呼んでいますが、今回、エンジニアのキャリアパスをアップデートしましたのでご紹介したいと思います。</p>

<p><span itemscope itemtype="http://schema.org/Photograph"><img src="https://cdn-ak.f.st-hatena.com/images/fotolife/m/meihong/20210524/20210524010544.png" alt="f:id:meihong:20210524010544p:plain" width="1200" height="630" loading="lazy" title="" class="hatena-fotolife" itemprop="image"></span></p>

<h2>なぜキャリアパスをアップデートしたのか</h2>

<p>もともとのキャリアパスは<a href="https://media.feedforce.jp/n/n222a08fd3e2b">導入当初に設計されたもの</a>をベースに、マネージャやエンジニア、新規事業向けエンジニアといった個々人の志向に応じて細分化されていました。</p>

<p>これはこれでよくできたものだったのですが、しばらく運用している中でいくつかの課題点を感じるようになってきました。
例えば、</p>

<ul>
<li>志向ごとに分かれすぎていて、志向を横断した動きが想定しづらくなった。</li>
<li>独り立ちと判断される等級であるメンバーとその一つ上のシニアの境界に「見えない高い壁」が存在するようになった。</li>
<li>シニア以上の等級になるとチームや会社を牽引することを求められ、技術をそれ以上深掘りすることに対して会社がどう考えているのかが見えづらくなった。</li>
</ul>


<p>といったところです。</p>

<p>特にキャリアパス全体として、職種問わず等級が上がれば上がるほどチームや会社への影響力が求められる設計になっています。</p>

<p>もちろんエンジニアも全体への影響力は持つべきなのですが、その持ち方は他の職種と異なり、技術力の広さ、深さといった持ち方もあるのではないかと考えるようになりました。</p>

<p>ここで、個人的にはプロフェッショナルとしてのスキルは体積であり、その底面積はスキルの幅広さだと考えています。</p>

<p><span itemscope itemtype="http://schema.org/Photograph"><img src="https://cdn-ak.f.st-hatena.com/images/fotolife/m/meihong/20210523/20210523235853.png" alt="f:id:meihong:20210523235853p:plain" width="1200" height="731" loading="lazy" title="" class="hatena-fotolife" itemprop="image"></span></p>

<p>極端に底面積が狭いのはさすがに現時点では厳しいとは思いますが、</p>

<ul>
<li>底面積がそれなりである代わりに高さ(= 深さ)がある</li>
<li>底面積が広い (= 引き出しが多い) 反面高さはそこまででもない</li>
</ul>


<p>の両者は体積という意味では同じはずです。</p>

<p><span itemscope itemtype="http://schema.org/Photograph"><img src="https://cdn-ak.f.st-hatena.com/images/fotolife/m/meihong/20210524/20210524000640.png" alt="f:id:meihong:20210524000640p:plain" width="1200" height="576" loading="lazy" title="" class="hatena-fotolife" itemprop="image"></span></p>

<p>この両者が共存できる余地が欲しいと考えていました。</p>

<p>そんな中、弊社デザイナーのキャリアパスがアップデートされました。その中でも目を引いたのは、必須スキルと専門スキルという考え方です。</p>

<p>必須スキルはデザイナーとして必ず持っていて欲しいスキルである一方、専門スキルは本人の志向、特性に応じてピックアップできるというもので、大学の専攻を思い出す建て付けでした。</p>

<p><s>これをパクる</s>これにインスパイアされて、エンジニアのキャリアパスもアップデートすることにしました。</p>

<h2>どのように更新したのか</h2>

<p>結果から先にお伝えしておくと、大まかに以下のような方向性に改訂しました。</p>

<ul>
<li>志向ごとのキャリアパスは止めた。</li>
<li>旧来の「志向」を専門スキルに分解し、専門スキルの組み合わせで個々人の志向・特性を表現できるようにした。</li>
<li>等級が上がれば上がるほど満たすべき専門スキルの最低数が増えるようにした。</li>
</ul>


<p>その結果として、例えば</p>

<ul>
<li>バックエンドエンジニアに特化</li>
<li>フルスタックエンジニア</li>
<li>フルスタックな知識をベースに事業の 0 → 1 フェイズに参画できるエンジニア</li>
<li>カスタマーサクセスエンジニア</li>
<li>アジャイルコーチ</li>
</ul>


<p>といった、実際に社内に存在している各エンジニアの志向や得意なポイントを表現できるようになりました。</p>

<h2>産みの苦しみ</h2>

<p>ここに至るまでには色々な葛藤がありました。
社内の esa にキャリアパスを更新したいと宣言はしたものの、社内のエンジニア個々人の顔を思い浮かべつつ何を専門スキルとして設定するかを考えると想像以上に難しい問題だということに気付きました。</p>

<h3>必須スキルと専門スキル</h3>

<p>そもそも必須スキルと専門スキルとは何か、そこの定義から考えることにしました。</p>

<p>必須スキルとは文字通り、全てのエンジニアが共通に要求されるスキルセットのことです。どちらかというと「バックエンド」「フロントエンド」といった用語で定義されるスキルセットというよりも「フィードフォースに所属するエンジニアとしての振る舞い方」ではないでしょうか。</p>

<p>そう考えながら改訂前のキャリアパスを改めて眺めていると、改訂前のキャリアパスはその振る舞いを定義していることに気付きました。その結果、改訂前のキャリアパスが必須スキルのベースとなりました。</p>

<p>そうです、キャリアパスの改訂によって、より要求水準が上がったとも言えます。</p>

<p>一方、専門スキルは、本人の得意分野、志向、特性を定義するものです。
その志向・方向性で貢献するのであれば、各等級ごとにどの水準の成果を出すべきか。それを定義するものが専門スキルになります。</p>

<h3>専門スキルとはどうあるべきか</h3>

<p>本人の志向を定義するものが専門スキルと説明しましたが、例えばカスタマーサクセスエンジニアやエンジニアリングマネージャといった職種にしてもエンジニアの延長である以上はエンジニアとしての「共通言語」を身につけているべきです。</p>

<p>その「共通言語」とは、例えば設計力であったり、フロントエンドやバックエンドのスキルが該当します。</p>

<p>こういった知識を前提として例えば事業開発であったりチームビルディングを行うべきで、これらの知識がなければエンジニアとの「共通言語」を持っていないと判断せざるを得ません。</p>

<p>一方で、「フロントエンド力」と「バックエンド力」が同じくらい強いエンジニアというのは SSR エンジニアで、そうそう市場には存在しません。そこで、フルスタックとはいえどこかの分野に軸足を置くことができる制度というのも必須に感じました。</p>

<p>ただ、ここの軸足とはあくまでも「フロントエンド」「バックエンド」「インフラ」といった区分けで、エンジニアとしてコードを書き続ける選択をするのであれば、フロントエンド/バックエンド/インフラといった区分に関係なく設計力・実装力が担保されているべきでしょう。</p>

<h3>17 の専門スキル</h3>

<p>ここのバランス感が非常に難しい点でしたが、これを元に 17 の専門スキルを定義しました。
ただし、17 の専門スキルは完全に独立しているわけではなく、以下 6 つは本人の志向を定義するものとして、必ずどれか一つが必須選択としました。</p>

<ul>
<li>バックエンド</li>
<li>フロントエンド</li>
<li>データベース</li>
<li>基盤</li>
<li>カスタマーサクセス</li>
<li>組織支援</li>
</ul>


<p>さらに、上記のうち以下 4 つを選択した場合は「実装・設計」と呼ばれるスキルが必須となります。</p>

<ul>
<li>バックエンド</li>
<li>フロントエンド</li>
<li>データベース</li>
<li>基盤</li>
</ul>


<p>これにより、コードを書き続けるのであればただコードを書くだけでなく、実装力・設計力が要求される建て付けを実現しました。</p>

<p>また、詳細は省きますが、さらにいくつかの例外を設置することで、「全ての分野で等しく強い SSR なフルスタックエンジニア」が求められないようにしています。</p>

<hr />

<p>様々なエッジケースを考慮したせいでちょっと複雑になった感の否めない新しいキャリアパスですが、以前のものと比べるとその分より柔軟なものになったと思います。</p>

<p>今回は敢えて詳細を省きましたが、<a href="https://engineers.recruit.feedforce.jp/#entry">ご興味をお持ちいただけたら是非カジュアル面談でねっちょりとご説明します</a>！</p>
]]></description>
            <enclosure url="https://cdn-ak.f.st-hatena.com/images/fotolife/m/meihong/20210524/20210524010544.png" length="0" type="image/png"/>
        </item>
        <item>
            <title><![CDATA[ノートパソコンクーラーを買い替えた]]></title>
            <link>https://masutaka.net/2021-05-23-1/</link>
            <guid>https://masutaka.net/2021-05-23-1/</guid>
            <pubDate>Sun, 23 May 2021 00:00:00 GMT</pubDate>
            <description><![CDATA[2 年使っていた冷却パッドが寿命っぽいので、エレコムのノートパソコンクーラーを買いました。心配していた冷却効果は申し分なく、ひとまずホッとしています。
 元々こちらの冷却パッドを使っていました。ゲーミング PC 向けみたいです。
 この動画お気に入りです。つい何度も見てしまう中毒性があります。
 少々デカイのが難点でしたが、冷却効果は申し分ありませんでした。
ただ 2 年も使うとホコリが溜まってきます。分解は無理そうで、掃除機で吸うのも限度があります。おまけに 1 本しかないオスオス USB ケーブルがほぼ断線し、5 つあるファンのうち 2 つも回らなくなりました。
ホコリさえ取れれば使い続けるモチベーションはあったのですが、それが無理なので交換するか！という気持ちになりました。今思えばエアダスター使えばよかったのかな。まあいいか&hellip;。
冷却パッドは仕事用です。私は仕事で MacBook Pro 13inch (2019) を使っています。MacBook Pro はアルミの筐体全体から放熱する設計は良いのですが、一緒にキーボードまで熱くなります。激しく集中を削がれるため、やむを得ずこの手のクーラーを使っています。
今回買ったクーラーの話に戻します。
先程書いたとおり冷却効果は申し分ありません。3 段階に調節できる風量は一番小さい 1 で十分です。ただ、風が手前に吹き付けるため、机の上にティッシュとか置いてると吹き飛ばされます。
他はこんな感じです。ホコリは溜まっちゃいそうです。次溜まったらエアダスターを使ってみるか。
良いところ：
軽くてコンパクト。たまの出社日にも持って行けそう
卓上扇風機でもあるけど、実際使っても良さそうな軽さと見た目、それに風量
良くないところ：
micro USB でもなく Type-C でもない謎端子。手持ちの程よい長さのケーブルを使えない
スタンドの傾斜角度がおかしい。ノートパソコンの奥側をどうしても２点で支えることになる。どんな意図で設計したのだろう？
それもあって中華製スマートウォッチ [2018-01-28-1] と干渉して手首が痛い。仕方がないので外してる
ホコリが溜まりそうで掃除も難しそう。この手の冷却器の運命なのか&hellip;
それなりにうるさい。仕事だと気にならないけど、プライベートだと気になるかも
そんなわけでノートパソコンクーラーにまあまあ満足したお話でした。
＜おまけ＞
ファンでホコリが溜まるのなら、ファンがないやつを買えば良いじゃないということで、先にこちらを買ってました。
 結果は大失敗。「うん、冷却台が温まったね」ってだけで冷却効果は皆無でした。返品しました。]]></description>
        </item>
        <item>
            <title><![CDATA[スマホ専用テプラ LR30 を買った]]></title>
            <link>https://masutaka.net/2021-05-20-1/</link>
            <guid>https://masutaka.net/2021-05-20-1/</guid>
            <pubDate>Thu, 20 May 2021 00:00:00 GMT</pubDate>
            <description><![CDATA[私はテプラが苦手です。あのワープロみたいなキーボードがダメ。パソコンと微妙に似ているけどちょっと違う、csh や tcsh みたいな立ち位置がダメです。← 分かりづらい
でもこのテプラはスマホで文字を打てます。発表された当初 から気にはなっていて、今さらながら買ってみました。6,000 円弱とそこまで高くないことと、あったら便利で邪魔にもならないと思ったからです。
 使った感想としては「そこまでオススメはしないけど悪くもない」です。
良いところ：
・Bluetooth 接続がとても楽。ペアリングが必要ない
・スマホ操作なので普通のテプラよりは打ちやすい
・電源が電池なので取り回しが楽。会社でコンセント探したなあ&hellip;
良くないところ：
・感熱プリントなので印刷が１年くらいしかもたない
・同じ理由で印刷が安っぽい
・良さそうな色のテープがない
画像は見てのとおりオレガノです。たまたま家にあった赤ちゃん用のミルカーに入れています。これでバジリコと間違えることはないでしょう。
オレガノの容器はもっと良いのを探しています。なかなかないんだよなあ&hellip;。
もし普通のテプラと同じ印刷方式と同じテープが使えて、スマホから使えて、そこそこの値段だったら買うかも。
と思って改めて探したらあった・・・！(ToT) ただしアプリはヒドイみたい。
   ]]></description>
        </item>
        <item>
            <title><![CDATA[広告の複数媒体に対するCPA最小化・ROAS最大化となる予算配分を計算しよう]]></title>
            <link>https://developer.feedforce.jp/entry/2021/05/13/093842</link>
            <guid>https://developer.feedforce.jp/entry/2021/05/13/093842</guid>
            <pubDate>Mon, 17 May 2021 00:38:42 GMT</pubDate>
            <description><![CDATA[<p>こんにちは　機械学習エンジニアの<a href="https://twitter.com/feed_yao">八百俊哉</a>です。</p>

<p>今回は複数媒体へ広告を出稿する際に、多くの方が悩まれるであろう「各媒体への予算配分」に関して有効な配分手法を紹介します。</p>

<p><strong>今回の記事で登場する広告用語</strong></p>

<ul>
<li>媒体・・・広告の配信先や配信手法</li>
<li>ROAS・・・広告経由で発生した売り上げを広告費用で割った値(広告の費用対効果)</li>
<li>CPA・・・1件のコンバージョン(目標)を獲得するのにかかった広告コスト</li>
</ul>


<h1>広告運用者が抱える課題とは？</h1>

<p>1つの媒体のみで運用している場合は別ですが、<strong>複数の媒体で広告配信を行っている場合は、どの媒体に対していくら予算を割り振れば良いのかわからない場合があると思います。</strong></p>

<p>過去の実績を元に成果が良い媒体に対して、多く予算を割り振れば良いことは理解しているものの、<strong>「どれくらい」「どの媒体から」予算を割り振れば良いのか</strong>は経験則や簡単な分析で決めている方も多いのではないでしょうか？</p>

<p>今回はこれらの課題を解決するために、<strong>数学的に根拠のある予算配分方法</strong>について紹介しようと思います。</p>

<p>まず今回の手法を紹介するにあたり、例題がある方が話が進めやすいので以下の広告運用者さんを例に考えます。</p>

<pre class="code" data-lang="" data-unlink>広告運用者○○さん

現在A,B,Cの３媒体で広告配信を行っています。

全体のROASを高めるために予算配分を見直したいと考えています。

３媒体での合計予算は3万円です。</pre>


<p>では、実際にどのようにして最適な予算を求めるのか見ていきましょう。</p>

<h1>過去の実績から各媒体の実績をシミュレーションします</h1>

<p>最初に過去の実績から各媒体での予算とROASの傾向を、式で表現します。</p>

<p>ここで<strong>ROASを最大化するということは、限られた予算の中で売り上げを最大化すると言い換えることができる</strong>ので、今回は <img src="https://chart.apis.google.com/chart?cht=tx&chl=%20%28%E4%BA%88%E7%AE%97%2C%E5%A3%B2%E3%82%8A%E4%B8%8A%E3%81%92%29" alt=" (&#x4E88;&#x7B97;,&#x58F2;&#x308A;&#x4E0A;&#x3052;)"/> を2次回帰で近似します。</p>

<p>今回の例だと媒体A,B,Cに対してそれぞれ近似式が用意できるので以下のように表現できます。(各媒体の予算を<img src="https://chart.apis.google.com/chart?cht=tx&chl=%20x_1%2Cx_2%2Cx_3" alt=" x_1,x_2,x_3"/>とします)</p>

<div align="center"><img src="https://chart.apis.google.com/chart?cht=tx&chl=%20%5Cdisplaystyle%0AA%E3%81%AE%E5%A3%B2%E3%82%8A%E4%B8%8A%E3%81%92%28x_1%29%20%3D%20a_A%20x_1%5E2%20%2B%20b_A%20x_1%0A" alt=" \displaystyle
A&#x306E;&#x58F2;&#x308A;&#x4E0A;&#x3052;(x_1) = a_A x_1^2 + b_A x_1
"/>
</div>




<div align="center"><img src="https://chart.apis.google.com/chart?cht=tx&chl=%20%5Cdisplaystyle%0AB%E3%81%AE%E5%A3%B2%E3%82%8A%E4%B8%8A%E3%81%92%28x_2%29%20%3D%20a_B%20x_2%5E2%20%2B%20b_B%20x_2%0A" alt=" \displaystyle
B&#x306E;&#x58F2;&#x308A;&#x4E0A;&#x3052;(x_2) = a_B x_2^2 + b_B x_2
"/>
</div>




<div align="center"><img src="https://chart.apis.google.com/chart?cht=tx&chl=%20%5Cdisplaystyle%0AC%E3%81%AE%E5%A3%B2%E3%82%8A%E4%B8%8A%E3%81%92%28x_3%29%20%3D%20a_C%20x_3%5E2%20%2B%20b_C%20x_3%0A" alt=" \displaystyle
C&#x306E;&#x58F2;&#x308A;&#x4E0A;&#x3052;(x_3) = a_C x_3^2 + b_C x_3
"/>
</div>


<p><br>
予算が0円の時は、原点を通る(売り上げが0円)になるように切片は使用していないです。</p>

<h1>ラグランジュの未定乗数法を用いて最適な予算配分を見つける</h1>

<h2>ラグランジュの未定乗数法とは？</h2>

<p>ラグランジュの未定乗数法とは、</p>

<blockquote><p>束縛条件のもとで最適化を行うための数学的な方法である。いくつかの変数に対して、いくつかの関数の値を固定するという束縛条件のもとで、別のある1つの関数の極値を求める</p>

<p><iframe src="https://hatenablog-parts.com/embed?url=https%3A%2F%2Fja.wikipedia.org%2Fwiki%2F%25E3%2583%25A9%25E3%2582%25B0%25E3%2583%25A9%25E3%2583%25B3%25E3%2582%25B8%25E3%2583%25A5%25E3%2581%25AE%25E6%259C%25AA%25E5%25AE%259A%25E4%25B9%2597%25E6%2595%25B0%25E6%25B3%2595" title="ラグランジュの未定乗数法 - Wikipedia" class="embed-card embed-webcard" scrolling="no" frameborder="0" style="display: block; width: 100%; height: 155px; max-width: 500px; margin: 10px 0px;"></iframe><cite class="hatena-citation"><a href="https://ja.wikipedia.org/wiki/%E3%83%A9%E3%82%B0%E3%83%A9%E3%83%B3%E3%82%B8%E3%83%A5%E3%81%AE%E6%9C%AA%E5%AE%9A%E4%B9%97%E6%95%B0%E6%B3%95">ja.wikipedia.org</a></cite></p></blockquote>

<p>少し小難しく聞こえますが、今回の例題に当てはめて考えてみます。</p>

<pre class="code" data-lang="" data-unlink>いくつかの変数に対して(各媒体の予算)

いくつかの関数の値を固定する束縛条件(3媒体の総予算は3万円)

別のある関数の極値を求める(3媒体の売り上げが最大となるポイントを求める)</pre>


<p>ラグランジュの未定乗数法とは、上のような条件を満たす予算<img src="https://chart.apis.google.com/chart?cht=tx&chl=%20x_1%2Cx_2%2Cx_3" alt=" x_1,x_2,x_3"/>を見つけてくれる手法です。</p>

<p>ラグランジュの未定乗数法では、媒体A,B,Cのそれぞれの<img src="https://chart.apis.google.com/chart?cht=tx&chl=%20%28%E4%BA%88%E7%AE%97%2C%E5%A3%B2%E3%82%8A%E4%B8%8A%E3%81%92%29" alt=" (&#x4E88;&#x7B97;,&#x58F2;&#x308A;&#x4E0A;&#x3052;)"/> に対して<strong>近似式が二階微分可能である必要がある</strong>ため、今回の例では2次回帰で近似を行いました。</p>

<p>また今回は、<strong>3媒体の総予算(束縛条件)が広告によって全て使用される</strong>という仮説のもとで計算しています。予算を全て使わない場合は、計算が複雑になってしまうので今回は紹介しません。</p>

<h2>実際にどのように計算するのか検証します</h2>

<p>まず初めに束縛条件<img src="https://chart.apis.google.com/chart?cht=tx&chl=%20x_1%2Cx_2%2Cx_3" alt=" x_1,x_2,x_3"/> を定義します。今回の束縛条件は、それぞれの予算<img src="https://chart.apis.google.com/chart?cht=tx&chl=%20x_1%2Cx_2%2Cx_3" alt=" x_1,x_2,x_3"/>を足し合わせたものが30000円になるということですので、以下のように書けます。</p>

<div align="center"><img src="https://chart.apis.google.com/chart?cht=tx&chl=%20%0Ax_1%20%2B%20x_2%20%2B%20x_3%20%3D%2030000%0A%5Ctag%7B1%7D%0A" alt=" 
x_1 + x_2 + x_3 = 30000
\tag{1}
"/></div>


<p><br>
ここで式(1)を変換し、<img src="https://chart.apis.google.com/chart?cht=tx&chl=%20g%28x_1%2Cx_2%2Cx_3%29" alt=" g(x_1,x_2,x_3)"/>とおきます。</p>

<div align="center"><img src="https://chart.apis.google.com/chart?cht=tx&chl=%0Ag%28x_1%2Cx_2%2Cx_3%29%20%3D%20x_1%20%2B%20x_2%20%2B%20x_3%20-%2030000%20%3D%200%0A" alt="
g(x_1,x_2,x_3) = x_1 + x_2 + x_3 - 30000 = 0
"/></div>


<p><br>
また、今回最大にしたい3媒体の総売り上げを<img src="https://chart.apis.google.com/chart?cht=tx&chl=%20f%28x_1%2Cx_2%2Cx_3%29" alt=" f(x_1,x_2,x_3)"/>と置きます。</p>

<div align="center"><img src="https://chart.apis.google.com/chart?cht=tx&chl=%0A%5Cbegin%7Baligned%7D%0A%20f%28x_1%2Cx_2%2Cx_3%29%20%26%3D%20A%E3%81%AE%E5%A3%B2%E3%82%8A%E4%B8%8A%E3%81%92%28x_1%29%20%2B%20B%E3%81%AE%E5%A3%B2%E3%82%8A%E4%B8%8A%E3%81%92%28x_2%29%20%2B%20C%E3%81%AE%E5%A3%B2%E3%82%8A%E4%B8%8A%E3%81%92%28x_3%29%20%5C%5C%0A%26%3D%20a_A%20x_1%5E2%20%2B%20b_A%20x_1%20%2B%20a_B%20x_2%5E2%20%2B%20b_B%20x_2%20%2B%20a_C%20x_3%5E2%20%2B%20b_C%20x_3%0A%5Cend%7Baligned%7D%0A" alt="
\begin{aligned}
 f(x_1,x_2,x_3) &amp;= A&#x306E;&#x58F2;&#x308A;&#x4E0A;&#x3052;(x_1) + B&#x306E;&#x58F2;&#x308A;&#x4E0A;&#x3052;(x_2) + C&#x306E;&#x58F2;&#x308A;&#x4E0A;&#x3052;(x_3) \\
&amp;= a_A x_1^2 + b_A x_1 + a_B x_2^2 + b_B x_2 + a_C x_3^2 + b_C x_3
\end{aligned}
"/></div>


<p><br>
ここで未定乗数<img src="https://chart.apis.google.com/chart?cht=tx&chl=%20%5Clambda%20" alt=" \lambda "/>と<img src="https://chart.apis.google.com/chart?cht=tx&chl=%20f%28x_1%2Cx_2%2Cx_3%29%2Cg%28x_1%2Cx_2%2Cx_3%29" alt=" f(x_1,x_2,x_3),g(x_1,x_2,x_3)"/>を用いてラグランジュ関数<img src="https://chart.apis.google.com/chart?cht=tx&chl=%20L" alt=" L"/>を作ります。</p>

<div align="center"><img src="https://chart.apis.google.com/chart?cht=tx&chl=%0A%5Cbegin%7Baligned%7D%0AL%28x_1%2Cx_2%2Cx_3%2C%5Clambda%29%20%26%3D%20a_A%20x_1%5E2%20%2B%20b_A%20x_1%20%2B%20a_B%20x_2%5E2%20%2B%20b_B%20x_2%20%2B%20a_C%20x_3%5E2%20%2B%20b_C%20x_3%20-%20%5Clambda%20%28x_1%20%2B%20x_2%20%2B%20x_3%20-%2030000%29%0A%5Cend%7Baligned%7D%0A" alt="
\begin{aligned}
L(x_1,x_2,x_3,\lambda) &amp;= a_A x_1^2 + b_A x_1 + a_B x_2^2 + b_B x_2 + a_C x_3^2 + b_C x_3 - \lambda (x_1 + x_2 + x_3 - 30000)
\end{aligned}
"/></div>


<p><br>
それぞれの変数で偏微分すると以下のようになります。</p>

<div align="center"><img src="https://chart.apis.google.com/chart?cht=tx&chl=%0A%5Cbegin%7Baligned%7D%0A%5Cfrac%7B%5Cpartial%20L%7D%7B%5Cpartial%20x_1%7D%20%26%3D%202%20a_A%20x_1%20%2B%20b_A%20-%20%5Clambda%20%20%3D%200%5C%5C%0A%5Cfrac%7B%5Cpartial%20L%7D%7B%5Cpartial%20x_2%7D%20%26%3D%202%20a_B%20x_2%20%2B%20b_B%20-%20%5Clambda%20%3D%200%5C%5C%0A%5Cfrac%7B%5Cpartial%20L%7D%7B%5Cpartial%20x_3%7D%20%26%3D%202%20a_C%20x_3%20%2B%20b_C%20-%20%5Clambda%20%3D%200%5C%5C%0A%5Cfrac%7B%5Cpartial%20L%7D%7B%5Cpartial%20%5Clambda%7D%20%26%3D%20-%20x_1%20-%20x_2%20-%20x_3%20%2B%2030000%20%3D%200%5C%5C%0A%5Cend%7Baligned%7D%0A" alt="
\begin{aligned}
\frac{\partial L}{\partial x_1} &amp;= 2 a_A x_1 + b_A - \lambda  = 0\\
\frac{\partial L}{\partial x_2} &amp;= 2 a_B x_2 + b_B - \lambda = 0\\
\frac{\partial L}{\partial x_3} &amp;= 2 a_C x_3 + b_C - \lambda = 0\\
\frac{\partial L}{\partial \lambda} &amp;= - x_1 - x_2 - x_3 + 30000 = 0\\
\end{aligned}
"/></div>


<p><br>
これら4変数の4元連立方程式を説くと、予算30000円で総売り上げが最大になる予算配分<img src="https://chart.apis.google.com/chart?cht=tx&chl=%20x_1%2Cx_2%2Cx_3" alt=" x_1,x_2,x_3"/>が求まります。</p>

<p>今回は、ROASを最大化するための方法を紹介しましたがCPAを最小化する場合は2次回帰式を求める際に<img src="https://chart.apis.google.com/chart?cht=tx&chl=%20%28cost%2Ccv%29" alt=" (cost,cv)"/>としてcvを最大化するようにラグランジュを適応することで求めることができます。</p>

<p>また今回の例では3媒体までの予算配分を計算しましたが、<strong>媒体数を増やしても計算速度が極端に遅くなることがない</strong>ところが今回の手法の良いところです。</p>

<h1>この手法の課題点</h1>

<p>ここまで「ネット広告の複数媒体に対するCPA最小化・ROAS最大化となる予算配分」を紹介しましたが、この手法には2つほど課題があります。</p>

<p>まず一つ目が、最適予算<img src="https://chart.apis.google.com/chart?cht=tx&chl=%20%28x_1%2Cx_2%2Cx_3%29" alt=" (x_1,x_2,x_3)"/>にマイナスの結果が得られる可能性があるということです。売り上げを最大化しようとするあまり、もともとROASが低い媒体に対しては予算を割り振らずにマイナスの予算を割り振り、そのほかのROASが高い媒体により多くの予算を割り振ろうとしてしまうことが確認できています。</p>

<p>次に、媒体の周期性や外部要因を一切考慮していないということです。広告は少なからず外部要因によって成果が左右されますが、この手法では過去の実績のみを用いて最適予算を割り振るので外部要因は一切考慮されていないということに注意が必要です。</p>

<h1>まとめ</h1>

<p>いかがだったでしょうか。
今回は、ラグランジュの未定乗数法を用いて複数媒体への予算配分方法を紹介しました。流石に手作業では計算できないので私はpythonで上記の流れを実装しています。</p>

<p>ラグランジュの未定乗数法は、理系の方は大学の数学の講義で習っていたかもしれないです。私も大学の時に習いましたが、当時は何に使うのか一切わかりませんでした。社会人になって学生の時に学んだことが活用できると、学んだ甲斐があったと感じることができて良いです。</p>

<p>最後まで読んでいただきありがとうございます。</p>
]]></description>
            <enclosure url="https://cdn.user.blog.st-hatena.com/default_entry_og_image/4268819/1588226000876991" length="0" type="image//default_entry_og_image/4268819/1588226000876991"/>
        </item>
        <item>
            <title><![CDATA[Windows ノートパソコン（ASUS VivoBook S15 M533IA）を買った]]></title>
            <link>https://masutaka.net/2021-05-06-1/</link>
            <guid>https://masutaka.net/2021-05-06-1/</guid>
            <pubDate>Thu, 06 May 2021 00:00:00 GMT</pubDate>
            <description><![CDATA[1 ヶ月ほど前になりますが、10 数年ぶりに Windows ノートパソコンを買いました。とても満足しています。
ASUS VivoBook S15 M533IA-BQ0BLT（インディーブラック） [2020-07-14-1] に iPhone から Android に乗り換えたことと関係していて、脱 Apple 計画の最終章（？）です。
スペックはこんな感じです。トラックパッド右上に指紋認証用のセンサーも付いています。
         CPU AMD Ryzen™ 7 4700U   Memory 16GB   Storage 1TB SSD   Monitor 15.6inch   Keyboard 109 日本語（画像は 104 英語キーボード）    今まで持っていたノートパソコンが Early 2014 の（！）MacBook Air だったので、めちゃめちゃ速くなりました。Ryzen いいですねー！Intel 版もあったのですが、Ryzen への興味とお値段から Ryzen にしました。
そのお値段は ￥110,900 に 11,090 ヨドバシポイントが付いた形です。Amazon.]]></description>
        </item>
        <item>
            <title><![CDATA[Docusaurus v2 を日本語化]]></title>
            <link>https://zenn.dev/tmd45/articles/docusaurus-config-lang-ja</link>
            <guid>https://zenn.dev/tmd45/articles/docusaurus-config-lang-ja</guid>
            <pubDate>Sat, 01 May 2021 09:30:35 GMT</pubDate>
            <description><![CDATA[
Docusaurus 2.0.0-alpha.75 で確認しています。

多言語対応で記事を作成し、ヘッダーから言語選択する UI も標準で用意されている Docusaurus ですが、セットアップした状態（多言語対応化していない状態）では英語 lang="en" がデフォルトの言語となっています。
&lt;!DOCTYPE html&gt;
&lt;html lang="en" data-theme="light" dir="ltr" data-react-helmet="lang,dir"&gt;
日本語のみで利用したい場合は、以下のように 多言語対応設定を追加しつつ、ja のみを...]]></description>
            <enclosure url="https://res.cloudinary.com/zenn/image/upload/s--_4nj3oiC--/co_rgb:222%2Cg_south_west%2Cl_text:notosansjp-medium.otf_37_bold:tmd45%2Cx_203%2Cy_98/c_fit%2Cco_rgb:222%2Cg_north_west%2Cl_text:notosansjp-medium.otf_80_bold:Docusaurus%2520v2%2520%25E3%2582%2592%25E6%2597%25A5%25E6%259C%25AC%25E8%25AA%259E%25E5%258C%2596%2Cw_1010%2Cx_90%2Cy_100/g_south_west%2Ch_90%2Cl_fetch:aHR0cHM6Ly9saDMuZ29vZ2xldXNlcmNvbnRlbnQuY29tL2EtL0FPaDE0R2lnNEcycTNHV1dzblFOMlZ5MmRkc3g2cjg2TXNacGFiRnNkXzBMTmc9czgwLWM=%2Cr_max%2Cw_90%2Cx_87%2Cy_72/v1627274783/default/og-base_z4sxah.png" length="0" type="image/png"/>
        </item>
        <item>
            <title><![CDATA[ESP8266 で温湿度を測って、AWS IoT Core + Amplify でグラフにしてみる]]></title>
            <link>https://developer.feedforce.jp/entry/2021/04/28/110000</link>
            <guid>https://developer.feedforce.jp/entry/2021/04/28/110000</guid>
            <pubDate>Wed, 28 Apr 2021 02:00:00 GMT</pubDate>
            <description><![CDATA[<p>こんにちは、ソーシャルPLUS チームの <a href="http://blog.hatena.ne.jp/mashabow/" class="hatena-id-icon"><img src="https://cdn.profile-image.st-hatena.com/users/mashabow/profile.png" width="16" height="16" alt="" class="hatena-id-icon">id:mashabow</a> です。</p>

<p>社内勉強会 <a href="https://developer.feedforce.jp/archive/category/FFTT">FFTT</a> のネタとして、ESP8266 で Wi-Fi 温湿度センサーを作り、グラフ化してみました。普段はフロントエンドの開発をしているんですが、ちょっと別のことをやってみようかと思いまして。電子工作に入門して、AWS IoT Core とか AWS Amplify を使ってみた記録です。</p>

<ul>
<li>グラフ：<a href="https://main.dt7p4lkfvt2c8.amplifyapp.com/">https://main.dt7p4lkfvt2c8.amplifyapp.com/</a></li>
<li>リポジトリ：<a href="https://github.com/mashabow/uchino-sensors">https://github.com/mashabow/uchino-sensors</a></li>
</ul>


<p><span itemscope itemtype="http://schema.org/Photograph"><img src="https://cdn-ak.f.st-hatena.com/images/fotolife/m/mashabow/20210426/20210426193800.png" alt="f:id:mashabow:20210426193800p:plain:w300" width="1366" height="1018" loading="lazy" title="" class="hatena-fotolife" style="width:300px" itemprop="image"></span> <span itemscope itemtype="http://schema.org/Photograph"><img src="https://cdn-ak.f.st-hatena.com/images/fotolife/m/mashabow/20210426/20210426193805.png" alt="f:id:mashabow:20210426193805p:plain:w330" width="1982" height="1332" loading="lazy" title="" class="hatena-fotolife" style="width:330px" itemprop="image"></span></p>

<p>詳しくはスライドをご覧ください。</p>

<script async class="speakerdeck-embed" data-id="92082383e7cc463dbb9ea18867036605" data-ratio="1.77777777777778" src="//speakerdeck.com/assets/embed.js"></script>


<h2>Q&amp;A</h2>

<p>勉強会で出た質問です。</p>

<ul>
<li>Q. Wi-Fi のパスワードってどうしてるんですか？

<ul>
<li>A. ESP8266 へ書き込むプログラムの中に、<a href="https://github.com/mashabow/uchino-sensors/blob/main/esp8266/src/secrets.h.template#L3-L4">そのまま埋め込んでいます</a>。</li>
</ul>
</li>
<li>Q. どれくらいのサイズのプログラムを書き込めるのかな

<ul>
<li>A. 今回は小さいプログラムなのであまり気にしていませんでしたが、<a href="https://www.mgo-tec.com/blog-entry-pointer-ini-arduino-esp8266.html#title04">ユーザーが使えるのは 50 KB 程度</a>らしいです。</li>
</ul>
</li>
<li>Q. すると timestamp は測定時点のものではないのか。数十ミリ秒くらいはズレているのかな

<ul>
<li>A. <a href="https://docs.aws.amazon.com/iot/latest/developerguide/iot-sql-functions.html#iot-function-timestamp">IoT Core のルールエンジンに届いた時刻</a>なので、正確ではないですね。10分間隔の測定で、かつセンサーの精度もそんなに無いので、まぁいいかなと。送信するメッセージに timestamp を入れるようにすればいい話ではあります（ESP8266 を書き変えるのが面倒だった 💦）。</li>
</ul>
</li>
<li>Q. AWS IoT Core とかってお高いんですか？

<ul>
<li>A. 個人で使う規模なら<a href="https://aws.amazon.com/jp/iot-core/pricing">激安</a>ですね 👀</li>
</ul>
</li>
<li>Q. 温度が急上昇してたら 119 しとけば良いですか？

<ul>
<li>A. よろしくおねがいします 🚒</li>
</ul>
</li>
</ul>


<h2>感想</h2>

<p>IoT っぽいものに初めて手を出してみたんですが、おもしろいですね。一番最初は用語も概念も調べ方もわからず、ネット上で情報収集しても「???」だったんですが、<a href="https://www.amazon.co.jp/dp/4789847047">本</a>を読んだら頭に入ってくるようになりました。</p>

<p>グラフも単なるグラフだろと思っていたんですが、自宅の実データをいざ視覚化してみると、自分だけにしか見えない様子ががいろいろ見えてきます。「あ、これ夕食を準備してたときだ」とか、ついついじっくり眺めてしまいますね。今回はセンサーだけでしたが、アクチュエーターに指示を出せば、さらにおもしろいものができそうです。</p>

<h2>リンク集</h2>

<p>スライドで触れたページや、実装にあたって参考にしたページです。</p>

<h3>1. Wi-Fi 温湿度センサーを作る</h3>

<ul>
<li><a href="https://akizukidenshi.com/catalog/g/gK-09758/">Wi-Fiモジュール ESP-WROOM-02 DIP化キット: 秋月電子通商-電子部品・ネット通販</a></li>
<li><a href="https://www.amazon.co.jp/dp/4789847047">超特急Web接続! ESPマイコン・プログラム全集 | 国野 亘 | Amazon</a>

<ul>
<li>組み立てや実装の参考にした本</li>
<li>[PDF] <a href="https://shop.cqpub.co.jp/hanbai/books/I/I000315/setsumei.pdf">IoT実習キット説明書・パーツリスト</a>

<ul>
<li>上記書籍の回路部分。基本的にはこれに倣った</li>
</ul>
</li>
</ul>
</li>
<li><a href="https://www.amazon.co.jp/dp/B010GXAH4E">HiLetgo 3個セット DHT11温度センサー | Amazon</a>

<ul>
<li>今回使った温湿度センサー</li>
</ul>
</li>
<li><a href="https://garretlab.web.fc2.com/arduino/">Arduinoで遊ぶページ</a>

<ul>
<li>Arduino 言語の参考に</li>
</ul>
</li>
<li><a href="https://platformio.org/">A professional collaborative platform for embedded development · PlatformIO</a>

<ul>
<li>使い慣れたエディタで Arduino の開発ができる。補完や依存管理ができて便利</li>
</ul>
</li>
<li><a href="https://bokunimo.net/blog/esp/784/">乾電池で本当に1年間動作するIoTセンサ ESP8266 - ボクにもわかる電子工作のブログ</a></li>
</ul>


<h3>2. 測定結果を受け取ってためる</h3>

<ul>
<li><a href="https://ambidata.io/">Ambient – IoTデータ可視化サービス</a>

<ul>
<li><a href="https://ambidata.io/docs/esp8266/">Arduino ESP8266で温度・湿度を測定し、Ambientに送ってグラフ化する – Ambient</a></li>
</ul>
</li>
<li><a href="https://machinist.iij.jp/">Machinist</a></li>
<li><a href="https://aws-iot-core-for-beginners.workshop.aws/">AWS IoT Core 初級ハンズオン :: AWS IoT Core 初級 ハンズオン</a></li>
<li><a href="https://github.com/debsahu/ESP-MQTT-AWS-IoT-Core">debsahu/ESP-MQTT-AWS-IoT-Core: Arduino examples of connecting ESP8266/ESP32 to AWS IOT Core</a></li>
<li><a href="https://flogics.com/wp/ja/2019/07/esp8266-arduino-aws-iot-mqtt/">TI DSP ソフトウェア設計のファームロジックス | ESP8266（Arduino環境）で AWS IoT（MQTT over TLS）にアクセスする</a>

<ul>
<li>最初 MQTT で接続できなくて悩んでいたが、NTP で時刻を合わせたら解決した</li>
</ul>
</li>
</ul>


<h3>3. 測定結果をグラフにする</h3>

<ul>
<li><a href="https://docs.amplify.aws/start/q/integration/react">Getting started - Amplify Docs</a></li>
<li><a href="https://github.com/aws-amplify/amplify-js/issues/6369">[Feedback] <code>API.graphql</code> return signature is hard to use in TypeScript · Issue #6369 · aws-amplify/amplify-js</a>

<ul>
<li>素の状態だと TS サポートがいまいちな件</li>
</ul>
</li>
<li><a href="https://apexcharts.com/docs/react-charts/">React-ApexChart - A React Chart wrapper for ApexCharts.js</a></li>
<li><a href="https://aws.amazon.com/jp/premiumsupport/knowledge-center/appsync-notify-subscribers-real-time/">AWS AppSync を使用して、外部データベースの更新をサブスクライバーにリアルタイムで通知する</a></li>
</ul>

]]></description>
            <enclosure url="https://cdn-ak.f.st-hatena.com/images/fotolife/m/mashabow/20210426/20210426193800.png" length="0" type="image/png"/>
        </item>
        <item>
            <title><![CDATA[ふりかえりカンファレンスのスタッフをやりました！]]></title>
            <link>https://developer.feedforce.jp/entry/2021/04/19/141153</link>
            <guid>https://developer.feedforce.jp/entry/2021/04/19/141153</guid>
            <pubDate>Mon, 19 Apr 2021 05:11:53 GMT</pubDate>
            <description><![CDATA[<p>こんにちは <a href="http://blog.hatena.ne.jp/pokotyamu/">id:pokotyamu</a> です！
最近は、モンハンライズにハマっています！ハンマー担いでブンブンしてます！</p>

<p>4月16日(土)に行われた「ふりかえりカンファレンス」のスタッフをやりました！</p>

<p><span itemscope itemtype="http://schema.org/Photograph"><img src="https://cdn-ak.f.st-hatena.com/images/fotolife/p/pokotyamu/20210416/20210416155303.png" alt="f:id:pokotyamu:20210416155303p:plain" title="" class="hatena-fotolife" itemprop="image"></span></p>

<p>今回はそこでの学びや感じたことを社内勉強会で発表したので、スライドとコメントをまとめます。</p>

<h2>FFTT 発表資料</h2>

<script async class="speakerdeck-embed" data-id="1f772bfe5abd4fa28ff738df3a5e76a2" data-ratio="1.77777777777778" src="//speakerdeck.com/assets/embed.js"></script>


<h2>勉強会の感想コメント</h2>

<blockquote><p> なんのためにふりかえりやってるの？</p></blockquote>

<p>明日の自分やチームを1歩でも楽しくなるためにやってほしいですね！
連続したサイクルの中にふりかえりを組み込むことで、安全に転んで、次の1歩を早く出せるようになると思います！</p>

<blockquote><p>オンラインセミナーは当日参加が多い
結構人数集まったようなので準備とか大変そう</p></blockquote>

<p>場所の制約がなくなったのが非常に大きいですね〜！
国内・国外関係なく、どこでもいけるのが本当に便利！</p>

<blockquote><p>振り返り手法ってあんなにたくさんあるのだなぁ
振り返りの手法も多いようなのでどのタイミングで何を使うのが適切かを考えるの難しそう
会社やチームよって向き不向きがありそうだけど、選ぶには知らないといけないので専門的な人がいる意味がよく分かる</p></blockquote>

<p>そーなんですよね。
次の Action を決めたい時や、関係構築したい時など、用途に合わせてやるのがいいと思います！
もちろん KPT も素晴らしい手法なので、たまに気分を変えてみるみたいな感じでどうぞ！</p>

<blockquote><p>振り返りとの因果関係を感じられる強い人やチームの実例を見たら、もう少しイメージが付くのかな
と思っていたが、21卒の方の日報をザッピングしていたら、振り返りが役に立った、楽しいという風に書かれていた</p></blockquote>

<p>今年は特に楽しいにフォーカスしてふりかえりをしているのもあると思います！</p>

<blockquote><p>オンラインカンファレンスのスタッフの話って結構レアな気がするので興味深かった</p></blockquote>

<p>楽しいのでぜひぜひ！</p>

<h2>感想</h2>

<p>私は、初めてカンファレンスのスタッフをやらせてもらったのですが、非常に楽しかったです！
他の人の感想やブログレポートを見るのも、それそれ！その言葉待ってた！という感じでいつもの一般参加とは違う感覚で聞くことができました！</p>

<p>今回のスタッフを経験したことで、「楽しくふりかえる」の意味を体で感じることができたと思います。もちろん当日の発表もどれも素晴らしくてそれも含みで楽しかったところではありましたが ☺️
気軽に試す、実験してみるを最近のふりかえりでも挑戦中です。</p>

<p>また、オンラインカンファレンスということもあり、夜の2次会が3時ぐらいまで盛り上がっていたのも楽しかったポイントでした。
新しいつながりも持てたので、社内の知見をどんどん外に発信して自分の魅力を高めていければと思います。</p>

<p>改めて、スタッフに誘っていただいた <a href="https://twitter.com/viva_tweet_x">@viva_tweet_x</a> さんに改めて感謝です！ありがとうございました！これからもよろしくおねがいします！</p>
]]></description>
            <enclosure url="https://cdn-ak.f.st-hatena.com/images/fotolife/p/pokotyamu/20210416/20210416155303.png" length="0" type="image/png"/>
        </item>
        <item>
            <title><![CDATA[ 夜間光データから土地価格を予測 コンペの参加記録]]></title>
            <link>https://developer.feedforce.jp/entry/2021/04/13/174808</link>
            <guid>https://developer.feedforce.jp/entry/2021/04/13/174808</guid>
            <pubDate>Tue, 13 Apr 2021 08:48:08 GMT</pubDate>
            <description><![CDATA[<p>こんにちは
株式会社フィードフォース2020年入社の機械学習エンジニア
<a href="https://twitter.com/feed_yao">八百　俊哉</a>と申します。</p>

<p>今回は、solafuneで開催された「<a href="https://solafune.com/#/competitions/f03f39cc-597b-4819-b1a5-41479d4b73d6">夜間光データから土地価格を予測</a>」という機械学習コンペに参加したので工夫した点や反省点などを紹介します。</p>

<p>コンペ参加の目標設定としては、「賞金獲得！！（4位以内）」を設定していましたが、36位/201人中と目標達成できませんでした。残念な結果に終わってしまいましたが、多くのことを学ぶことができました。</p>

<h1>参加経緯</h1>

<p>私は、2020年10月から2021年2月ごろまで顧客の課題解決のために機械学習を応用する方法を学ぶためにAI Questというイベントに参加していました。そのイベントをきっかけに私は精度の高いモデルや良い特徴量を作成することに興味を持ちました。</p>

<p>そこでより多くのコンペに参加することで精度を上げるためのノウハウを身に付けたいと思ったことが今回のコンペに参加したきっかけです。</p>

<p>また、今回参加したコンペは与えられている特徴量が4つしかないので、初心者が参加しやすいコンペだったということも魅力的なポイントでした。</p>

<h1>課題と与えられているデータ</h1>

<p>課題としては、「夜間光データを元に土地価格を予測するアルゴリズムを開発する」というものです。
使用可能なデータとしては、以下のものが与えられました。</p>

<ul>
<li>地域ごとのデータ・・・地域固有のID</li>
<li>年代・・・1992~2013年まで</li>
<li>土地の平均価格（目的変数）・・・1992~2013年まで</li>
<li>夜間光量の平均値・・・0~63までのレンジでその地域の平均光量</li>
<li>夜間光量の合計値・・・その地域の合計光量</li>
</ul>


<h1>全体構成</h1>

<p>今回最終submitとして選択したモデルの全体構成は以下です。
<span itemscope itemtype="http://schema.org/Photograph"><img src="https://cdn-ak.f.st-hatena.com/images/fotolife/n/newton800/20210409/20210409155716.png" alt="f:id:newton800:20210409155716p:plain" title="" class="hatena-fotolife" itemprop="image"></span></p>

<h1>前処理に関して</h1>

<h2>集約的特徴量について</h2>

<p>集約的特徴量の作成にあたっては<a href="https://twitter.com/mst_8823">masato8823 (@mst_8823) | Twitter</a>さんがBaseLineとして公開されていた以下のものを使用しました。</p>

<p><iframe src="https://hatenablog-parts.com/embed?url=https%3A%2F%2Fzenn.dev%2Fmst8823%2Farticles%2Fcd40cb971f702e" title="[solafune] 夜間光データから土地価格を予測 BaseLine" class="embed-card embed-webcard" scrolling="no" frameborder="0" style="display: block; width: 100%; height: 155px; max-width: 500px; margin: 10px 0px;"></iframe><cite class="hatena-citation"><a href="https://zenn.dev/mst8823/articles/cd40cb971f702e">zenn.dev</a></cite></p>

<p>作成した特徴量としては以下です。</p>

<table>
<thead>
<tr>
<th>    </th>
<th>    </th>
</tr>
</thead>
<tbody>
<tr>
<td>  面積  </td>
<td>  夜間光量の合計値/夜間光量の平均値を行い面積を算出した </td>
</tr>
<tr>
<td>   PlaceID,Yearごとの統計情報 </td>
<td>  PlaceID,Yearをキーとして平均光量、合計光量、面積のmin,max,median,mean,std,max-min,q75-q25を算出した  </td>
</tr>
<tr>
<td> PlaceID をキーにしたグループ内差分</td>
<td>  平均光量、合計光量の年ごとの差分を算出した</td>
</tr>
<tr>
<td>PlaceID をキーにしたグループ内シフト </td>
<td> 平均光量、合計光量の年ごとの値をシフトした</td>
</tr>
<tr>
<td>ピボットテーブルを用いた特徴量</td>
<td>index=PlaceID,columns=Yearとして平均光量、合計光量、面積のピボットテーブルを作成し、PCAで次元削減したものを算出した</td>
</tr>
<tr>
<td>PlaceIDをキーにしたグループ内相関係数</td>
<td>PlaceIDごとにデータを集約しYearと平均光量、合計光量、面積との相関係数を算出した</td>
</tr>
<tr>
<td>平均光量が63であった回数</td>
<td>平均光量の最大値が63であることから平均光量が63である数を追加した</td>
</tr>
</tbody>
</table>


<h2>Area特徴量について</h2>

<p>先ほど<i>集約的特徴量について</i>で面積の求め方について書きました。面積=合計光量/平均光量で算出しています。ここで求められる<b>土地の面積は、年が変化しようと変化しないと思われますが、実際のデータを確認すると年が変化すると面積も変化していました。</b></p>

<p>そこで<b>合計光量/平均光量より算出された面積をPlaceIDをキーとして平均を取ったものを新たな面積としました。</b>
新たな面積が求まると <b>新たな合計光量 =  平均光量×新たな面積,新たな平均面積 = 合計光量/新たな面積</b> が求まります。</p>

<p>これらより求まる新たな合計光量、新たな平均光量、新たな面積を元々の合計光量、平均光量、面積と置き換えて集約的特徴量の作成を行いました。</p>

<h2>gplearnについて</h2>

<p>上で紹介した集約的特徴量とArea特徴量のそれぞれに対して<a href="https://gplearn.readthedocs.io/en/stable/">gplearn</a>というライブラリを用いて新たな特徴量を作成しました。このライブラリは遺伝的アルゴリズムにより目的変数をよく表している変数を作成してくれるものです。</p>

<p>このライブラリを用いて新しい特徴量を10個,25個,50個作成し、元々の集約的特徴量、Area特徴量と組み合わせてそれぞれに対して予測を行いました。</p>

<p>gplearnでの特徴量作成については以下のサイトが参考になります。</p>

<p><iframe src="https://hatenablog-parts.com/embed?url=https%3A%2F%2Fqiita.com%2FHatomugi%2Fitems%2F3bb16ed9c6bdc15f1e00" title="遺伝的アルゴリズムを使って特徴量エンジニアリングしてみた - Qiita" class="embed-card embed-webcard" scrolling="no" frameborder="0" style="display: block; width: 100%; height: 155px; max-width: 500px; margin: 10px 0px;"></iframe><cite class="hatena-citation"><a href="https://qiita.com/Hatomugi/items/3bb16ed9c6bdc15f1e00">qiita.com</a></cite></p>

<h1>モデル構築に関して</h1>

<p>モデルの構築としてはgroup k fold(fold=5)でStackingのモデルを採用しました。</p>

<p>1層目はrandom forest,lgb,multi regression,catboost,xgboostに加えてAutoMLの<a href="https://auto.gluon.ai/stable/index.html">Autogluon</a>を採用しました。</p>

<p>Autogluonは以下のようにデータを渡すだけで、11個のモデルを検証し最後に出力結果を重量平均で作成してくれます。</p>

<pre class="code lang-python" data-lang="python" data-unlink>
predictor = TabularPredictor(
                                label=<span class="synConstant">'label'</span>,
                                problem_type=<span class="synConstant">'regression'</span>, 
                                eval_metric=<span class="synConstant">'root_mean_squared_error'</span>, <span class="synComment"># 評価指標</span>
)

X_train[<span class="synConstant">'label'</span>] = y_train
X_test[<span class="synConstant">'label'</span>] = y_test

predictor.fit(
            train_data=X_train,
            tuning_data=X_test, <span class="synComment"># これを渡さない場合はランダムスプリット</span>
            time_limit=<span class="synIdentifier">None</span>, <span class="synComment"># おおよその時間制限を設けられる</span>
)
</pre>


<p>そして2層目は1層目でも採用しているAutogluonで出力を作成しました。</p>

<h1>感想・反省点</h1>

<p>Public Scoreの時点では6位と賞金獲得の可能性が十分にありましたが、Private Scoreでは36位と大幅にshake downしてしまいました。今回目標達成できなかった理由としては以下の2つが考えられます。</p>

<p><b>1 CVの値とPublic ScoreからPrivate Scoreについて考えられなかった
</b></p>

<p>1つ目の要因としては、Public Scoreが下がることのみを考えてモデルの改善・特徴量の作成を行っていたということです。その時CVの値とPublic Scoreをどこかに記録しておけばよかったのですが、どこにも保存せずPublic Scoreが下がることが最も良いことであると捉えていました。実際は、CVが下がったモデル・特徴量においてPublic Scoreも同じように下がることが望ましく、その記録を取っておくべきでした。</p>

<p>実際これまで提出していたファイルの中にPrivate Scoreが0.48774というものがあり、このファイルを最終提出としておけば3位に入ることができていました。しっかりとPrivate Scoreに効いているであろう提出ファイルが選べるようにCVとPublic Scoreに着目できるようにならないといけないと感じました。</p>

<p><b>2 gplearnを行う位置が悪かった
</b></p>

<p>2つめは、group k foldを行う前にgplearnを行ったことによって、validationの目的変数が確認できる状態でgplearnが特徴量作成を行ってたことです。これは本来見ることができないデータを確認しながらデータ生成を行っていることになるので過学習を引き起こす可能性がありました。
　
　<span itemscope itemtype="http://schema.org/Photograph"><img src="https://cdn-ak.f.st-hatena.com/images/fotolife/n/newton800/20210413/20210413095008.png" alt="f:id:newton800:20210413095008p:plain" title="" class="hatena-fotolife" itemprop="image"></span></p>

<p>あるべき姿としては、group k foldでtrainをtrain,validationに分割した後にtrainのみのデータを用いてgplearnをfitさせるべきだったと思います。</p>

<p><span itemscope itemtype="http://schema.org/Photograph"><img src="https://cdn-ak.f.st-hatena.com/images/fotolife/n/newton800/20210413/20210413112402.png" alt="f:id:newton800:20210413112402p:plain" title="" class="hatena-fotolife" itemprop="image"></span></p>

<h1>次回コンペでは</h1>

<p>今回のコンペを通じて集約的特徴量の作成方法、Stackingの実装方法、gplearnの実行位置、CVとPublic Scoreの関係性の重要度について学ぶことができました。
テーブルコンペ において有効な手法を多く学ぶことができたので、次回参加するコンペでは賞金獲得を目標に頑張ります！！</p>
]]></description>
            <enclosure url="https://cdn-ak.f.st-hatena.com/images/fotolife/n/newton800/20210409/20210409155716.png" length="0" type="image/png"/>
        </item>
        <item>
            <title><![CDATA[『こども地政学』を読んだ]]></title>
            <link>https://masutaka.net/2021-04-10-1/</link>
            <guid>https://masutaka.net/2021-04-10-1/</guid>
            <pubDate>Sat, 10 Apr 2021 00:00:00 GMT</pubDate>
            <description><![CDATA[以前から地政学には興味があったのでポチって読んでみました。
 子供向けの本で、漢字には全部ルビが振ってあります。でも大人向けの入門書としても良い気がしました。久々にさらっと読めて良い気分転換になったし、地政学の基礎の基礎を知れた気がします。
日本って、ランドパワーの中国にとっては海に出ていくための邪魔な蓋でしかないのかー。
追々、他の地政学の本も読んでみよう。]]></description>
        </item>
        <item>
            <title><![CDATA[カスタマーサクセスエンジニアのお仕事]]></title>
            <link>https://developer.feedforce.jp/entry/2021/04/09/120453</link>
            <guid>https://developer.feedforce.jp/entry/2021/04/09/120453</guid>
            <pubDate>Fri, 09 Apr 2021 03:04:53 GMT</pubDate>
            <description><![CDATA[<p>ごきげんようございます、ソーシャルPLUS チームの <a href="https://developer.feedforce.jp/archive/author/tmd45">id:tmd45</a> です。今回も社内の技術勉強会（通称 <a href="https://developer.feedforce.jp/archive/category/FFTT">FFTT</a>）で話した内容で書きたいと思います。</p>

<p>毎回一貫性のないネタで（しかもあんまり Tech じゃない話を）話してますが、今回も自分のキャリアについての話をしました。</p>

<ul>
<li><a href="https://developer.feedforce.jp/entry/2020/01/10/185250">2020/01/10 FFTT#381 認証認可情報の追い方のはなし</a></li>
<li><a href="https://developer.feedforce.jp/entry/2020/08/28/183637">2020/08/28 FFTT#407 認知（cognition）のはなし</a></li>
</ul>


<p>過去にこのブログで書いたこの記事↓の続編ということになります。</p>

<ul>
<li><a href="https://developer.feedforce.jp/entry/2018/12/05/110000">2018/12/05 社内では開発チームマネージャーを名乗っています</a></li>
</ul>


<p>知識として役に立つ内容というよりは、自分に合った仕事ができると楽しいよね、とか、エンジニアでもこういう仕事あるよ、とか、ざっくりとした自分語りになります。</p>

<p>では、よろしくお願いします！</p>

<h2>2020年10月からカスタマーサクセスエンジニアになりました</h2>

<p>いきなり本題ですが、はい、なっておりました。</p>

<p>対外的に自分のポジションを名乗ることがないので、ただの自称なんですが、最近だと元同僚の <a href="http://blog.hatena.ne.jp/a-know/">id:a-know</a> さんが<a href="https://blog.a-know.me/entry/2021/03/15/214630">転職先で正式に（？）名乗ってらっしゃいます</a>。</p>

<p>自分ではあまり上手く言語化できていなかったんですが、a-know さんの記事に書かれているポジション名への思いを見て「あー！まさにそれ！」って思いました（あぁ！先に公に言われてしまった！😩というのも思いました。笑）。</p>

<p>他にも Customer Support &amp; Senior Developer とも自称しています。これは単純にいまやっていることを並べた感じの肩書きです。</p>

<h2>具体的に何をやってるのか</h2>

<p>１つは、メールでのカスタマーサポートを担当しています。</p>

<p>現在 ソーシャルPLUS のカスタマーサポートへお問い合わせいただくと、8 〜 9 割がた私がお返事いたします。</p>

<p>ソーシャルPLUS のカスタマーサポートは、メールでご連絡いただくことで対応する、受動的かつ突発的なタスクです。主に企業がソーシャルPLUS を導入するための<b>技術的な事前調査</b>や、<b>導入開発</b>に関する質問が多いです。この導入フェーズを乗り越えていただかないと、本来のソーシャルPLUS というサービスの価値を感じていただくことができないため、とても大事なサポートだと認識しています。</p>

<p><span itemscope itemtype="http://schema.org/Photograph"><img src="https://cdn-ak.f.st-hatena.com/images/fotolife/t/tmd45/20210408/20210408171759.png" alt="f:id:tmd45:20210408171759p:plain" title="" class="hatena-fotolife" itemprop="image"></span></p>

<p>もともと技術的なお問い合わせも多く、お客様側のシステムや利用方法を加味してご案内する必要がありました。またソーシャルログインプロバイダ側の契約や仕様についても把握している必要があります。技術面まで捉えてお返事するとなると、エンジニア以外では返答に窮することもありました。</p>

<p>もちろん開発チームと連携して回答するというのは以前からやっていましたが、双方のコミュニケーションコストや、開発チームが本来の開発タスクから突発的な質問（しかもちょっと複雑）に対応するための脳のスイッチングコストなど気になることがありました。</p>

<p><span itemscope itemtype="http://schema.org/Photograph"><img src="https://cdn-ak.f.st-hatena.com/images/fotolife/t/tmd45/20210408/20210408182910.png" alt="f:id:tmd45:20210408182910p:plain" title="" class="hatena-fotolife" itemprop="image"></span></p>

<p>ビジネスチームにはもっとたくさんの企業に利用いただけるようなまさに "ビジネス的" な施策に時間を使ってほしかったし、開発チームには開発に集中する時間をできるだけ作りたいと思っていました。</p>

<h2>カスタマーサポートを担当しはじめたきっかけ</h2>

<p>先日、我らがチームリーダー、Tech Lead の佐藤の社内インタビュー記事が公開されました。</p>

<p><iframe src="https://hatenablog-parts.com/embed?url=https%3A%2F%2Fmedia.feedforce.jp%2Fn%2Fn973a7399829c" title="理想のエンジニア組織を目指して。ソーシャルPLUSの開発リーダーがビジネスサイドにもコミットする理由｜フィードフォースのnote" class="embed-card embed-webcard" scrolling="no" frameborder="0" style="display: block; width: 100%; height: 155px; max-width: 500px; margin: 10px 0px;"></iframe><cite class="hatena-citation"><a href="https://media.feedforce.jp/n/n973a7399829c">media.feedforce.jp</a></cite></p>

<p>去年の夏頃、当時まだ開発チームリーダーだった私と 1on1 をしていた佐藤から、エンジニアとしてのステップアップとして、ソーシャルPLUS の開発チームリーダーとしてもっとコミットしていきたい、という話をもらいました。自分としては断る理由もなく、めっちゃいいじゃん！むしろぜひお願いします！という感じでした。</p>

<p>しかし、そうなると 7 年もソーシャルPLUS にいる自分はどこに向かえばいいのか？という悩みがはっきりと表面化してきました。</p>

<p>ポジションや肩書きに執着はないので、リーダーでもなんでもない、ただの（と言ったらいまチームにいるメンバーに失礼ですけど）バックエンドエンジニアに戻るという道もありました。でも本当にそんな言い方は失礼だなと感じるくらい、いま開発に携わってくれているメンバーは良い開発者たちです。もっと人手があれば、とは常々思っていますが（笑）私がそこに戻るだけで、私の経験や力を充分活かせるのかしらん？それでプロダクトはもっといい方向に進めるのかしらん？と。</p>

<p><a href="https://developer.feedforce.jp/entry/2018/12/05/110000">前の記事</a>でも書きましたが、以前から自分はビジネス側と開発側の間に入って緩衝材をやったり、落ち穂拾いをしたりしていました。しかし自分が受ける側の 1on1 で「ここから先どうなりたいですか？」と問われて答えに詰まるような期間を過ごしていました。</p>

<p>そんなとき、ビジネス側のいちメンバーから「（a-know さんみたいな）カスタマーサクセスにコミットするエンジニアというのが合ってるんじゃないか」と言ってもらう機会がありました。単純なんですが、それで「あ、そっか」と目からウロコがぽろり。</p>

<p>いままで「担当する仕事じゃないから」と（はっきりそう言うわけじゃないですが）どこか伝言ゲームのようになっていた、問い合わせなどの仕事を、私自身が担当すれば手っ取り早いじゃないかと。それだけじゃなく、これまでのサポートメンバーが兼任で担当していたがゆえに、どうしてもサポート側の知見などを残す手間をかけづらかったところを、アウトプットに慣れた自分のようなエンジニアがやれば一石二鳥。同じように手が回らなかった仕組み化や、プロダクトへのフィードバックもやってやろうじゃないか、と。</p>

<p>チーム内で互いに助け合う文化ができあがっていたので、自分ひとりが何でも知っていなければならないという過度なプレッシャーはなく、とはいえ自分がこのポジションを担当すればなんかいろいろすっきり組み立てられるのでは？というひらめきがありました。</p>

<p><span itemscope itemtype="http://schema.org/Photograph"><img src="https://cdn-ak.f.st-hatena.com/images/fotolife/t/tmd45/20210408/20210408183042.png" alt="f:id:tmd45:20210408183042p:plain" title="" class="hatena-fotolife" itemprop="image"></span></p>

<p>結局のところ、肩書きが変わっただけとも言えます。肩書きに執着しないと言いながら、行動が肩書きに囚われてしまっていたなぁと。</p>

<p>チーム内外に「ポジションを変えます！エンジニアとしてカスタマーサクセスやります！」と大々的に宣言したことで、やれることの幅が広がりました。広がったというか、しっかりフォーカスする部分を切り替えることができた。そういう意味での肩書きって大切なんだなと思いました。</p>

<h2>やってみてどうだったか</h2>

<p>自分にはめちゃくちゃ合ってたなと、毎日楽しく働いてます。同僚にも、この仕事にシフトしてからの玉田さんめちゃくちゃ充実して楽しそうに見える、と言われました（笑）。これまでなんとなくもやもやしてたものが、自分の手で解決できていく気持ちよさを感じています。</p>

<p>やってみて、いまの仕事にフィットしている自分の強みはこんなところだと思ってます。</p>

<ol>
<li>ソーシャルPLUS を 7 年もやってる（それなりの業務知識量）</li>
<li>開発者なのでシステムの調査にスムーズにとりかかれる</li>
<li>こう見えてお客様とのコミュニケーションは昔とった杵柄がある</li>
<li>ドキュメンテーションや情報整理にこだわりがある</li>
<li>細かいことに気がつくほう</li>
</ol>


<p>前職（もう 7 年も前なわけですが）では頻度は高くないものの、企業のお客様のところへ営業さんといっしょにお話しにいくことがあったり、お客様と日々メールでやりとりしていたりという経験があって、いま役に立っています。SIer という立場で設計開発するときの心配事なんかも少しは知っているので、それも役に立ってるかもしれないなと思う場面があります。</p>

<p>結果として、先に書いたような課題感はどうなったかというと、まだ数値にして改善されたことを確認するなどはできていないのですが</p>

<ul>
<li><b>技術的な調査・質問に以前より素早く答えられる形になった</b>

<ul>
<li>コミュニケーションコストや待ち時間などの削減</li>
<li>ひとりの人間が対応できるので調査とお返事の文章作成を同時にできるなど</li>
</ul>
</li>
<li><b>ナレッジを文章化して残すようになった</b>

<ul>
<li>ものによって esa 記事にしたり GitHub Issue にしたりしています</li>
</ul>
</li>
<li><b>兼業していた他職種のひとが以前より本業に集中できるようになった</b>

<ul>
<li>確認依頼や私でもわからないことを質問して答えてもらったりというのは今もありますが、それでも以前より中断されない時間が作りやすくなったのではないかと思います</li>
<li>しかもこれがプロダクトマネージャだったりするので影響がでかい 😎</li>
</ul>
</li>
</ul>


<p>などなど、いい効果が出てると感じます。</p>

<p>ひとりで対応できてしまう＝属人的になってしまう、という問題も重々承知しているので、そうならないようにナレッジ化したり、やりとりを見える化したりというのは大事にしています。強みとして挙げたような "私だからできる仕事" というのも同じくらい大事にしています。</p>

<h2>他になにやってるの</h2>

<p>カスタマーサポートは私の仕事のうちの１つです。それ以外には Senior Developer として、プロダクトの新しい機能の検証や、機能として組み込むわけではないけどお客様が必要とするような仕様や仕組みを検証するなどしています。</p>

<p>こちらはとくにビジネスメンバーと以前よりたくさん話す機会が増えました。セールスが普段お客様からどのような要望を伺うのか、マーケティングがどういった訴求をしているのか、プロダクトマネージャーはどんな未来を描いているのか。そういうものから何ができそうか、具体的な方法を考えて、開発チームにシステム化してもらうような仕事です。</p>

<p>そこまで明確に切り分けて丸投げしているわけではないですし、開発チーム側からも活発に意見や案が出る環境でもあります。UI 面やお客様に "見せて" 提供する機能はデザイナーが具体案を詰めていくことが多いです。</p>

<p>Senior Developer の仕事は、以前からやっていた落ち穂拾いに近く、それを「私の仕事としてコミットしますね！」と明言して取り組んでるようなイメージです。</p>

<h2>さらにこれから</h2>

<p>Customer Support &amp; Senior Developer をやることで、プロダクトの内情とお客様の困りごとの両方を見ることができています。そこから、これからもっと良く出来そうだなと確度高く考えられるものが増えました。</p>

<p>いまのチームはまさに、この下の図のような感じでメンバーが良い関係で仕事していると思います。</p>

<p><figure class="figure-image figure-image-fotolife" title="私が &quot;望まない&quot; チーム"><span itemscope itemtype="http://schema.org/Photograph"><img src="https://cdn-ak.f.st-hatena.com/images/fotolife/t/tmd45/20210408/20210408192135.png" alt="f:id:tmd45:20210408192135p:plain" title="" class="hatena-fotolife" itemprop="image"></span><figcaption>私が &quot;望まない&quot; チーム</figcaption></figure></p>

<p><figure class="figure-image figure-image-fotolife" title="私が &quot;望む&quot; チーム"><span itemscope itemtype="http://schema.org/Photograph"><img src="https://cdn-ak.f.st-hatena.com/images/fotolife/t/tmd45/20210408/20210408192209.png" alt="f:id:tmd45:20210408192209p:plain" title="" class="hatena-fotolife" itemprop="image"></span><figcaption>私が &quot;望む&quot; チーム</figcaption></figure></p>

<p>複数の色を跨ぐような仕事ができているのが、自分の強みであり、プロダクトの役にも立てているなという実感もあります。</p>

<p>溜まったナレッジや分析結果をもとにさらに良い改善、良い進化ができるように引き続きやっていきたいと思います！</p>

<h2>おわりに</h2>

<p>というわけで、他チームに自分の近況報告をするような発表となりました。</p>

<p>これを読んで「おっ じゃあエンジニアにカスタマサポートやらせりゃいいんだ」と思われることは無いと思うんですが、そういう話ではないのでご留意ください。あくまでも私にはこの仕事が合っていて、ちょうどプロダクトのなかでそういう仕事があるといいなという状態に合致できたという話です。</p>

<p>自分はとても恵まれていると思います。日々感謝感謝です。そんな話をすると、それだけじゃないよ、頑張ってるよ、と言ってくれる同僚も居ます。とてもありがたいことです。</p>

<p>感謝の気持ちを力に変えて、ソーシャルPLUS をさらによいプロダクトにしていきたいと思いますので、今後ともよろしくお願いいたします。</p>
]]></description>
            <enclosure url="https://cdn-ak.f.st-hatena.com/images/fotolife/t/tmd45/20210408/20210408204347.png" length="0" type="image/png"/>
        </item>
        <item>
            <title><![CDATA[Android の TODO アプリは TickTick が鉄板かも]]></title>
            <link>https://masutaka.net/2021-04-07-1/</link>
            <guid>https://masutaka.net/2021-04-07-1/</guid>
            <pubDate>Wed, 07 Apr 2021 00:00:00 GMT</pubDate>
            <description><![CDATA[iPhone から Android (Pixel 3a XL) に乗り換えて [2020-07-14-1] 、普通に使える TODO アプリを探していました。
私は基本デフォルト厨なので、Google の ToDo リスト か Google Keep で続けようと頑張りましたが、断念しました。
ToDo リストは一度でも繰り返しを設定したタスクは他のリストに移動できないという、理解不能な仕様（？）でした。
Google Keep は頑張って３ヶ月使いましたが、リマインダーアプリとしては xxx（伏せ字）でした。
※ Note アプリとしては普通に便利なので、今も使っています。
・未来のリマインダーを完了できない（早めに終わっても、その時間にならないと完了できない）
・リマインダーを完了しても残る。さらにアーカイブする必要がある。Note 機能との魔合体の弊害と思われる
・繰り返しのリマインダーを視界から消すのが面倒。完了してもアーカイブしてもまた現れる
・他にもあったかも？
そんな中行き着いたのが TickTick です。TikTok じゃないよ。
とても良かったのでプレミアム会員（$27.99/year）になりましたが、無料でも十分使えます。
普通のリマインダーアプリとして使える 何が普通なのか難しいところですが、、こんな分類をしていると言えば分かりますかね？
２週間毎とかのリマインダーも設定できる たまにこういうリマインダーがあるのですよね。加湿器の掃除とか。もちろん隔週や隔月なども出来ます。
１時間後とかに思い出させるとかも出来る すぐ出来ない時ありますよね？そんな時にも後で思い出させてくれます。
習慣づけの機能がある 自分にはとても合いました。
私はログを取るのが好きみたいで、なるべく途切れさせないように行動するようになりました。
「飲酒をやめる」に至っては、今年の 1/31 以来続いています。そこまでストイックになる必要もないのですが、続けることが目的になっています。それに何もしなければ良いだけなので、この中では一番簡単です。
その他 私は使っていませんが、ポモドーロテクニックを支援する機能もあります。プレミアム会員用の機能かも？
Android と iOS、Web など、さまざまなプラットフォームに対応 しています。今使っているリマインダーアプリからの移行など、まとまった量の作業は Web 版でゴリッとやると良いかもです。
あと、書き忘れましたが、私は仕事では TickTick を使ってません。プライベートだけです。仕事では Slack リマインダーや Gmail（Inbox Zero 運用、Snooze 機能）あたりでゆるふわ運用しています。仕事で使うツールはあまり増やしたくないのですよね。気にするものが増えてしまうので。
Slack から Gmail に簡単に送信できれば、Gmail に集約できるんだけど&hellip;。]]></description>
        </item>
        <item>
            <title><![CDATA[縦置きスタンドを買って、ノートパソコンを床に置いちゃう問題を解消した]]></title>
            <link>https://masutaka.net/2021-04-04-1/</link>
            <guid>https://masutaka.net/2021-04-04-1/</guid>
            <pubDate>Sun, 04 Apr 2021 00:00:00 GMT</pubDate>
            <description><![CDATA[ここ１年はずっと家で仕事しているので、ノートパソコンは会社用と合わせて２台あります。最近 ASUS の Vivobook も買ったので、一時的に３台あります。そうなってくると地味に困るのが、使ってないパソコンの置き場所です。
今までこういうダメな置き方をしていました。気をつけてはいますが、椅子が当たるかもしれませんし、パタンと倒れるかもしれません。
そこで、こんな縦置きスタンドを買いました。￥2,650 というお値段以外はとても満足しています。
 使ってみた図です。奥が 15.6inch の Vivobook、手前が 13inch MacBook Pro です。Vivobook はやや厚いので、付属の六角レンチで調節しました。
このモデルは手前にタブレットやスマホも置けます。置いたのは 9.7inch の ZenPad です。３つ置いても、重量感があり安定しています。重さは 580g です。
サイズは 横 x 奥行き x 高さ = 15cm x 12cm x 4.8 cm なので、意外とコンパクトです。ゴムパッドも付いているので、デバイスに傷は付きづらいと思います。
同じメーカーで別のモデルもあったので紹介しておきます。
こちらはノートパソコン１台、タブレットまたはスマホ２台用です。奥行きが 9.5cm と多少小さいです。
 こちらはノートパソコン２台、タブレットまたはスマホ２台用です。大きそうに見えますが、私が買ったモデルと同じサイズです。
 前回のマグネットケーブルホルダー [2021-03-24-1] に引き続き、当たりを引けて良かったです。]]></description>
        </item>
        <item>
            <title><![CDATA[Anker のマグネットケーブルホルダーを使って、ケーブルが下に落ちちゃう問題を解消できた]]></title>
            <link>https://masutaka.net/2021-03-24-1/</link>
            <guid>https://masutaka.net/2021-03-24-1/</guid>
            <pubDate>Wed, 24 Mar 2021 00:00:00 GMT</pubDate>
            <description><![CDATA[今まではこんなんでした。3 本のケーブルを洗濯バサミ（）でまとめて、Anker の USB 急速充電器に引っかけています。かろうじて落ちません。すみません嘘つきました。たまに落ちます。
Anker のマグネットケーブルホルダーを使えばアラすっきり！少し様子がおかしいのは気にしない。
付属のクリップでケーブルを挟み込んで、台座に磁石で付く仕組みなのですが、直径 3.5mm 以下という制約がなかなかキツイ。今どき珍しい Mini DisplayPort ケーブルは無理だったので、別のクリップで凌ぎました。
 こちらの記事を見て買いました。商品レビューはこちらを見たほうが良いと思います。
Ankerの「マグネットケーブルホルダー」を使い始めたら、デスクワークの快適性が格段に向上しちゃいました｜ROOMIE（ルーミー） ]]></description>
        </item>
        <item>
            <title><![CDATA[エンジニア向けミートアップを開催します！]]></title>
            <link>https://developer.feedforce.jp/entry/2021/03/15/113230</link>
            <guid>https://developer.feedforce.jp/entry/2021/03/15/113230</guid>
            <pubDate>Mon, 15 Mar 2021 02:32:30 GMT</pubDate>
            <description><![CDATA[<p>こんにちは。人事チームからエンジニアミートアップについてお知らせです。</p>

<p>3月26日（金）19：00から、エンジニア向けのミートアップを開催することになりました！
選考とは関係ないので、純粋に「どんなエンジニアがいるかみてみたい」「会社の雰囲気を知りたい」
という方もぜひご参加いただけたら嬉しいです。</p>

<p>初回のLT登壇者は <a href="https://twitter.com/daido1976">@daido1976</a>です！</br>
詳しくは下記記事をご覧ください。</p>

<p><iframe src="https://hatenablog-parts.com/embed?url=https%3A%2F%2Fmedia.feedforce.jp%2Fn%2Fn53b8be5eae4a" title="現場エンジニアと気軽に話せる！エンジニアミートアップを開催します｜フィードフォースのnote" class="embed-card embed-webcard" scrolling="no" frameborder="0" style="display: block; width: 100%; height: 155px; max-width: 500px; margin: 10px 0px;"></iframe><cite class="hatena-citation"><a href="https://media.feedforce.jp/n/n53b8be5eae4a">media.feedforce.jp</a></cite></p>

<p>ご参加お待ちしています！</p>
]]></description>
            <enclosure url="https://cdn.user.blog.st-hatena.com/default_entry_og_image/4268819/1588226000876991" length="0" type="image//default_entry_og_image/4268819/1588226000876991"/>
        </item>
        <item>
            <title><![CDATA[Docker BuildKit の --secret フラグでイメージビルド時の秘匿情報を環境変数経由で渡せるようになっていた]]></title>
            <link>https://developer.feedforce.jp/entry/2021/03/15/102530</link>
            <guid>https://developer.feedforce.jp/entry/2021/03/15/102530</guid>
            <pubDate>Mon, 15 Mar 2021 01:25:30 GMT</pubDate>
            <description><![CDATA[<p>こんにちは、<a href="http://blog.hatena.ne.jp/daido1976/" class="hatena-id-icon"><img src="https://cdn.profile-image.st-hatena.com/users/daido1976/profile.png" width="16" height="16" alt="" class="hatena-id-icon">id:daido1976</a> です。入社してもうすぐ 3 年が経ちます。</p>

<p>Docker BuildKit の --secret フラグについて、公式ドキュメントでの説明や関連する日本語記事はすでにいくつかあるのですが、2020/12/08 にリリースされた Docker Engine 20.10.0 で「秘匿情報を環境変数経由で渡せるようになっていたこと」への言及が見当たらなかったので書かせていただきます。<a href="#f-140b8608" name="fn-140b8608" title="BuildKit や --secret フラグってそもそも何？という方は最下部の参考記事に詳しくまとまっておりますのでぜひご覧ください。">*1</a>（個人的にはとても嬉しいアップデートでした…！）</p>

<p>リリースノートの該当箇所は以下です。</p>

<p>See. <a href="https://docs.docker.com/engine/release-notes/#20100">https://docs.docker.com/engine/release-notes/#20100</a></p>

<blockquote><ul>
<li>buildkit: secrets: allow providing secrets with env <a href="https://github.com/moby/moby/pull/41234">moby/moby#41234</a> <a href="https://github.com/docker/cli/pull/2656">docker/cli#2656</a> <a href="https://github.com/moby/buildkit/pull/1534">moby/buildkit#1534</a>

<ul>
<li>Support <code>--secret id=foo,env=MY_ENV</code> as an alternative for storing a secret value to a file.</li>
<li><code>--secret id=GIT_AUTH_TOKEN</code> will load env if it exists and the file does not.</li>
</ul>
</li>
</ul>
</blockquote>

<h2>要点</h2>

<ul>
<li>Docker Engine 20.10.0 までは <code>--secret id=my_secret,src=my_secret.txt</code> のようにファイル経由でしか秘匿情報を渡せなかった</li>
<li>20.10.0 からは <code>--secret id=my_env,env=MY_ENV</code> のように環境変数経由で秘匿情報を渡せるようになった</li>
<li>上記の <code>--secret id=my_env,env=MY_ENV</code> にはショートハンドが用意されており <code>--secret id=MY_ENV</code> とも書ける（この場合 Dockerfile 側でも <code>id</code> は <code>MY_ENV</code> になる）</li>
</ul>


<h2>使い方</h2>

<p>基本的な使い方は <a href="https://docs.docker.com/develop/develop-images/build_enhancements/#new-docker-build-secret-information">公式ドキュメント</a> に書いてあるのでそちらに説明を譲ります。</p>

<p>以下は主に上記の <code>要点</code> と公式ドキュメントに記載のない仕様を説明するための最小のサンプルコードです。</p>

<p>こんな Dockerfile があったとして、</p>

<pre class="code lang-dockerfile" data-lang="dockerfile" data-unlink><span class="synComment"># syntax = docker/dockerfile:1.2</span>
<span class="synStatement">FROM </span>alpine

<span class="synComment"># 1. docker build 時に `id` を明示的に指定する場合（例: `--secret id=my_env1,env=MY_ENV1` ）</span>
<span class="synStatement">RUN </span>--mount=type=secret,id=my_env1 cat /run/secrets/my_env1
<span class="synComment"># 2. docker build 時に `id` を明示的に指定しない場合（例: `--secret id=MY_ENV2`） </span>
<span class="synStatement">RUN </span>--mount=type=secret,id=MY_ENV2 cat /run/secrets/MY_ENV2
<span class="synComment"># 3. `dst` を指定した場合（`dst` を指定しないとデフォルトで `/run/secrets{id}` に秘匿情報が入ります）</span>
<span class="synStatement">RUN </span>--mount=type=secret,id=MY_ENV3,dst=/foobar cat /foobar

<span class="synComment"># 補足: key 名の指定は実はいろいろできるらしい</span>
<span class="synComment"># https://github.com/moby/buildkit/blob/v0.8.2/frontend/dockerfile/instructions/commands_runmount.go#L154-L216</span>
</pre>


<p>以下のように <code>docker build</code> すると、環境変数経由で秘匿情報を渡すことができます。</p>

<pre class="code lang-sh" data-lang="sh" data-unlink>$ <span class="synStatement">export</span><span class="synIdentifier"> MY_ENV1=</span><span class="synStatement">'</span><span class="synConstant">my_env1!!!</span><span class="synStatement">'</span> &amp;&amp; <span class="synStatement">export</span><span class="synIdentifier"> MY_ENV2=</span><span class="synStatement">'</span><span class="synConstant">my_env2!!!</span><span class="synStatement">'</span> &amp;&amp; <span class="synStatement">export</span><span class="synIdentifier"> MY_ENV3=</span><span class="synStatement">'</span><span class="synConstant">my_env3!!!</span><span class="synStatement">'</span>
<span class="synComment"># 複数の秘匿情報を渡すには --secret フラグを複数使えば良い</span>
$ <span class="synIdentifier">DOCKER_BUILDKIT</span>=<span class="synConstant">1</span> docker build <span class="synSpecial">--secret</span> <span class="synIdentifier">id</span>=<span class="synIdentifier">my_env1,env</span>=MY_ENV1 <span class="synSpecial">--secret</span> <span class="synIdentifier">id</span>=MY_ENV2 <span class="synSpecial">--secret</span> <span class="synIdentifier">id</span>=MY_ENV3 <span class="synSpecial">--no-cache</span> <span class="synSpecial">--progress=plain</span> .

<span class="synComment"># ...</span>
<span class="synComment">#8 [2/4] RUN --mount=type=secret,id=my_env1 cat /run/secrets/my_env1</span>
<span class="synComment">#8 sha256:d32e4958843414fb006b5dbe7c259112f1bd481d17d84098c3d84f499793cb3b</span>
<span class="synComment">#8 0.252 my_env1!!!#8 DONE 0.3s</span>

<span class="synComment">#9 [3/4] RUN --mount=type=secret,id=MY_ENV2 cat /run/secrets/MY_ENV2</span>
<span class="synComment">#9 sha256:4cc22ee3d7f39180f4f4f8167deaa481e852b2fc577c89a234fe88b9852952ba</span>
<span class="synComment">#9 0.301 my_env2!!!#9 DONE 0.4s</span>

<span class="synComment">#10 [4/4] RUN --mount=type=secret,id=MY_ENV3,dst=/foobar cat /foobar</span>
<span class="synComment">#10 sha256:91f97f55e633c8ed675126abefa015110265a7fbd40e4aeaf88204dcb912cb26</span>
<span class="synComment">#10 0.283 my_env3!!!#10 DONE 0.3s</span>
<span class="synComment"># ...</span>
</pre>


<h2>Docker Compose で --secret フラグが使えないことへの対策</h2>

<p>余談ですが、Docker Compose には BuildKit が統合されているものの、2021年3月現在 --secret フラグは利用できません。（<a href="https://github.com/docker/compose/pull/7046">対応中らしき PR</a> はある）</p>

<p>私のチームではワークアラウンドとして、開発環境でも <code>docker-compose build</code> ではなく <code>docker build</code> を使う方法を取りました。</p>

<p>Docker Compose では <code>docker-compose.yml</code> で指定しているイメージと同名のイメージがローカルにあればそちらを使ってくれるので、以下のような <code>docker-compose.yml</code> を書いて、</p>

<pre class="code lang-yaml" data-lang="yaml" data-unlink><span class="synIdentifier">version</span><span class="synSpecial">:</span> <span class="synConstant">'3'</span>

<span class="synIdentifier">services</span><span class="synSpecial">:</span>
  <span class="synIdentifier">app</span><span class="synSpecial">:</span>
    <span class="synIdentifier">build</span><span class="synSpecial">:</span> .
    <span class="synIdentifier">image</span><span class="synSpecial">:</span> my-app
   <span class="synComment"> # ...</span>
</pre>




<pre class="code lang-sh" data-lang="sh" data-unlink>$ <span class="synIdentifier">DOCKER_BUILDKIT</span>=<span class="synConstant">1</span> docker build <span class="synSpecial">-t</span> my-app <span class="synSpecial">--secret</span> <span class="synIdentifier">id</span>=MY_ENV .
</pre>


<p>上記のように <code>docker build</code> で同名のイメージを事前に作っておいて <code>docker-compose</code> から使う、という流れになります。</p>

<h2>参考記事</h2>

<ul>
<li><a href="https://medium.com/nttlabs/docker-v18-09-%E6%96%B0%E6%A9%9F%E8%83%BD-%E3%82%A4%E3%83%A1%E3%83%BC%E3%82%B8%E3%83%93%E3%83%AB%E3%83%89-%E3%82%BB%E3%82%AD%E3%83%A5%E3%83%AA%E3%83%86%E3%82%A3-9534714c26e2">Docker 18.09 &#x65B0;&#x6A5F;&#x80FD; (&#x30A4;&#x30E1;&#x30FC;&#x30B8;&#x30D3;&#x30EB;&#x30C9;&amp;&#x30BB;&#x30AD;&#x30E5;&#x30EA;&#x30C6;&#x30A3;) | by Akihiro Suda | nttlabs | Medium</a></li>
<li><a href="https://blog.manabusakai.com/2018/12/docker-build-secret/">Docker Engine 18.09 &#x304B;&#x3089;&#x4F7F;&#x3048;&#x308B; Build-time secrets &#x3092;&#x8A66;&#x3057;&#x3066;&#x307F;&#x305F; | &#x306F;&#x3063;&#x305F;&#x308A;&#x30A8;&#x30F3;&#x30B8;&#x30CB;&#x30A2;&#x306E;&#x5099;&#x5FD8;&#x9332;</a></li>
</ul>

<div class="footnote">
<p class="footnote"><a href="#fn-140b8608" name="f-140b8608" class="footnote-number">*1</a><span class="footnote-delimiter">:</span><span class="footnote-text">BuildKit や --secret フラグってそもそも何？という方は最下部の参考記事に詳しくまとまっておりますのでぜひご覧ください。</span></p>
</div>]]></description>
            <enclosure url="https://cdn.user.blog.st-hatena.com/default_entry_og_image/4268819/1588226000876991" length="0" type="image//default_entry_og_image/4268819/1588226000876991"/>
        </item>
        <item>
            <title><![CDATA[現在の GitHub flow は v2 かな？]]></title>
            <link>https://masutaka.net/2021-03-15-1/</link>
            <guid>https://masutaka.net/2021-03-15-1/</guid>
            <pubDate>Mon, 15 Mar 2021 00:00:00 GMT</pubDate>
            <description><![CDATA[@kyanny さんの記事を自分なりに整理してみる。
  ずっと「マージした後にメインブランチを production デプロイする」というワークフローだと勘違いしていた。
昔は「マージ後にデプロイ」だったが、いつの頃からか「マージ前にデプロイ」に変わったらしい。
 どこかでそんな話は聞いていたけど、実際のところはどうなんだろう？と以前から疑問だった。やっぱりそうだったか。
現在の GitHub flow というか、GiHub の公式ガイドにそのものズバリ書いてあったのね。灯台下暗し&hellip;。
Understanding the GitHub flow · GitHub Guides &ldquo;&gt;&rdquo; を数回クリックし、&ldquo;Deploy&rdquo; に進むと書いてある。
 With GitHub, you can deploy from a branch for final testing in production before merging to main.
main ブランチにマージする前に、最後の確認をするために本番環境にデプロイする。
  If your branch causes issues, you can roll it back by deploying the existing main branch into production.
もし問題が発生したら、main ブランチを本番環境にデプロイすることでロールバック出来る。
 main ブランチの protection rule は &ldquo;Require branches to be up to date before merging&rdquo; を有効にしているのかな。いずれにせよ、main ブランチの commit 全部入りのブランチをデプロイしているはず。]]></description>
        </item>
        <item>
            <title><![CDATA[フィード（RSS/Atom）を配信していないサイトのフィードを Feed43 で作成する]]></title>
            <link>https://masutaka.net/2021-03-14-1/</link>
            <guid>https://masutaka.net/2021-03-14-1/</guid>
            <pubDate>Sun, 14 Mar 2021 00:00:00 GMT</pubDate>
            <description><![CDATA[「Looker の記事一覧｜DevelopersIO 」が更新されたら Slack に POST したかったのです。トップページ ならフィードが配信されているけど、これだと多すぎます。
ノンエンジニアである会社の同僚が https://feed43.com/ で作っているらしいので、試してみました。
結果的にこのフィードを作れましたがめっちゃ面倒くさかったので、記録として残します。同僚すごい&hellip;。
https://feed43.com/developersio-looker.xml https://feed43.com/ の &ldquo;Create your first RSS feed&rdquo; をクリックして、指示に従って作ります。
今回は https://dev.classmethod.jp/tags/looker/ です。入力し Reload します。
HTML が取得され、&ldquo;extraction rules&rdquo; の入力を促されるのでそうします。
予想はしていましたが、これがめちゃめちゃ大変で時間がかかりました。
 HTML 構造を理解する 記事一覧に相当する HTML をテキストエディタに貼り付ける 記事の URL やタイトルなど、取り出したい箇所を {%} で置換し、Extract する Extract できたら儲けもの。不要な HTML を {*} で置換して、少しずつ小さくしていく  最終的にこのルールを作ることが出来ました。
&lt;div class=&#34;post{*}&#34;{*}&gt;{*}&lt;a href=&#34;{%}&#34; class=&#34;link&#34;{*}&gt;{*}&lt;h3 class=&#34;post-title&#34;{*}&gt;{%}&lt;/h3&gt;{*}&lt;/a&gt;{*}&lt;p class=&#34;date&#34;{*}&gt;{%}&lt;/p&gt;{*}&lt;/div&gt; {} はワイルドカードです。関係ない HTML はこれで省略しましょう。スペースや改行、HTML コメントなども削除したら {} にする必要はあるかも。
{%} は正規表現の \1, \2 みたいなやつです。上の例だと 3 つあるので、あとで {%1}, {%2}, {%3} として取り出すことが出来ます。]]></description>
        </item>
        <item>
            <title><![CDATA[『NO RULES』を読んだ]]></title>
            <link>https://masutaka.net/2021-03-13-1/</link>
            <guid>https://masutaka.net/2021-03-13-1/</guid>
            <pubDate>Sat, 13 Mar 2021 00:00:00 GMT</pubDate>
            <description><![CDATA[２ヶ月くらいかけてようやく読み終えました。ビジネス書を読み切れたのはいつ以来ぶりだろう？
 NETFLIXは「能力密度を高める」ことを最優先にしており、そんな超優秀な彼らに「個人における最高水準の報酬を払って」います。
しかも、会社として成長できる環境を用意しているので、他の会社にも引き抜かれづらい理屈らしいです。ペパボのあんちぽさんが書いてた「いるだけで成長できる環境 」を思い出しました。
その原資はそれほど優秀でない人を解雇して確保しているとのこと。日本だと簡単に解雇できないみたいなので、アメリカの法律を最大限に利用しているのかな。NETFLIX の日本法人だとどうなっているんだろう？
NETFLIX ではピラミッド構造ではなく、分散型のいわゆるティール組織なんだと思う。[2019-08-13-1] に読んだ橋本さんの本の中で、大阪市はピラミッド構造でないと無理、ティール組織は絶対無理だと言っていたが、「能力密度」の高い/低いの話だと理解しました。
そして能力密度を十分に高めた状態で、「情報に通じたキャプテン」に意思決定を完全にお任せする。上司は一切意思決定をしない。そのキャプテンはコンテキストをきちんと理解し、さまざまな立場の人からフィードバックを受け、あらゆる選択肢を理解することが求められるし、協力も受ける。
割とすんなり理解できたのは、今所属しているフィードフォースの社長や人事の方が、長い年月をかけて浸透させてきたからかな？以前の私だと納得できなかったかもしれないです。感謝。
それにしても長い。長すぎます。丁寧に説明されているけど、結論を先にして、2/3 くらいに圧縮できなかったものかなあ&hellip;。物理本だと 456 ページもあったんですね。よく読み切った・・・！
そういう意味では [2020-12-20-1] の『データマネジメントが30分でわかる本 』の、読者が「30 秒コース」「3 分コース」「30 分コース」を選べる方式は秀逸でした。
しっかり読むと大変なので、ななめ読みくらいの気持ちでに読むと良いかも。まあでも良い本でした。]]></description>
        </item>
        <item>
            <title><![CDATA[Self-Attentionを用いてGoogle 無料リスティングの「拡張リスティングの不承認」に挑んだ話]]></title>
            <link>https://developer.feedforce.jp/entry/2021/03/11/101244</link>
            <guid>https://developer.feedforce.jp/entry/2021/03/11/101244</guid>
            <pubDate>Thu, 11 Mar 2021 01:12:44 GMT</pubDate>
            <description><![CDATA[<p>こんにちは
株式会社フィードフォース2020年入社の機械学習エンジニア
<a href="https://twitter.com/feed_yao">&#x516B;&#x767E;&#x4FCA;&#x54C9;@Feedforce (@feed_yao) | Twitter</a>と申します。</p>

<p>最近はロードバイク にはまっており、ロードバイク購入後一ヶ月で一日100km走行に成功しました。</p>

<p>今回、<b>Google無料リスティングで不承認アカウントが発生する要因を調査する分析</b>を行いました。</p>

<ul class="table-of-contents">
    <li><a href="#Google-無料リスティングとは">Google 無料リスティングとは？</a></li>
    <li><a href="#なぜ今回分析が必要とされたのか">なぜ今回分析が必要とされたのか？</a></li>
    <li><a href="#結果と考察">結果と考察</a></li>
    <li><a href="#Self-Attentionを採用した理由">Self-Attentionを採用した理由</a></li>
    <li><a href="#実装手順">実装手順</a><ul>
            <li><a href="#使用データのフォーマット">使用データのフォーマット</a></li>
            <li><a href="#必要ライブラリのインストールインポート">必要ライブラリのインストール・インポート</a></li>
            <li><a href="#データの前処理">データの前処理</a></li>
            <li><a href="#学習">学習</a></li>
            <li><a href="#評価出力">評価・出力</a></li>
        </ul>
    </li>
    <li><a href="#まとめ">まとめ</a></li>
</ul>

<h1 id="Google-無料リスティングとは">Google 無料リスティングとは？</h1>

<p>2020年10月にGoogleから公開された<b>Googleショッピングタブに無料で商品掲載ができる「無料リスティング」のことです。</b></p>

<p>Google 検索にサイトがインデックス登録されても料金が発生しないのと同様に、EC事業者は無料で利用可能になりました。
Google 無料リスティングについての詳細は以下のサイトが参考になります。</p>

<p><iframe src="https://hatenablog-parts.com/embed?url=https%3A%2F%2Flab.ecbooster.jp%2Fabout-google-free-listings%2F" title="Googleに無料で自社商品が掲載できる「無料リスティング」とは？" class="embed-card embed-webcard" scrolling="no" frameborder="0" style="display: block; width: 100%; height: 155px; max-width: 500px; margin: 10px 0px;"></iframe><cite class="hatena-citation"><a href="https://lab.ecbooster.jp/about-google-free-listings/">lab.ecbooster.jp</a></cite></p>

<h1 id="なぜ今回分析が必要とされたのか">なぜ今回分析が必要とされたのか？</h1>

<p>無料リスティングでは自社製品を無料でGoogleに掲載できます。
しかしながら、課題として<b>一部商品掲載が不承認となるケースが見受けられました。</b></p>

<p>不承認となってしまうと自社商品の掲載ができていない状況が発生しています。不承認となる理由としては、「Googleが定める基準に対して、登録している商品データの属性数が足りない、内容が仕様に沿っていない場合、商品データの品質が低いため不承認になり、Googleの検索結果に表示させることができません。」とされています。</p>

<p>これらを<b>定量的に分析することで不承認となる理由を見つけ出す試み</b>が始まりました。</p>

<p>そのため今回の分析の目的は、<b>商品の属性情報（title,description）から承認・不承認の要因を見つけ出し、不承認の商品を承認へと改善するための施策を考案する</b>ことです。</p>

<h1 id="結果と考察">結果と考察</h1>

<p>今回の目的である「商品の属性情報（title,description）から承認・不承認の要因を見つけ出し、不承認の商品を承認へと改善するための施策を考案する」は、<b>達成できませんでした。</b></p>

<p>目的が達成できなかった理由として考えられる要因は、<b>承認・不承認は商品のtitle,descriptionだけでは判断されていない</b>ということです。商品ごとのtitle,descriptionのみで承認・不承認が判断されているのではなく、商品データ全体またはアカウント全体のデータを総合的に見て、判断されている可能性が高いということがわかりました。</p>

<p>承認・不承認予測のAccuracyとしては5割〜６割ほどで、承認・不承認を予測するという点でも低い精度となってしまいました。</p>

<h1 id="Self-Attentionを採用した理由">Self-Attentionを採用した理由</h1>

<p>今回はSelf-Attentionという手法を用いてこの課題解決を試みました。</p>

<p>Self-Attentionとは、<b>文章全体で重要とされるキーワードが予測結果と一緒に確認できるようになる</b>手法です。</p>

<p>Self-Attentionの仕組みについては詳しく書かれている方が多くいますので、ここでは割愛します。</p>

<p>最初は、word2vecを用いて文章特徴量を作成し、承認・不承認を予測して終了という一連の流れを想定していました。</p>

<p>しかし、<b>今回の目的は</b>承認・不承認を予測したいわけではなく、<b>どの単語が承認・不承認と関わっているのかを確認し、不承認となっているアカウントを承認にすること</b>です。
もし仮にword2vecを用いた手法を採用すると予測結果の要因や理由が明確にならないので、不承認のアカウントを承認に改善する施策を考えることはできません。</p>

<p>そのため今回は、<b>Self-Attentionを用いて分類モデルを構築することで、承認・不承認の要因が文章内のどこにあるのかを分析する</b>ために、この手法を選択しました。</p>

<h1 id="実装手順">実装手順</h1>

<p>本来の目的は達成できませんでしたが、Self-Attentionでの分類モデルの実装はできましたので、実装方法を記載します。
今回はkerasを用いてSelf-Attention + LSTMで予測を行いました。
検証環境はGoogle Colaboratoryを想定しています。</p>

<h2 id="使用データのフォーマット">使用データのフォーマット</h2>

<p>今回使用できるデータとしては以下のようなデータになっています。</p>

<p>各アカウント・各商品ごとに商品IDが割り振られており、それぞれの商品にtitle,descriptionが割り振られています。</p>

<p><b>承認・不承認のラベルは、アカウントごとに付加されています。
</b></p>

<p><span itemscope itemtype="http://schema.org/Photograph"><img src="https://cdn-ak.f.st-hatena.com/images/fotolife/n/newton800/20210224/20210224172435.png" alt="f:id:newton800:20210224172435p:plain" title="" class="hatena-fotolife" itemprop="image"></span></p>

<h2 id="必要ライブラリのインストールインポート">必要ライブラリのインストール・インポート</h2>

<pre class="code lang-python" data-lang="python" data-unlink>!pip install text_vectorian
!pip install mojimoji
!apt install aptitude
!aptitude install mecab libmecab-dev mecab-ipadic-utf8 git make curl xz-utils <span class="synIdentifier">file</span> -y
!pip install mecab-python3==<span class="synConstant">0.7</span>
</pre>




<pre class="code lang-python" data-lang="python" data-unlink><span class="synPreProc">import</span> pandas <span class="synStatement">as</span> pd
<span class="synPreProc">import</span> numpy <span class="synStatement">as</span> np
<span class="synPreProc">import</span> keras
<span class="synPreProc">import</span> os
<span class="synPreProc">import</span> warnings
warnings.simplefilter(<span class="synConstant">'ignore'</span>)
<span class="synPreProc">import</span> subprocess
<span class="synPreProc">import</span> mojimoji
<span class="synPreProc">import</span> re
<span class="synPreProc">import</span> MeCab
<span class="synPreProc">import</span> matplotlib.pyplot <span class="synStatement">as</span> plt

<span class="synPreProc">from</span> keras.layers <span class="synPreProc">import</span> Dense, Dropout, LSTM, Embedding, BatchNormalization
<span class="synPreProc">from</span> keras.layers.wrappers <span class="synPreProc">import</span> Bidirectional
<span class="synPreProc">from</span> keras.callbacks <span class="synPreProc">import</span> EarlyStopping, ModelCheckpoint
<span class="synPreProc">from</span> keras <span class="synPreProc">import</span> Input, Model, utils
<span class="synPreProc">from</span> keras.preprocessing.sequence <span class="synPreProc">import</span> pad_sequences
<span class="synPreProc">from</span> keras.callbacks <span class="synPreProc">import</span> EarlyStopping

<span class="synPreProc">from</span> text_vectorian <span class="synPreProc">import</span> SentencePieceVectorian
<span class="synPreProc">from</span> keras_self_attention <span class="synPreProc">import</span> SeqSelfAttention
<span class="synPreProc">from</span> sklearn.model_selection <span class="synPreProc">import</span> train_test_split
<span class="synPreProc">from</span> sklearn.metrics <span class="synPreProc">import</span> classification_report
</pre>


<h2 id="データの前処理">データの前処理</h2>

<pre class="code lang-python" data-lang="python" data-unlink><span class="synComment"># データの読み込み</span>
app = pd.read_csv(<span class="synConstant">'data/app.csv'</span>) <span class="synComment"># 承認データ</span>
disapp = pd.read_csv(<span class="synConstant">'data/disapp.csv'</span>) <span class="synComment"># 不承認データ</span>

app[<span class="synConstant">'target'</span>] = <span class="synConstant">'app'</span> <span class="synComment"># targetにlabelを代入する</span>
disapp[<span class="synConstant">'target'</span>] = <span class="synConstant">'disapp'</span>

<span class="synComment"># 今回は、titleとdescriptionを用いて予測するので、それら二つの変数を一つにまとめる</span>
app[<span class="synConstant">'sentence'</span>] = app[<span class="synConstant">'title'</span>] + app[<span class="synConstant">'description'</span>] 
disapp[<span class="synConstant">'sentence'</span>] = disapp[<span class="synConstant">'title'</span>] + disapp[<span class="synConstant">'description'</span>]

<span class="synComment"># これまで別々に処理していたappとdisappをまとめてdfとする</span>
df = app.append(disapp)
</pre>


<p>今回のデータは特殊で、承認・不承認は商品ごとについているラベルではなくアカウントと紐づいたラベルとなっています。それらを各商品と承認・不承認が紐づいているとして各商品ごとに予測することを行ってます。</p>

<p>ここで注意が必要なのは、データの分割方法です。<b>アカウントを無視してデータを分割してしまうとリークを起こす可能性があります</b>（リークとは、本来予測では使用できないデータが学習時に入ってしまっていることです）。</p>

<p><b>そのため同じアカウントのデータが訓練データ、検証データ、テストデータに渡って存在しないようにしなければなりません</b>。</p>

<p>例えば、アカウントAの商品データは全て訓練データとする,アカウントBの商品データは全てテストデータにするといったようなことを意味しています。</p>

<p>アカウントごとにデータを分割するには、各アカウントごとの商品数がある程度同じである方がlabelが不均衡にならないと考え、データ数を揃える処理を施しました。
（これらはGroupKFoldを使用すれば解決できると考えられますが、分析実施時はGroupKFoldを知らなかった）</p>

<pre class="code lang-python" data-lang="python" data-unlink><span class="synComment"># アカウントごとに商品数が異なるので50以上商品数がある場合は50までの商品を使用する</span>
<span class="synComment"># アカウントごとに商品数を揃えることで、labelが不均衡になることを緩和している</span>
<span class="synComment"># アカウントごとにlabelがふられるが、商品ごとに予測結果を出す時のみ実施</span>
cutted_df = pd.DataFrame([])
<span class="synStatement">for</span> acc <span class="synStatement">in</span> df.account_name.unique():
  data = df[df.account_name == acc]
  <span class="synStatement">if</span> data.shape[<span class="synConstant">0</span>] &gt; <span class="synConstant">50</span>: 
    data = data[:<span class="synConstant">50</span>]
  cutted_df = pd.concat([cutted_df,data],<span class="synConstant">0</span>)  

df = cutted_df.sample(frac=<span class="synConstant">1</span>,random_state=<span class="synConstant">1</span>).reset_index(drop=<span class="synIdentifier">True</span>)
</pre>


<p>次は、データの前処理についてです。</p>

<p>自然言語処理の前処理で有効と言われている半角->全角、数字は全て0にする、スペース文字の消去を行いました。
また、これまでlabelが'app'または'disapp'だったのでそれらを入力できる形式に変換しています。</p>

<pre class="code lang-python" data-lang="python" data-unlink>
<span class="synStatement">def</span> <span class="synIdentifier">PreprocessData</span>(df,dirname):
  <span class="synComment"># データの前処理関数</span>
  <span class="synComment"># 辞書型を返す</span>

  mecab = MeCab.Tagger(<span class="synConstant">'-Ochasen'</span>)

  <span class="synComment"># textデータの前処理</span>
  df = TextPreprocess(df)

  label2index = {k: i <span class="synStatement">for</span> i, k <span class="synStatement">in</span> <span class="synIdentifier">enumerate</span>(df.target.unique())}
  index2label = {i: k <span class="synStatement">for</span> i, k <span class="synStatement">in</span> <span class="synIdentifier">enumerate</span>(df.target.unique())}

  class_count = <span class="synIdentifier">len</span>(label2index)
  labels = utils.to_categorical([label2index[label] <span class="synStatement">for</span> label <span class="synStatement">in</span> df.target], num_classes=class_count)

  features,sentences,vectorian,account = MakeFeatures(df)

  <span class="synStatement">return</span> {
      <span class="synConstant">'class_count'</span>: class_count,
      <span class="synConstant">'label2index'</span>: label2index,
      <span class="synConstant">'index2label'</span>: index2label,
      <span class="synConstant">'labels'</span>: labels,
      <span class="synConstant">'features'</span>: features,
      <span class="synConstant">'sentences'</span>:sentences,
      <span class="synConstant">'input_len'</span>: vectorian.max_tokens_len,
      <span class="synConstant">'vectorian'</span>:vectorian,
      <span class="synConstant">'account'</span>:account
  }

<span class="synStatement">def</span> <span class="synIdentifier">TextPreprocess</span>(df):
  <span class="synStatement">for</span> i <span class="synStatement">in</span> df.index:
    sen = df.loc[i,<span class="synConstant">'sentence'</span>]
    sen = mojimoji.han_to_zen(sen)
    sen = re.sub(<span class="synConstant">r'\d+'</span>,<span class="synConstant">'0'</span>,sen)
    df.loc[i,<span class="synConstant">'sentence'</span>] = sen.replace(<span class="synConstant">'</span><span class="synSpecial">\u3000</span><span class="synConstant">'</span>,<span class="synConstant">''</span>)
  <span class="synStatement">return</span> df

<span class="synStatement">def</span> <span class="synIdentifier">MakeFeatures</span>(df):
  vectorian = SentencePieceVectorian()

  features = []
  sentences = []
  accounts = []
  <span class="synStatement">for</span> feature,account <span class="synStatement">in</span> <span class="synIdentifier">zip</span>(df[<span class="synConstant">'sentence'</span>],df[<span class="synConstant">'account_name'</span>]):
    f = vectorian.fit(feature).indices
    features.append(f)
    sentences.append(feature)
    accounts.append(account)

  features = pad_sequences(features, maxlen=vectorian.max_tokens_len)

  <span class="synStatement">return</span> features,sentences,vectorian,accounts
</pre>


<p>では、ここまでの前処理を流します。</p>

<pre class="code lang-python" data-lang="python" data-unlink>data = PreprocessData(df,dirname) <span class="synComment"># dirnameは、出力結果などを入れたいpath入れてください</span>
</pre>


<p>次はtrain_test_splitを行いますが、先ほども記述した通り通常の手法ではリークするので、以下のようにしました。
（上述の通りGroupKFoldの実施で回避できる）</p>

<pre class="code lang-python" data-lang="python" data-unlink><span class="synStatement">def</span> <span class="synIdentifier">CollectData</span>(data,account):
  features = []
  sentences = []
  labels = []
  
  <span class="synStatement">for</span> ac <span class="synStatement">in</span> account:
    where_ = np.where(np.array(data[<span class="synConstant">'account'</span>]) == ac)
    features.extend(np.array(data[<span class="synConstant">'features'</span>])[where_])
    sentences.extend(np.array(data[<span class="synConstant">'sentences'</span>])[where_])
    labels.extend(np.array(data[<span class="synConstant">'labels'</span>])[where_])
  <span class="synStatement">return</span> np.array(features),np.array(sentences),np.array(labels)

train_account,test_account = train_test_split(<span class="synIdentifier">list</span>(<span class="synIdentifier">set</span>(data[<span class="synConstant">'account'</span>])),test_size=<span class="synConstant">0.2</span>,random_state=<span class="synConstant">1</span>)
train_account,val_account = train_test_split(train_account,test_size=<span class="synConstant">0.25</span>,random_state=<span class="synConstant">1</span>)

train_features,train_sen,train_labels = CollectData(data,train_account)
val_features,val_sen,val_labels = CollectData(data,val_account)
test_features,test_sen,test_labels = CollectData(data,test_account)
</pre>


<p>通常のデータセットであれば、以下のようにすることでデータの分割が行えます。</p>

<pre class="code lang-python" data-lang="python" data-unlink>(train_features,val_features,
 train_labels,val_labels,
 train_sen,val_sen) = train_test_split(data[<span class="synConstant">'features'</span>], data[<span class="synConstant">'labels'</span>], data[<span class="synConstant">'sentences'</span>], test_size=<span class="synConstant">0.2</span>, random_state=<span class="synConstant">1</span>)

(train_features,test_features,
 train_labels,test_labels,
 train_sen,test_sen) = train_test_split(train_features, train_labels, train_sen, test_size=<span class="synConstant">0.25</span>, random_state=<span class="synConstant">1</span>)
</pre>


<p>ここまででデータの整形が完了です。</p>

<h2 id="学習">学習</h2>

<p>次は、モデルの定義を行います。</p>

<pre class="code lang-python" data-lang="python" data-unlink><span class="synStatement">def</span> <span class="synIdentifier">_create_model</span>(input_shape, hidden, class_count,vectorian):
    input_tensor = Input(input_shape)
    common_input = vectorian.get_keras_layer(trainable=<span class="synIdentifier">True</span>)(input_tensor)
    x1 = SeqSelfAttention(name=<span class="synConstant">'attention'</span>)(common_input)
    x1 = Bidirectional(LSTM(hidden))(x1)
    x1 = Dropout(<span class="synConstant">0.5</span>)(x1)
    x1 = Dense(<span class="synConstant">32</span>)(x1)
    x1 = Dropout(<span class="synConstant">0.5</span>)(x1)
    x1 = Dense(<span class="synConstant">16</span>)(x1)
    x1 = Dropout(<span class="synConstant">0.5</span>)(x1)
    output_tensor = Dense(class_count, activation=<span class="synConstant">'softmax'</span>, name=<span class="synConstant">'class'</span>)(x1)

    model = Model(input_tensor, output_tensor)
    model.compile(loss=<span class="synConstant">'categorical_crossentropy'</span>, optimizer=<span class="synConstant">'nadam'</span>, metrics=[<span class="synConstant">'acc'</span>])

    <span class="synStatement">return</span> model

hidden = <span class="synConstant">356</span>
model = _create_model(train_features[<span class="synConstant">0</span>].shape, hidden, data[<span class="synConstant">'class_count'</span>],data[<span class="synConstant">'vectorian'</span>])
model.summary()
</pre>


<p>作成したモデルにデータを流して学習を進めます。</p>

<pre class="code lang-python" data-lang="python" data-unlink>model_filename=<span class="synConstant">'{0}/model.h5'</span>.format(dirname)

history = model.fit(train_features, train_labels,
                    epochs=<span class="synConstant">50</span>,
                    batch_size=<span class="synConstant">32</span>,
                    validation_data=(val_features, val_labels),
                    shuffle=<span class="synIdentifier">False</span>,
                    callbacks = [
                        EarlyStopping(patience=<span class="synConstant">5</span>, monitor=<span class="synConstant">'val_acc'</span>, mode=<span class="synConstant">'max'</span>),
                        ModelCheckpoint(filepath=model_filename, monitor=<span class="synConstant">'val_acc'</span>, mode=<span class="synConstant">'max'</span>, save_best_only=<span class="synIdentifier">True</span>)
                    ])
</pre>


<h2 id="評価出力">評価・出力</h2>

<p>ModelCheckpointで保存したmodelを読み取り、さらにSelf-Attentionの結果を得られるようにします。</p>

<pre class="code lang-python" data-lang="python" data-unlink><span class="synPreProc">from</span> keras.models <span class="synPreProc">import</span> load_model
model = load_model(model_filename, custom_objects=SeqSelfAttention.get_custom_objects())
model = Model(inputs=model.input, outputs=[model.output, model.get_layer(<span class="synConstant">'attention'</span>).output])
</pre>


<p>modelにtest dataを入れて結果を取得します。</p>

<pre class="code lang-python" data-lang="python" data-unlink>out = model.predict(test_features)

y = out[<span class="synConstant">0</span>] <span class="synComment"># 予測labelのsoftmaxが入っている</span>
weight = out[<span class="synConstant">1</span>] <span class="synComment"># Self-Attentionのweighが入っている</span>

pred = np.argmax(y,<span class="synConstant">1</span>) <span class="synComment"># 予測値</span>
<span class="synIdentifier">max</span> = np.max(y,<span class="synConstant">1</span>) <span class="synComment"># 信頼値</span>

df_y = pd.DataFrame(np.array([np.argmax(test_labels,<span class="synConstant">1</span>),pred,<span class="synIdentifier">max</span>*<span class="synConstant">100</span>]).T,columns=[<span class="synConstant">'true'</span>,<span class="synConstant">'pred'</span>,<span class="synConstant">'trust'</span>]) <span class="synComment"># 結果をまとめておくと精度確認に使える</span>
</pre>


<p>精度の確認を行います。</p>

<p>ただ、testを入力し得られた結果を出力するだけでは精度が得られなかったので、信頼値が高いものだけを選別し、出力するようにしました。
信頼値を90~55の間で出力し、<b>最もAccuracyが高い時の信頼値以上のものを出力</b>としました。</p>

<p> 一方で信頼値を上げすぎるとわずかな出力しか得られないので、元のtestデータ数の1/3はデータ数が出力として確保できるような条件を加えました。</p>

<pre class="code lang-python" data-lang="python" data-unlink>report = classification_report(pred, np.argmax(test_labels,<span class="synConstant">1</span>),output_dict=<span class="synIdentifier">True</span>,target_names=[data[<span class="synConstant">'index2label'</span>][i] <span class="synStatement">for</span> i <span class="synStatement">in</span> [<span class="synConstant">0</span>,<span class="synConstant">1</span>]])
FirstReport_df = pd.DataFrame(report).T

<span class="synIdentifier">print</span>(FirstReport_df)
FirstReport_df.to_csv(dirname+<span class="synConstant">'NotCutReport.csv'</span>)

<span class="synComment"># 信頼値が高い予測だけを出力とすることで確からしいものだけをみる</span>
AppSupport = FirstReport_df.loc[<span class="synConstant">'app'</span>,<span class="synConstant">'support'</span>] <span class="synComment"># 予測した数を取得</span>
DisappSupport = FirstReport_df.loc[<span class="synConstant">'disapp'</span>,<span class="synConstant">'support'</span>]

<span class="synStatement">for</span> UpperLimit <span class="synStatement">in</span> <span class="synIdentifier">range</span>(<span class="synConstant">90</span>,<span class="synConstant">55</span>,-<span class="synConstant">1</span>):
  max_acc = <span class="synConstant">0</span>
  <span class="synStatement">for</span> i <span class="synStatement">in</span> <span class="synIdentifier">range</span>(<span class="synConstant">50</span>,UpperLimit,<span class="synConstant">1</span>):
    df_y_cut = df_y[df_y.trust &gt; i]
    report = classification_report(df_y_cut.pred, df_y_cut.true ,output_dict=<span class="synIdentifier">True</span>)
    report_df = pd.DataFrame(report).T
    acc = report_df.loc[<span class="synConstant">'accuracy'</span>,<span class="synConstant">'precision'</span>]
    <span class="synStatement">if</span> max_acc &lt; acc:
      max_acc = acc
      max_i = i
  df_y_cut = df_y[df_y.trust &gt; max_i]
  report = classification_report(df_y_cut.pred, df_y_cut.true ,output_dict=<span class="synIdentifier">True</span>,target_names=[data[<span class="synConstant">'index2label'</span>][i] <span class="synStatement">for</span> i <span class="synStatement">in</span> [<span class="synConstant">0</span>,<span class="synConstant">1</span>]])
  report_df = pd.DataFrame(report).T
  <span class="synStatement">if</span> (report_df.loc[<span class="synConstant">'app'</span>,<span class="synConstant">'support'</span>] &gt; HighSupport/<span class="synConstant">3</span>) <span class="synStatement">and</span> (report_df.loc[<span class="synConstant">'disapp'</span>,<span class="synConstant">'support'</span>] &gt; LowSupport/<span class="synConstant">3</span>):
    <span class="synComment"># 元の予測値の1/3のデータ数が確保できていればクリア</span>
    <span class="synIdentifier">print</span>(<span class="synConstant">'UpperLimit:'</span> + <span class="synIdentifier">str</span>(UpperLimit))
    <span class="synIdentifier">print</span>(<span class="synConstant">'max_i:'</span> + <span class="synIdentifier">str</span>(max_i))
    <span class="synIdentifier">print</span>(report_df)
    report_df.to_csv(dirname+<span class="synConstant">'Report.csv'</span>)
    <span class="synStatement">break</span>
</pre>


<p>最後にSelf-AttentionのWeightをcsvで出力します。</p>

<p>得られた出力結果は、予測値-承認と真値-承認、予測値-承認と真値-不承認、予測値-不承認と真値-承認、予測値-不承認と真値-不承認のように予測値と真値の結果に応じて4つに分けてcsvで出力するようになっています。</p>

<pre class="code lang-python" data-lang="python" data-unlink>app_app = pd.DataFrame([])
app_disapp = pd.DataFrame([])
disapp_app = pd.DataFrame([])
disapp_disapp = pd.DataFrame([])

<span class="synStatement">for</span> i <span class="synStatement">in</span> <span class="synIdentifier">range</span>(<span class="synIdentifier">len</span>(test_features)):
  input_text = test_sen[i]
  tokens = data[<span class="synConstant">'vectorian'</span>].tokenizer._tokenizer.encode_as_pieces(input_text)

  conf = out[<span class="synConstant">0</span>][i] * <span class="synConstant">100</span>
  wei = out[<span class="synConstant">1</span>][i]

  <span class="synStatement">if</span> np.max(conf) &lt;= max_i:
    <span class="synStatement">continue</span>

  pred = [data[<span class="synConstant">'index2label'</span>][np.argmax(conf)]]
  labels = [data[<span class="synConstant">'index2label'</span>][np.argmax(test_labels[i])]]

  weights = [w.max() <span class="synStatement">for</span> w <span class="synStatement">in</span> wei[-<span class="synIdentifier">len</span>(tokens):]]

  df = pd.DataFrame([tokens, weights], index=[<span class="synConstant">'token'</span>, <span class="synConstant">'weight'</span>]).T

  mean = np.asarray(weights).mean()
  <span class="synStatement">for</span> j <span class="synStatement">in</span> df.index:
    <span class="synStatement">if</span> df.loc[j,<span class="synConstant">'weight'</span>] - mean &lt;= <span class="synConstant">0</span>:
      df.loc[j,<span class="synConstant">'weight'</span>] = <span class="synConstant">0</span>
    <span class="synStatement">else</span>:
      df.loc[j,<span class="synConstant">'weight'</span>] = df.loc[j,<span class="synConstant">'weight'</span>] - mean
  
  pred += df.token.values.tolist()
  labels += df.weight.values.tolist()

  final = pd.DataFrame(np.array([pred,labels]).T,columns=[<span class="synConstant">'pred'</span>,input_text])

  <span class="synStatement">if</span> (pred[<span class="synConstant">0</span>] == <span class="synConstant">'app'</span>) &amp; (labels[<span class="synConstant">0</span>] == <span class="synConstant">'app'</span>):
    app_app = pd.concat([app_app,final],<span class="synConstant">1</span>)
  <span class="synStatement">elif</span> (pred[<span class="synConstant">0</span>]  == <span class="synConstant">'app'</span>) &amp; (labels[<span class="synConstant">0</span>] == <span class="synConstant">'disapp'</span>):
    app_disapp = pd.concat([app_disapp,final],<span class="synConstant">1</span>)
  <span class="synStatement">elif</span> (pred[<span class="synConstant">0</span>]  == <span class="synConstant">'disapp'</span>) &amp; (labels[<span class="synConstant">0</span>] == <span class="synConstant">'app'</span>):
    disapp_app = pd.concat([disapp_app,final],<span class="synConstant">1</span>)
  <span class="synStatement">elif</span> (pred[<span class="synConstant">0</span>]  == <span class="synConstant">'disapp'</span>) &amp; (labels[<span class="synConstant">0</span>] == <span class="synConstant">'diaspp'</span>):
    disapp_disapp = pd.concat([disapp_disapp,final],<span class="synConstant">1</span>)

app_app.to_csv(dirname+<span class="synConstant">'app_app.csv'</span>,index=<span class="synIdentifier">False</span>)
app_disapp.to_csv(dirname+<span class="synConstant">'app_disapp.csv'</span>,index=<span class="synIdentifier">False</span>)
disapp_app.to_csv(dirname+<span class="synConstant">'disapp_app.csv'</span>,index=<span class="synIdentifier">False</span>)
disapp_disapp.to_csv(dirname+<span class="synConstant">'disapp_disapp.csv'</span>,index=<span class="synIdentifier">False</span>)
</pre>


<h1 id="まとめ">まとめ</h1>

<p>Self-Attentionを用いて無料リスティングの不承認理由を解き明かそうと分析しました。
しかし、<b>title,descriptionのみからは承認と不承認を分類することができず、不承認理由の解明には貢献できせんでした。</b></p>

<p>Self-Attentionとデータセットの相性が悪いという可能性も考えられるので、tfidf+lgbも試みましたが、こちらもうまくいきませんでした。やはりこちらの結果からもtitle,descriptionのみからは承認と不承認を分類することができないということが考えられます。</p>
]]></description>
            <enclosure url="https://cdn-ak.f.st-hatena.com/images/fotolife/n/newton800/20210224/20210224172435.png" length="0" type="image/png"/>
        </item>
        <item>
            <title><![CDATA[『集合論入門』の第１編まで読んであとは挫折した]]></title>
            <link>https://masutaka.net/2021-03-09-1/</link>
            <guid>https://masutaka.net/2021-03-09-1/</guid>
            <pubDate>Tue, 09 Mar 2021 00:00:00 GMT</pubDate>
            <description><![CDATA[[2021-02-22-1] の『達人に学ぶSQL徹底指南書 第2版 』から派生して読みました。Amazon のレビューでは読みやすい読みやすいと書いてあったので、どんなに読みやすいか期待しつつ読み進めました。
 「第１編 集合の代数」は確かに読みやすかったですが、「第２編 濃度」から急に理解できなくなり、「第３編 順序数」も含めてペラペラとページをめくって終了しました。
正確に書くと、SQL との関連性に期待して読み進めたが、距離が遠すぎて読むのを止めたといった感じです。焦るところではないので、そういうものだと受け入れました。
以下は第１編の自分用メモです。高校の頃は数学が好きだったので、懐かしみながらメモを取りました。
a ∈ A
a は A に属する、a は A の元（げん）である
a ∉ A
a は A に属さない、a は A の元（げん）でない
A ⊆ B または B ⊇ A
A は B の部分集合である
A ⊂ B または B ⊃ A
A は B の真部分集合である
Ø または {}
空集合
A ∪ B
A と B の和集合。&ldquo;A cup B&rdquo; または &ldquo;A join B&rdquo; と読む。SQL では UNION なので、∪ は覚えやすい。]]></description>
        </item>
        <item>
            <title><![CDATA[自作の gem の名前を考えるのは難しい]]></title>
            <link>https://ryz310.hateblo.jp/entry/2021/03/07/202519</link>
            <guid>https://ryz310.hateblo.jp/entry/2021/03/07/202519</guid>
            <pubDate>Sun, 07 Mar 2021 11:25:19 GMT</pubDate>
            <description><![CDATA[<h2>自作の gem の名前を変えたい。</h2>

<p><code>my_api_client</code> という自作の gem がありまして、<a href="https://ryz310.hateblo.jp/search?q=my_api_clien">このブログでは何度も紹介している</a> んですが、ニッチすぎるのか宣伝が下手すぎるのか、一向に使ってみた、という噂を聞きません (´・ω・｀)</p>

<p><iframe src="https://hatenablog-parts.com/embed?url=https%3A%2F%2Fgithub.com%2Fryz310%2Fmy_api_client" title="ryz310/my_api_client" class="embed-card embed-webcard" scrolling="no" frameborder="0" style="display: block; width: 100%; height: 155px; max-width: 500px; margin: 10px 0px;"></iframe><cite class="hatena-citation"><a href="https://github.com/ryz310/my_api_client">github.com</a></cite></p>

<p>まあ弊社のプロダクトの中ではガッツリ使ってるんで別にそれは良いんですが、もう少しまともな名前にならんのかね、というコメントを頂きます。
いい機会だしちゃんと良い名前付けようと思って考えました。どうせなら自分が好きなゲームからいい名前付けたいな、と思って『Luida（<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%EB%A5%A4%A1%BC%A5%C0">ルイーダ</a>）』という名前が浮かびました。<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%C9%A5%E9%A5%AF%A5%A8">ドラクエ</a> III のあれです。</p>

<p><figure class="figure-image figure-image-fotolife" title="ここはルイーダの店"><span itemscope itemtype="http://schema.org/Photograph"><img src="https://cdn-ak.f.st-hatena.com/images/fotolife/r/ryz310/20201004/20201004001621.jpg" alt="f:id:ryz310:20201004001621j:plain:w300" title="" class="hatena-fotolife" style="width:300px" itemprop="image"></span><figcaption>ここは<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%EB%A5%A4%A1%BC%A5%C0">ルイーダ</a>の店。旅人たちが仲間を求めてあつまる出会いと別れの酒場よ。</figcaption></figure></p>

<p><code>my_api_client</code> は <a class="keyword" href="http://d.hatena.ne.jp/keyword/API">API</a> Client を簡単に作ったりテストしたりするための gem なので、<a class="keyword" href="http://d.hatena.ne.jp/keyword/%CB%C1%B8%B1%BC%D4">冒険者</a>を登録して一緒に旅する<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%EB%A5%A4%A1%BC%A5%C0">ルイーダ</a>の店のイメージがピッタリだなーと思ったんですよね。とはいえ gem の名前を変えるのって面倒だしそのうちやろう、って思ってたら半年くらい経っちゃいましたけどね。上の<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%EB%A5%A4%A1%BC%A5%C0">ルイーダ</a>の店の画像ってわざわざ <a class="keyword" href="http://d.hatena.ne.jp/keyword/iPhone">iPhone</a> 版の<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%C9%A5%E9%A5%AF%A5%A8III">ドラクエIII</a> 買ってスクショ撮ったんですが、その日付が 2020/10/04 でした 😇</p>

<p>多分そのうちやります（フラグ）</p>

<h2>my_<a class="keyword" href="http://d.hatena.ne.jp/keyword/api">api</a>_client v0.20.0 をリリースしました 🚀</h2>

<p>gem の名前は変わらないけどアップデートはされていく。</p>

<p><iframe src="https://hatenablog-parts.com/embed?url=https%3A%2F%2Fgithub.com%2Fryz310%2Fmy_api_client%2Freleases%2Ftag%2Fv0.20.0" title="Release v0.20.0 (Mar 07, 2021) · ryz310/my_api_client" class="embed-card embed-webcard" scrolling="no" frameborder="0" style="display: block; width: 100%; height: 155px; max-width: 500px; margin: 10px 0px;"></iframe><cite class="hatena-citation"><a href="https://github.com/ryz310/my_api_client/releases/tag/v0.20.0">github.com</a></cite></p>

<p>元々 <code>my_api_client</code> には <code>#pageable_get</code> (alias: <code>#pget</code>) というメソッドがあり、<a class="keyword" href="http://d.hatena.ne.jp/keyword/REST%20API">REST API</a> のレスポンス <a class="keyword" href="http://d.hatena.ne.jp/keyword/JSON">JSON</a> に含まれる URL を順に辿ってリク<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%A8%A5%B9">エス</a>トする <code>Enumerator</code> を取得することが出来ます。機能自体は実相してテストもしてあるものの、実際のプロダクトで使う機会がなく長いこと日の目を見なかったんですが、この度ついに弊プロダクトで利用する機会が訪れたのでチームのエンジニアに使ってもらってるんですが、 <a class="keyword" href="http://d.hatena.ne.jp/keyword/RSpec">RSpec</a> を書く際のスタブ化が特にサポートされていなくてテストしづらい問題がありました。</p>

<p>今回のアップデートでは、この <code>#pageable_get</code> に対応するスタブ化をサポートしています。 <a href="https://github.com/ryz310/my_api_client/blob/master/README.jp.md#pageable-option">詳しい解説は README.jp.md にも書いた</a> んですが、せっかくなのでブログにも転記しておきます。まあ文章で説明されても実際に使ってみないとピンと来ないのはわかってますけどね。。。</p>

<hr />

<p><code>#pageable_get</code>  (<code>#pget</code>) を使った実装用に <code>pageable</code> というオプションが利用できます。
<code>pageable</code> に設定する値は <code>Enumerable</code> である必要があります。</p>

<pre class="code lang-ruby" data-lang="ruby" data-unlink>stub_api_client_all(
  <span class="synType">MyPaginationApiClient</span>,
  <span class="synConstant">pagination</span>: {
    <span class="synConstant">pageable</span>: [
      { <span class="synConstant">page</span>: <span class="synConstant">1</span> },
      { <span class="synConstant">page</span>: <span class="synConstant">2</span> },
      { <span class="synConstant">page</span>: <span class="synConstant">3</span> },
    ],
  }
)

<span class="synType">MyPaginationApiClient</span>.new.pagination.each <span class="synStatement">do</span> |<span class="synIdentifier">response</span>|
  response.page <span class="synComment">#=&gt; 1, 2, 3</span>
<span class="synStatement">end</span>
</pre>


<p>なお、 <code>Enumerable</code> の各値にはここまで紹介した <code>response</code>, <code>raise</code>, <code>Proc</code> など全てのオプションが利用可能です。</p>

<pre class="code lang-ruby" data-lang="ruby" data-unlink>stub_api_client_all(
  <span class="synType">MyPaginationApiClient</span>,
  <span class="synConstant">pagination</span>: {
    <span class="synConstant">pageable</span>: [
      { <span class="synConstant">response</span>: { <span class="synConstant">page</span>: <span class="synConstant">1</span> } },
      { <span class="synConstant">page</span>: <span class="synConstant">2</span> },
      -&gt;(params) { { <span class="synConstant">page</span>: <span class="synConstant">3</span>, <span class="synConstant">user_id</span>: params[<span class="synConstant">:user_id</span>] } },
      { <span class="synConstant">raise</span>: <span class="synType">MyApiClient</span>::<span class="synType">ClientError</span>::<span class="synType">IamTeapot</span> },
    ],
  }
)
</pre>


<p>また、 <code>Enumerator</code> を使えば無限に続くページネーションを定義することもできます。</p>

<pre class="code lang-ruby" data-lang="ruby" data-unlink>stub_api_client_all(
  <span class="synType">MyPaginationApiClient</span>,
  <span class="synConstant">pagination</span>: {
    <span class="synConstant">pageable</span>: <span class="synType">Enumerator</span>.new <span class="synStatement">do</span> |<span class="synIdentifier">y</span>|
      <span class="synStatement">loop</span>.with_index(<span class="synConstant">1</span>) <span class="synStatement">do</span> |<span class="synIdentifier">_</span>, <span class="synIdentifier">i</span>|
        y &lt;&lt; { <span class="synConstant">page</span>: i }
      <span class="synStatement">end</span>
    <span class="synStatement">end</span>,
  }
)
</pre>

]]></description>
            <enclosure url="https://cdn-ak.f.st-hatena.com/images/fotolife/r/ryz310/20201004/20201004001621.jpg" length="0" type="image/jpg"/>
        </item>
        <item>
            <title><![CDATA[データ指向アプリケーションデザイン 第三章 旅行記]]></title>
            <link>https://developer.feedforce.jp/entry/2021/03/04/180304</link>
            <guid>https://developer.feedforce.jp/entry/2021/03/04/180304</guid>
            <pubDate>Thu, 04 Mar 2021 09:03:04 GMT</pubDate>
            <description><![CDATA[<p>こんにちは。<a href="http://blog.hatena.ne.jp/kano-e/" class="hatena-id-icon"><img src="https://cdn.profile-image.st-hatena.com/users/kano-e/profile.png" width="16" height="16" alt="" class="hatena-id-icon">id:kano-e</a> です。</p>

<p>先日 <a href="https://developer.feedforce.jp/entry/2021/03/02/172959">データ指向アプリケーションデザイン 第二章 旅行記</a> という記事を公開しました。<br />
今日はその続き、第三章です。</p>

<p>第三章も第二章と同じく、地図への書き込みという形で読書記録を作りました。</p>

<p>第三章の章題は「ストレージと抽出」です。<br />
その旅路は以下の画像の通り。</p>

<p><figure class="figure-image figure-image-fotolife" title="データ指向アプリケーションデザイン 第三章 旅行記"><span itemscope itemtype="http://schema.org/Photograph"><img src="https://cdn-ak.f.st-hatena.com/images/fotolife/k/kano-e/20191216/20191216212951.jpg" alt="f:id:kano-e:20191216212951j:plain" title="" class="hatena-fotolife" itemprop="image"></span><figcaption>データ指向アプリケーションデザイン 第三章 旅行記</figcaption></figure></p>

<p>第三章では分散データ洋に浮かぶ島を舞台に、トランザクション共和国のログストラクチャ、B-Tree領、そして分析王国のデータウェアハウス領まで旅をしました。</p>

<p>この旅の記録が、ツールの選定やチューニングの際の道標になるのでは、と思います。</p>

<p><div class="hatena-asin-detail"><a href="https://www.amazon.co.jp/exec/obidos/ASIN/4873118700/hatena-blog-22/"><img src="https://m.media-amazon.com/images/I/51T+k4VRzpL.jpg" class="hatena-asin-detail-image" alt="データ指向アプリケーションデザイン ―信頼性、拡張性、保守性の高い分散システム設計の原理" title="データ指向アプリケーションデザイン ―信頼性、拡張性、保守性の高い分散システム設計の原理"></a><div class="hatena-asin-detail-info"><p class="hatena-asin-detail-title"><a href="https://www.amazon.co.jp/exec/obidos/ASIN/4873118700/hatena-blog-22/">データ指向アプリケーションデザイン ―信頼性、拡張性、保守性の高い分散システム設計の原理</a></p><ul><li><span class="hatena-asin-detail-label">作者:</span><a href="http://d.hatena.ne.jp/keyword/Martin%20Kleppmann" class="keyword">Martin Kleppmann</a></li><li><span class="hatena-asin-detail-label">発売日:</span> 2019/07/18</li><li><span class="hatena-asin-detail-label">メディア:</span> 単行本（ソフトカバー）</li></ul></div><div class="hatena-asin-detail-foot"></div></div></p>

<p>よろしければ第二章の記録もどうぞ。</p>

<p><iframe src="https://hatenablog-parts.com/embed?url=https%3A%2F%2Fdeveloper.feedforce.jp%2Fentry%2F2021%2F03%2F02%2F172959" title="データ指向アプリケーションデザイン 第二章 旅行記 - Feedforce Developer Blog" class="embed-card embed-blogcard" scrolling="no" frameborder="0" style="display: block; width: 100%; height: 190px; max-width: 500px; margin: 10px 0px;"></iframe><cite class="hatena-citation"><a href="https://developer.feedforce.jp/entry/2021/03/02/172959">developer.feedforce.jp</a></cite></p>

<p>それでは、みなさま、良い旅を！</p>
]]></description>
            <enclosure url="https://cdn-ak.f.st-hatena.com/images/fotolife/k/kano-e/20191216/20191216212951.jpg" length="0" type="image/jpg"/>
        </item>
        <item>
            <title><![CDATA[データ指向アプリケーションデザイン 第二章 旅行記]]></title>
            <link>https://developer.feedforce.jp/entry/2021/03/02/172959</link>
            <guid>https://developer.feedforce.jp/entry/2021/03/02/172959</guid>
            <pubDate>Tue, 02 Mar 2021 08:29:59 GMT</pubDate>
            <description><![CDATA[<p>こんにちは！
<a href="http://blog.hatena.ne.jp/kano-e/" class="hatena-id-icon"><img src="https://cdn.profile-image.st-hatena.com/users/kano-e/profile.png" width="16" height="16" alt="" class="hatena-id-icon">id:kano-e</a> です。</p>

<p>今日は『データ指向アプリケーションデザイン』という本の読書記録を公開しにきました。</p>

<p>こちらの本、章毎にその章を象徴するような地図が挿絵として挿入されています。<br />
地図が描かれている本て良いですよね。主人公たちの物語が進む旅に、地図を眺めに戻って「今この辺りかな」なんて思いを馳せたりするのが楽しくて、好きです。</p>

<p>というわけで、この『データ指向アプリケーションデザイン』でも、そのように「今はこの地図のこの辺りだなあ」なんて思いながら読み進めていました。</p>

<p>その読書記録、あるいは旅の記録が以下の画像です。</p>

<p><figure class="figure-image figure-image-fotolife" title="データ指向アプリケーションデザイン 第二章 旅行記"><span itemscope itemtype="http://schema.org/Photograph"><img src="https://cdn-ak.f.st-hatena.com/images/fotolife/k/kano-e/20191210/20191210215742.jpg" alt="f:id:kano-e:20191210215742j:plain" title="" class="hatena-fotolife" itemprop="image"></span><figcaption>データ指向アプリケーションデザイン 第二章 旅行記</figcaption></figure></p>

<p>第二章の章題は「データモデルとクエリ言語」。<br />
様々なデータモデルを俯瞰して眺めるような旅になりました。</p>

<p><div class="hatena-asin-detail"><a href="https://www.amazon.co.jp/exec/obidos/ASIN/4873118700/hatena-blog-22/"><img src="https://m.media-amazon.com/images/I/51T+k4VRzpL.jpg" class="hatena-asin-detail-image" alt="データ指向アプリケーションデザイン ―信頼性、拡張性、保守性の高い分散システム設計の原理" title="データ指向アプリケーションデザイン ―信頼性、拡張性、保守性の高い分散システム設計の原理"></a><div class="hatena-asin-detail-info"><p class="hatena-asin-detail-title"><a href="https://www.amazon.co.jp/exec/obidos/ASIN/4873118700/hatena-blog-22/">データ指向アプリケーションデザイン ―信頼性、拡張性、保守性の高い分散システム設計の原理</a></p><ul><li><span class="hatena-asin-detail-label">作者:</span><a href="http://d.hatena.ne.jp/keyword/Martin%20Kleppmann" class="keyword">Martin Kleppmann</a></li><li><span class="hatena-asin-detail-label">発売日:</span> 2019/07/18</li><li><span class="hatena-asin-detail-label">メディア:</span> 単行本（ソフトカバー）</li></ul></div><div class="hatena-asin-detail-foot"></div></div></p>

<p>アプリケーションは常に変化し続けます。その中で、どのようにデータというものと向き合ってゆくのか。そんな内容が書かれている面白い本です。<br />
ぜひ一緒にこの本を旅しましょう。</p>

<p>旅の記録を書きとめるのに使ったホワイトボードはこちら。</p>

<p><div class="hatena-asin-detail"><a href="https://www.amazon.co.jp/exec/obidos/ASIN/B00V47UVK2/hatena-blog-22/"><img src="https://m.media-amazon.com/images/I/41AGC8LpKML.jpg" class="hatena-asin-detail-image" alt="nu board (ヌーボード) A4判 NGA403FN08" title="nu board (ヌーボード) A4判 NGA403FN08"></a><div class="hatena-asin-detail-info"><p class="hatena-asin-detail-title"><a href="https://www.amazon.co.jp/exec/obidos/ASIN/B00V47UVK2/hatena-blog-22/">nu board (ヌーボード) A4判 NGA403FN08</a></p><ul><li><span class="hatena-asin-detail-label">発売日:</span> 2015/04/01</li><li><span class="hatena-asin-detail-label">メディア:</span> オフィス用品</li></ul></div><div class="hatena-asin-detail-foot"></div></div></p>

<p>このタイプの nu board には透明シートがあるので、そのシートの下に地図のコピーを置いて、文字や旅路を辿った線は透明シートの上に書いています。<br />
大きくてのびのび書き込めて便利です。</p>

<p>それではみなさん、良い旅を！</p>
]]></description>
            <enclosure url="https://cdn-ak.f.st-hatena.com/images/fotolife/k/kano-e/20191210/20191210215742.jpg" length="0" type="image/jpg"/>
        </item>
        <item>
            <title><![CDATA[ActiveJob の retry_on に jitter というオプションがあるの知ってますか？]]></title>
            <link>https://ryz310.hateblo.jp/entry/2021/03/02/113927</link>
            <guid>https://ryz310.hateblo.jp/entry/2021/03/02/113927</guid>
            <pubDate>Tue, 02 Mar 2021 02:39:27 GMT</pubDate>
            <description><![CDATA[<p>僕は知らなかったです (・∀・)</p>

<blockquote class="twitter-tweet"><p lang="ja" dir="ltr"><a class="keyword" href="http://d.hatena.ne.jp/keyword/Rails">Rails</a> で ActiveJob の retry_on が同時に発火されるの何とかしたいなーと思って調べてたら、<a class="keyword" href="http://d.hatena.ne.jp/keyword/Rails">Rails</a> 6 からは jitter というオプションが指定できるようになってて、デフォルトでリトライ間隔を 15% ランダマイズしてくれるとの事。Rate Limit の回避とかで便利。 <a href="https://t.co/kpIx6YVFEq">https://t.co/kpIx6YVFEq</a></p>&mdash; サトウリョウスケ (@ryosuke_sato) <a href="https://twitter.com/ryosuke_sato/status/1365707024357466115?ref_src=twsrc%5Etfw">February 27, 2021</a></blockquote>


<p> <script async src="https://platform.twitter.com/widgets.js" charset="utf-8"></script></p>

<h2>jitter とは</h2>

<p><a href="https://github.com/rails/rails/blob/5aaaa1630a/activejob/CHANGELOG.md#rails-610-december-09-2020">Rails 6.1 から追加されたオプション</a> で、 <code>retry_on</code> の待ち時間に対して任意の割合でバラけさせてくれるようになります（デフォルト 15% ）。</p>

<blockquote><p><a href="https://edgeapi.rubyonrails.org/classes/ActiveJob/Exceptions/ClassMethods.html#method-i-retry_on">ActiveJob::Exceptions::ClassMethods - retry_on</a></p>

<p><code>:jitter</code> - A random delay of wait time used when calculating backoff. The default is 15% (0.15) which represents the upper bound of possible wait time (expressed as a percentage)</p></blockquote>

<h3>実装を確認してみた</h3>

<p>このバラけさせ方が待ち時間に対して増えるのか減るのかが気になって実装を見てみました。増える方向でバラけるようです。
例えば <code>wait: 60.seconds</code> で <code>jitter: 0.5</code> の場合だと、最大 <code>90</code> 秒の待ち時間となります。</p>

<p>うっかり <code>100.0</code> とか指定すると最大 10000% 待ち時間が加算されちゃいそうです。
間違えて指定しないようにご注意下さい🙏</p>

<pre class="code rb" data-lang="rb" data-unlink>delay = seconds_or_duration_or_algorithm.to_i
delay_jitter = determine_jitter_for_delay(delay, jitter)
delay + delay_jitter</pre>


<p>📝 jitter の計算処理は <a href="https://github.com/rails/rails/blob/35e9812dfcb030d4c986532e7672ad8f8f95286f/activejob/lib/active_job/exceptions.rb#L132-L155">このあたり</a></p>

<h3>どういう場面で使うの？</h3>

<p>この機能が無かった従来だと、リトライ処理が一斉に起動してしまうという問題がありました。</p>

<p>例えば外部のサービスに <a class="keyword" href="http://d.hatena.ne.jp/keyword/API">API</a> リク<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%A8%A5%B9">エス</a>トするような Job を作ったとします。<a class="keyword" href="http://d.hatena.ne.jp/keyword/API">API</a> Rate Limit 超過の例外をハンドリングして、 <code>retry_on</code> で N 分後にリトライするように実装します。
この時、 1000 件の Job が同時に実行され 900 件が Rate Limit 超過となった場合、N 分後に 900 件の Job が一斉にリトライされてしまい、再び 800 件がエラーとなってしまう。
これが何度も繰り返される、という現象が起こってました。</p>

<h3><a class="keyword" href="http://d.hatena.ne.jp/keyword/Rails">Rails</a> 6.1 以前だと回避できないの？</h3>

<p>従来の ActiveJob でも一応回避策はあって、 <code>wait</code> に <code>Proc</code> を与えてランダムな待ち時間を返すような処理を書くことで似たような動作は可能です。</p>

<pre class="code rb" data-lang="rb" data-unlink>retry_on SomeError, wait: -&gt; { rand(60..90).seconds }</pre>


<h2><a class="keyword" href="http://d.hatena.ne.jp/keyword/iPad">iPad</a> <a class="keyword" href="http://d.hatena.ne.jp/keyword/Air">Air</a> (第4世代) 買っちゃった</h2>

<p><figure class="figure-image figure-image-fotolife" title="iPad Air (第4世代)"><span itemscope itemtype="http://schema.org/Photograph"><img src="https://cdn-ak.f.st-hatena.com/images/fotolife/r/ryz310/20210302/20210302102542.jpg" alt="f:id:ryz310:20210302102542j:plain" title="" class="hatena-fotolife" itemprop="image"></span><figcaption><a class="keyword" href="http://d.hatena.ne.jp/keyword/iPad">iPad</a> <a class="keyword" href="http://d.hatena.ne.jp/keyword/Air">Air</a> (第4世代)</figcaption></figure></p>

<p>近日中に <a class="keyword" href="http://d.hatena.ne.jp/keyword/iPad">iPad</a> Pro の新型が出るとの噂があるが、軽い <a class="keyword" href="http://d.hatena.ne.jp/keyword/Air">Air</a> がほしかったので問題 🍆 （知らなかったけどね）</p>

<p>🔗 <a href="https://iphone-mania.jp/news-350190/">新型iPad Pro搭載A14X/A14Zチップの処理能力はM1チップに匹敵か - iPhone Mania</a></p>
]]></description>
            <enclosure url="https://cdn-ak.f.st-hatena.com/images/fotolife/r/ryz310/20210302/20210302102542.jpg" length="0" type="image/jpg"/>
        </item>
        <item>
            <title><![CDATA[RuboCop で違反してるコードを自動的に修正する PR 作ってくれたら嬉しいやろ。できるでそれ。]]></title>
            <link>https://ryz310.hateblo.jp/entry/2021/02/23/222720</link>
            <guid>https://ryz310.hateblo.jp/entry/2021/02/23/222720</guid>
            <pubDate>Tue, 23 Feb 2021 13:27:20 GMT</pubDate>
            <description><![CDATA[<p>久々の更新は Rubocop Challenger の話です。</p>

<p>このブログでは触れたこと無かったですが、 <a href="https://github.com/ryz310/rubocop_challenger">そういう gem</a> も作ってます。
自動的に <code>.rubocop_todo.yml</code> から  <code>Cop supports --auto-correct.</code> になってる Cop を拾ってきて PR 作ってくれるやつです。</p>

<p>ちょうど hey 社の CTO の藤村さんが同じ事をやっていてちょっとバズってたんですが、自分の gem 使ってほしかったなーと地味に思ってたりします。自分が世の中に対してアピールが足りてなさすぎましたね 😇</p>

<p><iframe src="https://hatenablog-parts.com/embed?url=https%3A%2F%2Ftech.hey.jp%2Fentry%2F2020%2F10%2F23%2F111200" title="たまってしまった .rubocop_todo.yml をGitHub Actionsで継続的かつ自動的に倒す方法 - STORES Tech Blog" class="embed-card embed-blogcard" scrolling="no" frameborder="0" style="display: block; width: 100%; height: 190px; max-width: 500px; margin: 10px 0px;"></iframe><cite class="hatena-citation"><a href="https://tech.hey.jp/entry/2020/10/23/111200">tech.hey.jp</a></cite></p>

<p>何年か前に会社のブログで書いたりはしてたのでリンク貼っておく ✍</p>

<p><iframe src="https://hatenablog-parts.com/embed?url=https%3A%2F%2Fdeveloper.feedforce.jp%2Fentry%2F2018%2F12%2F05%2F140000" title="まだ .rubocop_todo.yml で消耗してるの？ - Feedforce Developer Blog" class="embed-card embed-blogcard" scrolling="no" frameborder="0" style="display: block; width: 100%; height: 190px; max-width: 500px; margin: 10px 0px;"></iframe><cite class="hatena-citation"><a href="https://developer.feedforce.jp/entry/2018/12/05/140000">developer.feedforce.jp</a></cite></p>

<h2>Rubocop Challenger v2.3.0 をリリースしました 🚀</h2>

<p><iframe src="https://hatenablog-parts.com/embed?url=https%3A%2F%2Fgithub.com%2Fryz310%2Frubocop_challenger%2Freleases%2Ftag%2Fv2.3.0" title="Release v2.3.0 · ryz310/rubocop_challenger" class="embed-card embed-webcard" scrolling="no" frameborder="0" style="display: block; width: 100%; height: 155px; max-width: 500px; margin: 10px 0px;"></iframe><cite class="hatena-citation"><a href="https://github.com/ryz310/rubocop_challenger/releases/tag/v2.3.0">github.com</a></cite></p>

<p>とはいえ新機能は一つだけで、 auto-correct された Cop が SafeAutocorrect かどうかを教えてくれる、というものです。</p>

<p><a href="https://github.com/ryz310/rubocop_challenger/pull/465">Add description whether the challenge is created by safe autocorrect or not by ryz310 &middot; Pull Request #465 &middot; ryz310/rubocop_challenger &middot; GitHub</a></p>

<p>こんな感じの PR が作成されます。（画像は動作確認で作ったものなので、実際の <code>Style/Alias</code> は常に <code>SafeAutocorrect: true</code> になります）</p>

<p><img src="https://user-images.githubusercontent.com/3985540/108836759-94096800-7614-11eb-8fb9-cb311711e120.png" alt="Add description whether the challenge is created by safe autocorrect or not by ryz310 · Pull Request #465 · ryz310/rubocop_challenger" />
<img src="https://user-images.githubusercontent.com/3985540/108847589-392b3d00-7623-11eb-8c09-e5192edbbd80.png" alt="Add description whether the challenge is created by safe autocorrect or not by ryz310 · Pull Request #465 · ryz310/rubocop_challenger" /></p>

<p>ぜひお試し下さい 👍</p>

<h2>つぎやりたいこと</h2>

<p>先日 <a class="keyword" href="http://d.hatena.ne.jp/keyword/GitHub">GitHub</a> が auto-merge 機能をリリースしましたね。自分は即全部の<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%EA%A5%DD%A5%B8%A5%C8%A5%EA">リポジトリ</a>で有効化しました ✅</p>

<p><iframe src="https://hatenablog-parts.com/embed?url=https%3A%2F%2Fgithub.blog%2Fchangelog%2F2021-02-04-pull-request-auto-merge-is-now-generally-available%2F" title="Pull request auto-merge is now generally available - GitHub Changelog" class="embed-card embed-webcard" scrolling="no" frameborder="0" style="display: block; width: 100%; height: 155px; max-width: 500px; margin: 10px 0px;"></iframe><cite class="hatena-citation"><a href="https://github.blog/changelog/2021-02-04-pull-request-auto-merge-is-now-generally-available/">github.blog</a></cite></p>

<p>次やりたい機能としては <code>SafeAutocorrect: true</code>  の場合とかは auto-merge を有効化した PR を作るようにしたいんですよね。</p>

<p><a class="keyword" href="http://d.hatena.ne.jp/keyword/GitHub">GitHub</a> の GraphQL <a class="keyword" href="http://d.hatena.ne.jp/keyword/API">API</a> でこの機能を有効化できるらしいです。</p>

<blockquote><p>GraphQL APIs will be rolling out later this week. The pull request webhook event also now includes actions that indicate when auto-merge is enabled or disabled.</p></blockquote>

<p>また時間ある時にでも調べます。</p>
]]></description>
            <enclosure url="https://user-images.githubusercontent.com/3985540/108836759-94096800-7614-11eb-8fb9-cb311711e120.png" length="0" type="image/png"/>
        </item>
        <item>
            <title><![CDATA[『達人に学ぶSQL徹底指南書 第2版』を読んだ]]></title>
            <link>https://masutaka.net/2021-02-22-1/</link>
            <guid>https://masutaka.net/2021-02-22-1/</guid>
            <pubDate>Mon, 22 Feb 2021 00:00:00 GMT</pubDate>
            <description><![CDATA[[2020-12-20-1] にも書いた通り、去年の 4 月から SQL と格闘する毎日です。もっとも全部自分で書くわけではなく、Looker が出力する SQL を理解したり、発生したエラーやデータ不正の原因を SQL 視点で調査したり、検証用の使い捨ての SQL を書いたりといった感じです。
つまりは SELECT 文しか書かないです。しかし、SELECT 文こそが SQL そのものと言っても良いため、現在のデータアーキテクト（データ整備人）という立ち位置での学習教材を探していました。そんな中思い出したのが本書になります。
 LookML 開発者としてはこの本に書かれた全てが「優先度高」ではないため、敢えて流し読みを心がけました。
その中で重要だと思ったのはこのあたりでしょうか。
・１ CASE 式のススメ
・２ 必ずわかるウィンドウ関数
・４ ３値論理と NULL
・７ ウィンドウ関数で行間比較を行なう
・８ 外部結合の使い方
・１８ GROUP BY と PARTITION BY
Looker が出力する SQL で見かけない気がする EXISTS, HAVING あたりは流し読みしたので、正直まだ理解していません。近いうちに読み返すと思います。
それとは別に、「第１部 ９ SQL での集合演算」は興味深かったです。すなわち、和（UNION）、差（EXCEPT）、積（CROSS JOIN）です。商（DIVEDE BY）は「諸事情」により標準化が遅れているそうです。今まで雰囲気で UNION ALL を使うくらいだったので、集合演算は自分のスコープが広がった気がしました。
「１５ 関係に始まり関係に終わる」に SQL の関係閉包性が UNIX のパイプの概念とよく似ているという記述も興味深かったです。
UNIX ではファイルがさまざまなコマンドの入力・出力になるため、（標準）出力をパイプで次々と渡すことが出来ます。SQL では UNIX のファイルはテーブルに相当します。SELECT 文はテーブルを引数にとってテーブルを返すため、UNIX と同じように次々と出力を渡すことが出来ます。これを関係の閉包性と呼ぶそうです。これを知って、SQL に一気に親近感が湧きました。]]></description>
        </item>
        <item>
            <title><![CDATA[CircleCI で docker build するときの Empty continuation lines will become errors in a future release. という warning への対処方法]]></title>
            <link>https://developer.feedforce.jp/entry/2021/02/17/110000</link>
            <guid>https://developer.feedforce.jp/entry/2021/02/17/110000</guid>
            <pubDate>Wed, 17 Feb 2021 02:00:00 GMT</pubDate>
            <description><![CDATA[<p>こんにちは、<a href="http://blog.hatena.ne.jp/tsub511/" class="hatena-id-icon"><img src="https://cdn.profile-image.st-hatena.com/users/tsub511/profile.png" width="16" height="16" alt="" class="hatena-id-icon">id:tsub511</a> です。</p>

<p>Dockerfile を読みやすくするために <code>\</code> とコメントを駆使してみたら CircleCI で warning が出て一瞬焦ったので記事を書いてみました。</p>

<ul class="table-of-contents">
    <li><a href="#CircleCI-で-docker-build-する時の-warning">CircleCI で docker build する時の warning</a></li>
    <li><a href="#warning-が出たのは-Docker-のバグ">warning が出たのは Docker のバグ</a></li>
    <li><a href="#CircleCI-の-Docker-のデフォルトバージョンは-17090-ce">CircleCI の Docker のデフォルトバージョンは 17.09.0-ce</a></li>
    <li><a href="#まとめ">まとめ</a></li>
</ul>

<h2 id="CircleCI-で-docker-build-する時の-warning">CircleCI で docker build する時の warning</h2>

<p>例えば以下のような Dockerfile があったとします。</p>

<pre class="code lang-dockerfile" data-lang="dockerfile" data-unlink><span class="synStatement">FROM </span>amazonlinux:2

<span class="synStatement">ENV </span>RUBY_VERSION=2.7.2 \
    BUNDLER_VERSION=2.2.9 \
    TZ=/usr/share/zoneinfo/Asia/Tokyo

<span class="synStatement">RUN </span>\
<span class="synComment">    # Install mysql-community-devel</span>
    yum install -y yum-utils &amp;&amp; \
    yum localinstall -y https://dev.mysql.com/get/mysql80-community-release-el7-3.noarch.rpm &amp;&amp; \
    yum-config-manager --enable mysql57-community &amp;&amp; \
    yum-config-manager --disable mysql80-community &amp;&amp; \
    yum install -y mysql-community-devel &amp;&amp; \
    yum remove -y mysql80-community-release yum-utils &amp;&amp; \
    \
<span class="synComment">    # Install ruby</span>
    yum install -y <span class="synConstant">&quot;https://github.com/feedforce/ruby-rpm/releases/download/${RUBY_VERSION}/ruby-${RUBY_VERSION}-1.el7.centos.x86_64.rpm&quot;</span> &amp;&amp; \
    printf <span class="synConstant">&quot;install: --no-document\nupdate: --no-document\n&quot;</span> &gt; /etc/gemrc &amp;&amp; \
    gem install -v <span class="synConstant">&quot;$BUNDLER_VERSION&quot;</span> bundler
</pre>


<p>これを使って CircleCI で docker build すると、<code>Empty continuation lines will become errors in a future release.</code> という warning が出てしまいます。</p>

<p><figure class="figure-image figure-image-fotolife" title="docker build 時の warning"><span itemscope itemtype="http://schema.org/Photograph"><img src="https://cdn-ak.f.st-hatena.com/images/fotolife/t/tsub511/20210215/20210215173356.png" alt="f:id:tsub511:20210215173356p:plain" title="" class="hatena-fotolife" itemprop="image"></span><figcaption>docker build 時の warning</figcaption></figure></p>

<p>普通に読むと、何もコマンドを実行していない <code>\</code> だけの行やコメントだけの行を消した方が良いのかな？と受け取ってしまいがちですが、これは実は Docker 側のバグでした。</p>

<h2 id="warning-が出たのは-Docker-のバグ">warning が出たのは Docker のバグ</h2>

<p>本来はただの空行だけの場合に warning を出したかったようですが、コメントが書かれた行も warning が出てしまっているようです。</p>

<p>以下に書かれているように、Docker 17.10 で修正済みとのことです。</p>

<blockquote><p>Thanks for reporting; this issue was resolved through #35004, which is included in Docker 17.10 and up.</p>

<p>I'll close this issue because this was resolved, but feel free to continue the conversation 👍</p>

<p><iframe src="https://hatenablog-parts.com/embed?url=https%3A%2F%2Fgithub.com%2Fmoby%2Fmoby%2Fissues%2F35387" title="False positive &quot;Empty continuation lines will become errors in a future release.&quot; · Issue #35387 · moby/moby" class="embed-card embed-webcard" scrolling="no" frameborder="0" style="display: block; width: 100%; height: 155px; max-width: 500px; margin: 10px 0px;"></iframe><cite class="hatena-citation"><a href="https://github.com/moby/moby/issues/35387">github.com</a></cite></p></blockquote>

<p>ただ、Docker 17.10 というと 2017/10 リリースのバージョンですので、2021/02 現在でまだバグが残っているのはおかしいです。</p>

<p>CircleCI の Docker のバージョンを確認してみましょう。</p>

<h2 id="CircleCI-の-Docker-のデフォルトバージョンは-17090-ce">CircleCI の Docker のデフォルトバージョンは 17.09.0-ce</h2>

<p>CircleCI 内で docker build を実行するためには <code>setup_remote_docker</code> が必要です。</p>

<p><code>setup_remote_docker</code> によって CircleCI のジョブのホスト VM で Docker Engine が起動しますが、そこで使われている Docker Engine のバージョンは 17.09.0-ce でした。</p>

<p><figure class="figure-image figure-image-fotolife" title="CircleCI の Docker Engine バージョン"><span itemscope itemtype="http://schema.org/Photograph"><img src="https://cdn-ak.f.st-hatena.com/images/fotolife/t/tsub511/20210215/20210215175709.png" alt="f:id:tsub511:20210215175709p:plain" title="" class="hatena-fotolife" itemprop="image"></span><figcaption>CircleCI の Docker Engine バージョン</figcaption></figure></p>

<p>Docker のバグが修正されたのは 17.10 ですので、確かにまだバグが残っているバージョンです。</p>

<p>さて CircleCI の <code>setup_remote_docker</code> ですが、実はデフォルトでは 17.09.0-ce が使われるようです。</p>

<blockquote><p><span itemscope itemtype="http://schema.org/Photograph"><img src="https://cdn-ak.f.st-hatena.com/images/fotolife/t/tsub511/20210215/20210215174427.png" alt="f:id:tsub511:20210215174427p:plain" title="" class="hatena-fotolife" itemprop="image"></span></p>

<p><a href="https://circleci.com/docs/2.0/building-docker-images/#docker-version">https://circleci.com/docs/2.0/building-docker-images/#docker-version</a></p></blockquote>

<h2 id="まとめ">まとめ</h2>

<p>Dockerfile で <code>\</code> だけの行やコメントだけの行がある時に CircleCI で docker build すると <code>Empty continuation lines will become errors in a future release.</code> という warning が出るのは Docker のバグと CircleCI の <code>setup_remote_docker</code> のデフォルトバージョンが古い、という合わせ技によって起きていました。</p>

<p>warning 自体は Docker のバグだったので無視で良いですが、古いバージョンを使い続けるのはあまり良くない気がします。</p>

<p>基本的にはデフォルトを使いたいところですが、17.09.0-ce だと色々な機能が使えないですし、上述したバグもあるので <code>setup_remote_docker</code> を使うときは version を指定することをおすすめします。</p>
]]></description>
            <enclosure url="https://cdn-ak.f.st-hatena.com/images/fotolife/t/tsub511/20210215/20210215173356.png" length="0" type="image/png"/>
        </item>
        <item>
            <title><![CDATA[docker-compose での MySQL の疎通確認で telnet を使う時に自動でコネクションを切る]]></title>
            <link>https://developer.feedforce.jp/entry/2021/02/16/110000</link>
            <guid>https://developer.feedforce.jp/entry/2021/02/16/110000</guid>
            <pubDate>Tue, 16 Feb 2021 02:00:00 GMT</pubDate>
            <description><![CDATA[<p>こんにちは、<a href="http://blog.hatena.ne.jp/tsub511/" class="hatena-id-icon"><img src="https://cdn.profile-image.st-hatena.com/users/tsub511/profile.png" width="16" height="16" alt="" class="hatena-id-icon">id:tsub511</a> です。</p>

<p>TELNET プロトコルには全く馴染みがないのですが、今回たまたま使う機会があり、かつ調べても割と見つけられない情報だったので記事を書いてみました。</p>

<ul class="table-of-contents">
    <li><a href="#curl-で-TELNET-プロトコルを使う">curl で TELNET プロトコルを使う</a></li>
    <li><a href="#ユースケース">ユースケース</a></li>
    <li><a href="#解説">解説</a></li>
</ul>

<h2 id="curl-で-TELNET-プロトコルを使う">curl で TELNET プロトコルを使う</h2>

<p>curl は HTTP/HTTPS 以外のプロトコルも使うことができます。</p>

<p>curl のドキュメントを確認すると、サポートしているプロコトルは <code>DICT, FILE, FTP, FTPS, GOPHER, HTTP, HTTPS, IMAP, IMAPS, LDAP, LDAPS, POP3, POP3S, RTMP, RTSP, SCP, SFTP, SMB, SMBS, SMTP, SMTPS, TELNET and TFTP</code> のようです。</p>

<pre class="code" data-lang="" data-unlink>$ man curl # in macOS

curl(1)                                                                                                                    Curl Manual                                                                                                                    curl(1)



NAME
       curl - transfer a URL

SYNOPSIS
       curl [options / URLs]

DESCRIPTION
       curl is a tool to transfer data from or to a server, using one of the supported protocols (DICT, FILE, FTP, FTPS, GOPHER, HTTP, HTTPS, IMAP, IMAPS, LDAP, LDAPS, POP3, POP3S, RTMP, RTSP, SCP, SFTP, SMB, SMBS, SMTP, SMTPS, TELNET and TFTP). The command
       is designed to work without user interaction.

       curl offers a busload of useful tricks like proxy support, user authentication, FTP upload, HTTP post, SSL connections, cookies, file transfer resume, Metalink, and more. As you will see below, the number of features will make your head spin!

       curl is powered by libcurl for all transfer-related features. See libcurl(3) for details.
...</pre>


<p>例えば以下のように指定することで TELNET プロトコルで対象のサーバーに接続することが可能です。</p>

<pre class="code" data-lang="" data-unlink>$ curl telnet://localhost:3306</pre>


<h2 id="ユースケース">ユースケース</h2>

<p>docker-compose ではコンテナ間の依存関係を <code>depends_on</code> で定義できますが、コンテナ内でサーバーなどが立ち上がるまでは待ってくれません。</p>

<p>そこで、以下のドキュメントに書いてあるような方法でコンテナ間で依存しているサーバーに対するヘルスチェックを行うことで解決できます。</p>

<p><iframe src="https://hatenablog-parts.com/embed?url=https%3A%2F%2Fdocs.docker.com%2Fcompose%2Fstartup-order%2F" title="Control startup and shutdown order in Compose" class="embed-card embed-webcard" scrolling="no" frameborder="0" style="display: block; width: 100%; height: 155px; max-width: 500px; margin: 10px 0px;"></iframe><cite class="hatena-citation"><a href="https://docs.docker.com/compose/startup-order/">docs.docker.com</a></cite></p>

<p>実際には以下のスクリプトで MySQL サーバーの起動を待ってから別のコンテナを実行するような仕組みにしていました。</p>

<pre class="code lang-sh" data-lang="sh" data-unlink><span class="synComment">#!/bin/bash</span>

<span class="synIdentifier">host</span>=<span class="synStatement">&quot;</span><span class="synPreProc">$1</span><span class="synStatement">&quot;</span>
<span class="synStatement">shift</span>
<span class="synIdentifier">cmd</span>=<span class="synStatement">&quot;</span><span class="synPreProc">$@</span><span class="synStatement">&quot;</span>

<span class="synStatement">until mysql -h &quot;</span><span class="synPreProc">$host</span><span class="synStatement">&quot; -u root -e '</span><span class="synConstant">show databases</span><span class="synStatement">' &gt; /dev/null </span><span class="synConstant">2</span><span class="synStatement">&gt;&amp;</span><span class="synConstant">1</span><span class="synStatement">; do</span>
  <span class="synStatement">&gt;&amp;</span><span class="synConstant">2</span> <span class="synStatement">echo</span><span class="synConstant"> </span><span class="synStatement">&quot;</span><span class="synConstant">MySQL is unavailable - sleeping</span><span class="synStatement">&quot;</span>
  <span class="synStatement">sleep</span> <span class="synConstant">1</span>
<span class="synStatement">done</span>

<span class="synStatement">&gt;&amp;2</span> <span class="synStatement">echo</span><span class="synConstant"> </span><span class="synStatement">&quot;</span><span class="synConstant">MySQL is up - executing</span><span class="synStatement">&quot;</span>
<span class="synStatement">exec</span> <span class="synPreProc">$cmd</span>
</pre>


<p>ただ、この方法だと mysql コマンドがコンテナ内にインストールされている必要があります。</p>

<p>本番環境でのコンテナの実行を考慮すると、mysql のクライアントはインストールする必要がなかったので mysql コマンド以外の方法で MySQL サーバーの起動を確認する必要がありました。</p>

<p>そこで、ベースイメージの都合でたまたま curl がインストールされていたので curl の TELNET プロトコルを使うことにしました。</p>

<p>変更後のスクリプトが以下になります。</p>

<pre class="code lang-sh" data-lang="sh" data-unlink><span class="synComment">#!/bin/bash</span>

<span class="synIdentifier">host</span>=<span class="synStatement">&quot;</span><span class="synPreProc">$1</span><span class="synStatement">&quot;</span>
<span class="synStatement">shift</span>
<span class="synIdentifier">cmd</span>=<span class="synStatement">&quot;</span><span class="synPreProc">$@</span><span class="synStatement">&quot;</span>

<span class="synStatement">until echo</span><span class="synConstant"> </span><span class="synStatement">'</span><span class="synConstant">quit</span><span class="synStatement">'</span><span class="synConstant"> </span><span class="synStatement">| curl telnet://</span><span class="synPreProc">$host</span><span class="synStatement">:3306 &gt; /dev/null </span><span class="synConstant">2</span><span class="synStatement">&gt;&amp;</span><span class="synConstant">1</span><span class="synStatement">; do</span>
  <span class="synStatement">&gt;&amp;</span><span class="synConstant">2</span> <span class="synStatement">echo</span><span class="synConstant"> </span><span class="synStatement">&quot;</span><span class="synConstant">MySQL is unavailable - sleeping</span><span class="synStatement">&quot;</span>
  <span class="synStatement">sleep</span> <span class="synConstant">1</span>
<span class="synStatement">done</span>

<span class="synStatement">&gt;&amp;2</span> <span class="synStatement">echo</span><span class="synConstant"> </span><span class="synStatement">&quot;</span><span class="synConstant">MySQL is up - executing</span><span class="synStatement">&quot;</span>
<span class="synStatement">exec</span> <span class="synPreProc">$cmd</span>
</pre>


<p>変更したのは 7 行目のみで、mysql コマンドを curl に置き換えています。</p>

<p>こうすることで mysql のクライアントをインストールせずに MySQL サーバーが起動するのを待ってから別のコンテナを実行することができるようになりました。</p>

<h2 id="解説">解説</h2>

<p>例えば以下のように実行すると、TELNET プロトコルを使って疎通確認ができます。</p>

<pre class="code" data-lang="" data-unlink>$ docker run -d -p 3306:3306 -e MYSQL_ALLOW_EMPTY_PASSWORD=1 mysql
$ curl -s -o /dev/null telnet://localhost:3306
</pre>


<p>ただしこのままだと Ctrl+C などでコネクションを切るまで curl が実行されたままになります。</p>

<p>TELNET プロトコルは対話型であるため、コネクションを張りっぱなしになるという認識です。</p>

<p>Ctrl+C が必要ということは、上述したスクリプトでは使えません。</p>

<p>ではどうすれば疎通確認後に自動でコネクションを切れるでしょうか。</p>

<p>実は以下のように <code>quit</code> を curl に標準入力で渡すことで解決できます。</p>

<pre class="code" data-lang="" data-unlink>$ docker run -d -p 3306:3306 -e MYSQL_ALLOW_EMPTY_PASSWORD=1 mysql
$ echo &#39;quit&#39; | curl -s -o /dev/null telnet://localhost:3306</pre>


<p><code>quit</code> とは何かというと、telnet コマンドでは <code>quit</code> というコマンドを指定することで telnet の接続を切ることができます。</p>

<pre class="code" data-lang="" data-unlink>$ man telnet # in macOS with brew install telnet

TELNET(1)                 BSD General Commands Manual                TELNET(1)

NAME
     telnet -- user interface to the TELNET protocol

SYNOPSIS
     telnet [-468EFKLNacdfruxy] [-S tos] [-X authtype] [-e escapechar] [-k realm] [-l user] [-n tracefile] [-s src_addr] [host [port]]

DESCRIPTION
     The telnet command is used to communicate with another host using the TELNET protocol.  If telnet is invoked without the host argument, it enters command mode, indicated by its prompt (``telnet&gt;&#39;&#39;).  In this mode, it accepts and executes the commands
     listed below.  If it is invoked with arguments, it performs an open command with those arguments.

     Options:

...

quit       Close any open TELNET session and exit telnet.  An end of file (in command mode) will also close a session and exit.</pre>


<p>そして <code>quit</code> を使った telnet コマンドを自動的に終了するための方法が以下の記事で紹介されていました。</p>

<p><iframe src="https://hatenablog-parts.com/embed?url=https%3A%2F%2Fqiita.com%2Fgyoon%2Fitems%2Fdeb7ee62fbe4e9c1a907" title="Telnetの自動化 - Qiita" class="embed-card embed-webcard" scrolling="no" frameborder="0" style="display: block; width: 100%; height: 155px; max-width: 500px; margin: 10px 0px;"></iframe><cite class="hatena-citation"><a href="https://qiita.com/gyoon/items/deb7ee62fbe4e9c1a907">qiita.com</a></cite></p>

<p>上記の記事を参考に、curl でも同様の方法を試してみたら動いた、ということになります。</p>

<p>ただし、curl に標準入力を渡すことで TELNET プロトコルにコマンドを渡すことができる、という挙動自体は curl のドキュメントを確認しても見つけられませんでした。</p>

<p>公式の情報で裏が取れない限りは当記事の事例のように開発環境でのみ使った方が良いかもしれません。</p>
]]></description>
            <enclosure url="https://cdn.user.blog.st-hatena.com/default_entry_og_image/4268819/1588226000876991" length="0" type="image//default_entry_og_image/4268819/1588226000876991"/>
        </item>
        <item>
            <title><![CDATA[全ての esa 新着記事を読みきれないので、最近はこの方法を使ってる]]></title>
            <link>https://developer.feedforce.jp/entry/2021/02/15/110000</link>
            <guid>https://developer.feedforce.jp/entry/2021/02/15/110000</guid>
            <pubDate>Mon, 15 Feb 2021 02:00:00 GMT</pubDate>
            <description><![CDATA[<p>こんにちは <a href="http://blog.hatena.ne.jp/masutaka26/" class="hatena-id-icon"><img src="https://cdn.profile-image.st-hatena.com/users/masutaka26/profile.png" width="16" height="16" alt="" class="hatena-id-icon">id:masutaka26</a> です。最近好きな YouTuber はシバターです。シバターかわいいよ...。シバター...</p>

<p>フィードフォースでは先日紹介したとおり、ドキュメント共有ツールに <a href="https://esa.io/">esa</a> を使っています。</p>

<p><iframe src="https://hatenablog-parts.com/embed?url=https%3A%2F%2Fdeveloper.feedforce.jp%2Fentry%2F2021%2F02%2F03%2F110000" title="変化に耐え得る esa のカテゴリ設計を徹底的に考えてみた - Feedforce Developer Blog" class="embed-card embed-blogcard" scrolling="no" frameborder="0" style="display: block; width: 100%; height: 190px; max-width: 500px; margin: 10px 0px;"></iframe></p>

<p>メンバー数は 90、デイリーアクティブメンバーは 69 くらいです。2/10 の新着記事数は 106 でした。情報共有が活発な会社で、体感でもとても多いです。</p>

<p>全ての新着記事と記事へのコメントは Slack の <code>#esa-notify</code> に通知されます。そこを全部読めば追えはしますが、いかんせんこの数です。</p>

<p>真面目に全部読むと、私の場合はかける時間に見合わないなと感じたので、最近は esa の検索を利用した方法を使っています。</p>

<ul class="table-of-contents">
    <li><a href="#使っている方法">使っている方法</a><ul>
            <li><a href="#フォローした人の新着記事を読む">フォローした人の新着記事を読む</a></li>
            <li><a href="#エゴサーチする">エゴサーチする</a></li>
            <li><a href="#気になるキーワードに言及した新着記事を読む">気になるキーワードに言及した新着記事を読む</a></li>
            <li><a href="#日報以外の最近更新された記事を読む">日報以外の最近更新された記事を読む</a></li>
            <li><a href="#直近の記事を読む">直近の記事を読む</a></li>
        </ul>
    </li>
    <li><a href="#公式ドキュメント">公式ドキュメント</a></li>
    <li><a href="#ちょっとした悩み">ちょっとした悩み</a></li>
    <li><a href="#所感">所感</a></li>
    <li><a href="#おまけ-ボツにした方法">おまけ: ボツにした方法</a></li>
</ul>

<h2 id="使っている方法">使っている方法</h2>

<h3 id="フォローした人の新着記事を読む">フォローした人の新着記事を読む</h3>

<p>検索クエリの例:</p>

<pre><code>@alice OR @bob OR @sapp sort:created-desc
</code></pre>

<p>🔖 ブラウザのブックマーク: <a href="https://feedforce.esa.io/posts?q=%40alice+OR+%40bob+OR+%40sapp+sort%3Acreated-desc">Follow</a></p>

<p>上の例では alice, bob, sapp をフォローしているイメージです。</p>

<p>社長やプロダクトオーナーをフォローして、最近の会社の状況を把握するようにしています。他、自分が関心がある人もフォローしています。</p>

<p>メンバーは固定ではなくたまに入れ替えます。現在 16 人をフォローしています。</p>

<h3 id="エゴサーチする">エゴサーチする</h3>

<p>検索クエリの例:</p>

<pre><code>マスタカ -@me OR ますたか -@me OR masutaka -@me OR 増田 -@me sort:created-desc
</code></pre>

<p>🔖 ブラウザのブックマーク: <a href="https://feedforce.esa.io/posts?q=%E3%83%9E%E3%82%B9%E3%82%BF%E3%82%AB+-%40me+OR+%E3%81%BE%E3%81%99%E3%81%9F%E3%81%8B+-%40me+OR+masutaka+-%40me+OR+%E5%A2%97%E7%94%B0+-%40me+sort%3Acreated-desc">Egosearch</a></p>

<p>「マスタカ」「ますたか」「masutaka」「増田」が含まれ、且つ自分の記事を除いた新着記事を全部読んでいます。</p>

<p>空メンション <code>masutaka</code> やアイコン絵文字 <code>:@masutaka:</code>、<code>&lt;!-- Boku ha masutaka nari. --&gt;</code> のような HTML コメントも捕捉出来ます。👁</p>

<h3 id="気になるキーワードに言及した新着記事を読む">気になるキーワードに言及した新着記事を読む</h3>

<p>検索クエリの例:</p>

<pre><code>looker -@me sort:created-desc
</code></pre>

<p>🔖 ブラウザのブックマーク: <a href="https://feedforce.esa.io/posts?q=looker+-%40me+sort%3Acreated-desc">Search Looker</a></p>

<p>「looker」が含まれ、且つ自分の記事を除いた新着記事を全部読んでいます。</p>

<h3 id="日報以外の最近更新された記事を読む">日報以外の最近更新された記事を読む</h3>

<p>検索クエリの例:</p>

<pre><code>-category:日報 sort:updated-desc
</code></pre>

<p>🔖 ブラウザのブックマーク: <a href="https://feedforce.esa.io/posts?q=-category%3A%E6%97%A5%E5%A0%B1+sort%3Aupdated-desc">日報以外</a></p>

<p><code>日報/</code> カテゴリ以外で、最近更新された記事をたまに読んでいます。新着記事でないことがポイントです。良さそうな WIP 記事を先取りできることがあります。🤗</p>

<h3 id="直近の記事を読む">直近の記事を読む</h3>

<p>退勤後とかは、新着記事一覧 <code>/posts</code> も見ます。</p>

<h2 id="公式ドキュメント">公式ドキュメント</h2>

<p>ここまで使った検索クエリは、公式ドキュメント「<a href="https://docs.esa.io/posts/104">help/記事の検索方法</a>」に書かれています。</p>

<p>OR 検索よりも AND 検索のほうが優先度が高いとは書かれていないので、行間を読む必要があります。括弧は使えないので、前述の「エゴサーチする」は自分にとって難易度が高かったです。</p>

<p>esa の皆様、その節はサポートありがとうございました。🙏</p>

<h2 id="ちょっとした悩み">ちょっとした悩み</h2>

<p>スマホだと「フォローした人の新着記事を読む」が検索対象のメンバーアイコンで埋まるので、結構スクロールしないと記事にたどり着けません。メンバーアイコンと記事の境界も曖昧で、スクロールしすぎることがあります。</p>

<p><figure class="figure-image figure-image-fotolife" title="スマホだと数スクロールがメンバーアイコンで埋まる"><span itemscope itemtype="http://schema.org/Photograph"><img src="https://cdn-ak.f.st-hatena.com/images/fotolife/m/masutaka26/20210211/20210211183124.png" alt="f:id:masutaka26:20210211183124p:plain" width="200" height="400" loading="lazy" title="" class="hatena-fotolife" itemprop="image"></span><figcaption>スマホだと数スクロールがメンバーアイコンで埋まる</figcaption></figure></p>

<p>もう少しメンバーアイコンのサイズが小さいと良いと思います。ﾁﾗｯﾁﾗｯ</p>

<h2 id="所感">所感</h2>

<p>全ての新着記事を読む代わりに、テーマを決めた複数の方法で esa 記事を読み、かける時間を減らしました。２ヶ月ほど使っており、なかなか満足しています。</p>

<p>ただ、関心外のことが入って来づらくなることは、特にこのフルリモートワーク下では怖さを感じます。</p>

<p>カッチリやらずに、たまに <code>#esa-notify</code> を覗けばよいのですけどね。記事へのコメントだけを通知する Slack チャンネルでも作れば良いのかしら？</p>

<h2 id="おまけ-ボツにした方法">おまけ: ボツにした方法</h2>

<p>コメントもエゴサーチしようとしましたが、なんか期待通りの振る舞いではなかったです。</p>

<pre><code>comment:マスタカ OR comment:ますたか OR comment:masutaka OR comment:増田 sort:created-desc
</code></pre>

<p>コメント本文はきちんと検索出来ているようですが、検索結果はあくまで（コメント単位ではなく）記事単位なので、すでに読んだ記事のことが多いからかな？</p>

<p>他の方法で網羅できているようなので、まあいいかあと思いました。</p>
]]></description>
            <enclosure url="https://cdn-ak.f.st-hatena.com/images/fotolife/m/masutaka26/20210212/20210212181026.png" length="0" type="image/png"/>
        </item>
        <item>
            <title><![CDATA[Terraform の terraform-provider-datadog で古い source から新しい source に更新する際の Warning を解消する方法]]></title>
            <link>https://developer.feedforce.jp/entry/2021/02/09/114110</link>
            <guid>https://developer.feedforce.jp/entry/2021/02/09/114110</guid>
            <pubDate>Tue, 09 Feb 2021 02:41:10 GMT</pubDate>
            <description><![CDATA[<p>ソーシャルPLUS の開発チーム でインフラエンジニア をしている <a href="http://blog.hatena.ne.jp/mayuki123/" class="hatena-id-icon"><img src="https://cdn.profile-image.st-hatena.com/users/mayuki123/profile.png" width="16" height="16" alt="" class="hatena-id-icon">id:mayuki123</a> です。</p>

<p>ソーシャルPLUS のインフラ環境は基本的に Terraform を利用して管理をしています。今回は、Terraform の <a href="https://github.com/DataDog/terraform-provider-datadog">terraform-provider-datadog</a> で <code>terraform init</code> を実行時の Warning を解消するのに頭を悩ませたので書き残しておきます。</p>

<h2>発生していた事象</h2>

<p>Datadog Provider を利用している所で <code>terraform init</code> を実行すると、下記のWarning が表示されるようになりました。</p>

<pre class="code" data-lang="" data-unlink>Warning: Additional provider information from registry

The remote registry returned warnings for
registry.terraform.io/terraform-providers/datadog:
- For users on Terraform 0.13 or greater, this provider has moved to
DataDog/datadog. Please update your source in required_providers.</pre>


<p>Datadog Provider を導入した時は、 Source に <code>terraform-providers/datadog</code> を指定する必要がありましたが、現在は <code>DataDog/datadog</code> が推奨との事で変更する必要があるようです。Terraform のコードで Source を変更すればいとも簡単に解決するだろうとこの時の私は思っていました。</p>

<p><span itemscope itemtype="http://schema.org/Photograph"><img src="https://cdn-ak.f.st-hatena.com/images/fotolife/m/mayuki123/20210208/20210208175250.png" alt="f:id:mayuki123:20210208175250p:plain" title="" class="hatena-fotolife" itemprop="image"></span></p>

<p>Terraform の コードを修正後に <code>terraform init</code> を実行して Provider を更新した後に、 <code>terraform providers</code> を実行してみると State では <code>registry.terraform.io/terraform-providers/datadog</code> を使い続ける事象に陥りました。</p>

<pre class="code" data-lang="" data-unlink>% terraform providers
Providers required by configuration:
.
├── provider[registry.terraform.io/hashicorp/aws] 3.27.0
├── provider[registry.terraform.io/datadog/datadog] 2.20.0

/// 中略 ///

Providers required by state:

    provider[registry.terraform.io/hashicorp/aws]

    provider[registry.terraform.io/terraform-providers/datadog]

    provider[terraform.io/builtin/terraform]</pre>


<p> Terraform v0.14.x で追加されるようになった <code>.terraform.lock.hcl</code> には Provider として <code>registry.terraform.io/datadog/datadog</code> が新しく追加はされますが、 <code>registry.terraform.io/terraform-providers/datadog</code> が残り続けていました。亡霊なのでしょうか。</p>

<h2>解決方法</h2>

<p><code>terraform state replace-provider</code> コマンドを実行する事で、State 上の既存のリソースに対して Terraform の Datadog provider の Source として <code>DataDog/datadog</code> を利用するように変更する必要がありました。</p>

<pre class="code" data-lang="" data-unlink>terraform state replace-provider \
&#39;registry.terraform.io/terraform-providers/datadog&#39; \
&#39;registry.terraform.io/datadog/datadog&#39;</pre>


<p>実行すると下記のような確認が表示されるので、 <code>yes</code> を入力すると更新されます。</p>

<pre class="code" data-lang="" data-unlink>% terraform state replace-provider &#39;registry.terraform.io/terraform-providers/datadog&#39; &#39;registry.terraform.io/datadog/datadog&#39; 
Terraform will perform the following actions:

  ~ Updating provider:
    - registry.terraform.io/terraform-providers/datadog
    + registry.terraform.io/datadog/datadog

Changing 1 resources:

  datadog_integration_aws.xxxx

Do you want to make these changes?
Only &#39;yes&#39; will be accepted to continue.

Enter a value: yes</pre>


<p><code>terraform state replace-provider</code> コマンドを実行後に <code>terraform init</code> を実行すると Warning は解消されました。Terraform provider の Source の変更はあまり発生しない気はしますが、同じような事象にハマった時にはご参考になればと思います。</p>
]]></description>
            <enclosure url="https://cdn-ak.f.st-hatena.com/images/fotolife/m/mayuki123/20210208/20210208175250.png" length="0" type="image/png"/>
        </item>
        <item>
            <title><![CDATA[変化に耐え得る esa のカテゴリ設計を徹底的に考えてみた]]></title>
            <link>https://developer.feedforce.jp/entry/2021/02/03/110000</link>
            <guid>https://developer.feedforce.jp/entry/2021/02/03/110000</guid>
            <pubDate>Wed, 03 Feb 2021 02:00:00 GMT</pubDate>
            <description><![CDATA[<p>こんにちは <a href="http://blog.hatena.ne.jp/masutaka26/" class="hatena-id-icon"><img src="https://cdn.profile-image.st-hatena.com/users/masutaka26/profile.png" width="16" height="16" alt="" class="hatena-id-icon">id:masutaka26</a> です。夜の散歩（意味深）に勤しむ毎日です。</p>

<p>フィードフォースではドキュメント共有ツールには <a href="https://esa.io/">esa</a> と <a href="https://www.google.com/intl/ja/docs/about/">Google ドキュメント</a><sup id="fnref:1"><a href="#fn:1" rel="footnote">1</a></sup>を、コミュニケーションツールには <a href="https://slack.com/">Slack</a> を採用しています。</p>

<p>情報共有はかなり活発で、2021/2/1 現在の esa 記事数は 81,324 です<sup id="fnref:2"><a href="#fn:2" rel="footnote">2</a></sup>。</p>

<ul class="table-of-contents">
    <li><a href="#現在のカテゴリ構成と課題">現在のカテゴリ構成と課題</a></li>
    <li><a href="#チームのスピードを上げるための大原則">チームのスピードを上げるための大原則</a></li>
    <li><a href="#チームのスピードを上げるための情報整理">チームのスピードを上げるための情報整理</a><ul>
            <li><a href="#1-Flow-型と-Stock-型の記事を理解する">1. Flow 型と Stock 型の記事を理解する</a></li>
            <li><a href="#2-基本は-Flow-型の記事にする">2. 基本は Flow 型の記事にする</a></li>
            <li><a href="#3-議事録カテゴリは出来るだけ作らない">3. 議事録カテゴリは出来るだけ作らない</a></li>
            <li><a href="#4-Slack-に流れていく情報も-Flow-型の記事にする">4. Slack に流れていく情報も Flow 型の記事にする</a></li>
            <li><a href="#5-使い続けられる情報を-Stock-記事として引き上げる">5. 使い続けられる情報を Stock 記事として引き上げる</a></li>
            <li><a href="#6-整理を頑張らないことで整理の難易度が低くなった">6. 整理を頑張らないことで整理の難易度が低くなった</a></li>
            <li><a href="#7-esa-を全ての情報の起点にする">7. esa を全ての情報の起点にする</a></li>
        </ul>
    </li>
    <li><a href="#それをチームでやるのは難しすぎない">それをチームでやるのは難しすぎない？</a></li>
    <li><a href="#esa-は難しい">esa は難しい</a></li>
    <li><a href="#esa-の本当の正体">esa の本当の正体</a></li>
    <li><a href="#esa-への要望">esa への要望</a></li>
    <li><a href="#まとめ">まとめ</a></li>
    <li><a href="#esa-公式アカウントからのアドバイス">esa 公式アカウントからのアドバイス</a></li>
    <li><a href="#コラム">コラム</a><ul>
            <li><a href="#記事のカテゴリ整理を頑張らない理由">記事のカテゴリ整理を頑張らない理由</a></li>
            <li><a href="#Flow-カテゴリをどこまで許容するか">Flow カテゴリをどこまで許容するか</a></li>
        </ul>
    </li>
</ul>

<h2 id="現在のカテゴリ構成と課題">現在のカテゴリ構成と課題</h2>

<p>トップカテゴリは厳密にルール化されていて、これらの種類以外のカテゴリが増えることはありません。</p>

<ul>
<li><code>日報/</code>

<ul>
<li><code>2021/02/01 (月)/masutaka</code> といった記事が置かれる</li>
<li>曜日がないなど、型から外れた日報は小人さんによって速やかに修正される。Bot 並に早いw</li>
</ul>
</li>
<li><code>プロダクト1/</code>

<ul>
<li>実際には <code>Feedmatic</code> などのプロダクト名が入る</li>
</ul>
</li>
<li>︙</li>
<li><code>プロダクトN/</code></li>
<li><code>プロジェクト/</code>

<ul>
<li>期間が決まっている系のプロジェクトカテゴリが並ぶ</li>
</ul>
</li>
<li><code>チーム/</code>

<ul>
<li>人事や情報セキュリティなどのチーム系カテゴリが並ぶ</li>
</ul>
</li>
<li><code>コミュニティ/</code>

<ul>
<li>技術系や読書会などのコミュニティ系カテゴリが並ぶ</li>
</ul>
</li>
<li><code>ノウハウ/</code>

<ul>
<li>各種ツールのノウハウ系カテゴリが並ぶ</li>
</ul>
</li>
<li><code>Feedforce Inc./</code>

<ul>
<li>会社全体に関係する記事が置かれる</li>
</ul>
</li>
<li><code>Users/</code></li>
<li><code>Templates/</code></li>
<li><code>Archived/</code></li>
</ul>


<p>例えば「プロダクト1」の下は、議事録系を除き基本的に <a href="https://docs.esa.io/posts/298">Stock 型の記事</a>になっており、「マニュアル」カテゴリの下にはさらに 15 の子カテゴリが生えているとします。</p>

<ul>
<li><code>プロダクト1/</code>

<ul>
<li><code>議事録/</code></li>
<li><code>開発/</code></li>
<li><code>コンサルティング/</code></li>
<li><code>マーケティング/</code></li>
<li><code>インシデント/</code></li>
<li><code>ナレッジ/</code></li>
<li><code>マニュアル/</code>

<ul>
<li>子カテゴリ数は 15</li>
</ul>
</li>
<li>︙</li>
<li><code>その他/</code></li>
</ul>
</li>
</ul>


<p>※ 複数のプロダクトから作った架空カテゴリです。</p>

<p>ここまでならよく整理されているように見えますが、実際は古くてメンテナンスされていない記事が多く、言ってしまえばノイズが多い状況です。情報共有されればされるほど、ノイズが増えてしまう悪循環です。</p>

<p>Slack に目を向けると、こちらもオープンではありますが、時にブログ記事並みのメッセージが投稿されることがあります。未読メッセージを読み進めると手が止まり、読み切るのが難しいと想像されます。</p>

<p><figure class="figure-image figure-image-fotolife" title="ブログ記事並みのメッセージ例。これで半分です。"><span itemscope itemtype="http://schema.org/Photograph"><img src="https://cdn-ak.f.st-hatena.com/images/fotolife/m/masutaka26/20210202/20210202171748.png" alt="f:id:masutaka26:20210202171748p:plain" width="800" height="674" loading="lazy" title="" class="hatena-fotolife" itemprop="image"></span><figcaption>ブログ記事並みのメッセージ例。これで半分です。</figcaption></figure></p>

<p>細切れの情報も多く川の流れのようで、断片化した情報をつなぎ合わせるのは難しいと思います。</p>

<p>世の中には情報共有が足りないことに悩む組織は多いと思いますが、活発になったとしても、適切に整理されていなければその量に溺れてしまいます。</p>

<p>一方で、最近のコロナ禍もあって 10 年前と今とでは変化のスピードは上がっています。変化に強いチーム設計、つまりは変化に強い情報整理設計が重要です。これをやらなければ、チームのスピードは徐々に下がっていくでしょう。</p>

<h2 id="チームのスピードを上げるための大原則">チームのスピードを上げるための大原則</h2>

<p>私が社内で様々なプロダクトを渡り歩いた経験上、チームのスピードを上げるためには以下の 2 点が重要だと感じています。</p>

<ul>
<li>ノイズを減らす</li>
<li>情報を一ヶ所に集める</li>
</ul>


<p>マネージャーはこれらの阻害要因を減らす仕掛けを作る必要があります。</p>

<p>ただ、そういったことが得意な方ばかりではありません。むしろ情報量が一番多く、一番困っているのは彼らかもしれません。マネージャーに余裕がなければ、それがボトルネックとなりチームのスピードが下がります。</p>

<p>これからその対策を考察していきます。</p>

<h2 id="チームのスピードを上げるための情報整理">チームのスピードを上げるための情報整理</h2>

<p>はじめに書いておくと、出来るだけ整理を頑張らないことが重要です。</p>

<h3 id="1-Flow-型と-Stock-型の記事を理解する">1. Flow 型と Stock 型の記事を理解する</h3>

<p>まずは公式ドキュメント「<a href="https://docs.esa.io/posts/298">記事のストック・フローの分類と検索</a>」を読んで、Flow 型と Stock 型の記事の存在を知り、理解します。</p>

<h3 id="2-基本は-Flow-型の記事にする">2. 基本は Flow 型の記事にする</h3>

<p>全て Flow 型にするくらいの気持ちで記事を作ります。記事が多くなっても視界に入りづらいし、整理する必要もないためです。</p>

<p><figure class="figure-image figure-image-fotolife" title="Flow 型記事の例"><span itemscope itemtype="http://schema.org/Photograph"><img src="https://cdn-ak.f.st-hatena.com/images/fotolife/m/masutaka26/20210131/20210131224825.png" alt="f:id:masutaka26:20210131224825p:plain" width="1024" height="309" loading="lazy" title="" class="hatena-fotolife" itemprop="image"></span><figcaption>Flow 型記事の例</figcaption></figure></p>

<p>書き捨ての記事であれば <code>プロダクト1/2021/02/01/タイトル</code>、今月中は更新する記事であれば <code>プロダクト1/2021/02/タイトル</code> で良いと思います。ただ、さすがに今年中更新する記事は Stock 型の記事にしたほうが良いと思います。</p>

<h3 id="3-議事録カテゴリは出来るだけ作らない">3. 議事録カテゴリは出来るだけ作らない</h3>

<p><code>プロダクト1/議事録/</code> のような議事録カテゴリはできるだけ作らず、<code>プロダクト1/2021/02/01/〇〇会議 議事録</code> のようなカテゴリとタイトルにします。議事録のような使い続けない記事を視界に入れるのは、どちらかと言えばノイズだからです。</p>

<p>社内で以下のような階層をよく見かけますが<sup id="fnref:3"><a href="#fn:3" rel="footnote">3</a></sup>、一回限りの会議の置き場所に悩んでしまいます。</p>

<ul>
<li><code>プロダクト1/議事録/</code>

<ul>
<li><code>〇〇会議/YYYY/MM/DD/〇〇会議</code></li>
<li><code>プランニング/YYYY/MM/DD/プランニング</code></li>
</ul>
</li>
</ul>


<p><code>プロダクト1/議事録/20210201 〇×会議 議事録</code> のような自由なパターンも現れたりして、さらに悩ましくなります。</p>

<p>過去の議事録をたどる目的でカテゴリを分けたいのであれば、記事の最初に「議事録一覧はこちら」みたいな検索リンクがあれば十分でしょう。</p>

<p><figure class="figure-image figure-image-fotolife" title="「議事録一覧はこちら」の一例"><span itemscope itemtype="http://schema.org/Photograph"><img src="https://cdn-ak.f.st-hatena.com/images/fotolife/m/masutaka26/20210203/20210203114624.png" alt="f:id:masutaka26:20210203114624p:plain" width="800" height="274" loading="lazy" title="" class="hatena-fotolife" itemprop="image"></span><figcaption>「議事録一覧はこちら」の一例</figcaption></figure></p>

<p>それでも作りたい場合は <code>プロダクト1/議事録/〇〇会議/2021/02/01/〇〇会議 議事録</code> のような記事名にして、後から <code>プロダクト1/2021/02/01/〇〇会議 議事録</code> に一括変換して視界から消せるように、設計するのが良いと思います。</p>

<p>一括変換の仕方は公式ドキュメント「<a href="https://docs.esa.io/posts/207">記事のカテゴリを一括変更</a>」が分かりやすいです。</p>

<h3 id="4-Slack-に流れていく情報も-Flow-型の記事にする">4. Slack に流れていく情報も Flow 型の記事にする</h3>

<p>Slack にはブログ記事並みのメッセージが投稿されることがあります。</p>

<p>そうなりそうになったら迷わず <code>プロダクト1/2021/02/01/○○のお願い</code> といった Flow 型の記事を作り、その URL を Slack で共有します。</p>

<p>他の場面で引用したい時は意外とあるものですし、内容をあとで更新したいこともあります。Slack だと特にあとからの更新には不向きです。</p>

<p>何より当該記事をブラウザで開き、残りの Slack 未読メッセージをスイスイと読むことが出来ます。Slack に投稿されてしまうと、その長いメッセージを読みながら、他の channel に移動するのは億劫です。</p>

<h3 id="5-使い続けられる情報を-Stock-記事として引き上げる">5. 使い続けられる情報を Stock 記事として引き上げる</h3>

<p>結局のところ、ほとんどの情報は使い続けることはありません。具体的すぎるからです。そのような具体的な情報は寝かすことで、抽象度の高い情報、例えばカテゴリ名を炙り出せることがあります。</p>

<p>良いカテゴリ名が思いつかない時は、まだ抽象度が高くないと思うので、引き上げないほうが良いでしょう。</p>

<p>いくつかの Flow 記事をしばらく寝かしたら、あとから汎用的な抽象度の高い Stock 記事のアイディアが湧くこともあります。</p>

<p><figure class="figure-image figure-image-fotolife" title="あとで Stock 記事として抽出する"><span itemscope itemtype="http://schema.org/Photograph"><img src="https://cdn-ak.f.st-hatena.com/images/fotolife/m/masutaka26/20210201/20210201002905.png" alt="f:id:masutaka26:20210201002905p:plain" width="250" height="466" loading="lazy" title="" class="hatena-fotolife" itemprop="image"></span></figure></p>

<h3 id="6-整理を頑張らないことで整理の難易度が低くなった">6. 整理を頑張らないことで整理の難易度が低くなった</h3>

<p>ここまででほとんどの記事は Flow 型の記事のはずです。冒頭に述べたノイズになるような記事は少なく、情報に溺れる確率は低いと思います。</p>

<p>使い回しが効かない具体的な情報を Flow 型の記事に追いやることで、整理の難易度を低くすることが出来ました。</p>

<h3 id="7-esa-を全ての情報の起点にする">7. esa を全ての情報の起点にする</h3>

<p>では、Google ドキュメントも同じようにしましょう！とは思っていません。esa を全ての情報の起点にする勢いで、適宜 Google ドキュメントにリンクを張ると良いでしょう。</p>

<p>Google ドキュメントのフォルダ整理は出来るだけやらないほうが良いです。時間がいくらあっても足りません。Google Drive はただの情報プールです。Google Drive 内検索も優秀です。</p>

<h2 id="それをチームでやるのは難しすぎない">それをチームでやるのは難しすぎない？</h2>

<p>そう思った方、正しい感覚です。</p>

<p>「チームのスピードを上げるための情報整理」は「私が考える esa 原理主義」に振り切って書きました。情報整理のスキルに関して少数精鋭チームでないと、運用するのは難しいと思います。</p>

<p>現在私は開発者 1 人、ビジネスメンバー 2 人のチームに所属しています。私主導でカテゴリを決めているので、これまで書いた方法で整理し、うまくいっている実感があります。</p>

<p><figure class="figure-image figure-image-fotolife" title="Flow 型の記事に対して、Stock 型の記事を少なく保てている"><span itemscope itemtype="http://schema.org/Photograph"><img src="https://cdn-ak.f.st-hatena.com/images/fotolife/m/masutaka26/20210131/20210131231051.png" alt="f:id:masutaka26:20210131231051p:plain" width="250" height="373" loading="lazy" title="" class="hatena-fotolife" itemprop="image"></span><figcaption>Flow 型の記事に対して、Stock 型の記事を少なく保てている。</figcaption></figure></p>

<p>そういえば初期は Flow 型の記事しか作りませんでした。</p>

<h2 id="esa-は難しい">esa は難しい</h2>

<p>フィードフォースでは 1 年半ほど前まで Qiita:Team を使っていました。</p>

<p><iframe src="https://hatenablog-parts.com/embed?url=https%3A%2F%2Fdeveloper.feedforce.jp%2Fentry%2F2019%2F08%2F22%2F141055" title="社内の情報共有ツールを Qiita:Team から esa に乗り換えました - Feedforce Developer Blog" class="embed-card embed-blogcard" scrolling="no" frameborder="0" style="display: block; width: 100%; height: 190px; max-width: 500px; margin: 10px 0px;"></iframe></p>

<p>Qiita:Team はほぼ Flow 型の記事しか書けないため、これまで話した問題は出てきませんでした。いや「表面化しなかった」が正確でしょう。</p>

<p>esa は Stock 型の記事も書けます。ブログと wiki が合体したようなツールなので、難しくないわけがありません。</p>

<p>wiki を書くためには抽象的思考が必要です。私の観測範囲では、半分以上の方は具体的思考に寄り過ぎているため、得意ではないという実感です。意識したことがないかもしれません。</p>

<h2 id="esa-の本当の正体">esa の本当の正体</h2>

<p>正直言って現在の esa は「情報整理のスキルに関して少数精鋭チーム」でないと、乗りこなすのは難しいと思います。</p>

<p>これに気づいた時、Ruby という言語に似ていると思いました。</p>

<p>Ruby は esa で採用されているプログラミング言語です。初心者はにこやかに迎えてくれますが、本番環境で使い続けるためには、コードで表現されていない振る舞いを読み解く必要があるなど、実は少数精鋭チーム向けの言語です。</p>

<p><a href="https://team.esa.io/">esa LLC</a> は少数精鋭チームのようなので、良くも悪くも「コンウェイの法則」が働いて、そのようなサービスになったのだと勝手に想像します。</p>

<h2 id="esa-への要望">esa への要望</h2>

<p>社員数 100 人オーバーが見えてくると、型（制約）の必要性を感じます。</p>

<ul>
<li>新規作成時にデフォルトカテゴリが Flow 型になるような、型を設定できると良い？

<ul>
<li>例: <code>プロダクト1/</code> 以下での新規作成は、デフォルトカテゴリが <code>プロダクト1/YYYY/MM/DD/</code> になる</li>
</ul>
</li>
<li>フレームワーク的に、何らかのパターン以外のカテゴリを作れないようにする？</li>
<li>第一階層カテゴリ以下で、そのようなパターンを数種類から選べるようにする？</li>
</ul>


<p>どれも難しい話ですかね...？</p>

<p>現在社内で抱えている課題として「記事整理にハードルがある」は間違いなくあると思います。</p>

<ul>
<li>たくさんの記事を移動すると、<code>/posts</code> がその情報で埋まる<sup id="fnref:4"><a href="#fn:4" rel="footnote">4</a></sup></li>
<li>移動しただけなのに、記事に自分の小さなアイコンが付く</li>
<li>そもそも記事を 1 つ 1 つ移動するのが大変</li>
<li>タイトルに入れてしまった日付をカテゴリにして...とかまですると、API を使わざるを得ない</li>
</ul>


<p>出来れば Windows のエクスプローラのようなカジュアルさで、且つ履歴が残るとうれしいです。</p>

<p>あと、要望したことはありますが、現在の「カテゴリ以下の記事全て」に加えて、「カテゴリ直下の記事」「アーカイブした記事」を切り替えるような機能が欲しいです。</p>

<p>イメージとしては、GitHub の UI に「カテゴリ直下の記事」を加えたものです。</p>

<p><figure class="figure-image figure-image-fotolife" title="In, On, Archived を切り替えられるイメージ"><span itemscope itemtype="http://schema.org/Photograph"><img src="https://cdn-ak.f.st-hatena.com/images/fotolife/m/masutaka26/20210131/20210131231704.png" alt="f:id:masutaka26:20210131231704p:plain" width="400" height="55" loading="lazy" title="" class="hatena-fotolife" itemprop="image"></span><figcaption>In, On, Archived を切り替えられるイメージ</figcaption></figure></p>

<p>「カテゴリ直下の記事」は <code>on:カテゴリ</code> で検索できますが、知っているユーザーはごく僅かです。</p>

<p>アーカイブの認知も怪しくて、古い記事が残る要因かもしれません。一部カテゴリではこんな工夫をしています。</p>

<p><figure class="figure-image figure-image-fotolife" title="アーカイブという手段を認知させている例"><span itemscope itemtype="http://schema.org/Photograph"><img src="https://cdn-ak.f.st-hatena.com/images/fotolife/m/masutaka26/20210131/20210131232059.png" alt="f:id:masutaka26:20210131232059p:plain" width="800" height="438" loading="lazy" title="" class="hatena-fotolife" itemprop="image"></span><figcaption>アーカイブという手段を認知させている例</figcaption></figure></p>

<p>難しいと思いますが、情報整理のスキルがそれほど高くなくても使える UI 設計をお願いしたいところです。🙏</p>

<p>もし、もっと詳しく私にヒアリングしたいなどあれば、masutaka@feedforce.jp または <a href="https://twitter.com/masutaka">@masutaka</a> の DM までお知らせ下さい。</p>

<h2 id="まとめ">まとめ</h2>

<p>私から見える、フィードフォースで抱えている情報整理の課題をまとめ、チームのスピードを上げるための整理方法を提案しました。</p>

<p>ただ、それは「私が考える esa 原理主義」に振り切っているため、チームで採用するのは難しいと思います。</p>

<p>カテゴリがデフォルト Flow 型になるなど、情報整理を頑張らず済む使い勝手になると、とてもうれしいです。</p>

<h2 id="esa-公式アカウントからのアドバイス">esa 公式アカウントからのアドバイス</h2>

<blockquote><ul>
<li>新規作成時にデフォルトカテゴリが Flow 型になるような、型を設定できると良い？</li>
</ul>
</blockquote>

<p>こちらのアドバイスを頂いたので早速試しました。良さそうです！</p>

<p><blockquote data-conversation="none" class="twitter-tweet" data-lang="ja"><p lang="ja" dir="ltr">あるカテゴリ配下で &quot;Create a new post&quot; ボタンで記事を新規作成するときに、カテゴリが一致するFlowのテンプレートがあれば、そのテンプレートが自動的にプリセットされるという機能があります。（続く→）</p>&mdash; esa_io (@esa_io) <a href="https://twitter.com/esa_io/status/1356808249601712128?ref_src=twsrc%5Etfw">2021年2月3日</a></blockquote> <script async src="https://platform.twitter.com/widgets.js" charset="utf-8"></script> </p>

<p><blockquote data-conversation="none" class="twitter-tweet" data-lang="ja"><p lang="ja" dir="ltr">例えば以下のテンプレートがあったとして<br><br>- Templates/カテゴリ1/YYYY/MM/DD/テンプレートA<br>- Templates/カテゴリ1/サブカテゴリ1/YYYY/MM/DD/テンプレートB<br><br>「カテゴリ1」配下で記事作成→ テンプレートA <br>「カテゴリ1/サブカテゴリ2」配下で記事作成 →テンプレートB <br><br>がそれぞれ自動適用されます</p>&mdash; esa_io (@esa_io) <a href="https://twitter.com/esa_io/status/1356808846379937795?ref_src=twsrc%5Etfw">2021年2月3日</a></blockquote> <script async src="https://platform.twitter.com/widgets.js" charset="utf-8"></script> </p>

<p>後日アンサー記事も頂きました！「所感」にこの記事の感想が書いてあります。
<a href="https://docs.esa.io/posts/394">ProTip/2021/02/03/特定のカテゴリ配下の記事作成時に、テンプレートを適用する - docs.esa.io</a></p>

<h2 id="コラム">コラム</h2>

<p>自分の思いを書ききれないので、コラムに逃しました。(^^;</p>

<h3 id="記事のカテゴリ整理を頑張らない理由">記事のカテゴリ整理を頑張らない理由</h3>

<p>こんな理由からです。</p>

<ol>
<li>歴史が証明している</li>
<li>esa の検索がそこそこ優秀</li>
</ol>


<p>今では信じられないかもしれませんが、1990 年代の Yahoo! JAPAN は、人間のスタッフがウェブサイトの情報を収集してカテゴリ分類して登録する、ディレクトリ型検索サービスでした<sup id="fnref:5"><a href="#fn:5" rel="footnote">5</a></sup>。今はロボット型検索が使われているのは周知のとおりです。</p>

<p>そのため Stock 型の記事だけを作り続けるといずれ破綻することは、<code>1</code> 歴史が証明していると言えます（やや大げさ）。</p>

<p><code>2</code> については、公式ドキュメント「<a href="https://docs.esa.io/posts/104">記事の検索方法</a>」にある検索クエリで、それなりに検索できます（諸説あり）。「<a href="https://docs.esa.io/posts/389">キーワード検索しやすい記事にするコツ</a>」も参考にすると良いでしょう。</p>

<h3 id="Flow-カテゴリをどこまで許容するか">Flow カテゴリをどこまで許容するか</h3>

<p>Flow カテゴリをどこまで許容するかは、悩ましいところです。</p>

<p>(a) 制約をつけずに自由に作ることを許容するか。</p>

<ul>
<li>プロダクト1

<ul>
<li>セールス

<ul>
<li>...</li>
<li>YYYY

<ul>
<li>MM

<ul>
<li>DD</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li>開発

<ul>
<li>○○機能

<ul>
<li>YYYY

<ul>
<li>MM

<ul>
<li>DD</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li>YYYY

<ul>
<li>MM

<ul>
<li>DD</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li>YYYY

<ul>
<li>MM

<ul>
<li>DD</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>


<p>(b) 原理主義っぽく、１つの Flow カテゴリしか許容しないか。</p>

<ul>
<li>プロダクト1

<ul>
<li>セールス

<ul>
<li>...</li>
</ul>
</li>
<li>開発

<ul>
<li>...</li>
</ul>
</li>
<li>YYYY

<ul>
<li>MM

<ul>
<li>DD</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>


<p>(a) は職種横断的な情報共有を重視しないチームに合うと思います。中規模以上のチームです。</p>

<p>(b) は職種横断的な情報共有を重視するチームに合うと思います。小さなチームです。</p>

<p>はじめは (b) で作ってみて、やりづらくなってきたら (a) にすると良いでしょう。ただし、(a) の <code>プロダクト1/開発/○○機能/YYYY/MM/DD/</code> まで細かく Flow カテゴリを作るのは、把握が難しくなりそうですので、オススメはしません。</p>
<div class="footnotes">
<hr/>
<ol>
<li id="fn:1">
<p><a href="https://workspace.google.co.jp/intl/ja/">Google Workspace</a>（旧称 G Suite）を契約しています。<a href="#fnref:1" rev="footnote">&#8617;</a></p></li>
<li id="fn:2">
<p>現在のメンバー数は 90、最古の記事は 2014/4/3 です。<a href="#fnref:2" rev="footnote">&#8617;</a></p></li>
<li id="fn:3">
<p>過去に推奨したことあります。ｽﾏﾇｽﾏﾇ&hellip;。<a href="#fnref:3" rev="footnote">&#8617;</a></p></li>
<li id="fn:4">
<p><code>Archived/</code> 以下への移動は更新日時が変わらず <code>/posts</code> に現れないので、<a href="https://docs.esa.io/posts/207">カテゴリ一括変更</a>と組み合わせれば、一応回避はできます。<a href="#fnref:4" rev="footnote">&#8617;</a></p></li>
<li id="fn:5">
<p>今回の件で調べたところ、その<a href="https://jp.techcrunch.com/2017/06/29/yahoo-to-shut-down-directory-search/">「Yahoo!カテゴリ」は2018年3月29日まで動いていた</a>ことを知りびっくりしました<a href="#fnref:5" rev="footnote">&#8617;</a></p></li>
</ol>
</div>

]]></description>
            <enclosure url="https://cdn-ak.f.st-hatena.com/images/fotolife/m/masutaka26/20210202/20210202122517.png" length="0" type="image/png"/>
        </item>
        <item>
            <title><![CDATA[Ruby 3.0 の「キーワード引数の分離」で委譲用のメソッドが壊れた場合の対応方法]]></title>
            <link>https://developer.feedforce.jp/entry/2021/01/29/121252</link>
            <guid>https://developer.feedforce.jp/entry/2021/01/29/121252</guid>
            <pubDate>Fri, 29 Jan 2021 03:12:52 GMT</pubDate>
            <description><![CDATA[<p>こんにちは、<a href="http://blog.hatena.ne.jp/daido1976/" class="hatena-id-icon"><img src="https://cdn.profile-image.st-hatena.com/users/daido1976/profile.png" width="16" height="16" alt="" class="hatena-id-icon">id:daido1976</a> です。</p>

<p>Ruby 3.0 の「<a href="https://bugs.ruby-lang.org/issues/14183">キーワード引数の分離</a>」が原因で委譲用のメソッドが壊れた場合、特に Ruby 2.6 ~ 3.0 で互換性を保ちながら対応する場合の日本語記事が見当たらなかったので、書かせていただきます。</p>

<h2>インスタンスメソッドが壊れた場合</h2>

<p>以下のコードは Ruby 3.0 より前のバージョンでは動きますが、3.0 からは <code>MyClass#other_method</code> の実行時に ArgumentError が起きるようになります。（2.7 の時も警告が出ます）</p>

<pre class="code lang-ruby" data-lang="ruby" data-unlink><span class="synPreProc">class</span> <span class="synType">MyClass</span>
  <span class="synPreProc">def</span> <span class="synIdentifier">delegating_method</span>(*args)
    other_method(*args)
  <span class="synPreProc">end</span>

  <span class="synPreProc">def</span> <span class="synIdentifier">other_method</span>(<span class="synConstant">value</span>:)
    p value
  <span class="synPreProc">end</span>
<span class="synPreProc">end</span>

<span class="synType">MyClass</span>.new.delegating_method(<span class="synConstant">value</span>: <span class="synSpecial">'</span><span class="synConstant">value</span><span class="synSpecial">'</span>)
</pre>


<p>こちらは公式の <a href="https://www.ruby-lang.org/en/news/2019/12/12/separation-of-positional-and-keyword-arguments-in-ruby-3-0/#a-compatible-delegation">Separation of positional and keyword arguments in Ruby 3.0#a-compatible-delegation</a> や <a href="https://github.com/ruby/ruby2_keywords/">ruby2_keywords gem</a> や <a href="https://docs.ruby-lang.org/ja/latest/method/Module/i/ruby2_keywords.html">Module#ruby2_keywords</a> を参考に以下のようなコードで対応できます。</p>

<pre class="code lang-ruby" data-lang="ruby" data-unlink><span class="synPreProc">class</span> <span class="synType">MyClass</span>
  <span class="synPreProc">def</span> <span class="synIdentifier">delegating_method</span>(*args)
    other_method(*args)
  <span class="synPreProc">end</span>

  <span class="synPreProc">def</span> <span class="synIdentifier">other_method</span>(<span class="synConstant">value</span>:)
    p value
  <span class="synPreProc">end</span>

  <span class="synComment"># この 1 行を追加する</span>
  ruby2_keywords <span class="synConstant">:delegating_method</span> <span class="synStatement">if</span> respond_to?(<span class="synConstant">:ruby2_keywords</span>, <span class="synConstant">true</span>)
<span class="synPreProc">end</span>

<span class="synType">MyClass</span>.new.delegating_method(<span class="synConstant">value</span>: <span class="synSpecial">'</span><span class="synConstant">value</span><span class="synSpecial">'</span>)
</pre>


<p>ポイントは Ruby 2.7 や 3.0 でも旧来のスタイルで実行できるようにするための <code>Module#ruby2_keywords</code> が Ruby 2.6 以前では定義されてないので、<a href="https://docs.ruby-lang.org/ja/latest/method/Object/i/respond_to=3f.html">Object#respond_to?</a> などでそのケアをしてあげる必要があることです。</p>

<h2>クラスメソッドが壊れた場合</h2>

<p>こちらがこの記事を書いた目的です。</p>

<p>サンプルコードに現実味を持たせるためにインスタンスメソッドの例とは少し変えています。クラスメソッドで引数を受けて、そのまま委譲して初期化するようなコードです。</p>

<p>このコードも Ruby 3.0 からは ArgumentError が発生します。</p>

<pre class="code lang-ruby" data-lang="ruby" data-unlink><span class="synPreProc">class</span> <span class="synType">MyClass</span>
  <span class="synPreProc">def</span> <span class="synConstant">self</span>.<span class="synIdentifier">delegating_method</span>(*args)
    new(*args)
  <span class="synPreProc">end</span>

  <span class="synPreProc">def</span> <span class="synIdentifier">initialize</span>(<span class="synConstant">value</span>:)
    p value
  <span class="synPreProc">end</span>
<span class="synPreProc">end</span>

<span class="synType">MyClass</span>.delegating_method(<span class="synConstant">value</span>: <span class="synSpecial">'</span><span class="synConstant">value</span><span class="synSpecial">'</span>)
</pre>


<p>こちらはインスタンスメソッドの場合と違い、以下のように <code>class &lt;&lt; self</code> で特異クラスをオープンしてから、<code>Module#ruby2_keywords</code> の対応をしてあげる必要があります。</p>

<pre class="code lang-ruby" data-lang="ruby" data-unlink><span class="synPreProc">class</span> <span class="synType">MyClass</span>
  <span class="synPreProc">def</span> <span class="synConstant">self</span>.<span class="synIdentifier">delegating_method</span>(*args)
    new(*args)
  <span class="synPreProc">end</span>

  <span class="synPreProc">def</span> <span class="synIdentifier">initialize</span>(<span class="synConstant">value</span>:)
    p value
  <span class="synPreProc">end</span>

  <span class="synComment"># この 3 行を追加する</span>
  <span class="synPreProc">class</span> &lt;&lt; <span class="synConstant">self</span>
    ruby2_keywords <span class="synConstant">:delegating_method</span> <span class="synStatement">if</span> respond_to?(<span class="synConstant">:ruby2_keywords</span>, <span class="synConstant">true</span>)
  <span class="synPreProc">end</span>
<span class="synPreProc">end</span>

<span class="synType">MyClass</span>.delegating_method(<span class="synConstant">value</span>: <span class="synSpecial">'</span><span class="synConstant">value</span><span class="synSpecial">'</span>)
</pre>


<p><i>定義されたクラスメソッドの居場所が分からなくて、久しぶりに『<a href="https://www.oreilly.co.jp/books/9784873117430/">メタプログラミングRuby</a>』の 5 章を開きました。</i></p>

<p>Also see. <a href="https://docs.ruby-lang.org/ja/latest/doc/spec=2fdef.html#singleton_class">https://docs.ruby-lang.org/ja/latest/doc/spec=2fdef.html#singleton_class</a></p>

<h2>【おまけ】Ruby 2.6 ~ 3.0 で互換性を保たなくて良い場合</h2>

<p>公式の <a href="https://www.ruby-lang.org/en/news/2019/12/12/separation-of-positional-and-keyword-arguments-in-ruby-3-0/#delegation-ruby-3">Separation of positional and keyword arguments in Ruby 3.0#delegation-ruby-3</a> の通りにやれば OK です。</p>
]]></description>
            <enclosure url="https://cdn.user.blog.st-hatena.com/default_entry_og_image/4268819/1588226000876991" length="0" type="image//default_entry_og_image/4268819/1588226000876991"/>
        </item>
        <item>
            <title><![CDATA[pushover orb のメンテナーになった]]></title>
            <link>https://masutaka.net/2021-01-22-1/</link>
            <guid>https://masutaka.net/2021-01-22-1/</guid>
            <pubDate>Fri, 22 Jan 2021 00:00:00 GMT</pubDate>
            <description><![CDATA[個人で Slack workspace を作るのはオーバースペックだという宗教的な理由から、各種通知は Pushover という通知サービスを利用しています。[2015-03-08-1] に紹介記事を書いてましたね。
今は亡き im.kayac.com を便利にしたやつと言えば、分かる人には分かるでしょうか？
長らく CI の失敗通知は CircleCI のコンソールを見て久しぶりに気づくという、ダメな運用をしていました。去年の 9 /13 に重い腰を上げて、CI が失敗したら Pushover に通知させようとしました。その時作った PR がこちらです。
https://github.com/pbrisbin/pushover-orb/pull/1 レビューして頂いたは良いが、放置してしまい、修正 commit をしたのが先日の 1/18。無事マージされましたが、作者様は GitHub Actions に移行しており、メンテナーにならないかとお誘いを受けました。
https://github.com/pbrisbin/pushover-orb/pull/1#issuecomment-762920348 ちょうど tfupdate orb で CircleCI Orb の勘所は掴んでいたので、喜んで承諾。リリース周りを整えたリポジトリがこちらです。
  メンテナーも変わったことだし、メジャーバージョンアップしつつ v2.0.0 をリリースしました。
https://circleci.com/developer/orbs/orb/masutaka/pushover?version=2.0.0 https://github.com/masutaka/pushover-orb/releases/tag/v2.0.0 よろしければご利用くださいませ。]]></description>
        </item>
        <item>
            <title><![CDATA[tfupdate orb の circleci/orb-tools を v8.27.5 から v10.0.3 にアップデートした]]></title>
            <link>https://masutaka.net/2021-01-16-1/</link>
            <guid>https://masutaka.net/2021-01-16-1/</guid>
            <pubDate>Sat, 16 Jan 2021 00:00:00 GMT</pubDate>
            <description><![CDATA[[2019-12-20-1] で circleci/orb-tools を解説しました。リリースフローがよく出来ていたので、感動した記憶があります。
  しかし、記事を書いた時にはすでに v9.0.0 がリリースされており、それはそれは大きな BREAKING CHANGES でした&hellip;。
やる気が出なかったので、tfupdate orb で使っているバージョンはずっと据え置いていましたが、今日急にやる気になったので、最新の v10.0.3 にアップデートしました。
当該 PR はこちらです。.circleci/config.yml がかなり短くなりました。
https://github.com/masutaka/circleci-tfupdate-orb/pull/2 公式ドキュメント や circleci/orb-tools のドキュメント はありますが、よく分からないのと、今までの経緯からあまり信用できないので、v10.0.3 のコードリーディング をして理解しました。
circleci/orb-tools 自身の .circleci/config.yml も読みました。結果的にここまで複雑にする必要はなかったです。
https://github.com/CircleCI-Public/orb-tools-orb/blob/v10.0.3/.circleci/config.yml 今までは master ブランチに commit するたびに orb のバージョンが自動的に上がっていきました。セマンティックバージョンの制御はできません。
現在はその commit message によって、orb バージョンを半自動的に上げられるようになりました。セマンティックバージョンを制御可能です。
v8.27.5 での振る舞い master ブランチに commit が追加された時、src/commands または src/jobs 以下が変更されていれば minor version が、それ以外の変更では patch version が自動的に上がりました。major version はサポートされていませんでした。
何も考えずに済んだので楽ではありましたが、制御できないのは不満があったのかもしれません。
v10.0.3 での振る舞い master ブランチに commit が追加された時、当該 commit message に以下の文字列が含まれていれば（例 ）、その指定に従ってバージョンが上がります。]]></description>
        </item>
        <item>
            <title><![CDATA[思考を寝かせて、優先順位を決めるための「やるかもしれないリスト」がとてもうまくワークしている]]></title>
            <link>https://masutaka.net/2021-01-05-1/</link>
            <guid>https://masutaka.net/2021-01-05-1/</guid>
            <pubDate>Tue, 05 Jan 2021 00:00:00 GMT</pubDate>
            <description><![CDATA[[2020-12-03-1] では優先度は優先順位の下位レイヤーであり、優先順位を決めることが大事という話をしました。では優先順位はどう決めると良いでしょうか？
私はここ 10 年くらいの試行錯誤の末に「やるかもしれないリスト」という方法にたどり着きました。
現在はこのような esa 上の 1 記事として存在しています。
  私が「やるかもしれないリスト」でやっていることはだいたい 3 つです。
・頭の中を 1 つのテキストファイルにリストとして書き出し続ける
・優先順位を並べ替え続ける
・敢えて時間を置くことで、思考を寝かせ、よく練られた考えにし続ける
2020-06-09 に作ってから 203 回更新しています。1 日 1 回以上更新している計算になります。
アイディアを思いつくたびに追加したり順番を入れ替えたりしているので、このような更新回数になりました。こういうことはだいたい、仕事以外の時間、例えば散歩やシャワーの時に思いつきますよね。
以下の 4 つのポリシーで「やるかもしれないリスト」を更新し続けています。
1. 1 つのテキストファイルにする この段階では、GitHub Issue や Trello、Asana などの便利なタスク管理ツールは使いません。
そもそも「やるかもしれないリスト」はタスクに落とし込む前の、もっと曖昧なものを扱う方法です。
各種タスク管理ツールは、具現化し、やることが決まったタスクを扱うツールだと思うので、その前の段階で使うのには適さないと考えています。
思いついたベースでタスク管理ツールに追加していくと、重要度が低いものや、まだ考えが練られていないタスクが作られがちです。一度タスクにしてしまうと、思考を寝かせて考えを練るのは難しい気がしますし、順番もつけづらく、削除もやりづらいと思います。
「やるかもしれないリスト」に一旦溜めることで、それらを避けることが出来ます。
2. 番号付きリストにする 先に話したとおり優先順位を決めることが目的の 1 つなので、その意図を反映した番号付きリスト（ordered list）にしています。ただのリスト（unordered list）にはしていません。
さらに書くと、h1 や h2 などの構造化は、順番を付けづらくなるのでオススメはしません。
前述の画像で構造化しているのは、私が現在一時的に複数プロジェクトに所属していたり、会社全体に関わることを多少やっているからです。繰り返しますが、順番を付けづらくなるのでオススメはしません。
3. 説明はできるだけ簡素にする 以下は実際のリストを抜粋したものです。
1. xxx view の primary_key に媒体も加える [:slack:](URL) * Yahoo! JAPAN と Yahoo! が混在しているので、力技で直す必要がある 1.]]></description>
        </item>
        <item>
            <title><![CDATA[Shopify アプリのリスト設定ポイント]]></title>
            <link>https://developer.feedforce.jp/entry/2020/12/23/093000</link>
            <guid>https://developer.feedforce.jp/entry/2020/12/23/093000</guid>
            <pubDate>Wed, 23 Dec 2020 00:30:00 GMT</pubDate>
            <description><![CDATA[<p>この記事は <a href="https://qiita.com/advent-calendar/2020/shopify-liquid">Shopify開発を盛り上げる（Liquid, React, Node.js, Graph QL） Advent Calendar 2020</a> の 23 日目の記事です。昨日は <a href="https://qiita.com/hal_256">@hal_256</a> さんの『<a href="https://qiita.com/hal_256/items/07626bb0621bc6c8eef8">Next.js+GrapqhQLでShopifyアプリを開発する</a>』でした！型が用意できるっていいですよね。</p>

<p>ごきげんよう！ <a href="http://blog.hatena.ne.jp/tmd45/" class="hatena-id-icon"><img src="https://cdn.profile-image.st-hatena.com/users/tmd45/profile.png" width="16" height="16" alt="id:tmd45" class="hatena-id-icon"></a><a href="https://developer.feedforce.jp/archive/author/tmd45">id:tmd45</a> と申します。よろしくお願いします。</p>

<p>同僚たちが 4 日目、8 日目と記事を書き、こっそり（？）11 日目も書かれていたので、これで 4 本目の弊社記事になります。がんばります。</p>

<p><iframe src="https://hatenablog-parts.com/embed?url=https%3A%2F%2Fdeveloper.feedforce.jp%2Fentry%2F2020%2F12%2F04%2F100000" title="GitHub Actionsを使ったShopify テーマの自動デプロイ環境構築 - Feedforce Developer Blog" class="embed-card embed-blogcard" scrolling="no" frameborder="0" style="display: block; width: 100%; height: 190px; max-width: 500px; margin: 10px 0px;"></iframe></p>

<p><iframe src="https://hatenablog-parts.com/embed?url=https%3A%2F%2Fdeveloper.feedforce.jp%2Fentry%2F2020%2F12%2F08%2F120000" title="Shopify 埋め込みアプリのフォームを @shopify/react-form で作る - Feedforce Developer Blog" class="embed-card embed-blogcard" scrolling="no" frameborder="0" style="display: block; width: 100%; height: 190px; max-width: 500px; margin: 10px 0px;"></iframe></p>

<p>とはいえ、これまでとても濃い記事がたくさん書かれていたので、ここらで軽めに、アプリのリスト設定で引っかかったポイントなんぞを共有したいと思います。</p>

<h2>アプリのリストとは</h2>

<p>Shopify の公開アプリを<a href="https://apps.shopify.com/?locale=ja">アプリストア</a>に掲載するための情報を、設定する場所です。</p>

<p><figure class="figure-image figure-image-fotolife" title="アプリのリスト設定"><span itemscope itemtype="http://schema.org/Photograph"><img src="https://cdn-ak.f.st-hatena.com/images/fotolife/t/tmd45/20201222/20201222175817.png" alt="f:id:tmd45:20201222175817p:plain" title="" class="hatena-fotolife" itemprop="image"></span><figcaption>アプリのリスト設定</figcaption></figure></p>

<p>公開アプリを実際に公開するには、このリストの設定を行ったうえで、Shopify からのレビューを通らなければいけません。</p>

<p>項目もたくさんあるので、ここではひとつひとつの説明はしません。</p>

<h2>アプリ名</h2>

<p>初っ端ですが、エンジニアが対応しているとうっかりしがちなポイント その１。</p>

<p><figure class="figure-image figure-image-fotolife" title="A. Listing information、1. App information の「App name」"><span itemscope itemtype="http://schema.org/Photograph"><img src="https://cdn-ak.f.st-hatena.com/images/fotolife/t/tmd45/20201222/20201222181803.png" alt="f:id:tmd45:20201222181803p:plain" title="" class="hatena-fotolife" itemprop="image"></span><figcaption>A. Listing information、1. App information の「App name」</figcaption></figure></p>

<p>ここを書き忘れることはまずありませんが、この値は、基本である<b>「アプリ設定」の「アプリ名」</b>と同じ値になっている必要があります。</p>

<p><figure class="figure-image figure-image-fotolife" title="アプリ設定の「アプリ名」"><span itemscope itemtype="http://schema.org/Photograph"><img src="https://cdn-ak.f.st-hatena.com/images/fotolife/t/tmd45/20201222/20201222191239.png" alt="f:id:tmd45:20201222191239p:plain" title="" class="hatena-fotolife" itemprop="image"></span><figcaption>アプリ設定の「アプリ名」</figcaption></figure></p>

<p>アプリ名に "本番環境" と入れているとか、ストア情報（リストの内容）でかっこいいアプリ名を付け直すとかして、名前が一致していないとレビューの自動チェックで弾かれます。</p>

<h2>アプリアイコン</h2>

<p>初っ端ですが、エンジニアが対応しているとうっかりしがちなポイント その２（笑）</p>

<p><figure class="figure-image figure-image-fotolife" title="A. Listing information の「2. App icon」"><span itemscope itemtype="http://schema.org/Photograph"><img src="https://cdn-ak.f.st-hatena.com/images/fotolife/t/tmd45/20201222/20201222181115.png" alt="f:id:tmd45:20201222181115p:plain" title="" class="hatena-fotolife" itemprop="image"></span><figcaption>A. Listing information の「2. App icon」</figcaption></figure></p>

<p>リストの設定はしたものの…</p>

<p><figure class="figure-image figure-image-fotolife" title="アプリ設定の「アプリのアイコン」"><span itemscope itemtype="http://schema.org/Photograph"><img src="https://cdn-ak.f.st-hatena.com/images/fotolife/t/tmd45/20201222/20201222181257.png" alt="f:id:tmd45:20201222181257p:plain" title="" class="hatena-fotolife" itemprop="image"></span><figcaption>アプリ設定の「アプリのアイコン」</figcaption></figure></p>

<p>こちらも「アプリ設定」の「アプリのアイコン」を設定し忘れていた…なんてことがありました。</p>

<p>また、この２つの画像は指定サイズは異なるものの、基本的には同じ内容の画像を設定する必要があります。開発中に適当なアイコンを設定していて、ストア情報にだけリッチなアイコンを後から作った場合なども、差し替えをお忘れなく。</p>

<h2>スクリーンショット</h2>

<p>必須項目のなかにスクリーンショットの添付があります。</p>

<p>ただ画面のスクリーンショットを貼ればいいというものではなく、かなり細かいガイドラインが定められています。リストの設定ページからもリンクされているので確認しましょう。</p>

<p><iframe src="https://hatenablog-parts.com/embed?url=https%3A%2F%2Fshopify.dev%2Fconcepts%2Fapp-store%2Fgetting-your-app-approved%2Fapp-requirements%234-screenshots" title="Requirements for public apps on Shopify" class="embed-card embed-webcard" scrolling="no" frameborder="0" style="display: block; width: 100%; height: 155px; max-width: 500px; margin: 10px 0px;"></iframe></p>

<p>画像サイズや縦横比率はわかりやすいですね。代替テキストが必要というのも、そもそもリスト設定のページに項目があるのでまず入れ忘れることは無いと思います。</p>

<p>画像そのものの注意点ですと、以下のようなものが引っかかりやすいかなと思います。</p>

<ul>
<li>スクリーンショットにデスクトップの背景や <strong>ブラウザウィンドウを含めないでください</strong> 。画像が乱雑になったり、利用者の気を散らしたりしないように、それらをトリミングしてください</li>
<li>「埋め込みアプリ」（Embedded App）のスクリーンショットに、ストア名、検索バー、ユーザ情報など <b>Shopify 管理画面（ストア管理画面）のヘッダーコンテンツを含めないで</b>ください。左側のナビゲーションは含めることができます</li>
</ul>


<p><figure class="figure-image figure-image-fotolife" title="ストアのヘッダ部分"><span itemscope itemtype="http://schema.org/Photograph"><img src="https://cdn-ak.f.st-hatena.com/images/fotolife/t/tmd45/20201222/20201222190020.png" alt="f:id:tmd45:20201222190020p:plain" title="" class="hatena-fotolife" itemprop="image"></span><figcaption>ストアのヘッダー部分</figcaption></figure></p>

<p>スクリーンショットを丁寧に撮っていても、後者のストアのヘッダー部分は含めてしまいがちだと思いますので、気をつけましょう。</p>

<h2>詳細な説明</h2>

<p>B. App details の「5. Detailed description」の部分です。アプリストアのアプリ詳細ページで、「（アプリ名）の詳細情報」として表示される項目です。</p>

<p><figure class="figure-image figure-image-fotolife" title="アプリの詳細情報"><span itemscope itemtype="http://schema.org/Photograph"><img src="https://cdn-ak.f.st-hatena.com/images/fotolife/t/tmd45/20201222/20201222184230.png" alt="f:id:tmd45:20201222184230p:plain" title="" class="hatena-fotolife" itemprop="image"></span><figcaption>アプリの詳細情報</figcaption></figure></p>

<p>こちらでついやってしまいがちなのが、とにかく「アプリの機能の説明」<b>以外のことを書いてしまう</b>こと。<a href="https://shopify.dev/concepts/app-store/getting-your-app-approved/app-requirements#5-detailed-description">ガイドラインでも使用してはいけない内容が事細かに書かれています</a>のでチェックしましょう。</p>

<p>"このアプリで何ができるのか" を書くようにすれば問題ないのですが、日本人気質なのか「困ったことがあったらサポートします」みたいな一文を入れるのも NG です（やりました）。それはこのアプリの "機能" の話ではないですよね！</p>

<p>スクリーンショットにも見えるように、サポートに関してはストアの定型で項目が用意されているので、そちらで我慢（？）しましょう。</p>

<h2>おわりに</h2>

<p>というわけで、リストの設定のなかでもストアに表示される基本的に部分についてポイントをあげてみました。</p>

<p>項目が多くて大変ですが、区分けがしっかりしているおかげで適切な粒度で、アプリ利用者へ必要な情報を届けられるこういった仕組みが、とてもエコだなと思います（エコシステム的な意味で）。</p>

<p>アプリレビューを乗り越えたらついにアプリ公開です！ﾌｧｲﾄｫ･.*:+:(n'∀')η:+:*.･</p>
]]></description>
            <enclosure url="https://cdn-ak.f.st-hatena.com/images/fotolife/t/tmd45/20201222/20201222181115.png" length="0" type="image/png"/>
        </item>
        <item>
            <title><![CDATA[『データマネジメントが30分でわかる本』を読んだ]]></title>
            <link>https://masutaka.net/2020-12-20-1/</link>
            <guid>https://masutaka.net/2020-12-20-1/</guid>
            <pubDate>Sun, 20 Dec 2020 00:00:00 GMT</pubDate>
            <description><![CDATA[4 月からプログラマーからデータアーキテクト（データ整備人）にキャリアチェンジして（そうなの？）、Looker Advent Calendar 2020 のこの記事で知ったので読みました。￥500 と、大変お求めやすい価格になっています。
 データマネジメント知識体系 DMBOK （でぃんぼっく）の独自要約とケーススタディ集です。全 11 章それぞれで 30 秒、3 分、30 分コースを選ぶことが出来るので、ざっと読むのもじっくり読むのも自由な点が秀逸です。
DMBOK 自体知らなかったので、取っ掛かりにはとても良い本でした。SLA はいずれ決めようかなーとか思ったりしました。
 ]]></description>
        </item>
        <item>
            <title><![CDATA[2020年 買ってよかったもの]]></title>
            <link>https://blog.tmd45.jp/entry/2020/12/14/133631</link>
            <guid>https://blog.tmd45.jp/entry/2020/12/14/133631</guid>
            <pubDate>Mon, 14 Dec 2020 04:36:31 GMT</pubDate>
            <description><![CDATA[<p>この記事は <a href="https://adventar.org/calendars/5560">feedforce Advent Calendar 2020</a> の 14 日目の記事です。</p>

<p>昨日は同じプロダクトチームでマーケティングを担当してくれている、ねこにしさんによる<a href="https://note.com/nekonishi_m/n/n276d286a6dd2">『その文章に、読者はいるか？』</a>でした。お仕事でもねこにしさんらしい自然体の文章と思っていましたが、その裏ではいろいろ考えることがあるんですね。</p>

<p>そんな素敵な記事のあとでナニですが、わたくし <a href="https://twitter.com/tmd45">@tmd45</a> からは個人的な散財の記録をお届けします。通称、散財部活動報告です。</p>

<h3>2020年は生活が激変した年</h3>

<p>もはやテンプレのような話ですが、自分も例にもれず新型コロナウィルス対策の影響で、現在はフルリモート環境で仕事しています。</p>

<p>とはいえ、自宅のパソコン環境はもともと整っていたので、そういう意味で新しく買い揃えたものはありませんでした。<a href="https://blog.tmd45.jp/archive/category/%E6%95%A3%E8%B2%A1%E9%83%A8">過去の散財記録を見ると</a>もう椅子とかディスプレイとか買ってあって、それそのものが「買っておいてよかったなー」と思いました。</p>

<p>とはいえ本格的にミーティングなどを通話でするようになって、マイクとイヤホンは買いました。</p>

<h4>単一指向性USBコンデンサマイク</h4>

<p><div class="hatena-asin-detail"><a href="https://www.amazon.co.jp/exec/obidos/ASIN/B085WSSV2V/tmd45-22/"><img src="https://m.media-amazon.com/images/I/41VmUgWMcTL.jpg" class="hatena-asin-detail-image" alt="FIFINE USBマイク コンデンサーマイク 単一指向性 マイクスタンド(アームスタンドと三脚スタンド付き) ポップガード付き マイクセット ABタイプ USBケーブル PC用マイク Skype 録音 ゲーミング ライブ配信 ゲーム実況 在宅勤務 Windows Mac PS4対応 高音質マイク T669" title="FIFINE USBマイク コンデンサーマイク 単一指向性 マイクスタンド(アームスタンドと三脚スタンド付き) ポップガード付き マイクセット ABタイプ USBケーブル PC用マイク Skype 録音 ゲーミング ライブ配信 ゲーム実況 在宅勤務 Windows Mac PS4対応 高音質マイク T669"></a><div class="hatena-asin-detail-info"><p class="hatena-asin-detail-title"><a href="https://www.amazon.co.jp/exec/obidos/ASIN/B085WSSV2V/tmd45-22/">FIFINE USBマイク コンデンサーマイク 単一指向性 マイクスタンド(アームスタンドと三脚スタンド付き) ポップガード付き マイクセット ABタイプ USBケーブル PC用マイク Skype 録音 ゲーミング ライブ配信 ゲーム実況 在宅勤務 Windows Mac PS4対応 高音質マイク T669</a></p><ul><li><span class="hatena-asin-detail-label">メディア:</span> エレクトロニクス</li></ul></div><div class="hatena-asin-detail-foot"></div></div></p>

<p>いきなりゴツいですが、快適なフルリモートワークにはコミュニケーションツールへの投資が欠かせません。</p>

<p>単一指向性で雑音を減らし、アームスタンドで取り回しや位置取りが柔軟にできるようになって、コスパ良かったと思います。ポップガード（風防）は使っていません。会社でも同僚におすすめしまくって 2, 3 人に買ってもらいました（笑）</p>

<p>特別なドライバインストールも不要で、Mac と Windows、あと PS4 にも接続して使ってみましたが、どれもいい感じでした。</p>

<h4>骨伝導イヤホン</h4>

<p><div class="hatena-asin-detail"><a href="https://www.amazon.co.jp/exec/obidos/ASIN/B07WH6JVRN/tmd45-22/"><img src="https://m.media-amazon.com/images/I/31B3ROIqHML.jpg" class="hatena-asin-detail-image" alt="AfterShokz Aeropex コスミックブラック 骨伝導ワイヤレスヘッドホン AFT-EP-" title="AfterShokz Aeropex コスミックブラック 骨伝導ワイヤレスヘッドホン AFT-EP-"></a><div class="hatena-asin-detail-info"><p class="hatena-asin-detail-title"><a href="https://www.amazon.co.jp/exec/obidos/ASIN/B07WH6JVRN/tmd45-22/">AfterShokz Aeropex コスミックブラック 骨伝導ワイヤレスヘッドホン AFT-EP-</a></p><ul><li><span class="hatena-asin-detail-label">メディア:</span></li></ul></div><div class="hatena-asin-detail-foot"></div></div></p>

<p>イヤホンはインイヤー（カナル型）派なんですが、嘘か真か長時間使用で難聴とかいう噂を聞いて、実際、長時間付けていると疲れを感じていたので、社内で話題になっていた骨伝導イヤホンを買ってみました。</p>

<p>いまのところ、いい感じです。どんなイヤホンでも長時間つけっぱなしだと疲れるのは変わりないので、こまめに電源切って外してます。</p>

<p>接地面に髪の毛がはさまってると聞こえづらかったり、大きな音がするとちょっと頭がクラっとする気もします。お安くもないので、機会があったら試してみてから買ったほうがいいと思います（このご時世だとそれも難しいですけど…）。</p>

<h4>足置き・足枕</h4>

<p><div class="hatena-asin-detail"><a href="https://www.amazon.co.jp/exec/obidos/ASIN/B07TZM9ZWP/tmd45-22/"><img src="https://m.media-amazon.com/images/I/51X2zP4KGXL.jpg" class="hatena-asin-detail-image" alt="足置き 足枕 低反発 足まくら 足休め 足用クッション 体圧分散 半円形 足楽 足むくみ 車用 新幹線 飛行機用 旅行用 オフィス エコノミークラス座席をフラット 敬老の最適プレゼント" title="足置き 足枕 低反発 足まくら 足休め 足用クッション 体圧分散 半円形 足楽 足むくみ 車用 新幹線 飛行機用 旅行用 オフィス エコノミークラス座席をフラット 敬老の最適プレゼント"></a><div class="hatena-asin-detail-info"><p class="hatena-asin-detail-title"><a href="https://www.amazon.co.jp/exec/obidos/ASIN/B07TZM9ZWP/tmd45-22/">足置き 足枕 低反発 足まくら 足休め 足用クッション 体圧分散 半円形 足楽 足むくみ 車用 新幹線 飛行機用 旅行用 オフィス エコノミークラス座席をフラット 敬老の最適プレゼント</a></p><ul><li><span class="hatena-asin-detail-label">メディア:</span></li></ul></div><div class="hatena-asin-detail-foot"></div></div></p>

<p>そういえば地味ですが、リモートワークになってから足置きを買いました。</p>

<p>これまで足元の電源ボックス（電源タップとかをまとめてしまっている箱）に足を乗せていたのですが、通話中に蓋を踏み抜いて大騒ぎすることが何度かあったので（すみません…）これも買ってよかったなと思います。</p>

<h4>キーボードカバー</h4>

<p><div class="hatena-asin-detail"><a href="https://www.amazon.co.jp/exec/obidos/ASIN/B085L2M12H/tmd45-22/"><img src="https://m.media-amazon.com/images/I/51FID6GM-3L.jpg" class="hatena-asin-detail-image" alt="moshi ClearGuard MB for MacBook Pro 13/16 キーボードカバー (欧州EUキーボード用) ※13インチは2020年発売の型のみ対応 静かな打音 Touch Barも保護 ぴったりフィットの極薄0.1mm 洗って貼り直せる 無害素材 製品登録で10年グローバル保証" title="moshi ClearGuard MB for MacBook Pro 13/16 キーボードカバー (欧州EUキーボード用) ※13インチは2020年発売の型のみ対応 静かな打音 Touch Barも保護 ぴったりフィットの極薄0.1mm 洗って貼り直せる 無害素材 製品登録で10年グローバル保証"></a><div class="hatena-asin-detail-info"><p class="hatena-asin-detail-title"><a href="https://www.amazon.co.jp/exec/obidos/ASIN/B085L2M12H/tmd45-22/">moshi ClearGuard MB for MacBook Pro 13/16 キーボードカバー (欧州EUキーボード用) ※13インチは2020年発売の型のみ対応 静かな打音 Touch Barも保護 ぴったりフィットの極薄0.1mm 洗って貼り直せる 無害素材 製品登録で10年グローバル保証</a></p><ul><li><span class="hatena-asin-detail-label">メディア:</span></li></ul></div><div class="hatena-asin-detail-foot"></div></div></p>

<p>日本国内で EU キーボード対応商品買うのなかなか選択肢が少なくて大変です。会社で使ってる MacBook が諸事情で EU キーボードでして(；・∀・) ※通常は US か JIS で選べます！</p>

<p>また、いままで幸いやらかしたことはないんですが、自宅で Mac 使っててコーヒーこぼしたりするのが怖いので、キーボードカバーを買いました。ちゃんとサイズが合ってるので、いい感じに使えてます。</p>

<p>ぺたっとくっ付くわけではなく、ふわっと被ってるだけなので、指が汗ばんでくるとちょっと浮いたりはしますが、慣れですね。</p>

<p>Mac そのものをぶっ壊す恐怖からは守ってくれるのでこれも買ってよかったです。</p>

<h3>あとはコロナとかリモートとか関係ないやつ</h3>

<p>ほんとにただ気が向いて買っただけのもの。</p>

<h4>電動歯ブラシ</h4>

<p><div class="hatena-asin-detail"><a href="https://www.amazon.co.jp/exec/obidos/ASIN/B073XF4LK8/tmd45-22/"><img src="https://m.media-amazon.com/images/I/314tQlQL3gL.jpg" class="hatena-asin-detail-image" alt="フィリップス ソニッケアー ダイヤモンドクリーン スマート 電動歯ブラシ ホワイト HX9934/05" title="フィリップス ソニッケアー ダイヤモンドクリーン スマート 電動歯ブラシ ホワイト HX9934/05"></a><div class="hatena-asin-detail-info"><p class="hatena-asin-detail-title"><a href="https://www.amazon.co.jp/exec/obidos/ASIN/B073XF4LK8/tmd45-22/">フィリップス ソニッケアー ダイヤモンドクリーン スマート 電動歯ブラシ ホワイト HX9934/05</a></p><ul><li><span class="hatena-asin-detail-label">発売日:</span> 2017/09/01</li><li><span class="hatena-asin-detail-label">メディア:</span> ホーム&amp;キッチン</li></ul></div><div class="hatena-asin-detail-foot"></div></div></p>

<p>なにかの折に友人が「電動歯ブラシ使ってるよー」という話をしていて、ふと調べてみたら、ソニッケアーが<b>スマホアプリと連動してる</b>…！</p>

<p>というネタ半分で買いました。</p>

<p>結果的に（スマホアプリも面白かったですが）（普通に）買ってよかったなと思ったものランクインです。振動で磨き時間をコントロールしてくれたりして、キレイに磨けて、磨き時間は短縮されました。</p>

<h4>マッサージクッション</h4>

<p><div class="hatena-asin-detail"><a href="https://www.amazon.co.jp/exec/obidos/ASIN/B07F6GFYW7/tmd45-22/"><img src="https://m.media-amazon.com/images/I/51D2lIOIXUL.jpg" class="hatena-asin-detail-image" alt="アテックス ルルド マッサージクッションダブルもみスリム ブラウン AX-HCL258br" title="アテックス ルルド マッサージクッションダブルもみスリム ブラウン AX-HCL258br"></a><div class="hatena-asin-detail-info"><p class="hatena-asin-detail-title"><a href="https://www.amazon.co.jp/exec/obidos/ASIN/B07F6GFYW7/tmd45-22/">アテックス ルルド マッサージクッションダブルもみスリム ブラウン AX-HCL258br</a></p><ul><li><span class="hatena-asin-detail-label">メディア:</span> ホーム&amp;キッチン</li></ul></div><div class="hatena-asin-detail-foot"></div></div></p>

<p>しゃれおつなファブリックでお部屋に置いてもおっさんな雰囲気漂わないマッサージクッションで有名なルルドのやつです。</p>

<p>古い型のものがお釈迦になったので買いました。</p>

<p>モミ玉が 2 → 4 つに増えてごりごりマッサージしてくれます。小型化されたので普段座ってる椅子でも無理なく使えるようにもなりました。</p>

<p>オフィスにいたときより、休憩時に身体を動かさなくなったので、これでほぐしてます。</p>

<h4>コーヒー淹れる系</h4>

<p><div class="hatena-asin-detail"><a href="https://www.amazon.co.jp/exec/obidos/ASIN/B08MCWL3FR/tmd45-22/"><img src="https://m.media-amazon.com/images/I/31dJHzr1T8L.jpg" class="hatena-asin-detail-image" alt="BRUNO 電動ミルコーヒーメーカー BOE080 [ カーキ ]" title="BRUNO 電動ミルコーヒーメーカー BOE080 [ カーキ ]"></a><div class="hatena-asin-detail-info"><p class="hatena-asin-detail-title"><a href="https://www.amazon.co.jp/exec/obidos/ASIN/B08MCWL3FR/tmd45-22/">BRUNO 電動ミルコーヒーメーカー BOE080 [ カーキ ]</a></p><ul><li><span class="hatena-asin-detail-label">メディア:</span></li></ul></div><div class="hatena-asin-detail-foot"></div></div></p>

<p><div class="hatena-asin-detail"><a href="https://www.amazon.co.jp/exec/obidos/ASIN/B07KQWGXRZ/tmd45-22/"><img src="https://m.media-amazon.com/images/I/41AZXvUqcFL.jpg" class="hatena-asin-detail-image" alt="Kslong コーヒーポットコーヒー ケトルステンレス 細口ハンドパンチポットドリップih対応長い口ポット ファイン口ポット グースネックポット (ブラック, 350ml)" title="Kslong コーヒーポットコーヒー ケトルステンレス 細口ハンドパンチポットドリップih対応長い口ポット ファイン口ポット グースネックポット (ブラック, 350ml)"></a><div class="hatena-asin-detail-info"><p class="hatena-asin-detail-title"><a href="https://www.amazon.co.jp/exec/obidos/ASIN/B07KQWGXRZ/tmd45-22/">Kslong コーヒーポットコーヒー ケトルステンレス 細口ハンドパンチポットドリップih対応長い口ポット ファイン口ポット グースネックポット (ブラック, 350ml)</a></p><ul><li><span class="hatena-asin-detail-label">メディア:</span> ホーム&amp;キッチン</li></ul></div><div class="hatena-asin-detail-foot"></div></div></p>

<p>これまで会社ではインスタントで済ませていたコーヒーですが、自宅にいるようになって <a href="https://postcoffee.co/">PostCoffee®</a> のサブスクリプションなんかも始めました。</p>

<p>だんだん慣れてきたので、最近コーヒーバッグから豆に切り替えて、自分で挽いて淹れるようになりまして。そのために買ったのがこの２つです（計量スプーンとかミル掃除用のブラシとかも買いました）。</p>

<p>朝のおいしいコーヒーで目を覚ましてから仕事にとりかかるのが最近のルーチンです ☕</p>

<h4>スマートリモコン Nature Remo 3</h4>

<p><div class="hatena-asin-detail"><a href="https://www.amazon.co.jp/exec/obidos/ASIN/B08BLSLWH4/tmd45-22/"><img src="https://m.media-amazon.com/images/I/31dTYbumS2L.jpg" class="hatena-asin-detail-image" alt="Nature スマートリモコン Nature Remo 3 ネイチャーリモ Remo-1W3 Alexa/Google Home/Siri対応" title="Nature スマートリモコン Nature Remo 3 ネイチャーリモ Remo-1W3 Alexa/Google Home/Siri対応"></a><div class="hatena-asin-detail-info"><p class="hatena-asin-detail-title"><a href="https://www.amazon.co.jp/exec/obidos/ASIN/B08BLSLWH4/tmd45-22/">Nature スマートリモコン Nature Remo 3 ネイチャーリモ Remo-1W3 Alexa/Google Home/Siri対応</a></p><ul><li><span class="hatena-asin-detail-label">メディア:</span> Tools &amp; Hardware</li></ul></div><div class="hatena-asin-detail-foot"></div></div></p>

<p>先日 AWS 関連の障害に巻き込まれていた Nature Remo ですが、その障害きっかけで新しい 3 が出たことを知りました。</p>

<p>ずっと mini とか買おうか迷ってたんですが、3 でセンサー類が増えたりしたみたいなので、これも面白そうだと思って勢いで買いました。</p>

<p>いまは "寝る前に部屋の電気とエアコンを消して、Relax Melodies アプリを起動する" みたいなショートカットを活用してます。部屋から出ないのと、猫がいるので人感センサーは扱いようが難しいです。</p>

<p>旧来のリモコンでもまったく困ってなかったですが、同僚曰く「こういうのはロマンですから」とのことで、私もそう思います。</p>

<h3>おわり</h3>

<p>さてさて、雑多にご紹介しましたが、なにかピンとくるものがあったりしたでしょうか。自宅にいる時間が伸びたからこそ、生活を豊かにできるものを揃えて楽しく過ごしたいですね。</p>

<p>ちなみにこの記事を書くために Amazon の購入履歴をみたら 2020 年の注文件数が 259 件もあって腰抜かしました。よく見たら Kindle で漫画を買うようになったからでしたね。やー、びっくりびっくり（棒読み）</p>

<p>明日はアジャイルお兄さん pokotyamu がきっとエモい話をしてくれると思います。</p>

<p>では、皆様良いお年を。</p>
]]></description>
            <enclosure url="https://cdn-ak.f.st-hatena.com/images/fotolife/t/tmd45/20201215/20201215133418.png" length="0" type="image/png"/>
        </item>
        <item>
            <title><![CDATA[私の好きなプログラミング動画 10 選]]></title>
            <link>https://developer.feedforce.jp/entry/2020/12/13/003657</link>
            <guid>https://developer.feedforce.jp/entry/2020/12/13/003657</guid>
            <pubDate>Sat, 12 Dec 2020 15:36:57 GMT</pubDate>
            <description><![CDATA[<p>こんにちは。<a href="http://blog.hatena.ne.jp/daido1976/" class="hatena-id-icon"><img src="https://cdn.profile-image.st-hatena.com/users/daido1976/profile.png" width="16" height="16" alt="" class="hatena-id-icon">id:daido1976</a> です。</p>

<p>この記事は <a href="https://adventar.org/calendars/5560">Feedforce Advent Calendar 2020</a> の 12 日目の記事です！</p>

<p>昨日は <a href="https://twitter.com/sukechannnn">@sukechannnn</a> の <a href="https://developer.feedforce.jp/entry/2020/12/11/172338">モブプロしてたらチームが大きく成長した話</a> でした。社内の技術勉強会でも発表してくれたのですが、みんなの関心が高い話題だったので発表後の議論が大変盛り上がっていました！</p>

<hr />

<p>ちなみにこの記事は <a href="https://zenn.dev/magurotuna/articles/d5621291b8da87">YouTubeにあるライブコーディング動画を見て Rust を学ぼう</a> という記事にインスパイアされて書いています。</p>

<ul class="table-of-contents">
    <li><a href="#はじめに">はじめに</a></li>
    <li><a href="#好きな動画-10-選">好きな動画 10 選</a><ul>
            <li><a href="#George-Hotz-のライブコーディング">George Hotz のライブコーディング</a></li>
            <li><a href="#低レイヤーガール">低レイヤーガール</a></li>
            <li><a href="#High-Engineer">High Engineer</a></li>
            <li><a href="#mayah-氏の実践コーディング面接">mayah 氏の「実践！コーディング面接」</a></li>
            <li><a href="#メルカリ社の開発ライブ実況">メルカリ社の開発ライブ実況</a></li>
            <li><a href="#The-Coding-Train-のソートアルゴリズム解説">The Coding Train のソートアルゴリズム解説</a></li>
            <li><a href="#AWS-Black-Belt-Online-Seminar">AWS Black Belt Online Seminar</a></li>
            <li><a href="#Authlete-社による-OAuth--OIDC-入門">Authlete 社による OAuth &amp; OIDC 入門</a></li>
            <li><a href="#予備校のノリで学ぶ大学の数学物理">予備校のノリで学ぶ「大学の数学・物理」</a></li>
            <li><a href="#t-kihira-氏のテトリスを1時間強で作ってみた">t-kihira 氏の「テトリスを1時間強で作ってみた」</a></li>
        </ul>
    </li>
    <li><a href="#最後に">最後に</a></li>
</ul>

<h2 id="はじめに">はじめに</h2>

<p>私はプログラミングに関する動画を見るのがとても好きです。</p>

<p>集中できる時は手を動かしたり本を読んだりした方が学習効率は良いと思うのですが、動画はご飯食べながら、お酒を飲みながら見られるのがとても良いですね。</p>

<p>また、新しい技術を触る時などは手を動かす・本を読む前に動画でさらっと概要を掴んでから始めると、立ち上がりがスムーズになる気がします。</p>

<h2 id="好きな動画-10-選">好きな動画 10 選</h2>

<h3 id="George-Hotz-のライブコーディング">George Hotz のライブコーディング</h3>

<iframe width="560" height="315" src="https://www.youtube.com/embed/7Hlb8YX2-W8" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>


<ul>
<li>Comma.ai のハッカー <a href="https://ja.wikipedia.org/wiki/%E3%82%B8%E3%83%A7%E3%83%BC%E3%82%B8%E3%83%BB%E3%83%9B%E3%83%83%E3%83%84">George Hotz</a> のライブコーディング動画</li>
<li>Vim でプラグインほぼ使わずに print デバッグしながら書き殴る、それでも並の人を凌駕するコーディングの速さ</li>
<li>ハマりまくるけど全部力技でガンガン解決していくのが見ていて気持ちいい、そして公式ドキュメントより Stack Overflow ガンガン見るのが意外でした</li>
<li>動画が 10 時間もあってその間ずっとコーディングしてるのがすごすぎます…！</li>
</ul>


<h3 id="低レイヤーガール">低レイヤーガール</h3>

<p><iframe src="https://hatenablog-parts.com/embed?url=https%3A%2F%2Fwww.youtube.com%2Fchannel%2FUCMsstGhINXdpMqo9tsElCMQ" title="低レイヤーガール - YouTube" class="embed-card embed-webcard" scrolling="no" frameborder="0" style="display: block; width: 100%; height: 155px; max-width: 500px; margin: 10px 0px;"></iframe><cite class="hatena-citation"><a href="https://www.youtube.com/channel/UCMsstGhINXdpMqo9tsElCMQ">www.youtube.com</a></cite></p>

<iframe width="560" height="315" src="https://www.youtube.com/embed/ZATzfSF3O58" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>


<ul>
<li><a href="https://twitter.com/d0iasm">@d0iasm</a> 氏、<a href="https://twitter.com/hikalium">@hikalium</a> 氏、<a href="https://twitter.com/saho_bofffff">@saho_bofffff</a> 氏によるライブコーディング &amp; 雑談動画</li>
<li>ゆるふわな語り口でコーディングを進めていますが、内容はゴリゴリの低レイヤープログラミング</li>
<li>少しでも気を抜けば置いてかれてしまうのでいつも正座して見ています</li>
</ul>


<h3 id="High-Engineer">High Engineer</h3>

<p><iframe src="https://hatenablog-parts.com/embed?url=https%3A%2F%2Fwww.youtube.com%2Fchannel%2FUCEM9ImNGpMRsG3MDhctxVtQ" title="High Engineer - YouTube" class="embed-card embed-webcard" scrolling="no" frameborder="0" style="display: block; width: 100%; height: 155px; max-width: 500px; margin: 10px 0px;"></iframe><cite class="hatena-citation"><a href="https://www.youtube.com/channel/UCEM9ImNGpMRsG3MDhctxVtQ">www.youtube.com</a></cite></p>

<iframe width="560" height="315" src="https://www.youtube.com/embed/fN7ic3uydaU" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>


<ul>
<li><a href="https://twitter.com/dowanna6">@dowanna6</a> 氏による Web エンジニア経験 2 年目未満の方に向けた各技術の解説動画</li>
<li>「Cookie」や「CORS」など Web プログラミングを行う上で必須となる知識を解説しています</li>
<li>既知の内容もありますが、基本的な概念を他の人にわかりやすく伝えるにはどうすれば良いか？の参考にしたくて見ています</li>
</ul>


<h3 id="mayah-氏の実践コーディング面接">mayah 氏の「実践！コーディング面接」</h3>

<iframe width="560" height="315" src="https://www.youtube.com/embed/_zfzjnMCmKU" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>


<ul>
<li><a href="https://twitter.com/mayahjp">@mayahjp</a> 氏によるコーディング面接の実践動画</li>
<li>mayah 氏のヒントの出し方と追加質問がとてもリアルで参考になります</li>
<li>今はまだ一つしか実践動画がアップされてないので、今後の更新をとても楽しみにしているチャンネルの一つです</li>
</ul>


<h3 id="メルカリ社の開発ライブ実況">メルカリ社の開発ライブ実況</h3>

<iframe width="560" height="315" src="https://www.youtube.com/embed/cWvAhmfZJZg" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>


<ul>
<li>お題は「Go で Todo アプリ用の API を作ってみましょう」と、大変シンプル</li>
<li>カスタマイズしまくりの Vim で高速コーディングする人、Dockerfile から書き始める人、gqlgen 使って GraphQL API を作り始める人、Go Playground で書き始める人など様々で楽しいです</li>
<li>他の実況動画は <a href="https://www.youtube.com/playlist?list=PL5y9uEm8_ypV4pQypp7IGN3b-mq2bf65Z">こちら</a> から見られます</li>
</ul>


<h3 id="The-Coding-Train-のソートアルゴリズム解説">The Coding Train のソートアルゴリズム解説</h3>

<iframe width="560" height="315" src="https://www.youtube.com/embed/67k3I2GxTH8" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>




<iframe width="560" height="315" src="https://www.youtube.com/embed/eqo2LxRADhU" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>


<ul>
<li>テンション高めにソートアルゴリズムを解説してくれる動画（他にも色んな種類の解説動画があります）</li>
<li>上記の動画ではバブルソート、クイックソートのアルゴリズムを概要〜実際の実装に至るまで大変わかりやすく解説してくれています</li>
<li>丁寧に図を描いて説明してくれるので英語がわからなくても雰囲気で理解できると思います</li>
</ul>


<h3 id="AWS-Black-Belt-Online-Seminar">AWS Black Belt Online Seminar</h3>

<iframe width="560" height="315" src="https://www.youtube.com/embed/mmRKzzOvJJY" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>


<ul>
<li>AWS のサービス別の説明動画（上記は CloudFront の例）</li>
<li>AWS はドキュメントも充実していますが、動画も併用するとさらに理解度が深まります</li>
<li>ちなみにサービスと動画の一覧は <a href="https://aws.amazon.com/jp/aws-jp-introduction/aws-jp-webinar-service-cut/">AWS サービス別資料</a> から探すと良いです</li>
</ul>


<h3 id="Authlete-社による-OAuth--OIDC-入門">Authlete 社による OAuth &amp; OIDC 入門</h3>

<iframe width="560" height="315" src="https://www.youtube.com/embed/PKPj_MmLq5E" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>


<ul>
<li>今まで見た中で一番わかりやすい OAuth &amp; OIDC（OpenID Connect）の解説動画です</li>
<li>OAuth を学ぶにはこの動画を見た後に <a href="https://www.amazon.co.jp/dp/4798159298">OAuth 徹底入門</a> の 3 章を参考に OAuth クライアントを自分で実装してみるのが一番手っ取り早いと思っています</li>
</ul>


<h3 id="予備校のノリで学ぶ大学の数学物理">予備校のノリで学ぶ「大学の数学・物理」</h3>

<iframe width="560" height="315" src="https://www.youtube.com/embed/4p1rwfXbCoY" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>


<ul>
<li>数学が苦手なのにプログラマをやっているのがずっとコンプレックスで、少しずつ学習を始めています</li>
<li>高校数学で挫折した自分にもこの動画はものすごく分かりやすくて感動しました…！</li>
</ul>


<h3 id="t-kihira-氏のテトリスを1時間強で作ってみた">t-kihira 氏の「テトリスを1時間強で作ってみた」</h3>

<script type="application/javascript" src="https://embed.nicovideo.jp/watch/sm8517855/script?w=640&h=360"></script>


<p><noscript><a href="https://www.nicovideo.jp/watch/sm8517855">【プログラミング】テトリスを1時間強で作ってみた【実況解説】</a></noscript></p>

<ul>
<li>10 年前の動画ですがライブコーディング系の動画の中ではこれが一番好きです</li>
<li>Windows プログラミングも C++ も全然わからないんですが、そんなの関係ないぐらいテンションの上がる動画です。多分今まで 20 回ぐらい見ています</li>
<li>エディタのインストールから始めるところやペイントでテトリスのブロックを自作する辺り、最高にプログラマだなって感じがします</li>
</ul>


<h2 id="最後に">最後に</h2>

<p>途中から「これはプログラミング動画なのか？」というものも含まれていますが、お気に入りなので外せませんでした。ご容赦ください。</p>

<p>会社の技術ブログなのを忘れて好き勝手に書いてしまいましたが、この記事を読んでくださった方にとってお気に入りの動画が見つかれば幸いです。</p>

<p>最後までお読みいただきありがとうございました＾＾</p>

<hr />

<p>次回は去年のアドベントカレンダーで <a href="https://note.com/nekonishi_m/n/n91df51dce2e4">新卒でベンチャーに行くのは「もったいない」のか</a> という名文を書いてくれた <a href="https://twitter.com/nekonishi_m">ねこにしさん</a> の出番です。お楽しみに！</p>
]]></description>
            <enclosure url="https://cdn.user.blog.st-hatena.com/default_entry_og_image/4268819/1588226000876991" length="0" type="image//default_entry_og_image/4268819/1588226000876991"/>
        </item>
        <item>
            <title><![CDATA[Shopify 埋め込みアプリのフォームを @shopify/react-form で作る]]></title>
            <link>https://developer.feedforce.jp/entry/2020/12/08/120000</link>
            <guid>https://developer.feedforce.jp/entry/2020/12/08/120000</guid>
            <pubDate>Tue, 08 Dec 2020 03:00:00 GMT</pubDate>
            <description><![CDATA[<p>こんにちは、<a href="http://blog.hatena.ne.jp/mashabow/" class="hatena-id-icon"><img src="https://cdn.profile-image.st-hatena.com/users/mashabow/profile.png" width="16" height="16" alt="" class="hatena-id-icon">id:mashabow</a> です。この記事は、<a href="https://qiita.com/advent-calendar/2020/shopify-liquid">Shopify開発を盛り上げる Advent Calendar 2020</a> の 8 日目にあたります。昨日は minozo さんの「<a href="https://qiita.com/minozo/items/8abd224a319bd373c83b">ShopifyでARを実装する方法(2020/12版)</a>」でした。</p>

<p>現在弊社では、<a href="https://socialplus.jp/lp/shopify_line">ソーシャルPLUS の Shopify アプリ版</a>を開発しており、わたしは<a href="https://shopify.dev/tutorials/build-a-shopify-app-with-node-and-react?locale=ja">埋め込みアプリ</a>（Embedded App）のフロントエンド担当です。わかりやすく言えば、マーチャントの方に触っていただく設定画面を作っているわけです。</p>

<p><span itemscope itemtype="http://schema.org/Photograph"><img src="https://cdn-ak.f.st-hatena.com/images/fotolife/m/mashabow/20201207/20201207160849.png" alt="f:id:mashabow:20201207160849p:plain" title="" class="hatena-fotolife" itemprop="image"></span></p>

<p>そんな設定画面に必要不可欠で、かつ意外と厄介なのがフォームの実装です。今回は、フォームの状態管理に <a href="https://www.npmjs.com/package/@shopify/react-form">@shopify/react-form</a> というライブラリを使ってみました。この記事では、その @shopify/react-form の使い方を紹介したいと思います。</p>

<h2>フォーム管理ライブラリを選ぶ</h2>

<p>前提として、フレームワークには React（Next.js）を、コンポーネントライブラリは Shopify 本家の <a href="https://polaris.shopify.com/components/get-started">Polaris</a> を使用しています。Polaris はあくまでもコンポーネントライブラリなので、フォームの状態を管理するための機能は入っていません。<code>useState</code> を使うなり、他のフォーム管理ライブラリを使うなりして、自分でよしなに管理する必要があります。</p>

<p>実は、最初は軽量・高速な <a href="https://react-hook-form.com/jp/">React Hook Form</a> を使おうかとぼんやり考えていました。しかしよくよく見てみると、Polaris のコンポーネントは React Hook Form に必要な <code>ref</code> を受け取ることができません。<a href="https://ja.reactjs.org/docs/forms.html#controlled-components">Controlled components</a> として作られていますしね。一応、React Hook Form の <a href="https://react-hook-form.com/jp/get-started#IntegratingControlledInputs"><code>Controller</code></a> でラップして使う手があるようですが、それも手間がかかりそうです。</p>

<p>とりあえず他の人のやり方を参考にしようか……と検索してみたところ、どこかで <a href="https://www.npmjs.com/package/@shopify/react-form">@shopify/react-form</a> というライブラリを見つけました<sup id="fnref:1"><a href="#fn:1" rel="footnote">1</a></sup>。</p>

<p><iframe src="https://hatenablog-parts.com/embed?url=https%3A%2F%2Fwww.npmjs.com%2Fpackage%2F%40shopify%2Freact-form" title="@shopify/react-form" class="embed-card embed-webcard" scrolling="no" frameborder="0" style="display: block; width: 100%; height: 155px; max-width: 500px; margin: 10px 0px;"></iframe><cite class="hatena-citation"><a href="https://www.npmjs.com/package/@shopify/react-form">www.npmjs.com</a></cite></p>

<p>README を読むと</p>

<blockquote><p>The hooks provided here also work swimmingly with @shopify/polaris.</p></blockquote>

<p>との言葉があり、期待が持てそうです。<a href="https://www.google.com/search?&amp;q=+site%3Ashopify.com+%22%40shopify%2Freact-form%22">Shopify 公式サイトからの言及が皆無</a>なのが謎で若干不安になりますが、Shopify 公式のパッケージです。なお、この記事の執筆時点では <a href="https://github.com/Shopify/quilt/blob/%40shopify/react-form%400.9.0/packages/react-form/CHANGELOG.md">v0.9.0</a> が最新です。</p>

<h2>@shopify/react-form でフォームを定義する</h2>

<p>前置きが長くなりましたが、実際に使ってみましょう。使い方としては、<a href="https://formik.org/">Formik</a> に似ています。詳しいところは <a href="https://github.com/Shopify/quilt/blob/%40shopify/react-form%400.9.0/packages/react-form/README.md">README</a> に譲るとして、まずは単純な例を用意しました。</p>

<iframe src="https://codesandbox.io/embed/shopifyreact-form-1-d8nss?expanddevtools=1&fontsize=12&hidenavigation=1&module=%2Fsrc%2FMyForm.tsx&theme=dark"
     style="width:100%; height:600px; border:0; border-radius: 4px; overflow:hidden;"
     title="@shopify/react-form 1"
     allow="accelerometer; ambient-light-sensor; camera; encrypted-media; geolocation; gyroscope; hid; microphone; midi; payment; usb; vr; xr-spatial-tracking"
     sandbox="allow-forms allow-modals allow-popups allow-presentation allow-same-origin allow-scripts"
   ></iframe>


<p>最初に、<a href="https://github.com/Shopify/quilt/blob/%40shopify/react-form%400.9.0/packages/react-form/README.md#useform"><code>useForm</code></a> でフォームの定義をします。その中では、<a href="https://github.com/Shopify/quilt/blob/%40shopify/react-form%400.9.0/packages/react-form/README.md#usefield"><code>useField</code></a> を使って各フィールドの定義をしています。<code>fields</code>  のキー（下の例では <code>name</code> にしました）が、フィールドの識別子になります。</p>

<pre class="code lang-typescript" data-lang="typescript" data-unlink>  <span class="synStatement">const</span> <span class="synIdentifier">{</span> fields<span class="synStatement">,</span> submit <span class="synIdentifier">}</span> <span class="synStatement">=</span> useForm<span class="synStatement">(</span><span class="synIdentifier">{</span>
    fields: <span class="synIdentifier">{</span>
      <span class="synComment">// 「名前」フィールドの定義</span>
      name: useField<span class="synStatement">(</span><span class="synIdentifier">{</span>
        value: <span class="synConstant">&quot;Shopify大好きパーソン&quot;</span><span class="synStatement">,</span> <span class="synComment">// 初期値</span>
        validates: <span class="synIdentifier">[</span>
          notEmpty<span class="synStatement">(</span><span class="synConstant">&quot;必須項目です&quot;</span><span class="synStatement">),</span>
          lengthMoreThan<span class="synStatement">(</span><span class="synConstant">2</span><span class="synStatement">,</span> <span class="synConstant">&quot;3文字以上で入力してください&quot;</span><span class="synStatement">)</span>
        <span class="synIdentifier">]</span>
      <span class="synIdentifier">}</span><span class="synStatement">),</span>
      ...
    <span class="synIdentifier">}</span><span class="synStatement">,</span>
    <span class="synSpecial">onSubmit</span>: ...
  <span class="synIdentifier">}</span><span class="synStatement">);</span>
</pre>


<p><code>useField</code> の引数の <code>value</code> は初期値です。実際には空 <code>""</code> だったり、前回保存した値をバックエンド API から取ってきて入れたりすることが多いでしょう。<code>validates</code> には、バリデーションに使う関数を指定します。上の例では @shopify/react-form に<a href="https://github.com/Shopify/quilt/blob/%40shopify/react-form%400.9.0/packages/react-form/src/validation/validators.ts">組み込まれているバリデーション関数</a>を使っていますが、種類はそれほど多くはありません。自作することもできます。</p>

<p><code>useForm</code> の <code>onSubmit</code> には submit 時の処理を書きますが、これは次節で説明します。</p>

<p>さて、これでフォームの定義ができました。<code>useForm</code> の戻り値の <code>fields</code> に、各フィールドの状態やハンドラが入っているので、今度はこれを Polaris のコンポーネントに結びつけます。上の例では <code>name</code> という識別子のフィールドを定義したので、<code>fields.name</code> を spread して</p>

<pre class="code lang-typescript" data-lang="typescript" data-unlink>        <span class="synStatement">&lt;</span>TextField label<span class="synStatement">=</span><span class="synConstant">&quot;名前&quot;</span> <span class="synIdentifier">{</span>...fields.name<span class="synIdentifier">}</span> /<span class="synStatement">&gt;</span>
</pre>


<p>と渡してやるだけで  <a href="https://polaris.shopify.com/components/forms/text-field"><code>TextField</code></a> コンポーネントが動作します。@shopify/react-form が、Polaris のインターフェイスに合わせて作られているおかげですね。べんり！</p>

<p>また、先ほどバリデーション関数を指定したので、バリデーションもちゃんと動きます。</p>

<p><span itemscope itemtype="http://schema.org/Photograph"><img src="https://cdn-ak.f.st-hatena.com/images/fotolife/m/mashabow/20201207/20201207104404.gif" alt="f:id:mashabow:20201207104404g:plain" title="" class="hatena-fotolife" itemprop="image"></span></p>

<p>blur 時にバリデーションが実行され、エラーが表示されているのがわかります。</p>

<h2>submit 処理を実装する</h2>

<p>フォームが一通りできたら、submit 時の処理を実装しましょう。<code>useFleid</code> の引数の <code>onSubmit</code> に、async で処理内容を書きます。各フィールドの値は、引数 <code>fieldValues</code> として  <code>onSubmit</code> に渡されます。</p>

<p>以下に例を示します。実際のアプリでは、<code>onSubmit</code> の中で <code>fieldValues</code> をバックエンドに送信するケースがほとんどかと思いますが、今回はサンプルなので、「送信して結果が返ってきたつもり」の処理を入れています。</p>

<pre class="code lang-typescript" data-lang="typescript" data-unlink>  <span class="synStatement">const</span> <span class="synIdentifier">{</span> fields<span class="synStatement">,</span> submit <span class="synIdentifier">}</span> <span class="synStatement">=</span> useForm<span class="synStatement">(</span><span class="synIdentifier">{</span>
    fields: <span class="synIdentifier">{</span>
      name: useField<span class="synStatement">(</span><span class="synIdentifier">{</span> ... <span class="synIdentifier">}</span><span class="synStatement">),</span>
      age: useField<span class="synStatement">(</span><span class="synIdentifier">{</span> ... <span class="synIdentifier">}</span><span class="synStatement">),</span>
      christmas: useField<span class="synStatement">(</span><span class="synIdentifier">{</span> ... <span class="synIdentifier">}</span><span class="synStatement">),</span>
    <span class="synIdentifier">}</span><span class="synStatement">,</span>
    <span class="synSpecial">onSubmit</span>: <span class="synStatement">async</span> <span class="synStatement">(</span>fieldValues<span class="synStatement">)</span> <span class="synStatement">=&gt;</span> <span class="synIdentifier">{</span>
      console.log<span class="synStatement">(</span>fieldValues<span class="synStatement">);</span>
      <span class="synComment">// =&gt; { name: &quot;...&quot;, age: &quot;...&quot;, christmas: &quot;...&quot; }</span>

      <span class="synComment">// 実際のアプリではバックエンドに送信するが、</span>
      <span class="synComment">// const result = await submitToBackend(fieldValues);</span>
      <span class="synComment">// 今回はサンプルなので、適当な待ち時間を挟んでここで結果を返す</span>
      <span class="synStatement">await</span> <span class="synStatement">new</span> Promise<span class="synStatement">((</span>resolve<span class="synStatement">)</span> <span class="synStatement">=&gt;</span> setTimeout<span class="synStatement">(</span>resolve<span class="synStatement">,</span> <span class="synConstant">1000</span><span class="synStatement">));</span>
      <span class="synStatement">return</span> <span class="synIdentifier">{</span> <span class="synStatement">status</span>: <span class="synConstant">&quot;success&quot;</span> <span class="synIdentifier">}</span><span class="synStatement">;</span>
    <span class="synIdentifier">}</span>
  <span class="synIdentifier">}</span><span class="synStatement">);</span>
</pre>


<p><code>onSubmit</code> 関数の戻り値によって、submit が成功したか失敗したかを表現します。成功の場合は <code>{ status: "success" }</code> を返すきまりになっています。失敗した場合は、<code>{ status: "fail", errors: [...] }</code> という形式ですが、こちらについては次の節で説明します。</p>

<p><code>useForm</code> の戻り値に、submit を実行する <code>submit</code> 関数が入っているので、<code>Form</code> コンポーネントの  <code>onSubmit</code> prop に渡します。これで、[保存] ボタンをクリックしたときに、先ほど実装した <code>onSubmit</code> 関数の処理が実行されるようになりました<sup id="fnref:2"><a href="#fn:2" rel="footnote">2</a></sup>。</p>

<pre class="code lang-typescript" data-lang="typescript" data-unlink>    <span class="synStatement">&lt;</span><span class="synConstant">Form</span> <span class="synSpecial">onSubmit</span><span class="synStatement">=</span><span class="synIdentifier">{</span>submit<span class="synIdentifier">}</span><span class="synStatement">&gt;</span>
      <span class="synStatement">&lt;</span>FormLayout<span class="synStatement">&gt;</span>
        <span class="synStatement">&lt;</span>TextField label<span class="synStatement">=</span><span class="synConstant">&quot;名前&quot;</span> <span class="synIdentifier">{</span>...fields.name<span class="synIdentifier">}</span> /<span class="synStatement">&gt;</span>
        <span class="synStatement">&lt;</span>TextField label<span class="synStatement">=</span><span class="synConstant">&quot;年齢&quot;</span> <span class="synStatement">type=</span><span class="synConstant">&quot;number&quot;</span> <span class="synIdentifier">{</span>...fields.age<span class="synIdentifier">}</span> /<span class="synStatement">&gt;</span>
        <span class="synStatement">&lt;</span><span class="synConstant">Select</span>
          label<span class="synStatement">=</span><span class="synConstant">&quot;クリスマスといえば？&quot;</span>
          options<span class="synStatement">=</span><span class="synIdentifier">{</span>christmasOptions<span class="synIdentifier">}</span>
          <span class="synIdentifier">{</span>...fields.christmas<span class="synIdentifier">}</span>
        /<span class="synStatement">&gt;</span>
        <span class="synStatement">&lt;</span><span class="synConstant">Button</span> submit primary<span class="synStatement">&gt;</span>保存<span class="synStatement">&lt;</span>/<span class="synConstant">Button</span><span class="synStatement">&gt;</span>
      <span class="synStatement">&lt;</span>/FormLayout<span class="synStatement">&gt;</span>
    <span class="synStatement">&lt;</span>/<span class="synConstant">Form</span><span class="synStatement">&gt;</span>
</pre>


<p>さらに使いやすくするために、</p>

<ul>
<li>submit 処理中は、[保存] ボタンを loading 状態にする</li>
<li>どのフィールドも変更されていなれば、[保存] ボタンを disabled にする</li>
</ul>


<p>という制御を追加しましょう。<code>useForm</code> から <code>submitting</code>,  <code>dirty</code> という boolean 値が返ってくるので、それを使えば簡単に実装できます。</p>

<pre class="code lang-typescript" data-lang="typescript" data-unlink>  <span class="synStatement">const</span> <span class="synIdentifier">{</span> fields<span class="synStatement">,</span> submit<span class="synStatement">,</span> submitting<span class="synStatement">,</span> dirty <span class="synIdentifier">}</span> <span class="synStatement">=</span> useForm<span class="synStatement">(</span><span class="synIdentifier">{</span> ... <span class="synIdentifier">}</span><span class="synStatement">);</span>
</pre>




<pre class="code lang-typescript" data-lang="typescript" data-unlink>        <span class="synStatement">&lt;</span><span class="synConstant">Button</span> submit primary loading<span class="synStatement">=</span><span class="synIdentifier">{</span>submitting<span class="synIdentifier">}</span> disabled<span class="synStatement">=</span><span class="synIdentifier">{</span>!dirty<span class="synIdentifier">}</span><span class="synStatement">&gt;</span>
          保存
        <span class="synStatement">&lt;</span>/<span class="synConstant">Button</span><span class="synStatement">&gt;</span>
</pre>


<p><span itemscope itemtype="http://schema.org/Photograph"><img src="https://cdn-ak.f.st-hatena.com/images/fotolife/m/mashabow/20201207/20201207104838.gif" alt="f:id:mashabow:20201207104838g:plain" title="" class="hatena-fotolife" itemprop="image"></span></p>

<h2>submit に失敗した場合</h2>

<p>実際のアプリでは、submit してもバックエンド側のバリデーションに弾かれたり、そもそもバックエンドが落ちていたりと、失敗するケースがいろいろあります。失敗時の処理はどうすればいいでしょうか？</p>

<p>上で少し触れましたが、失敗した場合は <a href="https://github.com/Shopify/quilt/blob/%40shopify/react-form%400.9.0/packages/react-form/src/types.ts#L77-L89"><code>{ status: "fail", errors: [...] }</code> という形式</a>でエラーの内容を返すようにします。以下にサンプルを挙げました。「名前が  <code>"Shopify大嫌いパーソン"</code> だったらエラーを返す」ようなバックエンドを想像してみてください。</p>

<pre class="code lang-typescript" data-lang="typescript" data-unlink>  <span class="synStatement">const</span> <span class="synIdentifier">{</span> fields<span class="synStatement">,</span> submit<span class="synStatement">,</span> submitErrors<span class="synStatement">,</span> submitting<span class="synStatement">,</span> dirty <span class="synIdentifier">}</span> <span class="synStatement">=</span> useForm<span class="synStatement">(</span><span class="synIdentifier">{</span>
    fields: <span class="synIdentifier">{</span>
      name: useField<span class="synStatement">(</span><span class="synIdentifier">{</span> ... <span class="synIdentifier">}</span><span class="synStatement">),</span>
      age: useField<span class="synStatement">(</span><span class="synIdentifier">{</span> ... <span class="synIdentifier">}</span><span class="synStatement">),</span>
      christmas: useField<span class="synStatement">(</span><span class="synIdentifier">{</span> ... <span class="synIdentifier">}</span><span class="synStatement">),</span>
    <span class="synIdentifier">}</span><span class="synStatement">,</span>
    <span class="synSpecial">onSubmit</span>: <span class="synStatement">async</span> <span class="synStatement">(</span>fieldValues<span class="synStatement">)</span> <span class="synStatement">=&gt;</span> <span class="synIdentifier">{</span>
      <span class="synComment">// 今回はサンプルなので、適当な待ち時間を挟んでここで結果を返す</span>
      <span class="synStatement">await</span> <span class="synStatement">new</span> Promise<span class="synStatement">((</span>resolve<span class="synStatement">)</span> <span class="synStatement">=&gt;</span> setTimeout<span class="synStatement">(</span>resolve<span class="synStatement">,</span> <span class="synConstant">1000</span><span class="synStatement">));</span>
      <span class="synStatement">const</span> result <span class="synStatement">=</span>
        fieldValues.name <span class="synStatement">===</span> <span class="synConstant">&quot;Shopify大嫌いパーソン&quot;</span>
          ? <span class="synComment">// submit 失敗の例</span>
            <span class="synIdentifier">{</span>
              <span class="synStatement">status</span>: <span class="synConstant">&quot;fail&quot;</span> <span class="synStatement">as</span> <span class="synStatement">const,</span>
              errors: <span class="synIdentifier">[</span>
                <span class="synComment">// 特定のフィールドにひもづかないエラー</span>
                <span class="synIdentifier">{</span> message: <span class="synConstant">&quot;なんか失敗しました&quot;</span> <span class="synIdentifier">}</span><span class="synStatement">,</span>
                <span class="synComment">// 特定のフィールドにひもづくエラー</span>
                <span class="synIdentifier">{</span> message: <span class="synConstant">&quot;この名前は使えません&quot;</span><span class="synStatement">,</span> field: <span class="synIdentifier">[</span><span class="synConstant">&quot;name&quot;</span><span class="synIdentifier">]</span> <span class="synIdentifier">}</span>
              <span class="synIdentifier">]</span>
            <span class="synIdentifier">}</span>
          : <span class="synComment">// submit 成功の例</span>
            <span class="synIdentifier">{</span> <span class="synStatement">status</span>: <span class="synConstant">&quot;success&quot;</span> <span class="synStatement">as</span> <span class="synStatement">const</span> <span class="synIdentifier">}</span><span class="synStatement">;</span>
      <span class="synStatement">return</span> result<span class="synStatement">;</span>
    <span class="synIdentifier">}</span>
  <span class="synIdentifier">}</span><span class="synStatement">);</span>
</pre>


<p>このように、<code>errors</code> には複数のエラーを含めることができます。また、<code>field</code> プロパティによって、エラーとフィールドをひもづけることもできます。このひもづけを行うと、フィールドの傍にエラーメッセージが表示されるようになります。</p>

<p><span itemscope itemtype="http://schema.org/Photograph"><img src="https://cdn-ak.f.st-hatena.com/images/fotolife/m/mashabow/20201207/20201207105611.png" alt="f:id:mashabow:20201207105611p:plain" title="" class="hatena-fotolife" itemprop="image"></span></p>

<p>一方、フィールドにひもづかないエラーは、そのままでは UI 上に何も表示されません。<code>useForm</code> の戻り値の <code>submitErrors</code> には、（フィールドにひもづくか否かに関わらず）すべてのエラーが入っているので、これを <a href="https://polaris.shopify.com/components/feedback-indicators/banner#navigation"><code>Banner</code></a> コンポーネントに表示させてみましょう。</p>

<pre class="code lang-typescript" data-lang="typescript" data-unlink>    <span class="synStatement">&lt;</span><span class="synConstant">Form</span> <span class="synSpecial">onSubmit</span><span class="synStatement">=</span><span class="synIdentifier">{</span>submit<span class="synIdentifier">}</span><span class="synStatement">&gt;</span>
      <span class="synStatement">&lt;</span>FormLayout<span class="synStatement">&gt;</span>
        <span class="synIdentifier">{</span>submitErrors.<span class="synSpecial">length</span> <span class="synStatement">&gt;</span> <span class="synConstant">0</span> <span class="synConstant">&amp;&amp;</span> <span class="synStatement">(</span>
          <span class="synStatement">&lt;</span>Banner <span class="synStatement">status=</span><span class="synConstant">&quot;critical&quot;</span><span class="synStatement">&gt;</span>
            <span class="synStatement">&lt;</span>p<span class="synStatement">&gt;</span>保存に失敗しました。<span class="synStatement">&lt;</span>/p<span class="synStatement">&gt;</span>
            <span class="synStatement">&lt;</span>ul<span class="synStatement">&gt;</span>
              <span class="synIdentifier">{</span>submitErrors.map<span class="synStatement">((</span><span class="synIdentifier">{</span> message <span class="synIdentifier">}</span><span class="synStatement">,</span> i<span class="synStatement">)</span> <span class="synStatement">=&gt;</span> <span class="synStatement">(</span>
                <span class="synStatement">&lt;</span>li key<span class="synStatement">=</span><span class="synIdentifier">{</span>i<span class="synIdentifier">}</span><span class="synStatement">&gt;</span><span class="synIdentifier">{</span>message<span class="synIdentifier">}</span><span class="synStatement">&lt;</span>/li<span class="synStatement">&gt;</span>
              <span class="synStatement">))</span><span class="synIdentifier">}</span>
            <span class="synStatement">&lt;</span>/ul<span class="synStatement">&gt;</span>
          <span class="synStatement">&lt;</span>/Banner<span class="synStatement">&gt;</span>
        <span class="synStatement">)</span><span class="synIdentifier">}</span>
        <span class="synIdentifier">{</span><span class="synComment">/* 略（フォームの中身） */</span><span class="synIdentifier">}</span>
      <span class="synStatement">&lt;</span>/FormLayout<span class="synStatement">&gt;</span>
    <span class="synStatement">&lt;</span>/<span class="synConstant">Form</span><span class="synStatement">&gt;</span>
</pre>


<p><span itemscope itemtype="http://schema.org/Photograph"><img src="https://cdn-ak.f.st-hatena.com/images/fotolife/m/mashabow/20201207/20201207105711.png" alt="f:id:mashabow:20201207105711p:plain" title="" class="hatena-fotolife" itemprop="image"></span></p>

<p>これでいい感じのフォームができあがりました！ さわって試してみてください。</p>

<iframe src="https://codesandbox.io/embed/shopifyreact-form-2-1wpxz?expanddevtools=1&fontsize=12&hidenavigation=1&module=%2Fsrc%2FMyForm.tsx&theme=dark"
     style="width:100%; height:600px; border:0; border-radius: 4px; overflow:hidden;"
     title="@shopify/react-form 2"
     allow="accelerometer; ambient-light-sensor; camera; encrypted-media; geolocation; gyroscope; hid; microphone; midi; payment; usb; vr; xr-spatial-tracking"
     sandbox="allow-forms allow-modals allow-popups allow-presentation allow-same-origin allow-scripts"
   ></iframe>


<h2>おまけの補足</h2>

<ul>
<li><a href="https://polaris.shopify.com/components/forms/checkbox#navigation"><code>Checkbox</code></a> や <a href="https://polaris.shopify.com/components/forms/radio-button#navigation"><code>RadioButton</code></a> に props を渡す場合は、<a href="https://github.com/Shopify/quilt/tree/%40shopify/react-form%400.9.0/packages/react-form#aschoicefield"><code>asChoiceField</code></a> を使う必要があります。</li>
<li>実際の埋め込みアプリのフォームでは、さらに App Bridge の <a href="https://shopify-dev.shopifycloud.com/tools/app-bridge/actions/contextualSaveBar"><code>ContextualSaveBar</code></a> を併用するのがおすすめです。機能としては Polaris の <a href="https://polaris.shopify.com/components/forms/contextual-save-bar"><code>ContexualSaveBar</code></a> と似ていますが、App Bridge の <code>ContextualSaveBar</code> を使った方が、一貫した UI/UX を提供できます。</li>
</ul>


<h2>おわりに</h2>

<p>というわけで、@shopify/react-form を簡単に紹介しました。Shopify 公式が開発しているだけあって、手軽に Polaris と組み合わせられるところが嬉しいですね。</p>

<p>明日のアドベントカレンダーは <a href="https://qiita.com/mixlogue">mixlogue</a> さんによる「<a href="https://qiita.com/mixlogue/items/2d8febae3b98cbdfebb8">サードパーティクッキーの問題を解決するApp Bridgeの新しい仕様、セッショントークンに対応する（Next.js版）</a>」です。ちょうど弊アプリもセッショントークンを採用したところなので、mixlogue さんがどのように実装されたのか、とても気になります！</p>

<p>ではでは。</p>
<div class="footnotes">
<hr/>
<ol>
<li id="fn:1">
<p>よく覚えていませんが、<a href="https://www.reddit.com/r/reactjs/comments/f4cu80/form_validation_library_suggestions/fhpz8i5/">おそらくここ？</a> <a href="#fnref:1" rev="footnote">&#8617;</a></p></li>
<li id="fn:2">
<p>ただし、<code>onSubmit</code> 関数が実行される前にクライアントサイドバリデーションが走ります。クライアントサイドバリデーションに引っかかった場合は、<code>onSubmit</code> 関数の中身は実行されません。<a href="#fnref:2" rev="footnote">&#8617;</a></p></li>
</ol>
</div>

]]></description>
            <enclosure url="https://cdn-ak.f.st-hatena.com/images/fotolife/m/mashabow/20201207/20201207160849.png" length="0" type="image/png"/>
        </item>
        <item>
            <title><![CDATA[優先度より優先順位のほうが偉い]]></title>
            <link>https://masutaka.net/2020-12-03-1/</link>
            <guid>https://masutaka.net/2020-12-03-1/</guid>
            <pubDate>Thu, 03 Dec 2020 00:00:00 GMT</pubDate>
            <description><![CDATA[この記事は Feedforce Advent Calendar 2020 の 3 日目の記事です。
昨日は kysnrm の「さよなら湯島 」でした。私も今のところに住んで来年で 6 年になるので、8 回目の引っ越しを少し考えてますが、まだ状況が流動的なので悩ましい&hellip;。
（ここから歌詞）
優先度を付けると、高高高高高高とかになることあるよね。みんな優先度が高い。
でも人間は一度に複数のタスクを処理することは出来ないよ。
それに実際終わってみたら、終わった順番が付いているはずだよ。
じゃあ 1, 2, 3&hellip; とタスクに順番を付けてみようか。つまりは優先順位ね。
優先度より優先順位のほうが偉い。ダンダン
優先度は優先順位を決める１つの要素でしかないよ。区別しようか。
例えば他にもこんなのを考慮する必要があるよ。
・期日
・かかる時間
・かかるお金
・サービスへのインパクト（顧客増加、顧客満足度など）
・他のタスクがどれだけ効率化するか？
優先度より優先順位のほうが偉い。ダンダンダン
先の例だと、優先度はだいたい「期日」と「サービスへのインパクト」でふんわり決まっていることが多いと思うよ。
作業者は他の要素も考慮して「優先順位」を決めると良いよ。
とは言え、考えすぎても難しいから、最初は「優先度」「かかる時間」「期日」から「優先順位」を決めると良いよ。
タスクAのほうが優先度が高いけど、タスクBはすぐ終わりそうだし、タスクAの期日までまだ余裕があるから、タスクBを先にやろう的な。
優先度より優先順位のほうが偉い。ダンダンダ、ダン
つまりは優先度よりも優先順位は上位のレイヤー、優先度より優先順位のほうが偉いということよ！
優先度より優先順位のほうが偉い。ダンダンダ、ダダン（号泣してみんな立ち上がる）
（歌詞終わり）
次回（？）は、私が使っている優先順位を決めるための具体的なテクニックをご紹介します。
明日の Feedforce Advent Calendar 2020 は、八百くんがよく日報に書いていた AI Quest の話をしてくれるみたいです。お楽しみに。]]></description>
        </item>
        <item>
            <title><![CDATA[『理論から学ぶデータベース実践入門』を読んだ]]></title>
            <link>https://masutaka.net/2020-11-10-1/</link>
            <guid>https://masutaka.net/2020-11-10-1/</guid>
            <pubDate>Tue, 10 Nov 2020 00:00:00 GMT</pubDate>
            <description><![CDATA[4 月から Looker という BI ツールを使って、ウェブ広告の媒体数値や計測数値などの分析や可視化をすべく、日々取り組んでいます。
ちょうど先月社内勉強会でそんな話をしました。
 現在扱っているデータは Web アプリケーションで扱うような、正規化されたきれいなデータではありません。NULL は頻繁に出てきますし、サブクエリ等でゴリッときれいにしてキャッシュする処理も書いたりします。いつの間にか想定外のレコードが入っていて、定義を変更することもあります。
今までこのようなデータに向き合ったことはなかったので、こんなスキーマで良いのかなあ？とか思いながらの毎日でした。
そんな中、数年前に 94 ページ目まで読んで挫折したこの本が頭にちらついていました。
 以前はふわっと読み始めたと記憶していますが、今回は割と明確な課題があります。今回は挫折しなさそうな気がしたのと、何かのヒントを期待して読むことにしました。
結論から書くと P155 に明確な答えが書いてありました。
 リレーショナルモデルに適合しないデータをテーブルを用いて格納する場合は、リレーショナルモデルの原理原則に従う必要はまるでありません。そのようなテーブルでは、NULLを用いてもかまいませんし、正規化をする必要すらないでしょう。
 ここを読むまでは、仮にリレーショナルモデルの原理原則に従うのだとしたら、すべてのカラムで NULL を許容しているテーブルを ETL 等でリレーショナルモデルに適合したテーブルにクリーニングするのかなあ？でも現実的ではないなあ？など考えながら読んでいました。なので、急に答えが降ってきたようでした。
SQL はリレーショナルモデルを扱うことが得意ですが、そうでないものも扱って良いと力強く書いてあります。もちろん用法用量を守って。
特に目の前の課題が解決したわけではありませんが、なにか光が見えた気がしました。
他の話も一応書いておくと、理論だけあって全部を理解するのはかなり難しく、特に第２〜４章は全く頭に入ってきませんでした。数年前はここで挫折&hellip;。
ただし、第１章の SQL と集合の関係については比較的容易で、私が数年前に読んだ時は SQL への向き合い方が変わりました。気になる人は第１章だけでも読むと良いかもしれません。他も第９章の履歴データや第１３章のリファクタリングなども。
なにか課題を抱えている人は、あまり気負わずに流して読むと良いかもしれません。]]></description>
        </item>
        <item>
            <title><![CDATA[CircleCI の旧 UI で設定した Slack Integration の設定を確認も変更も削除もできない件への対応方法]]></title>
            <link>https://masutaka.net/2020-10-30-1/</link>
            <guid>https://masutaka.net/2020-10-30-1/</guid>
            <pubDate>Fri, 30 Oct 2020 00:00:00 GMT</pubDate>
            <description><![CDATA[今年の春くらいに CircleCI の UI が新しくなったタイミングで、各プロジェクトで設定した Slack 通知用の設定ページはどこかにいってしまいました。
こんな画面でした。
各プロジェクトの設定ページによると、現在は Slack orb を使う必要があるそう。
例: https://app.circleci.com/settings/project/github/masutaka/example/slack それはまあ移行すれば良いのですが、旧 UI で設定した Slack の Webhook URL を確認したくても出来ません。Slack orb に移行した場合に、旧 UI で設定した通知を無効にしてくれるのかも気になります。
CircleCI のサポートに聞いたところ、残念ながらそのような UI は用意されておらず、Slack orb に移行しても自動的な無効化はしてくれないそう。
マジすか・・・！
Undocumented API を使って無効化が必要とのこと。新 UI では確認も変更も削除もできないとのこと。それはさすがに困る人が多いんじゃないかなあ&hellip;？全部サポート対応するのかしら。
それはそれとして、この記事ではその Undocumented API を使って、旧 UI で設定した Slack Integration の確認と変更、削除のやり方をまとめます。説明しませんが、IRC も出来ると思います。
※ 9 月にサポートに聞いた時、「Undocumented API を使うのは構わないのだけど、やり方自体も Undocumented なのは変なのでヘルプページに書いて欲しい」と伝えたけど、書かれてないようなのでこの記事を書いています。
確認する こんな感じです。CIRCLE_TOKEN は https://app.circleci.com/settings/user/tokens で作ります。
CIRCLE_TOKEN=xxxxxx VCS=gh ORG=masutaka PROJECT=example curl &#34;https://circleci.com/api/v1.1/project/${VCS}/${ORG}/${PROJECT}/settings&#34; \ -X GET \ -H &#39;Content-Type: application/json; charset=utf-8&#39; \ -H &#34;Circle-Token: $CIRCLE_TOKEN&#34; \ | jq &#39;{ vcs_url: .]]></description>
        </item>
        <item>
            <title><![CDATA[『4月から取り組んできたLookerの導入から実装までのお話（Redashとも比較）』という発表をした]]></title>
            <link>https://developer.feedforce.jp/entry/2020/10/23/190000</link>
            <guid>https://developer.feedforce.jp/entry/2020/10/23/190000</guid>
            <pubDate>Fri, 23 Oct 2020 10:00:00 GMT</pubDate>
            <description><![CDATA[<p>こんにちは <a href="http://blog.hatena.ne.jp/masutaka26/" class="hatena-id-icon"><img src="https://cdn.profile-image.st-hatena.com/users/masutaka26/profile.png" width="16" height="16" alt="" class="hatena-id-icon">id:masutaka26</a> です。最近の趣味はリハビリと YouTube 鑑賞です。</p>

<p>本日、週次の社内勉強会 <a href="https://developer.feedforce.jp/archive/category/FFTT">FFTT</a> で『4月から取り組んできたLookerの導入から実装までのお話（Redashとも比較）』という発表をしました。</p>

<iframe src="https://docs.google.com/presentation/d/e/2PACX-1vQWgD1o2eZC69Mt9F9ln3xQL6Wx82W782cHe1YJEIPHWAdqp6tLEH_I29CyrMBbA9Ag0jmkMoQZ0QQp/embed?start=false&loop=false&delayms=3000" frameborder="0" width="960" height="400" allowfullscreen="true" mozallowfullscreen="true" webkitallowfullscreen="true"></iframe>


<p>4 月から <a href="https://jp.feedmatic.net/">Feedmatic</a> という弊社フィードフォースの広告運用サービスに BI ツールである <a href="https://ja.looker.com/">Looker</a> を導入すべく、検討と実装をしてきました。</p>

<p>関わっているエンジニアは私一人で、社内の他のエンジニアからは何やってきたか分からないと思っていたので、今までのまとめ的な発表をしました。</p>

<p>ネット上を探しても導入時の具体的な話は見つけられなかったので、誰かの参考になることも期待して、外向けも意識しています。</p>

<p>Looker ユーザ向けには P30 から「Symmetric 集計」を頑張って解説しています。説明が雑なのは認めます。🙏</p>

<p>Looker は学習コストは高いですが、かなりパワフルなツールなので、個人的には非常にやる気を出して燃えています。🔥</p>

<p>それでは！</p>
]]></description>
            <enclosure url="https://cdn-ak.f.st-hatena.com/images/fotolife/m/masutaka26/20201023/20201023184859.png" length="0" type="image/png"/>
        </item>
        <item>
            <title><![CDATA[Next.js の Static HTML Export で生成したファイルを Lambda@Edge を使わずに CloudFront + S3 にデプロイする]]></title>
            <link>https://developer.feedforce.jp/entry/2020/10/21/111537</link>
            <guid>https://developer.feedforce.jp/entry/2020/10/21/111537</guid>
            <pubDate>Wed, 21 Oct 2020 02:15:37 GMT</pubDate>
            <description><![CDATA[<p>こんにちは、<a href="http://blog.hatena.ne.jp/daido1976/" class="hatena-id-icon"><img src="https://cdn.profile-image.st-hatena.com/users/daido1976/profile.png" width="16" height="16" alt="" class="hatena-id-icon">id:daido1976</a> です。</p>

<p>今回は Next.js の Static HTML Export で生成したファイルを Lambda@Edge を使わずに CloudFront + S3 にデプロイする方法を紹介します。</p>

<ul class="table-of-contents">
    <li><a href="#前提">前提</a><ul>
            <li><a href="#Nextjs">Next.js</a></li>
            <li><a href="#CloudFront--S3">CloudFront + S3</a></li>
        </ul>
    </li>
    <li><a href="#やり方">やり方</a><ul>
            <li><a href="#1-S3-側での静的ウェブサイトホスティングの設定">1. S3 側での静的ウェブサイトホスティングの設定</a></li>
            <li><a href="#2-CloudFront-の-Origin-Domain-Name-の設定">2. CloudFront の Origin Domain Name の設定</a></li>
            <li><a href="#3-Referer-を使って-CloudFront-から-S3-への直接アクセスを禁止する">3. Referer を使って CloudFront から S3 への直接アクセスを禁止する</a></li>
            <li><a href="#4-Nextjs-側で各ページのファイル名を-indexhtml-にする設定">4. Next.js 側で各ページのファイル名を index.html にする設定</a></li>
        </ul>
    </li>
    <li><a href="#参考">参考</a></li>
</ul>

<h2 id="前提">前提</h2>

<h3 id="Nextjs">Next.js</h3>

<p>Next.js のアプリで SSR を行う場合は Vercel やその他の Node.js 実行環境のあるサーバにデプロイする必要がありますが、そうでない場合は <a href="https://nextjs.org/docs/advanced-features/static-html-export">Static HTML Export</a> 機能を使って静的ページを出力し、任意の Web サーバにデプロイすることもできます。</p>

<p>Static HTML Export 機能では通常 <code>page/about.tsx</code> というファイルから <code>/about.html</code> が生成されますが、これをそのまま S3 にアップロードして CloudFront 経由で <code>/about</code> にアクセスしても上手く動きません。</p>

<p>Next.js 側で生成されるファイルを <code>/about.html</code> から <code>/about/index.html</code> に変える <a href="https://nextjs.org/docs/api-reference/next.config.js/exportPathMap#adding-a-trailing-slash">trailingSlash: true</a> という設定があるのでこれで一件落着と思いきや、CloudFront + S3 側でも課題がありました…。</p>

<h3 id="CloudFront--S3">CloudFront + S3</h3>

<p>Next.js の Static HTML Export 機能（&amp; <code>trailingSlash: true</code>）でビルドされた <code>/index.html</code> と <code>/about/index.html</code> のように、ルートとサブディレクトリにインデックスドキュメントを含むファイル群をデプロイする際には以下の方法が考えられますが、それぞれに問題があります。</p>

<ol>
<li>CloudFront の <a href="https://docs.aws.amazon.com/ja_jp/AmazonCloudFront/latest/DeveloperGuide/DefaultRootObject.html">Default Root Object</a> と <a href="https://docs.aws.amazon.com/ja_jp/AmazonCloudFront/latest/DeveloperGuide/private-content-restricting-access-to-s3.html">オリジンアクセスアイデンティティ</a> を使う

<ul>
<li>ルートの index.html は表示できるがサブディレクトリの index.html が表示できない</li>
</ul>
</li>
<li>S3 の <a href="https://docs.aws.amazon.com/ja_jp/AmazonS3/latest/dev/WebsiteHosting.html">静的ウェブサイトホスティング</a> 機能を有効にし、<a href="https://docs.aws.amazon.com/ja_jp/AmazonS3/latest/dev/IndexDocumentSupport.html">インデックスドキュメント</a> を設定する

<ul>
<li>ルート、サブディレクトリともに index.html 表示できるが、S3への直接アクセスが禁止できない</li>
</ul>
</li>
</ol>


<p>👆 の解決策として、以下の記事のように Lambda@Edge などを使って「末尾が "/" で終わっているアクセスのパスに index.html を付与する」というものが多いです。</p>

<p><iframe src="https://hatenablog-parts.com/embed?url=https%3A%2F%2Fdev.classmethod.jp%2Farticles%2Fdirectory-indexes-in-s3-origin-backed-cloudfront%2F" title="できた！S3 オリジンへの直接アクセス制限と、インデックスドキュメント機能を共存させる方法 | Developers.IO" class="embed-card embed-webcard" scrolling="no" frameborder="0" style="display: block; width: 100%; height: 155px; max-width: 500px; margin: 10px 0px;"></iframe><cite class="hatena-citation"><a href="https://dev.classmethod.jp/articles/directory-indexes-in-s3-origin-backed-cloudfront/">dev.classmethod.jp</a></cite></p>

<p>が、管理するリソースはできるだけ増やしたくないのと、CloudFront の <a href="https://docs.aws.amazon.com/ja_jp/AmazonCloudFront/latest/DeveloperGuide/RequestAndResponseBehaviorCustomOrigin.html">Behavior</a> を使ってマルチオリジン構成にしている時にはパス書き換えのロジックが複雑になってしまうので、できれば Lambda@Edge を使わず CloudFront + S3 だけでやる方法を見つけたいと考えていました。</p>

<p>結論としては、<code>2. S3 の 静的ウェブサイトホスティング 機能を有効にし、インデックスドキュメント を設定する</code> の方法を使いながら S3 への直接アクセスを禁止することができたので、その方法をご紹介します。</p>

<h2 id="やり方">やり方</h2>

<p>以下の AWS ナレッジセンターの記事を参考にしました。</p>

<p><a href="https://aws.amazon.com/jp/premiumsupport/knowledge-center/cloudfront-serve-static-website/#Using_a_website_endpoint_as_the_origin.2C_with_access_restricted_by_a_Referer_header">CloudFront を使用して、Amazon S3 でホストされた静的ウェブサイトを公開するにはどうすればよいですか?#アクセスが Referer ヘッダーで制限されたオリジンとして、ウェブサイトのエンドポイントを使用する</a></p>

<p>ざっくりしたアーキテクチャ図は以下になります。</p>

<p><span itemscope itemtype="http://schema.org/Photograph"><img src="https://cdn-ak.f.st-hatena.com/images/fotolife/d/daido1976/20201021/20201021094707.png" alt="f:id:daido1976:20201021094707p:plain" title="f:id:daido1976:20201021094707p:plain" class="hatena-fotolife" itemprop="image"></span></p>

<h3 id="1-S3-側での静的ウェブサイトホスティングの設定">1. S3 側での静的ウェブサイトホスティングの設定</h3>

<p>S3 の静的ウェブサイトを有効にして、インデックスドキュメントを index.html にします。</p>

<p>以下のエンドポイントは後ほど CloudFront の Origin Domain Name に設定する必要があるので控えておきましょう。</p>

<p><span itemscope itemtype="http://schema.org/Photograph"><img src="https://cdn-ak.f.st-hatena.com/images/fotolife/d/daido1976/20201020/20201020084312.png" alt="f:id:daido1976:20201020084312p:plain" title="f:id:daido1976:20201020084312p:plain" class="hatena-fotolife" itemprop="image"></span></p>

<h3 id="2-CloudFront-の-Origin-Domain-Name-の設定">2. CloudFront の Origin Domain Name の設定</h3>

<p>CloudFront の <code>Origins and Origin Groups</code> タブから Origin の Edit を押下し、</p>

<p><span itemscope itemtype="http://schema.org/Photograph"><img src="https://cdn-ak.f.st-hatena.com/images/fotolife/d/daido1976/20201020/20201020084835.png" alt="f:id:daido1976:20201020084835p:plain" title="f:id:daido1976:20201020084835p:plain" class="hatena-fotolife" itemprop="image"></span></p>

<p>Origin Domain Name を S3 の Origin ではなく、<code>1</code> で取得した S3 の静的ウェブサイトのエンドポイント（ドメインの指定なので <code>http://</code> は不要）にします。<a href="#f-9be4dc96" name="fn-9be4dc96" title="S3 の Origin は {bucket}.s3.amazonaws.com のような形式で、S3 の静的ウェブサイトのエンドポイントは {bucket}.s3-website-{region}.amazonaws.com のような形式です。間違えやすいので注意。">*1</a></p>

<p><span itemscope itemtype="http://schema.org/Photograph"><img src="https://cdn-ak.f.st-hatena.com/images/fotolife/d/daido1976/20201020/20201020085837.png" alt="f:id:daido1976:20201020085837p:plain" title="f:id:daido1976:20201020085837p:plain" class="hatena-fotolife" itemprop="image"></span></p>

<p>ここまでは通常の静的ウェブサイトホスティングの設定と同じです。</p>

<h3 id="3-Referer-を使って-CloudFront-から-S3-への直接アクセスを禁止する">3. Referer を使って CloudFront から S3 への直接アクセスを禁止する</h3>

<blockquote><p>[ヘッダー名] の [Origin カスタムヘッダー] に、[Referer] と入力します。[値] には、オリジンに転送するカスタムヘッダーを入力します (S3 バケット)。オリジンへのアクセスを制限するために、ランダムな値または他の人は知らない秘密の値を入力することができます。</p></blockquote>

<p>ドキュメントに従ってそのまま Origin の編集画面でカスタムヘッダを設定します。</p>

<p>「ランダムな値または他の人は知らない秘密の値を入力することができます」とある通り、この Referer の値は URL ではなく適当な値でも構いません。</p>

<p><span itemscope itemtype="http://schema.org/Photograph"><img src="https://cdn-ak.f.st-hatena.com/images/fotolife/d/daido1976/20201020/20201020090510.png" alt="f:id:daido1976:20201020090510p:plain" title="f:id:daido1976:20201020090510p:plain" class="hatena-fotolife" itemprop="image"></span></p>

<p>加えて、S3 コンソールから上記のカスタム Referer ヘッダーがリクエストに含まれることを条件として、<code>s3:GetObject</code> を許可するバケットポリシーを追加します。</p>

<p><a href="https://docs.aws.amazon.com/ja_jp/AmazonS3/latest/dev/example-bucket-policies.html#example-bucket-policies-use-case-4">バケットポリシーの例#特定の HTTP Referer へのアクセスの制限 - Amazon Simple Storage Service</a></p>

<p><span itemscope itemtype="http://schema.org/Photograph"><img src="https://cdn-ak.f.st-hatena.com/images/fotolife/d/daido1976/20201016/20201016135940.png" alt="f:id:daido1976:20201016135940p:plain" title="f:id:daido1976:20201016135940p:plain" class="hatena-fotolife" itemprop="image"></span></p>

<p>これで Referer ヘッダーに指定の値が含まれていないアクセスを禁止することができます。<a href="#f-c001d0bd" name="fn-c001d0bd" title="実際は curl などでこの Referer の値をヘッダにセットすると CloudFront 経由でなくともアクセスできるのですが、今回は一般ユーザからの URL 直打ちによるアクセスが禁止できれば良いので、この方法で問題ないと判断しました。">*2</a></p>

<h3 id="4-Nextjs-側で各ページのファイル名を-indexhtml-にする設定">4. Next.js 側で各ページのファイル名を index.html にする設定</h3>

<p>最後に Next.js の設定で <code>trailingSlash: true</code> を指定して、各ページのファイル名を index.html にします。</p>

<p><a href="https://nextjs.org/docs/api-reference/next.config.js/exportPathMap#adding-a-trailing-slash">https://nextjs.org/docs/api-reference/next.config.js/exportPathMap#adding-a-trailing-slash</a></p>

<h2 id="参考">参考</h2>

<ul>
<li><a href="https://aws.amazon.com/jp/premiumsupport/knowledge-center/cloudfront-serve-static-website/#Using_a_website_endpoint_as_the_origin.2C_with_access_restricted_by_a_Referer_header">CloudFront を使用して、Amazon S3 でホストされた静的ウェブサイトを公開するにはどうすればよいですか?#アクセスが Referer ヘッダーで制限されたオリジンとして、ウェブサイトのエンドポイントを使用する</a></li>
<li><a href="https://docs.aws.amazon.com/ja_jp/AmazonS3/latest/dev/example-bucket-policies.html#example-bucket-policies-use-case-4">バケットポリシーの例#特定の HTTP Referer へのアクセスの制限 - Amazon Simple Storage Service</a></li>
<li><a href="https://docs.aws.amazon.com/ja_jp/AmazonCloudFront/latest/DeveloperGuide/add-origin-custom-headers.html">&#x30AA;&#x30EA;&#x30B8;&#x30F3;&#x30EA;&#x30AF;&#x30A8;&#x30B9;&#x30C8;&#x3078;&#x306E;&#x30AB;&#x30B9;&#x30BF;&#x30E0;&#x30D8;&#x30C3;&#x30C0;&#x30FC;&#x306E;&#x8FFD;&#x52A0; - Amazon CloudFront</a></li>
</ul>

<div class="footnote">
<p class="footnote"><a href="#fn-9be4dc96" name="f-9be4dc96" class="footnote-number">*1</a><span class="footnote-delimiter">:</span><span class="footnote-text">S3 の Origin は {bucket}.s3.amazonaws.com のような形式で、S3 の静的ウェブサイトのエンドポイントは {bucket}.s3-website-{region}.amazonaws.com のような形式です。間違えやすいので注意。</span></p>
<p class="footnote"><a href="#fn-c001d0bd" name="f-c001d0bd" class="footnote-number">*2</a><span class="footnote-delimiter">:</span><span class="footnote-text">実際は curl などでこの Referer の値をヘッダにセットすると CloudFront 経由でなくともアクセスできるのですが、今回は一般ユーザからの URL 直打ちによるアクセスが禁止できれば良いので、この方法で問題ないと判断しました。</span></p>
</div>]]></description>
            <enclosure url="https://cdn-ak.f.st-hatena.com/images/fotolife/d/daido1976/20201021/20201021094707.png" length="0" type="image/png"/>
        </item>
        <item>
            <title><![CDATA[題字ペタペタができるまで]]></title>
            <link>https://shiromoji.hatenablog.jp/entry/2020/09/14/213000</link>
            <guid>https://shiromoji.hatenablog.jp/entry/2020/09/14/213000</guid>
            <pubDate>Mon, 14 Sep 2020 12:30:00 GMT</pubDate>
            <description><![CDATA[<p>新聞の題字が一覧できるサイト・<a href="https://daipeta.com">題字ペタペタ</a>を、<a href="https://twitter.com/nekonopen">ねこぺん</a>と作って公開しました。</p>

<p><iframe src="https://hatenablog-parts.com/embed?url=https%3A%2F%2Fdaipeta.com" title="題字ペタペタ - 日本の新聞の題字あつめました" class="embed-card embed-webcard" scrolling="no" frameborder="0" style="display: block; width: 100%; height: 155px; max-width: 500px; margin: 10px 0px;"></iframe><cite class="hatena-citation"><a href="https://daipeta.com">daipeta.com</a></cite></p>

<p>こんな感じで、いろいろな新聞の題字を掲載しています。絞り込み検索もできます。</p>

<p><figure class="figure-image figure-image-fotolife" title="題字ペタペタのトップページ"><span itemscope itemtype="http://schema.org/Photograph"><img src="https://cdn-ak.f.st-hatena.com/images/fotolife/m/mashabow/20200914/20200914200511.png" alt="f:id:mashabow:20200914200511p:plain" title="f:id:mashabow:20200914200511p:plain" class="hatena-fotolife" itemprop="image"></span><figcaption>題字ペタペタのトップページ</figcaption></figure></p>

<p>この題字ペタペタができるまでの話を、社内勉強会で発表しました。スライドを置いておきますので、どうぞご覧ください。</p>

<p><iframe id="talk_frame_665734" src="//speakerdeck.com/player/3d8da29756b4456e89023932c5a61853" width="710" height="399" style="border:0; padding:0; margin:0; background:transparent;" frameborder="0" allowtransparency="true" allowfullscreen="allowfullscreen" mozallowfullscreen="true" webkitallowfullscreen="true"></iframe> <cite class="hatena-citation"><a href="https://speakerdeck.com/mashabow/fftt-number-409">speakerdeck.com</a></cite></p>

<p>技術的には、<a href="https://www.contentful.com/">Contentful</a> に入れたデータをもとに <a href="https://www.gatsbyjs.com/">Gatsby</a> でページを生成し、<a href="https://www.netlify.com/">Netlify</a> で<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%DB%A5%B9%A5%C6%A5%A3%A5%F3%A5%B0">ホスティング</a>しています。ここ最近よく見かける定番の構成ですね。</p>

<p>また、Web フォントサービス <a href="https://www.realtype.jp/">REALTYPE</a> を利用して、<a href="https://www.iwatafont.co.jp/font/ud_news.html">イワタ UD 新聞明朝 や イワタ UD 新聞ゴシック</a>で組んでいます。簡単に使えるだろうと甘く見ていたら、これになかなか苦労したんですが、それについてはまた別の記事で。</p>

<p>デザインについては、主にねこぺんが担当してくれました。素人ながらかなり頑張って、いいサイトができあがったんじゃないかと思います。慣れない<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%BF%A5%D6%A5%EC%A5%C3%A5%C8">タブレット</a>と格闘しながら、かわいいイラストも描いてくれました。</p>

<p>ひとまず完成はしましたが、これからも少しずつ拡充していきますので、題字ペタペタをどうぞごひいきに。</p>

<h3>参考書籍</h3>

<ul>
<li><a href="https://booth.pm/ja/items/1312387">GatsbyJS Guidebook - mottox2（つのぶえ出版） - BOOTH</a>

<ul>
<li><a class="keyword" href="http://d.hatena.ne.jp/keyword/Gatsby">Gatsby</a> や Contentful に触り始めたころに参考にしました。入門者向け。</li>
</ul>
</li>
<li><a href="https://amzn.to/3bWrocJ">UIデザインの教科書［新版］マルチデバイス時代のインターフェース設計</a>

<ul>
<li>Web デザインの基礎を押さえるためにふたりで読みました。実例の<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%B9%A5%AF%A5%EA%A1%BC%A5%F3%A5%B7%A5%E7%A5%C3%A5%C8">スクリーンショット</a>が多くてわかりやすい内容です。</li>
</ul>
</li>
</ul>

]]></description>
            <enclosure url="https://cdn-ak.f.st-hatena.com/images/fotolife/m/mashabow/20200914/20200914200511.png" length="0" type="image/png"/>
        </item>
        <item>
            <title><![CDATA[ソーシャルPLUS を Rails 5.0 にアップグレードしました]]></title>
            <link>https://developer.feedforce.jp/entry/2020/09/08/142913</link>
            <guid>https://developer.feedforce.jp/entry/2020/09/08/142913</guid>
            <pubDate>Tue, 08 Sep 2020 05:29:13 GMT</pubDate>
            <description><![CDATA[<p><b>[2021/08 追記]</b></p>

<p>現在は Rails 5.2 にアップグレード済みです。</p>

<hr />

<p>こんにちは。今年の 4 月に EC Booster チームからソーシャルPLUS チームに異動してきた <a href="http://blog.hatena.ne.jp/daido1976/" class="hatena-id-icon"><img src="https://cdn.profile-image.st-hatena.com/users/daido1976/profile.png" width="16" height="16" alt="" class="hatena-id-icon">id:daido1976</a> です。</p>

<p>今回はソーシャルPLUS の核となるソーシャルログインサービスの Rails アプリを 4.2 から 5.0 にアップグレードした話を書きます。</p>

<p>ソーシャルPLUS のサービスや技術スタックについては以下の記事が詳しいのでご参照ください。</p>

<p><iframe src="https://hatenablog-parts.com/embed?url=https%3A%2F%2Fdeveloper.feedforce.jp%2Fentry%2F2019%2F11%2F25%2F120000" title="ソーシャルPLUS の技術スタックを整理してみた - Feedforce Developer Blog" class="embed-card embed-blogcard" scrolling="no" frameborder="0" style="display: block; width: 100%; height: 190px; max-width: 500px; margin: 10px 0px;"></iframe><cite class="hatena-citation"><a href="https://developer.feedforce.jp/entry/2019/11/25/120000">developer.feedforce.jp</a></cite></p>

<ul class="table-of-contents">
    <li><a href="#はじめに">はじめに</a></li>
    <li><a href="#どんな状態の-Rails-アプリか">どんな状態の Rails アプリか</a></li>
    <li><a href="#どれぐらいの期間かかったか">どれぐらいの期間かかったか</a></li>
    <li><a href="#レビューの仕方">レビューの仕方</a></li>
    <li><a href="#アップグレード時の-Tips">アップグレード時の Tips</a><ul>
            <li><a href="#便利な-gem-たち">便利な gem たち</a><ul>
                    <li><a href="#Strong-Parameters-対応に使える-be_strong-gem">Strong Parameters 対応に使える be_strong gem</a></li>
                    <li><a href="#DEPRECATION-WARNING-のテストを変換する-rails5-spec-converter-gem">DEPRECATION WARNING のテストを変換する rails5-spec-converter gem</a></li>
                </ul>
            </li>
            <li><a href="#カナリアリリース時のセッションデータ取得の不具合">カナリアリリース時のセッションデータ取得の不具合</a></li>
        </ul>
    </li>
    <li><a href="#最後に">最後に</a></li>
</ul>

<h2 id="はじめに">はじめに</h2>

<p>Rails 5.0 がリリースされたのは 2016 年、ということでアップグレードガイド的な記事はすでに素晴らしいものがたくさんあり、「rails 5 アップグレード」というキーワードやエラーメッセージをコピペして検索すれば大体の事象が解決できるはずです。</p>

<p>なので、今回はどんな状態の Rails アプリをどれぐらいの期間かけてどのように進めたかに焦点を当てて書いていきたいと思います。（あとは Tips も少々）</p>

<h2 id="どんな状態の-Rails-アプリか">どんな状態の Rails アプリか</h2>

<p><b>アップグレード前の環境: Ruby 2.5.7, Rails 4.2.11.3 </b></p>

<p>2012 年に Rails 3 系からスタートし、2015 年の Rails 4 系へのアップグレードを経て、5 年ぶりにメジャーバージョンのアップグレードを行う Rails アプリです。</p>

<p><code>rails stats</code> コマンドの実行結果は以下の通りで、simplecov によるテストカバレッジは 92 % です。</p>

<p><span itemscope itemtype="http://schema.org/Photograph"><img src="https://cdn-ak.f.st-hatena.com/images/fotolife/d/daido1976/20200907/20200907175904.png" alt="f:id:daido1976:20200907175904p:plain" width="557" height="600" loading="lazy" title="" class="hatena-fotolife" itemprop="image"></span></p>

<p>技術的負債はそれなりに溜まっているものの、テストカバレッジが高いのが幸いでした。</p>

<h2 id="どれぐらいの期間かかったか">どれぐらいの期間かかったか</h2>

<p>約 1.5 ヶ月かかりました。</p>

<p>担当者の私が、今回アップグレードした Rails アプリをほぼ初めて触る状態ということもあり、コードリーディングや動作確認に手間取り、時間がかかりました。</p>

<p>また、このアプリの技術的負債の一つとして gem をやたらとバージョン固定していたこともあり、Rails のアップグレードを行う前準備として固定された gem をアップデートする必要もありました。</p>

<h2 id="レビューの仕方">レビューの仕方</h2>

<p>コードレビューは Zoom を用いて同期的に行い、私がレビュアーに変更点を説明、動作確認項目を箇条書きにし、抜け漏れがないかチェックしてもらいました。</p>

<p>また他の方がみて、変更の意図がわかりやすいように Commit メッセージの 2 行目以降に補足コメントをつけるなどの工夫をしました。</p>

<p><span itemscope itemtype="http://schema.org/Photograph"><img src="https://cdn-ak.f.st-hatena.com/images/fotolife/d/daido1976/20200908/20200908055938.png" alt="f:id:daido1976:20200908055938p:plain" width="1200" height="449" loading="lazy" title="" class="hatena-fotolife" itemprop="image"></span></p>

<h2 id="アップグレード時の-Tips">アップグレード時の Tips</h2>

<p>ここからはアップグレード前にこれ知りたかった、という Tips を軽く紹介します。</p>

<h3 id="便利な-gem-たち">便利な gem たち</h3>

<h4 id="Strong-Parameters-対応に使える-be_strong-gem">Strong Parameters 対応に使える be_strong gem</h4>

<p>今回のアップグレードの懸念の一つとしてモデルにある大量の <code>attr_accessible</code> を Strong Parameters に移行するという作業があったのですが、その際に以下の gem が役立ちました。</p>

<p><iframe src="https://hatenablog-parts.com/embed?url=https%3A%2F%2Fgithub.com%2Fmonochromegane%2Fbe_strong" title="GitHub - monochromegane/be_strong: Strong parameter converter." class="embed-card embed-webcard" scrolling="no" frameborder="0" style="display: block; width: 100%; height: 155px; max-width: 500px; margin: 10px 0px;"></iframe><cite class="hatena-citation"><a href="https://github.com/monochromegane/be_strong">github.com</a></cite></p>

<p>使い方は以下の記事にわかりやすくまとまっています。</p>

<p><iframe src="https://hatenablog-parts.com/embed?url=https%3A%2F%2Ftech.pepabo.com%2F2015%2F12%2F18%2Fupgrade-to-strong-parameters%2F" title="さくっとStrongParametersへ移行するbe_strongというgemをつくりました - ペパボテックブログ" class="embed-card embed-webcard" scrolling="no" frameborder="0" style="display: block; width: 100%; height: 155px; max-width: 500px; margin: 10px 0px;"></iframe><cite class="hatena-citation"><a href="https://tech.pepabo.com/2015/12/18/upgrade-to-strong-parameters/">tech.pepabo.com</a></cite></p>

<h4 id="DEPRECATION-WARNING-のテストを変換する-rails5-spec-converter-gem">DEPRECATION WARNING のテストを変換する rails5-spec-converter gem</h4>

<pre class="code" data-lang="" data-unlink>DEPRECATION WARNING: Using positional arguments in functional tests has been deprecated, ...

Deprecated style:
get :show, { id: 1 }, nil, { notice: &#34;This is a flash message&#34; }

New keyword style:
get :show, params: { id: 1 }, flash: { notice: &#34;This is a flash message&#34; }, ...</pre>


<p>数ある DEPRECATION WARNING の中でも 👆 は警告文が長く、デバッグの邪魔になるので、Rails 5.0 へのアップグレードと同じ PR で修正しました。その際に以下の gem が大変便利でした。</p>

<p><iframe src="https://hatenablog-parts.com/embed?url=https%3A%2F%2Fgithub.com%2Ftjgrathwell%2Frails5-spec-converter" title="GitHub - tjgrathwell/rails5-spec-converter: A tool to upgrade Rails 4-style specs to Rails 5-style" class="embed-card embed-webcard" scrolling="no" frameborder="0" style="display: block; width: 100%; height: 155px; max-width: 500px; margin: 10px 0px;"></iframe><cite class="hatena-citation"><a href="https://github.com/tjgrathwell/rails5-spec-converter">github.com</a></cite></p>

<h3 id="カナリアリリース時のセッションデータ取得の不具合">カナリアリリース時のセッションデータ取得の不具合</h3>

<p>ソーシャルPLUS では大量のアクセスを捌く必要があるため、常時複数台のアプリケーションサーバが稼働しています。</p>

<p>そのためインパクトのある変更は可能な限りカナリアリリース<a href="#f-df52a8d8" name="fn-df52a8d8" title="複数サーバのうちの一部にだけ新しいバージョンのアプリケーションをリリースするデプロイ手法">*1</a> を行い、バグ混入時の被害を最小限に留めるようにしています。</p>

<p>今回、Rails と一緒にアップデートされた rack gem にて、セッション ID を用いたセッションデータの取得ロジックに前方互換性がなく、カナリアリリース環境の時のみセッションデータが取得できなくなる不具合が見つかりました。</p>

<p>長くなってしまったので、詳細は以下の記事に書きました。</p>

<p><iframe src="https://hatenablog-parts.com/embed?url=https%3A%2F%2Fqiita.com%2Fdaido1976%2Fitems%2F7a6f4a304d661d98a11b" title="Rails 4.2.x から 5.0.x にアップグレードする際にカナリアリリースすると session が取得できなくなる不具合を回避する - Qiita" class="embed-card embed-webcard" scrolling="no" frameborder="0" style="display: block; width: 100%; height: 155px; max-width: 500px; margin: 10px 0px;"></iframe><cite class="hatena-citation"><a href="https://qiita.com/daido1976/items/7a6f4a304d661d98a11b">qiita.com</a></cite></p>

<h2 id="最後に">最後に</h2>

<p>時間はかかりましたが、結果的に移行時のエラーも無く Rails 5.0 へのアップグレードを完遂することができました。</p>

<p><span itemscope itemtype="http://schema.org/Photograph"><img src="https://cdn-ak.f.st-hatena.com/images/fotolife/d/daido1976/20200907/20200907184707.png" alt="f:id:daido1976:20200907184707p:plain" width="1200" height="386" loading="lazy" title="" class="hatena-fotolife" itemprop="image"></span></p>

<p>開発チームリーダーからお褒めの Unipos もいただけて嬉しかったです。</p>

<p>この勢いで Rails 5.2 系までは一気に上げてしまいたいと思っているので引き続き頑張ります！</p>

<p>ではまたお会いしましょう＾＾</p>
<div class="footnote">
<p class="footnote"><a href="#fn-df52a8d8" name="f-df52a8d8" class="footnote-number">*1</a><span class="footnote-delimiter">:</span><span class="footnote-text">複数サーバのうちの一部にだけ新しいバージョンのアプリケーションをリリースするデプロイ手法</span></p>
</div>]]></description>
            <enclosure url="https://cdn-ak.f.st-hatena.com/images/fotolife/d/daido1976/20200907/20200907175904.png" length="0" type="image/png"/>
        </item>
        <item>
            <title><![CDATA[Looker User Meetup in Tokyo #4（BEACON Japan 前夜祭）に参加した #lookermeetup]]></title>
            <link>https://masutaka.net/2020-09-03-1/</link>
            <guid>https://masutaka.net/2020-09-03-1/</guid>
            <pubDate>Thu, 03 Sep 2020 00:00:00 GMT</pubDate>
            <description><![CDATA[【Looker ユーザー限定】Looker User Meetup in Tokyo #4 - connpass 昨日開催されたこちらのイベントに参加しました。本日 9/3 から 4 週に渡って行われる Looker BEACON Japan の前夜祭です。
よく考えたら Looker ユーザーの方々を拝見するのは初めてで、生の声を聴けたことが一番の成果でした。運営の方々、ありがとうございました。
今は会社で Looker を導入し、そろそろ Jumpstart プログラムが終わるフェーズで、これからボッチ LookML 開発に拍車がかかるところです。実装がんばります・・・！
以下、個人的なメモです。
User Talk 1 : Lookerを利用した医療ビッグデータのマーケティング分析ツールの開発  医療データと Looker は相性が良かったとのこと。
それにしても作り込んであるなあ。元が構造化されたデータで扱いやすいのかもしれないが、複雑なデータであることは確かっぽい。
User Talk 2 : DeNAゲームタイトルの共通分析におけるLooker活用事例   ソシャゲだけあって規模感がすごかった。スピーカーの鈴木さんによると、最大 5 人で LookML を開発していて、KPI ごとに担当者を分けているそう。5 人 x チーム数分のようだった。規模がすごいなあ。
共通定義プロジェクトを用意して、継承（extends）して使っているそう。共通定義の定義が難易度高そうだった。どうなんだろう？
User Talk 3 : トレタの分析環境とLookerへのこだわり   Redash で行き詰まり（？）、Looker に移行したそう。分かる。とは言え、Looker はリターンが多い分、学習コストがかなり高いんだけど、その辺どうだったのかな。
開発体制はスピーカーの CTO 鄧さんと業務委託 2 人で 3 ヶ月で作ったそう。Jumpstart 使ったのかな？あと 2 人くらい Looker のエバンジェリスト的な人（ビジネス職の人かな？）はいるっぽい。]]></description>
        </item>
        <item>
            <title><![CDATA[CircleCI の orb を fork して PR を送る前の動作確認方法]]></title>
            <link>https://masutaka.net/2020-09-02-1/</link>
            <guid>https://masutaka.net/2020-09-02-1/</guid>
            <pubDate>Wed, 02 Sep 2020 00:00:00 GMT</pubDate>
            <description><![CDATA[今回 pbrisbin/pushover orb を変更した。PR を送る前に、動作確認がてらしばらく使っている。今後のためにやり方を残しておく。
 動作確認用の orb を publish するために masutaka/pushover という scope を作る。orb の scope は一度作ったら削除できず、リネームしか出来ないようだ。自分用なので気にしないことにする。  $ circleci orb create masutaka/pushover You are creating an orb called &#34;masutaka/pushover&#34;. You will not be able to change the name of this orb. If you change your mind about the name, you will have to create a new orb with the new name. ✔ Are you sure you wish to create the orb: `masutaka/pushover`: y Orb `masutaka/pushover` created.]]></description>
        </item>
        <item>
            <title><![CDATA[いろんな本でつながった「認知（cognition）のはなし」]]></title>
            <link>https://developer.feedforce.jp/entry/2020/08/28/183637</link>
            <guid>https://developer.feedforce.jp/entry/2020/08/28/183637</guid>
            <pubDate>Fri, 28 Aug 2020 09:36:37 GMT</pubDate>
            <description><![CDATA[<p>こんにちは、入社７年目の今年は自分が<a href="https://jp.finalfantasyxiv.com/">光の戦士</a>になってから７年目にもなります、<a href="https://developer.feedforce.jp/archive/author/tmd45">id:tmd45</a> です。</p>

<p>社内の技術勉強会（FFTT）での発表内容をざっとお送りします。今回は、自分の中ではよく考えることがあったけどなかなかアウトプット出来なかった「認知」に関する発表をしました。</p>

<p>ちなみにフルリモートが選択可能になった弊社では、週次で続けている FFTT も Zoom でのオンライン開催をしています。</p>

<h2>スライド</h2>

<iframe src="https://docs.google.com/presentation/d/e/2PACX-1vRUxUQCHhkS_J1I52u2rbELFgenLcGaLw5tHjfLUR_OheLf91wNklJq9dpjov0r8znJELfQ9GMOePu0/embed?start=false&loop=false&delayms=3000" frameborder="0" width="700" height="422" allowfullscreen="true" mozallowfullscreen="true" webkitallowfullscreen="true"></iframe>


<p><a href="https://speakerdeck.com/tmd45/28-fftt-number-407">speakerdeck.com</a></p>

<h2>内容について</h2>

<p>もともと心理学（というかメンタルヘルス）に興味があって知っていた「認知」と、組織づくりやマネジメント、コーチングといった文脈で読んだ本、それから心理的安全性といった話題が自分のなかで噛み合って面白かったので、つらつらと紹介してみました。</p>

<p>『エンジニアリング組織論への招待』という本は以前にも別のエンジニアが FFTT の発表で引用していました（2018年）。いまでも良い書籍だと思います。</p>

<p><iframe src="https://hatenablog-parts.com/embed?url=https%3A%2F%2Fdeveloper.feedforce.jp%2Fentry%2F2018%2F05%2F21%2F150000" title="『開発基盤チームとして課題を探したらマネジメントをしていた』という発表をした - Feedforce Developer Blog" class="embed-card embed-blogcard" scrolling="no" frameborder="0" style="display: block; width: 100%; height: 190px; max-width: 500px; margin: 10px 0px;"></iframe></p>

<p>スライドの中で紹介した書籍はこちら。</p>

<p><div class="hatena-asin-detail"><a href="https://www.amazon.co.jp/exec/obidos/ASIN/B079TLW41L/hatena-blog-22/"><img src="https://m.media-amazon.com/images/I/513kY6L-3yL._SL160_.jpg" class="hatena-asin-detail-image" alt="エンジニアリング組織論への招待　～不確実性に向き合う思考と組織のリファクタリング" title="エンジニアリング組織論への招待　～不確実性に向き合う思考と組織のリファクタリング"></a><div class="hatena-asin-detail-info"><p class="hatena-asin-detail-title"><a href="https://www.amazon.co.jp/exec/obidos/ASIN/B079TLW41L/hatena-blog-22/">エンジニアリング組織論への招待　～不確実性に向き合う思考と組織のリファクタリング</a></p><ul><li><span class="hatena-asin-detail-label">作者:</span><a href="http://d.hatena.ne.jp/keyword/%B9%AD%CC%DA%20%C2%E7%C3%CF" class="keyword">広木 大地</a></li><li><span class="hatena-asin-detail-label">発売日:</span> 2018/02/22</li><li><span class="hatena-asin-detail-label">メディア:</span> Kindle版</li></ul></div><div class="hatena-asin-detail-foot"></div></div></p>

<p><div class="hatena-asin-detail"><a href="https://www.amazon.co.jp/exec/obidos/ASIN/B07Y5FF3M4/hatena-blog-22/"><img src="https://m.media-amazon.com/images/I/41NO8xvWQoL._SL160_.jpg" class="hatena-asin-detail-image" alt="他者と働く──「わかりあえなさ」から始める組織論 (NewsPicksパブリッシング)" title="他者と働く──「わかりあえなさ」から始める組織論 (NewsPicksパブリッシング)"></a><div class="hatena-asin-detail-info"><p class="hatena-asin-detail-title"><a href="https://www.amazon.co.jp/exec/obidos/ASIN/B07Y5FF3M4/hatena-blog-22/">他者と働く──「わかりあえなさ」から始める組織論 (NewsPicksパブリッシング)</a></p><ul><li><span class="hatena-asin-detail-label">作者:</span><a href="http://d.hatena.ne.jp/keyword/%B1%A7%C5%C4%C0%EE%B8%B5%B0%EC" class="keyword">宇田川元一</a></li><li><span class="hatena-asin-detail-label">発売日:</span> 2019/10/02</li><li><span class="hatena-asin-detail-label">メディア:</span> Kindle版</li></ul></div><div class="hatena-asin-detail-foot"></div></div></p>

<p><div class="hatena-asin-detail"><a href="https://www.amazon.co.jp/exec/obidos/ASIN/B01BDFHKTE/hatena-blog-22/"><img src="https://m.media-amazon.com/images/I/41FLH0uViXL._SL160_.jpg" class="hatena-asin-detail-image" alt="「やさしさ」という技術――賢い利己主義者になるための7講" title="「やさしさ」という技術――賢い利己主義者になるための7講"></a><div class="hatena-asin-detail-info"><p class="hatena-asin-detail-title"><a href="https://www.amazon.co.jp/exec/obidos/ASIN/B01BDFHKTE/hatena-blog-22/">「やさしさ」という技術――賢い利己主義者になるための7講</a></p><ul><li><span class="hatena-asin-detail-label">作者:</span><a href="http://d.hatena.ne.jp/keyword/%A5%B9%A5%C6%A5%D5%A5%A1%A5%F3%A1%A6%A5%A2%A5%A4%A5%F3%A5%DB%A5%EB%A5%F3" class="keyword">ステファン・アインホルン</a></li><li><span class="hatena-asin-detail-label">発売日:</span> 2016/02/04</li><li><span class="hatena-asin-detail-label">メディア:</span> Kindle版</li></ul></div><div class="hatena-asin-detail-foot"></div></div></p>

<p>認知行動療法に関する書籍と、おすすめ漫画については省きます😇</p>

<p>どれもおすすめですが、やはり『エンジニアリング組織論への招待』は網羅性と読みやすさがあって一番読んでいただきたい本です。</p>

<p>またこの発表ネタを決めたきっかけになり、スライド中にも記載した２つの記事もご紹介したいと思います。</p>

<p><iframe src="https://hatenablog-parts.com/embed?url=https%3A%2F%2Fnote.com%2Fnabeharuj%2Fn%2Fn26cb34a0d2fa" title="心理的安全性は何であって何でないのか｜人事のなべはる｜note" class="embed-card embed-webcard" scrolling="no" frameborder="0" style="display: block; width: 100%; height: 155px; max-width: 500px; margin: 10px 0px;"></iframe></p>

<p><iframe src="https://hatenablog-parts.com/embed?url=https%3A%2F%2Fblog.tinect.jp%2F%3Fp%3D66220" title="世界一のコーチですら「素直じゃない人は放っておけばいい」と思っていた。" class="embed-card embed-webcard" scrolling="no" frameborder="0" style="display: block; width: 100%; height: 155px; max-width: 500px; margin: 10px 0px;"></iframe></p>

<p>発表のなかで「コーチャブルなひととは、認知のリフレーミングができるひとである」という話をしました。</p>

<p>私もそろそろ年齢的には<ruby>中堅<rt>おじさん</rt></ruby>ですが、いつまでもそのように、人の間で学びながら成長できる人間でありたいものです。</p>
]]></description>
            <enclosure url="https://cdn.user.blog.st-hatena.com/default_entry_og_image/4268819/1588226000876991" length="0" type="image//default_entry_og_image/4268819/1588226000876991"/>
        </item>
        <item>
            <title><![CDATA[テレビ用に HDMI 切替器を買った]]></title>
            <link>https://masutaka.net/2020-08-21-1/</link>
            <guid>https://masutaka.net/2020-08-21-1/</guid>
            <pubDate>Fri, 21 Aug 2020 00:00:00 GMT</pubDate>
            <description><![CDATA[MVOWIZON というメーカー 今は ￥1,899 だけど、私は ￥1,399 で買えた  https://www.amazon.co.jp/gp/product/B087YRSHZK/ で購入したがすでにページがなかった   5 入力 1 出力、リモコン付き、補助電源も可能でこのお値段はすごい 3 入力 1 出力もある。現在 ￥1,198  https://www.amazon.co.jp/dp/B07QQDV39T/    テレビと繋げるための HDMI ケーブルは別途必要だった  30cm の https://www.amazon.co.jp/gp/product/B00QLF74BQ/ を買った   こんな感じで使用中。補助電源はせずに使えている  テレビ HDMI1: 個人用 MacBook Air（Thunderbolt） テレビ HDMI2: 仕事用 MacBook Pro（USB Type-c） テレビ HDMI3: 今回の HDMI 切替器  Chromecast PS4 Pro Nintendo Switch 未使用 未使用     HDMI 切替器を Mac と繋いだ時はうまくいかなかった Nature Remo と連携したが、PS4 や Switch を ON にすると勝手に切り替わるのでほぼ使っていない Google Home mini とも連携したが、そもそもテレビと Chromecast の区別がついていなかった（？）事情もあり挙動が不安定  成功する時は「セレクターのチャンネルを1にして」で OK。失敗することもある Nature Remo にテレビとして登録する必要はあるっぽい    ダメな配線の例:]]></description>
        </item>
        <item>
            <title><![CDATA[Emacs-27.1 がリリースされたので elscreen.el を tab-bar.el に移行した]]></title>
            <link>https://masutaka.net/2020-08-16-1/</link>
            <guid>https://masutaka.net/2020-08-16-1/</guid>
            <pubDate>Sun, 16 Aug 2020 00:00:00 GMT</pubDate>
            <description><![CDATA[8/11 に Emacs 27.1 がリリースされました。 全然追ってなかったのですが、タブ機能がようやくネイティブでサポートされたそうなので、elscreen.el から移行してみました。
https://github.com/masutaka/dotfiles-public/commit/14710b91d5342c4aec6666c0bd38dec7808d9927 tab-bar.el のコード（※）を見て、出来るだけ独自の設定はせずに、elscreen.el の挙動と合わせてみました。
※ M-x find-library [Enter] tab-bar [Enter] で開けます。
真のデフォルト厨なら C-x t ? で確認できるキーを使うべきなのでしょうが、ヘタレなので elscreen.el と同じ C-z を Prefix key にしました。
タブ数の制限がなくなったのはうれしいです（elscreen.el は 10 個までだった）。100 個以上作れることは確認しました。C-x t m (tab-move) でタブを移動できるようになったのも改善点です（しかしドラッグアンドドロップには対応していない&hellip;）。C-z C-m とかに定義するかも。
C-x 3 で縦分割したときに、右側のウインドウがタブ領域を上書きしなくなったのもうれしいです。
2020 年にもなって、こんなことで困っていたんだよなあ&hellip;。]]></description>
        </item>
        <item>
            <title><![CDATA[Chromecast を第１世代から第３世代に買い替えた]]></title>
            <link>https://masutaka.net/2020-08-14-1/</link>
            <guid>https://masutaka.net/2020-08-14-1/</guid>
            <pubDate>Fri, 14 Aug 2020 00:00:00 GMT</pubDate>
            <description><![CDATA[https://store.google.com/jp/product/chromecast  触ってられないほどの発熱だったのに触っていられる！これはすごい！（） 性能は向上しているので、変な遅延とかは感じられない スマホやタブレットからの YouTube のキャストは良いかも。PS4 やテレビ（LG）のアプリだと概要欄とコメントが見られないので YouTube Music とかの Music のキャストはオーバーかなあ。テレビ付けてるに音楽流すだけなので Google Home Mini がテレビと Chromecast をどう区別しているか分かっていない テレビの HDMI 端子足りない。PS4 と Switch が 3 つのうち 2 つを専有していて、残り 1 つを Chromecast と Mac からの出力で取り合っている。HDMI 分配器を買えば良いのかな  関連記事: Chromecast第3世代、第1世代やUltraと比べて快適さは？ - ケータイ Watch ]]></description>
        </item>
        <item>
            <title><![CDATA[何年も続いている私の Emacs パッケージ管理方法]]></title>
            <link>https://masutaka.net/2020-07-24-1/</link>
            <guid>https://masutaka.net/2020-07-24-1/</guid>
            <pubDate>Fri, 24 Jul 2020 00:00:00 GMT</pubDate>
            <description><![CDATA[こちらの記事の私なりのアンサー記事になります。
Emacs のパッケージを少しずつアップデートした: 麦汁三昧  そもそも lock が Emacs のパッケージシステムと相性が良くはないのでちょっと考え直したいところはある
 el-get は昔試したことはありますが、なにか合わなくて止めました。
今は素の package.el に落ち着いてます。
 インストールするパッケージは init.el で管理。   起動時にインストールされてなければインストールされるけど、それよりむしろインストールしたパッケージの把握のためにベタ書きしている。
アップデートが溜まってきたらゴリッとアップデートする。  バックアップを取って、
$ cd ~/.emacs.d $ tar czf ~/.Trash/elpa-$(date &#39;+%Y%m%d%H%M%S&#39;).tar.gz elpa M-x list-packages → U → x でアップデート。
Emacs を再起動してエラーになったら、バックアップを復元して後で調べる。でも最近は遭遇してないな。
拙作の BitBar プラグイン Emacs Package Updates でのアップデート確認が便利。]]></description>
        </item>
        <item>
            <title><![CDATA[Android の HTTP Shortcuts アプリで Slack Status 変更と勤怠打刻をいい感じにする]]></title>
            <link>https://masutaka.net/2020-07-17-1/</link>
            <guid>https://masutaka.net/2020-07-17-1/</guid>
            <pubDate>Fri, 17 Jul 2020 00:00:00 GMT</pubDate>
            <description><![CDATA[※ [2020-05-24-1] の Android 版です。
[2020-07-14-1] に書いたとおり、iPhone から Android に乗り換えました。そうなると、勤怠関係の iOS ショートカットも移植しないといけません（よね？）
Android には同じ機能はなさそうでしたが、ちょっと調べたら HTTP Shortcuts というアプリを見つけました。ほぼ同等の機能で移植できましたので、ご紹介します。
使い方 アプリ内にこのようにショートカットを作りました。各ショートカットはホームに配置することは出来ますが、誤タップを避けるためにこうしました。
使用感はこんな感じです。誤タップすると面倒なので、すべて確認ダイアログを出しています。
 ショートカット構成 動作確認しやすくするために、ショートカットをモジュール化しています。
①②③④が直接呼ぶショートカットは以下のとおりです。
① = ⑨ → ⑤
② = ⑥
③ = ⑦ → ⑧ → ⑨
④ = ⑨
① 出勤 長押しして Edit を表示した画面です。
Trigger Shortcurts をクリックすると、前述の通り「⑨ /jobcan_touch」 → 「⑤ slack status 出勤」の順に実行するショートカットだと分かります。
Require confirmation before execution にチェックを入れて、実行前に確認ダイアログを出すようにしています。
実行された様子。ずっと「仕事開始」も変なので、この Status は 30 分で消えるようにしています（後述）。
② ランチ 長押しして Edit を表示した画面です。]]></description>
        </item>
        <item>
            <title><![CDATA[『第5回 データアーキテクト（データ整備人）を”前向きに”考える会』に参加した #前向きデータ整備人]]></title>
            <link>https://masutaka.net/2020-07-14-2/</link>
            <guid>https://masutaka.net/2020-07-14-2/</guid>
            <pubDate>Tue, 14 Jul 2020 01:00:00 GMT</pubDate>
            <description><![CDATA[第5回 データアーキテクト（データ整備人）を”前向きに”考える会 - connpass 前回 [2020-06-09-1] に続いての参加。大きな組織に所属されている方が多いのかな。
当日の #前向きデータ整備人 Tweet 以下、個人的なメモです。
抽出の仕事をうまくやるために必要なこと   主催者のしんゆうさん
ヒアリングは重要だよなあ。少なくとも、データ整備にかける時間の半分はそれに使っても良いと思う。誤ったヒアリングをすると、誤ったデータ整備をしてしまうので。
雑用扱いはされてないので、その点は恵まれている。私がそもそもデータ整備人というよりエンジニアだからね。
片手間でもできる！BIレポート整備人のためのガイドライン  ウィルさん
ガッツリ専業なので、今の状況には当てはまらないけど、片手間の人は大変そうだな。
「#前向きデータ整備人」を参考にデータ基盤を立ち上げた話   おおたさん
分析基盤構成は興味深かった。マネーフォワードも Looker 使っているんだね。
DataOpsという観点からデータ整備人を考える   ぼうさん
こちらの発表に限らないけど、大企業所属の方が多いのかな。
今はビジネス職の人と二人三脚でやっているので、お互いを理解して、まずは動くものを実装していくフェーズ。役割がシンプルなので、今のポジションを深く考えていない。始まったのが４月からというのもある。
ゼロから作ったデータサイエンス組織で意識した事   高橋光さん
「データドリブンな会社にする」
それな！]]></description>
        </item>
        <item>
            <title><![CDATA[iPhone X から Pixel 3a XL に乗り換えて一週間経った]]></title>
            <link>https://masutaka.net/2020-07-14-1/</link>
            <guid>https://masutaka.net/2020-07-14-1/</guid>
            <pubDate>Tue, 14 Jul 2020 00:00:00 GMT</pubDate>
            <description><![CDATA[[2017-11-18-1] に iPhone X を買って 2 年半。当時の購入価格で 12 万円だったこともあり、iPhone はもう最後かなと思ってた。スマホに 10 万円超は払えなくはないけど、選択肢がないのは健全ではないと思った。あと、iPhone 飽きた。
10 年前に iPhone(4) を初めて買った時は「スマホでネイティブコードを動かさない Android 意味分からん」と思っていたのに、随分な変わりようです。
Android は [2016-11-01-1] から ZenPad のタブレットを使っているし、最近は iPhone とそう変わらないとよく聞くので、思い切って乗り換えてみました。
Pixel 3a XL にしたのは、SIM フリーの Felica 対応 Android があまりなかったからです。Android に土地勘がないので、もっと良い選択肢はあったかもしれません。
ただ、このスペックで定価の 6 万円は割高に感じられました。そこで Google アラートを仕掛けて待つこと 2 ヶ月。やりました！
loading...
   if (localStorage.getItem("pref-theme") === "light") { const elements = document.getElementsByClassName('twitter-tweet'); for (let i = 0; i  タイミング的にも最後だったみたいです。そろそろ Pixel 4a が出るそうですが、今回は安く Android に乗り換えるのが目的だったので、後悔とかはありません。]]></description>
        </item>
        <item>
            <title><![CDATA[個人的に実践している、Slack に振り回されない方法]]></title>
            <link>https://developer.feedforce.jp/entry/2020/06/29/140000</link>
            <guid>https://developer.feedforce.jp/entry/2020/06/29/140000</guid>
            <pubDate>Mon, 29 Jun 2020 05:00:00 GMT</pubDate>
            <description><![CDATA[<p>こんにちは <a href="http://blog.hatena.ne.jp/masutaka26/" class="hatena-id-icon"><img src="https://cdn.profile-image.st-hatena.com/users/masutaka26/profile.png" width="16" height="16" alt="" class="hatena-id-icon">id:masutaka26</a> です。足底筋膜炎は誤診のようでした。リハビリに勤しむ日々です。</p>

<p>今回は社内向けに書いた esa 記事が好評でしたので、少し改変してお届けします。</p>

<p>フィードフォースでは Slack を使っており、リモートワークにおけるコミュニケーションの手段も Slack がメインです。</p>

<p>Slack はチャットツールであるため、ある程度のリアルタイム性を求められますが、ただそれに従っていると振り回されてしまいます。</p>

<p>今回は私が実践しているいくつかの工夫を紹介します。他に良い方法があれば、是非教えてください。</p>

<ul class="table-of-contents">
    <li><a href="#今すぐできないことあとでやるあとで確認するは自分にリマインドする">今すぐできないこと（あとでやる＆あとで確認する）は自分にリマインドする</a></li>
    <li><a href="#自分が他の人に依頼した時もリマインドを設定する">自分が他の人に依頼した時もリマインドを設定する</a></li>
    <li><a href="#チャンネルは優先度を付ける">チャンネルは優先度を付ける</a></li>
    <li><a href="#見なくなったチャンネルからはこまめに抜ける">見なくなったチャンネルからはこまめに抜ける</a></li>
    <li><a href="#未読チャンネルはショートカットキーで移動する">未読チャンネルはショートカットキーで移動する</a></li>
</ul>

<h2 id="今すぐできないことあとでやるあとで確認するは自分にリマインドする">今すぐできないこと（あとでやる＆あとで確認する）は自分にリマインドする</h2>

<p>自分にリマインドすることで忘れることが出来る。同期的コミュニケーションを非同期に逃がす感じ。</p>

<p><span itemscope itemtype="http://schema.org/Photograph"><img src="https://cdn-ak.f.st-hatena.com/images/fotolife/m/masutaka26/20200627/20200627014903.png" alt="f:id:masutaka26:20200627014903p:plain" title="f:id:masutaka26:20200627014903p:plain" class="hatena-fotolife" itemprop="image"></span></p>

<p>👇 <code>slackbot</code> からの DM で通知される。</p>

<p><span itemscope itemtype="http://schema.org/Photograph"><img src="https://cdn-ak.f.st-hatena.com/images/fotolife/m/masutaka26/20200627/20200627013415.jpg" alt="f:id:masutaka26:20200627013415j:plain" title="f:id:masutaka26:20200627013415j:plain" class="hatena-fotolife" itemprop="image"></span></p>

<p>すぐ出来なくてさらに先延ばししたければ、Snooze する。出来ない時はゆるふわで良いので Snooze することが大事。放置しないようにしている。</p>

<p>👇 たまに <code>slackbot</code> の DM とかで <code>/remind list</code> して確認している。Snooze し忘れたりして、過去のリマインドが残っているとこんな感じになる。→ <code>Past and Incomplete</code></p>

<p><span itemscope itemtype="http://schema.org/Photograph"><img src="https://cdn-ak.f.st-hatena.com/images/fotolife/m/masutaka26/20200627/20200627013716.png" alt="f:id:masutaka26:20200627013716p:plain" title="f:id:masutaka26:20200627013716p:plain" class="hatena-fotolife" itemprop="image"></span></p>

<p>🌀 本当は Gmail の Inbox（受信トレイ）でリマインド管理したい。Snooze が使いやすいし。</p>

<h2 id="自分が他の人に依頼した時もリマインドを設定する">自分が他の人に依頼した時もリマインドを設定する</h2>

<p>相手が忘れても大丈夫になる。これも同期コミュニケーションから非同期への変換。</p>

<h2 id="チャンネルは優先度を付ける">チャンネルは優先度を付ける</h2>

<p>私の場合は <code>Starred</code> > <code>Low Priority</code> > <code>Channels</code> という優先度にしてます。
（優先度が分からなくなるので、<a href="https://slack.com/intl/ja-jp/help/articles/226410907-%E5%85%A8%E3%81%A6%E3%81%AE%E6%9C%AA%E8%AA%AD%E3%83%A1%E3%83%83%E3%82%BB%E3%83%BC%E3%82%B8%E3%82%92%E7%A2%BA%E8%AA%8D%E3%81%99%E3%82%8B">全未読機能</a>は使っていません）</p>

<p><span itemscope itemtype="http://schema.org/Photograph"><img src="https://cdn-ak.f.st-hatena.com/images/fotolife/m/masutaka26/20200627/20200627014706.png" alt="f:id:masutaka26:20200627014706p:plain" title="f:id:masutaka26:20200627014706p:plain" class="hatena-fotolife" itemprop="image"></span></p>

<p><code>Starred</code> と <code>Channels</code> は最初からあるグルーピングです。<code>Low Priority</code> は自分で作りました。</p>

<p>公式ヘルプ: <a href="https://slack.com/intl/ja-jp/help/articles/201331016-%E3%83%81%E3%83%A3%E3%83%B3%E3%83%8D%E3%83%AB%E3%82%84%E3%83%80%E3%82%A4%E3%83%AC%E3%82%AF%E3%83%88%E3%83%A1%E3%83%83%E3%82%BB%E3%83%BC%E3%82%B8%E3%81%AB%E3%82%B9%E3%82%BF%E3%83%BC%E3%82%92%E4%BB%98%E3%81%91%E3%82%8B">チャンネルやダイレクトメッセージにスターを付ける | Slack</a></p>

<p>💡 <code>Channels</code> の中には mute しているチャンネルもあります。</p>

<h2 id="見なくなったチャンネルからはこまめに抜ける">見なくなったチャンネルからはこまめに抜ける</h2>

<p>抜けたいチャンネルで <code>/leave</code> と発言すると、一瞬で抜けられるよ。</p>

<h2 id="未読チャンネルはショートカットキーで移動する">未読チャンネルはショートカットキーで移動する</h2>

<ul>
<li>Windows

<ul>
<li>前の未読チャンネルや DM に移動: <code>Alt</code> <code>Shift</code> <code>↑</code></li>
<li>次の未読チャンネルや DM に移動: <code>Alt</code> <code>Shift</code> <code>↓</code></li>
</ul>
</li>
<li>Mac

<ul>
<li>前の未読チャンネルや DM に移動: <code>Option</code> <code>Shift</code> <code>↑</code></li>
<li>次の未読チャンネルや DM に移動: <code>Option</code> <code>Shift</code> <code>↓</code></li>
</ul>
</li>
</ul>


<p>公式ヘルプ: <a href="https://slack.com/intl/ja-jp/help/articles/201374536-Slack-%E3%81%AE%E3%82%AD%E3%83%BC%E3%83%9C%E3%83%BC%E3%83%89%E3%82%B7%E3%83%A7%E3%83%BC%E3%83%88%E3%82%AB%E3%83%83%E3%83%88">Slack のキーボードショートカット | Slack</a></p>
]]></description>
            <enclosure url="https://cdn-ak.f.st-hatena.com/images/fotolife/m/masutaka26/20200627/20200627155056.png" length="0" type="image/png"/>
        </item>
        <item>
            <title><![CDATA[『第4回 データアーキテクト（データ整備人）を”前向きに”考える会』に初参加した #前向きデータ整備人]]></title>
            <link>https://masutaka.net/2020-06-09-1/</link>
            <guid>https://masutaka.net/2020-06-09-1/</guid>
            <pubDate>Tue, 09 Jun 2020 00:00:00 GMT</pubDate>
            <description><![CDATA[第4回 データアーキテクト（データ整備人）を”前向きに”考える会 - connpass 最近この辺の仕事をし始めていて会社の人が教えてくれたので、初参加してきました。YouTube ライブだったので、かなりお手軽な参加でした。
今回は LT 祭り。技術の話から温かみのある話まで、網羅的に話を聞けた気がします。
当日の #前向きデータ整備人 以下、個人的なメモです。
どうやって「データを整備すると良いことがある」を周りに伝えるか   主催者のしんゆうさん
使う人の気にすることを減らし、本来の分析に集中させるためにも、データ整備が必要。
データ分析する人は難しい SQL 書きたいわけではないですからね。データ分析をしたいわけでもないし、意思決定を素早くしたいはず。
データ整備に必要な「実装設計書」の作成とコミュニケーション事例 （フォーム URL を公開してよいか分からないので載せない）
小川 卓さん
分析の質は取得しているデータの質に依存する。いくら AI とかが発達してもこれは変わらない。まあそうだよね。
もう一度、表計算ソフトを愛でる   高比良 めぐみさん
秘伝のタレしがちだけど、使いどころによるという話。
個人的には、使い捨てのスプレッドシートや、BigQuery を介した機械的な利用には良さそうな気はしている。
スキル0が曖昧な領域を埋めるために人の流れを整備した話 TODO: 資料が公開されたらここに貼る
山崎 隆弘さん
今の会社は大企業ではないとは言え、関係性を増やすのは少し分かる。私がひきこもりニートなので、そんなには出来ないし、やりすぎないようにもしているけど。
embulk, digdagを用いたデータ基盤構築   土川 稔生さん
BigQuery に集約するためのノウハウの話だった。
今回話には出なかったけど、Redash のクエリの数は辛くないのかな。
私もちょっと前まで Redash を構築したり、少し SQL 書いてたけど、Redash のクエリ数が多くて辛い問題はあった。
最近機会があって Looker を学習しているけど、「ビジネス職の方がかんたんにデータを扱えるとはこういうことか」と感動している。学習や導入が進んだらどこかで話したい。
未来を変える！ Withユーザー志向   成瀬エールさん
 多くの運用担当者は、&ldquo;与えられた環境の中だけ&rdquo; の発想で運用、改善を行います。かつ結構我慢強いものです。]]></description>
        </item>
        <item>
            <title><![CDATA[エニタイムフィットネスを退会した #筋トレ]]></title>
            <link>https://masutaka.net/2020-06-08-1/</link>
            <guid>https://masutaka.net/2020-06-08-1/</guid>
            <pubDate>Mon, 08 Jun 2020 00:00:00 GMT</pubDate>
            <description><![CDATA[先ほど退会手続きを済ませてきた。
特に必要なものはなくて、（当たり前だが）建物に入るためにセキュリティキーが必要なくらい。署名をして手続完了。セキュリティキーは返却不要。7/1 から使えなくなるだけ。
正式な退会日は 6/30 なので、入会日である [2018-06-30-1] からちょうど丸２年となる。止める時は町屋から引っ越す時だと思っていたので、我ながら意外な結末。
COVID-19 騒動が発端ではあるが、改めて考えてみると、複数の理由が重なった退会だった。１つだけだったら退会してなかったと思う。
 自宅トレーニングを継続できてしまっている（#筋トレ from:masutaka ）。むしろ以前より頻度が上がった 自宅トレーニングを 2 ヶ月半ほど続けて、特に太らなかった。逆に腕立て伏せのおかげか、大胸筋が少し大きくなった ジムと比べて、自宅トレーニングで時間を短縮できた 3 月のエニタイムは以前より混んでいて、バーベルが使えない頻度が増えた 私が非常に暑がりなので、マスクしながらトレーニング出来ない  あと、改めて考えると、専属のトレーナーが 2 月に突然退職したことも影響したと思う。もし退職していなかったら、退会しなかったかもなという意味で。引力が減ってしまった。
退会者が急増しているのかと思ったけど、そこまでではないそう？東大の施設がまだ再開していないとかで、逆にそれ以上に入会者は増えているそう。それなら安心（？）
自宅トレーニングをいつまで続けられるか分からないけど、「やらなくちゃいけない」「やると決まっているのでやる」の精神で思考停止して継続していく。
自宅トレーニングで大いに参考にしたユウジさんの YouTube 動画。これを見て、ランジをかなり重要視してやってます。雨の日は室内でバックランジ。晴れたら広場でウォーキングランジ。腕立て伏せと腹筋はおまけ（それでもかなり息は上がるけど）。
   ]]></description>
        </item>
        <item>
            <title><![CDATA[iOS のショートカットで Slack Status 変更と勤怠打刻をいい感じにする]]></title>
            <link>https://masutaka.net/2020-05-24-1/</link>
            <guid>https://masutaka.net/2020-05-24-1/</guid>
            <pubDate>Sun, 24 May 2020 00:00:00 GMT</pubDate>
            <description><![CDATA[2 月からほぼフルリモートで仕事してます。
会社の勤怠管理システムはジョブカン が導入されています。物理出社していた時は、物理 Suica カードを NFC リーダーにタッチして打刻していました。
リモートワークでは物理タッチはできないため、Slack の任意のチャンネルで /jobcan_touch と POST して打刻しています。他の社員への共有も兼ねています。
ただ、毎日の /jobcan_touch が面倒になってきました。私は Slack status もゆるふわでセットしているため、追い打ちで面倒です。
いくつか試して今は iOS のショートカットに落ち着いたので、記事に残しておきます。
使い方 ホーム画面を右にスワイプすると現れるウィジェットに iOS ショートカットを登録し、直接使う３つのショートカットを表示させています。
使用感はこんな感じです。
 誤タップして打刻してしまうと、取り消しの申請が必要になるため、確認ダイアログを出しています。タイマーのダイアログはなんとなくです。
ショートカット構成 動作確認しやすくするために、ショートカットをコンポーネント化しています。
①②③が直接呼ぶショートカットは以下のとおりです。
① = ⑩ → ④
② = ⑤
③ = ⑥ → ⑩
さらに④⑤⑥はそれぞれ⑦⑧⑨を使います。
① 出勤 前述の通り、「⑩ /jobcan_touch」 → 「④ slack status 出勤」の順に実行するだけです。
実行された様子。ずっと「仕事開始」も変なので、この Status は 30 分で消えるようにしています（後述）。
② ランチ 「⑤ slack status ランチ」を実行したあと、確認ダイアログとともに iOS のタイマーを 60 分にセットしています。]]></description>
        </item>
        <item>
            <title><![CDATA[About]]></title>
            <link>https://masutaka.net/about/</link>
            <guid>https://masutaka.net/about/</guid>
            <pubDate>Fri, 24 Apr 2020 09:13:40 GMT</pubDate>
            <description><![CDATA[Takashi Masuda (masutaka) LookML 開発やデータ整備に専念している、ソフトウェアエンジニアです。
以前はウェブアプリケーションのバックエンドや、インフラの面倒を見ていました。その前は組込みソフトウェアエンジニアでした。
ここはそんなマスタカの変更履歴が記録されていくサイトです。
Company blogs  Feedforce Developer Blog &gt; masutaka  Feedforce Engineers&rsquo; blog &gt; masutaka ※ 旧ブログ  Slides  Speaker Deck &gt; masutaka   Devices  ASUS VivoBook S15 M533IA-BQ0BLT（インディーブラック）  OS: Manjaro , Windows 11  ref. [2021-05-06-1]    Pixel 3a XL Just Black  OS: Android 12  ref. [2020-07-14-1]    Fire HD 8（第 10 世代）ブラック  OS: Fire OS 7    Fire HD 10（第 11 世代）オリーブ  OS: Fire OS 7    Chromecast（第 3 世代）  ref.]]></description>
        </item>
        <item>
            <title><![CDATA[iOS Safari を Mac Safari でデバッグするときの注意点]]></title>
            <link>https://developer.feedforce.jp/entry/2020/04/20/201356</link>
            <guid>https://developer.feedforce.jp/entry/2020/04/20/201356</guid>
            <pubDate>Mon, 20 Apr 2020 11:13:56 GMT</pubDate>
            <description><![CDATA[<p>ごきげんようございます、<a href="https://developer.feedforce.jp/archive/author/tmd45">id:tmd45</a> です。</p>

<p>業務上の必要があって、タイトルのとおり iOS 端末（今回は iPhone XR）の Safari でのデバッグのため、Mac につないで Mac Safari の Web インスペクタを使いました。</p>

<p>このやり方については一般的によく情報が公開されてるので、ここでは割愛します。</p>

<p><span itemscope itemtype="http://schema.org/Photograph"><img src="https://cdn-ak.f.st-hatena.com/images/fotolife/t/tmd45/20200420/20200420201249.png" alt="f:id:tmd45:20200420201249p:plain" title="f:id:tmd45:20200420201249p:plain" class="hatena-fotolife" itemprop="image"></span></p>

<h3>今回ハマったことと解決法</h3>

<p>iPhone と Mac を USB ケーブルで繋ぎ、iPhone 側で「この Mac を信頼する」許可を行いました。</p>

<p>が、<b>その途端 Mac Safari の開発メニューから、繋げた iPhone デバイスが見つからなくなってしまいました</b>。
どこいったの私の iPhone ちゃん... Mac の Finder にはいるのに… 🤔</p>

<p>結果的に、<b>iPhone 側の Wifi を OFF に</b>したらデバイス表示されるようになりました。</p>

<p>ちなみにこの解にたどり着くまでに、iOS を最新にしたり、macOS を最新にしたり、双方を再起動したりもしています。最新バージョン同士になるように気をつけるのは基本でしょうね…（古いバージョンで確認したい場合は難儀ですが…）</p>

<p>またこの方法、今回の iPhone が Cellular 対応であったため事なきを得ていますが、Cellular 対応でない場合は Safari からインターネットにアクセスできなくなるので、あまり有効な方法とは思えません…</p>

<p>これに関する公式あるいは公式に近しいソース情報を見つけられていません。
なにか情報をお持ちの方がいたらぜひ <a href="https://twitter.com/tmd45">@tmd45</a> に教えてください…</p>

<p>普段から iOS 開発に精通しているわけではないので、超基本的なことだったらすみません！！！ 🙈</p>
]]></description>
            <enclosure url="https://cdn-ak.f.st-hatena.com/images/fotolife/t/tmd45/20200420/20200420201249.png" length="0" type="image/png"/>
        </item>
        <item>
            <title><![CDATA[Docker マルチアーキテクチャイメージのメモ]]></title>
            <link>https://masutaka.net/2020-04-11-1/</link>
            <guid>https://masutaka.net/2020-04-11-1/</guid>
            <pubDate>Sat, 11 Apr 2020 00:00:00 GMT</pubDate>
            <description><![CDATA[知らなかったのでメモしておく。
説明や利用方法はこちらの記事にまとまっている。
Dockerのマルチアーキテクチャイメージについて調べてみた｜Developers.IO  ・単一のDockerイメージで複数種類のOSやCPUアーキテクチャをサポートさせることができる。
・このイメージを起動させると、Dockerが実行されているホストのアーキテクチャに応じて適切なイメージが自動で選択される。
・Docker Hub上の公式イメージの多くはマルチアーキテクチャをサポートしている。
 作成方法は公式ドキュメントに書かれている。
Leverage multi-CPU architecture support｜Docker Documentation Experimental な buildx サブコマンドを使う。Docker Engine 19.03.8 から使える。
Docker for Mac の場合、Settings &gt; Command Line から experimental features を有効にする必要がある。
Settings &gt; Docker Engine で以下も設定する必要もあるかも。私はすでにこうなっていた。
{ &#34;debug&#34;: true, &#34;experimental&#34;: true } 前述の公式ドキュメントの通りにやると Docker Hub に masutaka/demo:latest が push される。
https://hub.docker.com/repository/docker/masutaka/demo/tags ※ masutaka/demo:default は &lsquo;$ docker build -t masutaka/demo:default .&rsquo; で普通にビルドした Docker Image。
builder は忘れずに元に戻しておく。
$ docker buildx ls NAME/NODE DRIVER/ENDPOINT STATUS PLATFORMS mybuilder docker-container mybuilder0 unix:///var/run/docker.]]></description>
        </item>
        <item>
            <title><![CDATA[AWS SDK for Ruby で S3 Select を使って S3 にある CSV ファイルからデータを抽出する]]></title>
            <link>https://developer.feedforce.jp/entry/2020/04/06/173701</link>
            <guid>https://developer.feedforce.jp/entry/2020/04/06/173701</guid>
            <pubDate>Mon, 06 Apr 2020 08:37:01 GMT</pubDate>
            <description><![CDATA[<p>こんにちは、<a href="http://blog.hatena.ne.jp/daido1976/" class="hatena-id-icon"><img src="https://cdn.profile-image.st-hatena.com/users/daido1976/profile.png" width="16" height="16" alt="" class="hatena-id-icon">id:daido1976</a> です。つい先日 30 歳になりました。</p>

<p>S3 に置いてある大きめの CSV ファイルから特定のデータだけ抽出して取得するのに S3 Select は大変便利です。</p>

<p><a href="https://aws.amazon.com/jp/athena/">Amazon Athena</a> とは違い単一のファイルのみしか対象にできませんが、その分手軽に利用することができます。</p>

<p>Python や Go の日本語記事はあるものの、Ruby の記事がなかったので書かせていただきます。</p>

<h2>実行環境</h2>

<ul>
<li>Ruby 2.7.0</li>
<li>aws-sdk-s3 1.60.2</li>
</ul>


<h2>コード例</h2>

<p>今回は複数の id をキーに CSV ファイルからデータを抽出する例を見てみましょう。</p>

<p>少し長いですが、以下のコードで動きます。</p>

<p><a href="https://docs.aws.amazon.com/sdk-for-ruby/v3/api/Aws/S3/Client.html#select_object_content-instance_method">Aws::S3::Client#select_object_content</a> が Ruby から S3 Select を使うためのメソッドです。</p>

<pre class="code lang-ruby" data-lang="ruby" data-unlink><span class="synPreProc">require</span> <span class="synSpecial">'</span><span class="synConstant">aws-sdk-s3</span><span class="synSpecial">'</span>
<span class="synPreProc">require</span> <span class="synSpecial">'</span><span class="synConstant">csv</span><span class="synSpecial">'</span>

s3_client = <span class="synType">Aws</span>::<span class="synType">S3</span>::<span class="synType">Client</span>.new(<span class="synConstant">region</span>: <span class="synSpecial">'</span><span class="synConstant">ap-northeast-1</span><span class="synSpecial">'</span>)

bucket = <span class="synSpecial">'</span><span class="synConstant">s3-select-sample</span><span class="synSpecial">'</span>
key = <span class="synSpecial">'</span><span class="synConstant">target_sample_users.csv</span><span class="synSpecial">'</span>

<span class="synComment"># サンプル用のデータを準備する</span>
s3_client.put_object(<span class="synConstant">bucket</span>: bucket, <span class="synConstant">key</span>: key, <span class="synConstant">body</span>: <span class="synType">File</span>.read(<span class="synSpecial">'</span><span class="synConstant">sample_users.csv</span><span class="synSpecial">'</span>))

<span class="synComment"># 与えられた ids 配列の id で検索し、id と name だけ抽出するクエリを作成する</span>
<span class="synPreProc">def</span> <span class="synIdentifier">build_query</span>(ids)
  &lt;&lt;~<span class="synConstant">QUERY</span>
<span class="synConstant">    SELECT</span>
<span class="synConstant">    s.id</span>
<span class="synConstant">    , s.name</span>
<span class="synConstant">    FROM S3Object s</span>
<span class="synConstant">    WHERE s.id</span>
<span class="synConstant">    IN ('</span><span class="synSpecial">#{</span>ids.join(<span class="synSpecial">&quot;</span><span class="synConstant">', '</span><span class="synSpecial">&quot;</span>)<span class="synSpecial">}</span><span class="synConstant">')</span>
<span class="synConstant">  </span><span class="synSpecial">QUERY</span>
<span class="synPreProc">end</span>

<span class="synComment"># `#select_object_content` に渡すパラメータを作成する</span>
<span class="synPreProc">def</span> <span class="synIdentifier">build_params</span>(bucket, key, query)
  {
    <span class="synConstant">bucket</span>: bucket,
    <span class="synConstant">key</span>: key,
    <span class="synConstant">expression_type</span>: <span class="synSpecial">'</span><span class="synConstant">SQL</span><span class="synSpecial">'</span>,
    <span class="synConstant">expression</span>: query,
    <span class="synConstant">input_serialization</span>: {
      <span class="synComment"># field_delimiter を &quot;\t&quot; にすることでタブ区切りのファイルにも対応可能</span>
      <span class="synConstant">csv</span>: { <span class="synConstant">file_header_info</span>: <span class="synSpecial">'</span><span class="synConstant">USE</span><span class="synSpecial">'</span>, <span class="synConstant">allow_quoted_record_delimiter</span>: <span class="synConstant">true</span>, <span class="synConstant">record_delimiter</span>: <span class="synSpecial">&quot;\n&quot;</span>, <span class="synConstant">field_delimiter</span>: <span class="synSpecial">'</span><span class="synConstant">,</span><span class="synSpecial">'</span> }
    },
    <span class="synConstant">output_serialization</span>: {
      <span class="synConstant">csv</span>: { <span class="synConstant">record_delimiter</span>: <span class="synSpecial">&quot;\n&quot;</span>, <span class="synConstant">field_delimiter</span>: <span class="synSpecial">'</span><span class="synConstant">,</span><span class="synSpecial">'</span> }
    }
  }
<span class="synPreProc">end</span>

<span class="synComment"># id が 1 と 50 のユーザを検索する</span>
query = build_query([<span class="synConstant">1</span>, <span class="synConstant">50</span>])
params = build_params(bucket, key, query)

<span class="synComment"># S3 Select を使ってレスポンスを取得する</span>
response = s3_client.select_object_content(params)

<span class="synComment"># `#event_type == :records` の中にレコード（抽出されたデータ）が含まれる</span>
csv_list = response.payload.select { |<span class="synIdentifier">p</span>| p.event_type == <span class="synConstant">:records</span> }.map(&amp;<span class="synConstant">:payload</span>).map(&amp;<span class="synConstant">:read</span>)
csv = <span class="synType">CSV</span>.parse(csv_list.join)

<span class="synComment"># マルチバイト文字列を扱う場合</span>
csv.map <span class="synStatement">do</span> |<span class="synIdentifier">row</span>|
  row.map { |<span class="synIdentifier">r</span>| r.force_encoding(<span class="synSpecial">'</span><span class="synConstant">UTF-8</span><span class="synSpecial">'</span>) }
<span class="synStatement">end</span>

p csv
</pre>


<p><code>sample_users.csv</code> は以下のような CSV を想定しています。（値は <a href="https://github.com/ffaker/ffaker">ffaker gem</a> を使って作成しました）</p>

<pre class="code" data-lang="" data-unlink>id,name,email,address,job
0,小出整,idell@boyle.us,773-9409 群馬県大府市安芸区福山市0丁目4番4号,運転手
1,坂口昭三,clifford.steuber@walshkutch.name,663-8507 東京都豊島区裾野市842,管理栄養士
2,池間悠希,taunya.kerluke@hellerweimann.ca,898-7832 東京都港区鯖江市8丁目5番3号,理学療法士
3,北野真美,rick.nitzsche@harvey.info,411-8019 静岡県大野市中村区駒ヶ根市9丁目4番9号,テレビディレクター
4,関根京子,francene@cummings.com,809-0176 東京都練馬区夕張市524,クラブDJ
5,熊本とうこ,bo.oconner@bradtkemiller.biz,423-3182 青森県柏原市佐渡市2丁目5番9号,指揮者
...
50,酒向彩香,seema.denesik@fahey.us,481-5386 宮崎県上高井郡にかほ市9丁目1番1号,クラブDJ</pre>


<p>上記コードを実行すると、出力は以下のようになります。</p>

<pre class="code" data-lang="" data-unlink>[[&#34;1&#34;, &#34;坂口昭三&#34;], [&#34;50&#34;, &#34;酒向彩香&#34;]]</pre>


<h2>補足</h2>

<p>レスポンスのサイズが不明な場合、S3 Select はデータを複数のイベントに分割し、ストリームとして返す仕様になっています。</p>

<p>今回は全てのデータが到着するのを待ってから処理するようなコードになっていますが、<a href="https://aws.amazon.com/jp/blogs/developer/introducing-support-for-amazon-s3-select-in-the-aws-sdk-for-ruby/">AWS Developer Blog</a> にはストリームを活かして複数のイベントを非同期に処理する方法も記載されていますので、ご興味のある方はぜひご覧になってください。</p>

<p>ちなみに S3 Select を S3 Management Console から試したい場合は以下の箇所から利用できます。ご参考まで。</p>

<p><figure class="figure-image figure-image-fotolife" title="最初この位置にあるの気づかなかった…"><span itemscope itemtype="http://schema.org/Photograph"><img src="https://cdn-ak.f.st-hatena.com/images/fotolife/d/daido1976/20200404/20200404205717.png" alt="f:id:daido1976:20200404205717p:plain" title="f:id:daido1976:20200404205717p:plain" class="hatena-fotolife" itemprop="image"></span><figcaption>最初この位置にあるの気づかなかった…</figcaption></figure></p>

<h2>結論</h2>

<p>S3 Select めっちゃ便利。</p>

<h2>参考</h2>

<ul>
<li><a href="https://aws.amazon.com/jp/blogs/developer/introducing-support-for-amazon-s3-select-in-the-aws-sdk-for-ruby/">Introducing support for Amazon S3 Select in the AWS SDK for Ruby | AWS Developer Blog</a></li>
<li><a href="https://docs.aws.amazon.com/sdk-for-ruby/v3/api/Aws/S3/Client.html">Class: Aws::S3::Client &mdash; AWS SDK for Ruby V3</a></li>
<li><a href="https://dev.classmethod.jp/articles/sugano-040-s3-select/">Amazon S3 Select &#x304C;&#x4E00;&#x822C;&#x516C;&#x958B;&#x3055;&#x308C;&#x305F;&#x306E;&#x3067;&#x4F7F;&#x3063;&#x3066;&#x307F;&#x305F;&#xFF08;Python&#xFF09; | Developers.IO</a></li>
<li><a href="https://dev.classmethod.jp/articles/amazon-s3-select-with-aws-sdk-for-go/">AWS SDK for Go &#x3067; Amazon S3 Select &#x3092;&#x8A66;&#x3057;&#x3066;&#x307F;&#x305F; | Developers.IO</a></li>
</ul>

]]></description>
            <enclosure url="https://cdn-ak.f.st-hatena.com/images/fotolife/d/daido1976/20200404/20200404225418.jpg" length="0" type="image/jpg"/>
        </item>
        <item>
            <title><![CDATA[NHK Eテレのテキシコーメモ]]></title>
            <link>https://masutaka.net/2020-04-02-1/</link>
            <guid>https://masutaka.net/2020-04-02-1/</guid>
            <pubDate>Thu, 02 Apr 2020 00:00:00 GMT</pubDate>
            <description><![CDATA[テキシコー [総合 小学校3･4･5･6年生、中・高]｜NHK for School 朝チラ見して良さげだったので、第5回まで全部見た。各回10分。以下メモ。
＜第1回＞
Scene2 電車のおもちゃのつかみが良かった。こんなふうに動くんだ。
＜第2回＞
Scene3 新幹線の座席のカバーを変えるやつ。プログラミング的思考とは何かが一番分かりやすいかも。
＜第4回＞
Scene3 犬のフンを片付けるやつ。チラ見した時、おーと普通に感心した。
Scene5 うんうん、こういうのもそうだよね。]]></description>
        </item>
        <item>
            <title><![CDATA[my_api_client v0.16.0 をリリースしました🚀]]></title>
            <link>https://ryz310.hateblo.jp/entry/2020/03/29/220805</link>
            <guid>https://ryz310.hateblo.jp/entry/2020/03/29/220805</guid>
            <pubDate>Sun, 29 Mar 2020 13:08:05 GMT</pubDate>
            <description><![CDATA[<p>前回のリリースから 1 週間ほどですが、今日予定していたライブが<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%B3%A5%ED%A5%CA%A5%A6%A5%A4%A5%EB%A5%B9">コロナウイルス</a>の影響で中止になったので暇を持て余しました 😷</p>

<p><iframe src="https://hatenablog-parts.com/embed?url=https%3A%2F%2Fgithub.com%2Fryz310%2Fmy_api_client%2Freleases%2Ftag%2Fv0.16.0" title="Release v0.16.0 · ryz310/my_api_client" class="embed-card embed-webcard" scrolling="no" frameborder="0" style="display: block; width: 100%; height: 155px; max-width: 500px; margin: 10px 0px;"></iframe><cite class="hatena-citation"><a href="https://github.com/ryz310/my_api_client/releases/tag/v0.16.0">github.com</a></cite></p>

<h2>v0.16.0 の新機能</h2>

<p>2 つありますが、どちらも若干の Breaking Change です。
とはいえ普通に使っていたら全く影響を受けないと思います。</p>

<h3><a href="https://github.com/ryz310/my_api_client/pull/225([@ryz310](https://github.com/ryz310">新機能 1. エラーハンドラがエラーを検出した際は常に例外を raise するようになりました</a></h3>

<p><code>my_api_client</code> では <a class="keyword" href="http://d.hatena.ne.jp/keyword/JSON">JSON</a> <a class="keyword" href="http://d.hatena.ne.jp/keyword/API">API</a> からのレスポンス内容に応じて例外を発生させる <code>error_handling</code> というメソッドが利用できます。</p>

<p>以下に <code>error_handling</code> を利用した例を示します。</p>

<pre class="code lang-ruby" data-lang="ruby" data-unlink><span class="synPreProc">class</span> <span class="synType">ExampleApiClient</span> &lt; <span class="synType">ApplicationApiClient</span>
  endpoint <span class="synSpecial">'</span><span class="synConstant">https://example.com</span><span class="synSpecial">'</span>

  error_handling <span class="synConstant">json</span>: { <span class="synSpecial">'</span><span class="synConstant">$.errors.code</span><span class="synSpecial">'</span>: <span class="synConstant">10</span> }

  error_handling <span class="synConstant">json</span>: { <span class="synSpecial">'</span><span class="synConstant">$.errors.code</span><span class="synSpecial">'</span>: <span class="synConstant">20</span> }, <span class="synConstant">raise</span>: <span class="synType">MyErrorClass</span>

  error_handling <span class="synConstant">json</span>: { <span class="synSpecial">'</span><span class="synConstant">$.errors.code</span><span class="synSpecial">'</span>: <span class="synConstant">30</span> }, <span class="synConstant">with</span>: <span class="synConstant">:my_error_handling</span>

  error_handling <span class="synConstant">json</span>: { <span class="synSpecial">'</span><span class="synConstant">$.errors.code</span><span class="synSpecial">'</span>: <span class="synConstant">40</span> } <span class="synStatement">do</span> |<span class="synIdentifier">params</span>, <span class="synIdentifier">logger</span>|
    <span class="synComment"># Do something.</span>
  <span class="synStatement">end</span>

  <span class="synComment"># GET error/:code</span>
  <span class="synPreProc">def</span> <span class="synIdentifier">request</span>
    get <span class="synSpecial">'</span><span class="synConstant">path/to/resouce</span><span class="synSpecial">'</span>
  <span class="synPreProc">end</span>

  <span class="synStatement">private</span>

  <span class="synPreProc">def</span> <span class="synIdentifier">my_error_handling</span>(params, logger)
    <span class="synComment"># Do something.</span>
  <span class="synPreProc">end</span>
<span class="synPreProc">end</span>
</pre>


<p>この例の場合、 <code>ExampleApiClient#request</code> を実行すると <code>GET https://example.com/path/to/resouce</code> に対してリク<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%A8%A5%B9">エス</a>トが実行され、レスポンスボディが <a class="keyword" href="http://d.hatena.ne.jp/keyword/JSON">JSON</a> 形式だった場合、JSONPath <code>$.error.code</code> の値に応じて以下の処理を実行します。</p>

<ul>
<li><code>10</code> だった場合 <code>MyApiClient::Error</code> を発生させる</li>
<li><code>20</code> だった場合 <code>MyErrorClass</code> を発生させる</li>
<li><code>30</code> だった場合 <code>#my_error_handling</code> を実行する <strong>（例外は発生しない）</strong></li>
<li><code>40</code> だった場合 <code>do ~ end</code> を実行する <strong>（例外は発生しない）</strong></li>
</ul>


<p><code>MyApiClient::Error</code> は <code>raise</code> オプションで例外クラスを指定しなかった場合のデフォルトの例外クラスです。</p>

<p>この時、従来は <code>30</code> と <code>40</code> のように <code>with</code> や <code>block</code> を利用した場合は、処理の中で明示的に <code>raise</code> を実行しない限り、例外は発生しませんでした。
エラー検出時に例外を発生させるかどうかは、 <code>my_api_client</code> の利用者に委ねられていた形になります。</p>

<p>しかしながら、ここに自由度を持たせるよりも、 <strong>エラー検出時には必ず <code>raise</code> させて <code>rescue</code> で異常時の処理を記述する</strong> 、という方式に統一した方が <code>my_api_client</code> の利用方法としても理解しやすく、特に困るケースも想定されなかったことから、以下のように変更することにしました。</p>

<ul>
<li><code>10</code> だった場合 <code>MyApiClient::Error</code> を発生させる <strong>（変更なし）</strong></li>
<li><code>20</code> だった場合 <code>MyErrorClass</code> を発生させる <strong>（変更なし）</strong></li>
<li><code>30</code> だった場合 <code>#my_error_handling</code> を実行し、 <strong><code>MyApiClient::Error</code> を発生させる</strong></li>
<li><code>40</code> だった場合 <code>do ~ end</code> を実行し、 <strong><code>MyApiClient::Error</code> を発生させる</strong></li>
</ul>


<p>今後はエラー検出時には常に何らかの例外が <code>raise</code> されるようになります。
上記の例では <code>MyApiClient::Error</code> が発生しますが、 <code>with</code> や <code>block</code> と同時に <code>raise</code> を指定すれば、任意の例外クラスが発生するようになります。</p>

<p>これにより、 <code>with</code> や <code>block</code> は例外の前処理という位置付けになります。<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%E6%A1%BC%A5%B9%A5%B1%A1%BC%A5%B9">ユースケース</a>としてはログ出力や slack への通知などが考えられます。</p>

<h3><a href="https://github.com/ryz310/my_api_client/pull/226">新機能 2. 標準のエラーハンドラが用意されました</a></h3>

<p><code>my_api_client</code> では <a href="https://github.com/ryz310/my_api_client/blob/e6e4d2265fc834925d45e023c7d43590f98b7171/README.jp.md#installation">generator 機能</a> が用意されており、 <code>$ rails g api_client path/to/resource get:path/to/resource</code> を実行すると以下のファイルが作成されます。</p>

<pre class="code" data-lang="" data-unlink>create  app/api_clients/application_api_client.rb
create  app/api_clients/path/to/resource_api_client.rb
invoke  rspec
create    spec/api_clients/path/to/resource_api_client_spec.rb` </pre>


<p>この時、 <code>application_api_client.rb</code> に標準のエラーハンドラの例がいくつか記載されるのですが、例というより必須のエラーハンドラだよね、ということで、 <code>my_api_client</code> の内部で標準実装するようにしました。
これにより、<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%B9%A5%C6%A1%BC%A5%BF%A5%B9%A5%B3%A1%BC%A5%C9">ステータスコード</a> 4xx と 5xx のレスポンスに対しては標準で例外が発生するようなります。また、ネットワーク系のエラーに対しても標準で <code>300 msec</code> 間隔を空けて 3 回リトライが試行されるようになります。（リトライ処理も従来は明示的な定義が必須でした）</p>

<pre class="code lang-ruby" data-lang="ruby" data-unlink><span class="synComment"># 従来の `application_api_client.rb` に出力されていた標準のエラーハンドラ例</span>
error_handling <span class="synConstant">status_code</span>: <span class="synConstant">400</span>..<span class="synConstant">499</span>, <span class="synConstant">raise</span>: <span class="synType">MyApiClient</span>::<span class="synType">ClientError</span>
error_handling <span class="synConstant">status_code</span>: <span class="synConstant">500</span>..<span class="synConstant">599</span>, <span class="synConstant">raise</span>: <span class="synType">MyApiClient</span>::<span class="synType">ServerError</span>

<span class="synComment"># 従来の `application_api_client.rb` に出力されていた標準のリトライ処理例</span>
retry_on <span class="synType">MyApiClient</span>::<span class="synType">NetworkError</span>, <span class="synConstant">wait</span>: <span class="synConstant">5</span>.seconds, <span class="synConstant">attempts</span>: <span class="synConstant">3</span>
</pre>


<p>標準で定義されているエラーハンドラは <a href="https://github.com/ryz310/my_api_client/blob/e6e4d2265fc834925d45e023c7d43590f98b7171/lib/my_api_client/default_error_handlers.rb">my_api_client/default_error_handlers.rb</a> から参照できます。</p>

<p><code>error_handling</code> は後から定義した物が優先されますので、例えば<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%B9%A5%C6%A1%BC%A5%BF%A5%B9%A5%B3%A1%BC%A5%C9">ステータスコード</a> <code>400</code> に対しては独自の例外クラスを発生させるようにしたい場合、継承先のクラスで <code>error_handling status_code: 400, raise: MyErrorClass</code> のように定義すれば、 <code>MyErrorClass</code> が例外として発生するようになります。</p>

<h2>所感</h2>

<p>社内のプロダクト用に作った gem ですが、少しずつ自分以外のエンジニアも利用してくれるようになってきました。
一方で、自由度が高過ぎると熟知していないと使えない機能が増えてしまう点を課題感として感じるようになってきました。</p>

<p>なるべく自由度の高い gem を意識しつつ、標準の状態でも高度な機能の恩恵を受けられる状態を目指していきたいと思います。</p>

<p>恐らく次の新機能は <code>async/await</code> っぽい機能、または <code>sawyer</code> gem の依存からの脱却なると思います。</p>
]]></description>
            <enclosure url="https://cdn.blog.st-hatena.com/images/theme/og-image-1500.png" length="0" type="image/png"/>
        </item>
        <item>
            <title><![CDATA[terraform を再帰的に実行する Makefile]]></title>
            <link>https://masutaka.net/2020-03-26-1/</link>
            <guid>https://masutaka.net/2020-03-26-1/</guid>
            <pubDate>Thu, 26 Mar 2020 00:00:00 GMT</pubDate>
            <description><![CDATA[[2019-05-07-1] に紹介した『Pragmatic Terraform on AWS 』に沿って設計すると、terraform のディレクトリは複数出来ると思います。
依存を分けることと、まとめて実行することはやや矛盾します。とは言え terraform や terraform provider がアップデートした時の terraform init/plan/apply はまとめてやりたいものです。
少し前に作って使っていますが、なかなか良い感じです。
使っている Makefile たち  この辺りを工夫しました。
・terraform init/plan/apply に失敗すると、即座に停止する
・make の -C オプションを使って、cd せずに make を実行できている。つまり cd .. とかで戻る必要がない。そういう理由で下位ディレクトリに Makefile 置いてる
・make の -w オプションを使って、以下のようなそれっぽいログを出している
$ make init-r make[1]: Entering directory `/Users/masutaka/src/github.com/masutaka/masutaka.net/terraform/aws&#39; (snip) make[1]: Leaving directory `/Users/masutaka/src/github.com/masutaka/masutaka.net/terraform/aws&#39; make[1]: Entering directory `/Users/masutaka/src/github.com/masutaka/masutaka.net/terraform/heroku&#39; (snip) make[1]: Leaving directory `/Users/masutaka/src/github.com/masutaka/masutaka.net/terraform/heroku&#39; direnv 使う場合 terraform では credential を注入するケースも多いので、direnv も使うことは多いのではないでしょうか。ルートに .envrc があるだけなら別ですが、各ディレクトリにもある場合はこのパッチが必要になると思います。]]></description>
        </item>
        <item>
            <title><![CDATA[my_api_client v0.15.0 をリリースしました🚀]]></title>
            <link>https://ryz310.hateblo.jp/entry/2020/03/21/163849</link>
            <guid>https://ryz310.hateblo.jp/entry/2020/03/21/163849</guid>
            <pubDate>Sat, 21 Mar 2020 07:38:49 GMT</pubDate>
            <description><![CDATA[<p>その前に <code>v0.14.0</code> もリリースしているのですが、こちらは<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%EA%A5%D5%A5%A1%A5%AF%A5%BF%A5%EA%A5%F3%A5%B0">リファクタリング</a>と Integration Test の実装だけで新機能はありませんでした。
差分が <code>+2,799 -1,246</code> もあるので中身は結構書き換わっています。</p>

<p><a href="https://github.com/ryz310/my_api_client/releases/tag/v0.14.0">Release v0.14.0 &middot; ryz310/my_api_client &middot; GitHub</a></p>

<p>Integration Test では <a href="https://rubyonjets.com/">Ruby on Jets</a> を使って <a class="keyword" href="http://d.hatena.ne.jp/keyword/AWS">AWS</a> Lambda でサーバーを建てて、CI でのテストで <code>my_api_client</code> を使って実際に HTTP リク<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%A8%A5%B9">エス</a>トが成功することを確認しているので、<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%C7%A5%B0%A5%EC">デグレ</a>の心配が随分と緩和されました 😌</p>

<h2>新機能: Pagination <a class="keyword" href="http://d.hatena.ne.jp/keyword/API">API</a> のサポート</h2>

<p>ここからは <code>v0.15.0</code> の話になります。</p>

<p><a href="https://github.com/ryz310/my_api_client/releases/tag/v0.15.0">Release v0.15.0 &middot; ryz310/my_api_client &middot; GitHub</a></p>

<p><code>v0.15.0</code> のメイン機能が Pagination <a class="keyword" href="http://d.hatena.ne.jp/keyword/API">API</a> のサポートになります。<a href="https://jsonapi.org/">JSON:API</a> というしっかりとした仕様もあるようですが、 <code>my_api_client</code> ではそこまで厳密な仕様に則っている訳ではなく、レスポンスに含まれる URL を認識して enumerable に HTTP リク<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%A8%A5%B9">エス</a>トを実行する、というざっくりした機能になります。
レスポンスヘッダの <code>Link</code> などで次のページの URL を返すケースもあるようですが、そちらは現時点では未対応です 🙏</p>

<p>Pagination <a class="keyword" href="http://d.hatena.ne.jp/keyword/API">API</a> という単語は <a class="keyword" href="http://d.hatena.ne.jp/keyword/Django">Django</a> REST Framework の Pagination 機能の説明で出てきます。</p>

<p><iframe src="https://hatenablog-parts.com/embed?url=https%3A%2F%2Fwww.django-rest-framework.org%2Fapi-guide%2Fpagination%2F" title="Pagination - Django REST framework" class="embed-card embed-webcard" scrolling="no" frameborder="0" style="display: block; width: 100%; height: 155px; max-width: 500px; margin: 10px 0px;"></iframe><cite class="hatena-citation"><a href="https://www.django-rest-framework.org/api-guide/pagination/">www.django-rest-framework.org</a></cite></p>

<p>要するに一度のリク<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%A8%A5%B9">エス</a>トで結果を全件取得させるのではなく、一定の件数を返却し、続きを取得できる Link を一緒に返却する <a class="keyword" href="http://d.hatena.ne.jp/keyword/API">API</a> のことですね。</p>

<p><strong>Request:</strong></p>

<pre class="code" data-lang="" data-unlink>GET https://api.example.org/accounts/?page=4</pre>


<p><strong>Response:</strong></p>

<pre class="code lang-json" data-lang="json" data-unlink><span class="synError">HTTP</span> 200 <span class="synError">OK</span>
<span class="synSpecial">{</span>
    &quot;<span class="synStatement">count</span>&quot;: 1023
    &quot;<span class="synStatement">next</span>&quot;: &quot;<span class="synConstant">https://api.example.org/accounts/?page=5</span>&quot;,
    &quot;<span class="synStatement">previous</span>&quot;: &quot;<span class="synConstant">https://api.example.org/accounts/?page=3</span>&quot;,
    &quot;<span class="synStatement">results</span>&quot;: <span class="synSpecial">[</span>
       …
    <span class="synSpecial">]</span>
<span class="synSpecial">}</span>
</pre>


<h3>使い方</h3>

<p><code>my_api_client</code> での使い方は以下のようになります。</p>

<pre class="code lang-ruby" data-lang="ruby" data-unlink><span class="synPreProc">class</span> <span class="synType">MyPaginationApiClient</span> &lt; <span class="synType">ApplicationApiClient</span>
  endpoint <span class="synSpecial">'</span><span class="synConstant">https://example.com/v1</span><span class="synSpecial">'</span>

  <span class="synComment"># GET pagination?page=1</span>
  <span class="synPreProc">def</span> <span class="synIdentifier">pagination</span>
    pageable_get <span class="synSpecial">'</span><span class="synConstant">pagination</span><span class="synSpecial">'</span>, <span class="synConstant">paging</span>: <span class="synSpecial">'</span><span class="synConstant">$.links.next</span><span class="synSpecial">'</span>, <span class="synConstant">headers</span>: headers, <span class="synConstant">query</span>: { <span class="synConstant">page</span>: <span class="synConstant">1</span> }
  <span class="synPreProc">end</span>

  <span class="synStatement">private</span>

  <span class="synPreProc">def</span> <span class="synIdentifier">headers</span>
    { <span class="synSpecial">'</span><span class="synConstant">Content-Type</span><span class="synSpecial">'</span>: <span class="synSpecial">'</span><span class="synConstant">application/json;charset=UTF-8</span><span class="synSpecial">'</span> }
  <span class="synPreProc">end</span>
<span class="synPreProc">end</span>
</pre>


<p>通常であれば <code>#get</code> を使って HTTP リク<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%A8%A5%B9">エス</a>トを実行させるのですが、ここでは <code>#pageable_get</code> というメソッドを使用しています。 <code>#pageable_get</code> だと長いので <code>#pget</code> という<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%A8%A5%A4%A5%EA%A5%A2%A5%B9">エイリアス</a>も用意しています。
また、 <code>paging</code> というキーワード引数も新たに出てきました。 <code>paging</code> ではレスポンスのどの部分に次のページの URL が含まれるかを JSONPath expression で指定します。</p>

<p><iframe src="https://hatenablog-parts.com/embed?url=https%3A%2F%2Fgoessner.net%2Farticles%2FJsonPath%2Findex.html%23e2" title="JSONPath - XPath for JSON" class="embed-card embed-webcard" scrolling="no" frameborder="0" style="display: block; width: 100%; height: 155px; max-width: 500px; margin: 10px 0px;"></iframe><cite class="hatena-citation"><a href="https://goessner.net/articles/JsonPath/index.html#e2">goessner.net</a></cite></p>

<p>以下のような <a class="keyword" href="http://d.hatena.ne.jp/keyword/JSON">JSON</a> であれば、 <code>$.links.next</code> という JSONPath expression は <code>"https://example.com/pagination?page=3"</code> を取得します。</p>

<pre class="code lang-json" data-lang="json" data-unlink><span class="synSpecial">{</span>
  &quot;<span class="synStatement">links</span>&quot;: <span class="synSpecial">{</span>
    &quot;<span class="synStatement">next</span>&quot;: &quot;<span class="synConstant">https://example.com/pagination?page=3</span>&quot;,
    &quot;<span class="synStatement">previous</span>&quot;: &quot;<span class="synConstant">https://example.com/pagination?page=1</span>&quot;<span class="synError">,</span>
<span class="synError">  }</span>,
  &quot;<span class="synStatement">page</span>&quot;: <span class="synConstant">2</span>
}
</pre>


<p>作成した <a class="keyword" href="http://d.hatena.ne.jp/keyword/API">API</a> Client は以下のように使用できます。</p>

<pre class="code lang-ruby" data-lang="ruby" data-unlink>api_clinet = <span class="synType">MyPaginationApiClient</span>.new
api_clinet.pagination.each <span class="synStatement">do</span> |<span class="synIdentifier">response</span>|
  <span class="synComment"># Do something.</span>
<span class="synStatement">end</span>

p = api_clinet.pagination
p.next <span class="synComment"># =&gt; 1st page result</span>
p.next <span class="synComment"># =&gt; 2nd page result</span>
p.next <span class="synComment"># =&gt; 3rd page result</span>
</pre>


<h3>結果は <code>Enumerator::Lazy</code> で返却される</h3>

<p><code>#pageable_get</code> は <code>Enumerator::Lazy</code> を返却するので、 <code>Enumerable</code> で定義されているメソッドは一通り利用可能です。</p>

<p><iframe src="https://hatenablog-parts.com/embed?url=https%3A%2F%2Fdocs.ruby-lang.org%2Fja%2Flatest%2Fclass%2FEnumerator%3D3a%3D3aLazy.html" title="class Enumerator::Lazy (Ruby 2.7.0 リファレンスマニュアル)" class="embed-card embed-webcard" scrolling="no" frameborder="0" style="display: block; width: 100%; height: 155px; max-width: 500px; margin: 10px 0px;"></iframe><cite class="hatena-citation"><a href="https://docs.ruby-lang.org/ja/latest/class/Enumerator=3a=3aLazy.html">docs.ruby-lang.org</a></cite></p>

<p><code>Enumerator</code> で返してしまうと <code>#take</code> で 100 ページ目まで結果を取得するような処理を記述したときに、</p>

<ol>
<li>100 ページ分の HTTP リク<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%A8%A5%B9">エス</a>トを実行</li>
<li>結果を <code>#each</code> で回す</li>
</ol>


<p>という動きになり、 100 回分の HTTP リク<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%A8%A5%B9">エス</a>トが完了するまで次の処理に移ることができません。</p>

<p><code>Enumerator::Lazy</code> であれば、</p>

<ol>
<li>1 ページ目の HTTP リク<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%A8%A5%B9">エス</a>トを実行</li>
<li>結果を処理する</li>
<li>2ページ目の HTTP リク<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%A8%A5%B9">エス</a>トを実行</li>
<li>結果を処理する</li>
<li>...</li>
</ol>


<p>という動きになってくれます。便利ですね ✨</p>

<p><code>Enumerator</code> と <code>Enumerator::Lazy</code> の違いは以下の記事が参考になると思います。</p>

<p><iframe src="https://hatenablog-parts.com/embed?url=https%3A%2F%2Fqiita.com%2Fgam0022%2Fitems%2F8acfc0c674b96060c03f" title="EnumeratorとEnumerator::Lazyの違い - Qiita" class="embed-card embed-webcard" scrolling="no" frameborder="0" style="display: block; width: 100%; height: 155px; max-width: 500px; margin: 10px 0px;"></iframe><cite class="hatena-citation"><a href="https://qiita.com/gam0022/items/8acfc0c674b96060c03f">qiita.com</a></cite></p>
]]></description>
            <enclosure url="https://cdn.blog.st-hatena.com/images/theme/og-image-1500.png" length="0" type="image/png"/>
        </item>
        <item>
            <title><![CDATA[『HerokuでSidekiqを監視する方法を確立した』という発表をした]]></title>
            <link>https://developer.feedforce.jp/entry/2020/03/02/140000</link>
            <guid>https://developer.feedforce.jp/entry/2020/03/02/140000</guid>
            <pubDate>Mon, 02 Mar 2020 05:00:00 GMT</pubDate>
            <description><![CDATA[<p>こんにちは <a href="http://blog.hatena.ne.jp/masutaka26/" class="hatena-id-icon"><img src="https://cdn.profile-image.st-hatena.com/users/masutaka26/profile.png" width="16" height="16" alt="" class="hatena-id-icon">id:masutaka26</a> です。最近はドラクエウォークと足底筋膜炎との両立に悩んでいます。</p>

<p>先週の金曜日、週次の社内勉強会 <a href="https://developer.feedforce.jp/archive/category/FFTT">FFTT</a> で『HerokuでSidekiqを監視する方法を確立した』という発表をしました。</p>

<iframe src="https://docs.google.com/presentation/d/e/2PACX-1vTZAByBIEhPjehZJ8Jb3atZBJSpu1R371Z3qQZcolE99poCpdYHWfWl5tlH2pQxwBedoCBPYK8rTwoI/embed?start=false&loop=false&delayms=3000" frameborder="0" width="960" height="400" allowfullscreen="true" mozallowfullscreen="true" webkitallowfullscreen="true"></iframe>


<p>Heroku で Sidekiq を監視する知見を見つけられなかったのが、このお題を選んだ経緯です。どなたかが参考になるとうれしいです。</p>

<p>今回は自宅からのリモート発表でした。物理発表と違って、話した内容よりもリアクションの分からなさによる戸惑いが気になってしまいました。（オイ</p>

<p>※ リアクションはしてくれてたみたいです。🙏</p>

<p>複数モニター必須とか、いろいろ知見がありそうなので、今後蓄積出来ると良さそうです。</p>
]]></description>
            <enclosure url="https://cdn-ak.f.st-hatena.com/images/fotolife/m/masutaka26/20200302/20200302102630.png" length="0" type="image/png"/>
        </item>
        <item>
            <title><![CDATA[スレッドセーフでない Dir.chdir の使用を RuboCop で禁止する]]></title>
            <link>https://masutaka.net/2020-02-25-1/</link>
            <guid>https://masutaka.net/2020-02-25-1/</guid>
            <pubDate>Tue, 25 Feb 2020 00:00:00 GMT</pubDate>
            <description><![CDATA[週刊Railsウォッチ（20200225前編）RubyのShellwordsライブラリは知っておくべき、VCRはやはり有能、copを自作、Hix on Rails記事ほか｜TechRacho（テックラッチョ）〜エンジニアの「？」を「！」に〜｜BPS株式会社  RuboCopでコードレビュー支援: Net::HTTPを使わせないcop（Hacklines より）
 そういえば以前業務で似たことをやったので、メモがてら置いておきます。
Dir.chdir はスレッドセーフではない Sidekiq で Dir.chdir を使ったら、他のジョブと干渉してハマりました。
Feature #9785: Feature Proposal: Dir.chdir Thread Safety - Ruby master - Ruby Issue Tracking System ↑ こちらの Issue を見つけるまで、Dir.chdir がスレッドセーフでないことを知りませんでした。Dir.chdir はプロセス全体の working directory を変えてしまうようです。裏側を想像するに仕方がない気はしますが、ruby のドキュメントには書いてないです。
今後レビューで指摘し続けるのも大変なので、RuboCop の custom cop で解決できないか検討しました。
RuboCop の custom cop は作成も導入も割と簡単だった とは言え、rubocop-rspec みたいな gem を作るのは大げさです。
調べたところ、gem を作らずに、簡単に自作の custom cop を導入することが出来ました。
 ruby 付属の ruby-parse コマンドで AST（抽象構文木）を得ることが出来ます。
$ ruby-parse -e &#39;Dir.chdir&#39; (send (const nil :Dir) :chdir) $ ruby-parse -e &#39;hoge ?]]></description>
        </item>
        <item>
            <title><![CDATA[駆け込みで Chrome 80 の SameSite=None; Secure の対応をやった🍪]]></title>
            <link>https://ryz310.hateblo.jp/entry/2020/02/20/235548</link>
            <guid>https://ryz310.hateblo.jp/entry/2020/02/20/235548</guid>
            <pubDate>Thu, 20 Feb 2020 14:55:48 GMT</pubDate>
            <description><![CDATA[<p>ご存知の方も多いかと思いますが、 <a class="keyword" href="http://d.hatena.ne.jp/keyword/Chrome">Chrome</a> 80 から 3rd Party <a class="keyword" href="http://d.hatena.ne.jp/keyword/Cookie">Cookie</a> の取り扱いが厳しくなり、特に指定がないと外部サイトの <a class="keyword" href="http://d.hatena.ne.jp/keyword/Cookie">Cookie</a> は <strong>POST・iframe・XHR 等のリク<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%A8%A5%B9">エス</a>ト</strong>  で送られなくなります。</p>

<p><iframe src="https://hatenablog-parts.com/embed?url=https%3A%2F%2Fdevelopers-jp.googleblog.com%2F2019%2F11%2Fcookie-samesitenone-secure.html" title="新しい Cookie 設定 SameSite=None; Secure の準備を始めましょう" class="embed-card embed-webcard" scrolling="no" frameborder="0" style="display: block; width: 100%; height: 155px; max-width: 500px; margin: 10px 0px;"></iframe><cite class="hatena-citation"><a href="https://developers-jp.googleblog.com/2019/11/cookie-samesitenone-secure.html">developers-jp.googleblog.com</a></cite></p>

<blockquote><p>2 月の <a class="keyword" href="http://d.hatena.ne.jp/keyword/Chrome">Chrome</a> 80 以降、SameSite 値が宣言されていない <a class="keyword" href="http://d.hatena.ne.jp/keyword/Cookie">Cookie</a> は SameSite=Lax として扱われます。外部アクセスは、SameSite=None; Secure 設定のある <a class="keyword" href="http://d.hatena.ne.jp/keyword/Cookie">Cookie</a> のみ可能になります。ただし、これらが安全な接続からアクセスされることが条件です。</p></blockquote>

<p>とはいえ完全に無効になるわけではなく、 <code>SameSite</code> という属性が宣言されていない <a class="keyword" href="http://d.hatena.ne.jp/keyword/Cookie">Cookie</a> は <code>Lax</code> という区分がデフォルトで適用されるという物なので、サーバーから返す <a class="keyword" href="http://d.hatena.ne.jp/keyword/Cookie">Cookie</a> に対して明示的に <code>SameSite</code> を <code>None</code> に指定して、かつ <code>Secure</code> という属性を付与すれば、従来どおり <a class="keyword" href="http://d.hatena.ne.jp/keyword/Cookie">Cookie</a> が送信されます。</p>

<p>去年の秋くらいにもこの <a class="keyword" href="http://d.hatena.ne.jp/keyword/Cookie">Cookie</a> の対応が必要かどうか、会社で調査していたんですが、その時点では影響を受ける箇所が無くて、特に何も対応せずにスルーしていたんですが、現在開発してる新機能が<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A4%BF%A4%DE%A4%BF%A4%DE%A4%B3">たまたまこ</a>の影響を受ける機能だったため、急遽対応することになりました。</p>

<p>結構厳しいな、と思ったのは、これが原因で動かないことに気付くのが結構難しいんですよね。
<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%B7%A5%F3%A5%B0%A5%EB%A5%B5%A5%A4%A5%F3%A5%AA%A5%F3">シングルサインオン</a>みたいな機能を作ってると<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%C9%A5%E1%A5%A4%A5%F3">ドメイン</a>が異なるので 3rd Party <a class="keyword" href="http://d.hatena.ne.jp/keyword/Cookie">Cookie</a> の扱いになります。
そして <a class="keyword" href="http://d.hatena.ne.jp/keyword/Cookie">Cookie</a> に入っているはずの Session ID が送られてこないので、サーバー側で Session が見つからずにエラー。</p>

<p>自分の手元の <a class="keyword" href="http://d.hatena.ne.jp/keyword/Chrome">Chrome</a> は 79 で、まだ上記の制限が入っていなかったんですが、以前影響範囲を調査した時に <code>chrome://flags</code> から有効にするフラグを ON にしていたので、他のエンジニアの環境では動作するけど、自分だけ動かないということになり、もしかして、と思って気付いた感じです。</p>

<p>リリース後に気付いてたらヤバかったですね。。</p>

<p>で、こういう問題は <a class="keyword" href="http://d.hatena.ne.jp/keyword/Rails">Rails</a> みたいな<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%D5%A5%EC%A1%BC%A5%E0%A5%EF%A1%BC%A5%AF">フレームワーク</a>で対応してくれよって気持ちになるんですが、ちゃんと対応する PR は作られていて、すでに merge もされています。</p>

<p><iframe src="https://hatenablog-parts.com/embed?url=https%3A%2F%2Fgithub.com%2Frails%2Frails%2Fpull%2F28297" title="Add SameSite to Cookies by cfabianski · Pull Request #28297 · rails/rails" class="embed-card embed-webcard" scrolling="no" frameborder="0" style="display: block; width: 100%; height: 155px; max-width: 500px; margin: 10px 0px;"></iframe><cite class="hatena-citation"><a href="https://github.com/rails/rails/pull/28297">github.com</a></cite></p>

<p>ですが、 2020/2/20 現在、これを反映した <a class="keyword" href="http://d.hatena.ne.jp/keyword/Rails">Rails</a> はまだリリースされていないみたいですね。（最新が 2019/12/19 にリリースされた <code>6.0.2.1</code> ）
また、 <a class="keyword" href="http://d.hatena.ne.jp/keyword/Rails">Rails</a> 5.2 に反映されるかどうかは微妙な感じになっています。</p>

<p><a href="https://github.com/rails/rails/pull/28297#issuecomment-577414543">https://github.com/rails/rails/pull/28297#issuecomment-577414543</a></p>

<blockquote><p>We will backport to 6.0 as a bug fix, but I don't know this warrants a backport to a security only release like 5.2. <a class="keyword" href="http://d.hatena.ne.jp/keyword/Rails">Rails</a> 6.0 was released 6 months ago, and upgrading applications could be high, high priority if that problem is so important.</p>

<p>バグ修正として6.0にバックポートしますが、これが5.2のようなセキュリティのみのリリースへのバックポートを保証するかどうかわかりません。 <a class="keyword" href="http://d.hatena.ne.jp/keyword/Rails">Rails</a> 6.0は6か月前にリリースされました。その問題が非常に重要な場合、アプリケーションのアップグレードは優先度が高くなる可能性があります。</p></blockquote>

<p>自分の開発環境は恥ずかしながら <a class="keyword" href="http://d.hatena.ne.jp/keyword/Rails">Rails</a> 4.2 （今年中にアップデートします！）なので、当然反映されるはずもないので、自前で Rack を作成して対応しました。
参考まで以下のようなコードになります。</p>

<pre class="code lang-ruby" data-lang="ruby" data-unlink><span class="synComment"># config/initializers/custom_rack_middleware.rb</span>

<span class="synComment"># </span><span class="synTodo">NOTE</span><span class="synComment">: Rails 6.0.x であれば以下の処理は不要となる。</span>
<span class="synType">Rails</span>.application.config.middleware.insert_before(
  <span class="synType">ActionDispatch</span>::<span class="synType">Cookies</span>,
  <span class="synType">CustomRackMiddleware</span>::<span class="synType">SetSameSiteOptionOnCookie</span>
)
</pre>




<pre class="code lang-ruby" data-lang="ruby" data-unlink><span class="synComment"># lib/custom_rack_middleware/set_same_site_option_on_cookie.rb</span>

<span class="synComment"># </span><span class="synTodo">TODO</span><span class="synComment">: Rails 6.0.x にアップデートしたら削除する</span>
<span class="synPreProc">module</span> <span class="synType">CustomRackMiddleware</span>
  <span class="synPreProc">class</span> <span class="synType">SetSameSiteOptionOnCookie</span>
    <span class="synPreProc">def</span> <span class="synIdentifier">initialize</span>(app)
      <span class="synIdentifier">@app</span> = app
    <span class="synPreProc">end</span>

    <span class="synPreProc">def</span> <span class="synIdentifier">call</span>(env)
      status, headers, body = <span class="synIdentifier">@app</span>.call(env)

      cookies = headers[<span class="synSpecial">'</span><span class="synConstant">Set-Cookie</span><span class="synSpecial">'</span>]
      <span class="synStatement">if</span> cookies.present?
        processed_cookies = cookies.split(<span class="synSpecial">&quot;\n&quot;</span>).map <span class="synStatement">do</span> |<span class="synIdentifier">cookie</span>|
          <span class="synSpecial">&quot;#{</span>cookie<span class="synSpecial">}</span><span class="synConstant">; SameSite=None; Secure</span><span class="synSpecial">&quot;</span>
        <span class="synStatement">end</span>
        headers[<span class="synSpecial">'</span><span class="synConstant">Set-Cookie</span><span class="synSpecial">'</span>] = processed_cookies.join(<span class="synSpecial">&quot;\n&quot;</span>)
      <span class="synStatement">end</span>

      [status, headers, body]
    <span class="synPreProc">end</span>
  <span class="synPreProc">end</span>
<span class="synPreProc">end</span>
</pre>


<p><strong>2020/02/22 追記</strong></p>

<p>ローカルの開発環境など HTTP リク<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%A8%A5%B9">エス</a>トをする環境だと、 <code>SameSite=None</code> の設定を入れると <a class="keyword" href="http://d.hatena.ne.jp/keyword/Cookie">Cookie</a> が送られなくなるようです。</p>

<p>ローカルでは上述の Rack を読み込ませないようにするなどの工夫が必要だと思います。</p>
]]></description>
            <enclosure url="https://cdn.blog.st-hatena.com/images/theme/og-image-1500.png" length="0" type="image/png"/>
        </item>
        <item>
            <title><![CDATA[Heroku Ruby Language Metrics のメトリクス収集の仕組みを調べた]]></title>
            <link>https://developer.feedforce.jp/entry/2020/02/13/150000</link>
            <guid>https://developer.feedforce.jp/entry/2020/02/13/150000</guid>
            <pubDate>Thu, 13 Feb 2020 06:00:00 GMT</pubDate>
            <description><![CDATA[<p>こんにちは。<a href="http://blog.hatena.ne.jp/masutaka26/" class="hatena-id-icon"><img src="https://cdn.profile-image.st-hatena.com/users/masutaka26/profile.png" width="16" height="16" alt="" class="hatena-id-icon">id:masutaka26</a> です。</p>

<p>半年くらい前から <a href="https://devcenter.heroku.com/articles/language-runtime-metrics-ruby">Heroku の Ruby Language Metrics</a> (Public Beta) を使い始めました。その時、どのようにメトリクスを収集しているか調べたので、この記事にまとめます。（なぜこのタイミング...）</p>

<p>有効にする方法は前述の公式ドキュメントをどうぞ。<a href="http://blog.hatena.ne.jp/sho7650/" class="hatena-id-icon"><img src="https://cdn.profile-image.st-hatena.com/users/sho7650/profile.png" width="16" height="16" alt="" class="hatena-id-icon">id:sho7650</a> の記事も併せて読むと分かりやすいと思います。</p>

<p><iframe src="https://hatenablog-parts.com/embed?url=https%3A%2F%2Fqiita.com%2Fsho7650%2Fitems%2F7315e78fa3e6aa75b85b" title="[Ruby] より細かくMetricsを取得したい [Heroku] - Qiita" class="embed-card embed-webcard" scrolling="no" frameborder="0" style="display: block; width: 100%; height: 155px; max-width: 500px; margin: 10px 0px;"></iframe><cite class="hatena-citation"><a href="https://qiita.com/sho7650/items/7315e78fa3e6aa75b85b">qiita.com</a></cite></p>

<p>ところで、いつから Public Beta だったのですかね？ GA はいつになるのかな...？</p>

<h2>概要</h2>

<p>今回は Rails 前提で説明します。このような仕組みでメトリクスの収集と送信が行われます。</p>

<ol>
<li><a href="https://github.com/heroku/heroku-buildpack-metrics/">heroku/metrics buildpack</a> により、Dyno 起動時に <a href="https://github.com/heroku/agentmon">agentmon</a> がインストールされ、常駐する</li>
<li>Rails が起動すると、<a href="https://github.com/heroku/barnes">barnes</a> gem がメトリクスを収集し始め、定期的に localhost の agentmon に送信する</li>
<li>agentmon は <code>https://app.metrics.heroku.com/&lt;dyno id&gt;</code> にメトリクスを送信する</li>
<li>エンジニアは Heroku Dashboard から Ruby のメトリクスを閲覧できる</li>
</ol>


<h2>agentmon のインストールと起動</h2>

<p><a href="https://github.com/heroku/heroku-buildpack-metrics/">heroku/metrics buildpack</a> によって、agentmon というデーモンがインストールされます。</p>

<p><a class="embedly-card" href="https://github.com/heroku/agentmon">heroku/agentmon</a></p>

<p>agentmon は後述する barnes gem から受け取ったメトリクスを <code>https://app.metrics.heroku.com/&lt;dyno id&gt;</code> に送信します。</p>

<p>この URL は環境変数 <code>HEROKU_METRICS_URL</code> の値で、Heroku Dashboard から Enhanced Language Metrics を有効にすると、各 Dyno で定義されます。</p>

<p>面白いのは、Slug 生成時には <a href="https://github.com/heroku/heroku-buildpack-metrics/blob/053529d2488d1108d8fd777c2ef6575d899dcf20/bin/compile#L15-L17">/app/.profile.d/heroku-metrics-daemon.sh がインストールされる</a>だけで、Dyno 起動時にこのスクリプトが実行され、<a href="https://github.com/heroku/heroku-buildpack-metrics/blob/053529d2488d1108d8fd777c2ef6575d899dcf20/.profile.d/heroku-metrics-daemon.sh">agentmon のインストールと起動が行われる</a>ことです。</p>

<p>Dyno では通常 Puma などのプロセスしか起動されませんが、このような方法を使えばデーモンも起動できることを初めて知りました。</p>

<p>ちなみに <a href="https://devcenter.heroku.com/articles/buildpack-api#profile-d-scripts">Dyno が起動する時 /etc/profile によって <code>/app/.profile.d/*.sh</code> がすべて実行されます</a>。</p>

<h2>barnes gem によるメトリクス収集と送信</h2>

<p><a class="embedly-card" href="https://github.com/heroku/barnes">heroku/barnes</a></p>

<p>Rails が起動すると、<a href="https://github.com/heroku/barnes/blob/v0.0.8/lib/barnes.rb#L40-L64">Barnes.start</a> から呼ばれる <a href="https://github.com/heroku/barnes/blob/v0.0.8/lib/barnes/periodic.rb#L31-L67">Barnes::Periodic.new</a> で Ruby のスレッドが作られます。</p>

<p><code>Barnes.start</code> はすぐに終了しますが、作られたスレッドは非同期で実行されます。無限ループのスレッドなので、Rails が起動している間、起動し続けます。</p>

<p>この無限ループでは 10 秒に 1 回、後述するメトリクスを収集し、localhost の agentmon に送信します。</p>

<p>送信するのはスレッド中のインスタンス変数 <code>@reporter</code> です。これは <a href="https://github.com/heroku/barnes/blob/v0.0.8/lib/barnes/reporter.rb">Barnes::Reporter</a> のインスタンスで、<code>statsd_client</code> を介して agentmon に送信します。</p>

<p><code>statsd_client</code> は <code>Barnes::Reporter.new</code> 時に渡されます。
<a href="https://github.com/heroku/barnes/blob/v0.0.8/lib/barnes.rb#L51">https://github.com/heroku/barnes/blob/v0.0.8/lib/barnes.rb#L51</a></p>

<h2>収集されるメトリクス</h2>

<p><code>Barnes::ResourceUsage</code> では収集されるメトリクスを一望できます。
<a href="https://github.com/heroku/barnes/blob/v0.0.8/lib/barnes/resource_usage.rb#L28-L63">https://github.com/heroku/barnes/blob/v0.0.8/lib/barnes/resource_usage.rb#L28-L63</a></p>

<p>収集されるメトリクスと、収集方法です。</p>

<ul>
<li>Puma のメトリクス（ <code>Barnes::Instruments::PumaInstrument</code> ）

<ul>
<li><a href="https://github.com/heroku/barnes/blob/v0.0.8/lib/barnes/instruments/puma_instrument.rb#L33-L48">https://github.com/heroku/barnes/blob/v0.0.8/lib/barnes/instruments/puma_instrument.rb#L33-L48</a></li>
</ul>
</li>
<li>CPU 実行時間等のメトリクス（ <code>Barnes::Instruments::Stopwatch</code> ）

<ul>
<li><a href="https://github.com/heroku/barnes/blob/v0.0.8/lib/barnes/instruments/stopwatch.rb#L36-L58">https://github.com/heroku/barnes/blob/v0.0.8/lib/barnes/instruments/stopwatch.rb#L36-L58</a></li>
</ul>
</li>
<li><a href="https://docs.ruby-lang.org/ja/2.7.0/class/ObjectSpace.html#M_COUNT_OBJECTS">ObjectSpace.count_objects</a> の結果（ <code>Barnes::Instruments::ObjectSpaceCounter</code> ）

<ul>
<li><a href="https://github.com/heroku/barnes/blob/v0.0.8/lib/barnes/instruments/object_space_counter.rb#L27-L30">https://github.com/heroku/barnes/blob/v0.0.8/lib/barnes/instruments/object_space_counter.rb#L27-L30</a></li>
</ul>
</li>
<li><a href="https://docs.ruby-lang.org/ja/2.7.0/method/GC/s/stat.html">GC.stat</a> の結果（ <code>Barnes::Instruments::RubyGC</code> ）

<ul>
<li><a href="https://github.com/heroku/barnes/blob/v0.0.8/lib/barnes/instruments/ruby_gc.rb#L62-L84">https://github.com/heroku/barnes/blob/v0.0.8/lib/barnes/instruments/ruby_gc.rb#L62-L84</a></li>
</ul>
</li>
</ul>


<h2>まとめ</h2>

<p>Heroku Ruby Language Metrics のメトリクス収集の仕組みを調べました。</p>

<p>ただ有効にするだけだと、他のエンジニアに説明することができなかったことが、今回調べた動機です。</p>

<p>今回に限りませんが、Heroku は完全なブラックボックスではなく、調べると実装が透けて見えるのがとても良いと思います。</p>

<script async src="//cdn.embedly.com/widgets/platform.js" charset="UTF-8"></script>

]]></description>
            <enclosure url="https://cdn-ak.f.st-hatena.com/images/fotolife/m/masutaka26/20181113/20181113190345.png" length="0" type="image/png"/>
        </item>
        <item>
            <title><![CDATA[Pusher の Private channels と認証周りの処理を追いかけた]]></title>
            <link>https://developer.feedforce.jp/entry/2020/02/05/172927</link>
            <guid>https://developer.feedforce.jp/entry/2020/02/05/172927</guid>
            <pubDate>Wed, 05 Feb 2020 08:29:27 GMT</pubDate>
            <description><![CDATA[<p>こんにちは、<a href="http://blog.hatena.ne.jp/daido1976/" class="hatena-id-icon"><img src="https://cdn.profile-image.st-hatena.com/users/daido1976/profile.png" width="16" height="16" alt="" class="hatena-id-icon">id:daido1976</a> です。もうすぐ 30 歳になります。</p>

<p>Pusher の Private channels と認証周りの処理が公式ドキュメントを読んだだけでは全然わからなかったので、ライブラリの実装を追いかけてみました。</p>

<ul class="table-of-contents">
    <li><a href="#結論">結論</a></li>
    <li><a href="#コード例">コード例</a><ul>
            <li><a href="#クライアントJavaScript">クライアント（JavaScript）</a></li>
            <li><a href="#サーバRails">サーバ（Rails）</a></li>
        </ul>
    </li>
    <li><a href="#ライブラリの実装を追いかけた">ライブラリの実装を追いかけた</a><ul>
            <li><a href="#1-WebSocket-のコネクションを確立する">1. WebSocket のコネクションを確立する</a></li>
            <li><a href="#2-App-Server-の-pusherauth-に-POST-リクエストして認証トークンを取得">2. App Server の /pusher/auth に POST リクエストして認証トークンを取得</a></li>
            <li><a href="#3-認証トークンをライブラリ内でセットして当該チャンネルを-Subscribe-するリクエストを-Pusher-に送る">3. 認証トークンをライブラリ内でセットして当該チャンネルを Subscribe するリクエストを Pusher に送る</a></li>
        </ul>
    </li>
    <li><a href="#参考">参考</a></li>
</ul>

<h2 id="結論">結論</h2>

<p>実装を追っていくと公式ドキュメントに載っている以下の図の通りになっていました。（当たり前）</p>

<blockquote><p><figure class="figure-image figure-image-fotolife" title="https://pusher.com/docs/channels/server_api/authenticating-users"><span itemscope itemtype="http://schema.org/Photograph"><img src="https://cdn-ak.f.st-hatena.com/images/fotolife/d/daido1976/20200129/20200129205304.png" alt="f:id:daido1976:20200129205304p:plain" title="f:id:daido1976:20200129205304p:plain" class="hatena-fotolife" itemprop="image"></span><figcaption><a href="https://pusher.com/docs/channels/server_api/authenticating-users">https://pusher.com/docs/channels/server_api/authenticating-users</a></figcaption></figure></p></blockquote>

<h2 id="コード例">コード例</h2>

<p>以下のコード例は抜粋ですが、Rails サーバとの通信を仮定しているので、ライブラリは <a href="https://github.com/pusher/pusher-js">pusher-js</a> と <a href="https://github.com/pusher/pusher-http-ruby">pusher-http-ruby</a> を利用する前提です。</p>

<h3 id="クライアントJavaScript">クライアント（JavaScript）</h3>

<pre class="code lang-javascript" data-lang="javascript" data-unlink><span class="synStatement">const</span> pusher = <span class="synStatement">new</span> Pusher(<span class="synConstant">&quot;app_key&quot;</span>, <span class="synIdentifier">{</span>
  auth: <span class="synIdentifier">{</span>
    headers: <span class="synIdentifier">{</span>
      <span class="synComment">// トークンベースで認証を行う場合、ここに何らかの認証情報を載せる</span>
      <span class="synComment">// ...</span>
    <span class="synIdentifier">}</span>
  <span class="synIdentifier">}</span>
<span class="synIdentifier">}</span>);

<span class="synComment">// User ごとの Private チャンネルを作成し、Subscribe する場合</span>
<span class="synStatement">const</span> channel = pusher.subscribe(`<span class="synStatement">private</span>-$<span class="synIdentifier">{</span>userId<span class="synIdentifier">}</span>`);

<span class="synComment">// 以下イベントに bind する処理などが続く...</span>
</pre>


<h3 id="サーバRails">サーバ（Rails）</h3>

<pre class="code lang-ruby" data-lang="ruby" data-unlink><span class="synComment"># Routing</span>
<span class="synType">Rails</span>.application.routes.draw <span class="synStatement">do</span>
  <span class="synComment"># ...</span>
  post <span class="synSpecial">'</span><span class="synConstant">/pusher/auth</span><span class="synSpecial">'</span>, <span class="synConstant">to</span>: <span class="synSpecial">'</span><span class="synConstant">pusher_auth#create</span><span class="synSpecial">'</span>
<span class="synStatement">end</span>
</pre>




<pre class="code lang-ruby" data-lang="ruby" data-unlink><span class="synComment"># Controller</span>
<span class="synPreProc">class</span> <span class="synType">PusherAuthController</span> &lt; <span class="synType">ApplicationController</span>
  <span class="synPreProc">def</span> <span class="synIdentifier">create</span>
    <span class="synComment"># クライアントから渡ってきた認証情報を使ってユーザを識別するコードは省略</span>
    <span class="synStatement">if</span> current_user
      <span class="synComment"># Pusher のクライアント作成のコードは省略</span>
      response = pusher_client.authenticate(params[<span class="synConstant">:channel_name</span>], params[<span class="synConstant">:socket_id</span>])
      render <span class="synConstant">json</span>: response
    <span class="synStatement">else</span>
      render <span class="synConstant">json</span>: {}, <span class="synConstant">status</span>: <span class="synConstant">403</span>
    <span class="synStatement">end</span>
  <span class="synPreProc">end</span>
<span class="synPreProc">end</span>
</pre>


<h2 id="ライブラリの実装を追いかけた">ライブラリの実装を追いかけた</h2>

<p>以下、ライブラリのコードを読む際に少しハマったので先にお伝えしておきます。</p>

<p>pusher-js は Web、 React Native など複数のランタイムのビルドを生成できるようになっています。（ビルド時に webpack によって依存関係の解決が切り替わるようになっている）<sup id="fnref:1"><a href="#fn:1" rel="footnote">1</a></sup></p>

<p>プラットフォームに依存しない共通部分の実装は <code>core/</code> 以下に、プラットフォームに依存する実装は <code>runtimes/</code> 以下に置いてあるのでご留意ください。</p>

<p>それでは、公式ドキュメントの図に沿ってライブラリの実装を追っていきましょう。</p>

<h3 id="1-WebSocket-のコネクションを確立する">1. WebSocket のコネクションを確立する</h3>

<p><strong>公式ドキュメントの図でいうと 1~3 まで。</strong></p>

<p>コネクションの確立は <a href="https://github.com/pusher/pusher-js/blob/v5.0.3/src/core/pusher.ts#L268">Runtime.setup</a> の中でやっています。（これは実装者が Pusher オブジェクトを new した時に呼ばれる）</p>

<p>具体的には上記の <code>Runtime.setup</code> の中で <a href="https://github.com/pusher/pusher-js/blob/v5.0.3/src/runtimes/web/runtime.ts#L46">Pusher.ready が呼ばれ</a>（実装は<a href="https://github.com/pusher/pusher-js/blob/v5.0.3/src/core/pusher.ts#L34-L39">ここ</a>）、その中で <a href="https://github.com/pusher/pusher-js/blob/v5.0.3/src/core/pusher.ts#L164-L176">Pusher#connect</a> が呼ばれてコネクションが確立されます。</p>

<p>※ 内部の処理は深かったので省略しますが、最終的には公式ドキュメントの図の通り <a href="https://github.com/pusher/pusher-js/blob/v5.0.3/src/core/connection/protocol/protocol.ts#L73-L81"><code>pusher:connection_established</code> イベントが発火して</a>  connected な状態になります。（Web のための <code>Runtime.setup</code> は <a href="https://github.com/pusher/pusher-js/blob/v5.0.3/src/runtimes/web/runtime.ts#L43-L53">こちら</a> から始まりますので、興味のある方は追ってみてください）</p>

<h3 id="2-App-Server-の-pusherauth-に-POST-リクエストして認証トークンを取得">2. App Server の <code>/pusher/auth</code> に POST リクエストして認証トークンを取得</h3>

<p><strong>公式ドキュメントの図でいうと 4~6 まで。</strong></p>

<p>コネクションが確立されたら <code>Pusher#subscribe</code> の <a href="https://github.com/pusher/pusher-js/blob/v5.0.3/src/core/pusher.ts#L225-L230">ここの条件分岐</a> に入り、<a href="https://github.com/pusher/pusher-js/blob/v5.0.3/src/core/channels/channel.ts#L97">*.Channel#authorize</a> が呼ばれて App Server （コード例でいう Rails サーバ）の <code>/pusher/auth</code><sup id="fnref:2"><a href="#fn:2" rel="footnote">2</a></sup>に POST リクエスト<sup id="fnref:3"><a href="#fn:3" rel="footnote">3</a></sup>して、App Server 側では <a href="https://github.com/pusher/pusher-http-ruby/blob/v1.3.2/lib/pusher/channel.rb#L169-L175">ここ</a> で認証トークン（<code>authentication_string</code>） を詰めて、 <a href="https://github.com/pusher/pusher-js/blob/v5.0.3/src/core/channels/channel.ts#L97-L110">*.Channel#authorize の コールバック</a> に返ってきます。</p>

<p>ちなみにチャンネル名を見て Private かどうかを調べてるのは <a href="https://github.com/pusher/pusher-js/blob/v5.0.3/src/core/channels/channels.ts#L64-L80">ここ</a> です。</p>

<p>※ Public channels の場合は <a href="https://github.com/pusher/pusher-js/blob/v5.0.3/src/core/channels/channel.ts#L37-L43">ここ</a> で認証をスキップしています。</p>

<h3 id="3-認証トークンをライブラリ内でセットして当該チャンネルを-Subscribe-するリクエストを-Pusher-に送る">3. 認証トークンをライブラリ内でセットして当該チャンネルを Subscribe するリクエストを Pusher に送る</h3>

<p><strong>公式ドキュメントの図でいうと 7。</strong></p>

<p>認証トークンは <a href="https://github.com/pusher/pusher-js/blob/v5.0.3/src/core/channels/channel.ts#L106">ここ</a> で勝手にセットされ、 <code>pusher:subscribe</code> のイベントが Pusher に送られます。（最終的には <a href="https://github.com/pusher/pusher-js/blob/v5.0.3/src/core/transports/transport_connection.ts#L134">ここ</a> で Pusher にデータが送られている）</p>

<h2 id="参考">参考</h2>

<ul>
<li><a href="https://pusher.com/docs/channels/server_api/authenticating-users">Authenticating users | Pusher docs</a></li>
<li><a href="https://github.com/pusher/pusher-js">GitHub - pusher/pusher-js: Pusher Javascript library | owner=@leesio</a></li>
<li><a href="https://github.com/pusher/pusher-http-ruby">GitHub - pusher/pusher-http-ruby: Ruby library for Pusher Channels HTTP API | owner=@annzenkina</a></li>
</ul>

<div class="footnotes">
<hr/>
<ol>
<li id="fn:1">
<p><a href="https://github.com/pusher/pusher-js#core-vs-platform-specific-code">https://github.com/pusher/pusher-js#core-vs-platform-specific-code</a><a href="#fnref:1" rev="footnote">&#8617;</a></p></li>
<li id="fn:2">
<p><code>authEndpoint</code> は何も指定しなければ <code>/pusher/auth</code> になります。（<a href="https://github.com/pusher/pusher-js/blob/v5.0.3/src/core/defaults.ts#L41">ここでセットされてる</a>）<a href="#fnref:2" rev="footnote">&#8617;</a></p></li>
<li id="fn:3">
<p>App Server 側に <code>POST /pusher/auth</code> してるのは次のような流れ。Private チャンネルなので、<code>#authorize</code> したら <a href="https://github.com/pusher/pusher-js/blob/v5.0.3/src/core/channels/private_channel.ts#L11-L19">PrivateChannel#authorize</a> が呼ばれます。<a href="https://github.com/pusher/pusher-js/blob/v5.0.3/src/core/auth/pusher_authorizer.ts#L41-L44">PusherAuthorizer#authorize</a> の中で <a href="https://github.com/pusher/pusher-js/blob/v5.0.3/src/runtimes/web/runtime.ts#L63-L65">Runtime#getAuthorizers</a> が呼ばれ、 <a href="https://github.com/pusher/pusher-js/blob/v5.0.3/src/runtimes/isomorphic/auth/xhr_auth.ts#L10-L51">この ajax 関数</a> が実行されます。<a href="#fnref:3" rev="footnote">&#8617;</a></p></li>
</ol>
</div>

]]></description>
            <enclosure url="https://cdn.user.blog.st-hatena.com/default_entry_og_image/116461321/1514251518718655" length="0" type="image//default_entry_og_image/116461321/1514251518718655"/>
        </item>
        <item>
            <title><![CDATA[『AWSの薄い本　IAMのマニアックな話』を読んだ]]></title>
            <link>https://masutaka.net/2020-01-22-1/</link>
            <guid>https://masutaka.net/2020-01-22-1/</guid>
            <pubDate>Wed, 22 Jan 2020 00:00:00 GMT</pubDate>
            <description><![CDATA[【ダウンロード版】AWSの薄い本　IAMのマニアックな話 - 佐々木拓郎のオンライン本屋 - BOOTH 少し前に Twitter で流れてきて買ったのかな。最近 AWS 等の権限まわりに課題を感じることが増えてきたので読んだ。デザインパターンやセキュリティ、運用方法など、参考になることが多くて、読んで良かった。
開発者用の IAM User の権限はやっぱり難しいみたいで、ああなるほどと思ってみたり。
仕事では開発用の共通 IAM User development を作って、.envrc 経由で使っているんだけど、さすがにドンピシャの解はなかった。
本当は開発者ごとの開発用 IAM User（例: masutaka-devel）を作って、共通 IAM User は使わないほうが良いのだろうなあ。開発者ごとの通常 IAM User（例: masutaka）は作っているんだけど。
CloudFormation によるコード管理にも触れていて、IAM Group や Role までは管理するけど、IAM User は管理しないとのこと。なぜなら IAM User は一度作ったらお終いだから。なるほど。
CloudFormation はまだ直接使ったことがないので、本書にあるようにハードルが低い IAM から始めるのは良いと思った。
IAM Policy を使った MFA の強制もやらないとな。そういえば他のチームはやっていたな。
P.S. .pdf 以外にも .epub か .mobi 形式も欲しかった。気になった箇所にマーカーやメモを付けたかった。目次からの移動も出来ないので不便。
追記(2020-03-15):
Kindle 本発売されたようです。
Kindle本の販売という実績解除しました - プログラマでありたい ]]></description>
        </item>
        <item>
            <title><![CDATA[my_api_client v0.13.0 をリリースしました🚀]]></title>
            <link>https://ryz310.hateblo.jp/entry/2020/01/21/230012</link>
            <guid>https://ryz310.hateblo.jp/entry/2020/01/21/230012</guid>
            <pubDate>Tue, 21 Jan 2020 14:00:12 GMT</pubDate>
            <description><![CDATA[<p><a href="https://ryz310.hateblo.jp/entry/2020/01/19/152826">つい先日、v0.12.0 をリリースしたばかり</a> ですが、 v0.13.0 をリリースしましたので、含まれる PR の内容について解説していきます。 より詳しい使い方は <a href="https://github.com/ryz310/my_api_client/blob/master/README.jp.md">README.jp.md</a> をご参照ください。</p>

<p><iframe src="https://hatenablog-parts.com/embed?url=https%3A%2F%2Fgithub.com%2Fryz310%2Fmy_api_client%2Fblob%2Fmaster%2FCHANGELOG.md%23v0130-jan-21-2020" title="ryz310/my_api_client" class="embed-card embed-webcard" scrolling="no" frameborder="0" style="display: block; width: 100%; height: 155px; max-width: 500px; margin: 10px 0px;"></iframe><cite class="hatena-citation"><a href="https://github.com/ryz310/my_api_client/blob/master/CHANGELOG.md#v0130-jan-21-2020">github.com</a></cite></p>

<h2><a href="https://github.com/ryz310/my_api_client/pull/180">#180</a> Stub response on raising error (<a href="https://github.com/ryz310">@ryz310</a>)</h2>

<p>今回はこの PR のみの更新です。
仕事で spec 書いてる最中に「<a class="keyword" href="http://d.hatena.ne.jp/keyword/API">API</a> リク<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%A8%A5%B9">エス</a>トで例外が発生した際にレスポンス内容を保存する処理のスタブ化できないじゃん」ってなって作りました。</p>

<p><code>my_api_client</code> では作成した <a class="keyword" href="http://d.hatena.ne.jp/keyword/API">API</a> Client クラスを <code>stub_api_client</code> または <code>stub_api_client_all</code> というメソッドでスタブ化できます。
例えば以下のような <code>ExampleApiClient</code> というクラスを定義した時:</p>

<pre class="code lang-ruby" data-lang="ruby" data-unlink><span class="synPreProc">class</span> <span class="synType">ExampleApiClient</span> &lt; <span class="synType">MyApiClient</span>::<span class="synType">Base</span>
  endpoint <span class="synSpecial">'</span><span class="synConstant">https://example.com</span><span class="synSpecial">'</span>

  error_handling <span class="synConstant">status_code</span>: <span class="synConstant">400</span>..<span class="synConstant">499</span>, <span class="synConstant">raise</span>: <span class="synType">MyApiClient</span>::<span class="synType">ClientError</span>
  error_handling <span class="synConstant">status_code</span>: <span class="synConstant">500</span>..<span class="synConstant">599</span>, <span class="synConstant">raise</span>: <span class="synType">MyApiClient</span>::<span class="synType">ServerError</span>

  <span class="synComment"># GET https://example.com/path/to/resouce</span>
  <span class="synPreProc">def</span> <span class="synIdentifier">request</span>
     get <span class="synSpecial">'</span><span class="synConstant">path/to/resouce</span><span class="synSpecial">'</span>
  <span class="synPreProc">end</span>
<span class="synPreProc">end</span>
</pre>


<p><code>stub_api_client_all</code> を実行すると <code>ExampleApiClient</code> の<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%A4%A5%F3%A5%B9%A5%BF%A5%F3%A5%B9">インスタンス</a>が全てスタブ化されるようになります。
以下の例だと、 <code>#request</code> を実行した時、<a class="keyword" href="http://d.hatena.ne.jp/keyword/API">API</a> から <code>{ "message": "Hello world!" }</code> という <a class="keyword" href="http://d.hatena.ne.jp/keyword/JSON">JSON</a> が返ってきた時と同じ振る舞いをするようになります。</p>

<pre class="code lang-ruby" data-lang="ruby" data-unlink>stub_api_client_all(
  <span class="synType">ExampleApiClient</span>,
  <span class="synConstant">request</span>: { <span class="synConstant">response</span>: { <span class="synConstant">message</span>: <span class="synSpecial">'</span><span class="synConstant">Hello world!</span><span class="synSpecial">'</span> } }
)

api_client = <span class="synType">ExampleApiClient</span>.new
response = api_client.request
response.message <span class="synComment"># =&gt; 'Hello world!'</span>
</pre>


<p>で、 <code>error_handling</code> で<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%B9%A5%C6%A1%BC%A5%BF%A5%B9%A5%B3%A1%BC%A5%C9">ステータスコード</a>が <code>400..499</code> の時は <code>MyApiClient::ClientError</code> という例外が発生する、という定義になっているのですが、このような例外が発生した時のテストを書くために、 <code>raise</code> のスタブ化も出来るようになっています。</p>

<pre class="code lang-ruby" data-lang="ruby" data-unlink>stub_api_client_all(
  <span class="synType">ExampleApiClient</span>,
  <span class="synConstant">request</span>: { <span class="synConstant">raise</span>: <span class="synType">MyApiClient</span>::<span class="synType">ClientError</span> }
)

<span class="synStatement">begin</span>
  api_client = <span class="synType">ExampleApiClient</span>.new
  response = api_client.request
<span class="synStatement">rescue</span> <span class="synType">MyApiClient</span>::<span class="synType">ClientError</span>
  puts <span class="synSpecial">'</span><span class="synConstant">4xx error!</span><span class="synSpecial">'</span>
<span class="synStatement">end</span>
</pre>


<p>大抵の場合、これらのスタブ化ができれば問題ないのですが、例外発生時のレスポンスを見たい、というケースも無くはないかと思います。
仕様として、例外<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%A4%A5%F3%A5%B9%A5%BF%A5%F3%A5%B9">インスタンス</a>の <code>#params</code> や <code>#matadata</code> というメソッドからリク<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%A8%A5%B9">エス</a>トパラメータとレスポンスパラメータを参照できるようになっています。</p>

<p>従来のスタブ化メソッドでも一応指定できなくはなかったんですが、結構手間だったので <code>raise</code> オプションの指定を以下のように拡張しました。
<code>raise</code> と一緒に指定した <code>response</code> が <a class="keyword" href="http://d.hatena.ne.jp/keyword/API">API</a> のレスポンスとして返されて、それが例外として処理された、というスタブ化になります。</p>

<pre class="code lang-ruby" data-lang="ruby" data-unlink>stub_api_client_all(
  <span class="synType">ExampleApiClient</span>,
  <span class="synConstant">request</span>: { 
    <span class="synConstant">raise</span>: <span class="synType">MyApiClient</span>::<span class="synType">ClientError</span>,
    <span class="synConstant">response</span>: { <span class="synConstant">error_code</span>: <span class="synConstant">10</span> }
  }
)

<span class="synStatement">begin</span>
  api_client = <span class="synType">ExampleApiClient</span>.new
  response = api_client.request
<span class="synStatement">rescue</span> <span class="synType">MyApiClient</span>::<span class="synType">ClientError</span> =&gt; e
  e.params.response.data.error_code <span class="synComment">#=&gt; 10</span>
<span class="synStatement">end</span>
</pre>


<p><code>my_api_client</code> は内部で <a href="https://github.com/lostisland/sawyer">Sawyer</a> を使っています。</p>

<p><iframe src="https://hatenablog-parts.com/embed?url=https%3A%2F%2Fgithub.com%2Flostisland%2Fsawyer" title="lostisland/sawyer" class="embed-card embed-webcard" scrolling="no" frameborder="0" style="display: block; width: 100%; height: 155px; max-width: 500px; margin: 10px 0px;"></iframe><cite class="hatena-citation"><a href="https://github.com/lostisland/sawyer">github.com</a></cite></p>

<p><code>e.params.response</code> が <code>Sawyer::Response</code> をそのまま返しているので、<code>Sawyer::Response#data</code> からレスポンスボディを参照できます。
<code>Sawyer::Response#data</code> では、レスポンスの <a class="keyword" href="http://d.hatena.ne.jp/keyword/JSON">JSON</a> を <a href="https://docs.ruby-lang.org/ja/latest/class/OpenStruct.html">OpenStruct)</a> のようにメソッドアクセスできるように変換してくれます。</p>

<p>ただし、 <code>V1.0.0</code> で <code>Sawyer</code> の依存を無くしたいと考えているので、いずれ <code>#data</code> を挟む書き方は変更になるかもしれません。
一応こういう使い方もできますよ、という新機能でした。</p>
]]></description>
            <enclosure url="https://cdn.blog.st-hatena.com/images/theme/og-image-1500.png" length="0" type="image/png"/>
        </item>
        <item>
            <title><![CDATA[my_api_client v0.12.0 をリリースしました🚀]]></title>
            <link>https://ryz310.hateblo.jp/entry/2020/01/19/152826</link>
            <guid>https://ryz310.hateblo.jp/entry/2020/01/19/152826</guid>
            <pubDate>Sun, 19 Jan 2020 06:28:26 GMT</pubDate>
            <description><![CDATA[<p><a href="https://github.com/ryz310/my_api_client">my_api_client v0.12.0</a> に含まれる PR の内容について解説していきます。
より詳しい使い方は <a href="https://github.com/ryz310/my_api_client/blob/master/README.jp.md">README.jp.md</a> をご参照ください。</p>

<h2><a href="https://github.com/ryz310/my_api_client/pull/173">#173</a> Avoid sleep on testing</h2>

<p>my_<a class="keyword" href="http://d.hatena.ne.jp/keyword/api">api</a>_client では以下のように書くと、任意の例外を補足して自動的に <a class="keyword" href="http://d.hatena.ne.jp/keyword/API">API</a> リク<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%A8%A5%B9">エス</a>トをリトライしてくれます。
ネットワーク系のエラーとか、 <a class="keyword" href="http://d.hatena.ne.jp/keyword/API">API</a> Rate Limit に引っかかった時とかに便利なやつですね。</p>

<p><a href="https://edgeapi.rubyonrails.org/classes/ActiveJob/Exceptions/ClassMethods.html#method-i-retry_on">ActiveJob の <code>retry_on</code></a> とほぼ同じ使い方になっています。</p>

<pre class="code lang-ruby" data-lang="ruby" data-unlink><span class="synPreProc">class</span> <span class="synType">ExampleApiClient</span> &lt; <span class="synType">MyApiClient</span>::<span class="synType">Base</span>
  endpoint <span class="synSpecial">'</span><span class="synConstant">https://example.com</span><span class="synSpecial">'</span>

  retry_on <span class="synType">MyApiClient</span>::<span class="synType">ApiLimitError</span>, <span class="synConstant">wait</span>: <span class="synConstant">1</span>.minute, <span class="synConstant">attempts</span>: <span class="synConstant">3</span>
  error_handling <span class="synConstant">json</span>: { <span class="synSpecial">'</span><span class="synConstant">$.errors.code</span><span class="synSpecial">'</span>: <span class="synConstant">20</span> }, <span class="synConstant">raise</span>: <span class="synType">MyApiClient</span>::<span class="synType">ApiLimitError</span>

  <span class="synComment"># GET https://example.com/users</span>
  <span class="synPreProc">def</span> <span class="synIdentifier">get_users</span>
    get <span class="synSpecial">'</span><span class="synConstant">users</span><span class="synSpecial">'</span>
  <span class="synPreProc">end</span>
<span class="synPreProc">end</span>
</pre>


<p>それは良いんですが、 <a class="keyword" href="http://d.hatena.ne.jp/keyword/rspec">rspec</a> 上で <code>wait</code> が効いてしまっていたので、上記のコードだとリトライ3回分 wait するので、合計 3 分も待たされてしまっていました。
一応 <a class="keyword" href="http://d.hatena.ne.jp/keyword/rspec">rspec</a> で <code>sleep</code> を stub するとかやれば回避できますが、そもそもテストでは wait を無視して欲しいですよね。</p>

<p>my_<a class="keyword" href="http://d.hatena.ne.jp/keyword/api">api</a>_client では <code>be_handled_as_an_error</code> という <a class="keyword" href="http://d.hatena.ne.jp/keyword/rspec">rspec</a> の matcher を用意しているのですが、今回の対応で、この macher を経由してリトライが実行された場合は wait を無視するようになりました。</p>

<pre class="code lang-ruby" data-lang="ruby" data-unlink><span class="synType">RSpec</span>.describe <span class="synType">ExampleApiClient</span>, <span class="synConstant">type</span>: <span class="synConstant">:api_client</span> <span class="synStatement">do</span>
  let(<span class="synConstant">:api_client</span>) { described_class.new }

  <span class="synComment"># </span><span class="synTodo">NOTE</span><span class="synComment">: レスポンスで `{ &quot;errors&quot;: { &quot;code&quot;: 20 } }` を受診した際、3 回リトライが実行された後に `MyApiClient::ApiLimitError` として例外処理される。</span>
  it <span class="synStatement">do</span>
    expect { api_request! }
      .to be_handled_as_an_error(<span class="synType">MyApiClient</span>::<span class="synType">ApiLimitError</span>)
      .after_retry(<span class="synConstant">3</span>).times
      .when_receive(<span class="synConstant">body</span>: { <span class="synConstant">errors</span>: { <span class="synConstant">code</span>: <span class="synConstant">20</span> } }.to_json)
  <span class="synStatement">end</span>
<span class="synStatement">end</span>
</pre>


<p>また、 <code>ExampleApiClient</code> は <code>stub_api_client</code> や <code>stub_api_client_all</code> を使用するとスタブ化できます。
スタブ化した状態だと任意の <a class="keyword" href="http://d.hatena.ne.jp/keyword/API">API</a> レスポンスを返すか、任意の例外を発生させる、という動作になってリトライが発生しなくなるので、上記の問題はありませんでした。</p>

<pre class="code lang-ruby" data-lang="ruby" data-unlink>stub_api_client_all(<span class="synType">ExampleApiClient</span>, <span class="synConstant">get_users</span>: { <span class="synConstant">users</span>: [{ <span class="synConstant">id</span>: <span class="synConstant">1</span> }, { <span class="synConstant">id</span>: <span class="synConstant">2</span> }, { <span class="synConstant">id</span>: <span class="synConstant">3</span> }] })

response = <span class="synType">ExampleApiClient</span>.new.get_users
response.users <span class="synComment"># =&gt; [{ id: 1 }, { id: 2 }, { id: 3 }]</span>
</pre>


<h2><a href="https://github.com/ryz310/my_api_client/pull/175">#175</a> Verify arguments on error handling definition</h2>

<p><code>error_handling</code> の定義でレスポンスの<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%B9%A5%C6%A1%BC%A5%BF%A5%B9%A5%B3%A1%BC%A5%C9">ステータスコード</a>を指定することができるんですが、このオプション名が <code>status_code</code> なのか <code>status</code> なのかをよく間違える、という問題がありました。<code>$ rails g api_client</code> を使用するとテンプレが作成されるので、そこからエラーハンドリングの定義を行うと間違えにくいのですが、後からエラーハンドリングを追加する時とかにやらかします。作者自身もたまにやらかしてました😇</p>

<pre class="code lang-ruby" data-lang="ruby" data-unlink><span class="synComment"># 正解</span>
error_handling <span class="synConstant">status_code</span>: <span class="synConstant">400</span>..<span class="synConstant">499</span>, <span class="synConstant">raise</span>: <span class="synType">MyApiClient</span>::<span class="synType">ClientError</span>

<span class="synComment"># 間違い</span>
error_handling <span class="synConstant">status</span>: <span class="synConstant">400</span>..<span class="synConstant">499</span>, <span class="synConstant">raise</span>: <span class="synType">MyApiClient</span>::<span class="synType">ClientError</span>
</pre>


<p>この PR の対応で間違ったオプションを指定すると以下のような例外が発生するようになりました。</p>

<pre class="code" data-lang="" data-unlink>RuntimeError:
  Specified an incorrect option: `status`
  You can use options that: [:response, :status_code, :json, :with, :raise, :block]</pre>


<h2><a href="https://github.com/ryz310/my_api_client/pull/176">#176</a> Provides a syntax sugar of <code>retry_on</code> on <code>error_handling</code></h2>

<p>最初の PR でも出てきた <code>retry_on</code> ですが、 <code>error_handling raise: MyApiClient::ApiLimitError</code> でも同じ例外を指定していて DRY な感じじゃなかったり、<code>retry_on</code> と <code>error_handling</code> をそれぞれ定義してるとお互いの関連が実感しづらい、という不満がありました。</p>

<pre class="code lang-ruby" data-lang="ruby" data-unlink><span class="synPreProc">class</span> <span class="synType">ExampleApiClient</span> &lt; <span class="synType">MyApiClient</span>::<span class="synType">Base</span>
  endpoint <span class="synSpecial">'</span><span class="synConstant">https://example.com</span><span class="synSpecial">'</span>

  retry_on <span class="synType">MyApiClient</span>::<span class="synType">ApiLimitError</span>, <span class="synConstant">wait</span>: <span class="synConstant">1</span>.minute, <span class="synConstant">attempts</span>: <span class="synConstant">3</span>
  error_handling <span class="synConstant">json</span>: { <span class="synSpecial">'</span><span class="synConstant">$.errors.code</span><span class="synSpecial">'</span>: <span class="synConstant">20</span> }, <span class="synConstant">raise</span>: <span class="synType">MyApiClient</span>::<span class="synType">ApiLimitError</span>

  <span class="synComment"># GET https://example.com/users</span>
  <span class="synPreProc">def</span> <span class="synIdentifier">get_users</span>
    get <span class="synSpecial">'</span><span class="synConstant">users</span><span class="synSpecial">'</span>
  <span class="synPreProc">end</span>
<span class="synPreProc">end</span>
</pre>


<p>この <code>PR</code> では <code>retry</code> というオプションを <code>error_handling</code> に追加しています。これにより、以下の 2 つのコードは等価になります。</p>

<pre class="code lang-ruby" data-lang="ruby" data-unlink>retry_on <span class="synType">MyApiClient</span>::<span class="synType">ApiLimitError</span>, <span class="synConstant">wait</span>: <span class="synConstant">1</span>.minute, <span class="synConstant">attempts</span>: <span class="synConstant">3</span>
error_handling <span class="synConstant">json</span>: { <span class="synSpecial">'</span><span class="synConstant">$.errors.code</span><span class="synSpecial">'</span>: <span class="synConstant">20</span> }, <span class="synConstant">raise</span>: <span class="synType">MyApiClient</span>::<span class="synType">ApiLimitError</span>
</pre>




<pre class="code lang-ruby" data-lang="ruby" data-unlink>error_handling <span class="synConstant">json</span>: { <span class="synSpecial">'</span><span class="synConstant">$.errors.code</span><span class="synSpecial">'</span>: <span class="synConstant">20</span> }, 
                          <span class="synConstant">raise</span>: <span class="synType">MyApiClient</span>::<span class="synType">ApiLimitError</span>, 
                          <span class="synConstant">retry</span>: { <span class="synConstant">wait</span>: <span class="synConstant">1</span>.minute, <span class="synConstant">attempts</span>: <span class="synConstant">3</span> }
</pre>


<p><code>retry_on</code> にオプションを指定する必要がなければ <code>retry: true</code> と書けば OK です。</p>

<pre class="code lang-ruby" data-lang="ruby" data-unlink>error_handling <span class="synConstant">json</span>: { <span class="synSpecial">'</span><span class="synConstant">$.errors.code</span><span class="synSpecial">'</span>: <span class="synConstant">20</span> }, 
                          <span class="synConstant">raise</span>: <span class="synType">MyApiClient</span>::<span class="synType">ApiLimitError</span>, 
                          <span class="synConstant">retry</span>: <span class="synConstant">true</span>
</pre>


<p>ただし、 <code>retry</code> オプションを使用する際は以下の点に注意が必要です。</p>

<ul>
<li><code>error_handling</code> に <code>raise</code> オプションの指定が必須となります。</li>
<li>Block を使った <code>error_handling</code> の定義は禁止されます。</li>
</ul>

]]></description>
            <enclosure url="https://cdn.blog.st-hatena.com/images/theme/og-image-1500.png" length="0" type="image/png"/>
        </item>
        <item>
            <title><![CDATA[『私はどのようにしてLinuxカーネルを学んだか』を読んだ]]></title>
            <link>https://masutaka.net/2020-01-12-1/</link>
            <guid>https://masutaka.net/2020-01-12-1/</guid>
            <pubDate>Sun, 12 Jan 2020 00:00:00 GMT</pubDate>
            <description><![CDATA[職場の同僚が積読していて、153 ページしかないと聞いたので、Kindle 版を買って読んでみた。
10 年前にデバイスドライバとか書いたことがあったので（Linux ではなく VxWorks ですが）、懐かしながら読んだ。アドレス変換やったなーとか。
Linux カーネルを読むのはそこまで特別な知識は要らなくて、マクロ展開が分からない時はプリプロセッサ出力を確認したりして、超地道に読み進める必要があるそう。
P153 ページしかないので、近々で Linux カーネルを読む予定がなくても、興味がある人は読むと面白いかも。
以下は自分用メモ。
P95
 周辺機器からの割り込みのことをハードウェア割り込みや外部割り込みといいますが、「/proc/interrupts」を見ることで何回割り込みが発生したかが分かります
 P144
 SystemTap というツールを使うと、カーネルをビルドすることなく、変数の値を表示することが出来るので便利です。
 P144
 どのモジュールのソースコードから読むのがいいかという話ですが、最初のうちはシンプルなモジュールからがよいです。例えば、「/dev/null」というただデータを吸い込むだけのデバイスがありますが、ソースコードの作りもシンプルです。「/dev/null」のソースファイルは「drivers/char/mem.c」です。
 dmesg の出力は printk() の出力だったのか。]]></description>
        </item>
        <item>
            <title><![CDATA[認証認可の情報の追い方みたいな]]></title>
            <link>https://developer.feedforce.jp/entry/2020/01/10/185250</link>
            <guid>https://developer.feedforce.jp/entry/2020/01/10/185250</guid>
            <pubDate>Fri, 10 Jan 2020 09:52:50 GMT</pubDate>
            <description><![CDATA[<p>今日の社内勉強会担当だった <a href="http://blog.hatena.ne.jp/tmd45/" class="hatena-id-icon"><img src="https://cdn.profile-image.st-hatena.com/users/tmd45/profile.png" width="16" height="16" alt="" class="hatena-id-icon">id:tmd45</a> です。</p>

<p>去年「年が明けたらすぐに勉強会担当だから年末年始連休中にがんばるぞい」と考えていたことを<i>すっかり忘れて</i>、前々日に「今週末の担当やん！」と気づいたので肝が冷えました。今年は Switch 版 脳トレで記憶力を強化していきたい所存。</p>

<p>2019 年後半は認証認可界隈の面白い話がたくさんあったと思っていて、それをざーっと話そうかなとスライドを書き始めたんですが、<b>そういう情報を読むときにどんなことを考えてるのか</b>というのを想像してみたら面白かったのでそっちの話になりました。</p>

<h2>スライド</h2>

<script async class="speakerdeck-embed" data-id="77e81eff04f74f039cc824f0a2f07619" data-ratio="1.77777777777778" src="//speakerdeck.com/assets/embed.js"></script>


<p><br></p>

<p>p.21 以降の『付録: 認証認可の未来の話』が本編だったかもしれない（発表時間5分）。</p>

<p>「認証認可こわくないよ〜🤗」というのを伝えたかったんですが、登場人物の多さで逆に怖がらせてしまった感が否めなかったですね😇</p>

<p>"エンジニアの情報収集の仕方" 程度になにかの役に立てば幸いです。</p>

<h2>宣伝: ruby-jp Slack</h2>

<p><iframe src="https://hatenablog-parts.com/embed?url=https%3A%2F%2Fruby-jp.github.io%2F" title="ruby-jp.slack.com" class="embed-card embed-webcard" scrolling="no" frameborder="0" style="display: block; width: 100%; height: 155px; max-width: 500px; margin: 10px 0px;"></iframe><cite class="hatena-citation"><a href="https://ruby-jp.github.io/">ruby-jp.github.io</a></cite></p>

<p>スライドの中でも紹介していますが <a href="https://ruby-jp.slack.com/archives/CLTCUB934">#authz</a> というチャンネルで認証認可の話をしています。していますというか、自分は聞いているばかりなので :感謝しかない: 。</p>

<p>興味あるかたはぜひ Join してみてくださいね！</p>
]]></description>
            <enclosure url="https://cdn-ak.f.st-hatena.com/images/fotolife/t/tmd45/20200110/20200110185424.png" length="0" type="image/png"/>
        </item>
        <item>
            <title><![CDATA[circleci/orb-tools を使った Orb のリリースフローが良く出来ていたので紹介する]]></title>
            <link>https://masutaka.net/2019-12-20-1/</link>
            <guid>https://masutaka.net/2019-12-20-1/</guid>
            <pubDate>Fri, 20 Dec 2019 00:00:00 GMT</pubDate>
            <description><![CDATA[⚠️ circleci/orb-tools v8.27.6 を使っています。さっき見たら v9.0.0 がリリースされており、trigger-integration-workflow 等のジョブ名が変わり、互換性がなくなったことは確認しました。
 先日、tfupdate の CircleCI Orb を作りました。
  tfupdate とは tfupdate は terraform のアップデートを支援してくれるツールです。ローカルの .tf ファイルに書かれた、terraform と terraform provider のバージョンを最新にしてくれます。
  .circleci/config.yml に組み込むと、定期的に pull request を作ってくれます。
例: https://github.com/minamijoyo/tfupdate-circleci-example/blob/cd8e5561b7eabb25aa3cd024dfcf5b868c4bda45/.circleci/config.yml タイムリーなことに、作者の minamijoyo さんが書かれた記事があります。詳しくはこちらをどうぞ。
tfupdateでTerraform本体/プロバイダ/モジュールのバージョンアップを自動化する - Qiita なぜ circleci-tfupdate-orb を作ったのか 前述の .circleci/config.yml を見ると分かりますが、かなり行数が長いです。130 行あります。
tfupdate 以外にも CI の設定はありますし、これを各リポジトリに書くのは辛いです。そのため、ほぼそのまま Orb にしたのが v0.0.2 です。
https://github.com/masutaka/circleci-tfupdate-orb/tree/v0.0.2 CircleCI Orb Registry はこちらです。v0.0.2 は circleci CLI を使って手動で Publish しました。Publishing Orbs や他の記事など、読み漁りました。]]></description>
        </item>
        <item>
            <title><![CDATA[Heroku 上での bundler version の決められ方]]></title>
            <link>https://masutaka.net/2019-12-17-1/</link>
            <guid>https://masutaka.net/2019-12-17-1/</guid>
            <pubDate>Tue, 17 Dec 2019 00:00:00 GMT</pubDate>
            <description><![CDATA[Ruby apps will now have the BUNDLED WITH declaration in their Gemfile.lock removed after detecting Bundler version｜Heroku Dev Center このアナウンスがあったので、調べてツイートした。ブログにも貼っておく。
loading...
   if (localStorage.getItem("pref-theme") === "light") { const elements = document.getElementsByClassName('twitter-tweet'); for (let i = 0; i  アナウンスの内容要約 Gemfile.lock の &lsquo;BUNDLED WITH&rsquo; には問題があるから、Heroku では bundler version の決定（v1 or v2）に使った後、&lsquo;BUNDLED WITH&rsquo; は削除してからデプロイするよとのこと。
Heroku というより heroku-buildpack-ruby の話ね。
  heroku-buildpack-ruby の処理 LanguagePack::Ruby#install_bundler_in_app から呼ばれるここで bundler v1 か v2 かを判別。
https://github.com/heroku/heroku-buildpack-ruby/blob/v207/lib/language_pack/helpers/bundler_wrapper.rb#L183-L192 下の LanguagePack::Helpers::BundlerWrapper#detect_bundler_version_and_dir_name!]]></description>
        </item>
        <item>
            <title><![CDATA[私と gem]]></title>
            <link>https://ryz310.hateblo.jp/entry/2019/12/15/224312</link>
            <guid>https://ryz310.hateblo.jp/entry/2019/12/15/224312</guid>
            <pubDate>Sun, 15 Dec 2019 13:43:12 GMT</pubDate>
            <description><![CDATA[<p>どーも、サトウリョウスケです。
<a href="https://ginza-rails.connpass.com/event/155467">金曜日に登壇した勉強会</a> で <del>うっかり</del> ブログ作るって言ってしまったので 10 年ぶりくらいにブログを復活させてみました。ブログのタイトルも 10 年前のタイトルと同じです（元ネタは<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%D5%A5%A1%A5%DF%A5%B3%A5%F3">ファミコン</a>時代の<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%C9%A5%E9%A5%AF%A5%A8">ドラクエ</a> IV）</p>

<p>勉強会の感想記事は近日中に書こうと思います✍️</p>

<h2>この記事は Feedforce Advent Calendar 2019 の 15 日目です。</h2>

<p>さて、最初の記事からいきなり会社の<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%A2%A5%C9%A5%D9%A5%F3%A5%C8%A5%AB%A5%EC%A5%F3%A5%C0%A1%BC">アドベントカレンダー</a>記事になります🙏</p>

<p><iframe src="https://hatenablog-parts.com/embed?url=https%3A%2F%2Fadventar.org%2Fcalendars%2F4169" title="feedforce Advent Calendar 2019 - Adventar" class="embed-card embed-webcard" scrolling="no" frameborder="0" style="display: block; width: 100%; height: 155px; max-width: 500px; margin: 10px 0px;"></iframe><cite class="hatena-citation"><a href="https://adventar.org/calendars/4169">adventar.org</a></cite></p>

<p>昨日は Yutaka KAWAI さんの「コーヒーは科学である ~抽出器具による味の違い~ <a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%DA%A1%BC%A5%D1%A1%BC%A5%C9%A5%EA%A5%C3%A5%D7">ペーパードリップ</a>編」でした。</p>

<p><iframe src="https://hatenablog-parts.com/embed?url=https%3A%2F%2Fnote.com%2Futahca%2Fn%2Fn30594094e406" title="コーヒーは科学である ~抽出器具による味の違い~ ペーパードリップ編｜Yutaka KAWAI｜note" class="embed-card embed-webcard" scrolling="no" frameborder="0" style="display: block; width: 100%; height: 155px; max-width: 500px; margin: 10px 0px;"></iframe><cite class="hatena-citation"><a href="https://note.com/utahca/n/n30594094e406">note.com</a></cite></p>

<p>珈琲屋さんかな？ってくらい凄い記事でしたね☕️
記事に出てきたドリッパーは全種類持ってるってヤバくないですか？？？（もちろん良い意味で）</p>

<p><a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%DA%A1%BC%A5%D1%A1%BC%A5%C9%A5%EA%A5%C3%A5%D7">ペーパードリップ</a>編ってことは続編もあるのかな？
この感じで記事が量産されたらそのうち書籍化されるかもしれません📚</p>

<h2>本編</h2>

<p>予告通り個人で gem を作る流れについて話そうと思うのですが、<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%A2%A5%C9%A5%D9%A5%F3%A5%C8%A5%AB%A5%EC%A5%F3%A5%C0%A1%BC">アドベントカレンダー</a>から流れてくると非エンジニアの方もきっと読まれると思うので、あんまり技術的な話題にせずにフワッとした話でもしようかと思います。</p>

<h3>そもそも gem ってなんだっけ？</h3>

<p>そもそも gem っていうのは <a class="keyword" href="http://d.hatena.ne.jp/keyword/Ruby">Ruby</a> でできたライブラリの事でして、例えば僕が凄く便利なプログラムを書いて、それを gem として公開すれば、世界中の人が僕のイケてるプログラムを使えるようになる、というものです。まさに <a class="keyword" href="http://d.hatena.ne.jp/keyword/Win-Win">Win-Win</a> しかない仕組み。gem は世界を救います。</p>

<p>一方で、プログラムってのは新機能が追加されたり、不具合が修正されたりして日々アップデートが繰り返されています。
「この機能にはバージョン 1.3 以降でないと使えません」とか「色々イケてない部分が多いからこの機能は廃止します」という変更もあるので、自分のプログラムは一体どのバージョンの gem を使っているのか、という話が物凄く重要だったりします。</p>

<p>gem にはどのバージョンを使っているのか（依存しているのか）という情報を管理する機能も備わっていますので、ある日突然新バージョンで挙動が変わっても「うちは一個前のバージョン使ってます！」という管理ができていれば動かなくなることはないのです。</p>

<p>とはいえ新バージョンでいきなりそんなトンデモ変更されたら困りますけども。</p>

<h3>僕が初めて作った gem</h3>

<p>自分が生まれて初めて作った gem はこの <code>rubocop_challenger</code> という gem です。</p>

<p><iframe src="https://hatenablog-parts.com/embed?url=https%3A%2F%2Fgithub.com%2Fryz310%2Frubocop_challenger" title="ryz310/rubocop_challenger" class="embed-card embed-webcard" scrolling="no" frameborder="0" style="display: block; width: 100%; height: 155px; max-width: 500px; margin: 10px 0px;"></iframe><cite class="hatena-citation"><a href="https://github.com/ryz310/rubocop_challenger">github.com</a></cite></p>

<p>一般的に gem は他のプログラムと組み合わせて使う事が多いのですが、 <code>rubocop_challenger</code> は単体で動作するやつでして、実行した<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%C7%A5%A3%A5%EC%A5%AF%A5%C8">ディレクト</a>リ（フォルダ）にあるプログラムの<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%BD%A1%BC%A5%B9%A5%B3%A1%BC%A5%C9">ソースコード</a>を少しずつ綺麗に（人間にとって読みやすくしたり、書き方のルールを統一したり）してくれる、という gem です。</p>

<p>というと物凄い神 gem ですが、RuboCop という<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%BD%A1%BC%A5%B9%A5%B3%A1%BC%A5%C9">ソースコード</a>を解析してくれる便利な gem を内部で呼び出してプルリク（プルリクが何なのかはググってください）作ってくれる、という仕組みになっているので、「人間が毎日手作業でやらないといけなかった事を自動的にやる」というのが <code>rubocop_challenger</code> の提供する価値になります 🤖</p>

<p>詳しくはちょうど一年くらい前に会社のブログに書いたので、ご興味ありましたら是非。古い内容なので、現在のバージョンからは少しずれてますけど。</p>

<p><iframe src="https://hatenablog-parts.com/embed?url=https%3A%2F%2Fdeveloper.feedforce.jp%2Fentry%2F2018%2F12%2F05%2F140000" title="まだ .rubocop_todo.yml で消耗してるの？ - Feedforce Developer Blog" class="embed-card embed-blogcard" scrolling="no" frameborder="0" style="display: block; width: 100%; height: 190px; max-width: 500px; margin: 10px 0px;"></iframe><cite class="hatena-citation"><a href="https://developer.feedforce.jp/entry/2018/12/05/140000">developer.feedforce.jp</a></cite></p>

<p>ちなみにもうすぐ <code>v2.0.0</code> をリリースする予定です。（pre バージョンですが、現時点でもすでに使えます）</p>

<h3>ニッチな gem</h3>

<p>初めて作ったのは <code>rubocop_challenger</code> という「人間が毎日手作業でやらないといけなかった事を自動的にやる」 gem でした。
完全に自分の会社のプロダクト用に作った gem でしたが、 <a class="keyword" href="http://d.hatena.ne.jp/keyword/Twitter">Twitter</a> などを<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%A8%A5%B4%A5%B5">エゴサ</a>してると、ぼちぼち使って頂けているようです。
同じような悩みを抱えている人は世の中にはいるもんですね✨</p>

<p>とはいえ、 gem を公開したら世界中の人たちが使ってくれる、ということには中々ならないです。
一応頑張って英語で説明を書いたりはしていますが、個人の発信力には限界もありますし、何よりニッチです。</p>

<p>というか、個人が作る gem なんて大抵はニッチなものになります。
「あー、こんな gem あったらめっちゃ便利やん？」という gem は大抵世界のどこかの誰かが作ってます。
なので、今までにないような新しいgem を作ろうと思ったら大抵ニッチになります。</p>

<p>じゃあ gem を公開しても大して使ってもらえないし、あんまり意味ないじゃん、って思うかもしれませんが、意味無くはないんですよね👍</p>

<h3>効能 1. <a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%B9%A5%AD%A5%EB%A5%A2%A5%C3%A5%D7">スキルアップ</a></h3>

<p>まず、めっちゃプログラムを書く勉強になります。</p>

<p><a class="keyword" href="http://d.hatena.ne.jp/keyword/Ruby">Ruby</a> で Web 開発をしている人は大抵 <a class="keyword" href="http://d.hatena.ne.jp/keyword/Ruby%20on%20Rails">Ruby on Rails</a> を使って書いてると思います。ちなみに <a class="keyword" href="http://d.hatena.ne.jp/keyword/Ruby%20on%20Rails">Ruby on Rails</a> も gem です。
<a class="keyword" href="http://d.hatena.ne.jp/keyword/Ruby%20on%20Rails">Ruby on Rails</a> は凄くよく出来ているので、Web 開発の難しい部分を 9 割くらいの肩代わりしてくれます。</p>

<p>ところが、自分で一から gem を作ろうとすると、自分の力で解決しないといけないプログラム的な課題がめっちゃあります。
Web 開発はインターネット特有の課題が多いですが、 gem の開発には Web 開発以外の知識も色々要求されたりします。</p>

<p>何より、自分自身で仕様を一から考えないといけないので、普段の開発以上に意思決<a class="keyword" href="http://d.hatena.ne.jp/keyword/%C4%EA%CE%CC">定量</a>がめっちゃ多いです。
自分は <code>rubocop_challenger</code> 以外にもメンテナンスしている gem が 3 つほどありますが、これらの開発を通して日頃の Web 開発の品質も一段レベルが上がったな、と感じる事が多いです。</p>

<p>なので、gem の開発は自分自身の修行のためだと思ってやると良いかもしれません。誰かに使えてもらえたらラッキー、みたいな。</p>

<p>逆に使ってもらえる事をモチベーションにするとちょっと辛いかもしれないです。思った以上に流行らない。もっと流行れ！</p>

<h3>効能 2. <a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%DD%A1%BC%A5%C8%A5%D5%A5%A9%A5%EA%A5%AA">ポートフォリオ</a></h3>

<p>gem を公開してるせいか、企業からのスカウトがめっちゃ来るようになります。</p>

<p>自分自身、会社の採用活動に関わる機会が多いのですが、例えばスカウト候補を探す際に候補者の <a class="keyword" href="http://d.hatena.ne.jp/keyword/GitHub">GitHub</a> は必ず見るようにしています。
その経験からですが自分で gem 書いて公開しているエンジニアは世の中の 1 割もいないんじゃないかな、って思っています。</p>

<p>自分も gem を作るようになったのはここ 1 ~ 2 年ですし、前職にいた頃だと普段の仕事の帰りが遅かったりもしたので家に帰ってから gem を作るような余裕もありませんでした。なので、本人の熱量や環境が整わないと gem の開発は難しいかもしれません。</p>

<p>しかしながら、自分も採用活動していて「お。この人すごいやん」ってなるのは <a class="keyword" href="http://d.hatena.ne.jp/keyword/GitHub">GitHub</a> や Qiita とかで何かしらアウトプットのある方なんですよね。
もちろんアウトプットが無くても実際会ってみたら凄かったって人は沢山いるんですが、採用活動だとその人の仕事でのアウトプットって見えないもんですから。。</p>

<p>別に gem じゃなくても良いんですが、自分自身のキャリア形成を意識するためのアウトプットの一環としてとても有用だと思います。</p>

<h3>効能 3. 魔法のアイテム</h3>

<p>自分が今年作った gem に <code>my_api_client</code> という gem がありまして、<a class="keyword" href="http://d.hatena.ne.jp/keyword/API">API</a> Client を作るための<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%D5%A5%EC%A1%BC%A5%E0%A5%EF%A1%BC%A5%AF">フレームワーク</a>なんですが、これはプロダクトの<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%BD%A1%BC%A5%B9%A5%B3%A1%BC%A5%C9">ソースコード</a>にも使っています。</p>

<p>自分が携わってるサービスは <a href="https://socialplus.jp/">ソーシャルPLUS</a> というものでして、企業の Web サービスとソーシャルログインプロバイダー（ LINE とか <a class="keyword" href="http://d.hatena.ne.jp/keyword/Twitter">Twitter</a> とか）のハブになってるサービスなんですね。そのせいもあって、外部の Web <a class="keyword" href="http://d.hatena.ne.jp/keyword/API">API</a> へリク<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%A8%A5%B9">エス</a>トするという処理が多く、毎回同じようなエラーハンドリングやリトライの処理を何度も書かないといけなくて大変だった訳です。</p>

<p>あと、エラーが発生した際に「ソーシャルPLUS」「ソーシャルPLUSを利用している企業」「ソーシャルログインプロバイダ」の誰が原因なのかを特定するための情報をログに残すとかも都度対応しないといけなくて超大変でした。</p>

<p><code>my_api_client</code> はその辺の処理をすっきり簡単に書けるようにするための gem でして、すっきり簡単なもんだから、チームメイトが <code>my_api_client</code> を活用して自発的にガンガン課題を解決してくれる、という最高にホットな状況を産み出すことに一役買っております。</p>

<p>やっぱエンジニアも人間なので、普段の業務で忙しい中で改善活動も同時にやろうなんてモチベーションは普通は湧いてこない訳です。でも、これを使えばすっきり簡単だよ、っていう魔法のアイテムがあれば、みんなの重い腰を少しだけ軽くする事ができます。</p>

<p><code>my_api_client</code> は自分の中でも割とよくできた gem なので、毎回こんな良い gem が作れる訳じゃないですけど、 gem を作ってチームの生産性が上がるってのはやっぱ魔法のアイテムだなぁって思うんです。gem は世界を救います！（２回目）</p>

<p>なお、 <code>my_api_client</code> については <a href="https://ginza-rails.connpass.com/event/133628/">銀座 Rails #10</a> で登壇したときの資料があるので貼っておきます。これも若干古いので、最新の仕様とは少し異なるかもしれません。
最新の仕様は <a href="https://github.com/ryz310/my_api_client/blob/master/README.jp.md">こちら</a> をご覧下さい。</p>

<script async class="speakerdeck-embed" data-id="75d691da45b041deb3db8e6748d81638" data-ratio="1.37081659973226" src="//speakerdeck.com/assets/embed.js"></script>


<h3>効能 4. たのしい</h3>

<p>最後はここに帰ってくるんですが、自分の gem を作るのはやっぱ楽しいのです。いきなり頭悪い文章になりました。いつから頭良い文章書いてると錯覚していた？</p>

<p>以前勉強会で「これまでどういうキャリアを意識してやってきましたか？」って若手のエンジニアから聞かれたのですが、自分みたいな 30 半ばのエンジニアって、エンジニアになった当初は今みたいにエンジニアが持て囃される時代でもなかったので、自分からエンジニアになろうって思った人は少なからず「ただプログラムが好きだった」っていう人が多いんじゃないですかね？わかんないですけど自分はそうでした。</p>

<p>自作の gem を作ってると「やっぱプログラム書くのって楽しい」ってのを思い出させてくれます。
自分は他にも趣味でバンドやったり絵を描いたりしていますが、プログラミングが子供の頃に好きだった工作に一番近いような気がしています。</p>

<p>中々プライベートで時間を作るのは難しいんですが、やはり楽しさが一番根底の原動力になっているのかもしれないですね。</p>

<h2>まとまらないまとめ</h2>

<p>会社の<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%A2%A5%C9%A5%D9%A5%F3%A5%C8%A5%AB%A5%EC%A5%F3%A5%C0%A1%BC">アドベントカレンダー</a>向けだし、非エンジニアにも伝わるようなフワッとした文章にしようと思って書いてたら、途中から俺のポエムを書き殴ってただけになった気がしますが、役に立つかどうかは 2 の次にして、とりあえず gem 作ってみると楽しく<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%B9%A5%AD%A5%EB%A5%A2%A5%C3%A5%D7">スキルアップ</a>できるし、もしかしたら誰かの魔法のアイテムになってるかもしれないよ、というお話でした。</p>

<p>久々にゆる〜い文章書いてて自分的には楽しかったです 笑</p>

<h2>さて、明日の Advent Calendar は？（CV. <a class="keyword" href="http://d.hatena.ne.jp/keyword/%B2%C3%C6%A3%A4%DF%A4%C9%A4%EA">加藤みどり</a>）</h2>

<p><a href="https://adventar.org/calendars/4169">Feedforce Advent Calendar 2019</a>、明日は上岡君が「野球についてor遠隔<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%A4%A5%F3%A5%BF%A1%BC%A5%F3">インターン</a>について」書いてくれるみたいです。</p>

<p>最近は<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%A4%A5%F3%A5%BF%A1%BC%A5%F3">インターン</a>も遠隔で出来るんですね。野球も遠隔<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%A4%A5%F3%A5%BF%A1%BC%A5%F3">インターン</a>も未経験のままおじさんになってしまったので自分には未知の領域です⚾️💨</p>

<p>乞うご期待！</p>
]]></description>
            <enclosure url="https://cdn.blog.st-hatena.com/images/theme/og-image-1500.png" length="0" type="image/png"/>
        </item>
        <item>
            <title><![CDATA[Heroku Meetup #27 で『デプロイで止まらないバッチ処理を求めて』という話をしてきた #herokujp]]></title>
            <link>https://developer.feedforce.jp/entry/2019/12/14/153000</link>
            <guid>https://developer.feedforce.jp/entry/2019/12/14/153000</guid>
            <pubDate>Sat, 14 Dec 2019 06:30:00 GMT</pubDate>
            <description><![CDATA[<p>土曜日にこんにちは <a href="http://blog.hatena.ne.jp/masutaka26/" class="hatena-id-icon"><img src="https://cdn.profile-image.st-hatena.com/users/masutaka26/profile.png" width="16" height="16" alt="" class="hatena-id-icon">id:masutaka26</a> です。</p>

<p>この記事は Heroku Advent Calendar 2019 の 14 日目の記事です。</p>

<p><iframe src="https://hatenablog-parts.com/embed?url=https%3A%2F%2Fqiita.com%2Fadvent-calendar%2F2019%2Fheroku" title="Heroku Advent Calendar 2019 - Qiita" class="embed-card embed-webcard" scrolling="no" frameborder="0" style="display: block; width: 100%; height: 155px; max-width: 500px; margin: 10px 0px;"></iframe><cite class="hatena-citation"><a href="https://qiita.com/advent-calendar/2019/heroku">qiita.com</a></cite></p>

<p>昨日は <a href="https://qiita.com/takahito0508">@takahito0508</a> さんの『<a href="https://qiita.com/takahito0508/items/0f30e441dd5fba673560">Salesforce の Org Development 用の Buildpack を作った話</a>』でした。Heroku の Buildpack は割と簡単な仕組みなので、ハードルが低いですよね。</p>

<p>さて、同じ日（2019/12/13）に開催された <a href="https://herokujp.doorkeeper.jp/events/99972">Heroku Meetup #27 "Heroku Vitamin!"</a> で『デプロイで止まらないバッチ処理を求めて』というお題で発表してきました。</p>

<iframe src="https://docs.google.com/presentation/d/e/2PACX-1vRVD7Gx345OvUDpoGaRxv5sYQB9uCpvFORJvhgKWySCxNd3WqQQEM4Gfpx0OJYoOyf2sY8GVUKD3spA/embed?start=false&loop=false&delayms=3000" frameborder="0" width="960" height="400" allowfullscreen="true" mozallowfullscreen="true" webkitallowfullscreen="true"></iframe>


<p>Heroku meetup は<a href="https://herokujp.doorkeeper.jp/events/93092">前々回 #25</a> 以来の参加と登壇です。</p>

<p><iframe src="https://hatenablog-parts.com/embed?url=https%3A%2F%2Fdeveloper.feedforce.jp%2Fentry%2F2019%2F07%2F29%2F140000" title="Heroku Meetup #25 &quot;Heroku Ghost&quot; で 2 回話してきた #herokujp - Feedforce Developer Blog" class="embed-card embed-blogcard" scrolling="no" frameborder="0" style="display: block; width: 100%; height: 190px; max-width: 500px; margin: 10px 0px;"></iframe><cite class="hatena-citation"><a href="https://developer.feedforce.jp/entry/2019/07/29/140000">developer.feedforce.jp</a></cite></p>

<h2>所感</h2>

<p>世の中では割と多くのバッチ処理が動いていると思います。ですが、Heroku 上でのバッチ処理はあまり情報がないので、今回紹介させて頂きました。技術スタックとしては、Rails の Active Job と Sidekiq です。</p>

<p>今回もニッチな発表ができてとても満足しています。会場にいる一人に刺されば大成功くらいの気持ちで発表していました。</p>

<p>中の人曰く、こんな One-Off Dyno の使い方をする人は初めて見たとのこと。(^^;</p>

<p>使い方としては問題ないそうですが、<a href="https://devcenter.heroku.com/articles/dyno-runtime#private-spaces-runtime">Private Spaces</a> では Dyno の起動が遅いそうなので、そこはやや注意とのこと。</p>

<p>※ <a href="https://ecbooster.jp/">EC Booster</a> では一般向けの <a href="https://devcenter.heroku.com/articles/dyno-runtime#common-runtime">Common Runtime</a> を使っています。</p>

<p>とは言え、<a href="https://devcenter.heroku.com/articles/platform-api-reference#dyno-create">Dyno Create API</a> は Dyno の起動完了を待たずに即座に終了するため、Private Spaces でも大丈夫みたいです。</p>

<p><blockquote class="twitter-tweet" data-lang="ja"><p lang="ja" dir="ltr">.<a href="https://twitter.com/masutaka?ref_src=twsrc%5Etfw">@masutaka</a> さんのお話 <a href="https://twitter.com/hashtag/herokujp?src=hash&amp;ref_src=twsrc%5Etfw">#herokujp</a> <a href="https://t.co/RZnLFWq9qn">pic.twitter.com/RZnLFWq9qn</a></p>&mdash; Satoshi Nagano (@thisisnagano) <a href="https://twitter.com/thisisnagano/status/1205437869453500416?ref_src=twsrc%5Etfw">2019年12月13日</a></blockquote><script async src="https://platform.twitter.com/widgets.js" charset="utf-8"></script></p>

<p>明日は <a href="https://qiita.com/seijikohara">@seijikohara</a> さんです。お楽しみに。</p>
]]></description>
            <enclosure url="https://cdn-ak.f.st-hatena.com/images/fotolife/m/masutaka26/20191214/20191214151304.jpg" length="0" type="image/jpg"/>
        </item>
        <item>
            <title><![CDATA[シングルサインオンのひとことで片付けない]]></title>
            <link>https://blog.tmd45.jp/entry/2019/12/09/090000</link>
            <guid>https://blog.tmd45.jp/entry/2019/12/09/090000</guid>
            <pubDate>Mon, 09 Dec 2019 00:00:00 GMT</pubDate>
            <description><![CDATA[<p>この記事は <a href="https://qiita.com/advent-calendar/2019/identity">認証認可技術 Advent Calendar 2019</a> の 9 日目の記事です。</p>

<p>前日は <del><a href="https://qiita.com/Munchkin">Munchkin</a> さんの『認可機構によるアクセス制御とビジネスロジックによるアクセス制御の使い分け』でした。</del><br/>
<a href="https://qiita.com/kishisuke">kishisuke</a> さんの『<a href="https://qiita.com/kishisuke/items/e83112d06e0d907a956f">Sign in with Apple+Cordovaについて</a>』でした。</p>

<p><a href="http://blog.hatena.ne.jp/tmd45/" class="hatena-id-icon"><img src="https://cdn.profile-image.st-hatena.com/users/tmd45/profile.png" width="16" height="16" alt="" class="hatena-id-icon">id:tmd45</a>です、ごきげんよう。</p>

<p>仕事では主に認可の RP 側として toC な認可 IdP（LINE, Google, Yahoo! JAPAN, Facebook, Twitter, など）に接しています、よろしくお願いします。</p>

<p style="text-align:center;">§</p>


<p>認証認可界隈でお仕事していると、社内からもお客様からも「シングルサインオン」（Single Sign-On, 略称 SSO）という便利機能について話題に上がることがあります。</p>

<p>ただこの「シングルサインオン」という単語の定義がちょっとあいまいで、開発者からすると「シングルサインオンをやりたい」と言われて想像するものに認識のズレがあったりします。</p>

<p>たとえば、私が聞いたことがあって「それはシングルサインオンなのか…？」と引っかかったのはこんなところ:</p>

<div style="padding: 1.5em 1.5em 0 1.5em; margin-bottom: 1.5em; border: 1px solid #ddd; border-radius: 5px;">
<p><b>ソーシャルログイン＝シングルサインオン</b></p>
<p>ID/Password による自社会員 DB でのログインしかなかったサービスで、ソーシャルログインが導入されたときにプレスリリースに「SSO 対応！」というウリ文句が 🤔</p>
<p><b>LINE Login v2.1 から SSO 対応</b></p>
<p>ブラウザでの LINE ログインセッションが維持され、v2.0 までは認可フロー中に毎度（LINE ログイン画面上での）ID/Password の入力が必要だったものが、不要になったというもの 🤔</p>
</div>


<p>「シングルサインオン」は Wikipedia でも<a href="https://ja.wikipedia.org/wiki/%E3%82%B7%E3%83%B3%E3%82%B0%E3%83%AB%E3%82%B5%E3%82%A4%E3%83%B3%E3%82%AA%E3%83%B3">"不十分" な記事としてふわっと書かれて</a>おり、"ユーザがシステムごとにユーザIDとパスワードの組を入力する必要がなくなる" という意味ではこれらは正しそうです。</p>

<p>詳細な実装を見て広義に「これはシングルサインオンだね」と呼ぶのはいいのですが、開発者が困るのは、要望で「シングルサインオンをやりたい」と言われることです。</p>

<p style="text-align:center;">§</p>


<p>というわけで、今回は自分の思いつく範囲で「シングルサインオン」でないものとあるものをいくつか図で整理してみようと思います。</p>

<p><span style="color: #d32f2f">注）このあと添付する図中の URL のドメインやパスはイメージです。わかりやすさのために実在するサービスのドメインも利用していますがパスについては不正確ですのでご了承ください。</span></p>

<p><span style="color: #d32f2f">またその例として挙げているサービスについて批判や毀損を意図しているものではございません（あんまり適当すぎるドメインだと話がわかりづらくて…すみません）。</span></p>

<h3>明らかにシングルサインオンじゃないやつ</h3>

<p>どこに行っても ID と Password の入力を求められるやつ。</p>

<p><figure class="figure-image figure-image-fotolife" title="シングルサインオンに対応していない単一サービス"><span itemscope itemtype="http://schema.org/Photograph"><img src="https://cdn-ak.f.st-hatena.com/images/fotolife/t/tmd45/20191208/20191208192628.jpg" alt="f:id:tmd45:20191208192628j:plain" title="f:id:tmd45:20191208192628j:plain" class="hatena-fotolife" itemprop="image"></span><figcaption>シングルサインオンに対応していない単一サービス</figcaption></figure></p>

<p>単一サービスの場合は、そもそもシングルサインオンそのものが不要。</p>

<p><figure class="figure-image figure-image-fotolife" title="シングルサインオンに対応していない複数サービス群"><span itemscope itemtype="http://schema.org/Photograph"><img src="https://cdn-ak.f.st-hatena.com/images/fotolife/t/tmd45/20191208/20191208192803.jpg" alt="f:id:tmd45:20191208192803j:plain" title="f:id:tmd45:20191208192803j:plain" class="hatena-fotolife" itemprop="image"></span><figcaption>シングルサインオンに対応していない複数サービス群</figcaption></figure></p>

<p>企業から見れば１社内に複数サービス有していなければこの構図にはならないが、ユーザから見るとインターネット上のあらゆるサービスは大きくまとめて「複数サービス群」とも捉えられる。</p>

<p>そういう意味では「単一サービスの場合は、そもそもシングルサインオンそのものが不要」とも言い切れなくなる。</p>

<h3>ソーシャルログインからログインセッションをつくる</h3>

<p>ソーシャルログインを用いると、たいていの場合、ユーザが ID と Password を入力するのは認可プロバイダ（ソーシャルログインプロバイダ）のログインセッションを確立する初回アクセス時のみになる。</p>

<p>ユーザが普段から利用している（＝ログイン済みである）サービスが認可プロバイダとなれば、ユーザは認可フローのなかで「認可する」以外のアクションが不要となるため、手間が減るという利点がある。</p>

<p>サービス側は認可プロバイダから得られた属性情報（プロバイダ側のユーザID など）をもとにして、サービスのログインセッションを確立する。</p>

<p><figure class="figure-image figure-image-fotolife" title="ソーシャルログインに対応したサービス（広義のシングルサインオン）"><span itemscope itemtype="http://schema.org/Photograph"><img src="https://cdn-ak.f.st-hatena.com/images/fotolife/t/tmd45/20191208/20191208193823.jpg" alt="f:id:tmd45:20191208193823j:plain" title="f:id:tmd45:20191208193823j:plain" class="hatena-fotolife" itemprop="image"></span><figcaption>ソーシャルログインに対応したサービス（広義のシングルサインオン）</figcaption></figure></p>

<p>インターネット上のあらゆるサービスを大きくまとめて「複数サービス群」と捉えた場合、<b>認可プロバイダを介したシングルサインオンになっている</b>と言える。</p>

<p>これが認可プロバイダ側で都度 ID/Password の入力を求める形になっていると、その利点が死んでしまう。</p>

<p><figure class="figure-image figure-image-fotolife" title="残念な例: ソーシャルログインプロバイダがログイン状態を維持しないタイプ"><span itemscope itemtype="http://schema.org/Photograph"><img src="https://cdn-ak.f.st-hatena.com/images/fotolife/t/tmd45/20191208/20191208195524.jpg" alt="f:id:tmd45:20191208195524j:plain" title="f:id:tmd45:20191208195524j:plain" class="hatena-fotolife" itemprop="image"></span><figcaption>残念な例: ソーシャルログインプロバイダがログイン状態を維持しないタイプ</figcaption></figure></p>

<p>とはいえ、このケースでも決済前にはあえて再認証を行わせるなど（シングルサインオンとは直接関係しないが）都度認証する手間とセキュリティの向上はケースバイケースでバランスを考える必要がある。</p>

<h3>想像しやすいシングルサインオン</h3>

<p>ここからやっと、シングルサインオンと言われて（自分が）普通に想像するパターン。</p>

<p>ユーザはサービス群のどこか１箇所でログインしていれば、ID/Password 入力の手間をかけずに関連する他のサービスを利用することができる。</p>

<p><figure class="figure-image figure-image-fotolife" title="シングルサインオンに対応した複数サービス群（１サービスのログインに依存）"><span itemscope itemtype="http://schema.org/Photograph"><img src="https://cdn-ak.f.st-hatena.com/images/fotolife/t/tmd45/20191208/20191208200356.jpg" alt="f:id:tmd45:20191208200356j:plain" title="f:id:tmd45:20191208200356j:plain" class="hatena-fotolife" itemprop="image"></span><figcaption>シングルサインオンに対応した複数サービス群（１サービスのログインに依存）</figcaption></figure></p>

<p>図中にも書いたが、上記はこんなケースだったりする:</p>

<ul>
<li><code>example.com</code> サービスを作ったあとに <code>example2.com</code> サービスを追加した</li>
<li>ユーザに手間をかけさせることを避けるためにシングルサインオンを導入したい</li>
<li>開発が大変そうなので認証基盤システムを別で作るのは避けたい</li>
</ul>


<p>こういう場合、ユーザはシングルサインオンできて便利かもしれないが、開発者側としては「 <code>example2.com</code> が <code>example.com</code> に依存しており身動きが取りづらい」と感じて、さらなるサービス拡大をしづらくなっている状態だったりする。</p>

<p><figure class="figure-image figure-image-fotolife" title="シングルサインオンに対応した複数サービス群（認証基盤をはさむ）"><span itemscope itemtype="http://schema.org/Photograph"><img src="https://cdn-ak.f.st-hatena.com/images/fotolife/t/tmd45/20191208/20191208200500.jpg" alt="f:id:tmd45:20191208200500j:plain" title="f:id:tmd45:20191208200500j:plain" class="hatena-fotolife" itemprop="image"></span><figcaption>シングルサインオンに対応した複数サービス群（認証基盤をはさむ）</figcaption></figure></p>

<p>パッと見て健全なのがこの構成。</p>

<p>ただし実質 <code>example.com</code> と <code>example2.com</code> に加えて認証基盤である <code>auth.example.com</code> という３つのシステムを管理することになる。開発事情としては、（それぞれは相当ミニマムでなければ）開発者をそれなりの人数確保したり、チームを分割して運営したいところ。</p>

<p>…というのが前時代的な話で、最近だと IDaaS（Identity as a Service）などを活用することで、認証基盤システムのお守りを自組織からアウトソースするという手もあります。</p>

<p><figure class="figure-image figure-image-fotolife" title="おまけ: シングルサインオンにするかどうかわからないけど備えておく"><span itemscope itemtype="http://schema.org/Photograph"><img src="https://cdn-ak.f.st-hatena.com/images/fotolife/t/tmd45/20191208/20191208200528.jpg" alt="f:id:tmd45:20191208200528j:plain" title="f:id:tmd45:20191208200528j:plain" class="hatena-fotolife" itemprop="image"></span><figcaption>おまけ: シングルサインオンにするかどうかわからないけど備えておく</figcaption></figure></p>

<p>IDaaS の台頭で、シングルサインオンにするかどうかはともかく、認証基盤部分を早めにアウトソースするなど選択肢も広がりました。</p>

<p style="text-align:center;">§</p>


<p>はてさて「シングルサインオン」をキーワードに、ソーシャルログインや IDaaS といったものを絡めて書いてみました。</p>

<p>構成を考えるスコープを広めたり狭めたり、必要なセキュリティレベルとのバランスを見たり、開発組織の規模やスキルを加味したり、どんなシステムでもそうですが考えることはたくさんあります。</p>

<p>認証基盤に関わる皆様に置かれましては「シングルサインオン」という定義の曖昧な単語ドーーーン！ではなく、ユーザにどうあって欲しいか、開発をどのようにしていくべきか、などなど具体的なストーリー（要望、仕様）で会話できるといいかなと思う次第にございます。</p>

<p style="text-align:center;">§</p>


<p>明日は <a href="https://qiita.com/olt">olt</a> さんの『<a href="https://qiita.com/olt/items/584f9d1a840d024b2451">TwitterのOAuth1.0 認可用の中間サーバNode.jsで構築する</a>』 お話とのこと。ではでは。</p>

<hr />

<p>編集後記</p>

<p><iframe src="https://hatenablog-parts.com/embed?url=https%3A%2F%2Fblog.tmd45.jp%2Fentry%2F2019%2F12%2F10%2F134115" title="『シングルサインオンのひとことで片付けない』を書いて - TMD45&#39;β&#39;LOG!!!" class="embed-card embed-blogcard" scrolling="no" frameborder="0" style="display: block; width: 100%; height: 190px; max-width: 500px; margin: 10px 0px;"></iframe><cite class="hatena-citation"><a href="https://blog.tmd45.jp/entry/2019/12/10/134115">blog.tmd45.jp</a></cite></p>
]]></description>
            <enclosure url="https://cdn-ak.f.st-hatena.com/images/fotolife/t/tmd45/20191208/20191208200500.jpg" length="0" type="image/jpg"/>
        </item>
        <item>
            <title><![CDATA[月末に起動したいバッチを sidekiq-cron で指定し、healthchecks.io で監視する]]></title>
            <link>https://developer.feedforce.jp/entry/2019/12/05/101931</link>
            <guid>https://developer.feedforce.jp/entry/2019/12/05/101931</guid>
            <pubDate>Thu, 05 Dec 2019 01:19:31 GMT</pubDate>
            <description><![CDATA[<p>こんにちは。<a href="http://blog.hatena.ne.jp/masutaka26/" class="hatena-id-icon"><img src="https://cdn.profile-image.st-hatena.com/users/masutaka26/profile.png" width="16" height="16" alt="" class="hatena-id-icon">id:masutaka26</a> です。</p>

<p>去年の 6/30 からジムに通い始めて、なんとか週に 2~3 のペースで続いています。サプリメントも半信半疑ながら毎日飲んでいますが、ドラッグストアや Amazon で買うと割と高いと思います。</p>

<p>個人的には <a href="https://jp.iherb.com/">iHerb</a> がだいぶオススメです。以前 3.6kg のプロテインを買ったらなぜかキャンペーンが適用されて、30% オフの 6,517 円になりました。</p>

<p>さらにこの<a href="https://www.youtube.com/watch?v=ue0EFA_SxZc">案件動画</a>を見て、プレワークアウトサプリ（C4 SPORT）にも手を出してしまいました。BCAA も飲んでいます。</p>

<p>Twitter とかで検索すると、初回 10% OFF の紹介コードが見つかると思います。さらにお得です。</p>

<p>何の記事でしたっけ...？そうだ、この記事は <a href="https://adventar.org/calendars/4169">Feedforce Advent Calendar 2019</a> の 5 日目の記事です！</p>

<p>昨日は <a href="http://blog.hatena.ne.jp/kano-e/" class="hatena-id-icon"><img src="https://cdn.profile-image.st-hatena.com/users/kano-e/profile.png" width="16" height="16" alt="" class="hatena-id-icon">id:kano-e</a> の「2019 年に会社ボドゲ棚から自宅に持ち帰ったボドゲたち」でした。変わらぬボドゲ愛・・・！</p>

<p><iframe src="https://hatenablog-parts.com/embed?url=http%3A%2F%2Fff-boardgame.hatenablog.com%2Fentry%2F2019%2F12%2F04%2F000000" title="2019 年に会社ボドゲ棚から自宅に持ち帰ったボドゲたち - フィードフォース ボドゲ部" class="embed-card embed-blogcard" scrolling="no" frameborder="0" style="display: block; width: 100%; height: 190px; max-width: 500px; margin: 10px 0px;"></iframe><cite class="hatena-citation"><a href="http://ff-boardgame.hatenablog.com/entry/2019/12/04/000000">ff-boardgame.hatenablog.com</a></cite></p>

<h2>sidekiq-cron で月末を指定する</h2>

<p>脈絡ありませんが、<a href="https://github.com/ondrejbartas/sidekiq-cron">sidekiq-cron</a> では <code>last</code> で月末を指定することが出来ます。</p>

<p>例えば <code>0 12 last * * Asia/Tokyo</code> の次回実行は <code>2019/12/31 12:00 JST</code> です。<code>2019/11/30 12:00 JST</code> は無事動きました。</p>

<p>このような設定になります。</p>

<pre class="code lang-yaml" data-lang="yaml" data-unlink><span class="synIdentifier">sample_job</span><span class="synSpecial">:</span>
  <span class="synIdentifier">active_job</span><span class="synSpecial">:</span> <span class="synConstant">true</span>
  <span class="synIdentifier">cron</span><span class="synSpecial">:</span> <span class="synConstant">&quot;0 12 last * * Asia/Tokyo&quot;</span>
  <span class="synIdentifier">class</span><span class="synSpecial">:</span> <span class="synConstant">&quot;SampleJob&quot;</span>
  <span class="synIdentifier">queue</span><span class="synSpecial">:</span> default
</pre>


<p>この cron 書式は sidekiq-cron が依存する <a href="https://github.com/floraison/fugit">fugit</a> による実装です。</p>

<p>確認はしていませんが、<code>last</code> の他にも <code>-1</code> や <code>L</code> などが使えるようです。</p>

<p>🔗 <a href="https://github.com/floraison/fugit/blob/v1.3.3/spec/cron_spec.rb#L734-L747">https://github.com/floraison/fugit/blob/v1.3.3/spec/cron_spec.rb#L734-L747</a></p>

<pre class="code lang-ruby" data-lang="ruby" data-unlink>context <span class="synSpecial">'</span><span class="synConstant">negative monthdays</span><span class="synSpecial">'</span> <span class="synStatement">do</span>

  [
    [ <span class="synSpecial">'</span><span class="synConstant">* * -1 * *</span><span class="synSpecial">'</span>, <span class="synSpecial">'</span><span class="synConstant">* * -1 * *</span><span class="synSpecial">'</span> ],
    [ <span class="synSpecial">'</span><span class="synConstant">* * -7--1 * *</span><span class="synSpecial">'</span>, <span class="synSpecial">'</span><span class="synConstant">* * -7,-6,-5,-4,-3,-2,-1 * *</span><span class="synSpecial">'</span> ],
    [ <span class="synSpecial">'</span><span class="synConstant">* * -1--27 * *</span><span class="synSpecial">'</span>, <span class="synSpecial">'</span><span class="synConstant">* * -31,-30,-29,-28,-27,-1 * *</span><span class="synSpecial">'</span> ],
    [ <span class="synSpecial">'</span><span class="synConstant">* * -7--1/2 * *</span><span class="synSpecial">'</span>, <span class="synSpecial">'</span><span class="synConstant">* * -7,-5,-3,-1 * *</span><span class="synSpecial">'</span> ],
    [ <span class="synSpecial">'</span><span class="synConstant">* * L * *</span><span class="synSpecial">'</span>, <span class="synSpecial">'</span><span class="synConstant">* * -1 * *</span><span class="synSpecial">'</span> ],
    [ <span class="synSpecial">'</span><span class="synConstant">* * -7-L * *</span><span class="synSpecial">'</span>, <span class="synSpecial">'</span><span class="synConstant">* * -7,-6,-5,-4,-3,-2,-1 * *</span><span class="synSpecial">'</span> ],
    [ <span class="synSpecial">'</span><span class="synConstant">* * last * *</span><span class="synSpecial">'</span>, <span class="synSpecial">'</span><span class="synConstant">* * -1 * *</span><span class="synSpecial">'</span> ],
  ].each { |<span class="synIdentifier">c</span>, <span class="synIdentifier">e</span>|
    it(<span class="synSpecial">&quot;</span><span class="synConstant">parses </span><span class="synSpecial">#{</span>c<span class="synSpecial">}&quot;</span>) { expect(<span class="synType">Fugit</span>::<span class="synType">Cron</span>.parse(c).to_cron_s).to eq(e) }
  }
<span class="synStatement">end</span>
</pre>


<p><code>negative monthdays</code> って表現は面白い。</p>

<h2>healthchecks.io で月末のバッチを監視する</h2>

<p>バッチが本当に起動したかを監視するのは難しいと思います。月末の監視はさらに難しいと思います。</p>

<p>過度な依存は禁物ですが、<a href="https://healthchecks.io/">healthchecks.io</a> は選択肢に入れても良いかもしれません。以下の記事をどうぞ。</p>

<p><iframe src="https://hatenablog-parts.com/embed?url=https%3A%2F%2Fdeveloper.feedforce.jp%2Fentry%2F2018%2F10%2F09%2F140000" title="terraform-provider-healthchecksio に足りない機能を実装したらコラボレータになれた - Feedforce Developer Blog" class="embed-card embed-blogcard" scrolling="no" frameborder="0" style="display: block; width: 100%; height: 190px; max-width: 500px; margin: 10px 0px;"></iframe><cite class="hatena-citation"><a href="https://developer.feedforce.jp/entry/2018/10/09/140000">developer.feedforce.jp</a></cite></p>

<p>前述の cron 設定だと <code>0 12 l * *</code> で監視することが出来ます。<code>l</code> は小文字のエルです。</p>

<p>terraform-provider-healthchecksio の設定例です。</p>

<pre class="code lang-tf" data-lang="tf" data-unlink>resource &quot;<span class="synConstant">healthchecksio_check</span>&quot; &quot;<span class="synConstant">sample_job</span>&quot; <span class="synSpecial">{</span>
  name     <span class="synStatement">=</span> &quot;<span class="synConstant">SampleJob</span>&quot;
  tags     <span class="synStatement">=</span> <span class="synSpecial">[</span>&quot;<span class="synConstant">production</span>&quot;<span class="synSpecial">]</span>
  grace    <span class="synStatement">=</span> &quot;<span class="synConstant">60</span>&quot;
  schedule <span class="synStatement">=</span> &quot;<span class="synConstant">0 12 l * *</span>&quot;
  timezone <span class="synStatement">=</span> &quot;<span class="synConstant">Asia/Tokyo</span>&quot;
  channels <span class="synStatement">=</span> <span class="synSpecial">[</span>data.healthchecksio_channel.slack.id<span class="synSpecial">]</span>
<span class="synSpecial">}</span>

data &quot;<span class="synConstant">healthchecksio_channel</span>&quot; &quot;<span class="synConstant">slack</span>&quot; <span class="synSpecial">{</span>
  kind <span class="synStatement">=</span> &quot;<span class="synConstant">slack</span>&quot;
<span class="synSpecial">}</span>
</pre>


<p>こちらの cron 書式は <a href="https://github.com/healthchecks/healthchecks">healthchecks</a> が依存する <a href="https://github.com/taichino/croniter">croniter</a> による実装です。</p>

<p><code>l</code> 以外の指定は見当たりませんでした。</p>

<p>🔗 <a href="https://github.com/taichino/croniter/blob/0.3.29/src/croniter/tests/test_croniter.py#L209-L223">https://github.com/taichino/croniter/blob/0.3.29/src/croniter/tests/test_croniter.py#L209-L223</a></p>

<pre class="code lang-python" data-lang="python" data-unlink><span class="synStatement">def</span> <span class="synIdentifier">testLastDayOfMonth</span>(self):
    base = datetime(<span class="synConstant">2015</span>, <span class="synConstant">9</span>, <span class="synConstant">4</span>)
    itr = croniter(<span class="synConstant">'0 0 l * *'</span>, base)
    n1 = itr.get_next(datetime)
    self.assertEqual(n1.month, <span class="synConstant">9</span>)
    self.assertEqual(n1.day, <span class="synConstant">30</span>)
    n2 = itr.get_next(datetime)
    self.assertEqual(n2.month, <span class="synConstant">10</span>)
    self.assertEqual(n2.day, <span class="synConstant">31</span>)
    n3 = itr.get_next(datetime)
    self.assertEqual(n3.month, <span class="synConstant">11</span>)
    self.assertEqual(n3.day, <span class="synConstant">30</span>)
    n4 = itr.get_next(datetime)
    self.assertEqual(n4.month, <span class="synConstant">12</span>)
    self.assertEqual(n4.day, <span class="synConstant">31</span>)
</pre>


<p>2019 年もそろそろ終わりです。年末にだけ動くバッチを設定＆監視するのも良いかもしれません。</p>

<p>明日は、こばりゅうの記事です。ひこうきかっけー！？お楽しみに。</p>
]]></description>
            <enclosure url="https://cdn-ak.f.st-hatena.com/images/fotolife/m/masutaka26/20191205/20191205000250.png" length="0" type="image/png"/>
        </item>
        <item>
            <title><![CDATA[ソーシャルPLUS の技術スタックを整理してみた]]></title>
            <link>https://developer.feedforce.jp/entry/2019/11/25/120000</link>
            <guid>https://developer.feedforce.jp/entry/2019/11/25/120000</guid>
            <pubDate>Mon, 25 Nov 2019 03:00:00 GMT</pubDate>
            <description><![CDATA[<p>ソーシャルPLUS 開発チームリーダーの <a href="https://developer.feedforce.jp/archive/author/tmd45">id:tmd45</a> です。ごきげんよう。</p>

<p>ソーシャルPLUS チームではバックエンドエンジニアの絶賛採用活動中なのですが、そのときにまとめた技術スタックについて、採用メディアにだけ使うのももったいないと思ったので、普通にブログ記事に書いてみることにしました。よろしくおねがいします。'`ｨ (ﾟдﾟ)/</p>

<p><span itemscope itemtype="http://schema.org/Photograph"><img src="https://cdn-ak.f.st-hatena.com/images/fotolife/t/tmd45/20191122/20191122182928.png" alt="f:id:tmd45:20191122182928p:plain" title="f:id:tmd45:20191122182928p:plain" class="hatena-fotolife" itemprop="image"></span></p>

<ul class="table-of-contents">
    <li><a href="#ソーシャルPLUS-って">ソーシャルPLUS って？</a></li>
    <li><a href="#システムの役割">システムの役割</a><ul>
            <li><a href="#ソーシャルログインサービス">ソーシャルログインサービス</a></li>
            <li><a href="#LINE-メッセージ配信サービス">LINE メッセージ配信サービス</a></li>
        </ul>
    </li>
    <li><a href="#技術スタックの紹介">技術スタックの紹介</a><ul>
            <li><a href="#バックエンドサーバーサイド">バックエンド（サーバーサイド）</a></li>
            <li><a href="#フロントエンド">フロントエンド</a></li>
            <li><a href="#インフラストラクチャ">インフラストラクチャ</a></li>
            <li><a href="#その他">その他</a></li>
        </ul>
    </li>
    <li><a href="#おわりに">おわりに</a></li>
</ul>

<h1 id="ソーシャルPLUS-って">ソーシャルPLUS って？</h1>

<p>おそらく知らない方が大半だと思うので、かんたんにサービス紹介をば。</p>

<p><iframe src="https://hatenablog-parts.com/embed?url=https%3A%2F%2Fsocialplus.jp%2F" title="ソーシャルログイン / ID連携の導入・実装支援サービス「ソーシャルPLUS」" class="embed-card embed-webcard" scrolling="no" frameborder="0" style="display: block; width: 100%; height: 155px; max-width: 500px; margin: 10px 0px;"></iframe><cite class="hatena-citation"><a href="https://socialplus.jp/">socialplus.jp</a></cite></p>

<p>ソーシャルPLUS は、WEB サイトでの会員登録や再ログインがかんたんになる「ソーシャルログイン」を複数プラットフォームまとめて一括で実装できる BtoBtoC の ID 連携サービスです。</p>

<p>対応するプラットフォーム（認可プロバイダ）には LINE、Yahoo! JAPAN、Google、Facebook、Twitter があります。とくに 2016年からは LINE Messaging API によるメッセージ配信や 1to1 トークに対応し、コンシューマー（エンドユーザー）への継続的なリーチや商品購入後のカスタマーサポートなどが可能になりました。ID 連携によりエンドユーザーとのコミュニケーションチャネルが広がり、さらに精度も高められるようになります。</p>

<p>企業の課題を解決するだけでなく、企業が実現したい事の先にいるエンドユーザーにとってメリットがあるかを重要視したユーザーファーストの考え方で、機能追加やサービスの活用提案を行なっています。</p>

<p>2012 年 4 月からサービスを開始し、7 年目となる今年もまだまだ成長しているサービスです。</p>

<h1 id="システムの役割">システムの役割</h1>

<p>ソーシャルPLUS では大きく以下の２つの Rails アプリケーションが中心になっています。</p>

<h2 id="ソーシャルログインサービス">ソーシャルログインサービス</h2>

<ul>
<li>ソーシャルログインの提供</li>
<li>プロバイダからのユーザ情報取得</li>
<li>API 提供</li>
<li>設定管理画面</li>
</ul>


<p>こちらはサービス稼働当初から存在する、コアとなる機能を扱っています。昔ながらの MVC すべてを Rails で構築しているアプリケーションです。</p>

<p>瞬間的なアクセス増加に耐える運用設計や、パフォーマンス改善、プロバイダの仕様変更への追従が、最近の主なタスクでした。</p>

<p>技術スタックは後述しますが、「ソーシャルログインの提供」と「設定管理画面」が１つのアプリケーションとして動いているのは、可用性も保守性もいまいちなので近々分離したいと考えている部分です。</p>

<h2 id="LINE-メッセージ配信サービス">LINE メッセージ配信サービス</h2>

<ul>
<li>スケジュール一括配信</li>
<li>メッセージ（Webhook）受信</li>
<li>1to1 メッセージ（チャットのようにエンドユーザーと対話できる機能）</li>
<li>API 提供</li>
<li>新機能: ステップ配信機能 開発中</li>
</ul>


<p>メッセージ配信サービスは 2017 年 4 月から提供を始めた（このプロダクトのなかでは）比較的新しいサービスです。</p>

<p>フロントエンドを React &amp; Redux で、サーバーサイドを Rails の API モードで構築しています。</p>

<p>これまでエンドユーザーからのメッセージを漏れなく受信するためのアーキテクチャや、メッセージ配信のパフォーマンスを上げる施策に取り組んできました。直近ではデザイナーが参加し、より使いやすい UI や UX を意識しながら新機能の開発を進めています。</p>

<h1 id="技術スタックの紹介">技術スタックの紹介</h1>

<p>現在、ソーシャルPLUS チームには８名の開発者が在籍していますが、メンバーの得意な技術領域によってバックエンド、フロントエンド、インフラのタスクを分けて取り掛かり、相互にフォローしながらチーム開発を進めています。</p>

<p>もちろん本人が希望すればどんな仕事でも関わってもらって構いません。実際、フルスタックを志して手が空けばいろんなタスクを消化しているメンバーもいます。</p>

<h2 id="バックエンドサーバーサイド">バックエンド（サーバーサイド）</h2>

<ul>
<li>ソーシャルログインサービスは <b>Ruby on Rails 4.2</b>（<s>来年中にはバージョンアップ予定</s> <a href="https://developer.feedforce.jp/entry/2020/09/08/142913">2020年9月 バージョンアップしました！</a>）</li>
<li>LINE メッセージ配信サービスは SPA（Single Page Application）として構築しており、サーバーサイドは <b>Ruby on Rails 5.2</b> の API モードを利用</li>
<li>いずれも RDB は <b>MySQL</b>、インメモリデータストアは <b>Redis</b> を利用</li>
<li><b>RSpec</b> による機能テスト（85 〜 91 % のカバレッジ）</li>
<li><b><a href="https://www.bugsnag.com/">Bugsnag</a>, <a href="https://scoutapm.com/">Scout</a></b> によるアプリケーションレイヤーの監視</li>
<li><b>Google BigQuery</b> へのログ集積</li>
<li>システムの一部に <b>AWS Lambda, Amazon DynamoDB, Amazon Kinesis</b> などを利用</li>
</ul>


<h2 id="フロントエンド">フロントエンド</h2>

<ul>
<li><b>React, TypeScript, <a href="https://firebase.google.com/">Firebase</a>, PWA</b> などを用いた BtoB 向け SPA</li>
<li><b>Atomic Design</b> をベースに UI を構造化、<b><a href="https://storybook.js.org/">Storybook</a></b> でコンポーネントを管理</li>
<li><b>Flux アーキテクチャ</b>にはおなじみの <b><a href="https://redux.js.org/">Redux</a></b> を用い、ファイル構造は <b>re-ducks パターン</b>を採用</li>
<li><b>モジュールのテスト</b>、<b>E2E テスト</b>や <b>ビジュアル回帰テスト</b>等にてプロダクトの品質を維持</li>
<li><b><a href="https://www.bugsnag.com/">Bugsnag</a>, <a href="https://logrocket.com/">LogRocket</a></b> によるフロントエンドアプリケーションレイヤーの監視</li>
</ul>


<h2 id="インフラストラクチャ">インフラストラクチャ</h2>

<ul>
<li><b>AWS</b> を中心に構成。<b>Route 53, ALB, EC2, Aurora MySQL</b> ほか</li>
<li><b>複数 AZ（Availability Zone）に冗長化</b>、構成変更は <b>Blue/Green Deployment</b></li>
<li><b>EKS</b> や <b>ECS</b> へのコンテナ化移行を検討中（技術検証や運用コストを踏まえて慎重に検証を重ねています）</li>
<li>Infrastructure as Code に従って <b>Terraform</b> や <b>Chef</b> でコード管理</li>
<li><b>作業の自動化</b>を意識。サーバー台数の増減はほぼ自動で行われる仕組みを実現</li>
<li><b><a href="https://www.datadoghq.com/">Datadog</a></b> を利用した監視、異常は <b>Slack</b> へ通知</li>
</ul>


<h2 id="その他">その他</h2>

<ul>
<li>全体で <b>Slack, GitHub, CircleCI, <a href="https://redash.io/">Redash</a></b> を利用</li>
<li>リリース作業を ChatOps 化（中継に Jenkins を利用）</li>
<li>リモートペアプロも挑戦中（おもに Slack Call と画面共有。方法は模索中）</li>
</ul>


<p>モニタリング内容やアラート、タスクカード（GitHub Project）はチームの席近くにある大型ディスプレイに表示して、朝会やイテレーションミーティングで眺められるようにしています。リモートじゃないモブプログラミングなんかもここでやります。</p>

<p><figure class="figure-image figure-image-fotolife" title="カンバンディスプレイ"><span itemscope itemtype="http://schema.org/Photograph"><img src="https://cdn-ak.f.st-hatena.com/images/fotolife/t/tmd45/20191122/20191122191259.jpg" alt="f:id:tmd45:20191122191259j:plain" title="f:id:tmd45:20191122191259j:plain" class="hatena-fotolife" itemprop="image"></span><figcaption>カンバンディスプレイ</figcaption></figure></p>

<h1 id="おわりに">おわりに</h1>

<p>すべての技術スタックについて細かに説明すると相当長くなるので、ざっくりになりました。技術スタックだけでなく、チームの仕事の仕方なんかも今後公開していければと思います。</p>

<p><span itemscope itemtype="http://schema.org/Photograph"><img src="https://cdn-ak.f.st-hatena.com/images/fotolife/t/tmd45/20191122/20191122212718.png" alt="f:id:tmd45:20191122212718p:plain" title="f:id:tmd45:20191122212718p:plain" class="hatena-fotolife" itemprop="image"></span></p>

<p>弊社ではカジュアル面談も行っていますが、ビジネスの説明からこういった技術スタックの解説まで、私やチームメンバーからさせていただいてます。</p>

<p>選考というフローに進む前にぜひ会社やプロダクトについて知ってもらえればと思っておりますので、気になる部分があればお気軽にご質問ください〜 (・ω・)ノ</p>
]]></description>
            <enclosure url="https://cdn-ak.f.st-hatena.com/images/fotolife/t/tmd45/20191122/20191122154253.png" length="0" type="image/png"/>
        </item>
        <item>
            <title><![CDATA[3ヶ月間、総務省の家計調査に協力していた]]></title>
            <link>https://masutaka.net/2019-11-17-1/</link>
            <guid>https://masutaka.net/2019-11-17-1/</guid>
            <pubDate>Sun, 17 Nov 2019 00:00:00 GMT</pubDate>
            <description><![CDATA[今年の8月から10月の3ヶ月間、総務省の家計調査に協力していました。
Wikipedia によると、
 日本国内の家計の支出を通じて個人消費を捉えることができる統計。2002年からは貯蓄・負債についても調査されるようになっており、調査結果は家計収支編と貯蓄・負債編に分けて発表されている。
 とのこと。2018年の餃子消費量1位は浜松市とかのアレも、家計調査の結果らしいです。https://www.e-stat.go.jp/ から誰でも利用できるようです。
はじまり 6月終わり頃のある日、突然のピンポンがはじまりでした。話を聞くと総務省から委託された調査員の方で、真面目そうなメガネを掛けたおばさまでした。年齢は60前後と推察しました。対象世帯は無作為に選ばれるらしいです。
私は10年以上家計簿をつけているし（現在はマネーフォワードを利用）、国勢調査みたいなものでしょと軽く考えていたのが想定外のはじまり。
その日はなぜか詳しい説明はなく、後日説明に再訪されることになりました。
※ 家計調査は訪問を介したコミュニケーションが多いです。オンラインを中心としたコミュニケーションが当たり前になっていると結構重いです。
想像を絶する苦行 後日の再訪で説明をよく聞くと「3ヶ月間毎日、レシートの中身をひとつひとつ全部、紙に記入する」という、想像を絶する苦行でした。そして毎月1日と16日に家計簿を取りに来るという&hellip;。予定を合わせるのも大変だし、家計簿を付ける以外のことが出来なくなりそうでした。
↓ これが1日分です。電子マネーや口座振替による支出は別のページに書きます。昭和か。
※ 家計簿の記入のしかた（単身世帯用） P8 より引用
さすがに大変すぎるので断ろうとしたら、Web サービスもあるとのこと。え、Web がデフォルトじゃないの？
調査員の方が経験がなく講習を受けただけ（？）らしく、後日説明に来ることになりました。コミュニケーションが重い&hellip;。
loading...
   if (localStorage.getItem("pref-theme") === "light") { const elements = document.getElementsByClassName('twitter-tweet'); for (let i = 0; i  再々訪は2週間後だったでしょうか。どんな説明があるのか少し構えていたら、URLとID、パスワードを書かれた紙を渡されてその日は終わりました。うーむ。
割と断る気満々だったのですが、タイミングを逃したため、とりあえず始めてみるかという気持ちになりました。
家計調査 オンライン回答システム https://www.e-kakei.go.jp/ です。SignUp は出来ません。Angular 製の SPA っぽくて、HTTP/1.1 でした。
最初はトップページの表示が激重でしたが、途中から問題ないレベルまで改善されました。
↓ 実際に入力したある日の家計簿です。
UI はあまり直感的でないです。例えば上の画面。しばらく経ってから、中央上部の日付をクリックするとカレンダーがポップアップし、他の日に移動できることに気づきました。日付の前後に &ldquo;&lt;&rdquo; や &ldquo;&gt;&rdquo; のナビゲータがあれば気づきやすいかと思います。
お問い合わせフォームはあったので、いくつか意見は送りました。例えばサイドメニューの「収支検索」でなにか記入して Enter すると、検索ではなくフォームのクリアが実行されるのは直感的でないとか。
あと、セッションタイムアウトが 1 時間くらいだったのは地味に不便でした。]]></description>
        </item>
        <item>
            <title><![CDATA[『Clean Architecture』を読んだ]]></title>
            <link>https://masutaka.net/2019-10-28-1/</link>
            <guid>https://masutaka.net/2019-10-28-1/</guid>
            <pubDate>Mon, 28 Oct 2019 00:00:00 GMT</pubDate>
            <description><![CDATA[一章一章は短いものの、全部で 34 章もあったので、読み終えるのに一ヶ月ほどもかけてしまった（付録は飛ばした）。
コードが出てきた記憶はなく、依存関係を表す図が多かった印象。
決して初心者向けの本ではなく、『オブジェクト指向設計実践ガイド』[2016-09-22-1] [2017-11-01-1] 程度を理解できる程度のスキルは必要だと思う。逆に言うと、『オブジェクト指向設計実践ガイド』の次に読む本としては良い。
そういう自分も、半分くらいはあまりピンと来ずに読んでいた記憶。
一方で一番自分にが価値があったのは「SOLID原則」のまとめのあたりかな。以下 5 つの原則の頭文字を取ったもの。
・単一責任の原則（SRP : Single Responsibility Principle）
・オープン・クローズドの原則（OCP : Open-Closed Principle）
・リスコフの置換原則（LSP : Liskov Substitution Principle）
・インターフェイス分離の原則（ISP : Interface Segregation Principle）
・依存関係逆転の原則（DIP : Dependency Inversion Principle）
業務に取り入れられる設計はあったので、良きタイミングで取り入れていきたい。
時間をおいてまた読み返そう。]]></description>
        </item>
        <item>
            <title><![CDATA[Slack に便利機能 "ワークフロービルダー" が増えたので勇み足で使ってみた]]></title>
            <link>https://developer.feedforce.jp/entry/2019/10/16/140901</link>
            <guid>https://developer.feedforce.jp/entry/2019/10/16/140901</guid>
            <pubDate>Wed, 16 Oct 2019 05:09:01 GMT</pubDate>
            <description><![CDATA[<p>Slack に「ワークフロービルダー」という機能ができたので現時点のメモ。</p>

<ul>
<li><a href="https://slackhq.com/intl-ja-jp-automate-tasks-in-slack-with-workflow-builder">ワークフロービルダーが新登場 : Slack で簡単にタスクを合理化 | The Official Slack Blog</a></li>
</ul>


<h2>どこにあるの？</h2>

<p>いまのところ、左上（ワークスペース名）のメニューから使える。</p>

<p><figure class="figure-image figure-image-fotolife" title="ワークスペースのメニュー"><span itemscope itemtype="http://schema.org/Photograph"><img src="https://cdn-ak.f.st-hatena.com/images/fotolife/t/tmd45/20191016/20191016140418.png" alt="f:id:tmd45:20191016140418p:plain" title="f:id:tmd45:20191016140418p:plain" class="hatena-fotolife" itemprop="image"></span><figcaption>ワークスペースのメニュー</figcaption></figure></p>

<h2>ワークフローの編集</h2>

<p>上のメニューをクリックすると別ウィンドウが開いてこういう編集ができる。</p>

<p><figure class="figure-image figure-image-fotolife" title="ワークフロービルダーの初期画面"><span itemscope itemtype="http://schema.org/Photograph"><img src="https://cdn-ak.f.st-hatena.com/images/fotolife/t/tmd45/20191016/20191016140504.png" alt="f:id:tmd45:20191016140504p:plain" title="f:id:tmd45:20191016140504p:plain" class="hatena-fotolife" itemprop="image"></span><figcaption>ワークフロービルダーの初期画面</figcaption></figure></p>

<p>「ワークフロー」作ってみた例</p>

<p><figure class="figure-image figure-image-fotolife" title="ワークフローの編集"><span itemscope itemtype="http://schema.org/Photograph"><img src="https://cdn-ak.f.st-hatena.com/images/fotolife/t/tmd45/20191016/20191016140539.png" alt="f:id:tmd45:20191016140539p:plain" title="f:id:tmd45:20191016140539p:plain" class="hatena-fotolife" itemprop="image"></span><figcaption>ワークフローの編集</figcaption></figure></p>

<p>「設定」の内容</p>

<p><figure class="figure-image figure-image-fotolife" title="ワークフローの設定"><span itemscope itemtype="http://schema.org/Photograph"><img src="https://cdn-ak.f.st-hatena.com/images/fotolife/t/tmd45/20191016/20191016140559.png" alt="f:id:tmd45:20191016140559p:plain" title="f:id:tmd45:20191016140559p:plain" class="hatena-fotolife" itemprop="image"></span><figcaption>ワークフローの設定</figcaption></figure></p>

<h2>Slack チャンネル上でできること</h2>

<p>ワークフローを登録したチャンネルに ⚡ マークが出てきて、そこからアクションが始められる。このトリガーも何種類かあるみたい。</p>

<p><figure class="figure-image figure-image-fotolife" title="&quot;このチャンネルのアクション&quot;"><span itemscope itemtype="http://schema.org/Photograph"><img src="https://cdn-ak.f.st-hatena.com/images/fotolife/t/tmd45/20191016/20191016140643.png" alt="f:id:tmd45:20191016140643p:plain" title="f:id:tmd45:20191016140643p:plain" class="hatena-fotolife" itemprop="image"></span><figcaption>&quot;このチャンネルのアクション&quot;</figcaption></figure></p>

<p>ワークフローで作ったフォームが表示された例。セレクトボックスに複数選択タイプは（いまのところ）なかった。</p>

<p><figure class="figure-image figure-image-fotolife" title="ワークフローで作ったフォームの表示"><span itemscope itemtype="http://schema.org/Photograph"><img src="https://cdn-ak.f.st-hatena.com/images/fotolife/t/tmd45/20191016/20191016140745.png" alt="f:id:tmd45:20191016140745p:plain" title="f:id:tmd45:20191016140745p:plain" class="hatena-fotolife" itemprop="image"></span><figcaption>ワークフローで作ったフォームの表示</figcaption></figure></p>

<h2>Slack チャンネルで動いた様子</h2>

<p><figure class="figure-image figure-image-fotolife" title="Slack チャンネルで動くワークフロー"><span itemscope itemtype="http://schema.org/Photograph"><img src="https://cdn-ak.f.st-hatena.com/images/fotolife/t/tmd45/20191016/20191016141406.png" alt="f:id:tmd45:20191016141406p:plain" title="f:id:tmd45:20191016141406p:plain" class="hatena-fotolife" itemprop="image"></span><figcaption>Slack チャンネルで動くワークフロー</figcaption></figure></p>

<p>なんか上手いこと使えるといいですね！</p>
]]></description>
            <enclosure url="https://cdn-ak.f.st-hatena.com/images/fotolife/t/tmd45/20191016/20191016140745.png" length="0" type="image/png"/>
        </item>
        <item>
            <title><![CDATA[ブラウザからローカルフォントにアクセスする：Font Enumeration API と Font Table Access API]]></title>
            <link>https://shiromoji.hatenablog.jp/entry/2019/10/15/225720</link>
            <guid>https://shiromoji.hatenablog.jp/entry/2019/10/15/225720</guid>
            <pubDate>Tue, 15 Oct 2019 13:57:20 GMT</pubDate>
            <description><![CDATA[<p>最近の Web アプリはどんどんリッチになっていっていますが、ネイティブアプリとは違って、「ローカルフォント<a href="#f-5ce9b760" name="fn-5ce9b760" title="ユーザーの端末にインストールされているフォント。デバイスフォントと呼ばれることも。">*1</a>を列挙してユーザーに選択させ、それを表示に使う」といったことは仕様上不可能です。</p>

<p>例えば、画像に文字を入れる Web アプリを考えてみます。文字の描画自体は <a href="https://developer.mozilla.org/ja/docs/Drawing_text_using_a_canvas">canvas の <code>ctx.fillText()</code></a> が使えますが、問題はフォントの指定です。<a href="https://developer.mozilla.org/ja/docs/Web/API/CanvasRenderingContext2D/font"><code>ctx.font</code></a> にローカルフォントを指定するためには、そのローカルフォントのフォント名を知っている必要があります。OS にプリインストールされているフォントでなどであれば、「Web アプリ側であらかじめフォント名のリストを用意しておき、実際にインストールされているかどうかをチェック<a href="#f-dbf8c6ce" name="fn-dbf8c6ce" title="適当な文字列のダミー要素を不可視状態で用意 → 要素にチェックしたいフォントを指定 → 指定前後で要素の幅が変わったかチェック、というのが常套手段でしょう。後述のフィンガープリンティングでも使われる手法です。">*2</a>してからユーザーに選択させる」という手段がとれますが、「自分でインストールしたこのフォントが使いたい！」という要求に応えるのは現実的ではありません。</p>

<h2>提案中の2つの <a class="keyword" href="http://d.hatena.ne.jp/keyword/API">API</a></h2>

<p><span itemscope itemtype="http://schema.org/Photograph"><a href="http://f.hatena.ne.jp/mashabow/20191014220905" class="hatena-fotolife" itemprop="url"><img src="https://cdn-ak.f.st-hatena.com/images/fotolife/m/mashabow/20191014/20191014220905.png" alt="f:id:mashabow:20191014220905p:image:w300" title="f:id:mashabow:20191014220905p:image:w300" class="hatena-fotolife" style="width:300px" itemprop="image"></a></span></p>

<p>現在、Font Enumeration <a class="keyword" href="http://d.hatena.ne.jp/keyword/API">API</a>・Font Table <a class="keyword" href="http://d.hatena.ne.jp/keyword/Access">Access</a> <a class="keyword" href="http://d.hatena.ne.jp/keyword/API">API</a> という <a class="keyword" href="http://d.hatena.ne.jp/keyword/API">API</a> が提案されています。まだまだ検討中のようですが、もし標準化までたどり着けば、この状態が解消されそうです。</p>

<ul>
<li><a href="https://inexorabletash.github.io/font-enumeration/">Font Enumeration API</a></li>
<li><a href="https://inexorabletash.github.io/font-table-access/">Font Table Access API</a></li>
</ul>


<p>Font Enumeration <a class="keyword" href="http://d.hatena.ne.jp/keyword/API">API</a> が、ローカルフォントを列挙するための <a class="keyword" href="http://d.hatena.ne.jp/keyword/API">API</a> です。先ほどの例でやりたかったことは、これで実現できそうです。一方の Font Table <a class="keyword" href="http://d.hatena.ne.jp/keyword/Access">Access</a> <a class="keyword" href="http://d.hatena.ne.jp/keyword/API">API</a> は、ローカルフォントのテーブルのバイナリにアクセスするための <a class="keyword" href="http://d.hatena.ne.jp/keyword/API">API</a> です。どちらも単機能で、かなりシンプルな構成になっています。</p>

<p><a href="https://github.com/inexorabletash/font-enumeration/tree/5c480d2fd6e301c0501134dc1055358b19d0441c#whats-all-this-then">GitHub リポジトリの README</a> によると、提案の動機としては以下のような感じです。</p>

<ol>
<li>プロ品質のデザインツールを Web 上に作ろうとすると、以下のような障害がある

<ul>
<li>Web アプリからはローカルフォントの列挙ができない</li>
<li>ブラウザは OS のフォントエンジンを使って描画するので、OS 間で差が生じる</li>
<li>（ネイティブアプリを Web アプリに移植する場合）自前のフォントエンジンはたいてい生のフォントデータを要求するものだが、Web フォントの仕様ではフォントのバイナリにアクセスできない</li>
</ul>
</li>
<li>Font Enumeration <a class="keyword" href="http://d.hatena.ne.jp/keyword/API">API</a> と Font Table <a class="keyword" href="http://d.hatena.ne.jp/keyword/Access">Access</a> <a class="keyword" href="http://d.hatena.ne.jp/keyword/API">API</a> を提供して、このような状況を解消したい</li>
</ol>


<p>この記事では <a class="keyword" href="http://d.hatena.ne.jp/keyword/API">API</a> の詳細には触れませんが、HarfBuzz/<a class="keyword" href="http://d.hatena.ne.jp/keyword/FreeType">FreeType</a> を WASM に乗せて、それにフォントデータを食わせて描画する、というような<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%E6%A1%BC%A5%B9%A5%B1%A1%BC%A5%B9">ユースケース</a>も<a href="https://inexorabletash.github.io/font-table-access/#examples">挙げられています</a>。</p>

<p>ちなみにこれらの <a class="keyword" href="http://d.hatena.ne.jp/keyword/API">API</a>、<a class="keyword" href="http://d.hatena.ne.jp/keyword/Chrome">Chrome</a>（<a class="keyword" href="http://d.hatena.ne.jp/keyword/Chromium">Chromium</a>）では8月下旬に "Intent to Implement" になったようです。</p>

<ul>
<li><a href="https://groups.google.com/a/chromium.org/d/msg/blink-dev/XfkSdpMWNik/IX67fOTLAQAJ">Intent to Implement: Font Enumeration</a></li>
<li><a href="https://groups.google.com/a/chromium.org/d/msg/blink-dev/-8wPGNpuV2Y/C5wdLebLAQAJ">Intent to Implement: Font Table Access</a></li>
<li><a href="https://www.chromestatus.com/feature/6234451761692672">Font Enumeration - Chrome Platform Status</a></li>
<li><a href="https://www.chromestatus.com/feature/5082047209013248">Font Table Access - Chrome Platform Status</a></li>
</ul>


<h2>ローカルフォントとプライバシー</h2>

<p>しかしながら、ローカルフォントの情報は、個人を識別・同定しようとするフィンガープリンティングへの利用が懸念されます。従来では、例えば<a href="https://github.com/Valve/fingerprintjs2/blob/54e89b2ebdbf33853a85a7be43bd17e8b859cfc6/fingerprint2.js#L524-L711">こんなふうに</a>「フォント名のリストを決め打ちしておき、そのフォントがインストールされているか順次試す」というようなことしかできませんでした。ところが、Font Enumeration <a class="keyword" href="http://d.hatena.ne.jp/keyword/API">API</a> と Font Table <a class="keyword" href="http://d.hatena.ne.jp/keyword/Access">Access</a> <a class="keyword" href="http://d.hatena.ne.jp/keyword/API">API</a> が利用可能になると、情報をまるまる吸い出すことが可能になってしまいます。インストールの有無だけでなく、<code>head</code> テーブルや <code>name</code> テーブルから、フォントのバージョンを取得することもできます<a href="#f-d7613141" name="fn-d7613141" title="フィンガープリンティングが目的であるなら、そんな丁寧なことをしなくても、バイナリのハッシュをまるごと取ってしまえば十分そうですが。">*3</a>。フォントの販売・<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%B5%A5%D6%A5%B9%A5%AF%A5%EA%A5%D7%A5%B7%A5%E7%A5%F3">サブスクリプション</a>方式によっては、ユーザー情報や固有識別子をフォントファイルに埋め込むものもあるでしょう。そうすると、ほとんど確実に個人を識別できてしまいます。</p>

<p>フィンガープリンティングへの懸念は、提案されている仕様書にも<a href="https://inexorabletash.github.io/font-enumeration/#privacy">記述があります</a>。また、「会社の PC にコーポレートフォントをインストールしていると、それだけで会社が特定できちゃうよね」というような例も挙げられています。</p>

<p>これらのプライバシー対策として、Font Enumeration <a class="keyword" href="http://d.hatena.ne.jp/keyword/API">API</a> と Font Table <a class="keyword" href="http://d.hatena.ne.jp/keyword/Access">Access</a> <a class="keyword" href="http://d.hatena.ne.jp/keyword/API">API</a> は、<strong><a href="https://developer.mozilla.org/ja/docs/Web/API/Permissions_API">Permissions API</a> でユーザーの許可を得てからローカルフォントにアクセスする設計</strong>になっています。本当に「プロ品質のデザインツール」だけが使うのであれば、これで落ち着くかもしれません。しかし万が一、いろんなサイトでやたらめったら濫用されるようになってしまったとしたら、許可を求めるダイアログがポコポコ出てきて、なかなかうるさい未来になるかもしれません。</p>

<h2><a class="keyword" href="http://d.hatena.ne.jp/keyword/Flash">Flash</a> 時代のローカルフォント</h2>

<p>ところで、過去はどうだったんでしょう？　実は、<a class="keyword" href="http://d.hatena.ne.jp/keyword/ActionScript">ActionScript</a> には Font Enumeration <a class="keyword" href="http://d.hatena.ne.jp/keyword/API">API</a> のようなものがありました。<a href="https://help.adobe.com/ja_JP/FlashPlatform/reference/actionscript/3/flash/text/Font.html#enumerateFonts(%29"><code>Font.enumerateFonts(true)</code></a> を実行すると、ローカルフォントも含めてフォントを列挙することができました。このおかげで <a class="keyword" href="http://d.hatena.ne.jp/keyword/Flash">Flash</a> 時代の画像加工ツールは、ローカルフォントによる文字入れが可能だったのですが、<a class="keyword" href="http://d.hatena.ne.jp/keyword/Flash">Flash</a> の衰退・サポート終了によって不可能になり、表現力が落ちてしまいました。もちろん、プライバシー面では向上したのですが。</p>

<p>ちなみに、<a class="keyword" href="http://d.hatena.ne.jp/keyword/ActionScript">ActionScript</a> の <a href="https://help.adobe.com/ja_JP/as3/dev/WS5b3ccc516d4fbf351e63e3d118a9b90204-7cb2.html"><code>ExternalInterface</code></a> を使うと、「<a class="keyword" href="http://d.hatena.ne.jp/keyword/ActionScript">ActionScript</a> で取得したフォント名を<a class="keyword" href="http://d.hatena.ne.jp/keyword/JavaScript">JavaScript</a> に渡して要素のスタイルに指定する」というようなこともできました。<a class="keyword" href="http://d.hatena.ne.jp/keyword/ActionScript">ActionScript</a> 側は<a href="https://github.com/Valve/fingerprintjs2/blob/54e89b2ebd/flash/FontList.as">これと同じ感じのコード</a>になります。実際に自分自身、内製ツールの開発で使ったこともあります。</p>

<p>ちなみにちなみに、当時は事実上、<a class="keyword" href="http://d.hatena.ne.jp/keyword/Flash">Flash</a> がどこでも勝手に実行されるような状況だったので、「ページを踏んだ人のローカルフォントを列挙してこっそりサーバーに送信」というようなことが可能でした。フォント名を送信するだけでなく、「ローカルフォントで描画して送信」までしてしまえばさらに強烈ですね。フォント制作においては、制作中のフォントを自分の PC にインストールしてテストすることが多々あります。そのような状態で、悪意をもったページを踏んだ場合、制作中のフォントの情報が漏れてしまいます。言うまでもなく、わたしはやったことありませんが。</p>

<p>Font Enumeration <a class="keyword" href="http://d.hatena.ne.jp/keyword/API">API</a> と Font Table <a class="keyword" href="http://d.hatena.ne.jp/keyword/Access">Access</a> <a class="keyword" href="http://d.hatena.ne.jp/keyword/API">API</a> があれば、過去に <a class="keyword" href="http://d.hatena.ne.jp/keyword/Flash">Flash</a> で実現されていた表現力を取り戻し、さらに高度な文字組みなどを発展させることができます。アクセスにはユーザーの許可が必要になるので、プライバシー面もある程度担保されます。ただし、「このフォントは OK だけどこれはダメ」のようなアクセス制御は今のところできそうにないので、フォント制作者はうかつに [許可する] を押せなくなるかもしれません…笑</p>

<h2>その他雑感</h2>

<ul>
<li>Font Enumeration <a class="keyword" href="http://d.hatena.ne.jp/keyword/API">API</a> で取得したフォントのリストを元に、ユーザーにフォントを選択させる場合、並べ方が大変そう

<ul>
<li>各 OS のネイティブのフォント選択ダイアログがそもそもバラバラでわりと混乱している</li>
<li><a class="keyword" href="http://d.hatena.ne.jp/keyword/Adobe">Adobe</a> 製品もまた独自だったり</li>
</ul>
</li>
<li>前節で書いたように、フォントごとのアクセス制御ができない

<ul>
<li>いっそのこと OpenType 仕様の方に「このフォントは Web <a class="keyword" href="http://d.hatena.ne.jp/keyword/API">API</a> からアクセスしちゃダメ」フラグを新設するとか？ :P</li>
</ul>
</li>
<li>OS 間の<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%EC%A5%F3%A5%C0%A5%EA%A5%F3%A5%B0">レンダリング</a>の差がなくなったとしても、互換性のためには全く同じバージョンのフォントが各端末にインストールされている必要がある。となると、ローカルフォントだけでなく、Web フォントとの連携も考えた方がよさそう？

<ul>
<li>現状の Font Table <a class="keyword" href="http://d.hatena.ne.jp/keyword/Access">Access</a> <a class="keyword" href="http://d.hatena.ne.jp/keyword/API">API</a> <code>getTables()</code> は <q>This method is only usable for local fonts, and will throw an exception if called for a web font.</q> と<a href="https://inexorabletash.github.io/font-table-access/#fontface-additions">書かれている</a></li>
</ul>
</li>
<li>プライバシーまわりの懸念点がどう決着つくのか気になる</li>
</ul>


<p>実現すればおもしろいことはいろいろできそうですが、どうなるんでしょうね。</p>
<div class="footnote">
<p class="footnote"><a href="#fn-5ce9b760" name="f-5ce9b760" class="footnote-number">*1</a><span class="footnote-delimiter">:</span><span class="footnote-text">ユーザーの端末にインストールされているフォント。デ<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%D0%A5%A4%A5%B9">バイス</a>フォントと呼ばれることも。</span></p>
<p class="footnote"><a href="#fn-dbf8c6ce" name="f-dbf8c6ce" class="footnote-number">*2</a><span class="footnote-delimiter">:</span><span class="footnote-text">適当な文字列のダミー要素を不可視状態で用意 → 要素にチェックしたいフォントを指定 → 指定前後で要素の幅が変わったかチェック、というのが常套手段でしょう。後述のフィンガープリンティングでも使われる手法です。</span></p>
<p class="footnote"><a href="#fn-d7613141" name="f-d7613141" class="footnote-number">*3</a><span class="footnote-delimiter">:</span><span class="footnote-text">フィンガープリンティングが目的であるなら、そんな丁寧なことをしなくても、バイナリのハッシュをまるごと取ってしまえば十分そうですが。</span></p>
</div>]]></description>
            <enclosure url="https://cdn-ak.f.st-hatena.com/images/fotolife/m/mashabow/20191014/20191014220905.png" length="0" type="image/png"/>
        </item>
        <item>
            <title><![CDATA[terraform-provider-healthchecksio を Terraform Plugin SDK に移行した]]></title>
            <link>https://masutaka.net/2019-10-10-1/</link>
            <guid>https://masutaka.net/2019-10-10-1/</guid>
            <pubDate>Thu, 10 Oct 2019 00:00:00 GMT</pubDate>
            <description><![CDATA[今まで terraform provider のビルドには、terraform 自体をライブラリとして要求されました。今後は terraform-plugin-sdk を使います。
この PR で移行しました。
Migrate over to new terraform SDK by masutaka · Pull Request #16 · kristofferahl/terraform-provider-healthchecksio ※ https://healthchecks.io はバッチが時間通りに動いたかの監視で重宝しています。
仕事で使っている terraform-provider-heroku の v2.2.1 で知りました。
9/26 にアナウンスがあったのかな？ 知らなかった。
loading...
   if (localStorage.getItem("pref-theme") === "light") { const elements = document.getElementsByClassName('twitter-tweet'); for (let i = 0; i  https://www.terraform.io/docs/extend/plugin-sdk.html に従うだけで割と簡単です。tf-sdk-migrator という移行ツールが用意されています。
$ go get github.com/hashicorp/tf-sdk-migrator $ go mod vendor $ tf-sdk-migrator check $ tf-sdk-migrator migrate  $ tf-sdk-migrator check]]></description>
        </item>
        <item>
            <title><![CDATA[「aws-vault loginでChromeのウィンドウをAWSアカウント毎に分離する」を Alfred 用に作った]]></title>
            <link>https://blog.tsub.me/post/create-alfred-aws-vault-workflow/</link>
            <guid>https://blog.tsub.me/post/create-alfred-aws-vault-workflow/</guid>
            <pubDate>Sun, 06 Oct 2019 05:35:00 GMT</pubDate>
            <description><![CDATA[<p><i class="fa fa-github"></i> <a href="https://github.com/tsub/alfred-aws-vault-workflow">tsub/alfred-aws-vault-workflow: A Alfred workflow to open the AWS Management Console with aws-vault</a></p>

<p>Chrome 版</p>

<p><img src="https://i.gyazo.com/33341687e0419d3863f913a00997744c.gif" alt="Features for Google Chrome" /></p>

<p>Firefox (<a href="https://addons.mozilla.org/firefox/addon/multi-account-containers/">Multi-Account Container</a> extension) 版</p>

<p><img src="https://i.gyazo.com/a68e0d4cd6f9a80b659cfc1694cd85dd.gif" alt="Features for Firefox" /></p>

<p>aws-vault 自体今回初めて知ったのですが、以下の記事を読んで、複数の AWS アカウント使いには大変便利そうだったので Alfred 用のものをシュッと作りました。</p>

<p><a href="https://qiita.com/minamijoyo/items/f3cbb003a34954a32970">aws-vault loginでChromeのウィンドウをAWSアカウント毎に分離する - Qiita</a></p>

<p></p>]]></description>
        </item>
        <item>
            <title><![CDATA[本番環境で heroku run する時の tips]]></title>
            <link>https://masutaka.net/2019-09-20-1/</link>
            <guid>https://masutaka.net/2019-09-20-1/</guid>
            <pubDate>Fri, 20 Sep 2019 00:00:00 GMT</pubDate>
            <description><![CDATA[※ 会社の esa.io に投稿した記事の転載です。
本番環境で DB の値を書き換えるために、rails runner や rails console を使うことがある。bash もあるかもしれない。
$ heroku run rails r scripts/important.rb -a &lt;App Name&gt; # or $ heroku run rails c -a &lt;App Name&gt; heroku run のログは現在の端末だけにしか出力されない。アプリのログには出力されないため、LogDNA や Papertrail などにも記録されない。
現在の端末を閉じてしまうと、ログが消失するため十分注意すること。
回避方法 ↓ 以下のような非対話型コマンドであれば、run:detached サブコマンドを使うことで、LogDNA などに送ることが出来る。ただし、現在の端末には出力されない。
・rails runner
・ls
↓ 対話型コマンドは今回の方法は使えない。他の回避方法があるかは不明。
・rails console
・bash
非対話型コマンドのログをアプリのログに出力する ※ 以下、を immense-shelf-19179 とします。
run:detached サブコマンドと -t オプションを使う。
$ heroku run:detached -t ls -a immense-shelf-19179 Running ls on ⬢ immense-shelf-19179.]]></description>
        </item>
        <item>
            <title><![CDATA[【2019年版】バックエンドエンジニアが React でモダンなフロントエンド開発を始めるまで]]></title>
            <link>https://developer.feedforce.jp/entry/2019/09/04/140000</link>
            <guid>https://developer.feedforce.jp/entry/2019/09/04/140000</guid>
            <pubDate>Wed, 04 Sep 2019 05:00:00 GMT</pubDate>
            <description><![CDATA[<p><a href="http://blog.hatena.ne.jp/daido1976/" class="hatena-id-icon"><img src="https://cdn.profile-image.st-hatena.com/users/daido1976/profile.png" width="16" height="16" alt="" class="hatena-id-icon">id:daido1976</a> です。入社してからあっという間に1年が経っていました。</p>

<p>直近3ヶ月ほどプライベートでフロントエンド開発の勉強をしていたのですが、ここ数年で CSS の Grid や React の Hooks が新しく導入されたことなどもあり、少し古いコンテンツだと教材として役立たない<sup id="fnref:1"><a href="#fn:1" rel="footnote">1</a></sup> と感じることが多かったので、本記事では私が実際にやってみた中で <strong>2019年時点で</strong> オススメできると判断した教材や学び方を皆さんにご紹介したいと思います。</p>

<ul class="table-of-contents">
    <li><a href="#はじめに">はじめに</a></li>
    <li><a href="#やったこと">やったこと</a><ul>
            <li><a href="#JavaScript">JavaScript</a><ul>
                    <li><a href="#MDN-の-JavaScript-の部分を読む--手を動かす">MDN の JavaScript の部分を読む &amp; 手を動かす</a></li>
                    <li><a href="#JavaScript-Primer-を読む">JavaScript Primer を読む</a></li>
                    <li><a href="#YouTube-動画で-Promise-を学ぶ">YouTube 動画で Promise を学ぶ</a></li>
                    <li><a href="#デバッグ方法を学ぶ">デバッグ方法を学ぶ</a></li>
                </ul>
            </li>
            <li><a href="#React">React</a><ul>
                    <li><a href="#React-公式のチュートリアルを2周する">React 公式のチュートリアルを2周する</a></li>
                    <li><a href="#eggheadio-の動画で-Redux-を学ぶ">egghead.io の動画で Redux を学ぶ</a></li>
                    <li><a href="#ヘルシンキ大学の-Web-開発カリキュラム-Full-Stack-Open-2019-をやる">ヘルシンキ大学の Web 開発カリキュラム Full Stack Open 2019 をやる</a></li>
                </ul>
            </li>
            <li><a href="#CSS">CSS</a><ul>
                    <li><a href="#CSS-in-Depth-を読む--手を動かす">CSS in Depth を読む &amp; 手を動かす</a></li>
                </ul>
            </li>
            <li><a href="#その他">その他</a><ul>
                    <li><a href="#Atomic-Design-を理解する">Atomic Design を理解する</a></li>
                </ul>
            </li>
        </ul>
    </li>
    <li><a href="#最後に">最後に</a></li>
</ul>

<h2 id="はじめに">はじめに</h2>

<p>今回は実務レベルでフロントエンド開発できるスキルを身につけたい、という目標があったので <strong>JavaScript</strong> はもちろん所属チームである <a href="https://ecbooster.jp/">EC Booster</a> で採用している <strong>React</strong>、さらにフロントエンド開発において避けて通ることのできない <strong>CSS</strong> の学習を前提としています。</p>

<p>参考までに筆者のスペックは 👇 の記事の1年後をご想像ください。</p>

<p><iframe src="https://hatenablog-parts.com/embed?url=https%3A%2F%2Fdeveloper.feedforce.jp%2Fentry%2F2018%2F10%2F18%2F140000" title="弊社の新人エンジニア研修カリキュラムを惜しみなく公開してみる - Feedforce Developer Blog" class="embed-card embed-blogcard" scrolling="no" frameborder="0" style="display: block; width: 100%; height: 190px; max-width: 500px; margin: 10px 0px;"></iframe><cite class="hatena-citation"><a href="https://developer.feedforce.jp/entry/2018/10/18/140000">developer.feedforce.jp</a></cite></p>

<p>具体的にはこの後 Ruby や Rails を使って、SPA のための GraphQL API サーバや Google 広告系の API を利用したバッチ処理の実装など、バックエンド開発をメインに行なっていました。</p>

<h2 id="やったこと">やったこと</h2>

<h3 id="JavaScript">JavaScript</h3>

<h4 id="MDN-の-JavaScript-の部分を読む--手を動かす">MDN の JavaScript の部分を読む &amp; 手を動かす</h4>

<p><strong>所要期間: 約5日</strong></p>

<ul>
<li>Rails 開発をする前に Ruby の基礎をがっつりやったことで早期にキャッチアップできた経験から、まずは JavaScript の言語仕様をしっかり把握しようと思いました。</li>
<li>ここでは React でも頻出の import/export、アロー関数、分割代入に加えて、変数のスコープ（Ruby と違って最初戸惑った）などについて学びました。</li>
<li>数行のスクリプトを書いて実行、をとにかくひたすら繰り返していました。</li>
</ul>


<p><iframe src="https://hatenablog-parts.com/embed?url=https%3A%2F%2Fdeveloper.mozilla.org%2Fja%2Fdocs%2FWeb%2FJavaScript" title="JavaScript" class="embed-card embed-webcard" scrolling="no" frameborder="0" style="display: block; width: 100%; height: 155px; max-width: 500px; margin: 10px 0px;"></iframe><cite class="hatena-citation"><a href="https://developer.mozilla.org/ja/docs/Web/JavaScript">developer.mozilla.org</a></cite></p>

<h4 id="JavaScript-Primer-を読む">JavaScript Primer を読む</h4>

<p><strong>所要期間: 約2日</strong></p>

<ul>
<li>こちらは ES2015 を前提とした JavaScript の入門書。</li>
<li>MDN で分かりづらかった部分を補完したり、ES2015 以降の仕様のみを把握したい時に利用しました。</li>
</ul>


<p><iframe src="https://hatenablog-parts.com/embed?url=https%3A%2F%2Fjsprimer.net%2F" title="この書籍について · JavaScript Primer #jsprimer" class="embed-card embed-webcard" scrolling="no" frameborder="0" style="display: block; width: 100%; height: 155px; max-width: 500px; margin: 10px 0px;"></iframe><cite class="hatena-citation"><a href="https://jsprimer.net/">jsprimer.net</a></cite></p>

<h4 id="YouTube-動画で-Promise-を学ぶ">YouTube 動画で Promise を学ぶ</h4>

<p><strong>所要期間: 約0.5日</strong></p>

<ul>
<li>Promise、難しいですよね…。</li>
<li>有名な <a href="https://azu.github.io/promises-book/">JavaScript Promiseの本</a> を読んだのですが、自分には難しくて中々理解できませんでした。</li>
<li>色々探し回った結果、以下の YouTube 動画がものすごく分かりやすくて何とか概要を掴むことができました。</li>
</ul>


<p><iframe width="480" height="270" src="https://www.youtube.com/embed/QO4NXhWo_NM?feature=oembed" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe><cite class="hatena-citation"><a href="https://youtu.be/QO4NXhWo_NM">youtu.be</a></cite></p>

<h4 id="デバッグ方法を学ぶ">デバッグ方法を学ぶ</h4>

<p><strong>所要期間: 約0.5日</strong></p>

<ul>
<li>Ruby には <code>pry</code> という大好きなデバッガー（としても使える）ライブラリがあるのですが、JavaScript にも <code>debugger</code> ステートメントという素晴らしいものがあるのだと知りました。

<ul>
<li><a href="https://postd.cc/how-to-not-hate-javascript-tips-from-the-frontline/">JavaScript&#x306E;&#x30C7;&#x30D0;&#x30C3;&#x30B0;&#x65B9;&#x6CD5; &ndash; JS&#x3092;&#x5ACC;&#x3044;&#x306B;&#x306A;&#x3089;&#x306A;&#x3044;&#x305F;&#x3081;&#x306E;Tips | POSTD</a></li>
</ul>
</li>
<li>あと Chrome DevTools の使い方も以下の記事を読んで把握しました。

<ul>
<li><a href="https://ics.media/entry/190517/">Chrome&#x306E;&#x30C7;&#x30D9;&#x30ED;&#x30C3;&#x30D1;&#x30FC;&#x30C4;&#x30FC;&#x30EB;&#x3067;JS&#x3092;&#x30C7;&#x30D0;&#x30C3;&#x30B0;&#x3059;&#x308B;&#x65B9;&#x6CD5;&#xFF08;2019&#x5E74;&#x7248;&#xFF09; - ICS MEDIA</a></li>
</ul>
</li>
</ul>


<h3 id="React">React</h3>

<h4 id="React-公式のチュートリアルを2周する">React 公式のチュートリアルを2周する</h4>

<p><strong>所要期間: 約2日</strong></p>

<ul>
<li>JS を学ぶ前に一度やり、JS を学んでからもう一度やりました。React の概要を掴むには良かったです。</li>
<li>ただ、このチュートリアル内では Class Components が前提で Hooks については全く触れられてないので、後述の Full Stack Open 2019 で補完しました。</li>
</ul>


<p><iframe src="https://hatenablog-parts.com/embed?url=https%3A%2F%2Fja.reactjs.org%2Ftutorial%2Ftutorial.html" title="チュートリアル：React の導入 – React" class="embed-card embed-webcard" scrolling="no" frameborder="0" style="display: block; width: 100%; height: 155px; max-width: 500px; margin: 10px 0px;"></iframe><cite class="hatena-citation"><a href="https://ja.reactjs.org/tutorial/tutorial.html">ja.reactjs.org</a></cite></p>

<h4 id="eggheadio-の動画で-Redux-を学ぶ">egghead.io の動画で Redux を学ぶ</h4>

<p><strong>所要期間: 約2日</strong></p>

<ul>
<li><a href="https://redux.js.org/">Redux 公式のドキュメント</a> をさっと読んでから Redux の作者である Dan Abramov 氏が作成した以下の動画を観ながら手を動かしました。</li>
<li>序盤で <code>createStore</code> を自分で実装してみようという内容があるのですが、それがとても分かりやすかったです。</li>
</ul>


<p><iframe src="https://hatenablog-parts.com/embed?url=https%3A%2F%2Fegghead.io%2Fcourses%2Fgetting-started-with-redux" title="Getting Started with Redux" class="embed-card embed-webcard" scrolling="no" frameborder="0" style="display: block; width: 100%; height: 155px; max-width: 500px; margin: 10px 0px;"></iframe><cite class="hatena-citation"><a href="https://egghead.io/courses/getting-started-with-redux">egghead.io</a></cite></p>

<h4 id="ヘルシンキ大学の-Web-開発カリキュラム-Full-Stack-Open-2019-をやる">ヘルシンキ大学の Web 開発カリキュラム Full Stack Open 2019 をやる</h4>

<p><strong>所要期間: 約10日</strong></p>

<ul>
<li>React × Express.js × MongoDB の構成でイチから SPA 作れるようになろうぜ、という趣旨のチュートリアル。</li>
<li>React は Hooks 前提で、さらに Jest を使ったテスト、Redux、GraphQL などのコンテンツもあり、何より説明が半端なく分かりやすい。今だったら React 公式のチュートリアルすっ飛ばしてこっちやった方がいいかも、と思うほど素晴らしい。</li>
<li>今回はフロントエンド技術の習得に注力したかったので、バックエンド開発部分（Part3, 4 辺り）は飛ばしました。</li>
</ul>


<p><iframe src="https://hatenablog-parts.com/embed?url=https%3A%2F%2Ffullstackopen.com%2Fen" title="Full Stack Open 2019" class="embed-card embed-webcard" scrolling="no" frameborder="0" style="display: block; width: 100%; height: 155px; max-width: 500px; margin: 10px 0px;"></iframe><cite class="hatena-citation"><a href="https://fullstackopen.com/en">fullstackopen.com</a></cite></p>

<h3 id="CSS">CSS</h3>

<h4 id="CSS-in-Depth-を読む--手を動かす">CSS in Depth を読む &amp; 手を動かす</h4>

<p><strong>所要期間: 約5日</strong></p>

<ul>
<li>CSS がずっと苦手だった私を助け出してくれた一冊。Flexbox と Grid Layout の章を読んだだけで元を取れた気がします。</li>
<li>タイトルや出版社からしてめちゃくちゃアカデミックな内容を想像していたんですが、全然違いました。一つ一つのプロパティ指定について丁寧に解説してくれるようなとても優しい本です。</li>
<li>出版日が2018年とけっこう新しいのも嬉しい。</li>
</ul>


<p><div class="hatena-asin-detail"><a href="http://www.amazon.co.jp/exec/obidos/ASIN/1617293458/hatena-blog-22/"><img src="https://images-fe.ssl-images-amazon.com/images/I/51Plttwa-aL._SL160_.jpg" class="hatena-asin-detail-image" alt="CSS in Depth" title="CSS in Depth"></a><div class="hatena-asin-detail-info"><p class="hatena-asin-detail-title"><a href="http://www.amazon.co.jp/exec/obidos/ASIN/1617293458/hatena-blog-22/">CSS in Depth</a></p><ul><li><span class="hatena-asin-detail-label">作者:</span> Keith J. Grant</li><li><span class="hatena-asin-detail-label">出版社/メーカー:</span> Manning Publications</li><li><span class="hatena-asin-detail-label">発売日:</span> 2018/04/07</li><li><span class="hatena-asin-detail-label">メディア:</span> ペーパーバック</li><li><a href="http://d.hatena.ne.jp/asin/1617293458/hatena-blog-22" target="_blank">この商品を含むブログを見る</a></li></ul></div><div class="hatena-asin-detail-foot"></div></div></p>

<h3 id="その他">その他</h3>

<h4 id="Atomic-Design-を理解する">Atomic Design を理解する</h4>

<p><strong>所要期間: 約10分</strong></p>

<ul>
<li>弊チームでは Atomic Design に則ったディレクトリ構成をしているので、以下の記事を読んで概要を掴みました。</li>
</ul>


<p><iframe src="https://hatenablog-parts.com/embed?url=https%3A%2F%2Fdesign.dena.com%2Fdesign%2Fatomic-design-%25E3%2582%2592%25E5%2588%2586%25E3%2581%258B%25E3%2581%25A3%25E3%2581%259F%25E3%2581%25A4%25E3%2582%2582%25E3%2582%258A%25E3%2581%25AB%25E3%2581%25AA%25E3%2582%258B%2F" title="Atomic Design を分かったつもりになる | DeNA DESIGN BLOG" class="embed-card embed-webcard" scrolling="no" frameborder="0" style="display: block; width: 100%; height: 155px; max-width: 500px; margin: 10px 0px;"></iframe><cite class="hatena-citation"><a href="https://design.dena.com/design/atomic-design-%E3%82%92%E5%88%86%E3%81%8B%E3%81%A3%E3%81%9F%E3%81%A4%E3%82%82%E3%82%8A%E3%81%AB%E3%81%AA%E3%82%8B/">design.dena.com</a></cite></p>

<h2 id="最後に">最後に</h2>

<p>以上の教材で学んだことで、Ruby と Rails を使ってのバックエンド開発しかほぼやったことなかった私でもある程度自走してフロントエンドのコードを読んだり書いたりできるようになりました。</p>

<p><strong>個人的には CSS in Depth とヘルシンキ大学の Full Stack Open 2019 が教材として最高でした。</strong></p>

<p>他の会社さまでも Rails 経験のみのエンジニアを採用して React も書けるように教育していく、みたいなケースがあると思います。そんな時にこの記事が参考になれば幸いです。</p>

<p>それではまたお会いしましょう ＾＾</p>
<div class="footnotes">
<hr/>
<ol>
<li id="fn:1">
<p>例えば <a href="https://github.com/facebook/react/blob/master/CHANGELOG.md#1680-february-6-2019">React の Hooks が正式に導入されたのは2019年2月</a> なので、2018年代のコンテンツでは Hooks について言及されていないものがほとんどです。<a href="#fnref:1" rev="footnote">&#8617;</a></p></li>
</ol>
</div>

]]></description>
            <enclosure url="https://images-fe.ssl-images-amazon.com/images/I/51Plttwa-aL._SL160_.jpg" length="0" type="image/jpg"/>
        </item>
        <item>
            <title><![CDATA[社内の情報共有ツールを Qiita:Team から esa に乗り換えました]]></title>
            <link>https://developer.feedforce.jp/entry/2019/08/22/141055</link>
            <guid>https://developer.feedforce.jp/entry/2019/08/22/141055</guid>
            <pubDate>Thu, 22 Aug 2019 05:10:55 GMT</pubDate>
            <description><![CDATA[<p>猛烈に暑かったり暑くなかったりするなか皆様いかがお過ごしでしょうか。自宅のエアコンが故障して修理待ち半月の <a href="http://blog.hatena.ne.jp/tmd45/" class="hatena-id-icon"><img src="https://cdn.profile-image.st-hatena.com/users/tmd45/profile.png" width="16" height="16" alt="" class="hatena-id-icon">id:tmd45</a> です。</p>

<p>先月、5 年間使い続けてきた Qiita:Team から esa へ、情報共有ツールの乗り換えを行いました。80 名ほどの全社移行となかなか大きなプロジェクトだったので、ここに記録を残したいと思います。</p>

<ul class="table-of-contents">
    <li><a href="#なぜ乗り換えに至ったか">なぜ乗り換えに至ったか</a><ul>
            <li><a href="#フィードフォースの情報共有文化">フィードフォースの情報共有文化</a></li>
            <li><a href="#抱えていた課題">抱えていた課題</a></li>
            <li><a href="#動き出した移行プロジェクト">動き出した移行プロジェクト</a></li>
            <li><a href="#検討した情報共有ツール">検討した情報共有ツール</a></li>
            <li><a href="#esa-に決めるまで">esa に決めるまで</a></li>
        </ul>
    </li>
    <li><a href="#社内への働きかけ">社内への働きかけ</a></li>
    <li><a href="#データ移行のノウハウ">データ移行のノウハウ</a><ul>
            <li><a href="#Emoji-の登録">Emoji の登録</a></li>
            <li><a href="#記事データの移行">記事データの移行</a></li>
            <li><a href="#プロジェクトページ記事の扱い">プロジェクトページ記事の扱い</a></li>
            <li><a href="#プライベートグループの記事の扱い">プライベートグループの記事の扱い</a></li>
            <li><a href="#メンバーの移行とデータの移行のタイミング">メンバーの移行とデータの移行のタイミング</a></li>
        </ul>
    </li>
    <li><a href="#esa-と一緒に使っている便利ツール">esa と一緒に使っている便利ツール</a><ul>
            <li><a href="#記事の自動作成自動-esa-やり機">記事の自動作成「自動 esa やり機」</a></li>
            <li><a href="#Slack-に記事-URL-から概要を展開してくれるKujaku">Slack に記事 URL から概要を展開してくれる「Kujaku」</a></li>
            <li><a href="#Emacs-x-esa-利用者におすすめemacs-helm-esa">Emacs x esa 利用者におすすめ「emacs-helm-esa」</a></li>
        </ul>
    </li>
    <li><a href="#QiitaTeam-から移行して-esa-に思ったこといろいろ">Qiita:Team から移行して esa に思ったこといろいろ</a><ul>
            <li><a href="#サポートの対応がフレンドリーかつ早い">サポートの対応がフレンドリーかつ早い！</a></li>
            <li><a href="#導入時に助かったところ">導入時に助かったところ</a></li>
            <li><a href="#導入時に困ったところ">導入時に困ったところ</a></li>
            <li><a href="#QiitaTeam-と-esa-の情報整理思想の違い">Qiita:Team と esa の情報整理思想の違い</a><ul>
                    <li><a href="#QiitaTeam-のトップページのようにすべての記事が流れていくようなものが欲しい情報のザッピングがしたい">Qiita:Team のトップページのように、すべての記事が流れていくようなものが欲しい。情報のザッピングがしたい</a></li>
                    <li><a href="#Recently-Update-が-WIP-も含むすべての記事の更新を-age-てしまう">Recently Update が WIP も含むすべての記事の更新を age てしまう</a></li>
                    <li><a href="#内部-URL-でタイトルが展開されるのは便利だった">内部 URL でタイトルが展開されるのは便利だった…</a></li>
                    <li><a href="#他人の記事をかんたんにいじれてしまう">他人の記事をかんたんにいじれてしまう</a></li>
                </ul>
            </li>
        </ul>
    </li>
    <li><a href="#さいごに">さいごに</a></li>
</ul>

<h1 id="なぜ乗り換えに至ったか">なぜ乗り換えに至ったか</h1>

<h2 id="フィードフォースの情報共有文化">フィードフォースの情報共有文化</h2>

<p>もともと弊社では Qiita:Team 以前にも、Redmine や社内サーバに構築した Wiki システムを利用し、ナレッジの蓄積と共有を習慣化していました。すばらしいですね。</p>

<p>そこにビジネスチャット（当初は HipChat、現在は Slack を利用）を導入、フロー型の情報が増えていきました。Redmine や社内 Wiki のような<strong>ストック型のナレッジだけでなくフロー型の日常をまとめられる場所が欲しくなり、当時台頭してきた "今風" の情報共有ツールとして 2014年4月から Qiita:Team を使いはじめました。</strong></p>

<p>この頃の記事を見てみると、日報をはじめ、これまで Redmine や Wiki には書きづらかった（書かれたとしても個人メモとして閉じていた）「〇〇やってみた」「〇〇読んでみた」などの情報や、ちょっとした振り返りをまとめた記事が並んでいます。</p>

<p>完全なストック型（Wiki 系）と完全なフロー型（チャット系）の中間をツールとして、Qiita:Team はとてもよく機能しました。社内の情報共有文化がこれだけ育っているのも、そういう場を用意できていたことが大きいと思っています。</p>

<p>うれしいことに日報や手順書、ポエム、ノウハウなどさまざまな記事が気軽に投稿される弊社でしたが、社員が 80 名近くになるとその情報の整理に課題を感じるようになりました。</p>

<blockquote><p><em>フロー型の情報とストック型の情報について、参考記事</em></p>

<ul>
<li><a href="https://blogs.itmedia.co.jp/knowledge/2013/04/post-bd33.html">フロー情報とストック情報を分ける～情報過多の時代を生き抜くために：ナレッジ！？情報共有・・・永遠の課題への挑戦：オルタナティブ・ブログ</a></li>
</ul>
</blockquote>

<h2 id="抱えていた課題">抱えていた課題</h2>

<p>このときの課題とは、<strong>大量に増えた記事のなかから必要な記事が見つけられない</strong> ことでした。</p>

<p><figure class="figure-image figure-image-fotolife" title="情報に埋もれる我々"><span itemscope itemtype="http://schema.org/Photograph"><img src="https://cdn-ak.f.st-hatena.com/images/fotolife/t/tmd45/20190822/20190822122258.png" alt="f:id:tmd45:20190822122258p:plain:w380" title="f:id:tmd45:20190822122258p:plain:w380" class="hatena-fotolife" style="width:380px" itemprop="image"></span><figcaption>情報に埋もれる我々</figcaption></figure></p>

<p>記事が埋もれてしまっても検索などでかんたんに見つけられればいいのですが、残念なことに Qiita:Team の機能では <strong>検索ノウハウのある人間であれば頭を使ってなんとか意図した記事を見つけられるものの、そうでなければほとんど目的の記事を見つけられないような状況になりました。</strong> 記事を探すというだけで "頭を使う" 必要があるというのはなかなかヘビーです。</p>

<p>必要な記事が見つからず、似たような内容の記事が量産されてしまいました。埋もれてしまった古い記事はアーカイブをされることもなくときどき情報検索の邪魔をするようになりました。似たようでちょっと違うタグが乱立しました。流れてしまう情報をなんとかしようとグループ機能を試してみたこともありましたが、グループに閉じてしまうと今度はグループを跨いだ情報の流し読みが困難になりました。</p>

<p>ちなみに一時期（2015 年頃）の Qiita:Team は機能として "タグの階層化" が可能でしたが、これに頼ったタグ整理を行ってしまったことも、後々のタグ運用が難しくなる要因であったと思います。いつのまにか（2019 年確認）タグにスラッシュを入れると入力チェックに引っかかって記事が保存できなくなったことにはモヤっとしました…</p>

<p>タイトルに絞った部分一致やタグによる検索は可能でしたが、これが上手く機能するように、あとから膨大な記事やタグを整理するのは、なかなか骨の折れる作業です。</p>

<p>ナレッジマネジメントに特別な興味のないひとも徐々に「なんとなく使いづらいな…」と感じるようになっていました。</p>

<h2 id="動き出した移行プロジェクト">動き出した移行プロジェクト</h2>

<p>社内 Slack に "情報共有ツールをなんとかしたい" チャンネルが生まれたのが 2018/10/18、私がそこに Join したのが 2018/11/13 でした。</p>

<p>他のツールに乗り換える前に、現状のナレッジマネジメントのルールやポリシーを整備したほうがいいのではという議論は何度も発生しました。Qiita:Team のプロジェクトページなどを使って INDEX 記事を作成したり、タグについて議論したり、Slackbot に特定の発言をしたときに記事 URL を返すようにさせたり…</p>

<p>プロジェクトページで INDEX を作ると、今度は "プロダクト用のプロジェクトページ"（紛らわしいですね 😅）が埋もれてしまうということもありました。これは一社内に多くのプロダクトを持っている弊社ならではかもしれません。</p>

<p>このまま「工夫」でなんとかするには、情報整理が得意な人間が「がんばり」続ける必要がありそうでした。情報整理のポリシーなどを定めたとしても、定期的にそれをリマインドし、自警する誰かが必要になるのではないかと思いました。</p>

<p>そのため他の情報共有ツールについて少しずつ調査やトライアルをしていきました。</p>

<h2 id="検討した情報共有ツール">検討した情報共有ツール</h2>

<p>たくさんあるので詳細は割愛しますが、わりと最後まで有力候補だったのが Kibela でした。開発の動きが活発に見えましたし、信頼感のある著名なエンジニアの方が関わっていることも知っていたので強い興味を持っていました。その他、挙がったツールをご紹介しておくと DocBase, marchily, Scrapbox など、そして esa です。</p>

<p>いろんなツールを検討するなかで、解決したいことと求める条件をざっくりと以下のようにまとめました。</p>

<ul>
<li>記事検索のしやすさ</li>
<li>「プロダクト毎のグループ」と「社内活動毎のグループ」の区別（できれば）</li>
<li>「日報」との区別</li>
<li>チームをまたいで誰でも全体を眺められる感じ</li>
<li>ナレッジをマネジメントしたい</li>
<li>エンジニアも総合職も使いやすい</li>
</ul>


<p>何かを区別して分類したいというのは、つまりカテゴリなりディレクトリなりが欲しいということで、DocBase を試したときに「いいな」と思ったポイントでした。</p>

<p>またプロダクトでチームが分かれていても、情報を完全に分断してしまいたくないという思いが以前からあり、他のツールを触るなかでもよく気にしていたポイントでした。この部分は Qiita:Team のトップページのように、すべての情報が流れてザッピングできるものがよかったです。</p>

<p>そんなこんなで仕事の合間にいろいろ試していたら 2019 年も春になっていました。どのツールも一長一短なうえに、80 名近くのメンバーを一度に動かす POWER が必要です。当時の自分の Slack 発言曰く「移行したい、と、移行めんどくさいのはざま」でした。</p>

<h2 id="esa-に決めるまで">esa に決めるまで</h2>

<p>はざまに居る間もどんどん記事は増えていくので、その都度どうしたらその記事が埋もれずに済むか悩んでいました。ここでもまだ「Qiita:Team の記事を一斉に整理する時間をとれば…」みたいな話は出ていました。諦めが悪い（笑）</p>

<p>このへんの時期に他社さんで esa を導入したとか、（Qiita:Team から）esa に乗り換えたという記事を目にすることが増えました。</p>

<ul>
<li><a href="https://techblog.lclco.com/entry/2019/01/28/170000">Qiita:Teamからesa.ioに乗り換えました - LCL Engineers' Blog</a></li>
<li><a href="https://note.mu/naofumit/n/n028df2984256">カルチャー崩壊と再構築。 Goodpatchが取り組んだ組織デザインの2年間 - 前編｜naofumit｜note</a></li>
</ul>


<p>例のチャンネルメンバーのなかで「esa を使うとしたらどうやって使ったらカオスにならずに済むだろう」みたいな話をしていました。個人的にも（元から好きなサービスだったこともあり）なんとなく esa にしたいなぁと思い始めて、他社の事例を積極的に探しに行きました。</p>

<p>esa の中の人 (\( ⁰⊖⁰)/) がまとめている「<a href="https://docs.esa.io/posts?q=in%3A%22esa%E3%83%88%E3%83%BC%E3%82%AF%22+&amp;s=created&amp;o=desc">esa トーク</a>」の記事も穴が開くほど読みました。とくに大人数で利用されているピクシブさんと、カテゴリルールなどかなり具体的なお話をされていた Misoca さんの記事は、その後の移行のときにもとても参考になりました。</p>

<ul>
<li><a href="https://docs.esa.io/posts/256">esaトーク/サービスへの思いをesaに乗せて、ポエム駆動開発が捗る ─ Vol4.ピクシブ株式会社 様 - docs.esa.io</a></li>
<li><a href="https://docs.esa.io/posts/264">esaトーク/日常もesaもハックするリモートワーカー集団 ─ Vol.5 株式会社Misoca様 - docs.esa.io</a></li>
</ul>


<p>結果的に移行先の決め手となったのは、利用事例のわかりやすさと、すでに利用しているひとたちからの評判の良さかもしれません。</p>

<p>運命の 2019/04/24、まだ「移行めんどくさい」のはざまでウゴウゴしていた我々を動かしたのは、これまでナレッジマネジメントに悩んでいたチャンネルメンバー…ではない役員メンバーからのこんなお言葉でした。</p>

<blockquote><p>"いまの情報共有ツールの使いづらさって、だれも問題に感じてないの？"<br/>
"ほかに良いツールがあるなら乗り換えたほうがいいよ！"</p></blockquote>

<p>「ですよね！！？」という衝撃とともに個人的に火もついて、ここでやっと「情報共有ツールの移行、ワイが esa で進めたるでー！（POWER）」となったのでした。</p>

<p><figure class="figure-image figure-image-fotolife" title="※画像はイメージです"><span itemscope itemtype="http://schema.org/Photograph"><img src="https://cdn-ak.f.st-hatena.com/images/fotolife/t/tmd45/20190822/20190822122700.png" alt="f:id:tmd45:20190822122700p:plain:w380" title="f:id:tmd45:20190822122700p:plain:w380" class="hatena-fotolife" style="width:380px" itemprop="image"></span><figcaption>※画像はイメージです</figcaption></figure></p>

<h1 id="社内への働きかけ">社内への働きかけ</h1>

<p>esa 移行を決心してから、社内への働きかけも行っていきました。</p>

<p>一番大切なのは <strong>情報管理ツールを移行したい思いと目的</strong> で、これは前述のようにいろいろ考えてきたので１つの記事を作って社内に共有しました。</p>

<p>また、移行プロジェクトに関わってくれたデザイナー氏が、移行の意欲を高めるために弊社のキャラクターと esa の (\( ⁰⊖⁰)/) を（勝手に）コラボしたイメージを作ってくれて、なかなかに社内の評判もよかったです。こういう「たのしい」工夫も大事だと思います。</p>

<p><figure class="figure-image figure-image-fotolife" title="今も esa の HOME ページを飾る非公式コラボ画像"><span itemscope itemtype="http://schema.org/Photograph"><img src="https://cdn-ak.f.st-hatena.com/images/fotolife/t/tmd45/20190822/20190822122909.png" alt="f:id:tmd45:20190822122909p:plain" title="f:id:tmd45:20190822122909p:plain" class="hatena-fotolife" itemprop="image"></span><figcaption>今も esa の HOME ページを飾る非公式コラボ画像</figcaption></figure></p>

<p><figure class="figure-image figure-image-fotolife" title="移行期間中に社内の士気を上げるため貼っていたポスター"><span itemscope itemtype="http://schema.org/Photograph"><img src="https://cdn-ak.f.st-hatena.com/images/fotolife/t/tmd45/20190822/20190822122947.jpg" alt="f:id:tmd45:20190822122947j:plain:w320" title="f:id:tmd45:20190822122947j:plain:w320" class="hatena-fotolife" style="width:320px" itemprop="image"></span><figcaption>移行期間中に社内の士気を上げるため貼っていたポスター</figcaption></figure></p>

<p>そこからトライアルへの協力と、実際のアカウント移行のお願いなども同様に進めました。とくに新卒の若者たちは新しいツールを使いこなそう(｀・ω・´)+という意欲も高く、積極的に使い方を聞きに来てくれたり、同期で共有したりしていて頼もしかったです。</p>

<p>社長にも「とりあえず１つ何か記事書いてください！」とお願いしたら、もともと Qiita:Team で書いていた週報をシュッと esa で書いてくれました。おかげでそれを読むためにアカウント登録するメンバーも増え、スムーズに移行できました。</p>

<h1 id="データ移行のノウハウ">データ移行のノウハウ</h1>

<p>ここからはデータの移行で得た気づきなどです。
ご紹介しているスクリプトの利用につきましては保証しかねますのでご了承ください！</p>

<h2 id="Emoji-の登録">Emoji の登録</h2>

<p>記事の移行より先にやったのが Emoji の登録でした。</p>

<p><strong>Qiita:Team は Slack と連携して Emoji を同期させる機能がありますが、esa にはその機能はありません。</strong> API で登録することができるので、ひとまず更新のことは考えず、その時点の Slack Emoji を吸い出して、esa に流しこみました。Slack Emoji を取ってくるスクリプトは拾いものなので割愛します、すみません。</p>

<p>流し込んだスクリプトはこちら。</p>

<ul>
<li><a href="https://github.com/tmd45/qiita2esa/blob/master/slack_emoji_import.rb">qiita2esa/slack_emoji_import.rb at master · tmd45/qiita2esa</a></li>
</ul>


<p>すでに登録済みの Emoji に重複したキーワードだと <code>400 Bad Request</code> になります。また Slack は日本語キーワードでの Emoji 登録が可能ですが、esa のほうでは日本語キーワードには対応していないので、予め除外するか当該エラーでスキップさせましょう。</p>

<p>余談ですが、一度、Emoji の画像ファイルとキーワードをあべこべに登録してしまってカオスを生んでしまいました。いまはリカバリ済みです:(；ﾞﾟ'ωﾟ'):</p>

<p><figure class="figure-image figure-image-fotolife" title="ありがたさ → からい。からいもの好きなひとか！"><span itemscope itemtype="http://schema.org/Photograph"><img src="https://cdn-ak.f.st-hatena.com/images/fotolife/t/tmd45/20190822/20190822123239.png" alt="f:id:tmd45:20190822123239p:plain:w230" title="f:id:tmd45:20190822123239p:plain:w230" class="hatena-fotolife" style="width:230px" itemprop="image"></span><figcaption>ありがたさ → からい。からいもの好きなひとか！</figcaption></figure></p>

<p><figure class="figure-image figure-image-fotolife" title="いいとおもう〜 → 却下。真逆！"><span itemscope itemtype="http://schema.org/Photograph"><img src="https://cdn-ak.f.st-hatena.com/images/fotolife/t/tmd45/20190822/20190822123310.png" alt="f:id:tmd45:20190822123310p:plain:w230" title="f:id:tmd45:20190822123310p:plain:w230" class="hatena-fotolife" style="width:230px" itemprop="image"></span><figcaption>いいとおもう〜 → 却下。真逆！</figcaption></figure></p>

<p><figure class="figure-image figure-image-fotolife" title="ムズい → 輪廻転生。ｿｳﾃﾞｽﾈ"><span itemscope itemtype="http://schema.org/Photograph"><img src="https://cdn-ak.f.st-hatena.com/images/fotolife/t/tmd45/20190822/20190822123343.png" alt="f:id:tmd45:20190822123343p:plain:w230" title="f:id:tmd45:20190822123343p:plain:w230" class="hatena-fotolife" style="width:230px" itemprop="image"></span><figcaption>ムズい → 輪廻転生。ｿｳﾃﾞｽﾈ</figcaption></figure></p>

<h2 id="記事データの移行">記事データの移行</h2>

<p>Qiita:Team の記事エクスポート機能（Owner のみ可能）で得られるデータは１記事＝１JSON ファイルになっていて、メタ情報やコメントも含まれています。</p>

<p>esa に移行するために以下のようにしました。</p>

<p>▼記事作成・更新 API</p>

<table>
<thead>
<tr>
<th> esa パラメータ </th>
<th> 内容 </th>
<th> 注意点 </th>
</tr>
</thead>
<tbody>
<tr>
<td> <code>name</code> </td>
<td> 記事タイトル </td>
<td> <code>/</code> や <code>#</code> は数値参照に置き換える（カテゴリやタグになってしまうのを避ける） </td>
</tr>
<tr>
<td> <code>category</code> </td>
<td> カテゴリ </td>
<td> <code>(unsorted)/all</code> 移行用に定義 </td>
</tr>
<tr>
<td> <code>body_md</code> </td>
<td> 本文 Markdown </td>
<td> 1. パラメータとして指定できないメタ情報（記事作成日時など）を本文に追加する形で残す<br>2. 本文中の他記事 URL や画像 URL を置換<br>3. 本文中の <code>ユーザID</code> を小文字化（ <code>ScreenName</code> に合わせるため） </td>
</tr>
<tr>
<td> <code>user</code> </td>
<td> 記事作成者 </td>
<td> 記事作成者の <code>ScreenName</code> を指定 </td>
</tr>
<tr>
<td> <code>created_by</code> </td>
<td> 記事作成者（上書き） </td>
<td> 同上。更新時に Owner 権限をもつ token でのみ上書き可能 </td>
</tr>
</tbody>
</table>


<p>▼コメント作成 API</p>

<table>
<thead>
<tr>
<th> esa パラメータ </th>
<th> 内容 </th>
<th> 注意点 </th>
</tr>
</thead>
<tbody>
<tr>
<td> <code>body_md</code> </td>
<td> コメント本文 Markdown </td>
<td> 記事本文と同様にメタ情報の追加と、他記事 URL、画像 URL、ユーザID の置き換えを行う </td>
</tr>
<tr>
<td> <code>user</code> </td>
<td> コメント作成者 </td>
<td> コメント作成者の <code>ScreenName</code> を指定 </td>
</tr>
</tbody>
</table>


<p>esa API の利用については <a href="https://docs.esa.io/#path=%2Fdev">公式の開発者向けドキュメント</a> を参照ください。</p>

<p><figure class="figure-image figure-image-fotolife" title="記事本文に追加したメタ情報の例"><span itemscope itemtype="http://schema.org/Photograph"><img src="https://cdn-ak.f.st-hatena.com/images/fotolife/t/tmd45/20190822/20190822123714.png" alt="f:id:tmd45:20190822123714p:plain" title="f:id:tmd45:20190822123714p:plain" class="hatena-fotolife" itemprop="image"></span><figcaption>記事本文に追加したメタ情報の例</figcaption></figure></p>

<p>今回は「タグ」の移行をしませんでした。一度リセットして、混沌としたタグの整理ができればと思ったんですが、タグがなくなったことで意味がわからなくなってしまった記事が意外とあって、メタ情報と一緒に移行しておけばよかったな、と思いました。</p>

<p>インポートの流れとして <strong>先に記事 URL や画像 URL だけ esa 上で作っておいて、記事本文を流し込む段階で記事中の URL の置換</strong> を行いました。先に作った URL たちは中間データとしてテキスト（.tsv）に吐き出しました。口頭だとややこしいので詳しくは拙作のコードで。</p>

<ul>
<li><a href="https://github.com/tmd45/qiita2esa/blob/import_articles/article_import.rb">qiita2esa/article_import.rb at import_articles · tmd45/qiita2esa</a></li>
</ul>


<p>使い捨て用に書きなぐったものなのでお恥ずかしいですが、なんか頑張ってるのが伝わればいいかなと思います 🙈</p>

<p>esa の API 利用はもちろんですが、画像取得のために Qiita:Team の API も利用します。</p>

<h2 id="プロジェクトページ記事の扱い">プロジェクトページ記事の扱い</h2>

<p>Qiita:Team のプロジェクトページとなっている記事も１記事＝１ファイルです。ただし通常の記事と、含まれている属性が若干異なるため注意は必要です。</p>

<p>基本的には通常の記事と同じく、渡せるメタ情報は渡して、Markdown の本文を投入するという感じで進めました。</p>

<p>もちろん esa には「プロジェクトページ」という概念はないので、適当に <code>(unsorted)/projects</code> のようなカテゴリを定義してそこにまとめました。</p>

<ul>
<li><a href="https://github.com/tmd45/qiita2esa/blob/import_articles/project_import.rb">qiita2esa/project_import.rb at import_articles · tmd45/qiita2esa</a></li>
</ul>


<p>実はメインの記事移行より先に、件数の少ないこちらを試していたため、結果的に URL の置き換え処理などすっかり忘れていました。INDEX の用途で利用していたページではこの置き換えを行わないとツラいと思いますので、お気をつけください。</p>

<h2 id="プライベートグループの記事の扱い">プライベートグループの記事の扱い</h2>

<p>プライベートグループでは、人事や役員会議などで扱う社内にも非公開の情報が含まれていました。これらは esa の決済連結機能を使って、別の esa チームを作成しデータ移行しました。</p>

<p>エクスポートした JSON データは、記事の所属するグループもパラメータとして持っているので、そこを見てファイルごと分別しておきます。</p>

<p>スクリプトが見当たらなくて自分でどうやったんだっけ…と思いましたが、雑に以下のコマンドで分類してました。ご参考まで 😇</p>

<pre class="code lang-sh" data-lang="sh" data-unlink>$ <span class="synStatement">cd</span> path/to/export_articles
$ ag <span class="synSpecial">-l</span> <span class="synStatement">'</span><span class="synConstant">&quot;url_name&quot;: &quot;group_name&quot;</span><span class="synStatement">'</span> ./*.json | xargs <span class="synSpecial">-I</span>% <span class="synStatement">mv</span> % ./group_name
</pre>


<h2 id="メンバーの移行とデータの移行のタイミング">メンバーの移行とデータの移行のタイミング</h2>

<p>今回は先にメンバー全員に、あるタイミングから新規記事は esa で作ってもらうよう案内しました（それゆえに Emoji の登録を先にやった）。</p>

<p>Qiita:Team 側に新しい記事が作成されなくなったのを見計らって、告知しつつ、記事データのエクスポートと、esa への投入を開始しました。</p>

<p>記事の参照は一時的に Qiita:Team と esa の双方を見ることになりましたが、"記事を書けない期間" を無くして移行できたのはよかったです。</p>

<h1 id="esa-と一緒に使っている便利ツール">esa と一緒に使っている便利ツール</h1>

<p>事例といえば先駆者たちの <a href="https://docs.esa.io/posts/25">esa 公式の紹介記事まとめ</a> も大変助かりました。弊社でもいくつかの便利なツールを併用しています。</p>

<h2 id="記事の自動作成自動-esa-やり機">記事の自動作成「自動 esa やり機」</h2>

<p>用意したテンプレートを元に、指定した曜日に自動で記事を生成してくれる Heroku アプリです。</p>

<ul>
<li><a href="https://github.com/standfirm/esa_feeder">standfirm/esa_feeder - GitHub</a></li>
<li><a href="https://tech.misoca.jp/entry/2017/12/01/110000">自動esaやり機とクリーンアーキテクチャ - Misoca開発者ブログ</a></li>
</ul>


<p>弊社でも定期的なミーティングの議事録は、まず WIP の空記事を用意して、事前に議題を追記したり、話しながら記録したりということをやっています。Qiita:Team 時代からテンプレートを元に人が WIP 記事を作って共有していましたが、"誰か" がリマインドに気づいて記事を作成するといったことが不要になりました。</p>

<p>記事の作成と同時に指定した Slack チャンネルへの通知も行われることで、議題の追記のリマインドも兼ねていて非常に便利に利用しております！</p>

<h2 id="Slack-に記事-URL-から概要を展開してくれるKujaku">Slack に記事 URL から概要を展開してくれる「Kujaku」</h2>

<p>最近ツールの更新があってコメントURL からコメント内容も展開されるようになった、Slack x esa の情報共有を促進してくれる便利ツール。こちらもバックエンド部分は Heroku アプリです。</p>

<ul>
<li><a href="https://github.com/FromAtom/Kujaku">FromAtom/Kujaku - GitHub</a></li>
<li><a href="https://inside.pixiv.blog/fromatom/5684">Closedなesaの記事URLをSlackに貼ったら展開されるようにした - pixiv inside</a></li>
<li><a href="https://fromatom.hatenablog.com/entry/2019/08/06/173251?_ga=2.83644766.993732209.1566361511-952403895.1555303711">#esa のURLを展開してくれるKujakuで、コメントも展開できるようになりました。 - 文字っぽいの。</a></li>
</ul>


<p>ログインしないと見られないようなクローズドなページの URL は、Slack に流してもその内容が展開されません。それを解決してくれるのが Slack の "Unfurling links in messages" という機能なのですが、その機能をかんたんに使えるようにしてくれたのがこのツールです。</p>

<p>これまでは URL と一緒にタイトルなども投稿してもらわないと「何？この URL…」となっていたのが、URL を貼るだけで手軽に共有できるようになったのはハイパー捗りました！</p>

<h2 id="Emacs-x-esa-利用者におすすめemacs-helm-esa">Emacs x esa 利用者におすすめ「emacs-helm-esa」</h2>

<p>手前味噌ですが、esa 移行をきっかけに弊社の Emacs 使い <a href="http://blog.hatena.ne.jp/masutaka26/">id:masutaka26</a> が作った Emacs-Helm Interface もご紹介。</p>

<ul>
<li><a href="https://github.com/masutaka/emacs-helm-esa">masutaka/emacs-helm-esa - GitHub</a></li>
<li><a href="https://masutaka.net/chalow/2019-06-10-1.html">esa の記事を Emacs から素早く開ける helm-esa.el を作った / マスタカの ChangeLog メモ</a></li>
</ul>


<p>普段利用している環境から手軽に記事が探せるのは強いですね！よろしければお試しください。</p>

<h1 id="QiitaTeam-から移行して-esa-に思ったこといろいろ">Qiita:Team から移行して esa に思ったこといろいろ</h1>

<p>なによりも課題であった「記事検索が上手くいかない」件はすっきり解決しました！
以前は言いづらかった「○○で検索してみてください！」というのが気軽に言えるようになってよかったです。</p>

<p>それ以外の部分を挙げてみたいと思います。</p>

<h2 id="サポートの対応がフレンドリーかつ早い">サポートの対応がフレンドリーかつ早い！</h2>

<ul>
<li>esa のフィードバックフォームから投げたものに対する反応が早い</li>
<li>相談に対する回答も丁寧でとてもありがたい</li>
<li>バグ報告したらすぐ直って <del>社内で２，３人鼻血出した</del> 素敵</li>
<li><a href="https://docs.esa.io/#path=%2Fpolicies">情報セキュリティポリシー、運用ポリシーが公開されている</a>ので社内のPマークチェックもスムーズでした（確認にもご協力いただけて助かりました）</li>
</ul>


<p>移行するデータ量が多いことは分かっていたので、先に esa の人に「たくさんデータ移行する予定なんですが大丈夫ですか…？」と連絡してみました。</p>

<p><strong>移行当時の Qiita:Team メンバー数が 79 人、記事数が 5 万記事以上ありました</strong>（あとで気づきましたが、画像も相当な数とサイズがありましたね…）。esa の深谷さんや越川さん、赤塚さんからすぐにお返事をいただいて、とても助かりました。</p>

<h2 id="導入時に助かったところ">導入時に助かったところ</h2>

<ul>
<li><strong>ドメイン制限が可能な Google ログイン</strong>

<ul>
<li>G Suite 利用のため、ソーシャルログインでアカウント管理が一元化できてハッピーです</li>
</ul>
</li>
<li><strong>「添付ファイルに関するセキュアオプション」→ esaにログイン中のみ添付ファイルへのアクセスを可能にする</strong>

<ul>
<li>esa 記事の外部公開ができなくなってしまうのは残念ですが、これがあると安心して業務情報をまとめられるので非常に助かります</li>
</ul>
</li>
<li><strong>「複数チームの連結決済」</strong>

<ul>
<li>Qiita:Team 利用時から、人事や経営に関わるプライベートグループの運用がありました。これを引き継ぐため、メンバーを限定した esa チームを作り、連結決済の設定をしています</li>
</ul>
</li>
<li><strong>「Webhook・アプリ連携」での Slack 連携</strong>

<ul>
<li>Qiita:Team のころから Slack にフィードを流すという運用をしていたので、同様のものがあり助かりました</li>
</ul>
</li>
</ul>


<h2 id="導入時に困ったところ">導入時に困ったところ</h2>

<p>アカウント登録のとき <strong><code>Name</code> と <code>ScreenName</code> の違いが分かりづらかった</strong>ようです。<code>Name</code> のほうに氏名、<code>ScreenName</code> にユーザID を入れてねー、という説明が必要でした。</p>

<p>また移行ならではですが、esa の <code>ScreenName</code> では、Qiita:Team の <code>ユーザ名</code> で使えた「英大文字」が使えません。そのため Qiita:Team で英大文字を含む <code>ユーザ名</code> を利用していた場合には、すべて小文字に置き換えたものにしてもらいました。</p>

<p>アカウント登録の案内にこのような注意を書きました。どう判定させるかは移行スクリプトの作りに依ります。</p>

<blockquote><p>大文字を小文字に置き換えた場合も「同一のIDである」と判断します :pray:</p>

<ul>
<li>Qiita で <code>ichiro3</code> → esa で <code>ichiro3</code> ⇒ OK ✅ （完全に一致）</li>
<li>Qiita で <code>Taro-san</code> → esa で <code>taro-san</code> ⇒ OK ✅（小文字になっただけ）</li>
<li>Qiita で <code>Hanako99</code> → esa で <code>99hanako</code> ⇒ NG 💥（同一と判断できません）</li>
</ul>


<p>大文字・小文字とは別の話ですが、ハイフンやアンダーバーを使われている方は間違えないようにお気をつけください。</p>

<ul>
<li>Qiita で <code>Taro-san</code> → esa で <code>taro_san</code> ⇒ NG 💥（ハイフンがアンダーバーに。同一と判断できません）</li>
</ul>
</blockquote>

<h2 id="QiitaTeam-と-esa-の情報整理思想の違い">Qiita:Team と esa の情報整理思想の違い</h2>

<p>見出しのとおり、２つのツールは情報整理に対する姿勢が異なります。それゆえに移行して戸惑いの声が挙がったのは事実です。</p>

<p>これらの意見は「esa も Qiita:Team と同じようにすべき」という話ではありません。UI や使い方が変われば戸惑うひとがいるのは当たり前で、いずれ良い方向に慣れるか、悪い方向に慣れるか分かれます。</p>

<p>使い続けて感じる不便な点は、きちんとフィードバックすれば答えてくれるサービスだと思うので、そこは真摯にフィードバックしていきましょう 💪</p>

<h3 id="QiitaTeam-のトップページのようにすべての記事が流れていくようなものが欲しい情報のザッピングがしたい">Qiita:Team のトップページのように、すべての記事が流れていくようなものが欲しい。情報のザッピングがしたい</h3>

<p>esa では "POSTS" のページがそれに当たりますが、Qiita:Team に慣れていたメンバーからすると「トップページ」から１ステップ踏まないとそれが見えないという戸惑いがありました。"POSTS" ページに移動しても、ソート順が意図した順でない（ソート順を変更するというリテラシーも必要になる）ことでも迷いが発生したようでした。</p>

<p>これについては、"HOME" の README 記事に便利リンク集を追加して、周知することでひとまず解決できました。</p>

<p><figure class="figure-image figure-image-fotolife" title="README に作った「オススメ検索リンク」集"><span itemscope itemtype="http://schema.org/Photograph"><img src="https://cdn-ak.f.st-hatena.com/images/fotolife/t/tmd45/20190822/20190822125138.png" alt="f:id:tmd45:20190822125138p:plain" title="f:id:tmd45:20190822125138p:plain" class="hatena-fotolife" itemprop="image"></span><figcaption>README に作った「オススメ検索リンク」集</figcaption></figure></p>

<h3 id="Recently-Update-が-WIP-も含むすべての記事の更新を-age-てしまう">Recently Update が WIP も含むすべての記事の更新を age てしまう</h3>

<p>これについては esa のコンセプトにどうしても馴染めないメンバーがいくらかいるという話でもあります。</p>

<p><figure class="figure-image figure-image-fotolife" title="esa.io より、esa のコンセプト"><span itemscope itemtype="http://schema.org/Photograph"><img src="https://cdn-ak.f.st-hatena.com/images/fotolife/t/tmd45/20190822/20190822125319.png" alt="f:id:tmd45:20190822125319p:plain:w460" title="f:id:tmd45:20190822125319p:plain:w460" class="hatena-fotolife" style="width:460px" itemprop="image"></span><figcaption>esa.io より、esa のコンセプト</figcaption></figure></p>

<p>まず <strong>「下書き」機能が無いことで、以前より記事が書きづらい、公開もしづらくなった</strong> という声がありました。</p>

<p>不完全な状態では公開したくなく「下書き」のような非公開の状態で推敲を重ねて、キチンとした記事にしてから公開したい、という意見です。これを他人に強制するような人は見かけませんが「自分が記事を書くならそのようにしたい」と思うメンバーは年齢関係なくいる状況です。単純に下書き機能を「個人メモを置く場所」として使っていたという人もいました。</p>

<p>また、<strong>WIP で書いた記事を更新したときに、Recently Update で更新順として上がってきてしまうことに不便を感じる</strong> 声もあります。これは記事を書く方も、見る方もそうで「未完成の間は sage 進行したい」「更新された記事は知りたいけど ShipIt されてから読みたい」という状況です。 <code>[skip notice]</code> しても Recently Update には流れてくるというのも戸惑われているようです。</p>

<p>読む側は、先程のザッピングの検索クエリと同じもので解決できるので、そちらを利用してもらっています。</p>

<p>書く側に対しては、気にせずガンガン更新しちゃいなよ！と意識改革していくしかないかなと思っています（自分は未完成でも気にしない星人）。</p>

<h3 id="内部-URL-でタイトルが展開されるのは便利だった">内部 URL でタイトルが展開されるのは便利だった…</h3>

<p>Qiita:Team では、Qiita:Team 内の URL を貼るだけで、記事の表示時にリンク先記事のタイトル（と作成者のアイコン）が自動で展開されていました。"リンクされた記事" のタイトルを修正したときに、"リンクしている記事" 側を修正しなくてよいのは大変便利でした。</p>

<ul>
<li><a href="https://blog.qiita.com/132008265764-2/">Qiita:Teamで、チーム内記事へのリンクのタイトルが自動で表示されるようになりました - Qiita Blog</a></li>
</ul>


<p>情報整理をしていると、よりわかりやすいタイトルに修正したくなることも多いですし、そういう記事に限っていろんなところから参照されていたりして…</p>

<p>いまでもこの機能は欲しいなーと思います（たしか esa にもフィードバックを送らせていただいたと思う）。</p>

<h3 id="他人の記事をかんたんにいじれてしまう">他人の記事をかんたんにいじれてしまう</h3>

<p>これは最近不安を訴える人が減ってきたので、みんな慣れてきたのかもしれません。</p>

<p>Qiita:Team のときは「共同編集の記事」という区別があったり、「編集リクエスト」の機能があったため、うっかり他人の記事を触ってしまうということがありませんでした。これに慣れていると、逆にどの記事でも誰でもいじれてしまうのは、不安があったようです。</p>

<p>編集履歴から内容をロールバックすることもできるし、（自分のようなおじさんから言わせれば）昔からある Wiki だってそういうものですよ、という感じで、こちらも意識改革をしていくのがよいと思いました。</p>

<p>誰でも触れるおかげで、記事を書いた人に依存せずに情報の整理ができるというのはとても良い点だと感じます。</p>

<p>記事の Delete が出来てしまうことに不安を持つ人は多いかもしれませんが、まず記事の削除自体が２ステップ踏む UI になっていて「うっかり」することは少ないのではないかと思います。</p>

<h1 id="さいごに">さいごに</h1>

<p>情報共有ツールの移行で得られた結果は以下のようなものです。</p>

<ul>
<li>検索で記事が見つけやすくなった</li>
<li>ナレッジの階層化ができるようになった</li>
<li>ナレッジの構造化を意識するようになった</li>
<li>フロー情報とストック情報を区別できるようになった</li>
<li>移行をきっかけに記事の整理が行われた</li>
</ul>


<p>問題を感じることに鈍感にならず、今後も「日々混沌、日々進化<sup id="fnref:1"><a href="#fn:1" rel="footnote">1</a></sup>」のバリューを実践していきたいと思います。</p>
<div class="footnotes">
<hr/>
<ol>
<li id="fn:1">
<p>弊社バリューである FF memes の１つです。詳しくはこちら: <a href="https://recruit.feedforce.jp/">https://recruit.feedforce.jp/</a> <a href="#fnref:1" rev="footnote">&#8617;</a></p></li>
</ol>
</div>

]]></description>
            <enclosure url="https://cdn-ak.f.st-hatena.com/images/fotolife/t/tmd45/20190822/20190822122258.png" length="0" type="image/png"/>
        </item>
        <item>
            <title><![CDATA[『改訂2版 みんなのGo言語』を読んだ]]></title>
            <link>https://masutaka.net/2019-08-16-1/</link>
            <guid>https://masutaka.net/2019-08-16-1/</guid>
            <pubDate>Fri, 16 Aug 2019 00:00:00 GMT</pubDate>
            <description><![CDATA[夏休みを利用して読みました。初版は [2016-09-25-1] でじっくり読んで手も動かしたので、本当にさらっとね。
最近は Go のコードをほとんど書いてなくて、Go Modules に追いついている程度でした。ただ、それほど分からない情報もなかったので、ある意味答え合わせにはなった気がします。
例えば拙作の github-nippou で go-bindata から statik に乗り換えた のは、誤りでなかったなとか（P41）。
ちょうど設定ファイルのフォーマットをどうしようとか、置き場所を XDG Base Directory Specification に合わせようとか考えていたので、「2.8 設定ファイルの取り扱い（P45）」もタイムリーでした。
読んでて Interface 使ってコードを Testable にするだとか、HTTP Mock とか、課題をいろいろ思い出しました&hellip;。
相変わらずサラッと知識をアップデート出来るので、Go に興味ある人にはオススメの一冊です。]]></description>
        </item>
        <item>
            <title><![CDATA[ Dynamoid のスレッドセーフではない実装を直しました]]></title>
            <link>https://developer.feedforce.jp/entry/2019/08/13/183130</link>
            <guid>https://developer.feedforce.jp/entry/2019/08/13/183130</guid>
            <pubDate>Tue, 13 Aug 2019 09:31:30 GMT</pubDate>
            <description><![CDATA[<p>こんにちは。インフラエンジニアの <a href="http://blog.hatena.ne.jp/tsub511/" class="hatena-id-icon"><img src="https://cdn.profile-image.st-hatena.com/users/tsub511/profile.png" width="16" height="16" alt="" class="hatena-id-icon">id:tsub511</a> です。</p>

<p>私は Dynamoid のメンテナではないのですが、弊社内で今回それなりに大きい問題が起きて、得た知見も大きかったため記事にしました。</p>

<h2>TL;DR</h2>

<p>Dynamoid にスレッドセーフではない実装があったが <a href="https://github.com/Dynamoid/dynamoid/pull/373">PR をマージしてもらって</a>修正済み。</p>

<p>2019/08/13 時点ではまだリリースされていないようなので、エラーで困っている方は master ブランチをお使いください。</p>

<h2>今回起きた問題</h2>

<p>弊サービスでは Sidekiq 上で Dynamoid を使っています。</p>

<p><iframe src="https://hatenablog-parts.com/embed?url=https%3A%2F%2Fgithub.com%2FDynamoid%2Fdynamoid" title="Dynamoid/dynamoid" class="embed-card embed-webcard" scrolling="no" frameborder="0" style="display: block; width: 100%; height: 155px; max-width: 500px; margin: 10px 0px;"></iframe><cite class="hatena-citation"><a href="https://github.com/Dynamoid/dynamoid">github.com</a></cite></p>

<p>基本的に問題なく稼働していたのですが、デプロイ時に Sidekiq を再起動した後、Bugsnag に以下のような二種類のエラーが継続的に飛んできました。</p>

<p><figure class="figure-image figure-image-fotolife" title="undefined method &#x60;[]&#x27; for nil:NilClass"><span itemscope itemtype="http://schema.org/Photograph"><img src="https://cdn-ak.f.st-hatena.com/images/fotolife/t/tsub511/20190809/20190809182531.png" alt="f:id:tsub511:20190809182531p:plain" title="f:id:tsub511:20190809182531p:plain" class="hatena-fotolife" itemprop="image"></span><figcaption>undefined method &#x60;&#x5B;&#x5D;&#x27; for nil:NilClass</figcaption></figure></p>

<p><figure class="figure-image figure-image-fotolife" title="undefined method &#x60;query&#x27; for #&lt;Dynamoid::AdapterPlugin::AwsSdkV3:0x00000000078dc1b8&gt; Did you mean? to_query"><span itemscope itemtype="http://schema.org/Photograph"><img src="https://cdn-ak.f.st-hatena.com/images/fotolife/t/tsub511/20190809/20190809182800.png" alt="f:id:tsub511:20190809182800p:plain" title="f:id:tsub511:20190809182800p:plain" class="hatena-fotolife" itemprop="image"></span><figcaption>undefined method &#x60;query&#x27; for #&lt;Dynamoid::AdapterPlugin::AwsSdkV3:0x00000000078dc1b8&gt; Did you mean? to_query</figcaption></figure></p>

<p>このエラーが起きると、自然には回復しないため、Sidekiq のワーカーを再起動する必要があります。</p>

<p>また、<code>NoMethodError</code> という一般的な例外クラスのため ActiveJob の <code>retry_on</code> によるリトライ処理の考慮はしておらず、大事なジョブが実行されないままになってしまうのも問題です。</p>

<p>エラーをパッと見ただけでは、キャッシュの実装に考慮漏れがあるのかな？とか、インスタンスが生成されていて<a href="https://github.com/Dynamoid/dynamoid/blob/v3.2.0/lib/dynamoid/adapter_plugin/aws_sdk_v3.rb">コード上ではメソッドが実装されている</a>のになんで undefined method エラーが起きるんだ？などと、不思議なエラーが出ていて調査が難航しそうな印象でした。</p>

<h2>何が原因だったのか</h2>

<p>Sidekiq + Dynamoid でピンと来る方もいると思いますが、エラーの原因は Dynamoid にスレッドセーフではない実装があったことでした。</p>

<p>スレッドセーフではない実装がどこにあったのか探すために、ここで発生していたエラーをもう一度見てみます。</p>

<blockquote><p><figure class="figure-image figure-image-fotolife" title="undefined method &#x60;<span data-unlink>&#x27; for nil:NilClass"><span itemscope itemtype="http://schema.org/Photograph"><img src="https://cdn-ak.f.st-hatena.com/images/fotolife/t/tsub511/20190809/20190809182531.png" alt="f:id:tsub511:20190809182531p:plain" title="f:id:tsub511:20190809182531p:plain" class="hatena-fotolife" itemprop="image"></span><figcaption>undefined method &#x60;</span>&#x27; for nil:NilClass</figcaption></figure></p></blockquote>

<p>まず 1 つ目のエラーは <code>nil</code> に対して <code>#[]</code> を呼び出そうとしてエラーになっていますが、<code>nil</code> になっている変数は <code>table_cache</code> です。</p>

<p><code>table_cache</code> は以下で初期化されています。</p>

<pre class="code lang-ruby" data-lang="ruby" data-unlink><span class="synComment"># https://github.com/Dynamoid/dynamoid/blob/v3.2.0/lib/dynamoid/adapter_plugin/aws_sdk_v3.rb#L66-L69</span>
<span class="synPreProc">def</span> <span class="synIdentifier">connect!</span>
  <span class="synIdentifier">@client</span> = <span class="synType">Aws</span>::<span class="synType">DynamoDB</span>::<span class="synType">Client</span>.new(connection_config)
  <span class="synIdentifier">@table_cache</span> = {}
<span class="synPreProc">end</span>
</pre>


<p>そして、この初期化のための <code>Dynamoid::AdapterPlugin::AwsSdkV3#connect!</code> を呼び出しているのは <code>Dynamoid::Adapter#adapter</code> です。</p>

<p><code>adapter.connect!</code> の部分に <code>if adapter.respond_to?(:connect!)</code> という条件がありますが、ここが <code>false</code> になっていて <code>adapter.connect!</code> が実行されていないため、<code>table_cache</code> の初期化処理が動いていないようです。</p>

<pre class="code lang-ruby" data-lang="ruby" data-unlink><span class="synComment"># https://github.com/Dynamoid/dynamoid/blob/v3.2.0/lib/dynamoid/adapter.rb#L29-L37</span>
<span class="synPreProc">def</span> <span class="synIdentifier">adapter</span>
  <span class="synStatement">unless</span> <span class="synIdentifier">@adapter_</span>.value
    adapter = <span class="synConstant">self</span>.class.adapter_plugin_class.new
    adapter.connect! <span class="synStatement">if</span> adapter.respond_to?(<span class="synConstant">:connect!</span>)
    <span class="synIdentifier">@adapter_</span>.compare_and_set(<span class="synConstant">nil</span>, adapter)
    clear_cache!
  <span class="synStatement">end</span>
  <span class="synIdentifier">@adapter_</span>.value
<span class="synPreProc">end</span>
</pre>


<p>2 つ目のエラーも見てみます。</p>

<blockquote><p><figure class="figure-image figure-image-fotolife" title="undefined method &#x60;query&#x27; for #&lt;Dynamoid::AdapterPlugin::AwsSdkV3:0x00000000078dc1b8&gt; Did you mean? to_query"><span itemscope itemtype="http://schema.org/Photograph"><img src="https://cdn-ak.f.st-hatena.com/images/fotolife/t/tsub511/20190809/20190809182800.png" alt="f:id:tsub511:20190809182800p:plain" title="f:id:tsub511:20190809182800p:plain" class="hatena-fotolife" itemprop="image"></span><figcaption>undefined method &#x60;query&#x27; for #&lt;Dynamoid::AdapterPlugin::AwsSdkV3:0x00000000078dc1b8&gt; Did you mean? to_query</figcaption></figure></p></blockquote>

<p>こちらは <code>Dynamoid::AdapterPlugin::AwsSdkV3</code> のインスタンス <code>adapter</code> に対して <code>query</code> を実行しようとしてメソッドが定義されていないというエラーです。</p>

<p>しかし、実際のコードにはメソッドが定義されています。</p>

<pre class="code lang-ruby" data-lang="ruby" data-unlink>https<span class="synConstant">:/</span>/github.com/<span class="synType">Dynamoid</span>/dynamoid/blob/v3.<span class="synConstant">2.0</span>/lib/dynamoid/adapter_plugin/aws_sdk_v3.rb<span class="synComment">#L489-L500</span>
 <span class="synPreProc">def</span> <span class="synIdentifier">query</span>(table_name, options = {})
  <span class="synType">Enumerator</span>.new <span class="synStatement">do</span> |<span class="synIdentifier">yielder</span>|
    table = describe_table(table_name)

    <span class="synType">Query</span>.new(client, table, options).call.each <span class="synStatement">do</span> |<span class="synIdentifier">page</span>|
      yielder.yield(
        page.items.map { |<span class="synIdentifier">row</span>| result_item_to_hash(row) },
        <span class="synConstant">last_evaluated_key</span>: page.last_evaluated_key
      )
    <span class="synStatement">end</span>
  <span class="synStatement">end</span>
 <span class="synPreProc">end</span>
</pre>


<p>視点を変えて、<code>adapter</code> インスタンスを定義しているコードを見てみると、やはり <code>Dynamoid::Adapter#adapter</code> に行き着きます。</p>

<pre class="code lang-ruby" data-lang="ruby" data-unlink><span class="synComment"># https://github.com/Dynamoid/dynamoid/blob/v3.2.0/lib/dynamoid/adapter.rb#L29-L37</span>
<span class="synPreProc">def</span> <span class="synIdentifier">adapter</span>
  <span class="synStatement">unless</span> <span class="synIdentifier">@adapter_</span>.value
    adapter = <span class="synConstant">self</span>.class.adapter_plugin_class.new
    adapter.connect! <span class="synStatement">if</span> adapter.respond_to?(<span class="synConstant">:connect!</span>)
    <span class="synIdentifier">@adapter_</span>.compare_and_set(<span class="synConstant">nil</span>, adapter)
    clear_cache!
  <span class="synStatement">end</span>
  <span class="synIdentifier">@adapter_</span>.value
<span class="synPreProc">end</span>
</pre>


<p><code>self.class.adapter_plugin_class.new</code> で生成したものをメモ化しています。</p>

<p>メモ化には <a href="https://github.com/ruby-concurrency/concurrent-ruby">concurrent-ruby</a> を使っていて、<a href="https://github.com/Dynamoid/dynamoid/commit/ed004b2d53c7500e10bca914ee844957939df2df">過去に対策されたよう</a>なのでそこは問題なさそうです。</p>

<p><code>self.class.adapter_plugin_class.new</code> の先が怪しそうなのでコードを見てみると、なにやら動的に <code>require</code> しています。</p>

<pre class="code lang-ruby" data-lang="ruby" data-unlink><span class="synComment"># https://github.com/Dynamoid/dynamoid/blob/v3.2.0/lib/dynamoid/adapter.rb#L181-L187</span>
<span class="synPreProc">def</span> <span class="synConstant">self</span>.<span class="synIdentifier">adapter_plugin_class</span>
  <span class="synStatement">unless</span> <span class="synType">Dynamoid</span>.const_defined?(<span class="synConstant">:AdapterPlugin</span>) &amp;&amp; <span class="synType">Dynamoid</span>::<span class="synType">AdapterPlugin</span>.const_defined?(<span class="synType">Dynamoid</span>::<span class="synType">Config</span>.adapter.camelcase)
    <span class="synPreProc">require</span> <span class="synSpecial">&quot;</span><span class="synConstant">dynamoid/adapter_plugin/</span><span class="synSpecial">#{</span><span class="synType">Dynamoid</span>::<span class="synType">Config</span>.adapter<span class="synSpecial">}&quot;</span>
  <span class="synStatement">end</span>

  <span class="synType">Dynamoid</span>::<span class="synType">AdapterPlugin</span>.const_get(<span class="synType">Dynamoid</span>::<span class="synType">Config</span>.adapter.camelcase)
<span class="synPreProc">end</span>
</pre>


<p>実はスレッドセーフではない実装はこの <code>require</code> する条件の <code>Dynamoid.const_defined?(:AdapterPlugin) &amp;&amp; Dynamoid::AdapterPlugin.const_defined?(Dynamoid::Config.adapter.camelcase)</code> の部分です。</p>

<p>エラーを再現できるコードを Gist に用意しましたのでそちらを使って確認していきます。</p>

<p><a href="https://gist.github.com/tsub/72e60233ed82a8a453428ea7441e6017">Test codes to reproduce not thread-safe errors of Dynamoid &middot; GitHub</a></p>

<p>Dynamoid に以下のような変更を加えて、<code>unless</code> の中に入らず <code>require</code> が実行されなかった時の状態を見てみます。</p>

<pre class="code lang-diff" data-lang="diff" data-unlink><span class="synType">diff --git a/lib/dynamoid/adapter.rb b/lib/dynamoid/adapter.rb</span>
<span class="synPreProc">index f390ecf..df2a58c 100644</span>
<span class="synType">--- a/lib/dynamoid/adapter.rb</span>
<span class="synType">+++ b/lib/dynamoid/adapter.rb</span>
<span class="synStatement">@@ -181,6 +181,13 @@</span><span class="synPreProc"> module Dynamoid</span>
     def self.adapter_plugin_class
       unless Dynamoid.const_defined?(:AdapterPlugin) &amp;&amp; Dynamoid::AdapterPlugin.const_defined?(Dynamoid::Config.adapter.camelcase)
         require &quot;dynamoid/adapter_plugin/#{Dynamoid::Config.adapter}&quot;
<span class="synIdentifier">+      else</span>
<span class="synIdentifier">+        tmp_adapter = Dynamoid::AdapterPlugin.const_get(Dynamoid::Config.adapter.camelcase).new</span>
<span class="synIdentifier">+        puts &lt;&lt;~EOS</span>
<span class="synIdentifier">+          respond_to?(:connect!): #{tmp_adapter.respond_to?(:connect!)},</span>
<span class="synIdentifier">+          respond_to?(:query): #{tmp_adapter.respond_to?(:query)},</span>
<span class="synIdentifier">+          require: #{require &quot;dynamoid/adapter_plugin/#{Dynamoid::Config.adapter}&quot;}</span>
<span class="synIdentifier">+        EOS</span>
       end
 
       Dynamoid::AdapterPlugin.const_get(Dynamoid::Config.adapter.camelcase)
</pre>


<p>すると、スレッドによっては <code>const_defined?</code> の結果が <code>true</code> で、<code>require</code> の結果も <code>false</code> (コードがロード済み) なのに、実際のメソッドが存在しないという現象が起きていることが分かりました。</p>

<pre class="code" data-lang="" data-unlink>$ bundle exec ruby main.rb
...
respond_to?(:connect!): false,
respond_to?(:query): false,
require: false
...</pre>


<p>ここからは Ruby の <code>require</code> の実装を知らないため推測になります。</p>

<p>おそらくマルチスレッド環境下で <code>require</code> を実行すると、<code>require</code> を実行したスレッド内では全てのコードがロードされた状態になりますが、別のスレッドではクラス定義などの「ガワ」だけがロードされた状態になっているのではないかと思いました。</p>

<p>そのため、ロードが不十分なスレッドでインスタンスを生成できるが、メソッドが定義されていない、という状態になっているのかと思われます。</p>

<h2>解決方法</h2>

<p>よって、全てのスレッドで確実に <code>require</code> を実行することで今回のエラーが解決するという結論に至りました。</p>

<pre class="code lang-diff" data-lang="diff" data-unlink><span class="synType">diff --git a/lib/dynamoid/adapter.rb b/lib/dynamoid/adapter.rb</span>
<span class="synPreProc">index f390ecf..8449e34 100644</span>
<span class="synType">--- a/lib/dynamoid/adapter.rb</span>
<span class="synType">+++ b/lib/dynamoid/adapter.rb</span>
<span class="synStatement">@@ -179,9 +179,7 @@</span><span class="synPreProc"> module Dynamoid</span>
     end
 
     def self.adapter_plugin_class
<span class="synSpecial">-      unless Dynamoid.const_defined?(:AdapterPlugin) &amp;&amp; Dynamoid::AdapterPlugin.const_defined?(Dynamoid::Config.adapter.camelcase)</span>
<span class="synSpecial">-        require &quot;dynamoid/adapter_plugin/#{Dynamoid::Config.adapter}&quot;</span>
<span class="synSpecial">-      end</span>
<span class="synIdentifier">+      require &quot;dynamoid/adapter_plugin/#{Dynamoid::Config.adapter}&quot;</span>
 
       Dynamoid::AdapterPlugin.const_get(Dynamoid::Config.adapter.camelcase)
     end
</pre>


<p>エラーの原因と解決方法が判明したため、既に Dynamoid に PR を作りマージまでしてもらいました。</p>

<p><iframe src="https://hatenablog-parts.com/embed?url=https%3A%2F%2Fgithub.com%2FDynamoid%2Fdynamoid%2Fpull%2F373" title="Fix threadsafety of Dynamoid::Adapter by tsub · Pull Request #373 · Dynamoid/dynamoid" class="embed-card embed-webcard" scrolling="no" frameborder="0" style="display: block; width: 100%; height: 155px; max-width: 500px; margin: 10px 0px;"></iframe><cite class="hatena-citation"><a href="https://github.com/Dynamoid/dynamoid/pull/373">github.com</a></cite></p>

<p>2019/08/13 時点ではまだリリースされていないようなので、エラーで困っている方は master ブランチをお使いください。</p>

<h2>調査に苦労した点</h2>

<p>マルチスレッドプログラミングの経験が浅いため、まずスレッドセーフではない実装があるということに気づくまでに時間がかかりました。</p>

<p>そして、エラーを再現しようとした時になかなか再現出来なかったのもハマりポイントでした。</p>

<p><a href="https://gist.github.com/tsub/72e60233ed82a8a453428ea7441e6017">エラーの再現コード</a>を読むと分かりますが、Dynamoid のメソッドを呼ぶ直前に <code>puts</code> を実行しています。</p>

<pre class="code lang-ruby" data-lang="ruby" data-unlink><span class="synComment"># https://gist.github.com/tsub/72e60233ed82a8a453428ea7441e6017#file-main-rb</span>
<span class="synConstant">100</span>.times <span class="synStatement">do</span> |<span class="synIdentifier">i</span>|
  safe_thread(i.to_s) <span class="synStatement">do</span>
    puts <span class="synSpecial">'</span><span class="synConstant">debug</span><span class="synSpecial">'</span> <span class="synComment"># To unlock Ruby's GVL</span>
    <span class="synType">Document</span>.where(<span class="synConstant">identifier</span>: <span class="synSpecial">'</span><span class="synConstant">hoge</span><span class="synSpecial">'</span>).first
  <span class="synStatement">end</span>
<span class="synStatement">end</span>
</pre>


<p>この <code>puts</code> が重要で、Ruby は GVL (Giant VM Lock) という仕組みを使って、実行されるネイティブスレッドが 1 つになるように排他制御をしています。</p>

<p>ただし、IO 関連のメソッドを実行する際は GVL が一時的に解放されてスレッドが同時に実行されます。</p>

<blockquote><p>ネイティブスレッドを用いて実装されていますが、 現在の実装では Ruby VM は Giant VM lock (GVL) を有しており、同時に実行される ネイティブスレッドは常にひとつです。 ただし、IO 関連のブロックする可能性があるシステムコールを行う場合には GVL を解放します。その場合にはスレッドは同時に実行され得ます。 また拡張ライブラリから GVL を操作できるので、複数のスレッドを 同時に実行するような拡張ライブラリは作成可能です。</p>

<p><iframe src="https://hatenablog-parts.com/embed?url=https%3A%2F%2Fdocs.ruby-lang.org%2Fja%2Flatest%2Fdoc%2Fspec%3D2fthread.html" title="スレッド (Ruby 2.6.0)" class="embed-card embed-webcard" scrolling="no" frameborder="0" style="display: block; width: 100%; height: 155px; max-width: 500px; margin: 10px 0px;"></iframe><cite class="hatena-citation"><a href="https://docs.ruby-lang.org/ja/latest/doc/spec=2fthread.html">docs.ruby-lang.org</a></cite></p></blockquote>

<p>つまりスレッドセーフではない実装があった場合に、それを再現させるためには単純にスレッドセーフではないコードを書くだけではダメで、IO 関連のメソッドを実行して GVL を解放しないといけません。</p>

<p>少し古い記事ではありますが、こちらが参考になりました。</p>

<p><iframe src="https://hatenablog-parts.com/embed?url=http%3A%2F%2Fmoyomot.hatenablog.com%2Fentry%2F2014%2F05%2F04%2F232538" title="Rubyでスレッドセーフでないことを簡単に確認したい - もょもとの技術ノート" class="embed-card embed-blogcard" scrolling="no" frameborder="0" style="display: block; width: 100%; height: 190px; max-width: 500px; margin: 10px 0px;"></iframe><cite class="hatena-citation"><a href="http://moyomot.hatenablog.com/entry/2014/05/04/232538">moyomot.hatenablog.com</a></cite></p>

<p>実際の本番環境ではログ出力などにより、IO 関連のメソッドは普通に実行されていることが多いかと思いますので、エラーが起きるのも納得です。</p>
]]></description>
            <enclosure url="https://cdn-ak.f.st-hatena.com/images/fotolife/t/tsub511/20190809/20190809182531.png" length="0" type="image/png"/>
        </item>
        <item>
            <title><![CDATA[『カード決済業務のすべて』を読んだ]]></title>
            <link>https://masutaka.net/2019-08-13-2/</link>
            <guid>https://masutaka.net/2019-08-13-2/</guid>
            <pubDate>Tue, 13 Aug 2019 01:00:00 GMT</pubDate>
            <description><![CDATA[業務でクレジットカード機能を実装した職場の同僚氏曰く、（確か）「始めはピンと来なかったけど、あとで必要なことが全部書いてあると気づいた」とのこと。私は実装には関わってないけど、目線を合わせるために読んだ。
全部を理解しようとせず、概要だけ理解するつもりで読んだ。幸いにもコンパクトに 157 ページにまとまっていたので、気合を入れたら一日で読めた。もちろんピンと来てなくて、1/3 も怪しいかなといったところ。
オーソリゼーション（オーソリ）の実装は必須でそれが通ったら、クリアリング（売り上げ処理）が行われ、最後にセツルメントで加盟店に利用代金が支払われる。
とか、そんな程度。
第1章「決済カード業務の概要と実務」でいきなりつまづいた。
全体的に説明が分かりづらい。対象が初心者向けなのに具体例が少なく、想像しづらいためだと思う。一方で途中のコラムは具体例多めで、理解しやすかった。
第2章「カード決済ネットワークの概要と実務」は、ビザやマスターカードなどの国際ブランドの話から始まり、割と理解しやすかった。特に P104 の図は具体的でとても良かった。こうやって各所収入を得ているのね。
P85 のアクセプタンスの話は少し気になった。
 　アクセプタンスとは「特定のブランドを付したカードの平等な受け入れ」を表し、加盟店は、ビザブランドカードであればビザのロゴマークを付したカードのすべてを、その利用者がカード発行者と契約した決済方式ークレジット、デビット、プリペイドなどーにかかわらずまったく平等に取り扱わなければならない。いいかえれば、クレジットカードは受け入れるが、デビットカードは受け入れないということは許されない（ただし、オンラインオーソリ専用デビットカードのように、その仕組の制約から一部の加盟店でしか利用できない決済カードはある）。
 実際は出来ていないケースも多いと書いてあった気がする。個人で愛用している、プリペイドカードである Kyash は Web 上の決済に使えないことは多いけど、それぞれのサービスがこのアクセプタンスに違反しているってことかな？
第3章「金融決済用ICカード」はページ数が少なく助かった。とは言え、IC カードの概要や EMV、少額決済スキームが説明されている。読み飛ばさないほうが良いと思う。
2012 年の本なので、ここ一年で広まった QR コード決済や、各国の決済事情なども盛り込んだ改訂版の登場が待たれるところ。
アクワイアラとイシュアが理解しづらかったので、最後に簡単にまとめておく。
アクワイアラはクレジットカードの加盟店の獲得と管理をしており、イシュアがクレジットカードを発行する。歴史的経緯により、日本では同じ会社が兼任することが多いそう（だから分かりづらい）。海外では原則として銀行がアクワイアラとのこと。
＜セゾン・アメリカン・エキスプレス・カードの例＞
アクワイアラ：ユーシーカード株式会社（クレディ・セゾンの子会社）
イシュア：株式会社クレディ・セゾン
国際ブランド：AMEX]]></description>
        </item>
        <item>
            <title><![CDATA[『実行力 結果を出す「仕組み」の作りかた』を読んだ]]></title>
            <link>https://masutaka.net/2019-08-13-1/</link>
            <guid>https://masutaka.net/2019-08-13-1/</guid>
            <pubDate>Tue, 13 Aug 2019 00:00:00 GMT</pubDate>
            <description><![CDATA[職場の同僚氏がオススメしていたので、少し前に読んだ。
私は小さなグループでリーダーシップを発揮した経験はあるが、さすがに何万人もの組織での経験はないため、なかなか興味深かった。反対陣営の筆頭を側近にして、エッジの効いた政策をより良いものに落とし込むエピソードは、なかなか出来るものではない。そもそも会社だとそこまで敵対関係になることはあり得ないし。
他に、比較優位の思考は即仕事で使えるというか、会社でしれっと紹介した。
例えばなにか承認を得ようとする場合、当事者はいかにその案が良いかを説いたり、もしくは案を出すだけで判断を丸投げしたりする。承認者からするとなんとか協力はしたいものの、材料が少なくすぐに判断できない。そもそも他にいくつも承認を求められている。結果として承認が進まないことになりがち。
例えばA案とB案を持っていき、それぞれこのような比較優位性がある、私はこのような理由でこちらを推したいなどと伝えれば、スムーズに行く確率が上がるという話。
本の中では最善と考える案、その対極の案、中間のマイルドな案の3つを出して欲しいとあった。これは組織で働く上で非常に重要な考え方で、仕事が出来る/出来ないにも関わってくる。想像力が非常に重要。最初は難しいが、経験を重ねるとだんだん身に付くと思う。
他にも、先の先まで想像しながら、先手、先手を打っていかなければならないという下りは、ソフトウェア開発における新規機能のリリースや、サーバーの深夜作業などにも当てはまる。
以前の私は、出来ることを全部やってから深夜作業に望むという考えが足りなかった。いろいろ痛い目に合ったおかげで、今は「出来ることは全部やってそれでもダメだったら、仕方がない（今のスキルの上限）。」という考えに変わった。
橋本さんは好き嫌いが分かれやすい人だと思う。彼に限らずそのパーソナリティが好きでなかったとしても、その考え方は別にするべきで、有用であれば参考にすると良いと思う。]]></description>
        </item>
        <item>
            <title><![CDATA[Heroku Logging Add-on Papertrail と LogDNA の比較]]></title>
            <link>https://masutaka.net/2019-08-05-1/</link>
            <guid>https://masutaka.net/2019-08-05-1/</guid>
            <pubDate>Mon, 05 Aug 2019 00:00:00 GMT</pubDate>
            <description><![CDATA[追記(2019-02-27):
⚠️ 今後 LogDNA を使うことはないと思う。S3 にアーカイブされるログフォーマットが急に変わったり、S3 のアーカイブが遅れたりされなかったりで、問い合わせをすることが多々あり疲れたため。Papertrail に戻った。私の Tweet も参考になるかも？
Papertrail  Free プランでも S3 にアーカイブ可能。しかもアーカイブパスは Athena のパーティション形式 で、アップロードは 1 時間に 1 回という高頻度（※）。
※ 例えばアーカイブ先を s3://example-logs/ にした場合、以下の形式でアップロードされる。
s3://example-logs/dt=2019-08-01/2019-08-01-00.tsv.gz
s3://example-logs/dt=2019-08-01/2019-08-01-01.tsv.gz
s3://example-logs/dt=2019-08-01/&hellip;
s3://example-logs/dt=2019-08-01/2019-08-01-23.tsv.gz
s3://example-logs/dt=2019-08-02/2019-08-02-00.tsv.gz
s3://example-logs/dt=2019-08-02/2019-08-02-01.tsv.gz
s3://example-logs/dt=2019-08-02/&hellip;
s3://example-logs/dt=2019-08-02/2019-08-02-23.tsv.gz
Athena で Table を作るときに PARTITIONED BY ( dt string ) を付与してパーティションを有効にすれば、where dt = &lsquo;2019-08-02&rsquo; などで絞り込みができる。当該パーティション以外はロードされないので、高速かつ料金も抑えられる。
LogDNA  Free プランだと、Add-on を表示しているときしかログを溜めない。Search Retention の Unlimited Live Tail がそれ。正直使い物にならないと思う。一番安い有料プラン $5/mo にすれば、Search Retention が 7 Days になり、使い物になる。
Free プランだと S3 へのアーカイブは出来ない。有料プランにしても S3 のアーカイブは Athena のパーティション形式ではないし、頻度も 1 日 1 回。]]></description>
        </item>
        <item>
            <title><![CDATA[Heroku Meetup #25 "Heroku Ghost" で 2 回話してきた #herokujp]]></title>
            <link>https://developer.feedforce.jp/entry/2019/07/29/140000</link>
            <guid>https://developer.feedforce.jp/entry/2019/07/29/140000</guid>
            <pubDate>Mon, 29 Jul 2019 05:00:00 GMT</pubDate>
            <description><![CDATA[<p>こんにちは <a href="http://blog.hatena.ne.jp/masutaka26/" class="hatena-id-icon"><img src="https://cdn.profile-image.st-hatena.com/users/masutaka26/profile.png" width="16" height="16" alt="" class="hatena-id-icon">id:masutaka26</a> です。</p>

<p>先週金曜日（2019/7/26）に開催された <a href="https://herokujp.doorkeeper.jp/events/93092">Heroku Meetup #25 "Heroku Ghost"</a> で『デプロイ元をCircleCIからHerokuに乗り換えた』というお題で発表してきました。</p>

<iframe src="https://docs.google.com/presentation/d/e/2PACX-1vRy7z2A77VE4UNCp7EhpFgeQr7fl8XqHolYwsaokN76rGCvoeo1SKh1hkNg3ew2D4pSLoQAz-iefLnR/embed?start=false&loop=false&delayms=3000" frameborder="0" width="960" height="400" allowfullscreen="true" mozallowfullscreen="true" webkitallowfullscreen="true"></iframe>


<p>つい先日、現在関わっている <a href="https://app.ecbooster.jp/">EC Booster</a> のデプロイフローを改善し、それなりに知見を得られたためです。</p>

<p>Heroku Meetup の参加は<a href="https://herokujp.doorkeeper.jp/events/91348">前回 #24</a> に引き続き、セッションでの発表は<a href="https://herokujp.doorkeeper.jp/events/82754">前々回 #23</a> 以来です。</p>

<p>前々回 #23 については自分のブログにも書きました。</p>

<p><a href="https://masutaka.net/chalow/2018-11-28-1.html">Heroku Meetup #23 "Heroku Dynamite!!" で話してきた #herokujp / マスタカの ChangeLog メモ</a></p>

<h2>LT でも話した</h2>

<p>LT でも飛び込みで話しました。内容は <a href="https://github.com/heroku/heroku-buildpack-google-chrome">heroku-buildpack-google-chrome</a> と <a href="https://github.com/heroku/heroku-buildpack-chromedriver">heroku-buildpack-chromedriver</a> の細かすぎる話です。動かない Chrome や chromedriver のバイナリが本番環境にデプロイされることを防ぐ方法や、それに関して PR を出した話など。スライドの 41~43 ページ目が相当します。</p>

<p>無駄に元気な 1 日でした。</p>

<p><blockquote class="twitter-tweet" data-lang="ja"><p lang="ja" dir="ltr">今日は会社で LT 1 本やって、Heroku meetup で通常セッション 1 本、その後に飛び込み（？）で LT 1 本やった。さすがにもうこの数をやることないかな？ <a href="https://twitter.com/hashtag/herokujp?src=hash&amp;ref_src=twsrc%5Etfw">#herokujp</a></p>&mdash; Takashi MASUDA (@masutaka) <a href="https://twitter.com/masutaka/status/1154719579374936065?ref_src=twsrc%5Etfw">2019年7月26日</a></blockquote><script async src="https://platform.twitter.com/widgets.js" charset="utf-8"></script></p>

<p>※ 44~45 ページ目は、尺の関係で削ったブランチ戦略のメモです。ベストな戦略ではないので改善予定。</p>

<h2>雑感</h2>

<p>初心者向けの知見に比べて、一歩進んだ Heroku 知見はあまり Web 上に存在しない印象です。</p>

<p>ここ 1 年近く、それなりに Heroku を学習してきて「かなりの規模まで Heroku で十分では？」「デプロイや Dyno の再起動で中断されるため苦手とされがちなバッチ処理も、簡単に克服できるのでは？」などと、考えが変わってきています。</p>

<p>これからもブログや登壇などで、コミュニティに還元していきます。</p>

<p><blockquote class="twitter-tweet" data-lang="ja"><p lang="ja" dir="ltr">本日の頂き物。キャップはスピーカー特典 <a href="https://twitter.com/hashtag/herokujp?src=hash&amp;ref_src=twsrc%5Etfw">#herokujp</a> <a href="https://t.co/Whc3UVJrbg">pic.twitter.com/Whc3UVJrbg</a></p>&mdash; Takashi MASUDA (@masutaka) <a href="https://twitter.com/masutaka/status/1154746086814150658?ref_src=twsrc%5Etfw">2019年7月26日</a></blockquote><script async src="https://platform.twitter.com/widgets.js" charset="utf-8"></script></p>
]]></description>
            <enclosure url="https://cdn-ak.f.st-hatena.com/images/fotolife/m/masutaka26/20181113/20181113190345.png" length="0" type="image/png"/>
        </item>
        <item>
            <title><![CDATA[ジム通いと食生活改善が 13 ヶ月目に突入した]]></title>
            <link>https://masutaka.net/2019-07-16-1/</link>
            <guid>https://masutaka.net/2019-07-16-1/</guid>
            <pubDate>Tue, 16 Jul 2019 00:00:00 GMT</pubDate>
            <description><![CDATA[[2018-06-30-1] から行き始めた『エニタイムフィットネス新三河島店 』も今月で早 13 ヶ月目。[2018-12-07-1] の中間報告に引き続き、振り返り記事を書くことにしました。
データは後述するとして、今は週 2~3 回で通い続けています。たまに週 1 回になることもありますが、仕方がない。
冬と違って今は非常に通いやすいです。寒くなくて会社を出るのが遅くならなければ、通い続けるのはそれほど難しくないことが分かりました。
筋トレの内容 半年前と違って、今は一人でも BIG3 が出来るようになりました。スミスマシンじゃなくて、フリーウェイトのほうです。日毎に「ベンチプレス → スクワット → ベンチプレス → デッドリフト」などと上半身と下半身を交互でやっています。
まだまだ素人なので、ベンチプレスは 42.5kg、スクワットは 50kg、デッドリフトは 52.5kg 程度です。自重である 60kg くらいまでは頑張ります。
上半身の日はアブローラーを 20 回 x 3 セット、余裕があればクランチとニートゥチェスト 20 回もセットに加えます。
下半身の日は相変わらずブルガリアンスクワットを 左右 20 回 x 3 セットをやってます。最近は軽めのダンベルを持ちます。パーソナルトレーニングの日は、ケトルベルを持ったフォワードランジなどもやります。
日常生活での上り階段一段抜かしも継続しています。以前よりバランスが良くなり、体が軽くなった気がします。日によって体が重いとか分かるので、体調を図るのにも良い感じです。筋肉痛の日はキツイ・・・！
パーソナルトレーニングは週 1 回で継続しています。筋トレや食事のアドバイスももらっています。
食生活 1 年前と比べると、栄養成分量を意識するようになりました。
炭水化物は一日 100g、ジムに行く日は 200g 目標。だいぶキツイというか、達成できる日が少ない気が。
タンパク質は一日 120g 目標。これはサプリで補えるので割と簡単。
脂肪はあまり意識していませんが、揚げ物は出来るだけ避けてます。
ビタミンとミネラルはサプリで調整してます。
食事はこんな感じ。
＜以前＞
朝: コーヒーのみか、コンビニのサンドイッチ
昼: コンビニ弁当
夜: 近所の定食屋やラーメンなど。あと週 2~3 でビールとか割と量を飲んでた]]></description>
        </item>
        <item>
            <title><![CDATA[esa をネタに Emacs Lisp と Elm を無理やり繋げた発表をした]]></title>
            <link>https://developer.feedforce.jp/entry/2019/07/01/140000</link>
            <guid>https://developer.feedforce.jp/entry/2019/07/01/140000</guid>
            <pubDate>Mon, 01 Jul 2019 05:00:00 GMT</pubDate>
            <description><![CDATA[<p>こんにちは。増田（<a href="http://blog.hatena.ne.jp/masutaka26/" class="hatena-id-icon"><img src="https://cdn.profile-image.st-hatena.com/users/masutaka26/profile.png" width="16" height="16" alt="" class="hatena-id-icon">id:masutaka26</a>）です。今回はネタ探しに特に苦労しました。</p>

<p>週次の社内勉強会 <a href="https://developer.feedforce.jp/archive/category/FFTT">FFTT</a> で『esaを支えたい技術』という発表をしました。</p>

<p><a href="https://esa.io/">esa</a> をネタに Emacs Lisp と <a href="https://elm-lang.org/">Elm</a> を無理やり繋げた内容です。ちょっと強引だった。</p>

<h2>発表の内容</h2>

<script async class="speakerdeck-embed" data-id="61df048e1aec4413bd797af156bc5f21" data-ratio="1.33333333333333" src="//speakerdeck.com/assets/embed.js"></script>


<p>流れとしては、↓ こんな感じです。</p>

<ul>
<li>先月 <a href="https://github.com/masutaka/emacs-helm-esa">emacs-helm-esa</a> というツールを作ったよ</li>
<li>Elm を学んだら、Emacs Lisp と Syntax が似ていたよ</li>
<li><a href="https://github.com/masutaka/sandbox-elm-esa">esa の検索をするだけの簡単なツール</a>を作ったよ</li>
</ul>


<h2>発表の感想</h2>

<p>付箋紙に感想を書いてくれました。<i class="blogicon-comment" aria-hidden="true"></i> は私からのコメントです。</p>

<ul>
<li>関数型言語について学んでみたいと思っていたので、おすすめの順序を提示してくださり、参考になりました！

<ul>
<li><i class="blogicon-comment" aria-hidden="true"></i> 良かったです。Elm はだいぶ学びやすかったです</li>
</ul>
</li>
<li>Elm、こうして見てみると Haskell にめっちゃ似てますね！

<ul>
<li><i class="blogicon-comment" aria-hidden="true"></i> そうなんですね</li>
</ul>
</li>
<li>発表の流れで Elm の話になると思わなかった

<ul>
<li><i class="blogicon-comment" aria-hidden="true"></i> 強引でしたね (^^;</li>
</ul>
</li>
<li>Elm ならふだんバックエンドのコード書いている人でもモダンなフロントエンド書けるって聞いたので勉強がんばる（決意）

<ul>
<li><i class="blogicon-comment" aria-hidden="true"></i> 刺激になってよかったです</li>
</ul>
</li>
<li>良かったです！規模が大きくなってきても同じノリで書けるのも Elm は良い

<ul>
<li><i class="blogicon-comment" aria-hidden="true"></i> そういう感じなんですね。コンパイルが通ればだいたい動くのが楽でした</li>
</ul>
</li>
<li>Elm の HTML を作るのがすごいですね！

<ul>
<li><i class="blogicon-comment" aria-hidden="true"></i> ですよね。<a href="https://github.com/masutaka/sandbox-elm-esa/blob/b46bb8d405030a96ab3049a8aac1450decf0adf9/src/Main.elm#L93">この辺りの div や i</a> は全部関数ですからね</li>
</ul>
</li>
<li>ネタバレに慎重になりすぎでは！？

<ul>
<li><i class="blogicon-comment" aria-hidden="true"></i> 自分でも全く理解できません</li>
</ul>
</li>
<li>来週にはこれが Chrome 拡張になっているんですかね？

<ul>
<li><i class="blogicon-comment" aria-hidden="true"></i> はい、次回以降の当番の方が必ず・・・！</li>
</ul>
</li>
<li>Elm おもしろそう 🏃‍♀️🚶‍♂️ emacs ってすごいんですね

<ul>
<li><i class="blogicon-comment" aria-hidden="true"></i> とは言え、今の時代は emacs の他に優先順位の高いものがたくさんありますね 💦</li>
</ul>
</li>
<li>まさかの Elm とは！？

<ul>
<li><i class="blogicon-comment" aria-hidden="true"></i> 考えに考えた末の Elm です...</li>
</ul>
</li>
<li>これで EC Booster Front 開発できますね

<ul>
<li><i class="blogicon-comment" aria-hidden="true"></i> 見ててくださいよ！これからのマスタカを！！１</li>
</ul>
</li>
</ul>


<h2>所感</h2>

<p>正直、外したかな？と思いながら発表してましたが、感想を読むと良い刺激を与えられたようで良かったです。</p>

<p>一方で新しい言語の説明は難しいうえ、皆さんに馴染みがない Emacs Lisp との比較をしたので、余計に分かりづらかったという...。</p>

<p>こうするとあまり盛り上がらないという学びを得たことと、個人的には大変満足のいく内容だったので、結果的には良かったです。</p>

<p>さて、次回の勉強会のネタはどうするかな...。</p>

<p><div class="hatena-asin-detail"><a href="https://www.amazon.co.jp/exec/obidos/ASIN/4863542224/hatena-blog-22/"><img src="https://m.media-amazon.com/images/I/51G32HC7rSL.jpg" class="hatena-asin-detail-image" alt="基礎からわかる Elm" title="基礎からわかる Elm"></a><div class="hatena-asin-detail-info"><p class="hatena-asin-detail-title"><a href="https://www.amazon.co.jp/exec/obidos/ASIN/4863542224/hatena-blog-22/">基礎からわかる Elm</a></p><ul><li><span class="hatena-asin-detail-label">作者:</span><a href="http://d.hatena.ne.jp/keyword/%C4%BB%B5%EF%20%CD%DB%B2%F0" class="keyword">鳥居 陽介</a></li><li><span class="hatena-asin-detail-label">発売日:</span> 2019/02/27</li><li><span class="hatena-asin-detail-label">メディア:</span> 単行本（ソフトカバー）</li></ul></div><div class="hatena-asin-detail-foot"></div></div></p>
]]></description>
            <enclosure url="https://images-fe.ssl-images-amazon.com/images/I/51G32HC7rSL._SL160_.jpg" length="0" type="image/jpg"/>
        </item>
        <item>
            <title><![CDATA[esa の記事を Emacs から素早く開ける helm-esa.el を作った]]></title>
            <link>https://masutaka.net/2019-06-10-1/</link>
            <guid>https://masutaka.net/2019-06-10-1/</guid>
            <pubDate>Mon, 10 Jun 2019 00:00:00 GMT</pubDate>
            <description><![CDATA[会社で使っている Qiita:Team が esa に移行されることになったので、早速作ってみました。
  こんな感じに esa の記事を Helm Interface 上で絞り込んで、ブラウザで開くことが出来ます。
デフォルトでは絞り込み対象は &ldquo;watched:true kind:stock&rdquo; で検索された記事です。よく参照または編集するであろう記事を、Web ブラウザで素早く開く使い方を想定しています。
MELPAにも取り込まれた ので、M-x package-install helm-esa でインストールできます。
作りながら考えたこと 今回の helm-esa.el は helm-qiita.el [2016-05-06-1] の後継ツールのような気持ちで作り始めました。
最初、Qiita:Team の Stock は、esa だと Watch なのかなーくらいの考えで作っていましたが、やがてそうではないと気づきました。正確な意味で同じものはないと思います。
逆に esa の Watch は、Qiita:Team だと「通知を購読する」の記事全てです（Qiita API では取得できません）。
うーん、どうやって実装しよう？
考えていく中で、Qiita:Team は各個人で記事を Stock する作りであり、esa はみんなで Stock し、文書をみんなで育てていく設計思想だと改めて気づきました。
とは言え、何も考えずに全ての Stock 属性の記事を絞り込み対象とすると、対象記事が無駄に多くなります。
そのため、デフォルトでは汎用性のありそうな &ldquo;watched:true kind:stock&rdquo; を検索クエリとしつつ、&ldquo;watched:true -in:日報&rdquo; のように好みのクエリも設定できるようにしました。API 制限に達する可能性はありますが、&quot;&quot; を設定すれば全記事を対象とすることも出来ます。
工夫したのはこれだけなんですが、helm-qiita.el と比べてずいぶん柔軟なツールになりました。
ひとえに esa の設計の柔軟さによるものです。
設定方法 README.]]></description>
        </item>
        <item>
            <title><![CDATA[CaSy のエアコンクリーニングサービスを使った]]></title>
            <link>https://masutaka.net/2019-06-03-1/</link>
            <guid>https://masutaka.net/2019-06-03-1/</guid>
            <pubDate>Mon, 03 Jun 2019 00:00:00 GMT</pubDate>
            <description><![CDATA[[2015-12-27-1] に書いてからずっと、4 週間に 1 回、CaSy の人に掃除に来てもらっています。
ここ 2 年はずっと同じ人に来てもらっているので、割と安心してお任せしています。
頻度は 4 週間に 1 回、時間は 2 時間で、月々このお値段。
￥5,646（掃除代行）+ ￥1,058（鍵預け代）- ￥1,000（クーポン）= ￥5,704
※ クーポンは前述の記事のおかげか、あと 90 枚もあります。
うちは 1K 8 畳 (26m) とさほど広くもないので、だいたい全部掃除してくれます。ガスレンジや水回りが、月に一度リセットされるのはとっても楽です。
ただ、さすがにエアコンまでは掃除してくれません。
入居して 2 年半経ち、エアコンがカビカビになってしまったので、同じく CaSy のハウスクリーニングをお願いしました。
CaSy（カジー）ハウスクリーニング【CaSy（カジー）】家事代行サービス なぜ CaSy にしたのか 初めは安い業者を頼もうとしましたが、↓ こんな理由で今回は CaSy にしました。
・そのためだけに個人情報を渡すのが急に嫌になった
・2,000 円程度安くなることを追求しても意味がないと思った
・CaSy の別なサービスも体験したくなった
クリーニングの結果 作業に来ていただいた方はとても丁寧で、カビカビだったエアコンが新品みたいにピカピカになりました。（クリーニング前の写真は撮り忘れたのと、あっても出しちゃいけないやつです。）
時間は全部で 40 分ほど。思ったより早かったです。
お値段は税込みで 12,960 円。エアコンは自動掃除タイプでない普通のやつです。
エアコンのカビは冷房による結露が原因になるそうです。暖房では結露しないのでカビないらしいです。
※ そういえば以前こんなメモ [2008-08-19-1] を書いたのだった。
夏が終わったら、クリーニングの良いタイミング。そうすれば、冬を越して次の夏になってもカビは生えていない理屈。
冷房の後に 10~15 分ほどの暖房か、内部クリーン（うちのエアコンにはあった）をして、結露を除去すると予防になるそうです。真夏にそこまでするかは悩ましい&hellip;。
UX (User Experience) 正直に書くと最低でした。正直ですまぬ。]]></description>
        </item>
        <item>
            <title><![CDATA[『アフターデジタル』を読んだ]]></title>
            <link>https://masutaka.net/2019-05-28-1/</link>
            <guid>https://masutaka.net/2019-05-28-1/</guid>
            <pubDate>Tue, 28 May 2019 00:00:00 GMT</pubDate>
            <description><![CDATA[会社で話題になっていたので読みました。
自分の知識は 2019/2/12 のクローズアップ現代 を見て、中国には信用スコアというものがあると知っている程度。
中国（というかアリババ）の「信用スコア」はここ数年で急激に浸透したそうですが、それから中国人のマナーが格段に上がったそうです。元々文化大革命で儒教的な文化や考え方が一度リセットされていたとのこと。
（発展途上国では光ファイバーの整備は遅れたが、それを飛び越えて日本より Wifi が発達した話を思い出しました。）
一方の日本は誰かの目があれば、マナーは良い印象です。ある意味中途半端にマナーが良いので、中国のように浸透する確率は低い気がしました。
信用スコアを使うことで、企業は取引コストや与信の確認に伴うチェックや人件費を減らすことが出来ているそうです。個人でも家を借りるとき等の無駄な確認が要らなくなります。
個人の信用は場面場面で引き継がれないと感じているので、自分は悪い印象はあまり受けませんでした。
平安保険グループの事例は、自分にとっても興味深かったです。
私は以前から売上目標を KPI に掲げるやり方には懐疑的で、プロダクトを良くするための行動を指標にした方が良いと思っていました。それは半分は当たっていたわけですが、答えはこの本の中に書いてありました。
やはり、いかに顧客に寄り添っていられるかが鍵です。SaaS のようなサブスクリプションモデルであっても、売上を第一にしていたのでは、ツール販売とあまり変わらず競合に顧客を奪われやすい気はしました。
ちょっと前に『Netflix「ライバルはフォートナイト。すでに負けている」と発言。TV画面の奪い合い激化 』が話題になりましたが、根底は同じだと思います。
自分の中でいろいろ繋がった本でした。
一方で、日本全体が取り残されずに済むことはもう無理だと感じた一冊でもありました。
それぞれの企業や個人がそうならないように対策するしかないと思いますが、日本は電子マネーに代表されるように変なところで多様性があるので、日本全体が「ビフォーデジタル」から脱するのは長い時間を要すると思います。]]></description>
        </item>
        <item>
            <title><![CDATA[ベジエ曲線のなめらかさについて社内勉強会で語った]]></title>
            <link>https://shiromoji.hatenablog.jp/entry/2019/05/18/005232</link>
            <guid>https://shiromoji.hatenablog.jp/entry/2019/05/18/005232</guid>
            <pubDate>Fri, 17 May 2019 15:52:32 GMT</pubDate>
            <description><![CDATA[<p>いまの勤務先にはエンジニア・デザイナーが持ち回りで発表する<a href="https://developer.feedforce.jp/archive/category/FFTT">社内勉強会（FFTT）</a>があるんですが、今週がわたしの当番だったので、<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%D9%A5%B8%A5%A8%B6%CA%C0%FE">ベジエ曲線</a>のなめらかさの話をしました。</p>

<p><iframe id="talk_frame_517211" src="//speakerdeck.com/player/23ed0505118c483f9aa8a343eacc648c" width="710" height="532" style="border:0; padding:0; margin:0; background:transparent;" frameborder="0" allowtransparency="true" allowfullscreen="allowfullscreen" mozallowfullscreen="true" webkitallowfullscreen="true"></iframe><cite class="hatena-citation"><a href="https://speakerdeck.com/mashabow/bezier-smoothness">speakerdeck.com</a></cite></p>

<ul>
<li>デモページ：<a href="https://mashabow.github.io/bezier-smoothness/">https://mashabow.github.io/bezier-smoothness/</a></li>
<li><a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%EA%A5%DD%A5%B8%A5%C8%A5%EA">リポジトリ</a>：<a href="https://github.com/mashabow/bezier-smoothness">https://github.com/mashabow/bezier-smoothness</a></li>
</ul>


<p>デモとスライドを行き来しつつ、30分ほどの発表でした。</p>

<h3>内容の補足</h3>

<h4>p. 10: <i>G</i><sup>1</sup> 連続（接線連続）</h4>

<p><a class="keyword" href="http://d.hatena.ne.jp/keyword/Illustrator">Illustrator</a> などには「スムーズポイント」という種類のアンカーポイント（始点・終点）がありますが、これは両方のハンドルが常に一直線になって動くので、<i>G</i><sup>1</sup> 連続ということですね。</p>

<h4>p. 14: 急カーブ注意の標識と曲率半径</h4>

<p><a href="https://www.google.com/search?tbm=isch&amp;q=%E9%81%93%E8%B7%AF%E6%A8%99%E8%AD%98+R+%E3%82%AB%E3%83%BC%E3%83%96">「道路標識 R カーブ」あたりで画像検索する</a>とわかりやすいかと思います。「R = 500 m」のように書いてあったりします。</p>

<h4>p. 18: フォントエディタに搭載された曲率の櫛（curvature comb）</h4>

<p>2017 年にリリースされた FontLab VI には標準搭載されています。<i>G</i><sup>2</sup> 連続になるように、うまいこと自動調整してくれる機能もついています。</p>

<iframe width="560" height="315" src="https://www.youtube.com/embed/Cj8GQiDnyq8" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>


<p>Glyphs や RoboFont では <a href="https://yanone.de/software/speedpunk/">Speed Punk</a> という<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%D7%A5%E9%A5%B0%A5%A4%A5%F3">プラグイン</a>が有名ですね。もともと、こちらの方が早くから開発されています。</p>

<iframe src="https://player.vimeo.com/video/38586215" width="640" height="480" frameborder="0" allow="autoplay; fullscreen" allowfullscreen></iframe>


<h4>デモの [<i>G</i><sup>0</sup> 連続], [<i>G</i><sup>1</sup> 連続], [<i>G</i><sup>2</sup> 連続] ボタン</h4>

<p>片方の<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%D9%A5%B8%A5%A8%B6%CA%C0%FE">ベジエ曲線</a>を調整して <i>G</i><sup>0</sup>, <i>G</i><sup>1</sup>, <i>G</i><sup>2</sup> 連続にする機能で、<a href="https://github.com/mashabow/bezier-smoothness/blob/f60c28887f7d55713166c93b60c3d038044ba242/src/calc.ts#L88-L177">calc.ts</a> に実装があります。安直でナイーブな実装になっているので、<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%D9%A5%B8%A5%A8%B6%CA%C0%FE">ベジエ曲線</a>の形や配置によっては、思わぬ結果になります。コーナーケースも考慮していません。</p>

<p>実際のデザイン支援に使うためには、ユーザーの意図に寄り添った「もっと頭のいい調整方法」が必要になります。</p>

<h4><i>G</i><sup>0</sup>, <i>G</i><sup>1</sup>, <i>G</i><sup>2</sup>, … 連続</h4>

<p>英語では geometic continuity といい、その頭文字をとって <i>G</i><sup><i>n</i></sup> と呼ぶようです。</p>

<p><a href="https://en.wikipedia.org/wiki/Smoothness#Geometric_continuity">Smoothness: Geometric continuity - Wikipedia</a></p>

<p>一般の <i>n</i> について、ちゃんとした定義をあまり把握していなかったのですが、弧長パラメータで <i>n</i> 回連続<a class="keyword" href="http://d.hatena.ne.jp/keyword/%C8%F9%CA%AC">微分</a>可能であれば <i>G</i><sup><i>n</i></sup> 連続、という理解でいいんでしょうか。</p>

<p>ちなみに、日本語のブログ記事などでは「ある程度の誤差を許した <i>C</i><sup><i>n</i></sup> 連続のことを <i>G</i><sup><i>n</i></sup> 連続と呼ぶ」という解説が散見されますが、こちらはちょっとあやしそうです。</p>

<h3>雑感</h3>

<p>フォントエンジニアにとっては常識レベルの内容だとはいえ、ブラウザ上ででグラフィカルにぐりぐり動かせるデモを作ってみるとやっぱり楽しいですね。今回の話、社内の業務にはまったく直結しないのですが、みなさんに興味深く聞いてもらえたようです。</p>

<p><a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%D9%A5%B8%A5%A8%B6%CA%C0%FE">ベジエ曲線</a>を自由自在に使いこなしているデザイナーさんからも「なるほど！」「こういうことだったんか」というような反応をいただいて、発表した甲斐がありました 🍮</p>
]]></description>
            <enclosure url="https://cdn-ak.f.st-hatena.com/images/fotolife/m/mashabow/20190518/20190518004536.png" length="0" type="image/png"/>
        </item>
        <item>
            <title><![CDATA[『Pragmatic Terraform on AWS』を読んだ]]></title>
            <link>https://masutaka.net/2019-05-07-1/</link>
            <guid>https://masutaka.net/2019-05-07-1/</guid>
            <pubDate>Tue, 07 May 2019 00:00:00 GMT</pubDate>
            <description><![CDATA[【ダウンロード版】Pragmatic Terraform on AWS - KOS-MOS - BOOTH これも職場の同僚氏がオススメしていた本。
普段から Terraform の設計に課題を感じていたので、ざーっと斜め読みして、第17章からしっかり読んだ。
その中での設計のやり方が
モノリス → モジュールの利用 → 環境（ステージ）の分離 → コンポーネント分離
と段階を踏んでおりとても良いと思った。そう、これなんですよ。最初は main.tf だけで十分。
Terraform の設計はアプリケーション設計とよく似ており、初めから抽象化すると難しくなると思う。
基本は宣言的に書いていき、設定ファイルのような読めるコードにする。３回くらい重複し始めたくらいで、変数やモジュールに落とし込むのが良いはず。
17.4.1 の &ldquo;安定度の高いコンポーネントは、変動を想定したコンポーネントに依存してはいけません&rdquo; もまさにアプリケーション設計あるある。『オブジェクト指向設計実践ガイド 』にも同じことが書いてある。→ [2016-09-22-1] [2017-11-01-1] Terraform の Workspaces をオススメしない点にも同意。状態を気にしながらの terraform apply は怖い。
18.4 のリモートステートは知らなかった。便利そう。現状、ちょっとだけ関連があるリソースを同じコンポーネント（ディレクトリ）に集めている。リモートのバックエンドを使えば疎結合に出来るかも。Data Source でも良いと思うけどね。
Terraform だけでなく、第19章のように AWS のベストプラクティスが書かれている点も良い。S3 の暗号化は確認しようと思った。
 ちなみにダウンロード版には .epub と .pdf しか存在しない。kindlegen 使って .mobi に変換して、Kindle 用のメールアドレスに送った。久々だと忘れちゃうね。
$ brew cask install kindlegen $ kindlegen PragmaticTerraformOnAWS.epub 追記(2019-05-10):
作者様からありがたいお言葉が・・・！
loading...]]></description>
        </item>
        <item>
            <title><![CDATA[『Webフロントエンド ハイパフォーマンス チューニング』を読んだ]]></title>
            <link>https://masutaka.net/2019-04-30-1/</link>
            <guid>https://masutaka.net/2019-04-30-1/</guid>
            <pubDate>Tue, 30 Apr 2019 00:00:00 GMT</pubDate>
            <description><![CDATA[職場の同僚氏から勧められた本。ブラウザのチューニングについて、レンダリングプロセスから説明されている。ブラウザがどう動いているかの解説本としては弱いけど、他に代わりはないそう。
kosamari さんの記事 も紹介してくれたので、あとで読む。
2017 年の本なので、TLS 1.3 は言及しつつも説明してなかったり、Microsoft Edge のレンダリングエンジンがまだ EdgeHTML だったりするけどが、丁寧に書かれており良書だと思った。
私は最初の会社ではレーザープリンタのファームウェア側のレンダラを担当していたので、その知識と照らし合わせながら読んだ（Display List という単語を見た時はニヤリとした）。
なぜ 1 つの Display List でページ全体を表現しないのかと思ったけど、プリンタと違って再レンダリングが発生するからか。なるほど。他にもブラウザはアニメーションとかあって大変ね。
※ プリンタもメモリが足りなくなり Fallback が発生すると、Display List は 1 ページで複数回作るけどね。
Display List の生成コストは低く、レンダリングコストのほうが高いという解説も割とすんなり理解できた。
本では Virtual DOM への言及がなかったので、その点は惜しいと思った。Virtual DOM が更新されると、レンダリングプロセスはどこから始まるのか。
その辺り含めた改訂版が出ると良さそうな気がした。]]></description>
        </item>
        <item>
            <title><![CDATA[Heroku Buildpack はどのようにインストールされるのか？]]></title>
            <link>https://masutaka.net/2019-04-27-1/</link>
            <guid>https://masutaka.net/2019-04-27-1/</guid>
            <pubDate>Sat, 27 Apr 2019 00:00:00 GMT</pubDate>
            <description><![CDATA[先月、固定 IP アドレス機能を提供する QuotaGuard Static Add-on の Buildpack を作りました。
 https://github.com/masutaka/heroku-buildpack-qgsocksify  https://github.com/masutaka/heroku-buildpack-qgtunnel   Buildpack を自作したのは今回が初めてです。
Add-on のドキュメント の通りにインストールすると、バイナリファイルをリポジトリに commit することになります。あまりきれいな方法に思えなかったことが、これらの Buildpack を作った動機です。
Buildpack を作ってみて、それがどのようにインストールされるか興味が湧いたので、詳しく調べてみました。
前準備 今回は Getting Started on Heroku with Node.js のサンプルアプリを使って確認しました。
Heroku App を作成したら、Buildpack に heroku-buildpack-qgsocksify の check ブランチ を指定しつつ、環境変数 HOGE をセットしておきます。
$ git clone https://github.com/heroku/node-js-getting-started.git $ cd node-js-getting-started $ heroku create $ git push heroku master $ heroku buildpacks:add &#39;https://github.com/masutaka/heroku-buildpack-qgsocksify#check&#39; $ heroku config:set HOGE=aaa Buildpack をインストールする 適当な commit をして 2 回目の git push を行うと、heroku-buildpack-qgsocksify のインストールが始まると同時に、check ブランチに仕込んだログがダラダラと出力されました。出力多めです。読み飛ばしても OK です。]]></description>
        </item>
        <item>
            <title><![CDATA[Heroku で Chrome を使ったクローラの IP アドレスを固定する]]></title>
            <link>https://developer.feedforce.jp/entry/2019/04/26/154540</link>
            <guid>https://developer.feedforce.jp/entry/2019/04/26/154540</guid>
            <pubDate>Fri, 26 Apr 2019 06:45:40 GMT</pubDate>
            <description><![CDATA[<p>こんにちは <a href="http://blog.hatena.ne.jp/masutaka26/" class="hatena-id-icon"><img src="https://cdn.profile-image.st-hatena.com/users/masutaka26/profile.png" width="16" height="16" alt="" class="hatena-id-icon">id:masutaka26</a> です。</p>

<p>少し前に、Heroku の worker Dyno 上で動く、Chrome のクローラで IP アドレスを固定化出来ないか調査しました。</p>

<p>実装は見送られましたが、想定よりも難しく調査に時間がかかったので、この記事に残しておきます。</p>

<p>方法だけ知りたい方は、下の方にある「手順」をご覧ください。</p>

<ul class="table-of-contents">
    <li><a href="#Heroku-Add-on-を比較する">Heroku Add-on を比較する</a><ul>
            <li><a href="#開発組織">開発組織</a></li>
            <li><a href="#実装">実装</a></li>
            <li><a href="#プラン">プラン</a></li>
            <li><a href="#CLI-のインストール">CLI のインストール</a></li>
            <li><a href="#Heroku-Buildpack">Heroku Buildpack</a></li>
        </ul>
    </li>
    <li><a href="#コラム-固定-IP-アドレスへの私見">[コラム] 固定 IP アドレスへの私見</a></li>
    <li><a href="#Chrome-のクローラで-IP-アドレスを固定化する">Chrome のクローラで IP アドレスを固定化する</a><ul>
            <li><a href="#試行錯誤の日々">試行錯誤の日々</a></li>
            <li><a href="#ついに成功">ついに成功</a></li>
            <li><a href="#手順">手順</a></li>
        </ul>
    </li>
    <li><a href="#QuotaGuard-Static-の注意事項">QuotaGuard Static の注意事項</a></li>
    <li><a href="#まとめ">まとめ</a></li>
</ul>

<h2 id="Heroku-Add-on-を比較する">Heroku Add-on を比較する</h2>

<p>今回は <a href="https://elements.heroku.com/addons/proximo">Proximo</a> と <a href="https://elements.heroku.com/addons/quotaguardstatic">QuotaGuard Static</a> を検討し、最終的に QuotaGuard Static を採用しました。</p>

<p>💡 他に <a href="https://elements.heroku.com/addons/fixie">Fixie</a>, <a href="https://elements.heroku.com/addons/fixie-socks">Fixie Socks</a>, <a href="https://elements.heroku.com/addons/guru301">Guru301</a> などがあるようです。</p>

<p>以下、その理由です。</p>

<h3 id="開発組織">開発組織</h3>

<p>Proximo は <a href="https://github.com/pirateradio">https://github.com/pirateradio</a> を見た感じ <a href="https://github.com/ddollar">@ddollar</a> の個人開発のようです。この方は <a href="https://github.com/ddollar/foreman">foreman</a> などを作っており、多分すごい人です。</p>

<p>QuotaGuard Static は <a href="https://www.quotaguard.com/">https://www.quotaguard.com/</a> によると <a href="https://www.alpineshark.com/">Alpine Shark, LLC</a> のようです。会社のほうがちょっとだけ安心できます。</p>

<h3 id="実装">実装</h3>

<p>Proximo は 1 つのようですが、QuotaGuard Static は 2 つの Proxy サーバで冗長化されているようです。Proxy サーバが落ちる確率は低いかもしれませんが、冗長化されているに越したことはありません。</p>

<p>🔗 <a href="https://devcenter.heroku.com/articles/proximo#provisioning-the-proximo-add-on">https://devcenter.heroku.com/articles/proximo#provisioning-the-proximo-add-on</a></p>

<pre class="code" data-lang="" data-unlink>$ heroku addons:create proximo:development
Adding proximo to sharp-mountain-4005... done, v18 ($5/mo)
Your static IP address is 10.9.8.7</pre>


<p>🔗 <a href="https://devcenter.heroku.com/articles/quotaguardstatic#provisioning-the-add-on">https://devcenter.heroku.com/articles/quotaguardstatic#provisioning-the-add-on</a></p>

<pre class="code" data-lang="" data-unlink>$ heroku addons:create quotaguardstatic:starter
-----&gt; Adding quotaguardstatic:starter to sharp-mountain-4005... done, v18 (free)
-----&gt; Your static IPs are [10.11.12.13, 14.15.16.17]</pre>


<h3 id="プラン">プラン</h3>

<p>QuotaGuard Static は無料プランがあるので始めやすいです。Proximo のプランは <code>$5/mo</code> からです。</p>

<p>ちなみにどちらも <code>PROXIMO_MASK</code> や <code>QUOTAGUARDSTATIC_MASK</code> という環境変数を設定すると、一部のレンジの送信だけこれらのサービス経由にすることができ、料金を節約できます。</p>

<p>💡 正確に書くと <code>QUOTAGUARDSTATIC_MASK</code> は後述する qgsocksify 用の環境変数です。</p>

<h3 id="CLI-のインストール">CLI のインストール</h3>

<p>どちらも CLI が提供されており、必要に応じてインストールします。</p>

<p>Proximo はインストール元が http なのがイマイチでした。https に変えてもアクセス不可です。</p>

<pre class="code" data-lang="" data-unlink>$ curl http://downloads.proximo.io/proximo-stacklet.tgz | tar xz</pre>


<p>QuotaGuard Static は普通に https でインストール出来ます。</p>

<pre class="code" data-lang="" data-unlink>$ curl https://s3.amazonaws.com/quotaguard/qgtunnel-latest.tar.gz | tar xz
$ curl https://s3.amazonaws.com/quotaguard/quotaguard-socksify-latest.tar.gz | tar xz</pre>


<h3 id="Heroku-Buildpack">Heroku Buildpack</h3>

<p>今回の調査の過程で Heroku Buildpack を作りました。バイナリファイルをリポジトリに commit せずに済みます。よかったらどうぞ。</p>

<ul>
<li><a href="https://github.com/masutaka/heroku-buildpack-proximo">https://github.com/masutaka/heroku-buildpack-proximo</a></li>
<li><a href="https://github.com/masutaka/heroku-buildpack-qgtunnel">https://github.com/masutaka/heroku-buildpack-qgtunnel</a></li>
<li><a href="https://github.com/masutaka/heroku-buildpack-qgsocksify">https://github.com/masutaka/heroku-buildpack-qgsocksify</a></li>
</ul>


<h2 id="コラム-固定-IP-アドレスへの私見">[コラム] 固定 IP アドレスへの私見</h2>

<p>IP アドレスを固定化したいのは、どんなケースでしょうか。</p>

<p>多くはセキュリティ要件だと思いますが、私はあまり賛同できないです。</p>

<p>そもそも当該 IP アドレスは認証されておらず、所有者が変わることがあります。仕組み上それに気づくことは難しいため、逆にセキュリティリスクを増やすことになります。そういう意味では電話番号とよく似ています。</p>

<p>サービスのスケールの観点からもデメリットがあります。例えば Heroku から AWS に引っ越す時、固定 IP アドレスは変わってしまうでしょう。顧客との調整が必要ですし、間に開発会社が入っていると、より時間がかかります。</p>

<h2 id="Chrome-のクローラで-IP-アドレスを固定化する">Chrome のクローラで IP アドレスを固定化する</h2>

<p>今回のケースでは Heroku の worker Dyno 上に <a href="https://rubygems.org/gems/sidekiq">sidekiq</a> が起動しており、<a href="https://rubygems.org/gems/selenium-webdriver">selenium-webdriver</a> 経由で Chrome が子プロセスとして起動し、クロールします。</p>

<pre><code>sidekiq
└ Chrome
   ↓
   クロール先
</code></pre>

<h3 id="試行錯誤の日々">試行錯誤の日々</h3>

<p>当初は sidekiq 自体に qgtunnel や qgsocksify をラップしましたが、うまくいきませんでした。よく考えたら納得です。</p>

<p>Chrome に <code>--proxy-server=http://&lt;USERNAME&gt;:&lt;PASSWORD&gt;@&lt;HOSTNAME&gt;:&lt;PORT&gt;</code> や <code>--proxy-auth=&lt;USERNAME&gt;:&lt;PASSWORD&gt;</code> を指定してもダメ。</p>

<p>どうやら少なくとも Chrome 73 ではセキュリティ上の理由から、コマンドラインオプションから認証情報を設定できないようです。認証なしプロクシなら大丈夫ですが、QuotaGuard Static は商用サービスなので認証は必須です。</p>

<h3 id="ついに成功">ついに成功</h3>

<p>ダメ元で QuotaGuard Static のサポートに聞いたら、方法を知っており、無事クロール先にアクセスすることが出来ました。</p>

<p>👇 Dyno とクロール先を SOCKS5 トンネルで繋ぎ、それ経由でアクセスします。</p>

<pre><code>sidekiq
└ Chrome (4443 port)
   ↓ (SOCKS5 tunnel)
   QuotaGuard Static
   ↓ (SOCKS5 tunnel)
   クロール先 (443 port)
</code></pre>

<p>TCP アクセスならなんでも IP アドレスを固定化出来そうです。</p>

<h3 id="手順">手順</h3>

<p>(1) 当該 Heroku App に QuotaGuard Static Add-on をインストールします。</p>

<p>(2) qgtunnel CLI もインストールします。前述の heroku-buildpack-qgtunnel を使うとお手軽です。</p>

<pre class="code" data-lang="" data-unlink>$ curl https://s3.amazonaws.com/quotaguard/qgtunnel-latest.tar.gz | tar xz</pre>


<p>(3) Heroku のダッシュボードから、QuotaGuard Static のダッシュボードに進み、<code>Settings</code> → <code>Setup</code> とクリックします。</p>

<p><span itemscope itemtype="http://schema.org/Photograph"><img src="https://cdn-ak.f.st-hatena.com/images/fotolife/m/masutaka26/20190425/20190425193848.png" alt="f:id:masutaka26:20190425193848p:plain" title="" class="hatena-fotolife" itemprop="image"></span></p>

<p>(4) さらに <code>Tunnel</code> → <code>Create Tunnel</code> とクリックします。</p>

<p><span itemscope itemtype="http://schema.org/Photograph"><img src="https://cdn-ak.f.st-hatena.com/images/fotolife/m/masutaka26/20190425/20190425192905.png" alt="f:id:masutaka26:20190425192905p:plain" title="" class="hatena-fotolife" itemprop="image"></span></p>

<p>(5) <code>Remote Destination</code> にクロール先を、<code>Local Port</code> は 4443、<code>Transparent</code> は true に設定します。<code>Encrypted</code> は設定しません。</p>

<p><span itemscope itemtype="http://schema.org/Photograph"><img src="https://cdn-ak.f.st-hatena.com/images/fotolife/m/masutaka26/20190425/20190425193342.png" alt="f:id:masutaka26:20190425193342p:plain" title="" class="hatena-fotolife" itemprop="image"></span></p>

<p>(6) トンネルが出来ました。</p>

<p><span itemscope itemtype="http://schema.org/Photograph"><img src="https://cdn-ak.f.st-hatena.com/images/fotolife/m/masutaka26/20190425/20190425193614.png" alt="f:id:masutaka26:20190425193614p:plain" title="" class="hatena-fotolife" itemprop="image"></span></p>

<ul>
<li>127.0.0.1:4443 へのアクセスは destination.example.com:443 へのトンネルになります</li>
<li><code>Transparent</code> を有効したことにより、destination.example.com の DNS が 127.0.0.1 に上書きされました。destination.example.com:4443 へのアクセスは destination.example.com:443 と等価になります</li>
<li>すでに HTTPS を使っているため、<code>Encrypted</code> は必要ありません</li>
</ul>


<p>(7) selenium-webdriver に与える Chrome のバイナリを qgtunnel でラッピングします。今回は以下のようなシェルスクリプト bin/google-chrome-qgtunnel を作り、selenium-webdriver に指定しました。</p>

<pre class="code lang-sh" data-lang="sh" data-unlink><span class="synComment">#!/bin/sh -eu</span>

<span class="synStatement">exec</span> bin/qgtunnel <span class="synStatement">&quot;</span><span class="synPreProc">$GOOGLE_CHROME_SHIM</span><span class="synStatement">&quot;</span> <span class="synStatement">&quot;</span><span class="synPreProc">$@</span><span class="synStatement">&quot;</span>
</pre>


<p>💡 <a href="https://github.com/heroku/heroku-buildpack-google-chrome">heroku-buildpack-google-chrome</a> と <a href="https://github.com/heroku/heroku-buildpack-chromedriver.git">heroku-buildpack-chromedriver</a> を使っています。環境変数 <code>GOOGLE_CHROME_SHIM</code> は <code>/app/.apt/usr/bin/google-chrome</code> です。</p>

<p>(8) 左側の <code>Outbound</code> をクリックし、SOCKS5 url を Heroku の環境変数 <code>QUOTAGUARDSTATIC_URL</code> に上書きします。</p>

<p><span itemscope itemtype="http://schema.org/Photograph"><img src="https://cdn-ak.f.st-hatena.com/images/fotolife/m/masutaka26/20190425/20190425191501.png" alt="f:id:masutaka26:20190425191501p:plain" title="" class="hatena-fotolife" itemprop="image"></span></p>

<p>(9) 左側の <code>Tunnel</code> から <code>Download Configuration</code> をクリックし、<code>.qgtunnel</code> ファイルをリポジトリに commit します。</p>

<p><span itemscope itemtype="http://schema.org/Photograph"><img src="https://cdn-ak.f.st-hatena.com/images/fotolife/m/masutaka26/20190425/20190425203447.png" alt="f:id:masutaka26:20190425203447p:plain" title="" class="hatena-fotolife" itemprop="image"></span></p>

<p>(10) 以上の設定により、destination.example.com:4443 へのアクセスが destination.example.com:443 に変換され、且つ IP アドレスも固定されます。</p>

<p>なにかトラブルがあったら Heroku の環境変数 <code>QGTUNNEL_DEBUG</code> に true をセットして、ログを確認すると良いと思います。</p>

<h2 id="QuotaGuard-Static-の注意事項">QuotaGuard Static の注意事項</h2>

<p>app.json の addons に <code>quotaguardstatic</code> を追加して、Review App を作ると Micro plan <code>$19/mo</code> で作られてしまいます。<code>quotaguardstatic:starter</code> とかにしても同じです。</p>

<p>QuotaGuard Static のサポートに聞いたところ、Heroku のアカウント単位で設定を変える必要があるそう。問い合わせが必要です。</p>

<h2 id="まとめ">まとめ</h2>

<p>Heroku の worker Dyno 上で動く、Chrome のクローラで IP アドレスを固定化しました。</p>

<p>固定 IP アドレス対応は出来るだけ避けたほうが良いと思いますが、どうしても必要な時にこの記事が参考になれば幸いです。</p>
]]></description>
            <enclosure url="https://cdn-ak.f.st-hatena.com/images/fotolife/m/masutaka26/20181113/20181113190345.png" length="0" type="image/png"/>
        </item>
        <item>
            <title><![CDATA[『OAuth 2.0 の代表的な利用パターンを仕様から理解しよう』を読んだ話]]></title>
            <link>https://developer.feedforce.jp/entry/2019/04/12/184013</link>
            <guid>https://developer.feedforce.jp/entry/2019/04/12/184013</guid>
            <pubDate>Fri, 12 Apr 2019 09:40:13 GMT</pubDate>
            <description><![CDATA[<p>社内勉強会の担当でひさびさに認可の話をしました、 <a href="http://blog.hatena.ne.jp/tmd45/" class="hatena-id-icon"><img src="https://cdn.profile-image.st-hatena.com/users/tmd45/profile.png" width="16" height="16" alt="" class="hatena-id-icon">id:tmd45</a> です。</p>

<p>ご存知ないかたもいらっしゃると思うので改めて書いておくと、弊社では毎週末 金曜 夕方にエンジニア全員で集まって行う社内勉強会、通称 <a href="https://developer.feedforce.jp/archive/category/FFTT">FFTT</a> を続けています。</p>

<p>今回はこちらの記事を読んでまとめた内容（ほとんどそのまま🙇）で、ちょっと <a href="https://tools.ietf.org/html/rfc8252">RFC8252 - OAuth 2.0 for Native Apps</a> の話題なんかを追加してみました。</p>

<p><iframe src="https://hatenablog-parts.com/embed?url=https%3A%2F%2Fwww.buildinsider.net%2Fenterprise%2Fopenid%2Foauth20" title="OAuth 2.0の代表的な利用パターンを仕様から理解しよう" class="embed-card embed-webcard" scrolling="no" frameborder="0" style="display: block; width: 100%; height: 155px; max-width: 500px; margin: 10px 0px;"></iframe></p>

<p>シリーズ記事で<a href="https://www.buildinsider.net/enterprise/openid/connect">第二回は OpenID Connect について扱われてる</a>ので、ぜひ読んでみてください。</p>

<h2>スライド</h2>

<p><iframe id="talk_frame_509835" src="//speakerdeck.com/player/4e9a55ff6b734f41bf8925571bad873a" width="710" height="399" style="border:0; padding:0; margin:0; background:transparent;" frameborder="0" allowtransparency="true" allowfullscreen="allowfullscreen" mozallowfullscreen="true" webkitallowfullscreen="true"></iframe> <cite class="hatena-citation"><a href="https://speakerdeck.com/tmd45/12-fftt-number-352">speakerdeck.com</a></cite></p>

<h2>過去に勉強したこと</h2>

<ul>
<li><a href="https://blog.tmd45.jp/entry/2015/09/09/013720">OpenID TechNight で OpenID Connect とはなんぞやというのを聞いてきた - TMD45'β'LOG!!!</a></li>
<li><a href="https://blog.tmd45.jp/entry/2017/08/02/011504">OpenID BizDay で金融 API の動向について聞いてきた - TMD45'β'LOG!!!</a></li>
<li><a href="https://www.slideshare.net/tmd45/fapi-security-20170818">FAPI Security について聞いてきた話（2017/08/18 社内勉強会）</a></li>
</ul>


<h2>きっかけになった書籍</h2>

<p><div class="hatena-asin-detail"><a href="https://www.amazon.co.jp/exec/obidos/ASIN/4798159298/hatena-blog-22/" class="hatena-asin-detail-image-link" target="_blank" rel="noopener"><img src="https://m.media-amazon.com/images/I/51CaA7dryjL._SL500_.jpg" class="hatena-asin-detail-image" alt="OAuth徹底入門 セキュアな認可システムを適用するための原則と実践" title="OAuth徹底入門 セキュアな認可システムを適用するための原則と実践"></a><div class="hatena-asin-detail-info"><p class="hatena-asin-detail-title"><a href="https://www.amazon.co.jp/exec/obidos/ASIN/4798159298/hatena-blog-22/" target="_blank" rel="noopener">OAuth徹底入門 セキュアな認可システムを適用するための原則と実践</a></p><ul class="hatena-asin-detail-meta"><li><span class="hatena-asin-detail-label">作者:</span><a href="http://d.hatena.ne.jp/keyword/Justin%20Richer" class="keyword">Justin Richer</a>,<a href="http://d.hatena.ne.jp/keyword/Antonio%20Sanso" class="keyword">Antonio Sanso</a></li><li>翔泳社</li></ul><a href="https://www.amazon.co.jp/exec/obidos/ASIN/4798159298/hatena-blog-22/" class="asin-detail-buy" target="_blank" rel="noopener">Amazon</a></div></div></p>

<p>原著は『OAuth 2 in Action』ですね。会社の本棚に入ったのでちょっと読みました。まだ全部は網羅できてないです(；´∀｀)</p>

<p>ひきつづき仕事でも活かしていきます(๑•̀ㅂ•́)و✧</p>
]]></description>
            <enclosure url="https://m.media-amazon.com/images/I/51CaA7dryjL._SL500_.jpg" length="0" type="image/jpg"/>
        </item>
        <item>
            <title><![CDATA[『思考する機械コンピュータ』を読んだ]]></title>
            <link>https://masutaka.net/2019-04-11-1/</link>
            <guid>https://masutaka.net/2019-04-11-1/</guid>
            <pubDate>Thu, 11 Apr 2019 00:00:00 GMT</pubDate>
            <description><![CDATA[なんと第１刷が 2000/10/16。つまり 20 世紀の本。
2016/10/12 に買って積んでいたけど、えいやっと読んだ。20 世紀の本にニューラルネットワークが出てくるとは思わなかった。
正直、中盤までは読み進めるのが大変だった。面白さが分かったのが７章から。読書メモを書き始めるくらいには熱を帯びて読んだ。中盤までの説明は、終盤のために必要だったんだね。
個人的に最後のページがクライマックスだった。
 P272
科学者である友人たちは、人間がどのように思考するかが解明できる日は来ないと信じている私を神秘主義者と呼んで非難する。
（中略）
私は、マシンの能力の潜在性を認めようとして「脳はマシンである」と言っているのである。人間の頭脳は我々の想像以下のものではなく、マシンは我々の想像をはるかに超えるものである。
 「解明できる日は来ない」これを二度見した。
人間の知性や探求の限界を認めているのではなく、それだけマシンの能力が我々の想像をはるかに超えたものということ。
現在の工学的アプローチで作られたマシンが次のアプローチに進んだ時、人間には理解できないものが生まれるんだなと、ぼんやり思った。
ディープラーニングの世界ではすでにそうなっているから、自分が生きている間にはそうなりそう。
今は当然ながら、人間が作って人間が理解できるソフトウェアが本番環境で動いているけど（たまに理解できないソフトウェアもあるけどw）、今後は全く理解できないソフトウェアが動くのだと思う。一部ですでにそうなっていても驚かないかも。
私は情報専攻ではなかったので読んで良かった。もっと早く読めばよかったな。]]></description>
        </item>
        <item>
            <title><![CDATA[『脆弱性診断スタートガイド』を読んだ]]></title>
            <link>https://masutaka.net/2019-03-24-1/</link>
            <guid>https://masutaka.net/2019-03-24-1/</guid>
            <pubDate>Sun, 24 Mar 2019 00:00:00 GMT</pubDate>
            <description><![CDATA[仕事で脆弱性検査ツールを検討する機会があり、この分野は完全に素人なので買った。会社では検査会社に依頼して、脆弱性検査を受けているプロダクトもあるので、それを想像しながら読んだ。
P11 によると、この本は脆弱性診断士「Silver」相当の技術を身につけることを目的としているらしい。OWASP Japan にも脆弱性診断士のスキルマップやシラバスが掲載されている 。
 世界初の資格化を目指す、「脆弱性診断士」の取り組みが始まる（4ページ目）｜日経 xTECH（クロステック） )
脆弱性診断士のスキルマップやガイドラインの利用方法として、上野氏は「公開当初は、脆弱性診断技術者を目指す個人が、自分の現在のスキルレベルを調べたり、スキルアップの勉強に使ったりするケースを考えている」と述べる。
そして今後は、「脆弱性診断士」という資格につなげたいと語る。「現在、脆弱性診断に関する資格は、私が知る限り存在しない。今回のスキルマップとガイドラインが、脆弱性診断士の資格化に向けた指標になればと考えている」（国分氏）。
 ↑ 2015/03/13 からアップデートはなく、まだ資格はないようだった。
この本をざっと読んでみて、これだったら検査会社に頼んでしまうかなーという感想。とは言え、予算や手間の関係上、頻度は上げられないと思うので、VAddy 等のサービスを CI に組み込んで併用するのがやはり現実的か。
[インターンレポ] Web脆弱性診断スキルマップのシルバーランクを目指す｜Money Forward Engineers&rsquo; Blog ↑ Money Forward は脆弱性診断の内製化を進めているらしい。1 年半ほど前の記事だから、もう内製化したのかな？
そもそも Heroku 上で Rails を使っていて各種ライブラリも最新、かつ GraphQL を導入しエンドポイントが少ないサービスだと、検査会社を使ってまで脆弱性検査いるの？という大きな疑問があり、これは解消されなかった。この類いの例はたいがい、素の PHP だったりするので&hellip;。
P278 で紹介されていた Google Hacking Database (GHDB) は知らなかった。
例えば https://www.exploit-db.com/ghdb/3888 には RSA の Private SSL Key を Google 検索するテクニックが載っている。
 &ldquo;BEGIN RSA PRIVATE KEY&rdquo; filetype:key -github
 脆弱性診断士でないと必要なさそうな情報だけど、知っておくといつか使うかも（？）]]></description>
        </item>
        <item>
            <title><![CDATA[『[改訂新版] プログラマのための文字コード技術入門』を読んだ]]></title>
            <link>https://shiromoji.hatenablog.jp/entry/2019/03/15/014518</link>
            <guid>https://shiromoji.hatenablog.jp/entry/2019/03/15/014518</guid>
            <pubDate>Thu, 14 Mar 2019 16:45:18 GMT</pubDate>
            <description><![CDATA[<p>年末に発売されていたので読みました。</p>

<p><div class="hatena-asin-detail"><a href="http://www.amazon.co.jp/exec/obidos/ASIN/4297102919/msb2-22/"><img src="https://images-fe.ssl-images-amazon.com/images/I/51vqn-2eVKL._SL160_.jpg" class="hatena-asin-detail-image" alt="[改訂新版]プログラマのための文字コード技術入門 (WEB+DB PRESS plusシリーズ)" title="[改訂新版]プログラマのための文字コード技術入門 (WEB+DB PRESS plusシリーズ)"></a><div class="hatena-asin-detail-info"><p class="hatena-asin-detail-title"><a href="http://www.amazon.co.jp/exec/obidos/ASIN/4297102919/msb2-22/">[改訂新版]プログラマのための文字コード技術入門 (WEB+DB PRESS plusシリーズ)</a></p><ul><li><span class="hatena-asin-detail-label">作者:</span> 矢野啓介</li><li><span class="hatena-asin-detail-label">出版社/メーカー:</span> <a class="keyword" href="http://d.hatena.ne.jp/keyword/%B5%BB%BD%D1%C9%BE%CF%C0%BC%D2">技術評論社</a></li><li><span class="hatena-asin-detail-label">発売日:</span> 2018/12/28</li><li><span class="hatena-asin-detail-label">メディア:</span> 単行本（ソフトカバー）</li><li><a href="http://d.hatena.ne.jp/asin/4297102919/msb2-22" target="_blank">この商品を含むブログを見る</a></li></ul></div><div class="hatena-asin-detail-foot"></div></div></p>

<ul>
<li><a href="https://gihyo.jp/book/2019/978-4-297-10291-3">［改訂新版］プログラマのための文字コード技術入門：書籍案内｜技術評論社</a></li>
<li><a href="http://yanok.net/2018/12/post-349.html">『［改訂新版］プログラマのための文字コード技術入門』発売! - yanok.net</a></li>
</ul>


<h3>どんな感じの本だかざくっと</h3>

<p>タイトルに「<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%D7%A5%ED%A5%B0%A5%E9%A5%DE">プログラマ</a>のための」あるように、プログラミング経験者がターゲットになっています。ビット・バイト、2進数・16進数、ファイル、<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%D7%A5%ED%A5%C8%A5%B3%A5%EB">プロトコル</a>のような「常識」についてはさらっとした説明で済まされているので、その分、<a class="keyword" href="http://d.hatena.ne.jp/keyword/%CA%B8%BB%FA%A5%B3%A1%BC%A5%C9">文字コード</a>の本質的な部分・実践的な部分の密度が高くなっています。文章が平易なので、読み進めやすいかと思います。</p>

<p>さらに内容をはっきりさせるのであれば、『「<a class="keyword" href="http://d.hatena.ne.jp/keyword/%B8%BD%C2%E5%C6%FC%CB%DC">現代日本</a>の<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%D7%A5%ED%A5%B0%A5%E9%A5%DE">プログラマ</a>のための」<a class="keyword" href="http://d.hatena.ne.jp/keyword/%CA%B8%BB%FA%A5%B3%A1%BC%A5%C9">文字コード</a>技術入門』といったところでしょうか。この本は、日本で現在使われている<a class="keyword" href="http://d.hatena.ne.jp/keyword/%CA%B8%BB%FA%A5%B3%A1%BC%A5%C9">文字コード</a>の話が中心です。世界各地の<a class="keyword" href="http://d.hatena.ne.jp/keyword/%CA%B8%BB%FA%A5%B3%A1%BC%A5%C9">文字コード</a>だったり、歴史的な文字の符号化などにもおもしろい話はたくさんあるのですが、そこには深入りせず、実用的なテーマに絞って解説されています。国内での業務にすぐ役立ちそうな内容です。</p>

<p>第7章「<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%D7%A5%ED%A5%B0%A5%E9%A5%DF%A5%F3%A5%B0%B8%C0%B8%EC">プログラミング言語</a>と<a class="keyword" href="http://d.hatena.ne.jp/keyword/%CA%B8%BB%FA%A5%B3%A1%BC%A5%C9">文字コード</a>」では <a class="keyword" href="http://d.hatena.ne.jp/keyword/Java">Java</a> と <a class="keyword" href="http://d.hatena.ne.jp/keyword/Ruby">Ruby</a> が題材になっていますが、他の言語でも基本的な概念は共通しています。それ以外の章では <a class="keyword" href="http://d.hatena.ne.jp/keyword/Java">Java</a> や <a class="keyword" href="http://d.hatena.ne.jp/keyword/Ruby">Ruby</a> の知識はまったく要求されませんので、馴染みがなくても大丈夫です。その前の第6章が Web の話だということもあり、個人的には <a class="keyword" href="http://d.hatena.ne.jp/keyword/JavaScript">JavaScript</a> も取り上げてほしいところですが。</p>

<h3>初版との比較</h3>

<p>この本（改訂新版）は第2版にあたります。初版は2010年2月に発行されています。</p>

<p><div class="hatena-asin-detail"><a href="http://www.amazon.co.jp/exec/obidos/ASIN/477414164X/msb2-22/"><img src="https://images-fe.ssl-images-amazon.com/images/I/51O0rI1KItL._SL160_.jpg" class="hatena-asin-detail-image" alt="プログラマのための文字コード技術入門 (WEB+DB PRESS plus) (WEB+DB PRESS plusシリーズ)" title="プログラマのための文字コード技術入門 (WEB+DB PRESS plus) (WEB+DB PRESS plusシリーズ)"></a><div class="hatena-asin-detail-info"><p class="hatena-asin-detail-title"><a href="http://www.amazon.co.jp/exec/obidos/ASIN/477414164X/msb2-22/">プログラマのための文字コード技術入門 (WEB+DB PRESS plus) (WEB+DB PRESS plusシリーズ)</a></p><ul><li><span class="hatena-asin-detail-label">作者:</span> 矢野啓介</li><li><span class="hatena-asin-detail-label">出版社/メーカー:</span> <a class="keyword" href="http://d.hatena.ne.jp/keyword/%B5%BB%BD%D1%C9%BE%CF%C0%BC%D2">技術評論社</a></li><li><span class="hatena-asin-detail-label">発売日:</span> 2010/02/18</li><li><span class="hatena-asin-detail-label">メディア:</span> 単行本（ソフトカバー）</li><li><span class="hatena-asin-detail-label">購入</span>: 34人 <span class="hatena-asin-detail-label">クリック</span>: 578回</li><li><a href="http://d.hatena.ne.jp/asin/477414164X/msb2-22" target="_blank">この商品を含むブログ (129件) を見る</a></li></ul></div><div class="hatena-asin-detail-foot"></div></div></p>

<p>初版と改訂新版、左右に並べて目で diff をとりながら読みました。<a class="keyword" href="http://d.hatena.ne.jp/keyword/Unicode">Unicode</a> をはじめ、各規格・ツールの更新に合わせた細かな対応がなされていますが、こうして見比べてみると、<a class="keyword" href="http://d.hatena.ne.jp/keyword/%CA%B8%BB%FA%A5%B3%A1%BC%A5%C9">文字コード</a>の本質的な部分についてはほとんど変わらないことが分かります。<a class="keyword" href="http://d.hatena.ne.jp/keyword/Unicode">Unicode</a> 絵文字（2010年〜）についての記述も増えていますが、ここ数年の世界的な普及を見ると、第3版ではもっともっとページ数が割かれるもしれません(笑)</p>

<p>この期間における最大の変化は、<a class="keyword" href="http://d.hatena.ne.jp/keyword/UTF-8">UTF-8</a> の圧倒的な普及でしょうか。初版では、著者の「<a class="keyword" href="http://d.hatena.ne.jp/keyword/JIS%20X%200213">JIS X 0213</a> 推し」な雰囲気が端々から伝わってきましたが、<a class="keyword" href="http://d.hatena.ne.jp/keyword/UTF-8">UTF-8</a> の普及がそれを取り込む・呑み込むかたちになりました。Web <a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%D6%A5%E9%A5%A6%A5%B8%A5%F3%A5%B0">ブラウジング</a>で文字化けに遭遇するようなこともめっきり減り、たまに出会うと懐かしさすら感じます。<a class="keyword" href="http://d.hatena.ne.jp/keyword/Shift_JIS">Shift_JIS</a> や <a class="keyword" href="http://d.hatena.ne.jp/keyword/EUC">EUC</a>-JP や <a class="keyword" href="http://d.hatena.ne.jp/keyword/ISO-2022-JP">ISO-2022-JP</a> を知らずに、<a class="keyword" href="http://d.hatena.ne.jp/keyword/UTF-8">UTF-8</a> 一本で暮らしていける世代がすでに出てきているはずです。「レガシー」<a class="keyword" href="http://d.hatena.ne.jp/keyword/%CA%B8%BB%FA%A5%B3%A1%BC%A5%C9">文字コード</a>から解放される一方で、<a class="keyword" href="http://d.hatena.ne.jp/keyword/Unicode">Unicode</a> の孕んだ複雑さと向き合う場面が増えそうですが……</p>

<p>ただし、「<a class="keyword" href="http://d.hatena.ne.jp/keyword/UTF-8">UTF-8</a> の圧倒的な普及」という印象は、自分が仕事で新しめの Web アプリケーションを触っているから、というのもあるかもしれません。大企業や役所の業務システムはいまどんな感じなんでしょうか。</p>

<h3>メモと補足</h3>

<h4>p. 9 図 1.2</h4>

<blockquote><p>亜 哀 愛 悪 握 圧 扱 安 … 惑 枠 湾 腕</p></blockquote>

<p>となっていますが、これは「旧」<a class="keyword" href="http://d.hatena.ne.jp/keyword/%BE%EF%CD%D1%B4%C1%BB%FA">常用漢字</a>の先頭部分と末尾部分ですね。2010年の<a class="keyword" href="http://d.hatena.ne.jp/keyword/%BE%EF%CD%D1%B4%C1%BB%FA">常用漢字</a>改定によって、「亜 哀 <strong>挨</strong> 愛 <strong>曖</strong> 悪 握 圧 … 惑 枠 湾 腕」という並びになりました。</p>

<h4>p. 193</h4>

<blockquote><p>IANA の登録簿には、……実際に使われている <a class="keyword" href="http://d.hatena.ne.jp/keyword/JIS%20X%200213">JIS X 0213</a> の符号化方式が登録されていないという問題もあります。</p></blockquote>

<p>登録されていなかったんですね、知りませんでした。</p>

<p><a href="https://www.iana.org/assignments/character-sets/character-sets.xhtml">https://www.iana.org/assignments/character-sets/character-sets.xhtml</a></p>

<p>需要がなかったのでしょうか……；；</p>

<h4>p. 206</h4>

<blockquote><p>HTML の<a class="keyword" href="http://d.hatena.ne.jp/keyword/DTD">DTD</a> において、「copy という名前は <code>&amp;#169;</code> を表す」という定義がなされているため、……</p></blockquote>

<p>このあたりは HTML 4.01 の話です。<a class="keyword" href="http://d.hatena.ne.jp/keyword/HTML5">HTML5</a> に <a class="keyword" href="http://d.hatena.ne.jp/keyword/DTD">DTD</a> は存在しません。</p>

<h4>p. 208</h4>

<blockquote><p><a class="keyword" href="http://d.hatena.ne.jp/keyword/Shift_JIS">Shift_JIS</a> を用いる場合はリスト 6.1 の例の「<a class="keyword" href="http://d.hatena.ne.jp/keyword/UTF-8">UTF-8</a>」の部分を「<a class="keyword" href="http://d.hatena.ne.jp/keyword/Shift_JIS">Shift_JIS</a>」に、<a class="keyword" href="http://d.hatena.ne.jp/keyword/EUC">EUC</a>-JP の場合は「<a class="keyword" href="http://d.hatena.ne.jp/keyword/EUC">EUC</a>-JP」にします。</p></blockquote>

<p>HTML の <code>&lt;meta charset="hogehoge"&gt;</code> を説明している箇所です。ただし、この本が参照している HTML 5.2 には</p>

<blockquote><p>Authors should use <a class="keyword" href="http://d.hatena.ne.jp/keyword/UTF-8">UTF-8</a>. Conformance checkers may advise authors against using legacy encodings.</p></blockquote>

<p><a href="https://www.w3.org/TR/html52/document-metadata.html#specifying-the-documents-character-encoding">という説明</a>があり、「<a class="keyword" href="http://d.hatena.ne.jp/keyword/UTF-8">UTF-8</a> を使用すべき」となっています。一方、HTML Living Standard ではさらに進んで</p>

<blockquote><p>The Encoding standard requires use of the <a class="keyword" href="http://d.hatena.ne.jp/keyword/UTF-8">UTF-8</a> character encoding and requires use of the "<code>utf-8</code>" encoding label to identify it. Those requirements necessitate that the document's character encoding declaration, if it exists, specifies an encoding label using an ASCII <a class="keyword" href="http://d.hatena.ne.jp/keyword/case-insensitive">case-insensitive</a> match for "<code>utf-8</code>". Regardless of whether a character encoding declaration is present or not, the actual character encoding used to encode the document must be <a class="keyword" href="http://d.hatena.ne.jp/keyword/UTF-8">UTF-8</a>.</p></blockquote>

<p><a href="https://html.spec.whatwg.org/multipage/semantics.html#charset">という記述になっており</a>、「<a class="keyword" href="http://d.hatena.ne.jp/keyword/UTF-8">UTF-8</a> を使用しなければならない」ことになりました。</p>

<h4>p. 216</h4>

<blockquote><p>URL の中に、予約されている記号や、ASCII で表現できない文字を書きたいときには、<strong>URL 符号化</strong>という方法が使われます。</p></blockquote>

<p>この本では触れられていませんが、<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%C9%A5%E1%A5%A4%A5%F3">ドメイン</a>名部分は <a href="https://ja.wikipedia.org/wiki/Punycode">Punycode</a> によって符号化されます。例えば、<a href="https://%E6%97%A5%E6%9C%AC%E8%AA%9E.jp"><code>https://日本語.jp</code></a> は <a href="https://xn--wgv71a119e.jp"><code>https://xn--wgv71a119e.jp</code></a> になります。</p>

<h4>p. 222</h4>

<blockquote><p>クライアントからの送信に使われる<a class="keyword" href="http://d.hatena.ne.jp/keyword/%CA%B8%BB%FA%A5%B3%A1%BC%A5%C9">文字コード</a>は、HTML の form 要素の accept-charset 属性で明示的に指定することもできます。<code>accept-charset="Shift_JIS"</code> と指定すれば <a class="keyword" href="http://d.hatena.ne.jp/keyword/Shift_JIS">Shift_JIS</a> で送信するということです。</p></blockquote>

<p>HTML 5.2 では</p>

<blockquote><p>[...] each token must be an ASCII <a class="keyword" href="http://d.hatena.ne.jp/keyword/case-insensitive">case-insensitive</a> match for one of the labels of an ASCII-compatible encoding.</p></blockquote>

<p><a href="https://www.w3.org/TR/html52/sec-forms.html#element-attrdef-form-accept-charset">となっています</a>。一方、HTML Living Standard では</p>

<blockquote><p>If specified, the <a class="keyword" href="http://d.hatena.ne.jp/keyword/value">value</a> must be an ASCII <a class="keyword" href="http://d.hatena.ne.jp/keyword/case-insensitive">case-insensitive</a> match for "<code>UTF-8</code>".</p></blockquote>

<p><a href="https://html.spec.whatwg.org/multipage/forms.html#attr-form-accept-charset">と規定されており</a>、こちらも <a class="keyword" href="http://d.hatena.ne.jp/keyword/UTF-8">UTF-8</a> 固定になりました。</p>

<h4>p. <a class="keyword" href="http://d.hatena.ne.jp/keyword/226">226</a></h4>

<blockquote><p>最後に、これからの日本語メールの符号化がどうあるべきかを考察しました。</p></blockquote>

<p>初版の名残です。初版では今後についての考察があったのですが、<a class="keyword" href="http://d.hatena.ne.jp/keyword/UTF-8">UTF-8</a> の普及により、改訂新版ではこれが削除されています。</p>

<h4>p. 293 表 8.1</h4>

<p>表のタイトルが「ベンダー依存の変換の問題の発生する代表的な文字」になっていますが、おそらく表 8.2からの編集ミスです。</p>

<hr />

<p><div class="hatena-asin-detail"><a href="http://www.amazon.co.jp/exec/obidos/ASIN/4297102919/msb2-22/"><img src="https://images-fe.ssl-images-amazon.com/images/I/51vqn-2eVKL._SL160_.jpg" class="hatena-asin-detail-image" alt="[改訂新版]プログラマのための文字コード技術入門 (WEB+DB PRESS plusシリーズ)" title="[改訂新版]プログラマのための文字コード技術入門 (WEB+DB PRESS plusシリーズ)"></a><div class="hatena-asin-detail-info"><p class="hatena-asin-detail-title"><a href="http://www.amazon.co.jp/exec/obidos/ASIN/4297102919/msb2-22/">[改訂新版]プログラマのための文字コード技術入門 (WEB+DB PRESS plusシリーズ)</a></p><ul><li><span class="hatena-asin-detail-label">作者:</span> 矢野啓介</li><li><span class="hatena-asin-detail-label">出版社/メーカー:</span> <a class="keyword" href="http://d.hatena.ne.jp/keyword/%B5%BB%BD%D1%C9%BE%CF%C0%BC%D2">技術評論社</a></li><li><span class="hatena-asin-detail-label">発売日:</span> 2018/12/28</li><li><span class="hatena-asin-detail-label">メディア:</span> 単行本（ソフトカバー）</li><li><a href="http://d.hatena.ne.jp/asin/4297102919/msb2-22" target="_blank">この商品を含むブログを見る</a></li></ul></div><div class="hatena-asin-detail-foot"></div></div></p>

<p><div class="hatena-asin-detail"><a href="http://www.amazon.co.jp/exec/obidos/ASIN/B07M98R3S5/msb2-22/"><img src="https://images-fe.ssl-images-amazon.com/images/I/51M4td-sVGL._SL160_.jpg" class="hatena-asin-detail-image" alt="［改訂新版］プログラマのための文字コード技術入門 WEB+DB PRESS plus" title="［改訂新版］プログラマのための文字コード技術入門 WEB+DB PRESS plus"></a><div class="hatena-asin-detail-info"><p class="hatena-asin-detail-title"><a href="http://www.amazon.co.jp/exec/obidos/ASIN/B07M98R3S5/msb2-22/">［改訂新版］プログラマのための文字コード技術入門 WEB+DB PRESS plus</a></p><ul><li><span class="hatena-asin-detail-label">作者:</span> 矢野啓介</li><li><span class="hatena-asin-detail-label">出版社/メーカー:</span> <a class="keyword" href="http://d.hatena.ne.jp/keyword/%B5%BB%BD%D1%C9%BE%CF%C0%BC%D2">技術評論社</a></li><li><span class="hatena-asin-detail-label">発売日:</span> 2018/12/22</li><li><span class="hatena-asin-detail-label">メディア:</span> <a class="keyword" href="http://d.hatena.ne.jp/keyword/Kindle">Kindle</a>版</li><li><a href="http://d.hatena.ne.jp/asin/B07M98R3S5/msb2-22" target="_blank">この商品を含むブログを見る</a></li></ul></div><div class="hatena-asin-detail-foot"></div></div></p>
]]></description>
            <enclosure url="https://images-na.ssl-images-amazon.com/images/I/81o8e5x73XL.jpg" length="0" type="image/jpg"/>
        </item>
        <item>
            <title><![CDATA[『はじめよう! プロセス設計』を読んだ]]></title>
            <link>https://masutaka.net/2019-03-10-1/</link>
            <guid>https://masutaka.net/2019-03-10-1/</guid>
            <pubDate>Sun, 10 Mar 2019 00:00:00 GMT</pubDate>
            <description><![CDATA[「はじめに」がこんな出だしでした。
 本書は『はじめよう! 要件定義 』という書籍の続編に当たります。
 順番間違えたー！と焦りましたが、
 続編と言いつつも、本来は本書のほうが先に出ているべき・読まれているべきものであるというのが正しい位置付けです。
 と書いてあった。安心ニッコリ。(^^)
なぜ読もうと思ったのかというと、しばらく前から同僚が社内に何度も布教していたので、えいやっと読んだという経緯。
途中までは「なぜこんな当たり前のことを、ここまで丁寧に説明しているのだろう？」とモヤモヤしていましたが、途中で「そうか、エンジニア以外の方はこれは当たり前のことではないのか！」と気づきました。先の同僚の言葉を思い出したのが正確ですが。
この本に書かれていることは、シニア以上のエンジニアは当たり前に出来ることだと思います。出来ないとヤバイ。
ですが、この「当たり前」のことが出来るエンジニア以外の方は、周りを見渡してみるとごく僅かです。逆に言うと、出来ている人はめちゃめちゃ優秀です。
じゃあ、エンジニアがその現場に入れば解決かというと、コンテキストを共有していないので、なかなかに困難です。
だからこそこの本が生まれたのだと思います。
これも先の同僚の言葉になりますが、「ここまで説明しないとエンジニア以外に伝わらないことを理解するためにもエンジニアも読んだほうが良い」かもしれません。
エンジニア以外の方にももちろん読んでほしいです。]]></description>
        </item>
        <item>
            <title><![CDATA[『人事の超プロが明かす評価基準』を読んで自分の強みを考えた]]></title>
            <link>https://masutaka.net/2019-03-09-1/</link>
            <guid>https://masutaka.net/2019-03-09-1/</guid>
            <pubDate>Sat, 09 Mar 2019 00:00:00 GMT</pubDate>
            <description><![CDATA[柴田さんの記事 を読んで、これだ！と思って衝動的に買った。
本の中では「評価される人」＝「影響力のある人」が一番響いたかな。
反面、この本の核心である後半に進むに連れて、ピンと来ない箇所が増えていった。総合職向けだからかな。
特に「スペシャリストとしての道を歩むなら、そのスキルが陳腐化するものではないか、よく見極める必要がある」のくだり。スペシャリストとして重要なのはスキルそのものではなく、スキルを習得するためのスキルだと思うので、何かが違う気がした。
コンピテンシーをまあそうだよねと思えるのは、ここ数年で構築された今の会社の評価制度を作った方々のおかげだろうなあ。私はただのフリーライダー&hellip;（白目
それはさておき、この記事を書いていて、気がついたら妄想し自分の強みを考えていたので、以下にまとめておく。
私は今の会社で割と高い評価を頂いている。でも自分から見ると評価高すぎでは？と感じており、しっくり来ていない部分もあった。今はその霧が少しだけ晴れている。
単純な技術力だと社内にもっと優れた人はいる。個々の技術力だと敵わないことも多い。
自分の強みは多分こんなところか。
  ブログや GitHub でアウトプットし続けている。細くてもやり続けることが大事だと最近特に思う。たまに他のエンジニアに良い影響を与えたなと感じることもある。
  バックエンドとインフラを横断して引き受けることが出来、組み込みエンジニア時代に経験した低レイヤーも多少分かる。
  部分最適化よりも全体最適化を好む。開発環境だったり、GCP のプロジェクト課金まわりなど。
  誰も拾わないボールを拾う。逆に言うと、拾われそうなボールは拾わない傾向にある。
  2 については今までの経験に感謝している。
最初の会社ではプリンタのデバイスドライバの実装や自動評価システムの構築、100 台規模の Solaris ネットワーク管理など、いろいろ経験させてもらった。~~ブリッジエンジニアは経験しなくてよかった。~~次の会社と今の会社でも Web のインフラやバックエンドまわり、それにチームビルディングなどを経験することが出来ている。
一点集中型のスキルだと弾数が少ないし、非常に高いレベルが必要だったりするが、複数のことをそこそこのレベルでできる人は少ないようだし、割と需要があったり重宝される気がする。
複数のスキルを持つ私が糊のような役目を果たし、周りに良い影響を与えているのかもしれない。
良い影響を与えることで、他のエンジニアのやる気が上がり、続いてスキルが上がり、結果的に自分が動かずに全体が良い方向に進むのかも（妄想100%）。
とは言ったものの、そこそこのレベルでは通用しないことも多いので、仕事では常にやり抜くことを重要視しているし、プライベートではできるだけ素振りを続けてはいる。でも全然足りている気がしないし、全く素振りをしない期間もあったりするしで危機感&hellip;。
（まとまりなくこの記事は終わっていく）]]></description>
        </item>
        <item>
            <title><![CDATA[JAWS DAYS 2019 に行ってきた #jawsdays #jawsdays2019]]></title>
            <link>https://masutaka.net/2019-02-24-1/</link>
            <guid>https://masutaka.net/2019-02-24-1/</guid>
            <pubDate>Sun, 24 Feb 2019 00:00:00 GMT</pubDate>
            <description><![CDATA[https://jawsdays2019.jaws-ug.jp [2017-03-12-1] [2018-03-11-1] に引き続き、3 回目の参加です。去年の 6 月に EKS が GA になり 、その後 12 月に Tokyo Region でも使えるようになった 影響で、Kubernetes のセッションが大盛況でした。その他はそれほど変わらなかったように見えました。
午前中は AI/ML 関係のセッションをなんとなく見ていました。
[AI/ML] PythonとSageMakerで始める MLチームのみで完結するAPIの構築事例  武田 研恒さん
  やっぱり機械学習エンジニアがサーバーの面倒見るのは無理というかもったいないよね、うんうんと聞いていました。
[AI/ML] メディアによるAI活用（時事クイズの生成と高校野球戦評記事の自動生成）  佐渡 昭彦さん
  朝日新聞には、ICTRAD（アイシートラッド）と呼ばれる、情報技術本部（技術系）内にある研究開発チームがあるそう。本セッションのような研究や、セキュリティ対策をしているそう。朝日新聞はよく攻撃されるらしい。なるほど。
AI で時事クイズを作成。
Amazon Comprehend は日本語対応していないので不採用。
東大・横国大のオープンソース『専門用語（キーワード）自動抽出システム 』を使って、分かち書きと単語ベクトル化（？）をしているらしい。
朝日新聞でも単語ベクトルを公開している。→ 朝日新聞単語ベクトル EC2 1 台で足りているとのこと。
ランチタイム めちゃめちゃ混んでいたけどなんとかゲット。種類を選ぶ余裕はなかった。職場の同僚 3 人はゲットできなかったそう。1000 人超もの弁当を用意した運営の方々には頭が下がります。
[Container/k8s] GitHub Actionsを使って、ワークフローもプルリクベースで開発しよう！  池田 尚史さん
TODO: 資料が公開されたらここに貼る
[2019-02-11-1] に自作の GitHub Action を GitHub Marketplace に公開したばかりなので、聞いてみました。]]></description>
        </item>
        <item>
            <title><![CDATA[『経清記』を読んだ]]></title>
            <link>https://masutaka.net/2019-02-18-1/</link>
            <guid>https://masutaka.net/2019-02-18-1/</guid>
            <pubDate>Mon, 18 Feb 2019 00:00:00 GMT</pubDate>
            <description><![CDATA[1993年（平成5年）の作品。
Amazon でずっと￥10,000くらいだったけど、急に安くなった（￥1,724）ので条件反射で買った。そこから1年3ヶ月経ってしまったが、ちょうど今日読み終わった。
※ 今 Amazon で値段見たら￥43,611だった。マジか&hellip;
『経清記』というタイトルではあるが、中身は「経清記」と「清衡伝」に分かれている。
「経清記」は1988年（昭和63年）の作品で、「清衡伝」はこの本のための書き下ろしとのこと。
 「記」だの「伝」だのと題名をつけたのは作者の都合であって決して伝記小説という意味ではない
 という筆者のあとがきにあるとおり、あくまで時代小説。
経清と清衡がきれいに書かれすぎのような気もするが、奥六郡（陸奥）に思いを馳せられることには変わりはない（大げさ）。高橋克彦氏の『炎立つ 』との違いも興味深い。
残念ながら『炎立つ』はすでに手放してしまった。でも [2009-11-30-1] の『奥州藤原氏物語』と『NHK 大河ドラマの炎立つ 』の録画は手元にあるので、大事にしていきたい。]]></description>
        </item>
        <item>
            <title><![CDATA[『入門 監視』を読んだ]]></title>
            <link>https://masutaka.net/2019-02-17-1/</link>
            <guid>https://masutaka.net/2019-02-17-1/</guid>
            <pubDate>Sun, 17 Feb 2019 00:00:00 GMT</pubDate>
            <description><![CDATA[個人的に一番評価できるポイントは、そのボリュームでした。
この本は 200 ページほどしかなく、各章も 10~20 ページ程度なので、スプリント方式で勢いで読めました。
監視に興味があれば読むと良いでしょう。そこまで興味はないが気になる人は、読んだ人から話を聞くと良いと思います。
全部が全部必要な情報ではないので（例えば 9 章の SNMP を扱う人は少ないと思う）、一旦ザーッと流し読みして、気になったところを後で読み返したり、より専門的な本を読むとかすると良いかも。
本から少し脱線しますが一点だけ。
P10「1.2 アンチパターン２：役割としての監視」の中で &ldquo;オペレーションチームだけでなく全員が本番環境に責任を持つ&rdquo; という話が出ており、非常にもっともですが、そのような文化を作ることはなかなか難しいと思います。
うちの会社ではどのチームもこのような Slack のリマインダーを流しており、メトリクスを毎日見る文化が根付いています。
※ Heroku 使っている都合もあって、URL が多くなってしまっている。集約させたい。
アラートが出る以前の普段と違うメトリクスの変化や、アラートに関連したメトリクスの把握、そもそもどんなメトリクスを収集しているかの学習にもなるので、オススメです。
実際、全員がメトリクスを見ているわけではありませんが、「毎日何を見ているのか」という共有は大事だと思っていて、情報の非対称性が少しは解消されると思います。
しばらくスプリントミーティングなどで共有の場を設定し、それと並行してこのようなリマインダーを仕掛けると習慣が根付きやすいかもしれません。
以下、読書メモです。
1章 監視のアンチパターン 振る舞いを監視することが大事。OS のメトリクスの監視はプライベートメソッドのテストとよく似ていると思った。
※ レガシーコードや特別な理由を除いて「プライベートメソッドのテストは書かない」ということは、2013 年に決着がついている。
プライベートメソッドのユニットテストは書かないもの？ - QA@IT 3章　アラート、オンコール、インシデント管理 &ldquo;アラートにメールを使うのをやめよう&rdquo;
それな。
そういえば以前、こんな記事を書いた。
ソーシャルPLUSで 1 日 700 通超のアラートメールを撲滅したお話｜feedforce Engineers&rsquo; blog 今は全て Slack に送ってしまっているので、なんとかしたい。
ローテーションなあ&hellip;。365 日全員で対応している状況。幸いにもそこまでアラートは多くないが、バーンアウトの危険性はある。
頻度の多いアラートで、調査に着手し始めたとかなら、閾値を下げるなど検討したほうが良いと思った。
P35
・現場指揮官
・スクライブ（書記官）
・コミュニケーションの調整役
・SME（実際にインシデント対応する人）
振り返り（postmortem）大事。会社では大きなインシデントのあとに振り返る文化が根付きつつある。
4章　統計入門 たったの 10 ページにまとまっており、非常に良かった。
5章　ビジネスを監視する Redash での可視化やアラートの設定など、もう少し詰めようと思った。]]></description>
        </item>
        <item>
            <title><![CDATA[自作の GitHub Action を GitHub Marketplace に公開してみた]]></title>
            <link>https://masutaka.net/2019-02-11-1/</link>
            <guid>https://masutaka.net/2019-02-11-1/</guid>
            <pubDate>Mon, 11 Feb 2019 00:00:00 GMT</pubDate>
            <description><![CDATA[追記(2019-09-23):
⚠️ この記事の GitHub Actions は HCL 記法を使う古い方法です。現在は YAML 記法に変わりました。参考にしないで下さい。
 先日 [2019-02-03-1] 作った GitHub Action のリポジトリページにこんな表示が出てました。
https://github.com/masutaka/github-actions-all-in-one-project こちらのドキュメント によると、リポジトリの Release ページ から公開できるとのこと。
全部グリーンになるように、Icon や Color などを直しました 。あとは普通にリリース。
あっさりとリリースできました！
https://github.com/marketplace/actions/all-in-one-project Marketplace の目立つところに表示！
されていたのですが、ちょうど週末 Marketplace がリニューアルしたようで、最後のページ に移動されていました。まあいいか&hellip;。
現在は https://github.com/masutaka/github-actions-all-in-one-project にアクセスすると、こんなメッセージが表示されています。ここの &ldquo;View on Marketplace&rdquo; から Marketplace の当該ページに飛ばされて、インストール出来る流れになっているようです。
とは言え、結構大味な流れなので、README.md を読んで導入したほうが良いと思います。[2019-02-03-1] もどうぞ。
追記(2019-02-12):
GitHub Action の beta に申し込んでないと、上の Marketplace のページは全部見られないことを知りました。びっくり。https://github.com/features/actions から申し込めます。]]></description>
        </item>
        <item>
            <title><![CDATA[Issue や PR を作ったら自動的に GitHub Project に追加する GitHub Action を作ってみた]]></title>
            <link>https://masutaka.net/2019-02-03-1/</link>
            <guid>https://masutaka.net/2019-02-03-1/</guid>
            <pubDate>Sun, 03 Feb 2019 00:00:00 GMT</pubDate>
            <description><![CDATA[追記(2019-09-23):
⚠️ この記事の GitHub Actions は HCL 記法を使う古い方法です。現在は YAML 記法に変わりました。参考にしないで下さい。
  Issue や Pullrequest を作ったら、GitHub Project に自動追加なんてことができそうですね。
 と [2019-01-28-1] に書いたので作ってみました。
  この GitHub Action を使ったサンプルリポジトリが https://github.com/masutaka/sandbox-github-actions です。
Issue や PR を作ると GitHub Actions Trial part2 Project の To do または In progress カラムに自動的に追加されます。Fork 先からの PR でも同様です。Actions タブ で確認できますが、私以外は見られないのかな？
設定方法は簡単で、.github/main.workflow に以下を追加するだけです（GitHub Actions はまだ beta 版なので、このページ から Sign up しておく必要はあります）。
 PROJECT_URL と INITIAL_COLUMN_NAME は必須です。GITHUB_TOKEN はリポジトリに紐付いた token が自動的に使われます。詳しくはドキュメント をどうぞ。]]></description>
        </item>
        <item>
            <title><![CDATA[このブログの CI を GitHub Actions にしてみた]]></title>
            <link>https://masutaka.net/2019-01-28-1/</link>
            <guid>https://masutaka.net/2019-01-28-1/</guid>
            <pubDate>Mon, 28 Jan 2019 00:00:00 GMT</pubDate>
            <description><![CDATA[追記(2019-09-23):
⚠️ この記事の GitHub Actions は HCL 記法を使う古い方法です。現在は YAML 記法に変わりました。参考にしないで下さい。
  このブログの CI には割高なので、CircleCI あたりに乗り換える予定です。
 と [2019-01-27-1] で書いたばかりですが、舌の根も乾かぬうちに GitHub Actions に移行してみました。
料金はさておき、たまたまクラスメソッドさんの記事 を見て移行出来そうだったことと、GitHub Actions は一度素振りしてみたかったからです。
GitHub Actions とは CircleCI の Workflows と非常に良く似た機能で、Pipeline を組んで CI を実行することが出来ます。
現在はまだベータです。https://github.com/features/actions からリクエストすれば使えます。複数 Action 同時実行とか凝ったことはできないようです。時間がかかりすぎる Action も避けたほうが良いかも。
Action は自分で作ることも出来ますし、以下のような公開 Action を使うことも出来るようです。
 https://github.com/actions  https://github.com/hashicorp/terraform-github-actions   日本語記事: GitHub Actions： みなさんが開発し、GitHubで実行 - The GitHub Blog - Japan Heroku CI よりもハマりどころはありますが、作り方はとてもシンプルです。
 .github/main.workflow を作り、workflow と action を定義する 各 action に紐付いた Dockerfile を作る、または参照する  今回の実装 ファイル構成と実装はこんな感じです。]]></description>
        </item>
        <item>
            <title><![CDATA[このブログの CI を Heroku CI にしてみた]]></title>
            <link>https://masutaka.net/2019-01-27-1/</link>
            <guid>https://masutaka.net/2019-01-27-1/</guid>
            <pubDate>Sun, 27 Jan 2019 00:00:00 GMT</pubDate>
            <description><![CDATA[[2019-01-19-1] で Heroku の Hobby Dyno ($7/mo) を使い始めたので、Heroku CI も導入してみました。
やり方はこのとおり簡単です。
 pipeline を作成し、app と紐付ける Heroku CI を有効にし、GitHub とも連携する app.json を作成する  1. pipeline を作成し、App と紐付ける Heroku Dev Center &gt; Pipelines を参考にして作るだけです。
2. Heroku CI を有効にし、GitHub とも連携する pipeline 右上の Enable CI ボタンをクリックすると有効になります。
3. app.json を作成する 今回は hadolint で Dockerfile を、shellcheck でシェルスクリプトの lint をするだけのテストを書きました。
このような素朴な設定で動きます。
 test-setup と test のコンテキストは同じで、例えば test-setup で作ったファイルは test でも使えます。あと、App の環境変数も参照できますし、テスト用の環境変数を app.json に追加することも出来ます。
デフォルトでは Performance-M Dyno が使われます。Parallel Test も出来るらしいです。]]></description>
        </item>
        <item>
            <title><![CDATA[Heroku にデプロイした時、Pushover を使って通知する]]></title>
            <link>https://masutaka.net/2019-01-20-1/</link>
            <guid>https://masutaka.net/2019-01-20-1/</guid>
            <pubDate>Sun, 20 Jan 2019 00:00:00 GMT</pubDate>
            <description><![CDATA[個人の通知ツールとして、Pushover を愛用しています。[2015-03-08-1] でも紹介してます。
 GitHub の自分のリポジトリにスターが付いたら通知 Pushover gem を使った、若干複雑なケースのデプロイ通知 Heroku にデプロイしたら通知  今まで Heroku のデプロイ通知は Heroku Deploy Hooks の Email に Pushover の E-mail Gateway を指定して出来ていましたが、Heroku Deploy Hooks の Email は 2018 年 5 月に Deprecate になっていました 。
仕方がないので、Heroku Deploy Hooks の HTTP post hook で通知する方法を調べました。
デプロイ成功の通知方法 結論から書くと、GET パラメータっぽくダラダラと書けば通知出来ました。
（なぜか通知されなくて一人ハマってましたが&hellip; ）
以下は改行と半角スペースを入れて読みやすくしたものです。各パラメータは url encode が必要です。
https://api.pushover.net/1/messages.json ? user=&lt;YOUR USER/GROUP KEY&gt; &amp; token=&lt;YOUR APPLICATION API TOKEN&gt; &amp; device=iPhone &amp; priority=0 &amp; title=masutaka.]]></description>
        </item>
        <item>
            <title><![CDATA[このブログを『さくらのVPS』から『CloudFront+Heroku』に移した]]></title>
            <link>https://masutaka.net/2019-01-19-1/</link>
            <guid>https://masutaka.net/2019-01-19-1/</guid>
            <pubDate>Sat, 19 Jan 2019 00:00:00 GMT</pubDate>
            <description><![CDATA[ここ一年半くらい、このブログが乗っていたサーバをメンテンスしていませんでした。４月に Ubuntu 14.04 LTS が EOL になることと、サーバの面倒をみることに疲れてしまったので、このブログを CloudFront+Heroku に移しました。
さくらのVPSに引っ越したのは [2013-05-27-2] だったので、５年半くらい使っていたことになります。このブログ自体は静的コンテンツですが、nginx のログを fluentd に流したり、各種メトリクスを kibana や GrowthForecast で可視化したり、ちょっとしたアプリケーションを動かしたり、いろいろ実験や素振りをすることが出来ました。今までありがとう。
さて、引っ越し前後の環境の変化です。
引っ越し前（さくらのVPS ）          仮想サーバのプラン 2G、石狩リージョン、年額 18,770 円   ドメイン さくらのドメイン、年額 1,852 円   OS Ubuntu 14.04 LTS   構成管理 knife-solo   デプロイ方法 GitHub の master ブランチに push すると、CircleCI 上で capistrano が自動デプロイ   ビルド方法 capistrano でのデプロイ時に chalow が CHANGELOG メモを HTML に変換   配信方法 静的な HTML ファイルを nginx が配信    引っ越し後（CloudFront + Heroku ）          Dyno Type Hobby、年額 $7 x 12 = $84 ≒ 9,554 円   ドメイン AWS Route53、年額 $12 + ($0.]]></description>
        </item>
        <item>
            <title><![CDATA[最新の iPad（第6世代）を買った]]></title>
            <link>https://masutaka.net/2019-01-03-1/</link>
            <guid>https://masutaka.net/2019-01-03-1/</guid>
            <pubDate>Thu, 03 Jan 2019 00:00:00 GMT</pubDate>
            <description><![CDATA[2012 年 3 月に買った母の iPad の動作が非常に重たくなってきたので、ノープランで iPad を買った。
どうやら第3世代 から第6世代 にアップデートされた形になったようだ。
以前の容量は当時最大の 64GB だったが、全く必要ないようだったので 32GB に減らした。というか、32GB か 128GB の選択肢で悩んだ結果の答え。128GB は流石に多すぎる。
画面サイズは当時も今も 9.7 インチ。
なぜ突然買ったのか iPad の動作が重いのは夏に帰省した時に知っていたが、今回どうするかは特に考えていなかった。
それとは別に以前からパスワードの使い回しが気になっており、1Password をファミリープランにして、アプリを入れてとかやっていたら、iPad 自体もどうにかしたくなってきた。
母の使い方を見ていたら、Youtube 見たり、オセロやったり、星座アプリを使ったりと、ヘビーな使い方はしていない様子。初めは私の ZenPad [2016-11-01-1] を母に下げようと移行作業をやり始めた。
母のスマホは iPhone SE なので、写真連携は iPhone にも Google フォトアプリを入れるとして、リマインダーどうしよう？メモはどうにかなったっけ？とか考えていてたら、母が運用するのは無理だと悟り、iPad を買うことに決めた。それも今すぐに。
この辺りの決断は、相変わらず思い切りが良い。
どの iPad を買えばよいか ネットで調べたところ、最新の iPad は第6世代で、評判は良いみたいだった。発売は 2018 年 3 月で、MacRumors 的には Caution だった けど、今欲しいので問題ないと判断した。
他の選択肢として、iPad Pro はオーバースペック、iPad mini は母には画面サイズが小さいようだった。
判断したは良いが、浜松には Apple Store は存在しない。ビックカメラ浜松店が正規サービスプロバイダという役割らしい。
ただ、そのビックカメラに行ったら品切れ、ヤマダ電機も同じで、3 件目のケーズデンキでようやく買うことが出来た。
家でしか使わないので、AppleCare+ は購入しなかった。]]></description>
        </item>
        <item>
            <title><![CDATA[沼 Advent Calendar 2018 総括]]></title>
            <link>https://blog.tmd45.jp/entry/2018/12/25/143619</link>
            <guid>https://blog.tmd45.jp/entry/2018/12/25/143619</guid>
            <pubDate>Tue, 25 Dec 2018 05:36:19 GMT</pubDate>
            <description><![CDATA[<p>メリークリスマス、皆様。各 Advent Calendar も最終日、クリスマスでございます。</p>

<p>この記事は <a href="https://adventar.org/calendars/2946">沼 Advent Calendar 2018</a> の 25 日目の記事です。昨日は <a href="https://adventar.org/users/11676">aini_bellwood</a> さんの『<a href="https://bellwood-works.hatenablog.com/entry/2018/12/24/000000">ベイブレードの話 - Bellwood Works</a>』でした。回転吸収かっこいい！見た目も性能も！心が中３男子なのでぐっと来ます。</p>

<p>さてそんなわけで、沼 Advent Calendar へご参加いただいた皆様ありがとうございました。</p>

<p><b>総勢 19 個の沼記事が集まりました</b>。ちゃんと全部読ませていただいてます。いや〜 どれも面白かった。人の沼は楽しいなぁ。非常に俺得な Advent Calendar を作ってしまったなぁと思った次第でございます(ﾟ∀ﾟ)ﾌﾊﾊﾊﾊ</p>

<p><span style="color: #cccccc">23:22 追記： asonas さんが 8 日目の記事を書いてくれて「総勢 18 個」から「総勢 19 個」の記事になりました！師走の忙しいなかありがとう！！まとめ一覧のなかにもコメント追加済みです。</span></p>

<p><figure class="figure-image figure-image-fotolife" title="沼 Advent Calendar 2018 - Adventar"><span itemscope itemtype="http://schema.org/Photograph"><img src="https://cdn-ak.f.st-hatena.com/images/fotolife/t/tmd45/20181225/20181225135311.png" alt="f:id:tmd45:20181225135311p:plain" title="f:id:tmd45:20181225135311p:plain" class="hatena-fotolife" itemprop="image"></span><figcaption>沼 Advent Calendar 2018 - Adventar</figcaption></figure></p>

<ul class="table-of-contents">
    <li><a href="#まとめ">まとめ</a><ul>
            <li><a href="#インク沼に足首らへんまで浸かっている話---TMD45βLOG">インク沼に足首らへん？まで浸かっている話 - TMD45'β'LOG!!!</a></li>
            <li><a href="#リアル脱出ゲームという沼---真夜中の色彩">リアル脱出ゲームという沼 - 真夜中の色彩</a></li>
            <li><a href="#ミュージカルと私---SHOIs-blog">ミュージカルと私 - SHOI’s blog</a></li>
            <li><a href="#私は沼にハマっていないということを主張しておきたい---はのちゃ爆発">私は沼にハマっていないということを主張しておきたい - はのちゃ爆発</a></li>
            <li><a href="#ボドゲ沼に辿り着くまでの紆余曲折---kano-e-no-memo">ボドゲ沼に辿り着くまでの紆余曲折 - kano-e no memo</a></li>
            <li><a href="#アドベンチャーゲームはいいぞ核心ネタバレなし---よもやま話β版">アドベンチャーゲームはいいぞ(核心ネタバレなし) - よもやま話β版</a></li>
            <li><a href="#2018年に関西で観た歌舞伎の感想--ごひいきに">2018年に関西で観た歌舞伎の感想 | ごひいきに</a></li>
            <li><a href="#沼完全攻略ガイド---良いあそなすちゃん">沼完全攻略ガイド - 良いあそなすちゃん</a></li>
            <li><a href="#中古ガジェット沼について---どくぴーの備忘録">中古ガジェット沼について - どくぴーの備忘録</a></li>
            <li><a href="#オールドレンズのはなし---タイトルがないとトップページに戻りにくいことに気がついた">オールドレンズのはなし - タイトルがないとトップページに戻りにくいことに気がついた</a></li>
            <li><a href="#女児アニメを楽しむ---mizukmb">女児アニメを楽しむ - mizukmb</a></li>
            <li><a href="#2018ベスト--jgs---Self-Made-Keyboards-in-Japan">2018ベスト | jgs - Self-Made Keyboards in Japan</a></li>
            <li><a href="#沼の三種盛り合わせレシピ---自転車カメラキャンプ---Infinito-Nirone-7">沼の三種盛り合わせレシピ - 自転車、カメラ、キャンプ - Infinito Nirone 7</a></li>
            <li><a href="#ゲーム音楽の沼---兄貴の伝説---hatena-edition--">ゲーム音楽の沼 - 兄貴の伝説 - hatena edition -</a></li>
            <li><a href="#標準ズームがすき---azmins-diary">標準ズームがすき - azmin's diary</a></li>
            <li><a href="#キーボード沼マップぬまっぷ">キーボード沼マップ(ぬまっぷ)</a></li>
            <li><a href="#将太の寿司について---kasei_sanのブログ">将太の寿司について - kasei_sanのブログ</a></li>
            <li><a href="#漫画と私kysnnote">漫画と私｜kysn｜note</a></li>
            <li><a href="#ベイブレードの話---Bellwood-Works">ベイブレードの話 - Bellwood Works</a></li>
        </ul>
    </li>
    <li><a href="#おわりに">おわりに</a></li>
</ul>

<h3 id="まとめ">まとめ</h3>

<p>私のコメントは読まなくていいんで、みんなお互いの沼をのぞきにいってくれよな！<span style="color: #cccccc">（そしてうっかり足を踏み外せ！）</span></p>

<h4 id="インク沼に足首らへんまで浸かっている話---TMD45βLOG"><a href="https://blog.tmd45.jp/entry/2018/12/01/000000">インク沼に足首らへん？まで浸かっている話 - TMD45'β'LOG!!!</a></h4>

<p>このあと大きめのボトル 10 本ほど増えました。やだこわい</p>

<h4 id="リアル脱出ゲームという沼---真夜中の色彩"><a href="https://blog.midnightblue.jp/entry/2018/12/02/120838">リアル脱出ゲームという沼 - 真夜中の色彩</a></h4>

<p>私も一度参加したことがありますが、リアル脱出ゲームは参加体験型エンタテイメントとして最高だと思います。また参加したいな〜</p>

<h4 id="ミュージカルと私---SHOIs-blog"><a href="https://shoi.hatenadiary.jp/entry/2018/12/03/000000">ミュージカルと私 - SHOI’s blog</a></h4>

<p>好きが詰まってて、自分もミュージカル見に行きたくなりました。諸事情で映画館とか劇場とかに居られない質なのですが、なんとか近いうちに見に行けたらなぁ！</p>

<h4 id="私は沼にハマっていないということを主張しておきたい---はのちゃ爆発"><a href="http://hanocha.hateblo.jp/entry/2018/12/06/011401">私は沼にハマっていないということを主張しておきたい - はのちゃ爆発</a></h4>

<p>沼の住人には二種類いる。沼に浸かっていることを認めている人間と、認めていない人間だ( ｰ`дｰ´)ｷﾘｯ カメラ・<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%EC%A5%F3%A5%BA%BE%C2">レンズ沼</a>、オーディオ沼、自作キーボード沼。Tech な沼ですね。</p>

<h4 id="ボドゲ沼に辿り着くまでの紆余曲折---kano-e-no-memo"><a href="http://kano-e.hatenablog.com/entry/2018/12/08/150745">ボドゲ沼に辿り着くまでの紆余曲折 - kano-e no memo</a></h4>

<p><a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%DC%A1%BC%A5%C9%A5%B2%A1%BC%A5%E0">ボードゲーム</a>は気づいたら増えてるというのがこわいですねー。ホラーですねー。なんでだろー。<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%D5%A5%A1%A5%DF%A5%B3%A5%F3">ファミコン</a>・<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%DE%A5%A4%A5%B3%A5%F3">マイコン</a>が入り口っていうのがイイですね。世代を感じます。</p>

<h4 id="アドベンチャーゲームはいいぞ核心ネタバレなし---よもやま話β版"><a href="http://beta-chelsea.hatenadiary.jp/entry/2018/12/06/022545">アドベンチャーゲームはいいぞ(核心ネタバレなし) - よもやま話β版</a></h4>

<p>私も "Ib" 大好きなので、サムネ見た瞬間に「あっ！！！」ってなりました。インディーズの<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%A2%A5%C9%A5%D9%A5%F3%A5%C1%A5%E3%A1%BC%A5%B2%A1%BC%A5%E0">アドベンチャーゲーム</a>は、（比較的）短時間で面白いストーリーが楽しめるのがいいと思ってます。</p>

<h4 id="2018年に関西で観た歌舞伎の感想--ごひいきに"><a href="https://gohiiki.emma-design.net/2018-kabukireport/">2018年に関西で観た歌舞伎の感想 | ごひいきに</a></h4>

<p>観劇沼二本目、歌舞伎。こちらも各感想から愛を感じました。うちは<a href="https://www.meijiza.co.jp/">明治座</a>が近いのですが、歌舞伎や日本芸能の舞台も一度は見ておきたいものです。</p>

<h4 id="沼完全攻略ガイド---良いあそなすちゃん"><a href="http://asonas.hatenablog.com/entry/2018/12/25/201606">沼完全攻略ガイド - 良いあそなすちゃん</a></h4>

<p>12月8日428時28分に書いてくれました。<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%EC%A5%F3%A5%BA%BE%C2">レンズ沼</a>の<a class="keyword" href="http://d.hatena.ne.jp/keyword/%C2%E7%BB%B0%B8%B5">大三元</a>とか、エンドゲームの話から、すっごく深くて狭い穴（沼）が大量に点在してる情景が浮かびました。たのしそうですね。</p>

<h4 id="中古ガジェット沼について---どくぴーの備忘録"><a href="http://e10dokup.hateblo.jp/entry/2018/12/09/021901">中古ガジェット沼について - どくぴーの備忘録</a></h4>

<p>同僚のガジェット好き・電子工作好きの人たちから「わかる」「あるある」ってめっちゃ感想もらいました。わかる。</p>

<h4 id="オールドレンズのはなし---タイトルがないとトップページに戻りにくいことに気がついた"><a href="https://uvb-76.hatenablog.com/entry/2018/12/07/172537">オールドレンズのはなし - タイトルがないとトップページに戻りにくいことに気がついた</a></h4>

<p><a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%EC%A5%F3%A5%BA%BE%C2">レンズ沼</a>二本目、オールドレンズ。味のあるレンズっていいですよね。昔<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%C8%A5%A4%A5%AB%A5%E1%A5%E9">トイカメラ</a>にハマってましたが、ガチのカメラ持ちでこっちのレンズに興味持ち出したら沼に沈んでたかもしれないと思います。</p>

<h4 id="女児アニメを楽しむ---mizukmb"><a href="https://scrapbox.io/mizukmb/%E5%A5%B3%E5%85%90%E3%82%A2%E3%83%8B%E3%83%A1%E3%82%92%E6%A5%BD%E3%81%97%E3%82%80">女児アニメを楽しむ - mizukmb</a></h4>

<p>女児アニメ沼。なぜか<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%D7%A5%EA%A5%AD%A5%E5%A5%A2">プリキュア</a>とか？と思ってましたが プリ<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%C6%A5%A3%A1%BC">ティー</a>シリーズのお話でした。幼女おじさん（なんか並べただけで犯罪臭がする…）の配慮、おつかれさまです。</p>

<h4 id="2018ベスト--jgs---Self-Made-Keyboards-in-Japan"><a href="https://scrapbox.io/self-made-kbds-ja/2018%E3%83%99%E3%82%B9%E3%83%88_%7C_jgs">2018ベスト | jgs - Self-Made Keyboards in Japan</a></h4>

<p>自作キーボード沼二本目。そもそもが "Self-Made Keyboards in Japan"（日本自作キーボード）の <a class="keyword" href="http://d.hatena.ne.jp/keyword/scrapbox">scrapbox</a> での参加…沼感増しますね。TOFU の画像が犯行予告みたいで（？）かっこいい。</p>

<h4 id="沼の三種盛り合わせレシピ---自転車カメラキャンプ---Infinito-Nirone-7"><a href="https://keithyokoma.hatenablog.com/entry/2018/12/15/100000">沼の三種盛り合わせレシピ - 自転車、カメラ、キャンプ - Infinito Nirone 7</a></h4>

<p>沼の相乗効果、あると思います。とくにこの３つの組み合わせはヤバいですね…わかりみ。同じ組み合わせでハマってるひと、自分の近くでも見かけます。</p>

<h4 id="ゲーム音楽の沼---兄貴の伝説---hatena-edition--"><a href="http://mmorita.hatenablog.com/entry/2018/12/16/003805">ゲーム音楽の沼 - 兄貴の伝説 - hatena edition -</a></h4>

<p>目次<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A4%AB%A4%E9%A4%B7">からし</a>てすごく沼感ある記事でした。私も<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%B2%A1%BC%A5%E0%B2%BB%B3%DA">ゲーム音楽</a>のクラシックコンサートとかライブとか時々聞きに行きます。ゲーム体験と相まって大変良い。自分で演奏までしてるのすごい。</p>

<h4 id="標準ズームがすき---azmins-diary"><a href="http://azmin.hatenablog.com/entry/2018/12/25/072337">標準ズームがすき - azmin's diary</a></h4>

<p><a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%EC%A5%F3%A5%BA%BE%C2">レンズ沼</a>三本目。<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%EC%A5%F3%A5%BA%BE%C2">レンズ沼</a>は数あれど標準ズームの沼って初めて聞いたかもしれないです。写真かっこいいなぁ。自分も仕舞い込んでる<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%C7%A5%B8%A5%A4%A5%C1">デジイチ</a>ひっぱりだしたくなりました。</p>

<h4 id="キーボード沼マップぬまっぷ"><a href="https://blog.ikejima.org/make/keyboard/2018/12/23/keyboard-numa.html">キーボード沼マップ(ぬまっぷ)</a></h4>

<p>ほんとに今年はエンジニア界隈で自作キーボードが一気に広まった年でしたね。自分の身の回りもすごいです。ぬまっぷ見ただけでも広く深いのがよく分かる、おもしろいまとめでした。</p>

<h4 id="将太の寿司について---kasei_sanのブログ"><a href="https://blog.kasei-san.com/entry/2018/12/23/014815">将太の寿司について - kasei_sanのブログ</a></h4>

<p>内容は「ニンジャスレイヤーの動く沼」。忍殺ファン胡乱界隈の皆様が、集団でいろんな沼に浸かりに行く様を私も遠くからたのしく拝見しています。</p>

<h4 id="漫画と私kysnnote"><a href="https://note.mu/kysn/n/n25e0b2765b94">漫画と私｜kysn｜note</a></h4>

<p>漫画沼。実際お仕事でも漫画に関わってるという沼っぷり。エモくてちょっと感動しました。</p>

<h4 id="ベイブレードの話---Bellwood-Works"><a href="https://bellwood-works.hatenablog.com/entry/2018/12/24/000000">ベイブレードの話 - Bellwood Works</a></h4>

<p>冒頭でも触れましたが、いまのおもちゃって進化してますよねぇ。<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%D9%A5%A4%A5%D6%A5%EC%A1%BC%A5%C9">ベイブレード</a>は出た当初からベーゴマの進化系として男の子たちの心を鷲掴みにしていたと思いますが、昨今はまたすごいことになってるんですね。</p>

<h3 id="おわりに">おわりに</h3>

<p>はい、というわけで沼をまとめる沼の記事でした。</p>

<p>そろそろ社会人のみなさまはボーナスなんてものの支給もあったのではないかとご推察いたします。楽しい沼クリスマスを。</p>
]]></description>
            <enclosure url="https://cdn-ak.f.st-hatena.com/images/fotolife/t/tmd45/20181225/20181225135311.png" length="0" type="image/png"/>
        </item>
        <item>
            <title><![CDATA[『どもる体』を読んだ]]></title>
            <link>https://masutaka.net/2018-12-25-1/</link>
            <guid>https://masutaka.net/2018-12-25-1/</guid>
            <pubDate>Tue, 25 Dec 2018 00:00:00 GMT</pubDate>
            <description><![CDATA[しばらく前に読み終わった。
ここ数年、言葉を発しづらいことがある。言葉は思い浮かんでいるけど、口から出てこなかったり、ろれつが回らなかったりする。悩んでいると言うよりも不便で困っている。
一度気になって東大病院で MRI 検査を受けたこともあったっけ。結果は異常なし。
仕事で疲れた夕方や、酒を飲んだときに、発しづらくなる気がする。逆に元気いっぱいの午前中は、非常に滑舌が良い。リラックスしている時も問題がないことが多い。
そんな中で HONZ の記事 で目にしたのがこの本を買ったきっかけ。
HONZ は私がフィードリーダーで購読している、数少ない技術系以外のサイト。時々面白そうな本が見つかるので重宝している。もっとも今回のように実際に買うことは少なくて、書評で読んだ気になることがほとんど。ふと傍らに目をやると積ん読となった技術書達が。うっ、頭が・・・！
話が脱線した。
この本はどもり（吃音）の原因も解決方法も提示しない。あくまで観察するだけ。
そもそも私の場合、吃音であること自体はっきりしなかったが、この本を読んで典型的な吃音だと理解した。気が向いたら医者にかかるかもしれない。
吃音というと一般的には、「わわわわ私は」のような「連発」をイメージすることが多いと思う。
私は症状としてはあるけど、あまり困ってはいなかった。喋れないわけではないし、幸いにもバカにする人がいる環境でもない。ちなみにこの本を読んだ後、改めて周囲を観察してみたら、頻度の多い少ないはあるにせよ、連発する人は意外にいるなと思った。
一番困るのが「難発」。「・・・・」のように、「私は」などが出てこないので、変な雰囲気になる。
仕方がないので「言い換え」を試みるわけだが、代わりの単語が出てこないことは多いし、微妙にニュアンスが変わることもある。酒を飲んでいると頭がまわらないので、特に代わりの単語が出てこない。
酒で思い出したが、飲み会の時などに面白いことを思いついて、タイミングを計って喋ろうとした時も、難発が出て言えない時がある。
吃音は「言葉の代わりに体が伝わってしまう」ことらしいが、難発の時は体が硬直するのがよく分かる。
以上が最初に書いた「不便で困る」ということ。
どうやら歌っている時や、プレゼンをしている時などは吃音が出ないらしい。最近歌ってないので前者はよく分からないが、後者は多分そう。
根本原因は、無意識のうちにリラックス出来ていないからかも。自分だけの特殊な問題ではないことが分かったことと、こっそりリズムを刻むなどの回避策はなくはないので、うまく付き合っていこうと思う。]]></description>
        </item>
        <item>
            <title><![CDATA[type の話]]></title>
            <link>https://shiromoji.hatenablog.jp/entry/2018/12/23/235900</link>
            <guid>https://shiromoji.hatenablog.jp/entry/2018/12/23/235900</guid>
            <pubDate>Sun, 23 Dec 2018 14:59:00 GMT</pubDate>
            <description><![CDATA[<h3>はじめに</h3>

<p>この記事は、<a href="https://adventar.org/calendars/3235">Feedforce Advent Calendar 2018</a> の 23 日目の記事です。前日は、あおいさんによる「<a href="https://note.mu/pnao/n/n4f31c41633b5">平成の終わりに非ヲタに聴いてほしいハロプロソング5選</a>」でした。<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%CF%A5%ED%A5%D7%A5%ED">ハロプロ</a>……自分が音楽に疎すぎて話が広げられないのですが、あれですよね、<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A1%EE-ute">℃-ute</a> が話題になって来たころ、こう<a class="keyword" href="http://d.hatena.ne.jp/keyword/%CA%B8%BB%FA%A5%B3%A1%BC%A5%C9">文字コード</a>的にチャレンジングなユニット名だな、などと考えていたのが記憶に残っています。</p>

<p>さて、ここから本題で、今回はとりとめもなく type について書いてみます。</p>

<h3>type</h3>

<p>type とはそのまま「型」なんですが、文字界隈のみなさんはご存じのとおり、活字だったり、その書体だったり、そのへんのものをざっくり type と呼びます。もう少しきっちり言うと、活字（スタンプみたいなあれです）は <a class="keyword" href="http://d.hatena.ne.jp/keyword/movable%20type">movable type</a> で、いろいろ並べ替えて使える文字の型、といった感じでしょうか。活字を組む（並べる）ことは<a class="keyword" href="http://d.hatena.ne.jp/keyword/%C1%C8%C8%C7">組版</a> typesetting ですし、活字の表面に凸状に浮かび上がっている文字の形は書体 typeface といいます。まんまですね。</p>

<p>活字を組んできれいな版面を作る技術が<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%BF%A5%A4%A5%DD%A5%B0%A5%E9%A5%D5%A5%A3">タイポグラフィ</a> typography で、誤植の <a class="keyword" href="http://d.hatena.ne.jp/keyword/typo">typo</a> は typographic error の略らしいです。会社名や商品名の「ロゴ」は<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%ED%A5%B4%A5%BF%A5%A4%A5%D7">ロゴタイプ</a> logotype の略ですね。活字で文書を書く機械はタイプライター typewriter ですし、タイプライターを打つことはタイピング typing です。タイプライターを電信（電気通信）と組み合わせたシステムが<a href="https://ja.wikipedia.org/wiki/%E3%83%86%E3%83%AC%E3%82%BF%E3%82%A4%E3%83%97%E7%AB%AF%E6%9C%AB">テレタイプ</a> teletype で、そこから来た TTY という略称・概念は、今でも <a class="keyword" href="http://d.hatena.ne.jp/keyword/Unix">Unix</a> 系のシステムで目にします<a href="#f-fc4466bd" name="fn-fc4466bd" title="テレタイプは文字コードの歴史的にもおもしろいので、興味のある方は『文字符号の歴史―欧米と日本編』あたりをどうぞ。">*1</a>。</p>

<p>あ、ちなみに金属活字は、<a href="https://www.youtube.com/watch?v=rDZ0bxPoefY">母型（ぼけい）という鋳型に鉛合金を流し込んで鋳造する</a>んですが、母<b>型</b>といっても英語では matrix ですね。</p>

<p><figure class="figure-image figure-image-fotolife" title="金属活字とその母型"><span itemscope itemtype="http://schema.org/Photograph"><img src="https://cdn-ak.f.st-hatena.com/images/fotolife/m/mashabow/20181223/20181223233559.jpg" alt="f:id:mashabow:20181223233559j:plain" title="f:id:mashabow:20181223233559j:plain" class="hatena-fotolife" itemprop="image"></span><figcaption>金属活字とその母型<a href="#f-dbf09dd2" name="fn-dbf09dd2" title="2017年3月11日に開催された《タイポグラフィの世界5 戦後日本の金属活字》で展示されていたものです。">*2</a></figcaption></figure></p>

<p>現代のデジタルフォントはデータ以外に実体がありませんが、そのフォントフォーマットには TrueType や OpenType という名前がつけられています。フォントのデザイナーは type designer ですし、フォントを制作している会社は type foundry（つまり活字鋳造所）と今でも呼ばれます。わたしは前職、<a href="http://typeproject.com/">タイププロジェクト</a>という会社でフォントのエンジニアをしていました<a href="#f-d4db3462" name="fn-d4db3462" title="NHK 美の壺 取材こぼれ話 のページの《2018年6月22日放送 「心を伝える フォント」こぼれ話》という項に、タイププロジェクトの職場の様子（と自分の顔面）がちらっと載っています。">*3</a>。</p>

<p>さてさて。</p>

<p>7月にそのタイププロジェクトを退職し、現在<a href="https://www.feedforce.jp/">フィードフォース</a>でフロントエンドエンジニア修行中です。自分が所属しているプロダクトで、TypeScript を導入しようということになり<a href="#f-41cf73fb" name="fn-41cf73fb" title="正確に言うと、Flow から TypeScript への移行です。">*4</a>、ここしばらく TypeScript と格闘しています。</p>

<p>TypeScript。<a class="keyword" href="http://d.hatena.ne.jp/keyword/Microsoft">Microsoft</a> が TypeScript を公開した2012年にこんなことをつぶやいていたのですが、</p>

<p><blockquote class="twitter-tweet" data-lang="HASH(0xf50d7a8)"><p lang="ja" dir="ltr">TypeScript って文字に関係してそうで別に関係してない</p>&mdash; mashabow (@mashabow) <a href="https://twitter.com/mashabow/status/253060102263812096?ref_src=twsrc%5Etfw">October 2, 2012</a></blockquote><script async src="https://platform.twitter.com/widgets.js" charset="utf-8"></script></p>

<p>結局今年の夏まで勉強せずに来てしまったため、上記の type 好きとしては若干引け目を感じておりました。ちなみに文字界隈で script といえば「<a href="http://d.hatena.ne.jp/keyword/%CD%D1%BB%FA%B7%CF">用字系</a>」の意味ですね。</p>

<p>導入時の設定（tsconfig.<a class="keyword" href="http://d.hatena.ne.jp/keyword/json">json</a>, TSLint, Babel, Webpack, …）に慣れていなくて苦労しましたが、文法や概念自体は比較的すんなり飲み込めた感触です。昔ちょっと触った <a class="keyword" href="http://d.hatena.ne.jp/keyword/C%23">C#</a> や <a class="keyword" href="http://d.hatena.ne.jp/keyword/ActionScript">ActionScript</a> をふわっと思い出しました。入門者向けのガイドだと、ES201x 側の機能の説明にページが割かれているものが多かったんですが、その点、@vvakame さんの以下のサイトはコンパクトで、手っ取り早く学ぶにはちょうどよい感じでした。</p>

<ul>
<li><a href="http://typescript.ninja/typescript-in-definitelyland/">Revised Revised 型の国のTypeScript | Revised Revised TypeScript in Definitelyland</a></li>
</ul>


<p>入門レベルを脱した後も、Qiita 上の <a href="https://qiita.com/search?utf8=%E2%9C%93&amp;sort=created&amp;q=user%3Avvakame+typescript+%E5%A4%89%E6%9B%B4%E7%82%B9">TypeScript x.y.z 変更点</a> 記事にはいつもお世話になっています。</p>

<p>で、静的型付けや<a class="keyword" href="http://d.hatena.ne.jp/keyword/%B7%BF%BF%E4%CF%C0">型推論</a>、やっていることや仕組みはなんとなくわかるのですが、ちゃんとした仕組みについてはそういえば理解していませんでした。また、社内の<a class="keyword" href="http://d.hatena.ne.jp/keyword/%B4%D8%BF%F4%B7%BF%A5%D7%A5%ED%A5%B0%A5%E9%A5%DF%A5%F3%A5%B0">関数型プログラミング</a>に強いエンジニアから<a class="keyword" href="http://d.hatena.ne.jp/keyword/%B4%D8%BF%F4%B7%BF%A5%D7%A5%ED%A5%B0%A5%E9%A5%DF%A5%F3%A5%B0">関数型プログラミング</a>圧を感じることもあり、いい加減そのへん勉強しようかと、適当に検索して出てきた筑波大の講義資料でも読んでみました。</p>

<ul>
<li><a href="http://www.cs.tsukuba.ac.jp/~kam/complogic/">計算論理学</a></li>
</ul>


<p>そしたら、なかなかおもしろいんです。型なしラムダ計算のあたりは自分も学部時代に講義でやって、おもしろいー！と思っていたんですが、その自然な延長で型付け・<a class="keyword" href="http://d.hatena.ne.jp/keyword/%B7%BF%BF%E4%CF%C0">型推論</a>ができるんですね。この次は何を読めばいいのかな、と思って「おすすめの（<b>わかりやすい</b>）本などあったら教えてください 🙏」と社内のフロントエンドミーティングで聞いてみたところ、以下のふたつをおすすめされました。</p>

<ul>
<li><a href="https://github.com/MostlyAdequate/mostly-adequate-guide">MostlyAdequate/mostly-adequate-guide: Mostly adequate guide to FP (in javascript)</a></li>
<li><a href="https://amzn.to/2BMyMGf">『すごい Haskell たのしく学ぼう！』</a></li>
</ul>


<p>前者はちょうど読み終えたところなんですが、演習問題があって回答を自動で採点してくれるところがおもしろいですね。<a class="keyword" href="http://d.hatena.ne.jp/keyword/JavaScript">JavaScript</a> は分かっている人向けです。英語の言い回しがちょっと難しい気がしますが、<a class="keyword" href="http://d.hatena.ne.jp/keyword/%B4%D8%BF%F4%B7%BF%A5%D7%A5%ED%A5%B0%A5%E9%A5%DF%A5%F3%A5%B0">関数型プログラミング</a>に対する苦手感（昔 <a class="keyword" href="http://d.hatena.ne.jp/keyword/Lisp">Lisp</a> を触ろうとしてどうも馴染めなかった）はだいぶ解消されました。この調子で、後者のすごいH本もこれから読もうかと思います。</p>

<h3>おわりに</h3>

<p>というわけで、近況報告も兼ねて、とりとめのない type の話でした。そのうち、「どちらの type にも詳しいです！！！」と言えるようになりたいですね。</p>

<p>明日の <a href="https://adventar.org/calendars/3235">Feedforce Advent Calendar 2018</a> は <a href="https://twitter.com/meihong">@meihong</a> さんです。なにやら、なにかしらハートフルな内容を書いてくださるようです。それでは良い休日を！</p>
<div class="footnote">
<p class="footnote"><a href="#fn-fc4466bd" name="f-fc4466bd" class="footnote-number">*1</a><span class="footnote-delimiter">:</span><span class="footnote-text">テレタイプは<a class="keyword" href="http://d.hatena.ne.jp/keyword/%CA%B8%BB%FA%A5%B3%A1%BC%A5%C9">文字コード</a>の歴史的にもおもしろいので、興味のある方は『<a href="https://amzn.to/2BMr279">文字符号の歴史―欧米と日本編</a>』あたりをどうぞ。</span></p>
<p class="footnote"><a href="#fn-dbf09dd2" name="f-dbf09dd2" class="footnote-number">*2</a><span class="footnote-delimiter">:</span><span class="footnote-text">2017年3月11日に開催された《<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%BF%A5%A4%A5%DD%A5%B0%A5%E9%A5%D5%A5%A3">タイポグラフィ</a>の世界5 戦後日本の金属活字》で展示されていたものです。</span></p>
<p class="footnote"><a href="#fn-d4db3462" name="f-d4db3462" class="footnote-number">*3</a><span class="footnote-delimiter">:</span><span class="footnote-text"><a href="http://www4.nhk.or.jp/tsubo/179/">NHK 美の壺 取材こぼれ話</a> のページの《2018年6月22日放送 「心を伝える フォント」こぼれ話》という項に、タイププロジェクトの職場の様子（と自分の顔面）がちらっと載っています。</span></p>
<p class="footnote"><a href="#fn-41cf73fb" name="f-41cf73fb" class="footnote-number">*4</a><span class="footnote-delimiter">:</span><span class="footnote-text">正確に言うと、<a href="https://flow.org/">Flow</a> から TypeScript への移行です。</span></p>
</div>]]></description>
            <enclosure url="https://cdn-ak.f.st-hatena.com/images/fotolife/m/mashabow/20181223/20181223233559.jpg" length="0" type="image/jpg"/>
        </item>
        <item>
            <title><![CDATA[『オブジェクト指向設計実践ガイド』の読書会をやっています]]></title>
            <link>https://developer.feedforce.jp/entry/2018/12/22/191620</link>
            <guid>https://developer.feedforce.jp/entry/2018/12/22/191620</guid>
            <pubDate>Sat, 22 Dec 2018 10:16:20 GMT</pubDate>
            <description><![CDATA[<p><a href="http://blog.hatena.ne.jp/daido1976/" class="hatena-id-icon"><img src="https://cdn.profile-image.st-hatena.com/users/daido1976/profile.png" width="16" height="16" alt="" class="hatena-id-icon">id:daido1976</a> です。入社してからあっという間に8ヶ月が経ちました。</p>

<p>この記事は <a href="https://adventar.org/calendars/3235">feedforce Advent Calendar 2018</a> の16日目の記事です。(遅くなってごめんなさい…)</p>

<p>15日目は <a href="http://blog.hatena.ne.jp/pokotyamu/" class="hatena-id-icon"><img src="https://cdn.profile-image.st-hatena.com/users/pokotyamu/profile.png" width="16" height="16" alt="" class="hatena-id-icon">id:pokotyamu</a> が <a href="https://pokotyamu.hatenablog.com/entry/2018/12/15/161234">障害対応に強くなりたいのでレポートの書き方について考えてみた</a> を書いてくれました！私も障害対応に強いエンジニアを目指して頑張りやす。</p>

<p>さて、今回は現在弊社で行っている『オブジェクト指向設計実践ガイド』の読書会の紹介をしたいと思います。</p>

<p>ちなみに昨年も読書会は開催されていたようですね。</p>

<p><iframe src="https://hatenablog-parts.com/embed?url=https%3A%2F%2Fdeveloper.feedforce.jp%2Fentry%2F2017%2F10%2F27%2F183338" title="『オブジェクト指向設計実践ガイド』を読んで - Feedforce Developer Blog" class="embed-card embed-blogcard" scrolling="no" frameborder="0" style="display: block; width: 100%; height: 190px; max-width: 500px; margin: 10px 0px;"></iframe><cite class="hatena-citation"><a href="https://developer.feedforce.jp/entry/2017/10/27/183338">developer.feedforce.jp</a></cite></p>

<p>私個人としては前回の『メタプログラミングRuby』の読書会以来2度目の読書会です！</p>

<p><iframe src="https://hatenablog-parts.com/embed?url=https%3A%2F%2Fdeveloper.feedforce.jp%2Fentry%2F2018%2F07%2F19%2F000000" title="新人エンジニア達がメタプログラミング Ruby の読書感想会をやった話 - Feedforce Developer Blog" class="embed-card embed-blogcard" scrolling="no" frameborder="0" style="display: block; width: 100%; height: 190px; max-width: 500px; margin: 10px 0px;"></iframe><cite class="hatena-citation"><a href="https://developer.feedforce.jp/entry/2018/07/19/000000">developer.feedforce.jp</a></cite></p>

<h2>で、どんな感じ？</h2>

<h3>ざっくり進め方</h3>

<p>週に一度、参加したいメンバーが集まって毎回1章ずつ進めていきます。(現在第3章まで終了)</p>

<p>その日やる章は読んできている前提で、事前に『気になったこと』『役立ちそうなこと』『疑問に思ったこと』『その他諸々話したいこと』などを付箋に書いてきてもらいます。</p>

<p>それをホワイトボードに貼りながら、みんなであれこれ話し合います。その日の読書会の振り返りも含めて所要時間は1〜1.5時間ぐらいです。</p>

<h3>『オブジェクト指向設計実践ガイド』読書会のホワイトボード</h3>

<p><figure class="figure-image figure-image-fotolife" title="第3章のホワイトボード"><span itemscope itemtype="http://schema.org/Photograph"><img src="https://cdn-ak.f.st-hatena.com/images/fotolife/d/daido1976/20181220/20181220211224.jpg" alt="f:id:daido1976:20181220211224j:plain" title="f:id:daido1976:20181220211224j:plain" class="hatena-fotolife" itemprop="image"></span><figcaption>個人的にすごく好きな第3章のホワイトボード</figcaption></figure></p>

<h3>出てきた話題に個人的な感想を添えて</h3>

<p>先日やって記憶に新しい第3章の話が中心ですが、、、</p>

<h4>なんでもかんでも DI すればいいってもんでもない</h4>

<p>こういう本で出てきたテクニックってすぐプロダクトのコードで使いたくなるけど、何も考えずに DI しまくると、逆に読みづらいコードになるよね、というお話。</p>

<p>本書内でも依存を減らす別解として DI ではなく、以下の <code>Gear#wheel</code> のようにクラス内の別メソッドにインスタンスの作成を切り出す方法も紹介されていましたね。</p>

<pre class="code lang-ruby" data-lang="ruby" data-unlink><span class="synPreProc">class</span> <span class="synType">Gear</span>
  <span class="synStatement">attr_reader</span> <span class="synConstant">:chainring</span>, <span class="synConstant">:cog</span>, <span class="synConstant">:rim</span>, <span class="synConstant">:tire</span>, <span class="synConstant">:wheel</span>
  <span class="synPreProc">def</span> <span class="synIdentifier">initialize</span>(chainring, cog, rim, tire)
    <span class="synIdentifier">@chainring</span> = chainring
    <span class="synIdentifier">@cog</span>       = cog
    <span class="synIdentifier">@rim</span>       = rim
    <span class="synIdentifier">@tire</span>      = tire
  <span class="synPreProc">end</span>

  <span class="synPreProc">def</span> <span class="synIdentifier">gear_inches</span>
    ratio * wheel.diameter
  <span class="synPreProc">end</span>

  <span class="synPreProc">def</span> <span class="synIdentifier">wheel</span>
    <span class="synIdentifier">@wheel</span> ||= <span class="synType">Wheel</span>.new(rim, tire)
  <span class="synPreProc">end</span>
<span class="synComment"># ...</span>
</pre>


<p>ちなみに私は DI について Wikipedia で <a href="https://ja.wikipedia.org/wiki/%E4%BE%9D%E5%AD%98%E6%80%A7%E3%81%AE%E6%B3%A8%E5%85%A5">依存性の注入</a> のページを10回ぐらい読んでも全然意味がわからなかったのですが、この本を読んですんなり理解が出来ました。</p>

<p>個人的には「Dependency injection (DI)」とか「依存性の注入」とか仰々しい名前があまり好きでないので、初学者に教える機会があれば「インスタンスの作成をクラスの外に切り出すと依存が減っていい感じに書けるよ」と言ってあげようと思います。</p>

<h4>キーワード引数と net/http の話</h4>

<p>第3章の中盤は「引数の順番への依存を取り除く」ための話が数ページに渡って続けられていたのですが、Ruby 2.4 ぐらいからプログラミングを始めたゆとりの私にとっては「ここに書いてあること全部、キーワード引数でよくないすか？？？」という感想でした。</p>

<p>実際大抵の場合はキーワード引数で代替できるという話でしたが、例えば Ruby の標準ライブラリである <a href="https://docs.ruby-lang.org/ja/latest/library/net=2fhttp.html">net/http</a> の <a href="https://docs.ruby-lang.org/ja/latest/class/Net=3a=3aHTTP.html">Net::HTTP クラス</a> だと、引数の数がむちゃくちゃ多いので全部キーワード引数になると辛いよねという話をしていただき、なるほどなーと思いました。</p>

<h4>「知っている」と「依存」は同義</h4>

<p>本書内では「○○を知っているオブジェクト」という言い回しがよく使われますが、オブジェクトが他のオブジェクトについて「知っている」ということは同時にオブジェクト同士が「依存関係にある」ことだ、と明言されており、これはわかりやすいねという話をしました。</p>

<p>よくアプリケーションを開発している時でも、「このクラス (モジュール) が○○を知ってるのって自然かな？」みたいな話が上がるのですが、その観点って大事なんだなと腹落ちしました。</p>

<h3>結論</h3>

<p><strong>『オブジェクト指向設計実践ガイド』めっちゃ勉強になります！！！</strong></p>

<p><div class="hatena-asin-detail"><a href="http://www.amazon.co.jp/exec/obidos/ASIN/477418361X/hatena-blog-22/"><img src="https://images-fe.ssl-images-amazon.com/images/I/51-TCt0H4UL._SL160_.jpg" class="hatena-asin-detail-image" alt="オブジェクト指向設計実践ガイド ~Rubyでわかる 進化しつづける柔軟なアプリケーションの育て方" title="オブジェクト指向設計実践ガイド ~Rubyでわかる 進化しつづける柔軟なアプリケーションの育て方"></a><div class="hatena-asin-detail-info"><p class="hatena-asin-detail-title"><a href="http://www.amazon.co.jp/exec/obidos/ASIN/477418361X/hatena-blog-22/">オブジェクト指向設計実践ガイド ~Rubyでわかる 進化しつづける柔軟なアプリケーションの育て方</a></p><ul><li><span class="hatena-asin-detail-label">作者:</span> Sandi Metz,?山泰基</li><li><span class="hatena-asin-detail-label">出版社/メーカー:</span> 技術評論社</li><li><span class="hatena-asin-detail-label">発売日:</span> 2016/09/02</li><li><span class="hatena-asin-detail-label">メディア:</span> 大型本</li><li><a href="http://d.hatena.ne.jp/asin/477418361X/hatena-blog-22" target="_blank">この商品を含むブログ (6件) を見る</a></li></ul></div><div class="hatena-asin-detail-foot"></div></div></p>

<h2>最後に</h2>

<p>今回は弊社で行っている『オブジェクト指向設計実践ガイド』の読書会の紹介をしました！</p>

<p>それにしても、『オブジェクト指向設計実践ガイド』がたまにプードル本って呼ばれる理由が全然わからなかったのですが、原題が『Practical Object-Oriented Design in Ruby』だから頭文字を取って POODR (プードル) なんですね…！</p>

<p><a href="https://www.poodr.com/">Practical Object-Oriented Design in Ruby</a></p>

<p> <a href="https://adventar.org/calendars/3235">feedforce Advent Calendar 2018</a>  の17日目は <a href="http://blog.hatena.ne.jp/daikiki/" class="hatena-id-icon"><img src="https://cdn.profile-image.st-hatena.com/users/daikiki/profile.png" width="16" height="16" alt="" class="hatena-id-icon">id:daikiki</a> の <a href="http://omatsu-daichaso.hatenablog.com/entry/2018/12/17/003212">情熱と強引さが人を巻き込む ~ゴルフで感じた身になる教訓~</a> です！ゴルフの記事かと思ったら公私ともに活かせる「巻き込み力」のお話でした。ゴルフ好きな方もそうでない方もぜひご覧ください！</p>

<p>それでは、またお会いしましょう ＾＾</p>

<p><figure class="figure-image figure-image-fotolife" title="みんなのオブジェクト指向設計実践ガイド (POODR本)"><span itemscope itemtype="http://schema.org/Photograph"><img src="https://cdn-ak.f.st-hatena.com/images/fotolife/d/daido1976/20181220/20181220211616.jpg" alt="f:id:daido1976:20181220211616j:plain" title="f:id:daido1976:20181220211616j:plain" class="hatena-fotolife" itemprop="image"></span><figcaption>みんなのオブジェクト指向設計実践ガイド (POODR本)</figcaption></figure></p>
]]></description>
            <enclosure url="https://images-fe.ssl-images-amazon.com/images/I/51-TCt0H4UL._SL160_.jpg" length="0" type="image/jpg"/>
        </item>
        <item>
            <title><![CDATA[Heroku の Slug は友達]]></title>
            <link>https://masutaka.net/2018-12-21-1/</link>
            <guid>https://masutaka.net/2018-12-21-1/</guid>
            <pubDate>Fri, 21 Dec 2018 00:00:00 GMT</pubDate>
            <description><![CDATA[この記事は heroku Advent Calendar 2018 の 21 日目の記事です。
20 日目は @pukka さんの『【Heroku検討者向け】デプロイ方法５選！ 』でした。（４）マニフェストでの heroku.yml の使い方は初めて知りました。デプロイした ところ、heroku18 Stack の Docker Image が使われているようでした。Slug を作る従来の非 Docker デプロイも Docker に寄せられていくのかな？
今日はそんな Slug に注目した記事をお届けします。
Slug とは みなさん、Heroku の Slug はご存知でしょうか？
ダッシュボードの Settings タブからサイズを確認できます。
でもこれしか情報がないのですよね。恥ずかしがり屋さんかな？
Slug Compiler のドキュメントによると、
 Slugs are compressed and pre-packaged copies of your application optimized for distribution to the dyno manager . When you git push to Heroku, your code is received by the slug compiler which transforms your repository into a slug.]]></description>
        </item>
        <item>
            <title><![CDATA[メールフッタのセパレータ "-- "]]></title>
            <link>https://masutaka.net/2018-12-17-2/</link>
            <guid>https://masutaka.net/2018-12-17-2/</guid>
            <pubDate>Mon, 17 Dec 2018 01:00:00 GMT</pubDate>
            <description><![CDATA[よく &ldquo;&ndash;&rdquo; で区切られれていますが、RFC 3676 的には最後に半角スペースを加えた &ldquo;&ndash; &quot; が正しいです。sig-dashes と呼ぶらしいです。
https://www.ietf.org/rfc/rfc3676.txt  There is a long-standing convention in Usenet news which also commonly appears in Internet mail of using &ldquo;&ndash; &quot; as the separator line between the body and the signature of a message. When generating a Format=Flowed message containing a Usenet-style separator before the signature, the separator line is sent as-is. This is a special case; an (optionally quoted or quoted and stuffed) line consisting of DASH DASH SP is neither fixed nor flowed.]]></description>
        </item>
        <item>
            <title><![CDATA[Heroku と Redash は相性が良いのでは？という話]]></title>
            <link>https://masutaka.net/2018-12-17-1/</link>
            <guid>https://masutaka.net/2018-12-17-1/</guid>
            <pubDate>Mon, 17 Dec 2018 00:00:00 GMT</pubDate>
            <description><![CDATA[これは Redash Advent Calendar 2018 の 17 日目の記事です。
16 日目は @mazamachi さんの『kubernetess の redash か黒魔術』ですが、まだ投稿されていないようですね。今回の記事にも関連するので期待してます。
1 日目の『2018年12月現在における Redash のはじめかた 』を拝見しました。実際問題、どこに立てれば良いか、悩む方もいらっしゃるのではないでしょうか。今回はその点をまとめていきます。
Redash をどこに立てれば良いか？ 身も蓋もありませんが、ご自身が一番慣れた Docker の PaaS 上で動かすのが良いと思います。
AWS EC2 や GCE などの、非 Docker 環境は運用負荷がそれなりに発生するため、避けたほうが良いでしょう。アップグレードでハマったり、ストレージ使用量 100% になるのはあるあるです。
↓ 公式の How to Upgrade はいつの頃からか、非 Docker 環境でのアップグレード方法が &ldquo;legacy guide&rdquo; になってました。公式でも Docker 推しのようです。
 This instructions are for those who use our new Docker based instance. If you use our older instances (or used the old bootstrap script), check the legacy guide .]]></description>
        </item>
        <item>
            <title><![CDATA[BitBar の Heroku plugin はいいぞ]]></title>
            <link>https://masutaka.net/2018-12-13-1/</link>
            <guid>https://masutaka.net/2018-12-13-1/</guid>
            <pubDate>Thu, 13 Dec 2018 00:00:00 GMT</pubDate>
            <description><![CDATA[この記事は heroku Advent Calendar 2018 の 13 日目の記事です。
12 日目もわたくしマスタカの当番で、内容は『Heroku の Preboot 機能を深掘りした 』でした。その気になればドキュメント以上のことを探れることは、Heroku のメリットだと感じています。
今日は Heroku の BitBar plugin を紹介します。macOS 限定です。
BitBar とは BitBar - Put anything in your Mac OS X menu bar macOS のメニューバーにこんなものを置けるツールです。例として Homebrew Updates plugin を表示しています。
標準出力を吐きさえすれば、シェルスクリプトでも Ruby でも言語を問わないのが気楽です。
↓ ちょっとだけ変更しています。
--- brew-updates.1h.sh.orig	2018-12-11 23:42:41.000000000 +0900 +++ brew-updates.1h.sh	2018-12-11 23:42:25.000000000 +0900 @@ -12,13 +12,13 @@ /usr/local/bin/brew update &gt; /dev/null || exit_with_error; PINNED=$(/usr/local/bin/brew list --pinned); -OUTDATED=$(/usr/local/bin/brew outdated --quiet); +OUTDATED=$(/usr/local/bin/brew outdated --verbose); UPDATES=$(comm -13 &lt;(for X in &#34;${PINNED[@]}&#34;; do echo &#34;${X}&#34;; done) &lt;(for X in &#34;${OUTDATED[@]}&#34;; do echo &#34;${X}&#34;; done)) UPDATE_COUNT=$(echo &#34;$UPDATES&#34; | grep -c &#39;[^[:space:]]&#39;); -echo &#34;↑$UPDATE_COUNT | dropdown=false&#34; +echo &#34;🍺$UPDATE_COUNT | dropdown=false&#34; echo &#34;---&#34;; if [ -n &#34;$UPDATES&#34; ]; then echo &#34;Upgrade all | bash=/usr/local/bin/brew param1=upgrade terminal=false refresh=true&#34; Heroku plugin  Heroku の異常に緩く気づける plugin です。https://status.]]></description>
        </item>
        <item>
            <title><![CDATA[Heroku の Preboot 機能を深掘りした]]></title>
            <link>https://developer.feedforce.jp/entry/2018/12/12/120000</link>
            <guid>https://developer.feedforce.jp/entry/2018/12/12/120000</guid>
            <pubDate>Wed, 12 Dec 2018 03:00:00 GMT</pubDate>
            <description><![CDATA[<p>こんにちは <a href="http://blog.hatena.ne.jp/masutaka26/" class="hatena-id-icon"><img src="https://cdn.profile-image.st-hatena.com/users/masutaka26/profile.png" width="16" height="16" alt="" class="hatena-id-icon">id:masutaka26</a> です。</p>

<p>この記事は Heroku Advent Calendar 2018 の 12 日目の記事です。</p>

<p><iframe src="https://hatenablog-parts.com/embed?url=https%3A%2F%2Fqiita.com%2Fadvent-calendar%2F2018%2Fheroku" title="heroku Advent Calendar 2018 - Qiita" class="embed-card embed-webcard" scrolling="no" frameborder="0" style="display: block; width: 100%; height: 155px; max-width: 500px; margin: 10px 0px;"></iframe><cite class="hatena-citation"><a href="https://qiita.com/advent-calendar/2018/heroku">qiita.com</a></cite></p>

<p>昨日は <a href="https://qiita.com/takuchalle">@takuchalle</a> さんの『<a href="https://blog.takuchalle.me/post/2018/12/11/heroku_use_wkhtmltoimage/">Heroku で wkhtmltoimage を使う方法</a>』でした。似たツールの <a href="http://www.paulhammond.org/webkit2png/">webkit2png</a> は使ったことがあります。webkit2png が動作するのは macOS だけですが、<a href="https://wkhtmltopdf.org/">wkhtmltoimage</a> は Windows と Linux でも動作するのですね。へぇー。</p>

<p>先月、Heroku の Preboot 機能を調べる機会がありました。Web 上の日本語記事は Preboot が GA になった 2014 年頃の情報が多く、若干情報が古かったため、2018 年時点の最新の情報をまとめます。</p>

<ul class="table-of-contents">
    <li><a href="#Preboot-機能とは何か">Preboot 機能とは何か</a></li>
    <li><a href="#どのように有効にするのか">どのように有効にするのか</a></li>
    <li><a href="#使用する-Procfile">使用する Procfile</a></li>
    <li><a href="#デプロイによる-heroku-ps-の変化">デプロイによる heroku ps の変化</a></li>
    <li><a href="#デプロイ時の挙動">デプロイ時の挙動</a></li>
    <li><a href="#デプロイ時のログ">デプロイ時のログ</a></li>
    <li><a href="#再起動時の挙動">再起動時の挙動</a></li>
    <li><a href="#再起動時のログ">再起動時のログ</a><ul>
            <li><a href="#Web-dyno-1-台目">Web dyno 1 台目</a></li>
            <li><a href="#Web-dyno-2-台目">Web dyno 2 台目</a></li>
        </ul>
    </li>
    <li><a href="#注意事項">注意事項</a></li>
    <li><a href="#まとめ">まとめ</a></li>
</ul>

<h2 id="Preboot-機能とは何か">Preboot 機能とは何か</h2>

<p><a href="https://devcenter.heroku.com/articles/production-check#dyno-redundancy">Production Check > Dyno redundancy</a> に書いてあるとおり、Heroku では冗長性確保のため、本番環境の Web Dyno は 2 台以上が奨励されています。</p>

<blockquote><p>Running at least 2 web dynos for any mission-critical app increases the probability that the app will remain available during a catastrophic event. Multiple dynos are also more likely to run on different physical infrastructure (for example, separate AWS Availability Zones), further increasing redundancy.</p></blockquote>

<p>ただし、それだけだとデプロイや 1 日 1 回の自動再起動で、処理の遅延（<a href="https://devcenter.heroku.com/articles/error-codes#h27-client-request-interrupted">H27 - Client Request Interrupted</a>）や <a href="https://devcenter.heroku.com/articles/error-codes#h28-client-connection-idle">H28 - Client Connection Idle</a> が発生することがあります。</p>

<p>以下のグラフは Dyno Restart のタイミングで H27 と H28 Error が発生している様子です。このグラフはダッシュボードの Metrics から確認できます。</p>

<p><span itemscope itemtype="http://schema.org/Photograph"><img src="https://cdn-ak.f.st-hatena.com/images/fotolife/m/masutaka26/20181210/20181210191451.png" alt="f:id:masutaka26:20181210191451p:plain" title="f:id:masutaka26:20181210191451p:plain" class="hatena-fotolife" itemprop="image"></span></p>

<p>これを回避できるのが <a href="https://devcenter.heroku.com/articles/preboot">Preboot</a> 機能です。</p>

<h2 id="どのように有効にするのか">どのように有効にするのか</h2>

<p>Heroku CLI で有効にできます。</p>

<pre class="code console" data-lang="console" data-unlink>$ heroku features:enable preboot -a YOUR_APP_NAME</pre>


<p>有効になりました。簡単ですね。</p>

<pre class="code console" data-lang="console" data-unlink>$ heroku features:info preboot -a YOUR_APP_NAME
=== preboot
Description: Provide seamless web dyno deploys [general]
Docs:        https://devcenter.heroku.com/articles/preboot
Enabled:     true</pre>


<h2 id="使用する-Procfile">使用する Procfile</h2>

<p>今回はこの Procfile を使います。</p>

<pre class="code lang-apache" data-lang="apache" data-unlink>release: bin/rails <span class="synConstant">db</span>:migrate <span class="synConstant">db</span>:seed

<span class="synComment"># Web app</span>
web: bin/rails s -p $PORT -e $RAILS_ENV
worker: PROCESS_TYPE=worker bundle exec sidekiq -C config/sidekiq.yml

<span class="synComment"># Ad app</span>
ad_worker: PROCESS_TYPE=ad_worker bundle exec sidekiq -C config/sidekiq.yml
</pre>


<p><code>web</code>, <code>worker</code>, <code>ad_worker</code> という 3 つの process type を定義しています。今回注目する process type は <code>web</code> だけです。</p>

<p>1 行目で <code>release</code> も定義しているため、デプロイ時には One-Off Dyno<sup id="fnref:1"><a href="#fn:1" rel="footnote">1</a></sup> で release 処理をしたあと、生成した Slug が Dyno に展開されていきます。</p>

<h2 id="デプロイによる-heroku-ps-の変化">デプロイによる heroku ps の変化</h2>

<p>それでは <code>$ watch 'heroku ps -a YOUR_APP_NAME'</code> しつつ、デプロイの様子を観察していきましょう。macOS では watch コマンドは <code>$ brew install watch</code> 等でインストール出来ます。</p>

<p>Web Dyno 1 台の場合、release Dyno の実行が終わると、web.1 Dyno のステータスが up → starting → up と変化します。starting 中にリクエストがあると、クライアントは待たされ、前述の H27 や H28 Error が発生します。</p>

<p><figure class="figure-image figure-image-fotolife" title="Web Dyno 1 台でデプロイした様子"><span itemscope itemtype="http://schema.org/Photograph"><img src="https://cdn-ak.f.st-hatena.com/images/fotolife/m/masutaka26/20181211/20181211131034.gif" alt="f:id:masutaka26:20181211131034g:plain" title="f:id:masutaka26:20181211131034g:plain" class="hatena-fotolife" itemprop="image"></span><figcaption>Web Dyno 1 台でデプロイした様子</figcaption></figure></p>

<p>Web Dyno 2 台かつ Preboot 無効でも、基本的に同じです。2 台同時に up → starting → up と変化します。</p>

<p><figure class="figure-image figure-image-fotolife" title="Web Dyno 2 台かつ Preboot 無効でデプロイした様子"><span itemscope itemtype="http://schema.org/Photograph"><img src="https://cdn-ak.f.st-hatena.com/images/fotolife/m/masutaka26/20181211/20181211131128.gif" alt="f:id:masutaka26:20181211131128g:plain" title="f:id:masutaka26:20181211131128g:plain" class="hatena-fotolife" itemprop="image"></span><figcaption>Web Dyno 2 台かつ Preboot 無効でデプロイした様子</figcaption></figure></p>

<p>Web Dyno 2 台かつ Preboot を有効にすると、期待した通り、1 台ずつ up → starting → up に<strong>なりませんでした・・・！あれ？</strong></p>

<p><figure class="figure-image figure-image-fotolife" title="Web Dyno 2 台かつ Preboot 有効でデプロイした様子"><span itemscope itemtype="http://schema.org/Photograph"><img src="https://cdn-ak.f.st-hatena.com/images/fotolife/m/masutaka26/20181211/20181211133556.gif" alt="f:id:masutaka26:20181211133556g:plain" title="f:id:masutaka26:20181211133556g:plain" class="hatena-fotolife" itemprop="image"></span><figcaption>Web Dyno 2 台かつ Preboot 有効でデプロイした様子</figcaption></figure></p>

<blockquote><ul>
<li>Logs will show new dynos starting soon after the slug compile is finished. The output of <code>heroku ps</code> will immediately show the state (for example, <code>starting</code> or <code>up</code>) of the new dynos. Old dynos are still running but won’t appear in <code>heroku ps</code>.</li>
</ul>
</blockquote>

<p><a href="https://devcenter.heroku.com/articles/preboot">Preboot のドキュメント</a>によると、heroku ps では確認できないようです。ただしログでは確認できるそう。</p>

<h2 id="デプロイ時の挙動">デプロイ時の挙動</h2>

<blockquote><ul>
<li>Approximately 3 minutes after the deploy completes (or 2 minutes after your app’s boot timeout limit, which defaults to 1 minute), HTTP requests will start routing to the new dynos and simultaneously stop routing to the old dynos.</li>
</ul>
</blockquote>

<p>遅くともデプロイ完了から約 3 分後、もしくはアプリケーションの起動タイムアウトリミット 2 分（デフォルトは 1 分）後、HTTP リクエストは新 Dyno に Routing されるそうです。</p>

<blockquote><ul>
<li>Shortly after the new dynos are fully live and serving user requests, the old dynos will be shut down. You’ll see them shut down in the logs as usual.</li>
</ul>
</blockquote>

<p>新 Dyno が完全に起動し、ユーザリクエストを処理するとすぐに、旧 Dyno はシャットダウンされるようです。これもログで確認可能とのこと。</p>

<p>では実際にログを見てみましょう。</p>

<h2 id="デプロイ時のログ">デプロイ時のログ</h2>

<p>git push 後まもなく、Web dyno の状態が <code>up</code> から <code>starting</code> に変わりました。</p>

<pre class="code" data-lang="" data-unlink>Nov 28 14:58:51 heroku[web] notice Restarting
Nov 28 14:58:51 heroku[web] notice State changed from up to starting
Nov 28 14:58:51 heroku[web] notice Restarting
Nov 28 14:58:51 heroku[web] notice State changed from up to starting</pre>


<p>新 Web dyno 2 台で Puma (Web server) がそれぞれ起動を開始しました。</p>

<pre class="code" data-lang="" data-unlink>Nov 28 14:59:17 heroku[web] notice Starting process with command `bin/rails s -p 24256 -e production`
Nov 28 14:59:19 heroku[web] notice Starting process with command `bin/rails s -p 15417 -e production`
Nov 28 14:59:21 app[web] info [heroku-exec] Starting
Nov 28 14:59:22 app[web] info [heroku-exec] Starting
Nov 28 14:59:31 app[web] info =&gt; Booting Puma
Nov 28 14:59:31 app[web] info =&gt; Rails 5.2.1 application starting in production
Nov 28 14:59:31 app[web] info =&gt; Run `rails server -h` for more startup options
Nov 28 14:59:32 app[web] info =&gt; Booting Puma
Nov 28 14:59:32 app[web] info =&gt; Rails 5.2.1 application starting in production
Nov 28 14:59:32 app[web] info =&gt; Run `rails server -h` for more startup options</pre>


<p>Web dyno の状態が <code>starting</code> から <code>up</code> に変わりました。まだ Puma は起動しきっていません。</p>

<pre class="code" data-lang="" data-unlink>Nov 28 14:59:33 heroku[web] notice State changed from starting to up
Nov 28 14:59:34 heroku[web] notice State changed from starting to up</pre>


<p>新 Web dyno 1 台で Puma が起動しきりました。問題はありませんが、手元で起動するよりずいぶん遅い気がします。</p>

<pre class="code" data-lang="" data-unlink>Nov 28 15:02:03 app[web] info Puma starting in single mode...
Nov 28 15:02:03 app[web] info * Version 3.12.0 (ruby 2.5.3-p105), codename: Llamas in Pajamas
Nov 28 15:02:03 app[web] info * Min threads: 11, max threads: 11
Nov 28 15:02:03 app[web] info * Environment: production
Nov 28 15:02:03 app[web] info * Listening on tcp://0.0.0.0:24256
Nov 28 15:02:03 app[web] info Use Ctrl-C to stop</pre>


<p>旧 Web dyno 1 台で Puma が終了しました。前述の意訳では約 3 分とあるため合っています。</p>

<pre class="code" data-lang="" data-unlink>Nov 28 15:02:19 heroku[web] notice Stopping all processes with SIGTERM
Nov 28 15:02:19 app[web] info Gracefully stopping, waiting for requests to finish
Nov 28 15:02:19 app[web] info === puma shutdown: 2018-11-28 06:02:19 +0000 ===
Nov 28 15:02:19 app[web] info Goodbye!
Nov 28 15:02:19 app[web] info Exiting
Nov 28 15:02:19 heroku[web] notice Process exited with status 143</pre>


<p>もうひとつの旧 Web dyno 1 台で Puma が終了しました。これも意訳のとおりです。</p>

<pre class="code" data-lang="" data-unlink>Nov 28 15:03:25 heroku[web] notice Stopping all processes with SIGTERM
Nov 28 15:03:25 app[web] info Gracefully stopping, waiting for requests to finish
Nov 28 15:03:25 app[web] info === puma shutdown: 2018-11-28 06:03:25 +0000 ===
Nov 28 15:03:25 app[web] info Goodbye!
Nov 28 15:03:25 app[web] info Exiting
Nov 28 15:03:25 heroku[web] notice Process exited with status 143</pre>


<p>もうひとつの新 Web dyno 1 台で Puma が起動しきりました。<code>Booting Puma</code> からずいぶんと時間がかかりました。</p>

<pre class="code" data-lang="" data-unlink>Nov 28 15:05:08 app[web] info Puma starting in single mode...
Nov 28 15:05:08 app[web] info * Version 3.12.0 (ruby 2.5.3-p105), codename: Llamas in Pajamas
Nov 28 15:05:08 app[web] info * Min threads: 11, max threads: 11
Nov 28 15:05:08 app[web] info * Environment: production
Nov 28 15:05:08 app[web] info * Listening on tcp://0.0.0.0:15417
Nov 28 15:05:08 app[web] info Use Ctrl-C to stop</pre>


<p>Puma の起動に時間がかかるのは謎ですが、Preboot のドキュメントと相違ないと理解しました。</p>

<h2 id="再起動時の挙動">再起動時の挙動</h2>

<p>再起動時の挙動も確認します。</p>

<p>Heroku ではアプリケーションの健全性を維持するため、<a href="https://devcenter.heroku.com/articles/dynos#automatic-dyno-restarts">Dyno は 1 日に 1 回、自動的に再起動します</a>。Dyno は差し替えられるため、ローカルファイルシステムの変更はすべて破棄されます。</p>

<blockquote><p>The new dynos will start receiving requests as soon as it binds to its assigned port. At this point, both the old and new dynos are receiving requests.</p></blockquote>

<p>新 Dyno は割り当てられたポートにバインドされると、すぐにリクエストを受信し始めます。この時点で、新旧の Dyno がリクエストを受信するそう。</p>

<blockquote><p>Approximately 4 to 6 minutes after the restart is invoked, the old dynos will be shut down. You’ll see them shut down in the logs as usual.</p></blockquote>

<p>再起動が行われてから、約 4~6 分後に旧 Dyno がシャットダウンされるようです。これもログで確認可能とのこと。</p>

<p>Preboot が GA になった 2014 年頃は、まだ 1 日 1 回の再起動には対応していないようでした。現在は対応しているようです。</p>

<h2 id="再起動時のログ">再起動時のログ</h2>

<p>結論から書くと、1 台目が再起動し終えてから 2 台目が再起動していました。再起動においても、ドキュメントの通りに Preboot が機能しているようです。</p>

<h3 id="Web-dyno-1-台目">Web dyno 1 台目</h3>

<p>Web dyno 1 台の状態が <code>up</code> から <code>starting</code> に変わりました。</p>

<pre class="code" data-lang="" data-unlink>Nov 30 11:41:22 heroku[web] notice Cycling
Nov 30 11:41:22 heroku[web] notice State changed from up to starting</pre>


<p>新 Web dyno 1 台で Puma が起動を開始しました。</p>

<pre class="code" data-lang="" data-unlink>Nov 30 11:41:42 heroku[web] notice Starting process with command `bin/rails s -p 32434 -e production`
Nov 30 11:41:44 app[web] info [heroku-exec] Starting
Nov 30 11:41:50 app[web] info =&gt; Booting Puma
Nov 30 11:41:50 app[web] info =&gt; Rails 5.2.1.1 application starting in production
Nov 30 11:41:50 app[web] info =&gt; Run `rails server -h` for more startup options</pre>


<p>Web dyno 1 台の状態が <code>starting</code> から <code>up</code> に変わりました。まだ Puma は起動しきっていません。</p>

<pre class="code" data-lang="" data-unlink>Nov 30 11:41:51 heroku[web] notice State changed from starting to up</pre>


<p>新 Web dyno 1 台で Puma が起動しきりました。相変わらず時間がかかります。</p>

<pre class="code" data-lang="" data-unlink>Nov 30 11:45:45 app[web] info Puma starting in single mode...
Nov 30 11:45:45 app[web] info * Version 3.12.0 (ruby 2.5.3-p105), codename: Llamas in Pajamas
Nov 30 11:45:45 app[web] info * Min threads: 11, max threads: 11
Nov 30 11:45:45 app[web] info * Environment: production
Nov 30 11:45:45 app[web] info * Listening on tcp://0.0.0.0:32434
Nov 30 11:45:45 app[web] info Use Ctrl-C to stop</pre>


<p>旧 Web dyno 1 台で Puma が終了しました。前述の意訳では約 4~6 分後とありましたが、間を置かずに終了しました。</p>

<pre class="code" data-lang="" data-unlink>Nov 30 11:45:55 heroku[web] notice Stopping all processes with SIGTERM
Nov 30 11:45:56 app[web] info Gracefully stopping, waiting for requests to finish
Nov 30 11:45:56 app[web] info === puma shutdown: 2018-11-30 02:45:55 +0000 ===
Nov 30 11:45:56 app[web] info Goodbye!
Nov 30 11:45:56 app[web] info Exiting
Nov 30 11:45:56 heroku[web] notice Process exited with status 143</pre>


<h3 id="Web-dyno-2-台目">Web dyno 2 台目</h3>

<p>もうひとつの Web dyno 1 台の状態が <code>up</code> から <code>starting</code> に変わりました。14 分くらい差があります。<a href="https://devcenter.heroku.com/articles/dynos#automatic-dyno-restarts">最大 216 分のランダムな差がある</a>ようなので、記載通りです。</p>

<pre class="code" data-lang="" data-unlink>Nov 30 12:00:41 heroku[web] notice Cycling
Nov 30 12:00:41 heroku[web] notice State changed from up to starting</pre>


<p>新 Web dyno 1 台で Puma が起動を開始しました。</p>

<pre class="code" data-lang="" data-unlink>Nov 30 12:00:59 heroku[web] notice Starting process with command `bin/rails s -p 16965 -e production`
Nov 30 12:01:01 app[web] info [heroku-exec] Starting
Nov 30 12:01:08 app[web] info =&gt; Booting Puma
Nov 30 12:01:08 app[web] info =&gt; Rails 5.2.1.1 application starting in production
Nov 30 12:01:08 app[web] info =&gt; Run `rails server -h` for more startup options</pre>


<p>Web dyno 1 台の状態が <code>starting</code> から <code>up</code> に変わりました。まだ Puma は起動しきっていません。</p>

<pre class="code" data-lang="" data-unlink>Nov 30 12:01:10 heroku[web] notice State changed from starting to up</pre>


<p>新 Web dyno 1 台で Puma が起動しきりました。今回は時間がかかりませんでした。</p>

<pre class="code" data-lang="" data-unlink>Nov 30 12:01:15 app[web] info Puma starting in single mode...
Nov 30 12:01:15 app[web] info * Version 3.12.0 (ruby 2.5.3-p105), codename: Llamas in Pajamas
Nov 30 12:01:15 app[web] info * Min threads: 11, max threads: 11
Nov 30 12:01:15 app[web] info * Environment: production
Nov 30 12:01:15 app[web] info * Listening on tcp://0.0.0.0:16965
Nov 30 12:01:15 app[web] info Use Ctrl-C to stop</pre>


<p>旧 Web dyno 1 台で Puma が終了しました。今度は時間がかかりました。前述の意訳では約 4~6 分後とあるため合っています。</p>

<pre class="code" data-lang="" data-unlink>Nov 30 12:05:14 heroku[web] notice Stopping all processes with SIGTERM
Nov 30 12:05:14 app[web] info Gracefully stopping, waiting for requests to finish
Nov 30 12:05:14 app[web] info === puma shutdown: 2018-11-30 03:05:14 +0000 ===
Nov 30 12:05:14 app[web] info Goodbye!
Nov 30 12:05:14 app[web] info Exiting
Nov 30 12:05:14 heroku[web] notice Process exited with status 143</pre>


<h2 id="注意事項">注意事項</h2>

<p>Preboot を有効にしてデプロイすると、無効時よりも時間をかけて Dyno が差し替わります。全ての Dyno に反映されるまで数分かかることもあるようです。この点はチームで把握しておく必要があります。</p>

<p>最大 3 分間、新旧の Dyno が重複するため、Add-on の同時接続数の制限に達する可能性があります。Heroku Postgres の場合は <a href="https://github.com/heroku/heroku-buildpack-pgbouncer">pgbouncer buildpack</a> を使うことが奨励されています。</p>

<p>新旧の Dyno が混在することにより、一度のデプロイで DB schema とアプリケーションコードを変更すると、不具合が発生する可能性があります。Preboot 機能を一旦無効にすることを勧めています。でも、Procfile に <code>release</code> process type を定義していれば同じなので、個人的には気にならないですね。</p>

<p>Preboot 機能を使うためには、<strong>Dyno type が Standard-1X 以上</strong>である必要があります。Dyno type が <code>Free</code> と <code>Hobby</code> では Preboot を有効に出来ません。</p>

<p><strong>Preboot が適用されるのは Web Dyno だけ</strong>です。自分で定義した <code>worker</code> Dyno 等は対象外です。</p>

<h2 id="まとめ">まとめ</h2>

<p>Heroku の Preboot 機能を深掘りし、有効にする必要性を理解しました。</p>

<ul>
<li>Web Dyno を 2 台以上にしたら Preboot を有効にすると良さそう</li>
<li>前述の「注意事項」には留意したほうが良い</li>
</ul>


<p>しかし、こんなに長い記事になるとは...。</p>

<p>明日の <a href="https://qiita.com/advent-calendar/2018/heroku">heroku Advent Calendar 2018</a> はまたまた <a href="http://blog.hatena.ne.jp/masutaka26/" class="hatena-id-icon"><img src="https://cdn.profile-image.st-hatena.com/users/masutaka26/profile.png" width="16" height="16" alt="" class="hatena-id-icon">id:masutaka26</a> です。Bitbar の便利な Heroku plugin を紹介してくれるみたいです。お楽しみに。</p>
<div class="footnotes">
<hr/>
<ol>
<li id="fn:1">
<p>このような使い捨ての Dyno を <a href="https://devcenter.heroku.com/articles/one-off-dynos">One-Off Dyno</a> と呼びます。heroku run で使われる Dyno もそうです。<a href="#fnref:1" rev="footnote">&#8617;</a></p></li>
</ol>
</div>

]]></description>
            <enclosure url="https://cdn-ak.f.st-hatena.com/images/fotolife/m/masutaka26/20181113/20181113190345.png" length="0" type="image/png"/>
        </item>
        <item>
            <title><![CDATA[ジム通いと食生活改善を５ヶ月続けたので中間報告をする]]></title>
            <link>https://masutaka.net/2018-12-07-1/</link>
            <guid>https://masutaka.net/2018-12-07-1/</guid>
            <pubDate>Fri, 07 Dec 2018 00:00:00 GMT</pubDate>
            <description><![CDATA[ｺﾞﾎｺﾞﾎ&hellip;この記事は feedforce Advent Calendar 2018 の 7 日目の記事です。健康的な記事を書くつもりが、月曜日から水曜日まで寝込んでいました（白目）。
6 日目はふねさんの『リモート勤務が出来るようになったので煮込みがはかどる話 』でした。
煮込み料理( ・∀・)ｲｲ!!ですね。無職時代に、カレーを作りながら採用面接向けの課題をやっていたことを思い出しました。(ToT)
そんな私の記事は [2016-12-14-1] と [2017-12-19-1] に引き続き、またまた健康・生活に関する記事です。40 を超えると、健康の話しかしませんよね？
さっそく中間報告 トレーナー曰く「今のところ順調に筋肉量が増え、体脂肪率が減っている」とのこと。さすがに CM みたいに極端には結果は出ないですね。初期の体脂肪率が 31.4% とかはおかしいので機械の故障でしょう&hellip;。
※ ジムで InBody を使っての計測
自宅では 2014 年から Withings の体重計で毎朝測っています。
※ Withings Smart Body Analyzer での計測
③の傾斜角が今回の成果になります。2kg 程度ですが、私の身長は 161cm ほどなので、これでも体つきに変化が出ています。筋肉量を増やしつつ、体重が減っていますからね。
①は朝食を MCT オイル＆バター＆コーヒーにしていた頃です。筋トレはしていません。
②は一週間でこの変化です。一週間熱が出続けて寝込んだらこうなりました。出社したら痩せたと言われました。
どちらも見事にリバウンドしていますね&hellip;。
なぜまたジムに通い始めたか 週に 2〜3 回、晩酌する習慣がついてしまい、人生最大の体重と体脂肪率になったからです。
実は 2 年前まで近所のジムに通っていました。あまり合わずに 3 ヶ月ほどで辞めた後、近所のエニタイムフィットネス に行こうと思い 2 年が経ってしまいました。
これ以上延ばすのはまずいと思い、申し込んだのが [2018-06-30-1] というわけです。
ジムに行く頻度と内容 週 3 回目標で、最低週 2 回で続けています。もう 6 ヶ月目です。雨の日も風の日も台風の日も通います。何も考えずに通うことが重要です。「一度決めたことを忠実に繰り返してしまう」という私の性格に大変助かっています。]]></description>
        </item>
        <item>
            <title><![CDATA[まだ .rubocop_todo.yml で消耗してるの？]]></title>
            <link>https://developer.feedforce.jp/entry/2018/12/05/140000</link>
            <guid>https://developer.feedforce.jp/entry/2018/12/05/140000</guid>
            <pubDate>Wed, 05 Dec 2018 05:00:00 GMT</pubDate>
            <description><![CDATA[<p>どうも、バックエンドエンジニアのサトウリョウスケです ✌︎('ω')✌︎</p>

<p>若干釣り臭いタイトルですが、先日 <a href="https://github.com/ryz310/rubocop_challenger">RubocopChallenger</a> という gem の <code>v1.0.0</code> をリリースしたので紹介させて頂きます 🙏</p>

<p><iframe src="https://hatenablog-parts.com/embed?url=https%3A%2F%2Fgithub.com%2Fryz310%2Frubocop_challenger" title="GitHub - ryz310/rubocop_challenger: Make a clean your rubocop_todo.yml with CI" class="embed-card embed-webcard" scrolling="no" frameborder="0" style="display: block; width: 100%; height: 155px; max-width: 500px; margin: 10px 0px;"></iframe><cite class="hatena-citation"><a href="https://github.com/ryz310/rubocop_challenger">github.com</a></cite></p>

<h2>経緯</h2>

<p>僕が所属している <a href="https://socialplus.jp/">ソーシャルPLUS</a> は 2012 年頃から開発が始まりました。Rails のプロダクトとしては古株の方だと思います。</p>

<p>ソーシャルPLUS に <a href="https://github.com/rubocop-hq/rubocop">RuboCop</a> が導入されたのは 2017/02 頃 <sup id="fnref:1"><a href="#fn:1" rel="footnote">1</a></sup> で、それまで特に RuboCop を意識したコードで開発を進めてこなかったので、巨大な .rubocop_todo.yml が出力され、それが手付かずのままになってしまっていました。ちなみに当初は <strong>1669 行 195 種類</strong> の違反ルールがありました。</p>

<p>このままでは RuboCop の恩恵が受けられないので、 RuboCop Challenge と称して (以前 <a href="https://ja.wikipedia.org/wiki/%E3%82%A2%E3%82%A4%E3%82%B9%E3%83%BB%E3%83%90%E3%82%B1%E3%83%84%E3%83%BB%E3%83%81%E3%83%A3%E3%83%AC%E3%83%B3%E3%82%B8">Ice Bucket Challenge</a> が流行っていたので) 週イチで <code>.rubocop_todo.yml</code> から違反ルールを一つ消して、 auto-correct で修正する、という事をやっていたのですが、数ヶ月（数週間だったかも）ですっかりやるのを忘れてしまいました 😇</p>

<p>最近また RuboCop Challenge を再開しよう、という流れになったのですが、手動でコツコツやるのも精神的にしんどくなって来たので、なんとか自動化したいな、という気持ちになり、手動でやっていた Rubocop Challenge を Ruby スクリプトで動かせるようにしました。
最初は単純な Ruby スクリプトだったのですが、せっかくなので gem 化しよう、という事になり、作成したのが RubocopChallenger です。</p>

<p>ところで、弊社エンジニアの <a href="http://blog.hatena.ne.jp/masutaka26/" class="hatena-id-icon"><img src="https://cdn.profile-image.st-hatena.com/users/masutaka26/profile.png" width="16" height="16" alt="" class="hatena-id-icon">id:masutaka26</a> が circleci-bundle-update-pr という CI を利用した Bundle Update の自動更新 gem を作成しています。</p>

<p><iframe src="https://hatenablog-parts.com/embed?url=https%3A%2F%2Fgithub.com%2Fmasutaka%2Fcircleci-bundle-update-pr" title="GitHub - masutaka/circleci-bundle-update-pr: Provide continues bundle update using CircleCI" class="embed-card embed-webcard" scrolling="no" frameborder="0" style="display: block; width: 100%; height: 155px; max-width: 500px; margin: 10px 0px;"></iframe><cite class="hatena-citation"><a href="https://github.com/masutaka/circleci-bundle-update-pr">github.com</a></cite></p>

<p>これに感銘を受けて (？) 自分の RubocopChallenger も CI から<code>$ rubocop --auto-correct</code> を実行した結果が PR として届くような仕組みになっています。</p>

<h2>使い方</h2>

<p><strong>2021-09-23 修正</strong></p>

<h3>1. <code>.circleci/config.yml</code> の編集</h3>

<p>以下に設定例を紹介します。</p>

<pre class="code lang-yaml" data-lang="yaml" data-unlink><span class="synComment"># .circleci/config.yml</span>
<span class="synIdentifier">version</span><span class="synSpecial">:</span> <span class="synConstant">2</span>

<span class="synIdentifier">jobs</span><span class="synSpecial">:</span>
  <span class="synIdentifier">rubocop_challenge</span><span class="synSpecial">:</span>
    <span class="synIdentifier">docker</span><span class="synSpecial">:</span>
      <span class="synStatement">- </span><span class="synIdentifier">image</span><span class="synSpecial">:</span> circleci/ruby:2.5-node-browsers
    <span class="synIdentifier">working_directory</span><span class="synSpecial">:</span> ~/repo
    <span class="synIdentifier">steps</span><span class="synSpecial">:</span>
      <span class="synStatement">- </span>checkout
      <span class="synStatement">- </span><span class="synIdentifier">run</span><span class="synSpecial">:</span>
          <span class="synIdentifier">name</span><span class="synSpecial">:</span> Rubocop Challenge
          <span class="synIdentifier">command</span><span class="synSpecial">:</span> |
            gem install rubocop_challenger
            bundle exec rubocop_challenger go \
              --email={RubocopChallenger が commit する際の user email} \
              --name=&quot;{RubocopChallenger が commit する際の user name}&quot;

<span class="synIdentifier">workflows</span><span class="synSpecial">:</span>
  <span class="synIdentifier">version</span><span class="synSpecial">:</span> <span class="synConstant">2</span>

  <span class="synIdentifier">nightly</span><span class="synSpecial">:</span>
    <span class="synIdentifier">triggers</span><span class="synSpecial">:</span>
      <span class="synStatement">- </span><span class="synIdentifier">schedule</span><span class="synSpecial">:</span>
          <span class="synIdentifier">cron</span><span class="synSpecial">:</span> <span class="synConstant">&quot;30 23 * * 1,2,3&quot;</span><span class="synComment"> # この設定の場合、火水木 の毎朝 8:30 に RubocopChallnger の PR が届きます</span>
          <span class="synIdentifier">filters</span><span class="synSpecial">:</span>
            <span class="synIdentifier">branches</span><span class="synSpecial">:</span>
              <span class="synIdentifier">only</span><span class="synSpecial">:</span>
                <span class="synStatement">- </span>master
    <span class="synIdentifier">jobs</span><span class="synSpecial">:</span>
      <span class="synStatement">- </span>rubocop_challenge
</pre>


<p>インストールの際、 <strong>Gemfile に <code>gem 'rubocop_challenger'</code> を追記しないようにご注意下さい。</strong>
他の gem との互換性問題により、 rubocop_challenger 実行中にエラーが発生するケースがあることを確認しております。</p>

<h3>2. GitHub personal access token の作成</h3>

<p>RubocopChallenger が PR を作成するために GitHub personal access token が必要になります。
<a href="https://github.com/settings/tokens">Settings</a> から <a href="https://github.com/settings/tokens/new">Generate new token</a> をクリックして access token を作成します。
<strong>Select Scopes</strong> では <code>repo</code> にチェック ✅ を入れて下さい。</p>

<p><img src="https://github.com/ryz310/rubocop_challenger/raw/master/images/generate_token.png" alt="Generate new token" /></p>

<h3>3. CircleCI で環境変数の設定</h3>

<p>今回は <a href="https://circleci.com/">CircleCI</a> での利用例を紹介します 🙏</p>

<p><a href="https://circleci.com/dashboard">ダッシュボード画面</a> に移動し、 RubocopChallenger を適用したいアプリケーションの <strong>Project Settings</strong> -> <strong>Environment Variables</strong> へと移動します。
<strong>Add Variable</strong> をクリックして <code>GITHUB_ACCESS_TOKEN</code> という Key で先程作成した GitHub personal access token を設定します。</p>

<p><img src="https://github.com/ryz310/rubocop_challenger/raw/master/images/circleci_environment_variables.png" alt="Environment Variables" /></p>

<h3>5. 作成された PR の確認</h3>

<p>ここまでの手順を終えると、 CircleCI に指定したスケジュールで PR がされるようになると思います。
後は auto-correct の内容を確認して、 merge するだけです。</p>

<p>中には適用したくないルールも出てくると思いますが、その場合は <code>.rubocop.yml</code> にルールを再定義して auto-correct されないようにします。</p>

<h2>どんな PR が作成されるのか？</h2>

<p>ちょっと RubocopChallenger のバージョンが古い頃の物ですが、 <a href="https://github.com/ryz310/rubocop_challenger/pull/97">以下のような PR</a> が自動的に作成されます。</p>

<p><a href="https://github.com/ryz310/rubocop_challenger/pull/97"><img src="https://github.com/ryz310/rubocop_challenger/raw/master/images/rubocop_challenge.png" alt="RubocopChallnge" /></a></p>

<p>デフォルトの設定では、 <code>.rubocop_todo.yml</code> の中から <strong>Cop supports --auto-correct</strong> かつ <strong>Offense count が最大</strong> のルールを消して、 auto-correct した結果が PR として作成されます。</p>

<p>また、 auto-correct の後で <code>$ rubocop --auto-gen-config</code> を実行して <code>.rubocop_todo.yml</code> を再作成しています。 RuboCop のバージョンが変わった時とかに <code>.rubocop_todo.yml</code> に出力される内容も若干変わっていたりするのですが、毎回最新の状態に作り直してくれるのがちょっと便利だったりします。</p>

<p>ちなみに PR の <strong>Description</strong> に表示されている内容は <a href="https://www.rubydoc.info/gems/rubocop/RuboCop/Cop/Layout/AlignHash">本家 RuboCop の RubyDoc</a> に記載されている内容と同じものです。これを表示するのに地味に苦労しました 😓</p>

<h2>高度な設定</h2>

<p>RubocopChallnger にはいくつかオプションが用意されているので、ご紹介します。</p>

<h3><code>--mode</code></h3>

<p>上述の通り、デフォルトでは auto-correct の対象は <strong>Cop supports --auto-correct</strong> かつ <strong>Offense count が最大</strong> のルールが選択されますが、 <code>mode</code> に渡す値によって対象を変更することが出来ます。</p>

<ul>
<li><code>most_occurrence</code> (デフォルト)

<ul>
<li><strong>Offense count が最大</strong> のルールを選択する</li>
</ul>
</li>
<li><code>least_occurrence</code>

<ul>
<li><strong>Offense count が最小</strong> のルールを選択する</li>
</ul>
</li>
<li><code>random</code>

<ul>
<li>全体からランダムに選択する</li>
</ul>
</li>
</ul>


<h4>使用例</h4>

<pre class="code lang-sh" data-lang="sh" data-unlink>$ bundle <span class="synStatement">exec</span> rubocop_challenger go <span class="synStatement">\</span>
    <span class="synSpecial">--email=rubocop-challenger@example.com</span> <span class="synStatement">\</span>
    <span class="synSpecial">--name=</span><span class="synStatement">&quot;</span><span class="synConstant">Rubocop Challenger</span><span class="synStatement">&quot;</span> <span class="synStatement">\</span>
    <span class="synSpecial">--mode=random</span> 
</pre>


<h3><code>--labels</code></h3>

<p>RubocopChallnger が作成する PR に付与される label を指定します。デフォルトでは <strong>rubocop challenge</strong> というラベルが付与されます。
ソーシャルPLUS では <a href="https://waffle.io/">waffle.io</a> を利用していたりするのですが、レビュー待ち状態の label を付与するようにすると見落としがなくて便利です。</p>

<p><strong>スペース区切り</strong>で複数指定することが出来ます。</p>

<h4>使用例</h4>

<pre class="code lang-sh" data-lang="sh" data-unlink>$ bundle <span class="synStatement">exec</span> rubocop_challenger go <span class="synStatement">\</span>
    <span class="synSpecial">--email=rubocop-challenger@example.com</span> <span class="synStatement">\</span>
    <span class="synSpecial">--name=</span><span class="synStatement">&quot;</span><span class="synConstant">Rubocop Challenger</span><span class="synStatement">&quot;</span> <span class="synStatement">\</span>
    <span class="synSpecial">--labels=</span><span class="synStatement">&quot;</span><span class="synConstant">rubocop challenge</span><span class="synStatement">&quot;</span> <span class="synStatement">&quot;</span><span class="synConstant">in progress</span><span class="synStatement">&quot;</span>
</pre>


<h3><code>--template</code></h3>

<p>作成される PR をカスタマイズしたい場合などあるかと思います。
その場合は template に erb ファイルのパスを指定することが可能です。</p>

<p>デフォルトでは以下のテンプレートが使用されるので、必要に応じてカスタマイズしてご利用下さい 🙏</p>

<p><a href="https://github.com/ryz310/rubocop_challenger/blob/master/lib/templates/default.md.erb">https://github.com/ryz310/rubocop_challenger/blob/master/lib/templates/default.md.erb</a></p>

<h4>使用例</h4>

<pre class="code lang-sh" data-lang="sh" data-unlink>$ bundle <span class="synStatement">exec</span> rubocop_challenger go <span class="synStatement">\</span>
    <span class="synSpecial">--email=rubocop-challenger@example.com</span> <span class="synStatement">\</span>
    <span class="synSpecial">--name=</span><span class="synStatement">&quot;</span><span class="synConstant">Rubocop Challenger</span><span class="synStatement">&quot;</span> <span class="synStatement">\</span>
    <span class="synSpecial">--template=./path/to/template.md.erb</span>
</pre>


<h3><code>--no-regenerate-rubocop-todo</code></h3>

<p>上述の通り、デフォルトでは auto-correct の後で <code>$ rubocop --auto-gen-config</code> を実行して .rubocop_todo.yml を再作成しています。これが不要な場合は no-regenerate-rubocop-todo オプションを指定します。</p>

<h4>使用例</h4>

<pre class="code lang-sh" data-lang="sh" data-unlink>$ bundle <span class="synStatement">exec</span> rubocop_challenger go <span class="synStatement">\</span>
    <span class="synSpecial">--email=rubocop-challenger@example.com</span> <span class="synStatement">\</span>
    <span class="synSpecial">--name=</span><span class="synStatement">&quot;</span><span class="synConstant">Rubocop Challenger</span><span class="synStatement">&quot;</span> <span class="synStatement">\</span>
    <span class="synSpecial">--no-regenerate-rubocop-todo</span>
</pre>


<h2>既知の不具合 <strong>(v1.2.0 で解消済み)</strong></h2>

<p>RuboCop のルールの中には <strong>Cop supports --auto-correct</strong> と表記されているにも関わらず、部分的にしか auto-correct してくれないものがあります。
例えば <code>Style/Semicolon</code> が auto-correct できるのは行末に <code>;</code> が存在する場合だけのようです。</p>

<pre class="code lang-ruby" data-lang="ruby" data-unlink>puts <span class="synSpecial">'</span><span class="synConstant">hoge</span><span class="synSpecial">'</span>; <span class="synComment"># =&gt; auto-correct される</span>
puts <span class="synSpecial">'</span><span class="synConstant">fuga</span><span class="synSpecial">'</span>; puts <span class="synSpecial">'</span><span class="synConstant">piyo</span><span class="synSpecial">'</span> <span class="synComment"># =&gt; auto-correct されない</span>
</pre>


<p>このようなルールが auto-correct 対象に選ばれると、RubocopChallenger を実行した後も違反が解決されず、後続の <code>$ rubocop --auto-gen-config</code> で再度 <code>.rubocop_todo.yml</code> に対象ルールが出てきてしまうので、 RubocopChallenger が機能しない状態になってしまいます。
現状では <code>Style/Semicolon</code> のようなルールに遭遇した場合は、手動で <code>.rubocop.yml</code> にルールを移動させる必要があります。
<del>今のところ RubocopChallenger 側での対策を思い付いていないので、もし良いアイデアがありましたら教えて下さい 🙏</del></p>

<p><strong>2019/03/26 追記</strong></p>

<p>RubocopChallenger v1.2.0 で Ignore リスト機能が追加されました。
RubocopChallenger を実行した後も違反が解決されず、後続の <code>$ rubocop --auto-gen-config</code> で再度 <code>.rubocop_todo.yml</code> に対象ルールが出てきてしまった場合、 <code>.rubocop_challenger.yml</code> というファイルが作成され、対象ルールが Ignore リストに追加されます。
Ignore リストに追加されたルールは次回以降、 RubocopChallenger の対象ルールとして選択されなくなるので、特に何もしなくとも運用を続けることが可能となります。</p>

<h2>最後に</h2>

<p>当初は <strong>1669 行 195 種類</strong> の違反ルールが .rubocop_todo.yml に存在していましたが、 RubocopChallenger を導入してから 3 ヶ月で <strong>1187 行 132 種類</strong> まで減らすことが出来ました。 auto-correct 可能な違反ルールはあと 62 種類残っているので、あと半分くらいまでは減らすことができそうです。</p>

<p>本記事では肥大化してしまった .rubocop_todo.yml を自動的に修正していく RubocopChallnger を紹介し、導入方法について解説させて頂きました。 .rubocop_todo.yml が肥大化して困っているプロジェクトで役立てて頂ければ幸いです 🙏</p>

<p>また、利用してみてフィードバックなどあれば <a href="https://github.com/ryz310/rubocop_challenger/issues">Issue</a> にてご連絡下さい。 GitHub では頑張って拙い英語を書くようにしていますが、日本語でも大丈夫です 🙆 PR も大歓迎です。どうぞ宜しくお願い致します 🙇</p>
<div class="footnotes">
<hr/>
<ol>
<li id="fn:1">
<p>ちなみに導入したのは自分です<a href="#fnref:1" rev="footnote">&#8617;</a></p></li>
</ol>
</div>

]]></description>
            <enclosure url="https://github.com/ryz310/rubocop_challenger/raw/master/images/generate_token.png" length="0" type="image/png"/>
        </item>
        <item>
            <title><![CDATA[社内では開発チームマネージャーを名乗っています]]></title>
            <link>https://developer.feedforce.jp/entry/2018/12/05/110000</link>
            <guid>https://developer.feedforce.jp/entry/2018/12/05/110000</guid>
            <pubDate>Wed, 05 Dec 2018 02:00:00 GMT</pubDate>
            <description><![CDATA[<p>こんばんちわ、 <a href="http://blog.hatena.ne.jp/tmd45/" class="hatena-id-icon"><img src="https://cdn.profile-image.st-hatena.com/users/tmd45/profile.png" width="16" height="16" alt="" class="hatena-id-icon">id:tmd45</a>こと玉田です。</p>

<p>この記事は <a href="https://adventar.org/calendars/3235">feedforce Advent Calendar 2018</a> の 5 日目の記事です。昨日は dfplus.io ブログ担当 1 号こと <a href="https://adventar.org/users/21688">id:tgacky</a> さんによる『<a href="https://blog.dfplus.io/entry/news/20181204">2歳になった dfplus.io 成長の記録</a>』でした。<a href="https://dfplus.io/">dfplus.io</a> 3 年目突入おめでとうございます🎉</p>

<p>さて今回は予告どおり、たまには真面目に自分の仕事について書いてみたいと思います。</p>

<h2>所属と経歴</h2>

<p>インターネット上では本業：光の戦士<sup id="fnref:1"><a href="#fn:1" rel="footnote">1</a></sup>、散財部風紀取り乱し委員わいわい係として、おおむね tmd45 という ID で存在しています。</p>

<p>ふざけたプロフィール（気に入ってます）ですが、現実のフィードフォース社内ではプロダクト『<a href="https://socialplus.jp/">ソーシャルPLUS®</a>』の "<b>開発チームマネージャー</b>" を名乗っています。<br>
<span style="color: #cccccc">注追記: 自分の場合、役職ではないので外向けにはマネージャーではなくリーダーとなっています。</span></p>

<p>フィードフォースは社歴 2 社目で今年で勤続 5 年になりました。プロダクトが複数ある弊社内では珍しく（？）この 5 年間ずっとソーシャルPLUS 一筋にやっています。あんまりひとつのプロダクトに古参が長くいるのも良くはないんですが、今回そこは置いておいてもらって…</p>

<h2>フィードフォースの組織とマネジメント</h2>

<p>弊社の組織としての取り組みは、以下の記事が詳しいと思います。</p>

<p><iframe src="https://hatenablog-parts.com/embed?url=https%3A%2F%2Fwww.hito-link.jp%2Fmedia%2Finterview%2Ffeedforce" title="1on1、OKR、ノーレイティング…なぜ、フィードフォースは新しい施策に挑戦し続けられるのか？" class="embed-card embed-webcard" scrolling="no" frameborder="0" style="display: block; width: 100%; height: 155px; max-width: 500px; margin: 10px 0px;"></iframe><cite class="hatena-citation"><a href="https://www.hito-link.jp/media/interview/feedforce">www.hito-link.jp</a></cite></p>

<p>また、以前このブログでも取り上げた「キャリアパス」という仕組みを用いているのですが</p>

<p><iframe src="https://hatenablog-parts.com/embed?url=https%3A%2F%2Fdeveloper.feedforce.jp%2Fentry%2F2018%2F10%2F24%2F180000" title="デザイナーのキャリアパスを見直している話 - Feedforce Developer Blog" class="embed-card embed-blogcard" scrolling="no" frameborder="0" style="display: block; width: 100%; height: 190px; max-width: 500px; margin: 10px 0px;"></iframe><cite class="hatena-citation"><a href="https://developer.feedforce.jp/entry/2018/10/24/180000">developer.feedforce.jp</a></cite></p>

<p>現在エンジニアのキャリアパスは以下の３つに分けられています。</p>

<ul>
<li>エンジニアリング志向エンジニア（技術プロフェッショナル志向）</li>
<li>マネジメント志向エンジニア</li>
<li>ビジネス志向エンジニア</li>
</ul>


<p>各エンジニアがどの志向であっても、その価値が認められるよう それぞれに ジュニア ～ エキスパート の 4 段階（さらに内側で 2 段階に分かれるので実際には 8 段階ある）をもって、求められるスキルと行動特性を定義しています。</p>

<p>キャリアパスが定められる前、所属 4 年目くらいでいわゆる「リーダー職」として（端的に言えば管理職手当が付く）開発チームリーダーをやっていました。キャリアパスが作られてからは「マネジメント志向エンジニア」を選び、それを基準に目標を定めたり評価してもらったりしています。</p>

<h2>ソーシャルPLUS チームの構成</h2>

<p>いまこの記事を書きながら初めてきちんと調べましたが、<a href="https://www.feedforce.jp/release/637/">ソーシャルPLUS のリリースは 2012 年 4 月 17 日</a>とのことで、6 年半も続いているサービスです。自分が参加してからの 5 年でも、チームメンバーや人数、その構成は様々に変化してきました。</p>

<p>現在は非エンジニアのプロダクトマネージャーが統括し、ビジネスチームと開発チームがそれぞれに仕事をしています。</p>

<p><figure class="figure-image figure-image-fotolife" title="ソーシャルPLUSチーム構成（概要）図"><span itemscope itemtype="http://schema.org/Photograph"><img src="https://cdn-ak.f.st-hatena.com/images/fotolife/t/tmd45/20181204/20181204224143.png" alt="&#x30BD;&#x30FC;&#x30B7;&#x30E3;&#x30EB;PLUS&#x30C1;&#x30FC;&#x30E0;&#x69CB;&#x6210;&#xFF08;&#x6982;&#x8981;&#xFF09;&#x56F3;" title="f:id:tmd45:20181204224143p:plain" class="hatena-fotolife" itemprop="image"></span><figcaption>ソーシャルPLUSチーム構成（概要）図</figcaption></figure></p>

<p>自分（水色の人影）は開発チームの一員ですが、プロダクトの経験年数が長いことや、マネジメント志向であることで「チームマネジメント」を担っています。</p>

<p>現在のエンジニアの人数は自分を含め８名です。自分が "チームマネージャー" を名乗って意識しているのは、8 人のメンバーが<strong>チームとしてより良く力を発揮しながらイイ雰囲気で仕事をしたい</strong>、ということです。技術ももちろん好きですし、ソーシャルPLUS というプロダクトに強い思い入れも理想もありますが、それでも自分が一番放っておけないのがソコだったという感じです。</p>

<h2>開発チームマネージャーとしてやっていること</h2>

<p>かんたんにまとめると以下のようなことをやってます。すべてが上手くいってるわけじゃなくて、試行錯誤しながらだけど、自分のお気持ちを中心に書いてます。</p>

<h3>プロダクトマネージャーとエンジニアメンバー間の緩衝材</h3>

<p>衝突というと語弊がありますが「あ、ちょっと説明足りないな」みたいなところを双方に補足したりしてます。</p>

<p>エンジニアメンバー同士でもそういうことはあるので、心理的安全性の確保とも言えるかも。</p>

<h3>プロダクト開発の優先度の最終決定</h3>

<p>たいていのものはプロダクトオーナーとチームで話し合って決めますが、これといった決め手に欠けるものには自分が <del>経験と勘で</del> 決めたりします。</p>

<h3>プロダクト開発チームメンバーとの 1on1</h3>

<p>月初に 1 回、チームのエンジニア全員（7 名）と 30 分ずつ話しています。社内の 1on1 のなかでは頻度は低いほうですね。</p>

<p>事前に以下の項目をアンケートで答えてもらい、それを確認しながら雑談しています。</p>

<ul>
<li>前月でやったこと・わかったこと（YW）</li>
<li>前月の自分のパフォーマンス（1 ～ 5 選択＋コメント）</li>
<li>今月やろうと思うこと（T）</li>
<li>チームやプロダクトについて（1 ～ 5 選択＋コメント）</li>
<li>会社について（1 ～ 5 選択＋コメント）</li>
<li>その他 自由欄</li>
</ul>


<p>「プロダクトの開発」に関することを中心に、会社のことも含め割と広範囲に話しています。チームメンバーのお気持ち確認とか、各々の体調だったり生活だったりの少しプライベートなことを聞かせてもらうこともあります。個別に相談されることでも、コトによっては「You それチームに言ってみな Yo! (σゝ∀・)σ」とチームの問題にしてもらったり（たいていは週一でやっている振り返りKPTで出してもらいます）。開発マネジメント定例というマネージャーが集まる定例にエスカレーションして、もっと広い範囲で解決を試みたりもします。</p>

<p>気をつけてるつもりでも、自分がおしゃべりな質なのでこちらが喋りすぎている気はします。毎度反省。けど 1on1 やってよかった、というフィードバックをちょくちょくもらえてるので私もありがたいです。</p>

<h3>プロダクト開発チームミーティングの司会進行</h3>

<p>上の緩衝材の話とも関連してますが、ミーティングの雰囲気づくりも兼ねてるので司会進行業は自分がやることが多いです。</p>

<p>とはいえ、自分が居ないと定例が進まないというのも問題なので、ここは逆になんとかしておきたい状況です。</p>

<h3>プロダクト開発の落ち穂拾い</h3>

<p>計画しているタスク以外にも、毎日いろんなことが起こります。</p>

<p>落ち穂拾いといっても、全部私が片付けているというわけではなく、メンバーの状況を見てタスクとしてお願いするということもします。</p>

<p>拾いにくい落ち穂を拾う、というのが正しいかも。拾いやすいもの（それも人によって違う）は自主的に拾ってくれるメンバーなので、助かってます。</p>

<h2>おわり</h2>

<p>他にもいろいろやってることがあるんですが、なかなか文章にするのが難しいですね。今回はこのへんで。</p>

<p>明日の <a href="https://adventar.org/calendars/3235">feedforce Advent Calendar 2018</a> は <a href="https://adventar.org/users/21767">id:funesan2</a> による『煮る！』お話です。いったい何を煮たのか…おたのしみに！</p>
<div class="footnotes">
<hr/>
<ol>
<li id="fn:1">
<p>オンラインMMORPG『<a href="https://jp.finalfantasyxiv.com/">FINAL FANTASY XIV</a>』のプレイヤーの意<a href="#fnref:1" rev="footnote">&#8617;</a></p></li>
</ol>
</div>

]]></description>
            <enclosure url="https://cdn-ak.f.st-hatena.com/images/fotolife/t/tmd45/20181204/20181204224143.png" length="0" type="image/png"/>
        </item>
        <item>
            <title><![CDATA[インク沼に足首らへん？まで浸かっている話]]></title>
            <link>https://blog.tmd45.jp/entry/2018/12/01/000000</link>
            <guid>https://blog.tmd45.jp/entry/2018/12/01/000000</guid>
            <pubDate>Fri, 30 Nov 2018 15:00:00 GMT</pubDate>
            <description><![CDATA[<p>この記事は <a href="https://adventar.org/calendars/2946">沼 Advent Calendar 2018</a> の 1 日目の記事です。ご参加予定の皆さまありがとうございます。</p>

<p>こちらは自分が浸かってる沼について語りつつ、他の沼を覗いてみようみたいな趣旨のゆるい Advent Calendar です。まだ空きもたくさんありますので、お気軽にご参加ください。</p>

<p>ここで言う「沼」とは、以下のような<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%B9%A5%E9%A5%F3%A5%B0">スラング</a>としての沼を指します。</p>

<blockquote><p>あるジャンルが好きになり過ぎてハマってしまい抜け出せなくなること。沼落ち。</p></blockquote>

<p>さっそく私が最近ハマり始めた沼のお話です。</p>

<ul class="table-of-contents">
    <li><a href="#万年筆インク沼">万年筆インク沼</a><ul>
            <li><a href="#これから始めてみたい人へのおすすめ万年筆">これから始めてみたい人へのおすすめ万年筆</a><ul>
                    <li><a href="#PILOT-カクノ">PILOT カクノ</a></li>
                    <li><a href="#PILOT-プレラ-色彩逢い">PILOT プレラ 色彩逢い</a></li>
                    <li><a href="#TWSBI-ECO--TWSBI-ECO-T">TWSBI ECO / TWSBI ECO-T</a></li>
                </ul>
            </li>
            <li><a href="#これから始めてみたい人へのおすすめインク">これから始めてみたい人へのおすすめインク</a></li>
        </ul>
    </li>
    <li><a href="#インクがたくさん増えてきたら">インクがたくさん増えてきたら</a></li>
    <li><a href="#さらに沼へ">さらに沼へ</a></li>
    <li><a href="#インク沼っていうか文房具沼が深い">インク沼っていうか文房具沼が深い</a></li>
    <li><a href="#おわりに">おわりに</a></li>
</ul>

<h2 id="万年筆インク沼">万年筆インク沼</h2>

<p>すでに過去の記事に書いてますが、9月から紙のシステム手帳を日記代わりに使い始め、それをきっかけに 10 月頃から万年筆を使うようになりました。</p>

<p>以下がこれまでの成果です。</p>

<p><iframe src="https://hatenablog-parts.com/embed?url=https%3A%2F%2Fblog.tmd45.jp%2Fentry%2F2018%2F10%2F20%2F205348" title="万年筆とインクに入門してみた - TMD45&#39;β&#39;LOG!!!" class="embed-card embed-blogcard" scrolling="no" frameborder="0" style="display: block; width: 100%; height: 190px; max-width: 500px; margin: 10px 0px;"></iframe><cite class="hatena-citation"><a href="https://blog.tmd45.jp/entry/2018/10/20/205348">blog.tmd45.jp</a></cite></p>

<p><iframe src="https://hatenablog-parts.com/embed?url=https%3A%2F%2Fblog.tmd45.jp%2Fentry%2F2018%2F10%2F28%2F205014" title="入れたインクの色が見える &quot;スケルトンな万年筆&quot; をまとめてみた - TMD45&#39;β&#39;LOG!!!" class="embed-card embed-blogcard" scrolling="no" frameborder="0" style="display: block; width: 100%; height: 190px; max-width: 500px; margin: 10px 0px;"></iframe><cite class="hatena-citation"><a href="https://blog.tmd45.jp/entry/2018/10/28/205014">blog.tmd45.jp</a></cite></p>

<p><iframe src="https://hatenablog-parts.com/embed?url=https%3A%2F%2Fblog.tmd45.jp%2Fentry%2F2018%2F11%2F06%2F000636" title="BUNGUBOX オリジナルインク TOKYO METRO COLOR - TMD45&#39;β&#39;LOG!!!" class="embed-card embed-blogcard" scrolling="no" frameborder="0" style="display: block; width: 100%; height: 190px; max-width: 500px; margin: 10px 0px;"></iframe><cite class="hatena-citation"><a href="https://blog.tmd45.jp/entry/2018/11/06/000636">blog.tmd45.jp</a></cite></p>

<p><iframe src="https://hatenablog-parts.com/embed?url=https%3A%2F%2Fblog.tmd45.jp%2Fentry%2F2018%2F11%2F11%2F121605" title="インクを &quot;タミヤして&quot; いただく初体験 - TMD45&#39;β&#39;LOG!!!" class="embed-card embed-blogcard" scrolling="no" frameborder="0" style="display: block; width: 100%; height: 190px; max-width: 500px; margin: 10px 0px;"></iframe><cite class="hatena-citation"><a href="https://blog.tmd45.jp/entry/2018/11/11/121605">blog.tmd45.jp</a></cite></p>

<p>現時点で持っているインクを一覧にしてみました。</p>

<p><figure class="figure-image figure-image-fotolife" title="自分だけのインク手帳を作る愉しみ"><span itemscope itemtype="http://schema.org/Photograph"><img src="https://cdn-ak.f.st-hatena.com/images/fotolife/t/tmd45/20181129/20181129235754.jpg" alt="&#x81EA;&#x5206;&#x3060;&#x3051;&#x306E;&#x30A4;&#x30F3;&#x30AF;&#x624B;&#x5E33;&#x3092;&#x4F5C;&#x308B;&#x305F;&#x306E;&#x3057;&#x307F;" title="f:id:tmd45:20181129235754j:plain" class="hatena-fotolife" itemprop="image"></span><figcaption>自分だけのインク手帳を作る愉しみ</figcaption></figure></p>

<p>こういうものを作ること自体が楽しい(*´ｪ`*)</p>

<p>似たような色でも、濃く重ねたり、水で伸ばしたり、時間が経ったりすると違う味が出てくるのと<br/>
一色一色に素敵な名前が付けられていたり、ユニークなシリーズが出ていたりと、ほんとに沼だなぁと思う世界です。</p>

<h3 id="これから始めてみたい人へのおすすめ万年筆">これから始めてみたい人へのおすすめ万年筆</h3>

<p>最近、万年筆やインク自体の流行りが来てるそうです。その流れもあってか、国内メーカーのサイトには万年筆の入門・紹介ページがあったりします。</p>

<p>私も最初は PILOT の万年筆入門記事を読んでました。</p>

<ul>
<li><a href="http://www.pilot.co.jp/promotion/library/001/">万年筆は「書く為の道具」 | 特集記事一覧 | PILOT LIBRARY | PILOT</a></li>
</ul>


<p>インクの入れ方や、お手入れの仕方などが動画になっていてわかりやすいと思います。</p>

<h4 id="PILOT-カクノ">PILOT カクノ</h4>

<p>文房具屋さんでの取扱いも多く、そもそも入門用として作られているので、どこでもおすすめされているのが <strong>PILOT カクノ</strong>。<strong>1,000円程度</strong> で購入することができ、カートリッジインクとかんたんな説明書が同封されています。</p>

<p>他の廉価万年筆に比べて、ペン先の太さのバリエーションが多いのも魅力でしょうか。手帳など細かく書くのに使うなら EF（極細字）や F（細字）、それ以外でインクの色をしっかり楽しみたいなら M（中字）以上の太さが良いかと思います。</p>

<p>ボトルインクを楽しむときには、別売りの<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%B3%A5%F3%A5%D0%A1%BC%A5%BF%A1%BC">コンバーター</a>を購入する必要があります。</p>

<p><div class="hatena-asin-detail"><a href="http://www.amazon.co.jp/exec/obidos/ASIN/B0744C76MG/tmd45-22/"><img src="https://images-fe.ssl-images-amazon.com/images/I/41Y9g7e5lEL._SL160_.jpg" class="hatena-asin-detail-image" alt="kakuno/万年筆・カクノ F細字【透明ボディ/ノンカラー】 FKA-1SR-NCF" title="kakuno/万年筆・カクノ F細字【透明ボディ/ノンカラー】 FKA-1SR-NCF"></a><div class="hatena-asin-detail-info"><p class="hatena-asin-detail-title"><a href="http://www.amazon.co.jp/exec/obidos/ASIN/B0744C76MG/tmd45-22/">kakuno/万年筆・カクノ F細字【透明ボディ/ノンカラー】 FKA-1SR-NCF</a></p><ul><li><span class="hatena-asin-detail-label">出版社/メーカー:</span> <a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%D1%A5%A4%A5%ED">パイロ</a>ット</li><li><span class="hatena-asin-detail-label">メディア:</span> </li><li><a href="http://d.hatena.ne.jp/asin/B0744C76MG/tmd45-22" target="_blank">この商品を含むブログを見る</a></li></ul></div><div class="hatena-asin-detail-foot"></div></div></p>

<h4 id="PILOT-プレラ-色彩逢い">PILOT プレラ 色彩逢い</h4>

<p><strong>3,000円台</strong> でおすすめなのは <strong>PILOT プレラ 色彩逢い</strong>。全長が短く小ぶりなボディが可愛らしく、クリアカラーで中に入れるインクと色を合わせるのも楽しいです。</p>

<p>ペン先のバリエーションは F（細字）と CM（カリグラフィ）というちょっと変わった組み合わせ。本格的なカリグラフィには向かないですが、太い線と細い線の両方を表現できる（<a class="keyword" href="http://d.hatena.ne.jp/keyword/%CC%C0%C4%AB%C2%CE">明朝体</a>のような感じ）のが面白くて、私は普段から使っています。</p>

<p>こちらは<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%B3%A5%F3%A5%D0%A1%BC%A5%BF%A1%BC">コンバーター</a>が付属しているので、インクがあればそれを補充して使うことができます。</p>

<p><div class="hatena-asin-detail"><a href="http://www.amazon.co.jp/exec/obidos/ASIN/B009VWMN94/tmd45-22/"><img src="https://images-fe.ssl-images-amazon.com/images/I/51lBvw4E6oL._SL160_.jpg" class="hatena-asin-detail-image" alt="【PILOT】パイロット プレラ 色彩逢い(いろあい) PRERA 万年筆F （細字）ブルー" title="【PILOT】パイロット プレラ 色彩逢い(いろあい) PRERA 万年筆F （細字）ブルー"></a><div class="hatena-asin-detail-info"><p class="hatena-asin-detail-title"><a href="http://www.amazon.co.jp/exec/obidos/ASIN/B009VWMN94/tmd45-22/">【PILOT】パイロット プレラ 色彩逢い(いろあい) PRERA 万年筆F （細字）ブルー</a></p><ul><li><span class="hatena-asin-detail-label">出版社/メーカー:</span> PILOT</li><li><span class="hatena-asin-detail-label">メディア:</span> オフィス用品</li><li><a href="http://d.hatena.ne.jp/asin/B009VWMN94/tmd45-22" target="_blank">この商品を含むブログを見る</a></li></ul></div><div class="hatena-asin-detail-foot"></div></div></p>

<p><div class="hatena-asin-detail"><a href="http://www.amazon.co.jp/exec/obidos/ASIN/B009VVBRJM/tmd45-22/"><img src="https://images-fe.ssl-images-amazon.com/images/I/41Ns%2B6ToXxL._SL160_.jpg" class="hatena-asin-detail-image" alt="Pilot プレラ Iro-Ai カリグラフィー用のペン先 万年筆ボディ" title="Pilot プレラ Iro-Ai カリグラフィー用のペン先 万年筆ボディ"></a><div class="hatena-asin-detail-info"><p class="hatena-asin-detail-title"><a href="http://www.amazon.co.jp/exec/obidos/ASIN/B009VVBRJM/tmd45-22/">Pilot プレラ Iro-Ai カリグラフィー用のペン先 万年筆ボディ</a></p><ul><li><span class="hatena-asin-detail-label">出版社/メーカー:</span> Pilot</li><li><span class="hatena-asin-detail-label">発売日:</span> 2014/10/01</li><li><span class="hatena-asin-detail-label">メディア:</span> オフィス用品</li><li><a href="http://d.hatena.ne.jp/asin/B009VVBRJM/tmd45-22" target="_blank">この商品を含むブログを見る</a></li></ul></div><div class="hatena-asin-detail-foot"></div></div></p>

<h4 id="TWSBI-ECO--TWSBI-ECO-T">TWSBI ECO / TWSBI ECO-T</h4>

<p>最近自分で使いはじめて気に入ってるのが、<strong>5,000円台</strong> で入手可能な <strong>TWSBI ECO</strong>。TWSBI は台湾の万年筆メーカーです。</p>

<p>こちらもペン先の種類が豊富です。珍しいところでは STUB 1.1 という極太のペン先が存在しています。プレラのカリグラフィと同様に、太い線と細い線を表現することができます。</p>

<p>1,000円、3,000円 のものよりしっかりした感触で「万年筆を使ってるゼ」という満足感が得られる気がします（笑）</p>

<p><div class="hatena-asin-detail"><a href="http://www.amazon.co.jp/exec/obidos/ASIN/B011M8HXQ2/tmd45-22/"><img src="https://images-fe.ssl-images-amazon.com/images/I/31cn5R1ZtJL._SL160_.jpg" class="hatena-asin-detail-image" alt="TWSBI（ツイスビー） ECO 万年筆 F（細字） ホワイト M7444340" title="TWSBI（ツイスビー） ECO 万年筆 F（細字） ホワイト M7444340"></a><div class="hatena-asin-detail-info"><p class="hatena-asin-detail-title"><a href="http://www.amazon.co.jp/exec/obidos/ASIN/B011M8HXQ2/tmd45-22/">TWSBI（ツイスビー） ECO 万年筆 F（細字） ホワイト M7444340</a></p><ul><li><span class="hatena-asin-detail-label">出版社/メーカー:</span> TWSBI</li><li><span class="hatena-asin-detail-label">メディア:</span> オフィス用品</li><li><a href="http://d.hatena.ne.jp/asin/B011M8HXQ2/tmd45-22" target="_blank">この商品を含むブログを見る</a></li></ul></div><div class="hatena-asin-detail-foot"></div></div></p>

<h3 id="これから始めてみたい人へのおすすめインク">これから始めてみたい人へのおすすめインク</h3>

<p>手に入りやすく、色も豊富、名前も素敵で、ミニボトルの価格帯もお財布に優しいということで、やっぱり PILOT <a class="keyword" href="http://d.hatena.ne.jp/keyword/%BF%A7%BA%CC%BC%B6">色彩雫</a>はおすすめです。</p>

<p><div class="hatena-asin-detail"><a href="http://www.amazon.co.jp/exec/obidos/ASIN/B012ESIIGS/tmd45-22/"><img src="https://images-fe.ssl-images-amazon.com/images/I/41KXd2193wL._SL160_.jpg" class="hatena-asin-detail-image" alt="PILOT　色彩雫　イロシズク　ミニ　3色セット　15ml　専用ケース入り　INK-15　3色自由に選べます" title="PILOT　色彩雫　イロシズク　ミニ　3色セット　15ml　専用ケース入り　INK-15　3色自由に選べます"></a><div class="hatena-asin-detail-info"><p class="hatena-asin-detail-title"><a href="http://www.amazon.co.jp/exec/obidos/ASIN/B012ESIIGS/tmd45-22/">PILOT　色彩雫　イロシズク　ミニ　3色セット　15ml　専用ケース入り　INK-15　3色自由に選べます</a></p><ul><li><span class="hatena-asin-detail-label">出版社/メーカー:</span> PILOT</li><li><span class="hatena-asin-detail-label">メディア:</span> </li><li><a href="http://d.hatena.ne.jp/asin/B012ESIIGS/tmd45-22" target="_blank">この商品を含むブログを見る</a></li></ul></div><div class="hatena-asin-detail-foot"></div></div></p>

<p>同様に<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%BB%A1%BC%A5%E9%A1%BC%CB%FC%C7%AF%C9%AE">セーラー万年筆</a>の四季織シリーズも。</p>

<p><div class="hatena-asin-detail"><a href="http://www.amazon.co.jp/exec/obidos/ASIN/B075ZWB2PQ/tmd45-22/"><img src="https://images-fe.ssl-images-amazon.com/images/I/51jSZeJix9L._SL160_.jpg" class="hatena-asin-detail-image" alt="セーラー万年筆 万年筆 ボトルインク 四季織 十六夜の夢 雪明 13-1008-210" title="セーラー万年筆 万年筆 ボトルインク 四季織 十六夜の夢 雪明 13-1008-210"></a><div class="hatena-asin-detail-info"><p class="hatena-asin-detail-title"><a href="http://www.amazon.co.jp/exec/obidos/ASIN/B075ZWB2PQ/tmd45-22/">セーラー万年筆 万年筆 ボトルインク 四季織 十六夜の夢 雪明 13-1008-210</a></p><ul><li><span class="hatena-asin-detail-label">出版社/メーカー:</span> <a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%BB%A1%BC%A5%E9%A1%BC%CB%FC%C7%AF%C9%AE">セーラー万年筆</a></li><li><span class="hatena-asin-detail-label">発売日:</span> 2017/09/29</li><li><span class="hatena-asin-detail-label">メディア:</span> オフィス用品</li><li><a href="http://d.hatena.ne.jp/asin/B075ZWB2PQ/tmd45-22" target="_blank">この商品を含むブログを見る</a></li></ul></div><div class="hatena-asin-detail-foot"></div></div></p>

<p>こういったメジャーなインク以外にも、以前の記事でも紹介しましたが、<a href="http://happyinkdays.hatenablog.com/">HAPPY INK DAYS archives</a> というブログで毎日いろいろなインクが紹介されています。</p>

<p>見てるだけでも楽しいですし、物欲も刺激されます。自分の手で、この色で、好きなものを書いてみたいな～と妄想するのがたまりません。</p>

<h2 id="インクがたくさん増えてきたら">インクがたくさん増えてきたら</h2>

<p>すべてを万年筆に入れておくのは難しいです。万年筆は普段から使っていないと、ペン先のインクが乾いたりしてしまいます。万年筆の一番のメンテナンスは「毎日使うこと」とのことです。</p>

<p>なので、普段使う万年筆には使いやすい色とか、とくにお気に入りの色とかを入れて持ち歩きます。</p>

<p>そうでないインクは、<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A4%C4%A4%B1%A5%DA%A5%F3">つけペン</a>やガラスペンなどを使って楽しむようにしています。</p>

<p><div class="hatena-asin-detail"><a href="http://www.amazon.co.jp/exec/obidos/ASIN/B010D2PAWW/tmd45-22/"><img src="https://images-fe.ssl-images-amazon.com/images/I/41%2BcEYACmXL._SL160_.jpg" class="hatena-asin-detail-image" alt="ルビナート ガラスペン NOV/D アメジスト#6" title="ルビナート ガラスペン NOV/D アメジスト#6"></a><div class="hatena-asin-detail-info"><p class="hatena-asin-detail-title"><a href="http://www.amazon.co.jp/exec/obidos/ASIN/B010D2PAWW/tmd45-22/">ルビナート ガラスペン NOV/D アメジスト#6</a></p><ul><li><span class="hatena-asin-detail-label">出版社/メーカー:</span> ルビナート(Rubinato)</li><li><span class="hatena-asin-detail-label">メディア:</span> オフィス用品</li><li><a href="http://d.hatena.ne.jp/asin/B010D2PAWW/tmd45-22" target="_blank">この商品を含むブログを見る</a></li></ul></div><div class="hatena-asin-detail-foot"></div></div></p>

<p>インク沼として楽しむのであれば、万年筆ではなく<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A4%C4%A4%B1%A5%DA%A5%F3">つけペン</a>だけでもいいかもしれませんね。</p>

<h2 id="さらに沼へ">さらに沼へ</h2>

<p>このように、インクの魅力に惹かれていった結果、万年筆が何本も増えたり（まだお高いものには手を出していないですが^^;）、<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A4%C4%A4%B1%A5%DA%A5%F3">つけペン</a>が増えたり…</p>

<p>さらには「万年筆インクで書きやすい紙」についてもこだわりはじめます。</p>

<p>もともと文房具そのものが好きということもあって、「万年筆インクで書きやすい紙」もいろいろな種類を買って試してみています。</p>

<p><div class="hatena-asin-detail"><a href="http://www.amazon.co.jp/exec/obidos/ASIN/B07B2ZJYD6/tmd45-22/"><img src="https://images-fe.ssl-images-amazon.com/images/I/41LmZ862uwL._SL160_.jpg" class="hatena-asin-detail-image" alt="ミドリ メモ MDペーパーパッド A5 無罫 15235006" title="ミドリ メモ MDペーパーパッド A5 無罫 15235006"></a><div class="hatena-asin-detail-info"><p class="hatena-asin-detail-title"><a href="http://www.amazon.co.jp/exec/obidos/ASIN/B07B2ZJYD6/tmd45-22/">ミドリ メモ MDペーパーパッド A5 無罫 15235006</a></p><ul><li><span class="hatena-asin-detail-label">出版社/メーカー:</span> デザインフィル</li><li><span class="hatena-asin-detail-label">発売日:</span> 2018/02/28</li><li><span class="hatena-asin-detail-label">メディア:</span> オフィス用品</li><li><a href="http://d.hatena.ne.jp/asin/B07B2ZJYD6/tmd45-22" target="_blank">この商品を含むブログを見る</a></li></ul></div><div class="hatena-asin-detail-foot"></div></div></p>

<p><div class="hatena-asin-detail"><a href="http://www.amazon.co.jp/exec/obidos/ASIN/B0177ONZHG/tmd45-22/"><img src="https://images-fe.ssl-images-amazon.com/images/I/21SabU9xmoL._SL160_.jpg" class="hatena-asin-detail-image" alt="神戸派計画 GRAPHILO paper A5" title="神戸派計画 GRAPHILO paper A5"></a><div class="hatena-asin-detail-info"><p class="hatena-asin-detail-title"><a href="http://www.amazon.co.jp/exec/obidos/ASIN/B0177ONZHG/tmd45-22/">神戸派計画 GRAPHILO paper A5</a></p><ul><li><span class="hatena-asin-detail-label">出版社/メーカー:</span> 神戸派計画</li><li><span class="hatena-asin-detail-label">メディア:</span> オフィス用品</li><li><a href="http://d.hatena.ne.jp/asin/B0177ONZHG/tmd45-22" target="_blank">この商品を含むブログを見る</a></li></ul></div><div class="hatena-asin-detail-foot"></div></div></p>

<p>これ以外にもいろいろ買いましたが、それはまた別の機会にまとめたいと思います。</p>

<h2 id="インク沼っていうか文房具沼が深い">インク沼っていうか文房具沼が深い</h2>

<p><a class="keyword" href="http://d.hatena.ne.jp/keyword/Twitter">Twitter</a> や <a class="keyword" href="http://d.hatena.ne.jp/keyword/Facebook">Facebook</a>、<a class="keyword" href="http://d.hatena.ne.jp/keyword/Instagram">Instagram</a> などあらゆる場所で文房具に関する<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%CF%A5%C3%A5%B7%A5%E5%A5%BF%A5%B0">ハッシュタグ</a>やグループが盛り上がっています。</p>

<p>そういうのを眺めるのも楽しみのひとつです。</p>

<ul>
<li><a href="https://twitter.com/hashtag/%E6%89%8B%E6%9B%B8%E3%81%8D%E3%83%84%E3%82%A4%E3%83%BC%E3%83%88?f=tweets&amp;vertical=default&amp;src=hash">#手書きツイート - Twitter</a></li>
<li><a href="https://twitter.com/hashtag/%E3%82%86%E3%82%8B%E6%9B%B8%E5%86%99?f=tweets&amp;vertical=default&amp;src=hash">#ゆる書写 - Twitter</a></li>
<li><a href="https://twitter.com/hashtag/%E4%B8%87%E5%B9%B4%E7%AD%86%E3%82%A4%E3%83%A9%E3%82%B9%E3%83%88%E9%83%A8?f=tweets&amp;vertical=default&amp;src=hash">#万年筆イラスト部 - Twitter</a></li>
</ul>


<p>ハ<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%B3%A5%DA%A5%F3">コペン</a>さんの書写ツイートがとても美しくて好きです。</p>

<p><blockquote class="twitter-tweet" data-lang="ja"><p lang="ja" dir="ltr">ゆる書写を書きました。<br><a class="keyword" href="http://d.hatena.ne.jp/keyword/%B9%BE%B8%CD%C0%EE%CD%F0%CA%E2">江戸川乱歩</a> 「鏡地獄」より。<br>ブラックライトで光らせてみました。<br><br>使用インク : Organics studio Nitrogen、Walden pond 、<a class="keyword" href="http://d.hatena.ne.jp/keyword/%BF%A7%BA%CC%BC%B6">色彩雫</a> 山葡萄<br><br> <a href="https://twitter.com/hashtag/%E3%82%86%E3%82%8B%E6%9B%B8%E5%86%99?src=hash&amp;ref_src=twsrc%5Etfw">#ゆる書写</a> <a href="https://twitter.com/hashtag/%E6%9B%B8%E5%86%99?src=hash&amp;ref_src=twsrc%5Etfw">#書写</a> <a href="https://twitter.com/hashtag/%E6%89%8B%E6%9B%B8%E3%81%8D%E3%83%84%E3%82%A4%E3%83%BC%E3%83%88?src=hash&amp;ref_src=twsrc%5Etfw">#手書きツイート</a> <a href="https://twitter.com/hashtag/%E6%89%8B%E6%9B%B8%E3%81%8D?src=hash&amp;ref_src=twsrc%5Etfw">#手書き</a> <a href="https://twitter.com/hashtag/%E3%82%A4%E3%83%B3%E3%82%AF%E6%B2%BC?src=hash&amp;ref_src=twsrc%5Etfw">#インク沼</a> <a href="https://twitter.com/hashtag/%E8%89%B2%E5%BD%A9%E9%9B%AB?src=hash&amp;ref_src=twsrc%5Etfw">#色彩雫</a> <a href="https://twitter.com/hashtag/Organicsstudio?src=hash&amp;ref_src=twsrc%5Etfw">#Organicsstudio</a> <a href="https://twitter.com/hashtag/%E6%BF%83%E6%B7%A1%E8%90%8C%E3%81%88?src=hash&amp;ref_src=twsrc%5Etfw">#濃淡萌え</a><a href="https://twitter.com/hashtag/%E6%B7%B1%E5%A4%9C%E3%81%AE%E3%82%86%E3%82%8B%E6%9B%B8%E5%86%9960%E5%88%86%E4%B8%80%E6%9C%AC%E5%8B%9D%E8%B2%A0?src=hash&amp;ref_src=twsrc%5Etfw">#深夜のゆる書写60分一本勝負</a> <a href="https://t.co/plAwlgkLDk">pic.twitter.com/plAwlgkLDk</a></p>&mdash; ハ<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%B3%A5%DA%A5%F3">コペン</a> (@hakoppen2018) <a href="https://twitter.com/hakoppen2018/status/1061549929263321088?ref_src=twsrc%5Etfw">2018年11月11日</a></blockquote><script async src="https://platform.twitter.com/widgets.js" charset="utf-8"></script></p>

<p>ほぼ同様の<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%CF%A5%C3%A5%B7%A5%E5%A5%BF%A5%B0">ハッシュタグ</a>が <a class="keyword" href="http://d.hatena.ne.jp/keyword/Instagram">Instagram</a> にもあります。</p>

<h2 id="おわりに">おわりに</h2>

<p>まだまだ紹介したいものがたくさんありますが、一記事にするにはいろいろありすぎるのでこのへんで。</p>

<p>というか参加ハードルを下げるためにさらっと書いて終わろうと思ってたのに、めっちゃ書いてしまった。沼だわぁ。</p>

<p>明日は <a href="https://adventar.org/users/20291">maccha418</a> さんが『リアル脱出ゲーム（SCRAP）沼』について書いてくれるとのこと。私もリアル脱出ゲームは一度参加したことがありますが、素敵なエンタテイメントですよね！</p>

<p>引き続き <a href="https://adventar.org/calendars/2946">沼 Advent Calendar 2018</a> をよろしくおねがいします☺</p>
]]></description>
            <enclosure url="https://cdn-ak.f.st-hatena.com/images/fotolife/t/tmd45/20181129/20181129235754.jpg" length="0" type="image/jpg"/>
        </item>
        <item>
            <title><![CDATA[Heroku Meetup #23 "Heroku Dynamite!!" で話してきた #herokujp]]></title>
            <link>https://masutaka.net/2018-11-28-1/</link>
            <guid>https://masutaka.net/2018-11-28-1/</guid>
            <pubDate>Wed, 28 Nov 2018 00:00:00 GMT</pubDate>
            <description><![CDATA[https://herokujp.doorkeeper.jp/events/82754 最近業務で Heroku 周りのことを一手に引き受けています。社内に本番環境での知見はあまりないので、参加してきました。
参加は初なんですが、前回の記事 [2018-11-21-1] を Slack の HerokuJP User Group にシェアしたら成り行きで話すことに。LT 以外で外で話すのは初でしたが、良い意味でこじんまりした Meetup で、割とリラックスして話せましたね。
会社の勉強会だと 20 人くらいいるので、良い訓練になっていたのかも。
アプリケーションエンジニアから見た The Twelve-Factor App by @kimihom    The Twelve-Factor App は以前読んだことがあったけど、もう一度確認しようと思いました。
config/environments/staging.rb 作ってしまうとか、忘れてますね&hellip;。中身は require_relative &lsquo;./production.rb&rsquo; にしてますがね。
先々週 GA になった heroku.yml を使った Docker Deploy の紹介 by @masutaka    前述のとおり、[2018-11-21-1] のプレゼン版です。
プレゼン用に ↓ このリポジトリを作りました。README.md に沿って試すと、とっても簡単に Heroku の Docker 周りを試せます。興味ある方は是非どうぞ。
  正しく理解する Heroku Flow by @sho7650  ちょうど Heroku CI と Promotion は知りたかったので、タイミングが良かったです。]]></description>
        </item>
        <item>
            <title><![CDATA[先週 GA になった、heroku.yml を使った Docker Deploy を試した]]></title>
            <link>https://masutaka.net/2018-11-21-1/</link>
            <guid>https://masutaka.net/2018-11-21-1/</guid>
            <pubDate>Wed, 21 Nov 2018 00:00:00 GMT</pubDate>
            <description><![CDATA[先週 Building Docker Images with heroku.yml が GA になってました。
Building Docker Images with heroku.yml Is Generally Available heroku.yml は使ったことがなく、最近 Redash を Docker on Heroku で
立て、モチベーションが上がっているので、早速試してみました。
今までの方法と比較しながら、気づいたことを中心にまとめていきます。
Container Registry &amp; Runtime (Docker Deploys)  今まで Heroku で Docker を使うときは、このようにデプロイしていました。
$ heroku container:push web # (1) $ heroku container:release web # (2) (1) でローカルで docker build して、Heroku の Docker registry に
push します。
(2) で push した Docker Image をデプロイします。
heroku への git push は不要でした。ローカルで docker build するの]]></description>
        </item>
        <item>
            <title><![CDATA[『Heroku と EC Booster と私』と『Heroku ちょこっと Deep Dive』という発表をした]]></title>
            <link>https://developer.feedforce.jp/entry/2018/11/14/140000</link>
            <guid>https://developer.feedforce.jp/entry/2018/11/14/140000</guid>
            <pubDate>Wed, 14 Nov 2018 05:00:00 GMT</pubDate>
            <description><![CDATA[<p>こんにちは。増田（<a href="http://blog.hatena.ne.jp/masutaka26/" class="hatena-id-icon"><img src="https://cdn.profile-image.st-hatena.com/users/masutaka26/profile.png" width="16" height="16" alt="" class="hatena-id-icon">id:masutaka26</a>）です。以前住んだ街を訪れるのが趣味です。</p>

<p>週次の社内勉強会 <a href="https://developer.feedforce.jp/archive/category/FFTT">FFTT</a> で『Heroku と EC Booster と私』と『Heroku ちょこっと Deep Dive』という発表をしました。</p>

<p>まさかのダブルタイトル・・・！ スライドを作っていたら別々の話のような気がして、こうなりました。</p>

<h2>発表の内容</h2>

<script async class="speakerdeck-embed" data-id="868618a13fbb4e8d8baf8f00c1f2e962" data-ratio="1.33333333333333" src="//speakerdeck.com/assets/embed.js"></script>


<p>『Heroku と EC Booster と私』は主に社内向けの話です。最近の EC Booster のインフラを紹介する機会がなかったので、今回の発表の場を借りました。</p>

<p>『Heroku ちょこっと Deep Dive』では Heroku の Slug について、ちょこっと調べました。</p>

<p>Heroku では <a href="https://jp.heroku.com/dynos">Dyno</a> という軽量コンテナ上で、アプリケーションが動作します。アプリケーションは <a href="https://devcenter.heroku.com/articles/slug-compiler">Slug というパッケージに固められて</a>います。Slug にはアプリケーションコードの他に Buildpack や、Ruby なら bundle install されたライブラリ等が含められています。</p>

<p>最近 Heroku を Terraform で管理し始めた時に、<a href="https://www.terraform.io/docs/providers/heroku/r/slug.html">heroku_slug</a> というリソースを見つけました。使いはしなかったのですが、自分で Slug を変更できる感覚がよく分からなくて調べたことが始まりでした。</p>

<p>まさか Scratch から作れるとは思いませんでしたし、Slug の中身やサイズの増減を把握する方法が分かったことは大きな収穫でした。</p>

<p>発表では話し忘れたのですが、Heroku は Stack に日々セキュリティパッチが当たって、24 時間以内に適用されることは大きなメリットです。小さなチームで当てるべきパッチの把握や適用をするのは、相当しんどいですからね。</p>

<p>それでは、発表後に書いてくれた付箋への返信です。</p>

<h2>発表の感想</h2>

<p>付箋紙に感想を書いてくれました。<i class="blogicon-comment" aria-hidden="true"></i> は私からのコメントです。</p>

<ul>
<li><span itemscope itemtype="http://schema.org/Photograph"><img src="https://cdn-ak.f.st-hatena.com/images/fotolife/m/masutaka26/20181112/20181112233219.jpg" alt="Heroku by yousuke?" title="f:id:masutaka26:20181112233219j:plain" class="hatena-fotolife" itemprop="image"></span>

<ul>
<li><i class="blogicon-comment" aria-hidden="true"></i> いつもありがとうございます</li>
</ul>
</li>
<li>ふだん Heroku Review App しか使ってなかったんですが、興味を持ちました

<ul>
<li><i class="blogicon-comment" aria-hidden="true"></i> Rails アプリの公開にも、小さなスクリプトの定期実行にも使えるので便利ですよ</li>
</ul>
</li>
<li>マッスル マスタカ！💪

<ul>
<li><i class="blogicon-comment" aria-hidden="true"></i> マッスル マッスル！💪</li>
</ul>
</li>
<li>Heroku 未だに HTTP 1.1 なんですよね

<ul>
<li><i class="blogicon-comment" aria-hidden="true"></i> そうなんですよねー 💦 さすがにそろそろ...</li>
</ul>
</li>
<li>早く AWS + CloudFront 使いたい

<ul>
<li><i class="blogicon-comment" aria-hidden="true"></i> assets は CDN に逃したいですねー</li>
</ul>
</li>
<li>(dfplus.)io はいまだにフロントは Heroku 使ってマスタカ

<ul>
<li><i class="blogicon-comment" aria-hidden="true"></i> そうでありマスタカ</li>
</ul>
</li>
<li>Push された tar ball に build された file が入るんですか

<ul>
<li><i class="blogicon-comment" aria-hidden="true"></i> そんな感じですー</li>
</ul>
</li>
<li>EC Booster のリリース時に Heroku を徹底的につかいたおすことを目標にしていたので、この発表もマスタカさんのふだんの仕事もとても感謝しています

<ul>
<li><i class="blogicon-comment" aria-hidden="true"></i> もったいないお言葉、ありがとうございます！</li>
</ul>
</li>
<li>「Heroku は良いサービス」めっちゃわかる

<ul>
<li><i class="blogicon-comment" aria-hidden="true"></i> だよねー</li>
</ul>
</li>
<li>Heroku は良しなにやってくれるけど、その「良しなに」部分もちゃんとオープンになっているのすばらしい

<ul>
<li><i class="blogicon-comment" aria-hidden="true"></i> ですねー。ずっと謎だった Slug の正体が分かってよかったです</li>
</ul>
</li>
<li>プロダクション環境での Heroku 運用、勉強になりました

<ul>
<li><i class="blogicon-comment" aria-hidden="true"></i> まだまだ小さなサービスですからね。これから大きくなると、問題がたくさん出てきそうです</li>
</ul>
</li>
<li>なんか push したら動かしてくれる Heroku が裏で何やってるか知れてよかったです！ 最近便利な機能知って Heroku いいなーってなってます！

<ul>
<li><i class="blogicon-comment" aria-hidden="true"></i> ありがとうございます。他にも <a href="https://www.heroku.com/continuous-integration">Heroku CI</a> や <a href="https://devcenter.heroku.com/articles/pipelines#promoting">Promoting</a> など、まだ試せていない機能がありますねー</li>
</ul>
</li>
<li>資料が分かりやすいです

<ul>
<li><i class="blogicon-comment" aria-hidden="true"></i> 安心安全な資料作りを心がけて参ります</li>
</ul>
</li>
<li>資料の文字数がちょうど良くてとても見やすいと思いました

<ul>
<li><i class="blogicon-comment" aria-hidden="true"></i> 本当はもっと減らしたいのですが、あとから読める資料としても作ったので、今回の長さになりました</li>
</ul>
</li>
<li>ボトルネックがないようなら Heroku 便利そう

<ul>
<li><i class="blogicon-comment" aria-hidden="true"></i> とは言え、パフォーマンスを突き詰めると厳しいと感じています。現在は割とバックグラウンド＆バッチ処理にフォーカスしています</li>
</ul>
</li>
<li>さすが弊社で Heroku に一番詳しい男！！

<ul>
<li><i class="blogicon-comment" aria-hidden="true"></i> 引き続きニッチな領域を攻めていきます</li>
</ul>
</li>
<li>マスタカさんは説明が上手だなと思いました（こなみ）

<ul>
<li><i class="blogicon-comment" aria-hidden="true"></i> ありがとうございます！</li>
</ul>
</li>
<li>Heroku..... なんだかんだ、難しいイメージがあります...

<ul>
<li><i class="blogicon-comment" aria-hidden="true"></i> 私も最初はそうでしたねー</li>
</ul>
</li>
<li>身近に仕事で Heroku 使ってる人だー

<ul>
<li><i class="blogicon-comment" aria-hidden="true"></i> いえす！</li>
</ul>
</li>
<li>初心者でも使えるけど奥が深い Heroku

<ul>
<li><i class="blogicon-comment" aria-hidden="true"></i> ですねー</li>
</ul>
</li>
</ul>


<h2>発表の感想の感想</h2>

<p>Heroku はバックエンドエンジニアには概ね好評ですが、フロントエンドエンジニアには割と不評な印象を受けました。</p>

<p>HTTP/3 という話が出てきた今、未だに HTTP/1.1 なのはだいぶ遅れてますし、パフォーマンスを突き詰めると、どうしてもレイテンシー問題に直面してしまいます。逆に言えば、この辺どうにかなれば最強だと思うのですが。🌀</p>

<p>Heroku の先を見据えてやっていきます。💪</p>
]]></description>
            <enclosure url="https://cdn-ak.f.st-hatena.com/images/fotolife/m/masutaka26/20181113/20181113190345.png" length="0" type="image/png"/>
        </item>
        <item>
            <title><![CDATA[CircleCI Orbs 入門]]></title>
            <link>https://blog.tsub.me/post/introducing-to-circleci-orbs/</link>
            <guid>https://blog.tsub.me/post/introducing-to-circleci-orbs/</guid>
            <pubDate>Sat, 10 Nov 2018 08:47:00 GMT</pubDate>
            <description><![CDATA[<p>とうとう待望の CircleCI Orbs がリリースされたので一通り触ってみました。</p>

<p><a href="https://circleci.com/blog/announcing-orbs-technology-partner-program/">Announcing CircleCI Orbs and our new Technology Partner Program</a></p>

<p>今回作ったサンプルは以下のリポジトリにありますので手っ取り早く知りたい人は以下のコードを見ると良いかと思います。</p>

<p><i class="fa fa-github"></i> <a href="https://github.com/tsub/circleci-orbs-sandbox">tsub/circleci-orbs-sandbox</a></p>

<p></p>]]></description>
        </item>
        <item>
            <title><![CDATA[Albert で GitHub リポジトリを開ける拡張を作った]]></title>
            <link>https://blog.tsub.me/post/create-albert-github/</link>
            <guid>https://blog.tsub.me/post/create-albert-github/</guid>
            <pubDate>Sun, 28 Oct 2018 09:35:00 GMT</pubDate>
            <description><![CDATA[<p>先日プライベートの開発マシンを Linux にしたのですが、macOS の時に一番重宝していたものがなにかというと、実は <a href="https://www.alfredapp.com/">Alfred</a> だったことに気づきました。</p>

<p>Alfred がないとストレスフルです。</p>

<p>ただ Linux には Alternative Alfred がいくつかあり、その中でも Albert が比較的良さそうだったので Albert を使っていますが、Alfred で言う Workflow にあたるものが全然充実していませんでした。</p>

<p>特に Alfred から GitHub を開く操作が一番多い気がするので、まずはそれを Albert でもできるようにするために、今回拡張を作りました。</p>

<p><i class="fa fa-github"></i> <a href="https://github.com/tsub/albert-github">tsub/albert-github: Open GitHub repository in browser with Albert</a></p>

<p><img src="https://gyazo.com/fff7125ea22e33c863f6fd535d7f2b8b.png" alt="image" /></p>

<p></p>]]></description>
        </item>
        <item>
            <title><![CDATA[Heroku CLI 用の zsh 設定は不要だった件]]></title>
            <link>https://masutaka.net/2018-10-28-1/</link>
            <guid>https://masutaka.net/2018-10-28-1/</guid>
            <pubDate>Sun, 28 Oct 2018 00:00:00 GMT</pubDate>
            <description><![CDATA[タイトルは少し端折っていて、正確には ~/.zshrc に以下の設定が必要です。
# $FPATH 以下にある補完コレクションを使う。 autoload -Uz compinit; compinit -u これは Heroku CLI 固有の設定ではありません。ls や git などにも適用
される補完を有効にする設定です。
macOS High Sierra 付属の zsh の $FPATH デフォルト値です。
$ echo $FPATH | tr &#39;:&#39; &#39;\n&#39; /usr/local/share/zsh/site-functions /usr/share/zsh/site-functions /usr/share/zsh/5.3/functions このように補完が効きます。App の補完はうれしい。
ここに至った経緯 1/2 Heroku CLI は $ brew install heroku でインストールしており、
/usr/local/share/zsh/site-functions/_heroku があります。
そのため、初めはこんな設定をしていました。
FPATH=/usr/local/share/zsh/site-functions:$FPATH でも前述したように /usr/local/share/zsh/site-functions は $FPATH
のデフォルト値に含まれているので不要でした。削除。
ここに至った経緯 2/2 別件で $ brew install heroku は obsolete で、
現在は $ brew install heroku/brew/heroku だと知りました。]]></description>
        </item>
        <item>
            <title><![CDATA[弊社の新人エンジニア研修カリキュラムを惜しみなく公開してみる]]></title>
            <link>https://developer.feedforce.jp/entry/2018/10/18/140000</link>
            <guid>https://developer.feedforce.jp/entry/2018/10/18/140000</guid>
            <pubDate>Thu, 18 Oct 2018 05:00:00 GMT</pubDate>
            <description><![CDATA[<p>こんにちは！今年の4月にポテンシャル枠で入社した <a href="http://blog.hatena.ne.jp/daido1976/" class="hatena-id-icon"><img src="https://cdn.profile-image.st-hatena.com/users/daido1976/profile.png" width="16" height="16" alt="" class="hatena-id-icon">id:daido1976</a> です！引き続き Rails に弄ばれる日々を過ごしています。</p>

<p>さて、今回は約4ヶ月間の新人エンジニア研修を受け終えた私が弊社の研修カリキュラムを公開し、まとめや実際に受けてみての感想を書いていきたいと思います。</p>

<h2>前提として</h2>

<p>フィードフォースでは今年4月〜5月のほぼ同時期に <a href="https://e-navigator.feedforce.jp/">e-Navigator</a> というプログラムを通じて、私を含む3名の実務未経験エンジニアが入社しています。</p>

<p>今回の研修は、e-Navigator でもレビュアーだった <a href="https://twitter.com/sukechannnn">@sukechannnn</a> がメンターとして上記3名の新人エンジニアをフォローする体制で進めました！</p>

<h2>研修の成果を3行で</h2>

<ul>
<li><strong>入社時に「プログラミング歴3ヶ月の超初心者エンジニア」だった私が</strong></li>
<li><strong>フィードフォースで約4ヶ月間の新人エンジニア研修を受けて</strong></li>
<li><strong>配属後にある程度自走してコードが書けるぐらいのスキルを身につけることが出来ました！</strong></li>
</ul>


<h2>ざっくりスケジュール</h2>

<h3>4月</h3>

<ul>
<li><a href="https://www.amazon.co.jp/exec/obidos/ASIN/4774193976/hatena-blog-22/">プロを目指す人のためのRuby入門 言語仕様からテスト駆動開発・デバッグ技法まで</a> の例題を解く &amp; 読む</li>
<li><a href="https://www.amazon.co.jp/exec/obidos/ASIN/4863542178/hatena-blog-22/">わかばちゃんと学ぶ Git使い方入門</a> を読む</li>
<li>Vim 研修（vimtutor を2周する）</li>
</ul>


<h3>5月〜6月</h3>

<ul>
<li><a href="https://www.amazon.co.jp/exec/obidos/ASIN/4774165166/hatena-blog-22/">パーフェクトRuby on Rails</a> の1章〜5章を読む &amp; 6章〜7章のアプリ作成</li>
<li><a href="https://www.amazon.co.jp/exec/obidos/ASIN/4873117437/hatena-blog-22/">メタプログラミングRuby 第2版</a> を読む</li>
<li><a href="https://www.amazon.co.jp/exec/obidos/ASIN/4774142042/hatena-blog-22/">Webを支える技術</a> を読む</li>
<li>社内スクラム研修</li>
</ul>


<h3>7月</h3>

<ul>
<li>ローテーション配属研修（2チーム）</li>
<li>シンプルな Todo アプリの API 開発</li>
<li>社内フロントエンド研修</li>
<li>社内インフラ研修</li>
</ul>


<h2>各研修についてのまとめや感想</h2>

<h3>『プロを目指す人のためのRuby入門 言語仕様からテスト駆動開発・デバッグ技法まで』の例題を解く &amp; 読む</h3>

<p><strong>所要期間: 約1ヶ月</strong></p>

<ul>
<li>表紙の <strong>「Rails をやる前に、 Ruby を知ろう」</strong> の通り、Rails での開発を意識しながらピュアな Ruby の基礎を学び直せる良書。</li>
<li>クラスやモジュールはふんわり知ってる程度でしたが、この本を読んで初めて自分で定義しました。</li>
<li>各章の例題を GitHub の PR ベースでレビューしてもらったり、本書内の Minitest を RSpec に変えてテスト書いたり、 RuboCop 導入したり、とメンターである <a href="https://twitter.com/sukechannnn">@sukechannnn</a> のファインプレーが光りました。</li>
</ul>


<p><div class="hatena-asin-detail"><a href="http://www.amazon.co.jp/exec/obidos/ASIN/4774193976/hatena-blog-22/"><img src="https://images-fe.ssl-images-amazon.com/images/I/51nY-YLt2ZL._SL160_.jpg" class="hatena-asin-detail-image" alt="プロを目指す人のためのRuby入門 言語仕様からテスト駆動開発・デバッグ技法まで (Software Design plusシリーズ)" title="プロを目指す人のためのRuby入門 言語仕様からテスト駆動開発・デバッグ技法まで (Software Design plusシリーズ)"></a><div class="hatena-asin-detail-info"><p class="hatena-asin-detail-title"><a href="http://www.amazon.co.jp/exec/obidos/ASIN/4774193976/hatena-blog-22/">プロを目指す人のためのRuby入門 言語仕様からテスト駆動開発・デバッグ技法まで (Software Design plusシリーズ)</a></p><ul><li><span class="hatena-asin-detail-label">作者:</span> 伊藤淳一</li><li><span class="hatena-asin-detail-label">出版社/メーカー:</span> 技術評論社</li><li><span class="hatena-asin-detail-label">発売日:</span> 2017/11/25</li><li><span class="hatena-asin-detail-label">メディア:</span> 大型本</li><li><a href="http://d.hatena.ne.jp/asin/4774193976/hatena-blog-22" target="_blank">この商品を含むブログを見る</a></li></ul></div><div class="hatena-asin-detail-foot"></div></div></p>

<h3>『わかばちゃんと学ぶ Git使い方入門』 を読む</h3>

<p><strong>所要期間: 約3日</strong></p>

<ul>
<li>入門書の名の通り、Git の概要を掴むにはよかったです。</li>
<li>ただ、研修としてはもう少し SourceTree に特化していない内容も知れるといいなと思いました。</li>
</ul>


<p><div class="hatena-asin-detail"><a href="http://www.amazon.co.jp/exec/obidos/ASIN/4863542178/hatena-blog-22/"><img src="https://images-fe.ssl-images-amazon.com/images/I/51Mj8x5RpZL._SL160_.jpg" class="hatena-asin-detail-image" alt="わかばちゃんと学ぶ Git使い方入門〈GitHub、Bitbucket、SourceTree〉" title="わかばちゃんと学ぶ Git使い方入門〈GitHub、Bitbucket、SourceTree〉"></a><div class="hatena-asin-detail-info"><p class="hatena-asin-detail-title"><a href="http://www.amazon.co.jp/exec/obidos/ASIN/4863542178/hatena-blog-22/">わかばちゃんと学ぶ Git使い方入門〈GitHub、Bitbucket、SourceTree〉</a></p><ul><li><span class="hatena-asin-detail-label">作者:</span> 湊川あい,DQNEO</li><li><span class="hatena-asin-detail-label">出版社/メーカー:</span> シーアンドアール研究所</li><li><span class="hatena-asin-detail-label">発売日:</span> 2017/04/21</li><li><span class="hatena-asin-detail-label">メディア:</span> 単行本（ソフトカバー）</li><li><a href="http://d.hatena.ne.jp/asin/4863542178/hatena-blog-22" target="_blank">この商品を含むブログ (3件) を見る</a></li></ul></div><div class="hatena-asin-detail-foot"></div></div></p>

<h3>Vim 研修（vimtutor を2周する）</h3>

<p><strong>所要期間: 約2日</strong></p>

<ul>
<li>vimtutor がナイス教材過ぎました…（しかも無料 &amp; インストール不要）</li>
<li>Vim への恐怖心がなくなったのはだいぶ大きかったです。（vimtutor やるまでは Vim 怖かった…）</li>
</ul>


<h3>『パーフェクトRuby on Rails』の1章〜5章を読む &amp; 6章〜7章のアプリ作成</h3>

<p><strong>所要期間: 約1.5ヶ月</strong></p>

<ul>
<li>所要期間的に今回の新人エンジニア研修のメインだったように思います、 <code>rails new</code> のところからがっつりレビューしてもらい、ログイン、CRUD、多対多の関連、E2E のテストまで、一通りの Rails アプリケーション開発を学べました。</li>
<li>プロダクトのコードはほぼ写経だったこともあり、RSpec でいい感じのテストを書くことに一番頭を使いました。このタイミングで当たり前にテストを書く習慣が身についたのはとても良かったです。</li>
</ul>


<p><div class="hatena-asin-detail"><a href="http://www.amazon.co.jp/exec/obidos/ASIN/4774165166/hatena-blog-22/"><img src="https://images-fe.ssl-images-amazon.com/images/I/51gltg0grAL._SL160_.jpg" class="hatena-asin-detail-image" alt="パーフェクト Ruby on Rails" title="パーフェクト Ruby on Rails"></a><div class="hatena-asin-detail-info"><p class="hatena-asin-detail-title"><a href="http://www.amazon.co.jp/exec/obidos/ASIN/4774165166/hatena-blog-22/">パーフェクト Ruby on Rails</a></p><ul><li><span class="hatena-asin-detail-label">作者:</span> すがわらまさのり,前島真一,近藤宇智朗,橋立友宏</li><li><span class="hatena-asin-detail-label">出版社/メーカー:</span> 技術評論社</li><li><span class="hatena-asin-detail-label">発売日:</span> 2014/06/06</li><li><span class="hatena-asin-detail-label">メディア:</span> 大型本</li><li><a href="http://d.hatena.ne.jp/asin/4774165166/hatena-blog-22" target="_blank">この商品を含むブログ (8件) を見る</a></li></ul></div><div class="hatena-asin-detail-foot"></div></div></p>

<h3>『メタプログラミングRuby 第2版』 を読む</h3>

<p><strong>所要期間: 約2週間</strong></p>

<ul>
<li>メタプログラミングについて学ぶというよりも、基礎を学び終えた初学者がより深く Ruby 内部の構造について学ぶ書という意味合いが強かったような気がします。</li>
<li>オブジェクトモデル、メソッド、ブロック、スコープ、クラス &amp; モジュール定義について学び、この頃から <code>irb</code> や <code>pry</code> 上で出てくる Ruby 組み込みのエラーメッセージが怖くなくなりました。</li>
<li>あと読書感想会は本当にやってよかったです。

<ul>
<li><a href="https://developer.feedforce.jp/entry/2018/07/19/000000">新人エンジニア達がメタプログラミング Ruby の読書感想会をやった話</a></li>
</ul>
</li>
</ul>


<p><div class="hatena-asin-detail"><a href="http://www.amazon.co.jp/exec/obidos/ASIN/4873117437/hatena-blog-22/"><img src="https://images-fe.ssl-images-amazon.com/images/I/5102wwx0VzL._SL160_.jpg" class="hatena-asin-detail-image" alt="メタプログラミングRuby 第2版" title="メタプログラミングRuby 第2版"></a><div class="hatena-asin-detail-info"><p class="hatena-asin-detail-title"><a href="http://www.amazon.co.jp/exec/obidos/ASIN/4873117437/hatena-blog-22/">メタプログラミングRuby 第2版</a></p><ul><li><span class="hatena-asin-detail-label">作者:</span> Paolo Perrotta,角征典</li><li><span class="hatena-asin-detail-label">出版社/メーカー:</span> オライリージャパン</li><li><span class="hatena-asin-detail-label">発売日:</span> 2015/10/10</li><li><span class="hatena-asin-detail-label">メディア:</span> 大型本</li><li><a href="http://d.hatena.ne.jp/asin/4873117437/hatena-blog-22" target="_blank">この商品を含むブログ (3件) を見る</a></li></ul></div><div class="hatena-asin-detail-foot"></div></div></p>

<h3>『Webを支える技術』 を読む</h3>

<p><strong>所要期間: 約1週間</strong></p>

<ul>
<li>実は入社前に一度読んだことがあったのですが、『パーフェクトRuby on Rails』のアプリ作成と並行して進めることで、より理解が深まりました。</li>
<li>2部の URI と 3部の HTTP がものすごく勉強になりました。特に HTTP のところは RSpec や cURL で値をいじって、返ってくる値も覗きながら読むと、ものすごく捗りました。</li>
</ul>


<p><div class="hatena-asin-detail"><a href="http://www.amazon.co.jp/exec/obidos/ASIN/4774142042/hatena-blog-22/"><img src="https://images-fe.ssl-images-amazon.com/images/I/51qo6pgjaSL._SL160_.jpg" class="hatena-asin-detail-image" alt="Webを支える技術 -HTTP、URI、HTML、そしてREST (WEB+DB PRESS plus)" title="Webを支える技術 -HTTP、URI、HTML、そしてREST (WEB+DB PRESS plus)"></a><div class="hatena-asin-detail-info"><p class="hatena-asin-detail-title"><a href="http://www.amazon.co.jp/exec/obidos/ASIN/4774142042/hatena-blog-22/">Webを支える技術 -HTTP、URI、HTML、そしてREST (WEB+DB PRESS plus)</a></p><ul><li><span class="hatena-asin-detail-label">作者:</span> 山本陽平</li><li><span class="hatena-asin-detail-label">出版社/メーカー:</span> 技術評論社</li><li><span class="hatena-asin-detail-label">発売日:</span> 2010/04/08</li><li><span class="hatena-asin-detail-label">メディア:</span> 単行本（ソフトカバー）</li><li><span class="hatena-asin-detail-label">購入</span>: 143人 <span class="hatena-asin-detail-label">クリック</span>: 4,320回</li><li><a href="http://d.hatena.ne.jp/asin/4774142042/hatena-blog-22" target="_blank">この商品を含むブログ (183件) を見る</a></li></ul></div><div class="hatena-asin-detail-foot"></div></div></p>

<h3>社内スクラム研修</h3>

<p><strong>所要期間: 約0.5日</strong></p>

<ul>
<li>社内随一のアジャイルお兄さん <a href="http://blog.hatena.ne.jp/pokotyamu/" class="hatena-id-icon"><img src="https://cdn.profile-image.st-hatena.com/users/pokotyamu/profile.png" width="16" height="16" alt="" class="hatena-id-icon">id:pokotyamu</a> によるスクラム研修。</li>
<li>座学パート1時間弱、レゴスクラムによる実践パート2時間強の研修で、スクラムの「守」の部分をがっつり学ぶことができました！</li>
<li>一緒に研修を受けた人事インターンの方が感想記事を書いてくれています。</li>
</ul>


<p><iframe src="https://hatenablog-parts.com/embed?url=https%3A%2F%2Fmedia.feedforce.jp%2Fn%2Fn51c711939059" title="人事インターンがスクラム研修に参加してみた 〜非エンジニアも使える早く細かく改善する仕組み〜｜Feedforceのnote" class="embed-card embed-webcard" scrolling="no" frameborder="0" style="display: block; width: 100%; height: 155px; max-width: 500px; margin: 10px 0px;"></iframe><cite class="hatena-citation"><a href="https://media.feedforce.jp/n/n51c711939059">media.feedforce.jp</a></cite></p>

<h3>ローテーション配属研修（2チーム）</h3>

<p><strong>所要期間: 各1週間ずつ</strong></p>

<ul>
<li>各チームに1週間ずつ、お試し配属のような形で実際のプロダクトのコードを触りながら、軽めの改修や新機能の一部を実装しました！</li>
<li>当時の雰囲気は以下の記事をご参照ください。</li>
</ul>


<p><iframe src="https://hatenablog-parts.com/embed?url=https%3A%2F%2Fdeveloper.feedforce.jp%2Fentry%2F2018%2F07%2F06%2F185249" title="ペアプロならぬシェアプロが良かった話 - Feedforce Developer Blog" class="embed-card embed-blogcard" scrolling="no" frameborder="0" style="display: block; width: 100%; height: 190px; max-width: 500px; margin: 10px 0px;"></iframe><cite class="hatena-citation"><a href="https://developer.feedforce.jp/entry/2018/07/06/185249">developer.feedforce.jp</a></cite></p>

<h3>シンプルな Todo アプリの API 開発</h3>

<p><strong>所要期間: 約1週間</strong></p>

<ul>
<li><a href="https://twitter.com/sukechannnn">@sukechannnn</a> が鬼のようなスピードで Swagger で書いてくれた仕様書をもとにゼロから Rails の API サーバを作りました。</li>
<li>後述するフロントエンド研修、インフラ研修と併せて、API の実装〜React で SPA 作成〜AWS でデプロイまで一貫して経験することで、イマドキの Web アプリケーション開発の全体像を掴むことが出来ました。</li>
<li>超シンプルなアプリケーションでしたが、『パーフェクトRuby on Rails』がほぼ写経だったこともあり、自分の頭を使って開発を進められて楽しかったです。</li>
</ul>


<h3>社内フロントエンド研修</h3>

<p><strong>所要期間: 約0.5日</strong></p>

<ul>
<li><a href="http://blog.hatena.ne.jp/hano_tea/" class="hatena-id-icon"><img src="https://cdn.profile-image.st-hatena.com/users/hano_tea/profile.png" width="16" height="16" alt="" class="hatena-id-icon">id:hano_tea</a> に基礎編、<a href="http://blog.hatena.ne.jp/otofu-square/" class="hatena-id-icon"><img src="https://cdn.profile-image.st-hatena.com/users/otofu-square/profile.png" width="16" height="16" alt="" class="hatena-id-icon">id:otofu-square</a> に実践編を担当していただきました！</li>
<li>基礎編では SPA 作成に必要最低限の ES6、JSX の書き方を教えていただき、実践編では自作した Todo アプリ API を使った SPA を React で実装しました。</li>
<li>React を触るのは初めてで JS もほとんど書いたことがなかったので、途中ちょっと取り残されそうになりましたが、なんとか食らいついて完成まで持っていくことができました！</li>
</ul>


<h3>社内インフラ研修</h3>

<p><strong>所要期間: 約0.5日</strong></p>

<ul>
<li>『Amazon Web Services 基礎からのネットワーク&amp;サーバー構築』 を教本に自分で開発した Todo アプリ API を手動デプロイしてみようという研修です。</li>
<li>事前の知識として EC2 と S3 ぐらいは聞いたことあったものの、VPC？Internet Gateway？Route Table？みたいな状態でした…が、諸先輩方に一つ一つ丁寧に教えていただきデプロイまで持っていくことができました。</li>
<li>翌日 React で実装した SPA も Heroku にデプロイし、Web の世界に自作アプリが羽ばたいた時にはとても感動しました…！</li>
</ul>


<p><div class="hatena-asin-detail"><a href="http://www.amazon.co.jp/exec/obidos/ASIN/4822237443/hatena-blog-22/"><img src="https://images-fe.ssl-images-amazon.com/images/I/51KpOuWyhYL._SL160_.jpg" class="hatena-asin-detail-image" alt="Amazon Web Services 基礎からのネットワーク&サーバー構築 改訂版" title="Amazon Web Services 基礎からのネットワーク&サーバー構築 改訂版"></a><div class="hatena-asin-detail-info"><p class="hatena-asin-detail-title"><a href="http://www.amazon.co.jp/exec/obidos/ASIN/4822237443/hatena-blog-22/">Amazon Web Services 基礎からのネットワーク&サーバー構築 改訂版</a></p><ul><li><span class="hatena-asin-detail-label">作者:</span> 玉川憲,片山暁雄,今井雄太,大澤文孝</li><li><span class="hatena-asin-detail-label">出版社/メーカー:</span> 日経BP</li><li><span class="hatena-asin-detail-label">発売日:</span> 2017/04/13</li><li><span class="hatena-asin-detail-label">メディア:</span> 単行本</li><li><a href="http://d.hatena.ne.jp/asin/4822237443/hatena-blog-22" target="_blank">この商品を含むブログを見る</a></li></ul></div><div class="hatena-asin-detail-foot"></div></div></p>

<h2>そして研修は続く…</h2>

<p>上記の研修に加えて、チーム配属後の研修図書として以下の本をプレゼントしていただきました！</p>

<p><div class="hatena-asin-detail"><a href="http://www.amazon.co.jp/exec/obidos/ASIN/4873115655/hatena-blog-22/"><img src="https://images-fe.ssl-images-amazon.com/images/I/51MgH8Jmr3L._SL160_.jpg" class="hatena-asin-detail-image" alt="リーダブルコード ―より良いコードを書くためのシンプルで実践的なテクニック (Theory in practice)" title="リーダブルコード ―より良いコードを書くためのシンプルで実践的なテクニック (Theory in practice)"></a><div class="hatena-asin-detail-info"><p class="hatena-asin-detail-title"><a href="http://www.amazon.co.jp/exec/obidos/ASIN/4873115655/hatena-blog-22/">リーダブルコード ―より良いコードを書くためのシンプルで実践的なテクニック (Theory in practice)</a></p><ul><li><span class="hatena-asin-detail-label">作者:</span> Dustin Boswell,Trevor Foucher,須藤功平,角征典</li><li><span class="hatena-asin-detail-label">出版社/メーカー:</span> オライリージャパン</li><li><span class="hatena-asin-detail-label">発売日:</span> 2012/06/23</li><li><span class="hatena-asin-detail-label">メディア:</span> 単行本（ソフトカバー）</li><li><span class="hatena-asin-detail-label">購入</span>: 68人 <span class="hatena-asin-detail-label">クリック</span>: 1,802回</li><li><a href="http://d.hatena.ne.jp/asin/4873115655/hatena-blog-22" target="_blank">この商品を含むブログ (140件) を見る</a></li></ul></div><div class="hatena-asin-detail-foot"></div></div></p>

<p><div class="hatena-asin-detail"><a href="http://www.amazon.co.jp/exec/obidos/ASIN/477418361X/hatena-blog-22/"><img src="https://images-fe.ssl-images-amazon.com/images/I/51-TCt0H4UL._SL160_.jpg" class="hatena-asin-detail-image" alt="オブジェクト指向設計実践ガイド ~Rubyでわかる 進化しつづける柔軟なアプリケーションの育て方" title="オブジェクト指向設計実践ガイド ~Rubyでわかる 進化しつづける柔軟なアプリケーションの育て方"></a><div class="hatena-asin-detail-info"><p class="hatena-asin-detail-title"><a href="http://www.amazon.co.jp/exec/obidos/ASIN/477418361X/hatena-blog-22/">オブジェクト指向設計実践ガイド ~Rubyでわかる 進化しつづける柔軟なアプリケーションの育て方</a></p><ul><li><span class="hatena-asin-detail-label">作者:</span> Sandi Metz,?山泰基</li><li><span class="hatena-asin-detail-label">出版社/メーカー:</span> 技術評論社</li><li><span class="hatena-asin-detail-label">発売日:</span> 2016/09/02</li><li><span class="hatena-asin-detail-label">メディア:</span> 大型本</li><li><a href="http://d.hatena.ne.jp/asin/477418361X/hatena-blog-22" target="_blank">この商品を含むブログ (6件) を見る</a></li></ul></div><div class="hatena-asin-detail-foot"></div></div></p>

<p><div class="hatena-asin-detail"><a href="http://www.amazon.co.jp/exec/obidos/ASIN/4798144452/hatena-blog-22/"><img src="https://images-fe.ssl-images-amazon.com/images/I/51sf73NhVTL._SL160_.jpg" class="hatena-asin-detail-image" alt="SQL 第2版 ゼロからはじめるデータベース操作 (プログラミング学習シリーズ)" title="SQL 第2版 ゼロからはじめるデータベース操作 (プログラミング学習シリーズ)"></a><div class="hatena-asin-detail-info"><p class="hatena-asin-detail-title"><a href="http://www.amazon.co.jp/exec/obidos/ASIN/4798144452/hatena-blog-22/">SQL 第2版 ゼロからはじめるデータベース操作 (プログラミング学習シリーズ)</a></p><ul><li><span class="hatena-asin-detail-label">作者:</span> ミック</li><li><span class="hatena-asin-detail-label">出版社/メーカー:</span> 翔泳社</li><li><span class="hatena-asin-detail-label">発売日:</span> 2016/06/17</li><li><span class="hatena-asin-detail-label">メディア:</span> 単行本（ソフトカバー）</li><li><a href="http://d.hatena.ne.jp/asin/4798144452/hatena-blog-22" target="_blank">この商品を含むブログを見る</a></li></ul></div><div class="hatena-asin-detail-foot"></div></div></p>

<p><div class="hatena-asin-detail"><a href="http://www.amazon.co.jp/exec/obidos/ASIN/4797386479/hatena-blog-22/"><img src="https://images-fe.ssl-images-amazon.com/images/I/51P7Lxl0cKL._SL160_.jpg" class="hatena-asin-detail-image" alt="ふつうのLinuxプログラミング 第2版 Linuxの仕組みから学べるgccプログラミングの王道" title="ふつうのLinuxプログラミング 第2版 Linuxの仕組みから学べるgccプログラミングの王道"></a><div class="hatena-asin-detail-info"><p class="hatena-asin-detail-title"><a href="http://www.amazon.co.jp/exec/obidos/ASIN/4797386479/hatena-blog-22/">ふつうのLinuxプログラミング 第2版 Linuxの仕組みから学べるgccプログラミングの王道</a></p><ul><li><span class="hatena-asin-detail-label">作者:</span> 青木峰郎</li><li><span class="hatena-asin-detail-label">出版社/メーカー:</span> SBクリエイティブ</li><li><span class="hatena-asin-detail-label">発売日:</span> 2017/09/22</li><li><span class="hatena-asin-detail-label">メディア:</span> 単行本</li><li><a href="http://d.hatena.ne.jp/asin/4797386479/hatena-blog-22" target="_blank">この商品を含むブログを見る</a></li></ul></div><div class="hatena-asin-detail-foot"></div></div></p>

<p><div class="hatena-asin-detail"><a href="http://www.amazon.co.jp/exec/obidos/ASIN/4797393165/hatena-blog-22/"><img src="https://images-fe.ssl-images-amazon.com/images/I/513hw-04L8L._SL160_.jpg" class="hatena-asin-detail-image" alt="体系的に学ぶ 安全なWebアプリケーションの作り方 第2版 脆弱性が生まれる原理と対策の実践" title="体系的に学ぶ 安全なWebアプリケーションの作り方 第2版 脆弱性が生まれる原理と対策の実践"></a><div class="hatena-asin-detail-info"><p class="hatena-asin-detail-title"><a href="http://www.amazon.co.jp/exec/obidos/ASIN/4797393165/hatena-blog-22/">体系的に学ぶ 安全なWebアプリケーションの作り方 第2版 脆弱性が生まれる原理と対策の実践</a></p><ul><li><span class="hatena-asin-detail-label">作者:</span> 徳丸浩</li><li><span class="hatena-asin-detail-label">出版社/メーカー:</span> SBクリエイティブ</li><li><span class="hatena-asin-detail-label">発売日:</span> 2018/06/21</li><li><span class="hatena-asin-detail-label">メディア:</span> 単行本</li><li><a href="http://d.hatena.ne.jp/asin/4797393165/hatena-blog-22" target="_blank">この商品を含むブログを見る</a></li></ul></div><div class="hatena-asin-detail-foot"></div></div></p>

<p>ちなみに私は『リーダブルコード』『オブジェクト指向設計実践ガイド』『SQL ゼロからはじめるデータベース操作』を読み終えて、今は『ふつうのLinuxプログラミング』を読んでいるところです。</p>

<p>『オブジェクト指向設計実践ガイド』についてはとても良い本だったので、また社内で読書会を開催しようと思っています！</p>

<h2>最後に</h2>

<p>今回は弊社の新人エンジニア研修カリキュラムをご紹介しました！</p>

<p>来年以降の新人エンジニア研修には自分自身が積極的に関わっていきたいという考えもあり、カリキュラムをよりブラッシュアップさせていくためにも記事としてまとめ、研修の振り返りを行いました。</p>

<p>この記事をきっかけに、もっとこうした方がいい、うちの会社ではこんなことやっている、みたいな情報が集まるといいなと思っています。</p>

<p>それでは、またお会いしましょう ＾＾</p>
]]></description>
            <enclosure url="https://images-fe.ssl-images-amazon.com/images/I/51nY-YLt2ZL._SL160_.jpg" length="0" type="image/jpg"/>
        </item>
        <item>
            <title><![CDATA[launchd を使って毎日深夜にだけ Time Machine を実行させる]]></title>
            <link>https://masutaka.net/2018-10-17-1/</link>
            <guid>https://masutaka.net/2018-10-17-1/</guid>
            <pubDate>Wed, 17 Oct 2018 00:00:00 GMT</pubDate>
            <description><![CDATA[macOS High Sierra でのお話。
作業中に Tima Machine が動き出すと、macOS が重くなったり固まったり
するので、長年プチイライラしていました。
TimeMachineScheduler というアプリを使ったら、当初は調子が良かった
のですが、最近はうまく実行してくれません。なぜだ&hellip;。
AppleScript + launchd で定期実行出来ないかな？とふと思い立ちました。
調べたら AppleScript を使わずとも /usr/bin/tmutil がありました。
Time Machine CLI です。&rsquo;$ man tmutil&rsquo; で詳しいヘルプを参照できます。
こいつを launchd 使って定期実行したらうまくいきました。ちなみに
macOS では cron は非奨励で、代わりに launchd が奨励されています。
作成した scheduled-timemachine.plist &lt;?xml version=&#34;1.0&#34; encoding=&#34;UTF-8&#34;?&gt; &lt;!DOCTYPE plist PUBLIC &#34;-//Apple//DTD PLIST 1.0//EN&#34; &#34;http://www.apple.com/DTDs/PropertyList-1.0.dtd&#34;&gt; &lt;plist version=&#34;1.0&#34;&gt; &lt;dict&gt; &lt;key&gt;Label&lt;/key&gt; &lt;string&gt;net.masutaka.scheduled-timemachine&lt;/string&gt; &lt;key&gt;ProgramArguments&lt;/key&gt; &lt;array&gt; &lt;string&gt;sh&lt;/string&gt; &lt;string&gt;-c&lt;/string&gt; &lt;string&gt;date; sudo tmutil disable &amp;&amp; pmset -g ps | grep -q &#39;AC Power&#39; &amp;&amp; tmutil startbackup -b; echo&lt;/string&gt; &lt;/array&gt; &lt;key&gt;StandardOutPath&lt;/key&gt; &lt;string&gt;/Users/masutaka/.]]></description>
        </item>
        <item>
            <title><![CDATA[Bash v3 以下でも set -u 時に変数が定義されてるか確認する方法]]></title>
            <link>https://masutaka.net/2018-10-15-1/</link>
            <guid>https://masutaka.net/2018-10-15-1/</guid>
            <pubDate>Mon, 15 Oct 2018 00:00:00 GMT</pubDate>
            <description><![CDATA[以下のように、変数への値がセットされているかで分岐するシェルスクリ
プトがあったとします。このスクリプトは正常に動作します。
#!/bin/sh if [ -n &#34;$CIRCLE_PULL_REQUEST&#34; ]; then echo &#39;$CIRCLE_PULL_REQUEST is defined.&#39; else echo &#39;$CIRCLE_PULL_REQUEST is NOT defined.&#39; fi 堅牢なシェルスクリプトを書く時は &lsquo;#!/bin/sh&rsquo; を &lsquo;#!/bin/sh -u&rsquo; に
することが多いです。typo 等による意図しない変数の利用を防いでくれ
ます。
今回はこれがコンフリクトし、以下のようなエラーになります。
$ ./v.sh ./v.sh: line 3: CIRCLE_PULL_REQUEST: unbound variable 対策方法 set -uしてるときに変数が定義されてるかチェックする - Qiita 残念ながら macOS High Sierra では上記の方法は使えませんでした。
$ ./v.bash ./v.bash: line 3: conditional binary operator expected $ which -a bash /bin/bash $ bash --version GNU bash, version 3.2.57(1)-release (x86_64-apple-darwin17) Copyright (C) 2007 Free Software Foundation, Inc.]]></description>
        </item>
        <item>
            <title><![CDATA[社内勉強会で『Markdown と学ぶ HTML 基礎』を発表しました]]></title>
            <link>https://developer.feedforce.jp/entry/2018/10/12/184014</link>
            <guid>https://developer.feedforce.jp/entry/2018/10/12/184014</guid>
            <pubDate>Fri, 12 Oct 2018 09:40:14 GMT</pubDate>
            <description><![CDATA[<p><a href="https://ff14wiki.info/?%E8%99%9A%E6%A7%8B%E8%A3%85%E5%82%99">虚構</a>集めてますか？
こんにちは、白魔の <a href="http://blog.hatena.ne.jp/tmd45/" class="hatena-id-icon"><img src="https://cdn.profile-image.st-hatena.com/users/tmd45/profile.png" width="16" height="16" alt="" class="hatena-id-icon">id:tmd45</a>です。</p>

<p>社内勉強会の担当で『<a href="https://speakerdeck.com/tmd45/12-fftt-number-331">Markdown と学ぶ HTML 基礎</a>』という発表をしました。</p>

<p>タイトルの通りごくごく基本的な内容ですが、ちょっとした部分で「知らなかった！」みたいなのが結構あったみたいで盛り上がりましたv(￣Д￣)v</p>

<p><iframe id="talk_frame_469478" src="//speakerdeck.com/player/3db5b73226054f189a530dad5746e973" width="710" height="399" style="border:0; padding:0; margin:0; background:transparent;" frameborder="0" allowtransparency="true" allowfullscreen="allowfullscreen" mozallowfullscreen="true" webkitallowfullscreen="true"></iframe><cite class="hatena-citation"><a href="https://speakerdeck.com/tmd45/12-fftt-number-331">speakerdeck.com</a></cite></p>

<p>スライドはほぼ初学者向けに書いていますが、これは 8 月末に開催した <a href="https://e-navigator.connpass.com/event/96656/">e-Navigator 勉強会#4</a> 向けに作成したスライドの焼き増し（第二版）だからだったりします。</p>

<p>一部 HTML の間違いを修正し、Markdown parser や linter の情報を追記しております。</p>

<p>以下、FFTT 恒例の感想付せん返信です。</p>

<h3>感想付せん返信</h3>

<ul>
<li>Markdown にまだ慣れてない感があるので警察こわい</li>
<li>警察👮こわい

<ul>
<li>こわくないよ〜 勉強会で発散したから <del>しばらく</del> こわくないよ〜</li>
<li>ぜひこれを機会に文章構造と HTML を意識してみてください！</li>
</ul>
</li>
<li>HTML 使いこなすためにはまず文章構造をですね…

<ul>
<li><strong>それな</strong></li>
</ul>
</li>
<li>勉強になりました！捕まらないように気をつけます…

<ul>
<li>(ΦωΦ)ﾌﾌﾌ…</li>
</ul>
</li>
<li><code>ul</code> タグと <code>ol</code> タグの意味を理解できました

<ul>
<li>やったね！</li>
</ul>
</li>
<li>はじめてプログラミングに触れた日、<a href="https://dotinstall.com/">ドットインストール</a>で HTML から始めた時を思い出しました！

<ul>
<li>(　；∀；) ｲｲﾊﾅｼﾀﾞﾅｰ</li>
</ul>
</li>
<li>tmd45 さんが楽しそうに話されていて楽しかったです！！

<ul>
<li>照れる〜 🤑</li>
</ul>
</li>
<li><a href="https://html.spec.whatwg.org/">WHATWG HTML Living Standard</a> もよろしくオネシャス！

<ul>
<li>これは知らなかった！へ〜</li>
</ul>
</li>
</ul>


<blockquote><p>HTML5 や HTML 5.1 は W3C が標準化を進めていますが、W3C とは別に、Apple, Chrome, Opera が設立した WHATWG という団体が独自に策定を進めている HTML 仕様です。HTML Living Standard と呼ばれ、バージョン番号や、何年何月何日版という概念もなく、毎日改版、修正、強化が進められています。</p>

<p><a href="http://www.tohoho-web.com/html/memo/htmlls.htm">HTML Living Standard - とほほのWWW入門</a></p></blockquote>

<ul>
<li>奥深き Markdown …

<ul>
<li>GitHub Flavor とか方言や拡張がいろいろあるので、あっちでは上手く書けたのがこっちでは崩れるとか</li>
<li>文章構造をシンプルにすれば、あまり悩まなくて済んだりもします 😇</li>
</ul>
</li>
<li>リストに <code>- [ ]</code> を混ぜるのによく困ってますね

<ul>
<li>これも HTML がどうなって「意図どおりでない」表示なってしまうのか把握できるといいですね 😇</li>
<li>もしかしたら、インデントのスペースの数が合ってないとかも影響してるかも？</li>
</ul>
</li>
<li>基礎的な内容だと思ったけど知らないこともあって良かった！！

<ul>
<li>そう言ってもらえるとありがたいです！😊</li>
</ul>
</li>
<li>総合職向け勉強会で話してもいい内容だと思いました

<ul>
<li>たしかに 🦀</li>
</ul>
</li>
<li>リストの中の複数行コードという積年の悩みが消えました。ありがとうございます！

<ul>
<li>この質問に答えてくれたのは <a href="http://blog.hatena.ne.jp/masutaka26/" class="hatena-id-icon"><img src="https://cdn.profile-image.st-hatena.com/users/masutaka26/profile.png" width="16" height="16" alt="" class="hatena-id-icon">id:masutaka26</a> ですけど</li>
<li>これもやっぱり Markdown の拡張と、文章構造／HTML の話の絡み合いですねー</li>
</ul>
</li>
<li>Markdown のリンク記法はめんどいから Alfred Workflow に頑張ってもらってます

<ul>
<li>私は Chrome 拡張の <a href="https://chrome.google.com/webstore/detail/create-link/gcmghdmnkfdbncmnmlkkglmnnhagajbm">Create Link</a> を使ってます！</li>
</ul>
</li>
<li><a href="http://hatenadiary.g.hatena.ne.jp/keyword/%E3%81%AF%E3%81%A6%E3%81%AA%E8%A8%98%E6%B3%95%E4%B8%80%E8%A6%A7">はてな記法</a>に触れるやさしさ

<ul>
<li>やさしさなんだろうか（笑）</li>
<li>Markdown が台頭してくる前は、世の中の文章構造は全部はてな記法で書ければいいのにと思ってた時期もありました😏</li>
</ul>
</li>
<li>font color を <span style="color: red">red</span> にするにはどうしたらよいですか？

<ul>
<li>( ＾ω＾) おっ？</li>
<li>マジレスすると「文字を赤色にする」のは文章構造ではないので、たとえば「強調」の構造に対して Style（CSS）に <code>color: red</code> を定義するなど、文章構造とスタイルは分けるほうが良いですね 😇</li>
</ul>
</li>
</ul>


<p>気づいたら社内の派閥投票がされていた！</p>

<p><span itemscope itemtype="http://schema.org/Photograph"><img src="https://cdn-ak.f.st-hatena.com/images/fotolife/t/tmd45/20181012/20181012170816.jpg" alt="f:id:tmd45:20181012170816j:plain:w400" title="f:id:tmd45:20181012170816j:plain:w400" class="hatena-fotolife" style="width:400px" itemprop="image"></span></p>

<p>私は「Shift キー押さなくて済むので <code>-</code> リスト派」です。</p>

<p><a href="https://spec.commonmark.org/0.28/#list-items">CommonMark（0.28）の仕様</a>でも、どちらかに制限されているわけではないので、どちらがジャスティスってことも無いみたいですね。</p>

<p>勉強会後の雑談で「 <code>-</code> リストを書いてる途中で、リアルタイムプレビューがせっかちで一瞬 見出し 記法（レベル 2 見出し）として扱われる」ことに気がついて <code>*</code> リストに宗旨変えしてる人がいました！</p>

<p>変換される HTML（というか文章構造）が把握できるとそんな気づきもあったりします！ぜひみなさんも Markdown から HTML、そして文章構造について知ってみてくださいね。</p>
]]></description>
            <enclosure url="https://cdn-ak.f.st-hatena.com/images/fotolife/t/tmd45/20181012/20181012185738.png" length="0" type="image/png"/>
        </item>
        <item>
            <title><![CDATA[terraform-provider-healthchecksio に足りない機能を実装したらコラボレータになれた]]></title>
            <link>https://developer.feedforce.jp/entry/2018/10/09/140000</link>
            <guid>https://developer.feedforce.jp/entry/2018/10/09/140000</guid>
            <pubDate>Tue, 09 Oct 2018 05:00:00 GMT</pubDate>
            <description><![CDATA[<p>こんにちは、増田（<a href="http://blog.hatena.ne.jp/masutaka26/" class="hatena-id-icon"><img src="https://cdn.profile-image.st-hatena.com/users/masutaka26/profile.png" width="16" height="16" alt="" class="hatena-id-icon">id:masutaka26</a>）です。秋は体が急に冷え、一年で一番体調を崩しやすいので、意識して風呂に浸かっています。元気です。</p>

<p><a href="http://blog.hatena.ne.jp/critical_alert/" class="hatena-id-icon"><img src="https://cdn.profile-image.st-hatena.com/users/critical_alert/profile.png" width="16" height="16" alt="" class="hatena-id-icon">id:critical_alert</a> から <a href="https://healthchecks.io/">https://healthchecks.io/</a> を教えてもらいました。</p>

<p><span itemscope itemtype="http://schema.org/Photograph"><img src="https://cdn-ak.f.st-hatena.com/images/fotolife/m/masutaka26/20181007/20181007221520.png" alt="f:id:masutaka26:20181007221520p:plain" title="f:id:masutaka26:20181007221520p:plain" class="hatena-fotolife" itemprop="image"></span></p>

<p>cron 系の定期実行ジョブが本当に実行されたかを監視してくれるサービスです。</p>

<p>以前、<a href="https://github.com/ondrejbartas/sidekiq-cron">sidekiq-cron</a> のバグで定期実行ジョブが実行されないことがあったので、なんらかの方法でお手軽に監視したいモチベーションがありました。</p>

<h2>terraform-provider-healthchecksio を発見</h2>

<p>コード化したいなーと思って調べたら、非公式の Terraform provider を発見。</p>

<p><a class="embedly-card" href="https://github.com/kristofferahl/terraform-provider-healthchecksio">kristofferahl/terraform-provider-healthchecksio</a></p>

<script async src="//cdn.embedly.com/widgets/platform.js" charset="UTF-8"></script>


<p>こういった設定は属人化しやすいため、Terraform でコード化できるのは助かります。</p>

<p>ただ、この時点では schedule や timezone などに対応していなかったため、採用は断念しました。</p>

<p>healthchecks.io 上でポチポチと監視用のエンドポイントを作成し、ビジネスロジックにも ping するコードを埋め込み、いい感じに動作していました。</p>

<h2>実装開始</h2>

<p>悶々とした日を送り続けたある日、調べてみたら意外と簡単に機能が実装できそうなことが分かりました。</p>

<p>👇 それで送ったのがこの PR。可能な限りのパラメータを使えるようになりました。</p>

<ul>
<li><a href="https://github.com/kristofferahl/terraform-provider-healthchecksio/pull/1">Add parameters by masutaka · Pull Request #1</a></li>
</ul>


<p>terraform import もしたいなーと調べたら、たったの 3 行で対応出来ることが判明。👇 2 つ目の PR を出して無事マージされました。</p>

<ul>
<li><a href="https://github.com/kristofferahl/terraform-provider-healthchecksio/pull/2">Introduce terraform import by masutaka · Pull Request #2</a></li>
</ul>


<p>ついでにしれっとコラボレータに招待してくれて、commit 権を頂けました。やったぜ！</p>

<p>👇 先ほど 3 つ目の PR を出しました。非公式の Terraform provider なので、自分でバイナリを設置する必要があるのですよね。参考になりそうな Makefile を作りました。</p>

<ul>
<li><a href="https://github.com/kristofferahl/terraform-provider-healthchecksio/pull/3">Add examples/Makefile by masutaka · Pull Request #3</a></li>
</ul>


<h2>今後の予定</h2>

<blockquote><p>The database failover process is manual, and the ops team consists of a single person, so multi-hour or even multi-day outages are possible!</p>

<p>While we can only guarantee a best effort availability, in practice the availability has exceeded 99.9% since the service publicly launched in July 2015.</p>

<p><a href="https://healthchecks.io/about/">https://healthchecks.io/about/</a></p></blockquote>

<p>healthchecks.io は安定稼働しており、2015 年 7 月のサービス開始以来、稼働率は 99.9% を超えているそうです。ただあくまでベストエフォート型の可用性しか保証していないので、過信は禁物です。いわゆる 1 人開発プロジェクトでもあります。</p>

<p>今後は Datadog で同じ監視が出来るか調査して、healthchecks.io と併用したいなーと思っています。<a href="https://cronitor.io/">Cronitor</a> も頭の片隅にあるけど、少しオーバースペック感があります。</p>

<h2>おまけ</h2>

<p>healthchecks.io は OSS でもあり、GitHub 上にコードが公開されています。Django で実装されています。</p>

<p><a class="embedly-card" href="https://github.com/healthchecks/healthchecks">healthchecks/healthchecks</a></p>
]]></description>
            <enclosure url="https://cdn-ak.f.st-hatena.com/images/fotolife/m/masutaka26/20181007/20181007221520.png" length="0" type="image/png"/>
        </item>
        <item>
            <title><![CDATA[＜ネタバレなし＞オクトパストラベラーを完全にクリアーした]]></title>
            <link>https://masutaka.net/2018-09-24-1/</link>
            <guid>https://masutaka.net/2018-09-24-1/</guid>
            <pubDate>Mon, 24 Sep 2018 00:00:00 GMT</pubDate>
            <description><![CDATA[http://www.jp.square-enix.com/octopathtraveler/ 135 時間で完全にクリアーしました。ネタバレ回避のために「完全に」の
詳細は書きません。
最後はこんな状態でした。
・主人公はプリムロゼ
・レベルは全員 76（最後なぜか頑張ってプリムロゼに合わせた）
・アビリティは全部覚えたキャラもいるし、もう少しのキャラもいる
・全キャラのメインストーリーは全部クリア
・サブストーリーも全部クリア
おっさんホイホイのゲームには以前『レジェンド オブ レガシー』に痛い
目にあったので警戒はしてましたが、プロデューサーがブレイブリーデフォ
ルトの浅野さんということで、期待を込めて購入しました。
結果的に大正解。久々に 100 時間超えて且つ、クリアー出来たゲームと
なりました。Switch で初めてクリアーできたよ。ゼルダもゼノブレイド
２もクリアーしてない（涙）
自分に合った理由を考えると、こんな感じです。
・スキルにある程度制限がある
・ストーリーが複雑でない
・ドット絵による脳内補完
・極端に難しくも易しくもない難易度
バトルシステムがなかなか良くて、それほど多くのスキルや自由度がない
中で、どのように強敵を撃破するか考えるのはなかなか楽しかったです。
私が元組み込みエンジニアというのも関係するのかな？
そういう意味では、ブレイブリーデフォルトは少々持て余してました。
（だいぶ好きなゲームですがね。Switch に移植して欲しい！）
ストーリーが良い意味でチープだったのも良かったです。最近はあまりに
複雑だと覚えられない&hellip;。ドット絵なので、「実際はこうかな？」と脳
内補完するので問題ないです。小説のよう。
難易度もちょうど良かったですね。強い武器防具をリセマラ で盗ったりし
ましたが、それでもだいぶ苦労させられました。サブストーリーで油断し
てたら、あっさり全滅されられたりもしたなあ&hellip;。
攻略サイトを見たのは終盤の終盤。見なくても割といけました。
一方で UI はあまり洗練されていませんでした。
・Y ボタンのヘルプがうざい。よりによって真下のメニューが見えない
・← →で画面スクロールできることがどこにも書かれていない（終盤で知った・・・）
・イベントでボタンポチポチ必要。自動進行なし
・他多数
MVP（Minimum Viable Product）的に作ったのだと、良い方向に解釈して
います。
ブレイブリーデフォルトは 3 が出たとして、ストーリーのつなぎ方が難
しいと思います。でもオクトパストラベラーはシステムだけ揃えてストー
リーは別にすれば良いと思うので、そういう意味では現段階では展開はや
りやすそう。期待しています。
オクトパストラベラーにはだいぶ時間を割いたので、しばらくゲームから
は離れる予定です。次はどんなゲームをやるのだろう？
OCTOPATH は造語で、各キャラの頭文字を取ったものでもあります。地図
上でオフィーリアから時計回りの順。
loading...
   if (localStorage.]]></description>
        </item>
        <item>
            <title><![CDATA[Go 1.11 の Modules (vgo) を CircleCI で使う]]></title>
            <link>https://blog.tsub.me/post/go111-modules-in-circleci/</link>
            <guid>https://blog.tsub.me/post/go111-modules-in-circleci/</guid>
            <pubDate>Thu, 30 Aug 2018 05:33:00 GMT</pubDate>
            <description><![CDATA[<p><a href="https://github.com/tsub/s3-edit">個人プロジェクト</a>にて、先日リリースされた Go 1.11 の Modules (vgo) を使ってみました。</p>

<p>移行自体はスムーズにできたのですが、CircleCI でのキャッシュのやり方がそこそこ重要かも？と思ったので記事を書きました。</p>

<p></p>]]></description>
        </item>
        <item>
            <title><![CDATA[家電操作を IRKit から Nature Remo に変えた #natureremo]]></title>
            <link>https://masutaka.net/2018-08-19-1/</link>
            <guid>https://masutaka.net/2018-08-19-1/</guid>
            <pubDate>Sun, 19 Aug 2018 00:00:00 GMT</pubDate>
            <description><![CDATA[https://rebuild.fm/209/ を聞いたら、なんとなく購買意欲が湧いて買って
しまいました。会社の MVP 賞 で頂いた Amazon ギフト券のそこそこ有意義な
使いみちを探していたという事情もあります。
IRKit は [2015-12-19-1] から便利に使っていて、Nature Remo が出た
ことも知っていましたが、IRKit の 2 倍の値段は高いなーと見送っていました。
結果的に非常に満足しています。せっかくなので少し前に出た Nature
Remo mini ではなく、Nature Remo を買いました。
※ Nature Remo mini は主にセンサーが省かれた廉価版です。
https://nature.global/ の下の方に Nature Remo との比較があります。
￥14,040 の価値があったかはまだ微妙ですが、今後アップデートしてい
くそうなので、期待してます。
それにしても typester さんが Nature, Inc. の CTO になっていたのは
知らなかった。
使い方 エアコン、テレビ、照明に対して、こんな使い方をしています。
Google Home mini 経由での操作例 「ねぇ Google、冷房を 25℃ にして（Google Home mini → Nature Remo）」
「ねぇ Google、明かり付けて（Google Home mini → Nature Remo）」]]></description>
        </item>
        <item>
            <title><![CDATA[フォントまわりのツールの探し方]]></title>
            <link>https://shiromoji.hatenablog.jp/entry/2018/08/12/235803</link>
            <guid>https://shiromoji.hatenablog.jp/entry/2018/08/12/235803</guid>
            <pubDate>Sun, 12 Aug 2018 14:58:03 GMT</pubDate>
            <description><![CDATA[<p><a class="keyword" href="http://d.hatena.ne.jp/keyword/Twitter">Twitter</a> 上でとある鍵アカ氏が「このツール知らなかった！ 使ってみたらべんり！ 楽しい！」的なことをつぶやいていました。フォントの世界にはお役立ちツールがいろいろとあるのですが、日本語での情報が少ないこともあり、とっかかりが難しいかもしれません。そこでこの記事では、「ツールを探すならまずはここから」という定番の情報源を3つ紹介しておきます。</p>

<h3>1. awesome-typography</h3>

<p><iframe src="https://hatenablog-parts.com/embed?url=https%3A%2F%2Fgithub.com%2FJolg42%2Fawesome-typography" title="Jolg42/awesome-typography" class="embed-card embed-webcard" scrolling="no" frameborder="0" style="display: block; width: 100%; height: 155px; max-width: 500px; margin: 10px 0px;"></iframe><cite class="hatena-citation"><a href="https://github.com/Jolg42/awesome-typography">github.com</a></cite></p>

<p>フォント関連のさまざまなツールがリストアップされたリンク集です。ツールだけでなく、<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%AA%A1%BC%A5%D7%A5%F3%A5%BD%A1%BC%A5%B9">オープンソース</a>のフォントや、フォント関連のドキュメントなども一緒に挙げられています。</p>

<p><a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%D7%A5%ED%A5%B0%A5%E9%A5%DF%A5%F3%A5%B0%B8%C0%B8%EC">プログラミング言語</a>別に並んでおり、ごく簡単な説明もついていますので、「この言語でうまいことあれをやってくれるツールないかなー？」というときには真っ先にチェックすべきページです。</p>

<h3>2. 技術カンファレンスの動画</h3>

<p>フォント関係のカンファレンスというと <a href="https://www.atypi.org/conferences">ATypI</a> が有名ですが、<a href="https://www.typotalks.com/labs/">TYPO Labs</a> や <a href="http://typemedia.org/robothon/">Robothon</a> のように、技術的側面に特化したカンファレンスも開催されています。定番ツールから尖ったツールまで、作者の解説や実演デモをじっくり見ることができます。以下のように動画が公開されており、カンファレンスに行かずとも視聴できるのが嬉しいところです。</p>

<ul>
<li><a class="keyword" href="http://d.hatena.ne.jp/keyword/TYPO">TYPO</a> Labs: <a href="https://www.typotalks.com/videos/?talk_event=TYPO%20Labs%202018&amp;talk_langs[en]=en&amp;talk_langs[de]=de">2018</a>, <a href="https://www.typotalks.com/videos/?talk_event=TYPO%20Labs%202017&amp;talk_langs[en]=en&amp;talk_langs[de]=de">2017</a>, <a href="https://www.typotalks.com/videos/?talk_event=TYPO%20Labs%202016&amp;talk_langs[en]=en&amp;talk_langs[de]=de">2016</a></li>
<li>Robothon: 2018 <a href="https://www.facebook.com/RoyalAcademyKABK/videos/1613161622101814/">[1]</a> <a href="https://www.facebook.com/RoyalAcademyKABK/videos/1614287785322531/">[2]</a> <a href="https://www.facebook.com/RoyalAcademyKABK/videos/1614395861978390/">[3]</a>; <a href="https://vimeo.com/robothon">2015/2012/2009</a></li>
</ul>


<h3>3. TypeDrawers</h3>

<p><a href="https://typedrawers.com/">TypeDrawers</a> は、書体制作やレタリング、<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%BF%A5%A4%A5%DD%A5%B0%A5%E9%A5%D5%A5%A3">タイポグラフィ</a>に関する<a class="keyword" href="http://d.hatena.ne.jp/keyword/%B7%C7%BC%A8">掲示</a>板です。プロの書体デザイナーや開発者が多く、活発な議論がなされています。いくつかのカテゴリーに分かれていますが、ツールの話題を探すのであれば、下の2つがメインになるでしょう。</p>

<ul>
<li><a href="https://typedrawers.com/categories/type-design-software">Type Design Software — TypeDrawers</a></li>
<li><a href="https://typedrawers.com/categories/font-technology">Font Technology — TypeDrawers</a></li>
</ul>


<p>いろいろなスレッドが立ちますので、全部追いかけようとすると大変かもしれませんが、最新の動向や界隈の評判などをチェックすることができます。フォント界の Stack Overflow のような存在です。アカウント登録をして、やりとりに参加するのも良いかもしれません。</p>

<h3>その先へ</h3>

<p>以上、3つのソースをさらっと紹介しました。気になるツールや愛用のツールが出てきたら、そのツールの<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%EA%A5%DD%A5%B8%A5%C8%A5%EA">リポジトリ</a>／フォーラムを覗いたり、作者の <a class="keyword" href="http://d.hatena.ne.jp/keyword/Twitter">Twitter</a> をフォローしたりすると、芋づる式に世界が広がっていきます。巨人の肩の上に乗って満喫しましょう。</p>

<p><a class="keyword" href="http://d.hatena.ne.jp/keyword/%C4%C9%B5%AD">追記</a>：OpenType の仕様に興味が出てきたら以下の記事もどうぞ。</p>

<ul>
<li><a href="https://shiromoji.hatenablog.jp/entry/2016/06/21/003529">OpenType の仕様策定の議論をのぞくには - しろもじメモランダム</a></li>
</ul>

]]></description>
            <enclosure url="https://cdn.blog.st-hatena.com/images/theme/og-image-1500.png" length="0" type="image/png"/>
        </item>
        <item>
            <title><![CDATA[Ruby でライブラリがシステムに存在しているかどうかをチェックする]]></title>
            <link>https://masutaka.net/2018-07-31-1/</link>
            <guid>https://masutaka.net/2018-07-31-1/</guid>
            <pubDate>Tue, 31 Jul 2018 00:00:00 GMT</pubDate>
            <description><![CDATA[require &#39;mkmf&#39; have_library(&#39;pq&#39;) checking for main() in -lpq... yes =&gt; true mkmf.rb を読んだところ、C++ のコードを生成してチェックしていた。 Kernel.have_library のコードはこちら。 カレントディレクトリに mkmf.log が作られるが、これを防止するには
以下で良いみたいだ。
MakeMakefile::Logging::logfile(&#39;/dev/null&#39;) ネット上には以下のコードがあったが、mkmf.rb を読んだら上でいけた。
MakeMakefile::Logging::logfile(&#39;/dev/null&#39;) module MakeMakefile module Logging @logfile = &#39;/dev/null&#39; end end 参考情報
instance method Kernel#have_library (Ruby 2.5.0) Module: MakeMakefile (Ruby 2.5.0) ]]></description>
        </item>
        <item>
            <title><![CDATA[Kubernetes.rb に講師役として参加してきました]]></title>
            <link>https://developer.feedforce.jp/entry/2018/07/23/140133</link>
            <guid>https://developer.feedforce.jp/entry/2018/07/23/140133</guid>
            <pubDate>Mon, 23 Jul 2018 05:01:33 GMT</pubDate>
            <description><![CDATA[<p>こんにちは、エンジニアの <a href="http://blog.hatena.ne.jp/tsub511/" class="hatena-id-icon"><img src="https://cdn.profile-image.st-hatena.com/users/tsub511/profile.png" width="16" height="16" alt="" class="hatena-id-icon">id:tsub511</a> です。</p>

<p>先日 Kubernetes.rb という勉強会があり、そちらの講師役として参加してきました。</p>

<p><iframe src="https://hatenablog-parts.com/embed?url=https%3A%2F%2Flocalhost.connpass.com%2Fevent%2F90340%2F" title="Kubernetes.rb (2018/07/21 13:00〜)" class="embed-card embed-webcard" scrolling="no" frameborder="0" style="display: block; width: 100%; height: 155px; max-width: 500px; margin: 10px 0px;"></iframe><cite class="hatena-citation"><a href="https://localhost.connpass.com/event/90340/">localhost.connpass.com</a></cite></p>

<p><code>.rb</code> と言いつつ Ruby の話は一切ありませんでした。タイトルの伏線は回収されず 😁</p>

<h2>参加の経緯</h2>

<p>さて、今回自分としては初の勉強会の主催側 (?) としてお手伝いすることとなったのですが、その経緯について軽くご紹介します。</p>

<p>もともと一からイベントを企画したわけではなく、主催の <a href="https://twitter.com/yoshi_hirano">@yoshi_hirano</a> さんが講師役を募集していたところに応募した形になります。</p>

<p>ただ、応募の経緯としては先日ご退職された元フィードフォースの <a href="https://twitter.com/284km">@284km</a> さんから、「講師役やってくれる人を1名探しているんですが、tsub 氏どうですか？」というお誘いを貰い、やってみたいと思ったので繋いでいただいた感じです。</p>

<p><span itemscope itemtype="http://schema.org/Photograph"><img src="https://cdn-ak.f.st-hatena.com/images/fotolife/t/tsub511/20180723/20180723125903.png" alt="f:id:tsub511:20180723125903p:plain" title="f:id:tsub511:20180723125903p:plain" class="hatena-fotolife" itemprop="image"></span>
<em>ちなみに社内で Kubernetes について勉強していくぞ！！的なチャンネルが最近できました。</em></p>

<h2>実際の準備</h2>

<p>やると決まってからは当日まで 1 ヶ月半ぐらいあったのですが、そこからは Twitter でグループ DM しながら準備を進めていきました。</p>

<p>とはいえ、お互い顔も分からず会ったことのない中で Twitter の DM オンリーで準備を進めていったので少々不安を感じながらも、<a href="https://twitter.com/yoshi_hirano">@yoshi_hirano</a> さんやサポート役の <a href="https://twitter.com/katsuhisa__">@katsuhisa__</a> さんから優しくして頂けたので問題なく進められました。</p>

<p>準備に際しては以下のリポジトリのコミット権を貰い、そこにサンプルを自分が足していきました。</p>

<p><iframe src="https://hatenablog-parts.com/embed?url=https%3A%2F%2Fgithub.com%2Flocalhost9292%2Fkubernetes.rb" title="localhost9292/kubernetes.rb" class="embed-card embed-webcard" scrolling="no" frameborder="0" style="display: block; width: 100%; height: 155px; max-width: 500px; margin: 10px 0px;"></iframe><cite class="hatena-citation"><a href="https://github.com/localhost9292/kubernetes.rb">github.com</a></cite></p>

<p>また、Rails のサンプルアプリについては以下のリポジトリも用意してもらいました。</p>

<p><iframe src="https://hatenablog-parts.com/embed?url=https%3A%2F%2Fgithub.com%2Fyhirano55%2Freact-redux-jwt-authentication-example" title="yhirano55/react-redux-jwt-authentication-example" class="embed-card embed-webcard" scrolling="no" frameborder="0" style="display: block; width: 100%; height: 155px; max-width: 500px; margin: 10px 0px;"></iframe><cite class="hatena-citation"><a href="https://github.com/yhirano55/react-redux-jwt-authentication-example">github.com</a></cite></p>

<p>あとは当日までひたすら YAML を書く... 😇 という感じになります。</p>

<p>最初に作った Rails 用の YAML には結構時間がかかったものの、残りのアプリはほとんどコピペでサクサク進んでいきました。</p>

<p>ただ、Sentry などは自分で動かしたことがなかったので、Kubernetes で動かすというよりはアプリそのもののセットアップ手順や構成などを理解するのに時間がかかったように思います。</p>

<p>また、Discourse と GitLab については Docker イメージの使い方が独特で、<a href="https://github.com/discourse/discourse_docker">Discourse</a> の方は独自のシェルスクリプトを使っていて読み解くのがが大変そうで、<a href="https://hub.docker.com/r/gitlab/gitlab-ce/">GitLab</a> の方はコンテナを動かしたら Chef が動き始めて色々インストールしだしたので諦めました。</p>

<p>代わりに Mastodon を動かすことになりました。動かし始めたらいけそうだったので、勢いで当日の朝も準備をしてました..</p>

<h2>勉強会当日の様子</h2>

<p>会場は<a href="https://everyleaf.com/">株式会社万葉</a>さんのオフィスをお借りしました (自分がその辺りを手配したわけではないです)。</p>

<p>とても快適でした。万葉さんありがとうございました 🤗</p>

<p>特に、Chrome Cast に繋がったプロジェクターが設置してあり、各自何か言いたいことがある時にサクッと画面共有できて良かったかと思います。</p>

<p>全体としては 12:30 ぐらいからゆるっと始まり、17:30 ぐらいに解散しました。</p>

<p>最初に <a href="https://twitter.com/yoshi_hirano">@yoshi_hirano</a> さんから流れの説明があり、各自簡単に自己紹介をした後はそれぞれ<a href="https://github.com/localhost9292/kubernetes.rb">資料</a>を見ながらもくもくやっていました。</p>

<p>ただ、最初に Minikube で躓く人が多かったようです。</p>

<p>以下の Issue を参考に、最終的に <code>$ minikube start --vm-driver=hyperkit --bootstrapper=localkube</code> で動いたようです。</p>

<p><iframe src="https://hatenablog-parts.com/embed?url=https%3A%2F%2Fgithub.com%2Fkubernetes%2Fminikube%2Fissues%2F2765" title="minikube start hangs forever on mac · Issue #2765 · kubernetes/minikube" class="embed-card embed-webcard" scrolling="no" frameborder="0" style="display: block; width: 100%; height: 155px; max-width: 500px; margin: 10px 0px;"></iframe><cite class="hatena-citation"><a href="https://github.com/kubernetes/minikube/issues/2765">github.com</a></cite></p>

<p>ちなみに自分は <code>$ minikube start --vm-driver=hyperkit</code> だけで動きました。</p>

<p>Minikube が動かないので GKE で進める方も多かったようです (サンプルは Minikube と GKE 両方の手順を用意していました)。</p>

<p>後は、イメージの Pull や DB のマイグレーションジョブの実行など、待ち時間が多かったためか、それなりにわいわい話しながら皆で進めてました。</p>

<p>自分は講師役という立ち位置でしたが、感覚的にはどちらかというと大学の講義で手伝いをしていた感じです。</p>

<p>質問があったら近くに行って答えるのを繰り返しつつ、何もない時は Mastodon の GKE 版のサンプル資料を作っていました。</p>

<p>最終的には Mastodon まで動かせた方も多く、サンプルを用意した自分としては非常に嬉しかったです ✨</p>

<p>また、最後に KPT 方式の振り返りをやったのですが、Trello を使ったやり方が個人的にはすごく良かったです。</p>

<p>会社でもやってみたいなと思いました。</p>

<p>振り返りの様子。</p>

<p><span itemscope itemtype="http://schema.org/Photograph"><img src="https://cdn-ak.f.st-hatena.com/images/fotolife/t/tsub511/20180723/20180723125937.png" alt="f:id:tsub511:20180723125937p:plain" title="f:id:tsub511:20180723125937p:plain" class="hatena-fotolife" itemprop="image"></span></p>

<p>なお、どうやら弊社で月一でやっているもくもく会がたまたま同日開催で場所も<a href="https://basispoint.tokyo/coworking/jimbocho/">神保町</a>と、会場のすぐ側でやっていたようです。</p>

<p><a href="http://blog.hatena.ne.jp/masutaka26/" class="hatena-id-icon"><img src="https://cdn.profile-image.st-hatena.com/users/masutaka26/profile.png" width="16" height="16" alt="" class="hatena-id-icon">id:masutaka26</a> がひっそりとリモートで参加していました 😎</p>

<blockquote class="twitter-tweet" data-lang="ja"><p lang="ja" dir="ltr">02_nginx でこんなエラーが出た <a href="https://twitter.com/hashtag/localhost9292?src=hash&amp;ref_src=twsrc%5Etfw">#localhost9292</a><br><br>$ kubectl apply -f k8s/deployment.yaml<br>Error from server (BadRequest): error when creating &quot;k8s/deployment.yaml&quot;: Deployment in version &quot;v1&quot; cannot be handled as a Deployment: no kind &quot;Deployment&quot; is registered for version &quot;apps/v1&quot;</p>&mdash; Takashi Masuda (@masutaka) <a href="https://twitter.com/masutaka/status/1020547692378783744?ref_src=twsrc%5Etfw">2018年7月21日</a></blockquote>


<script async src="https://platform.twitter.com/widgets.js" charset="utf-8"></script>




<blockquote class="twitter-tweet" data-conversation="none" data-lang="ja"><p lang="ja" dir="ltr">minikube のアップデートで直った！</p>&mdash; Takashi Masuda (@masutaka) <a href="https://twitter.com/masutaka/status/1020553958337605634?ref_src=twsrc%5Etfw">2018年7月21日</a></blockquote>


<script async src="https://platform.twitter.com/widgets.js" charset="utf-8"></script>


<h2>資料の補足</h2>

<p>KPT の P にも上がっていましたが、途中実行待ちが長いときに「これは上手くいっていて単純に時間のかかる処理なのか、そもそも上手く動いていないのか」というお声を頂きました。</p>

<p>それについてはログを見る方法についても明示しておけば良かったと思っています。</p>

<p>Kubernetes でログを見るには <code>$ kubectl logs</code> コマンドを使います。</p>

<pre class="code" data-lang="" data-unlink>$ kubectl logs -f &lt;Pod Name&gt;</pre>


<p>(<code>tail</code> と同じように <code>-f</code> でストリーミングができます)</p>

<p>Job の実行時などにはログを見ながら今何が動いているのかを見るとより分かりやすかったと思います。</p>

<p>また、今回は Pod, Deployment, Service などの概念についての説明をせずにとりあえず手を動かしてみるという会でしたが、その辺りについては Kubernetes.rb #2 が開催されるようなので、興味のある方はぜひご参加ください！ (自分は次回は参加しないですが 🙇)</p>

<p><iframe src="https://hatenablog-parts.com/embed?url=https%3A%2F%2Flocalhost.connpass.com%2Fevent%2F95578%2F" title="Kubernetes.rb #2 (2018/09/01 11:00〜)" class="embed-card embed-webcard" scrolling="no" frameborder="0" style="display: block; width: 100%; height: 155px; max-width: 500px; margin: 10px 0px;"></iframe><cite class="hatena-citation"><a href="https://localhost.connpass.com/event/95578/">localhost.connpass.com</a></cite></p>

<h2>やってみた感想など</h2>

<p>今回初めて勉強会の主催側として参加したわけですが、感想としてはやって良かった！！と思っています。</p>

<p>そもそも Kubernetes についてはまだ仕事で使っているわけでもなく導入の検討段階ですし、個人で趣味レベルで動かした程度だったので今回の資料作成の中でかなり理解が深まったと思っています。</p>

<p>また、メンタル的にも成長できた気がします。</p>

<p>会ったことのない社外の人たちがいる場に飛び込むのは個人的にはなかなかハードルが高く、今まで勉強会に参加する際は懇親会にはあまり出ないタイプだったのですが、今回の体験で「あ、なんだ。こんな感じなのか」みたいな感覚を得られたので今後は懇親会などに参加して社外の人とも交流する勇気が少し出ました。</p>

<p>それでは最後に改めて、<a href="https://twitter.com/yoshi_hirano">@yoshi_hirano</a> さんや <a href="https://twitter.com/katsuhisa__">@katsuhisa__</a> さん、会場を提供してくださった万葉さん、参加してくださった皆様、ありがとうございました  👋</p>
]]></description>
            <enclosure url="https://cdn.user.blog.st-hatena.com/default_entry_og_image/116461321/1514251518718655" length="0" type="image//default_entry_og_image/116461321/1514251518718655"/>
        </item>
        <item>
            <title><![CDATA[新人エンジニア達がメタプログラミング Ruby の読書感想会をやった話]]></title>
            <link>https://developer.feedforce.jp/entry/2018/07/19/000000</link>
            <guid>https://developer.feedforce.jp/entry/2018/07/19/000000</guid>
            <pubDate>Wed, 18 Jul 2018 15:00:00 GMT</pubDate>
            <description><![CDATA[<p>はじめまして！今年の4月にフィードフォースに入社した <a href="http://blog.hatena.ne.jp/daido1976/" class="hatena-id-icon"><img src="https://cdn.profile-image.st-hatena.com/users/daido1976/profile.png" width="16" height="16" alt="" class="hatena-id-icon">id:daido1976</a> です！Rails に弄ばれる日々を過ごしています。</p>

<p>フィードフォースでは今年の4月と5月に私を含む計3名の新人エンジニア（開発実務未経験者）が入社をし、現在研修を受けている真っ最中です。</p>

<p>研修の一環として、『メタプログラミングRuby』を読んでいたのですが、初心者にはかなり難しい内容の本ということもあり、各自きちんと理解ができているかどうかチェックする意味も込めて社内で読書感想会を開催しました！</p>

<p><div class="hatena-asin-detail"><a href="http://www.amazon.co.jp/exec/obidos/ASIN/4873117437/hatena-blog-22/"><img src="https://images-fe.ssl-images-amazon.com/images/I/5102wwx0VzL._SL160_.jpg" class="hatena-asin-detail-image" alt="メタプログラミングRuby 第2版" title="メタプログラミングRuby 第2版"></a><div class="hatena-asin-detail-info"><p class="hatena-asin-detail-title"><a href="http://www.amazon.co.jp/exec/obidos/ASIN/4873117437/hatena-blog-22/">メタプログラミングRuby 第2版</a></p><ul><li><span class="hatena-asin-detail-label">作者:</span> Paolo Perrotta,角征典</li><li><span class="hatena-asin-detail-label">出版社/メーカー:</span> オライリージャパン</li><li><span class="hatena-asin-detail-label">発売日:</span> 2015/10/10</li><li><span class="hatena-asin-detail-label">メディア:</span> 大型本</li><li><a href="http://d.hatena.ne.jp/asin/4873117437/hatena-blog-22" target="_blank">この商品を含むブログ (3件) を見る</a></li></ul></div><div class="hatena-asin-detail-foot"></div></div></p>

<p>もちろん新人エンジニア達にとって技術書の読書感想会など初めてなので、過去社内で行われていた以下の記事を参考に。</p>

<p><iframe src="https://hatenablog-parts.com/embed?url=https%3A%2F%2Fdeveloper.feedforce.jp%2Fentry%2F2017%2F11%2F21%2F191055" title="第一回社内読書感想会(テスト駆動開発)を実施しました - Feedforce Developer Blog" class="embed-card embed-blogcard" scrolling="no" frameborder="0" style="display: block; width: 100%; height: 190px; max-width: 500px; margin: 10px 0px;"></iframe><cite class="hatena-citation"><a href="https://developer.feedforce.jp/entry/2017/11/21/191055">developer.feedforce.jp</a></cite></p>

<h2>で、どうだったの？</h2>

<h3>結論</h3>

<p><b>めっちゃよかったです。</b></p>

<h3>今回の進め方</h3>

<p>まず、1日でやるには文量的に難しいと判断し、5日に分けて毎日1時間、1章ずつ進めていくことに。（それでも時間をオーバーしてしまうことが稀によくありました）</p>

<p>当日は以下のような進め方をしました。</p>

<ol>
<li>事前に書いてきた付箋を全員で貼る</li>
<li>カテゴライズする</li>
<li>各自書いてきた付箋の内容を説明していく</li>
<li>議題の優先度を決める</li>
<li>ディスカッションする</li>
<li>まとめをする</li>
</ol>


<h3>『メタプログラミングRuby』読書感想会のホワイトボード</h3>

<p><span itemscope itemtype="http://schema.org/Photograph"><img src="https://cdn-ak.f.st-hatena.com/images/fotolife/d/daido1976/20180719/20180719113422.jpg" alt="f:id:daido1976:20180719113422j:plain" title="f:id:daido1976:20180719113422j:plain" class="hatena-fotolife" itemprop="image"></span>
<span style="color: #cccccc">個人的に一番盛り上がった3章（メソッド）のホワイトボード</span></p>

<h3>良かった点</h3>

<h4>理解が曖昧な部分が明確になった</h4>

<p>本を読んで自分では理解できたと思っていても、それを言語化して他人に伝えようとするといかに理解できていないかわかるもの。今回の読書感想会でもまさにその経験ができ、自分が曖昧に理解していた部分が明確になり、今後どこを学んでいくべきかをはっきりさせられたように思います。</p>

<h4>他メンバーの感想や見解を聞けた</h4>

<p>新人エンジニアとはいえ数ヶ月の研修を経て、それぞれの考え方や興味を持つポイントにも個性が出始めてきています。同じ『メタプログラミングRuby』という本を読んでも、Ruby の内部処理に興味津々なメンバー、用語の意味に執着するメンバー（私です）、具体的なコード例を知りたがるメンバー、などそれぞれ違った観点の感想や見解が出てきてとても面白かったです。</p>

<h4>先輩エンジニアの方々に知見を共有してもらえた</h4>

<p>読書感想会を開催する前週に社内向けに「ご興味ある方は覗きに来てください」と呼びかけたところ、当日先輩エンジニアの方々が参加してくださり、我々新人エンジニア達の疑問点を図や具体的なコード例を用いてどんどん解消してくれました。<b>正直これが一番のメリットだったように思います。</b></p>

<p><span itemscope itemtype="http://schema.org/Photograph"><img src="https://cdn-ak.f.st-hatena.com/images/fotolife/d/daido1976/20180719/20180719140749.png" alt="f:id:daido1976:20180719140749p:plain" title="f:id:daido1976:20180719140749p:plain" class="hatena-fotolife" itemprop="image"></span>
<span style="color: #cccccc">Qiita:Team で呼びかけてる様子</span></p>

<h3>反省点</h3>

<ul>
<li>最初の頃はだいぶ時間をオーバーしてしまった（ちなみに初回は1時間予定のところ、2.5時間もかかってしまいました…）</li>
<li>本を読んでから読書感想会を開催するまで少し期間が空いてしまい、読んだ内容をすっかり忘れてしまっていた（主に私の話ですが…）</li>
</ul>


<p>ただ、基本的には良いことずくめの会だと感じたので、今後も機会があれば積極的に開催していきたいと思います！</p>

<h3>最後に</h3>

<p>今回は入社したばかりの新人エンジニア達が主体となって開催された『メタプログラミングRuby』読書感想会のご紹介をしました！</p>

<p>最後に私が本書を読んで一番感銘を受けた一文を引用して終わりたいと思います。</p>

<blockquote><p>「（前略）メタプログラミングというものは存在しない。すべてはただのプログラミングじゃ。（後略）」p. 171</p></blockquote>

<p>それでは、またお会いしましょう ＾＾</p>

<p><span itemscope itemtype="http://schema.org/Photograph"><img src="https://cdn-ak.f.st-hatena.com/images/fotolife/d/daido1976/20180719/20180719142700.jpg" alt="f:id:daido1976:20180719142700j:plain" title="f:id:daido1976:20180719142700j:plain" class="hatena-fotolife" itemprop="image"></span>
<span style="color: #cccccc">新人エンジニア達のメタプロRuby </span></p>
]]></description>
            <enclosure url="https://images-fe.ssl-images-amazon.com/images/I/5102wwx0VzL._SL160_.jpg" length="0" type="image/jpg"/>
        </item>
        <item>
            <title><![CDATA[タイププロジェクト株式会社を退職しました]]></title>
            <link>https://shiromoji.hatenablog.jp/entry/2018/07/11/002504</link>
            <guid>https://shiromoji.hatenablog.jp/entry/2018/07/11/002504</guid>
            <pubDate>Tue, 10 Jul 2018 15:25:04 GMT</pubDate>
            <description><![CDATA[<p>2018年7月10日付けで<a href="http://typeproject.com/">タイププロジェクト株式会社</a>を退職しました。</p>

<p>大学在学中の2012年8月からタイププロジェクトの仕事をするようになり、その後タイプエンジニア（フォントエンジニア）として<a href="https://shiromoji.hatenablog.jp/entry/20150419/1429456773">2015年4月に入社しました</a>。あわせると、6年近くにわたってお世話になったことになります。</p>

<p>タイププロジェクトがコンパクトなチームだったこともあり、製品版フォントのプロダクション、フォーマット変換やカスタマイズ、内製ツールの開発、制作ワークフローの自動化・省力化、イントラの管理などなど、とにかくいろいろなことに携わることができました。仕事を始めた当初はほとんど何もわかっていなかったのですが<a href="#f-dedeb0f6" name="fn-dedeb0f6" title="Python を身に着けたのも実はこのときです。">*1</a>、おかげさまで随分いろいろなことができるようになり、自信もつきました。フォントへの興味がますます深まったのは、言うまでもありません。</p>

<p>タイププロジェクトに参加するまであまり想像していなかったのですが、実際の仕事では、タイプデザイナーなど他のメンバーとのコミュニケーションが頻繁に発生します。「こういう機能がほしい」「こんな感じならできるけど」とやりとりしながら開発を進めていく過程は、なかなか楽しいものでした。まわりの方が協力的で、この点において恵まれた環境だったと感じます。</p>

<p>ちなみに、明日からは別の会社にフロントエンドエンジニアとして入社します。文字関係の仕事ではありません。エンジニアとしてあらためて基礎固めを行い、実践的なチーム開発のスキルを身につけることができれば、と考えています。</p>

<p>仕事としては文字から離れることになりますが、あいかわらず興味は尽きませんので、これからもこのまま趣味として続けていきたいと思います。今後ともどうぞよろしくお願いいたします。</p>
<div class="footnote">
<p class="footnote"><a href="#fn-dedeb0f6" name="f-dedeb0f6" class="footnote-number">*1</a><span class="footnote-delimiter">:</span><span class="footnote-text"><a class="keyword" href="http://d.hatena.ne.jp/keyword/Python">Python</a> を身に着けたのも実はこのときです。</span></p>
</div>]]></description>
            <enclosure url="https://cdn.blog.st-hatena.com/images/theme/og-image-1500.png" length="0" type="image/png"/>
        </item>
        <item>
            <title><![CDATA[エニタイムフィットネスに通うことにした]]></title>
            <link>https://masutaka.net/2018-06-30-1/</link>
            <guid>https://masutaka.net/2018-06-30-1/</guid>
            <pubDate>Sat, 30 Jun 2018 00:00:00 GMT</pubDate>
            <description><![CDATA[最近、人生最高の体重を記録し、腹の肉もヤバく、駅の階段の上りで軽く
息切れがする。危機感を覚えているので、ジムに通うことにした。
選んだのは自宅からまあまあ近いエニタイムフィットネス 。
近いと行っても徒歩 10 分弱なので、個人的にはやや遠い部類。
数年前に通っていたクイックシェイプ は徒歩 3 分だったので、毎日通え
ていた。近さ重要。
ジムに通うのは実に 2 年 4 ヶ月ぶり。近所にもっと近いジムがあるんだ
けど、なんだか合わなくて半年ももたなかった。その前は会社の人と週一
でコナミに通っていたけど、会社の引っ越しで遠くなって行くのを止めて
しまった。
今までジムに通ってダイエットに成功したことがないので、今回はパーソ
ナルトレーニングをお願いした。以前筋トレを適当にやっていたら、筋を
痛めて病院に通うハメになったので、その防止も兼ねて。
とりあえず 5 回分で￥25,920。1 回 1 時間。週一でお願いする予定。
エニタイムの基本料金は月額￥6,998。会社で￥4,000の補助が出るような
ので、実質￥2,998かな。新三河島店は土足 OK なのはうれしい。
結果を出せるように頑張ります。]]></description>
        </item>
        <item>
            <title><![CDATA[10 分でわかる Ruby Guild]]></title>
            <link>https://developer.feedforce.jp/entry/2018/06/25/100000</link>
            <guid>https://developer.feedforce.jp/entry/2018/06/25/100000</guid>
            <pubDate>Mon, 25 Jun 2018 01:00:00 GMT</pubDate>
            <description><![CDATA[<p>どうも、バックエンドエンジニアのサトウリョウスケです ✌︎('ω')✌︎</p>

<p>RubyKaigi 2018 から早 3 週間。この記事を読んでいる方でも参加された方が沢山いるのではないかと思います。
個人的な感想ですが、今年は例年以上に充実していたんじゃないかな、と大満足です✨</p>

<p>感想記事はこちらの記事に詳しくまとめられています。</p>

<p><iframe src="https://hatenablog-parts.com/embed?url=https%3A%2F%2Fdeveloper.feedforce.jp%2Fentry%2F2018%2F06%2F22%2F141314" title="RubyKaigi 2018 に行ってきたので今更所感などをまとめました - Feedforce Developer Blog" class="embed-card embed-blogcard" scrolling="no" frameborder="0" style="display: block; width: 100%; height: 190px; max-width: 500px; margin: 10px 0px;"></iframe><cite class="hatena-citation"><a href="https://developer.feedforce.jp/entry/2018/06/22/141314">developer.feedforce.jp</a></cite></p>

<p>さて、今回の RubyKaigi の発表では笹田さんから Guild の進捗についての発表がありました。</p>

<p><a href="http://www.atdot.net/~ko1/activities/2018_rubykaigi2018.pdf"><img src="https://cdn-ak.f.st-hatena.com/images/fotolife/r/ryz310/20180621/20180621190557.png" alt="Guild Prototype" /></a></p>

<p>この Guild の概要について社内のメンバーに解説したところ中々に好評だったので、今回の記事では Guild とはどういうものなのかを超ざっくりですがご紹介します。</p>

<ul class="table-of-contents">
    <li><a href="#そもそも論なぜ-Guild-が必要なのか">そもそも論。なぜ Guild が必要なのか？</a></li>
    <li><a href="#Guild-と-Thread-の関係">Guild と Thread の関係</a></li>
    <li><a href="#Guild-間のデータの受け渡し">Guild 間のデータの受け渡し</a></li>
    <li><a href="#おわりに">おわりに</a></li>
</ul>

<h1 id="そもそも論なぜ-Guild-が必要なのか">そもそも論。なぜ Guild が必要なのか？</h1>

<p>ご存知の方も多いかと思いますが、現在の Ruby のスレッド処理はマルチコアに対応していません。
最近の PC の殆どにはマルチコア CPU が搭載されていると思いますが、１つの Ruby プロセスが利用できるコアは１つだけです。つまり、並列処理と言っても複数の処理を時間分割して実行しているだけという事になります。 Guild は Ruby でマルチコアを使った並列処理を実現するために必要な機能となります。</p>

<p>ちなみに Guild という名称はあくまでコードネームであるため、リリース時には別の名称になると思われます。</p>

<h1 id="Guild-と-Thread-の関係">Guild と Thread の関係</h1>

<p><span itemscope itemtype="http://schema.org/Photograph"><img src="https://cdn-ak.f.st-hatena.com/images/fotolife/r/ryz310/20180621/20180621191002.png" alt="f:id:ryz310:20180621191002p:plain" title="f:id:ryz310:20180621191002p:plain" class="hatena-fotolife" itemprop="image"></span></p>

<p>上図のように Guild に Thread が内包される関係になり、プロセス全体でいうと <code>RubyVM → Guild → Thread → Fiber</code> という関係になります。
これを踏まえて、 Guild 導入の前後を図に起こすと以下のようになります（雑な図で恐縮です。。🙇）</p>

<p><span itemscope itemtype="http://schema.org/Photograph"><img src="https://cdn-ak.f.st-hatena.com/images/fotolife/r/ryz310/20180621/20180621183710.jpg" alt="f:id:ryz310:20180621183710j:plain" title="f:id:ryz310:20180621183710j:plain" class="hatena-fotolife" itemprop="image"></span></p>

<p>同一 Guild 内の Thread は従来どおりシングルコアで動作します。しかし、 Guild を複数定義することで、それぞれの Guild に所属する Thread は並列に動作するようになります。
Guild が実装されていない現在の Ruby は <code>RubyVM → Thread → Fiber</code> という関係になりますが、言い換えればこれは単一の Guild で作られた Ruby プログラムとみなせると思います。
このことから、Guild が実装されても後方互換性は保たれるのではないか予想されます。</p>

<h1 id="Guild-間のデータの受け渡し">Guild 間のデータの受け渡し</h1>

<p>Guild 間でのデータ受け渡しについて、 Shareable Object と Non-Shareable Object という概念が出てきます。
詳細は <a href="http://www.atdot.net/~ko1/activities/2018_rubykaigi2018.pdf">発表スライド</a> を見てもらうとして、大雑把に両者の違いを説明すると以下のようになります。</p>

<ul>
<li>Shareable Object

<ul>
<li>Guild 間でデータ共有が可能なオブジェクト</li>
<li>基本的に値が変化しない Immutable なデータがこれに該当する

<ul>
<li>Const や Freeze したデータのこと</li>
<li>ただし Array や Hash は Freeze しても内側のデータまで Freeze されないので、 Shareable とはならないので注意

<ul>
<li>これについては Deep Freeze を実装するかも、とのこと。</li>
</ul>
</li>
</ul>
</li>
<li>他にも Isolated Proc という、ブロックの外側の変数へのアクセスを禁止した Proc もこれに該当しますが、詳細は割愛</li>
</ul>
</li>
<li>Non-Shareable Object

<ul>
<li>Guild 間でデータ共有が禁止されているオブジェクト

<ul>
<li>データの受け渡しができない訳ではない（詳しくは後述）</li>
</ul>
</li>
<li>主に一般的な変数のこと</li>
<li>単一の Guild にのみ所属する</li>
</ul>
</li>
</ul>


<p>Shareable Object は Immutable (値が変化しない)オブジェクトなので、並列処理中にデータを共有しても問題ないことはイメージしやすいかと思います。
重要なのは Non-Shareable Object の受け渡しで、以下に示す 2 つの方法があります。</p>

<ul>
<li>COPY

<ul>
<li>データを Guild 間で共有するのではなく、別の Guild にコピーして渡す</li>
</ul>
</li>
<li>MOVE

<ul>
<li>別の Guild にデータを渡すと、元の Guild からは見えなくなる</li>
</ul>
</li>
</ul>


<p>COPY は参照渡しではなく実体渡しなので、１つのデータに対して同時アクセスすることにはならず、 Thread-Safe なやりとりになります。
一方の MOVE は、データを別の Guild に渡すと元の Guild からはアクセスできなくなる、カットアンドペーストのような振る舞いになります。
こちらも同時アクセスが発生しないため、 Thread-Safe なやりとりになります。</p>

<p>ちなみに MOVE より COPY が利用されるケースが多いだろうとのことでした。</p>

<h1 id="おわりに">おわりに</h1>

<p>RubyKaigi 2018 で発表された Guild について超ざっくりと説明してみました。間違ってるところがあればご指摘頂けますと幸いです🙏
なお、開発中の仕様なので実装までにいくつかの変更があるかもしれません。</p>

<p>想像ですが、 Sidekiq とか Puma のような Thread ベースのサービスは Guild が導入されたら劇的にパフォーンスが良くなるかもしれませんね。
これからの Ruby の可能性に期待が高まります✨</p>
]]></description>
            <enclosure url="https://cdn-ak.f.st-hatena.com/images/fotolife/r/ryz310/20180621/20180621190557.png" length="0" type="image/png"/>
        </item>
        <item>
            <title><![CDATA[先期の MVP に選ばれた]]></title>
            <link>https://developer.feedforce.jp/entry/2018/06/15/130000</link>
            <guid>https://developer.feedforce.jp/entry/2018/06/15/130000</guid>
            <pubDate>Fri, 15 Jun 2018 04:00:00 GMT</pubDate>
            <description><![CDATA[<p>お元気にしてますか。増田（<a href="http://blog.hatena.ne.jp/masutaka26/" class="hatena-id-icon"><img src="https://cdn.profile-image.st-hatena.com/users/masutaka26/profile.png" width="16" height="16" alt="" class="hatena-id-icon">id:masutaka26</a>）です。</p>

<p>先週の金曜日にフィードフォースにおける 2017 年度（2017年6月 〜 2018年5月）の納会が行われ、その中で初の MVP を受賞することができました。🎉</p>

<p><figure class="figure-image figure-image-fotolife" title="喜びのコメントを表明中のしがないますたか"><span itemscope itemtype="http://schema.org/Photograph"><img src="https://cdn-ak.f.st-hatena.com/images/fotolife/m/masutaka26/20180608/20180608194920.jpg" alt="f:id:masutaka26:20180608194920j:plain" title="f:id:masutaka26:20180608194920j:plain" class="hatena-fotolife" itemprop="image"></span><figcaption>喜びのコメントを表明中のしがないますたか</figcaption></figure></p>

<p><figure class="figure-image figure-image-fotolife" title="チーム賞ももらったヨ"><span itemscope itemtype="http://schema.org/Photograph"><img src="https://cdn-ak.f.st-hatena.com/images/fotolife/m/masutaka26/20180614/20180614005507.jpg" alt="f:id:masutaka26:20180614005507j:plain" title="f:id:masutaka26:20180614005507j:plain" class="hatena-fotolife" itemprop="image"></span><figcaption>チーム賞ももらったヨ</figcaption></figure></p>

<p>会社で賞を頂いたのは 4 年前のルーキー賞以来です。</p>

<p><iframe src="https://hatenablog-parts.com/embed?url=https%3A%2F%2Fmasutaka.net%2Fchalow%2F2014-06-13-1.html" title="会社でルーキー賞に選ばれた" class="embed-card embed-webcard" scrolling="no" frameborder="0" style="display: block; width: 100%; height: 155px; max-width: 500px; margin: 10px 0px;"></iframe><cite class="hatena-citation"><a href="https://masutaka.net/chalow/2014-06-13-1.html">masutaka.net</a></cite></p>

<p><del>四年寝太郎としては、取るべくして取った賞だと思いました（ｷﾘｯ</del></p>

<p>正直なところ、頑張ったで賞くらいはもらえたりして？とボンヤリ思っていましたが<a href="#f-3841f537" name="fn-3841f537" title="そのような賞はありません">*1</a>、まさか MVP とは思いもよらず、発表の瞬間は素で驚きました。</p>

<p>2017 年度は以下のチームに所属していました。</p>

<ul>
<li>2017 年 6 月 〜 2018 年 3 月

<ul>
<li><a href="https://dfplus.feedforce.jp/">DF PLUS</a>（社内では DF Maker と呼ばれる）</li>
</ul>
</li>
<li>2018 年 4 月 〜 2018 年 5 月

<ul>
<li><a href="https://ecbooster.jp/">EC Booster</a></li>
</ul>
</li>
</ul>


<p>DF Maker ではサービスの信頼性向上にひたすら努める毎日でした。ECS でとんでもない量のエラーが発生して、３連休の間は暇を見つけてエラーログを確認してたなー（遠い目）。</p>

<p>EC Booster ではチームビルディングから始めました。👇️以下の記事にまとまっています。</p>

<p><iframe src="https://hatenablog-parts.com/embed?url=https%3A%2F%2Fdeveloper.feedforce.jp%2Fentry%2F2018%2F05%2F21%2F150000" title="『開発基盤チームとして課題を探したらマネジメントをしていた』という発表をした - Feedforce Developer Blog" class="embed-card embed-blogcard" scrolling="no" frameborder="0" style="display: block; width: 100%; height: 190px; max-width: 500px; margin: 10px 0px;"></iframe><cite class="hatena-citation"><a href="https://developer.feedforce.jp/entry/2018/05/21/150000">developer.feedforce.jp</a></cite></p>

<p>どちらにも共通することが、2 年目の優秀な若者と仕事ができたことです。私が若者を引っ張っていくぜーという感じではなくむしろ逆で、すでにサービスを知り尽くした若者から学ぶ日々でした（今もそうです）。</p>

<p>その中で、「こうすればチーム開発がドライブするだろう」や「こうすればサービスの質を高められるだろう」というアイディアを出し、実践し、小さな改善と失敗を繰り返したことが、結果としてチームの状況を良くしたりサービスの質を高めることが出来たのだと思います（現在進行系）。</p>

<p>もちろん、一緒に働くことができたチームの皆さんの協力があっての賞です。ありがとうございます。🙏</p>

<p>それではまた 4 年後にお会いしましょう💤</p>
<div class="footnote">
<p class="footnote"><a href="#fn-3841f537" name="f-3841f537" class="footnote-number">*1</a><span class="footnote-delimiter">:</span><span class="footnote-text">そのような賞はありません</span></p>
</div>]]></description>
            <enclosure url="https://cdn-ak.f.st-hatena.com/images/fotolife/m/masutaka26/20180614/20180614005507.jpg" length="0" type="image/jpg"/>
        </item>
        <item>
            <title><![CDATA[Rails4 と Rails5 とでの eager_load_paths の違い]]></title>
            <link>https://masutaka.net/2018-05-26-2/</link>
            <guid>https://masutaka.net/2018-05-26-2/</guid>
            <pubDate>Sat, 26 May 2018 01:00:00 GMT</pubDate>
            <description><![CDATA[Rails4 と Rails5 とで eager_load_paths の内容に差異があることを知
りました。
Rails5 では app 以下の全ての concerns ディレクトリや channels ディ
レクトリが追加されています。
以下、Rails4 と Rails5 とで実装箇所を追ってみました。
Rails-4.2.10 eager_load_paths を返すメソッド
Rails::Engine::Configuration#eager_load_paths ↓
eager_load_paths の構築開始。Rails5 と違いあり
Rails::Engine::Configuration#paths ↓
Rails::Paths::Root#add ↓
Rails::Paths::Path#initialize ↓
Rails::Paths::Path#eager_load! ここまでで eager_load_paths の構築完了
↓
Rails::Paths::Root#eager_load 結果を返す
Rails-5.2.0 eager_load_paths を返すメソッド
Rails::Engine::Configuration#eager_load_paths ↓
eager_load_paths の構築開始。Rails4 と違いあり
Rails::Engine::Configuration#paths ↓
Rails::Paths::Root#add ↓
Rails::Paths::Path#initialize ↓
Rails::Paths::Path#eager_load! ここまでで eager_load_paths の構築完了
↓
Rails::Paths::Root#eager_load 結果を返す
まとめ Rails の eager_load_paths を調べました。app 以下が再帰的に追加され
るだけかと思ってましたが、調べたら凝ったことをしていました。config
以下も追加されるのも、なるほど&hellip;といった感じでした。]]></description>
        </item>
        <item>
            <title><![CDATA[Ruby で FTPS 接続する方法]]></title>
            <link>https://masutaka.net/2018-05-26-1/</link>
            <guid>https://masutaka.net/2018-05-26-1/</guid>
            <pubDate>Sat, 26 May 2018 00:00:00 GMT</pubDate>
            <description><![CDATA[まずは情報の整理から。
   種類 暗号化なし 暗号化あり     HTTP HTTP HTTPS   FTP FTP FTPS    混乱しやすいが、SFTP は SSH を使って暗号化・認証を行うプロトコルで
FTPS とは別。
・HTTP のセキュア版が HTTPS
・FTP のセキュア版が FTPS
と覚えると良いだろう。
サンプルコード FTP の SaaS である BrickFTP にアカウントを作った。
Net::FTP で接続可能。以下は FTPS 接続し、PWD を発行する Ruby コー
ド。password はマスクしている。
#!/usr/bin/env ruby require &#39;net/ftp&#39; ftps = Net::FTP.new( &#39;masutaka.brickftp.com&#39;, ssl: true, username: &#39;masutaka.net@gmail.com&#39;, password: &#39;********&#39;, debug_mode: true, ) puts ftps.pwd 結果。]]></description>
        </item>
        <item>
            <title><![CDATA[『開発基盤チームとして課題を探したらマネジメントをしていた』という発表をした]]></title>
            <link>https://developer.feedforce.jp/entry/2018/05/21/150000</link>
            <guid>https://developer.feedforce.jp/entry/2018/05/21/150000</guid>
            <pubDate>Mon, 21 May 2018 06:00:00 GMT</pubDate>
            <description><![CDATA[<p>こんにちは。増田（<a href="http://blog.hatena.ne.jp/masutaka26/" class="hatena-id-icon"><img src="https://cdn.profile-image.st-hatena.com/users/masutaka26/profile.png" width="16" height="16" alt="" class="hatena-id-icon">id:masutaka26</a>）です。発表が無事終わり、何かゲームでも買おうかなと思ってます。</p>

<p>さて、フィードフォースでは毎週金曜日 16:00 から、社内技術勉強会を開催しています。当番制の持ち回りで技術に関連したことを発表します。</p>

<p>先週金曜日は私の当番で『開発基盤チームとして課題を探したらマネジメントをしていた』という発表をしました。</p>

<p>技術チーム以外の方もたくさん聞きに来てくれて、ありがたかったです。🙏</p>

<h2>発表の内容</h2>

<script async class="speakerdeck-embed" data-id="978c7016bb7b473693f547116e8e704f" data-ratio="1.33333333333333" src="//speakerdeck.com/assets/embed.js"></script>


<p><a href="http://developer.feedforce.jp/entry/2017/10/16/150000">前回</a>含めて、これまでの発表は全てコードが登場していました。今回のようなコードが登場しないマネジメントの話は、内容が拡散しがちで難しかったです。結局まとまりませんでした...。</p>

<p>今回は敢えて後から読めるプレゼン資料にしました。なのでプレゼン資料としては冗長な書き方になっています。</p>

<p>まとめるとこんな内容です。</p>

<ul>
<li>コミュニケーションの不確実性を解消することが、マネジメント（やチームビルディング）に必要なはず</li>
<li>そのため自ら場に飛び込んで、情報の非対称性を解消していった</li>
<li>これからもソフトウェアを書くこと以外に課題解決の手段があればやっていく</li>
<li>そして徐々にマネジメントにかける時間を減らし、コードを書く時間を増やしていく</li>
</ul>


<p>今思えば、話し忘れたことがポロポロと出てきます。</p>

<ul>
<li>そもそもチームメンバーは自走できる方々で、ホワイトボード整理の時も方針だけ話したら勝手に整理されていった

<ul>
<li>私は方向性を決めただけ</li>
</ul>
</li>
<li>チームに入りたてのときは少々オーバーリアクションを心がけ、徐々に普通に戻していく。

<ul>
<li>何考えている人か分かってもらうことで、その後のコミュニケーションをスムーズにする</li>
</ul>
</li>
</ul>


<p>完璧な発表などありませんね。</p>

<h2>発表の感想</h2>

<p>付箋紙に感想を書いてくれました。<i class="blogicon-comment" aria-hidden="true"></i> は私からのコメントです。</p>

<ul>
<li>ジョハリの窓の紹介ありがとうございます。勉強になります！

<ul>
<li><i class="blogicon-comment" aria-hidden="true"></i> 私も『<a href="https://www.amazon.co.jp/dp/B079TLW41L/">エンジニアリング組織論への招待</a>』で初めて知りました。数年前にプロダクトオーナーの学習をした以来ですから...</li>
</ul>
</li>
<li>自分はまだマネジメントからは程遠い存在なのですが、話しかけやすいオーラを出すことや、くだらないと思うことも質問することなどは、今すぐにでも実行出来るし、目指すことだと思いました。ありがとうございました！

<ul>
<li><i class="blogicon-comment" aria-hidden="true"></i> はい、個々が意識することが自走するチームや、個々のリーダーシップに繋がると思います</li>
</ul>
</li>
<li>共感できる良い話でした

<ul>
<li><i class="blogicon-comment" aria-hidden="true"></i> あざす！</li>
</ul>
</li>
<li>初公開の画像が見られて良かったです

<ul>
<li><i class="blogicon-comment" aria-hidden="true"></i> お粗末さまでした...</li>
</ul>
</li>
<li>早くインフラ朝会にもどって来てください

<ul>
<li><i class="blogicon-comment" aria-hidden="true"></i> 今回の件が落ち着いたらインフラ朝会にもどりますよ。待っていてくださいね！</li>
</ul>
</li>
<li>必要な情報とそうでもない情報の整理はものすごい HP/MP を消費しそう

<ul>
<li><i class="blogicon-comment" aria-hidden="true"></i> そうですね...</li>
</ul>
</li>
<li>マネジメントの成果はすぐには結果に現れないかも？どの位の頻度で振り返るべきなのか？

<ul>
<li><i class="blogicon-comment" aria-hidden="true"></i> イテレーションごとの振り返りで、チームを観察すれば良いです。マネジメントの成果かどうかは重要ではないと思います</li>
</ul>
</li>
<li>◯◯を支える技術

<ul>
<li><i class="blogicon-comment" aria-hidden="true"></i> 次回はコードの話をしよう...</li>
</ul>
</li>
<li>知識科学やり直さなきゃ・・・

<ul>
<li><i class="blogicon-comment" aria-hidden="true"></i> 私は今回で終了ですw</li>
</ul>
</li>
<li>チームの問題点を発見して、それを解決する手段を選ばないスタンスがすごい

<ul>
<li><i class="blogicon-comment" aria-hidden="true"></i> もう必死ですよ（笑）</li>
</ul>
</li>
<li>「内心ではなく行動に注目する」は、認知行動療法などでも使われていますね（最近のトレンド？）

<ul>
<li><i class="blogicon-comment" aria-hidden="true"></i> へぇ〜</li>
</ul>
</li>
<li>なかなかボリュームある資料でしたが、作るのにどれくらいかかったのか気になります

<ul>
<li><i class="blogicon-comment" aria-hidden="true"></i> 先週土曜日の夜に草稿を作り「これでいけそう」という感触を得て、今週は平日の夜２日くらいで整理をしました。話す内容については一ヶ月くらい前から頭の中で考えたり、『<a href="https://www.amazon.co.jp/dp/B079TLW41L/">エンジニアリング組織論への招待</a>』を全部読んだりしてました</li>
</ul>
</li>
<li>最近疲弊してそうで心配でしたが、今日の発表で色々アウトプットしてもらって安心しました

<ul>
<li><i class="blogicon-comment" aria-hidden="true"></i> 気にかけて頂いてありがとうございます。これからも安心安全のマスタカをお届けして参ります</li>
</ul>
</li>
<li>うなずきすぎて首もげる

<ul>
<li><i class="blogicon-comment" aria-hidden="true"></i> ありがとうございます。参考になったことが各チームに還元されるとうれしいです</li>
</ul>
</li>
<li>マスタカさん自体はマネジメントよりコード書く方が好きなんでしょうか？

<ul>
<li><i class="blogicon-comment" aria-hidden="true"></i> そうですね。引き篭もってコードを書きたいです</li>
</ul>
</li>
<li>ますたかさんのおかげでチームがちゃんと回りはじめた気がします

<ul>
<li><i class="blogicon-comment" aria-hidden="true"></i> そう言って頂けるとうれしいです。今がスタート地点だと捉え、精進してまいります</li>
</ul>
</li>
<li>増田さんが参加されてから何かがスムーズになった実感があります（情報や知識だけでなく）

<ul>
<li><i class="blogicon-comment" aria-hidden="true"></i> うれしいですね。マネジメントは空気のような存在が良いと考えています</li>
</ul>
</li>
<li>マネジメントってどうやるか？のテクニックの面もあるけど、誰がやるか？の面も大きい気がしてます

<ul>
<li><i class="blogicon-comment" aria-hidden="true"></i> そうですね。例えば入ったばかりの職場だと、信頼関係を築くことから始まると思います。今回は同じ会社ということと、過去に一緒に働いたメンバーがいたことに助けられました</li>
</ul>
</li>
<li>EC Booster のこれからに期待しています！

<ul>
<li><i class="blogicon-comment" aria-hidden="true"></i> 💪</li>
</ul>
</li>
<li>「場に飛び込む」「正しく伝わったと思わない」肝に銘じます！

<ul>
<li><i class="blogicon-comment" aria-hidden="true"></i> よろしくお願いします！</li>
</ul>
</li>
<li>「エンジニアが発見した課題の解決フロー」読みたいです

<ul>
<li><i class="blogicon-comment" aria-hidden="true"></i> Slack で書いたとおり、割と普通のフローです。発表で話したエンジニア以外の方からの依頼と整合性を合わせてこうしました。まだ始めて間もなく 1 イテレーションも回してない状態ですがね...

<ol>
<li> Issue を作ると EC Booster waffle.io の Planning カラムに入る</li>
<li> 次の開発ミーティングで Planning カラムを空にする</li>
<li> スプリントでは Sprint Backlog に集中する</li>
</ol>
</li>
</ul>
</li>
<li>feedforce だとマネジメントオンリーじゃなくて、開発+マネジメントが最強という話を昨日クリストフとした

<ul>
<li><i class="blogicon-comment" aria-hidden="true"></i> 最強かは分かりませんが、コードも分かったほうが捗ると思います</li>
</ul>
</li>
<li>仕事でもプライベートでも、コミュニティ内でオープンな発信をする人が多いと、円滑に物事が進みやすいなと考えられました。その逆もまた然りだったので...。かつ、人に伝えるときは具体的にするというのも大切かと思いました

<ul>
<li><i class="blogicon-comment" aria-hidden="true"></i> 他人は自分でないので、分かりやすく具体的なコミュニケーションが大事ですね</li>
</ul>
</li>
<li><span itemscope itemtype="http://schema.org/Photograph"><img src="https://cdn-ak.f.st-hatena.com/images/fotolife/m/masutaka26/20180519/20180519155210.jpg" alt="masutaka by yousuke" title="f:id:masutaka26:20180519155210j:plain" class="hatena-fotolife" itemprop="image"></span>

<ul>
<li><i class="blogicon-comment" aria-hidden="true"></i> え、誰？（困惑）</li>
</ul>
</li>
</ul>


<h2>最後に</h2>

<p><div class="hatena-asin-detail"><a href="http://www.amazon.co.jp/exec/obidos/ASIN/4774196053/hatena-blog-22/"><img src="https://images-fe.ssl-images-amazon.com/images/I/51zMvVL4MeL._SL160_.jpg" class="hatena-asin-detail-image" alt="エンジニアリング組織論への招待 ~不確実性に向き合う思考と組織のリファクタリング" title="エンジニアリング組織論への招待 ~不確実性に向き合う思考と組織のリファクタリング"></a><div class="hatena-asin-detail-info"><p class="hatena-asin-detail-title"><a href="http://www.amazon.co.jp/exec/obidos/ASIN/4774196053/hatena-blog-22/">エンジニアリング組織論への招待 ~不確実性に向き合う思考と組織のリファクタリング</a></p><ul><li><span class="hatena-asin-detail-label">作者:</span> 広木大地</li><li><span class="hatena-asin-detail-label">出版社/メーカー:</span> 技術評論社</li><li><span class="hatena-asin-detail-label">発売日:</span> 2018/02/22</li><li><span class="hatena-asin-detail-label">メディア:</span> 単行本（ソフトカバー）</li><li><a href="http://d.hatena.ne.jp/asin/4774196053/hatena-blog-22" target="_blank">この商品を含むブログ (2件) を見る</a></li></ul></div><div class="hatena-asin-detail-foot"></div></div></p>

<p>良かったぞ。「エンジニア組織論」ではないことに注目。プロダクトオーナーやエンジニア以外の職種の方にも是非読んでもらいたいです。</p>
]]></description>
            <enclosure url="https://images-fe.ssl-images-amazon.com/images/I/51zMvVL4MeL._SL160_.jpg" length="0" type="image/jpg"/>
        </item>
        <item>
            <title><![CDATA[Python パッケージとして再構成された AFDKO 2.7 がリリース]]></title>
            <link>https://shiromoji.hatenablog.jp/entry/2018/05/16/235048</link>
            <guid>https://shiromoji.hatenablog.jp/entry/2018/05/16/235048</guid>
            <pubDate>Wed, 16 May 2018 14:50:48 GMT</pubDate>
            <description><![CDATA[<p>AFDKO の新バージョン 2.7.0 が先週リリースされました。AFDKO は、フォント開発のための <a class="keyword" href="http://d.hatena.ne.jp/keyword/Adobe">Adobe</a> 製<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%B3%A5%DE%A5%F3%A5%C9%A5%E9%A5%A4%A5%F3">コマンドライン</a>ツール集です。</p>

<p><iframe src="https://hatenablog-parts.com/embed?url=https%3A%2F%2Fgithub.com%2Fadobe-type-tools%2Fafdko" title="adobe-type-tools/afdko" class="embed-card embed-webcard" scrolling="no" frameborder="0" style="display: block; width: 100%; height: 155px; max-width: 500px; margin: 10px 0px;"></iframe><cite class="hatena-citation"><a href="https://github.com/adobe-type-tools/afdko">github.com</a></cite></p>

<h3><a class="keyword" href="http://d.hatena.ne.jp/keyword/Python">Python</a> パッケージ化</h3>

<p>今回の大きな変更点は、AFDKO の中身がひとつの <a class="keyword" href="http://d.hatena.ne.jp/keyword/Python">Python</a> パッケージへと、がらっと再構成された点です。</p>

<blockquote><p>The AFDKO has been restructured so that it can be installed as a <a class="keyword" href="http://d.hatena.ne.jp/keyword/Python">Python</a> package. It now depends on the user's <a class="keyword" href="http://d.hatena.ne.jp/keyword/Python">Python</a> <a class="keyword" href="http://d.hatena.ne.jp/keyword/interpreter">interpreter</a>, and no longer contains its own <a class="keyword" href="http://d.hatena.ne.jp/keyword/Python">Python</a> <a class="keyword" href="http://d.hatena.ne.jp/keyword/interpreter">interpreter</a>.</p></blockquote>

<p><a href="https://github.com/adobe-type-tools/afdko/tree/2.7.0#major-changes">https://github.com/adobe-type-tools/afdko/tree/2.7.0#major-changes</a></p>

<p>すでに <a class="keyword" href="http://d.hatena.ne.jp/keyword/PyPI">PyPI</a> へ <a href="https://pypi.org/project/afdko/">afdko パッケージ</a>がアップロードされていますので、普段の <a class="keyword" href="http://d.hatena.ne.jp/keyword/Python">Python</a> パッケージと同じく、以下のコマンドでインストールすることができます。</p>

<pre class="code" data-lang="" data-unlink>$ pip install afdko</pre>


<p>従来（2.5 まで）の AFDKO は、<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%B9%A5%AF%A5%EA%A5%D7%A5%C8">スクリプト</a>やバイナリ等が <a class="keyword" href="http://d.hatena.ne.jp/keyword/Python">Python</a> <a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%A4%A5%F3%A5%BF%A5%D7%A5%EA%A5%BF">インタプリタ</a>とともに ZIP で固められて配布されており、AFDKO 中の <a class="keyword" href="http://d.hatena.ne.jp/keyword/Python">Python</a> <a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%B9%A5%AF%A5%EA%A5%D7%A5%C8">スクリプト</a>は、必ずこの<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%A4%A5%F3%A5%BF%A5%D7%A5%EA%A5%BF">インタプリタ</a>を使って実行されるようになっていました。また、これを実現するためにインストール方法やパスの管理が独自のものになっており、少々扱いづらい面がありました。</p>

<p><a class="keyword" href="http://d.hatena.ne.jp/keyword/Python">Python</a> パッケージへの再構成作業は2017年末ごろからスタートし、ベータ期間（2.6 がこれに相当）を経て、今回の 2.7.0 をもってめでたく正式リリースとなったようです。この <a class="keyword" href="http://d.hatena.ne.jp/keyword/Python">Python</a> パッケージ化によって、以下のようなメリットが享受できそうです。</p>

<ul>
<li>インストール／アンインストール／更新が、おなじみの pip で行えるようになる</li>
<li>バージョンの固定や切り替えが容易になる</li>
<li>他の <a class="keyword" href="http://d.hatena.ne.jp/keyword/Python">Python</a> パッケージと組み合わせて使いやすくなる</li>
<li>パッケージのビルド方法やテスト方法が整備・明文化される</li>
</ul>


<h3>AFDKO 開発の盛り上がり</h3>

<p>AFDKO の開発は、<a class="keyword" href="http://d.hatena.ne.jp/keyword/Adobe">Adobe</a> のエンジニアが中心となって進められていますが、昨年まではあまり活発には見えませんでした。バリアブルフォントへの対応などは進められていたようですが、発展著しい <a href="https://github.com/fonttools/fonttools">fontTools</a> などと比べてしまうと、地味な印象がありました。また、AFDKO には</p>

<ul>
<li>コードの可読性が低い</li>
<li>テストがほどんどない</li>
<li>古い C のコードが多い</li>
<li>バグ報告やプルリク<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%A8%A5%B9">エス</a>トがなかなか対応されない</li>
<li>バグがあっても自分では直しにくい</li>
<li><a class="keyword" href="http://d.hatena.ne.jp/keyword/Python">Python</a> 2</li>
</ul>


<p>などのつらい面も多々あり、個人的にはここ数年、fontTools の方を利用する機会が圧倒的に多くなっていました。</p>

<p>しかしながら、昨秋ごろから開発が加速し、現在に至るまで活発な状態が続いています。</p>

<p><a href="https://github.com/adobe-type-tools/afdko/graphs/contributors"><img src="https://cdn-ak.f.st-hatena.com/images/fotolife/m/mashabow/20180516/20180516224554.png" class="hatena-fotolife" itemprop="image"></a></p>

<p>内容としては、コードの<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%EA%A5%D5%A5%A1%A5%AF%A5%BF%A5%EA%A5%F3%A5%B0">リファクタリング</a>やテスト・CIの整備といった基礎的な部分の改善が大きくなっており、前述の <a class="keyword" href="http://d.hatena.ne.jp/keyword/Python">Python</a> パッケージ化も、その流れの中で実施されたように見えます。<a class="keyword" href="http://d.hatena.ne.jp/keyword/Python">Python</a> 3 をサポートするための作業も始まり、明るい未来が見えてきた感じがします。</p>

<p>期待を込めつつ、これからも引き続き AFDKO の動きに注目していこうと思います。</p>
]]></description>
            <enclosure url="https://cdn-ak.f.st-hatena.com/images/fotolife/m/mashabow/20180516/20180516224554.png" length="0" type="image/png"/>
        </item>
        <item>
            <title><![CDATA[Datadog で dd-agent に root 権限を与えずにプロセスがオープンしているファイルディスクリプタ数のメトリクスを取得する]]></title>
            <link>https://developer.feedforce.jp/entry/2018/05/11/190000</link>
            <guid>https://developer.feedforce.jp/entry/2018/05/11/190000</guid>
            <pubDate>Fri, 11 May 2018 10:00:00 GMT</pubDate>
            <description><![CDATA[<p>こんにちは、エンジニアの <a href="http://blog.hatena.ne.jp/tsub511/" class="hatena-id-icon"><img src="https://cdn.profile-image.st-hatena.com/users/tsub511/profile.png" width="16" height="16" alt="" class="hatena-id-icon">id:tsub511</a> です。
ここ数日気温の寒暖差が凄いですね。昨日あまりにも寒すぎて一度しまった冬用の布団を引っ張りだしたら、また気温が上がってきたので片付けることになりそうです。</p>

<p>最近、Datadog でプロセスがオープンしているファイルディスクリプタ数のメトリクスを取る必要があり、色々と考えた結果良い方法を思いついたため、今回ご紹介します。</p>

<h2>Datadog 標準の <code>system.processes.open_file_descriptors</code> メトリクスを取るには root 権限が必要</h2>

<p>Datadog では標準で、Process Check という機能を使うことで <code>system.processes.open_file_descriptors</code> メトリクスを取ることができます。</p>

<blockquote><p><span itemscope itemtype="http://schema.org/Photograph"><img src="https://cdn-ak.f.st-hatena.com/images/fotolife/t/tsub511/20180511/20180511150551.png" alt="f:id:tsub511:20180511150551p:plain" title="f:id:tsub511:20180511150551p:plain" class="hatena-fotolife" itemprop="image"></span></p>

<p><a href="https://docs.datadoghq.com/integrations/process/#metrics">https://docs.datadoghq.com/integrations/process/#metrics</a></p></blockquote>

<p>ただし、説明文にも書いてある通り <code>dd-agent</code> ユーザーが実行したプロセスしかこのメトリクスを取得することが出来ません。</p>

<p>そのため、例えば Rails アプリケーションを動かすために <code>puma</code> プロセスを <code>dev</code> ユーザーで動かしていた場合、以下のような設定を書いても <code>system.processes.open_file_descriptors</code> メトリクスを取得することが出来ません。</p>

<pre class="code" data-lang="" data-unlink>init_config:

instances:
  - name: puma_worker
    search_string: [&#34;puma: cluster worker&#34;]
    exact_match: False</pre>


<p><span itemscope itemtype="http://schema.org/Photograph"><img src="https://cdn-ak.f.st-hatena.com/images/fotolife/t/tsub511/20180511/20180511151024.png" alt="f:id:tsub511:20180511151024p:plain" title="f:id:tsub511:20180511151024p:plain" class="hatena-fotolife" itemprop="image"></span></p>

<p>これは何故かというと、プロセスがオープンしているファイルディスクリプタ数を取得するためには <code>/proc/&lt;PID&gt;/fd</code> 以下にアクセスする必要があるためです。</p>

<p><code>/proc/&lt;PID&gt;/fd</code> ディレクトリはそのプロセスを実行したユーザーにしか read 権限がありません。</p>

<pre class="code" data-lang="" data-unlink>$ ls -al /proc/1/fd
ls: cannot open directory /proc/1/fd: Permission denied

$ sudo ls -al /proc/1 | grep fd
dr-x------.   2 root root 0 Apr 18 06:58 fd
dr-x------.   2 root root 0 May 11 06:12 fdinfo</pre>


<p>そのため、<code>dd-agent</code> はそのメトリクスを取得できないというわけです。</p>

<p>ただし、<code>dd-agent</code> に root 権限を与えることで、閲覧は可能になります。
公式ドキュメントではそのやり方が提示されていますが、セキュリティ的にリスクがあるため、推奨はされていません。</p>

<p><iframe src="https://hatenablog-parts.com/embed?url=https%3A%2F%2Fdocs.datadoghq.com%2Fagent%2Ffaq%2Fwhy-don-t-i-see-the-system-processes-open-file-descriptors-metric" title="Why don&#39;t I see the &#39;system.processes.open_file_descriptors&#39; metric?" class="embed-card embed-webcard" scrolling="no" frameborder="0" style="display: block; width: 100%; height: 155px; max-width: 500px; margin: 10px 0px;"></iframe><cite class="hatena-citation"><a href="https://docs.datadoghq.com/agent/faq/why-don-t-i-see-the-system-processes-open-file-descriptors-metric">docs.datadoghq.com</a></cite></p>

<p>さて、この記事の内容は <code>dd-agent</code> に root 権限を与えずに <code>system.processes.open_file_descriptors</code> メトリクスを取得するということでしたが、どうやれば良いのでしょう？</p>

<h2>DogStatsD を使う</h2>

<p>Datadog には DogStatsD という仕組みがあります。</p>

<p>DogStatsD は任意のカスタムメトリクスを Datadog に送る方法の一つです。</p>

<p><iframe src="https://hatenablog-parts.com/embed?url=https%3A%2F%2Fdocs.datadoghq.com%2Fdevelopers%2Fdogstatsd%2F" title="DogStatsD" class="embed-card embed-webcard" scrolling="no" frameborder="0" style="display: block; width: 100%; height: 155px; max-width: 500px; margin: 10px 0px;"></iframe><cite class="hatena-citation"><a href="https://docs.datadoghq.com/developers/dogstatsd/">docs.datadoghq.com</a></cite></p>

<p>通常は以下のような言語毎のライブラリを公式が提供してくれているため、こちらを使うことで任意のカスタムメトリクスを送ることができます。</p>

<p><iframe src="https://hatenablog-parts.com/embed?url=https%3A%2F%2Fgithub.com%2FDataDog%2Fdatadog-go" title="DataDog/datadog-go" class="embed-card embed-webcard" scrolling="no" frameborder="0" style="display: block; width: 100%; height: 155px; max-width: 500px; margin: 10px 0px;"></iframe><cite class="hatena-citation"><a href="https://github.com/DataDog/datadog-go">github.com</a></cite></p>

<p>DogStatsD を通してメトリクスを送る際は、その送り側のプロセスは任意のユーザーで実行できます。</p>

<p>そのため、上記の例にあったように <code>dev</code> ユーザーが <code>puma</code> プロセスを実行している場合は <code>dev</code> ユーザーで DogStatsD にメトリクスを送るプロセスを実行すれば、
同じ <code>dev</code> ユーザーのため <code>/proc/&lt;PID&gt;/fd</code> への read 権限があります。</p>

<p>思いついてみれば簡単なことでしたね。</p>

<h2>でもプログラミング言語で実装するのは面倒じゃない？</h2>

<p>少し本題とは反れますが、もう少しお手軽に DogStatsD にカスタムメトリクスを送りたいな、とも思います。</p>

<p>そこで、調べてみたところ「DogStatsD には単純に専用のフォーマットで UDP パケットを送るだけで良い」ということを知りました。</p>

<blockquote><p>On Linux:</p>

<p><code>
vagrant@vagrant-ubuntu-14-04:~$ echo -n "custom_metric:60|g|#shell" &gt;/dev/udp/localhost/8125
</code></p>

<p>or</p>

<p><code>
vagrant@vagrant-ubuntu-14-04:~$ echo -n "custom_metric:60|g|#shell" | nc -4u -w0 127.0.0.1 8125
</code></p>

<p><a href="https://docs.datadoghq.com/developers/dogstatsd/#sending-metrics">https://docs.datadoghq.com/developers/dogstatsd/#sending-metrics</a></p></blockquote>

<p>上記のように、DogStatsD のエンドポイントである <code>localhost:8125</code> に <code>custom_metric:60|g|#shell</code> のようなフォーマットで UDP パケットを送ってやれば良いです。</p>

<p>そのため、プロセスがオープンしているファイルディスクリプタ数のカスタムメトリクスを送るには、以下のコマンドを実行すれば良いです。</p>

<pre class="code" data-lang="" data-unlink>$ echo -n &#34;open_file_descriptors.puma_worker:$(ls /proc/$(pgrep -f -u dev &#39;puma: cluster worker&#39; | head -1)/fd/ | wc -l):g&#34; | nc -u -4 localhost 8125</pre>


<p>上記のコマンドを <code>crontab</code> などで毎分実行してやれば <code>open_file_descriptors.puma_worker</code> メトリクスを送ることができます。</p>

<p>ただし、実際に本番で利用しているコマンドはそこまで単純ではなく、以下のようなシェルスクリプトを書いて実行しています。</p>

<pre class="code lang-sh" data-lang="sh" data-unlink><span class="synComment">#!/bin/sh</span>

<span class="synStatement">if [</span> <span class="synPreProc">$#</span> <span class="synStatement">-ne</span> <span class="synConstant">2</span> <span class="synStatement">]</span>; <span class="synStatement">then</span>
  <span class="synStatement">echo</span><span class="synConstant"> </span><span class="synStatement">&quot;</span><span class="synConstant">Require 2 arguments</span><span class="synStatement">&quot;</span><span class="synConstant"> 1</span><span class="synStatement">&gt;</span>&amp;<span class="synConstant">2</span>
  <span class="synStatement">exit</span> <span class="synConstant">1</span>
<span class="synStatement">fi</span>

<span class="synIdentifier">PROCESS_NAME</span>=<span class="synPreProc">$1</span>
<span class="synIdentifier">USER</span>=<span class="synPreProc">$2</span>

<span class="synComment"># pgrep でシェルスクリプト自身のプロセスがマッチしてしまうため `grep -v` で除外する</span>
<span class="synComment"># CentOS 6 では pgrep に -a オプションがないため注意</span>
<span class="synComment">#</span>
<span class="synComment"># 複数のプロセスが見つかっても無視する</span>
<span class="synIdentifier">PROCESS</span>=<span class="synPreProc">$(</span><span class="synSpecial">pgrep -f -a -u </span><span class="synStatement">&quot;</span><span class="synPreProc">${USER}</span><span class="synStatement">&quot;</span><span class="synSpecial"> </span><span class="synStatement">&quot;</span><span class="synPreProc">${PROCESS_NAME}</span><span class="synStatement">&quot;</span><span class="synSpecial"> | </span><span class="synStatement">grep</span><span class="synSpecial"> -v </span><span class="synStatement">&quot;</span><span class="synPreProc">$0</span><span class="synStatement">&quot;</span><span class="synSpecial"> | head </span><span class="synConstant">-1</span><span class="synSpecial"> | cut -f </span><span class="synConstant">1</span><span class="synSpecial"> -d </span><span class="synStatement">'</span><span class="synConstant"> </span><span class="synStatement">'</span><span class="synPreProc">)</span>

<span class="synStatement">if [</span> <span class="synStatement">-z</span> <span class="synStatement">&quot;</span><span class="synPreProc">${PROCESS}</span><span class="synStatement">&quot;</span> <span class="synStatement">]</span>; <span class="synStatement">then</span>
  <span class="synStatement">echo</span><span class="synConstant"> </span><span class="synStatement">&quot;</span><span class="synPreProc">${PROCESS_NAME}</span><span class="synConstant"> does not exists</span><span class="synStatement">&quot;</span><span class="synConstant"> 1</span><span class="synStatement">&gt;</span>&amp;<span class="synConstant">2</span>
  <span class="synStatement">exit</span> <span class="synConstant">1</span>
<span class="synStatement">fi</span>

<span class="synStatement">ls</span> /proc/<span class="synStatement">&quot;</span><span class="synPreProc">${PROCESS}</span><span class="synStatement">&quot;</span>/fd/ | wc <span class="synSpecial">-l</span>
</pre>




<pre class="code lang-sh" data-lang="sh" data-unlink><span class="synComment">#!/bin/bash</span>

<span class="synStatement">if [</span> <span class="synPreProc">$#</span> <span class="synStatement">-ne</span> <span class="synConstant">3</span> <span class="synStatement">]</span>; <span class="synStatement">then</span>
  <span class="synStatement">echo</span><span class="synConstant"> </span><span class="synStatement">&quot;</span><span class="synConstant">Require 3 arguments</span><span class="synStatement">&quot;</span><span class="synConstant"> 1</span><span class="synStatement">&gt;</span>&amp;<span class="synConstant">2</span>
  <span class="synStatement">exit</span> <span class="synConstant">1</span>
<span class="synStatement">fi</span>

<span class="synIdentifier">METRIC_NAME</span>=<span class="synPreProc">$1</span>
<span class="synIdentifier">VARUE</span>=<span class="synPreProc">$2</span>
<span class="synIdentifier">METRIC_TYPE</span>=<span class="synPreProc">$3</span>

<span class="synStatement">echo</span><span class="synConstant"> -n </span><span class="synStatement">&quot;</span><span class="synPreProc">${METRIC_NAME}</span><span class="synConstant">:</span><span class="synPreProc">${VARUE}</span><span class="synConstant">|</span><span class="synPreProc">${METRIC_TYPE}</span><span class="synStatement">&quot;</span><span class="synConstant"> </span>| nc <span class="synSpecial">-u</span> <span class="synConstant">-4</span> localhost <span class="synConstant">8125</span>
</pre>




<pre class="code" data-lang="" data-unlink>$ crontab -l
* * * * * /path/to/send-to-dogstatsd.sh open_file_descriptors.puma_cluster_worker $(/path/to/get-open-fd.sh &#34;puma: cluster worker&#34; dev) g &gt; /dev/null</pre>

]]></description>
            <enclosure url="https://cdn.user.blog.st-hatena.com/default_entry_og_image/116461321/1514251518718655" length="0" type="image//default_entry_og_image/116461321/1514251518718655"/>
        </item>
        <item>
            <title><![CDATA[AirMac Extreme から Buffalo のルータに変えたらインターネット速度が 45 倍以上になった]]></title>
            <link>https://masutaka.net/2018-04-30-1/</link>
            <guid>https://masutaka.net/2018-04-30-1/</guid>
            <pubDate>Mon, 30 Apr 2018 00:00:00 GMT</pubDate>
            <description><![CDATA[TL;DR プロバイダは @nifty、ルータを交換しただけでプロバイダとの契
約は結果的に変える必要なかった。あと、デメリットもあるよ。
Before 先月までとにかく遅かったです。Download が 1 Mbps の時もありました&hellip;。
loading...
   if (localStorage.getItem("pref-theme") === "light") { const elements = document.getElementsByClassName('twitter-tweet'); for (let i = 0; i  AirMac Extreme を使ってました。Time Machine 便利ですからね。
 After めちゃめちゃ速くなりました。ほぼ 100 Mbps 以上をキープしています。
loading...
   if (localStorage.getItem("pref-theme") === "light") { const elements = document.getElementsByClassName('twitter-tweet'); for (let i = 0; i  BUFFALO の WXR-1901DHP3 を購入し、手順通りにセットアップしただけです（※）。
 セットアップの時に @nifty の ID とパスワードを聞かれなかったのに、]]></description>
        </item>
        <item>
            <title><![CDATA[Twitter クライアントを Tweetbot に変えた]]></title>
            <link>https://masutaka.net/2018-03-23-1/</link>
            <guid>https://masutaka.net/2018-03-23-1/</guid>
            <pubDate>Fri, 23 Mar 2018 00:00:00 GMT</pubDate>
            <description><![CDATA[今更ですが、Twitter クライアントを公式 から Tweetbot に変更しました。
デフォルト厨なので、今までは頑張って Chrome で Twitter を見てました。
こんな理由からです。
 未読位置を覚えているのがしんどい 未読位置まで移動するのがしんどい 溜まった未読位置から読むのに Chrome だと重すぎるので Firefox 開くのがしんどい  iOS 版も公式アプリ から Tweetbot に変更しました。
iCloud を使って、未読位置を macOS と iOS で同期してくれるのが大変
ありがたいです。公式アプリはスリープから復帰すると、リストから強制
的にホームに戻ってしまうのが最悪でした。
未読管理はどこまで正確なのかは少し気になります。
ストリーミング機能もだいぶ良いですね。twittering-mode で便利だった
イメージがあります。
Twitter が以前サードパーティの締め出しをした時、各 Tweet のクライ
アント名が分からなくなりましたが、Tweetbot では表示されていました。
API からはまだ取れたのですね。
逆に公式のほうが良かった点も挙げておきます。
 IFTTT などの短縮 URL を展開されてサマリを表示してくれる 各 Tweet の詳細を見ないで Like 数 Retweet 数が分かる 投票？そんなのありましたっけ？  iOS 版は特に良かったことはないような。
Android は Twitter の使用頻度が低いので、公式アプリを入れています。
今までの Twitter クライアントの変遷はこんな感じです。
TwitterFox → twittering-mode → Hootsuite → twitter.]]></description>
        </item>
        <item>
            <title><![CDATA[『ジョイ・インク 役職も部署もない全員主役のマネジメント』を読んだ]]></title>
            <link>https://masutaka.net/2018-03-19-1/</link>
            <guid>https://masutaka.net/2018-03-19-1/</guid>
            <pubDate>Mon, 19 Mar 2018 00:00:00 GMT</pubDate>
            <description><![CDATA[会社の若者がオススメしていたので、サラッと読んでみた。
つもりが、一ヶ月近くかかってしまった&hellip;。
ペアプロを始めとした XP（エクストリーム・プログラミング）を体現し
ているメンローイノベーションズ のお話。著者は CEO の Richard
Sheridan 氏。
ソニックガーデン みたいな受託の会社なのかな？臓器移植情報システムや
ディーゼルエンジンの分析システム（？）など、内容は多岐にわたってい
るみたい。
とにかくアナログアナログアナログと言った感じで、デジタルツールはエ
ディタしかないのでは？という感想さえ覚えた。
本の中では Slack や GitHub の話は一切出てこない。メールやチャット
は使っていないっぽくて、全部口頭（本書では「高速音声技術」と名付け
ている）らしい。GitHub も使ってないのかな。VCS は何使っているんだ
ろう？
https://github.com/menloinnovations を見つけたが、リポジトリはなかった。
まあでも原著は 2013 年に出版されたらしいから、だいぶ変わったでしょ？
と思ったけど、今もだいたい同じみたい。マジか。
ジョイ・インク (Joy, inc.) のメンローイノベーションズに行ってきた - kawaguti’s diary ペアプロを毎日やるって、どういうメンタルなんだろう？ 私はチームが
出来たての頃はコミュニケーションのために意識してペアプロをやるけど、
その後はほぼやらないなー。めっちゃ疲れるんだよね&hellip;。
ペアプロやっているとチャットを見る時間はなくなりがちだから、逆に相
性が良いのだろうか。アラートやデプロイ通知とかどうしているんだろう？
はぇ〜という感想しかなくて、正直参考にならなかった。
たぶん、ビジネスモデルとセットで考えないと、とてもじゃないけど同じ
ことは出来ないと思う。
ただ、スキルより文化を重視する点は大いに賛同した。採用面接はするこ
ともされたこともあるけど、スキルを重視しがちなんだよね。でも本当に
大事なのは会社の文化と合うかどうか。でもそこに全振りは強いな&hellip;。
国内で同じもしくは、似たことをやっている会社はあるのかしら？
以下、読書メモ。Kindle なのでページ番号じゃなくてロケーション番号。
 L921
ケアリーは、自分はソフトウェアプログラマーだと言った。
 分かる。私も Rubyist などと言わないようにしている。
 L1001
メンローに来て日の浅いメンバーは、一日八時間仕事すると疲れ切ってしまう。
 ﾃﾞｽﾖﾈｰ。最近はソロプロ（？）してても疲れ切っているけど。
 L1070]]></description>
        </item>
        <item>
            <title><![CDATA[JAWS DAYS 2018 に行ってきた]]></title>
            <link>https://blog.tsub.me/post/jaws-days-2018/</link>
            <guid>https://blog.tsub.me/post/jaws-days-2018/</guid>
            <pubDate>Sat, 17 Mar 2018 06:16:55 GMT</pubDate>
            <description><![CDATA[<p>社内勉強会の準備などで忙しく、レポートを書くのが遅れてしまいましたが、先週の 03/10 (土) に <a href="https://jawsdays2018.jaws-ug.jp/">JAWS DAYS 2018</a> へ行ってきました。</p>

<p><img src="https://gyazo.com/5dafdbb66c5c6fd5a78aafeb83bd49c8.png" alt="image" /></p>

<p>今回が初参加でしたが、AWS ユーザーグループのお祭りという感じですごく盛り上がっていて楽しいイベントでした。</p>

<p>会社の同僚も 4 人ぐらい参加してました。</p>

<p>自分が参加したセッションと聞いた感想やメモをつらつら書いていきます。</p>

<p>(ただし Keynote は省きます)</p>

<p></p>]]></description>
        </item>
        <item>
            <title><![CDATA[JAWS DAYS 2018 に行ってきた #jawsdays #jawsdays2018]]></title>
            <link>https://masutaka.net/2018-03-11-1/</link>
            <guid>https://masutaka.net/2018-03-11-1/</guid>
            <pubDate>Sun, 11 Mar 2018 00:00:00 GMT</pubDate>
            <description><![CDATA[https://jawsdays2018.jaws-ug.jp 去年 [2017-03-12-1] に引き続き、２回目の参加です。去年はなかった機
械学習のセッションが目立ちました。IoT のセッションも増えてました。
以下、自分用のメモです。
[DeepDive] コンテナでウェイウェイ（仮）  西谷さんが基本的なお話をして、Calvin さんが大規模事例を紹介、とい
う流れだった。
by 西谷圭介さん TODO: 資料が公開されたらここに貼る
西谷圭介さん／アマゾン ウェブ サービス ジャパン株式会社 技術統括本部 シニアソリューションアーキテクト
ECS と Fargate の基本的なお話。
今までの稼働実績を元に数ヶ月前に ECS と Fargate の SLA が 99.99%
に引き上げられたらしい。
これか。
Amazon Compute サービスレベルアグリーメントを Amazon ECS および AWS Fargate に拡張 by Calvin French-Owen さん TODO: 資料が公開されたらここに貼る
Calvin French-Owen さん／米国 segment.io社, CTO and Co-Founder​
segment.io 社の事例。そうとう規模が大きいらしい。
ちょっと前だけど TechCrunch の記事見つけた。
複数（20あまり）のアクセス分析サービスのAPIを簡単に呼び出せるSegment.io｜TechCrunch Japan CPU や Memory Utilization によって Auto Scale Out/In する設定にし]]></description>
        </item>
        <item>
            <title><![CDATA[m3.medium のインスタンスの CPU 負荷が高かったため t2.medium へ移行した]]></title>
            <link>https://developer.feedforce.jp/entry/2018/03/02/155020</link>
            <guid>https://developer.feedforce.jp/entry/2018/03/02/155020</guid>
            <pubDate>Fri, 02 Mar 2018 06:50:20 GMT</pubDate>
            <description><![CDATA[<p>こんにちは、エンジニアの <a href="http://blog.hatena.ne.jp/tsub511/" class="hatena-id-icon"><img src="https://cdn.profile-image.st-hatena.com/users/tsub511/profile.png" width="16" height="16" alt="" class="hatena-id-icon">id:tsub511</a> です。
最近頭痛がするのでヨガを始めましたが、効果が出ているのかよく分かりません。</p>

<p>今回は m3.medium のインスタンスの CPU 負荷が高かったため t2.medium へ移行したら解決した話をします。</p>

<h2>m3.medium のインスタンスの CPU 負荷が高かった</h2>

<p>年始あたりから、週に数回ほど決まった時間に Mackerel でアラートが出ていました。</p>

<p><span itemscope itemtype="http://schema.org/Photograph"><img src="https://cdn-ak.f.st-hatena.com/images/fotolife/t/tsub511/20180302/20180302143106.png" alt="f:id:tsub511:20180302143106p:plain" title="f:id:tsub511:20180302143106p:plain" class="hatena-fotolife" itemprop="image"></span></p>

<p>CPU の Steal 値が異常に高く、全体としての使用率が 90 % を超えていました。</p>

<p>ずっと原因が分からず、最初は Meltdown と Spectre のパッチを適用した関係で性能が低下したんじゃないか、などを疑っていました。</p>

<p>しかし、ある時全く別の作業をしていたときに別のロールのインスタンスで同様に CPU 負荷が上がり、どちらも <code>m3.medium</code> というインスタンスタイプが共通していたことからなんとなくググってみたところ、以下の記事に辿り着きました。</p>

<p><iframe src="https://hatenablog-parts.com/embed?url=http%3A%2F%2Ftoritori0318.hatenadiary.jp%2Fentry%2F20140312%2F1394634304" title="microインスタンスはlimitかけると大きくパフォーマンスが向上する（※再追記あり） - アルパカDiary Pro" class="embed-card embed-blogcard" scrolling="no" frameborder="0" style="display: block; width: 100%; height: 190px; max-width: 500px; margin: 10px 0px;"></iframe><cite class="hatena-citation"><a href="http://toritori0318.hatenadiary.jp/entry/20140312/1394634304">toritori0318.hatenadiary.jp</a></cite></p>

<p>どうやら、<code>m3.medium</code> というインスタンスタイプのみ CPU の Steal が発生しやすいようです。</p>

<p>他にも同様の報告をしている記事をいくつか見つけました。</p>

<ul>
<li><a href="https://forums.aws.amazon.com/thread.jspa?threadID=146585">https://forums.aws.amazon.com/thread.jspa?threadID=146585</a></li>
<li><a href="http://techblog.bonobos.com/ec2/sysadmin/devops/2014/10/02/the-m3.medium-is-terrible.html">High CPU steal on EC2 m3.medium &ndash; Bonobos Tech Blog</a></li>
</ul>


<p>情報が 2014 年と古いですが、現に同様の事象が発生しているため、当時と変わっていない可能性が高いです。</p>

<p>そのため、インスタンスタイプを変更することを検討しました。</p>

<h2>他のインスタンスタイプを検討</h2>

<p><code>m3.medium</code> から別のインスタンスタイプに変更するに辺り、どのインスタンスタイプを選択するか、まずはコスト面で比較しました。</p>

<p><span itemscope itemtype="http://schema.org/Photograph"><img src="https://cdn-ak.f.st-hatena.com/images/fotolife/t/tsub511/20180302/20180302145249.png" alt="f:id:tsub511:20180302145249p:plain" title="f:id:tsub511:20180302145249p:plain" class="hatena-fotolife" itemprop="image"></span></p>

<p><iframe src="https://hatenablog-parts.com/embed?url=https%3A%2F%2Fcalculator.s3.amazonaws.com%2Findex.html" title="Amazon Web Services Simple Monthly Calculator" class="embed-card embed-webcard" scrolling="no" frameborder="0" style="display: block; width: 100%; height: 155px; max-width: 500px; margin: 10px 0px;"></iframe><cite class="hatena-citation"><a href="https://calculator.s3.amazonaws.com/index.html">calculator.s3.amazonaws.com</a></cite></p>

<p>順当に行けば <code>m4</code> ファミリーが妥当なところですが、<code>m4</code> ファミリーは medium サイズは提供していないため、費用がそれなりに増えてしまいます。</p>

<p>この中で、<code>m3.medium</code> よりも安い <code>t2.medium</code> に目を付けました。</p>

<p><code>t2.medium</code> は <code>m3.medium</code> に比べると、 vCPU が 1 コア増え、メモリも 0.25 GB 増える上に料金が安くなるというかなりお得なインスタンスタイプです。</p>

<p><strong><code>m3.medium</code></strong></p>

<blockquote><table>
<thead>
<tr>
<th>インスタンスファミリー </th>
<th> インスタンスタイプ </th>
<th> プロセッサアーキテクチャ </th>
<th> vCPU </th>
<th> メモリ (GiB) </th>
<th> インスタンスストレージ（GB） </th>
<th> EBS 最適化利用 </th>
<th> ネットワークパフォーマンス</th>
</tr>
</thead>
<tbody>
<tr>
<td>汎用 </td>
<td> m3.medium </td>
<td> 64 ビット </td>
<td> 1 </td>
<td> 3.75 </td>
<td> 1 x 4 </td>
<td> - </td>
<td> 中</td>
</tr>
</tbody>
</table>


<p><a href="https://aws.amazon.com/jp/ec2/previous-generation/">https://aws.amazon.com/jp/ec2/previous-generation/</a></p></blockquote>

<p><strong><code>t2.medium</code></strong></p>

<blockquote><table>
<thead>
<tr>
<th>モデル </th>
<th> vCPU </th>
<th> CPU クレジット/時 </th>
<th> メモリ (GiB) </th>
<th> ストレージ</th>
</tr>
</thead>
<tbody>
<tr>
<td>t2.medium </td>
<td> 2 </td>
<td> 24 </td>
<td> 4 </td>
<td> EBS のみ</td>
</tr>
</tbody>
</table>


<p><a href="https://aws.amazon.com/jp/ec2/instance-types/">https://aws.amazon.com/jp/ec2/instance-types/</a></p></blockquote>

<p>ただ、ここで安易に <code>t2.medium</code> を選択してはいけません。
<code>t2</code> ファミリーは「バースト可能パフォーマンスインスタンス」という特別な性質があります。</p>

<h2>T2 インスタンスについて</h2>

<p>T2 インスタンスについて、今までふわっとした理解しかなかったため、この機会に AWS のドキュメントをちゃんと読んでみました。</p>

<p><iframe src="https://hatenablog-parts.com/embed?url=https%3A%2F%2Fdocs.aws.amazon.com%2Fja_jp%2FAWSEC2%2Flatest%2FUserGuide%2Ft2-instances.html" title="T2 インスタンス - Amazon Elastic Compute Cloud" class="embed-card embed-webcard" scrolling="no" frameborder="0" style="display: block; width: 100%; height: 155px; max-width: 500px; margin: 10px 0px;"></iframe><cite class="hatena-citation"><a href="https://docs.aws.amazon.com/ja_jp/AWSEC2/latest/UserGuide/t2-instances.html">docs.aws.amazon.com</a></cite></p>

<p>結論から言うと、弊社のサービスの性質上、決まった時間に Sidekiq のジョブがまとまって大量に実行されるため、普段は CPU 使用率は低く、ある時間だけ CPU 使用率が高くなるというまさに T2 インスタンスがピッタリなケースでした。</p>

<h4>CPU クレジット</h4>

<p>T2 インスタンスには <a href="https://docs.aws.amazon.com/ja_jp/AWSEC2/latest/UserGuide/t2-credits-baseline-concepts.html">CPU クレジット</a>という概念があります。</p>

<p><iframe src="https://hatenablog-parts.com/embed?url=https%3A%2F%2Fdocs.aws.amazon.com%2Fja_jp%2FAWSEC2%2Flatest%2FUserGuide%2Ft2-credits-baseline-concepts.html" title="CPU クレジットおよびベースラインパフォーマンス - Amazon Elastic Compute Cloud" class="embed-card embed-webcard" scrolling="no" frameborder="0" style="display: block; width: 100%; height: 155px; max-width: 500px; margin: 10px 0px;"></iframe><cite class="hatena-citation"><a href="https://docs.aws.amazon.com/ja_jp/AWSEC2/latest/UserGuide/t2-credits-baseline-concepts.html">docs.aws.amazon.com</a></cite></p>

<p>1 CPU クレジットは 100 % の CPU 使用率を 1 分間稼働させることができます。</p>

<p><code>t2.medium</code> は CPU クレジットが 1 時間あたり 24 なので、100 % の CPU 使用率を 24 分間、あるいは 50 % の CPU 使用率を 48 分間、40 % の CPU 使用率なら 60 分間稼稼働させることができることになります。(ただし、<code>t2.medium</code> は vCPU が 2 コアなので、実際には 20 % の CPU 使用率で 60 分間の稼働)</p>

<p>実際の CPU 使用率は平均で 20 % 以下に収まっていることが多い (たまにスパイクはする) ので、CPU クレジットが 24 ならまず問題ないです。</p>

<p><span itemscope itemtype="http://schema.org/Photograph"><img src="https://cdn-ak.f.st-hatena.com/images/fotolife/t/tsub511/20180302/20180302150357.png" alt="f:id:tsub511:20180302150357p:plain" title="f:id:tsub511:20180302150357p:plain" class="hatena-fotolife" itemprop="image"></span></p>

<p>この 40 % (20 %) という値を<a href="https://docs.aws.amazon.com/ja_jp/AWSEC2/latest/UserGuide/t2-credits-baseline-concepts.html#baseline_performance">ベースラインパフォーマンス</a>と呼び、これを超えて CPU を使用することを「バースト」と呼びます。</p>

<p>また、ベースラインパフォーマンスよりも CPU 使用率が下回っていた場合、クレジットバランスというものに余分な CPU クレジットが保存されます。
クレジットバランスに保存された CPU クレジットは、CPU 負荷がベースラインパフォーマンスを上回った時に消費されます。</p>

<p>つまり、余分な CPU クレジットは蓄積されて後で使うことができるということになります (ただし <code>t2.medium</code> の最大クレジットバランスは 576)。</p>

<p>注意点としてはインスタンスを停止するとクレジットバランスに貯まった CPU クレジットは破棄されるというところでしょうか。</p>

<h4>T2 Unlimited</h4>

<p>ただ、T2 インスタンスを使う以上、気にしなければいけないのは CPU クレジットがなくなった場合は CPU のバーストができなくなるということです。</p>

<p>CPU のバーストができないということはつまり、ベースラインパフォーマンス (<code>t2.medium</code> の場合は 20 %) 以上の CPU が使えなくなるということになります。</p>

<p>ただし、去年の Re:Invent にて発表された <a href="https://docs.aws.amazon.com/ja_jp/AWSEC2/latest/UserGuide/t2-unlimited.html">T2 Unlimited</a> という機能を有効にすることで CPU クレジットがなくなった場合でも自動的に CPU クレジットを追加され、CPU 使用に制限がかからなくなります。</p>

<p><iframe src="https://hatenablog-parts.com/embed?url=https%3A%2F%2Fdocs.aws.amazon.com%2Fja_jp%2FAWSEC2%2Flatest%2FUserGuide%2Ft2-unlimited.html" title="T2 無制限 - Amazon Elastic Compute Cloud" class="embed-card embed-webcard" scrolling="no" frameborder="0" style="display: block; width: 100%; height: 155px; max-width: 500px; margin: 10px 0px;"></iframe><cite class="hatena-citation"><a href="https://docs.aws.amazon.com/ja_jp/AWSEC2/latest/UserGuide/t2-unlimited.html">docs.aws.amazon.com</a></cite></p>

<p>具体的には、T2 Unlimited を有効にすると、CPU クレジット及びクレジットバランスがなくなった場合、余剰クレジットというものから消費されるようになります。</p>

<p>最初の余剰クレジットは 24 時間で獲得できるクレジットの合計値となります。</p>

<p>例えば <code>t2.medium</code> の場合、1 時間辺りの獲得クレジットは 24 なので 24 時間で 576 のクレジットが余剰クレジットになります。</p>

<p>この 24 時間分の余剰クレジットは前借りのようなもので、消費した分だけ次のクレジット獲得時に余剰クレジットの支払いに使用されます。</p>

<p>24 時間分の余剰クレジットまで全て使い切ってしまった場合でも、その後に消費した余剰クレジット分は追加で課金され、CPU のバーストは継続することが可能です。</p>

<p>つまり、T2 Unlimited を有効にすれば T2 インスタンス特有の CPU クレジットの枯渇による CPU 使用制限の問題が解決されることになります。</p>

<p>ただし、常にバーストし続けて追加でお金が発生し続けるような場合は、T2 インスタンスでなく普通にインスタンスタイプを利用したほうが懸命ですね。</p>

<h4>CPU クレジットの監視</h4>

<p>T2 Standard (非 T2 Unlimited) であっても、T2 Unlimited であっても、普段からどの程度 CPU がバーストしているかは監視しておいたほうが良いです。</p>

<p>そのために、CloudWatch で <code>CPUCreditUsage</code>, <code>CPUCreditBalance</code>, <code>CPUSurplusCreditBalance</code>, <code>CPUSurplusCreditsCharged</code> という 4 つのメトリクスが提供されています。</p>

<p>個人的には T2 Unlimited の場合、基本的には <code>CPUSurplusCreditBalance</code> と <code>CPUSurplusCreditsCharged</code> を監視しておけば良いと思います。</p>

<ul>
<li><code>CPUSurplusCreditBalance</code> は消費された 24 時間分の余剰クレジット数</li>
<li><code>CPUSurplusCreditsCharged</code> は 24 時間分の余剰クレジットを使い切った後で更に消費される余剰クレジット数</li>
</ul>


<p>実際の監視には Datadog を利用しました (現在監視ツールを Datadog へ移行途中なため)。</p>

<p><span itemscope itemtype="http://schema.org/Photograph"><img src="https://cdn-ak.f.st-hatena.com/images/fotolife/t/tsub511/20180302/20180302153003.png" alt="f:id:tsub511:20180302153003p:plain" title="f:id:tsub511:20180302153003p:plain" class="hatena-fotolife" itemprop="image"></span></p>

<p>閾値はまだ感覚を掴めていないため、とりあえず厳しめにしてあります。</p>

<h2><code>m3.medium</code> から <code>t2.medium</code> へインスタンスタイプを変更する</h2>

<p>弊社のサービスのインフラでは、Blue Green Deployment が可能な体制が整っているため、インスタンスタイプの変更は非常に簡単です。</p>

<p>新しい環境のインスタンスは <code>t2.medium</code> で作成し、ELB からコネクションが流れるようになったら、古い環境のインスタンスを削除するだけです。</p>

<p>ただ、EC2 の Launch Configuration + Auto Scaling Group を使っていたため、少し工夫が必要でした。</p>

<p>T2 Unlimited の有効化は Launch Configuration ではサポートされていませんでした。</p>

<blockquote><p>Auto Scaling グループで T2 インスタンスを無制限に設定して起動するには起動テンプレートを使用する必要があります。起動設定では、T2 インスタンスを無制限として起動することがサポートされていません。</p>

<p><a href="https://docs.aws.amazon.com/ja_jp/AWSEC2/latest/UserGuide/t2-unlimited.html#t2-auto-scaling-grp">https://docs.aws.amazon.com/ja_jp/AWSEC2/latest/UserGuide/t2-unlimited.html#t2-auto-scaling-grp</a></p></blockquote>

<p>Launch Template ならサポートされているものの、今から移行するのも大変ですし、何より Terraform がまだ Launch Template をサポートしていませんでした (2018/03/02 時点)。</p>

<p><iframe src="https://hatenablog-parts.com/embed?url=https%3A%2F%2Fgithub.com%2Fterraform-providers%2Fterraform-provider-aws%2Fissues%2F2505" title="Add support for EC2 Launch Templates · Issue #2505 · terraform-providers/terraform-provider-aws" class="embed-card embed-webcard" scrolling="no" frameborder="0" style="display: block; width: 100%; height: 155px; max-width: 500px; margin: 10px 0px;"></iframe><cite class="hatena-citation"><a href="https://github.com/terraform-providers/terraform-provider-aws/issues/2505">github.com</a></cite></p>

<p>どうしようと困っていたところ、以下の記事に助けられました。</p>

<p><iframe src="https://hatenablog-parts.com/embed?url=https%3A%2F%2Fdev.classmethod.jp%2Fcloud%2Faws%2Fautoscale-t2-unlimited%2F" title="T2 Unlimited(T2無制限)オプションをオートスケール環境で利用してみた | Developers.IO" class="embed-card embed-webcard" scrolling="no" frameborder="0" style="display: block; width: 100%; height: 155px; max-width: 500px; margin: 10px 0px;"></iframe><cite class="hatena-citation"><a href="https://dev.classmethod.jp/cloud/aws/autoscale-t2-unlimited/">dev.classmethod.jp</a></cite></p>

<p>EC2 User Data を使って、インスタンス起動時に自身に対して T2 Unlimited を有効化する、という方法です。</p>

<p>自分では全く思いつきませんでしたが、User Data も Terraform を使って管理できるのでかなりシンプルに実現できました。</p>

<p>実際には以下の User Data を利用しました (CentOS を使っているため <code>$ yum install aws-cli</code> ができない)。</p>

<pre class="code" data-lang="" data-unlink>#!/bin/bash

set -x

# Install aws-cli

curl -L https://bootstrap.pypa.io/get-pip.py | python
pip install awscli --upgrade

# Enable T2 Unlimited

INSTANCE_ID=$(curl http://169.254.169.254/latest/meta-data/instance-id)
REGION=$(curl -s http://169.254.169.254/latest/meta-data/placement/availability-zone | sed -e &#39;s/.$//&#39;)

aws --region &#34;${REGION}&#34; ec2 describe-instance-credit-specifications --instance-id &#34;${INSTANCE_ID}&#34;
aws --region &#34;${REGION}&#34; ec2 modify-instance-credit-specification --instance-credit-specification InstanceId=&#34;${INSTANCE_ID}&#34;,CpuCredits=unlimited
aws --region &#34;${REGION}&#34; ec2 describe-instance-credit-specifications --instance-id &#34;${INSTANCE_ID}&#34;</pre>


<p>これで、Auto Scaling Group によって起動したインスタンスに対して自動的に T2 Unlimited が有効になりました。</p>

<h2>インスタンスタイプを <code>t2.medium</code> に変更した結果</h2>

<p>実際に <code>t2.medium</code> のインスタンスを稼働させた結果、同程度の負荷がかかった際の CPU の Steal 値はほぼ 0 になりました。</p>

<p><span itemscope itemtype="http://schema.org/Photograph"><img src="https://cdn-ak.f.st-hatena.com/images/fotolife/t/tsub511/20180302/20180302152028.png" alt="f:id:tsub511:20180302152028p:plain" title="f:id:tsub511:20180302152028p:plain" class="hatena-fotolife" itemprop="image"></span></p>

<p>ちなみに <code>t2.medium</code> は vCPU が 2 つあるため、グラフの最大値は 200 % になっています。</p>

<p>user 値が 90 % 程度なので、実質 CPU 使用率は 45 % 程度で、<code>m3.medium</code> の頃とほとんど性能は変わっていません。</p>

<p>また、その他にも 5 分間のロードアベレージも全体的に下がっていました。</p>

<p><span itemscope itemtype="http://schema.org/Photograph"><img src="https://cdn-ak.f.st-hatena.com/images/fotolife/t/tsub511/20180302/20180302153619.png" alt="f:id:tsub511:20180302153619p:plain" title="f:id:tsub511:20180302153619p:plain" class="hatena-fotolife" itemprop="image"></span></p>

<h2>まとめ</h2>

<ul>
<li><code>m3.medium</code> のインスタンスを使っていて CPU 負荷に悩まされている場合はインスタンスタイプを変更すると解決するかも</li>
<li>T2 インスタンスは適材適所で使えば費用を安く抑えられて非常に良い</li>
<li>T2 Unlimited によって CPU クレジットがなくなる問題が解決されて安心して T2 インスタンスを使用できるようになった</li>
<li>T2 Unlimited を Launch Configuration で有効化したい場合は User Data を使うと良い</li>
</ul>


<p><code>m3.medium</code> が原因だったようで、解決して良かったです。日々のアラートに悩まされなくて良くなりました。</p>
]]></description>
            <enclosure url="https://cdn-ak.f.st-hatena.com/images/fotolife/t/tsub511/20180302/20180302143106.png" length="0" type="image/png"/>
        </item>
        <item>
            <title><![CDATA[続・Rails 5.2 開発環境を Docker で構築する]]></title>
            <link>https://developer.feedforce.jp/entry/2018/02/25/234556</link>
            <guid>https://developer.feedforce.jp/entry/2018/02/25/234556</guid>
            <pubDate>Sun, 25 Feb 2018 14:45:56 GMT</pubDate>
            <description><![CDATA[<p>どうも、バックエンドエンジニアのサトウリョウスケです ✌︎('ω')✌︎</p>

<p>前回の記事では Docker を使って Rails 5.2 の環境構築をしました。
現在も引き続き Docker についてのお話をします。</p>

<p><iframe src="https://hatenablog-parts.com/embed?url=http%3A%2F%2Fdeveloper.feedforce.jp%2Fentry%2F2018%2F02%2F11%2F140012" title="Rails 5.2 開発環境を Docker で構築する - Feedforce Developer Blog" class="embed-card embed-blogcard" scrolling="no" frameborder="0" style="display: block; width: 100%; height: 190px; max-width: 500px; margin: 10px 0px;"></iframe><cite class="hatena-citation"><a href="http://developer.feedforce.jp/entry/2018/02/11/140012">developer.feedforce.jp</a></cite></p>

<p>その後も幾つか手を加え続けておりまして、現在この記事を書いている時点で <code>v1.3.0</code> になりました 🎉
明らかに初回のナンバリングを間違えていた感がありますが、少しずつインクリメントさせていく楽しみを実感できて良いです 笑</p>

<h2>前回からの変更点について</h2>

<p>さて、前回の記事は <code>v1.0.0</code> 時点のものでしたが、ここで <code>v1.3.0</code> になった現在の <code>Dockerfile</code> を見てみましょう。</p>

<pre class="code" data-lang="" data-unlink># Dockerfile
FROM ryz310/rails-on-docker</pre>


<p>なんと！たったの１行ぽっちです！＼＼\٩( 'ω' )و //／／</p>

<p>何言ってんだコイツと思われそうですが、これはどういう事かというと、大部分を <code>base/Dockerfile</code> に移動したためです。</p>

<pre class="code" data-lang="" data-unlink># base/Dockerfile
FROM ruby:2.5
MAINTAINER ryz310@gmail.com

RUN apt-get update -qq &amp;&amp; apt-get install -y build-essential libpq-dev nodejs

WORKDIR /myapp
ENV BUNDLE_JOBS=32

ONBUILD ADD Gemfile /myapp/Gemfile
ONBUILD ADD Gemfile.lock /myapp/Gemfile.lock
ONBUILD RUN bundle install
ONBUILD ADD . /myapp</pre>


<p>この <code>base/Dockerfile</code> のイメージは <a href="https://hub.docker.com/r/ryz310/rails-on-docker/">僕のDocker Hub</a> に置いてあります。</p>

<p><code>ONBUILD</code> が付いたコマンドはこのイメージを継承したイメージで実行されるため、先ほどの <code>Dockerfile</code> には <code>FROM</code> しかありませんが、ビルドの際には以下の 4 つのコマンドが実行される事になります。</p>

<pre class="code" data-lang="" data-unlink>ADD Gemfile /myapp/Gemfile
ADD Gemfile.lock /myapp/Gemfile.lock
RUN bundle install
ADD . /myapp</pre>


<p>感覚としては、 <code>base/Dockerfile</code> で Rails の起動に必要なサーバー環境を構築して、 <code>Dockerfile</code> で Rails そのものを構築していくような感じです。
Rails の構築には RDS イメージなども必須となってきますので、それについては <code>docker-compose.yml</code> と組み合わせて構築していきます。</p>

<pre class="code" data-lang="" data-unlink># docker-compose.yml
version: &#39;3&#39;
services:
  db:
    image: mysql:5.7
    volumes:
      - mysql_data:/var/lib/mysql
    environment:
      MYSQL_ALLOW_EMPTY_PASSWORD: &#39;yes&#39;
    ports:
      - &#34;3306:3306&#34;
  web:
    build: .
    image: web_image
    command: bundle exec rails s -p 3000 -b &#39;0.0.0.0&#39;
    volumes:
      - .:/myapp
      - bundle:/usr/local/bundle
    ports:
      - &#34;3000:3000&#34;
    depends_on:
      - db
    environment:
      DB_HOST: db
  spring:
    image: web_image
    command: bundle exec spring server
    volumes:
      - .:/myapp
      - bundle:/usr/local/bundle
    tty: false
    stdin_open: false
    environment:
      DB_HOST: db
volumes:
  mysql_data:
  bundle:</pre>


<p>ここも <code>v1.0.0</code> の頃からいくつか変更がありまして、例えば <code>web</code> と <code>spring</code> で同じ内容になるように <code>v1.0.0</code> では YAML のエイリアスを使っていたのですが、 docker image で共有する方法に変えました。この定義の記述について少し補足します。</p>

<p><code>web</code> の定義で <code>build: .</code> と <code>image: web_image</code> と言う記述がありますが、これは Dockerfile をビルドして <code>web_image</code> というタグをつける、と言う振る舞いになります。一方、 <code>spring</code> の定義の <code>image: web_image</code> では <code>web_image</code> というタグが付いたイメージを使用する、という振る舞いになります。この辺はなんだかややこしいですね 😓</p>

<p>また、 <code>bundle:/usr/local/bundle</code> を volume に指定する事で、<code>bundle install</code> の内容を永続化するようにしてあります。これにより、<code>$ docker-compose run --rm web bundle install</code> というコマンドが有効になってくるので、Gemfile を更新した際に一から Build する必要がなくなります。
同様に、 MySQL も <code>mysql_data:/var/lib/mysql</code> を volume に指定する事で、テーブルの内容を永続化するようにしています。</p>

<h2>まとめ</h2>

<p><code>ONBUILD</code> を使用する事で、他の Rails アプリでも同じイメージを転用できるようになったのが一番の改善点ではないかと思います。</p>

<p>ただ、Rails アプリ側の事情で何か <code>$ apt-get install</code> を加えたくなった場合にどうするのか、という課題感があります。<code>base/Dockerfile</code> は汎用的な環境構築を意識しているので、あまり一般的でないインストールは行いたくありません。理想としては「子イメージ」で <code>$ apt-get install</code> させて、「孫イメージ」で今回のように Rails の構築をする構成が実現できれば良いのではないかと思いますが、 <code>ONBUILD</code> を「子イメージ」でスキップさせるとか出来るんでしょうか？</p>

<p>次回はこの辺について少し調べていければ、と思っています。</p>
]]></description>
            <enclosure url="https://cdn.user.blog.st-hatena.com/default_entry_og_image/116461321/1514251518718655" length="0" type="image//default_entry_og_image/116461321/1514251518718655"/>
        </item>
        <item>
            <title><![CDATA[201802 Twitter ポリシー変更]]></title>
            <link>https://developer.feedforce.jp/entry/2018/02/22/210931</link>
            <guid>https://developer.feedforce.jp/entry/2018/02/22/210931</guid>
            <pubDate>Thu, 22 Feb 2018 12:09:31 GMT</pubDate>
            <description><![CDATA[<p>ソーシャルPLUS 開発チーム <a href="http://blog.hatena.ne.jp/tmd45/" class="hatena-id-icon"><img src="https://cdn.profile-image.st-hatena.com/users/tmd45/profile.png" width="16" height="16" alt="" class="hatena-id-icon">id:tmd45</a> です。本日こんなニュースが Twitter 上で話題になっていました。</p>

<ul>
<li><a href="http://news.livedoor.com/article/detail/14336587/">ツイッター社、複数アカウントから同じ内容の投稿禁止 - ライブドアニュース</a></li>
</ul>


<p>公式発表は現地時間 2018/2/21 の開発者向けブログの記事のようです。</p>

<p><iframe src="https://hatenablog-parts.com/embed?url=https%3A%2F%2Fblog.twitter.com%2Fdeveloper%2Fen_us%2Ftopics%2Ftips%2F2018%2Fautomation-and-the-use-of-multiple-accounts.html" title="Automation and the use of multiple accounts" class="embed-card embed-webcard" scrolling="no" frameborder="0" style="display: block; width: 100%; height: 155px; max-width: 500px; margin: 10px 0px;"></iframe><cite class="hatena-citation"><a href="https://blog.twitter.com/developer/en_us/topics/tips/2018/automation-and-the-use-of-multiple-accounts.html">blog.twitter.com</a></cite></p>

<p>国内ニュースでは一般のユーザアカウント（そのユーザが spammer であるかどうかは区別せず）の発言がただ対象になるかのように見えますが、実際には <strong>Twitter App を介して複数アカウントにツイートや Retweets、Like などの拡散を実行させることを禁止する</strong> ようです。</p>

<p><u>ざっくり読み下してるので、もし読み違えている部分があればご指摘いただけると助かりますm(__)m</u></p>

<blockquote><p><strong>Do not (and do not allow your users to) simultaneously post identical or substantially similar content to multiple accounts.</strong> For example, your service should not permit a user to select several accounts they control from which to publish a given Tweet.</p></blockquote>

<p>たとえば、あなたのサービスのなかから何かシェアさせたいときに、シェア対象に複数の Twitter アカウントを指定できるような実装は許可されません。代わりに１つのアカウントで Tweet させ、それ以外のアカウントは Retweet を利用してシェアすることが推奨されます。</p>

<blockquote><p>Please note that bulk, aggressive, or very high-volume automated Retweeting is not permitted under the Automation Rules, and may be subject to enforcement actions.</p></blockquote>

<p>ただし自動化された異常に大量な Retweets も、Twitter 側の自動検知ルールにひっかかって執行対象になることがあるので注意とのこと。</p>

<blockquote><p><strong>Do not (and do not allow your users to) simultaneously perform actions such as Likes, Retweets, or follows from multiple accounts.</strong> For example, your service should not permit a user to select several accounts they control to follow a specified account.</p></blockquote>

<p>複数のユーザアカウントに Like, Retweets をさせるようにアプリケーションがユーザ（アカウント）を制御するのも禁止です。</p>

<blockquote><p><strong>The use of any form of automation (including scheduling) to post identical or substantially similar content, or to perform actions such as Likes or Retweets, across many accounts that have authorized your app (whether or not you created or directly control those accounts) is not permitted.</strong> For example, applications that coordinate activity across multiple accounts to simultaneously post Tweets with a specific hashtag (e.g. in an attempt to cause that topic to trend) are prohibited.</p></blockquote>

<p>Twitter App を、同一または類似したコンテンツを投稿するため、あるいは Like や Retweet などのアクションを実行するための自動化（スケジューリングを含む）に用いるのは許可されていません。その Twitter App を認可したユーザが App の作成者と関係あるかどうかにかかわらずです。</p>

<p>つまり拡散のために大量のユーザアカウントを用意し、拡散の自動化のために Twitter App で開発をすることは禁止されます。</p>

<p>このケースの例外として、以下のパターンが挙げられています。</p>

<blockquote><ul>
<li>While we continue to permit cross-posting outside information (such as weather alerts or RSS feeds) to Twitter using automation, you should only post this content to one account you control.</li>
<li>As a sole exception to this rule, applications that broadcast or share weather, emergency, or other public service announcements of broad community interest (for example, earthquake or tsunami alerts) are permitted to post this content across multiple accounts who have authorized an app.</li>
</ul>
</blockquote>

<ul>
<li>天気予報や RSS フィードなどを自動的に投稿するような利用は許可される。ただし自分で管理する１つのアカウントにのみ投稿すること</li>
<li>このルールの唯一の例外として、天気、緊急事態、地震・津波など広く公開されるべき公的な通知をするアプリケーションは、複数のアカウントに投稿することが許可されます</li>
</ul>


<p>アプリが複数のアカウントを選択して投稿、Like、Retweet など出来るようになっている場合は <strong>2018/3/23 までに新しいポリシーに準拠するよう変更する必要</strong> があります。これを守らない場合、Twitter App とアカウントを一時停止されます。</p>

<p>…ということで、普段気軽に拡散させるようなアプリを作っている開発者の方も、きちんと Twitter のアプリ開発ポリシーに目を通し、準拠するようにしましょう。</p>

<ul>
<li><a href="https://help.twitter.com/en/rules-and-policies/twitter-rules">The Twitter Rules</a></li>
<li><a href="https://help.twitter.com/en/rules-and-policies/twitter-automation">Automation rules</a></li>
</ul>


<p><a data-flickr-embed="true"  href="https://www.flickr.com/photos/158350039@N03/39031868345/in/photolist-22t7wBk-8LWciB-8LWbAc-VfJ6pq-UDofTg-io6XBu-bWbZFg-UW9FCr-boWxMe-Tyt6MS-pDHKLN-QPfuGA-wRS2iH-UACxC9-ZuCAMp-TbtXL7-PMiB5y-6jDjYC-8LZfx3-TeftSd-8LZdYJ-UTfxtJ-UDo5kx-pUS7z8-VdcMpV-D4Zjwy-UQgpcd-TVE4M7-6jDj1f-VoZPn1-UDocWK-UQUVvz-VhtKwa-UvEnyR-VboQx4-WmUBDj-TCRpVK-W1LF3V-VfozFR-USB1UL-UW8E84-pCGL7s-UDo1HT-TGDcJH-GzwSag-SX2w3X-SUgDrL-Tef91j-TytNLq-UAC6bA" title="the bird in the moon"><img src="https://farm5.staticflickr.com/4769/39031868345_8caf6bf7ea_b.jpg" width="1024" height="768" alt="the bird in the moon"></a><script async src="//embedr.flickr.com/assets/client-code.js" charset="utf-8"></script></p>
]]></description>
            <enclosure url="https://farm5.staticflickr.com/4769/39031868345_8caf6bf7ea_b.jpg" length="0" type="image/jpg"/>
        </item>
        <item>
            <title><![CDATA[Raspberry Pi Zero W を Prota Pi 化する方法まとめ]]></title>
            <link>https://masutaka.net/2018-02-12-1/</link>
            <guid>https://masutaka.net/2018-02-12-1/</guid>
            <pubDate>Mon, 12 Feb 2018 00:00:00 GMT</pubDate>
            <description><![CDATA[会社の留守電を自動的にセットする方法を考えていました。
ちょっと調べたら、MicroBot Push というものを発見。
用途の割に $49.99 は高価ですが、興味もあり購入しました。
iOS アプリ MicroBot を使い、Bluetooth 経由でボタンを押すことが出来
ました。
 この方法だと連携した iPhone を常に会社に置く必要がありますが、
Prota S というハブがあればそれを回避できるとのこと。
しかし、$89.99 はいくらなんでもこの用途にはお高い&hellip;。
ここで登場するのが Raspberry Pi。公式の情報 によると、Raspberry Pi
B, B+, 2, 3 を使って、Prota S 相当の Prota Pi を作れるらしい。
私が Raspberry Pi を買ったのははるか昔の 2013 年 11 月。
[2013-12-05-1] という記事も書いていました。Wikipedia の情報も照ら
し合わせると、どうやら Model B のようです。ただし、Prota OS デフォ
ルトで使える Wifi と Bluetooth のドングルが必要。
心が折れそうになりましたが、たまたま職場の同僚が Zero W を貸してく
れたため、これでチャレンジすることに。Zero W は $10 とお安い上に、
Wifi と Bluetooth も搭載されている、嘘みたいな機種です。]]></description>
        </item>
        <item>
            <title><![CDATA[Rails 5.2 開発環境を Docker で構築する]]></title>
            <link>https://developer.feedforce.jp/entry/2018/02/11/140012</link>
            <guid>https://developer.feedforce.jp/entry/2018/02/11/140012</guid>
            <pubDate>Sun, 11 Feb 2018 05:00:12 GMT</pubDate>
            <description><![CDATA[<p>どうも、バックエンドエンジニアのサトウリョウスケです ✌︎('ω')✌︎</p>

<p>僕が所属している <a href="https://socialplus.jp/">ソーシャルPLUS</a> チームでは Rails の開発環境を Docker で構築しています。
自分も日々お世話になっている Docker ですが、イチから Dockerfile 書いた事が無かったので、やってみました。</p>

<p>こちらのチュートリアルを参考にしています。</p>

<p><a href="http://docs.docker.jp/compose/rails.html">&#x30AF;&#x30A4;&#x30C3;&#x30AF;&#x30B9;&#x30BF;&#x30FC;&#x30C8;&#x30FB;&#x30AC;&#x30A4;&#x30C9;&#xFF1A;Docker Compose &#x3068; Rails &mdash; Docker-docs-ja 17.06.Beta &#x30C9;&#x30AD;&#x30E5;&#x30E1;&#x30F3;&#x30C8;</a></p>

<h1>やってみた✨</h1>

<p>早速ですがこちらが完成品の GitHub リポジトリになります。
<iframe src="https://hatenablog-parts.com/embed?url=https%3A%2F%2Fgithub.com%2Fryz310%2Frails-on-docker%2Ftree%2Fv1.0.0" title="ryz310/rails-on-docker" class="embed-card embed-webcard" scrolling="no" frameborder="0" style="display: block; width: 100%; height: 155px; max-width: 500px; margin: 10px 0px;"></iframe><cite class="hatena-citation"><a href="https://github.com/ryz310/rails-on-docker/tree/v1.0.0">github.com</a></cite></p>

<p>この記事は <code>v1.0.0</code> 時点で書いていますが、リポジトリは今後も更新されていく可能性があります。</p>

<h2>環境</h2>

<ul>
<li>Debian Stretch</li>
<li>Ruby 2.5.0</li>
<li>Rails 5.2.0.rc1</li>
<li>MySQL 5.7</li>
</ul>


<h2>つかいかた</h2>

<p>Rails 5.2 で環境構築したと言いましたが、リポジトリには Rails のソースコードが一切含まれていません。
これは <code>rails new</code> から Docker でやっていくためです。
以下に手順を示しますので、興味ある方はぜひ記事を読みながら一緒にやってみて下さい 🙏</p>

<h3>0. リポジトリをローカルにクローンする</h3>

<pre class="code" data-lang="" data-unlink>$ git clone https://github.com/ryz310/rails-on-docker.git</pre>


<h3>1. 以下のコマンドを実行する</h3>

<pre class="code" data-lang="" data-unlink>$ docker-compose run web rails new . --force --database=mysql --skip-bundle --skip-git</pre>


<p><code>rails new</code> によって必要なファイルがインストールされます。同時に Gemfile も Rails 用に更新されます。
残念ながらアプリ名は指定できないので、必要に応じて変更して下さい。</p>

<p>なお、後述の MySQL データの永続化のため MySQL のデータファイルを含めないようにリポジトリの方で <code>.gitignore</code> を用意しています。
そのため <code>--skip-git</code> を付けて Rails に <code>.gitignore</code> ファイルを作成させないようにしていますが、永続化が不用な場合はオプションを外して下さい。</p>

<h3>2. 更新された <code>Gemfile</code> で以下のコメントアウトを外す</h3>

<pre class="code" data-lang="" data-unlink># gem &#39;mini_racer&#39;, platforms: :ruby</pre>


<p>以前であれば <code>therubyracer</code> だったのですが、いつの間にか <code>mini_racer</code> に変わっていたのですね。</p>

<p><iframe src="https://hatenablog-parts.com/embed?url=https%3A%2F%2Ftechracho.bpsinc.jp%2Fhachi8833%2F2017_06_09%2F41039" title="週刊Railsウォッチ（20170609）ついにtherubyracerからmini_racerへ、注意しないとハマるgem、5.1でのVue.jsとTurbolinksの共存ほか" class="embed-card embed-webcard" scrolling="no" frameborder="0" style="display: block; width: 100%; height: 155px; max-width: 500px; margin: 10px 0px;"></iframe><cite class="hatena-citation"><a href="https://techracho.bpsinc.jp/hachi8833/2017_06_09/41039">techracho.bpsinc.jp</a></cite></p>

<p>TechRacho さんの週刊Railsウォッチにはいつもお世話になっております 🙏</p>

<h3>3. <code>$ docker-compose build</code> を実行する</h3>

<p>Gemfile を変更したので再読イメージを作り直します。</p>

<h3>4. <code>config/database.yml</code> を以下のように変更する</h3>

<pre class="code" data-lang="" data-unlink>default: &amp;default
  adapter: mysql2
  encoding: utf8
  pool: &lt;%= ENV.fetch(&#34;RAILS_MAX_THREADS&#34;) { 5 } %&gt;
  username: root
  password: xxxxxx # &lt;- ここを変更
  host: db # &lt;- ここを変更</pre>


<p>あくまでローカルの開発環境構築なのでパスワードを隠したりとかはしません。本番運用とかでやっちゃダメですよ！
MySQL の Root ユーザーのパスワードは <code>docker-compose.yml</code> で指定しています。必要に応じて書き換えて下さい。</p>

<pre class="code" data-lang="" data-unlink>  db:
    image: mysql:5.7
    volumes:
      - .mysql_data:/var/lib/mysql
    environment:
      MYSQL_ROOT_PASSWORD: xxxxxx # &lt;- ここ！</pre>


<h3>5. <code>$ docker-compose up</code> を実行する</h3>

<p>コンテナを起動させます。</p>

<h3>6. <code>$ docker-compose exec spring spring rake db:create</code> を実行する</h3>

<p>コンテナは起動していますが、Rails で使用する DB テーブルはまだ作成されていないので作成します。
何気に <code>spring</code> を使っている点に注目です。</p>

<h3>7. <a href="http://localhost:3000/">http://localhost:3000/</a> にアクセスして Rails が動いていることを確認</h3>

<p>ここまでの操作で Rails が正しく動作しているはずです。</p>

<p><span itemscope itemtype="http://schema.org/Photograph"><img src="https://cdn-ak.f.st-hatena.com/images/fotolife/r/ryz310/20180211/20180211110115.png" alt="f:id:ryz310:20180211110115p:plain" title="f:id:ryz310:20180211110115p:plain" class="hatena-fotolife" itemprop="image"></span><figcaption>Yay! You’re on Rails!</figcaption></figure></p>

<h1>ポイント</h1>

<h2><code>bundle install</code> が毎回走らないように工夫している</h2>

<p>Dockerfile で WORKDIR に <code>/tmp</code> ディレクトリを指定しているところがポイントです。
これをせずに <code>WORKDIR /myapp</code> からの <code>ADD . /myapp</code> をやってしまうと、 Rails のコードに変更がある度に <code>bundle install</code> が最初から実行されてしまいます。
Gemfile と Gemfile.lock を <code>/tmp</code> に格納することで、これらのファイルに変更がない限り <code>bundle install</code> が実行されないようになっています。</p>

<pre class="code" data-lang="" data-unlink>WORKDIR /tmp
ADD Gemfile Gemfile
ADD Gemfile.lock Gemfile.lock
RUN bundle install
WORKDIR /myapp
ADD . /myapp</pre>


<p>参考: <a href="https://easyramble.com/rails-development-on-docker.html#crayon-5a7fa9761d5ba051809395">Docker&#x3067;Rails + MySQL&#x306E;&#x958B;&#x767A;&#x74B0;&#x5883;&#x3092;&#x69CB;&#x7BC9; | EasyRamble</a></p>

<h2><code>spring</code> に対応</h2>

<p>Rails で開発する上で欠かせない <code>spring</code> も利用できるようにしてあります。
前述の <code>rake db:create</code> の時にも出てきましたが、<code>$ docker-compose exec spring spring rails console</code> のようにして使います。
<code>spring</code> が 2 回出てくるところがポイントです。一つ目はコンテナのサービス名です。</p>

<p>毎回書くのはだるいので僕は alias にしています。fish shell 用なので良いように読み替えて下さい 🙏</p>

<pre class="code" data-lang="" data-unlink># ~/.config/fish/config.fish

# docker-compose aliases
function fig
  docker-compose $argv
end

function figspring
  docker-compose exec spring spring $argv
end</pre>




<pre class="code" data-lang="" data-unlink># USAGE
$ figspring rails c</pre>


<p>参考: <a href="https://qiita.com/kawasin73/items/2253523be18e5afd994f">&#x9AD8;&#x901F;&#x306B;&#x958B;&#x767A;&#x3067;&#x304D;&#x308B; Docker + Rails&#x958B;&#x767A;&#x74B0;&#x5883;&#x306E;&#x30C6;&#x30F3;&#x30D7;&#x30EC;&#x30FC;&#x30C8;&#x3092;&#x4F5C;&#x3063;&#x305F; - Qiita</a></p>

<h2>MySQL データの永続化</h2>

<p>イメージを作り直した時に MySQL のデータが失われてしまうのは辛いものがあります。
毎回テスト用のデータを一から作り直したくないので、 <code>docker-compose.yml</code> で以下のように指定してMySQL のデータを永続化させています。</p>

<pre class="code" data-lang="" data-unlink>  db:
    image: mysql:5.7
    volumes:
      - .mysql_data:/var/lib/mysql # &lt;- これ！
    environment:
      MYSQL_ROOT_PASSWORD: xxxxxx</pre>


<p><code>.mysql_data</code> ディレクトリ以下に MySQL のデータが格納されています。リポジトリの <code>.gitignore</code> で無視させています。
試していませんが、参考にさせて頂いた記事によると Docker for Mac 以外の環境では問題が発生するようですのでご注意下さい。
対応方法も記事内で紹介されています 🙏</p>

<p>参考: <a href="https://blog.leko.jp/post/how-to-mount-data-volume-to-local-with-docker-compose/">docker compose&#x3067;MySQL&#x306E;&#x30C7;&#x30FC;&#x30BF;&#x9818;&#x57DF;&#x3092;&#x30ED;&#x30FC;&#x30AB;&#x30EB;&#x306B;&#x30DE;&#x30A6;&#x30F3;&#x30C8;&#x3059;&#x308B; | WEB EGG</a></p>

<h1>まとめ</h1>

<p>週末に何かアプリでも書こうかと思った時に、ついでに Docker で環境構築もやっちゃうか、と思い立って書きました。
そうこうしてるうちに週末の半分くらいが過ぎ去っていますが、きっと今後は捗るはず。。 😇
何度も確認していますが、もし間違っている点、不便な点などありましたらそっと教えて頂けますと幸いです 🙏
Fork も大歓迎ですし、誰かに使ってもらえると嬉しいです 😁</p>
]]></description>
            <enclosure url="https://cdn-ak.f.st-hatena.com/images/fotolife/r/ryz310/20180211/20180211110115.png" length="0" type="image/png"/>
        </item>
        <item>
            <title><![CDATA[AWS Lambda with Golang と SAM に入門した]]></title>
            <link>https://blog.tsub.me/post/introduce-aws-lambda-with-golang-and-sam/</link>
            <guid>https://blog.tsub.me/post/introduce-aws-lambda-with-golang-and-sam/</guid>
            <pubDate>Wed, 31 Jan 2018 14:15:00 GMT</pubDate>
            <description><![CDATA[<p>先日 AWS Lambda の Golang サポートがリリースされました。</p>

<p><a href="https://aws.amazon.com/jp/blogs/compute/announcing-go-support-for-aws-lambda/">Announcing Go Support for AWS Lambda | AWS Compute Blog</a></p>

<p>今回は AWS Lambda を Golang で書きつつ、<a href="https://github.com/awslabs/serverless-application-model">SAM</a> へも入門したのでその辺りの知見とか作ったものについて紹介します。</p>

<p></p>]]></description>
        </item>
        <item>
            <title><![CDATA[中華製スマートウォッチ Amazfit Bip を使い始めて 10 日ほど経った]]></title>
            <link>https://masutaka.net/2018-01-28-1/</link>
            <guid>https://masutaka.net/2018-01-28-1/</guid>
            <pubDate>Sun, 28 Jan 2018 00:00:00 GMT</pubDate>
            <description><![CDATA[安くてダサすぎない CASIO の腕時計 [2016-09-19-1] を使い始めて 1 年半弱。
悪くはなかったのですが、時々モードボタンが押されてしまい、画面がス
トップウォッチになっていることがストレスでした（時間を確認しようと
して、あぁ&hellip;となる）。
https://rebuild.fm/196/ で宮川さんが Amazfit Bip という中華製スマー
トウォッチを絶賛していた（01:09:33 〜）ので、正月の帰省中にポチッ
と購入しました。
※ Amazfit という名前ですが、Amazon とも Fitbit とも関係ないです&hellip;。
10 日ほど使った結果、大変満足しています。私が [2016-09-19-1] に
書いた要望がほぼ満たされていました。
English Version Huami Amazfit Smartwatch Youth Edition 上記 geekbuying のサイトから PayPal で購入しました（さすがにクレジッ
トカード登録はためらわれた）。PayPal には予め英語の住所も登録して
おきましょう。でないと、私のように geekbuying から問い合わせが来て
しまいます。
良いところ  画面は常時 ON。時計なのでこれ大事。右側のボタンを押すとタッチで操作できるようになる 安い。$59.99 で買えた。$125.99 だけど、今のところ常に 52% OFF の $59.99 送料無料。2018/1/2 に注文して 2018/1/17 に届いた バッテリーがめっちゃもつ。公称 45 日 悪くない外観。Apple Watch 的な見た目で Pebble 的な UI 防水（IP68） iPhone からの通知を全部受け取れる（デフォルト OFF） 常に心拍数を計測できる（デフォルト OFF） 自動的にスリープトラッキングしてくれる（デフォルト OFF） 1 時間ごとに立ち上がるように促される（デフォルト OFF）  公式 iOS アプリ Mi Fit を使うと、すべての機能を ON に出来ます。]]></description>
        </item>
        <item>
            <title><![CDATA[GitHub の通知はこうやって読んでる]]></title>
            <link>https://masutaka.net/2018-01-16-1/</link>
            <guid>https://masutaka.net/2018-01-16-1/</guid>
            <pubDate>Tue, 16 Jan 2018 00:00:00 GMT</pubDate>
            <description><![CDATA[さて、では通知をどうやって読むか？だが、原点にかえって GitHub の
Notifications ページで頑張ってみたい。
 私も何年も GitHub の Notifications ページをメインにしている。
mention には絶対気づくし、周辺の情報もきちんと取捨選択が出来ている
と思う。
GitHub の Notifications ページ  Notifications の良いところは、イシューや Pull Request の件名が一覧
表示されるので、件名で仕分けできそうな点だ。
 そうなんですよね。実はだいぶ使いやすいです。
まずは https://github.com/notifications を訪れて Participating を
クリックし、自分宛ての mention を読む。初めから Participating を訪
れても良いかもしれない。
その後に Unread をクリック。自分のチームや興味あるリポジトリの通知
は、ブラウザのタブで開いて全部読む。その他のリポジトリの通知はタイ
トルやユーザだけ見て興味あれば別タブで表示、なければ Mark as read。
リポジトリ単位で Mark as read することも多い。
Watch リポジトリはしっかりメンテナンス そういう意味では、Watch リポジトリはしっかりメンテナンスしている。
会社のリポジトリは 80% くらいは Watch して、通知が多すぎるやつとか
は Unwatch している。
ただ、GitHub 公式だと https://github.com/watching で Unwatch しか]]></description>
        </item>
        <item>
            <title><![CDATA[2017 年にお金を払った購読型サービス]]></title>
            <link>https://masutaka.net/2018-01-03-1/</link>
            <guid>https://masutaka.net/2018-01-03-1/</guid>
            <pubDate>Wed, 03 Jan 2018 00:00:00 GMT</pubDate>
            <description><![CDATA[@r7kamura さんの次の記事が良いと思ったので、暇つぶしがてら私も振り
返ってみた。
2017 年にお金を払った購読型サービス – r7kamura – Medium 継続しているもの GitHub 年額 $84。明らかに一年以上使うため、以前月払い（$7）から年払いに変
更した。でもよく見たら値段変わらない&hellip;。次回更新の時に月払いに変えよう&hellip;。
Amazon プライム 年額 3,900 円。Amazon MastarCard ゴールドカードを作れば無料になっ
たのか。そういえばそうだった気が。
iCloud ストレージ 月額 130 円。50 GB プラン。
以前使っていた iPhone 6s では、どうしても Mac に完全バックアップで
きなかったので契約。その後 iPhone X にして [2017-11-18-1] この問題
は発生しなくなったが、安いし、写真の iCloud バックアップは便利なの
で、そのまま契約している。
Overcast 年額 1,000 円。iOS アプリ。以前は買いきりだったけど、年課金になっ
た。ほぼ『Rebuild 』と『のぼりーさんのクラウドインフラ 』のためだけ
に購読している。Overcast 使うと、SMART SPEED で違和感なく高速に聴
けるので便利。
Inoreader 年額 $29.99。Plus プランを購読している。下の Starter プラン（年額
$14.99）でも良さそうだけど、以下の機能のリミットを外すために Plus
プランにしたっぽい。
 自動 OPML バックアップ有効化 Twitter フィードの数（1 → 30）  参考: https://www.]]></description>
        </item>
        <item>
            <title><![CDATA[mackerel のカスタムメトリックを echo でワンライナーしたった]]></title>
            <link>https://developer.feedforce.jp/entry/2017/12/31/143611</link>
            <guid>https://developer.feedforce.jp/entry/2017/12/31/143611</guid>
            <pubDate>Sun, 31 Dec 2017 05:36:11 GMT</pubDate>
            <description><![CDATA[<p>どうも、バックエンドエンジニアのサトウリョウスケです ✌︎('ω')✌︎</p>

<p>突然ですがワテクシ、 Rails アプリはそこそこ書ける方なんですが、インフラはからきしだったりします。 <a href="https://dic.pixiv.net/a/%E3%82%AD%E3%83%A2%E3%83%BC%E3%82%A4%E3%82%AC%E3%83%BC%E3%83%AB%E3%82%BA">フルスタックじゃないエンジニアが許されるのは小学生までだよねー</a>、というちょっと懐かしみのある煽りが社内のからも聞こえてきそうなので、最近インフラを少しずつ触るようにしています。触ってみるとインフラも色々楽しいですね ✌︎('ω')✌︎</p>

<p>とはいえ、インフラエンジニアレベル 1 の自分があれこれやっても障害に繋がるだけなので、まずはお手軽な雑用タスクから始めることにしました。</p>

<p>さて、少し話は変わって、最近、弊社サービスで Sidekiq プロセスのファイルディスクリプタが急騰してサーバーがダウンする、という障害が何度か発生しました。
現象としては Sidekiq プロセスのファイルディスクリプタが上限値 (初期値は <code>1024</code> ) に達すると、サーバーの CPU 使用率が 100 % 付近まで達してしまう、というものだったので、ファイルディスクリプタの上限を <code>65536</code> まで上げる、というワークアラウンドな対応で凌いでいました。</p>

<p>現在は解決済み（この原因については、別途記事にします）ですが、当時はなぜファイルディスクリプタの数が上昇し続けてしまうのか原因が全くわからず、チームのエンジニアは安眠できない日々が続いていました。とりあえず Sidekiq のプロセスをリスタートすればファイルディスクリプタの数は一旦リセットされるので、監視してやばくなったらアラートを飛ばして再起動させる、という方法で一旦は凌ます。また、継続して監視することで、原因の解明にも繋がるかもしれません。</p>

<p>弊社のサービスでは監視に <a href="https://mackerel.io/">mackerel</a> を利用しているので、カスタムメトリックを使ってお手軽に監視させよう、ということになりました。
mackerel のカスタムメトリックの投稿方法は <a href="https://mackerel.io/ja/docs/entry/advanced/custom-metrics">こちらの記事</a> にまとまっています。
要点だけ抜粋しますと、 <a href="https://mackerel.io/ja/docs/entry/spec/agent#config-file">mackerel-agent の設定ファイル</a> に <strong>以下の書式で標準出力を実行するコマンドを記述</strong> すれば OK です。</p>

<blockquote><p>設定ファイルで指定するコマンドは、標準出力の各行に以下のフォーマットの出力をすることが期待されます（<code>\t</code> はタブ文字です）:</p></blockquote>

<pre class="code" data-lang="" data-unlink>{metric name}\t{metric value}\t{epoch seconds}</pre>


<p>そして以下がファイルディスクリプタを監視するための設定です（完成品がレンジから出てくるパティーン）</p>

<pre class="code" data-lang="" data-unlink>[plugin.metrics.file_descriptor_count]
command = &#39;&#39;&#39;
  echo -e &#34;file_descriptor.sidekiq\\t$(sudo ls /proc/$(pgrep -f -u {user_name} sidekiq | head -1)/fd/ | wc -l)\\t$(date -u +%s)&#34;
&#39;&#39;&#39;</pre>


<p>標準出力されれば OK なので、 <code>echo</code> で任意の文字列を出力するような方法でも実現可能です。内部で <code>pgrep -f -u {user_name} sidekiq</code> と書いて、プロセス ID を取得していますが、 <code>-u</code> でプロセスを実行しているユーザーを指定しないと、 <code>pgrep</code> のプロセス ID を取得してしまうケースがあるので注意が必要です。(mackerel-agent は <code>root</code> で実行される)
同じ要領で、他にも以下のように書けば <code>puma</code> のファイルディスクリプタも取ることができます。</p>

<pre class="code" data-lang="" data-unlink>[plugin.metrics.file_descriptor_count]
command = &#39;&#39;&#39;
  echo -e &#34;file_descriptor.puma\\t$(sudo ls /proc/$(pgrep -f -u {user_name} puma.sock | head -1)/fd/ | wc -l)\\t$(date -u +%s)&#34;
  echo -e &#34;file_descriptor.puma_cluster_worker\\t$(sudo ls /proc/$(pgrep -f -u {user_name} &#39;puma: cluster worker&#39; | head -1)/fd/ | wc -l)\\t$(date -u +%s)&#34;
&#39;&#39;&#39;</pre>


<p>ちなみにこの記事を書くときに、もしやと思って調べてみたら、 <code>mackerel-agent-plugins</code> の中に <a href="https://github.com/mackerelio/mackerel-agent-plugins/tree/master/mackerel-plugin-proc-fd">任意のプロセスのファイルディスクリプタを監視する奴</a> がありました 😓
試していませんが、こっちを使った方が良いと思います 😇</p>

<p>そんな感じで監視できたグラフが以下になります。</p>

<p><span itemscope itemtype="http://schema.org/Photograph"><img src="https://cdn-ak.f.st-hatena.com/images/fotolife/r/ryz310/20171231/20171231142049.png" alt="f:id:ryz310:20171231142049p:plain" title="f:id:ryz310:20171231142049p:plain" class="hatena-fotolife" itemprop="image"></span></p>

<p>ファイルディスクリプタ数がファイナルファンタジーの HP みたいになってますね。。。
とりあえず <code>10,000</code> を超えたらアラートを飛ばすように設定しましたが、デプロイする度にリセットされるので、結局アラートが飛ぶことも障害が発生することもなく、問題は解決しました。</p>

<p>本稿では <code>echo</code> を使ったワンライナーでカスタムメトリックを投稿する方法を紹介しました。
<code>mackerel-agent-plugins</code> に載っていないけどワークアラウンドでとりあえず監視させたい、という時は便利だと思うので、どこかでご活用ください 🙏</p>
]]></description>
            <enclosure url="https://cdn-ak.f.st-hatena.com/images/fotolife/r/ryz310/20171231/20171231142049.png" length="0" type="image/png"/>
        </item>
        <item>
            <title><![CDATA[『Goならわかるシステムプログラミング』を読んだ]]></title>
            <link>https://masutaka.net/2017-12-31-1/</link>
            <guid>https://masutaka.net/2017-12-31-1/</guid>
            <pubDate>Sun, 31 Dec 2017 00:00:00 GMT</pubDate>
            <description><![CDATA[11 月から『Real World HTTP』[2017-11-28-1] と同時に読んでいたのに、
読み終わったのが今日になってしまった。意外とボリュームあったのと、
あと少しで読み終えられたのに油断して読み進めなかったせい。
 本書のもとになった ASCII.jp のウェブ連載では、この書籍（※）の内容
とかぶらないように、実用性よりも低レベルの説明にフォーカスしたとい
うのが実態です。
※『Real World HTTP』
 P332 にこう書かれているように、『Real World HTTP』と一部内容が被る
ものの、低レイヤの話が大部分を占める。
一応私は組み込みエンジニア時代に open(3), ioctl(3), close(3) 等を
使ったデバイスドライバを書いたことがあるので（VxWorks だけど）、
ある程度想像力を働かせて読むことが出来た。
先の引用に書かれているとおり実用性は考慮されていないので、それを期
待すると期待はずれに終わると思う。あくまでエンジニアとしての知識を
深めるための技術書かと。
「第17章 Go言語とコンテナ」は面白そうだったので、あとで写経するかも。
以下、個人的なメモ。
 P98
最近では、RESTful の究極形態（第４形態）として位置づけられる
HATEOAS という考え方も広まりつつあります。
（中略）
HATEOAS の原則に従った API を採用しているウェブサービスとしては
GitHub があります。
 『Web API： The Good Parts』[2015-04-09-2] に書いてあったようだけ
ど頭に入ってなかった。Go言語は関係ない。
 P285
Go言語の場合、ヒープに置くかスタックに置くかは、コンパイラが自動的
に判断します。new で作っても、その関数内でしか利用されなければスタッ
クに確保されます。ローカル変数として宣言しても、そのポインタを他の
関数に渡したり、関数の返り値として返すような場合にはヒープに置かれ
ます。そのためGo言語では、「ローカル変数のポインタを関数の返り値と
して返すと、呼んだ側からアクセスしに行ったときにはもうスタックのフ
レームが巻き戻されて無効なメモリになっており、実行時エラーで落ちる」
（中略）という C/C++ で起きるような問題は置きません。]]></description>
        </item>
        <item>
            <title><![CDATA[GitHub 上でコミットハッシュにもとづく URL を得る]]></title>
            <link>https://developer.feedforce.jp/entry/2017/12/20/141220</link>
            <guid>https://developer.feedforce.jp/entry/2017/12/20/141220</guid>
            <pubDate>Wed, 20 Dec 2017 05:12:20 GMT</pubDate>
            <description><![CDATA[<p>ご存知のかたも多いかと思いますが、GitHub で管理しているコードについて、コードの "ある部分" を示したいときに貼り付ける URL には注意が必要です。</p>

<h3>ソースコードの参照リンクを貼るときに気をつけたいこと</h3>

<p>たとえばこんなリンクを貼り付けた場合</p>

<ul>
<li><a href="https://github.com/tmd45/tmd45.github.io/blob/source/Gemfile#L16">https://github.com/tmd45/tmd45.github.io/blob/source/Gemfile#L16</a></li>
</ul>


<p>これは <code>source</code> ブランチの最新の <code>Gemfile</code> ファイルの 16 行目を参照します。</p>

<p>いま（記事執筆時点で）このリンクを開くと <code>gem 'slim', '~&gt; 3.0.2'</code> が書かれている行を参照してることがわかりますが、この先 <code>source</code> ブランチのコードに変更があった場合「最新の」コードでは別のものを指してしまう可能性があります。</p>

<p>なので "ある行" を参照する場合にはコミットハッシュを特定した URL を貼るのがベストです。</p>

<ul>
<li><a href="https://github.com/tmd45/tmd45.github.io/blob/de6fb7dd0309465b936817e8452948084c8d7c76/Gemfile#L16">https://github.com/tmd45/tmd45.github.io/blob/de6fb7dd0309465b936817e8452948084c8d7c76/Gemfile#L16</a></li>
</ul>


<p>この URL はコミットハッシュ <code>de6fb7dd0309465b936817e8452948084c8d7c76</code> の <code>Gemfile</code> ファイルの 16 行目を参照しているので、コードに変更があってもリンク先の内容が変わってしまうことはありません。</p>

<p>コードの "ある部分" を示したいときにはこの違いに気をつけましょう。</p>

<h3>GitHub の便利なショートカット</h3>

<p>というわけで、ここまでは自分も当たり前のように実践していたのですが、この「コミットハッシュにもとづく URL」取得のためにいちいち <em>History などから最新のコミットハッシュを辿る</em>ということをしていました。面倒。</p>

<p>最近同僚に教えてもらったのですが（そして感動してこの記事を書いているのですが）</p>

<p>GitHub ページ上のショートカット機能により <strong><kbd><code>y</code></kbd> キーを押すことで、現在見ているファイルのコミットハッシュにもとづく URL を簡単に得る</strong>ことができます。</p>

<p>以下のページを開いているときに <kbd><code>y</code></kbd> キーを押すと</p>

<ul>
<li><a href="https://github.com/tmd45/tmd45.github.io/blob/source/Gemfile#L16">https://github.com/tmd45/tmd45.github.io/blob/source/Gemfile#L16</a></li>
</ul>


<p>アドレスバーで以下の URL に変わるのがわかります（コミットハッシュ部分は最新のものに変わります）。</p>

<ul>
<li><a href="https://github.com/tmd45/tmd45.github.io/blob/de6fb7dd0309465b936817e8452948084c8d7c76/Gemfile#L16">https://github.com/tmd45/tmd45.github.io/blob/de6fb7dd0309465b936817e8452948084c8d7c76/Gemfile#L16</a></li>
</ul>


<p>一発で便利！( ﾟДﾟﾉﾉ"☆ﾊﾟﾁﾊﾟﾁﾊﾟﾁﾊﾟﾁ</p>

<h3>ちなみに</h3>

<p>GitHub 上で利用できる便利なショートカット機能は <kbd><code>?</code></kbd> キーを押すことで GitHub ページ上のどこでも確認できます。</p>

<p><span itemscope itemtype="http://schema.org/Photograph"><img src="https://cdn-ak.f.st-hatena.com/images/fotolife/t/tmd45/20171220/20171220134401.png" alt="f:id:tmd45:20171220134401p:plain" title="f:id:tmd45:20171220134401p:plain" class="hatena-fotolife" itemprop="image"></span></p>

<blockquote><p>Expand URL to its canonical form</p></blockquote>

<p>というのが今回のそれですね。<code>t</code> と <code>l</code> はよく使ってたんですが、これは気づいていませんでした(；´∀｀)</p>

<p>"Source code browsing" にあるショートカットは、GitHub 上でコードブラウジングを行う上で非常に便利なので、ぜひ試してみて下さい。</p>
]]></description>
            <enclosure url="https://cdn-ak.f.st-hatena.com/images/fotolife/t/tmd45/20171220/20171220134401.png" length="0" type="image/png"/>
        </item>
        <item>
            <title><![CDATA[これまで試したダイエット７つを紹介する（※全部失敗）]]></title>
            <link>https://masutaka.net/2017-12-19-1/</link>
            <guid>https://masutaka.net/2017-12-19-1/</guid>
            <pubDate>Tue, 19 Dec 2017 00:00:00 GMT</pubDate>
            <description><![CDATA[この記事は feedforce Advent Calendar 2017 の 19 日目の記事です。
18 日目はなべはるさんの『ITベンチャー企業の人事が使っている SaaS
10選！ 』でした。なべはるさんは一日に食べるアイスと同じくらい SaaS
を活用していてすごいと思います！
昨年 [2016-12-14-1] に引き続き、今年も生活に関する記事です。ダイエッ
トは皆さん興味があると思うので、とても有用な情報かと思います。
実際試して、結果的に全部失敗しています。この記事をアンチパターンと
して試せば、成功するのではないでしょうか？（えぇ..）
1. ヘルシア緑茶を 3 ヶ月間飲み続ける 川崎の平間に住んでいた頃なので、2004 年秋頃だと思います。
経緯は忘れましたが、ヘルシア緑茶を毎日 1 本、3 ヶ月間飲み続けまし
た。毎日バラで買うのは大変なので、近所の酒屋での箱買いです。
「ヘルシア緑茶飲んでいるからへーきへーき」と食事制限はしませんでした。
★結果: 何も変わらず。むしろ増えた記憶が。ヘルシア緑茶のようにほろ
苦い思い出です。
 2. ジムに毎日通う 時は流れ、2010 年 9 月。それまで全く運動をしていなかったのに、急に
近所のジムに通い始めました。今は無きクイックシェイプというジムです。
最初の何ヶ月かは本当に毎日通っていて、行かないのはジムが休みの金曜
日と、たまの飲み会の日くらいでした。
これらの記事に意識高くまとまっています。
[2011-03-05-1] [2011-03-05-2] [2011-03-05-3] 今でもなぜあそこまでやる気があったのか分かりません。
★結果: 意識が高くなりすぎて、新卒から 11 年在籍した会社を退職
[2011-04-22-1] 。スタートアップで社員第一号として働き始める。
ダイエットには失敗。
西明石に引っ越した 2011 年 4 月末まで、7 ヶ月間通いました。
3. 野々池貯水池でウォーキング 一階のダイニングキッチンがオフィス、二階の各部屋に若者と住んでいた
この家の近所には、ジムなんて便利なものはありません。あるのは田んぼ
くらいでした。
自転車でいけるくらいの距離に野々池貯水池があり、老若男女がジョギン]]></description>
        </item>
        <item>
            <title><![CDATA[結婚して半年が経ったので工夫していることとか]]></title>
            <link>https://blog.tsub.me/post/half-a-year-after-married/</link>
            <guid>https://blog.tsub.me/post/half-a-year-after-married/</guid>
            <pubDate>Sat, 09 Dec 2017 12:30:00 GMT</pubDate>
            <description><![CDATA[<p>この記事は <a href="https://adventar.org/calendars/2155">feedforce Advent Calendar 2017</a> の 9 日目の記事です。</p>

<p>昨日の記事は tmd45 さんの <a href="http://developer.feedforce.jp/entry/2017/12/08/090000">TypeScript 社内勉強会 完遂報告 - Feedforce Developer Blog</a> でした。<br />
TypeScript 社内勉強会には自分も参加していましたが、プロダクションのコードを書いているフロントエンドエンジニアの方から色々とアドバイスを頂いたり、他の言語の観点で議論が出来たりとても有意義な会でした！</p>

<p>さて、本題ですがワタクシ今年の 4 月に結婚をしました。</p>

<p>妻は Web コーダーで、割と Web サービスなどにも抵抗がなく普段から Slack や Kibela などを夫婦間で活用しています。</p>

<p>今回はその辺りで色々と工夫している部分を紹介できればと思います。</p>

<p></p>]]></description>
        </item>
        <item>
            <title><![CDATA[TypeScript 社内勉強会 完遂報告]]></title>
            <link>https://developer.feedforce.jp/entry/2017/12/08/090000</link>
            <guid>https://developer.feedforce.jp/entry/2017/12/08/090000</guid>
            <pubDate>Fri, 08 Dec 2017 00:00:00 GMT</pubDate>
            <description><![CDATA[<p>この記事は <a href="https://adventar.org/calendars/2155">feedforce Advent Calendar 2017</a> の
 8 日目の記事です。昨日は <a href="http://blog.hatena.ne.jp/phiitakes/" class="hatena-id-icon"><img src="https://cdn.profile-image.st-hatena.com/users/phiitakes/profile.png" width="16" height="16" alt="" class="hatena-id-icon">id:phiitakes</a> の『<a href="http://phiitakes.hatenablog.com/entry/2017/12/07/143958">フィードフォースのスポーツ系活動紹介 - phiitakesのなにか</a>』でした。弊社こんなに運動部あったんだ！？ｗ</p>

<p>こにゃにゃちわ（世代）<a href="http://blog.hatena.ne.jp/tmd45/" class="hatena-id-icon"><img src="https://cdn.profile-image.st-hatena.com/users/tmd45/profile.png" width="16" height="16" alt="" class="hatena-id-icon">id:tmd45</a> です。</p>

<p>ちょうど今週、社内で開催していた TypeScript 勉強会が一段落したので、それについて書きたいと思います。TypeScript の話というよりは社内勉強会のやりかたのひとつという話になりますのでご了承ください。</p>

<h3>きっかけ</h3>

<p>今年の夏頃から担当プロダクトで AWS Lambda を利用するようになりました。当初開発に取り組んでくれたサーバサイドメンバーが JavaScript 学んでいたり、強力なフロントエンド開発メンバーがいたりということで実装に Node.js を選択しています<a href="#f-bfc4d7a1" name="fn-bfc4d7a1" title="隣のチームでは Python を利用していますね。開発のメインは Ruby ですが、それ以外の言語はチームによって検討している感じです">*1</a>。</p>

<p>フロントエンドチームでは静的型付け（と関数型）の導入が進んでおり、とくに新しいプロダクトでは <a href="https://flow.org/">Flow</a> を用いた開発が行われています。</p>

<p>そんなこんなで Lambda function の実装でも静的型付けの可能な言語で開発したいという向きがあり、とはいえ JavaScript の基礎もあやふやなチームメンバー（主に私）がいる状況でしたので Pure JavaScript から大きく逸脱することがなく最新の仕様にも触れられる
 <a href="https://www.typescriptlang.org/">TypeScript</a> でやってみようという選択になりました。</p>

<p>仕事でやるからにはしっかり勉強せねばと思いつつ、自力だけで学ぶことになると最初に開発に取り組んでくれたメンバー以外（主に私）は意識が下がりがちになると思い、社内勉強会という名目で取り組むことにしました。</p>

<h3>やりかた</h3>

<p>仕事ですぐに使う技術を学ぶという名目でしたので、週一でゆっくりというよりは、短時間で刻んでどんどんやっていこうという気持ちでセッティングしました。</p>

<p>導入を決めた自分のチーム（のサーバサイドメンバー）の参加は必須として、ミーティングの日程を避けて 1 イテレーション＝ 2 週間のなかでミーティングの無い日を中心にスケジュールしました。</p>

<table>
<thead>
<tr>
<th> 曜日 </th>
<th> 予定 </th>
</tr>
</thead>
<tbody>
<tr>
<td> 月 </td>
<td> スプリントプランニング </td>
</tr>
<tr>
<td> 火 </td>
<td> なし </td>
</tr>
<tr>
<td> 水 </td>
<td> <strong>TypeScript 勉強会</strong> </td>
</tr>
<tr>
<td> 木 </td>
<td> なし </td>
</tr>
<tr>
<td> 金 </td>
<td> <strong>TypeScript 勉強会</strong> </td>
</tr>
<tr>
<td>  </td>
<td>  </td>
</tr>
<tr>
<td> 月 </td>
<td> <strong>TypeScript 勉強会</strong> </td>
</tr>
<tr>
<td> 火 </td>
<td> なし </td>
</tr>
<tr>
<td> 水 </td>
<td> <strong>TypeScript 勉強会</strong> </td>
</tr>
<tr>
<td> 木 </td>
<td> なし </td>
</tr>
<tr>
<td> 金 </td>
<td> スプリントレビュー、レトロスペクティブ、KPT </td>
</tr>
</tbody>
</table>


<p>回数を増やしたぶん、<strong>1 回の実施時間を短めに 30 分〜 45 分</strong> としました（それでも後半は白熱して 1 時間いっぱい使ってしまいましたが）。</p>

<p>開催時間は毎朝の <strong>デイリースクラムを終えたあとの、午前中</strong> にしました。夕方は日によって早く帰りたいこともありますが、朝は普段からチームで集まることが決まっているので時間確保がしやすかったためです。</p>

<p>そんな感じでスケジューリングしつつ、参加したいひとはお気軽にご参加ください、というスタンスで進めました。結果、参加人数は 3 〜 7 人と幅がありました。</p>

<p><span itemscope itemtype="http://schema.org/Photograph"><img src="https://cdn-ak.f.st-hatena.com/images/fotolife/t/tmd45/20171207/20171207132757.png" alt="f:id:tmd45:20171207132757p:plain" title="f:id:tmd45:20171207132757p:plain" class="hatena-fotolife" itemprop="image"></span>
<span style="color: #cccccc">はじめるまえにお気持ちを表明してみた</span></p>

<p>教材は市販の書籍も検討しましたが <strong>  <a href="https://basarat.gitbooks.io/typescript/">TypeScript Deep Dive</a> というオンラインドキュメント</strong> を利用しました。浅すぎず深すぎず、最新の JavaScript のことも学べる適度な教材はなんだろう？と投げかけたところ、<a href="http://developer.feedforce.jp/archive/author/otofu-square">先に TypeScript を自主学習していたメンバー</a>や<a href="http://developer.feedforce.jp/archive/author/kogainotdan">フロントエンドの元老院の方</a>からオススメしてもらいました。英語だけど、みんなで読むならこわくない。</p>

<p>また <code>Promise</code> の部分では追加で   <a href="http://azu.github.io/promises-book/">JavaScript Promiseの本</a> の前半も読みました。どちらのドキュメントでもこの勉強会では基礎部分だけ実施しました。仕事で使いながら、あとは自分で応用編も読み進めていく予定です。</p>

<h3>よかったこと</h3>

<p>学習した内容からとくに思ったのは、言語の設計思想を理解して学ぶと納得感が違うなということです。 Deep Dive の冒頭には TypeScript がどういうスタンスの JavaScript
Transpiler であるか？という解説がありました<a href="#f-a4dddcf6" name="fn-a4dddcf6" title="あくまでも Pure JavaScript がそのまま記述できる（ように設定できる）ように設計され、既存の JavaScript コードを部分的に移行していけるものである、とか">*2</a>。</p>

<p>また、参加メンバーは普段主に Ruby を書いているひとが多いので「Ruby ではここはこういうやりかたになってるね」という話をしたり、いろんな言語を触ってよく学んでいるメンバーから「別の言語ではこういう思想でこういう実装がされているよ」とか、たとえば「Flow では（思想が違うので）ここは勝手に推論してくれるんですよ」みたいな話をしてもらったりしました。</p>

<p>Slack で疑問点を共有しながら進めていると「先生」になるような社内メンバーたちが説明をくれたり議事録<a href="#f-140fefc7" name="fn-140fefc7" title="業務時間中にやっている勉強会だったので「真面目に勉強してますよ〜」と報告する理由で書いていたのですが（笑）あとで見返すこともできて良かった">*3</a>にもコメントをもらったり、とても助かりました。</p>

<p><span itemscope itemtype="http://schema.org/Photograph"><img src="https://cdn-ak.f.st-hatena.com/images/fotolife/t/tmd45/20171207/20171207133707.png" alt="f:id:tmd45:20171207133707p:plain" title="f:id:tmd45:20171207133707p:plain" class="hatena-fotolife" itemprop="image"></span>
<span style="color: #cccccc">Qiita:Team でかんたんな議事録を作っていました</span></p>

<p>「先生」レベルの人たちが毎回勉強会に参加するのは、どうしても（お互いに）無駄に感じてしまうこともあると思います。興味のある章だったり時間のあるときには気軽に参加してもらって、そうでないときも助けてもらうことができて大感謝でした 🙏</p>

<h3>まとめ</h3>

<p>勉強会を実施した成果として、実際に TypeScript で書いているリポジトリが最低限読めるようになりましたし、他のフロントエンドのリポジトリでも「呪文かコレ」って思うことがなくなりました！開発の入り口に立つことが出来たように思います。大成功 😊</p>

<p>年明けには業務で利用している外部の JS SDK の TypeScript ソースコード・リーディング会をやってみたいと考えています(๑•̀ㅂ•́)و✧</p>

<p><span itemscope itemtype="http://schema.org/Photograph"><img src="https://cdn-ak.f.st-hatena.com/images/fotolife/t/tmd45/20171207/20171207151404.jpg" alt="f:id:tmd45:20171207151404j:plain" title="f:id:tmd45:20171207151404j:plain" class="hatena-fotolife" itemprop="image"></span>
<span style="color: #cccccc">最終回の参加メンバー！おつかれさまでした！！</span></p>

<div style="text-align: center; color: #ccc;">〜〜〜</div>


<p>さて、明日は弊社には結構多い（！）既婚者勢の <a href="http://blog.hatena.ne.jp/tsub511/" class="hatena-id-icon"><img src="https://cdn.profile-image.st-hatena.com/users/tsub511/profile.png" width="16" height="16" alt="" class="hatena-id-icon">id:tsub511</a> による <a href="https://adventar.org/calendars/2155#list-2017-12-09">結婚して半年が経ったので工夫していることとか</a> です。おたのしみに〜</p>
<div class="footnote">
<p class="footnote"><a href="#fn-bfc4d7a1" name="f-bfc4d7a1" class="footnote-number">*1</a><span class="footnote-delimiter">:</span><span class="footnote-text">隣のチームでは Python を利用していますね。開発のメインは Ruby ですが、それ以外の言語はチームによって検討している感じです</span></p>
<p class="footnote"><a href="#fn-a4dddcf6" name="f-a4dddcf6" class="footnote-number">*2</a><span class="footnote-delimiter">:</span><span class="footnote-text">あくまでも Pure JavaScript がそのまま記述できる（ように設定できる）ように設計され、既存の JavaScript コードを部分的に移行していけるものである、とか</span></p>
<p class="footnote"><a href="#fn-140fefc7" name="f-140fefc7" class="footnote-number">*3</a><span class="footnote-delimiter">:</span><span class="footnote-text">業務時間中にやっている勉強会だったので「真面目に勉強してますよ〜」と報告する理由で書いていたのですが（笑）あとで見返すこともできて良かった</span></p>
</div>]]></description>
            <enclosure url="https://cdn-ak.f.st-hatena.com/images/fotolife/t/tmd45/20171207/20171207151404.jpg" length="0" type="image/jpg"/>
        </item>
        <item>
            <title><![CDATA[AWS でコンテナを動かすためのサービスまとめ]]></title>
            <link>https://developer.feedforce.jp/entry/2017/11/30/133525</link>
            <guid>https://developer.feedforce.jp/entry/2017/11/30/133525</guid>
            <pubDate>Thu, 30 Nov 2017 04:35:25 GMT</pubDate>
            <description><![CDATA[<p>こんにちは、バックエンドエンジニアの tsub (<a href="http://blog.hatena.ne.jp/tsub511/">id:tsub511</a>) です。</p>

<p>本日 AWS Re:Invent 2017 でコンテナ実行環境として新たに AWS Fargate と Amazon Elastic Container Service for Kubernetes (EKS) が発表されました。</p>

<p>昨日は発表が待ち遠しくて気が気じゃなかったですが、無事に予想通りマネージド Kubernetes サービスが発表されて大喜びです。</p>

<p>今回は AWS でコンテナを扱う上で、今までのサービスと合わせて選択肢がいくつかあって混乱すると思うので簡単にまとめました。</p>

<h2>AWS でコンテナを動かすためのサービス</h2>

<p>新しく 2 つのサービスが追加されたことで、これだけあります。
(見落としがなければ)</p>

<ul>
<li>Amazon Elastic Beanstalk (EB)</li>
<li>Amazon Elastic Container Service (ECS)</li>
<li>AWS Batch</li>
<li><a href="https://aws.amazon.com/jp/eks/">Amazon Elastic Container Service for Kubernetes (EKS)</a> <strong><font color="red">new!</font></strong></li>
<li><a href="https://aws.amazon.com/jp/fargate/">AWS Fargate</a> <strong><font color="red">new!</font></strong></li>
</ul>


<p>それぞれの特徴について説明していきます。</p>

<h2>Amazon Elastic Beanstalk (EB)</h2>

<p>※ EB については自分は全く触ったことがないので分からないままで書きます。</p>

<p>EB は Heroku のような PaaS です。
本来は Heroku と同じようにアプリケーションのコードをそのままデプロイして動かしますが、Docker もサポートしていて、コンテナとしてデプロイして動かすことができます。</p>

<p>小規模なサービス、チームなどでインフラの管理をしたくないというユースケースで使うことが多いと思います。</p>

<h2>Amazon Elastic Container Service (ECS)</h2>

<p>ECS は AWS が独自に開発しているマネージドなコンテナのオーケストレーションサービスです。
(コンテナのオーケストレーションについては <a href="#%E3%81%8A%E3%81%BE%E3%81%91:%20%E3%82%B3%E3%83%B3%E3%83%86%E3%83%8A%E3%81%AE%E3%82%AA%E3%83%BC%E3%82%B1%E3%82%B9%E3%83%88%E3%83%AC%E3%83%BC%E3%82%B7%E3%83%A7%E3%83%B3%E3%81%AB%E3%81%A4%E3%81%84%E3%81%A6">おまけ: コンテナのオーケストレーションについて</a> を参照)</p>

<p>EC2 の上で ecs-agent を動かすことで、ECS のクラスタとして認識させることができるため、非常にシンプルです。
ecs-agent が動いていれば、ECS を通して EC2 の上でコンテナを簡単に動かすことができます。</p>

<p>ECS 向けに awslogs という Docker 用の logging driver を提供していて、CloudWatch Logs との連携も簡単に行えます。</p>

<p>ECS 上でのコンテナは、ECS Task や ECS Service として動かします。
ECS Task には IAM Role を使った権限管理や VPC ネットワーク上で直接 Task を動かすことができ、セキュリティグループなどを利用することもできます。</p>

<p>ECS Service は ELB との連携があり、コンテナが起動したら自動的に ELB に紐付けたり、コンテナが終了したら ELB から外したり、といったことをやってくれます。</p>

<p>上記のように、他の AWS サービスとの連携がスムーズにできる点は非常に魅力的です。</p>

<h2>AWS Batch</h2>

<p>Batch はコンテナを使ったバッチコンピューティングに特化したサービスです。</p>

<p>バッチコンピューティングと言っても、決まった時間に決まった処理をするという cron のようなものではなく、
機械学習やスーパーコンピュータなどで利用するような大量の計算処理を必要とする場合に利用されるような基盤となります。</p>

<p>そういう背景もあり、主に CPU ベースでのコンテナの割り振り、ホストのオートスケーリングなどに強いです。</p>

<p>また、Batch はバックエンドで ECS を使っており、ジョブを動かすと実際に ECS Cluster が作られその上で Task が動いている様子を見ることもできます。
ECS を使っていることもあり、ログは自動的に awslogs logging driver によって CloudWatch Logs に送られたり、CloudWatch による ECS のメトリクスを見ることが可能です。</p>

<p>また、ECS と違って Job Queue も提供されていて、ジョブの状態管理なども可能となっています。
CloudWatch Events によりジョブの状態変化によるイベントドリブンな処理も可能です。</p>

<h2><a href="https://aws.amazon.com/jp/eks/">Amazon Elastic Container Service for Kubernetes (EKS)</a> <strong><font color="red">new!</font></strong></h2>

<p><iframe src="https://hatenablog-parts.com/embed?url=https%3A%2F%2Faws.amazon.com%2Fjp%2Feks%2F" title="Amazon EKS – マネージド型 Kubernetes サービス" class="embed-card embed-webcard" scrolling="no" frameborder="0" style="display: block; width: 100%; height: 155px; max-width: 500px; margin: 10px 0px;"></iframe><cite class="hatena-citation"><a href="https://aws.amazon.com/jp/eks/">aws.amazon.com</a></cite></p>

<p>EKS はマネージドな Kubernetes を提供してくれるサービスです。
(現在はプレビュー版のみの提供)</p>

<p>ECS は AWS が独自に開発しているコンテナのオーケストレーションサービスでしたが、Kubernetes は Google が開発している OSS プロジェクトのコンテナのオーケストレーションツールです。
(コンテナのオーケストレーションについては <a href="#%E3%81%8A%E3%81%BE%E3%81%91:%20%E3%82%B3%E3%83%B3%E3%83%86%E3%83%8A%E3%81%AE%E3%82%AA%E3%83%BC%E3%82%B1%E3%82%B9%E3%83%88%E3%83%AC%E3%83%BC%E3%82%B7%E3%83%A7%E3%83%B3%E3%81%AB%E3%81%A4%E3%81%84%E3%81%A6">おまけ: コンテナのオーケストレーションについて</a> を参照)</p>

<p>Kubernetes は OSS ということもあり、コミュニティが非常に活発で多くの開発者・企業が開発に協力しています。</p>

<p>Kubernetes を動かすための基盤はかなりたくさんの選択肢があり、あくまで EKS はそのうちの一つです。</p>

<p>特に、今まで AWS 上で Kubernetes 環境を構築するために様々なツールがありました (私が知っている範囲で)。</p>

<ul>
<li><a href="https://github.com/kubernetes-incubator/kubespray">kubespray</a></li>
<li><a href="https://github.com/kubernetes-incubator/kube-aws">kube-aws</a></li>
<li><a href="https://github.com/kubernetes/kops">kops</a></li>
<li><a href="https://kubernetes.io/docs/reference/generated/kubeadm/">kubeadm</a></li>
<li><a href="https://coreos.com/tectonic/">Tectonic</a></li>
<li><a href="http://rancher.com/rancher-os/">Rancher</a></li>
</ul>


<p>実際、今まで AWS 上で Kubernetes を利用していた人が多いようで、おそらくその方々は何らかのツールを用いて自前で構築していたと思います。</p>

<p><a href="https://aws.amazon.com/jp/blogs/news/amazon-elastic-container-service-for-kubernetes/">https://aws.amazon.com/jp/blogs/news/amazon-elastic-container-service-for-kubernetes/</a></p>

<blockquote><p>AWS 上で Kubernetes を利用している多くのお客様がいます。実際、Cloud Native Computing Foundationによると、Kubernetes のワークロードの63％が AWS 上で動作しています。AWS は Kubernetes を実行するうえで人気の場所</p></blockquote>

<p>これらのツールを使って、Kubernetes クラスタの構築・管理を簡単にすることができますが、やはりマスターノードを管理する必要はでてくると思います。</p>

<p>そこを AWS 側で管理・提供してくれるのが EKS となります。</p>

<p>EKS としては Kubernetes クラスタの管理だけでなく、ELB や IAM、VPC、Private Link、CloudTrail などとの連携も提供してくれているため、自前で Kubernetes クラスタを構築するよりも便利になっています。
後述の Fargate との連携も今後できるようになるとのことです。</p>

<p>また、既存の Kubernetes 用ツール群を使えるのも大きな強みです。</p>

<h2><a href="https://aws.amazon.com/jp/fargate/">AWS Fargate</a> <strong><font color="red">new!</font></strong></h2>

<p><iframe src="https://hatenablog-parts.com/embed?url=https%3A%2F%2Faws.amazon.com%2Fjp%2Ffargate%2F" title="AWS Fargate – サーバーやクラスターの管理が不要なコンテナの実行" class="embed-card embed-webcard" scrolling="no" frameborder="0" style="display: block; width: 100%; height: 155px; max-width: 500px; margin: 10px 0px;"></iframe><cite class="hatena-citation"><a href="https://aws.amazon.com/jp/fargate/">aws.amazon.com</a></cite></p>

<p>Fargate は単体のサービスではなく ECS や EKS の上で使うことのできるサービスです。
(現在は北部バージニアリージョンのみの提供)</p>

<p>前述した ECS や EKS と違い、コンテナを動かすホストについて意識せず、コンテナそのものを動かすことだけに集中することができます。</p>

<p>どういうことかと言うと、Fargate では事前にホストを動かしておく必要はありません。</p>

<p>AWS VPC 環境と ECS のクラスター (名前空間的な意味で) を作っておけば、後はコンテナを起動するだけで自動的にホストを用意し、コンテナを実行してくれます。</p>

<p>また、ECS の上に乗っかっているので、使い方は簡単で ECS Task として起動する時に launch type として Fargate を指定するだけです。
その他、ECS Service でも使うことができます。
(EKS との連携についてはまだ情報が公開されていないため不明です)</p>

<p>ホストをこちら側で管理しないため、ホストの監視の方法などは気になるところですが、CloudWatch を通してホストのメトリクスは取れるようです。</p>

<p><a href="https://aws.amazon.com/jp/blogs/news/aws-fargate-a-product-overview">https://aws.amazon.com/jp/blogs/news/aws-fargate-a-product-overview</a></p>

<blockquote><p>FargateではアプリケーションのログをCloudWatch Logsに送ることができます。サービスのメトリクス(CPUとメモリの利用率)もCloudWatchメトリクスとして利用可能です。可視化や監視、アプリケーションパフォーマンスの領域での我々のパートナーである、DataDog、Aquasec、Splunk、Twistlock、そしてNew RelicもFargateタスクをサポートしています。</p></blockquote>

<p>また、Fargate に似たサービスとして <a href="https://azure.microsoft.com/ja-jp/services/container-instances/">Azure Container Instances (ACI)</a> や <a href="https://hyper.sh/">Hyper.sh</a> といったサービスも AWS 以外で提供されています。</p>

<h2>おまけ: コンテナのオーケストレーションについて</h2>

<p>コンテナを本番環境で動かそうとした時、コンテナをどのインスタンスで動かすか、どのインスタンスでコンテナが動いているのか、などコンテナの管理方法でいくつか問題が出てきます (あくまで一例です)。</p>

<p>そういった問題を解決するため、コンテナのスケジューリングやマネージングをするツールを用意する必要がありますが、それらを解決するためのツールが ECS や Kubernetes, Docker Swarm などと言ったオーケストレーションツールとなります。</p>

<p>ただし、どこにコンテナのスケジューリングやマネージングをする人が必要になってきます。
その人をマスターノードなどと呼び、次はこれを管理・冗長化などしなければいけないという問題がでてきます。</p>

<p>そのマスターノードの管理までマネージドで提供してくれているのが、ECS や EKS, <a href="https://cloud.google.com/kubernetes-engine/?hl=ja">GKE (Google Kubernetes Engine)</a>, <a href="https://azure.microsoft.com/ja-jp/services/container-service/">AKS (Azure Container Service)</a> などになります。</p>

<h2>まとめ</h2>

<ul>
<li>EB

<ul>
<li>小規模なサービス・チームで使うと良さそう</li>
</ul>
</li>
<li>ECS

<ul>
<li>AWS 独自のコンテナのオーケストレーションサービス</li>
</ul>
</li>
<li>Batch

<ul>
<li>バッチコンピューティング基盤として使う</li>
</ul>
</li>
<li>EKS

<ul>
<li>Kubernetes を使ったコンテナのオーケストレーションサービス</li>
</ul>
</li>
<li>Fargate

<ul>
<li>検証環境・本番環境・ちょっとした処理など幅広く使える</li>
</ul>
</li>
</ul>


<p>機能的に ECS と EKS の使い分けは難しいですが、学習コスト・導入コストの面で ECS に軍配は上がると思います。
ただ、コンテナを使う以上コミュニティが巨大な Kubernetes を使うことも大きなメリットです。</p>

<p>個人的には EKS を推していきたいです。</p>
]]></description>
            <enclosure url="https://cdn.user.blog.st-hatena.com/default_entry_og_image/116461321/1514251518718655" length="0" type="image//default_entry_og_image/116461321/1514251518718655"/>
        </item>
        <item>
            <title><![CDATA[『Real World HTTP』を読んだ]]></title>
            <link>https://masutaka.net/2017-11-28-1/</link>
            <guid>https://masutaka.net/2017-11-28-1/</guid>
            <pubDate>Tue, 28 Nov 2017 00:00:00 GMT</pubDate>
            <description><![CDATA[HTTP の仕様を歴史から紐解く良書でした。
HTTP/0.9(!) から始まり、1.0, 1.1, 2、そしてセキュリティと網羅的に学ぶことが出来ます。個人的には HTTP/2 を雰囲気でしか理解していませんでしたが、分かった気になれた気がします。
↓ まえがき v から引用。
 本書では次の二冊の間におさまる本として書いてきました。
・『Web API： The Good Parts』（オライリー・ジャパン　刊、水野貴明　著）
・『ハイパフォーマンスブラウザネットワーキング』（オライリー・ジャパン　刊、Ilya Grigorik　著）
 これにピンときたら、読んだ方が良いと思います。『Web API： The Good	Parts』は [2015-04-09-2] に読みました。読み終わった後、何度も参照することとなった、とても良い本です。
一点、サンプルコードが Go 言語なので、好き嫌いは分かれるかもしれません。
それについて私は問題なかったのですが、『Goならわかるシステムプログラミング 』と平行して読んでいたので、割と混乱しました（笑）。両方とも Go 言語で、内容が似た章もあり、作者さんも同じ渋川よしきさんです。
渋川よしきさん、どれほどの知識量なんや&hellip;。
以下、自分用のメモ。
P47
 ・プロクシ：通信内容を理解する。必要に応じてコンテンツを改変したり、
サーバーの代わりに応答したりする
・ゲートウェイ：通信内容をそのまま転送する。内容の改変も許さない。
クライアントからは途中に存在することを気づかれてはならない
 P58
 表2-3 スキーマの組み合わせとリファラーの有無
    アクセス元 アクセス先 送信するかどうか？     HTTPS HTTPS する   HTTPS HTTP しない   HTTP HTTPS する   HTTP HTTP する    P92]]></description>
        </item>
        <item>
            <title><![CDATA[fontTools のペンを使ってグリフのアウトラインを取得する]]></title>
            <link>https://shiromoji.hatenablog.jp/entry/2017/11/26/221902</link>
            <guid>https://shiromoji.hatenablog.jp/entry/2017/11/26/221902</guid>
            <pubDate>Sun, 26 Nov 2017 13:19:02 GMT</pubDate>
            <description><![CDATA[<p>先日 <a class="keyword" href="http://d.hatena.ne.jp/keyword/Twitter">Twitter</a> で、「グリフのアウトラインの座標列を取りたいんだけど」「それ pen protocol でできるよ！」というやりとりをしました。この記事では、pen protocol に対応したペンでアウトラインを取得する方法について、具体的に解説してみます。</p>

<p><blockquote class="twitter-tweet" data-lang="ja"><p lang="ja" dir="ltr">フォントとかについてベジエのアウトラインの法線方向に制御点を移動することでアウトラインを太らせたり細らせたりする処理を思ひついたんだけど、テスト環境構築するのが面倒。フォントファイルから制御点の座標列を取り出し、それを描画する処理ができないとだめ感。なにかいいのあるかな…。</p>&mdash; にせねこ (@nixeneko) <a href="https://twitter.com/nixeneko/status/928179735590342656?ref_src=twsrc%5Etfw">2017年11月8日</a></blockquote><script async src="https://platform.twitter.com/widgets.js" charset="utf-8"></script>
<blockquote class="twitter-tweet" data-lang="ja"><p lang="ja" dir="ltr">目的はもう果たせたようですが、グリフのアウトラインを <a class="keyword" href="http://d.hatena.ne.jp/keyword/Python">Python</a> で読み書き加工するのであれば、(segment) pen protocol <a href="https://t.co/kR5gvCz5kY">https://t.co/kR5gvCz5kY</a> や point pen protocol <a href="https://t.co/JvIUdqkEfu">https://t.co/JvIUdqkEfu</a> が標準的です。慣れるまでちょっと癖はあるものの、いろいろと応用が利きます。</p>&mdash; mashabow (@mashabow) <a href="https://twitter.com/mashabow/status/928289778465832960?ref_src=twsrc%5Etfw">2017年11月8日</a></blockquote><script async src="https://platform.twitter.com/widgets.js" charset="utf-8"></script></p>

<h3>pen protocol とペン</h3>

<p>さて、そもそも pen protocol とは何でしょう？　今回は<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%D7%A5%ED%A5%C8%A5%B3%A5%EB">プロトコル</a>の詳細には触れず、概観だけ説明します。</p>

<p>フォント界隈では <a class="keyword" href="http://d.hatena.ne.jp/keyword/Python">Python</a> が共通言語になっています。しかし、グリフを表すためのオブジェクトは、フォントエディタ（Glyphs, RoboFont, FontLab, ...）やライブラリ（fontTools, ufoLib, defcon, fontParts, ...）ごとにそれぞれ独自に定義されています。ざっくり言ってしまうと、「どんなグリフオブジェクトであれ、共通の<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%A4%A5%F3%A5%BF%A1%BC%A5%D5%A5%A7%A5%A4%A5%B9">インターフェイス</a>でアウトラインを読み書きできると楽だよね」「<a class="keyword" href="http://d.hatena.ne.jp/keyword/SVG">SVG</a> や PDF やいろんな描画 <a class="keyword" href="http://d.hatena.ne.jp/keyword/API">API</a> にも対応したいよね」というのが pen protocol の発想です。pen protocol によってグリフからアウトラインを得たり、アウトラインを描いたりするためのオブジェクトをペン（pen）と呼びます。</p>

<p>pen protocol が広まった結果、現在までにいろいろなペンが実装されてきました。以下にいくつか例を挙げますが、これ以外にも存在しています。</p>

<ul>
<li><a href="https://github.com/fonttools/fonttools/tree/master/Lib/fontTools/pens"><code>fontTools.pens.*</code></a></li>
<li><a href="https://github.com/robofab-developers/fontPens/tree/master/Lib/fontPens"><code>fontPens.*</code></a></li>
<li><a href="https://github.com/unified-font-object/ufoLib/blob/master/Lib/ufoLib/pointPen.py"><code>ufoLib.pointPen.*</code></a></li>
</ul>


<p>なお、pen protocol には <a href="https://github.com/fonttools/fonttools/blob/master/Lib/fontTools/pens/basePen.py#L3">segment pen protocol</a> と <a href="https://github.com/unified-font-object/ufoLib/blob/master/Lib/ufoLib/pointPen.py">point pen protocol</a> の2系統があり、前者に対応したペンは <code>HogePen</code>、後者は <code>HogePointPen</code> のようなクラス名になっているのが通例です。この記事では、前者 segment pen protocol のペンをとり上げます<a href="#f-cc54d3b8" name="fn-cc54d3b8" title="若干紛らわしいのですが、segment pen protocol は単に pen protocol と呼ばれることがあります。">*1</a>。</p>

<h3>フォントを読み込んでグリフを準備する</h3>

<p><small>以下、環境は <a class="keyword" href="http://d.hatena.ne.jp/keyword/Python">Python</a> 3.6.3, <a href="https://github.com/fonttools/fonttools">fontTools</a> 3.20.1 です。fontTools は <code>$ pip install fonttools</code> でインストールできます。</small></p>

<p>ペンのことは一旦あと回しにして、まずはフォントファイルを読み込みます。今回は例として、源ノ角ゴシック Regular <a href="https://github.com/adobe-fonts/source-han-sans/blob/release/OTF/Japanese/SourceHanSans-Regular.otf"><code>SourceHanSans-Regular.otf</code></a> を使いました。</p>

<pre class="code lang-python" data-lang="python" data-unlink><span class="synPreProc">from</span> fontTools.ttLib <span class="synPreProc">import</span> TTFont
font = TTFont(<span class="synConstant">'SourceHanSans-Regular.otf'</span>)
</pre>


<p>次に、glyphSet と呼ばれる辞書様オブジェクトと、cmap（<a class="keyword" href="http://d.hatena.ne.jp/keyword/%CA%B8%BB%FA%A5%B3%A1%BC%A5%C9">文字コード</a>とグリフ名の対応）を取得しておきます。後者に関しては、従来 cmap テーブル <code>font['cmap']</code> からサブテーブルを選んで辿っていく必要がありましたが、<a href="https://github.com/fonttools/fonttools/pull/1092">最近追加された</a>お手軽便利メソッド <code>getBestCmap()</code> でいい感じに取得できます。</p>

<pre class="code lang-python" data-lang="python" data-unlink>glyph_set = font.getGlyphSet()  <span class="synComment"># {グリフ名: グリフ} っぽいオブジェクト</span>
cmap = font.getBestCmap()       <span class="synComment"># {Unicode: グリフ名}</span>
</pre>


<p>これらを使って、文字 <code>char</code> に対応したグリフオブジェクトを返す関数を作ります。</p>

<pre class="code lang-python" data-lang="python" data-unlink><span class="synStatement">def</span> <span class="synIdentifier">get_glyph</span>(glyph_set, cmap, char):
    glyph_name = cmap[<span class="synIdentifier">ord</span>(char)]
    <span class="synStatement">return</span> glyph_set[glyph_name]
</pre>


<p>例として、文字 "L" に対応するグリフオブジェクトを、 <code>L</code> としておきましょう。</p>

<pre class="code lang-python" data-lang="python" data-unlink>L = get_glyph(glyph_set, cmap, <span class="synConstant">'L'</span>)
</pre>


<p>これでグリフの準備はできました。</p>

<h3><code>RecordingPen</code> でアウトラインの内容を得る</h3>

<p>さて、アウトラインの内容を取得するためには、fontTools に同梱されている <a href="https://github.com/fonttools/fonttools/blob/master/Lib/fontTools/pens/recordingPen.py"><code>RecordingPen</code></a> というペンを使います。まずはペンの<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%A4%A5%F3%A5%B9%A5%BF%A5%F3%A5%B9">インスタンス</a>を作成します。</p>

<pre class="code lang-python" data-lang="python" data-unlink><span class="synPreProc">from</span> fontTools.pens.recordingPen <span class="synPreProc">import</span> RecordingPen
recording_pen = RecordingPen()
</pre>


<p>次に、このペンをグリフ上で動かします。pen protocol に対応したグリフオブジェクトは <code>draw()</code> メソッドを持っていますので、これにペンを渡して実行します。先ほどの "L"
のグリフ <code>L</code> を使ってみましょう。</p>

<pre class="code lang-python" data-lang="python" data-unlink>L.draw(recording_pen)
</pre>


<p>ペンで "draw" と言われると、どこかに描く・書き込むのかと思ってしまいがちですが、ここではグリフのアウトラインを「なぞる」行為のことだと捉えてください。この <code>RecordingPen</code> では <code>value</code> 属性になぞった結果が入っていますので、見てみましょう。</p>

<pre class="code lang-python" data-lang="python" data-unlink><span class="synIdentifier">print</span>(recording_pen.value)
</pre>




<pre class="code lang-python" data-lang="python" data-unlink>[(<span class="synConstant">'moveTo'</span>, ((<span class="synConstant">100</span>, <span class="synConstant">0</span>),)),
 (<span class="synConstant">'lineTo'</span>, ((<span class="synConstant">513</span>, <span class="synConstant">0</span>),)),
 (<span class="synConstant">'lineTo'</span>, ((<span class="synConstant">513</span>, <span class="synConstant">79</span>),)),
 (<span class="synConstant">'lineTo'</span>, ((<span class="synConstant">193</span>, <span class="synConstant">79</span>),)),
 (<span class="synConstant">'lineTo'</span>, ((<span class="synConstant">193</span>, <span class="synConstant">733</span>),)),
 (<span class="synConstant">'lineTo'</span>, ((<span class="synConstant">100</span>, <span class="synConstant">733</span>),)),
 (<span class="synConstant">'closePath'</span>, ())]
</pre>


<p>目的どおりアウトラインの内容が出てきました。"L" の左下の点からスタートし、反時計回りにパスが構成されているのが分かります。</p>

<p>もうひとつ、"い" のグリフで試してみるとこうなります。</p>

<pre class="code lang-python" data-lang="python" data-unlink>い = get_glyph(glyph_set, cmap, <span class="synConstant">'い'</span>)
recording_pen = RecordingPen()
い.draw(recording_pen)
<span class="synIdentifier">print</span>(recording_pen.value)
</pre>




<pre class="code lang-python" data-lang="python" data-unlink>[(<span class="synConstant">'moveTo'</span>, ((<span class="synConstant">226</span>, <span class="synConstant">696</span>),)),
 (<span class="synConstant">'lineTo'</span>, ((<span class="synConstant">130</span>, <span class="synConstant">698</span>),)),
 (<span class="synConstant">'curveTo'</span>, ((<span class="synConstant">135</span>, <span class="synConstant">674</span>), (<span class="synConstant">136</span>, <span class="synConstant">633</span>), (<span class="synConstant">136</span>, <span class="synConstant">610</span>))),
 (<span class="synConstant">'curveTo'</span>, ((<span class="synConstant">136</span>, <span class="synConstant">552</span>), (<span class="synConstant">137</span>, <span class="synConstant">432</span>), (<span class="synConstant">147</span>, <span class="synConstant">346</span>))),
 (<span class="synConstant">'curveTo'</span>, ((<span class="synConstant">174</span>, <span class="synConstant">89</span>), (<span class="synConstant">264</span>, -<span class="synConstant">4</span>), (<span class="synConstant">357</span>, -<span class="synConstant">4</span>))),
 (<span class="synConstant">'curveTo'</span>, ((<span class="synConstant">425</span>, -<span class="synConstant">4</span>), (<span class="synConstant">486</span>, <span class="synConstant">53</span>), (<span class="synConstant">545</span>, <span class="synConstant">221</span>))),
 (<span class="synConstant">'lineTo'</span>, ((<span class="synConstant">482</span>, <span class="synConstant">293</span>),)),
 (<span class="synConstant">'curveTo'</span>, ((<span class="synConstant">456</span>, <span class="synConstant">193</span>), (<span class="synConstant">410</span>, <span class="synConstant">91</span>), (<span class="synConstant">359</span>, <span class="synConstant">91</span>))),
 (<span class="synConstant">'curveTo'</span>, ((<span class="synConstant">289</span>, <span class="synConstant">91</span>), (<span class="synConstant">241</span>, <span class="synConstant">200</span>), (<span class="synConstant">225</span>, <span class="synConstant">366</span>))),
 (<span class="synConstant">'curveTo'</span>, ((<span class="synConstant">218</span>, <span class="synConstant">447</span>), (<span class="synConstant">217</span>, <span class="synConstant">538</span>), (<span class="synConstant">218</span>, <span class="synConstant">600</span>))),
 (<span class="synConstant">'curveTo'</span>, ((<span class="synConstant">219</span>, <span class="synConstant">626</span>), (<span class="synConstant">222</span>, <span class="synConstant">672</span>), (<span class="synConstant">226</span>, <span class="synConstant">696</span>))),
 (<span class="synConstant">'closePath'</span>, ()),
 (<span class="synConstant">'moveTo'</span>, ((<span class="synConstant">742</span>, <span class="synConstant">669</span>),)),
 (<span class="synConstant">'lineTo'</span>, ((<span class="synConstant">664</span>, <span class="synConstant">642</span>),)),
 (<span class="synConstant">'curveTo'</span>, ((<span class="synConstant">758</span>, <span class="synConstant">526</span>), (<span class="synConstant">818</span>, <span class="synConstant">330</span>), (<span class="synConstant">835</span>, <span class="synConstant">152</span>))),
 (<span class="synConstant">'lineTo'</span>, ((<span class="synConstant">916</span>, <span class="synConstant">184</span>),)),
 (<span class="synConstant">'curveTo'</span>, ((<span class="synConstant">902</span>, <span class="synConstant">351</span>), (<span class="synConstant">831</span>, <span class="synConstant">554</span>), (<span class="synConstant">742</span>, <span class="synConstant">669</span>))),
 (<span class="synConstant">'closePath'</span>, ())]
</pre>


<p>曲線を中心とした、2つのパスで構成されています。</p>

<h3><code>SVGPathPen</code> を利用して<a class="keyword" href="http://d.hatena.ne.jp/keyword/SVG">SVG</a>を作成する</h3>

<p>今度は応用として、<a href="https://github.com/fonttools/fonttools/blob/master/Lib/fontTools/pens/svgPathPen.py"><code>SVGPathPen</code></a> というペンを使ってみましょう。このペンは、<a class="keyword" href="http://d.hatena.ne.jp/keyword/SVG">SVG</a>の<a href="http://defghi1977.html.xdomain.jp/tech/svgMemo/svgMemo_03.htm">パスデータ文字列</a>を組み立ててくれます。<code>SVGPathPen</code> のコンストラクタは引数に glyphSet をとりますので、最初の方で用意した <code>glyph_set</code> を渡します。</p>

<pre class="code lang-python" data-lang="python" data-unlink><span class="synPreProc">from</span> fontTools.pens.svgPathPen <span class="synPreProc">import</span> SVGPathPen
svg_path_pen = SVGPathPen(glyph_set)
</pre>


<p>グリフ <code>L</code> をなぞった後、<code>getCommands()</code> メソッドでパスデータ文字列を取得します。</p>

<pre class="code lang-python" data-lang="python" data-unlink>L.draw(svg_path_pen)
<span class="synIdentifier">print</span>(svg_path_pen.getCommands())
</pre>




<pre class="code" data-lang="" data-unlink>M100 0H513V79H193V733H100Z</pre>


<p>パスデータ文字列が表示されました。左下の点 <code>100 0</code> からスタートし、水平線 <code>H</code> と垂直線 <code>V</code> でパスが構成されています。</p>

<p>以下のようにガワを手書きして、独立した<a class="keyword" href="http://d.hatena.ne.jp/keyword/SVG">SVG</a>ファイルを作ります。</p>

<pre class="code lang-svg" data-lang="svg" data-unlink><span class="synIdentifier">&lt;svg </span><span class="synType">xmlns</span>=<span class="synConstant">&quot;http://www.w3.org/2000/svg&quot;</span><span class="synIdentifier"> </span><span class="synType">viewBox</span>=<span class="synConstant">&quot;0 0 1000 1000&quot;</span><span class="synIdentifier">&gt;</span>
    <span class="synIdentifier">&lt;path </span><span class="synType">d</span>=<span class="synConstant">&quot;M100 0H513V79H193V733H100Z&quot;</span><span class="synIdentifier">/&gt;</span>
<span class="synIdentifier">&lt;/svg&gt;</span>
</pre>


<p>この<a class="keyword" href="http://d.hatena.ne.jp/keyword/SVG">SVG</a>ファイルをブラウザで表示してみると、こんな感じです。</p>

<p><a href="https://cdn.rawgit.com/mashabow/font-pen-samples/d8994e93/L1.svg"><img src="https://cdn.rawgit.com/mashabow/font-pen-samples/d8994e93/L1.svg"
style="height: 200px"></a></p>

<p>一応「L」のグリフが表示できました。が、上下逆さです。OpenType の座標系では y 軸が上方向に延びていますが、<a class="keyword" href="http://d.hatena.ne.jp/keyword/SVG">SVG</a> では下方向に延びているため、そのままだと上下がひっくり返ってしまいます。<code>transform</code> 属性で上下を逆にし、<code>viewBox</code> 属性も調整しましょう。</p>

<pre class="code lang-svg" data-lang="svg" data-unlink><span class="synIdentifier">&lt;svg </span><span class="synType">xmlns</span>=<span class="synConstant">&quot;http://www.w3.org/2000/svg&quot;</span><span class="synIdentifier"> </span><span class="synType">viewBox</span>=<span class="synConstant">&quot;0 -1000 1000 1000&quot;</span><span class="synIdentifier">&gt;</span>
    <span class="synIdentifier">&lt;path </span><span class="synType">d</span>=<span class="synConstant">&quot;M100 0H513V79H193V733H100Z&quot;</span><span class="synIdentifier"> </span><span class="synType">transform</span>=<span class="synConstant">&quot;scale(1, -1)&quot;</span><span class="synIdentifier">/&gt;</span>
<span class="synIdentifier">&lt;/svg&gt;</span>
</pre>


<p><a href="https://cdn.rawgit.com/mashabow/font-pen-samples/d8994e93/L2.svg"><img src="https://cdn.rawgit.com/mashabow/font-pen-samples/d8994e93/L2.svg"
style="height: 200px"></a></p>

<p>これで正立しました。</p>

<p>最後に、もうちょっといい感じの<a class="keyword" href="http://d.hatena.ne.jp/keyword/SVG">SVG</a>ファイルを生成する関数を定義してみます。</p>

<pre class="code lang-python" data-lang="python" data-unlink><span class="synPreProc">from</span> textwrap <span class="synPreProc">import</span> dedent

<span class="synStatement">def</span> <span class="synIdentifier">save_as_svg</span>(font, char, output_path):
    <span class="synConstant">'''TTFont オブジェクトを受け取り、指定した文字のグリフを SVG として保存する'''</span>
    
    glyph_set = font.getGlyphSet()
    cmap = font.getBestCmap()
    
    <span class="synComment"># グリフのアウトラインを SVGPathPen でなぞる</span>
    glyph = get_glyph(glyph_set, cmap, char)
    svg_path_pen = SVGPathPen(glyph_set)
    glyph.draw(svg_path_pen)

    <span class="synComment"># メトリクスを取得</span>
    ascender = font[<span class="synConstant">'OS/2'</span>].sTypoAscender
    descender = font[<span class="synConstant">'OS/2'</span>].sTypoDescender
    width = glyph.width
    height = ascender - descender
    
    content = dedent(f<span class="synConstant">'''</span><span class="synSpecial">\</span>
<span class="synConstant">        &lt;svg xmlns=&quot;http://www.w3.org/2000/svg&quot; viewBox=&quot;0 {-ascender} {width} {height}&quot;&gt;</span>
<span class="synConstant">            &lt;g transform=&quot;scale(1, -1)&quot;&gt;</span>
<span class="synConstant">                &lt;!-- ボディの枠 --&gt;</span>
<span class="synConstant">                &lt;rect x=&quot;0&quot; y=&quot;{descender}&quot; width=&quot;{width}&quot; height=&quot;{height}&quot;</span>
<span class="synConstant">                    stroke=&quot;cyan&quot; fill=&quot;none&quot;/&gt;</span>
<span class="synConstant">                &lt;!-- グリフ座標系の原点 --&gt;</span>
<span class="synConstant">                &lt;circle cx=&quot;0&quot; cy=&quot;0&quot; r=&quot;5&quot; fill=&quot;blue&quot;/&gt;</span>
<span class="synConstant">                &lt;!-- グリフのアウトライン --&gt;</span>
<span class="synConstant">                &lt;path d=&quot;{svg_path_pen.getCommands()}&quot;/&gt;</span>
<span class="synConstant">            &lt;/g&gt;</span>
<span class="synConstant">        &lt;/svg&gt;</span>
<span class="synConstant">    '''</span>)
    
    <span class="synStatement">with</span> <span class="synIdentifier">open</span>(output_path, <span class="synConstant">'w'</span>) <span class="synStatement">as</span> f:
        f.write(content)
</pre>


<p>"L" と "い" で実行してみます。</p>

<pre class="code lang-python" data-lang="python" data-unlink>save_as_svg(font, <span class="synConstant">'L'</span>, <span class="synConstant">'L.svg'</span>)
save_as_svg(font, <span class="synConstant">'い'</span>, <span class="synConstant">'い.svg'</span>)
</pre>


<p>こんな感じの <a class="keyword" href="http://d.hatena.ne.jp/keyword/SVG">SVG</a> ファイルができました。めでたしめでたし。</p>

<p><a href="https://cdn.rawgit.com/mashabow/font-pen-samples/d8994e93/L.svg"><img src="https://cdn.rawgit.com/mashabow/font-pen-samples/d8994e93/L.svg"
style="height: 200px"></a></p>

<p><a href="https://cdn.rawgit.com/mashabow/font-pen-samples/d8994e93/%E3%81%84.svg"><img src="https://cdn.rawgit.com/mashabow/font-pen-samples/d8994e93/%E3%81%84.svg"
style="height: 200px"></a></p>

<h3>おわりに</h3>

<p>この記事では pen protocol の概要を説明し、ペンを使ってアウトラインを取得したり、<a class="keyword" href="http://d.hatena.ne.jp/keyword/SVG">SVG</a> として表示する方法について見てきました。一方、今回触れなかった話題としては、</p>

<ul>
<li>pen protocol の詳細とペンの定義方法</li>
<li>グリフへの書き込み</li>
<li>ペンを利用したアウトラインの加工</li>
<li>さまざまなペンの紹介</li>
</ul>


<p>などがあります。これらに関しては、またいずれ気が向いたときに記事を書くかもしれません。</p>

<p>なお、今回のファイルは以下の<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%EA%A5%DD%A5%B8%A5%C8%A5%EA">リポジトリ</a>にまとめておきました。<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A4%C9%A4%A6%A4%BE%A4%B4%CD%F8%CD%D1%A4%AF%A4%C0%A4%B5%A4%A4%A1%A3">どうぞご利用ください。</a></p>

<p><iframe src="https://hatenablog-parts.com/embed?url=https%3A%2F%2Fgithub.com%2Fmashabow%2Ffont-pen-samples" title="mashabow/font-pen-samples" class="embed-card embed-webcard" scrolling="no" frameborder="0" style="display: block; width: 100%; height: 155px; max-width: 500px; margin: 10px 0px;"></iframe><cite class="hatena-citation"><a href="https://github.com/mashabow/font-pen-samples">github.com</a></cite></p>
<div class="footnote">
<p class="footnote"><a href="#fn-cc54d3b8" name="f-cc54d3b8" class="footnote-number">*1</a><span class="footnote-delimiter">:</span><span class="footnote-text">若干紛らわしいのですが、segment pen protocol は単に pen protocol と呼ばれることがあります。</span></p>
</div>]]></description>
            <enclosure url="https://cdn.rawgit.com/mashabow/font-pen-samples/d8994e93/%E3%81%84.svg" length="0" type="image/svg"/>
        </item>
        <item>
            <title><![CDATA[Dynamoid の使い方【global_secondary_index 編】]]></title>
            <link>https://developer.feedforce.jp/entry/2017/11/26/195509</link>
            <guid>https://developer.feedforce.jp/entry/2017/11/26/195509</guid>
            <pubDate>Sun, 26 Nov 2017 10:55:09 GMT</pubDate>
            <description><![CDATA[<p>どうも、バックエンドエンジニアのサトウリョウスケです ✌︎('ω')✌︎</p>

<p><a href="http://developer.feedforce.jp/entry/2017/11/04/235323">前回</a>に引き続き、 Dynamoid 第3弾です ✌︎('ω')✌︎</p>

<p>Rails で DynamoDB を利用する際の ORM として <code>dynamoid</code> があります。
今回は <code>dynamoid</code> から Global Secondary Index (GSI) を利用する方法について紹介します。</p>

<ul class="table-of-contents">
    <li><a href="#Global-Secondary-Index-GSI-ってなんぞ">Global Secondary Index (GSI) ってなんぞ</a><ul>
            <li><a href="#今回も名称の整理をしておきます">今回も名称の整理をしておきます</a></li>
            <li><a href="#GSI-は検索のためのインデックス">GSI は検索のためのインデックス</a></li>
            <li><a href="#Local-Secondary-Index-LSI-もあるやで">Local Secondary Index (LSI) もあるやで</a></li>
            <li><a href="#どういう用途で便利なのか">どういう用途で便利なのか</a></li>
        </ul>
    </li>
    <li><a href="#Dynamoid-での利用方法">Dynamoid での利用方法</a><ul>
            <li><a href="#テーブル定義">テーブル定義</a><ul>
                    <li><a href="#where-を使えば-GSI-を使って自動的にクエリで検索してくれる">#where を使えば GSI を使って自動的にクエリで検索してくれる</a></li>
                    <li><a href="#昇順降順を入れ替えたい場合">昇順・降順を入れ替えたい場合</a></li>
                </ul>
            </li>
        </ul>
    </li>
    <li><a href="#まとめ">まとめ</a></li>
</ul>

<p><code>dynamoid</code> の導入方法については以前書いたこちらの記事を参考にしてみて下さい。</p>

<p><iframe src="https://hatenablog-parts.com/embed?url=http%3A%2F%2Ftech.feedforce.jp%2Fdynamodb-setup-on-rails.html" title="DynamoDB を Rails で使えるようにするためのあれこれ | feedforce Engineers&#39; blog" class="embed-card embed-webcard" scrolling="no" frameborder="0" style="display: block; width: 100%; height: 155px; max-width: 500px; margin: 10px 0px;"></iframe><cite class="hatena-citation"><a href="http://tech.feedforce.jp/dynamodb-setup-on-rails.html">tech.feedforce.jp</a></cite></p>

<h1 id="Global-Secondary-Index-GSI-ってなんぞ">Global Secondary Index (GSI) ってなんぞ</h1>

<h2 id="今回も名称の整理をしておきます">今回も名称の整理をしておきます</h2>

<p>文中に Hash Key やら Range Key という名称が出てきますが、現在は名称が異なります。
しかし、 <code>dyanmoid</code> では相変わらず旧名称のまま (<code>hash_key</code>, <code>range_key</code>) でパラメータを指定するので、今回も最初に対応表を記載しておきます。</p>

<table>
<thead>
<tr>
<th style="text-align:center;"> 旧名称 </th>
<th style="text-align:center;"> 現名称 </th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center;"> Hash Key </td>
<td style="text-align:center;"> Partition Key </td>
</tr>
<tr>
<td style="text-align:center;"> Range Key </td>
<td style="text-align:center;"> Sort Key </td>
</tr>
</tbody>
</table>


<h2 id="GSI-は検索のためのインデックス">GSI は検索のためのインデックス</h2>

<p>DynamoDB にはプライマリキーの指定方法として、単一の Partition Key を使用する方法と、Partition Key と Sort Key を組み合わせて使用する方法があります。
これについては前回の【range 編】の記事でも触れました。</p>

<p><iframe src="https://hatenablog-parts.com/embed?url=http%3A%2F%2Fdeveloper.feedforce.jp%2Fentry%2F2017%2F11%2F04%2F235323" title="Dynamoid の使い方【range 編】 - Feedforce Developer Blog" class="embed-card embed-blogcard" scrolling="no" frameborder="0" style="display: block; width: 100%; height: 190px; max-width: 500px; margin: 10px 0px;"></iframe><cite class="hatena-citation"><a href="http://developer.feedforce.jp/entry/2017/11/04/235323">developer.feedforce.jp</a></cite></p>

<p>プライマリキーに指定されたカラムに対してであれば、レコードの抽出や範囲検索などが実行可能となる訳ですが、プライマリキーに指定されていないカラムに対しては検索が実行できず、テーブルのフルスキャンを実行することになってしまい非効率です。そこで、別のカラムに対しても検索を行いたい場合は GSI を設定して、フルスキャンすることなく効率的にデータを抽出できるようにします。</p>

<iframe src="//www.slideshare.net/slideshow/embed_code/key/gHjtA6AS8rk0sB?startSlide=47" width="595" height="485" style="border: 1px solid #CCC; border-width: 1px; margin-bottom: 5px; max-width: 100%;" scrolling="no" marginwidth="0" marginheight="0" frameborder="0"> </iframe>


<p>GSI もプライマリキーの指定と同様に、単一の Partition Key のみで指定することも、 Partition Key と  Sort Key の組み合わせで指定することも可能です。
ただし、 <strong>プライマリキーにはユニーク制約が設定されますが、 GSI にはユニーク制約が存在しない</strong> ので、その点には注意が必要です。</p>

<h2 id="Local-Secondary-Index-LSI-もあるやで">Local Secondary Index (LSI) もあるやで</h2>

<p>LSI の Partition Key はプライマリキーと共通です。Sort Key の部分だけ別に設定したい場合に使用します。その点を除けば GSI とよく似ていますが、こちらはテーブルの作成時にしか定義することができないようです。</p>

<iframe src="//www.slideshare.net/slideshow/embed_code/key/gHjtA6AS8rk0sB?startSlide=46" width="595" height="485" style="border: 1px solid #CCC; border-width: 1px; margin-bottom: 5px; max-width: 100%;" scrolling="no" marginwidth="0" marginheight="0" frameborder="0"> </iframe>


<p>なお、LSI も<code>dynamoid</code> から指定することは可能 (<code>local_secondary_index</code> を使用する) ですが、本稿では触れません。</p>

<h2 id="どういう用途で便利なのか">どういう用途で便利なのか</h2>

<p>あまり複雑なテーブル設計が推奨されない DynamoDB ですが、簡単なテーブル間の関連付けを行いたいシーンが出てきます。親テーブルの ID を結合キーとして子テーブルに設定したい場合などに GSI は便利です。
以下に User Table と User Comment Table の例を示します。User Comment Table には親テーブルである User Table の ID が GSI の Partition Key として設定してあります。また、コメントの投稿日時 (Posted at) を GSI の Sort Key として設定しています。これで User 毎に投稿日時順にソートしたコメントを取得することができるようになります。</p>

<p><strong>User Table</strong></p>

<table>
<thead>
<tr>
<th style="text-align:center;"> ID </th>
<th> name </th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center;"> 1 </td>
<td> John </td>
</tr>
<tr>
<td style="text-align:center;"> 2 </td>
<td> Marry </td>
</tr>
<tr>
<td style="text-align:center;"> 3 </td>
<td> Taro </td>
</tr>
</tbody>
</table>


<p><strong>User Comment Table</strong></p>

<table>
<thead>
<tr>
<th style="text-align:center;"> ID (Primary Partition Key) </th>
<th style="text-align:center;"> User ID (GSI Partition Key) </th>
<th> Posted at (GSI Sort Key) </th>
<th style="text-align:center;"> Comment </th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center;"> 1 </td>
<td style="text-align:center;"> 1 </td>
<td> 1509529916 </td>
<td style="text-align:center;"> Hello </td>
</tr>
<tr>
<td style="text-align:center;"> 2 </td>
<td style="text-align:center;"> 1 </td>
<td> 1509530052 </td>
<td style="text-align:center;"> I am John </td>
</tr>
<tr>
<td style="text-align:center;"> 3 </td>
<td style="text-align:center;"> 1 </td>
<td> 1509530085 </td>
<td style="text-align:center;"> How do you do? </td>
</tr>
<tr>
<td style="text-align:center;"> 4 </td>
<td style="text-align:center;"> 2 </td>
<td> 1509523925 </td>
<td style="text-align:center;"> Thanks a lot! </td>
</tr>
<tr>
<td style="text-align:center;"> 5 </td>
<td style="text-align:center;"> 3 </td>
<td> 1509527628 </td>
<td style="text-align:center;"> こんにちは </td>
</tr>
<tr>
<td style="text-align:center;"> 6 </td>
<td style="text-align:center;"> 3 </td>
<td> 1509527101 </td>
<td style="text-align:center;"> どうも </td>
</tr>
</tbody>
</table>


<p>ちなみに、プライマリキーと GSI を逆に設定してもほぼ成立するのですが、前述したように GSI にはユニーク制約が存在しないので、User Comment Table では ID をプライマリキーとして、重複が生じないように設定してあります。</p>

<h1 id="Dynamoid-での利用方法">Dynamoid での利用方法</h1>

<h2 id="テーブル定義">テーブル定義</h2>

<p>ここからは前述の User Table と User Comment Table を <code>dynamoid</code> から利用する例を示していきます。</p>

<pre class="code" data-lang="" data-unlink>class User
  include Dynamoid::Document

  table name: :users, key: :id

  field :name, :string

  # 現在のユーザーに紐付くコメントを作成する
  def create_comment!(attributes = {})
    attributes[:user_id] = id
    UserComment.new(attributes).tap(&amp;:save!)
  end

  # 現在のユーザーのコメント一覧を取得する
  def comments
    UserComment.where(user_id: id)
  end

  # 現在のユーザーの最終コメントを取得する
  def latest_comment
    comments.scan_index_forward(false).scan_limit(1).all.first
  end
end</pre>




<pre class="code" data-lang="" data-unlink>class UserComment
  include Dynamoid::Document

  table name: :user_comments, key: :id

  field :user_id, :string
  field :posted_at, :datetime

  global_secondary_index hash_key: :user_id, 
                         range_key: :posted_at, 
                         projected_attributes: :all
end</pre>


<p>※ ちなみに <code>dynamoid</code> には <code>has_many</code> を利用して関連テーブルを実現する方法があるのですが、結合キーを親テーブルに持つ設計になるのがあまり好ましくなかったので、自前で実装しています。</p>

<p>いくつか注意する点があって、 <code>global_secondary_index</code> で使用する <code>hash_key</code> と <code>range_key</code> は <code>field</code> で定義されている必要があります。
また、 <code>projected_attributes: :all</code> というオプションをつけないと後述の <code>#where</code> でインデックスを利用した検索が行われません。一旦これが無い状態でリリースとしてしまうと、射影される属性が限定された GSI が作成されてしまい、実行時にエラーになります。その場合は AWS マネジメントコンソールから直接 GSI を作り直す羽目になりますのでご注意ください 🙏</p>

<pre class="code" data-lang="" data-unlink>One or more parameter values were invalid: Select type ALL_ATTRIBUTES is not supported for global secondary index</pre>


<h3 id="where-を使えば-GSI-を使って自動的にクエリで検索してくれる"><code>#where</code> を使えば GSI を使って自動的にクエリで検索してくれる</h3>

<p><code>#comments</code> というメソッドの中で <code>#where</code> を使用した検索が登場しますが、 GSI が設定されていれば特別な記述がなくとも自動的にクエリ検索が行われます。</p>

<pre class="code" data-lang="" data-unlink>UserComment.where(user_id: id)
# =&gt; [#&lt;UserComment:0x00007f44c86183e8&gt;, ...]</pre>


<p>前述の通り <code>projected_attributes: :all</code> が指定されていないとフルスキャンされてしまうのでご注意ください。</p>

<h3 id="昇順降順を入れ替えたい場合">昇順・降順を入れ替えたい場合</h3>

<p><code>#latest_comment</code> というメソッド内で使用していますが、 <code>#scan_index_forward(false)</code> と指定すると降順でソートされた状態で結果が返ってきます。未指定の場合は昇順でソートされます。
また、 <code>#scan_limit(n)</code> と指定することで、先頭から <code>n</code> 件の結果に限定して取得が可能です。<code>#latest_comment</code> ではこれらを組み合わせて最終のコメントを取得しています。</p>

<h1 id="まとめ">まとめ</h1>

<p>本稿では GSI と LSI とプライマリキーの違い、具体的な利用用途を紹介しました。<a href="http://developer.feedforce.jp/entry/2017/11/04/235323">前回の記事</a>でも触れましたが、 <code>dynamoid</code> は初回実行時にテーブルや GSI が存在していないと作成する、という挙動になるため、後で設計を変えたくなった場合に GSI や最悪テーブルを作り直す羽目になります。特に初めて利用する場合は設計の勘所を掴むのが難しいので、リリース前に入念に設計を見直すことをお勧めします。その点では RDS 以上に慎重な設計が求められるように感じています。
色々と気を付けなければならない点も多いですが、並列動作性は非常に高いので、利用したくなるシーンが必ず出てくると思います。その際に本稿が少しでもお役に立てば幸いです 🙏</p>
]]></description>
            <enclosure url="https://cdn.user.blog.st-hatena.com/default_entry_og_image/116461321/1514251518718655" length="0" type="image//default_entry_og_image/116461321/1514251518718655"/>
        </item>
        <item>
            <title><![CDATA[Go で Datadog の Alfred Workflow を作った]]></title>
            <link>https://blog.tsub.me/post/create-alfred-workflow/</link>
            <guid>https://blog.tsub.me/post/create-alfred-workflow/</guid>
            <pubDate>Sun, 26 Nov 2017 07:00:00 GMT</pubDate>
            <description><![CDATA[<p>最近会社の同僚が <a href="http://developer.feedforce.jp/entry/2017/11/13/085404">Alfred Workflow を Go で書いたという LT を発表していて</a>面白そうだったので、自分も書いてみました。</p>

<p>以下のリポジトリで配布しています。</p>

<p><i class="fa fa-github"></i> <a href="https://github.com/tsub/alfred-datadog-workflow">tsub/alfred-datadog-workflow: A Alfred workflow to open Datadog pages</a></p>

<p>Workflow のダウンロードリンクは<a href="https://github.com/tsub/alfred-datadog-workflow/releases">こちら</a>から最新バージョンのものをどうぞ。</p>

<p><img src="https://gyazo.com/378dfd74e772c2d48776c5edd8ce6833.png" alt="image" /></p>

<p></p>]]></description>
        </item>
        <item>
            <title><![CDATA[VSCode ファイル検索の除外設定]]></title>
            <link>https://developer.feedforce.jp/entry/2017/11/24/195644</link>
            <guid>https://developer.feedforce.jp/entry/2017/11/24/195644</guid>
            <pubDate>Fri, 24 Nov 2017 10:56:44 GMT</pubDate>
            <description><![CDATA[<div style="border-radius: 5px; padding:1.3rem; margin-bottom: 2.3rem; background: #e0efe0;">
<strong>2019/10/15 追記</strong> 現在（Version 1.39.1）の VSCode では詳細検索オプションの内容が異なっております。詳しくは <a href="https://code.visualstudio.com/docs/editor/codebasics#_advanced-search-options" >公式ドキュメントをご参照ください</a>。本文記事中の VS Code バージョンはもっと古いです。
</div>


<p><a href="https://ac-pocketcamp.com/ja-JP/site">ポケ森</a> ⛺キャンパーレベル
 18 の引きこもり <a href="http://blog.hatena.ne.jp/tmd45/" class="hatena-id-icon"><img src="https://cdn.profile-image.st-hatena.com/users/tmd45/profile.png" width="16" height="16" alt="" class="hatena-id-icon">id:tmd45</a>です。鉱石掘りのお手伝いはお気軽にお申し付けください。</p>

<p>VSCode のファイル検索の恒久的な除外条件は「基本設定」から行います。</p>

<pre class="code lang-json" data-lang="json" data-unlink><span class="synError">// 検索でファイルとフォルダーを除外するために glob パターンを構成します。</span>
<span class="synError">// files.exclude 設定からすべての glob パターンを継承します。</span>
&quot;<span class="synStatement">search.exclude</span>&quot;: <span class="synSpecial">{</span>
  &quot;<span class="synStatement">**/node_modules</span>&quot;: <span class="synConstant">true</span>,
  &quot;<span class="synStatement">**/bower_components</span>&quot;: <span class="synConstant">true</span>
<span class="synSpecial">}</span>,

<span class="synError">// 新しいワークスペースでテキストを検索するときに、</span>
<span class="synError">// 既定で .gitignore ファイルと .ignore ファイルを使用するかどうかを制御します。</span>
&quot;<span class="synStatement">search.useIgnoreFilesByDefault</span>&quot;: <span class="synConstant">false</span>,
</pre>


<p>この設定をすると <code>Cmd + P</code> によるファイル移動の候補から、指定したものを除外することができます。</p>

<p>後者の <code>.gitignore</code> <code>.ignore</code> による除外を有効にしておけば、<code>search.exclude</code> を個別に書かなくてもいい感じに除外されてハッピーです。</p>

<p>この設定を Explorer の「検索」 <code>Cmd + Shift + F</code> でも有効にするには「詳細検索の切り替え」（検索ボックス右下の <i class="fa fa-ellipsis-h"></i> マーク）で詳細検索オプションを開き「無視設定ファイルを使用します」を ON にします。</p>

<p><span itemscope itemtype="http://schema.org/Photograph"><img src="https://cdn-ak.f.st-hatena.com/images/fotolife/t/tmd45/20171124/20171124195104.png" alt="f:id:tmd45:20171124195104p:plain:w300" title="f:id:tmd45:20171124195104p:plain:w300" class="hatena-fotolife" style="width:300px" itemprop="image"></span></p>

<p>このボタンに気づくまでに時間がかかってしまいました…( ´・ω・`)</p>
]]></description>
            <enclosure url="https://cdn-ak.f.st-hatena.com/images/fotolife/t/tmd45/20171124/20171124195104.png" length="0" type="image/png"/>
        </item>
        <item>
            <title><![CDATA[iPhone X 64GB SIM フリー版を買って一週間経った]]></title>
            <link>https://masutaka.net/2017-11-18-1/</link>
            <guid>https://masutaka.net/2017-11-18-1/</guid>
            <pubDate>Sat, 18 Nov 2017 00:00:00 GMT</pubDate>
            <description><![CDATA[[2013-10-14-1] に iPhone 5s 64GB、[2015-09-29-1] に iPhone 6s 64GB、
という流れで iPhone X 64GB を購入しました（iPhone 4 と iPhone 4s
も買ったけど記事を書いてなかった）。値段は忘却の彼方です&hellip;。
loading...
   if (localStorage.getItem("pref-theme") === "light") { const elements = document.getElementsByClassName('twitter-tweet'); for (let i = 0; i  予約から入手まで 今回初めて予約開始日に予約しました。[2017-02-25-1] に au から
IIJmio に乗り換えたので、初めての物理店舗を介さずの購入です。
10/27（金）16:01 と同時に https://www.apple.com/jp/ にアクセスして
予約成功。ストアを表示できるまで、5~10 分ほどかかりました。
自宅に届いたのは 11/11（土）の 11:00 過ぎ。予約時には「出荷は 2~3
週間」と出ていたので、予想より少し早かったです。そもそも予約前は年
内に届くとは思っていなかったので、大満足です。
セットアップ SIM カードを別の機種に入れ替えるのは初めてだったので、内心ドキドキ
でした。
ですが、誘導されるがままに進めると、iPhone 6s と Bluetooth で繋い
でからの最新の iCloud バックアップ作成から、iPhone X への復元など、]]></description>
        </item>
        <item>
            <title><![CDATA[golang.tokyo #10 x WomenWhoGoTokyo に行ってきた #golangtokyo]]></title>
            <link>https://masutaka.net/2017-11-16-1/</link>
            <guid>https://masutaka.net/2017-11-16-1/</guid>
            <pubDate>Thu, 16 Nov 2017 00:00:00 GMT</pubDate>
            <description><![CDATA[golang.tokyo #10 x WomenWhoGoTokyo golang.tokyo #2 以来、久々に参加してきました。運営の皆様、ありがと
うございました。
MacBook Air を持っていくのが面倒になったので、リュウドの折りたたみ
キーボード [2010-11-15-1] を引っ張り出して持っていたけど、机がなく
使うのは断念。でもその分、聞くことに集中できた気はする。
テキスト審査 in Pairs ※ TODO: 資料が公開されたらここに貼る
後藤勝哉さん／株式会社エウレカ
後藤さんが高熱のため、同じエウレカの森川さんが代わりに発表。
業者などの悪徳ユーザを、サインアップやマッチング成立後にどのように
除外しているかのお話。
kagome という形態素解析ライブラリを使った go-jp-text-ripper を使っ
てワードフィルタリングしている。go-jp-text-ripper の作者は、今回代
理で発表している森川さん！
Kuromoji も使っていたんだっけかな。忘れた。他に正規表現や機械学習
も使っていて、相当泥臭い。
3か月でフィルタリングルールは使えなくなる。イタチごっこ。
怪しいものは通さない。Slack で CS に通知して、最終的には人間が確認
する。
現在はエンジニアも運用に関わっているとのこと。気になったので質問し
てみた。
inerfaceとの付き合い   micchieさん／WomenWhoGoTokyo
私は inerface は理解したつもりではいますが、実践で使ってないので、
多分まだ理解できていないでしょう&hellip;。
こういう使い捨てスクリプトはつい慣れた言語を使ってしまう。micchie
さんの場合、PHP じゃなくて golang を使ったのはどういう意識だったの
かな。
メルカリ カウルのマスタデータの更新  tenntennさん／株式会社ソウゾウ
GCS 上の 50MB の TSV ファイルを分割しながら（行単位ではない！）、
RDS に入れていくお話。
Transfer の実装は気が狂いそうになるらしい。バイト列の処理はそこそ]]></description>
        </item>
        <item>
            <title><![CDATA[VSCode の Multi-root workspace]]></title>
            <link>https://developer.feedforce.jp/entry/2017/11/14/121634</link>
            <guid>https://developer.feedforce.jp/entry/2017/11/14/121634</guid>
            <pubDate>Tue, 14 Nov 2017 03:16:34 GMT</pubDate>
            <description><![CDATA[<p>元 Vim 使いの <a href="http://blog.hatena.ne.jp/tmd45/" class="hatena-id-icon"><img src="https://cdn1.www.st-hatena.com/users/tm/tmd45/profile.gif" width="16" height="16" alt="" class="hatena-id-icon">id:tmd45</a> です。<a href="http://blog.tmd45.jp/entry/2017/08/05/132028">今年諸事情で VSCode に乗り換えた</a>ばかり。</p>

<p>Version 1.18.0 の新機能 Multi-root workspace が仕事で便利というだけのお話。</p>

<p><iframe src="https://hatenablog-parts.com/embed?url=https%3A%2F%2Fcode.visualstudio.com%2Fupdates%2Fv1_18" title="Visual Studio Code October 2017" class="embed-card embed-webcard" scrolling="no" frameborder="0" style="display: block; width: 100%; height: 155px; max-width: 500px; margin: 10px 0px;"></iframe><cite class="hatena-citation"><a href="https://code.visualstudio.com/updates/v1_18">code.visualstudio.com</a></cite></p>

<p>関わってるプロダクトの関連するリポジトリがたくさんあるので（バックエンド、フロント、インフラ、その他…）まとめられるのはありがたい。</p>

<p><span itemscope itemtype="http://schema.org/Photograph"><img src="https://cdn-ak.f.st-hatena.com/images/fotolife/t/tmd45/20171114/20171114120408.png" alt="f:id:tmd45:20171114120408p:plain:h230" title="f:id:tmd45:20171114120408p:plain:h230" class="hatena-fotolife" style="height:230px" itemprop="image"></span> <span itemscope itemtype="http://schema.org/Photograph"><img src="https://cdn-ak.f.st-hatena.com/images/fotolife/t/tmd45/20171114/20171114120955.png" alt="f:id:tmd45:20171114120955p:plain:h230" title="f:id:tmd45:20171114120955p:plain:h230" class="hatena-fotolife" style="height:230px" itemprop="image"></span></p>

<p>git 関連の拡張をいろいろ入れてるので、どこまで標準機能か分からなくなってますが、このソース管理タブもいい感じですね。</p>

<p>最近さわってないリポジトリが一目瞭然だずぇ…</p>
]]></description>
            <enclosure url="https://cdn-ak.f.st-hatena.com/images/fotolife/t/tmd45/20171114/20171114120408.png" length="0" type="image/png"/>
        </item>
        <item>
            <title><![CDATA[【2017/11/16 に訂正を追記しました】 社内 LT 大会で「ここがつらいよ ECS」というタイトルで発表しました]]></title>
            <link>https://developer.feedforce.jp/entry/2017/11/13/183623</link>
            <guid>https://developer.feedforce.jp/entry/2017/11/13/183623</guid>
            <pubDate>Mon, 13 Nov 2017 09:36:23 GMT</pubDate>
            <description><![CDATA[<h2>[追記] この記事の内容について訂正</h2>

<p>この記事内、及び Speaker Deck に投稿したスライドの中で誤っていた箇所があったため、訂正致します。</p>

<p>「ECS Optimized AMI では ecs-agent のバージョンが固定されない」という内容ですが、そういった問題はありませんでした。</p>

<p>AWS の方から直接アドバイスを頂いたところ、弊社が使用していた User Data のスクリプト内で <code>$ yum update</code> を実行していたことが原因となっていました。
<code>$ yum update</code> によりインスタンスを新規に立てた際に常に最新の ecs-agent や Docker がインストールされていました。</p>

<p>そのため、ECS Optimized AMI によってインストールされる ecs-agent と Docker のバージョンは以下のドキュメントで提示されているバージョンが常にインストールされることになります。</p>

<p><iframe src="https://hatenablog-parts.com/embed?url=http%3A%2F%2Fdocs.aws.amazon.com%2FAmazonECS%2Flatest%2Fdeveloperguide%2Fcontainer_agent_versions.html" title="Amazon ECS Container Agent Versions - Amazon EC2 Container Service" class="embed-card embed-webcard" scrolling="no" frameborder="0" style="display: block; width: 100%; height: 155px; max-width: 500px; margin: 10px 0px;"></iframe><cite class="hatena-citation"><a href="http://docs.aws.amazon.com/AmazonECS/latest/developerguide/container_agent_versions.html">docs.aws.amazon.com</a></cite></p>

<p>スライド中でも紹介しているように、一番困っていた問題が解消されたため AWS のサポートの方には非常に感謝をしております。</p>

<p>誤った情報を公開してしまい、申し訳ありませんでした。</p>

<hr />

<p>こんにちは、バックエンドエンジニアの tsub (<a href="http://blog.hatena.ne.jp/tsub511/" class="hatena-id-icon"><img src="https://cdn1.www.st-hatena.com/users/ts/tsub511/profile.gif" width="16" height="16" alt="" class="hatena-id-icon">id:tsub511</a>) です。</p>

<p>先日の社内 LT 大会にて、「ここがつらいよ ECS」というタイトルで発表してきました。</p>

<p>社内 LT 大会の記事についてはこちらをご覧ください。</p>

<p><iframe src="https://hatenablog-parts.com/embed?url=http%3A%2F%2Fdeveloper.feedforce.jp%2Fentry%2F2017%2F11%2F11%2F205600" title="FFLT開催しました！ - Feedforce Developer Blog" class="embed-card embed-blogcard" scrolling="no" frameborder="0" style="display: block; width: 100%; height: 190px; max-width: 500px; margin: 10px 0px;"></iframe><cite class="hatena-citation"><a href="http://developer.feedforce.jp/entry/2017/11/11/205600">developer.feedforce.jp</a></cite></p>

<p>私が発表したスライドはこちらです。</p>

<script async class="speakerdeck-embed" data-id="4b214465b598443dbb55cfa35cd56aa3" data-ratio="1.33333333333333" src="//speakerdeck.com/assets/embed.js"></script>


<p>せっかくですので、スライドにて紹介している「第一位 ecs-agent と Docker のバージョンが勝手に上がる」についてもう少し詳しく解説をしたいと思います。</p>

<h2>ECS を用いたバッチシステムの運用について</h2>

<p>弊社では Amazon ECS を用いたバッチシステムを運用しています。</p>

<p>Amazon ECS を用いたバッチシステムについての詳細は以前弊社の新卒エンジニアが書いてくれたので、こちらの記事をご覧ください。</p>

<p><iframe src="https://hatenablog-parts.com/embed?url=https%3A%2F%2Fwww.wantedly.com%2Fcompanies%2Ffeedforce%2Fpost_articles%2F59811" title="新卒１年目がバッチサーバーにECSを使ってDockerを導入した話 | feedforce Story" class="embed-card embed-webcard" scrolling="no" frameborder="0" style="display: block; width: 100%; height: 155px; max-width: 500px; margin: 10px 0px;"></iframe><cite class="hatena-citation"><a href="https://www.wantedly.com/companies/feedforce/post_articles/59811">www.wantedly.com</a></cite></p>

<h2>ecs-agent について</h2>

<p><a href="https://github.com/aws/amazon-ecs-agent">ecs-agent</a> とは、Amazon ECS にインスタンスを認識させるために動かす必要のあるエージェントです。</p>

<p><iframe src="https://hatenablog-parts.com/embed?url=https%3A%2F%2Fgithub.com%2Faws%2Famazon-ecs-agent" title="aws/amazon-ecs-agent" class="embed-card embed-webcard" scrolling="no" frameborder="0" style="display: block; width: 100%; height: 155px; max-width: 500px; margin: 10px 0px;"></iframe><cite class="hatena-citation"><a href="https://github.com/aws/amazon-ecs-agent">github.com</a></cite></p>

<p><a href="https://hub.docker.com/r/amazon/amazon-ecs-agent/">Docker イメージが配布されていて</a>、通常はコンテナとして立ち上げます。</p>

<p><a href="http://docs.aws.amazon.com/AmazonECS/latest/developerguide/ecs-optimized_AMI.html">ECS Optimized AMI</a> を利用していれば、インスタンスを起動したタイミングで勝手に立ち上げてくれるので、特に意識せずとも ECS を使えると思います。</p>

<p><iframe src="https://hatenablog-parts.com/embed?url=http%3A%2F%2Fdocs.aws.amazon.com%2FAmazonECS%2Flatest%2Fdeveloperguide%2Fecs-optimized_AMI.html" title="Amazon ECS-Optimized AMI - Amazon EC2 Container Service" class="embed-card embed-webcard" scrolling="no" frameborder="0" style="display: block; width: 100%; height: 155px; max-width: 500px; margin: 10px 0px;"></iframe><cite class="hatena-citation"><a href="http://docs.aws.amazon.com/AmazonECS/latest/developerguide/ecs-optimized_AMI.html">docs.aws.amazon.com</a></cite></p>

<p>ただし、ECS においてはこの ecs-agent がコンテナの配置、監視などを行っているため、かなり重要な役割となりますので、無視してはいけない存在です。</p>

<h2>ecs-agent のバグによりいくつかのタスクが起動しなかった</h2>

<p>以前、以下の Issue で取り上げられている ecs-agent v1.14.2 のバグにより ECS でいくつかのタスクが起動しなくなっていました。</p>

<p><iframe src="https://hatenablog-parts.com/embed?url=https%3A%2F%2Fgithub.com%2Faws%2Famazon-ecs-agent%2Fissues%2F833" title="1.14.2 causing container instances to grind to a halt · Issue #833 · aws/amazon-ecs-agent" class="embed-card embed-webcard" scrolling="no" frameborder="0" style="display: block; width: 100%; height: 155px; max-width: 500px; margin: 10px 0px;"></iframe><cite class="hatena-citation"><a href="https://github.com/aws/amazon-ecs-agent/issues/833">github.com</a></cite></p>

<p>2017/06/08 に ecs-agent を全コンテナインスタンスで v1.14.2 にアップデートしたことにより、06/08 から 06/13 にかけて 6 つのタスクが PENDING 状態のまま止まっていてインシデントが起きてしまいました。</p>

<p>この時は、上記 Issue でも書かれているように、一旦 <code>amazon/amazon-ecs-agent:latest</code> イメージにバグが発生する以前の v1.14.1 を Push し直してくれたことで、バージョンをロールバックすることはできました。</p>

<p>ただ、このような問題を再度起こさないためにも ecs-agent のバージョンは固定したいところですが、固定はできないという問題がここで発覚しました。</p>

<h2>ECS Optimized AMI では ecs-agent のバージョンが固定されない</h2>

<p>ECS Optimized AMI を使っていれば ecs-agent を自動的に立ち上げてくれますが、これが少々曲者です。</p>

<p>ECS Optimized AMI を使ってインスタンスを立ち上げた時、起動する ecs-agent のバージョンは常に最新のものが使われるのです。</p>

<p>しかも、AMI の中に ecs-agent がパッケージングされているかと思ったら、AMI をアップデートせずとも、インスタンスを新しく起動したら最新の ecs-agent が自動的に使用されます。</p>

<p>更に言うと、この ecs-agent のバージョンをユーザーが固定することはできず、最新バージョンしか選択肢がありません。</p>

<p>そのため、上述したようなバグが ecs-agent に含まれてしまった場合に回避不可能になります。</p>

<p>新たにインスタンスを立ち上げず、手動で ecs-agent をアップデートしなければ今動いてるもののバージョンが変わることはありませんが、オートスケーリングの設定をしていた場合、スケールアウトしたらそのインスタンスからは最新の ecs-agent が使われてしまう、という状況です。</p>

<p>この回避不可能な仕様に日々悩まされています。</p>

<p>ちなみに、Docker のバージョンも ecs-agent と同じようにバージョンが固定されていません。</p>

<h2>どう運用しているか</h2>

<p>では、弊社ではどう運用しているかというと、一部のコンテナインスタンスにカナリアリリース的にアップデートし、しばらく最新バージョンの ecs-agent をクラスタの中に紛れ込ませて稼働させておきます。</p>

<p>例えば 10 台のコンテナインスタンスを動かしていたとして、その内の 2, 3 台だけ ecs-agent をアップデートします。</p>

<p>アップデート自体は AWS コンソールから可能ですので簡単です。</p>

<p>数台だけアップデートした後 1, 2 週間ほど経ってから <a href="https://github.com/aws/amazon-ecs-agent/issues">ecs-agent の Issue</a> を確認して、特に大きな問題が起きてなさそうなら全台アップデートする、というような運用をしています。</p>

<p>これで今のところ ecs-agent のバグを踏む確率は多少減ったかな、という印象です。</p>

<h2>まとめ</h2>

<ul>
<li>ecs-agent のアップデートによりバグが入り込む可能性がある</li>
<li>ECS Optimized AMI における ecs-agent と Docker のバージョン固定はできず、新しいインスタンスを起動すると最新が使われる</li>
<li>一部のコンテナインスタンスだけアップデートし、しばらく経って問題なければ全台アップデートする、という運用をしている</li>
</ul>


<p>というわけで、今後も ECS による運用を続けていきますが、何か良いソリューションがあれば教えていただきたい次第です。</p>
]]></description>
            <enclosure url="https://cdn-ak.f.st-hatena.com/images/fotolife/t/tsub511/20171113/20171113173603.jpg" length="0" type="image/jpg"/>
        </item>
        <item>
            <title><![CDATA[『PromiseとAsync-Awaitまとめ（Emacsで）』という LT をした]]></title>
            <link>https://masutaka.net/2017-11-12-1/</link>
            <guid>https://masutaka.net/2017-11-12-1/</guid>
            <pubDate>Sun, 12 Nov 2017 00:00:00 GMT</pubDate>
            <description><![CDATA[社内で久しぶりに LT 大会が開かれたので、私も発表しました。
  ちなみにお題をこれに決めたきっかけは、[2017-10-21-1] で async.el を調べた時に promise.el と async-await.el の存在を知ったからです。
予定通り(?)デモの途中で時間オーバーになったので、それぞれ解説して
いきます。
解説 まずは同期処理から。2 行目で call-process が子プロセスとして sh が、
孫プロセスとして sleep が起動した後、Message Box がポップアップし
ます。同期処理なので call-process の間 Emacs は固まります。
 start-process で非同期処理にしました。Emacs は固まらなくなりました
が、コード量は増えてしまいました。let ではなく setq 使っているのは、
発表での説明簡略化のためです。
 lambda で関数を減らしました。場合によってはアリです。
 make-process を使ってみました。動作は変わりませんが、こちらの方が
分かりやすいかもしれません。
 これも lambda で関数を減らすことは出来ます。ただ、同期処理と比べる
と相変わらずコード量が多いです。非同期処理にしたいだけなのに。
 ここで promise.el の登場です。ビルトインライブラリではないので、
package.el 等でインストールします。
Promise に馴染みのある人であれば、読みやすいコードなのかもしれません。
 8 行目でゼロ除算エラーを発生させました。promise-catch によって無事
catch されます。エラーの有無に関わらずその後 done は通ります。]]></description>
        </item>
        <item>
            <title><![CDATA[RSpec 3.5 から shared_context の使い方が少し変わっていた]]></title>
            <link>https://masutaka.net/2017-11-10-2/</link>
            <guid>https://masutaka.net/2017-11-10-2/</guid>
            <pubDate>Fri, 10 Nov 2017 01:00:00 GMT</pubDate>
            <description><![CDATA[RSpec 3.5 から shared_context のメタデータの使い方に変更があったの
でメモ。
このようなテストがあったとします。
context &#39;given login&#39; do let(:user) { create(:user) } before { signin_as user } ... end shared_context を使うと、このように書くことが出来ます。
同じ context を複数で使いたい場合に便利です。
shared_context &#39;User signin&#39; do let(:user) { create(:user) } before { signin_as user } end context &#39;given login&#39; do include_context &#39;User signin&#39; ... end RSpec 3.4 までは、メタデータを使ってこのように省略することが出来ま
した。
shared_context &#39;User signin&#39;, :signin do let(:user) { create(:user) } before { signin_as user } end context &#39;given login&#39;, :signin do .]]></description>
        </item>
        <item>
            <title><![CDATA[S3 の public バケットで特定パス以下を IP アドレス制限する]]></title>
            <link>https://masutaka.net/2017-11-10-1/</link>
            <guid>https://masutaka.net/2017-11-10-1/</guid>
            <pubDate>Fri, 10 Nov 2017 00:00:00 GMT</pubDate>
            <description><![CDATA[全体を Allow したあとに、制限したいパスに対して Deny を追加すれば
可能。
例えば以下の場合。
https://s3-ap-northeast-1.amazonaws.com/masutaka-hoge/aaa/ *
→ インターネットに全公開
https://s3-ap-northeast-1.amazonaws.com/masutaka-hoge/bbb/ *
→ IP アドレス AAA.BBB.CCC.DDD からのアクセスのみ許可
このようなポリシーになる。
{ &#34;Id&#34;: &#34;Policy1234567890&#34;, &#34;Version&#34;: &#34;2012-10-17&#34;, &#34;Statement&#34;: [ { &#34;Sid&#34;: &#34;Stmt0123456789&#34;, &#34;Action&#34;: [ &#34;s3:GetObject&#34; ], &#34;Effect&#34;: &#34;Allow&#34;, &#34;Resource&#34;: &#34;arn:aws:s3:::masutaka-hoge/*&#34;, &#34;Principal&#34;: &#34;*&#34; }, { &#34;Sid&#34;: &#34;Stmt9876543210&#34;, &#34;Action&#34;: [ &#34;s3:GetObject&#34; ], &#34;Effect&#34;: &#34;Deny&#34;, &#34;Resource&#34;: &#34;arn:aws:s3:::masutaka-hoge/bbb/*&#34;, &#34;Condition&#34;: { &#34;NotIpAddress&#34;: { &#34;aws:SourceIp&#34;: &#34;AAA.BBB.CCC.DDD&#34; } }, &#34;Principal&#34;: &#34;*&#34; } ] } S3 の Console の Bucket の Permissions → Bucket Policy で上記ポリ]]></description>
        </item>
        <item>
            <title><![CDATA[Serverlessconf Tokyo 2017 に参加してきました]]></title>
            <link>https://developer.feedforce.jp/entry/2017/11/05/111553</link>
            <guid>https://developer.feedforce.jp/entry/2017/11/05/111553</guid>
            <pubDate>Sun, 05 Nov 2017 02:15:53 GMT</pubDate>
            <description><![CDATA[<p>どうも、バックエンドエンジニアのサトウリョウスケです ✌︎('ω')✌︎</p>

<p>先日のおとうふ先生の記事にもあったように、<a href="http://tokyo.serverlessconf.io/">Serverlessconf Tokyo 2017</a> というイベントが都内で開催されておりました。</p>

<p><iframe src="https://hatenablog-parts.com/embed?url=http%3A%2F%2Fdeveloper.feedforce.jp%2Fentry%2F2017%2F11%2F02%2F221452" title="Serverlessconf Tokyo 2017 で IBM Cloud Functions のアツい話を聞いてきた - Feedforce Developer Blog" class="embed-card embed-blogcard" scrolling="no" frameborder="0" style="display: block; width: 100%; height: 190px; max-width: 500px; margin: 10px 0px;"></iframe><cite class="hatena-citation"><a href="http://developer.feedforce.jp/entry/2017/11/02/221452">developer.feedforce.jp</a></cite></p>

<p>11/3(金) のメインカンファレンスには弊社からも5名ほど参加しており、みんな大学生の頃の100倍くらい意識高く勉強して参りました ✌︎('ω')✌︎
お昼ご飯に弁当出たのが嬉しかったです ✌︎('ω')✌︎
あと、馴染みあるメンツでカンファレンス行くと、終わってから飲みに行けるのも良いですね ✌︎('ω')✌︎</p>

<p>さて、今回の記事では当日の発表内容についていくつかダイジェストと感想を書いていきたいと思います。</p>

<p>スライドはこちらのサイトでまとめられているようで大変助かります 🙏</p>

<p><iframe src="https://hatenablog-parts.com/embed?url=http%3A%2F%2Fwww.n-novice.com%2Fentry%2F2017%2F11%2F03%2F240000" title="Serverlessconf Tokyo 2017 公開資料 - にわかエンジニア好きなことを書く備忘録" class="embed-card embed-blogcard" scrolling="no" frameborder="0" style="display: block; width: 100%; height: 190px; max-width: 500px; margin: 10px 0px;"></iframe><cite class="hatena-citation"><a href="http://www.n-novice.com/entry/2017/11/03/240000">www.n-novice.com</a></cite></p>

<h1>サーバレスアーキテクチャによる時系列データベースの構築と監視</h1>

<script async class="speakerdeck-embed" data-id="c1e5e041140945188ca5b0de4ee32f34" data-ratio="1.77777777777778" src="//speakerdeck.com/assets/embed.js"></script>


<ul>
<li>Mackerel という監視サービスをどのように監視・管理しているのか、というお話</li>
<li>時系列データベースの構成

<ul>
<li>Kinesis Streams へ保存</li>
<li>Lambda で Redis へ保存</li>
<li>Redis に一定件数溜まったら DynamoDB へ保存

<ul>
<li>一度 Redis を挟んでいるのは書き込みコストを抑えるため</li>
</ul>
</li>
<li>DyanmoDB の TTL を超えるデータは S3 へ保存</li>
</ul>
</li>
<li>データの参照性に合わせて書き込み先を変更しているのはナルホド</li>
<li>監視についてまとめ

<ul>
<li>メトリックを可視化して眺めよう</li>
<li>監視の基礎は平常状態を知ること</li>
<li>系全体の可用性を監視しよう</li>
</ul>
</li>
</ul>


<p>Serverless を使った具体的な設計例として、とても参考になります。
時系列データベースの実装として、複数のストレージを上手く組み合わせて設計されているのは色々なシーンで応用できる設計例ではないでしょうか。</p>

<h1>Java チームが選択したTypeScript による AWS Lambda 開発</h1>

<p><a href="http://riotz.works/slides/?2017-serverless-conf">Slides | Riotz Works</a></p>

<ul>
<li>固定 IP を実現するには VPC lambda が必要

<ul>
<li>VPC の lambda はすごく遅い</li>
<li>固定 IP に対する需要は現在も一定数あるようなので。。。（日本では特に）</li>
</ul>
</li>
<li>マイクロ化が過剰で複雑になった

<ul>
<li>どの程度の粒度でサービスを切り分けていくか、というのは相変わらずセンスが問われるな、という印象</li>
</ul>
</li>
<li>言語毎に実行速度がずいぶん違う

<ul>
<li>一度 Java で実装して、スピードが出ずに TypeScript で実装し直した

<ul>
<li>Java は初回実行時はオーバーヘッドが大きい</li>
<li>バッチ処理のように計算量が多い処理であれば Java の方が速いようです</li>
<li>AWS Lambdaの処理性能を言語毎に測ってみた

<ul>
<li><a href="http://acro-engineer.hatenablog.com/entry/2016/08/02/120000">http://acro-engineer.hatenablog.com/entry/2016/08/02/120000</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>


<h1>Serverlessの世界に特別なことなんて何もなかった</h1>

<p><iframe src="https://hatenablog-parts.com/embed?url=https%3A%2F%2Fslideship.com%2Fusers%2F%40marcy-terui%2Fpresentations%2F2017%2F11%2F5vUYExsSUrPbyjyjKA7J99%2F" title="The mind of Serverless as a Software - Serverlessの世界に特別なことなんて何もなかった -" class="embed-card embed-webcard" scrolling="no" frameborder="0" style="display: block; width: 100%; height: 155px; max-width: 500px; margin: 10px 0px;"></iframe><cite class="hatena-citation"><a href="https://slideship.com/users/@marcy-terui/presentations/2017/11/5vUYExsSUrPbyjyjKA7J99/">slideship.com</a></cite></p>

<ul>
<li>Serverless でよくある課題と解決

<ul>
<li>Functionの適切な分割・統合</li>
<li>Functionやサービス間のデータの受け渡し</li>
<li>外部サービスの呼び出しとエラーハンドリング</li>
<li>テスト</li>
</ul>
</li>
<li>スライドに色々な Tips が詳しく書かれているので一読すると吉

<ul>
<li>ただ、紹介されている方法だと Lambda Function の粒度がかなり細かくなるので、その辺の管理は大丈夫なのか気になりました</li>
<li>マイクロ化しすぎ問題とかは大丈夫でしょうか？</li>
</ul>
</li>
<li>どういうサービスが Serverless に向いているのか、という話も出てくるので参考になります

<ul>
<li>個人的には特性を押さえた上で、従来の Rails のようなアプリケーションと Serverless をハイブリッドに組み合わせて使うのが良いと考えています</li>
</ul>
</li>
</ul>


<h1>Serverlessとか言う前に知ってほしいDBのこと</h1>

<p><iframe src="https://hatenablog-parts.com/embed?url=https%3A%2F%2Fslideship.com%2Fusers%2F%40marcy-terui%2Fpresentations%2F2017%2F11%2FNV8cP63mxs1tLw4qkct7Xd%2F" title="Serverlessとか言う前に知ってほしいDBのこと" class="embed-card embed-webcard" scrolling="no" frameborder="0" style="display: block; width: 100%; height: 155px; max-width: 500px; margin: 10px 0px;"></iframe><cite class="hatena-citation"><a href="https://slideship.com/users/@marcy-terui/presentations/2017/11/NV8cP63mxs1tLw4qkct7Xd/">slideship.com</a></cite></p>

<ul>
<li>一個前のと同じ登壇者の方

<ul>
<li>こちらは DB についての tips</li>
<li>いい感じに煽られていたので、来週弊社で開催される <a href="http://developer.feedforce.jp/entry/2017/11/02/190000">LT大会</a> でもこんな感じのノリを期待しています ✌︎('ω')✌︎

<ul>
<li><a href="http://developer.feedforce.jp/entry/2017/11/02/190000">&#x793E;&#x5185;LT&#x5927;&#x4F1A;&#x6E96;&#x5099;&#x4E2D; - Feedforce Developer Blog</a></li>
</ul>
</li>
</ul>
</li>
<li>非同期で並列数を制限すれば RDS を Lambda から利用しても問題ない

<ul>
<li>同時接続数が爆発しないように調整して使えば OK

<ul>
<li>Lambda から RDS を使ってはいけない、というのがセオリーだったので、使えると言い切る人がいたのはインパクトあった</li>
<li>まあ確かに。例えば AWS Aurora の db.r3.large だと 最大接続数が 1,000 ある

<ul>
<li><a href="http://docs.aws.amazon.com/ja_jp/AmazonRDS/latest/UserGuide/Aurora.Managing.html#Aurora.Managing.MaxConnections">http://docs.aws.amazon.com/ja_jp/AmazonRDS/latest/UserGuide/Aurora.Managing.html#Aurora.Managing.MaxConnections</a></li>
</ul>
</li>
<li>同時に 1,000 を超える Lambda が実行されなければ理屈の上では大丈夫なはず</li>
<li>用法用量を守って正しくお使いください、というやつか。。</li>
</ul>
</li>
</ul>
</li>
<li>DynamoDB でフルスキャンしたら負け

<ul>
<li>この辺は最近自分でも勉強していたので再確認しながら聞いていました（宣伝）</li>
</ul>
</li>
</ul>


<p><iframe src="https://hatenablog-parts.com/embed?url=http%3A%2F%2Fdeveloper.feedforce.jp%2Fentry%2F2017%2F11%2F04%2F235323" title="Dynamoid の使い方【range 編】 - Feedforce Developer Blog" class="embed-card embed-blogcard" scrolling="no" frameborder="0" style="display: block; width: 100%; height: 190px; max-width: 500px; margin: 10px 0px;"></iframe><cite class="hatena-citation"><a href="http://developer.feedforce.jp/entry/2017/11/04/235323">developer.feedforce.jp</a></cite></p>

<h1>真のサーバレスアーキテクトとサーバレス時代のゲーム開発・運用</h1>

<script async class="speakerdeck-embed" data-id="100ed8972466451a8fab9450e51bb0c6" data-ratio="1.77777777777778" src="//speakerdeck.com/assets/embed.js"></script>


<p>他の発表と被ってしまったので、当日の講演は見られなかったのですが、ブログの方を見たらとても興味深い内容だったのでご紹介しておきます🙏</p>

<p><iframe src="https://hatenablog-parts.com/embed?url=http%3A%2F%2Fgs2.hatenablog.com%2Fentry%2F2017%2F11%2F04%2F013215" title="Serverlessconf Tokyo 2017 に登壇しました。そのほか雑感 - GS2 Blog" class="embed-card embed-blogcard" scrolling="no" frameborder="0" style="display: block; width: 100%; height: 190px; max-width: 500px; margin: 10px 0px;"></iframe><cite class="hatena-citation"><a href="http://gs2.hatenablog.com/entry/2017/11/04/013215">gs2.hatenablog.com</a></cite></p>

<blockquote><p>実は、私もSaaSはサーバレスなのか？という事に対しては、ちょっと思うところがあります。
私はフルマネージドサービスはサーバレスだと思いますが、マネージドサービスはサーバレスではない。と思っているためです。
また、別の言い方をすると、スケールに限界があるモノはサーバレスではない。と思っています。
つまり、使用方法さえ間違えなければ《勝手に》《無限に》スケールするフルマネージドサービスこそがサーバレス。と言えるのではないか。と思っています。</p></blockquote>

<p>SaaS の運用・開発してる人だと結構重要なテーマなのではないか、と思います。
SaaS なんだからリクエストどんだけ送っても向こう側で良きに計らってくれるやろ。そう思ってた時期が俺にもありました 😇
とは言え、SaaS 利用者からそう見えるようなサービスにしたい、という思いはあります。SaaS 利用者としても SaaS の裏側のことは一切考えずに利用したいと思うので。。
弊社の <a href="https://socialplus.jp/">ソーシャル PLUS</a> も SaaS ですが、利用して頂いているサイトがイベントなどでアクセスが急騰するケースがありますので、開発・運用ではそういう点に気を遣っています。</p>

<ul>
<li>コールドスタート対策

<ul>
<li>コールドスタートとは

<ul>
<li>Lambda は初回呼び出し時やしばらく呼ばれなかった後に呼ばれたときは response time が長くなる</li>
</ul>
</li>
<li>1 つの Lambda Function に全ロジックを入れる

<ul>
<li>API Gateway のエンドポイント毎にどのロジックを実行するかパラメータで渡している</li>
<li>コール比率の低いエンドポイントでもコールドスタートを回避できる</li>
</ul>
</li>
<li>パラメータで動作が変わる

<ul>
<li>Rails の Routing のようなものと佐藤は解釈しました</li>
</ul>
</li>
<li>一定間隔で Lambda を起こすように Invoke させる方法もあるが、個人的には Routing やらせる方式の方が良いのではないか、という気がする

<ul>
<li>Lambda Function が大量に作られてしまう（マイクロ化しすぎ問題）と管理が難しくなるのではないか、という思いもあって</li>
<li>この方法は実際に試してみたいです</li>
</ul>
</li>
</ul>
</li>
</ul>


<h1>所感</h1>

<p>Serverless に限ったことではありませんが、近年登場する新技術はトレードオフな側面が強いように感じています。
一昔前は今までは解の無かった技術的課題を解決する形で新しい技術が登場する、というケースが多かったのではないでしょうか？
対して今は、既存の技術でもできなくはないけど、特定のケースで困るから、それを解決する新しい技術が登場する、というケースが多いような。
そして、その特定のケースを解決するために、一部のことは許容しなければならない、という印象です。
（まあ単純に僕も歳をとって、保守的な考え方が強くなってきただけなのかもしれません。。）</p>

<p>今回のカンファレンスは実際の開発者からどういうトレードオフがあるか、という話が出てきたことで、自分の中で改めて Serverless と向き合う覚悟というか、モチベーションが出てきたように思います。</p>

<p>とはいえ、個人的には、従来の Rails アプリと Serverless をハイブリッドに使った設計に取り組んでいくのが現時点での最適解ではないかと感じています。
もちろん、設計を考えた上で Full-Serverless が最適となれば、そういうアプリを作って行くつもりですが、それなりに複雑なロジックを考えるにはまだ Full-Serverless は早いのではないかな、と思います。
やはり並列性の高さが Serverless の魅力なので、アプリケーションの基本的な部分は従来通り Rails で作成して、アクセス数が急にスパイクするような場所を局所的に Serverless にするような設計をこれから色々試していこうと考えています。</p>

<p>ただ、Serverless のコンセプトとしては、ソフトウェア開発の生産性そのものを向上させることが目的とのことだったので、将来的にはハイブリッドよりも Serverless に振り切った設計がベストになっていくかもしれません。今後の発展に期待しています。</p>
]]></description>
            <enclosure url="https://cdn-ak.f.st-hatena.com/images/fotolife/t/tmd45/20171103/20171103011524.jpg" length="0" type="image/jpg"/>
        </item>
        <item>
            <title><![CDATA[Dynamoid の使い方【range 編】]]></title>
            <link>https://developer.feedforce.jp/entry/2017/11/04/235323</link>
            <guid>https://developer.feedforce.jp/entry/2017/11/04/235323</guid>
            <pubDate>Sat, 04 Nov 2017 14:53:23 GMT</pubDate>
            <description><![CDATA[<p>どうも、バックエンドエンジニアのサトウリョウスケです ✌︎('ω')✌︎</p>

<p>最近こうして <a href="http://developer.feedforce.jp/entry/2017/10/12/100000">弊社の tech ブログが移転した</a> 訳ですが、自社で管理してるブログだと投稿フローがめんどくさいと僕がボヤいたのが移転理由の一端だったりします 😎
でも移転作業したのは僕じゃなくて、球だけ投げてどっか行きました 😎
移転ありがとうございます 🙇</p>

<p>移転して一発目の投稿なので張り切って参ります 💪</p>

<p>さて、Rails で DynamoDB を利用する際の ORM として <code>dynamoid</code> があります。
今回は <code>dynamoid</code> から Hash-Range Table (Partition Key と Sort Key の複合) を利用する方法について紹介します。</p>

<p><code>dynamoid</code> の導入方法については以前書いたこちらの記事を参考にしてみて下さい。</p>

<p><iframe src="https://hatenablog-parts.com/embed?url=http%3A%2F%2Ftech.feedforce.jp%2Fdynamodb-setup-on-rails.html" title="DynamoDB を Rails で使えるようにするためのあれこれ | feedforce Engineers&#39; blog" class="embed-card embed-webcard" scrolling="no" frameborder="0" style="display: block; width: 100%; height: 155px; max-width: 500px; margin: 10px 0px;"></iframe><cite class="hatena-citation"><a href="http://tech.feedforce.jp/dynamodb-setup-on-rails.html">tech.feedforce.jp</a></cite></p>

<h1>Hash-Range Table ってなんぞ</h1>

<h2>その前に名称の整理をしておきます</h2>

<p>タイトルに 【range 編】と書いているのですが、これは Sort Key の事を指します。
どうやら DynamoDB は初期の頃と現在で一部の名称が変化したようです。
しかし、 <code>Dyanmoid</code> では相変わらず旧名称のまま (<code>hash_key</code>, <code>range_key</code>) でパラメータを指定するので、対応表を記載しておきます。</p>

<table>
<thead>
<tr>
<th style="text-align:center;"> 旧名称 </th>
<th style="text-align:center;"> 現名称 </th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center;"> Hash Key </td>
<td style="text-align:center;"> Partition Key </td>
</tr>
<tr>
<td style="text-align:center;"> Range Key </td>
<td style="text-align:center;"> Sort Key </td>
</tr>
</tbody>
</table>


<h2>DyanmoDB には 2 種類のプライマリキーがある</h2>

<p>こちらのスライドが分かりやすいのですが、 DynamoDB のテーブル定義として Hash Table と Hash-Range Table というものがあります。</p>

<iframe src="//www.slideshare.net/slideshow/embed_code/key/gHjtA6AS8rk0sB?startSlide=24" width="595" height="485" style="border: 1px solid #CCC; border-width: 1px; margin-bottom: 5px; max-width: 100%;" scrolling="no" marginwidth="0" marginheight="0" frameborder="0"> </iframe>




<iframe src="//www.slideshare.net/slideshow/embed_code/key/gHjtA6AS8rk0sB?startSlide=26" width="595" height="485" style="border: 1px solid #CCC; border-width: 1px; margin-bottom: 5px; max-width: 100%;" scrolling="no" marginwidth="0" marginheight="0" frameborder="0"> </iframe>


<ul>
<li>Hash Table

<ul>
<li>Hash Key (Partition Key) という一つのカラムの値でプライマリキーを表現するテーブル</li>
<li>この構成だと Hash Key は <strong>重複させることができない</strong></li>
</ul>
</li>
<li>Hash-Range Table

<ul>
<li>Hash Key と Range Key (Partition Key,  Sort Key) の二つの値でプライマリキーを表現する</li>
<li>Range Key が異なっていれば、同一の Hash Key を持つレコードが複数存在しても良い</li>
<li>スキャンより高速なクエリ <sup id="fnref:1"><a href="#fn:1" rel="footnote">1</a></sup> で複数のレコードを取得することが可能

<ul>
<li>スキャンだと物凄くコストが高いので、基本的にクエリだけでデータ取得できるように設計すべき</li>
</ul>
</li>
<li>Range Key での昇順・降順でのソートが可能</li>
<li>Range Key に対しての <a href="http://docs.aws.amazon.com/ja_jp/amazondynamodb/latest/developerguide/Query.html#Query.KeyConditionExpressions">範囲検索</a> も可能</li>
</ul>
</li>
</ul>


<h1><code>dynamoid</code> での利用方法</h1>

<h2>テーブル定義</h2>

<pre class="code" data-lang="" data-unlink>class User
  include Dynamoid::Document

  table name: :users, key: :hash_key
  range :range_key, :string # &lt;= これ
end</pre>


<p><code>range :(フィールド名), :(データ型)</code> で Range Key の定義が可能です。
ちょっと試せていないのですが、AWS コンソールからだとテーブル作成時にしか Range Key (ソートキー) を定義できないので、既に存在しているテーブルに途中で <code>range</code> の定義を加えても動作しないと思います。</p>

<h2>使い方</h2>

<p>Dynamoid にも ActiveRecord と同じように <code>#where</code> というメソッドが実装されています。
ドキュメントでは内部でどのような動きをするのかが見当たらなかったので、実装から確認したのですが、検索条件に Hash Key や Range Key が含まれているかどうかを判断して、クエリが使える場合はクエリで検索してくれるようです。</p>

<pre class="code" data-lang="" data-unlink>User.where(hash_key: &#39;hash_key&#39;) # クエリで検索される
User.where(hash_key: &#39;hash_key&#39;, range_key: &#39;range_key&#39;) # クエリで検索される
User.where(name: &#39;name&#39;) # Hash Key が無いのでスキャンが実行される</pre>


<p>ただし、引数の指定方法や定義の仕方が少しでも間違っていると <code>#where</code> でスキャンが実行されてしまっているケースがあります。本当にクエリ検索されているか、念のため Rails のログ出力を確認し、スキャンが実行されていないかどうか確認するようにして下さい ⚠️</p>

<p><code>#where</code> の使い方は ActiveRecord とほぼ同じです。</p>

<pre class="code" data-lang="" data-unlink>User.where(hash_key: &#39;hash_key&#39;).all # =&gt; [#&lt;User:0x000000076ed848&gt;, #&lt;User:0x0000000779abb0&gt;, ...]
User.where(hash_key: &#39;hash_key&#39;).each do |user|
  user # =&gt; #&lt;User:0x000000076ed848&gt;
end
User.where(hash_key: &#39;hash_key&#39;).first # =&gt; #&lt;User:0x000000048cb050&gt;
User.where(hash_key: &#39;hash_key&#39;).last # =&gt; #&lt;User:0x000000048cb050&gt;</pre>


<p>そして、 <code>range_key</code> に対して <code>gt</code>, <code>lt</code>, <code>gte</code>, <code>lte</code>, <code>begins_with</code>, <code>between</code> の演算子が使用できます。</p>

<pre class="code" data-lang="" data-unlink>User.where(hash_key: &#39;hash_key&#39;, &#39;range_key.gt&#39;: 123)
User.where(hash_key: &#39;hash_key&#39;, &#39;range_key.lt&#39;: 123)
User.where(hash_key: &#39;hash_key&#39;, &#39;range_key.gte&#39;: 123)
User.where(hash_key: &#39;hash_key&#39;, &#39;range_key.lte&#39;: 123)
User.where(hash_key: &#39;hash_key&#39;, &#39;range_key.begins_with&#39;: &#39;range_&#39;)
User.where(hash_key: &#39;hash_key&#39;, &#39;range_key.between&#39;: [100, 200])</pre>


<h2>ハマりポイント</h2>

<p>ここからは Range Key を <code>dyanmoid</code> を使っていてハマった点をいくつか紹介したいと思います。</p>

<h3><code>range</code> を定義していると <code>#find_by_id</code> の動作が変わる</h3>

<pre class="code" data-lang="" data-unlink># Hash Table として利用
class User
  include Dynamoid::Document

  table name: :users, key: :hash_key
end

# OK!
User.find_by_id(&#39;hash_key&#39;)
# =&gt; #&lt;User:0x000000048cb050&gt;</pre>




<pre class="code" data-lang="" data-unlink># Hash-Range Table として利用
class User
  include Dynamoid::Document

  table name: :users, key: :hash_key
  range :range_key, :string
end

# Error!
User.find_by_id(&#39;hash_key&#39;)
# =&gt; Aws::DynamoDB::Errors::ValidationException: The provided key element does not match the schema</pre>


<p>んん？？ってなったのですが、こういう事らしいです。</p>

<ul>
<li><code>#find_by_id</code> は内部的には <code>Aws::DynamoDB::Client#get_item</code> を呼び出している</li>
<li><code>#get_item</code> は結果が一意に定まる検索条件を指定しないとエラーになる

<ul>
<li>つまり <code>range_key (primary sort key)</code> を定義している場合は引数一つだとエラー</li>
<li>引数に <code>range_key</code> を指定すれば OK</li>
</ul>
</li>
</ul>


<pre class="code" data-lang="" data-unlink>Line::User.find_by_id(&#39;hash_key&#39;, range_key: &#39;range_key&#39;)
# =&gt; #&lt;User:0x000000048cb050&gt;
# OK!</pre>


<h3><code>has_many</code> は Hash-Range Table に対応していない</h3>

<p><code>dynamoid</code> では ActiveRecord のような <code>has_many</code> <code>has_one</code> <code>belongs_to</code> が定義されているのですが、 Hash-Range Table だと上手く動作しません。
内部の実装を見てみましたが、 Hash Table の状態で利用することが前提となっているようでした。</p>

<p>Hash Table であればこんな感じで利用することができます。</p>

<pre class="code" data-lang="" data-unlink>class User
  include Dynamoid::Document

  table name: :users, key: :hash_key
  has_many :talks, class: Talk
end

class Talk
  include Dynamoid::Document

  table name: :talks, key: :hash_key
  belongs_to :user, class: User
end

user = User.create(name: &#39;Taro&#39;)
user.talks.create(content: &#39;Hello world&#39;)</pre>


<h1>まとめ</h1>

<p>Hash Table と Hash-Range Table の違いから、 Dynamoid における実装方法についてを紹介しました。
Dynamoid を利用した場合は migration を明示的に実行する訳ではないため、Rails のソースコードと DyanmoDB のテーブルの実態が必ずしも一致していないケースがある点がハマりどころのような気がします。
本稿で紹介した Hash-Range Table が DynamoDB と Dynamoid 両方で正しく設定されているかをリリース前に入念にチェックした方が良いでしょう。</p>
<div class="footnotes">
<hr/>
<ol>
<li id="fn:1">
<p><a href="http://docs.aws.amazon.com/ja_jp/amazondynamodb/latest/developerguide/QueryAndScanGuidelines.html">クエリとスキャンのベストプラクティクス</a><a href="#fnref:1" rev="footnote">&#8617;</a></p></li>
</ol>
</div>

]]></description>
            <enclosure url="https://cdn.user.blog.st-hatena.com/default_entry_og_image/116461321/1514251518718655" length="0" type="image//default_entry_og_image/116461321/1514251518718655"/>
        </item>
        <item>
            <title><![CDATA[『オブジェクト指向設計実践ガイド』読書会での感想メモ]]></title>
            <link>https://masutaka.net/2017-11-01-1/</link>
            <guid>https://masutaka.net/2017-11-01-1/</guid>
            <pubDate>Wed, 01 Nov 2017 00:00:00 GMT</pubDate>
            <description><![CDATA[6/1 から 8/24 まで、フィードフォース社内で『オブジェクト指向設計実
践ガイド』の読書会を主催しました。
loading...
   if (localStorage.getItem("pref-theme") === "light") { const elements = document.getElementsByClassName('twitter-tweet'); for (let i = 0; i  ↑ これはブログ記事に使うための先行 Tweet でした。やっと使えたw
都度メモを取って会社の Slack channel に書いていたのですが、公開の
タイミングを逃して後悔していました。そんな折、kano-e さんが会社の
新生開発者ブログに記事をポスト。
 空気を読まずに私もポストします。個人ブログに。本当に五月雨式のメモ
で自分向けです。
第１章 オブジェクト指向設計 まだ意識が高まっておらず、感想を書いていなかった。プロローグ的な章。
第２章 単一責任のクラスを設計する これらが当たり前に出来るスキルが必要だと思った。
 健康的な書き方をほかのプログラマーに促進するコードを書く atter_reader 等を介して、複雑か簡単かどうかさえも見せないように
隠蔽する リファクタリングでメソッドへの切り出しをすることで、クラスの責務
を明確にする 決断を先延ばしにする  第３章 依存関係を管理する  DI 初登場！！ 第３章は P19 の『オブジェクト指向設計とは、「依存関係を管理する
こと」です。』を具体的に説明した章 とにかく依存関係を減らすことが重要  DI メソッドでキーワード引数を使うことで、パラメータの順序依存をなくす ファクトリパターンを使った外部インターフェイスのラッピング  あまりに複雑だと、ラッピングしすぎないほうが良いことも   自身より変更しないものに依存しなさい Ruby にはインターフェイスがないので、エンジニアのスキルがな]]></description>
        </item>
        <item>
            <title><![CDATA[『スターティングGo言語』を読んだ]]></title>
            <link>https://masutaka.net/2017-10-30-1/</link>
            <guid>https://masutaka.net/2017-10-30-1/</guid>
            <pubDate>Mon, 30 Oct 2017 00:00:00 GMT</pubDate>
            <description><![CDATA[大変良い本でした。Kindle 版を購入しました。
 1 年前に買って積んでいたのは勿体なかったですが、最近ようやく
golang と向き合うようになったので、致し方なしか。
対応バージョンは 1.6 で最新の 1.9 より古いですが、golang は後方互
換性は保たれているので、あまり問題ないかと。
型や構文、よく使われるパッケージの説明など、網羅的に書いてあります。
ネット上の情報をつまむくらいなら、この本で学んだほうが良いと思いま
すよ&hellip;。&gt; 過去の自分
一番良かったところ 私は元々組み込みエンジニアで、clang に馴染みがあります。そういう意
味では、golang は馴染みやすくはあるのですが、ポインタまわりがどう
もしっくり来ませんでした。
この本を読んで、その辺りを理解できて大変良かったです。
・(*p)[i] の省略が p[i] であるなど、ポインタ記法を省略できる
・参照型（スライス、マップ、チャネル）はポインタを取り扱う型である
・配列は値、スライスは参照型。性質は 180 度異なる
・配列は値であるため、代入ではすべての要素のコピー（clang だとポイ
ンタの代入）
・同じ理由で、関数の引数に渡すとコピーが作られ渡される
中でも、見た目が似ている配列とスライスが裏では全く違うことを知り、
腑に落ちました。
loading...
   if (localStorage.getItem("pref-theme") === "light") { const elements = document.getElementsByClassName('twitter-tweet'); for (let i = 0; i  string 型は参照型ではありませんが、Immutable なポインタのような不
思議な振る舞いをします（clang だとほぼポインタ）。
・string 型は内部的に「文字列の実体へのポインタ」と「文字列のバイ
ト長」によって構成
・string 型の値を、変数への再代入や関数の引数として使った場合であっ
ても、文字列の実体が別のメモリ領域にコピーされることはない]]></description>
        </item>
        <item>
            <title><![CDATA[github-nippou を golang で書き換えて v4.0.1 リリースしてました]]></title>
            <link>https://masutaka.net/2017-10-22-1/</link>
            <guid>https://masutaka.net/2017-10-22-1/</guid>
            <pubDate>Sun, 22 Oct 2017 00:00:00 GMT</pubDate>
            <description><![CDATA[こちらのブログではアナウンスしてなかったので。
v4.0.0 のリリースノートになります。
https://github.com/masutaka/github-nippou/releases/tag/v4.0.0 その後 v4.0.1 も出しました。
https://github.com/masutaka/github-nippou/releases/tag/v4.0.1 体感として速くなったことと、Homebrew のエコシステムに乗れたことが、
自分としてもメリットに感じています。
リファクタリングしないと&hellip;。]]></description>
        </item>
        <item>
            <title><![CDATA[async.el 使ったら helm-github-stars.el を変更せずに非同期化できた]]></title>
            <link>https://masutaka.net/2017-10-21-1/</link>
            <guid>https://masutaka.net/2017-10-21-1/</guid>
            <pubDate>Sat, 21 Oct 2017 00:00:00 GMT</pubDate>
            <description><![CDATA[helm-github-stars.el という便利な Emacs Lisp ツールがあります。
「自分がつけた GitHub の Star」や「自分または Organization 所有の
リポジトリ」等を Helm interface で操作できます。
「Star 付けたリポジトリがあったけど、なんて名前だったかなー」
なんて時に、素早く検索してブラウザで開けたりします。便利です。
課題 helm-github-stars.el は便利なのですが、キャッシュファイル
（~/.emacs.d/hgs-cache）を作る hgs/generate-cache-file() は
同期処理関数です。Emacs built-in の url-retrieve-synchronously()
を使っています。
うっかり M-x helm-github-stars すると、数十秒待たされます。辛いです。
※ helm-github-stars-refetch-time を設定に基づき、
M-x helm-github-stars のタイミングでキャッシュファイルが更新されます。
そういうわけで、最近は当該キーバインドをコメントアウトしている状態
でした。
つい先日の木曜日。重い腰を上げて、非同期処理版の
hgs/generate-cache-file() を作ろうとしました。でも、Star と Repo
両方の API を呼ぶ必要があり、なかなかに複雑です。コーディングが進
みません。
そんな中見つけたのが async.el でした。
async.el   今回使ったのは、async.el に含まれる async-start() です。
 async-start START-FUNC FINISH-FUNC
  START-FUNC は子プロセスの Emacs で実行される FINISH-FUNC は現在の Emacs で実行される  上記のとおり、このライブラリはなんと Emacs の子プロセスとして、も]]></description>
        </item>
        <item>
            <title><![CDATA[github-nippou という gem を golang で書き直したという発表をした]]></title>
            <link>https://developer.feedforce.jp/entry/2017/10/16/150000</link>
            <guid>https://developer.feedforce.jp/entry/2017/10/16/150000</guid>
            <pubDate>Mon, 16 Oct 2017 06:00:00 GMT</pubDate>
            <description><![CDATA[<p>こんにちは。増田（<a href="http://blog.hatena.ne.jp/masutaka26/" class="hatena-id-icon"><img src="https://cdn1.www.st-hatena.com/users/ma/masutaka26/profile.gif" width="16" height="16" alt="" class="hatena-id-icon">id:masutaka26</a>）です。社内勉強会の順番が来ると、２ヶ月前くらいからソワソワしてきます。</p>

<p>そんなわけで今回は『日報を golang で支える技術』というお題で発表しました。</p>

<h2>発表の内容</h2>

<script async class="speakerdeck-embed" data-id="b96e99d03504492f85e58bff0c8d1171" data-ratio="1.33333333333333" src="//speakerdeck.com/assets/embed.js"></script>


<p>以下、スライドからの抜粋です。</p>

<ul>
<li>背景など

<ul>
<li><a href="https://masutaka.net/chalow/2016-04-09-1.html">以前の社内勉強会で github-nippou という gem を紹介した</a></li>
<li>ひとつの ruby スクリプトからそこそこ作り込み、毎日便利に使っている</li>
<li>先日も同僚の <a href="https://github.com/ryz310">@ryz310</a> から pull request をもらって、さらに便利になった</li>
<li>からの、golang への書き換えをした。その場でライブリリース</li>
</ul>
</li>
<li>モチベーション

<ul>
<li>以前 <a href="https://github.com/github/hub/releases/tag/v2.2.0">hub コマンドが ruby から golang に移行した</a>のを見て、一度やってみたかった</li>
<li>rubygems の CLI を Dockerize してポータビリティを高めるのは何かが違うという気持ち</li>
<li><a href="https://github.com/ryz310">@ryz310</a> からもらった元気</li>
</ul>
</li>
<li>当たり前だけど、全て代わりの方法を調べて実装しなければいけなかった

<ul>
<li>octokit → go-github, thor → cobra など。Assets の取り扱いも変わる</li>
</ul>
</li>
<li>良かったこと

<ul>
<li>１バイナリになったのでインストールやアップデートが容易になった</li>
<li>パフォーマンスも予想外に上がった（当社比約２倍）

<ul>
<li>以前調べた時は GitHub への API アクセスがボトルネックだったので、そこまで変わらないと思っていた</li>
</ul>
</li>
<li>結果的にいろんなライブラリを使えて、良い素振りになった</li>
</ul>
</li>
<li>困ったこと

<ul>
<li>とにかく関数が長くなりがち</li>
<li>getXXX() 多くなりすぎ</li>
<li>ファイル分割の意味</li>
<li>書けば書くほど golang っぽい書き方が分からなくなる</li>
<li>OOP ではないことへの戸惑い</li>
<li>ruby が柔軟すぎて移植は難しかった。オススメはしない</li>
</ul>
</li>
<li>疑問など

<ul>
<li>class設計で便利だった、private method の代わり

<ul>
<li>設計し直すべきか</li>
<li>classを 使わなかった頃の JS の知見を知りたい</li>
</ul>
</li>
<li>ビジネスロジックのパッケージ名はどうすれば

<ul>
<li>今回は lib にした</li>
</ul>
</li>
</ul>
</li>
<li>感想

<ul>
<li>今後、rubygems で CLI ツールを作ることはないと思う。継続利用を考えると勧めづらい</li>
<li>golang は単一ファイルでの実装と実行に一番ハードルが低い気がしている

<ul>
<li>もっと楽な言語あったら教えて</li>
</ul>
</li>
</ul>
</li>
<li>今後の予定

<ul>
<li>golang っぽい書き方にする</li>
<li>もっとテストを書く</li>
<li>golang on Lambda や API サーバも学習する</li>
<li>『<a href="https://www.amazon.co.jp/dp/B01FH3KRTI">スターティングGo言語</a>』を読み切る</li>
</ul>
</li>
</ul>


<h2>結果</h2>

<p><span itemscope itemtype="http://schema.org/Photograph"><img src="https://cdn-ak.f.st-hatena.com/images/fotolife/m/masutaka26/20171014/20171014163806.png" alt="f:id:masutaka26:20171014163806p:plain" title="f:id:masutaka26:20171014163806p:plain" class="hatena-fotolife" itemprop="image"></span></p>

<p>↓</p>

<p><span itemscope itemtype="http://schema.org/Photograph"><img src="https://cdn-ak.f.st-hatena.com/images/fotolife/m/masutaka26/20171014/20171014163802.png" alt="f:id:masutaka26:20171014163802p:plain" title="f:id:masutaka26:20171014163802p:plain" class="hatena-fotolife" itemprop="image"></span></p>

<p><a href="https://github.com/masutaka/github-nippou">https://github.com/masutaka/github-nippou</a></p>

<h2>発表の感想</h2>

<p>付箋紙に感想を書いてくれました。<i class="blogicon-comment" aria-hidden="true"></i> は私からのコメントです。</p>

<ul>
<li>クラス設計周りの話は自分も悩んでいます

<ul>
<li><i class="blogicon-comment" aria-hidden="true"></i> ライブラリとか読んで学習します！</li>
</ul>
</li>
<li>GraphQL 対応の PR 出すぞ

<ul>
<li><i class="blogicon-comment" aria-hidden="true"></i> お待ちしております！</li>
</ul>
</li>
<li>Go の GraphQL のクライアント側はまだなさそう

<ul>
<li><i class="blogicon-comment" aria-hidden="true"></i> <a href="https://github.com/graphql-go/graphql">github.com/graphql-go/graphql</a> を見つけました。API リクエストを 1 回に出来るのかな？</li>
</ul>
</li>
<li>CLI は ruby &lt; golang わかる。mruby も良いかも

<ul>
<li><i class="blogicon-comment" aria-hidden="true"></i> mruby はエコシステムが大変そうで...</li>
</ul>
</li>
<li>Makefile 参考にします

<ul>
<li><i class="blogicon-comment" aria-hidden="true"></i> あざす！</li>
</ul>
</li>
<li>Makefile 全く分からない... 勉強しないと！！

<ul>
<li><i class="blogicon-comment" aria-hidden="true"></i> 基本だったら１日くらいで分かりますよ。make はビルドを必要な時だけに抑えられるので良いです</li>
</ul>
</li>
<li>流石ますたかさん とても面白く熱量ある発表でした

<ul>
<li><i class="blogicon-comment" aria-hidden="true"></i> ありがとうございます。熱量は大事にしてます</li>
</ul>
</li>
<li>神回ですね

<ul>
<li><i class="blogicon-comment" aria-hidden="true"></i> もっと技術レベル上げていきます！</li>
</ul>
</li>
<li>刺激を受けるいい話だった

<ul>
<li><i class="blogicon-comment" aria-hidden="true"></i> 刺激を与えるのがエンジニアとして使命のひとつだと思っています</li>
</ul>
</li>
<li>スピード up は nice 発見

<ul>
<li><i class="blogicon-comment" aria-hidden="true"></i> ですね</li>
</ul>
</li>
<li><p>やっぱりはやくなるものなんだなー</p>

<p>  <span itemscope itemtype="http://schema.org/Photograph"><img src="https://cdn-ak.f.st-hatena.com/images/fotolife/m/masutaka26/20171014/20171014160652.jpg" alt="f:id:masutaka26:20171014160652j:plain" title="f:id:masutaka26:20171014160652j:plain" class="hatena-fotolife" itemprop="image"></span></p>

<ul>
<li><i class="blogicon-comment" aria-hidden="true"></i> 速いだけでテンションが上がります</li>
</ul>
</li>
<li>golang 熱の高まり・・・！！

<ul>
<li><i class="blogicon-comment" aria-hidden="true"></i> やりましょう！</li>
</ul>
</li>
<li>go モチベーションの高さの理由が分かりました！！

<ul>
<li><i class="blogicon-comment" aria-hidden="true"></i> もう必死ですよ</li>
</ul>
</li>
<li>ずっと Go 書いてたのはこれだったのかー（棒）

<ul>
<li><i class="blogicon-comment" aria-hidden="true"></i> そうなんですよー（棒）</li>
</ul>
</li>
<li>Go 書きたい

<ul>
<li><i class="blogicon-comment" aria-hidden="true"></i> 今書きましょう！</li>
</ul>
</li>
<li><p>ゴー書いてく！！</p>

<p>  <span itemscope itemtype="http://schema.org/Photograph"><img src="https://cdn-ak.f.st-hatena.com/images/fotolife/m/masutaka26/20171014/20171014160710.jpg" alt="f:id:masutaka26:20171014160710j:plain" title="f:id:masutaka26:20171014160710j:plain" class="hatena-fotolife" itemprop="image"></span></p>

<ul>
<li><i class="blogicon-comment" aria-hidden="true"></i> ｱ､ﾊｲ</li>
</ul>
</li>
<li>ざんねん！！わたし（@ryz310）の PR はここでおわってしまった！！

<ul>
<li><i class="blogicon-comment" aria-hidden="true"></i> またお待ちしております！（笑）</li>
</ul>
</li>
<li>バイナリ配布うれしい！

<ul>
<li><i class="blogicon-comment" aria-hidden="true"></i> ユーザの皆様のことを第一に考えております</li>
</ul>
</li>
<li>CLI は golang <del>Web やる気にはなら…</del>

<ul>
<li><i class="blogicon-comment" aria-hidden="true"></i> 配布を考えるとそうですねー。今は GitHub でリリースしておけば、Homebrew や zplug など配布手段はいろいろありますし</li>
</ul>
</li>
<li>ディストリビューション大変だなー

<ul>
<li><i class="blogicon-comment" aria-hidden="true"></i> gox で簡単に並列ビルドできるので、それほど大変ではなかったですね</li>
</ul>
</li>
<li>知見 ライブデプロイ is つらい

<ul>
<li><i class="blogicon-comment" aria-hidden="true"></i> もうハラハラドキドキですよ</li>
</ul>
</li>
<li>ライブデプロイメント

<ul>
<li><i class="blogicon-comment" aria-hidden="true"></i> やはり初回の CI は絶対失敗しますね...</li>
</ul>
</li>
<li>（社内 Slack の）#golang を今後ともよろしくお願いします

<ul>
<li><i class="blogicon-comment" aria-hidden="true"></i> こちらこそ！</li>
</ul>
</li>
</ul>


<h2>最後に</h2>

<p>とにかく設計が目下の悩みです。良い情報があれば教えてください！</p>
]]></description>
            <enclosure url="https://cdn-ak.f.st-hatena.com/images/fotolife/m/masutaka26/20171014/20171014163802.png" length="0" type="image/png"/>
        </item>
        <item>
            <title><![CDATA[golang の並列処理を Ruby と比較しながら学ぶ]]></title>
            <link>https://masutaka.net/2017-10-15-1/</link>
            <guid>https://masutaka.net/2017-10-15-1/</guid>
            <pubDate>Sun, 15 Oct 2017 00:00:00 GMT</pubDate>
            <description><![CDATA[一ヶ月ほど前に社内のインフラ共有会でタイトルの話をしました。記録の
ために記事を書いておきます。
Gist に置いてある ので、コードは git clone で取得可能です。
$ git clone https://gist.github.com/c0a4234a5264c89655c40adcf7c27cb2.git Ruby 例えば Ruby で 30 個の処理をするコードがあったとします。こんな素朴
なコードです。それぞれ 3 秒かかる処理が 30 あるので、とても遅いです。
 Thread を使って 5 並列にしました。明らかに速くなりました。
ついでにそれぞれの結果（というほどのものではありませんが）を
results に代入し、最後にまとめて表示しました。
results は共有リソースになるので、Thread::Mutex#synchronize でロッ
クをかけて安全に書き込んでいます。ロックをかけないと results に同
時に書き込まれるケースを救うことが出来ません。
 parallel gem を使うと、ずいぶんとすっきり書くことが出来ます。
 golang 直列処理に関しては、Ruby と同様に素朴です。goroutineNum（あとで説
明します）は常に 1 です。
 何も考えずに heavyProcess() を goroutine で動かします。19 行目に
&ldquo;go &quot; を追加しただけです。驚いたことに何も表示されずに終了します。
 実は何も表示されなかったのは、goroutine の終了を待たずに main() が
終了してしまったためです。シェルのバックグラウンド実行（&amp;）とよく
似ていると思いました。
今度は sync パッケージを使って、goroutine の終了を待ちましたが、]]></description>
        </item>
        <item>
            <title><![CDATA[開発者ブログを移行しました]]></title>
            <link>https://developer.feedforce.jp/entry/2017/10/12/100000</link>
            <guid>https://developer.feedforce.jp/entry/2017/10/12/100000</guid>
            <pubDate>Thu, 12 Oct 2017 01:00:00 GMT</pubDate>
            <description><![CDATA[<p>これまで Middleman Blog + GitHub Pages で運営していた弊社開発者ブログを、はてなブログに移行しました。</p>

<p>過去の記事は移行前のアドレス <a href="http://tech.feedforce.jp">http://tech.feedforce.jp</a> からご覧いただけます。</p>

<ul>
<li><a href="http://b.hatena.ne.jp/entrylist?url=http://tech.feedforce.jp&amp;sort=hot">旧ブログのホットエントリー</a></li>
</ul>


<p>移行をきっかけに心機一転、これまでよりカジュアルな情報公開を目指していきます。<br/>
フォードフォース【新生】開発者ブログを、どうぞよろしくお願いします！</p>
]]></description>
            <enclosure url="https://cdn.user.blog.st-hatena.com/default_entry_og_image/116461321/1514251518718655" length="0" type="image//default_entry_og_image/116461321/1514251518718655"/>
        </item>
        <item>
            <title><![CDATA[『応仁の乱』を読んだ]]></title>
            <link>https://masutaka.net/2017-09-24-1/</link>
            <guid>https://masutaka.net/2017-09-24-1/</guid>
            <pubDate>Sun, 24 Sep 2017 00:00:00 GMT</pubDate>
            <description><![CDATA[少し前に読み終えました。読むのに３ヶ月以上かかったり、登場人物多す
ぎで且つ、姓を省略されることが多いため、間違った知識もあるかもしれ
ないけど一応メモ。
原因は将軍家の後継者争いとか言われているが、実際はもっとぐちゃぐ
ちゃ。
将軍（幕府）が強権を発動して収束させてもいないし、対処も間違ってい
たり中途半端だったりで、カオスがカオスを呼んでいく。結果、10 年を
超える大乱になった。
今でもこんな話があるとかないとか。
京都の人が“先の戦争”というとき、応仁の乱を指すというのは本当ですか？ &hellip; - Yahoo!知恵袋 戦国時代後期を多少知っているくらいの知識だと、応仁の乱に出てくる武
将（家）は知らない人だらけなのも分かった。細川氏くらいしか馴染みが
ない。あと、畠山氏は影薄くなりすぎ。
 守護は京都在住を義務付けられていたため、地方は守護代にお任せ 応仁の乱が勃発し対応に追われる。消耗＆疲弊しまくり 乱が終わる頃には守護代に国を乗っ取られる。その他のケースもあるらしい  という流れらしい。そういえば織田氏の元の主人は斯波氏であった。
また読んで理解を深めたいところだが、登場人物の相関図なしに読む気に
はならない。。。
 ]]></description>
        </item>
        <item>
            <title><![CDATA[Go で s3-edit という CLI アプリケーションを作った]]></title>
            <link>https://blog.tsub.me/post/create-s3-edit/</link>
            <guid>https://blog.tsub.me/post/create-s3-edit/</guid>
            <pubDate>Tue, 05 Sep 2017 13:30:00 GMT</pubDate>
            <description><![CDATA[<p>最近 Rust を少し学んでいたが、難しくて少し挫折しかけたのと、結局仕事への導入を考えるなら Go のほうが既に書ける人が何人かいる、というのもあり Go を書き始めた。</p>

<p>手初めてに欲しい CLI アプリケーションがあったのでそれをサクッと Go で書いてみた。</p>

<p><i class="fa fa-github"></i> <a href="https://github.com/tsub/s3-edit">tsub/s3-edit: Edit directly a file on Amazon S3</a></p>

<p></p>]]></description>
        </item>
        <item>
            <title><![CDATA[ZenHub と GitHub の Issue/PR URL をトグルするブックマークレットを作った]]></title>
            <link>https://masutaka.net/2017-08-31-1/</link>
            <guid>https://masutaka.net/2017-08-31-1/</guid>
            <pubDate>Thu, 31 Aug 2017 00:00:00 GMT</pubDate>
            <description><![CDATA[Using ZenHub on web and mobile devices 先日 ZenHub の Web app 版 https://app.zenhub.com がリリースされま
した。機能はほとんど同じですが、例えば milestone を close 出来るの
は Web app 版だけだったり、細かな違いはあります。
Chrome extension 版 と違って、動作が軽快っぽいので使おうとしました
が、PR や Issue のページも彼らで作り込んでしまい、正直それは使いた
くない。
そこでブックマークレットを作ってみました。このようにトグルします。
https://github.com/masutaka/github-nippou/issues/59 ↓↑
https://app.zenhub.com/workspace/o/masutaka/github-nippou/issues/59 私はブラウザのブックマークに &ldquo;zen&lt;=&gt;git&rdquo; という名前で登録しました。
javascript:if (location.href.match(&#34;app.zenhub.com/workspace/o&#34;)) { location.href=location.href.replace(&#34;app.zenhub.com/workspace/o&#34; , &#34;github.com&#34;) } else { location.href=location.href.replace(&#34;github.com&#34;, &#34;app.zenhub.com/workspace/o&#34; ).replace(&#34;pull&#34;, &#34;issues&#34;) } ブックマークレット便利！]]></description>
        </item>
        <item>
            <title><![CDATA[github-nippou v3.0.0 released]]></title>
            <link>https://masutaka.net/2017-08-07-1/</link>
            <guid>https://masutaka.net/2017-08-07-1/</guid>
            <pubDate>Mon, 07 Aug 2017 00:00:00 GMT</pubDate>
            <description><![CDATA[v3.0.0 から出力フォーマットをカスタマイズ出来るようになりました。
@ryz310 に大感謝です！
リリースノートは以下をどうぞ。
https://github.com/masutaka/github-nippou/releases/tag/v3.0.0 新しいサブコマンド init を実行すると、デフォルト設定 から新しい
Gist を作り、その後はその設定が参照されます。
参考までに私の設定はこちら です。subject を h3 から h4 に変えている
のと、GitHub ユーザ名をリンクにしています。
副作用として v2 と同じフォーマットでは出力できなくなりました。
ご不便をおかけしたらすみません。
他の機能としては以下になります。
・新しいサブコマンド open-settings
前述の Gist URL をデフォルトブラウザで開きます。設定していなければ、
デフォルトの GitHub URL を開きます。
・Docker サポート
依存 Gem が増えてきたので、Dockerize してみました。ラッパースクリ
プト docker-github-nippou を介して使うと良いです。ただし、Launchy を使う関係で、サブコマンド open-settings は使えません。]]></description>
        </item>
        <item>
            <title><![CDATA[『サーバーレスシングルページアプリケーション』を読んだ]]></title>
            <link>https://masutaka.net/2017-08-02-1/</link>
            <guid>https://masutaka.net/2017-08-02-1/</guid>
            <pubDate>Wed, 02 Aug 2017 00:00:00 GMT</pubDate>
            <description><![CDATA[[2017-07-05-1] のあとすぐ読み始めたので、およそ一ヶ月。長い旅であっ
た&hellip;。
きっかけは [2017-03-12-1] の JAWS DAYS 2017 での吉田さんのセッショ
ン。今まで Lambda, DynamoDB, Cognito のどれも、つまみ食いしかして
来なかったので「これだ！」と思い予約注文しました。
あわよくば、年始の Vue.js 以降停止していた JS をやり始められたら良
いかなと。
１章からいきなり S3 にデプロイし始めて、胸が熱くなるのを感じました。
２章のルータ関数や３章のテンプレートなど、jQuery でもわりときれい
に書けるんだなと感心しました。
※ 「はじめに」のページ xii にはこの本で React や Angular を選択し
なかった理由が書いてあります。
ただ、その後の４章から雲行きが怪しくなりました。非同期プログラミン
グに慣れていないので、その function がいつ実行されるのか分からない
箇所が多々。
弊社の尖りまくったフロントエンドエンジニアに聞こうにも、
jQuery.Deferred の質問はなんとなくためらわれ&hellip;。
読み終わって、残念ながら Lambda, API Gateway, DynamoDB, Cognito を
ふんわり触ったくらいしか印象が残りませんでした。期待値が大きすぎた
感があります。
私に刺さらなかった理由 理由を考えてみました。
・JS が難しい
JS というよりも jQuery を使った非同期プログラミングが、かもしれま
せん。普段書かないコードなので、理解が困難でした。
・独自フレームワーク sspa
実体はシェルスクリプト ですが。悪い意味でブラックボックスになってお
り、読後に「これを使って SPA 作るぞ！」という気持ちにはなれません]]></description>
        </item>
        <item>
            <title><![CDATA[emacs-helm の標準添付から外された helm-elscreen を Melpa に追加した]]></title>
            <link>https://masutaka.net/2017-07-10-1/</link>
            <guid>https://masutaka.net/2017-07-10-1/</guid>
            <pubDate>Mon, 10 Jul 2017 00:00:00 GMT</pubDate>
            <description><![CDATA[emacs-helm/helm@6193cc4 によって、helm-elscreen.el が
https://github.com/emacs-helm/helm-elscreen に切り出されていました。
Elscreen のタブをまとめて閉じるのに重宝しており、若干不便な毎日を
送っていたので、この度エイヤッと Melpa パッケージを作りました。
作成記録 初め、https://github.com/melpa/melpa に PR を作ろうとしたら、
PULL_REQUEST_TEMPLATE.md に Checklist がありました。
これを満たすために、helm-elscreen に PR 作成。
https://github.com/emacs-helm/helm-elscreen/pull/1 無事マージされたので、Melpa にパッケージ追加の PR 作成。
https://github.com/melpa/melpa/pull/4828 そこで指摘項目があったので、さらに helm-elscreen を修正。
https://github.com/emacs-helm/helm-elscreen/pull/2 さらに指摘項目があり、helm-elscreen に PR 作ったけど、結果的に要ら
なくなったやつ。
https://github.com/emacs-helm/helm-elscreen/pull/3 melpa.org 作者の @purcell さんは、昔から丁寧にレビューをしてくれま
す。本当にありがたいです。パッケージのコードまでレビューするのは、
ものすごく大変だと思う&hellip;。
ただ、多くの PR が作られ、レビューのコストが相当高いせいか、以前は
なかった PULL_REQUEST_TEMPLATE.md や CONTRIBUTING.md が出来ており、
割りと大変でした。いやあ、大変だった&hellip;。（自分のパッケージだった
ら、大変じゃないです）
emacs-helm と melpa.org のハッカーとのやり取りは流石に緊張します。
先ほどパッケージが出来ました。お楽しみ下さい。
https://melpa.org/#/helm-elscreen おまけ 今確認したら、今回で 9 個目のパッケージ でした。思っていたより多い。
うち、私の作ったパッケージ(*)が 5 個。]]></description>
        </item>
        <item>
            <title><![CDATA[WEB+DB PRESS Vol.99の「実践Kubernetes」の第４章でつまづいたメモ #wdpress]]></title>
            <link>https://masutaka.net/2017-07-05-1/</link>
            <guid>https://masutaka.net/2017-07-05-1/</guid>
            <pubDate>Wed, 05 Jul 2017 00:00:00 GMT</pubDate>
            <description><![CDATA[先月からなぜか Kubernetes の素振りをしています。
職場の若者が先日発売された『WEB+DB PRESS Vol.99』の牧さんの記事、
「実践Kubernetes」をオススメしていたので、流れで実際に動かしてみま
した。
この記事は先週の『Kubernetes Meetup Tokyo #5』[2017-06-29-1] でも
オススメされていました。
 第４章で実際に GKE を使うことになるのですが、記事に書いてあるコマ
ンドや設定はそのままでは動かず、大変難儀しました。誰かの役に立つか
もしれないので、人知れずメモしておきます。
注意点 私は Kubernetes（以下 k8s）を使い始めたばかりです。
今回の件が、記事で使われているバージョン（1.6.1）と、現在 GKE で使
えるバージョン（1.6.6）の違いによるものなのか、本当に記事が間違っ
ているのか分かっていません。
どちらにせよ、網羅的に k8s を解説してくれたことには大変感謝してい
ます。おかげさまで、さあ使ってみよう！という気になりました。
記事のサンプルコードや YAML はサポートサイト からダウンロード出来ま
す。typo でつまづくのももったいないので、こちらを使うのが良いかも
しれません。特に今回は YAML が改ページで区切られている箇所があり、
手打ちは難易度高かったです。← あとからサンプルコードの存在を知奴
つまづいたメモ それでは順番に記載していきます。
P94「Podの定義」 記事では $PROJECT_ID がそのまま書かれていましたが、実際は展開する
必要がありました。注意書きを書いたり、{{PROJECT_ID}} などと環境変
数とは別のフォーマットを使ったほうが良かったかもしれません。
直前の cloudbuild.yaml では $PROJECT_ID の展開は必要ないため、気づ
くのに時間がかかりました。最終的には $ kubectl get pods で確認でき
る STATUS が InvalidImageName になっており、気づきました。
--- .]]></description>
        </item>
        <item>
            <title><![CDATA[Kubernetes Meetup Tokyo #5 に行ってきた #k8sjp]]></title>
            <link>https://masutaka.net/2017-06-29-1/</link>
            <guid>https://masutaka.net/2017-06-29-1/</guid>
            <pubDate>Thu, 29 Jun 2017 00:00:00 GMT</pubDate>
            <description><![CDATA[Kubernetes Meetup Tokyo #5 - connpass 今回はこれに尽きました。GKE ちょっと触っただけでの参加は時期尚早だった。
loading...
   if (localStorage.getItem("pref-theme") === "light") { const elements = document.getElementsByClassName('twitter-tweet'); for (let i = 0; i   ありがたいことに、全体の動画が公開されています。
[WIP] 運用しているサービスをKubernetes化するかどうか考える by @r_takaishi   GMO ペパボの minne のお話。高石さんお久しぶりです。
 Private Cloud の OpenStack 上に VM インスタンスが 100 台稼働中 1 回のデプロイに 25 分、1 台のスケールに 10 分。遅い コンテナ化したアプリを Kubernetes 上に載せてみた（検証中） デプロイは 10 分に、スケールは 4 分に短縮  Kubernetes 化により技術的課題が解決できそうで、素晴らしいと思った。
今後の動きが気になる。
Using Kubernetes in Production by @koudaiii   AWS の kops 上で Kubernetes を動かして、もう 1 年になるらしい。]]></description>
        </item>
        <item>
            <title><![CDATA[『プログラマのためのGoogle Cloud Platform入門』を読んだ]]></title>
            <link>https://masutaka.net/2017-06-26-1/</link>
            <guid>https://masutaka.net/2017-06-26-1/</guid>
            <pubDate>Mon, 26 Jun 2017 00:00:00 GMT</pubDate>
            <description><![CDATA[このブログはさくらの VPS 上で動いているのですが、ちょっと飽きてき
たので、GKE (Google Container Engine) にでも移動しようかしら、とい
うモチベーションで読みました（料金が見合わない気はしているが&hellip;）。
あと、GCP (Google Cloud Platform) の本自体が珍しく、あわよくば自分
のスキルを高められるかなとも思いました。今まで BigQuery と GCE
(Google Compute Engine) を少々しか使ったことしかないため。
結論から書くと、GCP の初心者向けには良い本だと思いました。ただ、割
りと初心者向けに書いてあるので、私のように AWS を業務で使っている
エンジニアには冗長な記述もありました。IP アドレスの説明とか。
まあでも、話の流れとしては不自然ではないので、さらりと流せば良いと
思います。
全体的にこのような構成になっています。完全な目次は公式サイト をどうぞ。
１章 GCP 自体の説明
２章 GCE, Cloud SQL, Cloud Storage を使ったサンプルアプリケーションをデプロイ
３章 Cloud Load Balancing を使ってマルチリージョンにデプロイ
４章 五目並べゲームを GKE 上にデプロイ
５章 機械学習を用いた GAE (Google App Engine) アプリケーションのデプロイ等
付録 Stackdriver を使った監視やロギング、Cloud IAM の説明、GCP の最新情報の入手
※ ２章のサンプルアプリは付録Aでも使うので、GCE や SQL インスタンス]]></description>
        </item>
        <item>
            <title><![CDATA[AWS Summit Tokyo 2017 に行ってきた #AWSSummit]]></title>
            <link>https://masutaka.net/2017-06-02-1/</link>
            <guid>https://masutaka.net/2017-06-02-1/</guid>
            <pubDate>Fri, 02 Jun 2017 00:00:00 GMT</pubDate>
            <description><![CDATA[Day2 だけですが、今年も AWS Summit Tokyo に行ってきました。
[2014-07-19-1] から始まり、[2015-06-07-1] [2016-06-04-1] と、
今年で 4 回目の参加になります。
今回は過去最高の規模なのか、品川プリンスホテルの会場も増えてました。
グランドプリンスホテルからの移動時間は 10 分ほど。人によっては移動
が大変だったみたいです。暑かったですし。
私は聞きたいのがほとんど AWS Dev Day のセッションだったので、午後
は全部品川プリンスホテルに引き篭もっていました。
全てのセッションの動画や資料はこちらをどうぞ。
AWS Summit Tokyo 2017 開催レポート - 基調講演・特別講演 動画・資料一覧｜AWS Day2 基調講演（キーノート）   資料ダウンロード オープニングが例年のDJ田中氏から、三味線からのエレキギター＆バイオ
リンとのセッションに変わりました。DJ田中氏は Day3,4 ？
目立っていたのは先日ニュースにもなった、三菱東京UFJ銀行の事例。つ
いに日本の銀行も AWS 上で動き始めました。とは言え、これから上り調
子か！と思わせてからのスピーカーの村林氏の今週末退任という流れには、
さすがに会場がザワッとしていましたw
去年との違いは Machine Learning 推しかなあ。
全体的に例年よりも RDS, Lambda など具体的な用語が多いキーノートだっ
た気がします。そうできる状況になってきたのでしょう。
あとは Amazon Lightsail 東京リージョンの発表や、大阪ローカルリージョ
ンの来年開設など軽めの発表でした。
詳細なレポートはクラスメソッドさんの記事をどうぞ。
【レポート】AWS Summit Tokyo 2017：Day2 基調講演(キーノート) #AWSSummit ｜ Developers.]]></description>
        </item>
        <item>
            <title><![CDATA[GitHub Organization をメンテナンスするスクリプトを作った]]></title>
            <link>https://masutaka.net/2017-05-28-1/</link>
            <guid>https://masutaka.net/2017-05-28-1/</guid>
            <pubDate>Sun, 28 May 2017 00:00:00 GMT</pubDate>
            <description><![CDATA[成り行きで会社の GitHub Organization の管理者業をしています。
Organization 配下のリポジトリやユーザが増えてきて、気にかけるのが
大変になってきたので、メンテナンス用の Ruby スクリプトを作りました。
  permission.rb 指定した Team パーミッションが付与されていないリポジトリを検索し、
Slack 通知する。実行しない曜日を設定可能。
tfa.rb 2FA を無効にしているユーザを検索し、Slack 通知する。無視ユーザや実
行しない曜日を設定可能。
こういった GitHub Organization の管理は、皆さんどうしているのだろう？]]></description>
        </item>
        <item>
            <title><![CDATA[pecoからfzfに移行した]]></title>
            <link>https://blog.tsub.me/post/move-from-peco-to-fzf/</link>
            <guid>https://blog.tsub.me/post/move-from-peco-to-fzf/</guid>
            <pubDate>Wed, 03 May 2017 00:30:00 GMT</pubDate>
            <description><![CDATA[<p>今までずっと <a href="https://github.com/peco/peco">peco</a> を使ってきたが、そろそろ別のツールに変えてみるか&hellip;と思い立ったので <a href="https://github.com/junegunn/fzf">fzf</a> に移行した。</p>

<p><a href="https://github.com/junegunn/fzf">junegunn/fzf: A command-line fuzzy finder written in Go</a></p>

<p>自分は基本的に飽き性なので、定期的に環境を変えたくなる時期が来るのだが fzf が思ってたより良かったので紹介したい。</p>

<p></p>]]></description>
        </item>
        <item>
            <title><![CDATA[Docker ではないコンテナ systemd-nspawn を使ってみた]]></title>
            <link>https://masutaka.net/2017-04-29-1/</link>
            <guid>https://masutaka.net/2017-04-29-1/</guid>
            <pubDate>Sat, 29 Apr 2017 00:00:00 GMT</pubDate>
            <description><![CDATA[先日、増田の記事を読みました。
Docker盲信してる皆様へ └ dockerやめてどうしたか？ systemd-nspawn を全く知らない自分に腹が立ったので、使ってみました。
ホスト OS を Arch Linux にして試す 何も知識がないので、ググってヒットしたこちらから開始。
[Arch Linux] systemd-nspawnで軽量コンテナを建てよう！ - Qiita ホストの Arch Linux は Vagrant で用意しました。Arch Linux は初めて
使ったし、名前も知らなかったというレベルです。
$ vagrant init terrywang/archlinux あとは記事のとおりに さまざまなディストリのコンテナを試していきました。
Arch Linux
→ 一番簡単だったが、インターネットに繋げられず
Debian
→ debootstrap が 404 でインストールできず断念
CentOS
→ dnf のインストールで挫折。
と、ひととおり試してこの記事はむしろ Arch Linux スゲー記事というこ
とに気づきました・・・！
ホスト OS を CentOS 7 にして試す 初心(?)に返って、仕事でも使っている CentOS 7 で再挑戦。
こちらの記事は簡単でした。Vagrant で出来たし、何もせずともコンテナ
からインターネットを参照できました。
Cent OS7でsystemd-nrespownで軽量コンテナを作成する macOS の方はたぶん、この通りにやると systemd-nspawn を体験できると]]></description>
        </item>
        <item>
            <title><![CDATA[ブログをGKEでの運用に移行した]]></title>
            <link>https://blog.tsub.me/post/operate-blog-server-on-gke/</link>
            <guid>https://blog.tsub.me/post/operate-blog-server-on-gke/</guid>
            <pubDate>Sun, 16 Apr 2017 05:29:33 GMT</pubDate>
            <description><![CDATA[<p>このブログはGitHub pagesを使って公開していたが、GKEに移行することにした。</p>

<p><a href="https://blog.tsub.me/post/created-blog-by-hugo/">はてなブログからHugo on Github Pagesに移行しました</a></p>

<p>これを聞いて、99%の人が、HugoでHTMLファイルを生成して公開しているならわざわざサーバーなんて必要ないんじゃないか？金の無駄じゃないか？と思うかもしれない。</p>

<p>自分もそう思う。</p>

<p>今回GKEを使ったのはGKEとk8sでのコンテナ運用を経験したかったことが非常に大きい。</p>

<p>会社ではECSを本番運用しているが、ECSに比べてk8sの方が良さそうな雰囲気しかないのでGKEの方も触っておこうかと思って移行した。</p>

<p>また、今のところブログ以外に個人で運用しているWebサービス等はないため、ブログがちょうどいい題材だった。</p>

<p></p>]]></description>
        </item>
        <item>
            <title><![CDATA[CircleCI 2.0 で capistrano デプロイしてみた]]></title>
            <link>https://masutaka.net/2017-04-16-1/</link>
            <guid>https://masutaka.net/2017-04-16-1/</guid>
            <pubDate>Sun, 16 Apr 2017 00:00:00 GMT</pubDate>
            <description><![CDATA[このブログは GitHub で管理しており、master に commit が追加される
と、CircleCI が capistrano を使ってデプロイします。
[2017-04-13-1] でテストを CircleCI 2.0 で動かしたので、デプロイも
試してみました。
最終的な circle.yml とデプロイスクリプトはこちらになりました。
 基本的に &ldquo;add_ssh_keys&rdquo; と &ldquo;deploy&rdquo; step 以外は [2017-04-13-1] と
同じです。ハマりそうなところだけ記載していきます。
ハマりそうなところ Deployments - CircleCI のとおり、&ldquo;deploy&rdquo; step があればデプロイ出来ます。
ただ capistrano で GitHub の private repository をデプロイする場合、
最低 2 つは SSH Key が必要になると思います。
(1) 本番サーバ（masutaka.net）への SSH ログイン
(2) SSH ログイン後に GitHub に SSH アクセス
これらの設定方法を説明していきます。
デバッグは CircleCI の各ジョブの Rebuild with SSH から、実際に本番
サーバに ssh ログインできるか確認していくと、分かりやすいと思います。]]></description>
        </item>
        <item>
            <title><![CDATA[CircleCI 2.0 をローカルで実行できる circleci コマンドとは何者か]]></title>
            <link>https://masutaka.net/2017-04-15-1/</link>
            <guid>https://masutaka.net/2017-04-15-1/</guid>
            <pubDate>Sat, 15 Apr 2017 00:00:00 GMT</pubDate>
            <description><![CDATA[先日の [2017-04-13-1] で気になったので調べてみました。
初めに結論から。
circleci コマンド（シェルスクリプト。macOS 等で実行可能）
└ docker run circleci/picard
└ /usr/bin/circleci (https://github.com/circleci/build-agent )
・circleci コマンドは build-agent というコマンドを Dockerize した
シェルスクリプト。
・build-agent は golang 製のツールで、/usr/bin/circleci としてコン
テナ内に存在する。おそらく private repository
https://github.com/circleci/build-agent で開発されている。
・Docker Image は https://hub.docker.com/r/circleci/picard/ だが、
Dockerfile は公開されていない。Alpine Linux ベースのようだ。
・この Docker Image には docker コマンドは存在しない。
/usr/bin/circleci が Docker Hub の API を使って、docker pull 相当
のことなどを実行するようだ。
調査過程や詳細など Running Jobs Locally - CircleCI に書いてある方法で
https://circle-downloads.s3.amazonaws.com/releases/build_agent_wrapper/circleci が /usr/local/bin にインストールされる。
これは circleci/picard を docker run するだけのラッパーシェルスク]]></description>
        </item>
        <item>
            <title><![CDATA[Rails リポジトリに CircleCI 2.0 を導入した]]></title>
            <link>https://masutaka.net/2017-04-13-1/</link>
            <guid>https://masutaka.net/2017-04-13-1/</guid>
            <pubDate>Thu, 13 Apr 2017 00:00:00 GMT</pubDate>
            <description><![CDATA[先日素振りがてら、個人の小さな Rails リポジトリを Dockerize しました。
https://github.com/masutaka/github-organization-watcher/pull/45 現在クローズドβの CircleCI 2.0 は Docker 前提らしいので、これも素
振りがてら移行してみました。
https://github.com/masutaka/github-organization-watcher/pull/48 CircleCI 2.0 はここから申請すれば、すぐ使えるようです。
https://circleci.com/beta-access/#request-access 移行前の印象 (1) 1.0 では宜しくやってくれたけど、2.0 は circle.yml に全部書く必
要があるみたい。面倒そう。
(2) とは言え、Dockerfile や docker-compose.yml があるし、ちょっと
やれば動くだろう。
(3) Alpine Linux の Docker Image 使えば、1.0 よりは速くなるのかな。
移行後の感想 (1) 予想に違わない面倒くささ・・・！ オートマがマニュアルになった感じ。
(2) 使えませんでした ／(^o^)＼ 参考にはなったけど。
(3) 速い・・・！！！（移行前: 01:38 、移行後: 00:30 ）
両方ともキャッシュあり状態です。Alpine Linux もそうかもしれないけ
ど、とにかくキャッシュのリストアが速かったです（後述）。あと、
CircleCI のビルドが全体的に高速です。
circle.yml circle.yml は 1.0 から 2.0 に移行して、このようになりました。同じ
ディレクトリにある Dockerfile や docker-compose.]]></description>
        </item>
        <item>
            <title><![CDATA[PS4 Pro と LG の 4K テレビ 43UH6500 で nasne は使えるのか？]]></title>
            <link>https://masutaka.net/2017-04-08-1/</link>
            <guid>https://masutaka.net/2017-04-08-1/</guid>
            <pubDate>Sat, 08 Apr 2017 00:00:00 GMT</pubDate>
            <description><![CDATA[追記(2017-11-12):
4K のままで使えるようになりました。torne のアップデートはなかった気がするので、PS4 のシステムアップデートで直ったのかもしれません。
 LG の 4K テレビ 43UH6500 と PS4 Pro の組み合わせで、nasne は使える
のか、ドンピシャの情報がなかったので、ここに書き留めておきます。
結論から書くと、PS4 Pro の設定を 2K にすれば使えました&hellip;。（涙）
普通に使おうとすると、torne から戻った時に画面全体が暗転もしくは紫
色になります。復帰するには、電源ボタン長押しで一度スタンバイにする
しかありません。
※ nasne はハードウェア、torne はソフトウェアの名前です。torne は
PS4 や iOS や Android 等で動作するソフトウェアです。torne を介して
nasne でテレビ番組を録画したり、視聴したりできます。
バージョン情報          LG 43UH6500 システムソフトウェア 04.30.45   PS4 Pro システムソフトウェア 4.50   nasne システムソフトウェア 2.57   torne 1.21    PS4 Pro を買ってしまった 先日、前世代の PS4 (CUH-1200AB02) を PS4 Pro (CUH-7000BB01) に買い]]></description>
        </item>
        <item>
            <title><![CDATA[オムロンの低周波治療器が肩こりにだいぶ効く]]></title>
            <link>https://masutaka.net/2017-04-02-1/</link>
            <guid>https://masutaka.net/2017-04-02-1/</guid>
            <pubDate>Sun, 02 Apr 2017 00:00:00 GMT</pubDate>
            <description><![CDATA[  私は季節の変わり目に首や肩甲骨の周りが非常に凝ります。あと飲みすぎ
た次の日も&hellip;。
先々週くらいにヤバイ兆候を感じたので、Amazon のほしい物リストに登
録していたこちらを速攻でポチッと。
この手の機器は初めて買ったのですが、時代の進化を感じます。
もみ方を「たたく」にして強さを８に設定すると、叩かれているのと変わ
りありません。やりながらキーボードを打つのは非常に困難・・・！
肩以外にも「関節」「腕」「足裏」「ふくろはぎ」「腰」に対応していま
す。もみ方も「たたく」「もむ」「おす」「さする」があります。
単4電池 x2 で動くのには驚愕。2 つバンドルされている点も親切。
欠点があるとしたら、服を着ている時は粘着パッドを付けづらいことでしょ
うか。
マッサージに行くことを考えたらだいぶ割安ですし、オススメです。
  ]]></description>
        </item>
        <item>
            <title><![CDATA[ローカル環境を出来るだけ Dockerize した]]></title>
            <link>https://masutaka.net/2017-03-21-1/</link>
            <guid>https://masutaka.net/2017-03-21-1/</guid>
            <pubDate>Tue, 21 Mar 2017 00:00:00 GMT</pubDate>
            <description><![CDATA[ローカルに nginx や mysql が起動していたり、gem install のためだけ
に cmake や icu4c を brew install するのは嫌になったので、三連休で
出来るだけ Dockerize しました。仕事の素振りも兼ねています。
nginx このブログの記事を書く時のプレビューや、雑多な html ファイルの表示
に使っています。
今まで $ brew install nginx して、nginx.conf も別途管理していまし
たが、以下のような雑な docker-compose.yml で、雑にマウントするだけ
で良くなりました。
version: &#39;3&#39; services: nginx: image: nginx:alpine ports: - 8080:80 volumes: - /Users/masutaka/Sites:/usr/share/nginx/html restart: on-failure:10  Snow Leopard からの流れで、雑多な html は ~/Sites に置いています。 $ docker-compose up -d しておけば、macOS を再起動しても nginx が
起動してくれます。 ほかにグローバルに必要な service が増えたら追加していきます。  mysql MySQL を使う Rails アプリケーションがあったので、とりあえず]]></description>
        </item>
        <item>
            <title><![CDATA[JAWS UG 2017 に行ってきた #jawsdays]]></title>
            <link>https://masutaka.net/2017-03-12-1/</link>
            <guid>https://masutaka.net/2017-03-12-1/</guid>
            <pubDate>Sun, 12 Mar 2017 00:00:00 GMT</pubDate>
            <description><![CDATA[http://jawsdays2017.jaws-ug.jp AWS 歴 3 年にして初参加。AWS Summit 派だから&hellip;（震え
主にサーバレスやコンテナまわりを聞いてた。
以下、スライドを見て思い出したことなどのメモ。登壇者の方の敬称は略
でございます。
新訳 とあるアーキテクトのクラウドデザインパターン目録   登壇者: 山﨑奈緒美
 登壇者: 神希嘉
 登壇者: 金平晃尚
サーバレスやマイクロサービスの基本的でためになるお話。オンプレから
クラウドに移行するモチベーションは理解できるけど、サーバレスはどん
ななんでしょうかね？まだ解釈できていない。コンテナ化は分かるんだけど。
ひとりでも怖くない！コミュニティの広げ方    登壇者: 小深田あゆみ
懇親会でなんとか１人２人に話しかけることは出来るけど、そのまま話し
込んでしまうんだよなあ。切り上げ時が分からない。
サーバーレスでシステムを開発する時に大切な事   登壇者: 比企宏之
MBS動画イズム444 という動画配信サービスをサーバレスで実装したお話。
裏側にサイボウズの Kintone という CMS を置いて、表側をサーバレスで
実装したとのこと。要件定義から実装まで 3 ヶ月。
とにかく設計が大事ということを強調していた。
P6. 結合先（AWS）は信じない。Lambda が複数回発火することは知ってい
たけど、発火しないこともあるとのこと。アプリケーションレベルでそれ
を考慮した設計にしているとのこと。S3 のファイルを Lambda で処理し
たら別のバケットに移動するとか。残っていたら発火してないので、定期
的に回収する。
P9. EC2 だとシステムが落ちると API も全部が落ちるが、サーバレスだ
と一部の API が落ちることはあり得る。非同期処理を同調させる、分散
アーキテクチャを考える必要がある。
P11. サーバレスを採用すると、運用でカバーが出来なくなり、全部開発]]></description>
        </item>
        <item>
            <title><![CDATA[DynamoDB で TTL が実装されたので、Rails4 から使ってみた]]></title>
            <link>https://masutaka.net/2017-03-02-1/</link>
            <guid>https://masutaka.net/2017-03-02-1/</guid>
            <pubDate>Thu, 02 Mar 2017 00:00:00 GMT</pubDate>
            <description><![CDATA[先日、ついに DynamoDB に TTL が実装されました。
新機能 – TTL（Time to Live）機能を利用したDynamoDBアイテムの管理について｜Amazon Web Services ブログ 仕事では Rails4 のセッションストアに ElastiCache for Redis を使っ
ているのですが、[2016-10-24-1] に書いたとおり、スケールが辛いです。
作業自体もそうですし、ElastiCache for Redis はスケールアップのみで
スケールアウトが出来ません。CPU パワーじゃなくてストレージが欲しい
のじゃ&hellip;。
DynamoDB はインスタンスの管理が不要なため、もし移行出来たらとって
もうれしいです。お値段も ElastiCache よりずっと安そうです。
https://aws.amazon.com/jp/dynamodb/pricing/ いろんな期待を込めて、ちょっと触ってみました。
準備 こちらの記事を参考にして、Rails4 のセッションストアを DynamoDB に
します。
Rails4 でセッションストアに DynamoDB を使う ｜ Developers.IO 2013年11月05日と古めの記事ですが、現在も動くことを確認しました。
当時はまだ TTL が実装されていないので、
 $ bundle exec rake db:sessions:cleanup
で期限切れのデータを削除する方式です。
 なぜか migration ファイルに拡張子 .rb が付かず、db:migrate で
DynamoDB のテーブルが作られませんでした。適当にリネームして下さい。
DynamoDB に expired_at を追加 DynamoDB で expired_at フィールドを追加する修正をしてみました。]]></description>
        </item>
        <item>
            <title><![CDATA[git-hyper-blame のセットアップ方法と使い方]]></title>
            <link>https://masutaka.net/2017-02-26-1/</link>
            <guid>https://masutaka.net/2017-02-26-1/</guid>
            <pubDate>Sun, 26 Feb 2017 00:00:00 GMT</pubDate>
            <description><![CDATA[任意のコミットを無視して git blame してくれるやつ。いわゆるメガコ
ミットを無視した blame をしたいときに使える。
なぜかセットアップにひどくハマったのでメモ。
セットアップ方法  git clone してくる   $ git clone https://github.com/google/proto-quic.git  以下のように、パスの通ったディレクトリに git-hyper-blame という
名前のシンボリックリンクを作る。git のサブコマンド hyper-blame が
利用可能になる   $ ln -s ~/src/github.com/google/proto-quic/depot_tools/git_hyper_blame.py ~/bin/git-hyper-blame
 ※ Python は macOS Sierra 付属の /usr/bin/python (Python 2.7.10) で
動きます。pip install とかも不要です。
使い方 普通の blame はこちら。
$ git blame Gemfile 99d5ce00 (Takashi Masuda 2016-08-26 23:06:50 +0900 1) # frozen_string_literal: true 99d5ce00 (Takashi Masuda 2016-08-26 23:06:50 +0900 2) ^1039771 (Takashi Masuda 2016-07-16 13:28:00 +0900 3) source &#39;https://rubygems.]]></description>
        </item>
        <item>
            <title><![CDATA[18 年 4 カ月使った au を解約して IIJmio に乗り換えた]]></title>
            <link>https://masutaka.net/2017-02-25-1/</link>
            <guid>https://masutaka.net/2017-02-25-1/</guid>
            <pubDate>Sat, 25 Feb 2017 00:00:00 GMT</pubDate>
            <description><![CDATA[IDO 時代も含めると 1998 年 10 月 から au 一筋で使ってきましたが、
先程格安 MVNO の IIJmio に乗り換えました。
やっぱり料金が高すぎですからね&hellip;。こんなに長期間使っているのに、
まったく減らないってどういうことなの。
移行後の月額料金はご覧のとおり、めっちゃ安くなりました。
移行前: 5,128 円（税込）
移行後: 1,728 円（税込）
※ 移行前は iPhone の分割代金を除外しています。含めると 7,823 円です。
※ 通話はほとんどせず、データ通信も毎月 3GB 未満です。
やってみたら案外簡単で、全部自宅で済ませることが出来ました。
以下、今回のまとめです。
1. SIM ロック解除 au の iPhone6s は、購入後 180 日経てば SIM フリーにできるそうです。
私は去年の 5 月に解除しました。au ショップに行かずとも、自宅で SIM
フリーにできます。
なにか重要なこと言ってた。3,000 円ってマジか。
loading...
   if (localStorage.getItem("pref-theme") === "light") { const elements = document.getElementsByClassName('twitter-tweet'); for (let i = 0; i  au はここから可否判定できます。条件も書いてあります。]]></description>
        </item>
        <item>
            <title><![CDATA[第18回Elasticsearch勉強会に参加してきた #elasticsearchjp]]></title>
            <link>https://masutaka.net/2017-02-21-1/</link>
            <guid>https://masutaka.net/2017-02-21-1/</guid>
            <pubDate>Tue, 21 Feb 2017 00:00:00 GMT</pubDate>
            <description><![CDATA[第18回elasticsearch勉強会｜Meetup 前々回 [2016-06-28-1] に続いて、2 回目の参加です。今回は先週社内勉
強会で発表したばかりだったので、熱量高めでした。いや、むしろ燃え尽
きていたかも&hellip;。
自分のブログに Elasticsearch + Vue.js で検索機能を付けたという発表をした｜feedforce Engineers&rsquo; blog ※ このブログ右上の検索ボックスのお話です
What&rsquo;s new Elastic Stack 5.2   Elastic 社の Jun Ohtani さん
Elasticsearch 5.1 ~
 Cancel long-running &ldquo;Search&rdquo; task by the task management API
Elasticsearch 5.2 ~ Index and search numeric and data ranges Keyword field with Normalizer Can break terms down into partitions  ちょうど今回 5.1 の検索を使ったのでタイムリーでした。大文字小文字
を区別させない検索に Keyword field with Normalizer が使えそうです。]]></description>
        </item>
        <item>
            <title><![CDATA[同じ Ajax 処理を Vue.js と jQuery で書いてみた]]></title>
            <link>https://masutaka.net/2017-01-27-1/</link>
            <guid>https://masutaka.net/2017-01-27-1/</guid>
            <pubDate>Fri, 27 Jan 2017 00:00:00 GMT</pubDate>
            <description><![CDATA[最近 Vue.js で、ようやくリアクティブプラグラミングに入門できました。
会社で毎週金曜日に開催されている、インフラ共有会(!)で Vue.js と
jQuery の違いを紹介しました。メモがてら、貼り付けておきます。
順番的には Vue.js で書いたものを jQuery で書き起こしました。
jQuery + Ajax  JS が HTML を生成したり、HTML の DOM 構造を知る必要があり、変更
に弱い HTML コードを見ても、ol タグの中身が空っぽで、これから何が入るの
か不明。JS も読む必要がある   Vue.js + Ajax  JS はほぼ関数定義に特化している。HTML の DOM 構造も知らなくて良い HTML コードを読めば、どんなレンダリングがされるか想像がつく。v-
から始まる、データ＆モデルバインディング等があるが、無視して読むこ
とも可能   ]]></description>
        </item>
        <item>
            <title><![CDATA[TTXによるフォントのチラ見をちょっといい感じにする設定]]></title>
            <link>https://shiromoji.hatenablog.jp/entry/2017/01/11/232900</link>
            <guid>https://shiromoji.hatenablog.jp/entry/2017/01/11/232900</guid>
            <pubDate>Wed, 11 Jan 2017 14:29:00 GMT</pubDate>
            <description><![CDATA[<p><iframe src="//hatenablog-parts.com/embed?url=https%3A%2F%2Fgithub.com%2Ffonttools%2Ffonttools" title="fonttools/fonttools" class="embed-card embed-webcard" scrolling="no" frameborder="0" style="display: block; width: 100%; height: 155px; max-width: 500px; margin: 10px 0px;"></iframe><cite class="hatena-citation"><a href="https://github.com/fonttools/fonttools">github.com</a></cite></p>

<p>仕事場／プライベート問わずに大活躍の fontTools ですが、その中でも頻出なのが「フォントファイルを TTX で<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%C0%A5%F3">ダン</a>プして中身をチラ見したい」という場面です。</p>

<pre class="code lang-sh" data-lang="sh" data-unlink>$ ttx <span class="synSpecial">-o</span> out.ttx <span class="synStatement">[</span>オプション<span class="synStatement">]</span> font.otf
$ <span class="synStatement">less</span> out.ttx
</pre>


<p>つい最近まで、上のようにしてごく普通に中身を見ていたのですが、何度もやっているといい加減めんどくさくなってきます。そこで、<code>.zshrc</code>（適宜 <code>.bashrc</code> などに読み替えてください）に簡単なシェル関数を定義してみました。</p>

<pre class="code lang-sh" data-lang="sh" data-unlink><span class="synIdentifier">tl() {</span>
    ttx <span class="synSpecial">-q</span> <span class="synSpecial">-o</span> - <span class="synPreProc">$*</span> <span class="synStatement">|</span> <span class="synStatement">source</span>-highlight <span class="synSpecial">-s</span> xml <span class="synSpecial">-f</span> esc <span class="synStatement">|</span> <span class="synStatement">less</span>
<span class="synIdentifier">}</span>
</pre>


<p>関数名はなんでもいいのですが、<code>ttx</code> で <code>less</code> なので短く <code>tl</code> にしておきました。途中の <code>source-highlight</code> は <a href="https://www.gnu.org/software/src-highlite/">GNU Source-highlight</a> という<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%B7%A5%F3%A5%BF%A5%C3%A5%AF%A5%B9">シンタックス</a>ハイライトの定番ツールです。こうしておけば、</p>

<pre class="code lang-sh" data-lang="sh" data-unlink>$ tl <span class="synStatement">[</span>オプション<span class="synStatement">]</span> font.otf
</pre>


<p>とするだけでちょっといい感じに中身がチラ見できるようになります。べんり。</p>

<p><span itemscope itemtype="http://schema.org/Photograph"><img src="https://cdn-ak.f.st-hatena.com/images/fotolife/m/mashabow/20170111/20170111232302.gif" alt="f:id:mashabow:20170111232302g:plain" title="f:id:mashabow:20170111232302g:plain" class="hatena-fotolife" itemprop="image"></span></p>
]]></description>
            <enclosure url="https://cdn-ak.f.st-hatena.com/images/fotolife/m/mashabow/20170111/20170111232302.gif" length="0" type="image/gif"/>
        </item>
        <item>
            <title><![CDATA[完全に闇に落ちていた StartSSL に ￥3,603 課金してしまったお話]]></title>
            <link>https://masutaka.net/2017-01-10-1/</link>
            <guid>https://masutaka.net/2017-01-10-1/</guid>
            <pubDate>Tue, 10 Jan 2017 00:00:00 GMT</pubDate>
            <description><![CDATA[このサイトは 10 ヶ月ほど前の [2016-03-15-1] に http2 対応したタイ
ミングで SSL 証明書を取得しました。
当時すでに Let&rsquo;s Encrypt が使われ始めていましたが、Chef の構成管理
が面倒そうなのと、1 年に 1 回の更新なら手間でもないだろうというこ
とで、StartSSL で SSL 証明書を取得しました（自身初の経験）。
今回はサブドメインを 1 つ追加するために、StartSSL の管理画面から
SSL 証明書を作成し差し替えたのですが、どうもうまくいかない。Chrome
だと NET::ERR_CERT_REVOKED というエラーになってしまう。
macOS の curl だと Invalid certificate chain になるけど、Linux の
curl は問題なかったり、macOS も Firefox ではエラーにならなかったり、
法則性が見いだせませんでした。
仕方がないので、サーバ側の問題とは認識しつつも、切り分けのために
macOS の Keychain Access の StartSSL っぽい Certificate を削除した
が現象変わらず。
私の SSL 証明書への耐性が少ないこともあり、「以前の証明書と干渉し
ているのかな？」と仮説を立て、StartSSL で作った以前の SSL 証明書を
Revoke してみました。
ただ、StartSSL は Class1 の SSL 証明書であっても手数料が必要です。]]></description>
        </item>
        <item>
            <title><![CDATA[Software Design を 13 ヶ月分まとめ読みした]]></title>
            <link>https://masutaka.net/2017-01-03-1/</link>
            <guid>https://masutaka.net/2017-01-03-1/</guid>
            <pubDate>Tue, 03 Jan 2017 00:00:00 GMT</pubDate>
            <description><![CDATA[11 月初旬から 2 ヶ月近く、ようやく本日新幹線の中で読み切りました。
業務で 1 サーバあたりの許容 http リクエスト数を調べる必要があった
のが発端でした。2015年12月号から 4 回に渡って連載された『クラウド
時代のWebサービス負荷試験再入門』に感謝です。ELB の後ろの App サー
バを何台置くとか、みんなどうやって決めているのですかね？
 Software Design 2015年12月号｜技術評論社  Software Design 2016年1月号｜技術評論社  Software Design 2016年2月号｜技術評論社  Software Design 2016年3月号｜技術評論社   この記事だけ読むのも勿体ないので、できるだけ全部の記事も読んでまし
た。そしたら「最新号までいけるんじゃないか？」という気になり、結果
的に2016年12号分まで読み切ることができました。意識を高く保つのが大
変でしたが、読んで良かったです。
読んで実感したのは、普段 Web の記事や技術書を読んでいると、どうし
ても自分というフィルターがかかるということ。
雑誌だと、あまり興味なかったり掘り下げていない分野も目に飛び込んで
くるので、良い補完になりました。Software Design は DB の連載が多い
ので、苦手意識のある自分には良い学習になりました。
あと大きな声で言えませんが、2016年7月号 の『正規表現入門』が役に立
ちました。&quot;.*?&quot; の最小マッチを今さら知っただなんて誰にも言えない&hellip;。
号を進めていくと、雑誌の構成がわかってくるので、読むスピードがちょっ
とだけ早くなった気がします。
これからの予定  出たらすぐに読む 最新号（2017年1月号 ）も読む  早くしないと2017年2月号が出てしまう&hellip;   WEB+DB PRESS も 2016 年分から最新号まで読む  隔月発売だから助かります（あかん     ]]></description>
        </item>
        <item>
            <title><![CDATA[任意の Ruby オブジェクトを YAML として書く]]></title>
            <link>https://masutaka.net/2016-12-19-2/</link>
            <guid>https://masutaka.net/2016-12-19-2/</guid>
            <pubDate>Mon, 19 Dec 2016 01:00:00 GMT</pubDate>
            <description><![CDATA[実際使うことはないだろうがメモ。
hoge: !ruby/object:ActiveSupport::Duration value: 7776000 parts: - - :months - 3 結果 hoge を取り出すと、ActiveSupport::Duration としての 3 months が
格納されている。
$ irb -r active_support/time -r yaml -r erb irb(main):001:0&gt; YAML.load(ERB.new(IO.read(&#39;hoge.yml&#39;)).result) =&gt; {&#34;hoge&#34;=&gt;3 months} irb(main):002:0&gt; YAML.load(ERB.new(IO.read(&#39;hoge.yml&#39;)).result)[&#39;hoge&#39;] =&gt; 3 months irb(main):003:0&gt; YAML.load(ERB.new(IO.read(&#39;hoge.yml&#39;)).result)[&#39;hoge&#39;].class =&gt; ActiveSupport::Duration 求め方 irb(main):007:0&gt; print YAML.dump(3.months) --- !ruby/object:ActiveSupport::Duration value: 7776000 parts: - - :months - 3 =&gt; nil 参考情報  library yaml (Ruby 2.3.0)  Rubyist Magazine - プログラマーのための YAML 入門 (中級編)   ]]></description>
        </item>
        <item>
            <title><![CDATA[Ruby の $ERROR_INFO などの特殊変数は require 'English' が必要だったのか]]></title>
            <link>https://masutaka.net/2016-12-19-1/</link>
            <guid>https://masutaka.net/2016-12-19-1/</guid>
            <pubDate>Mon, 19 Dec 2016 00:00:00 GMT</pubDate>
            <description><![CDATA[先日会社の tech channel で話題になったのでメモ。Rubiest の方々にとっ
ては常識なんですかね&hellip;？
$ ruby -v ruby 2.3.3p222 (2016-11-21 revision 56859) [x86_64-darwin15] $ ruby -e &#39;raise &#34;aaa&#34; rescue p $!&#39; #&lt;RuntimeError: aaa&gt; $ ruby -e &#39;raise &#34;aaa&#34; rescue p $ERROR_INFO&#39; nil $ ruby -r English -e &#39;raise &#34;aaa&#34; rescue p $ERROR_INFO&#39; #&lt;RuntimeError: aaa&gt; Ruby はグローバル変数の初期値が nil なのがたちが悪い。個人的にはも
う $ERROR_INFO とかは使わないと思う。
 C: Prefer $ERROR_INFO from the stdlib &lsquo;English&rsquo; module over $!.
 RuboCop 先生がこのようにお怒りだったので、出来るだけ長い変数名を使
うようにしていましたが、行間を読む必要があったみたいです。
=&gt; require &lsquo;English&rsquo; も必要。]]></description>
        </item>
        <item>
            <title><![CDATA[ぼくの情報収集方法]]></title>
            <link>https://blog.tsub.me/post/how-i-collect-information/</link>
            <guid>https://blog.tsub.me/post/how-i-collect-information/</guid>
            <pubDate>Sat, 17 Dec 2016 07:50:00 GMT</pubDate>
            <description><![CDATA[<p>この記事は<a href="http://www.adventar.org/calendars/1427">feedforce Advent Calender 2016</a>の17日目の記事です。</p>

<p>前回の記事はpokotyamuによる<a href="http://pokotyamu.hatenablog.com/entry/2016/12/16/095524">HHKBを掃除した話</a>でした</p>

<p>無刻印のキーだからといってどのキーでも当てはまると思って適当にやるとものすごい罠に引っかかっちゃうんですね。</p>

<p>さて、今回は多くのエンジニアにとって重要なキーワードである情報収集についてです。</p>

<p>自分は多分社内ではわりと情報収集よくやってる方だと思っているのですが、自分が普段どんな方法で情報収集してるかを共有したかったので今回まとめてみました。</p>

<p></p>]]></description>
        </item>
        <item>
            <title><![CDATA[不惑の年に風呂の良さを知った]]></title>
            <link>https://masutaka.net/2016-12-14-1/</link>
            <guid>https://masutaka.net/2016-12-14-1/</guid>
            <pubDate>Wed, 14 Dec 2016 00:00:00 GMT</pubDate>
            <description><![CDATA[この記事は feedforce Advent Calendar 2016 の 14 日目の記事です。
13 日目はハッシーの『フィードフォースでの映像制作について 』でした。
彼らがつい二週間前にリリース(?)したシンゴジラのパロディムービーは、
密かに今までで一番のお気に入りです。社内限定で今までのムービー見ら
れないかなー。
さて、私も表題の年齢になり、季節の変わり目はひどい肩こりや頭痛に悩
まされる日が出てきました。普段は気になりませんが、この時だけはたま
らず整体に行きます。あまりにひどいと寝込んでしまうことも。
とは言え、昔から体だけは丈夫で、体調が悪くなることはそうそうありま
せん。寝込むのは年に一度くらい。あと二日酔い。二日酔いツライ。
ただ、体が冷えるとあっさり風邪を引くことが分かってきたので、会社で
は毛布モドキを被り、家では着ぐるみモドキ を履き、だいぶ気を付けてい
ます。
10 月のあの日もそうでした。急に気温が下がり、肩がこり、こりゃ風邪
引くかなーと思っていたところ、何の気なしに湯船にお湯を張り風呂に入
りました。１年前に引っ越してから初めての風呂です（汚くはない）。
そしたらびっくり。肩こりがすーっと消え、体もポカポカです。その日を
境に、週に何度か風呂に入る日が始まりました。
どのようにして風呂に入るか 詳しく説明させて頂きます。
何はなくともまずは掃除です。今の部屋に引っ越してから、CaSy に月一
で来てもらっている [2015-12-27-1] ので、基本的にはきれいです。でも
入る前の掃除はもちろんします。
掃除が終わったらお湯を溜めます。10 月だと 44 度、今だったら 45 度
くらいを 10 分ですね。私は昔から熱い風呂は好きではないのですが、風
呂の蓋は買ってないので設定温度は熱めです。
未だにお湯張りタイマーの使い方が分かりません。一度、90 リットルの
つもりが、90 度のお湯を溜めてしまい、泣きながら水で薄め続けました。
お湯が溜まったら速やかに風呂に入ります。iPhone をドアの外に置き、
静かな音楽をかけます。給水用のお茶や水も置きます。間違ってもついで
の洗濯は止めましょう。静かな音楽が台無しです。
軽くお湯で体を流し、湯船にゆっくりと浸かります。歯磨きをするのも良
いでしょう。
適度に暖まったら体を洗います。朝の忙しい時間ではないので、ゆっくり
出来るのが良いですね。洗い終わったらまた湯船に浸かります。この辺で
給水するのも良いでしょう。
次は頭を洗います。最近は意識高いので、３日に一度はこちらで皮脂をズ
ビっと落としています。リンスやコンディショナー必須。
 それ以外はこちらを使っています。逆に皮脂を落としすぎないシャンプー
です。リンスやコンディショナー不要です。前々職の先輩に教えてもらい
ました。
 どちらも安くないですが、一日あたりに換算すると大したことないので、
ここ数年使っています。
顔を洗いつつ髭を剃ったら、最後の湯船です。風呂で髭を剃る人って、ど]]></description>
        </item>
        <item>
            <title><![CDATA[フトらない話]]></title>
            <link>https://blog.tmd45.jp/entry/2016/12/10/135046</link>
            <guid>https://blog.tmd45.jp/entry/2016/12/10/135046</guid>
            <pubDate>Sat, 10 Dec 2016 04:50:46 GMT</pubDate>
            <description><![CDATA[<p>この記事は <a href="http://www.adventar.org/calendars/1427">feedforce Advent Calendar 2016</a> の 10 日目の記事です。</p>

<p>昨日は弊社営業チームから初めて Advent Calendar に参加してくれた黒い伝道師・喜多の『<a href="http://lineblog.me/kosukekita/archives/62812.html">クリスマスまでまだ間に合う！日焼けマシンを使えば誰でも黒くモテ肌を手に入れる事ができる</a>』でした。クリスマスに向けた Advent Calendar にぴったり（？）の記事。日焼けマシーンってサイ<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%D0%A1%BC">バー</a>な感じしますね（・∀・）</p>

<p>今年の弊社 Advent Calendar は "エンジニア" に限らない、ということで「健康オタク」枠として、去年参加した <a href="http://www.adventar.org/calendars/740">糖質制限 Advent Calendar 2015</a> のその後の話を書きます。</p>

<p><iframe src="https://hatenablog-parts.com/embed?url=https%3A%2F%2Fblog.tmd45.jp%2Fentry%2F2015%2F12%2F23%2F130639" title="さらに3ヶ月経過 - TMD45&#39;β&#39;LOG!!!" class="embed-card embed-blogcard" scrolling="no" frameborder="0" style="display: block; width: 100%; height: 190px; max-width: 500px; margin: 10px 0px;"></iframe><cite class="hatena-citation"><a href="https://blog.tmd45.jp/entry/2015/12/23/130639">blog.tmd45.jp</a></cite></p>

<p>ダイエットではない。断じて。</p>

<h3>昨年のあらすじ</h3>

<table>
<thead>
<tr>
<th> 時期 </th>
<th> </th>
</tr>
</thead>
<tbody>
<tr>
<td> 2015年3月 </td>
<td> 一人暮らし再開。人生最重量 58 kg、<a class="keyword" href="http://d.hatena.ne.jp/keyword/%C2%CE%BB%E9%CB%C3%CE%A8">体脂肪率</a> 32 %。体重記録開始 </td>
</tr>
<tr>
<td> 2015年4月 </td>
<td> <a href="http://blog.tmd45.jp/entry/2015/04/07/012713">"カロリー記録を始めて 19 日で 2.8 kg 落ちた"</a><a href="#f-f5eed0df" name="fn-f5eed0df" title="ちなみにカロリー記録は iOS アプリの『MyFitnessPal』を使っていました。">*1</a> </td>
</tr>
<tr>
<td> 同頃 </td>
<td> <a href="http://blog.tmd45.jp/entry/2015/04/18/163328">Withings Activité（活動量・睡眠計測）利用開始</a><a href="#f-377be23b" name="fn-377be23b" title="その前は『fitbit one』ユーザでした。">*2</a> </td>
</tr>
<tr>
<td> 2015年5月 </td>
<td> <a href="http://blog.tmd45.jp/entry/2015/05/13/203200">糖質制限に興味を持ちはじめて「糖質軽減」をはじめる</a> </td>
</tr>
<tr>
<td>  </td>
<td> だいたい 1kg/月 で体重が減り続けて <del>調子に乗る</del> </td>
</tr>
<tr>
<td> 2015年9月 </td>
<td> <a href="http://blog.tmd45.jp/entry/2015/09/23/131225">約半年の結果</a>。体重 50.7 kg、<a class="keyword" href="http://d.hatena.ne.jp/keyword/%C2%CE%BB%E9%CB%C3%CE%A8">体脂肪率</a> 24.4 % 🎉 </td>
</tr>
<tr>
<td> 2015年12月 </td>
<td> <a href="http://blog.tmd45.jp/entry/2015/12/23/130639">さらに3ヶ月経過</a>。体重 51.1 kg、<a class="keyword" href="http://d.hatena.ne.jp/keyword/%C2%CE%BB%E9%CB%C3%CE%A8">体脂肪率</a> 25.4 %。冬ゆえの微増 </td>
</tr>
</tbody>
</table>


<p>そういえば、その後 社内で『<a href="http://d.hatena.ne.jp/asin/4478039674/tmd45-22">シリコンバレー式 自分を変える最強の食事</a>』が一斉を風靡してました。実際に社長が体質改善に成功してました。
人それぞれ体質的・性格的に合うものを選ぶのが一番良いですね（感想）。</p>

<p>以前の記事でも書きましたが、カロリー記録は続けていません。だいたい普段食べるもののカロリーや成分（炭水化物／糖質）の傾向が見えてきたとこで終わりにしました。</p>

<p>カロリーの制限もしていません。むしろカロリーオフの商品とか困る。活動エネルギーはとりつつ、糖質を控えたい。ただ糖質（炭水化物）の<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%B3%A5%B9%A5%D1">コスパ</a>が良すぎるんですよね。食事に<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%B3%A5%B9%A5%D1">コスパ</a>を求めると必然的に糖質メインに摂取することになるかと思います。</p>

<p>ゆえにこの二年、食費は以前よりかかってる気がしますヽ(；´Д｀)ノ</p>

<h3>一年ぶりの報告記事です</h3>

<p>さて前置きが長くなりましたが、その後のご報告です。</p>

<p><span itemscope itemtype="http://schema.org/Photograph"><img src="https://cdn-ak.f.st-hatena.com/images/fotolife/t/tmd45/20161210/20161210130424.png" alt="f:id:tmd45:20161210130424p:plain" title="f:id:tmd45:20161210130424p:plain" class="hatena-fotolife" itemprop="image"></span></p>

<p><span itemscope itemtype="http://schema.org/Photograph"><img src="https://cdn-ak.f.st-hatena.com/images/fotolife/t/tmd45/20161210/20161210130435.png" alt="f:id:tmd45:20161210130435p:plain" title="f:id:tmd45:20161210130435p:plain" class="hatena-fotolife" itemprop="image"></span></p>

<p><span style="font-size: 150%">【祝】リバウンドなし【維持】</span></p>

<p>褒めてくれていいのよ( ･´ｰ･｀)＋</p>

<p>去年サボった健康診断を、今年はちゃんと行ってきたんですが、看護師さんたちに「この体重は意図して減らしたんですか…？」「なにかありました…？（心配」「これ以上減らさないでくださいね（叱」って言われました。わーい（？）</p>

<p>安心してください、ブラックじゃないです（意味深）</p>

<p>なにより血液検査（<a class="keyword" href="http://d.hatena.ne.jp/keyword/%C2%E5%BC%D5">代謝</a>）の結果、脂質の項目がすごく良くなった。2年前との比較ですが</p>

<ul>
<li><a class="keyword" href="http://d.hatena.ne.jp/keyword/%C3%E6%C0%AD%BB%E9%CB%C3">中性脂肪</a>: 143 mg/dL → 40 mg/dL（むしろ減りすぎ）</li>
<li>HDL-<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%B3%A5%EC%A5%B9%A5%C6%A5%ED%A1%BC%A5%EB">コレステロール</a>: 59 mg/dL → 67 mg/dL（善玉<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%B3%A5%EC%A5%B9%A5%C6%A5%ED%A1%BC%A5%EB">コレステロール</a>微増👍）</li>
<li>LDL-<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%B3%A5%EC%A5%B9%A5%C6%A5%ED%A1%BC%A5%EB">コレステロール</a>: 156 mg/dL → 89 mg/dL（悪玉<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%B3%A5%EC%A5%B9%A5%C6%A5%ED%A1%BC%A5%EB">コレステロール</a>大幅減🎉）</li>
</ul>


<p>これはびっくりした。あと糖質軽減してても血糖値はほとんど変わりなしでした。意外。</p>

<p>健康診断は毎年受けましょうね( ◠ ◡ ◠ )</p>

<h3>考察</h3>

<p>糖質軽減で自分が成功したのは、もともとの体重増加の原因が、不必要な糖質の取りすぎによるものであったからだと思います。</p>

<p>先にも書きましたが、体質は人それぞれなので、太っていると感じるならその太っている原因も人それぞれ。原因に対する対策も人それぞれです。</p>

<p><del>ダイエット</del> 体質改善は流行り廃りに乗ってやっても、当たりハズレに振り回されるだけになりかねないので、自分の体質をよく観察して自分に合うものを選びましょう（真面目）</p>

<h3>最近のこと</h3>

<p>体重の減少があまりなくなって、維持の時期になってからは去年よりも多少糖質摂取量は増えました。</p>

<p>ガンガン減ってるときはそれが楽しくて「せっかく体重減ってるのにいまここで食べちゃったらもったいないな」みたいに思って、あまり「食べたい！」みたいな気分にもならなかったですし。</p>

<p>最近はご飯とか甘いものとかも食べたくて食べるようになってきました。そこで気をつけているのは、とにかく先に野菜をお腹にいれておくということです。まず野菜。野菜。野菜。ここ最近は「糖質警察」より「野菜先に食えババア」になりつつあります。</p>

<p>野菜ジュースでもいいけど、砂糖や果実で味を整えてるために糖質の高いものもあるので気をつけて😉</p>

<p><a data-flickr-embed="true"  href="https://www.flickr.com/photos/forever5yearsold/2808759067/in/photolist-5hcCdt-8JeSZ1-grmZLz-ossY4u-7AMHBe-cc1SbW-oo8Tak-7H2G4A-7SzJtP-4zorqE-8UFrgv-5p5yds-5ucmeb-52pKAr-9JYMkV-7SzJW4-9JYLWB-ossXWf-bVsnSX-as23tS-bymSS8-o9otzg-5xgaYM-cvv6y9-8d37Tg-bvS4Qd-9WeDfm-9WeDbu-2tN1Vw-cW5sVb-hnhr83-4Uqxfi-8ijb8Q-kALMMF-9K2Bc5-oY8vf9-7SzKck-8arAwJ-ozK9Sx-oJDVvn-9BjQQz-qu1PXg-969ph6-qSW4YB-AurF2q-9aRtLF-7HgeNW-amLgHC-9yLjbY-6YnLS5" title="Vegetables in Whole Foods Market"><img src="https://c4.staticflickr.com/4/3290/2808759067_de40a54f47_b.jpg" width="1024" height="768" alt="Vegetables in Whole Foods Market"></a><script async src="//embedr.flickr.com/assets/client-code.js" charset="utf-8"></script></p>

<p>筋トレも暇な時にやるような習慣になりつつあります。まぁ真面目にはやってないので筋肉がつくほどではないですが… 通勤で歩く距離を伸ばしたり、地味にやっております。</p>

<h3>おわりに</h3>

<p><blockquote class="twitter-tweet" data-lang="ja"><p lang="ja" dir="ltr">よくあんな仕様が曖昧でログ出力も無くて運用で回避している箇所がたくさんあるシステムの面倒を見てくれているよなって思いますよね…</p>&mdash; <a class="keyword" href="http://d.hatena.ne.jp/keyword/%A4%AB%A4%BB%A4%A4">かせい</a>さん (@kasei_san) <a href="https://twitter.com/kasei_san/status/807403160734007296?ref_src=twsrc%5Etfw">2016年12月10日</a></blockquote><script async src="https://platform.twitter.com/widgets.js" charset="utf-8"></script></p>

<p>健康診断は定期的に受けましょうね（2度目）。</p>

<p>いかがでしたでしょうか。明日は <span style="color: #aaaaaa"><del><a class="keyword" href="http://d.hatena.ne.jp/keyword/Twitter">Twitter</a> アカウントは持ってるけど発言数が少なくて基本的に「おもしろいこと」しか公開しないタイプの</del></span> @Lorentzca による 2 記事目『分散惑星間データセンター(Grid Interplanetary Data Center)時代のデータ通信技術』の話だそうです。</p>

<p>真面目か…？！乞うご期待。</p>

<p><ins datetime="2016-12-13T11:47:25+09:00"><a class="keyword" href="http://d.hatena.ne.jp/keyword/%C4%C9%B5%AD">追記</a></ins></p>

<p>こやつｗｗｗｗｗｗｗ（いい話でした ☺）</p>

<ul>
<li><a href="https://ghost.ponpokopon.me/blogs-heart/">去年より個人ブログのポスト数を2倍くらい増やせたのでなぜなのか書く</a></li>
</ul>

<div class="footnote">
<p class="footnote"><a href="#fn-f5eed0df" name="f-f5eed0df" class="footnote-number">*1</a><span class="footnote-delimiter">:</span><span class="footnote-text">ちなみにカロリー記録は <a class="keyword" href="http://d.hatena.ne.jp/keyword/iOS">iOS</a> アプリの『MyFitnessPal』を使っていました。</span></p>
<p class="footnote"><a href="#fn-377be23b" name="f-377be23b" class="footnote-number">*2</a><span class="footnote-delimiter">:</span><span class="footnote-text">その前は『fitbit one』ユーザでした。</span></p>
</div>]]></description>
            <enclosure url="https://c4.staticflickr.com/4/3290/2808759067_de40a54f47_b.jpg" length="0" type="image/jpg"/>
        </item>
        <item>
            <title><![CDATA[bundle install で Your Gemfile.lock is corrupt. と怒られる件]]></title>
            <link>https://masutaka.net/2016-12-10-1/</link>
            <guid>https://masutaka.net/2016-12-10-1/</guid>
            <pubDate>Sat, 10 Dec 2016 00:00:00 GMT</pubDate>
            <description><![CDATA[個人のいくつかのリポジトリで bundle install できないことがあり、困っ
ていました。
$ bundle install Fetching gem metadata from https://rubygems.org/............ Fetching version metadata from https://rubygems.org/. Resolving dependencies... Using rake 11.3.0 Using concurrent-ruby 1.0.2 Using i18n 0.7.0 Using thread_safe 0.3.5 Using net-ssh 3.2.0 Installing minitest 5.10.1 Your Gemfile.lock is corrupt. The following gem is missing from the DEPENDENCIES section: &#39;ffi&#39; loading...
   if (localStorage.getItem("pref-theme") === "light") { const elements = document.getElementsByClassName('twitter-tweet'); for (let i = 0; i  結論から言うと $ bundle install --without development で回避できま]]></description>
        </item>
        <item>
            <title><![CDATA[Blox Introduction]]></title>
            <link>https://blog.tsub.me/post/blox-introduction/</link>
            <guid>https://blog.tsub.me/post/blox-introduction/</guid>
            <pubDate>Thu, 08 Dec 2016 15:00:00 GMT</pubDate>
            <description><![CDATA[<p>この記事は<a href="http://qiita.com/advent-calendar/2016/docker">Docker Advent Calendar 2016</a>の9日目の記事です。</p>

<p>先日AWSのre:Invent 2016で<a href="https://blox.github.io/">Blox</a>が発表されました。</p>

<p>BloxはEC2 Container Service(ECS)関連のオープンソースのツール群のことです。</p>

<p>そしてそのツールとは主にECSのカスタムスケジューラを指します</p>

<p>ECSはマネージドなスケジューラとマネージャを標準で備えていますが、Bloxはそれとは別に自分でホスティングする必要があります。</p>

<p>しかし、ECSに足りない機能を補ってくれるため導入するメリットは大きいでしょう。</p>

<p><a href="https://aws.amazon.com/jp/blogs/news/monitor-cluster-state-with-amazon-ecs-event-stream/">先日リリースされた、CloudWatchEventsのECSイベントストリーム</a>を利用することで、よりスムーズにECSのクラスタの状態を監視してカスタムスケジューラを作ることができるようになりました。</p>

<p>Bloxはこれを使った一例と言えます</p>

<p>この記事ではBloxについて試してみて分かった内容や所感について書いていきます</p>

<p><img src="https://i.gyazo.com/4c00e85fca7b228d7aa0d5f1e6dd1d27.png" alt="Blox thumbnail" /></p>

<p></p>]]></description>
        </item>
        <item>
            <title><![CDATA[yaml_vault が AWS での Rails 環境変数つらい問題を解決したと思う]]></title>
            <link>https://masutaka.net/2016-11-05-1/</link>
            <guid>https://masutaka.net/2016-11-05-1/</guid>
            <pubDate>Sat, 05 Nov 2016 00:00:00 GMT</pubDate>
            <description><![CDATA[※ 弊社 feedforce で毎週行っている、インフラ共有会を元にした記事で
す。AWS で Rails を使っている方を想定していますが、数人規模のチー
ムを意識した内容になっています。
こちらの記事で yaml_vault を知ったので、実際に試してみました。
yaml_vault+KMSでRailsアプリのconfig/secrets.ymlを暗号化してgitにコミットして管理する - Qiita 環境変数つらい SaaS の API Key などの秘匿情報をコードに埋め込まないために、Rails
で dotenv を使っている方も多いかと思います。
しかし、README.md にあるように 作者の @bkeepers さんは production
での利用は奨励していません。
dotenv was originally created to load configuration variables into `ENV` in *development*. There are typically better ways to manage configuration in production environments - such as `/etc/environment` managed by [[Puppet|https://github.com/puppetlabs/puppet]] or [[Chef|https://github.com/chef/chef]], `heroku config`, etc. とは言え、/etc/environment を Chef の Encrypted Data Bag 等で構成]]></description>
        </item>
        <item>
            <title><![CDATA[ZenPad 3S 10 (Z500M) から始まる廃人生活]]></title>
            <link>https://masutaka.net/2016-11-01-1/</link>
            <guid>https://masutaka.net/2016-11-01-1/</guid>
            <pubDate>Tue, 01 Nov 2016 00:00:00 GMT</pubDate>
            <description><![CDATA[８月に発表を知り、日本での発売を心待ちにして２ヶ月。10/19（水）にようやく日本で予約が始まりました。
loading...
   if (localStorage.getItem("pref-theme") === "light") { const elements = document.getElementsByClassName('twitter-tweet'); for (let i = 0; i  速攻で予約し、同じ週の 10/22（土）にゲット出来ました。
ZenPad 3S 10 (Z500M) シルバー タブレットは親に iPad を買った時に一瞬所持したことはありますが、自分用を持つのは今回が初めてです。いやあ、タブレットいいですね（完全に時代から取り残されている人）。
さて、こんな理由から最近タブレットへの物欲が高まっていました。
 Kindle Paperwhite に不満を感じ始めていた  ボリュームある技術書読むのが辛い  Kindle がなかったらもっと読めていなかったけど   マンガを読むのには全く適していない  描画が遅い 見開きページを見るためには手動で回転が必要 カラーページも見られないので Kindle for Mac で見てた   とは言え、Kindle Paperwhite は小説読むのにはすごく良いと思う   MacBook Air を布団に持ち込んで、Netflix とか見てた  テレビで見る時は PS4 使ってる。これは結構良い   実家に帰った時などの暇つぶし  iPhone だと小さすぎるし、MacBook Air だと大げさだと思っていた 本を読むのも Kindle では捗らず   狭い居酒屋だと、MacBook Air をバーン開いて飲むのが憚られる  最近は家飲みばかりになったけど    正直今まで ASUS はネットブックかつ安物というイメージが強く、眼中にありませんでした。Lenobo はセキュリティ的に危なくて論外です。]]></description>
        </item>
        <item>
            <title><![CDATA[今さらながら Knife-Zero を使ってみた]]></title>
            <link>https://masutaka.net/2016-10-30-1/</link>
            <guid>https://masutaka.net/2016-10-30-1/</guid>
            <pubDate>Sun, 30 Oct 2016 00:00:00 GMT</pubDate>
            <description><![CDATA[個人と仕事のサーバはどちらも Knife-Solo で構成管理しています。
Chef がバージョンアップしたら、私はなるべく knife solo prepare し
ていますが、このコマンドは単純実行すると、サーバの台数に比例して時
間がかかります。
Knife-Zero でそれを解決できるのかなと思い、Getting Started してみ
ました。
  結論 代替にはならない。knife zero bootstrap も knife solo prepare と同
様、Chef をインストールするのは同じ。
 Home(ja) · Knife-Zero まずKnife-ZeroはKnife-Solo の乗り換え先ではありません。
 仰る通りでした。
勘違い loading...
   if (localStorage.getItem("pref-theme") === "light") { const elements = document.getElementsByClassName('twitter-tweet'); for (let i = 0; i  勘違いみたいですね。誰もツッコんでくれなかった&hellip;。( ；∀；)
Knife-Solo は chef-solo gem ではなく chef-zero gem と依存関係があ
るから、ずっと使えると思っていたけど、大きな勘違いだった。
そもそも chef-solo gem は存在しない。chef gem に含まれる chef-solo]]></description>
        </item>
        <item>
            <title><![CDATA[最近使っている、仕事のタスク管理]]></title>
            <link>https://masutaka.net/2016-10-26-1/</link>
            <guid>https://masutaka.net/2016-10-26-1/</guid>
            <pubDate>Wed, 26 Oct 2016 00:00:00 GMT</pubDate>
            <description><![CDATA[以前、一日のタスク管理にタスクシュート を試した。
loading...
   if (localStorage.getItem("pref-theme") === "light") { const elements = document.getElementsByClassName('twitter-tweet'); for (let i = 0; i  結局、息が詰まる気がして止めてしまったけど、このタスクシュートを意
識した今のタスク管理はなかなか自分に合っている。
loading...
   if (localStorage.getItem("pref-theme") === "light") { const elements = document.getElementsByClassName('twitter-tweet'); for (let i = 0; i  タスクシュートの特長である「予定より遅れているから、これでは間に合
わないな」という感覚を緩く知ることが出来ている。
一日のタスク管理  前の日の日報で「翌営業日にやること」を書く ミーティング含めて、全てのタスクを順番に書き、午前と午後に分ける 午前に全て終わってなければ焦るので、タスクを減らすか、実装を軽めにする 予定より早く終わりそうなら、次のタスクかちょっとした改善タスクをやる  # &lt;i class=&#34;fa fa-fighter-jet&#34; aria-hidden=&#34;true&#34;&gt;&lt;/i&gt; 翌営業日にやること ## 午前 1. 朝会 1. 日報の草稿を書く 1. xxxx 運用作業 1. GitHub PR のレビュー 1.]]></description>
        </item>
        <item>
            <title><![CDATA[ElastiCache for Redis のスケールアップメモ]]></title>
            <link>https://masutaka.net/2016-10-24-1/</link>
            <guid>https://masutaka.net/2016-10-24-1/</guid>
            <pubDate>Mon, 24 Oct 2016 00:00:00 GMT</pubDate>
            <description><![CDATA[先週 AWS ElastiCache for Redis を cache.m3.medium から
cache.m4.large にスケールアップしました。今後のためにメモを残して
おきます。
背景 cache.m3.medium を Multi-AZ + Replica 1 台構成で運用していた。主な
用途は Rails4 の Session Store サーバとして。
BytesUsedForCache が cache.m3.medium のメモリ 2.78 GiB を超え、
Evictions が発生し始めたため、cache.m4.large にスケールアップした。
タイムライン メンテナンスウィンドウをセットした AM 3:00 になるとすぐに、当該ク
ラスターの Status が modifying になった。
AM 3:07 に Rails から接続できなくなり、Primary の CPUUtilization
が 60% 〜 90% で推移。Replica は普段通り。
AM 4:16 にようやく復帰。Multi-AZ 構成で冗長性が担保されているため、
データは消失しない。
感想  よくある質問 - Amazon ElastiCache｜AWS Q: 大きいノードタイプにスケールアップするにはどうすればよいですか?]]></description>
        </item>
        <item>
            <title><![CDATA[Slack API で mention 付き User Group を作る方法]]></title>
            <link>https://masutaka.net/2016-10-19-1/</link>
            <guid>https://masutaka.net/2016-10-19-1/</guid>
            <pubDate>Wed, 19 Oct 2016 00:00:00 GMT</pubDate>
            <description><![CDATA[Slack には任意のグループを作ることが出来る、User Groups という機能
がある。
User Groups – Slack Help Center チャットで使う時は @happy-peeps などで普通に mention を飛ばせるが、
API を経由する時は特殊な書き方が必要になる。
Basic message formatting &gt; Variables｜Slack 端的に書くと &lt;!subteam^ID|handle&gt; という書式が必要。
例えば S012345 という ID の @happy-peeps User Group の場合は
&lt;!subteam^S012345|happy-peeps&gt; で良い。
ID が曲者で以下の手順で取得できる。
  https://api.slack.com/docs/oauth-test-tokens からテスト用のトー
クンを取得
  https://api.slack.com/methods/usergroups.list/test から当該 API
のテストリクエストを行う。各グループの id フィールドがそれ
  ※ Mackerel の Slack 通知がうまくいかなくて、右上から質問して分かり
ました。thx! @a_know 追記(2017-02-07):
同様にリンク付き channel（例: #general）を作る方法もだいたい同じで
した。
Basic message formatting &gt; Linking to channels and users｜Slack 例えば #general の Channel ID が C024BE7LR の場合は]]></description>
        </item>
        <item>
            <title><![CDATA[Go で Mackerel の Fastly billing plugin を作った]]></title>
            <link>https://masutaka.net/2016-10-16-1/</link>
            <guid>https://masutaka.net/2016-10-16-1/</guid>
            <pubDate>Sun, 16 Oct 2016 00:00:00 GMT</pubDate>
            <description><![CDATA[弊社の @tjinjin が作った mackerel-plugin-aws-billing は導入は簡単
だし、AWS 料金の推移が気軽に見られるので、Fastly 版を作ってみました。
  Fastly は少し前から会社で使い始めています。なかなか便利で、CDN な
のに一瞬でキャッシュを消せるのもさることながら、料金含めた全てのメ
トリクスがリアルタイムで見られるのがすごいですね。今のところ、超安
定稼働しています。
さて、今回作った mackerel-plugin-fastly-billing は Fastly の
Billing API を叩いて、その月の現在の料金を取ってくるシンプルな
plugin です。curl 的には例えば以下になります。
$ curl -s -H &#34;Fastly-Key: &lt;Fastly API Key&gt;&#34; \ https://api.fastly.com/billing/year/2016/month/10 | jq .total.cost 先日、mackerel-plugin-delayed-job-count も作ったのですが、
Go で Mackerel の delayed_job plugin を作った｜feedforce Engineers&rsquo; blog 今回は少しパワーアップしております。delayed_job も追随しよう&hellip;。
書き方を少し変えた main() を先頭に書きました。持論ですが、コードは上から下に流れるよ
うに書くと読みやすいと思います。
最初の会社で C を書いていた頃は、特にそのようにしていましたが、LL
だとそう書けないことがあるので、最近は自重していました。Go はコン
パイル型言語で C にも似ているので、以前の書き方にしてみました。
外部変数を使うのも止めました。
PluginWithPrefix interface で実装した 以前の Plugin interface と違う点は MetricKeyPrefix() が増えた こと]]></description>
        </item>
        <item>
            <title><![CDATA[compare_linker v1.3.0 をリリースした]]></title>
            <link>https://masutaka.net/2016-10-09-1/</link>
            <guid>https://masutaka.net/2016-10-09-1/</guid>
            <pubDate>Sun, 09 Oct 2016 00:00:00 GMT</pubDate>
            <description><![CDATA[compare_linker | RubyGems.org | your community gem host  RubyGems.org is the Ruby community's gem hosting service. Instantly publish your gems and install them. Use the API to interact and find out more information about available gems. Become a contributor and enhance the site with your own changes.
  仕事やプライベートで、毎週自動 bundle update していますが、Gem に
よっては GitHub の compare Link を作れませんでした。
人間が手動でリンクを作ってコメントするのが無駄な作業で、なんだか申
し訳なかったので修正してみました。これで GitHub に Git のタグがな
い Gem 以外は救えるようになったはず。]]></description>
        </item>
        <item>
            <title><![CDATA[ローカルとGistを同期する gist_updater gem を作った]]></title>
            <link>https://masutaka.net/2016-09-29-1/</link>
            <guid>https://masutaka.net/2016-09-29-1/</guid>
            <pubDate>Thu, 29 Sep 2016 00:00:00 GMT</pubDate>
            <description><![CDATA[必要に迫られて Ruby のスクリプトを作ったら、汎用化できたので
Gem にしてみました。
 gist_updater | RubyGems.org | your community gem host  RubyGems.org is the Ruby community's gem hosting service. Instantly publish your gems and install them. Use the API to interact and find out more information about available gems. Become a contributor and enhance the site with your own changes.
  何ができるか？ このような YAML ファイルを用意し、gist_updater コマンドを実行する
と、ローカルの .emacs.d/init.el によって
https://gist.github.com/masutaka/8177244 がアップデートされます。
- - 8177244 - .]]></description>
        </item>
        <item>
            <title><![CDATA[『みんなのGo言語』を読んだ]]></title>
            <link>https://masutaka.net/2016-09-25-1/</link>
            <guid>https://masutaka.net/2016-09-25-1/</guid>
            <pubDate>Sun, 25 Sep 2016 00:00:00 GMT</pubDate>
            <description><![CDATA[話題になっていたので、読んでみました。
 [2015-02-11-1] で Go を学んだ私ですが、その後あまり使っていなかったので、情報をアップデートできて良かったです。
特に第１章の開発環境のあたり。goimports の import 自動挿入は良いですね。早速 go get して init.el に以下を設定しました（go-mode.el は導入済み）。
(setq gofmt-command &#34;goimports&#34;) 第６章のテストも即戦力になりそうです。
以下は読んでメモった箇所を中心にしたまとめです。
全体を通して感じたこと Go の文法が多少分かる方向けの本だと思います。P.19 にも書いてある「A Tour of Go 」などをやった後に読むと効果的だと思います。
ただ、世間でオススメされている「A Tour of Go」ですが、私はチュートリアルとしては難しいと思います。半分くらいから Go よりアルゴリズムのチュートリアルっぽくなってくるので。
個人的には [2015-02-11-1] で紹介した『WEB&#43;DB PRESS Vol.82 』の「はじめてのGO」がオススメです。
残念だったこと 動かないコードがあったのは残念でした。
例えば第５章 reflect の P.108 です。コードを書いて動かすと、
package main import ( &#34;fmt&#34; &#34;reflect&#34; ) type Point struct { X int Y int } func main() { p := &amp;Point{X: 10, Y: 5} rv := reflect.]]></description>
        </item>
        <item>
            <title><![CDATA[『オブジェクト指向設計実践ガイド』を読んだ]]></title>
            <link>https://masutaka.net/2016-09-22-1/</link>
            <guid>https://masutaka.net/2016-09-22-1/</guid>
            <pubDate>Thu, 22 Sep 2016 00:00:00 GMT</pubDate>
            <description><![CDATA[本当に良い本でした。読んで良かった。初心者を中心に中級者にも刺さる
本だと思います。輪読などして、チームで読むとオブジェクト指向設計の
そもそもの話をしなくて良さそうです。
 難しい話が易しく説明されており「あ、そうだったのか」と思うことが度々
でした。ボリュームも全９章とコンパクトで、１日１章読むのに丁度よかっ
たです。
読んでメモった箇所を中心にまとめていきます。
第２章 単一責任のクラスを設計する インスタンス変数へのアクセス方法を誤解していました。
 P46
変数はそれらを定義しているクラスからでさえも隠蔽しましょう
 今まで他のクラスから隠蔽する時は、直接 @hoge などにアクセスしてい
ましたが、中からも attr_reader などで隠蔽する必要があるそうです。
「データではなく、振る舞いに依存する」ためだそうです。
メモ化などでこうした手法は使っていたけど、単純な参照も隠蔽する必要
があるのですね&hellip;。
ただ、中からしか使わない変数も単純な attr_reader を使っていたのは、
納得いかなかったです。こうして外から隠蔽する必要はないでしょうか？
class Hoge attr_reader :hoge # 外からも参照される #... private attr_reader :hogehoge # 中からしか参照されない #... end 第３章 依存関係を管理する 「依存オブジェクトの注入（DI）」を中心に疎結合なコードの書き方がま
とまった章です。
DI は正直今までピンと来ていませんでしたが、この章を読んで完璧に理
解しました。10 年前から使っていました&hellip;。
loading...
   if (localStorage.getItem("pref-theme") === "light") { const elements = document.getElementsByClassName('twitter-tweet'); for (let i = 0; i  数日経ってもまだ何か言ってる。]]></description>
        </item>
        <item>
            <title><![CDATA[安くてダサすぎない腕時計を買った]]></title>
            <link>https://masutaka.net/2016-09-19-1/</link>
            <guid>https://masutaka.net/2016-09-19-1/</guid>
            <pubDate>Mon, 19 Sep 2016 00:00:00 GMT</pubDate>
            <description><![CDATA[今日アキバに ASUS のタブレット を見に行ったついでに、腕時計も見ていて
らふらっと買ってしまいました。
ここ何年か腕時計を身に付けていませんでしたが、私は結構時間を気にし
て iPhone を見てしまうのですよね。都度ケツポケから出すのも面倒になっ
たので、こんなのを探していました。
 日付も分かるデジタル 見やすくて軽くてダサすぎない程度のデザイン。ちょっと違うけど
Pebble Time Round っぽいやつ 充電はしたくない。数日しか持たないバッテリーは論外 歩数や心拍数は測らなくて良い。iPhone との連携も不要 置いたときに転がらず、時刻を確認できればうれしい 値段は ￥5,000 未満  案外なくてここ半年ほど探していましたが、この度購入する運びとなりま
した。
 置いた時に転がらないというのは、こういうことです。はい、細かい奴で
すね。試着した時に正直確認し忘れていましたが、うまく自立して良かっ
たです。
帰って Amazon を見ていたら、逆輸入版で ￥2,732 のやつを発見。ちょっ
と後悔したけどまあいいか。
 ]]></description>
        </item>
        <item>
            <title><![CDATA[Emacs-25.1 にアップデートした]]></title>
            <link>https://masutaka.net/2016-09-18-1/</link>
            <guid>https://masutaka.net/2016-09-18-1/</guid>
            <pubDate>Sun, 18 Sep 2016 00:00:00 GMT</pubDate>
            <description><![CDATA[本日 Emacs-25.1 がリリースされていました。
loading...
   if (localStorage.getItem("pref-theme") === "light") { const elements = document.getElementsByClassName('twitter-tweet'); for (let i = 0; i  いつもであれば、[2015-04-12-1] のように Mac port パッチを当てます
が、Emacs 25 からほとんどの機能が本体にマージされるという話 があっ
たので、パッチを当てずにアップデートしてみました。
ちなみに私が Mac port パッチを当てていたのは、Emacs が頻繁に強制終
了していたからです。素の Emacs が安定していれば、今後もパッチを当
てないと思います。
すでに Emacs-25.1 対応の Mac port パッチは出ています。早い&hellip;。
ftp://ftp.math.s.chiba-u.ac.jp/emacs/emacs-25.1-mac-6.0.tar.gz 素晴らしいことに、Homebrew も速攻対応されており $ brew cask install emacs でインストール出来ます。
アップデート時のエラーや警告対応 init.el がエラーになったのは、1 の php-mode だけでした。
参考までに修正後の init.el はこちらです。
https://gist.github.com/masutaka/8177244/8d4e0d1364b401d65480d52e00555820a7a1d0df 1. (require &lsquo;php-mode) が謎のエラーを吐く バイトコンパイル要因のエラーっぽかったので、Emacs-25.]]></description>
        </item>
        <item>
            <title><![CDATA[『SQLアンチパターン』を読んだ]]></title>
            <link>https://masutaka.net/2016-08-17-1/</link>
            <guid>https://masutaka.net/2016-08-17-1/</guid>
            <pubDate>Wed, 17 Aug 2016 00:00:00 GMT</pubDate>
            <description><![CDATA[SQL との接点は Rails を使う時くらいで、Explain でテンポラリテーブ
ルが作られるようなクエリを極力発行しない注意くらいしかしておらず、
危機感があったので読んでみました。あ、監訳者の @t_wada さんのツイ
ートにももちろん影響されました。
実は 3 月には手に入れていたのですが、ずっと積読していて読み始めた
のが先月からだったという&hellip;。とは言え、各章が 10 ページほどで収まっ
ているので、なるべく毎日 2 章読むようにしたら、20 日ほどで読み終え
ることが出来ました。
第 1 章は名前はさておき知っている人も多いジェイウォーク（信号無視）。
VARCHAR 型にカンマ区切りのテキストを入れてしまうアレです。さすがに
私も知っているので、ニヤリとしたのを覚えています。出だしのアンチパ
ターンとしては難易度低目で良かったです。
読む前は上記のようなテーブル設計（本書ではデータベース論理設計とあ
る）のアンチパターンがほとんどかと思っていましたが、クエリのアンチ
パターンにも言及していたのが意外でした。そりゃそうか。
         データベース論理設計のアンチパターン 全 8 章   データベース物理設計のアンチパターン 全 4 章   クエリのアンチパターン 全 6 章   アプリケーション開発のアンチパターン 全 7 章   付録: 正規化のルール 全 1 章    個人的には Rails が所々で言及されていたのが助かりました。ポリモー]]></description>
        </item>
        <item>
            <title><![CDATA[はてなブログからHugo on Github Pagesに移行しました]]></title>
            <link>https://blog.tsub.me/post/created-blog-by-hugo/</link>
            <guid>https://blog.tsub.me/post/created-blog-by-hugo/</guid>
            <pubDate>Thu, 11 Aug 2016 16:01:16 GMT</pubDate>
            <description><![CDATA[<p>はてなブログをやめて、Hugo on Github Pagesに移行しました。</p>

<p>といっても、走りだしのブログであまり記事は多くないんですが..</p>

<p>移行した理由は、以前のブログを構築した際に、調子に乗ってはてなブログProに登録して独自ドメインを使っていたのですが、思ったよりも記事を書かずお金がちょっと勿体無いなーと思い始めてきたのでGithub Pagesに移行しました。</p>

<p></p>]]></description>
        </item>
        <item>
            <title><![CDATA[DeNA の遺伝子検査サービス MYCODE を試してみた]]></title>
            <link>https://masutaka.net/2016-07-30-1/</link>
            <guid>https://masutaka.net/2016-07-30-1/</guid>
            <pubDate>Sat, 30 Jul 2016 00:00:00 GMT</pubDate>
            <description><![CDATA[以前 DeNA が遺伝子検査サービスを始めると話題になった MYCODE がキャ
ンペーンをやっていたので試してみました。
loading...
   if (localStorage.getItem("pref-theme") === "light") { const elements = document.getElementsByClassName('twitter-tweet'); for (let i = 0; i  今回試したのは『ヘルスケア 』というパッケージ。通常 ￥29,800 のとこ
ろ、キャンペーンが使えたので 40% OFF の ￥17,800 でした。
やり方は簡単で、送られてくる容器に唾液を入れて郵送するだけ。３週間
くらいで結果が Web 上から確認できました。
loading...
   if (localStorage.getItem("pref-theme") === "light") { const elements = document.getElementsByClassName('twitter-tweet'); for (let i = 0; i  ディスカバリーという、祖先のルーツを教えてくれるオプションも試して
みました。
loading...
   if (localStorage.getItem("pref-theme") === "light") { const elements = document.]]></description>
        </item>
        <item>
            <title><![CDATA[『Atom実践入門』を読んだ]]></title>
            <link>https://masutaka.net/2016-07-20-1/</link>
            <guid>https://masutaka.net/2016-07-20-1/</guid>
            <pubDate>Wed, 20 Jul 2016 00:00:00 GMT</pubDate>
            <description><![CDATA[著者の @tomoyaton さんから献本頂きました。ありがとうございます。
本書を読んでまず思ったことは「良い時代になったなあ」です。
私は 2000 年から Emacs を愛用しており、20 代の頃、多大な時間を使っ
て Emacs をカスタマイズしてきました。そこで習得した Elisp はプログ
ラマーとしての私に幅を持たせてくれましたが、実務でそのまま使える技
術ではありませんでした。
でも今は Atom があります。使い込めば JS や HTML/CSS を始めとした、
実務で即使える、最新の Web 技術を習得できます。
本書では第６章からがその本領発揮で、Chrome Developer Tools の使い
方に始まり、180 ページ目では Shadow DOM と Custom Elements まで解
説しています。
今は時間とか優先度とかの兼ね合いで乗り換えない予定ですが、隠居して
時間ができたら乗り換えるかも？
Atom をインストール そうこう言いつつも、本書を読みながら久々に Atom をインストールして
みました。
Emacs と違って、ネイティブにサポートしている機能がいくつも見つかり
ます。
  Atom にはタブがありますが、Emacs には未だにありません。Elscreen
等を自分でインストールする必要がある上に、タブは 10 個までしか使え
ません。
  Atom は Git を標準でサポートしていますが、Emacs は vc.el という
不完全な形のサポートです。私は Magit に挫折して egg.]]></description>
        </item>
        <item>
            <title><![CDATA[neovimのterminal emulatorが便利すぎた]]></title>
            <link>https://blog.tsub.me/post/neovim-on-terminal-emulator/</link>
            <guid>https://blog.tsub.me/post/neovim-on-terminal-emulator/</guid>
            <pubDate>Sat, 02 Jul 2016 13:08:23 GMT</pubDate>
            <description><![CDATA[<p>少し前にvimからneovimに移行したのですが、vimよりさくさくな気がする、程度でneovimの機能を特に活用していませんでした。</p>

<p>実はneovimにはterminal emulatorという機能があり、vimの中でshellを起動することができます。</p>

<p>例えばコードを書きつつ、rspecを実行したりpryやtigを使ったりなど、非常に便利です。</p>

<p><a href="https://gyazo.com/ca4b9ef1599801f1948721befe274654.png"><img src="https://i.gyazo.com/ca4b9ef1599801f1948721befe274654.png" alt="" /></a></p>

<p></p>]]></description>
        </item>
        <item>
            <title><![CDATA[tokyo.ex #3 参加してきた]]></title>
            <link>https://blog.tsub.me/post/tokyo-ex-3-entry-report/</link>
            <guid>https://blog.tsub.me/post/tokyo-ex-3-entry-report/</guid>
            <pubDate>Thu, 30 Jun 2016 14:56:16 GMT</pubDate>
            <description><![CDATA[<p>tokyo.ex #3 に参加してきました。</p>

<p><a href="http://beam-lang.connpass.com/event/32704/">tokyo.ex #3</a></p>

<p>前々からtokyo.ex #1, #2と気にはなっていたんですが、気づいた時には定員が埋まってまして今回やっと参加できました。</p>

<p>と思ってたらわりと席空いてたりキャンセル多かったり、定員超えてるからといって諦めなくても良かったみたいですね</p>

<p>参加してみての全体的な感想ですが、正直最近elixirを触ってなかったのでいい刺激になりました。</p>

<p>話の内容は非常にレベルが高く、大半は理解できませんでしたが、その分elixirの勢いとコミュニティの熱さは十分伝わってきました。</p>

<p></p>]]></description>
        </item>
        <item>
            <title><![CDATA[第16回Elasticsearch勉強会に参加してきた #elasticsearchjp]]></title>
            <link>https://masutaka.net/2016-06-28-1/</link>
            <guid>https://masutaka.net/2016-06-28-1/</guid>
            <pubDate>Tue, 28 Jun 2016 00:00:00 GMT</pubDate>
            <description><![CDATA[Elasticsearch は [2014-12-14-1] から個人で使っています。会社によう
やく導入できた こともあり、今月は自分にとって Elasticsearch 一色でした。
 GrowthForecast のデータを Elasticsearch にインポートした [2016-06-13-1]  1.7 から 2.3 にバージョンアップしたらハマってフォーラムで質問した 2016/06/14  Kibana-4.5 がメモリをバカ食いするので調べて対策した [2016-06-26-1]   ちょうどよいタイミングで勉強会の案内を見つけたため、月の締めとして
初参加してきました。
第16回elasticsearch勉強会 #elasticsearch #elasticsearchjp - elasticsearch勉強会｜Doorkeeper 当日の朝、60 人くらいキャンセル待ちだったので諦めていたのですよ。
でも、あれよあれよという間に参加可能に・・・！
@johtani はじめとした主催者の皆様、ありがとうございました。
LogstashとElasticsearchで作るEnterprise Search Platform   Elastic 社の Kosho Owa 氏による発表。
samba 上のドキュメントの変更を vfs_full_audit でシステムログに記録。
必要なログを Logstash から Elasticsearch に送ることで検索インデッ
クス更新のトリガーとしているというお話。
残念ながら Logstash は使ったことはありませんが、ちょっとだけ興味持
ちました。
output で curl とかを eval するのはスケールしないとのこと。その代
わりの方法で filter で ruby を使っていたので、質問タイムで毎回]]></description>
        </item>
        <item>
            <title><![CDATA[Kibana-4.5 のメモリ使用量が増え続ける件への対処方法と結果]]></title>
            <link>https://masutaka.net/2016-06-26-1/</link>
            <guid>https://masutaka.net/2016-06-26-1/</guid>
            <pubDate>Sun, 26 Jun 2016 00:00:00 GMT</pubDate>
            <description><![CDATA[先日 Elasticsearch を 1.7.5 から 2.3.3 に、Kibana を 4.1.2 から
4.5.1 にアップデートしました。
アップデート自体はそれなりにハマったものの、なんとか対処できました。 ただ、Kibana のメモリ使用量が増え続け、さながらメモリリークのよう
でした。
こちらの記事の方法で解決できたので、結果とともに記録します。
ver4.2以降のkibanaが突然死する問題について - mnatsu31’s blog 環境 OS: Ubuntu-14.04 LTS
Memory: 2GB
Elasticsearch: 2.3.3
Kibana: 4.5.1
※ Elasticsearch と Kibana はともに公式パッケージを使用。
 Repositories｜Elasticsearch Reference [2.3]｜Elastic  Getting Kibana Up and Running｜Kibana User Guide [4.5]｜Elastic   対処方法 /etc/init.d/kibana を以下のように変更し、&quot;$ service kibana
restart&quot; しました。本当はこのファイルは構成管理したくないのですがね&hellip;。
--- /etc/init.d/kibana_orig	2016-06-25 13:03:43.000000000 +0900 +++ /etc/init.d/kibana	2016-06-26 10:13:28.000000000 +0900 @@ -18,6 +18,9 @@ PATH=/sbin:/usr/sbin:/bin:/usr/bin export PATH +NODE_OPTIONS=&#34;--max-old-space-size=256&#34; +export NODE_OPTIONS + name=kibana program=/opt/kibana/bin/kibana args=&#39;&#39; 前述の記事によると Kibana （というか Node.]]></description>
        </item>
        <item>
            <title><![CDATA[serverspecで複数のdocker containerに対してテストしたい]]></title>
            <link>https://blog.tsub.me/post/serverspec-for-several-container/</link>
            <guid>https://blog.tsub.me/post/serverspec-for-several-container/</guid>
            <pubDate>Sat, 25 Jun 2016 14:36:05 GMT</pubDate>
            <description><![CDATA[<p>前回の記事でdocker containerに対してserverspecでテストができるようになりました。</p>

<p><a href="https://blog.tsub.me/post/serverspec-for-docker/">serverspecでdocker containerに対してテストしたい</a></p>

<p>dockerを扱う以上、containerは複数立てるのが普通です。</p>

<p>今回は複数のcontainerを立てた時にそれぞれのcontainerに対してテストする方法について書いていきます。</p>

<p></p>]]></description>
        </item>
        <item>
            <title><![CDATA[serverspecでdocker containerに対してテストしたい]]></title>
            <link>https://blog.tsub.me/post/serverspec-for-docker/</link>
            <guid>https://blog.tsub.me/post/serverspec-for-docker/</guid>
            <pubDate>Sat, 25 Jun 2016 13:25:08 GMT</pubDate>
            <description><![CDATA[<p>仕事でこれからdockerを使い始めるので、dockerを触りつつメモがてら記事に残していきます。</p>

<p></p>]]></description>
        </item>
        <item>
            <title><![CDATA[Ruby の構文をトークンに切り分ける]]></title>
            <link>https://masutaka.net/2016-06-22-1/</link>
            <guid>https://masutaka.net/2016-06-22-1/</guid>
            <pubDate>Wed, 22 Jun 2016 00:00:00 GMT</pubDate>
            <description><![CDATA[個人的なメモ
[1] pry(main)&gt; Ripper.lex(&#39;:manage/home&#39;) =&gt; [[[1, 0], :on_symbeg, &#34;:&#34;], [[1, 1], :on_ident, &#34;manage&#34;], [[1, 7], :on_op, &#34;/&#34;], [[1, 8], :on_ident, &#34;home&#34;]] &ldquo;:&rdquo; → シンボルの開始
&ldquo;manage&rdquo; → 識別子(identifier)
&ldquo;/&rdquo; → 演算子(operator)
&ldquo;home&rdquo; → 識別子
class Ripper (Ruby 2.3.0) ]]></description>
        </item>
        <item>
            <title><![CDATA[BitBar の Emacs プラグインにエラー処理を追加した]]></title>
            <link>https://masutaka.net/2016-06-21-1/</link>
            <guid>https://masutaka.net/2016-06-21-1/</guid>
            <pubDate>Tue, 21 Jun 2016 00:00:00 GMT</pubDate>
            <description><![CDATA[たまに https://melpa.org のレスポンスが悪いせいか、
~/.emacs.d/elpa/archives/melpa/archive-contents が壊れるので、
エラー処理を追加しました。
壊れた時はこのファイルの最後がこのようになります。
;; 壊れてない時 (:keywords &#34;convenience&#34; &#34;window-management&#34;))]))  ;; 壊れた時はこの辺に nil が入る (:keywords &#34;convenience&#34; &#34;window-management&#34;))])nil) 壊れていたら最大 3 回リトライして修復を試みます。それでも壊れてい
たら仕方ないということで。
1 週間くらい使っていて大丈夫そうだったので、PR 出して本日マージさ
れました。
https://github.com/matryer/bitbar-plugins/pull/444 公式サイトからインストールできます。
https://getbitbar.com/plugins/Dev/Emacs/emacs-package-updates.1d.sh ]]></description>
        </item>
        <item>
            <title><![CDATA[OpenType の仕様策定の議論をのぞくには]]></title>
            <link>https://shiromoji.hatenablog.jp/entry/2016/06/21/003529</link>
            <guid>https://shiromoji.hatenablog.jp/entry/2016/06/21/003529</guid>
            <pubDate>Mon, 20 Jun 2016 15:35:29 GMT</pubDate>
            <description><![CDATA[<p>OpenType は1997年に <a class="keyword" href="http://d.hatena.ne.jp/keyword/Microsoft">Microsoft</a> と <a class="keyword" href="http://d.hatena.ne.jp/keyword/Adobe">Adobe</a> が策定したフォントフォーマットで、現在の<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%C7%A5%D5%A5%A1%A5%AF%A5%C8%A5%B9%A5%BF%A5%F3%A5%C0%A1%BC%A5%C9">デファクトスタンダード</a>になっています<a href="#f-b01003c3" name="fn-b01003c3" title="ややこしいので詳細は省きますが、今どきの TrueType は OpenType に含まれます。また、Web フォントで使われる WOFF は、ざっくり言えば OpenType を zlib 圧縮したものです。">*1</a>。仕様は <a class="keyword" href="http://d.hatena.ne.jp/keyword/Microsoft">Microsoft</a> のサイトで公開されており、興味があればだれでもすぐに読むことができます。</p>

<ul>
<li><a href="https://www.microsoft.com/en-us/Typography/OpenTypeSpecification.aspx">Microsoft Typography - OpenType Specification</a></li>
</ul>


<p>この OpenType の仕様はときたま改定されており、今のところは2015年3月に発表された v1.7 が最新バーションです。</p>

<p>ところで、この仕様の改定はどこで議論されているんでしょう？　UCS/<a class="keyword" href="http://d.hatena.ne.jp/keyword/Unicode">Unicode</a> や各種 Web 標準などは策定プロセスがオープンになっていますが、OpenType の仕様はどこで議論が進んでいるのか、ぱっと見ただけではよくわかりません。日本語の情報もほとんど見つかりません。というわけで、この記事でその一端を紹介したいと思います。</p>

<h3>OpenType <a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%E1%A1%BC%A5%EA%A5%F3%A5%B0%A5%EA%A5%B9%A5%C8">メーリングリスト</a></h3>

<p>実は、<a class="keyword" href="http://d.hatena.ne.jp/keyword/Microsoft">Microsoft</a> のサイトにこの<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%E1%A1%BC%A5%EA%A5%F3%A5%B0%A5%EA%A5%B9%A5%C8">メーリングリスト</a>（ML）の案内がちゃんと載っています。</p>

<ul>
<li><a href="https://www.microsoft.com/typography/otspec/otlist.htm">OpenType discussion forum</a></li>
</ul>


<blockquote><p>An e-mail based discussion forum has been set up specifically to help people working on the development of OpenType fonts and associated technologies.</p>

<ul>
<li>To subscribe to the OpenType Mailing List, send e-mail to: <a href="&#x6d;&#x61;&#x69;&#x6c;&#x74;&#x6f;&#x3a;&#x73;&#x75;&#98;&#x73;&#99;&#114;&#105;&#x62;&#101;&#45;&#x6f;&#112;&#101;&#x6e;&#116;&#x79;&#x70;&#101;&#64;&#x69;&#x6e;&#100;&#x78;&#x2e;&#x63;&#111;&#46;&#117;&#x6b;">&#115;&#x75;&#x62;&#x73;&#x63;&#114;&#105;&#x62;&#101;&#x2d;&#111;&#112;&#101;&#110;&#116;&#121;&#112;&#x65;&#x40;&#105;&#x6e;&#100;&#x78;&#x2e;&#99;&#x6f;&#x2e;&#117;&#x6b;</a></li>
<li>To remove yourself from this mailing list, send e-mail to: <a href="&#x6d;&#97;&#x69;&#x6c;&#x74;&#x6f;&#58;&#x75;&#x6e;&#115;&#x75;&#98;&#115;&#x63;&#x72;&#105;&#x62;&#x65;&#45;&#x6f;&#112;&#x65;&#110;&#116;&#121;&#112;&#101;&#x40;&#x69;&#x6e;&#x64;&#120;&#x2e;&#99;&#x6f;&#46;&#x75;&#107;">&#x75;&#110;&#115;&#117;&#x62;&#115;&#x63;&#114;&#105;&#98;&#x65;&#45;&#x6f;&#x70;&#x65;&#110;&#x74;&#121;&#112;&#101;&#x40;&#x69;&#x6e;&#100;&#x78;&#46;&#x63;&#x6f;&#46;&#117;&#x6b;</a></li>
</ul>
</blockquote>

<p>載っているのですが、<code>indx.co.uk</code> という馴染みのない<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%C9%A5%E1%A5%A4%A5%F3">ドメイン</a>だったり、登録前に ML の<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%A2%A1%BC%A5%AB%A5%A4%A5%D6">アーカイブ</a>が見れなかったり、ページのフッタに <q>This page was last updated 9 August 2004.</q> と書いてあったりと、登録に躊躇してしまう要素が満載です。</p>

<p>が、これでも現役でちゃんと生きている公式 ML です。<q>to help people working on the development of OpenType fonts and associated technologies</q> と書かれていてスコープが少しぼんやりとしていますが、OpenType の仕様に関する話題が現在中心になっています。</p>

<p>この ML へ登録するためには、<a href="&#x6d;&#x61;&#x69;&#x6c;&#116;&#x6f;&#58;&#115;&#x75;&#98;&#x73;&#x63;&#114;&#105;&#x62;&#101;&#x2d;&#x6f;&#112;&#x65;&#110;&#x74;&#121;&#x70;&#101;&#64;&#105;&#x6e;&#100;&#120;&#46;&#x63;&#x6f;&#x2e;&#117;&#x6b;">&#115;&#117;&#x62;&#x73;&#x63;&#114;&#x69;&#x62;&#101;&#45;&#x6f;&#112;&#x65;&#x6e;&#x74;&#x79;&#112;&#101;&#64;&#105;&#110;&#100;&#120;&#x2e;&#x63;&#111;&#46;&#117;&#107;</a> にメールを送ります<a href="#f-dc71ee9e" name="fn-dc71ee9e" title="一時期は opentype-migration-sub@indx.co.uk というアドレスだったようです（参考）。">*2</a>。このとき空メールではだめで、メールの本文が必要です。自己紹介や「登録したいんだけど」みたいなことを1, 2文書いておけば大丈夫なはずです。ML 管理者の承認が降りれば、数日後に通知のメールが来ますので、これで登録完了です。過去の<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%A2%A1%BC%A5%AB%A5%A4%A5%D6">アーカイブ</a>は、ML 登録完了後に<a href="http://www.indx.co.uk/biglistarchive/">このページ</a>からたどれます。ただしシステムが古いようで、使い勝手は残念な感じです。</p>

<p>なお、この ML から配信されるメールは、件名の頭に <code>[OpenType]</code> がついています。</p>

<h3><a class="keyword" href="http://d.hatena.ne.jp/keyword/mpeg">mpeg</a>-OTspec <a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%E1%A1%BC%A5%EA%A5%F3%A5%B0%A5%EA%A5%B9%A5%C8">メーリングリスト</a></h3>

<p>世の中には ISO/IEC 14496-22 Open Font Format (OFF) という規格があります。といっても OpenType と中身は同じ…というか、OpenType をそのまま公的な国際規格にしたのがこの OFF です。<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%C7%A5%B8%A5%E5%A1%BC%A5%EB">デジュール</a>標準というやつです。ISO が規格票を無料で公開しており、以下のページからPDFのダウンロードが可能です。ちなみに、ISO/IEC 14496-22:2015 が OpenType v1.7 に対応します。</p>

<ul>
<li><a href="http://standards.iso.org/ittf/PubliclyAvailableStandards/index.html">Freely Available Standards</a></li>
</ul>


<p>そして、この規格について議論するための ML が米 <a class="keyword" href="http://d.hatena.ne.jp/keyword/Yahoo%21">Yahoo!</a> Groups に用意されています。これが <a class="keyword" href="http://d.hatena.ne.jp/keyword/mpeg">mpeg</a>-OTspec ML です。</p>

<ul>
<li><a href="https://groups.yahoo.com/neo/groups/mpeg-OTspec/info">MPEG(SC29/WG11) Open Font Format - Yahoo Groups</a></li>
</ul>


<p>こちらの ML は <a href="&#x6d;&#97;&#105;&#x6c;&#x74;&#111;&#58;&#109;&#x70;&#x65;&#103;&#x2d;&#111;&#116;&#115;&#x70;&#101;&#x63;&#x2d;&#115;&#117;&#98;&#115;&#99;&#114;&#x69;&#x62;&#101;&#64;&#121;&#97;&#x68;&#111;&#x6f;&#103;&#x72;&#x6f;&#x75;&#x70;&#115;&#46;&#99;&#x6f;&#x6d;">&#109;&#x70;&#101;&#103;&#45;&#111;&#116;&#115;&#112;&#x65;&#x63;&#45;&#115;&#117;&#98;&#115;&#99;&#x72;&#x69;&#98;&#101;&#64;&#121;&#x61;&#x68;&#x6f;&#x6f;&#x67;&#x72;&#111;&#117;&#112;&#x73;&#x2e;&#99;&#x6f;&#x6d;</a> に空メールを送信するだけですぐに参加できるので、OpenType ML と比べるととっつきやすいかもしれません。過去の<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%A2%A1%BC%A5%AB%A5%A4%A5%D6">アーカイブ</a>や添付ファイルの閲覧には米 <a class="keyword" href="http://d.hatena.ne.jp/keyword/Yahoo%21">Yahoo!</a> のアカウントが必要になりますので、アカウントを持っていなければ作っておきましょう。</p>

<p>なお、この ML から配信されるメールは、件名の頭に <code>[mpeg-OTspec]</code> がついています。</p>

<p>ちなみに、<a class="keyword" href="http://d.hatena.ne.jp/keyword/mpeg">mpeg</a>-OTspec ML の近年の流量は以下のとおりで、話題があるときとないときでムラがあります。これは OpenType ML の方も同様です。</p>

<p><span itemscope itemtype="http://schema.org/Photograph"><img src="https://cdn-ak.f.st-hatena.com/images/fotolife/m/mashabow/20160621/20160621000505.png" alt="f:id:mashabow:20160621000505p:plain" title="f:id:mashabow:20160621000505p:plain" class="hatena-fotolife" itemprop="image"></span></p>

<p>また、両 ML 間では転送や<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%AF%A5%ED%A5%B9%A5%DD%A5%B9%A5%C8">クロスポスト</a>が多く、両方とも登録していると若干カオスです。</p>

<h3>おまけ</h3>

<p>最後におまけとして、以下の<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%EA%A5%DD%A5%B8%A5%C8%A5%EA">リポジトリ</a>を紹介しておきます。位置づけがまだよくわかりませんが、OpenType レイアウトに関する追加仕様のドラフトのようです。</p>

<p><iframe src="//hatenablog-parts.com/embed?url=https%3A%2F%2Fgithub.com%2FOpenType%2Fopentype-layout" title="OpenType/opentype-layout" class="embed-card embed-webcard" scrolling="no" frameborder="0" style="display: block; width: 100%; height: 155px; max-width: 500px; margin: 10px 0px;"></iframe><cite class="hatena-citation"><a href="https://github.com/OpenType/opentype-layout">github.com</a></cite></p>
<div class="footnote">
<p class="footnote"><a href="#fn-b01003c3" name="f-b01003c3" class="footnote-number">*1</a><span class="footnote-delimiter">:</span><span class="footnote-text">ややこしいので詳細は省きますが、今どきの TrueType は OpenType に含まれます。また、Web フォントで使われる WOFF は、ざっくり言えば OpenType を zlib 圧縮したものです。</span></p>
<p class="footnote"><a href="#fn-dc71ee9e" name="f-dc71ee9e" class="footnote-number">*2</a><span class="footnote-delimiter">:</span><span class="footnote-text">一時期は opentype-<em>migration</em>-sub@indx.co.uk というアドレスだったようです（<a href="http://blog.typekit.com/2008/01/29/opentype_15_draft/" title="The Typekit Blog | OpenType 1.5 draft &amp; 1.6 suggestions">参考</a>）。</span></p>
</div>]]></description>
            <enclosure url="https://cdn-ak.f.st-hatena.com/images/fotolife/m/mashabow/20160621/20160621000505.png" length="0" type="image/png"/>
        </item>
        <item>
            <title><![CDATA[fluent-logger-ruby が堅牢だった件]]></title>
            <link>https://masutaka.net/2016-06-13-2/</link>
            <guid>https://masutaka.net/2016-06-13-2/</guid>
            <pubDate>Mon, 13 Jun 2016 01:00:00 GMT</pubDate>
            <description><![CDATA[[2016-06-13-1] にも書いたとおり、こちらの PR で fluent-logger-ruby を導入しました。
fluentd にも POST する by masutaka · Pull Request #40 · masutaka/masutaka-metrics その時に、こんな問題に気づきました。
loading...
   if (localStorage.getItem("pref-theme") === "light") { const elements = document.getElementsByClassName('twitter-tweet'); for (let i = 0; i  結論から言うと、Wrapper を作る必要はありません（一度作ってしまった
けど&hellip; ）。fluent-logger-ruby がいい感じに処理してくれます。
fluent-logger-ruby の基本的な使い方は、プログラム開始時に #new し
てインスタンスを保持し、あとは必要な時に #post を呼ぶだけです。
class Masutaka def initialize @fluent_logger = ::Fluent::Logger::FluentLogger.new end def hoge metrics = { &#39;field1&#39; =&gt; &#39;hogehoge&#39; } @fluent_logger.post(&#39;masutaka.metrics&#39;, metrics) end end プログラム稼働中に fluentd が restart または reload すると、]]></description>
        </item>
        <item>
            <title><![CDATA[GrowthForecast のデータを Elasticsearch にインポートした]]></title>
            <link>https://masutaka.net/2016-06-13-1/</link>
            <guid>https://masutaka.net/2016-06-13-1/</guid>
            <pubDate>Mon, 13 Jun 2016 00:00:00 GMT</pubDate>
            <description><![CDATA[そもそもこんな理由で、インポートしました。
 このサーバで Elasticsearch + Kibana と GrowthForecast を両方稼働するのはリソースの無駄 GrowthForecast は私の環境では [2014-09-23-2] という問題がある  インポートする方法はこちらの Issue にまとめました。
GrowthForecastのデータをelasticsearchにインポートする方法を調べる · Issue #4 · masutaka/masutaka-metrics Elasticsearch の Bulk API で比較的簡単にインポートすることが出来ま
した。少しクセがあり苦戦した経緯は上の Issue に書いてあります。
インポートしたデータ量はたったの 600 レコード程度です。データの内
容としてはこのブログの Feedly, Hatena::Bookmark, Live Dwango
Reader の購読者数やブックマーク数をグラフ化しています。
POST しているのは自作の masutaka-metrics です。今は GrowthForecast
と fluentd 両方に POST していますが、そのうち fluentd だけにします。
今回 fluent-logger gem を導入しました。
fluentd にも POST する by masutaka · Pull Request #40 · masutaka/masutaka-metrics いろいろあった話は次回に書くとして、簡単に fluentd に任意のデータ]]></description>
        </item>
        <item>
            <title><![CDATA[Bugsnag に metadata を送る方法]]></title>
            <link>https://masutaka.net/2016-06-07-1/</link>
            <guid>https://masutaka.net/2016-06-07-1/</guid>
            <pubDate>Tue, 07 Jun 2016 00:00:00 GMT</pubDate>
            <description><![CDATA[Bugsnag に metadata を送ることが出来るので、ここにもメモします。
# どこかに定義 class MasutakaError &lt; StandardError include Bugsnag::MetaData end # それぞれの例外クラスは StandardError の代わりに MasutakaError を継承する class SummarizedResultBlankError &lt; MasutakaError; end class SizeZeroError &lt; MasutakaError; end exception = SummarizedResultBlankError.new(&#34;It broke!&#34;) exception.bugsnag_meta_data = { user_info: { name: &#39;masutaka&#39; } } Bugsnag.notify(exception) ドキュメントはこちら。
https://github.com/bugsnag/bugsnag-ruby/blob/v4.1.0/docs/Notification%20Options.md#exception-mixin 追記(2016-06-08):
職場の同僚から Bugsnag.notify に直接渡せると教えてもらいました。
https://github.com/bugsnag/bugsnag-ruby/blob/v4.1.0/spec/notification_spec.rb#L118-L148 以下のように書きかえられます。初めに挙げた方法と同じ metadata を設
定したら、こちらが優先されます。
class SummarizedResultBlankError &lt; StandardError; end class SizeZeroError &lt; StandardError; end Bugsnag.notify( SummarizedResultBlankError.new(&#34;It broke!&#34;), user_info: { name: &#39;masutaka&#39; } ) ]]></description>
        </item>
        <item>
            <title><![CDATA[AWS Summit Tokyo 2016 に行ってきた #AWSSummit]]></title>
            <link>https://masutaka.net/2016-06-04-1/</link>
            <guid>https://masutaka.net/2016-06-04-1/</guid>
            <pubDate>Sat, 04 Jun 2016 00:00:00 GMT</pubDate>
            <description><![CDATA[[2014-07-19-1] と [2015-06-07-1] に引き続き、今年も AWS Summit
Tokyo に行ってきました。
今回は会社の期末かつキックオフがあった関係で 2 日目のみの参加。通
常業務だったら無理していったのですがね。濃いセッションは 3 日目が
多かっただけに少し残念。
全てのセッションの動画や資料はこちらをどうぞ。
AWS Summit Tokyo 2016 開催レポート｜AWS Day2 キーノート  資料ダウンロード 今年も AWS 日本法人社長の長崎氏によるキーノート。
ゲストスピーカーの日本電産 佐藤氏のプレゼンは予想に反して（失礼）
面白かった。氏の Everything goes to Cloud! という掛け声の下、現在
は社内サーバゼロとのこと。この規模 でそれはすごいぞ・・・！
loading...
   if (localStorage.getItem("pref-theme") === "light") { const elements = document.getElementsByClassName('twitter-tweet'); for (let i = 0; i  ランチタイム やったー！寿司だー！
loading...
   if (localStorage.getItem("pref-theme") === "light") { const elements = document.]]></description>
        </item>
        <item>
            <title><![CDATA[init.el にパスワードやアクセストークンを書かずに済む方法]]></title>
            <link>https://masutaka.net/2016-05-06-2/</link>
            <guid>https://masutaka.net/2016-05-06-2/</guid>
            <pubDate>Fri, 06 May 2016 01:00:00 GMT</pubDate>
            <description><![CDATA[[2016-05-06-1] で init.el にアクセストークンを設定するという話をし
たので。
最近は dotfiles を GitHub に公開する方も増えているかと思います。
init.el にパスワードやアクセストークンを書いたのを忘れて、GitHub
の公開リポジトリに push すると悲惨なことになりますよね。
そこで、こんな方法はいかがでしょう？
こんな関数を init.el に書いておきます。
 こんな設定をしたければ、、
(setq helm-qiita-access-token &#34;1234abcd....&#34;) init.el にはこのように書きます。
(setq helm-qiita-access-token (my-lisp-load &#34;helm-qiita-access-token&#34;)) あとは ~/.emacs.d/spec/helm-qiita-access-token を作成し、
&#34;1234abcd....&#34; とだけ書いておきます。ダブルクオーテーションも必要です。もちろん
~/.emacs.d/spec は .gitignore に追加します。
read() で読み込んでいるので、S式であればなんでも書けます。もちろん
コメントも OK。
実はこれ、mew-lisp-load() の簡易版です。昔よく Mew のソース を読ん
でいて、こりゃ使えそうだということで、結構前に拝借致しました。]]></description>
        </item>
        <item>
            <title><![CDATA[Qiita や Qiita:Team のストックを Emacs から開ける helm-qiita.el を作った]]></title>
            <link>https://masutaka.net/2016-05-06-1/</link>
            <guid>https://masutaka.net/2016-05-06-1/</guid>
            <pubDate>Fri, 06 May 2016 00:00:00 GMT</pubDate>
            <description><![CDATA[休み前に職場の同僚と話していて脈絡なく閃いたので、ズビっと作ってみ
ました。
  こんな感じに、Qiita や Qiita:Team のストックを Helm Interface 上で
絞り込んで、ブラウザで開くことが出来ます。
MELPAにも取り込まれた ので、M-x package-install helm-qiita でイン
ストールできます。
設定方法 README.md に書いたとおり 、このような設定をすると使えます。
(setq helm-qiita-username &#34;Your Qiita Account&#34;) (setq helm-qiita-organization &#34;Your Organization&#34;) ;; optional (setq helm-qiita-access-token &#34;Your Access Token&#34;) (helm-qiita-initialize) Organization は https://feedforce.qiita.com/ の場合は &ldquo;feedforce&rdquo;
を設定して下さい。指定しなければ（nil なら）、https://qiita.com/
になります。
Access Token は https://qiita.com/settings/applications から作れま
す。read_qiita または read_qiita_team のスコープを付けて下さい。
デフォルトでは 1 時間に 1 回、Emacs の Timer から非同期で Qiita
API を叩いて ~/.emacs.d/helm-qiita を更新します。helm-qiita.el は]]></description>
        </item>
        <item>
            <title><![CDATA[社内勉強会で github-nippou v2.0.0 をライブリリースした]]></title>
            <link>https://masutaka.net/2016-04-09-1/</link>
            <guid>https://masutaka.net/2016-04-09-1/</guid>
            <pubDate>Sat, 09 Apr 2016 00:00:00 GMT</pubDate>
            <description><![CDATA[[2016-03-23-1] に予告したとおり、今回は破壊的変更をしました。
https://github.com/masutaka/github-nippou/releases/tag/v2.0.0  改良  &ndash;all と &ndash;num オプションを削除 代わりに &ndash;since-date と &ndash;until-date を追加 デバッグオプション &ndash;debug を追加 サブコマンド version を追加 パフォーマンスの改善   バグ修正  Issue や Pull request 発生時ではなく、現在のタイトルを使用 同じく現在のステータスを使用   その他  ソースコードのリファクタリング    github-nippou は引数を付けなければ、今日の GitHub の活動から日報用
のリンクを生成します。今回の v2.0.0 から &ndash;since-date や
&ndash;until-date を付けることで、GitHub の活動を柔軟に取って来れるよう
になりました。
GitHub Events API の仕様 限界である 90 日前からも取得できます。ただ
し同仕様で最大数が 300 という制限があります。
パフォーマンスも改善したので、上のような激しい使い方も可能です。
内部的には最大 5 並列で動作します。
並列数を指定するオプションは作りませんでした。並列数を意識すべきは
私であって、ユーザではないからです。ですが、開発用と設定厨の方向け
に環境変数や git config で設定する方法 はあります。ご自由にどうぞ。]]></description>
        </item>
        <item>
            <title><![CDATA[GitHub の pull request commit URL から以前の commit URL に移動するブックマークレット]]></title>
            <link>https://masutaka.net/2016-04-08-1/</link>
            <guid>https://masutaka.net/2016-04-08-1/</guid>
            <pubDate>Fri, 08 Apr 2016 00:00:00 GMT</pubDate>
            <description><![CDATA[GitHub が１ヶ月ほど前にリリースした、More code review tools は全般
的に気に入っていません。
 変更されたファイル一覧が分かりづらくなった commit 単位でのコメントがしづらくなった  とくに後者は、ブラウザのアドレスバーでこのようにいじって凌いでいました&hellip;。
https://github.com/masutaka/hoge-repository/pull/128/commits/12345678 &hellip;
↓
https://github.com/masutaka/hoge-repository/commit/12345678 &hellip;
これではあんまりなので、こんなブックマークレットを作り
&ldquo;to commit URL&rdquo; という名前のブックマークにしました。
 javascript:location.href=location.href.replace(//pull/\d+/commits// , &ldquo;/commit/&rdquo;)
 ひとまずこれで凌げそうです。そもそもなぜコメントできるようにしてな
いのですかね？]]></description>
        </item>
        <item>
            <title><![CDATA[BitBar の Emacs と GitHub のプラグインを少し便利にした]]></title>
            <link>https://masutaka.net/2016-03-30-1/</link>
            <guid>https://masutaka.net/2016-03-30-1/</guid>
            <pubDate>Wed, 30 Mar 2016 00:00:00 GMT</pubDate>
            <description><![CDATA[それぞれ以下の Pull Request です。
 [Emacs Package Updates] Add error handler by masutaka · Pull Request #357 · matryer/bitbar-plugins  [GitHub status] Add link to official github status by masutaka · Pull Request #356 · matryer/bitbar-plugins   Emacs Package Updates plugin  Emacs が見つからないとか、パッケージを更新できないなど、エラーが発
生した時はいつもの Gnu（ヌー）さんの横に err と表示されます。→ パット見、牛に見えますが、れっきとしたヌーです。多分。
パッケージを更新できないのは 100% これなんですよね。本当に謎。ネッ
トに繋がらないだけだったら、エラーにはなりません。
loading...
   if (localStorage.getItem("pref-theme") === "light") { const elements = document.getElementsByClassName('twitter-tweet'); for (let i = 0; i  GitHub status plugin  &ldquo;Everything operating normally.]]></description>
        </item>
        <item>
            <title><![CDATA[github-nippou v1.2.0 released]]></title>
            <link>https://masutaka.net/2016-03-23-1/</link>
            <guid>https://masutaka.net/2016-03-23-1/</guid>
            <pubDate>Wed, 23 Mar 2016 00:00:00 GMT</pubDate>
            <description><![CDATA[https://github.com/masutaka/github-nippou/releases/tag/v1.2.0  改良  URL でソートしたリストを出力 Issue や PR がクローズされていたら、closed! を付加    v2.0.0 では [2016-03-21-1] に追加した -a, -n オプションが早くもな
くなる予定です・・・！]]></description>
        </item>
        <item>
            <title><![CDATA[BitBar の Emacs Package Updates プラグイン作って、本家にマージされた]]></title>
            <link>https://masutaka.net/2016-03-22-1/</link>
            <guid>https://masutaka.net/2016-03-22-1/</guid>
            <pubDate>Tue, 22 Mar 2016 00:00:00 GMT</pubDate>
            <description><![CDATA[Rebuild の Aftershow 132 で紹介された BitBar を使い始めました。
Homebrew のアップデート可能数 や、GitHub のステータス を表示させてい
ます。宮川さんがやっている、現在のタスクを OSX のメニューバーに表
示というやつも試しています。
で、Emacs の Package アップデート可能数も出したかったので、本家に
PR だして無事マージされました 。
こんな感じに表示されます。
Plugin のページからインストール出来ます。ポーリング間隔や Emacs の
場所は適宜変えて下さい。
Emacs Package Updates on BitBar - Put anything in your Mac OS X menu bar エラー処理が甘いので、あとで直すかも。本当はシェルスクリプトじゃな
くて、Emacs Lisp スクリプトにしたかったのですが、標準出力の捨て方
が分からず一旦断念しました。
おまけ
loading...
   if (localStorage.getItem("pref-theme") === "light") { const elements = document.getElementsByClassName('twitter-tweet'); for (let i = 0; i  ]]></description>
        </item>
        <item>
            <title><![CDATA[github-nippou v1.1.0 and v1.1.1 released]]></title>
            <link>https://masutaka.net/2016-03-21-1/</link>
            <guid>https://masutaka.net/2016-03-21-1/</guid>
            <pubDate>Mon, 21 Mar 2016 00:00:00 GMT</pubDate>
            <description><![CDATA[https://github.com/masutaka/github-nippou/releases/tag/v1.1.0 https://github.com/masutaka/github-nippou/releases/tag/v1.1.1 -a オプションを追加しました。今日より前のイベントも（存在すれば）
標準出力に出力します。日報書き忘れの時などにご利用下さい。
-n オプションも追加しました。たまに、作成した PR の取りこぼしがあ
ったのはこのせいでした。以前 Issue 作って 忘れてました。
 Events｜GitHub Developer Guide Events support pagination , however the per_page option is
unsupported. The fixed page size is 30 items. Fetching up to ten
pages is supported, for a total of 300 events.
 Octokit::Client::Events#user_events が使う
&ldquo;GET /users/:username/events&rdquo; は pagination をサポートしており、
デフォルトでは 30 イベントしか返さないからです。
デフォルトを 50 にして且つ、オプションで指定可能にしました。10 の
倍数を指定して下さい。上限は 300 です。
あとは &ldquo;&lt;&rdquo; と &ldquo;&gt;&rdquo; をエスケープしたり、使用する Gem のバージョンの]]></description>
        </item>
        <item>
            <title><![CDATA[このサイトを http2 対応した]]></title>
            <link>https://masutaka.net/2016-03-15-1/</link>
            <guid>https://masutaka.net/2016-03-15-1/</guid>
            <pubDate>Tue, 15 Mar 2016 00:00:00 GMT</pubDate>
            <description><![CDATA[今まで http だったこのサイトを http2 対応しました。
静的ファイルもそうですが、このサイトで動いている kibana が体感で速
くなった気がします（計測すればよかった）。
SSL 証明書は最近流行りの Let&rsquo;s Encrypt ではなくて、温かみのある
StartSSL で取得しました。パスワードではなく、証明書でのログインが
いいですね。
どちらも無料で取得できます。前者はコマンドラインから取得できるが構
成管理難しめ、後者はサイト上から手作業で取得が必要だが構成管理は容
易、というおおざっぱな違いがあります。
今回学んだことは**「出来るだけ https 対応してから http2 対応すべし」**
でした。雑に http2 にしたら 403 Forbidden や、Chrome で
ERR_SPDY_INADEQUATE_TRANSPORT_SECURITY が発生しハマりました。
あとは**「早く寝ろ」**でしょうか。日曜日の後半は完全に頭が働いていませ
んでした&hellip;。
nginx の設定では主に以下を学びました。
 ssl_session_cache  高速化のため、セッションキャッシュを設定する   ssl_ciphers  より安全にするため、暗号化スイートを明示的に設定する   ssl_dhparam  より安全にするため、DH パラメータファイルを指定する   add_header Strict-Transport-Security  より安全にするため、HSTS を用いて常に HTTPS 通信を行う HTTP Strict Transport Security    以下、作業メモです。]]></description>
        </item>
        <item>
            <title><![CDATA[Chrome 拡張 Tweets Favicon Badges に要望出したら 29 分で対応された]]></title>
            <link>https://masutaka.net/2016-02-28-1/</link>
            <guid>https://masutaka.net/2016-02-28-1/</guid>
            <pubDate>Sun, 28 Feb 2016 00:00:00 GMT</pubDate>
            <description><![CDATA[最近はなるべくデフォルトのツールを選択するようにしていて、OSX で
Twitter を見るときはブラウザで https://twitter.com/ を見ています。
私はホームと複数のリストをタブで開いていますが、問題になるのがその
幅。３つとなると結構邪魔です。
じゃあと「タブを固定」すると新着ツイートが分からなくなってしまいます。
そこで見つけたのが Chrome 拡張の Tweets Favicon Badges 。このように
favicon にバッジを付けてくれます。
ただ、リストの favicon にはバッジが付かなかったので、要望を出した
ら 29 分で対応して下さいました。感謝！
Showing a badge of list pages · Issue #1 · yurtaev/extension-tweets-favicon-badges 似た Chrome 拡張に Favicon Badges もありました。こちらは
twitter.com 以外の favicon にも付けてくれるようです。バッジが見づ
らいのと全サイトの Read 権限を与える必要があるので、今回は見送りま
した。]]></description>
        </item>
        <item>
            <title><![CDATA[PLANTRONICS Bluetooth ヘッドセットの電源が付かなくなった件]]></title>
            <link>https://masutaka.net/2016-02-11-1/</link>
            <guid>https://masutaka.net/2016-02-11-1/</guid>
            <pubDate>Thu, 11 Feb 2016 00:00:00 GMT</pubDate>
            <description><![CDATA[一昨日ジムから帰ってきてから、気づかないうちに iPhone と接続し、勝
手にリダイアルを始めるようになりました&hellip;。
しばらくいじっていたら電源が付かなくなり、どうにもならない状態に。
充電はできるけど一瞬でバッテリーが消費されるような動き。
充電直後は電源が付くので公式のこちらの方法でリセットしたところ、
まだ 20 分くらいですが、使えるようになりました。
BackBeat GO トラブルシューティング : ボタンが応答しない またおかしくなったらサポート に連絡してみよう。
Bluetooth イヤホンにしては ￥5,000 ちょっとと割安だし、性能も申し
分ないのでオススメです。
 最近ジムでランニングしながら、ゼノブレイドとか FF13 の戦闘音楽聞く
のがマイブームなので、こちらも気になっている。
上の BackBeat GO は汗に強いわけではないのと、カナル型なので走った
時の振動が耳に伝わりやすいという理由もあるけどね。
 P.S.
スタビライザー（変なフック）の使い方が未だに全然わからないんですけどw
スタビライザー（イヤフォン）の使い方 - オーディオ｜【OKWAVE】 ]]></description>
        </item>
        <item>
            <title><![CDATA[yard doc コマンドの -o オプション以外で出力ディレクトリを変更する考察]]></title>
            <link>https://masutaka.net/2016-01-31-1/</link>
            <guid>https://masutaka.net/2016-01-31-1/</guid>
            <pubDate>Sun, 31 Jan 2016 00:00:00 GMT</pubDate>
            <description><![CDATA[結論から言うとできませんでした。-o オプションが必須です。
以下、調査結果のメモ。
$ bundle exec yard doc したら、doc ディレクトリではなく hoge ディ
レクトリにドキュメントファイルを作りたかったんです。
でも設定ファイルやモンキーパッチではどうにもなりませんでした。
Pull Request 出すしかないけど、そこまでして変えたいわけじゃないか
らなあ&hellip;。
-o オプション指定した場合のフロー $ yard doc -o hoge すると、options.serializer.basepath に &lsquo;hoge&rsquo;
が入る。
https://github.com/lsegal/yard/blob/v0.8.7.6/lib/yard/cli/yardoc.rb#L652-L655 opts.on(&#39;-o&#39;, &#39;--output-dir PATH&#39;, &#39;The output directory. (defaults to ./doc)&#39;) do |dir| options.serializer.basepath = dir end options.serializer は YARD::Serializers::FileSystemSerializer
class のインスタンスで、basepath の setter は以下のように定義され
ている。
https://github.com/lsegal/yard/blob/v0.8.7.6/lib/yard/serializers/file_system_serializer.rb#L9-L11 def basepath=(value) @basepath = options[:basepath] = value end @basepath はその後、同 class 内の #serialize で参照される。
-o オプション指定しない場合のフロー 前述のフローには入らないので]]></description>
        </item>
        <item>
            <title><![CDATA[Qiita の markdown を Emacs からプレビューする]]></title>
            <link>https://masutaka.net/2016-01-15-1/</link>
            <guid>https://masutaka.net/2016-01-15-1/</guid>
            <pubDate>Fri, 15 Jan 2016 00:00:00 GMT</pubDate>
            <description><![CDATA[[2015-04-05-1] の Qiita 版です。雑です。
init.el にこんなのを定義します。
(defun qiitadown ()  (interactive)  (shell-command (format &#34;qiitadown.sh %s&#34; (buffer-file-name))))  (with-eval-after-load &#34;markdown-mode&#34;  (define-key markdown-mode-map (kbd &#34;C-c C-c C-q&#34;) &#39;qiitadown)) パスの通ったディレクトリに以下のシェルスクリプトをパーミッション
755 とかで置きます。
 あと、qmc コマンドが必要です。Prepare に書いてあるように
qiita-markdown-cli gem もインストールして下さい。
markdown ファイルを開いて、C-c C-c C-q すれば Chrome とかでプレビュー
が見られます。]]></description>
        </item>
        <item>
            <title><![CDATA[できるだけ人感センサー付きLED照明に変えてみた]]></title>
            <link>https://masutaka.net/2016-01-10-1/</link>
            <guid>https://masutaka.net/2016-01-10-1/</guid>
            <pubDate>Sun, 10 Jan 2016 00:00:00 GMT</pubDate>
            <description><![CDATA[日頃からおすすめしている2015年に買ってよかったもの｜Act as Professional 引っ越してから、トイレの照明を消し忘れたり、出かけようと靴を履いた
らキッチンの照明を消し忘れて靴をまた脱ぐ、ということがよくあったの
で、私もえいやっと変えてしまいました。
照明の消し忘れはないか、照明のスイッチはどこかなど、考える必要が減
り良い感じです。
 電球のサイズ Amazon で買うにあたり、まずサイズを調べました。
電球の口金サイズの種類、測り方を徹底解説。電球買いに行く前にチェックすべし！｜Only1 Press しかし、うちの電球にはサイズが書いてない・・・！
仕方がないので、ものさしで測り E17 だとあたりを付けて、1 つだけ買
いました。幸運にも合ってました。
垂直か斜めか 人感センサーなしと比べて、ここが一番注意すべきポイントかもしれません。
電球を垂直に取り付けるタイプか、斜めに取り付けるタイプかで、センサー
の位置が変わってきます。間違えると照明が付かず悲惨なことになるので、
一度電球を取り外すなどして、しっかり確認する必要があります。
こちらは垂直式。形状からして全然違います。
 照明の色 元の電球と同じ電球色を探したのですが、同じアイリスオーヤマの商品で
は値段が 2 倍くらい違いました。
 昼白色 : ￥1,779 電球色 : ￥3,400  メーカーのウェブサイトを見たら、本来法人向けの商品のようで、公式の
アイリスプラザ では売っておらず。両方とも定価が ￥4,500 でした。
 LDA4N-H-E17SH LED電球 一般電球ﾀｲﾌﾟ 斜め取付人感ｾﾝｻｰ付 昼白色相当  LDA3L-H-E17SH LED電球 一般電球ﾀｲﾌﾟ 斜め取付人感ｾﾝｻｰ付 電球色相当   どうやら昼白色タイプだけが Amazon だけで ￥1,779 という、おそらく
激安価格で売られている状況のようでした。
直感で今が買いだ！と判断し、ズビっと 5 つ（※）購入するに至りました。
しめて ￥8,895 なり。ギリギリで良い買い物をしたと信じましょう。]]></description>
        </item>
        <item>
            <title><![CDATA[『武士の家計簿』は落ち着いた良い映画だった]]></title>
            <link>https://masutaka.net/2016-01-07-1/</link>
            <guid>https://masutaka.net/2016-01-07-1/</guid>
            <pubDate>Thu, 07 Jan 2016 00:00:00 GMT</pubDate>
            <description><![CDATA[え、家計簿付けてなかったの？
というのがツッコミどころ。
当時の武士はそんなもんだったのかな？
とは言え、全体的な雰囲気は好き。
若い頃にそろばんにのめり込む猪山直之を見て、今の時代だったらどんな
職業に就いていたのかなと思った。
普段の暮らしから見た、幕末の混乱も興味深かった。
 武士の家計簿の猪山家は、今も続いているんでしょうか? - Yahoo!知恵袋 しかし、家宝ともいえよう家計簿を含む文書類が古本屋で売りに出されて
いたということから推測すると、猪山家はもはやまともな形では存続して
いないのではないかと思われます。
 諸行無常ですね&hellip;。
Amazon プライム・ビデオにありました。
 DVD 版はこちら。
 ]]></description>
        </item>
        <item>
            <title><![CDATA[El Capitan で eventmachine や puma のビルドが通らないアレへの対策と解説]]></title>
            <link>https://masutaka.net/2016-01-01-1/</link>
            <guid>https://masutaka.net/2016-01-01-1/</guid>
            <pubDate>Fri, 01 Jan 2016 00:00:00 GMT</pubDate>
            <description><![CDATA[El Capitan から openssl のヘッダファイルが削除されました。ヽ(`Д´)ﾉﾌﾟﾝﾌﾟﾝ
Homebrew をお使いの方は、eventmachine や puma をインストールしよう
とすると、こんなエラーが発生すると思います。（発生しない方は、すで
に後述のコマンドを実行しているのだと思います。）
make &#34;DESTDIR=&#34; clean make &#34;DESTDIR=&#34; compiling binder.cpp In file included from binder.cpp:20: ./project.h:116:10: fatal error: &#39;openssl/ssl.h&#39; file not found #include &lt;openssl/ssl.h&gt; ^ 1 error generated. make: *** [binder.o] Error 1 make failed, exit code 2 対策方法 このコマンドを実行するだけです。
$ brew link openssl --force /usr/local/include や /usr/local/lib に openssl へのシンボリックリ
ンクが作られ、gem install 可能になります。
Homebrew の openssl がリンクされていますね！
$ otool -L ~/.]]></description>
        </item>
        <item>
            <title><![CDATA[東京の単身引越しは『ケーエー引越センター』最強説]]></title>
            <link>https://masutaka.net/2015-12-29-1/</link>
            <guid>https://masutaka.net/2015-12-29-1/</guid>
            <pubDate>Tue, 29 Dec 2015 00:00:00 GMT</pubDate>
            <description><![CDATA[http://ka-center.jp/ 最近の記事のカテゴリは Life ばかりです。
このブログは一体どこに向かうのでしょう&hellip;？
さて、[2015-12-14-1] にも書いたとおり、先月 20 日に荒川区に引越し
ました。使ったのは『ケーエー引越センター 』です。
これまで 7 回の引越しをしてきましたが、その中でも東京の単身引越し
はここが一番だと思いました。2 万円を切る価格で、質も悪くない、むし
ろ非常に良い。
他に良い点を上げると、
 見積もり前は電話が一切かかってこない  個人的に最も評価しています   訪問見積もりがない  こちらからかけたフリーダイヤルで見積もってもらいます   ダンボール代もオプション  頑張ればさらに 3,000 円前後安く出来た   まっとうな手段で低価格を実現しているようにみえる  費用を抑えても高い品質で引越しができるケーエー引越センターの秘密    作業が早くて丁寧  引越しの概要 【日時】
2015年11月20日（金曜日・作業開始時間 12:00頃～）
【荷物量】
単身・1人暮らし用程度の荷物量（やや多め）
【お部屋】
アパート（2LDK）→ マンション（1K）
【移動距離】
21.7km（世田谷区 → 荒川区）
【付属サービス】
家電設置サービス（洗濯機のみ）
【料金】
19,560円
見積もりまで 平日の夜 0:00 過ぎに、某大手とケーエー引越センター（以下ケーエー）
のサイト上で見積もり依頼をしました。
某大手は今電話してよいか SMS で確認が来ました。OK したら、すぐに電]]></description>
        </item>
        <item>
            <title><![CDATA[月一で家事代行サービス CaSy（カジー）を使うことにした]]></title>
            <link>https://masutaka.net/2015-12-27-1/</link>
            <guid>https://masutaka.net/2015-12-27-1/</guid>
            <pubDate>Sun, 27 Dec 2015 00:00:00 GMT</pubDate>
            <description><![CDATA[以前から興味があった家事代行サービス CaSy（カジー）を昨日利用しま
した。
家事代行サービスを東京でお探しなら1時間2,190円のCaSy かなり満足したので、さっそく来月から月（4 週）に 1 回の定期を予約
しました。鍵のお預けサービスも使うので、帰宅したら勝手にきれいになっ
ている感じです。
今回は初めてということもあり、約束の時間に立ち会ってすぐ近所のガス
トに退散。終わる少し前に帰宅しました。
そんな初回の内訳は以下のとおり。
         時間 2時間   料金 5,020円   内訳 2,500円/時間 × 2時間 + 交通費700円 + 消費税320円 - クーポン1,000円    定期予約はこのようにしました。
         頻度 4週間に1回   時間 2時間   料金 6,842円   内訳 2,390円/時間 × 2時間 + 交通費700円 + 消費税382円 + 鍵預かり980円    プロモーションコード HgmTP を使って会員登録すると、あなたも私も]]></description>
        </item>
        <item>
            <title><![CDATA[二号明朝活字書体見本（明治26年）]]></title>
            <link>https://shiromoji.hatenablog.jp/entry/2015/12/25/235158</link>
            <guid>https://shiromoji.hatenablog.jp/entry/2015/12/25/235158</guid>
            <pubDate>Fri, 25 Dec 2015 14:51:58 GMT</pubDate>
            <description><![CDATA[<h2>TL;DR</h2>

<p>東京築地活版製造所『二号明朝活字書体見本』（明治26年／1893年）の画像を <a href="https://www.flickr.com/photos/95996414@N02/albums/72157662791750695/with/23854153892/" title="二号明朝活字書体見本 | Flickr - Photo Sharing!">Flickr で公開</a>しました。</p>

<p><a data-flickr-embed="true"  href="https://www.flickr.com/photos/95996414@N02/albums/72157662791750695" title="二号明朝活字書体見本"><img src="https://farm6.staticflickr.com/5836/23335632243_f2937a602a.jpg" width="316" height="500" alt="二号明朝活字書体見本"></a><script async src="//embedr.flickr.com/assets/client-code.js" charset="utf-8"></script></p>

<p>PDF 版がほしい方は下のページから。</p>

<ul>
<li><a href="http://shiromoji.net/pd/" title="資料置き場 - しろもじ作業室">資料置き場 - しろもじ作業室</a></li>
</ul>


<h2>いきさつ</h2>

<p>先月末、<a class="keyword" href="http://d.hatena.ne.jp/keyword/Twitter">Twitter</a> でこんなやりとりをしていました。</p>

<p><blockquote class="twitter-tweet" data-lang="HASH(0x9f16ef0)"><p lang="ja" dir="ltr">手持ちの資料をネットに目録作って、私設図書館みたいな感じで参照したい人に情報を渡せる様にするといいのかもしれない。</p>&mdash; にせねこ (@nixeneko) <a href="https://twitter.com/nixeneko/status/670617740391116800">November 28, 2015</a></blockquote><script async src="//platform.twitter.com/widgets.js" charset="utf-8"></script>
<blockquote class="twitter-tweet" data-lang="HASH(0x9f16ef0)"><p lang="ja" dir="ltr">手持ちの資料、紙モノまでは整理できてないけど、本とか冊子レベルのものならここに登録してる ⁑ しろもじライブラリ - <a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%E1%A5%C7%A5%A3%A5%A2%A5%DE%A1%BC%A5%AB%A1%BC">メディアマーカー</a> <a href="https://t.co/Pe8M3kdVOk">https://t.co/Pe8M3kdVOk</a></p>&mdash; mashabow (@mashabow) <a href="https://twitter.com/mashabow/status/670619379537731585">November 28, 2015</a></blockquote><script async src="//platform.twitter.com/widgets.js" charset="utf-8"></script>
<blockquote class="twitter-tweet" data-lang="HASH(0x9f16ef0)"><p lang="ja" dir="ltr"><a href="https://twitter.com/mashabow">@mashabow</a> うわっ、1893明26の「二号明朝総数見本 全」って、小宮山大明神の明25総数見本と同じ構成か、実はその1年で違ってたりするのか、激しく気になるんですが！！！</p>&mdash; <a class="keyword" href="http://d.hatena.ne.jp/keyword/UA">UA</a> (3.1) ⿴囗図デコ大好き (@uakira2) <a href="https://twitter.com/uakira2/status/670622647710011392">November 28, 2015</a></blockquote><script async src="//platform.twitter.com/widgets.js" charset="utf-8"></script>
<blockquote class="twitter-tweet" data-lang="HASH(0x9f16ef0)"><p lang="ja" dir="ltr"><a href="https://twitter.com/uakira2">@uakira2</a> なんでしたらお貸ししますよ（そしてあわよくば撮影をお願いして…</p>&mdash; mashabow (@mashabow) <a href="https://twitter.com/mashabow/status/670624285619314688">November 28, 2015</a></blockquote><script async src="//platform.twitter.com/widgets.js" charset="utf-8"></script>
<blockquote class="twitter-tweet" data-lang="HASH(0x9f16ef0)"><p lang="ja" dir="ltr"><a href="https://twitter.com/mashabow">@mashabow</a> 撮影ご依頼、喜んで！！</p>&mdash; <a class="keyword" href="http://d.hatena.ne.jp/keyword/UA">UA</a> (3.1) ⿴囗図デコ大好き (@uakira2) <a href="https://twitter.com/uakira2/status/670625789008879617">November 28, 2015</a></blockquote><script async src="//platform.twitter.com/widgets.js" charset="utf-8"></script>
<blockquote class="twitter-tweet" data-lang="HASH(0x9f16ef0)"><p lang="ja" dir="ltr"><a href="https://twitter.com/uakira2">@uakira2</a> どうもありがとうございます！（ちなみにわたしの<a class="keyword" href="http://d.hatena.ne.jp/keyword/Twitter">Twitter</a>のヘッダ画像はその見本帳の一部です</p>&mdash; mashabow (@mashabow) <a href="https://twitter.com/mashabow/status/670626922150383616">November 28, 2015</a></blockquote><script async src="//platform.twitter.com/widgets.js" charset="utf-8"></script></p>

<p>この『二号明朝活字書体見本 全』というのは、2年半ほど前にたまたま運良く入手した活字見本帳です。自分の本棚に古い見本帳があるというのは、もちろん飛び上がるほど嬉しいわけですが、それをそのまましまっておくのもどうももったいない。どうせなら、文字に興味を持ったいろいろな人に見てもらいたい<a href="#f-954870e2" name="fn-954870e2" title="というかそもそも自分自身、ほかの人が持っている見本帳をいろいろ見たくてしょうがなかった">*1</a>。……などということを以前から考えていました。</p>

<p>そんな中でこのやりとりがあり、チャンスだと思って（ずうずうしくも）撮影をお願いしてみました。この内田（<a href="https://twitter.com/uakira2" title="UA (3.1) ⿴囗図デコ大好き(@uakira2)さん | Twitter">@uakira2</a>）さんは以前、<a href="http://f.hatena.ne.jp/uakira/S11%E7%AF%89%E5%9C%B0%E4%BA%94%E5%8F%B7/" title="S11築地五号 - uakira's fotolife">築地五号の見本帳のスキャン</a>や、<a href="http://f.hatena.ne.jp/HikariwokakaguruHitobito/%E6%97%A5%E6%9C%AC%E3%81%AE%E6%B4%BB%E5%AD%97/" title="日本の活字 - HikariwokakaguruHitobito's fotolife">『光をかかぐる人々』の撮影</a>をされています。ありがたいことに、今回快く撮影を引き受けてくださり、こうして『二号明朝活字書体見本 全』の画像を公開することができました。下の Filckr アルバムで全ページ閲覧できますので、どうぞご覧ください。表紙を含めて画像は88枚あります。</p>

<p><a data-flickr-embed="true"  href="https://www.flickr.com/photos/95996414@N02/albums/72157662791750695" title="二号明朝活字書体見本"><img src="https://farm6.staticflickr.com/5836/23335632243_f2937a602a.jpg" width="316" height="500" alt="二号明朝活字書体見本"></a><script async src="//embedr.flickr.com/assets/client-code.js" charset="utf-8"></script></p>

<p>いつものように PDF 版も用意してあります。</p>

<ul>
<li><a href="http://shiromoji.net/pd/" title="資料置き場 - しろもじ作業室">資料置き場 - しろもじ作業室</a></li>
</ul>


<h2>見本帳概観</h2>

<p><a data-flickr-embed="true"  href="https://www.flickr.com/photos/95996414@N02/23594561499/in/album-72157662791750695/" title="二号明朝活字書体見本_16"><img src="https://farm6.staticflickr.com/5809/23594561499_63930a6c9d_n.jpg" width="316" height="500" alt="二号明朝活字書体見本_16"></a><script async src="//embedr.flickr.com/assets/client-code.js" charset="utf-8"></script></p>

<p>この見本帳の8割以上は、漢字のページで占められています。字種数はまだ数えていませんが、総数見本帳だけあってさまざまな字種が載っています。その分、整ったデザインの活字（頻出する漢字）から、その場しのぎっぽいバランス悪い活字（あまり出てこない漢字）まで、クオリティもさまざまです。</p>

<p><a data-flickr-embed="true"  href="https://www.flickr.com/photos/95996414@N02/23936334066/in/album-72157662791750695/" title="二号明朝活字書体見本_76"><img src="https://farm6.staticflickr.com/5776/23936334066_13cd76846e_n.jpg" width="316" height="500" alt="二号明朝活字書体見本_76"></a><script async src="//embedr.flickr.com/assets/client-code.js" charset="utf-8"></script></p>

<p>部首順に並んだ漢字が終わると、次は分合活字（この見本帳では「分合文字」とよぶ）のページに移ります。横幅が1/3, 2/3の2種類の活字があり、この両者を偏旁として組み合わせ、漢字1字を組み立てるようになっています。</p>

<p><a data-flickr-embed="true"  href="https://www.flickr.com/photos/95996414@N02/23962423875/in/album-72157662791750695/" title="二号明朝活字書体見本_81"><img src="https://farm2.staticflickr.com/1636/23962423875_da16ffd2cf_n.jpg" width="316" height="500" alt="二号明朝活字書体見本_81"></a><script async src="//embedr.flickr.com/assets/client-code.js" charset="utf-8"></script></p>

<p>その次はかな類が続きます。カタカナ・ひらがなともに、非常に洗練された細身のデザインです。上のツイートにあるように、<a href="https://twitter.com/mashabow" title="mashabow(@mashabow)さん | Twitter">自分の Twitter</a> のヘッダ画像にはこのひらがな部分の写真を使っていますが、プロフィールページを開くたびについつい見とれてしまいます。</p>

<p>あとは記号類が少し並んで終わりです。全84ページ。奥付は以下のようになっています。</p>

<blockquote><p>明治廿六年六月六日印刷<br>
明治廿六年六月十日出版</p>

<p>　　　日本<a class="keyword" href="http://d.hatena.ne.jp/keyword/%C5%EC%B5%FE%BB%D4">東京市</a>京橋區築地二丁目拾七番地<br>
　　　　　印刷者　　曲田　成<br>
　　　　　印刷所　　東京築地活版製造所</p></blockquote>

<p>というわけで、どうぞご活用ください。</p>
<div class="footnote">
<p class="footnote"><a href="#fn-954870e2" name="f-954870e2" class="footnote-number">*1</a><span class="footnote-delimiter">:</span><span class="footnote-text">というかそもそも自分自身、ほかの人が持っている見本帳をいろいろ見たくてしょうがなかった</span></p>
</div>]]></description>
            <enclosure url="https://farm6.staticflickr.com/5836/23335632243_f2937a602a.jpg" length="0" type="image/jpg"/>
        </item>
        <item>
            <title><![CDATA[goshiTKG]]></title>
            <link>https://blog.tmd45.jp/entry/2015/12/23/153236</link>
            <guid>https://blog.tmd45.jp/entry/2015/12/23/153236</guid>
            <pubDate>Wed, 23 Dec 2015 06:32:36 GMT</pubDate>
            <description><![CDATA[<p>本日3本目の更新になります。この記事は <a href="http://www.adventar.org/calendars/720">TKG Advent Calendar 2015</a> の 23 日目です。昨日は <a href="http://www.adventar.org/users/2729">daruyanagi</a> さんの『<a href="http://daruyanagi.jp/entry/2015/12/22/000000">文明の利器をフル活用して oTKG に挑戦する</a>』でした。</p>

<p>温玉おいしそうでした。かくいう私は最近毎日お弁当に固茹で玉子を入れておりまして、それはフライパンで茹でて 10 分くらい（＋お湯にいれたまま放置 10 分くらい）です。半熟も嫌いじゃないのですが作るの難しいですね。製造機素敵です。</p>

<p>さてさて、それではアラサー毒女の普通の TKG をどうぞ。</p>

<h3>材料</h3>

<p><span itemscope itemtype="http://schema.org/Photograph"><img src="http://cdn-ak.f.st-hatena.com/images/fotolife/t/tmd45/20151223/20151223142039.jpg" alt="f:id:tmd45:20151223142039j:plain:w400" title="f:id:tmd45:20151223142039j:plain:w400" class="hatena-fotolife" style="width:400px" itemprop="image"></span></p>

<p>うちに炊飯器はありません。<a href="http://blog.tmd45.jp/entry/2015/12/23/130639">諸般の事情で普段あまり白米を食べません</a>ので。胡麻と塩昆布は正義です。</p>

<h3>構築</h3>

<p><span itemscope itemtype="http://schema.org/Photograph"><img src="http://cdn-ak.f.st-hatena.com/images/fotolife/t/tmd45/20151223/20151223142824.jpg" alt="f:id:tmd45:20151223142824j:plain:w400" title="f:id:tmd45:20151223142824j:plain:w400" class="hatena-fotolife" style="width:400px" itemprop="image"></span></p>

<p>レンジで温めた直後の輝くご飯と、ミックスサイズの卵です。</p>

<p><span itemscope itemtype="http://schema.org/Photograph"><img src="http://cdn-ak.f.st-hatena.com/images/fotolife/t/tmd45/20151223/20151223142954.jpg" alt="f:id:tmd45:20151223142954j:plain:w400" title="f:id:tmd45:20151223142954j:plain:w400" class="hatena-fotolife" style="width:400px" itemprop="image"></span></p>

<p>お茶碗でいい感じにご飯を崩して、卵を割り入れました。</p>

<p><span itemscope itemtype="http://schema.org/Photograph"><img src="http://cdn-ak.f.st-hatena.com/images/fotolife/t/tmd45/20151223/20151223143050.jpg" alt="f:id:tmd45:20151223143050j:plain:w400" title="f:id:tmd45:20151223143050j:plain:w400" class="hatena-fotolife" style="width:400px" itemprop="image"></span></p>

<p>軽くご飯と混ぜつつ醤油をかけます。</p>

<p><span itemscope itemtype="http://schema.org/Photograph"><img src="http://cdn-ak.f.st-hatena.com/images/fotolife/t/tmd45/20151223/20151223143245.jpg" alt="f:id:tmd45:20151223143245j:plain:w400" title="f:id:tmd45:20151223143245j:plain:w400" class="hatena-fotolife" style="width:400px" itemprop="image"></span></p>

<p>用意した薬味類を盛り付けます。あと隠し味的にごま油をすこーーーしだけたらしました。胡麻のいい香りです。</p>

<h3>実食</h3>

<p>いつもどおりの美味しいお味です。醤油が多少古くても、塩昆布の風味のおかげで美味しい醤油っぽい味になります。胡麻の香りも最高。胡麻と塩昆布は正義です（2回目）</p>

<p><span itemscope itemtype="http://schema.org/Photograph"><img src="http://cdn-ak.f.st-hatena.com/images/fotolife/t/tmd45/20151223/20151223144141.jpg" alt="f:id:tmd45:20151223144141j:plain:w400" title="f:id:tmd45:20151223144141j:plain:w400" class="hatena-fotolife" style="width:400px" itemprop="image"></span></p>

<p>おそまつさまでした。</p>

<h3>おわりに（おまけ）</h3>

<p>普段は朝ごはんか晩ごはんにしか TKG しないので、昼 TKG はちょっと新鮮でした。また子供の頃に食べていた TKG はこんなにいろいろ乗せたりしておらず、この辺は大人になって自分で工夫し始めた点かなと思います。</p>

<p>胡麻と塩昆布は正義です（３回目）。普段は木綿豆腐をレンジで温めたものに、これらの薬味を乗せて食べることが多いです。というわけでタイトルは <a class="keyword" href="http://d.hatena.ne.jp/keyword/Goma">Goma</a> と Shio-konbu の TKG でした。ひねりなし。</p>

<p>TKG 自体、だいぶ久しぶりに食べましたが、やはり美味しいですね。</p>

<p>おまけとして、ちょっと食べ足りなかったので酒のつまみに作ったベーコンチーズも載せておきますね。</p>

<p><span itemscope itemtype="http://schema.org/Photograph"><img src="http://cdn-ak.f.st-hatena.com/images/fotolife/t/tmd45/20151223/20151223144412.jpg" alt="f:id:tmd45:20151223144412j:plain:w400" title="f:id:tmd45:20151223144412j:plain:w400" class="hatena-fotolife" style="width:400px" itemprop="image"></span></p>

<p>厚切りベーコン 100g（三割引）</p>

<p><span itemscope itemtype="http://schema.org/Photograph"><img src="http://cdn-ak.f.st-hatena.com/images/fotolife/t/tmd45/20151223/20151223144446.jpg" alt="f:id:tmd45:20151223144446j:plain:w400" title="f:id:tmd45:20151223144446j:plain:w400" class="hatena-fotolife" style="width:400px" itemprop="image"></span></p>

<p>チーズ on the ベーコン and レンジで温め</p>

<p><span itemscope itemtype="http://schema.org/Photograph"><img src="http://cdn-ak.f.st-hatena.com/images/fotolife/t/tmd45/20151223/20151223144713.jpg" alt="f:id:tmd45:20151223144713j:plain:w400" title="f:id:tmd45:20151223144713j:plain:w400" class="hatena-fotolife" style="width:400px" itemprop="image"></span></p>

<p>バジルと粗挽き胡椒 on the hot ベーコン</p>

<p>大変美味しゅうございます。オーブンで焼いたほうがきっともっと美味しいです、が面倒なのでレンチンで済ます。</p>

<p>明日は <a href="http://www.adventar.org/users/5462">osapon</a> さんが<a href="http://diary.osa-p.net/2015/12/tkg.html">極々普通の TKG</a> について書いてくださるようです。というか毎日違う Advent Calendar に参加・更新されててすごい。</p>

<p>ではでは。</p>
]]></description>
            <enclosure url="http://cdn-ak.f.st-hatena.com/images/fotolife/t/tmd45/20151223/20151223143245.jpg" length="0" type="image/jpg"/>
        </item>
        <item>
            <title><![CDATA[さらに3ヶ月経過]]></title>
            <link>https://blog.tmd45.jp/entry/2015/12/23/130639</link>
            <guid>https://blog.tmd45.jp/entry/2015/12/23/130639</guid>
            <pubDate>Wed, 23 Dec 2015 04:06:39 GMT</pubDate>
            <description><![CDATA[<p>本日2本目の更新。この記事は <a href="http://www.adventar.org/calendars/740">糖質制限 Advent Calendar 2015</a> の 23 日目です。前の回は <a href="http://www.adventar.org/users/6667">Miki Shoji</a> さんのはずですが、その前の記事は <a href="http://www.adventar.org/users/1795">yancya</a> さんの『<a href="http://upec.jp/archives/705">yancya の糖質制限日記</a>』でした。</p>

<p>理性に完全に従う強い心がないと<a href="https://gist.github.com/a-suenami/30b51e90278df694ee61">糖質警察</a>にはなれないな、と思いました。素人（？）には 1日 40g 制限でもかなりキツイです。私は以前とりすぎていた糖質<a href="#f-f4a8f135" name="fn-f4a8f135" title="主にじゃがいもとパスタと菓子類。あと白米の常食はやめましたけど、たまに食べてます。">*1</a>を減らしているだけなので、つらい思いはしていません。<br/>
ちなみに今日はこれから <a href="http://www.adventar.org/calendars/720">TKG Advent Calendar 2015</a> の記事執筆のためにひさびさに TKG（たまごかけごはん）を食べる予定です。</p>

<p>前回の報告からさらに3ヶ月が経過しました。時が経つのは早いですね。</p>

<ul>
<li><a href="http://blog.tmd45.jp/entry/2015/09/23/131225">約半年の結果 - TMD45'β'LOG!!!</a></li>
</ul>


<h3>近況報告</h3>

<p>さて現在どうなってるかといいますと</p>

<p><span itemscope itemtype="http://schema.org/Photograph"><img src="http://cdn-ak.f.st-hatena.com/images/fotolife/t/tmd45/20151223/20151223123855.png" alt="f:id:tmd45:20151223123855p:plain" title="f:id:tmd45:20151223123855p:plain" class="hatena-fotolife" itemprop="image"></span>
<span itemscope itemtype="http://schema.org/Photograph"><img src="http://cdn-ak.f.st-hatena.com/images/fotolife/t/tmd45/20151223/20151223123904.png" alt="f:id:tmd45:20151223123904p:plain" title="f:id:tmd45:20151223123904p:plain" class="hatena-fotolife" itemprop="image"></span></p>

<p><span style="font-size: 150%">【悲報】冬眠準備【微増】</span></p>

<p>目標値はキープしてるので、季節的にもとりあえず増加分はあまり気にしないことにします。できれば体重 50kg 切りたかった＆<a class="keyword" href="http://d.hatena.ne.jp/keyword/%C2%CE%BB%E9%CB%C3%CE%A8">体脂肪率</a> 22 % 達成したかったですが、忘年会だー年末進行だーオフィス移転だーってね。</p>

<p>オフィス移転が、何の関係があるのかとお思いでしょうが、<i>引っ越し祝いで良いお菓子をたくさんいただいているのです</i>。ありがたいです。お土産の糖質はカウントしません。ありがたくいただきます<a href="#f-6f9a1c45" name="fn-6f9a1c45" title="以前、人様からいただいたものに「糖質だ糖質だ」と言ってましたが大変失礼だったと反省しております。まぁいまも言うだけは言うんですが（大変失礼）">*2</a>。</p>

<p>あと体重が増えてきたのは若干の筋肉増があったからとも考えられます。前回宣言したとおり、少しずつ筋トレ的なことも始めました。</p>

<h3>筋トレ的な話</h3>

<p>通っている<a class="keyword" href="http://d.hatena.ne.jp/keyword/%EF%AA%B5%E4">鍼灸</a>院の先生曰く、運動は歩く量を増やすのが一番健康に良いとのこと。早歩きで1日20分くらい歩きまわるのがいいそうです。そのへんは通退勤で意識しています。体重が減ったおかげか、いつしか辛くなっていた階段の利用も苦じゃなくなっておりまして、駅では階段を使うようにしたりと初歩的なことをやってます。</p>

<p>あと同じく<a class="keyword" href="http://d.hatena.ne.jp/keyword/%EF%AA%B5%E4">鍼灸</a>の先生に言われたのが、腰痛などを防止するために脚〜お尻の筋肉をつけるとよいという話。なのでお尻の筋トレをやってます。<a class="keyword" href="http://d.hatena.ne.jp/keyword/iPhone">iPhone</a> アプリで週に2,3回。</p>

<ul>
<li><a href="https://www.runtastic.com/ja/apps/butttrainer">Runtastic Butt Trainer- Runtastic</a></li>
</ul>


<p><span itemscope itemtype="http://schema.org/Photograph"><img src="http://cdn-ak.f.st-hatena.com/images/fotolife/t/tmd45/20151223/20151223130027.png" alt="f:id:tmd45:20151223130027p:plain:w270" title="f:id:tmd45:20151223130027p:plain:w270" class="hatena-fotolife" style="width:270px" itemprop="image"></span> <span itemscope itemtype="http://schema.org/Photograph"><img src="http://cdn-ak.f.st-hatena.com/images/fotolife/t/tmd45/20151223/20151223130257.png" alt="f:id:tmd45:20151223130257p:plain:w270" title="f:id:tmd45:20151223130257p:plain:w270" class="hatena-fotolife" style="width:270px" itemprop="image"></span></p>

<p>これが短時間でできるわりに、軽く筋肉痛になるくらいで自分にはちょうどよかったです。室内で出来る程度の動きなのもありがたい。飛んだりはねたり、単身者の賃貸で出来ないですからね…</p>

<p><blockquote class="twitter-tweet" lang="ja"><p lang="ja" dir="ltr">あ、先生といえば、<a class="keyword" href="http://d.hatena.ne.jp/keyword/%EF%AA%B5%E4">鍼灸</a>の先生に「筋肉少ししっかりしてきましたね」って褒められた！まだまだ頑張るぞ！</p>&mdash; たま●2日目東ウのどこか (@tmd45) <a href="https://twitter.com/tmd45/status/665479504274440193">2015, 11月 14</a></blockquote><script async src="//platform.twitter.com/widgets.js" charset="utf-8"></script></p>

<p><blockquote class="twitter-tweet" lang="ja"><p lang="ja" dir="ltr">あとお腹の筋肉も良い感じになってきてると褒められた_(:3 」∠)_</p>&mdash; たま●2日目東ウのどこか (@tmd45) <a href="https://twitter.com/tmd45/status/670479955315159040">2015, 11月 28</a></blockquote><script async src="//platform.twitter.com/widgets.js" charset="utf-8"></script></p>

<p>他人からフィードバックを貰えるのは励みになります。隔週で通ってるのですが、もう先生に褒めてもらうために続けているようなものです。</p>

<h3>おわりに</h3>

<p>はい、そんなわけで。まとまり無いですが、自分の「糖質制限」は無理なく続けていきたいと思います。</p>

<p>冬になったのでまた「きのこ＋葉物野菜＋もやし＋豚肉」アンド「豆腐」の日替わり出汁鍋習慣が始められそう。簡単だし美味いしいっぱい食べられるのでおすすめです。</p>

<p>明日は…あれもう終わり？まだ明日・明後日（それ以外にも…）空きがありますので、興味持たれたかたは参加してみてはいかがでしょうか！</p>

<ul>
<li><a href="http://www.adventar.org/calendars/740">糖質制限 Advent Calendar 2015 - Adventar</a></li>
</ul>


<p>ではでは。</p>

<p><ins>追記</ins></p>

<p>24 日目 <a href="http://www.adventar.org/users/10505">snaga</a> さんが更新してくださいました！『<a href="http://snaga1024.tumblr.com/post/135763588739/%E6%B8%9B%E9%87%8F%E7%94%9F%E6%B4%BB2015">A Hacker's Memorandum — 減量生活2015</a>』です。</p>
<div class="footnote">
<p class="footnote"><a href="#fn-f4a8f135" name="f-f4a8f135" class="footnote-number">*1</a><span class="footnote-delimiter">:</span><span class="footnote-text">主にじゃがいもとパスタと菓子類。あと白米の常食はやめましたけど、たまに食べてます。</span></p>
<p class="footnote"><a href="#fn-6f9a1c45" name="f-6f9a1c45" class="footnote-number">*2</a><span class="footnote-delimiter">:</span><span class="footnote-text">以前、人様からいただいたものに「糖質だ糖質だ」と言ってましたが大変失礼だったと反省しております。まぁいまも言うだけは言うんですが（大変失礼）</span></p>
</div>]]></description>
            <enclosure url="http://cdn-ak.f.st-hatena.com/images/fotolife/t/tmd45/20151223/20151223130027.png" length="0" type="image/png"/>
        </item>
        <item>
            <title><![CDATA[受付システムつくってみた（仮）]]></title>
            <link>https://blog.tmd45.jp/entry/2015/12/23/112220</link>
            <guid>https://blog.tmd45.jp/entry/2015/12/23/112220</guid>
            <pubDate>Wed, 23 Dec 2015 02:22:20 GMT</pubDate>
            <description><![CDATA[<p>この記事は <a href="http://www.adventar.org/calendars/906">フィードフォースエンジニア Advent Calendar 2015</a> の 23 日目の記事です。昨日は <a href="http://www.adventar.org/users/1332">kano-e </a> さんの３本目の記事で『<a href="https://gist.github.com/kano-e/f80ab651aa31f60a49c4">自分が文章を書く時と、開発してる時って、実は同じようなこと考えて作業を進めてる</a>』というお話でした！わかる（迫真）</p>

<p>「半年で約8kg痩せて筋肉ムキムキ(予定)になった話 OR (運用されていれば)受付システムの話」という予定でしたが、前者は後ほど <a href="http://www.adventar.org/calendars/740">糖質制限 Advent Calendar 2015</a> に寄せる記事で書こうと思いますので、ここでは後者の話をすることにします。</p>

<p>ただ残念なことにまだ運用は始められていないので、とりあえず作ることにした経緯などエモーショナルい話をしたいと思います。</p>

<h3>オフィス移転するで（したで！）</h3>

<p><iframe src="//hatenablog-parts.com/embed?url=http%3A%2F%2Fblog.feedforce.jp%2Farchives%2F13833" title="祝！湯島移転！ | フィードフォース全力ブログ" class="embed-card embed-webcard" scrolling="no" frameborder="0" style="display: block; width: 100%; height: 155px; max-width: 500px; margin: 10px 0px;"></iframe><cite class="hatena-citation"><a href="http://blog.feedforce.jp/archives/13833">blog.feedforce.jp</a></cite></p>

<p>今年の 10 月下旬、オフィスの移転の話がはっきりしてきた頃にこんなメモをガーッと書いて、社内の Slack に URL を放流。</p>

<p><span itemscope itemtype="http://schema.org/Photograph"><img src="http://cdn-ak.f.st-hatena.com/images/fotolife/t/tmd45/20151223/20151223101522.png" alt="f:id:tmd45:20151223101522p:plain" title="f:id:tmd45:20151223101522p:plain" class="hatena-fotolife" itemprop="image"></span></p>

<p>弊社には社内のエンジニア有志が続けている『<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A4%E2%A4%AF%A4%E2%A4%AF%B2%F1">もくもく会</a>』<a href="#f-82d5bb38" name="fn-82d5bb38" title="“FFもくもく会” のご紹介！ | feedforce Engineers' blog">*1</a>がありまして、自分もそこで作ってみよう (๑•̀ㅂ•́)و✧ と先のメモをもって宣言してみました。</p>

<p>Qiita のメモを公開した日（<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A4%E2%A4%AF%A4%E2%A4%AF%B2%F1">もくもく会</a>開催の木曜日）は「とりあえず <a class="keyword" href="http://d.hatena.ne.jp/keyword/Rails">Rails</a> で作ろうかなー」「まずは Heroku で動けばいいや」「社員を管理するモデルとー」みたいな感じで想像を膨らませていただけだったのですが、<strong>その翌日</strong> 。</p>

<p><span itemscope itemtype="http://schema.org/Photograph"><img src="http://cdn-ak.f.st-hatena.com/images/fotolife/t/tmd45/20151223/20151223102524.png" alt="f:id:tmd45:20151223102524p:plain" title="f:id:tmd45:20151223102524p:plain" class="hatena-fotolife" itemprop="image"></span></p>

<p><span style="font-size: 150%">できてる…だと…？！</span> (； ･`д･´)</p>

<p>ゆるふわ銃殺系フロントエンド芸人 @habu0104 兄貴により、だいたいの実装が出来上がっていました。なんということでしょう。スクショが無いんですが、ちゃんと画面側もいい感じに出来上がっていました。</p>

<p>いやー、ほんとフロントエンドすごい。<a class="keyword" href="http://d.hatena.ne.jp/keyword/JavaScript">JavaScript</a> 界隈すごい。自分の手が遅いのは多分にあるんですが、このスピード感はほんとすごいなぁ。…と関心するとともに、ちょっと心が折れた（笑）</p>

<h3>わたしのかんがえる さいきょうの</h3>

<p>スピード感は完全に負けたわけですが、いろいろと細かいところで「わたしのかんがえる（ry」イメージがありまして、それを叶えるために遅ればせながら自分でも実装を開始。</p>

<p><a class="keyword" href="http://d.hatena.ne.jp/keyword/Rails">Rails</a> セットアップして〜 URL とモデル設計して〜…なんてちまちまこっそり、private repository で作り続けていたのです。が。</p>

<ul>
<li><a href="https://kitayon.co/">Kitayon | オフィス向け受付アプリ Kitayon（キタヨン）</a></li>
</ul>


<p><span itemscope itemtype="http://schema.org/Photograph"><img src="http://cdn-ak.f.st-hatena.com/images/fotolife/t/tmd45/20151223/20151223105805.png" alt="f:id:tmd45:20151223105805p:plain" title="f:id:tmd45:20151223105805p:plain" class="hatena-fotolife" itemprop="image"></span></p>

<p><span style="font-size: 150%">ぎゃああああああああああああああ</span> :(；ﾞﾟ'ωﾟ'):</p>

<p>風呂グラマー masuidrive 氏のプロダクトβ発表…なんというタイミング…<a href="#f-5a8c428f" name="fn-5a8c428f" title="ちなみに弊社もβ応募中だったと思う…運用のこと考えたら自前で作るより外部サービス利用したほうが後が楽なんですよねー。私もその後のメンテのこと考えると、こっち使いたい（ぇ">*2</a></p>

<p>これはもう私個人がひとりで作ってるヘボ受付システムなんていらないじゃん。もうこれでいいじゃん。心が折れた（2回目）</p>

<h3>わたしのかんがえる…さい…きょうの…（涙）</h3>

<p>スピード感、大事。</p>

<p>でもでも「わたしのか（ry」イメージを叶えたい一心で実装を続けました。俺得…俺得でいいんや…</p>

<p>というわけで、移転には間に合いませんでしたが、現在なんとか「受付システム」っぽい感じには仕上がっております。</p>

<p><span itemscope itemtype="http://schema.org/Photograph"><img src="http://cdn-ak.f.st-hatena.com/images/fotolife/t/tmd45/20151223/20151223103923.png" alt="f:id:tmd45:20151223103923p:plain:w270" title="f:id:tmd45:20151223103923p:plain:w270" class="hatena-fotolife" style="width:270px" itemprop="image"></span> <span itemscope itemtype="http://schema.org/Photograph"><img src="http://cdn-ak.f.st-hatena.com/images/fotolife/t/tmd45/20151223/20151223104203.png" alt="f:id:tmd45:20151223104203p:plain:w270" title="f:id:tmd45:20151223104203p:plain:w270" class="hatena-fotolife" style="width:270px" itemprop="image"></span>
<span itemscope itemtype="http://schema.org/Photograph"><img src="http://cdn-ak.f.st-hatena.com/images/fotolife/t/tmd45/20151223/20151223104458.png" alt="f:id:tmd45:20151223104458p:plain:w270" title="f:id:tmd45:20151223104458p:plain:w270" class="hatena-fotolife" style="width:270px" itemprop="image"></span> <span itemscope itemtype="http://schema.org/Photograph"><img src="http://cdn-ak.f.st-hatena.com/images/fotolife/t/tmd45/20151223/20151223104510.png" alt="f:id:tmd45:20151223104510p:plain:w270" title="f:id:tmd45:20151223104510p:plain:w270" class="hatena-fotolife" style="width:270px" itemprop="image"></span></p>

<p>まだまだ思い描いている機能の半分もできてないのですが、とりあえず受付できるレベル。恥ずかしながら<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%BD%A1%BC%A5%B9%A5%B3%A1%BC%A5%C9">ソースコード</a>も公開プレイ始めました。</p>

<ul>
<li><a href="https://github.com/tmd45/knock-on">tmd45/knock-on</a></li>
</ul>


<p>年明けくらいには本番環境を作って、社内でテストを始めたいなと思っております。 <del>その前にはやく Kitayon のβ運用始まらないかな。</del></p>

<p>目下の悩みはいま社内に転がってる <a class="keyword" href="http://d.hatena.ne.jp/keyword/iPad">iPad</a> が初代で <a class="keyword" href="http://d.hatena.ne.jp/keyword/iOS%205">iOS 5</a>.1.1 からバージョンアップできないことですかね。とりあえず動きはしましたが <a class="keyword" href="http://d.hatena.ne.jp/keyword/Safari">Safari</a> で <a class="keyword" href="http://d.hatena.ne.jp/keyword/CSS">CSS</a> Animation が動かなくて悲しい気持ちになりました。<br/>
この受付システムをアピールして、新しい <a class="keyword" href="http://d.hatena.ne.jp/keyword/iPad">iPad</a> を買ってもらえるように頑張りたいと思います (๑•̀ㅂ•́)و✧</p>

<h3>おわりに</h3>

<p>システムのつくりの話には全く触れませんでしたが、いかがでしたでしょうか。</p>

<p>明日はフィードフォースの年中サンタクロース <a href="http://www.adventar.org/users/7217">hoshinotsuyoshi（@hoppiestar）</a>が<a href="http://qiita.com/hoshino/items/7f41d996b66eebd897a0">書いてくれるみたいです</a>。ではでは。</p>
<div class="footnote">
<p class="footnote"><a href="#fn-82d5bb38" name="f-82d5bb38" class="footnote-number">*1</a><span class="footnote-delimiter">:</span><span class="footnote-text"><a href="http://tech.feedforce.jp/ff-mokumoku.html">“FFもくもく会” のご紹介！ | feedforce Engineers' blog</a></span></p>
<p class="footnote"><a href="#fn-5a8c428f" name="f-5a8c428f" class="footnote-number">*2</a><span class="footnote-delimiter">:</span><span class="footnote-text">ちなみに弊社もβ応募中だったと思う…運用のこと考えたら自前で作るより外部サービス利用したほうが後が楽なんですよねー。私もその後のメンテのこと考えると、こっち使いたい（ぇ</span></p>
</div>]]></description>
            <enclosure url="http://cdn-ak.f.st-hatena.com/images/fotolife/t/tmd45/20151223/20151223103923.png" length="0" type="image/png"/>
        </item>
        <item>
            <title><![CDATA[各記事の最後に『当日のツイート』へのリンクを追加した]]></title>
            <link>https://masutaka.net/2015-12-23-1/</link>
            <guid>https://masutaka.net/2015-12-23-1/</guid>
            <pubDate>Wed, 23 Dec 2015 00:00:00 GMT</pubDate>
            <description><![CDATA[このブログを読んでいると、その日マスタカがどんなツイートをしていた
か気になりますよね？
そういうわけで各記事の最後に『当日のツイート』へのリンクを追加しま
した。
Twitter『高度な検索』の問題点 そもそも Twitter には高度な検索という機能があり、ユーザ名や日付な
どを指定して検索することが出来ます。
高度な検索の使い方｜Twitterヘルプセンター こちらがそのページです。
Twitterの高度な検索 しかし、ここでユーザ名と日付を指定しても、うまくその日のツイートを
検索することが出来ませんでした。
 何も検索されない from:masutaka since:2015-12-23 until:2015-12-23
22 日と 23 日のツイートがよく分からない感じで混ざってしまう from:masutaka since:2015-12-22 until:2015-12-23
 日付を指定してツイートを検索する 調べていたところ、こちらの記事を見つけました。
ツイッターの時間指定検索方法 - さまざまなめりっと こちらの記事にあるように since と until 演算子には時間とタイムゾー
ンを指定することが出来ました。
これを利用すれば任意の日のツイートを絞り込むことが出来るようです。
 2015-12-23 のマスタカのツイートを絞り込む from:masutaka since:2015-12-23_00:00:00_JST until:2015-12-23_23:59:59_JST
 ややクセのある仕様でした。
 タイムゾーンを指定しないと、UTC で検索される タイムゾーンを指定する場合、日付と時間の指定も必要 日付とタイムゾーンの組み合わせ（例: since:2015-12-23_JST）ではうまく検索されない  微調整 普通に検索すると、『トップ』に飛んでしまうため『ライブ』へのリンク
になるように URL パラメータ &ldquo;f=tweets&rdquo; を付けています。
最終的なリンクはこちらになりました。
 2015-12-23 当日のツイート https://twitter.com/search?f=tweets&vertical=default&q=from%3Amasutaka%20since%3A2015-12-23_00%3A00%3A00_JST%20until%3A2015-12-23_23%3A59%3A59_JST&src=typd  おまけ: 公式の検索ウィジェット ウィジェットの設定 - twitter.]]></description>
        </item>
        <item>
            <title><![CDATA[iPhone から家電を操作できる IRKit が便利だった #rebuildfm]]></title>
            <link>https://masutaka.net/2015-12-19-1/</link>
            <guid>https://masutaka.net/2015-12-19-1/</guid>
            <pubDate>Sat, 19 Dec 2015 00:00:00 GMT</pubDate>
            <description><![CDATA[IRKit - Open Source WiFi Connected Infrared Remote Controller @miyagawa さんのタイムラインに何度も出ていたので、RubyKaigi [2015-12-13-1] 中に衝動的に買ってしまいました。
しかし、Episode 120 を聞く前に買ったので、クーポンコードをスルーしてしまったという&hellip;。Episode 30 でも触れられたみたいですね。
設定は簡単で 10 分くらいで使えるようになりました。カーテンレールの上に設置しました。この位置だと反応が良いです。
LED が眩しすぎて気になる方は、こちらの記事をどうぞ。この位置だと、それほど気になりませんでした。
エアコンと扇風機を完全自動でON/OFF 暑くて寝れない寝室とはおさらばだ！｜Act as Professional 今のところ、まだ軽い使い方です。
 公式 iOS アプリ IRKit シンプルリモコン を使用 照明はボタンを全部登録（全灯, 省エネ, 常夜灯, 消灯） エアコンは ON/OFF のみ テレビは ON/OFF, 音量UP/DOWN, NHK のみ  loading...
   if (localStorage.getItem("pref-theme") === "light") { const elements = document.getElementsByClassName('twitter-tweet'); for (let i = 0; i  寝る時に照明のリモコンがなくて、布団から這い出す事態がなくなりました。起きたら、寝たまま照明とエアコンとテレビを付けています。この辺は連動させたい。
公式サイト を見ると、iOS SDK が公開されており、IRKit 自体にも HTTP サーバが立っているのでプログラマルな使い方ができるようです。]]></description>
        </item>
        <item>
            <title><![CDATA[引っ越しで買って良かったものランキング]]></title>
            <link>https://masutaka.net/2015-12-15-1/</link>
            <guid>https://masutaka.net/2015-12-15-1/</guid>
            <pubDate>Tue, 15 Dec 2015 00:00:00 GMT</pubDate>
            <description><![CDATA[捨てるものあれば買うものもまたあり。ということで、前回 [2015-12-14-1] の続きです。
今回の引っ越しで買って良かったものをランキング形式でお届けします。
立て続けに Amazon を使うことが確実だったので、遅ればせながらついにAmazon のプライム会員になりました。Amazon ばかり使って、他の EC サイトに申し訳ないです。
引っ越して宅配ボックスも手に入れたので、いろいろ最強です。
第９位：すのこ型除湿マット これは失敗。このサイト で知って購入しましたが、朝起きてマットの下を確認するとフローリングが濡れています。使う意味を感じられません。￥6,500 はもったいなかった。
Amazon のレビューも見ましたが、なぜか「すごく良いはず」という先入観を消せないまま買ってしまいました。
唯一良いことは「すのこ」と比べて場所を取らないことでしょうか&hellip;。
カビの生えづらさでは「すのこ」の方が優れていますが、フローリングを傷つけますし、場所をとるのですよね。
 第８位：カーテンのふさかけ 賃貸マンションなので、跡が残らないカーテンのふさかけを探していました。￥253 と安かった。
こういうの、引っ越し直後に近所で探すと意外に見つけられないのですよね。
 第７位：突っ張り棒 洗濯機の上の空間を有効利用するために買いました。なかなか力強い作りです。￥847 はお買い得すぎました。
 第６位：Apple USB Super Drive [2015-12-14-1] で手放した存在感のある外付けDVDドライブ が場所を取りすぎるので、ついに購入しました。
他にもスリムなドライブはありましたが、考えるのが面倒になりつい&hellip;。
amazon.co.jp より apple.jp のほうが少しお得でした（前者￥10,850、後者￥10,260）。それにしてもお高い。
 第５位：マットレス 引っ越してしばらくマットレスなしの布団だけで寝ていたところ、体中が痛い！マッサージに行くハメになりました&hellip;。
購入してすぐに痛みが解消。厚みは 4cm ほどしかありませんが、全然違います。もしかして９位のすのこ型除湿マットとの相乗効果？お値段も￥3,072 とお手頃でした。
 第４位：羽根布団７点セット 布団を新調したかったので、全部入りでお値段も手頃で評判も良さそうなこちらに。適当な枕だと思ったら、なぜか私に合って毎日ぐっすりです。
掛け布団もこんなに薄くて大丈夫かな？と思いましたが、今のところ毛布なしで眠れています。当時のお値段は ￥9,800 でした。ただネイビーは色が濃すぎたかも。
 第３位：チェスト [2015-12-14-1] で手放した押入れチェスト の後釜です。
今の部屋のクローゼットには入れられないので、外に出しても貧相でないデザインかつ、次の引っ越しで手放しても惜しくないお値段のものを購入しました（￥5,445）。
 第２位：IRKit スマフォやタブレットから、リモコン付きの家電を操作できるアイテムです。￥7,700 なり。
前はルームシェアしていた関係で、自分の部屋にはエアコンのリモコンしかありませんでした。今はテレビと照明のリモコンもあるので、購入したところ大正解。
枕元には必ず iPhone があるので、寝ようとして照明のリモコンがなくてまた起きることがなくなりました。目覚ましが鳴ったら、照明とエアコンとテレビを全部連動して付けたいです。
カーテンレールの上に設置した様子。この位置だと眩しいと悪評の LED の光は気になりませんでした。]]></description>
        </item>
        <item>
            <title><![CDATA[引っ越しで捨てたものと譲ったもの]]></title>
            <link>https://masutaka.net/2015-12-14-1/</link>
            <guid>https://masutaka.net/2015-12-14-1/</guid>
            <pubDate>Mon, 14 Dec 2015 00:00:00 GMT</pubDate>
            <description><![CDATA[[2015-11-30-1] の記事でお気づきかもしれませんが(!)、
先月 20 日に 3 年 4 ヶ月住んだ世田谷区から荒川区に引っ越しました。
引っ越しはかれこれ 7 回目です。
この記事は引越し前後に捨てた粗大ごみと、ジモティー で譲ったもの
リストです。誰得なんでしょうか？
粗大ゴミとして捨てたもの  灯油用ポリタンク x 2 扇風機 ダイニングテーブル 二人掛けソファー 応接用一人掛け椅子 PC 用椅子 x 2 丸椅子 掛け布団 x 2 敷き布団 x 3 マットレス 自転車 照明器具 x 3 エアコン  捨てたものがやたら多いのは、前職のラングリッチ のオフィスが明石にあっ
た頃の家具が一部引き継がれたのと、@tomoyaton とルームシェアしてい
たからです。
ここに写っているテーブルや椅子です。
生ハムの原木がある、ギークハウス神戸（明石）はじめました。 - 日々、とんは語る。 エアコンは壊れて暖房しか付かなくなったので、取り外しと引き取りを青
雲電機にお願いしました。いいおっちゃんが来てくれました。
穴のパテ埋めも込みで ￥3,024（税込み） でした。めっちゃ安い！
引っ越し屋とかに頼むと ￥10,000 くらいすると思います。
そんな青雲電機のサイトがこちら。
だまされてはいけない！エアコン工事の取外し取付け代金 タイトルに会社名を入れるとか、もう少し怪しくないサイトにしたほうが
よいのでは&hellip;？もったいない。
譲ったもの  三菱電機 22W型 ノングレア液晶 [無料]  押入れチェスト（74cm x 71cm x 59cm）  スリッパラック  木製の丸椅子  直方体のクッション（２個）  ふとん乾燥機（シングルサイズ）  ダブルサイズの布団用すのこ  照明器具（カサのみ、直径55cm）  照明器具（直径40cm）  都市ガス用ガステーブル  高さのあるハンガーラック  木製のスタンドミラー  存在感のある外付けDVDドライブ  見やすい掛け時計  SHARP ふろ水ポンプセット（ホースの長さ4ｍ） 210 396 0102   [2014-05-31-1] でも書いたジモティが大活躍でした。早ければ 30 分く]]></description>
        </item>
        <item>
            <title><![CDATA[RubyKaigi 2015 に行ってきた #rubykaigi]]></title>
            <link>https://masutaka.net/2015-12-13-1/</link>
            <guid>https://masutaka.net/2015-12-13-1/</guid>
            <pubDate>Sun, 13 Dec 2015 00:00:00 GMT</pubDate>
            <description><![CDATA[http://rubykaigi.org/2015 12/11（金）から始まった RubyKaigi 2015 に 3 日間参加してきました。
1 日目は自宅を出た時は小雨で、東銀座駅に着いたら暴風雨、
会場に着いたら快晴と、汐留とはなんとハードな場所かと疲労困憊
汗ダラダラで始まりました。
以下、自分用のメモです。
Keynote by @yukihiro_matz  ※ TODO: 資料やビデオが公開されたらここに貼る
 Did-you-mean 機能  間違えたら提示してくれる機能   Enumerable#grep_v Hash#dig は便利そう frozen-string-literal: true とコメントを書くと、文字列が freeze される &amp;. Lonely operator  &amp;&amp; の圧縮だそう。なるほど今理解した。   https://github.com/matz/streem の話  foo = nil foo &amp;&amp; foo.size =&gt; nil foo = &#34;aaa&#34; foo &amp;&amp; foo.size =&gt; 3 # 上記を &amp;. で書き換えると foo = nil foo&amp;.size =&gt; nil foo = &#34;aaa&#34; foo&amp;.]]></description>
        </item>
        <item>
            <title><![CDATA[ドラ娘論]]></title>
            <link>https://blog.tmd45.jp/entry/2015/12/13/000000</link>
            <guid>https://blog.tmd45.jp/entry/2015/12/13/000000</guid>
            <pubDate>Sat, 12 Dec 2015 15:00:00 GMT</pubDate>
            <description><![CDATA[<p>この記事は <a href="http://www.adventar.org/calendars/1248">Kosen Advent Calendar 2015 - Adventar</a> の 13 日目の記事です。昨日のカレンダーは空白だったようですが、前回の記事は <a href="http://www.adventar.org/users/7773">Kosuke Ohmura</a> さんの『<a href="http://bnpb.hatenablog.com/entry/2015/12/12/001714">高専をだらだら堕落しながら６年かけて卒業した話</a>』でした。</p>

<p>ボン・ソワール みなさま、@tmd45 です。今日は 4, 5年前に数回ドラ娘を勤めただけ<a href="#f-008eb7d8" name="fn-008eb7d8" title="参考記事:「ドラ娘」て知ってる？ | 非モテタイムズ http://himo2.jp/4338000 まだこの記事残ってる(^q^) 山本ユウカ先生その節は記事ありがとうございましたフヒヒ">*1</a>で、いまは「娘」ですらなくなったアラサー独女の私が思う「ドラ娘」について書き散らしたいと思います。いつか LT か何かで話そうと思って数年経ってしまったのでこの辺で消費しておこうかという感じです<a href="#f-84b535d7" name="fn-84b535d7" title="一部界隈で「ドラ娘」の存在がハラスメント問題として取り沙汰されているようですが、本記事では「LT（ライトニングトーク）の制限時間が来たら大きな音を出してトークを終了させる係のひと」という意味で伝わりやすい名詞として「ドラ娘」と表記しているとご認識ください。「ドラ娘」という存在が気に入らない場合はそっとブラウザを閉じるか、適宜お好きな表現に脳内変換してお読みください。っていうかアドベントカレンダーにそんなヘビーな世論持ちだされても困るでござるよニンニン。">*2</a>。</p>

<h3>銅鑼は権力</h3>

<p>イベントが始まる前に事前に依頼される場合もあるだろう、会場でボァー…っと発表と聞いてたら突然スカウトされることもあるだろう。やりたいと思ってたんだ！と意気込んで銅鑼を握ることもあれば、なんで自分は発表もしないのに壇上に上がらされてるんだ…と思うこともあるだろう。</p>

<p>LT で一番重要なルールは、とにかくどんなにイイ話でも、どんなに本人がまだ話したくても、制限時間がきたらその発表を中止しなければならないという部分である。昨今は少し余裕を持って終えたり、時間ピッタリで綺麗に終わる発表がやたら増えてきているような気がする。それはそれで素晴らしいかもしれないが、「なんか最後までよくわからんかったがガンバったな…っ」とか「言いたいことが／聞きたいことがいっぱいあるのに無情の銅鑼…！」という空気が LT の醍醐味だと、私は思う。</p>

<p>その無情の銅鑼を鳴らすのは他ならぬドラ娘である。</p>

<p>発表者はどんな権力や身分を持っていようと、銅鑼が鳴ったら発表を切り上げなければならない。たとえそれが先輩であろうと、校長であろうと、著名な講演者であろうと、LTの銅鑼の音の前で彼らは等しく平等であり、（タイマーと）銅鑼の音が権力を持つのだ。</p>

<h3>発表者の息の根を止める</h3>

<p>気の抜けた銅鑼の音では、発表者や聴衆の "情熱" は止められない。そんな屁のような銅鑼より、この発表をやりきりたい！面白い話を聞きたい！…そんな彼らの思いが勝ってしまう。</p>

<p>しかし LT はテンポが重要である。それはイベントのタイムスケジュールにも影響するし、次に次にと控えている発表者たちのリズムを崩し、結果的になぁなぁな雰囲気の原因となってしまう。</p>

<p>ドラ娘は、発表を中断するために発表者の息の根を止める、次の発表に向けるために聴衆の息の根を止める、この一打で仕留める…！そんな気持ちで銅鑼を叩くのだ。</p>

<h3>ドラ娘は楽しい</h3>

<p>権力と殺意を秘めつつ、LT はやはりその発表を楽しむ場だ。ドラ娘として壇上に上げられて緊張するだろうが、タイマーを見るのに気を取られすぎて全く発表を聞いていなかった…ということではやはり勿体無い。</p>

<p>タイマーを忘れて本末転倒になるのはまずいが、発表自体を楽しむことはドラ娘にも許されることだ。ラスト30秒くらいから少し気を張り、10秒前になったら静かに構えに入り、時間になったら殺意を込めて打ち鳴らせばよい。</p>

<p>また、壇上は発表者の（だいたいは）一番近くで発表を聞ける特等席である。発表を存分に楽しんで聞こう。</p>

<h3>おわりに</h3>

<p>以上が、ドラ娘を経験し、他のドラ娘たちを見てきた私の「ドラ娘論」である。今後、銅鑼を握る諸君に何か伝わるものがあれば嬉しい。</p>

<p>…なんてね〜〜<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%A6%A5%A3%A5%EB%A5%AD%A5%F3%A5%BD%A5%F3">ウィルキンソン</a>の<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%B8%A5%F3%A5%B8%A5%E3%A1%BC%A5%A8%A1%BC%A5%EB">ジンジャーエール</a>ウォッカとさけるチーズうめぇ〜〜〜。うへへぇ。</p>

<p>というわけで明日は <a href="http://www.adventar.org/users/4958">myu_mx</a> さんが<a href="http://myumx.blog135.fc2.com/blog-entry-172.html">就職して感じたことというテーマで書いてくれる</a>そうです。</p>
<div class="footnote">
<p class="footnote"><a href="#fn-008eb7d8" name="f-008eb7d8" class="footnote-number">*1</a><span class="footnote-delimiter">:</span><span class="footnote-text">参考記事:「ドラ娘」て知ってる？ | <a class="keyword" href="http://d.hatena.ne.jp/keyword/%C8%F3%A5%E2%A5%C6">非モテ</a>タイムズ <a href="http://himo2.jp/4338000">http://himo2.jp/4338000</a> まだこの記事残ってる(^q^) 山本ユウカ先生その節は記事ありがとうございましたフヒヒ</span></p>
<p class="footnote"><a href="#fn-84b535d7" name="f-84b535d7" class="footnote-number">*2</a><span class="footnote-delimiter">:</span><span class="footnote-text">一部界隈で「ドラ娘」の存在がハラスメント問題として取り沙汰されているようですが、本記事では「LT（ライトニングトーク）の制限時間が来たら大きな音を出してトークを終了させる係のひと」という意味で伝わりやすい名詞として「ドラ娘」と表記しているとご認識ください。「ドラ娘」という存在が気に入らない場合はそっとブラウザを閉じるか、適宜お好きな表現に脳内変換してお読みください。っていうか<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%A2%A5%C9%A5%D9%A5%F3%A5%C8%A5%AB%A5%EC%A5%F3%A5%C0%A1%BC">アドベントカレンダー</a>にそんなヘビーな世論持ちだされても困るでござるよニンニン。</span></p>
</div>]]></description>
            <enclosure url="https://cdn.user.blog.st-hatena.com/default_entry_og_image/4268819/1648865811614292" length="0" type="image//default_entry_og_image/4268819/1648865811614292"/>
        </item>
        <item>
            <title><![CDATA[『良い不動産屋を見つけるメソッド』で良い物件に引っ越せた]]></title>
            <link>https://masutaka.net/2015-11-30-1/</link>
            <guid>https://masutaka.net/2015-11-30-1/</guid>
            <pubDate>Mon, 30 Nov 2015 00:00:00 GMT</pubDate>
            <description><![CDATA[効率的な賃貸物件の探し方｜nanapi [ナナピ] └良い物件ではなく良い不動産屋を探した - $shibayu36-&gt;blog; 今まで足掛け 4 年ほどルームシェアしてましたが、ちょうど引っ越しの
タイミングが合ったのでこちらを実践してみました。結果として大正解。
賃貸は 7 軒目ですけど、一番当たりでした。
nanapi の記事に沿うような形で書いていきます。
STEP1：WEB で家賃の相場を知る 私は HOME&rsquo;S とかでダラダラ探しました。
探し始めるまでがハードルが高くて、だいぶ時間がかかってしまいました。
STEP2：自分の希望条件をまとめる これは問題なし。なぜなら過去に書いた引っ越しの希望条件が、Dropbox
に保存してあるから。← A 型奴ー
少々バージョンアップするだけで済みました。ちなみにこんなのです。改
めて見ると、必須はほぼ叶えられてますね。（でもこのくらいの必須は普
通だよな&hellip;。）
◆必須
 家賃 X 万円まで 7 畳以上 居間・キッチン別 風呂・トイレ別 2 口ガスコンロ 室内洗濯機置き場 駅まで 5 分以内 コンビニやスーパーが近い まわりが静か 布団が干せる 家賃は銀行振り込み インターネットが快適 収納が狭くない  ◆あったらうれしい
 2 階以上 保証人不要 宅配ボックス 雨戸 居間にガスコンセントまたは床暖房  ガスファンヒーター（都市ガス、12or13A）   ベランダ エアコン 浴室乾燥機 独立洗面台 インターホン 風呂の追い炊き機能がある ゴミをいつでも（もしくは前日の夜に）出せる 大家が近くに住んでいない 服をある程度掛けられるクローゼット  ◆注意すべき点]]></description>
        </item>
        <item>
            <title><![CDATA[同型類字集 明朝体]]></title>
            <link>https://shiromoji.hatenablog.jp/entry/2015/11/28/235613</link>
            <guid>https://shiromoji.hatenablog.jp/entry/2015/11/28/235613</guid>
            <pubDate>Sat, 28 Nov 2015 14:56:13 GMT</pubDate>
            <description><![CDATA[<p>前回の記事「<a href="http://shiromoji.hatenablog.jp/entry/2015/11/16/003831">同型類字集 等線体</a>」のつづきです。</p>

<p>『同型類字集 等線体』の方は<a class="keyword" href="http://d.hatena.ne.jp/keyword/%BE%BC%CF%C217%C7%AF">昭和17年</a>（1942年）12月発行でしたが、こちらの『同型類字集 <a class="keyword" href="http://d.hatena.ne.jp/keyword/%CC%C0%C4%AB%C2%CE">明朝体</a>』は3ヶ月後の<a class="keyword" href="http://d.hatena.ne.jp/keyword/%BE%BC%CF%C218%C7%AF">昭和18年</a>（1943年）3月発行となっています。等線体が<a class="keyword" href="http://d.hatena.ne.jp/keyword/%CC%C0%C4%AB%C2%CE">明朝体</a>になっている以外は、まったく同じ体裁・内容のようです。</p>

<p><a data-flickr-embed="true"  href="https://www.flickr.com/photos/95996414@N02/albums/72157658898415004" title="同型類字集 明朝体"><img src="https://farm6.staticflickr.com/5811/22412698983_585e1fe075_c.jpg" width="800" height="534" alt="同型類字集 明朝体"></a><script async src="//embedr.flickr.com/assets/client-code.js" charset="utf-8"></script></p>

<p>上の画像をクリックすると、<a class="keyword" href="http://d.hatena.ne.jp/keyword/Flickr">Flickr</a> でファイルが閲覧できます。例によって PDF にまとめたものも用意しましたので、必要な方は下のページからどうぞ。</p>

<ul>
<li><a href="http://shiromoji.net/pd/" title="資料置き場 - しろもじ作業室">資料置き場 - しろもじ作業室</a></li>
</ul>


<p>例示されている<a class="keyword" href="http://d.hatena.ne.jp/keyword/%CC%C0%C4%AB%C2%CE">明朝体</a>を見てみると、やや直線的で整理された感じの雰囲気になっています。字体の省略や簡略化も見られますが、この処理は等線体のものと完全に一致しているようで、字体の整理・統一への意識が読み取れます。</p>

<p><a data-flickr-embed="true"  href="https://www.flickr.com/photos/95996414@N02/22412698983/in/album-72157658898415004/" title="同型類字集_明朝体_02"><img src="https://farm6.staticflickr.com/5811/22412698983_585e1fe075_c.jpg" width="800" height="534" alt="同型類字集_明朝体_02"></a><script async src="//embedr.flickr.com/assets/client-code.js" charset="utf-8"></script></p>

<p>他の<a class="keyword" href="http://d.hatena.ne.jp/keyword/%CC%C0%C4%AB%C2%CE">明朝体</a>と比べて特徴的なのは、撥ねの処理でしょうか。上の画像でわかるように、「力」や「巾」の撥ねが省略され、終筆を止めています。その一方で、「刂」や「寸」の撥ねはそのままの形で残っており、ちょっと不統一な感じもします。この撥ねる・撥ねないの間に、なにか法則性はあるんでしょうか…？　わかる方いましたらぜひ教えてください。</p>

<p><a data-flickr-embed="true"  href="https://www.flickr.com/photos/95996414@N02/23020355232/in/album-72157658898415004/" title="同型類字集_明朝体_01"><img src="https://farm1.staticflickr.com/676/23020355232_b1c6fe656c_c.jpg" width="800" height="534" alt="同型類字集_明朝体_01"></a><script async src="//embedr.flickr.com/assets/client-code.js" charset="utf-8"></script></p>

<p>さて、上の画像の左ページは表紙裏にあたる箇所ですが、ここにはこんな注意書きが書かれています。</p>

<blockquote><p>一、一般字典ノ例ニ拠ルコトナク結体又ハ点画ヲ同シウスルモノニ分類編纂シ以テ練習ニ便ナラシム</p>

<p>二、本所載以外ノ文字ヲ必要トスル場合ハ末尾ニ添付シアル扁旁部首ニヨリ所要ノ扁旁冠脚等ニ供シ得ル文字ヲ選出シ適宜組成スルモノトス<br>
煩字及略字ハ別ニ示ス</p>

<p>備考<br>
本類字集ノ字画ハ普通大ノ註記ニ適用スル為メ定メタルモノニシテ字高大ナル註記ニ在リテハ字典ヲ参照シ点画ヲ適宜粉飾スルコトヲ得</p></blockquote>

<p>といっても、個人的に気になるのはその内容ではなく、印刷されている文字の方です。地図や海図の製作には早くから写植が導入されていたようですが、このページの文字も写植で打たれており<a href="#f-2e730007" name="fn-2e730007" title="巻末の「扁旁部首」もそうです。">*1</a>、写真植字機研究所（のちの写研）の<a class="keyword" href="http://d.hatena.ne.jp/keyword/%CC%C0%C4%AB%C2%CE">明朝体</a>のように見えます。しかしよく見てみると、2行目の「習」や3行目の「場」など、普通の<a class="keyword" href="http://d.hatena.ne.jp/keyword/%CC%C0%C4%AB%C2%CE">明朝体</a>とはちょっと変わっていませんか…？</p>

<p><span itemscope itemtype="http://schema.org/Photograph"><img src="https://cdn-ak.f.st-hatena.com/images/fotolife/m/mashabow/20151206/20151206142130.jpg" alt="f:id:mashabow:20151206142130j:plain" title="f:id:mashabow:20151206142130j:plain" class="hatena-fotolife" itemprop="image"></span></p>

<p>どうもこれは、この『同型類字集 <a class="keyword" href="http://d.hatena.ne.jp/keyword/%CC%C0%C4%AB%C2%CE">明朝体</a>』で示されているとおりに、写植の<a class="keyword" href="http://d.hatena.ne.jp/keyword/%CC%C0%C4%AB%C2%CE">明朝体</a>を修整しているようなのです。さらによく見てみると、1行目の「據」や2行目「編」などの撥ねも、しっかり取り除かれていることがわかります。写植で普通に印字したものを器用に修整したんでしょうか。それとも独自仕様の<a class="keyword" href="http://d.hatena.ne.jp/keyword/%CC%C0%C4%AB%C2%CE">明朝体</a>の文字盤なんてものがあったんでしょうか。いずれにせよ、なかなかのこだわりです。</p>

<p>この『同型類字集』と関係あるのかないのか、『地図用文字』なる本があると知ったので、こちらも気になる今日このごろです。</p>

<blockquote class="twitter-tweet" lang="ja"><p lang="ja" dir="ltr">機械彫刻標準書体がまたプチ盛り上がりをしてたようなので、たしか昔見本帳買ったような……と思ったら全然違った。『地図用文字』だった。地図に使われる書体は「等線体」といって均等な太さの線で書かれた文字ですが郡名には隷体を使うみたい <a href="https://t.co/kAH0y4Jhb9">pic.twitter.com/kAH0y4Jhb9</a></p>&mdash; <a class="keyword" href="http://d.hatena.ne.jp/keyword/%A4%D0%A4%EB%A4%DC%A4%E9">ばるぼら</a> (@bxjp) <a href="https://twitter.com/bxjp/status/669209443838529536">2015, 11月 24</a></blockquote>


<script async src="//platform.twitter.com/widgets.js" charset="utf-8"></script>

<div class="footnote">
<p class="footnote"><a href="#fn-2e730007" name="f-2e730007" class="footnote-number">*1</a><span class="footnote-delimiter">:</span><span class="footnote-text">巻末の「扁旁部首」もそうです。</span></p>
</div>]]></description>
            <enclosure url="https://farm6.staticflickr.com/5811/22412698983_585e1fe075_c.jpg" length="0" type="image/jpg"/>
        </item>
        <item>
            <title><![CDATA[同型類字集 等線体]]></title>
            <link>https://shiromoji.hatenablog.jp/entry/2015/11/16/003831</link>
            <guid>https://shiromoji.hatenablog.jp/entry/2015/11/16/003831</guid>
            <pubDate>Sun, 15 Nov 2015 15:38:31 GMT</pubDate>
            <description><![CDATA[<p>何ヶ月か前に、『同型類字集 等線体』『同型類字集 <a class="keyword" href="http://d.hatena.ne.jp/keyword/%CC%C0%C4%AB%C2%CE">明朝体</a>』という小冊子を入手しました。
<a href="https://ja.wikipedia.org/wiki/%E9%99%B8%E5%9C%B0%E6%B8%AC%E9%87%8F%E9%83%A8" title="陸地測量部 - Wikipedia">陸地測量部</a>が戦時中に作ったもので、地図に書き入れる文字のレタリング見本・字体見本のようです。</p>

<p>冊子を綴じてあったホチキスが錆びていたこともあり、せっかくなのでスキャンして公開してみることにしました。今日はまず、昭和17年（1942年）12月発行の『同型類字集 等線体』です。部屋にある家庭用<a class="keyword" href="http://d.hatena.ne.jp/keyword/%CA%A3%B9%E7%B5%A1">複合機</a>（ブラザー DCP-J940N）を使い、600 dpi のグレースケールでスキャンしました。</p>

<p><a data-flickr-embed="true"  href="https://www.flickr.com/photos/95996414@N02/albums/72157661240115675" title="同型類字集 等線体"><img src="https://farm6.staticflickr.com/5817/22412436603_240016723f_c.jpg" width="800" height="534" alt="同型類字集 等線体"></a><script async src="//embedr.flickr.com/assets/client-code.js" charset="utf-8"></script></p>

<p>上の画像をクリックすると、<a class="keyword" href="http://d.hatena.ne.jp/keyword/Flickr">Flickr</a> でファイルが閲覧できます。なお、入手時点で冊子末尾の数ページが欠落していたため、「扁旁部首」の6画の途中で終わっています。PDF にまとめたものも用意しましたので、下のページからダウンロードしてください。</p>

<ul>
<li><a href="http://shiromoji.net/pd/" title="資料置き場 - しろもじ作業室">資料置き場 - しろもじ作業室</a></li>
</ul>


<p>この等線体は見ての通り、ポキポキとした直線的な感じの書体になっています。フトコロも広く、払いがぐっと左右外側に向かっているのも特徴的です。昔のレタリング文字ではよく見ますが、そういえば現代のフォントにはこういうデザインあまりないですね。字体に関していえば、<a class="keyword" href="http://d.hatena.ne.jp/keyword/%BE%EF%CD%D1%B4%C1%BB%FA">常用漢字</a>ほどではありませんが、ちょこちょこと省略・簡略化がみられます。違いがさりげなさすぎて見落としそうなものも……。</p>

<p>次回は『同型類字集 <a class="keyword" href="http://d.hatena.ne.jp/keyword/%CC%C0%C4%AB%C2%CE">明朝体</a>』の予定です。（→ <a href="http://shiromoji.hatenablog.jp/entry/2015/11/28/235613">書きました</a>）</p>
]]></description>
            <enclosure url="https://farm6.staticflickr.com/5817/22412436603_240016723f_c.jpg" length="0" type="image/jpg"/>
        </item>
        <item>
            <title><![CDATA[OpenID Summit Tokyo 2015 に行ってきた #openid_tokyo]]></title>
            <link>https://masutaka.net/2015-11-13-1/</link>
            <guid>https://masutaka.net/2015-11-13-1/</guid>
            <pubDate>Fri, 13 Nov 2015 00:00:00 GMT</pubDate>
            <description><![CDATA[OpenID Summit Tokyo 2015 一応、ID 業界の片隅に生息しているので行ってきました。会社から歩い
て 10 分くらいだったし。
最新の動向をキャッチアップ出来て有意義なイベントでした。気になるセッ
ションだけ聞こうと思ってましたが、結局ほぼ最後まで聞いてました。
同時通訳は助かりました。運営の皆さん、ありがとうございました。
※ メモが少ないセッションは、疲れていたか、メモを取るリズムが掴め
なかったからです。
アイデンティティ・オーバービュー 崎村 夏彦 — OpenID Foundation 理事長
楠 正憲 — OpenIDファウンデーション・ジャパン 代表理事
※ TODO: 資料が公開されたらここに貼る
前回は 2011 年とのこと。毎年やっているのかと思いました。
IoT時代の認証技術 増井俊之 — 慶應義塾大学 環境情報学部 教授  資料置き場: http://gyump.com/OpenID/ 初めて増井さんのセッションを聞いたかも。さすがの増井節。私が増井さ
んを認識したのはもちろん dmacro.el や keisen.el が最初。keisen.el
は今もたまに使います。てか、Emacs-24.5 でも動くのはすごい！
 個人の秘密情報は認証に使えるはず Suica履歴、ログイン履歴、etc トイレに何回行ったかとかw  Clouds + ID ~ クラウドビジネスにおけるIDの現在と今後 ~ 藤井 彰人 — KDDI株式会社 ソリューション事業企画本部クラウドサービス企画部 部長 ※ TODO: 資料が公開されたらここに貼る]]></description>
        </item>
        <item>
            <title><![CDATA[コマンドラインで URL encode するやつ]]></title>
            <link>https://masutaka.net/2015-10-21-1/</link>
            <guid>https://masutaka.net/2015-10-21-1/</guid>
            <pubDate>Wed, 21 Oct 2015 00:00:00 GMT</pubDate>
            <description><![CDATA[[2015-07-28-2] のコマンドライン版。
function urlencode() { echo $(php -r &#34;echo rawurlencode(&#39;$1&#39;);&#34;) } function urldecode() { echo $(php -r &#34;echo rawurldecode(&#39;$1&#39;);&#34;) } urlencode &#34;http://masutaka.net/&#34; =&gt; http%3A%2F%2Fmasutaka.net%2F urldecode &#34;http%3A%2F%2Fmasutaka.net%2F&#34; =&gt; http://masutaka.net/ PHP 便利！]]></description>
        </item>
        <item>
            <title><![CDATA[継続的 bundle update サービス deppbot を使ってみた]]></title>
            <link>https://masutaka.net/2015-10-04-1/</link>
            <guid>https://masutaka.net/2015-10-04-1/</guid>
            <pubDate>Sun, 04 Oct 2015 00:00:00 GMT</pubDate>
            <description><![CDATA[昨日話題になっていた https://www.deppbot.com と、
拙作のツール ci-build-trigger [2015-07-28-1] を比較してみました。
タイミングよく、Gem のアップデートがあってよかったです。
私のツールが作った Pull request https://github.com/masutaka/masutaka-metrics/pull/19 deppbot が作った Pull request https://github.com/masutaka/masutaka-metrics/pull/20 良くなったこと  アップデートされた Gem の情報が Pull request の description にまとまってすっきりした compare_linker では取得できないことがあった、リポジトリや Diff へのリンクが完璧に取得できている CHANGELOG へのリンクもある  悪くなったこと  機能面では特にない デフォルトで Private リポジトリにアクセスされるのが少し心配  仕様など ▼必要な GitHub のパーミッション
 Access user email addresses (read-only) Access private repositories  FAQ のページ で
However, we will ONLY access a repository after you Subscribe it on your Dashboard.]]></description>
        </item>
        <item>
            <title><![CDATA[結局 package.el に戻ってきた]]></title>
            <link>https://masutaka.net/2015-10-03-1/</link>
            <guid>https://masutaka.net/2015-10-03-1/</guid>
            <pubDate>Sat, 03 Oct 2015 00:00:00 GMT</pubDate>
            <description><![CDATA[[2014-11-03-1] に package.el から Cask に乗り換え、
[2015-06-17-1] に Cask から El-Get に乗り換えましたが、
結局 package.el に戻ってきました。
理由は M-x el-get-update(-all) の更新がうまくいかず、エラーにな
り、~/.emacs.d/el-get や ~/.emacs.d/elpa を全削除して入れなおすこ
とがよくあったからです。最近は面倒になりアップデートもしなくなりま
した&hellip;。
package.el でインストールするパッケージも init.el に書いてしまえば、
何をインストールしたか分かります。なにより Emacs デフォルトの機能
なので安心感があります（私はライトなデフォルト厨）。
バージョンロック出来ない問題は、アップデート前に ~/.emacs.d/elpa
をバックアップすれば良いでしょう&hellip;。Time Machine もありますし&hellip;。
変更前と後の init.el はこちら。
◆変更前
;; See http://d.hatena.ne.jp/tarao/20150221/1424518030  (add-to-list &#39;load-path (locate-user-emacs-file &#34;el-get/el-get&#34;))  (unless (require &#39;el-get nil &#39;noerror)  (with-current-buffer  (url-retrieve-synchronously  &#34;https://raw.githubusercontent.com/dimitri/el-get/master/el-get-install.el&#34;)  (goto-char (point-max))  (eval-print-last-sexp)))  ;; lock the pacakge versions (el-get-bundle tarao/el-get-lock) (el-get-lock)  (el-get-bundle ajtulloch/mkdown.]]></description>
        </item>
        <item>
            <title><![CDATA[iPhone 6s 64GB を購入して、au のプランも変更した]]></title>
            <link>https://masutaka.net/2015-09-29-1/</link>
            <guid>https://masutaka.net/2015-09-29-1/</guid>
            <pubDate>Tue, 29 Sep 2015 00:00:00 GMT</pubDate>
            <description><![CDATA[[2013-10-14-1] に iPhone 5s 64GB を購入してもうすぐ 2 年。少しフラ
イングですが、iPhone 6s 64GB を購入しました。
使用感 指紋認証がとにかく速く正確です。ミスするのが難しいほど。センサーの
向上でしょうか？それとも CPU が A7 から A9 に上がったから？
目玉の 3D Touch はデフォルトのアプリのいくつかと、Twitter アプリで
使えました。Live Photos も面白いですね。
画面も大きくなりました。このサイズまでなら大丈夫そうです。
細かいところでは、パスコードが 4 文字から 6 文字に増えてました。ハー
ドと関係があるんだ&hellip;？
ケースは付けずに Sinji Pouch Basic 2 に下記の 2 枚を入れて使ってます。
 Pasmo（定期） エラー防止シート   See also iPhoneにカードを入れるポケットが増える「Sinji Pouch Basic 2」を購入｜Act as Professional プランを変更 「LTE プラン（￥1,008） + LTE フラット(7GB)（￥6,156） = ￥7,164」を
「電話カケ放題プランS（￥1,836） + データ定額5(5GB)（￥5,400） = ￥7,236」に]]></description>
        </item>
        <item>
            <title><![CDATA[Swift 2.0 で自分のクラス名を表示する方法]]></title>
            <link>https://masutaka.net/2015-09-26-1/</link>
            <guid>https://masutaka.net/2015-09-26-1/</guid>
            <pubDate>Sat, 26 Sep 2015 00:00:00 GMT</pubDate>
            <description><![CDATA[The Swift Programming Language (Swift 2.1): A Swift Tour やってる
&#34;hoge&#34;.dynamicType =&gt; String.Type String(&#34;hoge&#34;.dynamicType) =&gt; &#34;String&#34; 1.dynamicType =&gt; Int.Type String(1.dynamicType) =&gt; &#34;Int&#34; class Hoge { } var hoge = Hoge() hoge.dynamicType =&gt; Hoge.type String(hoge.dynamicType) =&gt; &#34;Hoge&#34; 参考になったけど、Swift 2.0 では結構使えなくなっていた
Swiftで自分のクラス名を表示する方法 - Qiita ]]></description>
        </item>
        <item>
            <title><![CDATA[『るろうに剣心』の映画版が案外良かった]]></title>
            <link>https://masutaka.net/2015-09-23-2/</link>
            <guid>https://masutaka.net/2015-09-23-2/</guid>
            <pubDate>Wed, 23 Sep 2015 01:00:00 GMT</pubDate>
            <description><![CDATA[今さらですが、３本全部見ました。シナリオはアレですが、配役や全体の
雰囲気が良かったです。
緋村剣心 - 佐藤健
相楽左之助 - 青木崇高
四乃森蒼紫 - 伊勢谷友介
謎の男 - 福山雅治
斎藤一 - 江口洋介
志々雄真実 - 藤原竜也
龍馬伝と随分似てるなあと思ったら、監督が同じ大友啓史さん。ある意味
確信犯だったのですね。
佐藤さんは龍馬伝での人斬り以蔵からの転身(?)。個人的には江口さんが
ツボで、福山さんは意外性があって◯でした。
アクションも昔の映画に比べて、素晴らしく良かった。
   ]]></description>
        </item>
        <item>
            <title><![CDATA[「この記事に言及しているこのブログ内の記事」一覧を表示するようにしました]]></title>
            <link>https://masutaka.net/2015-09-23-1/</link>
            <guid>https://masutaka.net/2015-09-23-1/</guid>
            <pubDate>Wed, 23 Sep 2015 00:00:00 GMT</pubDate>
            <description><![CDATA[こちらのパクリです。
「この記事に言及しているこのブログ内の記事」一覧を表示するようにしました - たつをの ChangeLog 修正前
修正後
ずっとやろうとしていて、今日やっとやる気になりました。ﾊﾟｰﾙﾂﾗｲﾃﾞｽ
chalow スクリプトがまた秘伝のタレ化してしまった&hellip;。]]></description>
        </item>
        <item>
            <title><![CDATA[『現役プロダクトマネージャーが語る、日本企業におけるプロダクトマネージャーの課題と今後の展望 ～プロダクトオーナーシップ勉強会～』に参加した #postudy]]></title>
            <link>https://masutaka.net/2015-09-06-1/</link>
            <guid>https://masutaka.net/2015-09-06-1/</guid>
            <pubDate>Sun, 06 Sep 2015 00:00:00 GMT</pubDate>
            <description><![CDATA[[ITビジネスセミナー] 現役プロダクトマネージャーが語る、日本企業におけるプロダクトマネージャーの課題と今後の展望 - POStudy ～プロダクトオーナーシップ勉強会～ 最近よく話題になる、プロダクトマネージャーについて集中して学習する
良い機会と思い、行って来ました。
関さん始め、運営された皆さん、ありがとうございました。期待通りの勉
強会でした。
以下、気になった点の箇条書きです。普段あまり行かない類の勉強会なの
で、量多めです。
1. 【基調講演】プロダクトマネージャーとは  関 満徳氏 POStudy ～プロダクトオーナーシップ勉強会～ 主宰
 プロダクト全体に責任をもっている プロジェクトマネージャーとプロダクトマネージャーの責務は PMBOK に定義されている  プロジェクトマネージャーは 10 個 プロダクトマネージャーは 2 個のみ  プロダクトマネジメント 顧客（市場）マネジメント     起業家とプロダクトマネージャーの違い  資金調達が必要ない それ以外はだいたい同じ   必要な 7 つのスキルがある 執行役員以上が担う もしくは執行役員以上から期間限定で任命 ラピッドプロトタイピング  プロトタイプを作ったら、関係者ではなく実際のユーザでテスト   マネジメントとリーダーは違うので、同じ人だったら意識して帽子を脱ぎ変える必要がある  前者は製品を対象とし、チームを対象とする   &ldquo;目標を与えれば人は動く&rdquo;  2. 【キーセッション】個人と組織からもう一度考えるプロダクトマネジャー  新井 宏征氏 株式会社スタイリッシュ・アイデア 代表取締役
 『プロダクトマネジャーの教科書 』の訳者の方 「プロダクト」=「製品」ではない  プロダクトとは、顧客のニーズや欲求を満たすベネフィットの集合である まあそうだよね   ドライな目標（MBO）と想いのマネジメント（MBB）の両輪を回すことが組織にとって必要  MBO: Management By Objectives MBB: Management By Belief   &ldquo;組織が急速に成長しているときには、絶え間ないコミュニケーションと強い一体感が何にもまして重要だ&rdquo; V2MOM でビジョン主導型マネジメント  V2MOM (Vision, Values, Methods, Obstacles, Measures) 作成する際にはボトムアップで社員からの声を集めている 「社長目線で考えろ」と精神論を言うのではなく、V2MOM のようなフレームワークをトップも社員も使うことが重要    3.]]></description>
        </item>
        <item>
            <title><![CDATA[knife-solo v0.5.0 から --forward-agent オプションが必要かも]]></title>
            <link>https://masutaka.net/2015-08-30-2/</link>
            <guid>https://masutaka.net/2015-08-30-2/</guid>
            <pubDate>Sun, 30 Aug 2015 01:00:00 GMT</pubDate>
            <description><![CDATA[knife-solo v0.5.0 から &ndash;forward-agent オプションを付けないと、
Cook に失敗するケースがありました。
例えばこのように指定します。
bundle exec knife solo cook ci-docker
↓
bundle exec knife solo cook ci-docker &ndash;forward-agent
変更があったのはこちらの PR
https://github.com/matschaffer/knife-solo/pull/394 knife-solo では sudo が使われますが、v0.5.0 から &ndash;forward-agent
オプションを付けた場合だけ -E オプションが付くように変更されました。
sudo の -E オプションはこのようなものだそうです。
-E, --preserve-env Indicates to the security policy that the user wishes to preserve their existing environment variables. The security policy may return an error if the user does not have permission to preserve the environment.]]></description>
        </item>
        <item>
            <title><![CDATA[サーバの CI を EC2 から Docker に変更したけどモヤモヤ]]></title>
            <link>https://masutaka.net/2015-08-30-1/</link>
            <guid>https://masutaka.net/2015-08-30-1/</guid>
            <pubDate>Sun, 30 Aug 2015 00:00:00 GMT</pubDate>
            <description><![CDATA[サーバの CI ってどうするのが良いのでしょうね。現状やむを得ず行って
いますが、やり過ぎ感も否めないです。
[2014-09-14-1] に Wercker+Vagrant+EC2 の組み合わせでこのサーバの
CI を始めてから、[2015-02-08-2] に CircleCI+Vagrant+EC2 に変更しま
した。そして今回、CircleCI+Docker に変更しました。
理由は EC2 を使うのは大げさだと思い始めたからです。CI 時間の短縮を
期待しましたが、ほとんど変わりませんでした。結果的に、時々 EC2 イ
ンスタンスを起動するのに 30 分以上かかり、CircleCI のタイムアウト
時間を超える問題は解決出来ましたが。
Docker 入門できて自己満足は得られたのですが、Docker の使い方ではな
いなあというのが正直な感想です。
Docker を使ってサーバの CI をするためには、openssh-server をインス
トールする必要があります。そもそも Docker は一度インスタンスを作っ
たら変更を加えるべきではないため、Docker を起動してから knife-solo
で変更を加えるのは誤った使い方です。
このブログのサーバ（さくらの VPS）には nginx や td-agent、
elasticsearch などがごちゃごちゃと入ってますが、同じ環境を Docker
で作るのもおかしな話です。Docker は 1 サーバ 1 責務だと思うので、
例えば nginx だけをインストールする使い方が正しい気がします。
そういう意味で無理して CI しているなあと、モヤモヤしているところです。
修正内容はこちらです。末尾に解説を記載しました。
 ./script/bootstrap-docker.sh このスクリプトは CircleCI の dependencies.pre で実行されます。]]></description>
        </item>
        <item>
            <title><![CDATA[OpenID TechNight Vol.13 に行ってきた #openid #technight]]></title>
            <link>https://masutaka.net/2015-08-27-1/</link>
            <guid>https://masutaka.net/2015-08-27-1/</guid>
            <pubDate>Thu, 27 Aug 2015 00:00:00 GMT</pubDate>
            <description><![CDATA[OpenID TechNight Vol.13 - ID連携入門 運良く会社枠で行くことが出来ました。業務的にど真ん中なのに
OAuth1&amp;2 しか使ってなかったという。。。
1. ID連携概要 by @nov   初心者向けセッションでした。GREE の方。
弊社で言うと、新卒の営業が聞くとうれしい内容だったかも。
 ENTITY と IDENTITY  ENTITY は実体   IDENTITY PROFFING  本人確認   用語解説  IDP: Identity Provider  Facebook, Twitter,&hellip;   RP: Relying Party  Disqus とか     高度なセキュリティ対策  &ldquo;セキュリティ専任スタッフを100人以下しか雇えないようなサービスにパスワード預けるなんてバカげてる&rdquo;  Eric Sachs, Google     エンタープライズ分野では属性連携開始してからも、部署とかを更新し続けないといけないらしい  2. ID連携のあるとき～,ないとき～ #エンプラ編 by @paoneJP   エンタープライズで ID 連携するメリットのお話。オージス総研の方。]]></description>
        </item>
        <item>
            <title><![CDATA[Ruby の定数や Object.freeze の理解が曖昧だったのでメモ]]></title>
            <link>https://masutaka.net/2015-07-29-1/</link>
            <guid>https://masutaka.net/2015-07-29-1/</guid>
            <pubDate>Wed, 29 Jul 2015 00:00:00 GMT</pubDate>
            <description><![CDATA[◆定数には再代入可能（怒られるけど）。
irb(main):001:0&gt; HOGE = &#39;abc&#39; =&gt; &#34;abc&#34; irb(main):002:0&gt; HOGE = &#39;xyz&#39; (irb):2: warning: already initialized constant HOGE (irb):1: warning: previous definition of HOGE was here =&gt; &#34;xyz&#34; irb(main):003:0&gt; HOGE =&gt; &#34;xyz&#34; ◆書き換えは普通にできる。怒られない。
$ irb irb(main):001:0&gt; HOGE = &#39;abc&#39; =&gt; &#34;abc&#34; irb(main):002:0&gt; HOGE[0] = &#39;x&#39; =&gt; &#34;x&#34; irb(main):003:0&gt; HOGE =&gt; &#34;xbc&#34; ◆freeze すれば、書き換えできなくなる。
$ irb irb(main):001:0&gt; HOGE = &#39;abc&#39;.freeze =&gt; &#34;abc&#34; irb(main):002:0&gt; HOGE[0] = &#39;x&#39; RuntimeError: can&#39;t modify frozen String from (irb):2:in `[]=&#39; from (irb):2 from /Users/masutaka/.]]></description>
        </item>
        <item>
            <title><![CDATA[Emacs で URL encode するやつ]]></title>
            <link>https://masutaka.net/2015-07-28-2/</link>
            <guid>https://masutaka.net/2015-07-28-2/</guid>
            <pubDate>Tue, 28 Jul 2015 01:00:00 GMT</pubDate>
            <description><![CDATA[(require &#39;url-util)  (url-hexify-string &#34;http://masutaka.net/&#34;) =&gt; &#34;http%3A%2F%2Fmasutaka.net%2F&#34;  (url-unhex-string &#34;http%3A%2F%2Fmasutaka.net%2F&#34;) =&gt; &#34;http://masutaka.net/&#34; ]]></description>
        </item>
        <item>
            <title><![CDATA[【保存版】自前で継続的 bundle update を導入する方法]]></title>
            <link>https://masutaka.net/2015-07-28-1/</link>
            <guid>https://masutaka.net/2015-07-28-1/</guid>
            <pubDate>Tue, 28 Jul 2015 00:00:00 GMT</pubDate>
            <description><![CDATA[俺得な保存版記事です。設定するたびにやり方を思い出すのが面倒になり。
1. CircleCI の設定 GitHub の Personal access tokens のページで token を作成し、
CircleCI の Project Setting -&gt; Environment variables に
GITHUB_ACCESS_TOKEN という名前で追加します。
CircleCI の URL は以下になります。
https://circleci.com/gh/{ユーザ名}/{リポジトリ名}/edit#env-vars
2. circle.yml の変更 このように circle.yml の deployment section を変更します。
https://github.com/masutaka/masutaka-29hours/commit/0ba9ef03348568baaa5cf271d4f6e41305f8fdfe 環境変数 BUNDLE_UPDATE が指定されていたら、
circleci-bundle-update-pr gem をインストールして、同コマンドを実行
しています。この環境変数は後述するトリガーが設定してきます。
circleci-bundle-update-pr コマンドでは以下が実行されます。
 bundle update を実行する Gemfile.lock に差分があれば、git commit し、GitHub のリモートブランチに git push する GitHub の Pull Request を作成する アップデートした Gem の差分へのリンクをコメントとして POST する  bundler もアップデートしているのは、1.]]></description>
        </item>
        <item>
            <title><![CDATA[Chef で nginx の reload が出来なくなっていたので対策した]]></title>
            <link>https://masutaka.net/2015-07-26-1/</link>
            <guid>https://masutaka.net/2015-07-26-1/</guid>
            <pubDate>Sun, 26 Jul 2015 00:00:00 GMT</pubDate>
            <description><![CDATA[Ubuntu 14.04 LTS + nginx 1.9.3 の環境で、knife solo 経由での nginx
reload が出来なくなっていました（Chef のバージョンは 12.4.1）。
サーバの CI では nginx start のみが実行され、nginx restart は実行
されないため、気づけなかったようです。
レシピは至って普通。
service &#39;nginx&#39; do action [:enable, :start] supports status: true, restart: true, reload: true end template &#39;/etc/nginx/sites-available/masutaka.net&#39; do notifies :reload, &#39;service[nginx]&#39; end /var/chef/cache/chef-stacktrace.out にはこんなエラーが。
Generated at 2015-07-26 01:10:55 +0900 ---- Begin output of /sbin/reload nginx ---- STDOUT: STDERR: reload: Job is not running: nginx ---- End output of /sbin/reload nginx ---- Ran /sbin/reload nginx returned 1 実際、そうなりました。よく分かりません。]]></description>
        </item>
        <item>
            <title><![CDATA[29hours を Heroku からさくらの VPS に引っ越した]]></title>
            <link>https://masutaka.net/2015-07-25-1/</link>
            <guid>https://masutaka.net/2015-07-25-1/</guid>
            <pubDate>Sat, 25 Jul 2015 00:00:00 GMT</pubDate>
            <description><![CDATA[Heroku の料金体系が変わり 、24 時間動かし続けるためには課金()が必要
になりました。Traditional dyno はそのうち使えなくなるそうです。
昨日のアルコールが少し残る今日の午後、なんとなくやる気になったので、
[2013-04-14-2] から Heroku で動かしていた 29hours をさくらの VPS
に引越しました。このブログと同じサーバです。
※ サービス料を支払いたくないわけではないです。年間 ￥16,745 支払っ
ているさくらの VPS があるのにもったいないと思い。
Heroku の時は https://github.com/june29/29hours を変更せずに git
push すればデプロイできました。でもさくらの VPS には当然そんな機能
はないため、またまた Capistrano で頑張りました。つらい。
作ったリポジトリがこちらです。
  https://github.com/june29/29hours を git submodule として追加した
ため、デプロイを少々工夫する必要がありました。
  submodule を clone するために capistrano-git-submodule-strategy
を使った   一階層下のディレクトリで bundle install するために
capistrano-bundler の設定を変更した   settings.yml を Dropbox から取得した。CircleCI のビルドが公開さ
れているため 、URL がバレないように Capistrano の capture を使った   デプロイ時に 29hours を再起動するための cap task を書いた   29hours は Procfile を持っているので、最後の cap task で foreman を使う方法も考えましたが、foreman の良さげなインストール場所を思い]]></description>
        </item>
        <item>
            <title><![CDATA[はてなブログに引っ越してきました]]></title>
            <link>https://shiromoji.hatenablog.jp/entry/2015/07/20/022009</link>
            <guid>https://shiromoji.hatenablog.jp/entry/2015/07/20/022009</guid>
            <pubDate>Sun, 19 Jul 2015 17:20:09 GMT</pubDate>
            <description><![CDATA[<p>いままでこのブログは<a href="http://d.hatena.ne.jp/">はてなダイアリー</a>というサービスを使っていましたが、同社の後継サービスである<a href="http://hatenablog.com/">はてなブログ</a>の機能が充実してきたようなので、こちらに引っ越してきました。URL は以下のように変更になります。</p>

<ul>
<li>旧：<a href="http://d.hatena.ne.jp/mashabow/">http://d.hatena.ne.jp/mashabow/</a></li>
<li><strong>新：<a href="http://shiromoji.hatenablog.jp/">http://shiromoji.hatenablog.jp/</a></strong></li>
</ul>


<p>過去記事はもちろんのこと、記事へ寄せていただいたコメントや<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A4%CF%A4%C6%A5%D6">はてブ</a>・<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A4%CF%A4%C6%A4%CA%A5%B9%A5%BF%A1%BC">はてなスター</a>も、一緒に移行されているはずです。
また、旧URLへアクセスすると、自動的に新URLにリダイレクトされるようになっています。
昔の記事については、いま読み返してみるといろいろとはずかしいことが書いてあったりしそうですが（読み返せてない）、恥を忍んでそのまま晒しておくことにします。
リンク切れや古い情報もそのままになっていますので、ご注意ください。</p>

<p>引っ越してきたのでこれからバリバリ記事書きます！！などというわけでもないのですが、よろしくお願いいたします。</p>
]]></description>
            <enclosure url="https://cdn.blog.st-hatena.com/images/theme/og-image-1500.png" length="0" type="image/png"/>
        </item>
        <item>
            <title><![CDATA[helm-bundle-show.elからRubyGems.orgのページに飛べるようにした]]></title>
            <link>https://masutaka.net/2015-07-13-1/</link>
            <guid>https://masutaka.net/2015-07-13-1/</guid>
            <pubDate>Mon, 13 Jul 2015 00:00:00 GMT</pubDate>
            <description><![CDATA[[2015-04-13-1] の機能追加。
絞り込んでからの  キーで、RubyGems.org のページに飛べるように
しました（下記デモ画像中 [f4] ）。例えば https://rubygems.org/gems/rails です。
URL をコピーするだけも可能です（下記デモ画像中 [f5] ）。]]></description>
        </item>
        <item>
            <title><![CDATA[AWSリザーブドインスタンス購入時の注意まとめ]]></title>
            <link>https://masutaka.net/2015-07-08-1/</link>
            <guid>https://masutaka.net/2015-07-08-1/</guid>
            <pubDate>Wed, 08 Jul 2015 00:00:00 GMT</pubDate>
            <description><![CDATA[自戒を込めて&hellip;。
EC2  http://aws.amazon.com/jp/ec2/purchasing-options/reserved-instances/getting-started/  Modifying a Reserved Instance  You can request to move your Reserved Instance to another Availability Zone within the same region, change its Network Platform, or, for Linux/UNIX RIs, modify the instance size of your reservation to another size of the same instance type at no additional cost. (Certain conditions apply.)
Sell Reserved Instances on the AWS Reserved Instance Marketplace  The Reserved Instance Marketplace provides you with the opportunity to sell Reserved Instances if your needs change (i.]]></description>
        </item>
        <item>
            <title><![CDATA[ドッグフーディングを始めてみた]]></title>
            <link>https://masutaka.net/2015-07-02-1/</link>
            <guid>https://masutaka.net/2015-07-02-1/</guid>
            <pubDate>Thu, 02 Jul 2015 00:00:00 GMT</pubDate>
            <description><![CDATA[赤枠がソーシャルPLUS のコメントウィジェット。全然違和感がない。
今までその下にある Zenback の Facebook コメントフォームを有効にし
てましたが、使われませんし飽きてきました。ちなみにその前は DISQUS で[2010-05-03-1] 、その前はくっつきBBS でした[2008-09-29-1] 。
まだ Twitter ログインにしか対応していませんが、これから各種ソーシャ
ルログインに対応していくかも？
本当はメイン機能であるログインと繋ぎ込みをしたり、他のウィジェット
（アクションボタン、シェアウィジェット、プロバイダーボタンバー、ア
クティビティウィジェット等）もフルで使いたかったのですが、このブロ
グが静的サイトということもあり面倒になって止めました。]]></description>
        </item>
        <item>
            <title><![CDATA[自前でufwのレシピとserverspecのテストを書いた]]></title>
            <link>https://masutaka.net/2015-06-29-1/</link>
            <guid>https://masutaka.net/2015-06-29-1/</guid>
            <pubDate>Mon, 29 Jun 2015 00:00:00 GMT</pubDate>
            <description><![CDATA[ufw = Uncomplicated FireWall です。
レシピはこんなのを作りました。opscode のレシピとか使うと、何設定し
ているか分からず結局全部読むことになるので自前で書いてます。
execute &#39;ufw reload&#39; do action :nothing end execute &#39;ufw default deny&#39; do not_if &#39;ufw status verbose | fgrep &#34;Default: deny (incoming)&#34;&#39; notifies :run, &#39;execute[ufw reload]&#39; end execute &#39;ufw allow http&#39; do not_if &#39;ufw status | egrep &#34;^80 +ALLOW&#34;&#39; notifies :run, &#39;execute[ufw reload]&#39; end execute &#39;ufw allow ssh&#39; do not_if &#39;ufw status | egrep &#34;^22 +ALLOW&#34;&#39; notifies :run, &#39;execute[ufw reload]&#39; end execute &#39;ufw enable&#39; do command &#39;yes | ufw enable&#39; not_if &#39;ufw status | fgrep &#34;Status: active&#34;&#39; end serverspec はだいたいこんな感じです。]]></description>
        </item>
        <item>
            <title><![CDATA[El-Get を多少理解できた気がする]]></title>
            <link>https://masutaka.net/2015-06-17-1/</link>
            <guid>https://masutaka.net/2015-06-17-1/</guid>
            <pubDate>Wed, 17 Jun 2015 00:00:00 GMT</pubDate>
            <description><![CDATA[Cask から El-Get に移行したのが先月。
（ちなみに Homebrew の Cask は Emacs の Cask を参考にしたらしいです。）
loading...
   if (localStorage.getItem("pref-theme") === "light") { const elements = document.getElementsByClassName('twitter-tweet'); for (let i = 0; i  el-get-update とかで頻繁にエラーになるので、調べ始めて文句を言って
いるところ（愚かな奴めw）。
loading...
   if (localStorage.getItem("pref-theme") === "light") { const elements = document.getElementsByClassName('twitter-tweet'); for (let i = 0; i  loading...
   if (localStorage.getItem("pref-theme") === "light") { const elements = document.getElementsByClassName('twitter-tweet'); for (let i = 0; i  結果、ようやく El-Get を理解できた気がする。]]></description>
        </item>
        <item>
            <title><![CDATA[AWS Summit Tokyo 2015 に行ってきた #AWSSummit]]></title>
            <link>https://masutaka.net/2015-06-07-1/</link>
            <guid>https://masutaka.net/2015-06-07-1/</guid>
            <pubDate>Sun, 07 Jun 2015 00:00:00 GMT</pubDate>
            <description><![CDATA[去年 [2014-07-19-1] に引き続き、AWS Summit Tokyo に行って参りました。今年も 2 日目だけ。
今年は開発者向けの「デベロッパーカンファレンス（DevCon）」がメインセッションとは別にあったので、主にそっちを聴いてました。
全てのセッションの動画や資料はこちらをどうぞ。
AWS Summit Tokyo 2015 開催レポート｜AWS Day2 キーノート   資料ダウンロード AWS のサービスや事例の紹介。モバイルや IoT 時代に向けて、脱 EC2 を意識した話が多かった気が。
昼休み 炭水化物は十分だったけど量が少なかった。売店とかないのでこれで凌ぐしかない感じだった。
Amazon Machine Learning のセッション を聴きながら食べようかと思いましたが、人多杉で断念。実践 GitHub Flow の同時上映の会場が空いていたのでそこで。レシーバーを借り忘れたので、音声なしで。
開発生産性を上げるためのデプロイ戦略  吉羽 龍太郎（アマゾン データ サービス ジャパン株式会社 プロフェッショナルサービス本部 部長）
資料ダウンロード デプロイに何時間もかかって困っている方向けのセッションだったので、ちょっと選択を誤った。ただ、吉羽さんの話を聴くのは初めてだったので、それはそれで良かった。
会場内に１時間以内にデプロイ出来る人少なかった。
クロスファンクショナルチームを意識する。メンバーごとのスキルセットのマトリクス作るのは良いかも。HTML5 とか Rails とか fluentd とか。
デプロイツールのデプロイ問題の話もあった。
開発者のローカル環境からデプロイすると、最新の master ブランチでなかったりして、デプロイツールのバージョンが古いことがある。やはり、CI ツールからデプロイするのが現在のベストプラクティスっぽい。穴あけるのが面倒だなあ&hellip;。
なぜクックパッドは開発しやすいのか  成田 一生（クックパッド株式会社 インフラストラクチャー部 部長）
  chanko がロールごとの機能の ON/OFF する Gem だったのね。クックパッドのスタッフだけに先行してリリースするとか。]]></description>
        </item>
        <item>
            <title><![CDATA[『ブレイブリーセカンド』は想像の斜め上を行くRPGだった。オススメ（ネタバレなし）]]></title>
            <link>https://masutaka.net/2015-05-23-1/</link>
            <guid>https://masutaka.net/2015-05-23-1/</guid>
            <pubDate>Sat, 23 May 2015 00:00:00 GMT</pubDate>
            <description><![CDATA[前作のブレイブリーデフォルトがかなり良かった [2013-12-30-2] ので、
4ヶ月も前から予約して、昨日ようやくクリアしました。
いろいろあって、103時間もかけてしまいましたが、後悔はしていない&hellip;。
本作はブレイブリーシリーズの二作目にあたります。
一作目が『ブレイブリーデフォルト フライングフェアリー 』で、その改
良版が『ブレイブリーデフォルト フォーザ・シークウェル 』になります。
分かりづらいので注意。
ブレイブリーシリーズが初めての方は、
 『ブレイブリーデフォルト フォーザ・シークウェル 』 『ブレイブリーセカンド 』
の順にプレイすると、よろしいかと思います。  システムは今回も改良されています。例えばブレイブやデフォルトの重ね
がけが十字キーで簡単に入力できるようになってました。便利。
ジョブはメインシナリオにおいては、今までの使い回しは「すっぴん」を
除きひとつもなく、新たに作られたものだけ。新ジョブはクセがあるもの
ばかりでしたが、魔法系のジョブは新しいほうを使うことが多かったかな。
意外なジョブが終盤役に立ったり&hellip;。
ストーリーは以下のとおり。プレイ中「マジか！」と声が出ることが何度
もありました。
loading...
   if (localStorage.getItem("pref-theme") === "light") { const elements = document.getElementsByClassName('twitter-tweet'); for (let i = 0; i  ダンジョンは前作と比べて立体的で複雑になりましたが、サブシナリオは
前作の使い回しが多く、ゲップが出たのは残念なところ。
とは言え、製作者の方はそれこそ四六時中ブレイブリーセカンドのことを
考えていたんだろうなあと感じる箇所が多々あり、心地よくプレイ出来ま
した。実際、プロデューサーの浅野智也氏は髪を 1 年間切れていなかった とのことｗ
サントラも買いました。いつもはクリアーしてから買いますが、今回は待
ちきれず発売日とほぼ同時に iTunes で。ネタバレ感があるので注意です。
 そういうわけで超オススメな RPG です！
 前作は先にプレイしたほうが良いです！
 ]]></description>
        </item>
        <item>
            <title><![CDATA[6年ぶりにこのブログをリニューアルした]]></title>
            <link>https://masutaka.net/2015-05-06-1/</link>
            <guid>https://masutaka.net/2015-05-06-1/</guid>
            <pubDate>Wed, 06 May 2015 00:00:00 GMT</pubDate>
            <description><![CDATA[多分、[2009-02-21-1] 以来。
いやあ、ずっとデザインは直さなくちゃと思ってたんですよ。しかし、
まさかこのGWに直すことになるとは。
今まではtdiary のkaeruテーマを使わせて頂いていました。分からないな
りに継ぎ足していったところ、スマホ時代に反したデザインになっている
と自覚。味があったといえばありましたが。
そこでGWの初めにたつをさんの記事 を見ながらスマホ対応をしたんですが、
元がアレなのでサイドバーを引っ込めるくらいしか出来ず。
GWも終盤の昨日の午後、天からイベントが降ってきたので、一気にリニュー
アルしてしまいました。うん、12時間くらい。
PagerやPaginationは分かりやすくしたつもり。どうでしょう？
テーマは、みんな大好きBootstrapをベースにいい感じのテーマが集まっ
ている https://bootswatch.com/ のYeti を使わせて頂きました。
時間がかかったのは、ある程度形にするまでと、カテゴリページの
Paginationをいい感じにするため、chalowのソース に修正を入れたところ。
loading...
   if (localStorage.getItem("pref-theme") === "light") { const elements = document.getElementsByClassName('twitter-tweet'); for (let i = 0; i  chalowのソースをいじるのは今回が初めてではありませんが、Perlは未だ
に分かりません。。
もう一つは、使うべきcssがよく分からなかったこと。
というのも、初めは各テーマのソースを参考にしていたので、
https://github.com/thomaspark/bootswatch をgit cloneして実装を進め
ていました。
&lt;meta name=&#34;viewport&#34; content=&#34;width=device-width, initial-scale=1&#34;&gt; &lt;link rel=&#34;stylesheet&#34; href=&#34;/bootswatch/yeti/bootstrap.min.css&#34; media=&#34;screen&#34;&gt; &lt;link rel=&#34;stylesheet&#34; href=&#34;/bootswatch/assets/css/bootswatch.min.css&#34;&gt; いざ調べてみたらこれで良いっぽい。しかしデザインが変わる。。
&lt;meta name=&#34;viewport&#34; content=&#34;width=device-width, initial-scale=1&#34;&gt; &lt;link href=&#34;//netdna.bootstrapcdn.com/bootswatch/3.3.4/yeti/bootstrap.min.css&#34; rel=&#34;stylesheet&#34;&gt; https://bootswatch.com/ は彼ら自身のデザインをカスタマイズしていた]]></description>
        </item>
        <item>
            <title><![CDATA[LINE DEVELOPER DAY_2015 Tokyoに行ってきた #linedevday]]></title>
            <link>https://masutaka.net/2015-05-02-1/</link>
            <guid>https://masutaka.net/2015-05-02-1/</guid>
            <pubDate>Sat, 02 May 2015 00:00:00 GMT</pubDate>
            <description><![CDATA[イベントがあったのが火曜日(4/28)で今日が土曜日(5/2)。寝かせすぎて
発酵するところでした。
LINE DEVELOPER DAY_2015 Tokyo 社内のSlackで知り、ノリで応募したら当選してしまいました。社内で4人
応募して全員当選していたので、早い順だったんですかね！？しかし、実
際に行った(もしくは行けた)のは私だけだったという。。
会場に入ってまず思ったのが、寒い！
loading...
   if (localStorage.getItem("pref-theme") === "light") { const elements = document.getElementsByClassName('twitter-tweet'); for (let i = 0; i  ハッシュタグにもなっていたようで。 お金がかかっておるとも感じました。会場の設備は安っぽくなくて、机や
椅子のキャパシティも十分。ドリンクは飲み放題、クッキーも自由、LINE
グッズのおみやげあり(荷物になるので個人的には不要だったが)。ランチ
の軽食と懇親会(行かなかった)も無料。リクルーティング目的というのも
頷けます。
午前中は4月にCEOになった出澤さんや、CTOの朴さんによる、LINEの概要
や文化のお話でした。午後は会場が2つに別れ、より掘り下げたセッショ
ンが始まりました。
以下は午前中のメモ。
途中、画像へのリンクは
LINEが開発体制、グローバル対応の秘策、サービス基盤の変遷を解説 - ケータイ Watch を使わせて頂きました。むしろこちらを見たほうが良いかと。
A-1 オープニング 代表取締役社長 CEO 出澤 剛  A-2 LINE Global Culture by 上級執行役員 CTO 朴イビン   開発者が国をまたいでプロジェクトを立ち上げる。跨がない場合もある リモートコラボレーション Trust and Respect マネージャーの役割は働きやすい環境を作ることだけ。評価は他のエンジニアから  A-3 LINE Messenger for the World by 上級執行役員 サービス開発担当 池邉智洋   エンジニアがLINE遠征隊として、実際に現地に赴く 現地の人と同じプリペイド携帯を手に入れるところから始める エスカレーターを上下したり、地下鉄や飛行機とかの移動中のテストをしたり 日本は回線が太いので、あまり対策はしていないそう 回線が細い地域は画像のサイズを小さくするなど、パフォーマンスチューニングしている あとは、ユーザーがメッセージを送ろうかなとする前に、データをサーバに送ってUXを向上させるとか  A-4 LINE Platform Development Chronicle by Tom.]]></description>
        </item>
        <item>
            <title><![CDATA[helm-hatena-bookmark.elに神対応を入れた]]></title>
            <link>https://masutaka.net/2015-04-19-1/</link>
            <guid>https://masutaka.net/2015-04-19-1/</guid>
            <pubDate>Sun, 19 Apr 2015 00:00:00 GMT</pubDate>
            <description><![CDATA[はてブを使っているEmacsユーザに朗報です！
今まで~/.hatenabookmarkを作るために
http://coderepos.org/share/browser/lang/shellscript/misc/anything-hatena-bookmark-get-dump を手動実行したりcrontabに登録する必要がありましたが、この度不要に
なりました。
~/.emacs.d/init.elに以下の設定をするだけで~/.hatenabookmarkを自動
更新してくれます。デフォルトでは1時間に1回更新します。
(setq helm-hatena-bookmark:username &#34;Your Hatena Account&#34;) (helm-hatena-bookmark:initialize) 使用方法は今までどおりM-x helm-hatena-bookmarkです。私は⌘-bに割り
当てています。
(define-key global-map (kbd &#34;s-b&#34;) &#39;helm-hatena-bookmark) すでにMELPAにもリリースされているので、M-x package-install
helm-hatena-bookmarkでインストールできます。
あと、これとは別にコマンド実行したらすぐ一覧を出す ようにしました。
今まで不便だと感じつつ使っていて、あ、自分が作ったツールだから直せ
ばいいのか！と気づきましたw
あまりユーザはいないようなので、カスタマイズ可能にはせず、ばっさり
切り捨てました。必要なら変更しますのでIssueやPull requestなどお願
いします。
  ~/.hatenabookmarkの作成は今までのシェルスクリプトとほぼ同じです。
内部でcurlをstart-processで非同期実行し、sentinelで終了通知が来た
らGNU sedで置換しています。高速化のために外部コマンドを使うことに
しました。
私のはてブ数6030の場合、curlが約30秒、sedが約0.5秒でした。sedでの
call-process-regionが速いのが意外でした。curlは非同期で動くので、
60秒とかに増えても気にならないと思います。
sedの特殊な文法を使っているので、OSXのsedでは使えません(見つからな
いと(helm-hatena-bookmark:initialize)がエラーで止まります)。
brew等でGNU sedをインストールしてください。
 $ brew install gnu-sed
 良い実装が出来て満足。]]></description>
        </item>
        <item>
            <title><![CDATA[タイププロジェクト株式会社に入社しました]]></title>
            <link>https://shiromoji.hatenablog.jp/entry/20150419/1429456773</link>
            <guid>https://shiromoji.hatenablog.jp/entry/20150419/1429456773</guid>
            <pubDate>Sat, 18 Apr 2015 15:19:33 GMT</pubDate>
            <description><![CDATA[<p>おひさしぶりです。mashabow です。</p><p>4月15日付けで<a href="http://typeproject.com/">&#x30BF;&#x30A4;&#x30D7;&#x30D7;&#x30ED;&#x30B8;&#x30A7;&#x30AF;&#x30C8;&#x682A;&#x5F0F;&#x4F1A;&#x793E;</a>に入社しました。AXISフォントやTP明朝を作っているフォントメーカーです。数年前からバイトのようなかたちでちょこっと仕事をしていましたが、そのまま正社員として働くことになりました。</p><p>職種としては、タイプエンジニア（フォントエンジニアとも）というものになります。裏方的な役割なのであまり聞き慣れないかもしれません。具体的には、デザイナーが作ったグリフをまとめてちゃんと動くフォントファイルを作ったり、フォント制作で使うお役立ち<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%C4%A1%BC%A5%EB">ツール</a>を作ったり、……といったもろもろをする仕事です。自分自身でデザインをするわけではありませんが、デザイナーをはじめ他のスタッフとともに、すばらしいフォントを世の中に送り出していきたいと思います。</p>

<div class="section">
    <h4>その他のご報告</h4>
    
<div class="section">
    <h5>大学を卒業しました</h5>
    <p>3月でようやく大学を卒業しました。<a href="http://togetter.com/li/213879">87&#x5E74;&#x751F;&#x307E;&#x308C;</a>なので、とっくの昔に卒業していたはずなんですが、おかしいな…。ちなみに、<a href="http://www.gavo.t.u-tokyo.ac.jp/">&#x5E83;&#x702C;&#x30FB;&#x5CEF;&#x677E;&#x7814;&#x7A76;&#x5BA4;</a>というところで、<a class="keyword" href="http://d.hatena.ne.jp/keyword/%BC%EA%BD%F1%A4%AD">手書き</a>漢字フォントの生成について研究をしていました。いずれどこかで発表できたらと思います。</p>

</div>
<div class="section">
    <h5>右足首を骨折しました</h5>
    <p>先月の話ですが、確定申告に行く途中に階段ですっころんで右足首を骨折しました。手術とリハビリのおかげで、ようやく普通に歩けるようになってきたところです。痛みはそれほどでもありませんでしたが、右足が使えずなかなかに不便でした。卒業式に出られなかったり、4月1日の入社がズレたりというのは、すべてコイツのせいです。ご迷惑をおかけしました。みなさまもどうぞお気をつけください。</p>

</div>
<div class="section">
    <h5>4月23日（木）にトークショーがあります</h5>
    <p>今週の23日に、タイププロジェクト代表の<a class="keyword" href="http://d.hatena.ne.jp/keyword/%CE%EB%CC%DA%B8%F9">鈴木功</a>が、長谷川踏太さんと対談を行います。</p>

<ul>
<li><a href="http://www.pen-online.jp/news/info/Pen-Type-Project-DAIKANYAMA-T-SITE/">Pen&times;Type Project 4&#x6708;23&#x65E5;&#xFF08;&#x6728;&#xFF09; DAIKANYAMA T-SITE&#x306B;&#x3066;&#x3001;&#x516C;&#x958B;&#x30AF;&#x30EA;&#x30A8;&#x30FC;&#x30BF;&#x30FC;&#x5BFE;&#x8AC7;&#x958B;&#x50AC;&#xFF01; | News | Pen Online</a></li>
</ul>
    <blockquote cite="http://www.pen-online.jp/news/info/Pen-Type-Project-DAIKANYAMA-T-SITE/">
        <p>「フォントをデザインする人、フォントでデザインする人。」</p><p>「AXIS Font」や「TP明朝」など、革新的なフォントを生みだすタイププロジェクト代表・タイプディレクターの<a class="keyword" href="http://d.hatena.ne.jp/keyword/%CE%EB%CC%DA%B8%F9">鈴木功</a>氏と、インターネット広告や<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%B3%A1%BC%A5%DD%A5%EC%A1%BC%A5%C8%A5%A2%A5%A4%A5%C7%A5%F3%A5%C6%A5%A3%A5%C6%A5%A3">コーポレートアイデンティティ</a>などの分野で<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%A4%A5%F3%A5%BF%A5%E9%A5%AF%A5%C6%A5%A3%A5%D6">インタラクティブ</a>な作品を発表し続けるクリエイティブディレクターの長谷川踏太氏。おふたりによるトークショーを、DAIKANYAMA T-SITE GARDEN GALLERYにて4月23日（木）に開催します。当日は、書体とメガネの機能的・デザイン的な共通点に着想を得て、長谷川氏が立ち上げた話題のメガネブランド「TYPE」や、タイププロジェクトが提案する「都市フォント」プロジェクトなど、フォントをめぐる様々なトークを展開。また、コーポレート<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%D6%A5%E9%A5%F3%A5%C7%A5%A3%A5%F3%A5%B0">ブランディング</a>に向けたタイププロジェクトの試みなども語られる予定です。私たちの暮らしを彩るフォントの奥深さに気づかせてもらえる貴重なクロストーク。入場は無料となっていますので、ぜひご参加ください。（Pen編集部）</p>

        <cite><a href="http://www.pen-online.jp/news/info/Pen-Type-Project-DAIKANYAMA-T-SITE/">Pen&times;Type Project 4&#x6708;23&#x65E5;&#xFF08;&#x6728;&#xFF09; DAIKANYAMA T-SITE&#x306B;&#x3066;&#x3001;&#x516C;&#x958B;&#x30AF;&#x30EA;&#x30A8;&#x30FC;&#x30BF;&#x30FC;&#x5BFE;&#x8AC7;&#x958B;&#x50AC;&#xFF01;</a></cite>
    </blockquote>
<p>先週末時点ではまだ空きがあるとのことだったので、興味ある方はぜひどうぞ。応募フォームは上記告知ページの記事末尾から。入場無料でおまけがついてくるみたいです。</p>

</div>
</div>
<div class="section">
    <h4>というわけで</h4>
    <p>今回のご報告は以上です。ここしばらくはイベントや<a class="keyword" href="http://d.hatena.ne.jp/keyword/Twitter">Twitter</a>・ブログなどから遠ざかっていましたが、またぼちぼち顔を出していければと思います。今後ともどうぞよろしくお願いいたします。</p>

</div>]]></description>
            <enclosure url="https://cdn.blog.st-hatena.com/images/theme/og-image-1500.png" length="0" type="image/png"/>
        </item>
        <item>
            <title><![CDATA[helm-bundle-show.elを作ったら、またEmacsから離れられなくなった]]></title>
            <link>https://masutaka.net/2015-04-13-1/</link>
            <guid>https://masutaka.net/2015-04-13-1/</guid>
            <pubDate>Mon, 13 Apr 2015 00:00:00 GMT</pubDate>
            <description><![CDATA[bundleしてるgemにcdする。pecoで絞り込みつつ - Qiita Emacsでも同じことがやりたかったので、helm-bundle-show.elを作りまし
た。絶対誰か作っているだろ！と思って探したけどありませんでした。
  MELPAにも取り込まれた ので、M-x package-install helm-bundle-showで
インストールできます。
私は &ldquo;C-x y&rdquo; に割り当てました。便利！
(define-key ctl-x-map (kbd &#34;y&#34;) &#39;helm-bundle-show) パッケージ名をhelm-bundlerにするか、helm-bundle-showにするか悩みま
した。helm-bundlerだと責務が大きくなりそうなので、helm-bundle-show
にしました。
ちなみにzshの関数はこんなのを作りました。awkでprint以外使ったの初
めてかも。
function peco_bundle_show() { local selected_dir=$(bundle show | awk &#39;NR&gt;1 {print $2}&#39; | peco | xargs bundle show) if [ -n &#34;$selected_dir&#34; ]; then BUFFER=&#34;cd ${selected_dir}&#34; zle accept-line fi zle clear-screen } zle -N peco_bundle_show bindkey &#39;^xy&#39; peco_bundle_show ]]></description>
        </item>
        <item>
            <title><![CDATA[Emacs-24.5 on OSX Yosemiteのビルド手順詳細]]></title>
            <link>https://masutaka.net/2015-04-12-1/</link>
            <guid>https://masutaka.net/2015-04-12-1/</guid>
            <pubDate>Sun, 12 Apr 2015 00:00:00 GMT</pubDate>
            <description><![CDATA[Emacs-24.5がリリースされたので 、さっそくビルドしました。
[2014-10-25-1] の手順と同じです。
/usr/includeがないとビルドに失敗するので、
$ xcode-select --installでCommand Line Toolsをインストールしてからね。
$ curl -LO http://ftp.gnu.org/pub/gnu/emacs/emacs-24.5.tar.xz $ curl -LO ftp://ftp.math.s.chiba-u.ac.jp/emacs/emacs-24.5-mac-5.9.tar.gz $ tar xfJ emacs-24.5.tar.xz $ tar xfz emacs-24.5-mac-5.9.tar.gz $ cd emacs-24.5 $ patch -p 1 &lt; ../emacs-24.5-mac-5.9/patch-mac $ cp -r ../emacs-24.5-mac-5.9/mac mac $ cp ../emacs-24.5-mac-5.9/src/* src $ cp ../emacs-24.5-mac-5.9/lisp/term/mac-win.el lisp/term $ \cp nextstep/Cocoa/Emacs.base/Contents/Resources/Emacs.icns mac/Emacs.app/Contents/Resources/Emacs.icns $ ./configure --prefix=$HOME/opt/emacs-24.5 --with-mac --without-x $ make $ make GZIP_PROG=&#39;&#39; install # *.elを圧縮したくないので $ cp -r mac/Emacs.app ~/Applications emacs-mac patchの配布元は従来通り]]></description>
        </item>
        <item>
            <title><![CDATA[『Web API： The Good Parts』を読んだ]]></title>
            <link>https://masutaka.net/2015-04-09-2/</link>
            <guid>https://masutaka.net/2015-04-09-2/</guid>
            <pubDate>Thu, 09 Apr 2015 01:00:00 GMT</pubDate>
            <description><![CDATA[200ページの中によくまとまってました。後半は密度濃かったです。
 4章のHTTP Statusでの筆者の見解が良かった。ぶっちゃけ何使えばよいのよ的な GitHubやTwitter、Facebookなど事例が豊富 セキュリティ対策が詳しい  最近はバックエンドはクローズドなAPIを提供し、フロントエンドを別途
実装するパターンが増えているので、APIを実装する機会も増えてきまし
た。そういう意味でも読んで良かったなあと思いました。]]></description>
        </item>
        <item>
            <title><![CDATA[『夕凪の街 桜の国』が漫画も映画版も素晴らしかった]]></title>
            <link>https://masutaka.net/2015-04-09-1/</link>
            <guid>https://masutaka.net/2015-04-09-1/</guid>
            <pubDate>Thu, 09 Apr 2015 00:00:00 GMT</pubDate>
            <description><![CDATA[ちょっと前にKindleで漫画を読んで感動したので、DVDで映画版も見てみた。
loading...
   if (localStorage.getItem("pref-theme") === "light") { const elements = document.getElementsByClassName('twitter-tweet'); for (let i = 0; i  映画版が漫画をうまく補完していて、なんというか見入ってしまった。
たいがい原作から映画が作られるパターンはがっかりする。それで後で映
像化に意味があっただとか、こういう解釈もありだとか理由をつけて自分
を納得させるんだけど、今回は全くそれがなかった。
キャスティングも良かった。
麻生久美子 さんと田中麗奈 さんがイメージにピッタリで感心してしまった。
中越典子 さんもフワフワした感じが合っていた。堺正章 さんはミスキャス
トだったけど頑張っていた(何様？)w
残念だったのは子役または青年と、大人の役者が似てなさすぎが多かった
こと。逆に太田京花役の小池里奈 さんと粟田麗 さんは、似すぎてて気付か
なかった。あとで調べて気づいた。マジか。
エキストラの動きがなんかぎこちなかったのも気になった。
でもまあそれくらい。いい映画です。また見よう。
P.S.
麻生さんいいですね〜
なにげにこのブログでも『モテキ』の[2013-01-27-1] で褒めてるw
  ]]></description>
        </item>
        <item>
            <title><![CDATA[GitHub markdown previewer octodownをEmacsから使う]]></title>
            <link>https://masutaka.net/2015-04-05-1/</link>
            <guid>https://masutaka.net/2015-04-05-1/</guid>
            <pubDate>Sun, 05 Apr 2015 00:00:00 GMT</pubDate>
            <description><![CDATA[今までレンダリング結果を確認するために、適当なGitHubのリポジトリの
README.mdを開いて編集して確認。ということをやっておりました。。
GitHubのREADMEをローカルで確認する。octodownをインストール。 - 気の向くままに書き綴る 2ヶ月前のこちらの記事が気になっていたので、ズビっと設定してみました。
予め、markdown-mode をpackage.el等からインストールしておきます。
あとは前述の記事を参考にoctodownコマンドをインストールし、以下
を~/.emacs.d/init.elに追加すればOKです。
(defun octodown ()  (interactive)  (shell-command (format &#34;octodown %s&#34; (buffer-file-name))))  (with-eval-after-load &#34;markdown-mode&#34;  (define-key markdown-mode-map (kbd &#34;C-c C-c C-c&#34;) &#39;octodown)) markdownファイルを開いて、C-c C-c C-cすればChromeとかに開いてくれます。
またEmacsが便利になってしまった。。。]]></description>
        </item>
        <item>
            <title><![CDATA[通知サービスPushoverがなかなか便利]]></title>
            <link>https://masutaka.net/2015-03-08-1/</link>
            <guid>https://masutaka.net/2015-03-08-1/</guid>
            <pubDate>Sun, 08 Mar 2015 00:00:00 GMT</pubDate>
            <description><![CDATA[何年も前からim.kayac.com を使ってきましたが、時々通知が来なくなるの
で(アプリを再起動すれば直る)、Pushover に乗り換えました。1ヶ月ほど
使っていますが、なかなか良いです。
※ im.kayac.comは2009年11月18日以来更新がないようです。 iPhoneアプリの画面はこのような感じです。
CircleCIは後述のGemで通知しています。
TwitterはHerokuで動かしている29hours[2013-04-14-2] 経由で通知してい
ます。29hoursはデフォルトでPushoverに対応しているので、
settings.ymlを変更しただけです。
im.kayac.comに出来ることはひととおり出来ました。さらに以下の機能があります。
 プライオリティ(low,normal,high,emergency)を指定できる emergencyの時は、Acknowledgeするまで60秒ごと24時間通知し続けることも可能 通知しない時間帯を指定できる 通知ごとにサウンドを切り替えられる デバイス(iPhone,Android,Desktop)を登録でき、指定したデバイスのみに通知可能 グループやユーザを登録でき、通知先に指定可能 利用状況をグラフで確認できる  唯一、Tiarraからの通知はできなくなりましたが、最近IRCは使ってない
ので割り切りました。
アプリは無料で5日間制限なく使えます。それ以降は1度だけ500円支払え
ば同様に使えます。Desktop版はさらに$4.99 USDの課金が発生します。
Gemもあるので、結構お手軽に使えました。
 pushover | RubyGems.org | your community gem host  RubyGems.org is the Ruby community's gem hosting service. Instantly publish your gems and install them. Use the API to interact and find out more information about available gems. Become a contributor and enhance the site with your own changes.]]></description>
        </item>
        <item>
            <title><![CDATA[継続的bundle updateを簡単に導入できるGemを作った]]></title>
            <link>https://masutaka.net/2015-03-03-1/</link>
            <guid>https://masutaka.net/2015-03-03-1/</guid>
            <pubDate>Tue, 03 Mar 2015 00:00:00 GMT</pubDate>
            <description><![CDATA[[2015-01-25-1] のバージョンアップ。
個人、会社含めて、複数リポジトリで継続的bundle updateを始めて一ヶ月。
汎用コードをGemに外出ししました。
 circleci-bundle-update-pr | RubyGems.org | your community gem host  RubyGems.org is the Ruby community's gem hosting service. Instantly publish your gems and install them. Use the API to interact and find out more information about available gems. Become a contributor and enhance the site with your own changes.
  circle.ymlで完結できるのでなかなか良さげです。ただし[2015-01-25-1] のスクリプト部分をGem化しただけで、テストもなく、名前が安直です。
でもとりあえず動いています。
変更前後をご覧になると分かりますが、deploymentで
circleci-bundle-update-prを呼ぶだけで良くなりました。
◆変更前
https://gist.github.com/masutaka/d9bf91e22567753fe76b ◆変更後
https://gist.github.com/masutaka/8a01fe50e3917ca0b6d8 compare_linker とも依存を付けたので、できるだけdiffへのリンクを貼っ
てくれます。
トリガーは[2015-01-25-1] で紹介したci-build-triggerをどうぞ。]]></description>
        </item>
        <item>
            <title><![CDATA[『Webエンジニアが知っておきたいインフラの基本』を読んだ]]></title>
            <link>https://masutaka.net/2015-03-02-1/</link>
            <guid>https://masutaka.net/2015-03-02-1/</guid>
            <pubDate>Mon, 02 Mar 2015 00:00:00 GMT</pubDate>
            <description><![CDATA[長らく会社で借りていた本を読了した。
インフラエンジニアの教本にはもちろん、アプリエンジニアもためになる
内容。
 休憩を勧めても「大丈夫」「休憩不要」と言うことがありますが、それ
こそがもう大丈夫ではなくなっているサインなので無理やり休憩を取ら
せましょう。
 大障害時のこの心構えはあるあるだけど、本に書いてあることは素晴らしい。
最終章は筆者曰く「本章に書いてあることがひと通り実践できるようにな
れば、チューニング大会でも確実に上位を狙えますよ」とのこと。]]></description>
        </item>
        <item>
            <title><![CDATA[WEB+DB PRESS Vol.82の「はじめてのGO」を実際に書いて動かした]]></title>
            <link>https://masutaka.net/2015-02-11-1/</link>
            <guid>https://masutaka.net/2015-02-11-1/</guid>
            <pubDate>Wed, 11 Feb 2015 00:00:00 GMT</pubDate>
            <description><![CDATA[WEB+DB PRESS Vol.82｜技術評論社 記事は非常にわかりやすく、A Tour of Go の途中で挫折した私でも大丈夫
でした。GOとCは結構似ているので、C経験者にもオススメです。
GOは必要最小限の機能しか用意されていない点が好きです。~~最近Rubyの高
機能さにゲップが出るので。~~ちょっとGOで何か作ってみようかな。
そういえば一度この記事のコードも試したのですよね。良い復習になりました。
「今日から始める Go言語 と appengine」というテーマで社内勉強会をしました｜feedforce Engineers&rsquo; blog Emacsの開発環境は「Goプログラミングの環境構築 - Emacs JP 」を参考に
go-mode, go-autocomplete, go-eldocを入れたところ、非常に快適になり
ました。機能としてはIDEと遜色ないんじゃないかな？
 C-c C-aでパッケージのimport文を簡単に追加できる。補完も効く importしたパッケージに含まれる関数名の動的補完 補完した関数の型情報をミニバッファに表示 M-.でfmt.Println等の組み込み関数の定義元にジャンプ ファイルの保存時に、自動的にgofmtコマンドで整形  加えて、open-junk-fileで書き捨てのファイルを作ってコードを書き、
quickrunで即時実行する感じで進めていきました(意外にボリュームがあ
り、時間はかかりましたが..)。
init.elはこんな設定にしました。タブ幅はEmacsデフォルトの8だと見づ
らいので4に変更。
(with-eval-after-load &#34;go-mode&#34;  (require &#39;go-autocomplete)   (defun go-mode-hook-func ()  (setq tab-width 4)  (go-eldoc-setup))  (add-hook &#39;go-mode-hook &#39;go-mode-hook-func)   (define-key go-mode-map (kbd &#34;M-.&#34;) &#39;godef-jump)  (define-key go-mode-map (kbd &#34;M-,&#34;) &#39;pop-tag-mark))  (add-hook &#39;before-save-hook &#39;gofmt-before-save) GO++]]></description>
        </item>
        <item>
            <title><![CDATA[サーバのCIをWerckerからCircleCIに移行した]]></title>
            <link>https://masutaka.net/2015-02-08-2/</link>
            <guid>https://masutaka.net/2015-02-08-2/</guid>
            <pubDate>Sun, 08 Feb 2015 01:00:00 GMT</pubDate>
            <description><![CDATA[[2014-01-09-1] からWerckerを使い始めて1年とちょっと。このたび
CircleCIに移行しました。理由は以下のとおり。
 会社のJenkinsが壊れてCircleCIを使い始めた。2つ覚えているのが面倒 [2015-01-25-1] の継続的bundle updateをやりたい(WerckerはAPIがないっぽい) [2014-01-09-1] 当時と違いCircleCIは1コンテナまで無料になった  Werckerは自分のBoxを簡単に作れたのが良かったんですけどね。
(masutaka/wercker-box-rvm-vagrant-aws の更新は停止します。)
特殊なことはしていないので、Vagrantfileとcircle.ymlを晒すだけにし
ておきます。
 CircleCIはコンテナにsshログイン出来るのは良いけど、EC2インスタンス
が起動されてそのままになるような。。。さっさとDockerに移行しないと。]]></description>
        </item>
        <item>
            <title><![CDATA[bundle updateを定期実行した時、更新されたGemのDiffも分かるようにした]]></title>
            <link>https://masutaka.net/2015-02-08-1/</link>
            <guid>https://masutaka.net/2015-02-08-1/</guid>
            <pubDate>Sun, 08 Feb 2015 00:00:00 GMT</pubDate>
            <description><![CDATA[feedforce/tech.feedforce.jp#55 で、tachikoma.io の中の人とこんなやりとりが。
  早速[2015-01-25-1] に実装した継続的bundle updateで、compare linker
を使ってみました(残念ながらこの例ではdiffはGitHubのリンクになりませんでした)。
[2015-01-25-1] のGemfileとcreate_pull_request.rbを以下に置換すればOKです。
 See also
Speaker としての #rubykaigi 2014 を終えて - @kyanny&rsquo;s blog P.S.
何か理由があってrubygems.orgにアップロードされてないのかな？]]></description>
        </item>
        <item>
            <title><![CDATA[CircleCIを使ってbundle updateを定期実行するHerokuアプリを作った]]></title>
            <link>https://masutaka.net/2015-01-25-1/</link>
            <guid>https://masutaka.net/2015-01-25-1/</guid>
            <pubDate>Sun, 25 Jan 2015 00:00:00 GMT</pubDate>
            <description><![CDATA[CircleCIを使ってbundle updateを定期実行する - Qiita こちらの「1. CircleCIを起動する」のシェルスクリプトをRubyスクリプ
トにしてみました。Herokuボタンで簡単に設置できます。
  ◆ci-build-triggerの解説
やっていることは単純で、build_parametersに{BUNDLE_UPDATE: true}を
指定して、CircleCIのビルドを実行しているだけです。BUNDLE_UPDATEは
後述するcircle.ymlで参照します。
Herokuボタンをクリックしたら、App NameやEnvを設定してください。
CIRCLECI_TOKEN Envは、CircleCIのProject Settings -&gt; API
PermissionsからScopeがallなtokenを作成します。
EXEC_DAYS Envは実行する曜日です。Heroku Schedulerは実行間隔を
「Daily」「Hourly」「Every 10 minutes」からしか選べません。さすが
に毎日のbundle updateは必要ないので、「Daily」を選択しつつスクリプ
トの中でこの環境変数を参照するようにしました。
カンマ区切りで1つまたは複数の曜日を指定することが出来ます。指定が
なければ毎日CircleCIをビルドします。
 Sun
Mon,Wed,Fri
 あとはHeroku Schedulerを設定するだけで、CircleCIのビルドを自動実行
できます。
◆CircleCIの設定
前述の記事に書いてあるとおりですが、circle.ymlの中で、
BUNDLE_UPDATEがtrueの時だけ処理が切り替わるようにしました。
[2015-01-15-1] のcircle.ymlはこのように変わりました。
 ※ circle.ymlのpre,override,postはよく忘れるので、リンクを張ってお
きます。 https://circleci.com/docs/configuration あとはここでGitHubのtokenを作成 し、CircleCIのProject Setting -&gt;
Environment variablesにGITHUB_ACCESS_TOKENという名前で追加するだけです。
◆まとめ
CircleCIを起動するRubyスクリプトを作成し、Heroku Buttonでインストー
ル可能にしました。bundle updateが必要な数だけHerokuアプリを作成し、
必要なくなったら捨てれば良いので、メンテナンスコストが少なく済みます。
追記(2015-01-25):
https://github.com/masutaka/ci-build-trigger 自体のbundle updateは
http://tachikoma.io を使うことにしました。外部サービス使えたら使う
に越したことはないですよね。]]></description>
        </item>
        <item>
            <title><![CDATA[GitHubにpushしたらCircleCIが自動デプロイしてim.kayacに通知する]]></title>
            <link>https://masutaka.net/2015-01-15-1/</link>
            <guid>https://masutaka.net/2015-01-15-1/</guid>
            <pubDate>Thu, 15 Jan 2015 00:00:00 GMT</pubDate>
            <description><![CDATA[[2015-01-13-1] でデプロイ時にchalow が実行されるようになったので、
GitHubへのPushをトリガーにして自動デプロイを実装してみました。
文字で分かりづらいですが、よくある自動デプロイと同じです。(chalow
でここまでやっている人はいるのかな？)
 GitHubのmasterへのマージをトリガーにして、CircleCIが自動デプロイ開始 CircleCIがGitHubの最新のソースを取得(a) テスト実行(chalowを実行するだけ) capistranoでデプロイ開始。masutaka.netにsshでログインする(b) masutaka.netの中でGitHubの最新のソースを取得(c) index.html等、静的コンテンツを配置 chalowを実行して/chalow以下の静的コンテンツを配置 IRC -&gt; tiarra(-&gt; Auto::Im) -&gt; im.kayacという流れで手元のiPhoneに通知  sshの鍵が3つ必要でした
(a) CircleCIとGitHub連携時に自動生成される
(b) CircleCIのProject settings -&gt; Permissions -&gt; Checkout SSH keysから生成する。(a)もここで確認可能
(c) ローカルでssh-keygenコマンドを実行して生成して、Project settings -&gt; Permissions -&gt; SSH Permissionsに登録
(c)は普段使っているsshの鍵でも動きますが、CircleCIに秘密鍵を渡した
くなかったので、新規に作りました。
circle.ymlとその中で使われるシェルスクリプトはこんな感じです。
YAMLだけで書けないのかな。。
 8はCircleCIのIRC連携です(Project setting -&gt; Notifications -&gt; Chat Notifications)。
適当なUsernameを入れないとエラーになってしまいました。
iPhoneのim.kayac.comへの通知はこんな感じ。
LimeChatにはこのように通知されます。]]></description>
        </item>
        <item>
            <title><![CDATA[このブログをデプロイする時にchalowも実行するようにした]]></title>
            <link>https://masutaka.net/2015-01-13-1/</link>
            <guid>https://masutaka.net/2015-01-13-1/</guid>
            <pubDate>Tue, 13 Jan 2015 00:00:00 GMT</pubDate>
            <description><![CDATA[[2014-05-03-1] のバージョンアップ。
http://masutaka.net はcapistranoでデプロイしてますが、
http://masutaka.net/chalow はchalow+rsyncを実行する
mkchalow[2009-06-14-3] というコマンドでアップロードしてました。
ローカルのChangeLogメモをchalowで変換しrsyncするので、自分の
MacBook Airと会社のMac miniの複数環境でブログを書くと、過去記事が
消える可能性が出てきます。
そういうのを気をつけるのが面倒なので、capistranoでのデプロイ時に
chalowコマンドも実行するようにしました。
以下はcapistranoの設定ファイルです。melodyはVagrantのVMです。
 [2009-06-14-3] に作ったEmacsのmkchalow()もcap-deploy()として
新たに生まれ変わりました。ChangeLogメモを開いた状態でC-cC-cすると
デプロイ出来ます。
 default-directoryの最後に/(slash)を付けないと、実行ディレクトリ
が~/src/github.com/masutakaになる問題にハマりました。
start-process()でencode_current_directory()からカレントディレクト
リを求めており 、その中でFunhandled_file_name_directory()を使ってい
る ためのようです。
Funhandled_file_name_directory()はelispのfile-name-directory()と等
価です。
UNIX上のEmacsではディレクトリ名の最後には/(slash)を付けたほうが良
いかもしれません。
 http://www.gnu.org/software/emacs/manual/html_node/elisp/File-Name-Expansion.html The value is always a string ending with a slash.
 default-directory ⇒ &quot;/user/lewis/manual/&quot;   ]]></description>
        </item>
        <item>
            <title><![CDATA[WERCKER-BOX-RVM-VAGRANT-AWS v1.2.0 released]]></title>
            <link>https://masutaka.net/2015-01-11-2/</link>
            <guid>https://masutaka.net/2015-01-11-2/</guid>
            <pubDate>Sun, 11 Jan 2015 01:00:00 GMT</pubDate>
            <description><![CDATA[WERCKER-BOX-RVM-VAGRANT-AWS - wercker Vagrant-1.7.2に対応しました。
Vagrant-1.7.1で必要になったworkaroundを削除出来ました。 CHANGELOG のこれが相当するのかな
 installer: SSL cert bundle contains 1024-bit keys, fixing SSL verification for a lot of sites.
 会社のJenkinsマシンに入れているVagrantもバージョンアップしよう。]]></description>
        </item>
        <item>
            <title><![CDATA[Herokuにberkshelf-apiサーバを立ててみた]]></title>
            <link>https://masutaka.net/2015-01-11-1/</link>
            <guid>https://masutaka.net/2015-01-11-1/</guid>
            <pubDate>Sun, 11 Jan 2015 00:00:00 GMT</pubDate>
            <description><![CDATA[前回[2015-01-09-1] はBerksfileにGitリポジトリを直接書きましたが、レ
シピの依存関係の解決ができませんでした。
berkshelf-apiサーバを立てるとその問題が解消されるようなので、
Herokuにberkshelf-apiサーバを立てて検証してみました。
適当なOrganizationを作り  $ berks cookbook git .
などで作ったcookbookを用意します。gitのtagを振る必要がある点は注意です。
 https://github.com/doramichan/git/releases https://github.com/doramichan/hub/releases berksコマンドは
 $ gem install berkshelf
などでインストールできます。
 hubレシピはgitレシピに依存させた ため、Berksfileに
 cookbook &lsquo;hub&rsquo;
と書けばgitレシピもインストールされるはずです。
※適当なレシピなので動作は保証しません。
 次にapiサーバを用意します。Heroku stackがcedar-14だと動かなかった のでcedarに変更しています。LD_LIBRARY_PATHの追加はREADME.md の説明
のとおりです。
$ git clone git@github.com:berkshelf/api.berkshelf.com.git $ cd api.berkshelf.com $ heroku create -s cedar masutaka-api-berkshelf $ heroku config:add LD_LIBRARY_PATH=/app/vendor/libarchive-3.1/lib $ git push heroku master 続けてconfig.jsonを追加し、先ほどのdoramichan Organizationを参照さ
せます。
{ &#34;endpoints&#34;: [ { &#34;type&#34;: &#34;github&#34;, &#34;options&#34;: { &#34;organization&#34;: &#34;doramichan&#34;, &#34;access_token&#34;: &#34;YOUR GITHUB ACCESS TOKEN&#34;, &#34;api_endpoint&#34;: &#34;https://api.]]></description>
        </item>
        <item>
            <title><![CDATA[あるGitリポジトリのサブディレクトリにあるChefレシピを1つだけ取り込む方法]]></title>
            <link>https://masutaka.net/2015-01-09-1/</link>
            <guid>https://masutaka.net/2015-01-09-1/</guid>
            <pubDate>Fri, 09 Jan 2015 00:00:00 GMT</pubDate>
            <description><![CDATA[Chef-solo(Knife-solo)とBerkshelfの話。
Berksfileに例えばこうやって書けば使えた。これは有能！
relってサブディレクトリのことだったのか。Gemfileで使ったことなかった。
 cookbook &rsquo;nginx&rsquo;, git: &lsquo;git@github.com :masutaka/cookbooks.git&rsquo;, rel: &rsquo;nginx&rsquo;
 $ bundle exec berks vendor vendor/cookbooksを実行すると、
vendor/cookbooks/nginxにインストールされる。
.chef/knife.rbを以下のように変更すると、インストールしたnginxレシ
ピをnodeやroleから参照できる。ちなみにcookbook_pathは後ろから先に
参照される。$PATHの逆。
 cookbook_path [&ldquo;cookbooks&rdquo;, &ldquo;site-cookbooks&rdquo;]
↓
cookbook_path [&ldquo;cookbooks&rdquo;, &ldquo;site-cookbooks&rdquo;, &ldquo;vendor/cookbooks&rdquo;]
 ※ .gitignoreに/vendor/cookbooksの追加も忘れずに。
private repositoryの時はこの書式は使えなかった。やり方はあるかもし
れない。
 cookbook &rsquo;nginx&rsquo;, github: &lsquo;masutaka/cookbooks&rsquo;, rel: &rsquo;nginx&rsquo;
 今までは https://github.com/masutaka/cookbooks とかをGitのsub
moduleとしてガッツリ指定していたため、追随するのが大変だった。
cookbooksを変更する人も気を使ったし。
この辺の話に関連する。
JenkinsでサーバのCIを始めました｜feedforce Engineers&rsquo; blog Berksfileの書き方は公式ドキュメントに書いてある。
http://berkshelf.com/ 追記:
依存関係(metadata.rbのdepends)は見てくれなかった。そりゃそうか。
継続調査。]]></description>
        </item>
        <item>
            <title><![CDATA[OSXのEmacsにインラインパッチなんていらなかったんや...]]></title>
            <link>https://masutaka.net/2015-01-04-1/</link>
            <guid>https://masutaka.net/2015-01-04-1/</guid>
            <pubDate>Sun, 04 Jan 2015 00:00:00 GMT</pubDate>
            <description><![CDATA[今更ながら年末のEmacs Advent Calendarを読んでいたら、
「Emacs Lispの汎変数（とその他） - Qiita 」にさらりとmac-auto-ascii-modeの紹介が。
 また、新機能 mac-auto-ascii-mode を有効にすると、ミニバッファにカーソルを移動する際、自動的に英語モードになります。これで日本語入力モードでうっかり M-x shell と入力しようとして M-x しぇっl になるような悲惨な事故をなくすことができます。
 2014-11-21のemacs-devel でアナウンスされていました。
 *** New global minor mode `mac-auto-ascii-mode&rsquo; for Mac OS X 10.5 and
later. If enabled, it automatically selects the most-recently-used
ASCII-capable keyboard input source on some occasions: after prefix
key (bound in the global keymap) press such as C-x and M-g, and at the
start of minibuffer input.]]></description>
        </item>
        <item>
            <title><![CDATA[WERCKER-BOX-RVM-VAGRANT-AWS v1.1.1 released]]></title>
            <link>https://masutaka.net/2015-01-01-1/</link>
            <guid>https://masutaka.net/2015-01-01-1/</guid>
            <pubDate>Thu, 01 Jan 2015 00:00:00 GMT</pubDate>
            <description><![CDATA[WERCKER-BOX-RVM-VAGRANT-AWS - wercker Ruby-2.2.0に対応しました。
このPRがマージされるのを待ってました。
https://github.com/wercker/box-rvm/pull/9 ]]></description>
        </item>
        <item>
            <title><![CDATA[WERCKER-BOX-RVM-VAGRANT-AWS v1.0.2 released]]></title>
            <link>https://masutaka.net/2014-12-24-1/</link>
            <guid>https://masutaka.net/2014-12-24-1/</guid>
            <pubDate>Wed, 24 Dec 2014 00:00:00 GMT</pubDate>
            <description><![CDATA[WERCKER-BOX-RVM-VAGRANT-AWS - wercker Vagrantを最新の1.7.1にしました。
メジャーバージョンも思い切って'1&rsquo;に上げました。
今のvagrant-aws(v0.6.0)とUbuntu-12.04の組み合わせだとvagrant
(up|destroy)に失敗しますが、うまく対策出来たのでリリース＆アナウン
スすることにしました。
&lsquo;1.0.0&rsquo;で対策なし、&lsquo;1.0.1&rsquo;で間違ったworkaroundを追加、&lsquo;1.0.2&rsquo;で修
正したので無駄にバージョンが上がっています。
 こうしたらうまくいったよコメント  実際に対策した修正   P.S.
werckerでvagrant-awsを含むBoxは自分の含めて2つしかないけど、EC2使っ
たサーバのCIって需要少ないのかな？不思議。]]></description>
        </item>
        <item>
            <title><![CDATA[github-nippou v0.1.1 released]]></title>
            <link>https://masutaka.net/2014-12-18-1/</link>
            <guid>https://masutaka.net/2014-12-18-1/</guid>
            <pubDate>Thu, 18 Dec 2014 00:00:00 GMT</pubDate>
            <description><![CDATA[https://rubygems.org/gems/github-nippou/versions/0.1.1 イベントを取得できない問題を修正しました。
今までIssuesEvent, IssueCommentEvent, PullRequestEventを表示してい
ましたが、PullRequestReviewCommentEventを読み捨てていたのが原因。
(動けば良いレベルで作っているので。。)
あとはCommitCommentEventに対応できれば完璧な日報が書けそうですが、
どのように表示しようか悩み中。
https://github.com/masutaka/github-nippou/issues/1 にグダグダ書い
ています。
職場の同僚がさっそく使ってくれてうれしい限り。]]></description>
        </item>
        <item>
            <title><![CDATA[nginxのアクセスログをFluentd経由でelasticsearchとBigQueryに送り始めた]]></title>
            <link>https://masutaka.net/2014-12-14-1/</link>
            <guid>https://masutaka.net/2014-12-14-1/</guid>
            <pubDate>Sun, 14 Dec 2014 00:00:00 GMT</pubDate>
            <description><![CDATA[masutaka.netのnginxアクセスログはmongodbとGrowthForecastに送ってます。
 [2013-07-14-1] nginxのアクセスログをFluentd経由でMongoDBに保存してみた [2013-08-15-1] nginxのアクセスログをFluentd経由でGrowthForecastのグラフにしてみた  今回、elasticsearchとBigQueryにも送り始めました。個人での必要性は
全くなく、単にelasticsearchとBigQueryを知っておきたかったからです。
elasticsearch    http://kibana.masutaka.net/ からkibana 経由で検索出来るようにしてい
ます(要Basic認証)。kibanaは評判が良かったので期待してたんですが、
使いづらいです。学習が必要そうです。。
インストールの概要 elasticsearchはopenjdk-7-jdkのインストールと、公式のインストール方
法 をそのままChefのレシピにしました。
kibanaは/var/www以下に公式のtar ball を展開して、nginxの静的コンテ
ンツの設定を追加しました。
ハマりどころ 特になく、jdk, elasticsearch, kibana, nginxのレシピを良い感じに組
み立てるのに時間を使いました。
Google BigQuery    SQLなのでelasticsearchより取っ付きやすいのが良いです。
あ、Row=4はアカンやつや
インストールの概要 fluent-plugin-bigqueryのREADME.md を読みつつ、以下の記事そのままで
できました。ありがとうございます。
FluentdでGoogle BigQueryにログを挿入してクエリを実行する - Qiita projectはウェブ上から作り、dataset(db)とtableはGoogle Cloud SDK付
属のbqコマンドで作りました。google-cloud-sdkはbrew caskでインストー
ルできます。
 $ bq mk masutakanet:nginx
$ bq mk -t masutakanet:nginx.access bigquery-nginx.json
 td-agent.confはこのようになりました。
&lt;match nginx.access.masutaka.net&gt; type copy &lt;store&gt; type mongo (省略) &lt;/store&gt; &lt;store&gt; type elasticsearch (省略) &lt;/store&gt; &lt;store&gt; type growthforecast (省略) &lt;/store&gt; &lt;store&gt; type bigquery method insert auth_method private_key email XXXXXXXX@developer.]]></description>
        </item>
        <item>
            <title><![CDATA[emacs-helm-ghq v1.4.1 released]]></title>
            <link>https://masutaka.net/2014-12-13-1/</link>
            <guid>https://masutaka.net/2014-12-13-1/</guid>
            <pubDate>Sat, 13 Dec 2014 00:00:00 GMT</pubDate>
            <description><![CDATA[https://github.com/masutaka/emacs-helm-ghq/releases/tag/1.4.1 最新のHelmではe000b84 でhelm-files-match-only-basenameが削除され、
helm-source-ghqが使えなくなったので修正しました。
https://github.com/masutaka/emacs-helm-ghq/pull/6 https://github.com/masutaka/emacs-helm-ghq/pull/7 削除された関数をただ復活させただけという。。。
最近のEmacsはdefclassなんてあるんだ。なるほど分からん。
むしろ、(helm-get-actions-from-type helm-source-locate)がnilを返し
て、何もactionが発動しないのにハマりました。結果的にDRYに書けたの
でよかったのかな。
@yuutayamadaさんありがとうございました。]]></description>
        </item>
        <item>
            <title><![CDATA[markdownの目次を自動生成する方法はこれかな？]]></title>
            <link>https://masutaka.net/2014-12-12-1/</link>
            <guid>https://masutaka.net/2014-12-12-1/</guid>
            <pubDate>Fri, 12 Dec 2014 00:00:00 GMT</pubDate>
            <description><![CDATA[http://stackoverflow.com/a/27045099 $ npm install -g coryfklein/doctoc $ rehash # for zsh $ doctoc README.md README.mdに自動挿入される。修正せずそのまま使えば良いと思う。
ちなみにNode.jsのインストールはnvmでやると良いと思う。
nvmのインストール
$ brew install nvm ~/.zshenvに以下を追加
export NVM_DIR=$HOME/.nvm source $(brew --prefix nvm)/nvm.sh Node.jsのインストール
$ nvm install v0.10.33 $ nvm alias default v0.10.33 ]]></description>
        </item>
        <item>
            <title><![CDATA[会社の技術ブログを書きました(3回目)]]></title>
            <link>https://masutaka.net/2014-12-11-1/</link>
            <guid>https://masutaka.net/2014-12-11-1/</guid>
            <pubDate>Thu, 11 Dec 2014 00:00:00 GMT</pubDate>
            <description><![CDATA[[2014-10-20-1] に引き続き、会社の技術ブログを書きました。
Vagrantで簡単に作れる！！RubyやKyotoTycoonのrpmたち｜feedforce Engineers&rsquo; blog CentOSを本番環境で使っている方は、Rubyのバージョンアップはどうして
いるんですかね？
rbenvを使っているところもあるのかな。記事にも書いたけど、それだと
サーバのCIは使いものにならないけど。
最近はサーバのCIやDockerのおかげか、低レイヤーな技術が見直されてい
る気がします。前者は今回のrpm、後者はシェルスクリプト。
個人的には地味な技術は好きなのでちょっとうれしい。]]></description>
        </item>
        <item>
            <title><![CDATA[いつも日報書くときに使っているスクリプトをGem化した]]></title>
            <link>https://masutaka.net/2014-12-07-1/</link>
            <guid>https://masutaka.net/2014-12-07-1/</guid>
            <pubDate>Sun, 07 Dec 2014 00:00:00 GMT</pubDate>
            <description><![CDATA[Githubで今日なにをしたか、調べるスクリプトを書いた - きたけーTechブログ こちらのスクリプトを自分用に変更して使ってましたが、gem化してない
のが気持ち悪かったので、この度公開しました。
 github-nippou | RubyGems.org | your community gem host  RubyGems.org is the Ruby community's gem hosting service. Instantly publish your gems and install them. Use the API to interact and find out more information about available gems. Become a contributor and enhance the site with your own changes.
  ◆インストール方法
$ gem install github-nippou
◆説明
実行するとmarkdown形式で出力されるので、Qiita:Teamにペタっと貼っています。
$ github-nippou ＊ [Fix 勤怠1ヶ月前から今日までcsvで - blockgiven/ruboty-kintai](https://github.com/blockgiven/ruboty-kintai/pull/1) by masutaka あらかじめ、GitHubのアカウントとトークンを設定する必要があります。]]></description>
        </item>
        <item>
            <title><![CDATA[『X'mas Collections music from BRAVELY DEFAULT』がめっちゃいい]]></title>
            <link>https://masutaka.net/2014-12-03-1/</link>
            <guid>https://masutaka.net/2014-12-03-1/</guid>
            <pubDate>Wed, 03 Dec 2014 00:00:00 GMT</pubDate>
            <description><![CDATA[  loading...
   if (localStorage.getItem("pref-theme") === "light") { const elements = document.getElementsByClassName('twitter-tweet'); for (let i = 0; i  もう何十回も聴きましたが、めっちゃ良いです。仕事中はエンドレスでか
けてますし、今も聴いてます。あとは寝る前と起きた時。
中でも『永遠の刹那』がすごい変わり様で壮大な曲になっています。
 Original (Disc1 Track02)  X&rsquo;mas Collections (Trask04)   もう別の曲になっていて、初め分かりませんでした。
逆にTrack12の『追憶は郷愁の調べ』はなぜこのアレンジにしたんでしょ
う？違和感ありまくりです。
にしてもいいサントラだなー
ブレイブリーセカンド もそろそろ出るのかな。楽しみです。あ、その前に
レジェンドオブレガシー が出ますね。Newニンテンドー3DS も合わせて買わ
ないと。。。
  ]]></description>
        </item>
        <item>
            <title><![CDATA[package.elでインストールしたパッケージをCaskで管理することにした]]></title>
            <link>https://masutaka.net/2014-11-03-1/</link>
            <guid>https://masutaka.net/2014-11-03-1/</guid>
            <pubDate>Mon, 03 Nov 2014 00:00:00 GMT</pubDate>
            <description><![CDATA[今まで
「package.elでインストールしたパッケージはGitリポジトリに丸ごとcommit」
という豪快な管理をしていました。
アップデートで不具合があってもすぐ戻せるという利点はあったものの、
 Gitリポジトリが肥大化する なんか頭悪い
という問題がありました。  ちょっと前からCask で管理するのが流行っています。
 Cask - naoyaのはてなダイアリー  package.elから Caskに切り替えました - Life is very short   brewでインストールすると依存でEmacsが入るのでNG。
 $ curl -fsSkL https://raw.github.com/cask/cask/master/go | python
 こちらでのインストールは単純に~/.caskにgit cloneするだけでしたので、
Caskに移行しました。
Gitで管理していたとはいえ、インストールされたパッケージが直接イン
ストールしたのか、依存で入ったのか、使わなくなって残っているだけな
のかの確認がめっちゃ大変でした。2時間くらいかかった。。
RubyのbundlerのようにCask.lock的なファイルがあればベストでしたが、
Time Machine使い始めたし[2014-09-10-1] 、まあいいかなと。
こちらが私のCaskファイル。http://masutaka.net/ からも辿れます。
 今回の件で[2014-10-25-1] の方法でEmacsをビルドすると、/usr/local
以下にEmacsがインストールされることに気づきました。。
一旦/usr/local/bin/emacsをリネームしました。
追記(2014-11-03):
[2014-10-25-1] のビルド手順を変更しました。]]></description>
        </item>
        <item>
            <title><![CDATA[Slackを使っている時、⌘-wでウィンドウを閉じないようにした]]></title>
            <link>https://masutaka.net/2014-11-02-2/</link>
            <guid>https://masutaka.net/2014-11-02-2/</guid>
            <pubDate>Sun, 02 Nov 2014 01:00:00 GMT</pubDate>
            <description><![CDATA[Slackでうっかり⌘-wするとウィンドウが閉じてしまい、Slackを再起動し
ないと復旧できないですよね？(隣の席の同僚はそうではなった。私だけ？)
そういうわけでKarabiner (旧名KeyRemap4MacBook)で、⌘-wを無視する設定
を書きました。
追加後の~/Library/Application Support/Karabiner/private.xmlはこちら。
&ldquo;Disable Command-w in Slack&quot;というitemを追加しました。
 最初の&quot;For Slack ALT+N=move next channel, ALT+P=move previous
channel&quot;はMaedaさんのブログで紹介されていたやつです。便利。
Slackのチャンネル移動をキーボードで簡単に出来るようKarabinerのprivate.xmlを書いた - Glide Note - グライドノート というかなんで⌘-wが有効なんだ。。。
See also private.xml Reference Manual 追記(2020-03-21):
⌘-1 で元に戻せるので設定を削除しました。というか、デフォルト厨なので
Karabiner 自体使わなくなりました。]]></description>
        </item>
        <item>
            <title><![CDATA[MELPAのバッジを付けてMELPA Stableを知るなど]]></title>
            <link>https://masutaka.net/2014-11-02-1/</link>
            <guid>https://masutaka.net/2014-11-02-1/</guid>
            <pubDate>Sun, 02 Nov 2014 00:00:00 GMT</pubDate>
            <description><![CDATA[MELPA badge - Life is very short 私も以下のMELPAのパッケージを持っているので、付けてみました。
https://github.com/masutaka/emacs-helm-ghq https://github.com/masutaka/elscreen-mew https://github.com/masutaka/emacs-helm-hatena-bookmark こんなのです。
    ただ、elscreen-mewとemacs-helm-hatena-bookmarkはMELPA Stableのバッ
ジが表示されませんでした。(というか、MELPA Stableなんて出来てたんや。。)
melpaのREADME によると、version-to-list()と互換性のあるバージョン文
字列をgitやhgのタグに付けるだけでStableとして扱われるそう。&ldquo;1.0.0&rdquo;
とかですね。prefixに&rsquo;v&rsquo;, &lsquo;v.&rsquo;, &lsquo;v-&lsquo;を付けてもOK
version-to-list()はこんな動作です。subr.elに定義されていました。
知らなかった。
(version-to-list &#34;1.0.0&#34;) =&gt; (1 0 0)  (version-to-list &#34;1.0.0pre2&#34;) =&gt; (1 0 0 -1 2) emacs-helm-ghqはたまたまタグを付けていたので、Stableバージョンがあ
ると扱われたみたいです。
https://github.com/masutaka/emacs-helm-ghq/tags 他の2つもタグをふったらしばらくしてStableに上がりました。
https://stable.melpa.org/#/elscreen-mew https://stable.melpa.org/#/helm-hatena-bookmark ]]></description>
        </item>
        <item>
            <title><![CDATA[WERCKER-BOX-RVM-VAGRANT-AWSをRuby-2.1.4対応させた]]></title>
            <link>https://masutaka.net/2014-11-01-1/</link>
            <guid>https://masutaka.net/2014-11-01-1/</guid>
            <pubDate>Sat, 01 Nov 2014 00:00:00 GMT</pubDate>
            <description><![CDATA[WERCKER-BOX-RVM-VAGRANT-AWS - wercker Ruby 2.1.4がリリースされたので。 とは言え、こいつが使っているBOX-RVMのバージョンを上げて デプロイし
ただけです。
WerckerはDockerに似たBOXを使用するので、継承元のBOXが更新されたら
デプロイし直す必要があります。
Wercker上でAWSを使ったサーバのCIする方法は[2014-09-14-1] 、
WERCKER-BOX-RVM-VAGRANT-AWS自体の説明は[2014-09-15-1] をどうぞ。]]></description>
        </item>
        <item>
            <title><![CDATA[MySQLは出力先が標準出力かファイルかによって内容を変える]]></title>
            <link>https://masutaka.net/2014-10-31-1/</link>
            <guid>https://masutaka.net/2014-10-31-1/</guid>
            <pubDate>Fri, 31 Oct 2014 00:00:00 GMT</pubDate>
            <description><![CDATA[こちらのブログの受け売りになりますが、タイトルのとおりです。
MySQL の結果を csv 形式で標準出力させたい - BOOLEANLABEL # 標準出力への出力と $ mysql -u root mysql -e &#39;select count(*) from user&#39; +----------+ | count(*) | +----------+ | 6 | +----------+ # ファイルへの出力は異なります。 $ mysql -u root mysql -e &#39;select count(*) from user&#39; &gt; /tmp/hoge &amp;&amp; cat /tmp/hoge count(*) 6 isatty(3)で判定しているそうです。
/* mysql-5.6.21/client/mysql.ccの1233行目 */ if (!isatty(0) || !isatty(1)) { status.batch=1; opt_silent=1; ignore_errors=0; } else status.add_to_history=1; 実際に使ってみました。
/* test.c */ #include &lt;stdio.h&gt; #include &lt;unistd.h&gt; int main(int argc, char **argv) { /* 標準出力のファイルディスクリプタは1固定 */ if(isatty(1)) { printf(&#34;貴様！標準出力だな！\n&#34;); } else { printf(&#34;貴様！ファイル出力だな！\n&#34;); } return 0; } コンパイル＆実行]]></description>
        </item>
        <item>
            <title><![CDATA[rbenv installの時に指定したgemを入れてくれるrbenv-default-gemsが便利]]></title>
            <link>https://masutaka.net/2014-10-28-1/</link>
            <guid>https://masutaka.net/2014-10-28-1/</guid>
            <pubDate>Tue, 28 Oct 2014 00:00:00 GMT</pubDate>
            <description><![CDATA[Ruby 2.1.4 リリース 早速インストールしたところ、同僚からrbenv-default-gems を教えてもら
いました。rbenv pluginです。
インストールは簡単。git cloneして、
 $ git clone git@github.com :sstephenson/rbenv-default-gems.git ~/.rbenv/plugins/rbenv-default-gems
 ~/.rbenv/default-gemsを作るだけです。
$ cat ~/.rbenv/default-gems gem-src bundler ghn puppet-lint html2haml octokit git-pr-release gem-search sass github_scouter rbenv install時に上のgemが自動的にインストールされます。
$ RUBY_CONFIGURE_OPTS=&#34;--with-readline-dir=`brew --prefix readline` --with-openssl-dir=`brew --prefix openssl`&#34; rbenv install 2.1.4 Downloading ruby-2.1.4.tar.gz... -&gt; http://dqw8nmjcqpjn7.cloudfront.net/bf9952cdeb3a0c6a5a27745c9b4c0e5e264e92b669b2b08efb363f5156549204 Installing ruby-2.1.4... Installed ruby-2.1.4 to /Users/masutaka/.rbenv/versions/2.1.4 Fetching: gem-src-0.6.3.gem (100%) # &lt;= ここから ... See also Rbenv-default-gemsを試してみた - akadama ]]></description>
        </item>
        <item>
            <title><![CDATA[ローカルの静的コンテンツをHerokuに置き始めた]]></title>
            <link>https://masutaka.net/2014-10-25-2/</link>
            <guid>https://masutaka.net/2014-10-25-2/</guid>
            <pubDate>Sat, 25 Oct 2014 01:00:00 GMT</pubDate>
            <description><![CDATA[他の人に見せたくない静的コンテンツは、ローカルのnginx経由で見られ
るようにしていたんだけど、いろいろ面倒になってきたのでHerokuに置き
始めた。
やり方は簡単で、以下のリポジトリのHerokuボタンを押すだけ。
masutaka/heroku-static-contents public以下に.htmlとかをcommitして、git push heroku masterすればOK。
BASIC認証も使えて便利。]]></description>
        </item>
        <item>
            <title><![CDATA[Emacs-24.4 on OSX Yosemiteのビルド手順詳細]]></title>
            <link>https://masutaka.net/2014-10-25-1/</link>
            <guid>https://masutaka.net/2014-10-25-1/</guid>
            <pubDate>Sat, 25 Oct 2014 00:00:00 GMT</pubDate>
            <description><![CDATA[なんとかビルド出来ました。こりゃEmacs人口が減るわけだ。。
Emacs-24.3の頃からクラッシュする問題に悩まされていたんです。
loading...
   if (localStorage.getItem("pref-theme") === "light") { const elements = document.getElementsByClassName('twitter-tweet'); for (let i = 0; i  そんな中見つけたのがMew-jaのこの情報 。
 素の Emacs は、Mac では不安定です。山本さんのパッチを当てて使うと、ほ
とんど落ちなくなります。
 ftp://ftp.math.s.chiba-u.ac.jp/emacs/  &ndash;かず
 そこで今回からこのパッチ(experimental/hackers-onlyパッチ)を使うことにしました。
Emacs24 のインストールと新機能 : 紹介マニア インラインパッチ(IMEパッチ)は当たらなくなるので、ac-mozc.el +
mozc_emacs_helperを使うことにしました。というかインラインパッチの
最新はどこに。。(2015-01-04追記: もういらないみたいです。→ [2015-01-04-1] )
mozc-emacs-helperをインストールするhomebrewを書いた｜Act as Professional 最終的なビルド手順はこちら。前述の紹介マニアのやり方ほぼそのままです。
デフォルトでは/usr/local以下に一部インストールされてしまうので、
configureに&ndash;prefixオプションを指定し、~/opt以下に変更しています。
この辺はご自由に。パッチなしのビルドではなぜ必要ないかは調べていません。
$ curl -LO http://ftp.gnu.org/pub/gnu/emacs/emacs-24.4.tar.xz $ curl -LO ftp://ftp.math.s.chiba-u.ac.jp/emacs/emacs-24.4-mac-5.2.tar.gz $ tar xfJ emacs-24.4.tar.xz $ tar xfz emacs-24.4-mac-5.2.tar.gz $ cd emacs-24.]]></description>
        </item>
        <item>
            <title><![CDATA[会社の技術ブログを書きました(2回目)]]></title>
            <link>https://masutaka.net/2014-10-20-1/</link>
            <guid>https://masutaka.net/2014-10-20-1/</guid>
            <pubDate>Mon, 20 Oct 2014 00:00:00 GMT</pubDate>
            <description><![CDATA[[2014-08-09-1] に引き続き、会社の技術ブログを書きました。
JenkinsでサーバのCIを始めました｜feedforce Engineers&rsquo; blog ネタ的には新しくはないのですが、フィードフォースのエンジニアが今今
どんなことをしているかを伝えたくて書きました。
こういう記事を投稿し続けていけば、興味あるエンジニアの目に止まるん
じゃないかと。
弊社は最近採用に力を入れています。
結構気軽に会いにいけるので、興味ある方はどうぞ☆
 フィードフォースは「会いにいける！」ベンチャーです！(社長指名可) - 株式会社フィードフォースの求人 - Wantedly  Rubyで開発したいエンジニアをウォンテッド！（土日面談／スカイプ面談可） - 株式会社フィードフォースの求人 - Wantedly  【株式会社フィードフォースの求人】 【自社サービス開発／新規事業立ち上げ／残業10H以内／土日面談可】Webエンジニア - Forkwell Jobs   ]]></description>
        </item>
        <item>
            <title><![CDATA[Werckerのデプロイボタンはなんだかんだ言って便利だった]]></title>
            <link>https://masutaka.net/2014-10-04-1/</link>
            <guid>https://masutaka.net/2014-10-04-1/</guid>
            <pubDate>Sat, 04 Oct 2014 00:00:00 GMT</pubDate>
            <description><![CDATA[[2014-09-14-1] に書いたとおり、このmasutaka.netではサーバのCIをして
います。
今までテストが通ってから、手動でCook+Serverspecして不便に感じてませ
んでしたが、試しにWerckerのデプロイ設定をしてみたら、案外便利でよく
使っています。
wercker.ymlはこんな感じです。
 管理画面からDeploy targetを作る必要があります。ちょっと管理画面が古
いですが、こちらを参考にしてください。
wercker + Capistrano で自動デプロイ - milk1000cc&rsquo;s blog 私はTarget nameをProductionにして、SSH keysで作った鍵を
$WERCKER_SSH_KEY_PRIVATEという名前でwercker.ymlから参照できるように
しました。
ブラウザからWerckerのサイトに行くのが面倒だけど、個人でChatOpsやっ
てもなあ&hellip;。とはいえ、やるかもしれませんが。]]></description>
        </item>
        <item>
            <title><![CDATA[『ベヨネッタ2』がやってきた！]]></title>
            <link>https://masutaka.net/2014-09-23-3/</link>
            <guid>https://masutaka.net/2014-09-23-3/</guid>
            <pubDate>Tue, 23 Sep 2014 02:00:00 GMT</pubDate>
            <description><![CDATA[ちょっとやってみた感じ、良い意味で1のシステムが使いまわされています(けっこう同じw)。前作をやった人は違和感ないでしょう。
ベヨネッタ特有の「連打しない」「回避重要」にも慣れてきました。下手くそですけどね！
 あ、同封の1は無駄に任天堂色がついており、なかなか良さげです。ご覧のとおりのピー◯姫になります。
んで、Wii Uはベヨネッタ2のために買いました。ドラクエ7のために3DSを買った[2013-02-16-1] 以来です。ちなみにPS3はデビルメイクライ4。
それにしても、Wii Uの予想以上の性能の良さにビックリ。全くストレスなく動きます。ベヨネッタ出たての頃、PS3はローディングがめちゃめちゃ遅かったのに(その後のアップデートでましになった)。
コントローラにも画面があるし、ここまでの性能必要なのかしら？w
 Wii U本体縦置きスタンド も買いました。送料込みで500円と安かったので。
※今回は柴田さんの記事でよし買おう！と思いました。
 Wii U を買った - HsbtDiary(2014-08-31)  Wii U の縦置き台を買った - HsbtDiary(2014-09-11)   P.S.
序盤にジェット機の上で戦うやつ、Kunoichi のオマージュ？と思いました。両方とも田中敦子 さんだし、キャラ被っているし。どうなんでしょう？]]></description>
        </item>
        <item>
            <title><![CDATA[GrowthForecastがsegmentation faultで落ちるのでrelocatable-perlを使い始めた件]]></title>
            <link>https://masutaka.net/2014-09-23-2/</link>
            <guid>https://masutaka.net/2014-09-23-2/</guid>
            <pubDate>Tue, 23 Sep 2014 01:00:00 GMT</pubDate>
            <description><![CDATA[こちらも前回[2014-09-23-1] に引き続き、さくらのVPS上のUbuntu 14.04の話です。
今までのUbuntu 12.04 32bitではGrowthForecast は問題なく動いていたのに、Ubuntu 14.04 64bitにしたらなぜか動かなくなりました。。
Perlはplenvでインストールした5.20.0と5.20.1で確認。GrowthForecastは最新。
$ carton exec -- perl growthforecast.pl --data-dir . --enable-float-number &amp; zsh: segmentation fault carton exec growthforecast.pl --data-dir . --enable-float-number (エラーメッセージはメモしてなかったので適当) ググってみたらこちらを発見。
https://github.com/shoichikaji/relocatable-perl-growthforecast って、YAPC[2014-08-31-1] のLTで発表されていたKajiさんじゃないですか。
リロケータブル Perl - skaji&rsquo;sblog にも紹介記事があります。
ひとことで言うと「ツールのためにPerlインストールのだるいので、再配置可能なPerlにしてツールと一緒に配布しちゃえばいいんじゃね？」というやつです。
トラブル続きで意識が低くなっているので、リリース版をそのまま使用。
$ mkdir ~/growthforecast &amp;&amp; cd $_ $ wget https://github.com/shoichikaji/relocatable-perl-growthforecast/releases/download/0.23/growthforecast-0.83-x86_64-linux.tar.gz $ tar xzf growthforecast-0.83-x86_64-linux.tar.gz $ ./growthforecast-0.83-x86_64-linux/bin/growthforecast.pl --data-dir . --enable-float-number &amp; 動いた！ http://masutaka.net:5125 しかし、、
loading...
   if (localStorage.getItem("pref-theme") === "]]></description>
        </item>
        <item>
            <title><![CDATA[さくらのVPSでCookがダンマリになる件を回避した]]></title>
            <link>https://masutaka.net/2014-09-23-1/</link>
            <guid>https://masutaka.net/2014-09-23-1/</guid>
            <pubDate>Tue, 23 Sep 2014 00:00:00 GMT</pubDate>
            <description><![CDATA[[2013-05-19-1] にインストールしたUbuntu 12.04はうっかり32bit版でした。。仕方がないのでUbuntu 14.04へのアップグレードがてら、クリーンインストールすることにしました。
管理画面からポチポチしてOSのインストールは完了。CookはあらかじめVirtualBoxとEC2で確認していたので万全です(ｷﾘｯ
と思いきや、いつまでたってもRecipeが処理されません&hellip;。
$ knife solo cook masutaka.net Running Chef on masutaka.net... Checking Chef version... Uploading the kitchen... Generating solo config... Running Chef... Starting Chef Client, version 11.16.2 (ここでダンマリ) これまた仕方がないので、サーバ側の/opt/chef/embedded/lib/ruby/gems/1.9.1/gems以下をprintfデバッグ(というかpデバッグか)で調べたところ、Chefがサーバ情報を取得するときに使うOhaiのGCEプラグインから返ってこないことがわかりました。GCEとはGoogle Compute Engineです。なんでChefが？
で、結論から言うと、GCEプラグインをOFFにしたら解決しました。
knife solo prepareのあとに/opt/chefが作られるので、/opt/chef/embedded/lib/ruby/gems/1.9.1/gems/ohai-7.4.0/lib/ohai/config.rbを以下のように修正。あとはknife solo cookするだけです。knife solo bootstrapは出来ないことになります。
 default :disabled_plugins, []
↓
default :disabled_plugins, [:GCE]
 knife soloはchef-soloをリモートから実行するコマンドで、
 /opt/chef/embedded/bin/ruby /usr/bin/chef-solo -c /home/masutaka/chef-solo/solo.rb -j /home/masutaka/chef-solo/dna.json
のようなchef-soloコマンドを実行します。root権限だったかな？
 この/home/masutaka/chef-solo/solo.rbに
 Ohai::Config[:disabled_plugins] = [:GCE]
を書き、前述のchef-soloコマンドを実行すれば/opt/chef以下を修正する必要はありませんが、残念ながらこのファイルはknife solo cook時に自動生成されます。]]></description>
        </item>
        <item>
            <title><![CDATA[WerckerでRVMとVagrantのBoxを作った]]></title>
            <link>https://masutaka.net/2014-09-15-1/</link>
            <guid>https://masutaka.net/2014-09-15-1/</guid>
            <pubDate>Mon, 15 Sep 2014 00:00:00 GMT</pubDate>
            <description><![CDATA[昨日[2014-09-14-1] の記事より。
 wercker.ymlも毎回Vagrantをインストールして、vagrant upするという無
駄なことをしているので、Docker使って時短させるかもしれない。
 この場合Dockerは間違い。Wercker的にはBox使うのが正解なので作ってみ
ました。(このくらいのBoxはあるかと思ったらなかったのが意外でした。)
  以下のようにinheritsを使うと、任意のBoxを継承できるみたいです。
ちょっと前までwercker.ymlに複数書けばそうなるかと思ってました。  inherits: wercker/rvm@2.0.1  実コードはスクリプトのベタ書きだけです。
script: | VAGRANT_VERSION=1.6.5 wget https://dl.bintray.com/mitchellh/vagrant/vagrant_${VAGRANT_VERSION}_x86_64.deb sudo dpkg -i vagrant_${VAGRANT_VERSION}_x86_64.deb vagrant plugin install vagrant-aws unf あとはWerckerの管理画面からGitHubのリポジトリを登録し、Wercker
directoryにデプロイすれば使えます。Public Appにすることをお忘れなく。
wercker.ymlはこのようになりました。昨日 と比べるとBoxがwercker/rvmか
らmasutaka/rvm-vagrant-awsに変わったことと、vagrantやvagrant-awsプ
ラグインをインストールしてないのが分かると思います。
 Boxの作り方自体はこちらが参考になると思います。
werckerで自分のBOXを作ってみた - 紺屋高尾 11分33秒かかっていたテストが10分46秒に短縮されました！
って、あれ、あんまり変わってない。。
パフォーマンス云々より、Dockerっぽく改善できたので良しとします。
今度はEC2使わずにWerckerでDocker立ち上げてCIしたいなあ。]]></description>
        </item>
        <item>
            <title><![CDATA[Wercker + Vagrant + AWS + serverspecでChefのレシピをCIする]]></title>
            <link>https://masutaka.net/2014-09-14-1/</link>
            <guid>https://masutaka.net/2014-09-14-1/</guid>
            <pubDate>Sun, 14 Sep 2014 00:00:00 GMT</pubDate>
            <description><![CDATA[[2014-01-09-1] からmasutaka.netのCIを開始したが、残念ながら
masutaka.netに直接serverspecする、なんちゃってCIだった。
masutaka.netにcookしてからPRを出して、WerckerにCIさせていた。
WerckerとAWSを連携させて、テストのたびにサーバをまっさらな状態から
作り、終わったら破棄することが可能になったので、ここに記録しておく。
去年くらいに話題になったこの辺の話。
Vagrant + Chef Solo + serverspec + Jenkins でサーバー構築を CI - naoyaのはてなダイアリー naoya/circleci-serverspec なんで今までやらなかったかというと、cookが一発で通らないレシピになっ
ていたから。。気づいてはいたんだけど、本番サーバのテストが通りさえ
すればよかったし。。。
インフラ系技術の流れ - Gosuke Miyashita こちらの記事でいうところの、Orchestrationの仕事までChefにやらせてい
たのが敗因。GitHubのprivateリポジトリにおいてあるdotfilesや、
growthforecast、tiarra、mobircまでもChefにインストールさせていた。
ユーザmasutakaに依存しないレシピに変更して、手元の
Vagrant+VirtualBoxで一発でspecが通るまでがステップ１。
次に手元のVagrant+AWSで同じことが出来るまでがステップ２。
これをWercker上で実行できるようにwercker.ymlを書き換えたのがステッ
プ３。
最終的なVagrantfileとwercker.ymlは以下のとおり。
 いくつかハマったけど、凡ミスだったので特には触れない。上の設定に従
えば同じことは出来るはず。(CircleCIだと各インスタンスにssh出来るの
で、調査は早かったんだろうと夢想。)
でも一点だけad hocな対応をしていて、plenvやrbenvを使ったPerl/Rubyの
インストールはビルド済みのtar ballを展開するだけに変更した。
Werckerはビルドが5分間止まると失敗だと見なすから。ビルド全体の時間
は25分までOK。
そもそもImmutable Infrastructure的にplenvやrbenvを使うのはどうなの？
という節もあって、そこは今後変えるかもしれない。
wercker.ymlも毎回Vagrantをインストールして、vagrant upするという無
駄なことをしているので、Docker使って時短させるかもしれない。
とりあえずCI出来るようになったので、今回はこれで良しとする。]]></description>
        </item>
        <item>
            <title><![CDATA[Time Machineはじめました]]></title>
            <link>https://masutaka.net/2014-09-10-1/</link>
            <guid>https://masutaka.net/2014-09-10-1/</guid>
            <pubDate>Wed, 10 Sep 2014 00:00:00 GMT</pubDate>
            <description><![CDATA[やっと自分のMacBookAirでもTime Machine始めました。
 もう21世紀なんです。cronでバックアップスクリプト動かしている場合じゃないんです！
写真だと大きく見えてしまいますね。縦はiPhone5sより小さなHDDです。
1TB, 2TB, 500GBがあります。1TBを買いました。
AirMacに繋げて自動にしようかと思いましたが、直接つないで試したら遅くなかったしルームシェアだし、とりあえず必要なときに手動でバックアップすることにしました(あれ)。
MacBookAirは120GB程度使っていて、初回は2時間ほどかかりました。差分バックアップは優秀で5分程度です。さすがOSが面倒みていると違います。pdumpfs とか使って頑張っていた頃とは違いますね。pdumpfsには大変お世話になりましたが。
日曜日にたつをさんのアフィリンクからポチッとして、昨日火曜日に最寄りのローソンで受け取りました。
「My Passport for Mac」で MacBook Air のバックアップをようやくスタート！ ]]></description>
        </item>
        <item>
            <title><![CDATA[大腸カメラ飲んだ ٩(๑❛ᴗ❛๑)۶]]></title>
            <link>https://masutaka.net/2014-09-08-1/</link>
            <guid>https://masutaka.net/2014-09-08-1/</guid>
            <pubDate>Mon, 08 Sep 2014 00:00:00 GMT</pubDate>
            <description><![CDATA[※内容が内容ですので、閲覧注意で。
健康診断で潜血が見つかったので飲んで(?)来た。会社の1Q飲み会(焼き肉)に行けなかったのはこういう訳。
前日の金曜日は21:00までに食事。消化の良い物を少量。野菜ダメとのこと。セブンのぶっかけうどんを食べた。あとなぜかレアチーズ大福。うまかった。炭水化物＼(^o^)／
【コンビニスイーツ】セブンイレブンのレアチーズ大福が美味しすぎてやばい - NAVER まとめ   8:00に起きて8:15くらいから飲み始めた。2時間で2L飲めとの注意書きが。水に溶かすと色は透明。レモン味と塩味で案外飲みやすかった。バリウムを想像してた。最初の一杯は15分くらいかけてゆっくり飲めとのこと。そうした。
説明書きどおり、1L飲んだくらいで固形物と水分が出て、あとは水分。残り500mlくらいから少し辛くなってきた。主に味が。
肛門から小便のようなものが出る感じは不思議。10年くらい前に2週間ほどウィルス性の下痢になったときは脂汗がすごかったが、今回はそんなことない。むしろ気持ちよくシャーっと出せた。徐々に透明になっていき、最後は黄色みがかった透明に。胆汁由来の色らしい。これでOKなはず。
ネット見ながらだらだら飲んでたら2時間オーバー。2時間15分くらいかな。水分はずっと取ってよし。むしろ脱水症状を抑えるために積極的に取るべしとのこと。シャワー浴びて病院にGO。お腹が安定しなくてちょっとギリギリだった。
14:05頃阿佐ヶ谷駅着。新宿から総武線に乗ったら、電車が中野で引き返して困惑した。
14:10河北総合病院 着。受付後、内視鏡室で再度受付。大便の写真一覧を見せられて、一番薄いやつを選んだ。OK。
そのあと着替え。上は浴衣ぽいやつ、下は使い捨てズボン。お尻の部分に縦の切れ目がある。テレビ見ながら待つ。長い。
15:00前から検査開始。ベッドに横たわったあと、注意事項の説明あり。仮にポリープが見つかって切除する場合は1週間ほど食事制限があるとか、帰りは車も自転車もダメだとか。直後に別の先生から同じことをまた言われて？？？になった。
(たぶん)ぼーっとする注射を打つ。そのあとすぐ始まったので、麻酔ではなかったと思う。腸の運動を抑制するやつかと。
問診もするかと思ってたところで急に始まった。横向きで自分の腸内が映ったモニターを見ることが出来る。なかなかきれい。
往路はモニターを見る余裕があったが、復路は時々奥に戻る時があって、それがきつかった。痛いわけではないのだけど。この時先生が写真を撮ってた気が。
終わると1時間ほど休憩スペースに。カーテンに仕切られた半個室の部屋。お腹が張ってガスを出すことしか考えてなかった。頭がボーっとしていた。
着替えてトイレに行ってガスをたくさん出して終わり。今日は消化の良い物にして下さいとのこと。明日からはいつもどおりでOK。週末の社内飲みに参加できそうで安心。
阿佐ヶ谷の飲み屋に行こうかと思ってたけど断念＆残念。そういう体調＆気分でもなかったし。
結局阿佐ヶ谷のはなまるうどん へ。帰って軽くシャワー浴びて22:00まで寝てた。
明けて月曜日。結果を聞くために再度訪問。写真を一緒に見ながら「きれいな粘膜ですね」と言われた(๑′ᴗ'๑)ｴﾍﾍღ もちろん異常なし。結果を紹介元(大久保検診センター)に送ってくれるとのこと。そういうきまりらしい。
土曜日に見つけて気になったミートソース専門店 があったので、食べてから出社した。パスタ屋なのにジャンクで良かった。近所にあったら通っちゃいそう。
＜感想＞
最近便秘気味の割に案外入っていなかった。出しても体重にあまり変わりなし。全部出せばお腹が引っ込むと思っていた。このお腹の張りはなんだろう。。自分の大腸きれい。]]></description>
        </item>
        <item>
            <title><![CDATA[ghqとcdrの出力を一緒にpecoに食わせたら捗った]]></title>
            <link>https://masutaka.net/2014-09-06-1/</link>
            <guid>https://masutaka.net/2014-09-06-1/</guid>
            <pubDate>Sat, 06 Sep 2014 00:00:00 GMT</pubDate>
            <description><![CDATA[最近はghq+pecoでリポジトリのあるディレクトリ、cdr+pecoで最近訪れた
ディレクトリに簡単に移動できて、非常に捗っている。
ghq+pecoとcdr+pecoはそれぞれ以下の記事が詳しい。
 ghqを使ったローカルリポジトリの統一的・効率的な管理について - delirious thoughts  pecoを使い始めた - $shibayu36-&gt;blog;   ただ、ghq+pecoはC-x C-y、cdr+pecoはC-x bと、当然別々のキーになるの
で、どっちを使うか考えたり間違えたりするのでモヤモヤしていた。
Emacsは自作のhelm-ghq.el で同じ操作感にしていたので、同じモヤモヤだっ
たが、最近来たPull Request を取り込んでからは改善。
C-x b (helm-for-files)でghqの出力も出すことでキーバインドを1つに集
約できた。C-x C-yのキーバインドは削除。
C-x bでこのような一覧が表示されて、絞り込む感じ。
 ghq list &ndash;full-pathの出力 現在開いているバッファ 最近開いたファイル カレントディレクトリにあるファイルやディレクトリ  複数のソースを出力していても、混乱しないどころか便利に使えたので、
zshも同じでいいじゃんと思い、変更した関数がこれ。(リファクタリング出来そう&hellip;)
 ghqとcdrの両方の出力が候補に出ているのが分かると思う。
C-x bだけでghqとcdrを呼び出せるし、Emacsと操作が同じだし、非常に満
足行く設定になった。
IFSをいじっているのは、スペースを含むディレクトリも適切に処理するた
め。デリミタを改行だけにしている。
awkの処理はソートなしの重複削除。なんでこれで出来るのか全く分からな
いけど。。
loading...
   if (localStorage.getItem("pref-theme") === "light") { const elements = document.getElementsByClassName('twitter-tweet'); for (let i = 0; i  追記(2014-10-07):]]></description>
        </item>
        <item>
            <title><![CDATA[YAPC::Asia Tokyo 2014に参加してきた #yapcasia]]></title>
            <link>https://masutaka.net/2014-08-31-1/</link>
            <guid>https://masutaka.net/2014-08-31-1/</guid>
            <pubDate>Sun, 31 Aug 2014 00:00:00 GMT</pubDate>
            <description><![CDATA[去年[2013-09-29-1] に引き続き、今年も参加してきました。
YAPCはバラエティがあり、Perl以外の情報も多いので好きです。
まさにYet Another Programming Conference
よく考えたらこのブログもPerlで生成しているので[2007-07-01-1] 、Perl
との関わりはゼロではなかった。
参加者が過去最大ということもあり座れないことが多々ありました。YAPC
ではおなじみの光景みたいですが、この辺改善されると良いですね。Wifi
とか運営とかは素晴らしかったです。
以下、参加したトークへのメモ。
インフラエンジニア(狭義)は死んだ  (スライドがアップされたらここに貼る)
問題を解決するためには自分の肩書きに縛られないほうが良いよという話。
まあそうだよね。そういう意味で私は、「Rubyエンジニア」とか「PHPエン
ジニア」とか名乗らないようにしている。最近は「ソフトウェアエンジニ
ア」か「カレー大好き！」かな(えっ
Go For Perl Mongers  スライドはこちら pecoの牧さんによるGOを書き始めた人向けのトーク。GOはチュートリアル
を半分くらいやった程度なので、途中から付いて行けなかったorz
 例外などない オブジェクト指向など忘れてしまえ fmtは「ふむと」と読む GOは継承ではなく委譲  JSON SchemaとAPIテスト  (スライドがアップされたらここに貼る)
良さそう。JSON Schema知らなかったので、あとで最新の
WebDBPress(Vol. 82)のWEB APIデザイン鉄則読む。
作られては消えていく、泡のように儚いクラスタの運用話   テレビと連携するサービスの話。案件ごとにぐわーっとスケールさせて、
終わったら全部削除とか。期末とか年末はやっぱり忙しいそう。Rakeタス
クでいろいろ出来るようにしていた。
あと、PanisherというNodeJS製ベンチマーククラスタ使って、想定される
シナリオを作って対策し、負荷が原因のトラブルはほぼゼロになったとの
こと。良さそう。
Git を使ったツール開発    ghqは自作のemacs-helm-ghq で毎日使っていて、GitHub Kaigiでも紹介され
たgit-pr-releaseは業務で毎週使っているので、聴いてみたかったトーク。
Gitコマンドの濃い話も聞けました。このトークも超満員で地べたに座って
いたので、上半分しかスライドが見えなかったけどorz
git-browse-remote、以前試したことあったみたい。emacsから使えたら便
利そうです。
コマンドラインツールについて語るときに僕の語ること    力強くて熱いトークだった。最近のCLIツール界隈も熱いですね。]]></description>
        </item>
        <item>
            <title><![CDATA[QuickSilverからLaunchBar+Snapに乗り換えた]]></title>
            <link>https://masutaka.net/2014-08-24-1/</link>
            <guid>https://masutaka.net/2014-08-24-1/</guid>
            <pubDate>Sun, 24 Aug 2014 00:00:00 GMT</pubDate>
            <description><![CDATA[OSXのランチャーの話。
日本語入力ONの時にQuickSilver を使うと、「emacs」と打つつもりが
「えまｃｓ」になります。しかたがないのでQuickSilverを一度終了して
日本語入力OFF、もう一度「emacs」と打っていました。憂鬱です。
職場の同僚に聞いたところ、LaunchBar は自動で日本語入力OFFにしてくれ
るそうなので、早速乗り換えました。クリックボード履歴の機能も付いて
いたので、ClipMenu も要らなくなるかも。
QuickSilverのHotKeyも使っていたので、同じく紹介されたSnap をインストール。
ちょっとハマったのが、Symbolic linkのApplicationがLaunchBarの検索対
象にならないことでした。brew caskを使っているので、そういうのが出来
てしまうのですよね。
&ldquo;Use OS X LaunchServices database&quot;をOFFにすれば検索対象になりました。 DockのLaunchBarをクリックし、メニューバーを表示。
Index -&gt; Show Index に進みます。
あとは&quot;Use OS X LaunchServices database&quot;をOFFにするだけです。
この画像見るとわかりますが、iTunesで任意の曲を再生とかのIndexは削除
しました。純粋にランチャーとしてしか使わないので。
追記(2014-12-04):
Snapはショートカットキーを複数回打つと、カレントと当該アプリがトグ
ルするのがツライので、これだけのためにQuickSilver入れなおしました。]]></description>
        </item>
        <item>
            <title><![CDATA[10代の自分に教えたかった歯のメンテナンス方法これだけ]]></title>
            <link>https://masutaka.net/2014-08-10-1/</link>
            <guid>https://masutaka.net/2014-08-10-1/</guid>
            <pubDate>Sun, 10 Aug 2014 00:00:00 GMT</pubDate>
            <description><![CDATA[歯間ブラシは絶対使え。
 私は歯並びは良い方で、親知らずもありません。でも、高2の時に銀歯が8本くらい一気に増えてしまいました。
そんな10代の自分に送る鎮魂記事。もっと早くから使っていれば。。
超重要な歯間ブラシ 使い始めてから慢性的な歯茎の腫れが引き、出血もなくなり、虫歯になりづらくなりました。3年くらい継続しています。
お世話になった歯医者さんがこちら。神戸に住んでいた時に通いました。
神戸市西区の予防歯科なら「たかし歯科」 そもそも初めは歯茎の腫れがひどく、歯間ブラシが全く通りませんでした。歯石を取ってもらって、細いブラシが通る歯から開始。
重要なのは歯間ブラシがきちんとブラシになっていることです。プラスチックの歯間ブラシは止めましょう。
毎日寝る前に使っていて、結構取れます。使う前はこれが腫れや虫歯の原因になっていたんだなあと。。。
はじめは面倒でしたが、習慣化してからは使わないと気持ち悪くなりました。
日々のメンテナンス まあ、メンテナンスと言っても、そんなに気合入れていません。歯磨きと歯間ブラシは寝る前だけです。
起きているときは唾液の殺菌作用が効くため、それほど神経質にならなくても良いみたい。
そういえば昔は食べて3分以内に磨くように言われましたが、今は30分おいた方が良いみたいですね。食べた直後は口の中が酸性になっており、歯が柔らかくなっているためだそう。
歯茎と歯を痛めたくないので、歯ブラシは柔らかめ、デンタルペーストは研磨剤のないタイプを使っています。
 寝るときはナイトガードを使います。
私は寝るときに歯を食いしばるらしく、歯茎が少し減ってきたので、寝る前はナイトガードをしています。歯医者さんで5000円で作れます。
ナイトガードにはハードタイプとソフトタイプがありますが、ハードタイプを作りましょう。
東京に戻った後に壊れたので、近所の歯医者で作ってもらったんですが、これがソフトタイプでおまけにサイズが合わない。今思えばやる気のない歯医者だったなあ。。。
近所の別の歯医者さんで作ってもらったナイトガードが上の写真です。調子は上々。定期健診もここでしています。
宮内デンタルクリニック 良い歯医者さんを見つけるのは難しいですね。
朝はリステリンでグチュグチュ。
 3ヶ月に1度の定期健診 3ヶ月に1度、歯医者で歯石を取ってもらいます。最近は色素沈着しやすいので、クリーニングもしてもらいます。ホワイトニングはしていません。
歯医者からはハガキでお知らせが来て、電話で予約するんですが、せめてメールで通知、ウェブから予約にならないのかなあ。
と思い、以前聞いてみたらメールでお知らせはできないとのこと。不便。。
まとめ いろいろ書きましたが、早く再生医療が使えるようになって欲しいですね。メンテナンスは面倒ですから。]]></description>
        </item>
        <item>
            <title><![CDATA[『パーフェクトRuby on Rails』のサンプルアプリにHerokuボタンを付けてみた]]></title>
            <link>https://masutaka.net/2014-08-09-2/</link>
            <guid>https://masutaka.net/2014-08-09-2/</guid>
            <pubDate>Sat, 09 Aug 2014 01:00:00 GMT</pubDate>
            <description><![CDATA[  Herokuボタンがリリースされました。
Heroku｜Introducing Heroku Button 詳しくはnaoyaさんの記事をどうぞ。
Deploy to Heroku / Webアプリケーションのポータビリティ再び - naoyaのはてなダイアリー ざっくり言うと、これだけでGitHubの任意のブランチをHerokuにデプロイ出来ます。
 GitHubにHerokuで動くコードを置く 上記リポジトリのrootにapp.jsonを追加する README.mdにHerokuボタンを追加する  もちろんHerokuアカウントは必要です。
試してみた 試しに[2014-07-10-1] で写経した、『パーフェクトRuby on Rails』の
サンプルアプリにHerokuボタンを付けてみました。
  デプロイすると、このような自動生成されたURLが割り当てられます。
http://blooming-reef-2288.herokuapp.com/ blooming-reef-2288の部分は自分で指定することも出来ます。
アプリケーションを実行するために環境変数やマイグレーションが必要で
あれば、app.jsonに指定します。
https://github.com/masutaka/awesome-events/blob/master/app.json 任意のブランチもデプロイ出来る 特筆すべきは、任意のブランチをHerokuにデプロイ出来ることです。
以下のhogehogeブランチのHerokuボタンをクリックすると、左上のタイト
ルがHogeHogeになります。
https://github.com/masutaka/awesome-events/tree/hogehoge CIにhookすれば、テストが成功したら自動でHerokuにデプロイも出来そう
です。
今までは、他の開発者やテスターに動く環境を提供するためには、
Quipperのように 自力でなんとかする必要がありましたが、もうそんなこと
ありません。これは本当にすごい！！
privateリポジトリは未対応なようなので、仕事のリポジトリにはまだ使え
ませんが&hellip;。
任意の場所にHerokuボタンを設置 こちらをクリックしてもデプロイすることが出来ます。
  このようにGitHub以外に設置する場合は、URLパラメータを指定する必要が
あります。
https://heroku.com/deploy?template=https://github.com/masutaka/awesome-events ブランチも指定できます。
https://heroku.com/deploy?template=https://github.com/masutaka/awesome-events/tree/hogehoge ヘルプ Herokuボタンについて詳しくはヘルプをどうぞ
Creating a &lsquo;Deploy to Heroku&rsquo; Button｜Heroku Dev Center  ]]></description>
        </item>
        <item>
            <title><![CDATA[初めて会社の技術ブログを書きました]]></title>
            <link>https://masutaka.net/2014-08-09-1/</link>
            <guid>https://masutaka.net/2014-08-09-1/</guid>
            <pubDate>Sat, 09 Aug 2014 00:00:00 GMT</pubDate>
            <description><![CDATA[アジャイル開発で便利だったホワイトボードなどまとめ｜feedforce Engineers&rsquo; blog 先週の話ですが。
3月に入社して早5ヶ月。
何度か書く書く詐欺してましたが、ようやく書きました。
特に奇をてらったわけではなく、自分が興味あることをまとめただけ。
このブログも同じです。
良い記事が書けると、何度も読み返したくなりますね。
自分が一番の読者です。
次回は技術の話を書く。]]></description>
        </item>
        <item>
            <title><![CDATA[こんな方法で漫画を読み忘れないようにしてる]]></title>
            <link>https://masutaka.net/2014-07-29-1/</link>
            <guid>https://masutaka.net/2014-07-29-1/</guid>
            <pubDate>Tue, 29 Jul 2014 00:00:00 GMT</pubDate>
            <description><![CDATA[会社の人とこんな話をしていて、我ながら無駄にシステマチックだなと思っ
たので、記事にして晒します。
私は特にガチなヲタではなくて、普通に漫画読むくらいの人です。ダイの
大冒険とかジョジョとかテラフォーマーズとか、あと格闘漫画系をよく読
みます。
ツールはRTM とブックオフオンライン を使っています。
毎週買っている週刊誌はヤングジャンプ(以下ヤンジャン)だけで、
RTM「1雑用」タブの毎週木曜日に登録している。これで忘れない。完璧。
ヤンジャン以外に読んでいるのは、「はじめの一歩」「刃牙道」「ジョジョ
リオン」「ヒストリエ」くらい。
これらはブックオフオンラインのデマチメールに登録していて、新刊が出
たらメールで通知が来るようになっている。通知が来たらRTM「5漫画」タ
ブに登録して、3ヶ月に1回とかのタイミングで漫喫でまとめて読む。完璧。
↑巻数が書かれてない漫画は、読んだことなくてあとで読もうと思った本。
こんなの公開してどうするんや。。
他に良い方法があれば教えて下さい。
追記(2014-08-01):
どの巻まで読んだかはメモアプリに記録してます。って更新し忘れてる。。]]></description>
        </item>
        <item>
            <title><![CDATA[AWS Summit Tokyo 2014に行ってきた #awssummit]]></title>
            <link>https://masutaka.net/2014-07-19-1/</link>
            <guid>https://masutaka.net/2014-07-19-1/</guid>
            <pubDate>Sat, 19 Jul 2014 00:00:00 GMT</pubDate>
            <description><![CDATA[仕事の都合で、２日目だけ行ってきました。天気は曇りでジメジメ。品川駅からほど近い場所でしたが、歩くには暑い日でした。
全てのセッションの動画や資料はこちらをどうぞ。
AWS Summit Tokyo 2014 開催レポート｜AWS オープニング  DJ田中氏による派手なオープニング。
Day2 基調講演 ～Deep Dive to Enterprise～   アマゾン データ サービス ジャパンの社長がAWSを紹介。内容としては、アジリティ(機敏性)重要なのでAWS使うと捗るとかの話。
ガリバー、積水化学、ローソンの講演もありました。大企業もどんどんAWSに移行しています。
ニュース - ローソンや日通がAWSへ全面移行、AWS Summitで明らかに：ITpro あと、堀内氏からAWSのマネジメントコンソールが日本語化されるとの発表もありました。うーん、使うのかな？
静岡県のGISはなぜAWSを使ったのか  スピーカーの杉本さんが熱かった！
数々の困難にもめげず、静岡県庁にAWSを導入したお話。一度は理不尽な理由で却下されたけど、3.11を境にクラウド化が一気に進んだそう。
エンジニアの採用どうやってるんだろ？
AWS上のシステムはこう作る！InfrastructureAsCode／ImmutableInfrastructureを実践した構築自動化とHinemosで実現するクラウド運用自動化   Chef+Serverspecと、監視ツールHinemosのお話。SI業界にも同じ波は来ているんだなあと。
モバイルゲームの全世界オンライン対戦を実現する方法を考察する  モバイルゲームで実際に使われている構成の話。レベル高い。
資料ダウンロード Amazon DynamoDB テーブル設計と実践 Tips   NoSQLなDynamoDBの話。
Conditional Write使ったオンライン対戦ゲームの話が面白かった。
条件をHPが0より大きい時に設定。数十人同時にボスを攻撃しHPを減らしつつ、最後に攻撃した人カラム(last_attackerだっけ？)にも書き込み。HPがマイナスになると書き込みに失敗することを利用し、戦闘を終了させる。
同じことをMySQLでやるとLockとか考えなくちゃいけないので大変。
ちょっとバグっていたけど、デモを体験できた。
http://bit.ly/dynamoquest ログ収集のためにRDS使う場合は、DynamoDB使ったほうが良いかも。RedShiftで分析もできるし。
資料ダウンロード 【パネルディスカッション】 クラウドで実現する次世代マーケティングとは？   すかいらーく、良品計画(無印良品)、スシローのパネルディスカッション。
無印、顧客時間重視。顧客の能動性を重視。
無印、オンプレだと初期費用2000万かかるところ、AWS使って数百万。月額も30万とか。
スシロー、皿にICタグ。位置情報を取得。年10億データだったかな？クラスメソッドと組んでスシデータをAWSへ。Amazon Kinesis使う。
スシロー、AWS導入検討の時に、10億のデータを経営陣や店長の目の前で処理して見せたのが効果的だったとのこと。皮膚感覚で認識している通りのデータを出したり、見落としていたデータを出したり。
新しいことをやるメリットと、やらないことのデメリットの天秤にかけると、やらない理由はないとかの話も。
すかいらーく、無印とスシローもSEOはやってないとのこと。認知度が十分なのと業種的にあまり意味ないからか。店舗登録くらいはやってるそう。]]></description>
        </item>
        <item>
            <title><![CDATA[『パーフェクトRuby on Rails』を全部読んで写経してHerokuにデプロイした]]></title>
            <link>https://masutaka.net/2014-07-10-1/</link>
            <guid>https://masutaka.net/2014-07-10-1/</guid>
            <pubDate>Thu, 10 Jul 2014 00:00:00 GMT</pubDate>
            <description><![CDATA[ 先月からRailsをガッツリ使うプロジェクトに入ったので、結構気合い入れて
読みましたよ。
Railsはそこそこ分かっているつもりですが、ネットの知識のみでまとまっ
た学習をしたことがなかったので、タイミングの良い発売でうれしかった
です。なんて運がよいのだろう。
『パーフェクト Ruby on Rails』と名乗るだけあって、基本的なことは網
羅していたと思います。後半はRackとかRailtieとかの濃い話題になって、
ちょっとしんどかったです。
まずはひととおり読んで気になったところを付箋。
次に6章を理解しながらひたすら写経。erbはタイプが辛かったのでhamlに
変換しながら。写経なんていつ依頼だろう？本だと前のコードとのdiffが
分からなかったのが辛かったです。
ransackは6章の著者、前島さんの記事 で知った程度で、使ったのは初めて
です。簡単に検索フォーム作れてよいですね。
テストは普段から書いているので7章は写経しませんでしたが、
poltergeistが気になりました。capybara-webkit入れることあれば、
代わりに使ってみようかな。
せっかくなので、写経結果をHerokuにデプロイしました。誰でもイベント
を登録できます。
http://masutaka-awesome-events.herokuapp.com/ 以下メモ。
$ heroku apps:create masutaka-awesome-events $ heroku addons:add heroku-postgresql --app masutaka-awesome-events $ heroku run rake db:migrate --app masutaka-awesome-events $ heroku restart --app masutaka-awesome-events $ heroku config:add TWITTER_CONSUMER_KEY=&lt;TWITTER_CONSUMER_KEY&gt; $ heroku config:add TWITTER_CONSUMER_SECRET=&lt;TWITTER_CONSUMER_SECRET&gt; P.S.
写経してからこの記事に気づきました&hellip;。後悔はしていない。
パーフェクト Ruby on Rails のサンプルアプリケーションを Github 上で公開しました - willnet.in ]]></description>
        </item>
        <item>
            <title><![CDATA[Railsでapp以下の変更をSpringが検知しない問題を解決した(?)]]></title>
            <link>https://masutaka.net/2014-07-06-1/</link>
            <guid>https://masutaka.net/2014-07-06-1/</guid>
            <pubDate>Sun, 06 Jul 2014 00:00:00 GMT</pubDate>
            <description><![CDATA[最近またSpring を使い始めたんですが、相変わらずモデルやコントローラ
を変更してもSpringは検知しませんよね？みんなどうしているんだろう？
files in the app directory are not being watched · Issue #115 · rails/spring このIssueによると、そもそもRailsのリロードはコストが高いため、
Springはリロードが必要ない設計にしているそう。
うーん、、、とは言ったものの実際問題、モデルのメソッドを修正した後
テストを走らせても、変なエラーが出て、手動でリロードさせると直ると
いうことが多々あります。
ちなみに手動リロードはtouch config/application.rbでイケます。thx!
loading...
   if (localStorage.getItem("pref-theme") === "light") { const elements = document.getElementsByClassName('twitter-tweet'); for (let i = 0; i  Zeus を使ってた頃はとても快適だったので、Zeusに戻る準備までし始めま
したが、READMEのWatching files and directories やソースを読んで、
自動リロードさせる方法を見つけました。
config/spring.rbを作って、以下を書けばOKです。
Spring.watch &#39;app&#39; 他にもwatchしたいディレクトリやファイルがあればこのように書きます。
Spring.watch &#39;app&#39;, &#39;lib&#39; ◆適用前
$ bundle exec spring status Spring is running: 56071 spring server | awesome_events | started 25 secs ago 56072 spring app | awesome_events | started 25 secs ago | development mode $ touch app/models/user.]]></description>
        </item>
        <item>
            <title><![CDATA[helm-ghq.elを作ってGO WAYに乗った]]></title>
            <link>https://masutaka.net/2014-06-22-1/</link>
            <guid>https://masutaka.net/2014-06-22-1/</guid>
            <pubDate>Sun, 22 Jun 2014 00:00:00 GMT</pubDate>
            <description><![CDATA[先日percolをインストールしたばかりですが[2014-06-20-1] 、peco も気に
なっていたのでインストールしました。
後発なだけあって動作が速い！Ctrl-rで検索条件を
IgnoreCase/CaseSensitive/Regexpと変えられるのもお手軽でよいです。
ちなみにデフォルトのキーバインドはkeymap.go#L464 付近を見ると分かる
と思います。
あんちぽさんの記事によると、ghq も良さそうなのでこちらもインストール。
ghqを使ったローカルリポジトリの統一的・効率的な管理について - delirious thoughts loading...
   if (localStorage.getItem("pref-theme") === "light") { const elements = document.getElementsByClassName('twitter-tweet'); for (let i = 0; i  結局私もあんちぽさんと同じ設定にしました..。
~/.zshenvにexport GOPATH=$HOMEを追加し、~/.gitconfigに以下を追加。
[ghq] root = ~/src 以下を~/.zshrcに追加して、Ctrl-x Ctrl-yでpeco経由のghqを使えるよう
にしました。
function ghq_look() { local selected_dir=$(ghq list --full-path | peco --query &#34;$LBUFFER&#34;) if [ -n &#34;$selected_dir&#34; ]; then BUFFER=&#34;cd ${selected_dir}&#34; zle accept-line fi zle clear-screen } zle -N ghq_look bindkey &#39;^x^y&#39; ghq_look ターミナルは移動が楽になりましたが、Emacs上では移動が大変。。仕方が]]></description>
        </item>
        <item>
            <title><![CDATA[pyenvとpercolをインストールした]]></title>
            <link>https://masutaka.net/2014-06-20-1/</link>
            <guid>https://masutaka.net/2014-06-20-1/</guid>
            <pubDate>Fri, 20 Jun 2014 00:00:00 GMT</pubDate>
            <description><![CDATA[数年前にRTMに入れたままになってましたが、ようやくpercolをインストー
ルしました。zshでhelmっぽい履歴検索をやりたかったためです。
https://github.com/mooz/percol ※ 最近の毎週木曜日は、会社の人ともくもくしています。
作者はあのKeySnail のmoozさん。2年くらい前にお会いしましたが、お元気
でしょうか。
README.mdに書いてあったHOMEにインストールする方法だと、以下のエラー
が出て使えませんでした。Python力ゼロなので分かりません。
$ ps aux | percol Traceback (most recent call last): File &#34;/Users/masutaka/.local/bin/percol&#34;, line 29, in &lt;module&gt; from percol.cli import main ImportError: No module named percol.cli 試しにpyenvでPythonをインストールし、そこにpipでpercolをインストー
ルすることにしました。
pyenvはbrewでインストールできます。python-build的なものやpipも同時
に入るので楽ちん。
最新のPython2系とpercolはこんな感じでインストールできます。
$ pyenv install 2.7.7 $ pyenv global 2.7.7 &amp;&amp; pyenv rehash &amp;&amp; rehash $ pip install percol $ pyenv rehash &amp;&amp; rehash percolの設定ファイルは~/.percol.d/rc.pyです。色を自分好みに、キーバ
インドをREADME.mdに書いてあったEmacs風にしました。
percol.view.PROMPT = ur&#34;&lt;on_blue&gt;QUERY&gt;&lt;/on_blue&gt; &lt;on_red&gt;&lt;on_red&gt;%q&lt;/on_red&gt;&#34; percol.view.CANDIDATES_LINE_BASIC = (&#34;black&#34;, &#34;on_white&#34;) percol.]]></description>
        </item>
        <item>
            <title><![CDATA[会社でルーキー賞に選ばれた]]></title>
            <link>https://masutaka.net/2014-06-13-1/</link>
            <guid>https://masutaka.net/2014-06-13-1/</guid>
            <pubDate>Fri, 13 Jun 2014 00:00:00 GMT</pubDate>
            <description><![CDATA[3月に入社し[2014-03-09-1] 、先月が弊社フィードフォース の期の終わりで
した。そして今日が納会(※)。運良く、ルーキー賞(の1人)に選ばれました。
※ 納会が年末以外にもあることにビックリ。
何度かお話しましたが、私の能力が云々という話では全くなくて、単純に
タイミングが良かっただけだと感じています。
納会を企画したイベントチーム、ならびに私を選んで頂いた方、業務でお
世話になった方、その他もろもろありがとうございました。
組み込み業界から前職ラングリッチ に飛び込んだ時[2011-04-22-1] 、意外
にも今までの経験がちょいちょい役に立ちました。
今のフィードフォースでは、あの時以上にタイミングよく、皆さんのお役
に立てたようで嬉しいです。自分の成長と会社の成長が、いい感じに重なっ
たというか。
役に立ったと思われるのは以下のとおり。
・アジャイル開発の経験
・チームビルディング
・GitHub的ななにか
・Rails&amp;Rspec全般
・Chef&amp;Serverspec全般
・ELF的な知識
地固めが出来たので、これからはより技術的なことに挑戦していきます。
ぶっちゃけ、そちらに関しては他の開発者の方のほうが詳しいので、その
辺は教えを請いつつ学びつつ、チームの力を伸ばしていくことに集中します。
私個人も成長しますが、チーム力を高めたほうがなにかと早いので。
今後ともよろしくお願いします。]]></description>
        </item>
        <item>
            <title><![CDATA[アジャイル開発を経験して『アジャイルサムライ』を再読した]]></title>
            <link>https://masutaka.net/2014-06-08-1/</link>
            <guid>https://masutaka.net/2014-06-08-1/</guid>
            <pubDate>Sun, 08 Jun 2014 00:00:00 GMT</pubDate>
            <description><![CDATA[[2013-01-10-1] から約1年半。アジャイル開発をそこそこ経験したので、再
読しました。
気になったところをざっと引用。
 P70
弟子: もしも、そうした方々にインセプションデッキを作るための時間を
割いてもらえないとか、質問にも答えられないほど忙しい場合、私はどう
すべきでしょうか？
センセイ: まずはそのことを喜ぶがよい。なぜならお前はプロジェクトの
最初の重大なリスクを発見したのだから。
難しい問題だよね。
  P94
プロジェクトの今の段階で、誰が決断を下すのかということを確認してお
けば、後で起きることになるであろうさまざまな混乱を防ぐことが出来る。
重要。
  P131
「相対サイズで見積もる」というシンプルな原則がアジャイルな見積りと
計画づくりの真髄だ。
無意識にやってて忘れてたけど、改めて認識。
  P161
個人の生産性を測るのは、プロジェクトマネジメントのダークサイドへの
道だ。
個人の生産性を測ると、バグと手戻りと思い違いが増える。一方、強調し
ようとかスキルを伸ばそうとか知見を共有しようとかいった態度は薄れて
いく。各人がなんとしてでも自分自身の生産性を確保しようと躍起になる
からだ。
ケースバイケースだけど、そういう傾向にはなりやすくなると思う。
  P170
プロジェクトが既に始まっているのなら、インセプションデッキのすべて
の課題をこなす必要はないかもしれないが、少なくとも次の５つの質問に
はチーム全員が答えられなきゃまずい。
・このプロジェクトにいるのはなぜ？
・成し遂げようとしていることは何？
・顧客は誰？
・解決すべき主要な課題は何？
・最終決断を下すのは誰？
このへんは使えそう
  P214
つまり私からのアドバイスはこうだ。毎日、チームのみんなに「今日、私
はこれをやります」とコミットメントを表明するんだ。これを続けていけ
ば、自分でもびっくりするぐらい実際に仕事をやり遂げられるようになっ
ていくはずだ。
これは明日からやる。
  P216
アジャイルサムライには、ストーリーが半分終わったとか、４分の３終わ
らせたとか、８割完了したなどいったことは無いのだ。ストーリーは完了
したか、していないか。そのどちらかだ。
そうね。
  P291
アジャイルソフトウェア開発宣言
プロセスやツールよりも個人と対話を、
包括的なドキュメントよりも動くソフトウェアを、]]></description>
        </item>
        <item>
            <title><![CDATA[予備知識なしでChromecast買った結果www]]></title>
            <link>https://masutaka.net/2014-05-31-2/</link>
            <guid>https://masutaka.net/2014-05-31-2/</guid>
            <pubDate>Sat, 31 May 2014 01:00:00 GMT</pubDate>
            <description><![CDATA[結構面白かった
ビッグウェーブに乗る感じで勢いで買った。後悔はしていない。
loading...
   if (localStorage.getItem("pref-theme") === "light") { const elements = document.getElementsByClassName('twitter-tweet'); for (let i = 0; i  これはiPhone5sのAirPlay使って、MacBookProにiPhoneの画面を表示させ、その画面をChrome拡張のGoogle Cast使ってテレビに表示させてるところ。
これはさらにもう一台のiPhone5sを接続したところ。鏡みたいになって面白い。
YouTubeはウェブ、iPhoneアプリ、ニンテンドー3DSのアプリ、どれでもChromecast繋いだテレビやモニターに表示させられる。もちろん音声も。
上の画像のテレビはスマートTVなのであまり意味ないけど、ただのモニターがスマートTVになるのはまあ面白い。
ニンテンドー3DSの画面を表示させられたらマジ神だったけど、さすがに無理だった。
Chromecastがあればケーブルが要らないので、プレゼンの時は便利かなーと思いました。ネタになりそうなので、しばらく持ち歩くことにします。お声がけくださいませ。
 See also
Chromecastが日本発売、何に使えるの？オススメアプリは？ 【@maskin】 : TechWave 404 Blog Not Found:来た、観た、呆れた - 品評 - Google Chromecast ]]></description>
        </item>
        <item>
            <title><![CDATA[ジモティー使ったら、不要品欲しい人が即効決まった！]]></title>
            <link>https://masutaka.net/2014-05-31-1/</link>
            <guid>https://masutaka.net/2014-05-31-1/</guid>
            <pubDate>Sat, 31 May 2014 00:00:00 GMT</pubDate>
            <description><![CDATA[今週日曜日の深夜にジモティー で不要品欲しい人を募集したら、速攻決まって本日お渡し出来たので、メモがてらご紹介します。
loading...
   if (localStorage.getItem("pref-theme") === "light") { const elements = document.getElementsByClassName('twitter-tweet'); for (let i = 0; i  loading...
   if (localStorage.getItem("pref-theme") === "light") { const elements = document.getElementsByClassName('twitter-tweet'); for (let i = 0; i  loading...
   if (localStorage.getItem("pref-theme") === "light") { const elements = document.getElementsByClassName('twitter-tweet'); for (let i = 0; i  お品物1: 寝るときに涼しいエアコンマットあげます  最寄り駅まで取りに来て頂ける方を0円で募集した。
AM1:41に投稿した直後に6件(1:46, 1:52, 1:52, 1:52, 1:54, 2:01)メールが来た。掲載時に電話番号を書いてたので、1:57に1件電話も来た。電話の方にお譲りすることにして、すぐ受付終了させた。]]></description>
        </item>
        <item>
            <title><![CDATA[ペアプロの話とOSXのsayコマンドや通知センターを使ったタイマーの話]]></title>
            <link>https://masutaka.net/2014-05-26-1/</link>
            <guid>https://masutaka.net/2014-05-26-1/</guid>
            <pubDate>Mon, 26 May 2014 00:00:00 GMT</pubDate>
            <description><![CDATA[弊社フィードフォース のQiita:Team にも書いたのですが、一般的な話なのでこちらにも加筆しつつ紹介します。(書いてたら全面改訂になってしまったw)
sayコマンドを使ったタイマー なんだかんだ言って、サウンドが一番気づきやすいです。サウンドが使える環境の方どうぞ。
前職ラングリッチ の時に使っていたのはズバリこれ。開始の「はじめるでやんす」で始まり、4分50秒から終了予告、最後は「おわったでやんす」。
 $ say &lsquo;はじめるでやんす&rsquo; ; sleep 290 ; say &lsquo;10秒前&rsquo;; sleep 5; say &lsquo;5秒前&rsquo;; sleep 5; say &lsquo;おわったでやんす&rsquo;
 上のように日本語でサウンドを出すときは、「システム環境設定」→「音声入力と読み上げ」からKyokoさんやOtoyaさんの声を追加します。
通知センターを使ったタイマー terminal-notifierをインストール
 $ brew install terminal-notifier
 4分50秒から終了予告、5分で「時間ですよ！」。これは今日作りました。
 $ sleep 290; terminal-notifier -message &lsquo;あと10秒&rsquo;; sleep 5; terminal-notifier -message &lsquo;5秒&rsquo;; sleep 2; terminal-notifier -message &lsquo;3&rsquo;; sleep 1; terminal-notifier -message &lsquo;2&rsquo;; sleep 1; terminal-notifier -message &lsquo;1&rsquo;; sleep 1; terminal-notifier -message &lsquo;時間ですよ！&rsquo;
 ワンライナーなのが結構大事です。シェルの履歴は1,000,000件くらいは残しとくと思うので、C-rで簡単に探せます。[2014-05-18-2] も御覧ください。]]></description>
        </item>
        <item>
            <title><![CDATA[zshの履歴検索は↑やC-rだけじゃないよM-pもあるよ＆履歴マニアの話]]></title>
            <link>https://masutaka.net/2014-05-18-2/</link>
            <guid>https://masutaka.net/2014-05-18-2/</guid>
            <pubDate>Sun, 18 May 2014 01:00:00 GMT</pubDate>
            <description><![CDATA[少し前にこちらの記事が話題になりました。
naoya_itoの火を噴いたシェルtips - Togetterまとめ rebuild.fmのEpisode41 でも言及されていた気がします。
弊社フィードフォース でも、ペアプロの時にこういった話をすることはあります。ただ、C-rやC-uは知られていても、M-pはあまり知られていない雰囲気でしたのでまとめました。
はじめに M-pやM-nは、Escapeを押して離してpまたはnです。
OSXのターミナルをお使いの方は以下を設定すると、option-pまたはoption-nが使えます。それ以外の環境ではAltが使えるかもしれません。
デフォルトの動作を知る デフォルトのM-pとM-nには、それぞれhistory-search-backwardとhistory-search-forwardが割り当てられています。
敢えて設定を書くとこんな感じです。
bindkey &#34;^[p&#34; history-search-backward bindkey &#34;^[n&#34; history-search-forward &ldquo;git re&quot;のあとにM-pを続けて打つ様子。&ldquo;git&quot;にマッチした履歴が現れます。M-nすると戻ってきます。
既存の関数をキーに割り当てる 以下の設定をすると、マッチする履歴が変わります。
bindkey &#34;^[p&#34; history-beginning-search-backward bindkey &#34;^[n&#34; history-beginning-search-forward 設定場所は~/.zshrcが適切でしょう。[2002-05-14-1] &ldquo;git re&quot;のあとにM-pを続けて打つ様子。今度は&quot;git re&quot;から始まる履歴にマッチします。こちらの方が直感的だと思います。
期待する履歴が現れたらReturnキーで確定して下さい。C-eで行末に移動したくなりますが不要です。
もう少しカスタマイズ 以下の設定をすると、ヒット後のカーソル位置が変わります。
autoload -U history-search-end zle -N history-beginning-search-backward-end history-search-end zle -N history-beginning-search-forward-end history-search-end bindkey &#34;^[p&#34; history-beginning-search-backward-end bindkey &#34;^[n&#34; history-beginning-search-forward-end &ldquo;git re&quot;から始まる履歴にマッチするのは変わりませんが、カーソル位置が行末になります。
期待した履歴が現れたらReturnキーで確定してください。カーソル位置が行末なので、こちらの方が自然に感じるかもしれません。Emacsのshell-modeをお使いの方は特に。
この設定はおそらく漢のzshで知ったのだと思いますが、昔すぎて覚えていません。
漢のzsh (4) コマンド履歴の検索～EmacsとVi、どっちも設定できるぜzsh｜マイナビニュース 履歴マニアの話 シェルの履歴を辿るには十分な数の履歴が必要です。この程度の設定は当然でしょう。
# 履歴を保存するファイル HISTFILE=$HOME/.zhistory # メモリ内の履歴の数 HISTSIZE=1000000 # $HISTFILE に保存される履歴の数 SAVEHIST=1000000 ※ 信じられないことにHISTSIZEのデフォルト値は30、SAVEHISTは0です。]]></description>
        </item>
        <item>
            <title><![CDATA[ひらくPCバッグを買った]]></title>
            <link>https://masutaka.net/2014-05-18-1/</link>
            <guid>https://masutaka.net/2014-05-18-1/</guid>
            <pubDate>Sun, 18 May 2014 00:00:00 GMT</pubDate>
            <description><![CDATA[型番: D1001G
販売価格: 20,550円
※画像は公式サイトより
今まで使ってたバッグがヘタれてきたので、この「ひらくPCバッグ」を買いました。
公式サイト には6/27発送予定と書かれていましたが、予定より相当早い1週間で受け取ることが出来ました。
5/10(土) 公式サイトから注文
5/14(水) 5/16に発送を早められるとの連絡
5/16(金) 商品発送のお知らせ
5/17(土) 受け取り
これが今までのCalvin Kleinのバッグです。画像では分かりづらいですが、6年ほど前に買って酷使してきたため色がだいぶ剥げてきました。
中の物を全部出すとより残念感が漂います。今までよく頑張った！
購入したひらくPCバッグ。予想より一回り小さかったです。
開けるとこんな感じ
上の画像にはこんなものが入っています。
 MacBookAir 13inch [2014-05-12-1]  Kindle Paperwhite Nintendo3DS [2013-02-16-1]  メガネケース 各種コード類 財布 ハンドタオル 折りたたみ傘 扇子 メモ帳  購入前は取っ手がないのが気になってましたが、何か自信があって付けないのだろうと割りきって買いました。
予想より早く届いたので実物も見ませんでした(1週間に10時間だけ開いている、渋谷の実店舗 に行く予定ではありました)。
人気のバッグだけあってWeb上にたくさんレビューがあります。
 clmemo@aka: ひらく PC バッグを入手した  【新旧比較】あたらしい「ひらくPCバッグ」開封の儀！新旧のひらくPCバッグと徹底比較したぞ！　#hiraP｜むねさだブログ   どれも評価が高かったので自然と期待が高まりましたが、まあ予想通りではありました。この辺、発売前にゲームのトレイラーを見過ぎたのと似ているかもしれませんw
MacBookAirやKindleが内ポケットにジャストフィットで入るのは素晴らしいです。衝撃を若干吸収しそうな素材なので、ケースは不要でしょう。
マジックテープで着脱可能な仕切りが3つ付いているので財布とか折りたたみ傘とか、いい感じに収められます。
反面、確かに今までのバッグよりは持ちやすくはありますが、これだけ入れるとさすがに重いです。このブログにあるギター用のショルダーパッド買うかもしれません。出費がかさみます。。
 あひるちゃんがゆく:オットくんがひそかに「ひらくPCバッグ」を買っていた   あと、やはり取っ手はあったほうが良いと感じました。でも今のデザインだと難しいのかもしれませんね。
これから使い倒していきます☆]]></description>
        </item>
        <item>
            <title><![CDATA[Railsセミナーに行ってきた #railssemi]]></title>
            <link>https://masutaka.net/2014-05-12-2/</link>
            <guid>https://masutaka.net/2014-05-12-2/</guid>
            <pubDate>Mon, 12 May 2014 01:00:00 GMT</pubDate>
            <description><![CDATA[【学生無料！】【Railsセミナー】Why choose Ruby on Rails ? : ATND 弊社フィードフォースの応援要員として、メンバーズ様主催のRailsセミナーに行ってきました。メモ程度ですが軽く記録しときます。
◆第1部 名刺管理アプリ「Eight」を育てるチームと技術
Sansan株式会社 宍倉功一さん
法人向けのSanSanは.NETだが、個人向けのEightはRailsを採用。
spider for MySQL使うとテーブル単位でDB分割できて便利。
SLASHで効果測定。新人研修は徳島の一軒家で2週間。
高負荷サービスの話聞けてよかった。
◆第2部 Railsとアジャイルで変える受託開発
株式会社メンバーズ 木村壮介さん
CircleCIでfeature branchをHerokuに継続deploy - Masatomo Nakano Blog みたいなdeapというツール良かった。受託の関係でHerokuではなく、自社サーバを使うんだっけかな？
◆第3部 変化を産み出すための組織文化作り
株式会社フィードフォース 鈴木龍さん
他の発表より生々しい感じで存在感を出せてた感。途中の「お金は大事だよー」の画像とか、HipChatの実際のチャットとか追加されてて、数日前の素振りよりもすごく良くなってた。
◆第4部 国内最大級のクラウドソーシングサービス「クラウドワークス」のつくりかた
株式会社クラウドワークス 大場光一郎さん
CIはJenkinsツライのでSEMAPHORE を採用。
Amazon Redshift(分散RDBS)を使用。
 分析用のプラットホームに向いてる Hadoopに似てる FlydataでRedShiftに転送
なぜCircleCIじゃなくてSEMAPHOREを採用したのでしょう？と質問したら、無料期間中に最後までテスト出来たのがSEMAPHOREだけだったからとのこと。CircleCI含めた他のサービスはは15分以上かかるテストkillされてしまったらしい。  ◆懇親会
何人かの方とお話出来た。弊社のメンバー多めだったけど。。
大場さんと話すのがちょっとした目的だったので、ホント来た甲斐がありました。
loading...
   if (localStorage.getItem("pref-theme") === "light") { const elements = document.getElementsByClassName('twitter-tweet'); for (let i = 0; i  loading.]]></description>
        </item>
        <item>
            <title><![CDATA[MacBook Airを買い替えたよメモ]]></title>
            <link>https://masutaka.net/2014-05-12-1/</link>
            <guid>https://masutaka.net/2014-05-12-1/</guid>
            <pubDate>Mon, 12 May 2014 00:00:00 GMT</pubDate>
            <description><![CDATA[新マシンへの引っ越しもだいたい終わったのでメモ。
GW中でしたが、注文から約1週間で受け取れました。
4/29(火) apple.jpから注文
5/ 3(土) 上海から出荷のお知らせ
5/ 6(火) 受け取り
2010年秋モデルからの買い替えです。おおよその違いは以下のとおり。キーボードはなんとなくUSに変えました。会社もUSにしとくんだったなあ&hellip;。
    旧(MacBook Air (13-inch, Late 2010) ) 新(MacBook Air (13-inch, Early 2014) )     CPU 1.86GHz Intel Core 2 Duo 1.4GHzデュアルコアIntel Core i5（Turbo Boost使用時最大2.7GHz）   CPUキャッシュ 6MBオンチップ共有二次キャッシュ 3MB共有L3キャッシュ   Memory 4GB 8GB   SSD 256GB 同じ   キーボード JIS US    移行アシスタンスは使わずに手動で移行しました。HOME以下にゴミファイルが溜まってそうだったし、Brewfile[2014-03-19-2] があるのでそんなに手間ではないと思ったからです。実際、SSDの空きが60GBから130GBくらいに増えました。
コマンドやアプリ類はBrewfileでサクッとインストール。iTunesの音楽ファイルやiPhotoの画像ファイルは、共有設定からリモートログインをONにして、rsyncでコピー。Wifiなので1昼夜かかりました。Dropboxも時間かかった。
iTunesは~/Music/iTunesを上書きする感じでいけました。
iPhotoは~/Pictures/iPhoto Libraryを~/Pictures/iPhoto Library.]]></description>
        </item>
        <item>
            <title><![CDATA[Emacsの自動保存ファイル(#*#)やバックアップファイル(*~)の作成先変更まとめ]]></title>
            <link>https://masutaka.net/2014-05-11-1/</link>
            <guid>https://masutaka.net/2014-05-11-1/</guid>
            <pubDate>Sun, 11 May 2014 00:00:00 GMT</pubDate>
            <description><![CDATA[Emacsをデフォルトの設定で何かファイルを編集していると、たくさんファ
イルが出来てゲンナリします。
あと、起動したEmacs単位でこういうファイルも作られます。
ファイルを保存すると①と②が消えます。③は残ります。
Emacsを終了すると④は消えます。
当然ですが、Emacsが強制終了すると①②④は消えません。
一切作らない方法 ③を作りたくない方は多いと思うので、こんな設定をする方も多いと思います。
(setq make-backup-files nil) ④も作りたくない方はこちら。Mule時代はHOMEに作られたので、結構ウザ
かったです。
(setq auto-save-list-file-prefix nil) ②も作りたくない方はこちら。
(setq create-lockfiles nil) ①は調べてません。出来ないかもしれません。
作成先の変更 とはいえバージョン管理していない場合、③はあればうれしいかもしれま
せん。
実は③の作成先はカスタマイズ可能です。HOME以下のファイルを対象に、
OSXのゴミ箱~/.Trashに変更してみましょう。
~/.Trash/!Users!masutaka!hoge!aaa.txt~のようなファイルが作られます。
(add-to-list &#39;backup-directory-alist  (cons (expand-file-name &#34;~/&#34;) (expand-file-name &#34;~/.Trash/&#34;))) ついでに①も変更してみます。
同様に~/.Trash/#!Users!masutaka!hoge!aaa.txt#のようなファイルが作られます。
(add-to-list &#39;auto-save-file-name-transforms  `(&#34;~/\\([^/]*/\\)*\\([^/]*\\)$&#34; &#34;~/.Trash/\\2&#34; t)) ④はもっと簡単です。
こちらも~/.Trash/.saves-70938-Takashi-no-MacBook-Air.local~のような
ファイルが作られます。
(setq auto-save-list-file-prefix &#34;~/.Trash/.saves-&#34;) 詳しくはヘルプ(F1 v)をご覧ください。
②は分かりませんでした。
DRYに書く EmacsLispもプログラミング言語です。DRY に書きます。
(let ((target-dir (expand-file-name &#34;~/&#34;))  (dest-dir (expand-file-name &#34;~/.Trash/&#34;)))   ;; ①自動保存ファイル(#*#)の作成先変更  (add-to-list &#39;auto-save-file-name-transforms  `(,(concat target-dir &#34;\\([^/]*/\\)*\\([^/]*\\)$&#34;)  ,(concat dest-dir &#34;\\2&#34;)  t))   ;; ③バックアップファイル(*~)の作成先変更  (add-to-list &#39;backup-directory-alist (cons target-dir dest-dir))   ;; ④自動保存リスト(.]]></description>
        </item>
        <item>
            <title><![CDATA[masutaka.netをCapistrano3でデプロイ]]></title>
            <link>https://masutaka.net/2014-05-03-1/</link>
            <guid>https://masutaka.net/2014-05-03-1/</guid>
            <pubDate>Sat, 03 May 2014 00:00:00 GMT</pubDate>
            <description><![CDATA[http://masutaka.net/ 以下の静的なhtmlはGitHubのprivateリポジトリで
管理しており、変更があったらrsyncでコピーしてました。
あまり変更しないのでそんなに困ってませんでしたが、ちょっとダサいの
とCapistrano3を使ってみたかったので、エイヤッと導入しました。
https://github.com/capistrano/capistrano の通りにGemfileに
 gem &lsquo;capistrano&rsquo;, &lsquo;~&gt; 3.2.0&rsquo;
を追加して、以下を実行しました。
$ bundle exec cap install
 このようなファイルが自動生成されます。
Capfile config ├── deploy │　├── production.rb │　└── staging.rb └── deploy.rb ファイル名を以下のように変更しました。melodyはVagrantのVMです。
Capfile config ├── deploy │　├── prod.rb │　└── melody.rb └── deploy.rb ファイルの内容はこんな感じ
 Capistrano3からdeploy:setup不要になったので、初回から以下のコマンド
でOKです。
# to masutaka.net $ bundle exec cap prod deploy # to vagrant $ bundle exec cap melody deploy /var/www/vhosts/masutaka.net以下にデプロイされます。]]></description>
        </item>
        <item>
            <title><![CDATA[『チーム開発実践入門』はツライ環境で開発している方にオススメ]]></title>
            <link>https://masutaka.net/2014-04-26-1/</link>
            <guid>https://masutaka.net/2014-04-26-1/</guid>
            <pubDate>Sat, 26 Apr 2014 00:00:00 GMT</pubDate>
            <description><![CDATA[第２章のケーススタディにある、以下の様なツライ環境で開発している方にお
すすめの一冊です。
・毎日バグ対応に追われている
・検証用環境がない
・適切なバージョン管理システムを使っていない。もしくはバージョン管理システムを適切に使っていない
・リファクタリングできない、もしくは奨励されていない
・リリース手順が複雑
チームで開発するために必要なノウハウが広く浅く書かれています。手始めに
この本を読んでから『GitHub実践入門 』や『入門ChefSolo 』に進むと良いので
はないでしょうか。
幸いにも私はそれほど当てはまらない職場で働いている(いた)ため、ほぼ既知
の内容でしたが、第６章のデプロイの自動化や第７章のリグレッションテスト
は思考を再整理する上で有用でした。
個人的にはSeleniumはいきなり導入するものではなく、Capybaraでカバーでき
ないブラウザ依存のテストをするくらいが良いとは思いますが。
第３章ではバージョン管理の歴史が書かれています。初めて使ったSCMがRCSだっ
た私のようなおっさんホイホイの章でもあります。(そういえば20年くらい前の
キ○ノンのある部署ではNFS上に巨大なRCSファイル群が配置され、RCSなのにリ
ポジトリのように扱えました。今考えるとすごい環境だったなあと思います。)
ちょっと気になったのが第４章のチケット管理。
 P112
チケット管理システムを使って、チケットを中心として開発フローを組み立て
た方法論をチケット駆動開発(TiDD)と呼びます。
 個人的にはチケット管理システムにこだわる必要はないと思います。付箋紙を
使ってもTiDDはできるので。
取り留めがなくなってしまいましたが、何か引っかかるものがある方は読むと
良いと思います。
※ Amazonのレビューにも同じ内容を投稿しました。]]></description>
        </item>
        <item>
            <title><![CDATA[NHKニュース24で遊んでたら今日のピックアップツイートに採用された件]]></title>
            <link>https://masutaka.net/2014-04-25-1/</link>
            <guid>https://masutaka.net/2014-04-25-1/</guid>
            <pubDate>Fri, 25 Apr 2014 00:00:00 GMT</pubDate>
            <description><![CDATA[今年2月に、最後の3種の神器であるテレビが来たわけですが、最近の
NHKニュースはツイートを表示するんですね。なんとリスキーな&hellip;。
というわけでちょっと遊んでみました。
まずは軽いジャブ。ゲストの中山先生(?)の額の汗が気になったので。
loading...
   if (localStorage.getItem("pref-theme") === "light") { const elements = document.getElementsByClassName('twitter-tweet'); for (let i = 0; i  loading...
   if (localStorage.getItem("pref-theme") === "light") { const elements = document.getElementsByClassName('twitter-tweet'); for (let i = 0; i  先を越されてしまいましたorz
loading...
   if (localStorage.getItem("pref-theme") === "light") { const elements = document.getElementsByClassName('twitter-tweet'); for (let i = 0; i  投げやり
loading...
   if (localStorage.]]></description>
        </item>
        <item>
            <title><![CDATA[serverspecでファイルやディレクトリのテストの重複を取り除く]]></title>
            <link>https://masutaka.net/2014-04-20-2/</link>
            <guid>https://masutaka.net/2014-04-20-2/</guid>
            <pubDate>Sun, 20 Apr 2014 01:00:00 GMT</pubDate>
            <description><![CDATA[serverspecでは、このようなテストを書くことが多いと思います。
describe file &#39;/var/www/vhosts&#39; do it { should be_directory } it { should be_owned_by &#39;root&#39; } it { should be_grouped_into &#39;www-data&#39; } it { should be_mode 775 } end describe file &#39;/home/masutaka/.ssh/authorized_keys&#39; do it { should be_file } it { should be_owned_by &#39;masutaka&#39; } it { should be_grouped_into &#39;masutaka&#39; } it { should be_mode 600 } end テストはDRYにしすぎるべきではありませんが、数が増えてくるとさすがに
冗長なのでこのように変更してみました。
describe file &#39;/var/www/vhosts&#39; do it_behaves_like &#39;a directory root:www-data 775&#39; end describe file &#39;/home/masutaka/.]]></description>
        </item>
        <item>
            <title><![CDATA[大江戸Ruby会議04に行ってきた #oedo04]]></title>
            <link>https://masutaka.net/2014-04-20-1/</link>
            <guid>https://masutaka.net/2014-04-20-1/</guid>
            <pubDate>Sun, 20 Apr 2014 00:00:00 GMT</pubDate>
            <description><![CDATA[大江戸Ruby会議04 前日のアルコールが残っていて、着いたのは午後&hellip;。バカバカバカバカ。
それでも楽しめました。
柴田さんの発表を聞けなかったことは激しく後悔。
From &lsquo;Legacy&rsquo; to &lsquo;Edge&rsquo; 2014 edition // Speaker Deck 何度かお会いしたことがある伊藤さんの発表は、チャレンジングで一番良
かった。
&ldquo;1年かけてgemを1つ作りました&rdquo;
Kawamotoさんの発表を聞いて、C言語経験者の端くれとして
ruby-2.1.1.tar.gzをダウンロードしてobject.cを眺めるところまでやった。
&ldquo;RubyVM読んでみた&rdquo;
Sasada夫妻の発表は圧巻。勉強にもなりました。メソッド名忘れた。。
&ldquo;Object Bouquet ～ 幸せの花束・RValue のきらめきを添えて ～&rdquo;
Nishimuraさんの発表は30歳になって英語留学した話。実際に行動した人の
話は面白いし説得力がある。
&ldquo;Another language you should learn&rdquo;
松田さんはこんな発表もするんですね。ソフトウェア開発は建築の手法の
多くを参考にしているので、家を建てることはある意味究極的なことかも
しれない。小学校高学年頃に実家の建て替えをした時、大工さんの仕事を
見るために毎日毎日通ったことを思い出した。
&ldquo;Hacking Home&rdquo;
Aokiさんの話も面白かったなあ。同期会が19:00から恵比寿であったので、
19:00過ぎに撤退..。
&ldquo;Ruby会議でSQLの話をするのは間違っているだろうか&rdquo;
追記(2014-04-20):
スライドはこちらにまとまってました。この記事へのリンクもありがとう
ございます。
大江戸Ruby会議04参加しました！ スライド・リンクまとめ - 酒と泪とRubyとRailsと あとで読むかも。
Ruby Hacking Guide を Kindle で読めるようにする - Stats of the Rivers Ruby Under a Microscope を読んでみた （つまみぐい紹介編） // Speaker Deck ]]></description>
        </item>
        <item>
            <title><![CDATA[Ubuntu13.10のVagrantで/vagrantが見れなくてハマった]]></title>
            <link>https://masutaka.net/2014-04-12-1/</link>
            <guid>https://masutaka.net/2014-04-12-1/</guid>
            <pubDate>Sat, 12 Apr 2014 00:00:00 GMT</pubDate>
            <description><![CDATA[ls /vagrantから返ってこなくて、今日はずっと調べてました。。。
BoxはUbuntu Officialのやつ
http://cloud-images.ubuntu.com/vagrant/saucy/current/saucy-server-cloudimg-amd64-vagrant-disk1.box 結論から言うと、vagrant-vbguest pluginをインストールし、vagrantを起
動、vagrantの中で/usr/lib/VBoxGuestAdditionsを見えるようにしてあげ
ればOK。道は長かった。
 $ vagrant plugin install vagrant-vbguest
$ vagrant up
 Vagrant起動の途中でvbguest pluginによって
/Applications/VirtualBox.app/Contents/MacOS/VBoxGuestAdditions.iso
がvagrantにインストールされます。
この時点ではマウントに失敗します。
default: /vagrant =&gt; /Users/masutaka/projects/example.com Failed to mount folders in Linux guest. This is usually because the &#34;vboxsf&#34; file system is not available. Please verify that the guest additions are properly installed in the guest and can work properly. The command attempted was: mount -t vboxsf -o uid=`id -u vagrant`,gid=`getent group vagrant | cut -d: -f3` /vagrant /vagrant mount -t vboxsf -o uid=`id -u vagrant`,gid=`id -g vagrant` /vagrant /vagrant sshログインして、/usr/lib/VBoxGuestAdditionsを見えるようにしてあげます。]]></description>
        </item>
        <item>
            <title><![CDATA[RubyのOpenSSL::OPENSSL_VERSIONはなぜ定数？]]></title>
            <link>https://masutaka.net/2014-04-08-1/</link>
            <guid>https://masutaka.net/2014-04-08-1/</guid>
            <pubDate>Tue, 08 Apr 2014 00:00:00 GMT</pubDate>
            <description><![CDATA[本日ネットを震撼させているopensslの脆弱性。
OpenSSLの重大バグが発覚。インターネットの大部分に影響の可能性｜TechCrunch Japan 私のMacbookAirにインストールしたrubyはHomebrewのopensslをリンクして
いるので、状況を調べてみました。
[2014-01-25-2] の方法でrubyをビルドしているので、Homebrewのopensslを
リンクしています。
$ otool -L ~/.rbenv/versions/2.1.0/lib/ruby/2.1.0/x86_64-darwin13.0/openssl.bundle /Users/masutaka/.rbenv/versions/2.1.0/lib/ruby/2.1.0/x86_64-darwin13.0/openssl.bundle: /usr/local/opt/openssl/lib/libssl.1.0.0.dylib (compatibility version 1.0.0, current version 1.0.0) ★これ /usr/local/opt/openssl/lib/libcrypto.1.0.0.dylib (compatibility version 1.0.0, current version 1.0.0) ★これ /usr/lib/libz.1.dylib (compatibility version 1.0.0, current version 1.2.5) /usr/lib/libSystem.B.dylib (compatibility version 1.0.0, current version 1197.1.1) /usr/lib/libobjc.A.dylib (compatibility version 1.0.0, current version 228.0.0) brew info opensslによると、Homebrewのopensslは1.0.1fです。
今回の対象です。
以下のコマンドでも調べられるようです。同様の結果を得られました。
 $ ruby -ropenssl -e &ldquo;p OpenSSL::OPENSSL_VERSION&rdquo;
&ldquo;OpenSSL 1.0.1f 6 Jan 2014&rdquo;
 対策が施された1.0.1gにアップデートします。
 $ brew upgrade openssl]]></description>
        </item>
        <item>
            <title><![CDATA[Suicaを簡単に取り出せるiPhone5ケースを買った]]></title>
            <link>https://masutaka.net/2014-04-02-2/</link>
            <guid>https://masutaka.net/2014-04-02-2/</guid>
            <pubDate>Wed, 02 Apr 2014 01:00:00 GMT</pubDate>
            <description><![CDATA[前回[2014-01-10-1] から3ヶ月経ってませんが、また買いました。
電車通勤というものを始めてみたんです(何年ぶりだろう)。JRを経由しな
いのでPASMOになるんですよね。そうするとオートチャージが付いたビュー
カードは使えない！
京王パスポート(JRのビューカードみたいなの)を調べた感じ、オートチャー
ジ機能がついた定期券はないようなので、普通の(自分でチャージする)
PASMO定期券を買うことにしました。(入社から1ヶ月過ぎたのにまだ買って
ませんがw)
 そうすると、問題は前回買ったケース。ICカードを取り出すのがやや面倒
なんですよね。以前たつをさんのサイトで見たケースを買うことにしました。
Suica が格納できる iPhone 5 ケースで通勤も買物も快適！ もうひとつの理由は汚れが吸着しやすく、残念な見た目になったこと。
滑りにくくて好きだったんですけどねえ。
かかった費用はこんな感じ。
本体￥1,100 + 送料￥500 - Amazonギフト券￥1,338 = ￥262
白・水色・ピンクの３色パネル付きです。最初、パネルが外れやすいので
は？と不安になりましたが、すぐにピッタリはまりました。見た目もスリ
ムでおしゃれです。滑りやすいので、気をつけないとなー。
SuicaとiPhoneが一緒になってるとめっちゃ快適です。iD(カード)も一緒に
したい。]]></description>
        </item>
        <item>
            <title><![CDATA[Emacs-24.3からネイティブプロファイラが使えてた]]></title>
            <link>https://masutaka.net/2014-04-02-1/</link>
            <guid>https://masutaka.net/2014-04-02-1/</guid>
            <pubDate>Wed, 02 Apr 2014 00:00:00 GMT</pubDate>
            <description><![CDATA[M-x profiler-start で開始。cpu, cpu+mem, mem のどれかを選ぶ。 適当に何か操作する。 M-x profiler-report でレポート表示。
これだけです。  profiler-cpu-start()やprofiler-memory-start()がCで実装されているよ
うです。よくわからんけどEmacs遅い時あるわーって方は使ってみてはいか
がでしょうか？
作者はauto-complete.el の@m2ym さん。2009年tokyo-emacs #x02の発表が
Emacs-23.4で取り込まれたんですね。SUGOI!!
tokyo-emacs - Google グループ (tokyo-emacs #x02) : 発表者用ページ : ATND elpってのもありますが 、指定したパッケージの関数全てにadviceかけるよ
うで遅いです。パッケージを跨ぐことも出来ないみたい。
という話を@tomoyaton として、@hirocaster の問題を解決出来ました！]]></description>
        </item>
        <item>
            <title><![CDATA[Brewfileをシェルスクリプト化したら少し幸せになった]]></title>
            <link>https://masutaka.net/2014-03-19-2/</link>
            <guid>https://masutaka.net/2014-03-19-2/</guid>
            <pubDate>Wed, 19 Mar 2014 01:00:00 GMT</pubDate>
            <description><![CDATA[loading...
   if (localStorage.getItem("pref-theme") === "light") { const elements = document.getElementsByClassName('twitter-tweet'); for (let i = 0; i  ぶ、Brewfileの方がカッコいいじゃないですか..(震え声)
まあ実際そのとおりで、if文とか使えないので不便です。
さらに、すでにインストール済みのパッケージに新バージョンが出ている
と、brew bundleの当該installでエラーになるのも不便です。
今までbrew update =&gt; brew outdated =&gt; brew upgrade =&gt; brew bundleな
どと頭悪い感じに使っていたので、シェルスクリプト化して賢くしました。
下記シェルスクリプトを実行すると、更新対象のパッケージがあれば
upgradeするかプロンプトで問い合わせ(Ctrl-cで中断可)、なければいつも
のinstallフェーズに進みます。
 作ってみたら、メソッドとデータを分けるという意味でもtapやinstallは
Brewfileとして切り出すべきか&hellip;と余計もやもやしましたw
関連記事: 私もBoxen止めてBrewfile+brew-caskにした [2014-01-25-1] ]]></description>
        </item>
        <item>
            <title><![CDATA[今さらながらftpコマンドでの自動ログインとか]]></title>
            <link>https://masutaka.net/2014-03-19-1/</link>
            <guid>https://masutaka.net/2014-03-19-1/</guid>
            <pubDate>Wed, 19 Mar 2014 00:00:00 GMT</pubDate>
            <description><![CDATA[数年に一回調べるのでメモ。
~/.netrcを下記内容で、パーミッションは600で作成。
machine ftp.example.com login ユーザ名 password パスワード macdef init bin set prompt &#34;ftp://%M%/ &gt; &#34; cd /hoge ターミナルからftp ftp.example.comを実行すると、バイナリモードに設
定し、自動ログインしてプロンプトをいい感じに、いつものディレクトリ
にcdしてくれる。最後の空行は必須。複数ホストは試してない。
ftp -d ftp.example.comなどと、-dオプションをつけると挙動を確認
できて捗る。
man ftpも確認すべし。
UNIXの部屋 コマンド検索:~/.netrc (*BSD/Linux) ]]></description>
        </item>
        <item>
            <title><![CDATA[フィードフォースに入社してまだ２週間も経っていないけど]]></title>
            <link>https://masutaka.net/2014-03-13-1/</link>
            <guid>https://masutaka.net/2014-03-13-1/</guid>
            <pubDate>Thu, 13 Mar 2014 00:00:00 GMT</pubDate>
            <description><![CDATA[リーン開発の現場 P109
 理想とはたどりつくべき場所のことではなく、
ありたい姿に向かい続けることなんだ！
 ビジネス面や技術面でさまざまな困難を抱えたとしても、こんなチームだっ
たら必ず成功するはず。そして今のチームは素晴らしいチーム！
 ]]></description>
        </item>
        <item>
            <title><![CDATA[ラングリッチを退職し、フィードフォースに入社しました]]></title>
            <link>https://masutaka.net/2014-03-09-1/</link>
            <guid>https://masutaka.net/2014-03-09-1/</guid>
            <pubDate>Sun, 09 Mar 2014 00:00:00 GMT</pubDate>
            <description><![CDATA[去年の11月14日にラングリッチ を退職しました。
退職は人生２回目で[2011-04-22-1] のメタテクノ以来です。
組み込み業界出身でWebの知識があまりない私を受け入れてくれたラングリッ
チには、本当に感謝しております。
今回の退職と転職活動では、多くの方にご心配とご迷惑をお掛けしました。
この場を借りてお礼とお詫びを申し上げます。
ラングリッチを振り返る 当時のラングリッチは会社設立からちょうど1年、サービスがローンチされ
てから9ヶ月経ったあたりでした。
社員はまだいなかったので、社員番号一桁 どころか社員第一号でした。
社員番号などない的な。
当時起きたことをまとめてみました。
2010年7月17日 ラングリッチ誕生
2010年8月5日 ラングリッチのプロモアカウントに捕捉される。 多分このツイート をした
から。
2010年8月25日 ラングリッチのレッスンを初受講。 滝のような汗は出たが、かなり面白かっ
たのでレッスンを毎日受け続けることに！(元々私、ラングリッチの生徒だっ
たんです。こんな記事も[2010-12-19-1] )
2011年1月1日 ラングリッチのtomoyaさんにTwitterのダイレクトメッセージでコンタクト
をとり、後日Skypeのチャットでいろいろお話。
2011年3月2日 メタテクノ最終出社日
2011年3月3日 有給消化期間を満喫し始める。
2011年3月11日 14:46に東日本大震災発生。15:00からラングリッチのレッスンが始まって
しまった(キャンセルはレッスン開始1時間前までw)。停電のためiPhoneの
Skypeを使って、プライ先生に実況中継。
2011年3月15日 地震の混乱が収まらない中、関西空港でtomoyaさんと落ち合いフィリピン
はセブ島にGO!!
2011年4月1日 サービスの裏側やフィリピンを体験して帰国。この辺からラングリッチの
カスタマーサポートのお手伝い開始。開発にも着手し始める。
2011年4月21日 メタテクノ退職日
2011年4月27日 川崎から引っ越し。西明石行きの夜行バスに乗る。
2011年4月28日 荷物が来るまでCEOの家に居候。
2011年5月2日 荷物が来て、オフィス兼住居への引越し完了。
ラングリッチでは本当に色々なことを学びました。スタートアップの黎明
期からの成長っぷりを体験できたことはもちろんですし、東京に進出して
からは、アジャイル開発、TDD、まともなWebアプリケーションの作り方等、
これらは今も自分の資産となっております。
最後の大きなプロジェクトはラングリッチへの恩返しのつもりで、全てを
出し尽くしました。しかしこれが本当に大変で、期日までに終わるのかと
いう不安があり昼夜問わず開発していたため、2ヶ月間の総コミット数は
637にもなりました。
※表示が変ですが、2013年8月31日から2013年11月1日の総コミット数です。
もちろんこれは開発者の皆さんだけでなく、関係者全員のご協力のおかげ
です。そもそもPull Request見てくれる人がいないと成立しないですし。
開発内で言うと、セキュリティチェック、サーバ構築、フロントエンド、
要件整理等、自然に役割分担されていきました。あ、オレこれやるわ的な。
私はアプリ側を実装したため、コミット数が膨れ上がったというわけです。]]></description>
        </item>
        <item>
            <title><![CDATA[Chromeでよく訪れるサイトにアクセスするためのベストプラクティス]]></title>
            <link>https://masutaka.net/2014-02-13-2/</link>
            <guid>https://masutaka.net/2014-02-13-2/</guid>
            <pubDate>Thu, 13 Feb 2014 01:00:00 GMT</pubDate>
            <description><![CDATA[こんな感じで、ブックマークバーに名前なしブックマークを登録します。
スペースを取りませんし、faviconだけでも案外分かるものです。
なぜこうしたか？ 実はずっとこの現象に悩まされていました。時々ね。
 ⌘-tで新しいタブを開く fとか打つとfacebook.comなどと補完されるのでReturnキーを押す facebookに移動することなく、アドレスバーの入力も消える ＼(^o^)／ しかたがないのでもう一度入力する  これ、Chrome拡張のSpeed Dial 2 のせいだったんですね。
1でサムネイル付きブックマークの読み込みが始まって、2でフォーカスを
奪われるみたい。
どうやって解決したか？ 安直にSpeed Dial 2を消すと、Googleのトップページっぽいものが表示さ
れてイヤな感じです。良く見るページの読み込みが若干もたつきますし。
なので、Speed Dial 2を削除し、同じくChrome拡張のEmpty New Tab Page をインストールしました。この拡張は新しいタブを空っぽで開くだけの拡
張です。
これでSpeed Dial 2の時より、高速に新しいタブを開くことが出来ました。
よく訪れるサイトは、ブックマークバーから楽々訪問です。
新たなきづき github.comやfacebook.comなど、本当によく訪れるサイトは、表題のベス
トプラクティスを使わず、上の方法(アドレスバーから訪問)を使っていた！
おまけ ⌘-l(エル)でアドレスバーに移動できます。]]></description>
        </item>
        <item>
            <title><![CDATA[phpenvでちょっと古めのphp-5.3.28をインストールしたメモ]]></title>
            <link>https://masutaka.net/2014-02-13-1/</link>
            <guid>https://masutaka.net/2014-02-13-1/</guid>
            <pubDate>Thu, 13 Feb 2014 00:00:00 GMT</pubDate>
            <description><![CDATA[ちょっと5.3系があるとうれしいかも的な状況になったので、OSX Mavericksで
php-5.3.28をビルドしてみました。すると、こんなリンクエラーになります。
$ phpenv install 5.3.28 (省略) ----------------- | BUILD ERROR | ----------------- Here are the last 10 lines from the log: ----------------------------------------- _load_all_certs_from_file in openssl.o &#34;_sk_value&#34;, referenced from: _zif_openssl_x509_parse in openssl.o _zif_openssl_csr_new in openssl.o _zif_openssl_pkcs7_verify in openssl.o _php_openssl_parse_config in openssl.o _php_openssl_sockop_set_option in xp_ssl.o ld: symbol(s) not found for architecture x86_64 clang: error: linker command failed with exit code 1 (use -v to see invocation) make: *** [sapi/fpm/php-fpm] Error 1 ----------------------------------------- The full Log is available at &#39;/tmp/php-build.]]></description>
        </item>
        <item>
            <title><![CDATA[Homebrewのnginxをphpenvのphp-fpm付きでセットアップしたメモ]]></title>
            <link>https://masutaka.net/2014-02-11-1/</link>
            <guid>https://masutaka.net/2014-02-11-1/</guid>
            <pubDate>Tue, 11 Feb 2014 00:00:00 GMT</pubDate>
            <description><![CDATA[最新のPHPを使えるようになったので[2014-02-09-1] 、nginxもセットアッ
プしてみました。
これでようやくOSX MavericksのApache&amp;PHPとオサラバできます。
php-fpmの設定と起動 ~/.phpenv/versions/5.5.9/etc/php-fpm.conf.defaultを以下のように修正し、
同ディレクトリにphp-fpm.confとして保存しました。
userとgroupをコメントアウトしているのは、今回のNgnixはユーザ権限で
動かす適当なものだからです。
listenはnginxとの橋渡しです。今回は同一マシンなのでUNIXドメインソケッ
トを使用しました。
 自動起動スクリプトを作成しました。
 上記自動起動用のファイルを設置しました。
$ ln -sfv &lt;path to org.php.php-fpm.plist&gt; ~/Library/LaunchAgents 自動起動ON＆起動しました。
$ launchctl load -w ~/Library/LaunchAgents/org.php.php-fpm.plist nginxのインストールと設定、起動 Apacheを自動起動する設定にしていたので削除しました。
$ sudo launchctl unload -w /System/Library/LaunchDaemons/org.apache.httpd.plist Ngnixはbrewコマンドでインストールしました。
(実際はbrew bundle[2014-01-25-1] でインストールしてます。)
$ brew install nginx ==&gt; Downloading http://nginx.org/download/nginx-1.4.4.tar.gz Already downloaded: /Library/Caches/Homebrew/nginx-1.4.4.tar.gz ==&gt; ./configure --prefix=/usr/local/Cellar/nginx/1.4.4 --with-http_ssl_module --with-pcre --with-ipv6 --sbin-path=/usr/local/Cellar/nginx/1.4.4/bin/nginx --with-cc-opt=-I/usr ==&gt; make ==&gt; make install ==&gt; Caveats Docroot is: /usr/local/var/www The default port has been set in /usr/local/etc/nginx/nginx.]]></description>
        </item>
        <item>
            <title><![CDATA[HomebrewのphpenvでPHPをインストールしたメモ]]></title>
            <link>https://masutaka.net/2014-02-09-1/</link>
            <guid>https://masutaka.net/2014-02-09-1/</guid>
            <pubDate>Sun, 09 Feb 2014 00:00:00 GMT</pubDate>
            <description><![CDATA[Vagrant使ってたから、OSXでPHP使う必要なかっただけだから..(震え声)
そういうわけでphpenvでPHP環境を作ってみました。まずは基礎知識。
  phpenv
Rubyのrbenv、Perlのplenvに相当。複数バージョンのPHPをHOMEにインストー
ルし、切り替えて使うツール。というよりシステムを汚さないために使う感じ。
  pecl, pear
Rubyのgem、Perlのcpanmに相当。peclはCで書かれ、pearはPHPで書かれて
いる。PHPはCで書かれたライブラリ(要は*.so)を動的にロードできないた
め、このように分かれているそう。
  composer
Rubyのbundler、Perlのcartonに相当。アプリごとにライブラリを切り替え
ることが出来る。
  Homebrewのphpenvをインストール 普通にbrewコマンドでインストールします。
(実際はbrew bundle[2014-01-25-1] でインストールしてます。)
$ brew install phpenv ==&gt; Downloading https://github.com/CHH/phpenv/archive/01a2c1e25096f8ff10f2f781428a5d470e1ecaba.tar.gz Already downloaded: /Library/Caches/Homebrew/phpenv-01a2c1e.tar.gz ==&gt; /usr/local/Cellar/phpenv/01a2c1e/bin/phpenv-install.sh ==&gt; Caveats To finish installing phpenv: * Add ~/.phpenv/bin to your $PATH * Add &#34;eval $(phpenv init -)&#34; at the end of your ~/.bashrc * Restart your shell ==&gt; Summary � /usr/local/Cellar/phpenv/01a2c1e: 6 files, 24K, built in 7 seconds 上の説明のとおり、~/.]]></description>
        </item>
        <item>
            <title><![CDATA[このブログのはてなブックマーク数もGrowthForecastに記録し始めた]]></title>
            <link>https://masutaka.net/2014-02-04-1/</link>
            <guid>https://masutaka.net/2014-02-04-1/</guid>
            <pubDate>Tue, 04 Feb 2014 00:00:00 GMT</pubDate>
            <description><![CDATA[前回[2014-02-03-1] に引き続きこの話題です。
このブログのはてなブックマーク数も記録し始めました。
http://masutaka.net:5125/list/chalow/subscribers 実装はこれ。
https://github.com/masutaka/growthforecast_postman/pull/1/files 今回初めてXMLRPC APIを使いましたが面倒ですね。Wikipedia によると
 その後、これに新たな機能を追加したものがSOAPへと発展した。
とあるので、今は廃れた仕様なのでしょうか。
 初め、こんな感じでXMLRPC::Client使おうとしたけど、取得後のエラー
チェックに引っかかってうまくいかなかった。
 最終的にはNet::HTTP使ったシンプルなもの になりました。RESTに慣れてい
る身としては、こちらのほうが分かりやすい。
See also
はてなブックマーク件数取得API - Hatena Developer Center ]]></description>
        </item>
        <item>
            <title><![CDATA[FeedlyやlivedoorReaderの購読者数をGrowthForecastにポストするRubyスクリプト作った]]></title>
            <link>https://masutaka.net/2014-02-03-1/</link>
            <guid>https://masutaka.net/2014-02-03-1/</guid>
            <pubDate>Mon, 03 Feb 2014 00:00:00 GMT</pubDate>
            <description><![CDATA[   settings.example.ymlをsettings.ymlとしてコピーし、適当に書き換えて
main.rbを実行すれば、お手元のGrowthForecastにポストされると思います。
cronに登録しとけばよいかと。
こんな感じで確認できます。
http://masutaka.net:5125/list/chalow/subscribers 作ったきっかけ 先日、55はてブ取得できた[2014-01-25-1] は、Pocketでは68ストックされ
ていたのですよね。
あと、今までは[TopHatenar] masutaka.net さんの順位 を見ていればなん
となく人気具合が分かりましたが、他のサービスも台頭してきてよく分か
らなくなってきました。更新もリアルタイムじゃないし。
それじゃあ、全部まとめてGrowthForecastに記録すれば分かりやすいかなと。
今のところ記録するのは、FeedlyとlivedoorReaderだけです。Pocketや
はてブは今後対応する予定です。Pocketについてはひとまずパブリッシャー
ツールを申し込みました。
あとで読まれた回数までわかる！Pocketパブリッシャーツールを使ってみることにしました。サイトの登録方法など｜10251 最初は気になったらFeedly Subscribers Checker 2 で調べりゃいいかなー
と思いましたが、調べるうちに履歴も欲しくなってきたｗ
雑感 初めはshell scriptでcurl使うくらいのつもりが、気がついたらそれなり
の大きさになっていました。。
Raspberry Pi[2013-12-05-1] を有効活用しようとも思っていたけど、使う
意味を見出せなかった。
作るにあたって、@june29 さんの29hours[2013-04-14-2] を参考にさせて頂
きました。gemとか全く調べずに車輪の再発明する気満々で作ったので、今
後はリファクタリングもする予定です。
Thanks!
Feedlyでのブログ購読者数を取得するためのメモ｜メモ帳代わりのブログ RubyでJSON形式の結果が返ってくるURLをParseする - Qiita [キータ] RSS購読者数を知るための方法をご紹介 / かりんと～く 【 夢猫工房 】 See also
The feedly Cloud API ]]></description>
        </item>
        <item>
            <title><![CDATA[HomebrewのPostgreSQLをきれいにインストールした]]></title>
            <link>https://masutaka.net/2014-02-01-1/</link>
            <guid>https://masutaka.net/2014-02-01-1/</guid>
            <pubDate>Sat, 01 Feb 2014 00:00:00 GMT</pubDate>
            <description><![CDATA[Heroku用にインストールしていたPostgreSQL.app をHomebrewのものに変更
しました。
PostgreSQL.app をアンインストール [Mac] PostgreSQL.app をアンインストール at technote を参考に。
 /Library/PostgreSQL/9.3/uninstall-postgresql.appを実行 /Library/PostgreSQLを削除 OSXのシステム環境設定→ユーザとグループからpostgresユーザを削除 ~/.zshenvからsource /Library/PostgreSQL/9.3/pg_env.shを削除  環境変数とか残っているので、OSXを再起動するのが無難です。
HomebrewのPostgreSQLをインストール まずは普通にbrewコマンドでインストール。
(実際はbrew bundle[2014-01-25-1] でインストールしてます。)
$ brew install postgres ==&gt; Downloading https://downloads.sf.net/project/machomebrew/Bottles/postgresql-9.3.2.mavericks.bottle.tar.gz Already downloaded: /Library/Caches/Homebrew/postgresql-9.3.2.mavericks.bottle.tar.gz ==&gt; Pouring postgresql-9.3.2.mavericks.bottle.tar.gz ==&gt; Caveats If builds of PostgreSQL 9 are failing and you have version 8.x installed, you may need to remove the previous version first. See: https://github.com/Homebrew/homebrew/issues/issue/2510 To migrate existing data from a previous major version (pre-9.]]></description>
        </item>
        <item>
            <title><![CDATA[改めてHomebrewをクリーンインストールしたメモ]]></title>
            <link>https://masutaka.net/2014-01-25-2/</link>
            <guid>https://masutaka.net/2014-01-25-2/</guid>
            <pubDate>Sat, 25 Jan 2014 01:00:00 GMT</pubDate>
            <description><![CDATA[BoxenからHomebrewに戻ってきたので[2014-01-25-1] 、改めてまっさらな状
態からインストール。[2011-07-26-1] 以来だね。/usr/localは空っぽにしといた。
http://brew.sh より。
 $ ruby -e &ldquo;$(curl -fsSL https://raw.github.com/Homebrew/homebrew/go/install)"  インストールが終わると、brew doctorしろと言われた。doctorから促され
るがままにXQuartz-2.7.5.dmgをインストール。
brewのzsh補完ファイルのリンク先をBoxenからHomebrewに変更。
 $ ln -sf /usr/local/Library/Contributions/brew_zsh_completion.zsh ~/.zsh/functions/_brew
※ ~/.zshrcでFPATH=$HOME/.zsh/functions:$FPATHを追加してある。
 [2014-01-25-1] のBrewfile使って、brew bundleで各パッケージをインストール。
Rubyはrbenvから2.0.0-p353とruby-2.1.0をインストール。
# ruby-buildはHomebrew管理にはしない $ git clone git@github.com:sstephenson/ruby-build.git ~/.rbenv/plugins/ruby-build # 2.1.0のインストール $ RUBY_CONFIGURE_OPTS=&#34;--with-readline-dir=`brew --prefix readline` --with-openssl-dir=`brew --prefix openssl`&#34; rbenv install 2.1.0 $ rbenv global 2.1.0 &amp;&amp; rbenv rehash &amp;&amp; rehash $ cat ~/projects/home/Gemfile.txt | xargs gem install $ rbenv rehash &amp;&amp; rehash # 2.]]></description>
        </item>
        <item>
            <title><![CDATA[私もBoxen止めてBrewfile+brew-caskにした]]></title>
            <link>https://masutaka.net/2014-01-25-1/</link>
            <guid>https://masutaka.net/2014-01-25-1/</guid>
            <pubDate>Sat, 25 Jan 2014 00:00:00 GMT</pubDate>
            <description><![CDATA[Boxenと比べなくても、導入が簡単なので何かとオススメです。
要点  Brewfileを使えば、インストールするパッケージを管理できる BrewfileはHomebrewで最初から使える brew-caskもインストールすれば、Chromeとかもインストールできる  Boxenの問題点 [2013-11-23-1] に導入したBoxenは以下の問題がありました。
○インストールした一部のツールが壊れていることがある。再インストー
ルで直ることもあるし、直らないこともある(詳細は[2013-11-23-1] の追記
参照)。
 % wget
zsh: illegal hardware instruction wget
 ○PuppetfileでRubyレシピ等のバージョンが固定されているため、最新の
バージョンを気軽に試しづらい。というか、レシピのバージョンを上げて
も問題がないか試したり考えたりするのが面倒くさい。
○パッケージをインストールしたり構成を変えるときに、エネルギーがい
る。なんだか腰が重い。
というわけでBoxenはズビっと削除しました。
 $ git clone git@github.com :masutaka/my-boxen.git
$ cd my-boxen
$ ./script/nuke &ndash;all &ndash;force
 導入方法 Homebrewではbrew bundleコマンドが最初から使えます。このコマンドは
カレントディレクトリのBrewfileに書かれたコマンドを実行します。
brew bundle path/to/Brewfileのようにファイルを指定することも出来ます。
Brewfileは例えばこんな感じ
 update
install ack
 こちらと同じ意味になります。
 $ brew update
$ brew install ack
 また、brew-caskというコマンドをインストールすることで、Chromeや
Skypeなどのアプリも入れられます。]]></description>
        </item>
        <item>
            <title><![CDATA[Herokuにデプロイした時にChatWorkに通知するrakeタスク作った]]></title>
            <link>https://masutaka.net/2014-01-19-1/</link>
            <guid>https://masutaka.net/2014-01-19-1/</guid>
            <pubDate>Sun, 19 Jan 2014 00:00:00 GMT</pubDate>
            <description><![CDATA[使っているのはこんな環境です。
 HerokuにRailsのProductionとStaging環境がある。 Stagingで任意のブランチを動かしたいことがある。  今までHerokuにデプロイする時はこうしてましたが、
$ git push prod master 今後はこのようになりました。
$ bundle exec rake deploy:prod Dryrunも出来ます。
$ bundle exec rake deploy:prod DRYRUN=1 Stagingで任意のブランチを動かしたい時はこちら。
$ bundle exec rake deploy:staging BRANCH=&lt;any-branch&gt;  Gistのページ にも補足情報を書きました。
皆さん、Herokuへのデプロイはどんな方法でやってます？
See also
ChatWorkのAPIを叩けるGemをつくった - 良いあそなすちゃん チャットワークAPIを限定プレビュー公開します！｜ChatWorkブログ 追記(2014-01-24):
なぜかデプロイ後のHashが更新されないことがあったので、
git ls-remote prodの代わりにheroku releaseを使うようにしました。
なんだかコードが長くなってしまったorz]]></description>
        </item>
        <item>
            <title><![CDATA[『過負荷に耐えるWebの作り方 ~国民的アイドルグループ選抜総選挙の舞台裏』を読んだ]]></title>
            <link>https://masutaka.net/2014-01-13-2/</link>
            <guid>https://masutaka.net/2014-01-13-2/</guid>
            <pubDate>Mon, 13 Jan 2014 01:00:00 GMT</pubDate>
            <description><![CDATA[現場の生々しい声を知ることが出来て大変面白かったです。
納期が2ヶ月なんですよね。私も去年、同じ期間でボリュームのあるプロジェ
クトに関わったので、胃がキリキリしてきましたw
スゴイなと思ったのが、運用経験の少ない技術でシステムを作ったこと。
毎秒10,000投票以上を実現可能なサンプルプログラムがあり、その後の耐
久テストにもパスしたとはいえ、よく採用したなあと思いました。まあ、
カットオーバー直後は心配で一睡もせずにアクセスログを凝視したそうで
すがw この辺の話もキリキリしてきます。
あとはこれかな。
P43
 入力されたシリアル番号が正しいものか（事前に発行したものか）を確認する
ために、
・データベースを使って発行済みシリアル番号を管理し、その中に入力された
番号があるかを検索する
・データベースではなく、メモリ上で発行済みシリアル番号を管理し、入力さ
れた番号を検索する
という方法が挙げられましたが、今回は、処理速度を最優先に考えて、検索処理
をせずにアルゴリズムでシリアル番号の正当性を確認する方法を採用しました。
 当初はここがボトルネックになるとの話だったので、この方法を採用した
のはうまいというか、過負荷なシステムならではと感じました。
採用された技術は馴染みのないものばかりでしたが、採用の経緯は参考に
なりました。
というわけでオススメです。
P.S.
P68でtypoを発見。
×ダウウンロードページ
○ダウンロードページ]]></description>
        </item>
        <item>
            <title><![CDATA[『Upgrading to Rails 4』をKindleとiBookで読めるようにした]]></title>
            <link>https://masutaka.net/2014-01-13-1/</link>
            <guid>https://masutaka.net/2014-01-13-1/</guid>
            <pubDate>Mon, 13 Jan 2014 00:00:00 GMT</pubDate>
            <description><![CDATA[Upgrading to Rails 4 を読んだ - HsbtDiary(2013-10-26) 遅ればせながら着手。。
Kindlegenのインストール あらかじめKindlegenをインストールしておきます。Amazonからダウンロー
ド してきても良いですが、Homebrewもお手軽でよいと思います。
私のHomebrewはBoxenでインストールしたので[2013-11-23-1] 、kindlegen
をmodules/people/manifests/masutaka.ppに追加してインストールしました。
素のHomebrewの方は、初めにhomebrew-binary をインストールする必要があ
るみたいです。バイナリファイルの扱いが少し変わったんですね。
 $ brew tap homebrew/binary
$ brew install kindlegen
 mobiファイルとepubファイルへの変換 公開されている書籍をGitHubから持ってきて、kitabuで変換するだけです。
$ git clone git@github.com:alindeman/upgradingtorails4.git $ bundle install --path vendor/bundle $ bundle exec kitabu export $ ls output/ tmp upgradingtorails4.epub upgradingtorails4.html upgradingtorails4.mobi kitabuが生成するファイルはepubとhtmlファイルですが、Kindlegenがイン
ストールされていると、mobiファイルも作ってくれるみたいです。もちろ
ん手動でkindlegen upgradingtorails4.epubして作ることも出来ます。
あとは、mobiファイルをUSB接続やメールでKindleに転送し、epubファイル
をiBookにドラッグアンドドロップするだけです。]]></description>
        </item>
        <item>
            <title><![CDATA[499円のSuica対応iPhone5ケースを買った]]></title>
            <link>https://masutaka.net/2014-01-10-1/</link>
            <guid>https://masutaka.net/2014-01-10-1/</guid>
            <pubDate>Fri, 10 Jan 2014 00:00:00 GMT</pubDate>
            <description><![CDATA[[2013-10-14-1] にiPhone5sを買ってから、ずっとケースなしで過ごしてき
ました。
それは良いのですが、駅の改札を通るときに財布からSuicaを出すのが大変
面倒だったので(※)、ついにケースを買いました。
※ 定期入れは落としたことがあるので持ちたくなかった。
まだSuicaでテストしてませんが、触った感触は499円(※)のわりに悪くな
い感じです。ただし、背面のGoldは完全に見えなくなりました。
※ 送料は別途210円でした。
上海問屋、結構良いですね〜
http://www.donya.jp/ 追記(2014-01-13):
ケースに入れたSuicaは無事使えました。
追記(2014-01-30):
あー、ちょっと汚れやすいですね。色がついたり、濡れた後が残ったりし
ています。]]></description>
        </item>
        <item>
            <title><![CDATA[GitHubのプライベートリポジトリでも無料で使えるCI、Werckerを使ってserverspecを動かした]]></title>
            <link>https://masutaka.net/2014-01-09-1/</link>
            <guid>https://masutaka.net/2014-01-09-1/</guid>
            <pubDate>Thu, 09 Jan 2014 00:00:00 GMT</pubDate>
            <description><![CDATA[[2013-05-27-2] で書いたとおり、このブログのサーバmasutaka.netは
Chef-soloでレシピを、serverspecでそのテストを書いています。
ソースコードはGitHubのプライベートリポジトリに置いており、お金をか
けてまでやる気が出なかったのでCIはしていませんでした(※)。
※ CircleCIの場合、一番安いプランで$19/month
はてブのホットエントリでこちらの記事を見つけたので、serverspecのCI
を設定してみました。
Githubのプライベートリポジトリでも無料で使えるCI、Werckerを使ってrails newからHerokuのデプロイまでやってみる｜mah365 serverspec固有の設定 基本的な手順は記事のとおりなので、詰まることはないと思います。
ただしserverspecはssh経由で動作するため、sshの設定が必要です。
(1) WerckerのサイトでSSH key pairを作成する
(2) ユーザmasutakaとしてssh接続する設定をする
(3) ssh接続した時にknown_hostsに追加するか聞かれない設定をする
(1)は以下のサイトが参考になりました。
wercker + Capistrano で自動デプロイ - milk1000cc&rsquo;s blog wercker.ymlの中で秘密鍵を $WERCKER_SSH_KEY_PRIVATE として参照できる
ようになります。公開鍵はmasutaka.net:~/.ssh/authorized_keysに追記します。
最終的なwercker.yml (1)の秘密鍵$HOME/.ssh/id_rsaは39行目で作っています。
(2)と(3)は26行目で$HOME/.ssh/configに設定しています。
(2)は33行目の&quot;User masutaka&quot;、(3)は34行目の&quot;StrictHostKeyChecking no&quot;です。
見たまんまですが、serverspecは49行目で設定しています。
 wercker.ymlの書式 基本的な書式は http://devcenter.wercker.com/articles/werckeryml/ で
分かると思います。wercker.ymlのValidaterもありました。 bundle-installやcreate-fileは拡張という扱いなのか、
https://app.wercker.com/#wercker にアプリとして存在してました。
ドキュメントもあるので、必要に応じてどうぞ。
ビルド結果 Werckerの各アプリのページでもちろん分かりますが、
各Pull Requstのページでも分かるので、今後はローカルでTest&amp;Cookして
Pull Requst出す、ビルドが通っていればmasterにマージという使い方をし
そうです(Collaboratorはもちろん私一人)。
Werckerバッジ TravisCIやCircleCIでお馴染み、ビルドステータスが分かるバッジも
各アプリのページ、右上から取得できます。
README.mdに追加しました。]]></description>
        </item>
        <item>
            <title><![CDATA[iOS7のメールとブラウザとマップアプリをGoogleからAppleに変えた]]></title>
            <link>https://masutaka.net/2014-01-03-1/</link>
            <guid>https://masutaka.net/2014-01-03-1/</guid>
            <pubDate>Fri, 03 Jan 2014 00:00:00 GMT</pubDate>
            <description><![CDATA[気がついたら、iOS7のメールやブラウザ、マップはどれもGoogleのアプリ
を使っていましたが、Appleもだいぶ改善されたようなので、全て移行しました。
◆メール
iOS6までは、Gmailのアーカイブにあまり対応してませんでしたが(設定で
削除をアーカイブとすることはできた)、さっき試したらアーカイブやスター
が使えたので移行しました。
◆ブラウザ
元々、OSXのChromeとブックマークを同期したくて使ってましたが、まあ必
要ないよねということで移行しました。iOSは標準のブラウザがSafari固定
なので、ちょいちょいSafariが開いてうざかったのですよね。iOSの制約で
Chrome自体、Safariよりパフォーマンスが悪いようですし。 ◆マップ
iOS7が出た時のマップアプリの酷さはもはや伝説ですが、今はまあまあ完
全されたようなので、これも移行しました。まあでも気に食わなかったら
またGoogleに戻すかも。他のアプリと依存関係無いですし。
まとめ:
iPhoneにインストールしたアプリ多すぎなので整理したい。]]></description>
        </item>
        <item>
            <title><![CDATA[Rspecのshouldをexpectに置き換えた後の、itの使い道はこれ？ #rspec]]></title>
            <link>https://masutaka.net/2013-12-31-1/</link>
            <guid>https://masutaka.net/2013-12-31-1/</guid>
            <pubDate>Tue, 31 Dec 2013 00:00:00 GMT</pubDate>
            <description><![CDATA[Ruby - RSpecのshouldはもう古い！新しい記法expectを使おう！ - Qiita [キータ] こちらの記事は以前から何度も読み返しております。o
以前から、これには英語的に違和感がありました。
it { expect(hoge).to be_true } 複数行でもitの意味が分かりません。
it do result = hoge expect(result).to be_true end もちろん、今までのshouldであれば自然です。
subject { hoge } it { should be_true } 前の記事で知りましたが(※)、lib/rspec/core/example_group.rbのとおり、
itはexampleやspecifyで置き換え可能なので、今後はitは使わない方が良
い気がしました。
example { expect(hoge).to be_true } # or specify { expect(hoge).to be_true } ※ https://github.com/rspec/rspec-core にも置き換え可能云々は書いて
ありますね。
複数行でもそれほど変ではありません。
example do result = hoge expect(result).to be_true end # or specify do result = hoge expect(result).to be_true end ここまで書いて、改めてrspecのテストを確認しました。]]></description>
        </item>
        <item>
            <title><![CDATA[FF1,3,5にハマった人には『ブレイブリーデフォルト フォーザ・シークウェル』はめっちゃオススメ]]></title>
            <link>https://masutaka.net/2013-12-30-2/</link>
            <guid>https://masutaka.net/2013-12-30-2/</guid>
            <pubDate>Mon, 30 Dec 2013 01:00:00 GMT</pubDate>
            <description><![CDATA[モンハン４に挫折し、3DSを一ヶ月放置していたマスタカです。
なんとなくRPGやろうかなと思い、評判が良かった『ブレイブリーデフォル
ト フォーザ・シークウェル』を購入しました。
いや〜、こんなにハマるとは思いませんでした。買って一週間経ってない
のに32時間プレイしてます。
これ、タイトルは違いますが、中身はFinalFantasy3(FF3)に近いですね。
寧ろ、FF3の正当な後継版と言えるかもしれません。
FFはファミコンから始まり、スーファミ、PS、PS2、PS3にハードを変更し
進化していきました。他方で、ロマンシング サ・ガや聖剣伝説、ルドラの
秘宝などにも、そのシステムは受け継がれていきました。
ブレイブリーデフォルトはその中で最も色濃く、特にFF3の血を受け継いで
いると感じました。
バトルシステム 戦闘は単純なターン制で取っ付き易いです。しかし！このゲームはターン
を溜めたり(デフォルトと言います)、溜めたターンを使ったり(ブレイブと
言います)、ターンを前借りしたり(同じくブレイブ)も出来るのですよ。
って、文章にすると大したことありませんが、実際は戦闘の幅がかなり広
がっていて、2次元から3次元に広がった感じです。
FF4のアクティブタイムバトルの他に、こんな解もあったのか！と一人興奮
してしまいました。
例えば、誰か死んだ時、BP(ブレイブポイント)を消費すれば、レイズ→ケ
アルラを絶対に連続でかけられます。
途中からザコ戦に苦戦し始めたのですが、ふと気づいて全キャラブレイブ
を3回したら(4回攻撃可能になる)、１ターンで倒せました。もっとも、１
ターンで倒せなかったらその後３ターン何も出来なくなります。
敵もブレイブ＆デフォルトを使ってきますし、溜めたBPを消費するコマン
ドがあったり、攻撃を食らったらBPが溜まるアビリティもあったりします。
「ターンを溜める」だけで、これほど戦闘の幅が広がるのに驚愕しました。
あと、単純なターン制と書きましたが、アクティブタイムバトルのように
時を感じさせる要素も盛り込まれています。のんびりしてられません。
 必殺技を出した後はBGMが終わるまでは味方が強化状態なので、急いでコ
マンド入力しないともったいない。 SP(スリープポイント)があれば、STARTボタンを押して時を止めることが
出来る。SPは3DSをスリープ状態にすれば溜まる。必要ないけど課金も可能。  さらにテンポよく進むように、痒いところに手が届いています。
 バトルをAUTOにすることが出来ます。直前のターンと同じ行動を取ります。 バトルスピードを最大の４倍速にすると激速です。召喚獣のアニメーショ
ンは２倍速からカットされます。  ゲーム中はいつでも難易度を変えられるのも軽く驚きました。エンカウン
ト率も自由に変えられます。自由すぎw
あ、魔法の名前はFF5あたりとほとんど同じです。
ストーリー ゲームなので不自然な展開もありますが、意外に練られていると感じました。
まだ３章ですが、終盤の展開が見えません。でも、人死にすぎ殺しすぎw
ほぼ全キャラ喋るので臨場感もあります。3DSのくせに！
よく知りませんが、声優陣は豪華らしいです 。てか、ヴィクトリア様って、
本当に子供だったのかw
まとめ 以上のように、おっさんホイホイの要素が強いゲームとなっております。
フレンドやすれ違い機能もあるので、誰か一緒にやりましょう！
@masutaka にお声がけください！
 ※ 本作『ブレイブリーデフォルト フォーザ・シークウェル』は
『ブレイブリーデフォルト フライングフェアリー』の完全版、廉価版、
続編体験版という位置づけです。誤購入注意。]]></description>
        </item>
        <item>
            <title><![CDATA[.emacsをGistにアップしてみた]]></title>
            <link>https://masutaka.net/2013-12-30-1/</link>
            <guid>https://masutaka.net/2013-12-30-1/</guid>
            <pubDate>Mon, 30 Dec 2013 00:00:00 GMT</pubDate>
            <description><![CDATA[https://github.com/emacs-jp/emacs-jp.github.com/issues/15 皆さんの.emacsが最近ジワジワとアップされているので、私もアップして
みました。
.emacs含めたdot filesは、GitHubのPrivate Repositoryで管理しているの
で、現時点のコピーです。気が向いたら更新するかもしれません。
以前el-get試しましたが、MELPA+gitsubmodule以上の便利さを味わえなく
て、使いませんでした。init-loaderは分類が面倒で。。
昔は仕事中に/home以下(NFS管理されている)の.emacsを読み漁ったもので
すが、良い時代になってきましたねえ。
 ]]></description>
        </item>
        <item>
            <title><![CDATA[Sphero と遊ぼう！にゃんこ編～僕にペットはいないけど #sphero #gosphero]]></title>
            <link>https://blog.tmd45.jp/entry/2013/12/08/135230</link>
            <guid>https://blog.tmd45.jp/entry/2013/12/08/135230</guid>
            <pubDate>Sun, 08 Dec 2013 04:52:30 GMT</pubDate>
            <description><![CDATA[<p>この記事は <a href="http://www.adventar.org/calendars/142">Sphero Advent Calendar 2013</a> のエントリーです。前回は 12 月 5 日、<a href="http://blog.champierre.com/1031">jishiha &#x3055;&#x3093;&#x306E;&#x300E;Sphero&#x306E;&#x30A4;&#x30B1;&#x3066;&#x308B;PV&#x52D5;&#x753B;7&#x9023;&#x767A;&#x300F;</a> でした。</p>

<p>jishiha さんにはその前日2日間も、Scratch から Sphero を動かす記事を投稿していただいてます！ありがとうございました。</p>

<ul>
<li><a href="http://blog.champierre.com/1029">Sphero &#x3092; Scratch(&#x30B9;&#x30AF;&#x30E9;&#x30C3;&#x30C1;)&#x304B;&#x3089;&#x52D5;&#x304B;&#x305B;&#x308B;&#x3088;&#x3046;&#x306B;&#x3057;&#x305F;&#x306E;&#x3067;&#x3053;&#x3069;&#x3082;&#x3067;&#x3082;&#x30D7;&#x30ED;&#x30B0;&#x30E9;&#x30DF;&#x30F3;&#x30B0;&#x3067;&#x304D;&#x308B;&#x3088; - &#x50D5;&#x306F;&#x767A;&#x5C55;&#x9014;&#x4E0A;&#x6280;&#x8853;&#x8005;</a></li>
<li><a href="http://blog.champierre.com/1030">&#x30B9;&#x30AF;&#x30E9;&#x30C3;&#x30C1;&#x304B;&#x3089;Sphero&#x3092;&#x30D6;&#x30ED;&#x30B0;&#x30E9;&#x30DF;&#x30F3;&#x30B0;&#x3067;&#x304D;&#x308B;Scratch2Sphero&#x3092;&#x6539;&#x826F;&#x3057;&#x307E;&#x3057;&#x305F; - &#x50D5;&#x306F;&#x767A;&#x5C55;&#x9014;&#x4E0A;&#x6280;&#x8853;&#x8005;</a></li>
</ul>


<p>さて今回は、せっかくの休日担当ですし Sphero を持ってピクニックにでもと思ったのですが、肝心の Sphero を会社に忘れてくるという大失態をやらかしましたので、撮ってくるはずだった動画をネット上から探してお茶を濁したいと思います。やだ苦～い。</p>

<p>ちなみに「わんこ編」はありませんヨ、猫派だから。犬動画は犬派な方がまとめてくれればいいと思う。</p>



<h3>まずは公式から</h3>

<iframe src="//youtube.googleapis.com/v/_cgKRUNvwDU&amp;source=uds" allowfullscreen="" frameborder="0" height="315" width="420"></iframe>


<p><a href="http://www.youtube.com/watch?v=_cgKRUNvwDU">Sphero + Cats - YouTube</a></p>

<p>＼にゃうぉー／</p>

<p><a href="http://detail.chiebukuro.yahoo.co.jp/qa/question_detail/q1226267957">ウカカカ</a>してる子もいますね。Sphero 本体これはプロトタイプ版か何かなんでしょうか、全部透明ですね。<br/>
中身が動くことに興味を持ってる子もいたようなので、<a href="http://store.apple.com/jp/product/HD162LL/A/orbotix-sphero-20-%E3%83%AD%E3%83%9C%E3%83%86%E3%82%A3%E3%83%83%E3%82%AF%E3%83%9C%E3%83%BC%E3%83%AB?fnode=39">やっぱりスケルトンは面白そう</a>です。</p>

<h3>世界の猫たち</h3>

<iframe src="//youtube.googleapis.com/v/XPfaY6EUYgQ&amp;source=uds" allowfullscreen="" frameborder="0" height="315" width="420"></iframe>


<p><a href="http://www.youtube.com/watch?v=XPfaY6EUYgQ">Schnurrli and the Sphero - YouTube</a></p>

<p>だらーん…ケリケリケリケリ…だらーん。</p>

<iframe width="560" height="315" src="//www.youtube.com/embed/D_XGD3_dNYc" frameborder="0" allowfullscreen></iframe>


<p><a href="http://www.youtube.com/watch?v=D_XGD3_dNYc">Kittens playing with Sphero! - YouTube</a></p>

<p>子猫も夢中。<br/>
この Sphero は公式動画と同じく紐がつけてありますね。猫まっしぐら。</p>

<p>You Tube で <code>sphero cat</code> で検索して癒やされよう。癒やされた。</p>

<p>ちょっと絞り込みが難しいのでここに貼るのは断念しましたが、instagram でもたくさんの Sphero 動画が上がってます。猫動画もちらほら。<br/>
以下にご紹介するサイトは instagram の写真をタイル形式で見たりタグで検索できる <a href="http://ink361.com/">INK361</a> というサイトです。</p>

<ul>
<li><a href="http://ink361.com/app/tag/sphero">tags #sphero photos</a></li>
</ul>


<h3>さらにふたたび公式から…Nyan！</h3>

<iframe width="560" height="315" src="//www.youtube.com/embed/cjllV3_Ns7Y" frameborder="0" allowfullscreen></iframe>


<p><a href="http://www.youtube.com/embed/cjllV3_Ns7Y">Sphero Nyan Cat SpaceParty - YouTube</a></p>

<p>NYAN-CAT…いったい何者なんだ…！</p>

<ul>
<li><a href="http://www.nyan.cat/original.php">NON-STOP NYAN CAT!</a></li>
</ul>


<p>猫だけど、ペットではないな。動画にもあるとおり、Sphero のゲームで NYAN-CAT を使ったものがありますよ。</p>

<ul>
<li><a href="https://itunes.apple.com/us/app/nyan-cat-space-party!/id584287063?mt=8">Nyan Cat - Space Party! on the App Store</a></li>
<li><a href="https://play.google.com/store/apps/details?id=com.orbotix.spaceparty">Sphero Nyan Cat &#x30B9;&#x30DA;&#x30FC;&#x30B9;&#x30D1;&#x30FC;&#x30C6;&#x30A3;! - Google Play &#x306E; Android &#x30A2;&#x30D7;&#x30EA;</a></li>
</ul>


<p>さて次回は、1日空いて() kenji.horie さん、かな？</p>]]></description>
            <enclosure url="https://cdn.user.blog.st-hatena.com/default_entry_og_image/4268819/1648865811614292" length="0" type="image//default_entry_og_image/4268819/1648865811614292"/>
        </item>
        <item>
            <title><![CDATA[OSXのzshで直前の履歴をクリップボードにコピーするやつ作った]]></title>
            <link>https://masutaka.net/2013-12-07-1/</link>
            <guid>https://masutaka.net/2013-12-07-1/</guid>
            <pubDate>Sat, 07 Dec 2013 00:00:00 GMT</pubDate>
            <description><![CDATA[何かコマンドを打ってから、Ctrl-x Ctrl-pするとクリップボードに
コピーされます。]]></description>
        </item>
        <item>
            <title><![CDATA[Raspberry Piを購入して、部屋の温度を淡々とグラフにしてみた]]></title>
            <link>https://masutaka.net/2013-12-05-1/</link>
            <guid>https://masutaka.net/2013-12-05-1/</guid>
            <pubDate>Thu, 05 Dec 2013 00:00:00 GMT</pubDate>
            <description><![CDATA[特に目的はなかったけどRaspberry Pi を買ったので、ついでに温度センサーも買って、淡々と部屋の温度を記録することにしました。
Raspberry Pi購入まで 購入したのはRaspberry Pi Type B with 8GB SD card です。$52.28でした。
昔より性能も値段も高くなったような。。。
Features
•8GB SD card pre-installed with the Raspian operating system
•Broadcom BCM2835 700MHz ARM1176JZFS processor with FPU and Videocore 4 GPU
•GPU provides Open GL ES 2.0, hardware-accelerated OpenVG, and 1080p30 H.264 high-profile decode
•GPU is capable of 1Gpixel/s, 1.5Gtexel/s or 24GFLOPs with texture filtering and DMA infrastructure
•512MB RAM
•Boots from SD card, running a version of the Linux operating system]]></description>
        </item>
        <item>
            <title><![CDATA[elscreen-mew.elをMELPAに登録しました]]></title>
            <link>https://masutaka.net/2013-12-01-1/</link>
            <guid>https://masutaka.net/2013-12-01-1/</guid>
            <pubDate>Sun, 01 Dec 2013 00:00:00 GMT</pubDate>
            <description><![CDATA[loading...
   if (localStorage.getItem("pref-theme") === "light") { const elements = document.getElementsByClassName('twitter-tweet'); for (let i = 0; i  世界で3人くらい使っているかもしれないelscreen-mew.elを、表題の通り
MELPAに登録しました。
このパッケージで何ができるとかはなくて、現状はelscreen とMew の組み合
わせで発生する不具合を回避するだけです。詳細は下記リポジトリの
READMEを御覧ください。
インストール方法 M-x package-install elscreen-mew
リポジトリ   ]]></description>
        </item>
        <item>
            <title><![CDATA[ころころ可愛い♡なのに高性能！Orbotix Sphero 2.0 が面白い #sphero #gosphero]]></title>
            <link>https://blog.tmd45.jp/entry/2013/12/01/001418</link>
            <guid>https://blog.tmd45.jp/entry/2013/12/01/001418</guid>
            <pubDate>Sat, 30 Nov 2013 15:14:18 GMT</pubDate>
            <description><![CDATA[<p>この記事は <a href="http://www.adventar.org/calendars/142">Sphero Advent Calendar 2013</a> の1日目のエントリーです！</p>

<p>最初の一日目<s>そしてこれで最後になるかもしれない一日目</s>は、Spheroについてご紹介をしたいと思います。念のため言っておきますがステマ記事では無いですよ～。個人的なガチマです。</p>

<h2>Sphero ってなに？</h2>

<p>Orbotix社製、ポケットに入るボール状のモバイルゲームロボットです。<br/>
「スフィーロ」と読みます。名前からしてカッコイイですね。</p>

<ul>
<li><a href="http://www.gosphero.com/">&#x516C;&#x5F0F;&#x30B5;&#x30A4;&#x30C8;&#xFF08;&#x82F1;&#x8A9E;&#xFF09;</a></li>
<li><a href="http://www.gosphero.com/ja/">&#x516C;&#x5F0F;&#x30B5;&#x30A4;&#x30C8;&#xFF08;&#x65E5;&#x672C;&#x8A9E;&#xFF09;</a></li>
</ul>


<p><span itemscope itemtype="http://schema.org/Photograph"><img src="https://cdn-ak.f.st-hatena.com/images/fotolife/t/tmd45/20131130/20131130181312.png" alt="f:id:tmd45:20131130181312p:plain" title="f:id:tmd45:20131130181312p:plain" class="hatena-fotolife" itemprop="image"></span></p>


<p>キャプチャは日本語サイトのトップから。見た目にも未来を感じます。<br/>
<s>…英語のキャッチコピー、日本語にするとすごく胡散臭くなるのはなんででしょうか。英語でも胡散臭いのかな。</s></p>



<p>無断階で変化するカラーLED。非接触式充電。階段から落ちたり、水の中に入れても大丈夫な衝撃・防水対応。Bluetoothで接続してiOS/Androidアプリから操作が可能です。</p>

<p>2.0 は旧Spheroに比べてスピードアップ・機能性アップがされたとのこと。手に入れる前は、どうせ停止動作とかぐだぐだで、自転に負けてすぐに止まったりはしないだろうとゆるく考えていたのですが、これがなかなかピタッと止まってびっくりしました。</p>

<p>スピードもかなり出せる（ゆっくりもできる）ので、おもいっきり遊ぶには広い室内や公園などの外がおすすめかも。ペットを飼っているひとには、ペットのいい遊び相手になってくれるかもしれません（そんな動画もいっぱいあります）。</p>

<p>ちなみに、<b>手に入れるきっかけ</b>は。</p>

<p><a href="http://tech.feedforce.jp/">自社の勉強会</a>でちょこっと名前が出てきた程度だったのですが、真っ白でカッコイイ見た目が気になって、PVを見て、気づいたら買ってました٩(๑❛ᴗ❛๑)۶</p>

<h2>どんなふうに遊べるの？</h2>

<p>公式PVもカッコイイのですが、こちらのレビュー動画のほうが機能などはわかりやすいかも。</p>

<p><a href="http://www.macworld.com/article/2047002/review-sphero-2-0-is-a-brighter-faster-smartphone-controlled-ball-of-fun.html">Review: Sphero 2.0 is a brighter, faster, smartphone-controlled ball of fun | Macworld</a></p>

<object id="flashObj" width="480" height="270" classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" codebase="http://download.macromedia.com/pub/shockwave/cabs/flash/swflash.cab#version=9,0,47,0"><param name="movie" value="http://c.brightcove.com/services/viewer/federated_f9?isVid=1&isUI=1" /><param name="bgcolor" value="#FFFFFF" /><param name="flashVars" value="videoId=2622920079001&linkBaseURL=http%3A%2F%2Fwww.macworld.com%2Farticle%2F2047002%2Freview-sphero-2-0-is-a-brighter-faster-smartphone-controlled-ball-of-fun.html&playerID=2577467285001&playerKey=AQ~~,AAACV85RErE~,AhFpv0ECqwFfthhmRu5jnOs8FUs2r9mP&domain=embed&dynamicStreaming=true" /><param name="base" value="http://admin.brightcove.com" /><param name="seamlesstabbing" value="false" /><param name="allowFullScreen" value="true" /><param name="swLiveConnect" value="true" /><param name="allowScriptAccess" value="always" /><embed src="http://c.brightcove.com/services/viewer/federated_f9?isVid=1&isUI=1" bgcolor="#FFFFFF" flashVars="videoId=2622920079001&linkBaseURL=http%3A%2F%2Fwww.macworld.com%2Farticle%2F2047002%2Freview-sphero-2-0-is-a-brighter-faster-smartphone-controlled-ball-of-fun.html&playerID=2577467285001&playerKey=AQ~~,AAACV85RErE~,AhFpv0ECqwFfthhmRu5jnOs8FUs2r9mP&domain=embed&dynamicStreaming=true" base="http://admin.brightcove.com" name="flashObj" width="480" height="270" seamlesstabbing="false" type="application/x-shockwave-flash" allowFullScreen="true" allowScriptAccess="always" swLiveConnect="true" pluginspage="http://www.macromedia.com/shockwave/download/index.cgi?P1_Prod_Version=ShockwaveFlash"></embed></object>


<p>公式アプリはiOSのもので25種類あります。Andoroid版は見れてないのでわかりませんが、同じだけあるはず。</p>

<p>単なるコントローラーだけでなく、画面に線を書いてそのとおりに走らせたり、画面内でAR（仮想現実）と組み合わせたり、Sphero自体をコントローラーにしてシューティングゲームをしたりできるアプリが揃っています。</p>

<ul>
<li><a href="http://www.gosphero.com/ja/games/">Sphero&#x516C;&#x5F0F;&#x30A2;&#x30D7;&#x30EA;&#x4E00;&#x89A7;</a></li>
</ul>


<p>この中で『<b>orbBasic for Sphero</b>』というアプリはスマートフォン上で orbBasic という言語を使ってSpheroの動きをプログラミングできます。<br/>
もっとかんたんに動きをカスタマイズしたい場合は『<b>Sphero MacroLab</b>』を使いましょう。こちらは「用意されている定型文を組み合わせる」だけで好きな動きに調整することができます。</p>

<h4>さらにカスタマイズしたい人は！</h4>

<p><a href="http://orbotixinc.github.io/Sphero-Docs/">&#x958B;&#x767A;&#x8005;&#x5411;&#x3051;&#x30DA;&#x30FC;&#x30B8;</a>から Sphero の SDK が入手できます。公式で iOS, Android, Unity, Windows 8.1。非公式のもので Node や Windows Phone、Ruby や Python のライブラリもあります。</p>

<p>Bluetooth接続できる環境があればよく、私も十数分で MacBook Air から Ruby のコードをポチポチして動かすことができました！<s>その辺については次の記事で先輩が書いてくれるはず…！</s></p>

<p>いろいろ夢がひろがりんぐガジェットです。</p>

<h2>どこで手に入るの？</h2>

<p>日本では<a href="http://www.amazon.co.jp/dp/B00F91XFJS">Amazon</a>や<a href="http://www.softbankselection.jp/cart/ProductDetail.aspx?sku=0851897003083">Softbank Selection</a>、<a href="http://www.appbankstore.jp/products/detail.php?product_id=3870">AppBank Srore</a>から購入できます。その他は<a href="http://www.gosphero.com/ja/retail-partners/">&#x8CA9;&#x58F2;&#x5E97;&#x8217;&#x306E;&#x30DA;&#x30FC;&#x30B8;</a>からチェックしてみてください。お値段、約1万5千円…<b>高い</b>と取るかはひとそれぞれ…。さらに<a href="http://store.apple.com/jp/product/HD162LL/A/orbotix-sphero-20-%E3%83%AD%E3%83%9C%E3%83%86%E3%82%A3%E3%83%83%E3%82%AF%E3%83%9C%E3%83%BC%E3%83%AB?fnode=39">Apple Store</a>では<b>Apple限定バージョン</b>として、<b>本体（と充電クレードル）の一部が<span style="color: #0000cc">スケルトン</span>になっているモデル</b>が販売されています。</p>

<p>AppleモデルのPVはなんかズルい！</p>

<iframe src="https://youtube.googleapis.com/v/reXJnYvJ5M8&amp;source=uds" allowfullscreen="" frameborder="0" height="315" width="420"></iframe>


<p><br><a href="http://www.youtube.com/watch?v=reXJnYvJ5M8">Sphero 2.0 Revealed: Exclusively at Apple - YouTube</a></p>

<p>お子様をお持ちのお父さま・お母さま、息子さんがギークに育ちますよ。どうですか。</p>

<p>私はAmazonで購入しましたが、会社の先輩がApple版を買っていて、大変悔しい思いをしました。<b>中身のモーターなどが見えるので面白い！</b></p>

<p>つい最近、日本でもSphero用のゴム製カバー <a href="http://www.amazon.co.jp/dp/B00GRSMRVY">Nubby Cover</a> が発売されました。室内で遊ぶときにカーペットのシワに負けて（ツルツルすべってしまって）進まないことがあるのですが、でこぼこのついたカバーでそういう心配もなくなりますね。屋外で遊ぶときの傷防止にも！</p>

<h2>最後に</h2>

<p>いかがでしょうか。みなさん欲しくなってきたんじゃありません？<br/>
ひとりで一個だけ持ってても楽しくないので、みなさんいっぱい買って持ち寄って遊べたらいいですね。持ち寄って遊べたらいいですね。</p>

<p><a href="http://qiita.com/kano-e/items/876bf0cadc3056f7588f">2日目の記事は kano-e さんの『Ruby - Sphero gem で Sphero を操作してみる』</a>です。おたのしみに。</p>]]></description>
            <enclosure url="http://cdn-ak.f.st-hatena.com/images/fotolife/t/tmd45/20131130/20131130181312.png" length="0" type="image/png"/>
        </item>
        <item>
            <title><![CDATA[helm-hatena-bookmark.elを作ってHelmに完全移行した]]></title>
            <link>https://masutaka.net/2013-11-26-1/</link>
            <guid>https://masutaka.net/2013-11-26-1/</guid>
            <pubDate>Tue, 26 Nov 2013 00:00:00 GMT</pubDate>
            <description><![CDATA[ようやくHelmに移行出来ました。以前試みたのですが、
anything-hatena-bookmark.elがうまく動かなくてペンドしていたのでした。
今日天からイベントが降ってきたので、helm-hatena-bookmark.elを作りま
した。
  MELPAにも取り込まれたのでM-x list-packagesからインストールできます。
MELPAへのPull Requstは初めてでした！ anything-hatena-bookmark.elについては[2011-12-17-1] で書いたことがあ
りますが、もう一度おさらいしますね。
helm-hatena-bookmark.elで何ができるのか？ Emacsから自分のはてなブックマークを検索し、ブラウザから開けます。
普通にHelm絞り込みができるので便利です。
M-x helm-hatena-bookmark して、&ldquo;emacs git&quot;で絞り込んだところ
  インストール方法 M-x package-install helm-hatena-bookmark
使用方法 M-x helm-hatena-bookmarkして検索するだけです。
初回はキャッシュファイル~/.hatenabookmarkが作成されるのですが、はて
ブの数によってはなかなか終わりません。以下のシェルスクリプト版を使
うと良いでしょう。
自分のはてなブックマークを検索するanything-hatena-bookmark.elのデータ更新用シェルスクリプト - aki77の日記 ただ、リポジトリが見えなくなっていたので、一旦
helm-hatena-bookmark.elのリポジトリにインポートしました。
https://github.com/masutaka/emacs-helm-hatena-bookmark/tree/master/script あとでhelm-hatena-bookmark-get-dump()にいい感じにマージします。]]></description>
        </item>
        <item>
            <title><![CDATA[OSXの構成管理ツールBoxenを導入してみた]]></title>
            <link>https://masutaka.net/2013-11-23-1/</link>
            <guid>https://masutaka.net/2013-11-23-1/</guid>
            <pubDate>Sat, 23 Nov 2013 00:00:00 GMT</pubDate>
            <description><![CDATA[過去にこんなネタ記事[2011-06-06-1] も書きましたが、Mavericksになって
CLI Toolsからrcsが削除されたのと、今どきRCSもないよねということで、
話題のBoxenを導入してみました。
BoxenはGitHub社が開発した、エンジニアの開発環境を構築するための
ツールです。GitHub社員じゃなくても使えます。
Homebrewやrbenv、plenv等を包括出来るだけでなく、ChromeやSkype等も
コマンド一発でインストールできます。さらにはOSXの設定まで管理できます。
私の場合、HomebrewでインストールしたコマンドやGemはもう分かりません
し、今までインストールしたさまざまなアプリはメモしていました[2011-04-21-1] 。
それらをコード化できるのが良いと感じました。
Mavericksに対応しきれていないので、まだハマりどころはあります。
そういう意味ではちょっと待ったほうが良いかも。
導入はそこそこ簡単で、ここ のREADMEのとおりに実行するだけです。
% sudo mkdir -p /opt/boxen % sudo chown ${USER}:staff /opt/boxen % git clone https://github.com/boxen/our-boxen /opt/boxen/repo % cd /opt/boxen/repo % git remote rm origin % git remote add origin &lt;the location of my new git repository&gt; # (1) % git push -u origin master GitHubアカウントが必要です。あらかじめ自分用のリポジトリを作って、
(1)で指定すると良いです。
あとはboxenコマンドを実行すれば、manifests/site.ppで指定されたツー
ルが/opt/boxen以下にインストールされます(暗号化は不要なのでOFFにし
てます)。シンボリックリンク~/src/our-boxenも作られます。
 % script/boxen &ndash;no-fde]]></description>
        </item>
        <item>
            <title><![CDATA[Simplenote再開しました！]]></title>
            <link>https://masutaka.net/2013-11-10-1/</link>
            <guid>https://masutaka.net/2013-11-10-1/</guid>
            <pubDate>Sun, 10 Nov 2013 00:00:00 GMT</pubDate>
            <description><![CDATA[[を] Simplenote の Max OS X アプリが登場してた！ [2012-09-09-1] にSimplenoteからAppleのメモアプリに乗り換えましたが、
OSX用のSimplenoteアプリが出ていたので、また戻って参りました。
Emacsのsimplenote.elは今は必要ないかな。
AppleのメモアプリはGoogleアカウントと連携していたので、Gmailに過去
のリビジョンが溜まっていたのですよね。気にしなきゃいいんだけど。。。
たつをさん++]]></description>
        </item>
        <item>
            <title><![CDATA[過去1000件のFoursquareチェックイン履歴をD3.jsで可視化してみた]]></title>
            <link>https://masutaka.net/2013-10-30-1/</link>
            <guid>https://masutaka.net/2013-10-30-1/</guid>
            <pubDate>Wed, 30 Oct 2013 00:00:00 GMT</pubDate>
            <description><![CDATA[WEB&#43;DB PRESS Vol.76 のD3.jsの記事をちょっと試したかっただけだったの
です。
 D3.js自体は記事のとおりに書けば理解出来ましたが、「過去1000件の
Foursquareチェックイン履歴」を取ってくるのに難儀しました。記事では
さらっと書いてあるだけですねw
どうにかしてoauth_tokenを取得する 私は http://tdoc.info/foursquare-API/authentication.html を参考にし
て、泥臭く手に入れました。Twitterだと簡単なのにね。
  https://developer.foursquare.com/ にアクセスし、適当なマイアプリを作る。
  以下にアクセスし、&ldquo;code&quot;を取得する(長いので改行入れてます)。
  https://foursquare.com/oauth2/authenticate?client_id=&lt;Client ID&gt; &amp;response_type=code&amp;redirect_uri=&lt;Redirect URI&gt; ブラウザのアドレスバーに&quot;code&quot;が表示されるので、以下にアクセスす
る(長いので改行入れてます)。  https://foursquare.com/oauth2/access_token?client_id=&lt;Client ID&gt; &amp;client_secret=&lt;Client secret&gt;&amp;grant_type=authorization_code &amp;redirect_uri=&lt;Redirect URI&gt;&amp;code=&lt;2で取得したコード&gt; oauth_tokenを取得出来た！  {&#34;access_token&#34;:&#34;XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX&#34;} 過去1000件のFoursquareチェックイン履歴を取得する  foursquare2 gemをインストールする。   % gem install foursquare2
  取得できるか確認。
   JSONフォーマットにしつつ、緯度と経度を取得する。
https://developer.foursquare.com/docs/users/checkins によると、
250ずつしか取得できないようなので、小分けにして取得。
   こんなデータが取得できるはず。
[ {&#34;coordinates&#34;: [139.645709, 35.667857]}, {&#34;coordinates&#34;: [139.]]></description>
        </item>
        <item>
            <title><![CDATA[iPhone 4s 32GBからiPhone 5s 64GBに変えたけど案外高くなかったお話]]></title>
            <link>https://masutaka.net/2013-10-14-1/</link>
            <guid>https://masutaka.net/2013-10-14-1/</guid>
            <pubDate>Mon, 14 Oct 2013 00:00:00 GMT</pubDate>
            <description><![CDATA[9/23に予約し、ちょうど3週間でiPhone 5s Gold 64GBモデルをゲット出来
ました。Goldだし1ヶ月はかかるかなーと気長に待っていたので、思ったよ
り早かった感じです。
キャリアはLTEにおいて盤石の体制を築いたau様。IDO 時代から15年使い続
けた甲斐がありました(感涙)。
昨日から使い始めた感想は以下のとおり。
 iOS7でのiPhone4sにあった、表示のもたつきがなくなった。 軽くなった(物理的に)。 画面がだいぶ広くなった感。 指紋認証はやっぱり楽。 64GBは気持ちに余裕ができる(今までは32GBでカツカツだった)。 テザリングうれしい。適当なタイミングでEMOBILE解約しよう。[2012-04-22-2]  イヤホンの音が良くなった。  A5からA7へのCPU性能のアップは予想以上に快適で、iOS7が本当に気持ちよ
く動きます。個人的には、はてブアプリ で性能差を一番体感出来ました。
指紋認証もやっぱり楽です。登録した指が使えない時は今までのパスコー
ド認証になりますが。。
料金はだいたいこんな感じとのこと。今までが￥5,538だったので、しばら
くは同じくらいです。高くなる頃にEMOBILEの2年縛りが切れるので、まあ
大丈夫でしょう。
◆2013年10月〜2014年2月
         LTEプラン +￥980   LTEフラット +￥5,460   iPhone4s残り +￥2,570   iPhone5s本体(※1) +￥3,237   割引(※2) -￥3,237   毎月割 -￥2,230   auスマートバリュー -￥1,480   合計 ￥5,300    ◆2014年3月]]></description>
        </item>
        <item>
            <title><![CDATA[YAPC::ASIA 2013 はノベルティに満足]]></title>
            <link>https://masutaka.net/2013-09-29-1/</link>
            <guid>https://masutaka.net/2013-09-29-1/</guid>
            <pubDate>Sun, 29 Sep 2013 00:00:00 GMT</pubDate>
            <description><![CDATA[最近は仕事とか二日酔いとかで結構忙しくて、もう一週間が経ってしまい
ました。。
今回YAPCというPerl最大のイベントに初参加しました。残念ながら土曜日、
最終日だけの参加でしたが、なかなかに満足度が高かったです。(YAPCって、
怖いイベントじゃなかったんですねw)
最初の @yusukebe さんのトークの分かりやすさが半端なかった(以前聞い
たLTも良かった)。Perlをほぼいじったことない私でも普通に理解出来まし
た。トークがわかりやすいのか、Mojoliciousが分かりやすいのか。
MojoliciousのデフォルトはVCしかないというのは清々しさを感じました。
16:30から始まったLT大会は個人的にはツボのものが多く、他のLLのLTとは
違った雰囲気でした。
以下、当日聞いたトークです。
 Mojoliciousでつくる！Webアプリ入門 → ブログ記事  Programming AWS with Perl  What&rsquo;s new in Carton &amp; cpanm  GitHubでつくる、たのしい開発現場 → ブログ記事  中規模チャットサービスの運用事例  PhantomJSによる多岐にわたる広告枠の確実な表示テスト  フルテストも50msで終わらせたい 〜 FreakOutの取り組み 〜  Lightning Talks Day 2  Keynote  YAPC::Asia Tokyo 2013 クロージング   P.S.
ノベルティが良かったです。中でもmixiプランニングポーカーが一番嬉し
かった。普通に買おうと思ってたので。DeNAのスマホスタンドも使ってま
すし、YAPCタオルは今日ジムで使ってきました。]]></description>
        </item>
        <item>
            <title><![CDATA[さらばATOK]]></title>
            <link>https://masutaka.net/2013-09-09-1/</link>
            <guid>https://masutaka.net/2013-09-09-1/</guid>
            <pubDate>Mon, 09 Sep 2013 00:00:00 GMT</pubDate>
            <description><![CDATA[かれこれ20年近く使ってきたATOK とお別れすることになりました。残念です。
理由は単純で、実用に耐えないレベルでストレスを感じるようになったか
らです。
-1. 時々固まったり、遅くなることがある。
-2. 変換するためにスペースを押すと、変換された漢字部分が消えることがある。
-3. 以前のATOKと比べて、頭悪くなった気がする。
1はOSXが悪さをしているのかもしれません。というのも、OSXではキーが押
しっぱなしになったり、遅くなったりする現象が私や周りの人も発生して
いるからです。
2はEmacs上だけかもしれません。
3は好意的に解釈すると、私の変換方法と最近のATOKのアルゴリズムが合わないのかも。
今はGoogle日本語入力 を使ってます。以前試した時は微妙だったのに、
今は全く問題ないですね。普通にサクサク使えてます。こんなん無料で配
られたらJustSystems厳しいよなあ。。
最後にATOKとの出会いから別れをまとめます。
そういえばベータテストに協力したこともあったなあ.. [2010-02-06-1]    登録日 製品名     1996/04/03 一太郎V.6.3 /R.1 Win FMV プリ版 CD-ROM   1997/03/19 一太郎8 Win95/NT CD-ROM   2001/11/25 ATOK14 for Windows ESDベクター版   2004/02/15 ATOK17 for Windows JMS DL版   2005/02/11 ATOK 2005 for Windows JMS DL版   2006/02/20 ATOK 2006 for Windows JMS DL版   2008/02/11 ATOK 2008 for Windows JMS DL版   2010/02/06 ATOK 2010 for Windows JMS DL版   2010/12/30 ATOK 2010 for Mac JMS DL版   2012/05/24 ATOK Passport    そして、2013/09/08にATOK Passportを解約しました。]]></description>
        </item>
        <item>
            <title><![CDATA[GitHubのPrivateリポジトリをChef経由でcloneしようとしたらハマった]]></title>
            <link>https://masutaka.net/2013-08-20-1/</link>
            <guid>https://masutaka.net/2013-08-20-1/</guid>
            <pubDate>Tue, 20 Aug 2013 00:00:00 GMT</pubDate>
            <description><![CDATA[自分のinit.elや.zshenvはGitHubのPrivateリポジトリで管理しています。
masutaka.netでも同じ設定を使いたかったので、Chef経由(実際はKnife
Solo経由)でgit cloneしようとしたら結構ハマったので、メモしておきます。
ぶっちゃけmasutaka.netに秘密鍵をおけば、ハマることはないです。でも
セキュリティ的にあんまりなので、sshのforward agent機能を使い、ロー
カルの公開鍵をリモートでも使うようにします。
(1) sshのforward agentを設定する やり方は簡単で、ローカルの~/.ssh/configに以下を追加し、ローカルで
ssh-addコマンドを実行するだけ。
Host masutaka.net ForwardAgent yes この状態でmasutaka.netにsshログインし、git cloneすることが出来まし
た。ssh-add -lコマンドでローカルの公開鍵が使われていることを確認
できます。
検証環境にVagrantを使っているので、Vagrantfileにも追加しました
(~/.ssh/configに設定しても構いません)。
config.ssh.forward_agent = true (2) sudo時に公開鍵を引き継ぐ Chefからgit cloneするため、内部的にはsudo経由でgit cloneすることに
なります。
Ubuntu 12.04.2 LTSのデフォルト設定は以下のとおり、sudo時に環境変数
は引き継ぎません(実際sudo git cloneすると失敗するはず)。
# /etc/sudoers Defaults	env_reset 環境変数SSH_AUTH_SOCKだけ引き継ぐようにします(レシピを書きました)。
# /etc/sudoers Defaults	env_reset Defaults	env_keep += &#34;SSH_AUTH_SOCK&#34; sudo ssh-add -lコマンドでローカルの公開鍵が使われていることを確認
できます。
(3) ~/.ssh/known_hostsに書き込むか尋ねさせない これで大丈夫だろうとChefのレシピを実行したところ、以下のプロンプト
が。でもyesと打っても一向に再開されません。
The authenticity of host &#39;masutaka.net (XXX.XXX.XXX.XXX)&#39; can&#39;t be established.]]></description>
        </item>
        <item>
            <title><![CDATA[nginxのアクセスログをFluentd経由でGrowthForecastのグラフにしてみた]]></title>
            <link>https://masutaka.net/2013-08-15-1/</link>
            <guid>https://masutaka.net/2013-08-15-1/</guid>
            <pubDate>Thu, 15 Aug 2013 00:00:00 GMT</pubDate>
            <description><![CDATA[昨日[2013-08-14-1] インストールしたGrowthForecast をFluentdと連携させ
てみます。
今回グラフにしたのは2つの情報です。
(1) nginxが各リクエストを処理した時間($request_time)
  (2) nginxが返したHTTP Status Codeの数
  (1) nginxが各リクエストを処理した時間($request_time) [2013-07-14-1] に追加した設定が以下になります。それぞれ
fluent-plugin-growthforecast をインストールするChefのレシピと、
td-agent.confの設定です。
 FluentdがnginxのアクセスログをMongoDBとGrowthForecastに渡しています。
特に難しいことはなくて、type copyとstoreを使うと複数の出力先を指定
できました。
&lt;match タグ名&gt; type copy &lt;store&gt; type mongo ... &lt;/store&gt; &lt;store&gt; type growthforecast ... &lt;/store&gt; &lt;/match&gt; (2) nginxが返したHTTP Status Codeの数 追加した設定が以下になります。さらにdatacounter plugin に渡して、
HTTP Status Codeを数え、それをGrowthForecastに渡しています。
 name_keysに何を渡せばよいか少し悩みました。
タグの中でtype fileなstoreを
増やしたら、datacounter pluginが吐き出すjsonを確認出来ました。この
タグの実行は数分のタイムラグがあるのは注意です。
グラフのタイトルはもっと短くしたかったのですが、remove_prefixや
input_tag_remove_prefixを使っても希望のタイトルに出来なかったので、
今回は見送りました。(タイムラグのせいでデバッグしづらく、ムキーッて
なって諦めました。。)
最後に http://example.com:5125 とかに(1)と(2)が表示されたはずです。
今回は伊藤直也さんの記事 が参考になりました。]]></description>
        </item>
        <item>
            <title><![CDATA[GrowthForecastをインストールする]]></title>
            <link>https://masutaka.net/2013-08-14-1/</link>
            <guid>https://masutaka.net/2013-08-14-1/</guid>
            <pubDate>Wed, 14 Aug 2013 00:00:00 GMT</pubDate>
            <description><![CDATA[前回[2013-07-17-1] から間が空いてしまいましたが、GrowthForecast をイ
ンストールしました。
インストールするだけなら、これだけでOKです。
% mkdir ~/growthforecast % cd ~/growthforecast % echo &#34;requires &#39;GrowthForecast&#39;;&#34; &gt; cpanfile % sudo apt-get build-dep rrdtool % plenv exec carton install 起動方法はこんな感じ。http://example.com:5125とかにアクセスすると確
認出来ると思います。
% cd ~/growthforecast % carton exec -- perl growthforecast.pl --data-dir . &amp; &ndash;data-dirオプションを指定しないと
~/growthforecast/local/lib/perl5/auto/share/dist/GrowthForecast/data/
以下にsqlite関連のファイルが作られます。~/growthforecast/localは
削除することもあるでしょうから、指定した方が良いと思います。
Chefのレシピはこれ。&lsquo;Install packages depending RRDTool&rsquo;のあたりが
汚いですが、仕方がないですかね。
 今回初めて知りました。。
loading...
   if (localStorage.getItem("pref-theme") === "light") { const elements = document.getElementsByClassName('twitter-tweet'); for (let i = 0; i  次回はGrowthForecastとfluentdの連携を試してみます。]]></description>
        </item>
        <item>
            <title><![CDATA[『ここは退屈迎えに来て』を読んだ]]></title>
            <link>https://masutaka.net/2013-08-13-1/</link>
            <guid>https://masutaka.net/2013-08-13-1/</guid>
            <pubDate>Tue, 13 Aug 2013 00:00:00 GMT</pubDate>
            <description><![CDATA[@antipopさんのブログ を見て、フラフラッと買ってしまった。
読んですぐに、「はてなでこの手の話題で盛り上がっている ところに、な
んというシンクロニシティ！」 と思ったのですが、引用元がこの本の感想 だったのね(笑)
本自体は地方都市を舞台としたオムニバス形式。かなりサクサク３日で読
めた。第２話に進んで「ああそう来るのね」と少々の意外性があったり。
オススメ。
とは言え、帰省中に読むもんじゃないなーと思いました！]]></description>
        </item>
        <item>
            <title><![CDATA[Jenkinsをアップデートしたらジョブが消えた。。だけど無事復活！]]></title>
            <link>https://masutaka.net/2013-08-10-1/</link>
            <guid>https://masutaka.net/2013-08-10-1/</guid>
            <pubDate>Sat, 10 Aug 2013 00:00:00 GMT</pubDate>
            <description><![CDATA[Jenkinsを1.516から1.526にアップデートし、プラグインもアップデートし
たらRuby関連のジョブが消えました。。
小一時間悩んで管理画面からシステムログを見たら、
Failed Loading plugin ruby-runtime
とのエラーメッセージ。このプラグインをインストールしたら直りました。
なぜ急に必要になった？と思い、/var/log/jenkins/jenkins.logを見たら、
rbenvとrvmプラグインが要求していました。
 2013/08/10 11:11:01 jenkins.InitReactorRunner$1 onTaskFailed
致命的: Failed Loading plugin rbenv
java.io.IOException: Dependency ruby-runtime (0.10) doesn&rsquo;t exist
2013/08/10 11:11:01 jenkins.InitReactorRunner$1 onTaskFailed
致命的: Failed Loading plugin rvm
java.io.IOException: Dependency ruby-runtime (0.7) doesn&rsquo;t exist
 プラグインのページを見ると、確かにそう書いてあります。
https://wiki.jenkins-ci.org/display/JENKINS/Rbenv+Plugin https://wiki.jenkins-ci.org/display/JENKINS/RVM+Plugin 最初のプラグインアップデートで、rbenvもrvmもアップデートされなかっ
たようなので(※)、Jenkinsがエラーを正しく処理してジョブが消えたのか
もしれません。
※ どのプラグインをアップデートしたかはログに書かれないようなので、
確定ではないですが。
しかし、依存関係が出来たのに、なぜruby-runtimeがインストールされな
かったのだろう。。
結論: ログ大事]]></description>
        </item>
        <item>
            <title><![CDATA[『とんび』を読んだ]]></title>
            <link>https://masutaka.net/2013-08-09-1/</link>
            <guid>https://masutaka.net/2013-08-09-1/</guid>
            <pubDate>Fri, 09 Aug 2013 00:00:00 GMT</pubDate>
            <description><![CDATA[ホリエモンがオススメしていたのでKindle版を買った(7/31は￥434で超お
買い得だった(今は￥620))。
昭和30年後半から最近くらいまでのお話。正直、出だしはあまり期待感が
持てなかったけど、予想外にスピード感があってすぐ読めた。続きを読む
のが楽しみな小説は久しぶりだった。
なんというか対比が素晴らしかったですね。オススメ。]]></description>
        </item>
        <item>
            <title><![CDATA[flymake-puppet.elをインストールした]]></title>
            <link>https://masutaka.net/2013-08-05-1/</link>
            <guid>https://masutaka.net/2013-08-05-1/</guid>
            <pubDate>Mon, 05 Aug 2013 00:00:00 GMT</pubDate>
            <description><![CDATA[flymake-puppet 1.0.0 - Marmalade: Spreadable Elisp 最近Marmaladeに登録されたので、インストールしてみました。
(puppet-flymake ってのもあるのですね。ややこしい。。)
 puppet-lintというコマンドを要求するので、gemでインストールする(※1)。   % gem install puppet-lint
  M-x list-packagesからflymake-puppetをインストールする(※2)。
  ~/.emacs.d/init.elに以下を追加すればOK(※3)
  ;;(load &#34;puppet-mode-init&#34;) ; (a) (add-hook &#39;puppet-mode-hook &#39;flymake-puppet-load) ; (b) 普通にflymakeが効いていて使える予感。
 ※1 あらかじめrbenvとかでrubyをインストールしないと、/usr/lib/ruby
以下とかにインストールされるので注意。
※2 Emacsのパッケージについては、以下のページやEmacs実践入門 を参考
にどうぞ
package.elを使う場合の設定ファイルの書き方 - Life is very short ※3 M-x list-packagesからインストールすると、通常こういった基本的な
設定は不要です。でも今回は~~(a)を設定しないと*.ppがpuppet-modeに関連
付かない~~、(b)を設定しないとflymake-puppetが使われない、という状況だっ
たので設定しました。
 追記(2013-10-05):
puppet-modeからpuppet-mode-init.elが削除され、設定が不要になったの
で、(a)をコメントアウトしました。]]></description>
        </item>
        <item>
            <title><![CDATA[官報に使われた印刷局の康煕字典活字]]></title>
            <link>https://shiromoji.hatenablog.jp/entry/20130727/1374994117</link>
            <guid>https://shiromoji.hatenablog.jp/entry/20130727/1374994117</guid>
            <pubDate>Sat, 27 Jul 2013 06:48:37 GMT</pubDate>
            <description><![CDATA[<p>去年の11月、<a href="http://kindai.ndl.go.jp/">&#x8FD1;&#x30C7;&#x30B8;</a>で『<a href="http://kindai.ndl.go.jp/info:ndljp/pid/1459197">&#x5185;&#x95A3;&#x5370;&#x5237;&#x5C40;&#x4E03;&#x5341;&#x5E74;&#x53F2;</a>』という本をパラパラ見ていたら、こんなことが書いてあった（強調は引用者）。</p>

    <blockquote cite="http://kindai.ndl.go.jp/info">
        <p>其の後三十一年十一月<a class="keyword" href="http://d.hatena.ne.jp/keyword/%C6%E2%B3%D5%C9%DC">内閣府</a>官報局と併合してより、更に活<a class="keyword" href="http://d.hatena.ne.jp/keyword/%BB%FA%CA%EC">字母</a>型の改造に努む。三十六年二月<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%E9%A5%A4%A5%CE%A5%BF%A5%A4%A5%D7">ライノタイプ</a>を購入設備し欧文印刷の便を図る。又<em>四十五年以来<a class="keyword" href="http://d.hatena.ne.jp/keyword/%B9%AF%DF%E6%BB%FA%C5%B5">康煕字典</a>の字体を基礎として活字字体の改造を企て、殿版<a class="keyword" href="http://d.hatena.ne.jp/keyword/%B9%AF%DF%E6%BB%FA%C5%B5">康煕字典</a>に依ることとし</em>、同時に鋳造方法の改良をも計画し独逸及び米国より母型彫刻機四台を購入し、繁雑なる旧式方法を廃しニツケルと銅との合成金に直接彫刻して母型を得、之に依りて鋳造するの方法に革め、大いに製造能率の増進を見たり。而して官報印刷に使用する活字の如きは、専ら此の方法に依りて鋳造したるものを用ふ。又大正五六年の頃「ポイント」式活字の鋳造に着手せしが、七年十二月に至り五号活字に代はるべき九「ポイント」活字成り、八年末六号活字に代はべき<a href="#f-27c32a01" name="fn-27c32a01" title="ママ">*1</a>八「ポイント」活字の新造に尋いで十一年十二「ポイント」新活字等完成す。<em>此等の活字は何れも前記字典の文字を写真に依り縮写したる当局独特のものにして、字画正確、字体鮮明なるのみならず、一種の風韻を持するの故を以て大いに識者の好評を得たり</em>。</p>

        <cite><a href="http://kindai.ndl.go.jp/info:ndljp/pid/1459197/82">&#x300E;&#x5185;&#x95A3;&#x5370;&#x5237;&#x5C40;&#x4E03;&#x5341;&#x5E74;&#x53F2;&#x300F;&#x5185;&#x95A3;&#x5370;&#x5237;&#x5C40;&#x3001;1943&#x5E74;&#x3001;pp. 114&ndash;115</a></cite>
    </blockquote>
<p>そんな活字があっただなんて寡聞にして知らなかったので、へーと思って <a class="keyword" href="http://d.hatena.ne.jp/keyword/Twitter">Twitter</a> でつぶやいた。</p><p><script>    window.twttr = (function(d, s, id) {        var js, fjs = d.getElementsByTagName(s)[0],            t = window.twttr || {};        if (d.getElementById(id)) return t;        js = d.createElement(s);        js.id = id;        js.src = "https://platform.twitter.com/widgets.js";        fjs.parentNode.insertBefore(js, fjs);        t._e = [];        t.ready = function(f) {            t._e.push(f);        };        return t;    }(document, "script", "twitter-wjs"));</script><script>    twttr.ready(function (twttr) {        var el = document.getElementsByClassName('twitter-syntax-tweet-id-271917646210035713');        for (var i=0;i<el.length;i++) {            if (!!el[i].getAttribute('data-is-tweet-loaded')){                continue;            }            el[i].setAttribute('data-is-tweet-loaded', '1');            twttr.widgets.createTweet('271917646210035713',el[i],{});        }    });</script><div class="twitter-syntax-tweet-id-271917646210035713"></div><script>    window.twttr = (function(d, s, id) {        var js, fjs = d.getElementsByTagName(s)[0],            t = window.twttr || {};        if (d.getElementById(id)) return t;        js = d.createElement(s);        js.id = id;        js.src = "https://platform.twitter.com/widgets.js";        fjs.parentNode.insertBefore(js, fjs);        t._e = [];        t.ready = function(f) {            t._e.push(f);        };        return t;    }(document, "script", "twitter-wjs"));</script><script>    twttr.ready(function (twttr) {        var el = document.getElementsByClassName('twitter-syntax-tweet-id-271919839289954305');        for (var i=0;i<el.length;i++) {            if (!!el[i].getAttribute('data-is-tweet-loaded')){                continue;            }            el[i].setAttribute('data-is-tweet-loaded', '1');            twttr.widgets.createTweet('271919839289954305',el[i],{});        }    });</script><div class="twitter-syntax-tweet-id-271919839289954305"></div></p><p>で、その後ろくに調べもせずほったらかしにしていた。</p><p>ときは流れて8ヶ月後。</p><p><a href="http://moji.gr.jp/gakkou/kouza/digitalib/">&#x3008;&#x6D3B;&#x5B57;&#x3009;&#x4E2D;&#x6BD2;&#x8005;&#x306E;&#x30C7;&#x30B8;&#x30BF;&#x30EB;&#x56F3;&#x66F8;&#x9928;&#x63A2;&#x8A2A;</a>の懇親会で「そういえば」と思い出し、「そんな活字あったんですか？」と<a href="http://d.hatena.ne.jp/uakira/">&#x5185;&#x7530;&#x3055;&#x3093;</a>に伺ってみた。そしたらすぐに、「実際に一時期官報に使われていました」「<a class="keyword" href="http://d.hatena.ne.jp/keyword/%B9%AF%DF%E6%BB%FA%C5%B5">康煕字典</a>そのままのデザインです」とのお答え。さすが内田さん！</p><p>帰宅してさっそく<a href="http://dl.ndl.go.jp/">&#x56FD;&#x7ACB;&#x56FD;&#x4F1A;&#x56F3;&#x66F8;&#x9928;&#x30C7;&#x30B8;&#x30BF;&#x30EB;&#x5316;&#x8CC7;&#x6599;</a>にアクセスし、大正期の官報を漁ってみたところ、ほどなくして使用例に到達。ざっと見てみたところでは、<a href="http://dl.ndl.go.jp/info:ndljp/pid/2954038">&#x5927;&#x6B63;8&#x5E74;&#xFF08;1919&#x5E74;&#xFF09;1&#x6708;4&#x65E5;&#x767A;&#x884C;&#x306E;&#x5B98;&#x5831;&#x7B2C;1924&#x53F7;</a>が初出のようだった。2ページ目の省令欄をはじめとして、いろいろな記事が<a class="keyword" href="http://d.hatena.ne.jp/keyword/%B9%AF%DF%E6%BB%FA%C5%B5">康煕字典</a>活字<a href="#f-c0de137f" name="fn-c0de137f" title="と勝手にこのエントリでは呼んでいますが、正式名称や通称があったりするんでしょうか？">*2</a>で組まれている。</p><p><span itemscope itemtype="http://schema.org/Photograph"><a href="http://f.hatena.ne.jp/mashabow/20130728032926" class="hatena-fotolife" itemprop="url"><img src="https://cdn-ak.f.st-hatena.com/images/fotolife/m/mashabow/20130728/20130728032926.png" alt="f:id:mashabow:20130728032926p:image:w600" title="f:id:mashabow:20130728032926p:image:w600" class="hatena-fotolife" style="width:600px" itemprop="image"></a></span></p><p>ここのデジタル化資料は解像度がそれほど高くないこともあって、細部のデザインまでは読み取れない。ただ、それでもあの<a class="keyword" href="http://d.hatena.ne.jp/keyword/%B9%AF%DF%E6%BB%FA%C5%B5">康煕字典</a>っぽい独特な雰囲気はよく伝わってくる。実のところ、今回これを見るまでは</p>

<ul>
<li><a class="keyword" href="http://d.hatena.ne.jp/keyword/%B9%AF%DF%E6%BB%FA%C5%B5">康煕字典</a>を写真で撮るって、それでうまく活字ができるんだろか？</li>
<li>組んだときにちゃんと字面揃うの？</li>
<li>「一種の風韻を持する〜」ってちょっと話を盛ってるんじゃ…</li>
</ul><p>などと、どれぐらいの品質なのか正直疑問だった。しかし、このように官報のデジタル化資料を見てみたところでは、結構いい感じに仕上がっているようにも思える。</p><p>また、どうやらこの活字はカタカナ部分の字幅（縦方向の長さ）が漢字より小さいようだ。そのおかげで、カタカナの字面が小ぶりなのにも関わらず、組み上がりはパラパラとした印象にはなっていない。</p><p>暇なときに一度、デジタル化資料ではなく実物の方でも見てみたい。</p>

<div class="section">
    <h4>附記</h4>
    <p>とここまで書いたあと、もう一度近デジの方をちらほら見ていたら、『<a class="keyword" href="http://d.hatena.ne.jp/keyword/%B0%F5%BA%FE%B6%C9">印刷局</a>長年報書 第45回』の中にこの活字についての言及があった。</p>

    <blockquote cite="http://kindai.ndl.go.jp/info">
        <p>大正八年一月四日</p><p>官報ハ従来二段組ナリシヲ三段組ニ改メ又五号活字ニ代フルニ<a class="keyword" href="http://d.hatena.ne.jp/keyword/%B9%AF%DF%E6%BB%FA%C5%B5">康煕字典</a>ノ文字ヲ基礎トシテ新鋳シタル九ポイント活字ヲ用ヰタリ……</p>

        <cite><a href="http://kindai.ndl.go.jp/info:ndljp/pid/932384/16">&#x300E;&#x5370;&#x5237;&#x5C40;&#x9577;&#x5E74;&#x5831;&#x66F8; &#x7B2C;45&#x56DE;&#x300F;&#x5370;&#x5237;&#x5C40;&#x3001;1920&#x5E74;&#x3001;p. 25</a></cite>
    </blockquote>
<p>さらに、『<a class="keyword" href="http://d.hatena.ne.jp/keyword/%B0%F5%BA%FE%B6%C9">印刷局</a>五十年略史』には次のように書かれている。（というか、この本自体がまるまるこの<a class="keyword" href="http://d.hatena.ne.jp/keyword/%B9%AF%DF%E6%BB%FA%C5%B5">康煕字典</a>活字で組まれている。上で引いた官報が漢字カタカナ交じりだったのに対し、こちらは漢字ひらがな交じり文。）</p>

    <blockquote cite="http://kindai.ndl.go.jp/info">
        <p>尚&#29574;に活字鋳造に就いて一言せざる可らざることあり、従来本邦の活字製作方法は先づ黄楊材に手刻したる原字を蝋型に取り、電気装置によりて銅を其凹所に集積せしめ、木材原字と同一の銅字を得て更に電気装置により始めて銅<a class="keyword" href="http://d.hatena.ne.jp/keyword/%BB%FA%CA%EC">字母</a>を作り、之を母型として活字を鋳造したるのものなり。当局に於ては明治四十五年以来独逸及米国より母型彫刻機四台を購入し、繁雑なる旧式の手続を取らずニッケルと銅との合成金に直接彫刻して母型を得、之に依りて鋳造する事とせり。現在官報印刷に使用する活字の如き此機械によりて鋳造したるものなり。上述の新活字は<a class="keyword" href="http://d.hatena.ne.jp/keyword/%B9%AF%DF%E6%BB%FA%C5%B5">康煕字典</a>の文字を写真により縮写したるものにして字画正確書体鮮明なる九ポイント活字なり。此新漢字活字を採用すると同時に仮名活字をも改鋳し、漢字に比し十と八との割合に縮め、以て字間の空白を減じ行数の節約を得る事とせり。</p>

        <cite><a href="http://kindai.ndl.go.jp/info:ndljp/pid/1874804/27">&#x300E;&#x5370;&#x5237;&#x5C40;&#x4E94;&#x5341;&#x5E74;&#x7565;&#x53F2;&#x300F;&#x5370;&#x5237;&#x5C40;&#x3001;1921&#x5E74;&#x3001;p. 29</a></cite>
    </blockquote>

    <blockquote cite="http://kindai.ndl.go.jp/info">
        <p>八年一月従来二段組なりし官報を三段組に改め新鋳九ポイント活字を使用し、以て大に紙面の節約と印刷の鮮明とを図り、日に月に増大堆積する記載事項の停滞を防ぐを得たり、……</p>

        <cite><a href="http://kindai.ndl.go.jp/info:ndljp/pid/1874804/34">&#x540C;&#x3001;p. 42</a></cite>
    </blockquote>
<p>とあり、まとめると結局</p>

<ul>
<li><a class="keyword" href="http://d.hatena.ne.jp/keyword/%C2%E7%C0%B58%C7%AF">大正8年</a>（1919年）1月4日の官報から<a class="keyword" href="http://d.hatena.ne.jp/keyword/%B9%AF%DF%E6%BB%FA%C5%B5">康煕字典</a>活字を使った</li>
<li>このときの活字のサイズは9ポイントで、のちに他のサイズも製作</li>
<li>漢字は方形だが仮名は80％平体。これによって紙面節約</li>
</ul><p>ということらしい。近デジすごい。</p>

</div>
<div class="section">
    <h4>追記</h4>
    <p>「<a class="keyword" href="http://d.hatena.ne.jp/keyword/%C2%E7%C0%B58%C7%AF">大正8年</a>（1919年）1月4日の官報から<a class="keyword" href="http://d.hatena.ne.jp/keyword/%B9%AF%DF%E6%BB%FA%C5%B5">康煕字典</a>活字を使った」と書いたが、もう少し前から使われていたらしい。</p><p><blockquote class="twitter-tweet" data-lang="HASH(0xe9488a8)"><p lang="ja" dir="ltr"><a class="keyword" href="http://d.hatena.ne.jp/keyword/%B0%F5%BA%FE%B6%C9">印刷局</a>が<a class="keyword" href="http://d.hatena.ne.jp/keyword/%B9%AF%DF%E6%BB%FA%C5%B5">康煕字典</a>体活字を使い始めるの、「70年史」の記録と違って<a class="keyword" href="http://d.hatena.ne.jp/keyword/%C2%E7%C0%B58%C7%AF">大正8年</a>1月4日付官報からじゃなく、<a class="keyword" href="http://d.hatena.ne.jp/keyword/%C2%E7%C0%B57%C7%AF">大正7年</a>12月27日付「<a class="keyword" href="http://d.hatena.ne.jp/keyword/%BD%B0%B5%C4%B1%A1">衆議院</a>第41回本会議第1号」からだ <a href="https://t.co/6sZgeVcQFp">https://t.co/6sZgeVcQFp</a> っていう件、判りやすいようにツイートしてなかった <a href="https://t.co/MQGISd6XSU">https://t.co/MQGISd6XSU</a> ので、自分でも捜すの苦労した。</p>&mdash; UCHIDA <a class="keyword" href="http://d.hatena.ne.jp/keyword/Akira">Akira</a> (@uakira2) <a href="https://twitter.com/uakira2/status/1082894613210226688?ref_src=twsrc%5Etfw">January 9, 2019</a></blockquote><script async src="https://platform.twitter.com/widgets.js" charset="utf-8"></script></p><p>上記スレッドに情報がまとまっている。</p>

</div><div class="footnote">
<p class="footnote"><a href="#fn-27c32a01" name="f-27c32a01" class="footnote-number">*1</a><span class="footnote-delimiter">:</span><span class="footnote-text">ママ</span></p>
<p class="footnote"><a href="#fn-c0de137f" name="f-c0de137f" class="footnote-number">*2</a><span class="footnote-delimiter">:</span><span class="footnote-text">と勝手にこのエントリでは呼んでいますが、正式名称や通称があったりするんでしょうか？</span></p>
</div>]]></description>
            <enclosure url="http://a0.twimg.com/profile_images/1462059785/twitter_mashabow_icon_73_normal.png" length="0" type="image/png"/>
        </item>
        <item>
            <title><![CDATA[plenv + cpanm + cartonでPerlの環境を構築した(OSX版)]]></title>
            <link>https://masutaka.net/2013-07-17-2/</link>
            <guid>https://masutaka.net/2013-07-17-2/</guid>
            <pubDate>Wed, 17 Jul 2013 01:00:00 GMT</pubDate>
            <description><![CDATA[[2013-07-17-1] のOSX(Mountain Lion)版です。こっちはめっちゃ簡単。
brewでplenvとperl-buildをインストール
% brew install plenv % brew install perl-build あとはUbuntuと同じようにperl+cpanm+cartonをインストール
% plenv install 5.18.0 -Dusethreads % plenv global 5.18.0 &amp;&amp; plenv rehash &amp;&amp; rehash % plenv install-cpanm % plenv exec cpanm Carton P.S.
入れたは良いけど、OSXでPerl使わないなーと思ってたら、chalow(このブ
ログを生成するツール)で使ってた。てか、HTML::Templateがなくて
chalowを実行出来なくなっていた&hellip;。早速インストール☆
% plenv exec cpanm HTML::Template ]]></description>
        </item>
        <item>
            <title><![CDATA[plenv + cpanm + cartonでPerlの環境を構築した(Ubuntu版)]]></title>
            <link>https://masutaka.net/2013-07-17-1/</link>
            <guid>https://masutaka.net/2013-07-17-1/</guid>
            <pubDate>Wed, 17 Jul 2013 00:00:00 GMT</pubDate>
            <description><![CDATA[plenv + cpanm + carton でPerlの開発環境を構築する｜Act as Professional - hiroki.jp 私もGrowthForecast をインストールするために、Ubuntu 12.04.2 LTS上に
Perlの環境を構築しました。@hirocaster さんと若干違いがあった(下記★
の箇所)ので、私の手順も書き留めておきます。
Perl力はゼロな私ですが、以下の認識でだいたい合っていると思います。
  plenv
Rubyのrbenvに相当。複数バージョンのperlをHOMEにインストールし、切り
替えて使うツール。というよりシステムを汚さないために使う感じ。
  cpanm
Rubyのgemに相当。Perlのライブラリをインストールするために必要なツー
ル。今はcpanじゃなくてこれを使うみたい。
  carton
Rubyのbundlerに相当。アプリごとにライブラリを切り替えることが出来る。
  plenv+perl-build これは同じ。
% git clone git://github.com/tokuhirom/plenv.git ~/.plenv 以下を~/.zshenv等に設定して、shellを再起動とかして完了。
export PATH=$HOME/.plenv/bin:$PATH eval &#34;$(plenv init -)&#34; Perlをビルドするためにはperl-buildが必要(★)。
% git clone git://github.com/tokuhirom/Perl-Build.git ~/.plenv/plugins/perl-build/ インストール可能なPerlがずらずらと表示されるようになった(★)。
% plenv install -l Available versions: (省略) 5.18.0 5.19.0 5.19.1 Perl 現時点での最新リリース版5.18.0をインストールする。Perlはx.y.zのy番
号が奇数が開発版で偶数が安定版とのこと。&rsquo;-Dusethreads&rsquo;がなぜ必要な
のかは知らない。
% plenv install 5.]]></description>
        </item>
        <item>
            <title><![CDATA[nginxのアクセスログをFluentd経由でMongoDBに保存してみた]]></title>
            <link>https://masutaka.net/2013-07-14-1/</link>
            <guid>https://masutaka.net/2013-07-14-1/</guid>
            <pubDate>Sun, 14 Jul 2013 00:00:00 GMT</pubDate>
            <description><![CDATA[Fluentdを使ってみたかったので、masutaka.netのnginxアクセスログを
Fluentd経由でMongoDBに保存してみました。
Fluentdについては以下が分かりやすいです。
Fluentdで始めるリアルタイムでのログ有効活用 - CodeZine 今回も@hirocaster さんの記事をほぼトレース。
 なぜFluentdなどを使ってログデータ活用するのか？｜Act as Professional - hiroki.jp  fluentdをインストールしてnginxのログをまずはローカルで集める｜Act as Professional - hiroki.jp  fluentd経由のデータをmongodbへ保存する｜Act as Professional - hiroki.jp  実際に運用しているサービスのnginxログをLTSVにしてみた！｜Act as Professional - hiroki.jp   実際、やっていることは単純で、
 nginxがアクセスログをファイルに書き出す。 それを検知したFluentd(実際はtd-agentを利用)がMongoDBに記録する。
ってだけです。  最後の記事を参考に、nginxのログ形式はデフォルト(Combined形式と呼ぶ
らしい)からLTSV 形式に変更してます。最近のtd-agentはLTSVをサポートし
ているのでシンプルに書けました。あと、td-agentのログでWarningが出て
いたので、pos_fileも追加しました。
fluent-plugin-mongoをインストールするChefのレシピと、nginxの設定も
コピペしておきますね。
 始め、nginxとtd-agentの通信はパイプかなにかを介するのかと思い、難し
く考えていましたが、実際は単なるファイルでした。ポーリングしている
みたいです。
もうひとつ誤解してたのが、
td-agentを使う ＝ Hadoopを使わなければならない
だと思い込んでいたことでした。やたら難しく考えていた。
やってみたら予想以上に単純でした。むしろChefのレシピを作るのに、
多大な時間を使ってしまった。。
次はGrowthForecast を試してみます。
追記(2013-07-15):
今のtd-agentはLTSVをサポートしているFluentdを同封していると指摘を受
けましたので、記事を書き換えました。repeatedlyさん、ありがとうござ
いました。
追記(2013-08-15):
Chefのレシピやnginxの設定も追加しました。]]></description>
        </item>
        <item>
            <title><![CDATA[masutaka.netをさくらのVPSに置き換えました]]></title>
            <link>https://masutaka.net/2013-05-27-2/</link>
            <guid>https://masutaka.net/2013-05-27-2/</guid>
            <pubDate>Mon, 27 May 2013 01:00:00 GMT</pubDate>
            <description><![CDATA[このブログはほぼ静的コンテンツなので、置き換えるメリットはほぼあり
ません。でもいろいろ遊びたかったので置き換えました！
◆置き換え前→さくらのレンタルサーバ [2009-05-17-4] リアルサーバ。
他の人と/homeを共有する。
コントロールパネルからメールアドレスを作ったり、アクセス解析出来る。
カスタマイズ性はほぼない。
OSはFreeBSD 7.1-RELEASE-p16
WebサーバはApache/1.3.42
年間5,000円(スタンダードプラン)
◆置き換え後→さくらのVPS 仮想サーバ。
ユーザは自分だけ。
コントロールパネルとかはない。
カスタマイズしまくり。
OSはUbuntu12.04 LTSにした。[2013-05-19-1] Webサーバはnginx/1.1.19にした。
年間16,280円(プランは2G。石狩リージョン)
結構真面目にサーバを構築しました。
参考にしたのはもちろん『入門Chef Solo』[2013-04-22-4] 基本的にVagrantとserverspec で検証しつつレシピを書いたので、本番環境
で悩むことは少なかったです。時代は進みましたね。
Webサーバはnginxにしました。Apacheに比べて、設定がシンプルで惚れま
した。あと、ごく一部で使っているcgi用にfcgiwrapをインストール。
chef-soloで構築してみた疑問や課題はこんな感じ
・パッケージ全体のupgradeはどのタイミングでやれば良いのか？
・他の人のChef-soloリポジトリを知りたい。Vagrantでも真面目にテスト書いている？とか。
chalowはChef-soloでは管理してません。まあ、Webアプリケーションなの
で、デプロイ対象とかそっちの話だと思う。今は自作のmkchalowコマンド
でアップロードしてます。[2009-06-14-3] ]]></description>
        </item>
        <item>
            <title><![CDATA[パソナテック様主催のセミナー『アジャイル開発におけるリーダーシップとは』に行ってきた]]></title>
            <link>https://masutaka.net/2013-05-27-1/</link>
            <guid>https://masutaka.net/2013-05-27-1/</guid>
            <pubDate>Mon, 27 May 2013 00:00:00 GMT</pubDate>
            <description><![CDATA[先週木曜日の話になりますが、このツイートを見てノリで行ってきました。
loading...
   if (localStorage.getItem("pref-theme") === "light") { const elements = document.getElementsByClassName('twitter-tweet'); for (let i = 0; i  【講演】アジャイル開発における新しいリーダシップのありかた｜Act as Professional - hiroki.jp 【講演資料】アジャイル開発における新しいリーダシップのありかた｜Act as Professional - hiroki.jp   当日は間違えて丸の内北口から出てしまったので、着いたのは結構ギリギ
リな時間に&hellip;。でも大塚さんの目の前に陣取った！
最初はアジャイルの基本的な話。変化が当然のこの時代に機敏に行動する
ための一つの解がアジャイルという(私の)認識。一度大塚さんから直接レ
クチャーを受けたことがありますが、結構忘れてますね。。。補正が出来
てよかったです。
この辺をメモってた。
・スクラムは炭鉱のカナリア
・スクラム用語ではイテレーションはスプリント
スクラムとアジャイルの違いが分かってませんでしたが、wikipedia による
と『スクラムは、ソフトウェア開発における軽量なアジャイルソフトウェ
ア開発手法の1つである。』とのこと。なるほど。
しかし、アジャイルは難しい。スクラムマスターいないと絶対最初は失敗
するでしょw 講演では40ページ目がスクラムの全てと言ってましたが、絶
対イメージわかないでしょw
後半は本題。アジャイル開発におけるリーダーシップの話でした。スクラ
ムマスターにリーダーシップが求められるのは当然ですが、彼がいなくて
も回るチームが目標とのこと。そうですよね。ってことは、メンバー全員
にリーダーシップが必要になります(今読んでいる本でも同じこと言ってる)。
終わったあとは大塚さんとパソナテックのお姉さん２人とで、飲んで振り
返りをしてきました。スクラムでは振り返りが大事ですからね！
終わり。]]></description>
        </item>
        <item>
            <title><![CDATA[さくらのVPS Ubuntuを10.04から12.04 LTSにバージョンアップした]]></title>
            <link>https://masutaka.net/2013-05-19-1/</link>
            <guid>https://masutaka.net/2013-05-19-1/</guid>
            <pubDate>Sun, 19 May 2013 00:00:00 GMT</pubDate>
            <description><![CDATA[[2013-04-22-4] で書いたとおり、このmasutaka.netのリプレイス先のサー
バをセットアップ中です。
今回はカスタムOSインストールからUbuntu 10.04 i386をインストールして
から、12.04 LTSにアップデートしました。
参考にしたのはこの記事。
さくらのVPS Ubuntu 10.04から12.04 LTSヘバージョンアップする｜Act as Professional - hiroki.jp ほぼこのまんまやってうまくいきました。毎度ありがとうございます。
resolvconfはバージョンアップしたら勝手に入ったので、apt-get
installは不要と言えば不要でした。
名前解決はやっぱりできなかったので、記事と同じように
/etc/resolvconf/resolv.conf.d/baseへの追記と、
設定の反映&quot;sudo resolvconf -u&quot;をして終了。
MySQLはまだ使わないのでこの時点では何もせず。
Ubuntuは/etc/lsb-release見ればリリース情報が分かるみたいですね。
これはバージョンアップ前
% cat /etc/lsb-release DISTRIB_ID=Ubuntu DISTRIB_RELEASE=10.04 DISTRIB_CODENAME=lucid DISTRIB_DESCRIPTION=&#34;Ubuntu 10.04.4 LTS&#34; これはバージョンアップ後
% cat /etc/lsb-release DISTRIB_ID=Ubuntu DISTRIB_RELEASE=12.04 DISTRIB_CODENAME=precise DISTRIB_DESCRIPTION=&#34;Ubuntu 12.04.2 LTS&#34; Chef-soloの使い方もだいたい理解したので、これからnginxとか入れてい
きます。
P.S.
preciseって、コードネームだったのか。。(Debian脳ェ&hellip;)]]></description>
        </item>
        <item>
            <title><![CDATA[『トモダチコレクション 新生活』がやってきた！]]></title>
            <link>https://masutaka.net/2013-05-10-1/</link>
            <guid>https://masutaka.net/2013-05-10-1/</guid>
            <pubDate>Fri, 10 May 2013 00:00:00 GMT</pubDate>
            <description><![CDATA[ダウンロード版を買っちゃった♡
今までやったゲームって、難しすぎてコントローラを叩きつける系のが多
かったんです。例えばデビルメイクライ3→[2011-02-11-5] それと比べると、なんとヌルイゲームであることか。
主にすれちがい通信のMiiを登録してますが、近所の子供とかに告白して
キモイオッサンになってます。やばいw (※基本勝手にするんです)
ググると芸能人Miiもあったので、QRコードで何人か登録してます。
@Nintendo_Mii_ もフォロー☆
キャンペーン もやってたので、「トモダチコレクション 新生活 ファッショ
ンカタログ」を50Pで申し込みました。もうどうにでもなれ..ヽ(´▽｀)ノ
それにしてもボスがなかなか出てこないなー]]></description>
        </item>
        <item>
            <title><![CDATA[『コーディングを支える技術』を読んだ]]></title>
            <link>https://masutaka.net/2013-05-03-1/</link>
            <guid>https://masutaka.net/2013-05-03-1/</guid>
            <pubDate>Fri, 03 May 2013 00:00:00 GMT</pubDate>
            <description><![CDATA[ちょいちょい話題になっているようだったので読んだ。一見、エディタや
統合開発環境の本に見えるけど、そうじゃなくてプログラミング言語の歴
史が書かれた本。
前半はなじみ深いCやLispが例に出ることが多く、サクサク読めた。やっぱ、
CとLispはテッパンですね。
今なんとなく使っているif文や名前空間、継承などは、歴史によって磨か
れ当たり前に使われていると再認識。
各章はコンパクトにまとめられているのでサクサク読めた。内容もそんな
に濃くないので、GWにさっと読むのは良いかも知れない。]]></description>
        </item>
        <item>
            <title><![CDATA[「TTXによるフォントのぞき基礎」の資料【5/4更新：スライド公開】]]></title>
            <link>https://shiromoji.hatenablog.jp/entry/20130502/1367500832</link>
            <guid>https://shiromoji.hatenablog.jp/entry/20130502/1367500832</guid>
            <pubDate>Thu, 02 May 2013 13:20:32 GMT</pubDate>
            <description><![CDATA[<p><a href="http://d.hatena.ne.jp/mashabow/20130426/1366986649">5&#x6708;3&#x65E5;&#x306E;&#x52C9;&#x5F37;&#x4F1A;</a>で発表する「TTXによるフォントのぞき基礎」の資料です。</p>

<div class="section">
    <h4>スライド</h4>
    <p>勉強会終了後に公開する予定です。<strong>→ 公開しました。</strong>（2013-05-04）</p>

<ul>
<li><a href="http://shiromoji.net/font/mojiben0503/fontnozoki-with-ttx/">TTX &#x306B;&#x3088;&#x308B;&#x30D5;&#x30A9;&#x30F3;&#x30C8;&#x306E;&#x305E;&#x304D;&#x57FA;&#x790E; - &#x3057;&#x308D;&#x3082;&#x3058;&#x4F5C;&#x696D;&#x5BA4;</a></li>
</ul><p>勉強会のスライドを少々手直ししてアップロードしました。スペースキーを押すと進みます。Esc キーで俯瞰になります（が、うちのPCでは動作が重いです）。今回は初めて <a href="https://github.com/hakimel/reveal.js">reveal.js</a> という<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%D5%A5%EC%A1%BC%A5%E0%A5%EF%A1%BC%A5%AF">フレームワーク</a>を使って作成してみました。<a class="keyword" href="http://d.hatena.ne.jp/keyword/Firefox">Firefox</a> で表示確認をしています。</p>

</div>
<div class="section">
    <h4>ツイートまとめ</h4>
    
<ul>
<li><a href="http://togetter.com/li/497859">&#x30D5;&#x30A9;&#x30F3;&#x30C8;&#x95A2;&#x4FC2;&#x306E;&#x52C9;&#x5F37;&#x4F1A; #mojiben0503 &#x307E;&#x3068;&#x3081; - Togetter</a></li>
</ul>
</div>
<div class="section">
    <h4>TTXをインストールする</h4>
    
<ul>
<li><a href="http://d.hatena.ne.jp/mashabow/20130427/1367046740">TTX&#x306E;&#x30A4;&#x30F3;&#x30B9;&#x30C8;&#x30FC;&#x30EB;&#x65B9;&#x6CD5; - &#x3057;&#x308D;&#x3082;&#x3058;&#x30E1;&#x30E2;&#x30E9;&#x30F3;&#x30C0;&#x30E0;</a></li>
</ul>
</div>
<div class="section">
    <h4>参加者向けファイル</h4>
    <p>ノートPC持参で参加される方は、以下の2つのファイルをダウンロード・展開しておいてください。（一応、これらのファイルを入れた<a class="keyword" href="http://d.hatena.ne.jp/keyword/USB%A5%E1%A5%E2%A5%EA">USBメモリ</a>をわたしの方で用意しておきます。）</p>

<div class="section">
    <h5>サンプル用フォントファイル</h5>
    
<ul>
<li><a href="http://shiromoji.net/font/mojiben0503/sample.zip">http://shiromoji.net/font/mojiben0503/sample.zip</a></li>
</ul><p><a href="http://ossipedia.ipa.go.jp/ipafont/ipafont/download.html">IPA&#x660E;&#x671D;</a> と <a href="http://sourceforge.net/projects/sourcesans.adobe/?source=recommended">Source Sans Pro</a> の一部をそのまま再配布しているだけです。</p>

</div>
<div class="section">
    <h5>OpenType Specification</h5>
    
<ul>
<li><a href="http://www.microsoft.com/typography/otspec/">Microsoft Typography - OpenType Specification</a></li>
</ul><p>"Download full specification" から ZIP がダウンロードできます。</p>

</div>
</div>]]></description>
            <enclosure url="https://cdn.blog.st-hatena.com/images/theme/og-image-1500.png" length="0" type="image/png"/>
        </item>
        <item>
            <title><![CDATA[TTXのインストール方法]]></title>
            <link>https://shiromoji.hatenablog.jp/entry/20130427/1367046740</link>
            <guid>https://shiromoji.hatenablog.jp/entry/20130427/1367046740</guid>
            <pubDate>Sat, 27 Apr 2013 07:12:20 GMT</pubDate>
            <description><![CDATA[<p>TTXは、TTX/FontTools に含まれている<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%B3%A5%DE%A5%F3%A5%C9%A5%E9%A5%A4%A5%F3">コマンドライン</a><a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%C4%A1%BC%A5%EB">ツール</a>です。この TTX/FontTools は <a class="keyword" href="http://d.hatena.ne.jp/keyword/SourceForge">SourceForge</a> で公開されており、2013年4月現在 v2.3 が最新のバージョンです。</p>

<ul>
<li><a href="http://sourceforge.net/projects/fonttools/">http://sourceforge.net/projects/fonttools/</a></li>
</ul><p>この記事では、TTXのインストール方法を次の3通りに分けて紹介します。</p>

<ul>
<li><a href="#afdko">A. AFDKOでまとめてインストールする</a></li>
<li><a href="#direct">B. TTXを直接インストールする</a></li>
<li><a href="#setup">C. setup.py でインストールする</a></li>
</ul><p>一長一短ありますが、とりあえず A が無難なような気がします。もっとうまいやり方があるようでしたら、ぜひご教示ください :)</p>

<div class="section">
    <h4><a name="afdko">A.</a> AFDKOでまとめてインストールする</h4>
    <p>AFDKO (<a class="keyword" href="http://d.hatena.ne.jp/keyword/Adobe">Adobe</a> Font Development Kit for OpenType; 通称あふでこ) は <a class="keyword" href="http://d.hatena.ne.jp/keyword/Adobe">Adobe</a> が提供しているフォント開発用の<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%C4%A1%BC%A5%EB">ツール</a>群で、業界で広く使われているようです。<a class="keyword" href="http://d.hatena.ne.jp/keyword/Windows">Windows</a> と <a class="keyword" href="http://d.hatena.ne.jp/keyword/Mac">Mac</a> に対応しています<a href="#f-fef4a6c0" name="fn-fef4a6c0" title="[http://blogs.adobe.com/CCJKType/2012/02/afdko-for-other-platforms.html:title=Linux などに対応する可能性が無いわけではない]ようですが、残念ながら今のところリリースされていません。">*1</a>。</p>

<ul>
<li><a href="http://www.adobe.com/devnet/opentype/afdko.edu.html">Adobe Font Development Kit for OpenType | Adobe Developer Connection</a></li>
</ul><p>TTXはこの中に収録されているため、AFDKOをインストールすればTTXが使えるようになります。AFDKOにはいろいろな<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%C4%A1%BC%A5%EB">ツール</a>が入っていますし、とりあえずインストールしておいて損はないでしょう<a href="#f-5648a567" name="fn-5648a567" title="といいつつわたしはそれほど活用できていませんが……">*2</a>。手間もあまりかかりません。</p>

<div class="section">
    <h5>インストール方法</h5>
    
<ol>
<li><a href="http://www.adobe.com/devnet/opentype/afdko/eula.html">&#x3053;&#x306E;&#x30DA;&#x30FC;&#x30B8;&#x306E; License Agreement</a> を読み、内容に同意します。</li>
<li>ページ下部のリンクからZIPをダウンロードします。<a class="keyword" href="http://d.hatena.ne.jp/keyword/Windows">Windows</a> 版は FDK-25-WIN.zip、<a class="keyword" href="http://d.hatena.ne.jp/keyword/Mac">Mac</a> 版は FDK-25-<a class="keyword" href="http://d.hatena.ne.jp/keyword/MAC">MAC</a>.zipです。</li>
<li>ダウンロードしたZIPを展開します。</li>
<li>展開してできた FDK/Read_Me_First.html を開き、<q>2. AFDKO Installation Guide</q> の指示に従ってインストールします。指示の内容を大雑把に要約すると以下のとおりです。
<ol>
<li>FDKフォルダを好きな場所に移動する</li>
<li><a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%B3%A5%DE%A5%F3%A5%C9%A5%D7%A5%ED%A5%F3%A5%D7%A5%C8">コマンドプロンプト</a>やターミナルから FDK/FinishInstallWindows.cmd あるいは FDK/FinishInstallOSX を実行する</li>
<li>（<q>For installing the AFDKO FontLab macros</q> の部分は今回は関係ありません）</li>
</ol></li>
</ol><p>これでインストール完了です。ちなみにAFDKOの現在のバージョンは v2.5 Feb 26 2013 change number 60418 で、これをインストールすると TTX v2.3 が入ります。</p>

</div>
</div>
<div class="section">
    <h4><a name="direct">B.</a> TTXを直接インストールする</h4>
    
<div class="section">
    <h5><a class="keyword" href="http://d.hatena.ne.jp/keyword/Windows">Windows</a> の場合</h5>
    <p><a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%A4%A5%F3%A5%B9%A5%C8%A1%BC%A5%E9">インストーラ</a>などで普通に単独インストールできれば楽なのですが、残念なことに公式からは <a href="http://sourceforge.net/projects/fonttools/files/2.0b1/">v2.0b1&#xFF08;2002&#x5E74;&#x30EA;&#x30EA;&#x30FC;&#x30B9;&#xFF09;</a>のものしか配布されていません。</p><p>Typophile の <a href="http://typophile.com/node/67406">TTX 2.3 installer?</a> というスレッドにいろいろと情報が載っていますが、その中で <a href="http://typophile.com/node/67406#comment-469074">v2.3 &#x306E;ZIP&#x3078;&#x306E;&#x30EA;&#x30F3;&#x30AF;&#x304C;&#x6295;&#x7A3F;&#x3055;&#x308C;&#x3066;&#x3044;&#x307E;&#x3059;</a>。このZIPを好きな場所に展開し、<a class="keyword" href="http://d.hatena.ne.jp/keyword/%B4%C4%B6%AD%CA%D1%BF%F4">環境変数</a>PATHにそのディレクトリを追加すれば完了です。</p>

</div>
<div class="section">
    <h5><a class="keyword" href="http://d.hatena.ne.jp/keyword/Mac">Mac</a> の場合</h5>
    <p>自宅に <a class="keyword" href="http://d.hatena.ne.jp/keyword/Mac">Mac</a> がないのでよく調べていません :(<br />
こちらもバイナリは v2.0b1 のものしか配布されていません。</p>

</div>
<div class="section">
    <h5>その他 <a class="keyword" href="http://d.hatena.ne.jp/keyword/Linux">Linux</a> など</h5>
    <p><a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%C7%A5%A3%A5%B9%A5%C8%A5%EA%A5%D3%A5%E5%A1%BC%A5%B7%A5%E7%A5%F3">ディストリビューション</a>によってはパッケージが提供されています。例えば <a class="keyword" href="http://d.hatena.ne.jp/keyword/Ubuntu">Ubuntu</a> であれば</p>

<pre>$ sudo apt-get install fonttools
</pre><p>で最新の v2.3 をインストールすることができます。</p>

</div>
</div>
<div class="section">
    <h4><a name="setup">C.</a> setup.py でインストールする</h4>
    <p>これが本来のインストール方法ですが、この方法はちょっと面倒な気がします。前提として、<a href="http://www.python.org/download/">Python 2</a> と <a href="http://www.numpy.org/">NumPy</a> をインストールしておく必要があります。</p><p><a href="http://sourceforge.net/projects/fonttools/files/">TTX/FontTools &#x306E;&#x914D;&#x5E03;&#x30DA;&#x30FC;&#x30B8;</a>から fonttools-2.3.tar.gz をダウンロードし、展開します。そして fonttools-2.3 ディレクトリの中に入り、</p>

<pre>$ (sudo) <a class="keyword" href="http://d.hatena.ne.jp/keyword/python">python</a> setup.py install
</pre><p>などとすれば良いようです。</p><p>このあと <a class="keyword" href="http://d.hatena.ne.jp/keyword/Windows">Windows</a> の場合、</p>
<pre class="code lang-dosbatch" data-lang="dosbatch" data-unlink>@<span class="synIdentifier">echo</span><span class="synStatement"> off</span>
python C:\Python27\Scripts\ttx <span class="synIdentifier">%*</span>
</pre><p>のような内容のファイルを ttx.bat という名前で作成し、これをパスの通った場所に入れておけばOKです。</p><p>また、<a class="keyword" href="http://d.hatena.ne.jp/keyword/Mac">Mac</a> では</p>

<pre>$ defaults write com.apple.versioner.<a class="keyword" href="http://d.hatena.ne.jp/keyword/python">python</a> Prefer-32-Bit -bool yes
</pre><p>と設定する必要があるかもしれません<a href="#f-ece7a60e" name="fn-ece7a60e" title="http://forum.fontlab.com/index.php?topic=7305.0">*3</a>。</p><br />
<p>以上、インストール方法を3通りに分けて紹介しました。てきとうなフォントファイル <a class="keyword" href="http://d.hatena.ne.jp/keyword/hoge">hoge</a>.ttf<a href="#f-27f61b08" name="fn-27f61b08" title="和文フォントなど、ファイルサイズが大きいものだとちょっと時間がかかります。なお、.otf でもかまいません。">*4</a> に対して</p>
<pre class="code lang-sh" data-lang="sh" data-unlink>$ ttx hoge.ttf
</pre><p>としたときに <a class="keyword" href="http://d.hatena.ne.jp/keyword/hoge">hoge</a>.ttx が生成されるようであれば、TTXは正常にインストールされています。</p><p>TTXの使い方については、<a href="http://d.hatena.ne.jp/mashabow/20130426/1366986649">5&#x6708;3&#x65E5;&#x306E;&#x52C9;&#x5F37;&#x4F1A;</a>で紹介する予定です。</p><p>2013-05-04 追記：勉強会で使ったスライドをアップロードしました。</p>

<ul>
<li><a href="http://d.hatena.ne.jp/mashabow/20130502/1367500832">&#x300C;TTX&#x306B;&#x3088;&#x308B;&#x30D5;&#x30A9;&#x30F3;&#x30C8;&#x306E;&#x305E;&#x304D;&#x57FA;&#x790E;&#x300D;&#x306E;&#x8CC7;&#x6599; - &#x3057;&#x308D;&#x3082;&#x3058;&#x30E1;&#x30E2;&#x30E9;&#x30F3;&#x30C0;&#x30E0;</a></li>
</ul>
</div><div class="footnote">
<p class="footnote"><a href="#fn-fef4a6c0" name="f-fef4a6c0" class="footnote-number">*1</a><span class="footnote-delimiter">:</span><span class="footnote-text"><a href="http://blogs.adobe.com/CCJKType/2012/02/afdko-for-other-platforms.html">Linux &#x306A;&#x3069;&#x306B;&#x5BFE;&#x5FDC;&#x3059;&#x308B;&#x53EF;&#x80FD;&#x6027;&#x304C;&#x7121;&#x3044;&#x308F;&#x3051;&#x3067;&#x306F;&#x306A;&#x3044;</a>ようですが、残念ながら今のところリリースされていません。</span></p>
<p class="footnote"><a href="#fn-5648a567" name="f-5648a567" class="footnote-number">*2</a><span class="footnote-delimiter">:</span><span class="footnote-text">といいつつわたしはそれほど活用できていませんが……</span></p>
<p class="footnote"><a href="#fn-ece7a60e" name="f-ece7a60e" class="footnote-number">*3</a><span class="footnote-delimiter">:</span><span class="footnote-text"><a href="http://forum.fontlab.com/index.php?topic=7305.0">http://forum.fontlab.com/index.php?topic=7305.0</a></span></p>
<p class="footnote"><a href="#fn-27f61b08" name="f-27f61b08" class="footnote-number">*4</a><span class="footnote-delimiter">:</span><span class="footnote-text">和文フォントなど、ファイルサイズが大きいものだとちょっと時間がかかります。なお、.otf でもかまいません。</span></p>
</div>]]></description>
            <enclosure url="https://cdn.blog.st-hatena.com/images/theme/og-image-1500.png" length="0" type="image/png"/>
        </item>
        <item>
            <title><![CDATA[5月3日にフォント関係の勉強会やります]]></title>
            <link>https://shiromoji.hatenablog.jp/entry/20130426/1366986649</link>
            <guid>https://shiromoji.hatenablog.jp/entry/20130426/1366986649</guid>
            <pubDate>Fri, 26 Apr 2013 14:30:49 GMT</pubDate>
            <description><![CDATA[<p>2013-05-06 追記：今回の関連ツイートをまとめました。</p>

<ul>
<li><a href="http://togetter.com/li/497859">&#x30D5;&#x30A9;&#x30F3;&#x30C8;&#x95A2;&#x4FC2;&#x306E;&#x52C9;&#x5F37;&#x4F1A; #mojiben0503 &#x307E;&#x3068;&#x3081; - Togetter</a></li>
</ul><p><br />
読者・フォロワー各位：</p><p>突然ですが、5月3日にちょっとした勉強会をやってみようかと思います。</p>

<div class="section">
    <h4>日時</h4>
    <p>5月3日（金・祝） 13:00〜17:00</p>

</div>
<div class="section">
    <h4>場所</h4>
    <p><a href="http://www.toshima-mirai.jp/center/e_komagome/#nav_access">&#x99D2;&#x8FBC;&#x5730;&#x57DF;&#x6587;&#x5316;&#x5275;&#x9020;&#x9928;</a>　4階・第4会議室<br>山手線<a class="keyword" href="http://d.hatena.ne.jp/keyword/%B6%F0%B9%FE%B1%D8">駒込駅</a>北口より徒歩2分</p>

</div>
<div class="section">
    <h4>内容</h4>
    
<div class="section">
    <h5>1. TTXによるフォントのぞき基礎</h5>
    <p><a href="http://sourceforge.net/projects/fonttools/">TTX</a>の使い方を紹介し、OpenType の基本的な部分を簡単に説明します。「TTX使ったことない」「OpenType の中身に興味はあるけどどこから手をつけていいのかよく分からん」というような初心者を主なターゲットにします。30分程度？</p><p>下記補足も参照してください。</p>

</div>
<div class="section">
    <h5>2.『ヘルベチカ 世界を魅了する書体』鑑賞</h5>
    <p>みんなでDVDみるだけです。2007年イギリス制作のドキュメンタリーで、<a class="keyword" href="http://d.hatena.ne.jp/keyword/%BE%AE%CE%D3%BE%CF">小林章</a>さん監修の<a class="keyword" href="http://d.hatena.ne.jp/keyword/%C6%FC%CB%DC%B8%EC%BB%FA%CB%EB">日本語字幕</a>がついています。本編80分＋特典95分。</p>

<ul>
<li><a href="http://helveticafilm.com/">http://helveticafilm.com/</a></li>
</ul>
</div>
</div>
<div class="section">
    <h4>申し込み方法</h4>
    <p>タイトルを「5/3参加希望」として、mashabow<あっと>shiromoji.net へメールをお送りください。定員は10人弱で、先着順です。前日（5月2日）の20時に一旦締め切ります。</p><p>申し込みメールには、遅くとも翌日にはこちらから返信をします。万一返信のない場合には、お手数ですがお問い合わせください。</p>

</div>
<div class="section">
    <h4><a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%CF%A5%C3%A5%B7%A5%E5%A5%BF%A5%B0">ハッシュタグ</a></h4>
    
<ul>
<li><a href="https://twitter.com/search/realtime?q=%23mojiben0503&src=hash">#mojiben0503</a></li>
</ul>
</div>
<div class="section">
    <h4>問い合わせ先</h4>
    
<ul>
<li><span data-unlink>Twitter</span>: <a href="https://twitter.com/mashabow">@mashabow</a></li>
<li>メール: mashabow<あっと>shiromoji.net</li>
</ul>
</div>
<div class="section">
    <h4>補足：TTXによるフォントのぞき基礎 について</h4>
    <p>このあたり、興味ない方にとっては<em>非常につまらない内容</em>だと思うので、そういう場合は気にせず「ヘルベチカ〜」だけご参加ください。</p><p>参加される方は、TTXをインストールしたノートPCの持参をおすすめします。インストール方法については、下の記事にまとめてみました。</p>

<ul>
<li><a href="http://d.hatena.ne.jp/mashabow/20130427/1367046740">TTX&#x306E;&#x30A4;&#x30F3;&#x30B9;&#x30C8;&#x30FC;&#x30EB;&#x65B9;&#x6CD5; - &#x3057;&#x308D;&#x3082;&#x3058;&#x30E1;&#x30E2;&#x30E9;&#x30F3;&#x30C0;&#x30E0;</a></li>
</ul><p>なお、残念ながら会場には有線／<a class="keyword" href="http://d.hatena.ne.jp/keyword/%CC%B5%C0%FELAN">無線LAN</a>の設備はありません。</p><p>2013-05-04 追記：発表に使ったスライドを公開しました。</p>

<ul>
<li><a href="http://d.hatena.ne.jp/mashabow/20130502/1367500832">&#x300C;TTX&#x306B;&#x3088;&#x308B;&#x30D5;&#x30A9;&#x30F3;&#x30C8;&#x306E;&#x305E;&#x304D;&#x57FA;&#x790E;&#x300D;&#x306E;&#x8CC7;&#x6599; - &#x3057;&#x308D;&#x3082;&#x3058;&#x30E1;&#x30E2;&#x30E9;&#x30F3;&#x30C0;&#x30E0;</a></li>
</ul><p><br />
というわけで、参加お待ちしています。</p><p>以前から「若い人が主体になって文字関係のゆるい勉強会みたいなのできないかなー」と考えてい（ながら行動に移していなかっ）たんですが、今回はそのお試し版みたいな位置づけになります。気軽に顔を出してもらえれば幸いです。</p>

</div>]]></description>
            <enclosure url="https://cdn.blog.st-hatena.com/images/theme/og-image-1500.png" length="0" type="image/png"/>
        </item>
        <item>
            <title><![CDATA[『入門Chef Solo - Infrastructure as Code』を読んだ]]></title>
            <link>https://masutaka.net/2013-04-22-4/</link>
            <guid>https://masutaka.net/2013-04-22-4/</guid>
            <pubDate>Mon, 22 Apr 2013 03:00:00 GMT</pubDate>
            <description><![CDATA[業務でちょろっと使ったことある程度だし、890円だし、買ってみた。
Chefはサーバー設定や更新を自動化するツールです。サーバにちょっとで
も興味がある人は今すぐ読んだ方が良いです。仮想サーバのVagrant使って、
本当に簡単に試すことが出来ます。
前職で頑張ってNFSやLDAPをセットアップしてましたが、もうそういう時代
じゃないんですね。
knife-solo 0.3.0のrake installや、knife solo initでエラーになり 、
ちょっと調べる必要があったので、そこはアップデート版に期待したいです。
買った時は考えていませんでしたが、これを機にこのブログのサーバをリ
プレイスすることにしました。
今はさくらのレンタルサーバ スタンダードを使っています。[2009-05-17-4] 要は共有サーバなので、自由にパッケージを入れたり設定を変えることは
出来ません。HOMEディレクトリも共有です。
ちょうど4/20が契約更新のタイミングだったので契約を停止し、さくらの
VPS 2Gプラン を申し込みました。nginx動かしたり、fluentd(というかtd)
でログ集めたりしようかなあと思ってます。
そのためのサーバの設定をChef Soloで書きます。5/31までにリプレイスし
ないと、masutaka.netにアクセスできなくなる。ヤバイw]]></description>
        </item>
        <item>
            <title><![CDATA[『若者よ、アジアのウミガメとなれ』を読んだ]]></title>
            <link>https://masutaka.net/2013-04-22-3/</link>
            <guid>https://masutaka.net/2013-04-22-3/</guid>
            <pubDate>Mon, 22 Apr 2013 02:00:00 GMT</pubDate>
            <description><![CDATA[なんとなく買ってしまった。講演は一度聴いたことあるし、直接話も聞い
たことがあるのにw
読んでいると加藤さんの声が聞こえてくる不思議な本。講演のテープを本
に起こしたので、当たり前と言えばそうなんですが。
しかしまあ、こういう形で出したのは大正解。加藤さんと非常に相性が良
い。ボリュームが手頃だし読みやすいのでガンガン読める。
日々悶々としている人は、とりあえず読むと何か変わるかもしれません。
Kindole版は270円。安い！
ラングリッチの話もちょっと出て来ますよ。]]></description>
        </item>
        <item>
            <title><![CDATA[『ビッグデータの衝撃』を読んだ]]></title>
            <link>https://masutaka.net/2013-04-22-2/</link>
            <guid>https://masutaka.net/2013-04-22-2/</guid>
            <pubDate>Mon, 22 Apr 2013 01:00:00 GMT</pubDate>
            <description><![CDATA[ビッグデータの衝撃がKindleセール中だったので読んでみた - UNIX的なアレ まさに「データ解析をやらないとなーと漠然と思ってるけれど、それによっ
て何が起きるのかイマイチわかってない人」なので読んだ。
知識ゼロだったので読んで良かった。
前半は面白くサクサク読めます。HadoopとかMapReduceとか知らなくても
OKというか、むしろそういう人向けの内容。
後半はやや退屈さが増してきて、読むのに時間がかかってしまった。
でもオススメ。]]></description>
        </item>
        <item>
            <title><![CDATA[2013年3月も11回しかジムに行けなかった。 #クイックシェイプ]]></title>
            <link>https://masutaka.net/2013-04-22-1/</link>
            <guid>https://masutaka.net/2013-04-22-1/</guid>
            <pubDate>Mon, 22 Apr 2013 00:00:00 GMT</pubDate>
            <description><![CDATA[2013年3月の記録    日付 最高血圧 最低血圧 脈拍     3/ 3(日) 111 76 102   3/ 6(水) 119 69 92   3/ 8(金) 121 72 95   3/12(火) 129 77 98   3/14(木) 119 75 96   3/16(土) 117 74 107   3/19(火) 119 72 78   3/21(木) 105 65 86   3/23(土) 119 72 98   3/27(水) 121 75 98   3/31(日) 124 72 96    ※運動前に測定]]></description>
        </item>
        <item>
            <title><![CDATA[通知特化型Twitterアプリ「29hours」をHerokuで動かせた]]></title>
            <link>https://masutaka.net/2013-04-14-2/</link>
            <guid>https://masutaka.net/2013-04-14-2/</guid>
            <pubDate>Sun, 14 Apr 2013 01:00:00 GMT</pubDate>
            <description><![CDATA[通知特化型Twitterアプリ「29hours」をつくってHerokuで動かしているお話 - 準二級.jp 昨日というか今朝Heroku力がついたおかげで[2013-04-14-1] 、案外簡単に
できました。
settings.ymlはだいたいこんな感じ。
twitter: my_screen_name: masutaka consumer_key: XXXXXXXX consumer_secret: XXXXXXXX access_key: XXXXXXXX access_secret: XXXXXXXX matchers: keywords: - masutaka - マスタカ - 増田 notifiers: imkayac: username: XXXXXXXX linker: http https://dev.twitter.com/apps からアプリを作って、consumer_keyや
consumer_secretなどを埋める必要があります。やったことない人は気づく
まで時間がかかるかもしれません。
普段使っているTweetAtokは個別ツイートのURLスキーマは対応してなさそ
うでした。残念。
以下、記事の見出しと対応してます。
動かす ここまで来ると、ローカルで普通に動きます。タイムラインがだらだら流
れていくことと、普段から使っているim.kayac.com から通知が来ることを
確認しました。
あ、今朝と同じようにgemはvender/gems以下にインストールして動作確認
しました。[2013-04-14-1] Heroku に乗せる ここはちょっとハマりました。Dropboxにsettings.ymlを置きリンクを有効
にしたんですが、29hoursは起動してないようでした。
ログを見るため、Papertrail を入れようと
% heroku addons:add papertrail:choklad
を実行したら下記のエラーメッセージ。Freeプランでもクレジットカード
情報が必要みたいです。
! Please verify your account to install this add-on ! For more information, see http://devcenter.]]></description>
        </item>
        <item>
            <title><![CDATA[やっとHerokuデビューできた]]></title>
            <link>https://masutaka.net/2013-04-14-1/</link>
            <guid>https://masutaka.net/2013-04-14-1/</guid>
            <pubDate>Sun, 14 Apr 2013 00:00:00 GMT</pubDate>
            <description><![CDATA[Railsで簡単なアプリをscaffoldで作ってHerokuにデプロイするまで #heroku #PostgreSQL #Rails #Ruby - Qiita Rails力がそこそこついてきたので、こちら試したら案外簡単にできました。
年末に別な記事で試した時はギブアップしたのですが。orz
Herokuアプリ: http://sample-masutaka.herokuapp.com/ GitHub: https://github.com/masutaka/rails.sample/ 基本、記事の通りで大丈夫ですが、最初からRailアプリを作ったことがな
かったので、ちょっとだけハマりました。
ローカルでRailsアプリ作成 アプリ名のディレクトリ(今回はsample)作って、cdしました。
次にRails gemをインストールしました。Gemfileを作って&quot;bundle
install&quot;実行です。今回は.bundle/configを作って、ローカルのgemは
vender/gems以下にインストールされるようにしました(Heroku上では強制
的にvendor/bundle以下にインストールされるみたい)。
https://github.com/masutaka/rails.sample/commit/e69e24db750b97576a67d62c1e526b8dc57e5f09 最後に&quot;bundle exec rails new .&ldquo;を実行すれば、Rails環境がセットアッ
プされます。&ldquo;Could not find gem &lsquo;jquery-rails&quot;というエラーが発生し
ましたが、&ldquo;bundle install&quot;したら問題なさそうでした。
https://github.com/masutaka/rails.sample/commit/fffc748ce3ddf86c286b0ec3515ddc6792b1061c この状態で&rdquo;./script/rails s&quot;すると、http://localhost:3000 にアクセ
ス出来るようになります。
初めてのHerokuへのデプロイ 記事の通りに&quot;heroku create sample-masutaka&quot;でアプリを作り、
git push herku masterすればデプロイ完了です。
ちなみにアプリを作ると&quot;git remote add heroku ..&ldquo;されるため、
&ldquo;git push heroku master&quot;出来るようになります。
&ldquo;git remote -v show&quot;で確認出来ますね。
記事の通りにDBを指定しなかったので、sqlite3関連でエラーになってしま
いました。Herokuではsqlite3使えないのですね。production環境のDBを
postgreSQLにして解決しました。
https://github.com/masutaka/rails.sample/commit/a73fa5cd3b10dd8a47d1daf6b8483051db257374 http://sample-masutaka.herokuapp.com/ にアクセス出来ました。
簡単なブログアプリを作る 以下を実行するだけで http://localhost:3000/articles から記事を書け]]></description>
        </item>
        <item>
            <title><![CDATA[ついにドラクエ７をクリアーしたぞ！]]></title>
            <link>https://masutaka.net/2013-03-24-4/</link>
            <guid>https://masutaka.net/2013-03-24-4/</guid>
            <pubDate>Sun, 24 Mar 2013 03:00:00 GMT</pubDate>
            <description><![CDATA[  歩いて歩いて歩いて歩いて歩きまくって、上り階段を間違えて間違えて間
違えて間違えて間違えて上りまくって、ようやくクリアー出来ました。
クリアー時間はなんと98時間22分。レベルも熟練度も上げてないんですよ
これ(街とかダンジョンはまあまあ念入りに探索した)。長い長いと聞いて
いたけど、ホントに長かったw
ラスボスは弱いと聞いていたので、まものハンター、パラディン、パラディ
ン、盗賊という戦略もなにもないパーティでプラッと倒しに行きました。
弱いなんてとんでもない！全てを出し尽くして、ようやく勝てました。世
界樹のしずく、世界樹の葉、まほうの聖水がほぼゼロになった。。
クリアーレベルは43, 39, 38, 40。そんなに低くないみたい。職業が適当
すぎたかw
攻撃力が一番高いキャラに仕事が集中してしまって、バイキルトやマジッ
クバリア、ザオリクに忙しく、全然攻撃出来なかった。一方で賢者の石か
炎の爪を使うしかやることがないキャラもいたしw
フバーハとかスクルトとかかけてもすぐ無効にされるので、最後の方はバ
イキルトしか使いませんでした。
ドラクエ７は歩きゲー それにしてもよく歩かされたゲームでした。それもこれも過去の世界でルー
ラが使えないのが大きい。
現代に復活させてからも、同じ街やダンジョンを歩くことになるので、と
にかく歩きました。私情弱なので、大灯台なんて５回くらい上りましたよw
隅々まで確認しないと気が済まない私の性格もありますけど。
レベルも熟練度も上げなかった ボスとか接戦で倒すのが好きなので、レベルも熟練度も敢えて上げません
でした。でも、誰も勇者になったことがないってどういうことなの？w (ゴッ
ドハンドや天地雷鳴士にもなってない)
でも楽しかった！ [2013-02-16-1] で書いたとおりゲームは２年ぶりだったので、思い切り楽
しめました。７のシナリオは歴代のドラクエの中でも、屈指の出来だと思
います。結果を曖昧にして、それとなく伝わってくる感じが素晴らしい。
リアリティがあります。
そんなわけで無駄な有意義な時間を使いたい方は、是非プレイをオススメします！
 ]]></description>
        </item>
        <item>
            <title><![CDATA[2013年2月は全然ダメ。10回しかジムに行けなかった。 #クイックシェイプ]]></title>
            <link>https://masutaka.net/2013-03-24-3/</link>
            <guid>https://masutaka.net/2013-03-24-3/</guid>
            <pubDate>Sun, 24 Mar 2013 02:00:00 GMT</pubDate>
            <description><![CDATA[2013年2月の記録    日付 最高血圧 最低血圧 脈拍     2/ 1(金) 111 66 89   2/ 3(日) 121 71 93   2/ 5(火) 120 69 75   2/ 7(木) 127 83 86   2/ 9(土) 115 72 97   2/12(火) 120 77 77   2/14(木) 117 69 89   2/16(土) 測り 忘 れ   2/22(金) 117 76 83   2/24(日) 128 71 91    ※運動前に測定]]></description>
        </item>
        <item>
            <title><![CDATA[better than grepなackを試してみた]]></title>
            <link>https://masutaka.net/2013-03-24-2/</link>
            <guid>https://masutaka.net/2013-03-24-2/</guid>
            <pubDate>Sun, 24 Mar 2013 01:00:00 GMT</pubDate>
            <description><![CDATA[better than grepなツールack がタイムラインでちょっと話題になっていた
ので、試してみました。find+grepより速くて良いね。
OSXならbrewでインストールするとお手軽なんでしょう。
 % brew install ack
 デフォルトで再帰検索してくれます。.gitとか.svnディレクトリは勝手に
無視してくれるようです。
% ack hoge test/test-twittering-mode.el 405: (setcdr (assoc &#39;in-reply-to-screen-name status) &#34;hoge&#34;) 407: (test-assert-string-equal &#34; in reply to hoge&#34; 検索対象の拡張子は&quot;ack &ndash;help-types&quot;で確認出来ます。-kオプションを
付けると、すべてのファイルを対象にします。
% ack -k hoge ファイルやディレクトリも指定可能です。
# ファイル % ack hoge twittering-mode.el # ディレクトリ % ack hoge test test/test-twittering-mode.el 405: (setcdr (assoc &#39;in-reply-to-screen-name status) &#34;hoge&#34;) 407: (test-assert-string-equal &#34; in reply to hoge&#34; &ndash;nogroupオプションを付けるとgrep -nっぽい出力になります。
% ack --nogroup hoge test/test-twittering-mode.]]></description>
        </item>
        <item>
            <title><![CDATA[Railsのpreloader springを試してみた]]></title>
            <link>https://masutaka.net/2013-03-24-1/</link>
            <guid>https://masutaka.net/2013-03-24-1/</guid>
            <pubDate>Sun, 24 Mar 2013 00:00:00 GMT</pubDate>
            <description><![CDATA[Rails使いよspork, zeusからspringへ！｜Act as Professional - hiroki.jp ようやくspring を試しました。
まだzeus からは乗り換えられないかなー。開発は活発みたいなので、もう
少ししたらまた試します。以下、詳細。
テストを走らせたら、盛大にレッドになった。ちょっと調べたところ、
1と2要因がほとんど。他にもあったかも知れない。3も困るかなあ。
1. letではhogeは使えない。hoge_idを使う。 ※ この例ではLifeモデルはUserモデルのhas_oneです。
以下のように直す必要がありました。まあ、直せば良いんですけどね。
# 修正前 let(:taro) { FactoryGirl.create :taro_full_profile } let(:life_1) { FactoryGirl.build :life_1, user: taro } # 修正後 let(:taro) { FactoryGirl.create :taro_full_profile } let(:life_1) { FactoryGirl.build :life_1, user_id: taro.id } 2. スタブが使えない。 これが致命的でした。beforeとかでスタブを設定しても効きませんでした。
before { Life.any_instance.stub(:fun?).and_return false } 3. モデルにbinding.pryを追加したらspringを再起動する必要あり。 手動でbundle exec spring stopする必要がありました。]]></description>
        </item>
        <item>
            <title><![CDATA[ PingMag復刊らしいのでアーカイブから文字関係の記事を10本ほど]]></title>
            <link>https://shiromoji.hatenablog.jp/entry/20130318/1363622383</link>
            <guid>https://shiromoji.hatenablog.jp/entry/20130318/1363622383</guid>
            <pubDate>Sun, 17 Mar 2013 15:59:43 GMT</pubDate>
            <description><![CDATA[
<ul>
<li><a href="http://pingmag.jp/jp/2013/03/18/pingmag-is-back/">PingMag &#x5FA9;&#x520A;&#xFF01; | PingMag : &#x65E5;&#x672C;&#x767A;&#x3000;&#x30A2;&#x30FC;&#x30C8;&#x3001;&#x30C7;&#x30B6;&#x30A4;&#x30F3;&#x3001;&#x304F;&#x3089;&#x3057;</a></li>
</ul><p><a href="http://pingmag.jp/jp/2008/12/31/important-notice/">2008&#x5E74;&#x3044;&#x3063;&#x3071;&#x3044;&#x3067;&#x4F11;&#x520A;</a>となっていた <a href="http://pingmag.jp/jp/">PingMag</a> が復活したようです。</p><p>おぉ、なつかしーと思って過去記事をちょっと漁っていたんですが、せっかくなのでここに文字関係の記事を10本ピックアップしておきます。</p>

<ol>
<li><a href="http://pingmag.jp/jp/2006/03/03/handwritten-japanese-fonts/">&#x66F8;&#x304D;&#x6587;&#x5B57;</a></li>
<li><a href="http://pingmag.jp/jp/2006/03/24/akira-kobayashi-transcending-typographic-boundaries/">&#x5C0F;&#x6797; &#x7AE0;&#xFF1A;&#x30BF;&#x30A4;&#x30DD;&#x30B0;&#x30E9;&#x30D5;&#x30A3;&#x30FC;&#x306E;&#x5883;&#x754C;&#x3092;&#x8D85;&#x3048;&#x3066;</a></li>
<li><a href="http://pingmag.jp/jp/2006/06/30/shock-of-the-neue-graffiti-fonts-by-graffiti-writers/">&#x30B0;&#x30E9;&#x30D5;&#x30A3;&#x30C6;&#x30A3;&#x30FB;&#x30E9;&#x30A4;&#x30BF;&#x30FC;&#x306B;&#x3088;&#x308B;&#x30B0;&#x30E9;&#x30D5;&#x30A3;&#x30C6;&#x30A3;&#x30FB;&#x30D5;&#x30A9;&#x30F3;&#x30C8;</a></li>
<li><a href="http://pingmag.jp/jp/2006/07/03/dry-cleaning-typography/">&#x30AF;&#x30EA;&#x30FC;&#x30CB;&#x30F3;&#x30B0;&#x5C4B;&#x3055;&#x3093;&#x306E;&#x30BF;&#x30A4;&#x30DD;&#x30B0;&#x30E9;&#x30D5;&#x30A3;&#x30FC;</a></li>
<li><a href="http://pingmag.jp/jp/2006/09/27/handmade-balinese-typography/">&#x30D0;&#x30EA;&#x306E;&#x624B;&#x63CF;&#x304D;&#x30BF;&#x30A4;&#x30DD;&#x30B0;&#x30E9;&#x30D5;&#x30A3;&#x30FC;</a></li>
<li><a href="http://pingmag.jp/jp/2006/12/11/iranian-typography-now/">&#x30A4;&#x30E9;&#x30CB;&#x30A2;&#x30F3;&#x30FB;&#x30BF;&#x30A4;&#x30DD;&#x30B0;&#x30E9;&#x30D5;&#x30A3;&#x30FC;&#x306E;&#x4ECA;</a></li>
<li><a href="http://pingmag.jp/jp/2007/04/20/dainippon-type-organization/">&#x6587;&#x5B57;&#x306E;&#x9054;&#x4EBA;&#x3001;&#x5927;&#x65E5;&#x672C;&#x30BF;&#x30A4;&#x30DD;&#x7D44;&#x5408;</a></li>
<li><a href="http://pingmag.jp/jp/2007/08/30/gaffer-tape-guide/">&#x30AC;&#x30E0;&#x30C6;&#x30FC;&#x30D7;&#x306E;&#x9053;&#x6848;&#x5185;</a></li>
<li><a href="http://pingmag.jp/jp/2007/10/05/veb-typoart-the-east-german-type-betriebsstatte/">VEB&#x30BF;&#x30A4;&#x30DD;&#x30A2;&#x30FC;&#x30C8;&#xFF1A;&#x6771;&#x30C9;&#x30A4;&#x30C4;&#x306E;&#x6D3B;&#x5B57;&#x92F3;&#x9020;&#x6240;</a></li>
<li><a href="http://pingmag.jp/jp/2008/05/01/bunshi/">&#x4F1D;&#x7D71;&#x3092;&#x5207;&#x308A;&#x958B;&#x3044;&#x305F;&#x6587;&#x5FD7;&#x6D41;&#x6C5F;&#x6238;&#x6587;&#x5B57;</a></li>
</ol><p>昔の記事ということで画像が粗かったりするのは残念ですが、おもしろい記事がいろいろとあります。文字以外にも。おすすめ。</p>
]]></description>
            <enclosure url="https://cdn.blog.st-hatena.com/images/theme/og-image-1500.png" length="0" type="image/png"/>
        </item>
        <item>
            <title><![CDATA[「Windows 8 で変わる文字 - 異体字と Unicode IVS」雑感]]></title>
            <link>https://shiromoji.hatenablog.jp/entry/20130305/1362503905</link>
            <guid>https://shiromoji.hatenablog.jp/entry/20130305/1362503905</guid>
            <pubDate>Mon, 04 Mar 2013 17:18:25 GMT</pubDate>
            <description><![CDATA[<p><a class="keyword" href="http://d.hatena.ne.jp/keyword/Microsoft">Microsoft</a> の<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%BB%A5%DF">セミ</a>ナーに行ってきた。</p>

<ul>
<li><a href="http://www.microsoft.com/ja-jp/mic/seminar/interop_unicode.aspx">&#x6587;&#x5B57;&#x30B3;&#x30FC;&#x30C9;&#x3068;&#x7570;&#x4F53;&#x5B57;&#x3068; Unicode IVS &#x301C; &#x60C5;&#x5831;&#x30B7;&#x30B9;&#x30C6;&#x30E0;&#x306B;&#x304A;&#x3051;&#x308B;&#x65E5;&#x672C;&#x8A9E;&#x51E6;&#x7406; &#x301C; | &#x30B9;&#x30AD;&#x30EB;&#x30A2;&#x30C3;&#x30D7; &#x30AB;&#x30EA;&#x30AD;&#x30E5;&#x30E9;&#x30E0; - &#x30DE;&#x30A4;&#x30AF;&#x30ED;&#x30BD;&#x30D5;&#x30C8; &#x30A4;&#x30CE;&#x30D9;&#x30FC;&#x30B7;&#x30E7;&#x30F3; &#x30BB;&#x30F3;&#x30BF;&#x30FC;</a></li>
</ul><p>目新しい情報はあまりなかったが、イベントレポート書いて的な圧力を <a class="keyword" href="http://d.hatena.ne.jp/keyword/Twitter">Twitter</a> 上で受けてしまったので、ここに雑感を書いてお茶を濁したいと思う。</p><p>今回の内容は</p>

<ul>
<li>前半：これまでの<a class="keyword" href="http://d.hatena.ne.jp/keyword/%CA%B8%BB%FA%A5%B3%A1%BC%A5%C9">文字コード</a>・漢字施策の変遷に関する、ざっくりとした説明</li>
<li>後半：IVS自体と <a class="keyword" href="http://d.hatena.ne.jp/keyword/Windows">Windows</a> 上におけるIVS対応についての、ざっくりとした説明</li>
</ul><p>という感じだった。幅広い内容をたったの2時間で扱わなければならないので、どうしてもざっくりになってしまう。ある程度の基礎知識がある人であれば、「あーそうだったよね」と自分の頭の中を整理しつつ、まとめ・おさらい的な感覚で聞けると思うが、逆にまったくの初心者がこの2時間だけで理解するのは難しいと思う。<a class="keyword" href="http://d.hatena.ne.jp/keyword/%CA%B8%BB%FA%A5%B3%A1%BC%A5%C9">文字コード</a>マニヤ(笑)な人は「ここの説明が不十分」とか「これはこう説明した方が…」とかツッコみながら聞いていたのかもしれない。</p><p>個人的に興味があったのは、<a class="keyword" href="http://d.hatena.ne.jp/keyword/MS-DOS">MS-DOS</a>/<a class="keyword" href="http://d.hatena.ne.jp/keyword/Windows">Windows</a> はこれまでどのように対応してきたかという点。Shift JIS の誕生からIVS対応まで、今回の<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%BB%A5%DF">セミ</a>ナーでも各所で触れられていた。ただ、そのまわり（＋裏？）には語り尽くせないぐらいのいろいろなエピソードがあると思うので、そのへんを何かの機会にまとめて教えてくれたらおもしろいんだけどなー、と感じる。</p><p>Window 8 上の<a class="keyword" href="http://d.hatena.ne.jp/keyword/IME">IME</a>におけるIVS対応については、<a href="http://d.hatena.ne.jp/mashabow/20120302/1330712411">Consumer Preview &#x7248;&#x306E;&#x3068;&#x304D;</a>と同じくデフォルトではオフ（IVS入りの候補は出てこない）になっている。「頻繁に使用される名前、地名はIVSを含む単語として<a class="keyword" href="http://d.hatena.ne.jp/keyword/IME">IME</a>の辞書に搭載」<a href="#f-2904b3b2" name="fn-2904b3b2" title="配布資料 p. 40">*1</a>してあるとのことで、設定をオン<a href="#f-254c750f" name="fn-254c750f" title="「変換文字制限をしない」">*2</a>にして、例えば<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A1%D6%A4%AF%A4%BA%A1%D7">「くず」</a>を変換すると、</p>

<ul>
<li>葛 [U+845B]：<a class="keyword" href="http://d.hatena.ne.jp/keyword/Windows%20Vista">Windows Vista</a> 以降のフォントでは<a class="keyword" href="http://d.hatena.ne.jp/keyword/JIS2004">JIS2004</a>字形</li>
<li>葛&#xE0100; [U+845B U+E0100]：<a class="keyword" href="http://d.hatena.ne.jp/keyword/Adobe">Adobe</a>-Japan1 コレクション収録のJIS90字形</li>
</ul><p>の両方が候補に出てくる。完璧を期すのであれば、これに加えて<a class="keyword" href="http://d.hatena.ne.jp/keyword/JIS2004">JIS2004</a>字形を明示的に指定する</p>

<ul>
<li>葛&#xE0101; [U+845B U+E0101]：<a class="keyword" href="http://d.hatena.ne.jp/keyword/Adobe">Adobe</a>-Japan1 コレクション収録の<a class="keyword" href="http://d.hatena.ne.jp/keyword/JIS2004">JIS2004</a>字形</li>
</ul><p>も候補に出してほしいところだが、<a class="keyword" href="http://d.hatena.ne.jp/keyword/MS-IME">MS-IME</a>の辞書ではそうはなっていない。</p><p>ちなみに、「いばら」を変換すると</p>

<ul>
<li>茨 [U+8328]</li>
<li>茨&#xE0100 [U+8328 U+E0100]<a href="#f-76366657" name="fn-76366657" title="変換候補の「単漢字…」の中にある。">*3</a></li>
</ul><p>の両者が出てくるが、「いばらき」では</p>

<ul>
<li>茨城 [U+8328 U+57CE] </li>
</ul><p>だけであって、IVSを使ったJIS90字形の</p>

<ul>
<li>茨&#xE0100城 [U+8328 U+E0100 U+57CE] </li>
</ul><p>は出てこない。これについては、「<a class="keyword" href="http://d.hatena.ne.jp/keyword/%B0%F1%BE%EB%B8%A9">茨城県</a>などは<a class="keyword" href="http://d.hatena.ne.jp/keyword/JIS2004">JIS2004</a>字形を使っているので、JIS90字形は辞書に入れていない」という、わかるようなわからないような説明があった。</p><p>IVS/IVDのコレクションの違いについてほとんど触れられておらず、これはどうなんだろう…という感もある。ただ普通のアプリケーションにとってみれば、<a class="keyword" href="http://d.hatena.ne.jp/keyword/Adobe">Adobe</a>-Japan1 であれ Hanyo-Denshi であれ、どちらもIVSとしての扱い方に差はないので、ここらへんのややこしい話にあまり深入りする必要はないかもしれない。</p><p>なお、『<a class="keyword" href="http://d.hatena.ne.jp/keyword/Unicode">Unicode</a> IVS/IVD入門』という本が先日発売されたが、今日の講師の方は「届いたばかりでまだ詳しく読んでいない」とおっしゃっていた。</p>

<ul>
<li><a href="http://ec.nikkeibp.co.jp/item/books/P94830.html">&#x65E5;&#x7D4C;BP&#x66F8;&#x5E97;&#xFF5C;&#x5546;&#x54C1;&#x8A73;&#x7D30;&#x3000;-&#x3000;Unicode IVS/IVD&#x5165;&#x9580;</a></li>
</ul><p><div class="hatena-asin-detail"><a href="http://www.amazon.co.jp/exec/obidos/ASIN/4822294838/msb2-22/"><img src="https://images-fe.ssl-images-amazon.com/images/I/51ZrcRm4-xL._SL160_.jpg" class="hatena-asin-detail-image" alt="Unicode IVS/IVD入門" title="Unicode IVS/IVD入門"></a><div class="hatena-asin-detail-info"><p class="hatena-asin-detail-title"><a href="http://www.amazon.co.jp/exec/obidos/ASIN/4822294838/msb2-22/">Unicode IVS/IVD入門</a></p><ul><li><span class="hatena-asin-detail-label">作者:</span> 田丸健三郎,小林龍生</li><li><span class="hatena-asin-detail-label">出版社/メーカー:</span> <a class="keyword" href="http://d.hatena.ne.jp/keyword/%C6%FC%B7%D0BP">日経BP</a>社</li><li><span class="hatena-asin-detail-label">発売日:</span> 2013/02/28</li><li><span class="hatena-asin-detail-label">メディア:</span> 単行本</li><li><span class="hatena-asin-detail-label">購入</span>: 1人 <span class="hatena-asin-detail-label">クリック</span>: 20回</li><li><a href="http://d.hatena.ne.jp/asin/4822294838/msb2-22" target="_blank">この商品を含むブログ (6件) を見る</a></li></ul></div><div class="hatena-asin-detail-foot"></div></div></p><p><a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%BB%A5%DF">セミ</a>ナー後は、小形さんはじめ文字に詳しそうなみなさんと昼食をご一緒させていただいた。そこでのお話（IVSとは関係ない）も非常におもしろかったので、このあたりの内容、まとめて本なり何なりにならないかな…と思う。</p><p>そんな一日でした。レポートおわり。</p>
<div class="footnote">
<p class="footnote"><a href="#fn-2904b3b2" name="f-2904b3b2" class="footnote-number">*1</a><span class="footnote-delimiter">:</span><span class="footnote-text">配布資料 p. 40</span></p>
<p class="footnote"><a href="#fn-254c750f" name="f-254c750f" class="footnote-number">*2</a><span class="footnote-delimiter">:</span><span class="footnote-text">「変換文字制限をしない」</span></p>
<p class="footnote"><a href="#fn-76366657" name="f-76366657" class="footnote-number">*3</a><span class="footnote-delimiter">:</span><span class="footnote-text">変換候補の「単漢字…」の中にある。</span></p>
</div>]]></description>
            <enclosure url="http://ecx.images-amazon.com/images/I/51ZrcRm4-xL.jpg" length="0" type="image/jpg"/>
        </item>
        <item>
            <title><![CDATA[『虐殺器官』を読んだ]]></title>
            <link>https://masutaka.net/2013-02-26-1/</link>
            <guid>https://masutaka.net/2013-02-26-1/</guid>
            <pubDate>Tue, 26 Feb 2013 00:00:00 GMT</pubDate>
            <description><![CDATA[舞台はサラエボに核爆弾が落とされた後の近未来。
主人公は暗殺部隊の太尉。
登場するギミックはなかなか面白く、ところどころにゾクゾクする面白さ
があったけど、不思議と一気に読めてしまうとまでは行かなかった。言葉
が難しかったからかなあ。
Kindleじゃなかったら、途中で読むのを止めてしまったかも。。]]></description>
        </item>
        <item>
            <title><![CDATA[ドラクエ７がやってきた！]]></title>
            <link>https://masutaka.net/2013-02-16-1/</link>
            <guid>https://masutaka.net/2013-02-16-1/</guid>
            <pubDate>Sat, 16 Feb 2013 00:00:00 GMT</pubDate>
            <description><![CDATA[オンラインの１０を除いて唯一やってなかったので、発売のこのタイミングで買いました。ドラクエはゲームバランスが良いですね。中ボス戦が燃える！もうすぐダーマの神殿に着きます！
話によるとシリーズ屈指の長さだそうで、覚悟してやってますw でも3DS版はリメイクが良く評判が良いそう。PS版は石版集めが超だるかったけど、3DS版はドラゴン石版レーダーがある等。
Amazonだと1000円くらい安かったですよ。ダウンロード版もっと安くすれば買うのに。
 明石に行く時にゲーム機は全て手放しましたが、この度(中古だけど)買いました。専用機でゲームやるのは実に２年ぶり。
 付属のSDカードは2GBなので、サイズが大きいものに変えることをオススメします。
 ]]></description>
        </item>
        <item>
            <title><![CDATA[2013年1月は良いスタート。皇居ランニング含めて14回ジムに行った。 #クイックシェイプ]]></title>
            <link>https://masutaka.net/2013-02-02-1/</link>
            <guid>https://masutaka.net/2013-02-02-1/</guid>
            <pubDate>Sat, 02 Feb 2013 00:00:00 GMT</pubDate>
            <description><![CDATA[2013年1月の記録    日付 最高血圧 最低血圧 脈拍     1/ 5(土) 皇居 ラン ニング   1/ 6(日) 128 80 93   1/ 9(水) 116 68 79   1/10(木) 測り 忘 れ   1/12(土) 127 81 95   1/13(日) 119 73 90   1/15(火) 114 68 82   1/16(水) 119 72 80   1/19(土) 126 72 88   1/22(火) 121 72 79   1/23(水) 116 72 74   1/25(金) 116 67 80   1/27(日) 109 71 90   1/29(火) 120 75 76    ※運動前に測定]]></description>
        </item>
        <item>
            <title><![CDATA[お料理共有アプリ『miil(ミイル)』が楽しい]]></title>
            <link>https://masutaka.net/2013-01-27-2/</link>
            <guid>https://masutaka.net/2013-01-27-2/</guid>
            <pubDate>Sun, 27 Jan 2013 01:00:00 GMT</pubDate>
            <description><![CDATA[リリースされたのは確か1年半くらい前だったと思う。その時は「料理SNSっ
てちょっと苦しくないかなあ。Instagram 使ってるから、使うの止めとこ
う。」と思って使わなかった。
でもこの4ヶ月使ってみて、間違いだったことに気づきました。というか楽
しいw
楽しいmiil 写真撮ってアップロードするだけで「食べたい！」が結構簡単に付きます。
Twitter みたいに凝ったツイートをする必要もないし、Instagramみたいに
美しいものを撮る必要もない。ただただこれから食べるものを撮るだけ。
よく考えたらInstagramで撮ってたの料理ばかりだった。
あと、ユーザー層がTwitterやFacebook と全然違うんです。気がついたらタ
イムラインがほぼほぼ女性に。主婦の方がやっぱり多くて、大学生や高校
生も普通にいる。中学生もいたw
料理SNSという性格もそうだけど、TwitterのDirectMessageみたいなものが
ないのも理由かも。全部タイムラインに公開されるので危ない感じがしない。
(寝る前にタイムライン眺めるのは非常に危ないですけどねw)
おや？Twitterが？ それで思ったんですけど、SNSの多様性って確実に進んでますよね。という
かTwitterがSNSじゃなくて、ただのデータ置き場になった感じがする。
(そういう意味ではCrowsnest にはお世話になっています。[2012-12-24-1] )
フォロワーさんとのやり取りは以前より相当減ったような..。って思って
いたら、伊藤直也さんも同じことツイートしてた。
loading...
   if (localStorage.getItem("pref-theme") === "light") { const elements = document.getElementsByClassName('twitter-tweet'); for (let i = 0; i  SNSの使い分け そういうわけで、最近はなんとなく使い分けています。
Twitterはなんでも流し込んでいて内訳は、どうでもいいツイート、はてブ
したURL(主にプログラミングネタ)、miilの写真かな。
Facebookは直接投稿はまずしない。はてブもプログラミングネタは流さな
いようにしてる。というか今見たらmiilの写真だらけになっていたw
miilはプログラミング色は一切排除。カレー大好き人間がいるだけ ですw
まとめ そういうわけで、miil楽しいです。iPhoneとAndroid用のアプリがある ので、
試してみるといいんじゃないかな。ああ、豚組 行きたい。]]></description>
        </item>
        <item>
            <title><![CDATA[『モテキ』は神映画だった]]></title>
            <link>https://masutaka.net/2013-01-27-1/</link>
            <guid>https://masutaka.net/2013-01-27-1/</guid>
            <pubDate>Sun, 27 Jan 2013 00:00:00 GMT</pubDate>
            <description><![CDATA[うん、前半だけね&hellip;。
この手の映画は多分つまらないけど、実は面白いんじゃないか的逆張りを
してみたら、前半はまさにその通りで、でも中盤から「ん？」ってなって
きて、後半爆発した。前半のノリで突き進めば良かったんだけど、ガス欠
になったのかね。
主役の森山未來(今回初めて知った)のダンスがなかなか良かった。Amazon
のレビュー見ると長澤まさみの評価が高いんだけど、私にはさっぱり分か
らなかった。４人の女性の中では麻生久美子が良かった(百鬼丸の母役だっ
たんだ。[2012-09-30-1] まあ、ああいう女性は無理だけどねw)。真木よう
子はいつ絡んでくるかと待っていたんだけど、最後まで何もなかった。仲
里依紗に至っては単なる１エピソード扱い。うーん。
ほとんどの役者さんは今回初めて動いているのを見たので、それだけでも
収穫かな。リリー・フランキーってあんな人だったのね。]]></description>
        </item>
        <item>
            <title><![CDATA[昭和っぽいポットを買いました☆]]></title>
            <link>https://masutaka.net/2013-01-25-1/</link>
            <guid>https://masutaka.net/2013-01-25-1/</guid>
            <pubDate>Fri, 25 Jan 2013 00:00:00 GMT</pubDate>
            <description><![CDATA[緑茶が美味しい季節ですよね。最近、白形傳四郎商店で清沢 というお茶を
買ったんですが、うちにはやかんしかなかったので、あまり気軽に飲めま
せんでした。
そこで買ったのがこのポットです。
 いいでしょう〜 特にこのデザインw 昭和への郷愁を覚えます。小さい頃、
こんなデザインのポットが家にありましたよ。
決め手になったのはAmazonのこのレビュー 。金メダルごもっとも！
 昔懐かしさのあるポットですが、取っ手の形状が良く見るとセンスのいいデザイン、
片手で操作する重さとかお湯の出る口とかさすが象印ちゃんとゾウの鼻のような形状でデザインに金メダルを差し上げたい気持ちです。
 このポットは昔ながらのガラス魔法瓶です。うちみたいな独身者二人の家
だったら電気ポットは要らないと思うのですよね。ケトルも持ってたこと
がありますが、気がついたら冷めてることがあるのでイマイチです。シン
プルが一番ですね。]]></description>
        </item>
        <item>
            <title><![CDATA[最近作ったchalowプラグイン達]]></title>
            <link>https://masutaka.net/2013-01-14-2/</link>
            <guid>https://masutaka.net/2013-01-14-2/</guid>
            <pubDate>Mon, 14 Jan 2013 01:00:00 GMT</pubDate>
            <description><![CDATA[ちょいちょい必要になったので作りました。
Githubのリポジトリ 放置してるなあ。。
 順番に説明。
twitter
Twitterアカウントへのリンクを作るだけです。Twitter Anywhereは去年
の12/6をもって使えないことになったので、代わりを探してましたが、こ
の辺で妥協。
tweet
埋め込みツイートを挿入します。今まで公式の方法 で取得しHTMLをベタ
に書いてましたが、これだけで表示出来るようです。
speakerdeck_f
Speaker Deckのプレゼンを表示します。
miil
Miil の画像を表示します。画像は大きさを指定出来ますが、必ずそのサ
イズを取得出来るとは限らない そうです。
省略すると240x240になります。
Instagram
Instagram の画像を表示します。
サイズはt(thumbnail), m(medium), l(large)を指定出来ます。
省略するとmになります。
追記(2013-02-06):
Instagramを追加しました。]]></description>
        </item>
        <item>
            <title><![CDATA[Emacsでカーソル下の記事に対応するchalowのURLをブラウザで開く]]></title>
            <link>https://masutaka.net/2013-01-14-1/</link>
            <guid>https://masutaka.net/2013-01-14-1/</guid>
            <pubDate>Mon, 14 Jan 2013 00:00:00 GMT</pubDate>
            <description><![CDATA[結構便利。
 elisp久々に書いたら、だいぶ忘れてました。文字列ってシングルクオーテー
ションで括っちゃダメなんでしたっけ&hellip;？]]></description>
        </item>
        <item>
            <title><![CDATA[フォントファイルをFontForgeのアイコンにドラッグ&ドロップして開きたい]]></title>
            <link>https://shiromoji.hatenablog.jp/entry/20130112/1357990590</link>
            <guid>https://shiromoji.hatenablog.jp/entry/20130112/1357990590</guid>
            <pubDate>Sat, 12 Jan 2013 11:36:30 GMT</pubDate>
            <description><![CDATA[<p><a class="keyword" href="http://d.hatena.ne.jp/keyword/Ubuntu">Ubuntu</a> で <a class="keyword" href="http://d.hatena.ne.jp/keyword/FontForge">FontForge</a> をぼちぼち使うので、自分は Unity のランチャー<a href="#f-2526fd8e" name="fn-2526fd8e" title="画面左端にある、アプリケーションのショートカットアイコンが並んでいるあれ。">*1</a>に <a class="keyword" href="http://d.hatena.ne.jp/keyword/FontForge">FontForge</a> のショートカットも登録している。フォントファイルをここにドラッグ&ドロップすれば、<a class="keyword" href="http://d.hatena.ne.jp/keyword/FontForge">FontForge</a> でそのファイルを開くことができる……と便利なのだが、なぜか <a class="keyword" href="http://d.hatena.ne.jp/keyword/FontForge">FontForge</a> のショートカットはそうはなっておらず、知らんぷりして「フォントを開く」ダイアログが出てくるだけになっている。</p><p><span itemscope itemtype="http://schema.org/Photograph"><a href="http://f.hatena.ne.jp/mashabow/20130112194313" class="hatena-fotolife" itemprop="url"><img src="http://cdn-ak.f.st-hatena.com/images/fotolife/m/mashabow/20130112/20130112194313.png" alt="f:id:mashabow:20130112194313p:image" title="f:id:mashabow:20130112194313p:image" class="hatena-fotolife" itemprop="image"></a></span></p><p>最近たびたびこのドラッグ&ドロップをやってしまって残念な気持ちになっていたので、これに対処する。ショートカットアイコンの実体は /usr/share/applications/<a class="keyword" href="http://d.hatena.ne.jp/keyword/fontforge">fontforge</a>.desktop なので、これを ~/.local/share/applications/<a href="#f-468e6fee" name="fn-468e6fee" title="なければ作成する。">*2</a> にコピーしていじればいいらしい。</p>

<pre>$ cd ~/.local/share/applications/
$ cp /usr/share/applications/<a class="keyword" href="http://d.hatena.ne.jp/keyword/fontforge">fontforge</a>.desktop .
</pre><p>コピーした <a class="keyword" href="http://d.hatena.ne.jp/keyword/fontforge">fontforge</a>.desktop をエディタで開いてみると、11行目が</p>

<pre>Exec=<a class="keyword" href="http://d.hatena.ne.jp/keyword/fontforge">fontforge</a>
</pre><p>となっているので、末尾に %F（ドロップされた全ファイルのパスに展開される）をつけて</p>

<pre>Exec=<a class="keyword" href="http://d.hatena.ne.jp/keyword/fontforge">fontforge</a> <strong>%F</strong>
</pre><p>として保存。</p>

<pre>$ chmod +x <a class="keyword" href="http://d.hatena.ne.jp/keyword/fontforge">fontforge</a>.desktop
</pre><p>とすると、<a class="keyword" href="http://d.hatena.ne.jp/keyword/Nautilus">Nautilus</a> での表示が下のような <a class="keyword" href="http://d.hatena.ne.jp/keyword/FontForge">FontForge</a> のアイコンになる。</p><p><span itemscope itemtype="http://schema.org/Photograph"><a href="http://f.hatena.ne.jp/mashabow/20130112202229" class="hatena-fotolife" itemprop="url"><img src="http://cdn-ak.f.st-hatena.com/images/fotolife/m/mashabow/20130112/20130112202229.png" alt="f:id:mashabow:20130112202229p:image" title="f:id:mashabow:20130112202229p:image" class="hatena-fotolife" itemprop="image"></a></span></p><p>これをランチャーにドラッグ&ドロップして追加すれば完了<a href="#f-304fff98" name="fn-304fff98" title="もともと FontForge をランチャーに登録していた場合には、古い方のアイコンは右クリックして削除。">*3</a>。</p><p>新しくランチャーに登録したアイコンへフォントファイルをドラッグ&ドロップすれば、ちゃんと <a class="keyword" href="http://d.hatena.ne.jp/keyword/FontForge">FontForge</a> で開けるようになる。<a class="keyword" href="http://d.hatena.ne.jp/keyword/%CA%A3%BF%F4">複数</a>のファイルをまとめてドラッグ&ドロップしても、これまたちゃんとすべて開いてくれる。</p>
<div class="footnote">
<p class="footnote"><a href="#fn-2526fd8e" name="f-2526fd8e" class="footnote-number">*1</a><span class="footnote-delimiter">:</span><span class="footnote-text">画面左端にある、アプリケーションのショートカットアイコンが並んでいるあれ。</span></p>
<p class="footnote"><a href="#fn-468e6fee" name="f-468e6fee" class="footnote-number">*2</a><span class="footnote-delimiter">:</span><span class="footnote-text">なければ作成する。</span></p>
<p class="footnote"><a href="#fn-304fff98" name="f-304fff98" class="footnote-number">*3</a><span class="footnote-delimiter">:</span><span class="footnote-text">もともと <a class="keyword" href="http://d.hatena.ne.jp/keyword/FontForge">FontForge</a> をランチャーに登録していた場合には、古い方のアイコンは右クリックして削除。</span></p>
</div>]]></description>
            <enclosure url="http://cdn-ak.f.st-hatena.com/images/fotolife/m/mashabow/20130112/20130112194313.png" length="0" type="image/png"/>
        </item>
        <item>
            <title><![CDATA[『アジャイルサムライ』を読まないプログラマはもぐりだよね。私でした。]]></title>
            <link>https://masutaka.net/2013-01-10-1/</link>
            <guid>https://masutaka.net/2013-01-10-1/</guid>
            <pubDate>Thu, 10 Jan 2013 00:00:00 GMT</pubDate>
            <description><![CDATA[ 去年後半から、アジャイルコーチの指導の下、アジャイル開発を始めてい
ます。薄々気づいてはいましたが、それ以前はアジャイル風開発でしたorz
今までアジャイル本を何冊か読んだり、カンファレンスにも行ったことは
ありますが、ぶっちゃけよく分かりませんでした。(それでこの本も食わず
嫌いのまま、読まなかったわけですが。)
なんとなくこうなんじゃね？と、かんばん使ってみたり、Redmine導入した
り、Jenkins導入したり、TDDっぽいことやってみたり。
今思えばアジャイル風開発だったわけです。(それでも、やらなければもっ
とひどいことになっていたと思いますが。)
そういった状況で、この本を読んでみて思ったこと。
やっぱり本だけじゃ無理だわw
本自体はとっても読みやすいです。元が英語だったことを感じさせない翻
訳は特筆に値します。ボリュームも300ページ弱と、めちゃめちゃ多いわけ
ではありません。そのわりに「アジャイルマニフェストの背後にある12の
原則」をベースにしており、カッチリ作り込まれています(あとがきそのまま)。
ではありますが、(この本に限らず)本だけでアジャイル始めるのはかなり
大変だと思います。でも、これ読まないでアジャイル開発始めるのは無理
だと思います。アジャイルに少しでも興味あれば読むべきでしょう。
今はたまたま良い環境に恵まれて、本当に幸運です。まあでも、実際やっ
てみるとアジャイル開発はめちゃめちゃ大変ですねえ。8時間もやるとクタ
クタです。腹も減るし。
みなさまの苦労が偲ばれる電子書籍です。現在￥480とお買い得になってお
ります。
 サムライ・エピソード【電子書籍】 26人のサムライ達
達人出版会
発行日: 2012-09-14
対応フォーマット: EPUB, PDF
 詳細を見る   ]]></description>
        </item>
        <item>
            <title><![CDATA[飲みすぎたり食べすぎたりサボった日もあったりしたけど、2012年12月はなんとか12回ジムに行けた #クイックシェイプ]]></title>
            <link>https://masutaka.net/2012-12-31-1/</link>
            <guid>https://masutaka.net/2012-12-31-1/</guid>
            <pubDate>Mon, 31 Dec 2012 00:00:00 GMT</pubDate>
            <description><![CDATA[2012年12月の記録    日付 最高血圧 最低血圧 脈拍     12/ 1(土) 103 67 89   12/ 4(火) 124 68 78   12/ 6(木) 119 72 76   12/ 9(日) 122 71 75   12/11(火) 112 72 83   12/18(火) 114 72 80   12/20(木) 120 77 88   12/22(土) 126 77 95   12/23(日) 140 87 109   12/25(火) 122 81 84   12/28(金) 125 73 97   12/29(土) 121 72 91    ※運動前に測定]]></description>
        </item>
        <item>
            <title><![CDATA[超速！『FuelPHP Advent Calender 2012』が電子書籍化されました！ #FuelPHP]]></title>
            <link>https://blog.tmd45.jp/entry/2012/12/26/152345</link>
            <guid>https://blog.tmd45.jp/entry/2012/12/26/152345</guid>
            <pubDate>Wed, 26 Dec 2012 06:23:45 GMT</pubDate>
            <description><![CDATA[<p><a href="https://blog.tmd45.jp/entry/2012/12/18/101053">前回の記事</a>で参加させていただいた『<a href="http://atnd.org/events/33753">FuelPHP Advent Calender 2012</a>』が昨日、12月25日に無事完走しました！参加されたみなさまお疲れさまでした。</p>
<p>そんな昨日の今日というすごいスピードで、達人出版会から電子書籍化までしていただきました！</p>
<div class="amazlet-box" style="margin-bottom: 0px;">
<div class="amazlet-image" style="float: left; margin: 0px 12px 1px 0px;"><a href="http://tatsu-zine.com/books/fuelphpadvent2012" name="amazletlink" target="_blank"><img src="https://cdn-ak.f.st-hatena.com/images/fotolife/t/tmd45/20191212/20191212124744.jpg" alt="FuelPHP Advent Calendar 2012" style="border: none;" /></a></div>
<div class="amazlet-info" style="line-height: 120%; margin-bottom: 10px;">
<div class="amazlet-name" style="margin-bottom: 10px; line-height: 120%;"><a href="http://tatsu-zine.com/books/fuelphpadvent2012" name="amazletlink" target="_blank">FuelPHP Advent Calendar 2012【電子書籍】</a></div>
<div class="amazlet-detail">FuelPHP Advent Calendar 2012参加有志<br />達人出版会<br />発行日: 2012-12-26<br />対応フォーマット: EPUB, PDF</div>
<div class="amazlet-sub-info" style="float: left;">
<div class="amazlet-link" style="margin-top: 5px;"><a href="http://tatsu-zine.com/books/fuelphpadvent2012" name="amazletlink" target="_blank">詳細を見る</a></div>
</div>
</div>
<div class="amazlet-footer" style="clear: left;"> </div>
</div>
<p>取りまとめをされていた @<a class="twitter-user-screen-name" href="http://twitter.com/kenji_s">kenji_s</a> さん、達人出版会の高橋さん、本当に有難うございました！</p>
<p>この書籍は、ブログの記事を Markdown 化、Markdown からツールで ReVIEW（電子書籍のためのマークアップの１つ<a href="#f1" name="fn1" title="参考：『書籍制作フローを変える。「ReVIEW」という解。〜マークアップと自動組版と、時々、電子書籍〜』 http://kmuto.jp/events/page2012/page2012.pdf">*1</a>）化して、GitHub 上で原稿を取りまとめて作業するという方法で作成されました。各執筆者は GitHub 上で pull request を利用して原稿の修正が可能です。私も記事の一部に修正があったのでその方法で反映していただいています。<br /> 興味があるかたは、GitHub 上の原稿リポジトリを眺めてみても面白いかもです。</p>
<ul>
<li><a href="https://github.com/kenjis/fuelphp-advent-calendar-2012">kenjis/fuelphp-advent-calendar-2012 · GitHub</a></li>
</ul>
<p><br /> 主題の FuelPHP の記事も、いい感じの Tips がたくさん詰まっていて使い手あります。去年よりも、実際に動かして云々系の記事が多い気がします。無料です。DL して損はないです！</p>
<p>ちなみに去年の『FuelPHP Advent Calendar 2011』は技術評論社から電子書籍化されています。こちらは EPUB のみですがやっぱり無料です。</p>
<ul>
<li><a href="https://gihyo.jp/dp/sp/advent2011/G11C13">FuelPHP Advent Calendar 2011 | Gihyo Digital Publishing</a></li>
</ul>
<p><br /> まだまだ継続してる Advent Calendar もあるようですが（笑）クリスマスも過ぎてもうすぐ年の瀬です。みなさまお風邪など召されませんように、良いお年をお過ごしください！</p>
<p> </p>
<p>('ω`)ノ</p>
<div class="section">
<h4>関連記事</h4>
<ul>
<li><a href="http://d.hatena.ne.jp/Kenji_s/20121226/fuelphp_advent_2012_ebook">電子書籍『FuelPHP Advent Calendar 2012』が達人出版会より出版されました！ - A Day in Serenity @ kenjis</a></li>
<li><a href="http://ounziw.com/2012/12/26/fuelphp-advent-calendar-2012/">FuelPHP Advent Calendar 2012 が出版されました</a></li>
<li><a href="http://h2o-space.com/news/262/">『FuelPHP Advent Calendar 2012』が無料電子書籍になりました | H2O Space.</a></li>
</ul>
</div>
<div class="footnote">
<p class="footnote"><a href="#fn1" name="f1" class="footnote-number">*1</a><span class="footnote-delimiter">:</span><span class="footnote-text">参考：『書籍制作フローを変える。「ReVIEW」という解。〜マークアップと自動組版と、時々、電子書籍〜』 <a href="http://kmuto.jp/events/page2012/page2012.pdf">http://kmuto.jp/events/page2012/page2012.pdf</a></span></p>
</div>]]></description>
            <enclosure url="https://cdn-ak.f.st-hatena.com/images/fotolife/t/tmd45/20191212/20191212124744.jpg" length="0" type="image/jpg"/>
        </item>
        <item>
            <title><![CDATA[Googleリーダーの未読が多くて困っている人はCrowsnestも使うと良いかも]]></title>
            <link>https://masutaka.net/2012-12-24-1/</link>
            <guid>https://masutaka.net/2012-12-24-1/</guid>
            <pubDate>Mon, 24 Dec 2012 00:00:00 GMT</pubDate>
            <description><![CDATA[情報収集系の話題が熱いですね！Crowsnestもそうですが、SmartNews とか
Gunosy とかvingow とか。
まあでもピンポイントで購読したいブログやウェブサイトは、RSSリーダー
がテッパンです。
若者が知らない最強の情報収集方法「RSSリーダー」 誰よりも詳しく！特定ジャンルの情報を効率的に得るたった1つの方法 狙い撃ち！！特定キーワードで最新情報をかき集めて完全把握する方法 私も以前からGoogleリーダーを使っていますが、250件くらいRSSを登録し
ていると毎日全部読むのはかなり大変です。
特にはてブのお気に入り が大変で、数は多いわ同じ記事は何度も出て来る
わで(livedoor Reader だとそんなことないそう)、たくさん未読があると憂
鬱になります。マイホットエントリーには期待してたんですが、そのまま
使うと未読管理出来ないし、かといってRSSに登録すると影響範囲が分から
りません。うーん、残念。
そんな時に見たのがこの記事。
iPhone 5での情報収集でCrowsnestを使うとかなり便利で快適になってきた件 - もとまか日記 CrowsnestはGoogleリーダーのフォルダ(＝タグ)を登録出来たんですね。
おかげさまで情報収集にかける時間を1/3くらいに圧縮できました。
どうやって使ってる？ 私はGoogleリーダーで購読している記事には以下の3つのタグを必ず付けて
います。名前の先頭に_(アンダーバー)を付けているのは、他のタグより上
に表示したいからです。この辺は[2011-01-16-1] の「iPhone情報整理術」
を参考にしてます。
_mustread
必ず読むサイトを登録しています。未読が出来たら何も考えずに別タブで
開きます。そこまでしなくても良いかな〜と思ったら、次に説明する_scanタ
グに変更します。
_scan
Googleリーダー上でざっと見て、面白そうだったら別タブで開きます。新
しくRSSを登録したら、だいたいこのタグを付けます。これも必要性が少な
くなれば、次の_skipタグに変更します。
_skip
優先順位が一番低かったり、更新頻度が高すぎるサイトはこのタグを付け
ます。それさえも必要ないと思ったら、Googleリーダーへの登録を解除し
ます。
Crowsnestに登録するのは_skipフォルダだけです。他の2つは今までどおり
Google Readerで読みます。初めは全部Crowsnestで読んでたんですが、な
んとなく今の形に落ち着きました。
Googleリーダーは大量の記事をざっくり読むのは得意ではないので、そこ
をCrowsnestにお任せするのは良いアイディアなのかもしれませんね。
今は_skipフォルダに気兼ねなく大量配信系のRSSを登録したり、はてブで
フォローする人を増やせるようになりました。
Crowsnestの良いところ、気になったところ ざっくり箇条書き。Crowsnest良いですよ！使ってて楽しいです。
良いところ
 何度も同じ記事を見なくて良い。☆☆☆ 影響度がすぐ分かる。☆☆ キーボードショートカット(?で表示)が便利。よく使うのはj,k,s,a,l,o 未読管理出来る。☆☆ タブ内はさくさく動く。 iPhoneでも読める。  気になったところ
 未読数が表示されない。 タブを開くのが遅い時がある。 履歴とタイムラインの位置が固定。 iPhoneでの動作がもっさり。ブラウザの他のタブから戻ってくると再読]]></description>
        </item>
        <item>
            <title><![CDATA[さくらのレンタルサーバで FuelPHP を使ってはてなハイクブログを作る－ViewModel を使ってみる編 #FuelPHPAdvent2012]]></title>
            <link>https://blog.tmd45.jp/entry/2012/12/18/101053</link>
            <guid>https://blog.tmd45.jp/entry/2012/12/18/101053</guid>
            <pubDate>Tue, 18 Dec 2012 01:10:53 GMT</pubDate>
            <description><![CDATA[<p>この記事は <a href="http://atnd.org/events/33753">FuelPHP Advent Calendar 2012</a> の 18 日目の記事です。昨日は @<a class="twitter-user-screen-name" href="http://twitter.com/ootatter">ootatter</a> さんによる『<a href="http://blog.milds.net/2012/12/fuelphpdb.html">fuelphp&#x3067;&#x65E2;&#x5B58;DB&#x3092;&#x3042;&#x3064;&#x304B;&#x3046;&#x3068;&#x304B;</a>』でした。</p><p>本日の担当は、毎年クリスマスには仕事で問題が起こりクルシミマス恒例になりつつあります、@<a class="twitter-user-screen-name" href="http://twitter.com/tmd45">tmd45</a> です。</p><p>FuelPHP 標準のサーバキャッシュと「<a href="http://developer.hatena.ne.jp/ja/documents/haiku/apis/rest">&#x306F;&#x3066;&#x306A;&#x30CF;&#x30A4;&#x30AF;API</a>」、ViewModel を利用したブログのようなものを作ってみましたので、その全貌を公開したいと思います。</p>

<ul>
<li>さくらのレンタルサーバーで FuelPHP を動かす</li>
<li>ViewModel を含めて MVC をひととおり使ってみる</li>
<li>はてなの API を使ってみる</li>
</ul><p>などを行っています。</p><p>長いですが、マイナーな組み合わせすぎて需要が無いことをひそかに期待してます（笑）。<br />
なお、使う人がいらっしゃるか分かりませんが記事中のソースコードは MIT ライセンスです。</p><p>では、よろしくお願いします。</p>

    <blockquote>
        <p>【修正履歴】<br />
・本記事について、即座に脆弱性とまでは（おそらく）なりえないまでも、セキュリティ的に好ましくない点が在ることをご指摘いただきましたので一部内容を修正しました。記事内容のご利用の際にはご留意ください。（2012-12-25）</p>

    </blockquote>



<div class="section">
    <h3>1. さくらのレンタルサーバで FuelPHP を準備する</h3>
    <p>利用しているのは<em>スタンダードプラン</em>です。なおスタンダードより下のライトプランだと SFTP や SCP が使えなくてちょっと不便なので、動的なサイトを作りたい場合はスタンダードプラン以上で契約されるのがオススメです。さらに言えば、レンサバより VPS や Cloud なんちゃら系のホスティングサービスを使ったほうが利便性は良いです。</p><p>さくらのレンサバを使った理由は「そこに放置中のレンサバがあったから」以外のなにものでもないのであしからず。</p>

<div class="section">
    <h4>PHP のバージョンを確認する</h4>
    <p>お使いのレンサバで動く PHP のバージョンを確認します。FuelPHP を動作させるために PHP 5.3 以上を利用しましょう。必要であれば下記の画面で設定を変更してください。</p><p><span itemscope itemtype="http://schema.org/Photograph"><img src="https://cdn-ak.f.st-hatena.com/images/fotolife/t/tmd45/20121212/20121212110543.png" alt="f:id:tmd45:20121212110543p:plain" title="f:id:tmd45:20121212110543p:plain" class="hatena-fotolife" itemprop="image"></span></p>

</div>
<div class="section">
    <h4>php.ini の編集</h4>
    <p>さくらのレンサバはコントロールパネルから php.ini の編集が可能です。<br />
FuelPHP を正常に動作させるには <code>cgi.fix_pathinfo = 1</code> の記述が必要です。リクエスト URL の取得に、cgi 版 PHP ではこの設定を行って <code>$_SERVER["ORIG_PATH_INFO"]</code> の利用を有効にする必要があるためです。</p><p><span itemscope itemtype="http://schema.org/Photograph"><img src="https://cdn-ak.f.st-hatena.com/images/fotolife/t/tmd45/20121212/20121212113953.png" alt="f:id:tmd45:20121212113953p:plain" title="f:id:tmd45:20121212113953p:plain" class="hatena-fotolife" itemprop="image"></span></p><p>と、説明しておきますが、FuelPHP Core 内で <code>$_SERVER["ORIG_PATH_INFO"]</code> を利用しているのは私が見た限りでは <a href="https://github.com/fuel/core/blob/1.4/master/classes/input.php#L128">Input &#x30AF;&#x30E9;&#x30B9;&#x3060;&#x3051;&#x307F;&#x305F;&#x3044;</a>です。とりあえずこの設定はやっておきましょう。</p><p>以下の記事を参考にさせていただきました。</p>

<ul>
<li><a href="http://d.hatena.ne.jp/good-speed/20121002/1349148273">&#x3055;&#x304F;&#x3089;&#x30EC;&#x30F3;&#x30BF;&#x30EB;&#x30B5;&#x30FC;&#x30D0;&#x30FC;&#x306B;FuelPHP&#x3092;&#x30A4;&#x30F3;&#x30B9;&#x30C8;&#x30FC;&#x30EB; - 2hours</a></li>
<li><a href="http://d.hatena.ne.jp/localdisk/20090524/1243149438">PHP&#x30D5;&#x30EC;&#x30FC;&#x30E0;&#x30EF;&#x30FC;&#x30AF;&#x306F;&#x3069;&#x306E;&#x3088;&#x3046;&#x306B;&#x30EA;&#x30AF;&#x30A8;&#x30B9;&#x30C8;&#x3055;&#x308C;&#x305F;URL&#x3092;&#x53D6;&#x5F97;&#x3057;&#x3066;&#x3044;&#x308B;&#x304B;? - localdisk</a></li>
</ul>
</div>
<div class="section">
    <h4>FuelPHP を用意する</h4>
    <p><a href="http://fuelphp.com/">FuelPHP &#x516C;&#x5F0F;&#x30B5;&#x30A4;&#x30C8;</a>から最新版（執筆時点でv1.4）の FuelPHP アーカイブ（zip）をダウンロードします。アーカイブを展開して、ドキュメントルート内の構成を以下のようにしました。</p>

<pre>アーカイブ内（変更前）のディレクトリ構成
/fuelphp-1.4
  |-- /docs
  |-- /fuel
  |-- /public
  |  |-- /assets
  |  |-- .htaccess
  |  `-- index.php
  |-- oil
  |-- README.md
  `-- ...
</pre><p>ドキュメントや README、使わない oil などを削除します。また、public ディレクトリの中身をレンサバのドキュメントルートに合わせるため、www/hhblog フォルダを作ってそこへ移動します。</p>

<pre>変更後のディレクトリ構成
/hhblog
  |-- /fuel
  `-- /www
     `-- / hhblog
        |-- /assets
        |-- .htaccess
        `-- index.php
</pre><p>ディレクトリ構成を変更したので、index.php に記述されているパスも修正します。diff だとわかりにくいですが、<code>/../fuel</code> から始まるパスが <code>/../../fuel</code> になります。</p>
<pre class="code lang-diff" data-lang="diff" data-unlink>$ diff fuelphp-1.4/public/index.php hhblog/www/hhblog/index.php
<span class="synStatement">16c16</span>
<span class="synSpecial">&lt; define('APPPATH', realpath(__DIR__.'/../fuel/app/').DIRECTORY_SEPARATOR);</span>
<span class="synSpecial">---</span>
<span class="synIdentifier">&gt; define('APPPATH', realpath(__DIR__.'/../../fuel/app/').DIRECTORY_SEPARATOR);</span>
<span class="synStatement">21c21</span>
<span class="synSpecial">&lt; define('PKGPATH', realpath(__DIR__.'/../fuel/packages/').DIRECTORY_SEPARATOR);</span>
<span class="synSpecial">---</span>
<span class="synIdentifier">&gt; define('PKGPATH', realpath(__DIR__.'/../../fuel/packages/').DIRECTORY_SEPARATOR);</span>
<span class="synStatement">26c26</span>
<span class="synSpecial">&lt; define('COREPATH', realpath(__DIR__.'/../fuel/core/').DIRECTORY_SEPARATOR);</span>
<span class="synSpecial">---</span>
<span class="synIdentifier">&gt; define('COREPATH', realpath(__DIR__.'/../../fuel/core/').DIRECTORY_SEPARATOR);</span>
</pre><p><br />
Web API を使用する際にはタイムスタンプなどが重要になってくる場合もあるので、タイムゾーンの設定もしておきました。役に立っているのかはいまいち分かりませんが･･･</p>
<pre class="code lang-php" data-lang="php" data-unlink>ファイル：~/hhblog/fuel/app/config/config.php
<span class="synSpecial">&lt;?php</span>
<span class="synComment">/* 中略 */</span>

<span class="synStatement">return</span> <span class="synType">array</span><span class="synSpecial">(</span>
  '<span class="synConstant">default_timezone</span>' <span class="synStatement">=&gt;</span> '<span class="synConstant">Asia/Tokyo</span>'    <span class="synComment">// タイムゾーンを設定</span>
<span class="synSpecial">)</span>;
</pre><p><br />
またセキュリティの観点から、Web から見えてしまう FuelPHP のエラー表示は OFF にしておくほうが良いです（参考：<a href="http://d.hatena.ne.jp/Kenji_s/20111224/1324731427">FuelPHP &#x3067;&#x306E;&#x30BB;&#x30AD;&#x30E5;&#x30EA;&#x30C6;&#x30A3;&#x5BFE;&#x7B56;(3) - A Day in Serenity @ kenjis</a>）。自分の場合は開発環境と公開環境を一緒くたにするという危険極まりない遊びをしていたのでエラーは出しっぱなしです･･･(;^_^)</p>
<pre class="code lang-php" data-lang="php" data-unlink>ファイル：~/hhblog/www/hhblog/index.php
<span class="synSpecial">&lt;?php</span>
<span class="synComment">/**</span>
<span class="synComment"> * Set error reporting and display errors settings.  You will want to change these when in production.</span>
<span class="synComment"> */</span>
<span class="synIdentifier">error_reporting</span><span class="synSpecial">(</span><span class="synConstant">-1</span><span class="synSpecial">)</span>;
<span class="synIdentifier">ini_set</span><span class="synSpecial">(</span>'<span class="synConstant">display_errors</span>', <span class="synConstant">1</span><span class="synSpecial">)</span>;    <span class="synComment">// この引数を 0 にする。</span>
</pre><p><br />
レンタルサーバへの配置ですが、今回はレンサバのアカウントホーム <code>/home/{user-id}</code> 直下に fuel ディレクトリを、レンサバのドキュメントルート <code>/home/{account-id}/www</code> 直下に www ディレクトリの中身（hhblog ディレクトリ）を配置します。公開ディレクトリは <code>/home/{user-id}/www/hhblog</code> です。アクセス時の URL は <code><span data-unlink>http://{user-id}.sakura.ne.jp/hhblog/</span></code> になります。</p><p>この配置であれば、.htaccess ファイルを修正する必要はありません。アーカイブに在ったものをそのまま使用すれば Mod_Rewrite が仕事してくれます。</p><p>私は動作環境を本番（production）にするため、以下の部分だけ変更（コメント化を解除）しました。</p>
<pre class="code lang-diff" data-lang="diff" data-unlink>$ diff fuelphp-1.4/public/.htaccess hhblog/.htaccess
<span class="synStatement">2c2</span>
<span class="synSpecial">&lt; # SetEnv FUEL_ENV production</span>
<span class="synSpecial">---</span>
<span class="synIdentifier">&gt; SetEnv FUEL_ENV production</span>
</pre>
</div>
<div class="section">
    <h4>FuelPHP を放り込む</h4>
    <p>準備したFuelPHP 一式を、SFTP でも SCP でも好きな方法で、レンタルサーバに放り込みましょう。fuel ディレクトリは <code>/home/{user-id}</code> へ、www/hhblog ディレクトリは <code>/home/{user-id}/www/hhblog</code> となるように配置します。</p><p>手動インストール（oil を使わないで配置する）を行ったので、ディレクトリのパーミッションの変更も自分で行います（参考：<a href="http://fuelphp.com/docs/installation/instructions.html">Instruction - Installation - FuelPHP Documentation</a>）。</p><p>以下の４つのディレクトリのパーミッションを 755（rwxr-xr-x）にします。「所有者」に書込み（w）権限があればよいので、700（rwx------）のほうが安心です<a href="#f1" name="fn1" title="自分の環境では、他のディレクトリのレベルと合わせて 755 にしました。">*1</a>。FTP/SCP ツールで変更しても良いですし、さくらのコントロールパネルからファイルマネージャーを使用して変更することも可能です（ディレクトリを 右クリック → プロパティ で属性の変更が可能）。</p>

<pre>以下の４つのディレクトリを書込み可にする
/home/{account-id}
  |-- /fuel
  |  |-- /app
  |  |  |-- /cache
  |  |  |-- /config
  |  |  |-- /logs
  |  |  |-- /tmp
  ...
</pre><p>これでインストールは完了です。<code><span data-unlink>http://{user-id}.sakura.ne.jp/hhblog/</span></code> にアクセスすれば、おなじみの Welcome ページが表示されます。おめでとうありがとう。</p><p><span itemscope itemtype="http://schema.org/Photograph"><img src="https://cdn-ak.f.st-hatena.com/images/fotolife/t/tmd45/20121214/20121214170600.png" alt="f:id:tmd45:20121214170600p:plain" title="f:id:tmd45:20121214170600p:plain" class="hatena-fotolife" itemprop="image"></span></p><p>やることが多く見えますが、結構単純です。さくらのレンタルサーバでも FuelPHP は（とりあえず）簡単に動作します。</p><p></p>

</div>
</div>
<div class="section">
    <h3>2. はてなハイク API の利用</h3>
    <p>フレームワークの準備が出来ましたので、ここから実装に入ります。コードはとくに省略せずに貼り付けてますので、長いです。</p>

    <blockquote>
        <p>補足：<br />
本来は開発環境で作って、テストして、完成したものを公開環境へアップロードしますよね（苦笑）<br />
今回ちょっと不便な場所で開発を行っていたため、公開環境で動作確認などを行っていました･･･<br />
この辺りはツッコミ無用でございます／(^o^)＼</p><p>また、筆者は Java 屋なので、PHP 的におかしな書き方をしているところがあったらごめんなさい。<br />
そちらはツッコミいただけたら嬉しいです＼(^o^)／</p>

    </blockquote>
<p>はてなハイクの API を利用して記事を取得する処理を Model に作成します。<br />
ちなみに今回利用した API では、認証を必要としません。なので認証部分の実装も考えません。</p><p>API は以下の２種類を使うことにしました。詳しくは API のドキュメントをご確認ください。</p>

<ol>
<li><a href="http://developer.hatena.ne.jp/ja/documents/haiku/apis/rest/timelines#public_timeline">&#x306F;&#x3066;&#x306A;&#x30CF;&#x30A4;&#x30AF;&#x306E;&#x30C8;&#x30C3;&#x30D7;&#x30DA;&#x30FC;&#x30B8;&#xFF08;&#x30D1;&#x30D6;&#x30EA;&#x30C3;&#x30AF;&#x30FB;&#x30BF;&#x30A4;&#x30E0;&#x30E9;&#x30A4;&#x30F3;&#xFF09;</a>
<ul>
<li>引数はとくに無く、はてなハイクのトップページに表示されるタイムラインを取得します。</li>
</ul></li>
<li><a href="http://developer.hatena.ne.jp/ja/documents/haiku/apis/rest/timelines#keyword_timeline">&#x30AD;&#x30FC;&#x30EF;&#x30FC;&#x30C9;&#x306E;&#x30A8;&#x30F3;&#x30C8;&#x30EA;&#x30FC;&#x30DA;&#x30FC;&#x30B8;&#xFF08;&#x30AD;&#x30FC;&#x30EF;&#x30FC;&#x30C9;&#x30FB;&#x30BF;&#x30A4;&#x30E0;&#x30E9;&#x30A4;&#x30F3;&#xFF09;</a>
<ul>
<li>引数にキーワードを指定（必須）し、そのキーワードのタイムラインを取得します。</li>
</ul></li>
</ol><p><br />
以下が実装です。<b>ちなみにテストはありません（!!?）。</b>また、一部の引数は API に合わせて定義しているだけで、利用していないです（汗）</p>
<pre class="code lang-php" data-lang="php" data-unlink>ファイル：~/hhblog/fuel/app/classes/model/api/hatena/haiku.php
<span class="synSpecial">&lt;?php</span>

<span class="synType">class</span> Model_Api_Hatena_Haiku <span class="synType">extends</span> Model
<span class="synSpecial">{</span>

	<span class="synComment">/**</span>
<span class="synComment">	 * Using statuses/public_timeline (Japanese Domain).</span>
<span class="synComment">	 * </span>
<span class="synComment">	 * AUTHORIZATION : no</span>
<span class="synComment">	 * HTTP METHOD   : GET</span>
<span class="synComment">	 * </span>
<span class="synComment">	 * @link http://developer.hatena.ne.jp/ja/documents/haiku/apis/rest/timelines#public_timeline</span>
<span class="synComment">	 * </span>
<span class="synComment">	 * @param string  $body_formats reaponse text format, see default value</span>
<span class="synComment">	 * @param integer $count        getting entries number, API default 20 max 200</span>
<span class="synComment">	 * @param integer $page         getting page number, API default 1 max 100</span>
<span class="synComment">	 * @param string  $since        no getting older than rfc1123-date(&quot;Mon, 26 Nov 2012 15:53:43 GMT&quot;)</span>
<span class="synComment">	 * </span>
<span class="synComment">	 * @return string JSON</span>
<span class="synComment">	 */</span>
	<span class="synType">public</span> <span class="synType">static</span> <span class="synPreProc">function</span> getPublicTimeLine<span class="synSpecial">(</span>
		<span class="synStatement">$</span><span class="synIdentifier">body_formats</span> <span class="synStatement">=</span> &quot;<span class="synConstant">api,haiku,html,html_mobile,html_touch</span>&quot;
		, <span class="synStatement">$</span><span class="synIdentifier">count</span>        <span class="synStatement">=</span> &quot;<span class="synConstant">20</span>&quot;
		, <span class="synStatement">$</span><span class="synIdentifier">page</span>         <span class="synStatement">=</span> &quot;<span class="synConstant">1</span>&quot;
		, <span class="synStatement">$</span><span class="synIdentifier">since</span>        <span class="synStatement">=</span> &quot;<span class="synConstant">Mon, 26 Nov 2012 15:53:43 GMT</span>&quot;
	<span class="synSpecial">)</span> <span class="synSpecial">{</span>

		<span class="synComment">// リクエストURL</span>
		<span class="synStatement">$</span><span class="synIdentifier">url</span> <span class="synStatement">=</span> &quot;<span class="synConstant">http://h.hatena.ne.jp/api/statuses/public_timeline.json</span>&quot;;

		<span class="synComment">// Option（UTF-8で符号化必要）</span>
		<span class="synStatement">$</span><span class="synIdentifier">body_formats</span> <span class="synStatement">=</span> <span class="synIdentifier">urlencode</span><span class="synSpecial">(</span><span class="synStatement">$</span><span class="synIdentifier">body_formats</span><span class="synSpecial">)</span>;

		<span class="synComment">// URL 組み立て</span>
		<span class="synStatement">$</span><span class="synIdentifier">filename</span> <span class="synStatement">=</span> <span class="synStatement">$</span><span class="synIdentifier">url</span> <span class="synStatement">.</span> '<span class="synConstant">?body_formats=</span>' <span class="synStatement">.</span> <span class="synStatement">$</span><span class="synIdentifier">body_formats</span>;

		<span class="synComment">// file_getコンテキストのオプション</span>
		<span class="synStatement">$</span><span class="synIdentifier">opts</span> <span class="synStatement">=</span> <span class="synType">array</span><span class="synSpecial">(</span>
			'<span class="synConstant">http</span>' <span class="synStatement">=&gt;</span> <span class="synType">array</span><span class="synSpecial">(</span>
				'<span class="synConstant">method</span>' <span class="synStatement">=&gt;</span> &quot;<span class="synConstant">GET</span>&quot;,
				'<span class="synConstant">header</span>' <span class="synStatement">=&gt;</span> &quot;<span class="synConstant">Host: hoge.sakura.ne.jp</span><span class="synSpecial">\r\n</span>&quot; <span class="synStatement">.</span>
							&quot;<span class="synConstant">Accept-language: ja</span><span class="synSpecial">\r\n</span>&quot; <span class="synStatement">.</span>
							&quot;<span class="synConstant">User-Agent: </span>&quot; <span class="synStatement">.</span> Input<span class="synStatement">::</span>user_agent<span class="synSpecial">()</span> <span class="synStatement">.</span> &quot;<span class="synSpecial">\r\n</span>&quot;
			<span class="synSpecial">)</span>
		<span class="synSpecial">)</span>;
		<span class="synStatement">$</span><span class="synIdentifier">context</span> <span class="synStatement">=</span> <span class="synIdentifier">stream_context_create</span><span class="synSpecial">(</span><span class="synStatement">$</span><span class="synIdentifier">opts</span><span class="synSpecial">)</span>;

		<span class="synComment">// API の結果を json で取得</span>
		<span class="synStatement">$</span><span class="synIdentifier">json</span> <span class="synStatement">=</span> <span class="synIdentifier">file_get_contents</span><span class="synSpecial">(</span><span class="synStatement">$</span><span class="synIdentifier">filename</span>, <span class="synConstant">false</span>, <span class="synStatement">$</span><span class="synIdentifier">context</span><span class="synSpecial">)</span>;

		<span class="synComment">// 取得した json 文字列をそのまま返却</span>
		<span class="synStatement">if</span><span class="synSpecial">(</span><span class="synStatement">$</span><span class="synIdentifier">json</span> <span class="synStatement">!=</span> <span class="synConstant">false</span><span class="synSpecial">)</span>
		<span class="synSpecial">{</span>
			<span class="synStatement">return</span> <span class="synStatement">$</span><span class="synIdentifier">json</span>;
		<span class="synSpecial">}</span>
		<span class="synComment">// 取得失敗したら空文字を返却</span>
		<span class="synStatement">else</span>
		<span class="synSpecial">{</span>
			<span class="synStatement">return</span> '';
		<span class="synSpecial">}</span>

	<span class="synSpecial">}</span>

	<span class="synComment">/**</span>
<span class="synComment">	 * Using statuses/keyword_timeline.</span>
<span class="synComment">	 * </span>
<span class="synComment">	 * AUTHORIZATION : no</span>
<span class="synComment">	 * HTTP METHOD   : GET</span>
<span class="synComment">	 * </span>
<span class="synComment">	 * @link http://developer.hatena.ne.jp/ja/documents/haiku/apis/rest/timelines#keyword_timeline</span>
<span class="synComment">	 *</span>
<span class="synComment">	 * @param string  $keyword      seatch keyword [required]</span>
<span class="synComment">	 * @param string  $body_formats reaponse text format, see default value</span>
<span class="synComment">	 * @param integer $count        getting entries number, API default 20 max 200</span>
<span class="synComment">	 * @param integer $page         getting page number, API default 1 max 100</span>
<span class="synComment">	 * @param string  $sort         getting entries sort, API default &quot;new&quot; is newer, &quot;hot&quot; is populer</span>
<span class="synComment">	 * @param string  $since        no getting older than rfc1123-date(&quot;Mon, 26 Nov 2012 15:53:43 GMT&quot;)</span>
<span class="synComment">	 * </span>
<span class="synComment">	 * @return string JSON</span>
<span class="synComment">	 */</span>
	<span class="synType">public</span> <span class="synType">static</span> <span class="synPreProc">function</span> getKeywordTimeLine<span class="synSpecial">(</span>
		<span class="synStatement">$</span><span class="synIdentifier">keyword</span>
		, <span class="synStatement">$</span><span class="synIdentifier">body_formats</span> <span class="synStatement">=</span> &quot;<span class="synConstant">api,haiku,html,html_mobile,html_touch</span>&quot;
		, <span class="synStatement">$</span><span class="synIdentifier">count</span>        <span class="synStatement">=</span> &quot;<span class="synConstant">20</span>&quot;
		, <span class="synStatement">$</span><span class="synIdentifier">page</span>         <span class="synStatement">=</span> &quot;<span class="synConstant">1</span>&quot;
		, <span class="synStatement">$</span><span class="synIdentifier">sort</span>         <span class="synStatement">=</span> &quot;<span class="synConstant">new</span>&quot;
		, <span class="synStatement">$</span><span class="synIdentifier">since</span>        <span class="synStatement">=</span> &quot;<span class="synConstant">Mon, 26 Nov 2012 15:53:43 GMT</span>&quot;
	<span class="synSpecial">)</span> <span class="synSpecial">{</span>

		<span class="synComment">// リクエストURL</span>
		<span class="synStatement">$</span><span class="synIdentifier">url</span> <span class="synStatement">=</span> &quot;<span class="synConstant">http://h.hatena.ne.jp/api/statuses/keyword_timeline.json</span>&quot;;

		<span class="synComment">// Option（UTF-8で符号化必要）</span>
		<span class="synStatement">$</span><span class="synIdentifier">word</span>         <span class="synStatement">=</span> <span class="synIdentifier">urlencode</span><span class="synSpecial">(</span><span class="synStatement">$</span><span class="synIdentifier">keyword</span><span class="synSpecial">)</span>;
		<span class="synStatement">$</span><span class="synIdentifier">body_formats</span> <span class="synStatement">=</span> <span class="synIdentifier">urlencode</span><span class="synSpecial">(</span><span class="synStatement">$</span><span class="synIdentifier">body_formats</span><span class="synSpecial">)</span>;

		<span class="synComment">// URL 組み立て</span>
		<span class="synStatement">$</span><span class="synIdentifier">filename</span> <span class="synStatement">=</span> <span class="synStatement">$</span><span class="synIdentifier">url</span> <span class="synStatement">.</span> '<span class="synConstant">?word=</span>' <span class="synStatement">.</span> <span class="synStatement">$</span><span class="synIdentifier">word</span> <span class="synStatement">.</span> '<span class="synConstant">&amp;body_formats=</span>' <span class="synStatement">.</span> <span class="synStatement">$</span><span class="synIdentifier">body_formats</span>;

		<span class="synComment">// file_getコンテキストのオプション</span>
		<span class="synStatement">$</span><span class="synIdentifier">opts</span> <span class="synStatement">=</span> <span class="synType">array</span><span class="synSpecial">(</span>
			'<span class="synConstant">http</span>' <span class="synStatement">=&gt;</span> <span class="synType">array</span><span class="synSpecial">(</span>
				'<span class="synConstant">method</span>' <span class="synStatement">=&gt;</span> &quot;<span class="synConstant">GET</span>&quot;,
				'<span class="synConstant">header</span>' <span class="synStatement">=&gt;</span> &quot;<span class="synConstant">Host: hoge.sakura.ne.jp</span><span class="synSpecial">\r\n</span>&quot; <span class="synStatement">.</span>
							&quot;<span class="synConstant">Accept-language: ja</span><span class="synSpecial">\r\n</span>&quot; <span class="synStatement">.</span>
							&quot;<span class="synConstant">User-Agent: </span>&quot; <span class="synStatement">.</span> Input<span class="synStatement">::</span>user_agent<span class="synSpecial">()</span> <span class="synStatement">.</span> &quot;<span class="synSpecial">\r\n</span>&quot;
			<span class="synSpecial">)</span>
		<span class="synSpecial">)</span>;
		<span class="synStatement">$</span><span class="synIdentifier">context</span> <span class="synStatement">=</span> <span class="synIdentifier">stream_context_create</span><span class="synSpecial">(</span><span class="synStatement">$</span><span class="synIdentifier">opts</span><span class="synSpecial">)</span>;

		<span class="synComment">// API の結果を json で取得</span>
		<span class="synStatement">$</span><span class="synIdentifier">json</span> <span class="synStatement">=</span> <span class="synIdentifier">file_get_contents</span><span class="synSpecial">(</span><span class="synStatement">$</span><span class="synIdentifier">filename</span>, <span class="synConstant">false</span>, <span class="synStatement">$</span><span class="synIdentifier">context</span><span class="synSpecial">)</span>;

		<span class="synComment">// 取得した json 文字列をそのまま返却</span>
		<span class="synStatement">if</span><span class="synSpecial">(</span><span class="synStatement">$</span><span class="synIdentifier">json</span> <span class="synStatement">!=</span> <span class="synConstant">false</span><span class="synSpecial">)</span>
		<span class="synSpecial">{</span>
			<span class="synStatement">return</span> <span class="synStatement">$</span><span class="synIdentifier">json</span>;
		<span class="synSpecial">}</span>
		<span class="synComment">// 取得失敗したら空文字を返却</span>
		<span class="synStatement">else</span>
		<span class="synSpecial">{</span>
			<span class="synStatement">return</span> '';
		<span class="synSpecial">}</span>

	<span class="synSpecial">}</span>

<span class="synSpecial">}</span>

<span class="synComment">/* End of file haiku.php */</span>
<span class="synComment">/* Location: app/classes/model/api/hatena/haiku.php */</span>
</pre><p>file_getコンテキストのオプションに指定する Host 名は、ご自分の環境にあわせて修正してください。</p>

    <blockquote>
        <p>重要（2012-12-25）：<br />
以降の処理では、この Model クラスで取得した外部からの入力データを検証せずにそのままブラウザに表示させています。はてなハイク API の応答結果には html を含めることが可能です。セキュリティ上好ましくありませんので画面出力前にデータのフィルタリングを行うようにしましょう。今回は説明の都合上、検証処理については割愛します。</p>

    </blockquote>

</div>
<div class="section">
    <h3>3. ViewModel を使ってブログ（表示部分のみ）を作る</h3>
    <p>ここからやっとブログ（っぽく）表示する実装を行っていきます。</p><p>View は贅沢（？）に Template を使ってみます。</p><p><span itemscope itemtype="http://schema.org/Photograph"><img src="https://cdn-ak.f.st-hatena.com/images/fotolife/t/tmd45/20121214/20121214175736.png" alt="f:id:tmd45:20121214175736p:plain" title="f:id:tmd45:20121214175736p:plain" class="hatena-fotolife" itemprop="image"></span></p><p>さきに書いてしまいますが、最終的なディレクトリ構成は以下のようになりました。</p>

<pre>実装のディレクトリ構成
/home/{user-id}
    |-- /fuel
    |    |-- /app
    |    |    |-- /classes
    |    |    |    |-- /controller
    |    |    |    |    `-- hhblog.php
    |    |    |    |-- /model
    |    |    |    |    `-- ･･･
    |    |    |    `-- /view
    |    |    |         `-- /hhblog
    |    |    |              `-- /article
    |    |    |                   |-- keyword.php    (1)'
    |    |    |                   `-- public.php     (2)'
    |    |    |-- /views
    |    |    |    |-- /hhblog
    |    |    |    |    |-- /article
    |    |    |    |    |    |-- keyword.php    (1)
    |    |    |    |    |    `-- public.php     (2)
    |    |    |    |    `-- template.php
    ･･･
</pre><p>うーん、機能名失敗したな･･･（hhblog の hhblog コントローラ･･･orz）。</p>

<div class="section">
    <h4>View と Controller</h4>
    <p>では、どんどんコードを晒していきます。<br />
まずはコントローラー。</p>
<pre class="code lang-php" data-lang="php" data-unlink>ファイル：~/hhblog/fuel/app/classes/controller/hhblog.php
<span class="synSpecial">&lt;?php</span>

<span class="synComment">/**</span>
<span class="synComment"> * Hatena-Haiku Blog Controller.</span>
<span class="synComment"> * </span>
<span class="synComment"> * hhblog's root controller.</span>
<span class="synComment"> * </span>
<span class="synComment"> * @package app</span>
<span class="synComment"> * @extends Controller</span>
<span class="synComment"> */</span>
<span class="synType">class</span> Controller_Hhblog <span class="synType">extends</span> Controller_Template
<span class="synSpecial">{</span>

	<span class="synType">public</span> <span class="synStatement">$</span><span class="synIdentifier">template</span> <span class="synStatement">=</span> '<span class="synConstant">hhblog/template</span>';
	
	<span class="synComment">/**</span>
<span class="synComment">	 * Get Hatena-Haiku Public Timeline in ViewModel</span>
<span class="synComment">	 * and show blog style page.</span>
<span class="synComment">	 */</span>
	<span class="synType">public</span> <span class="synPreProc">function</span> action_public_timeline<span class="synSpecial">()</span>
	<span class="synSpecial">{</span>
		<span class="synStatement">$</span><span class="synIdentifier">this</span><span class="synType">-&gt;</span>template<span class="synType">-&gt;</span>set<span class="synSpecial">(</span>'<span class="synConstant">title</span>',       '<span class="synConstant">Hatena-Haiku Public Timeline</span>'<span class="synSpecial">)</span>;
		<span class="synStatement">$</span><span class="synIdentifier">this</span><span class="synType">-&gt;</span>template<span class="synType">-&gt;</span>set<span class="synSpecial">(</span>'<span class="synConstant">description</span>', '<span class="synConstant">はてなハイク Public Timeline を取得してブログっぽく表示させます。</span>'<span class="synSpecial">)</span>;
		<span class="synStatement">$</span><span class="synIdentifier">this</span><span class="synType">-&gt;</span>template<span class="synType">-&gt;</span>set<span class="synSpecial">(</span>'<span class="synConstant">active_api</span>',  <span class="synConstant">1</span><span class="synSpecial">)</span>;
		
		<span class="synComment">// 本文部分に ViewModel を利用</span>
		<span class="synStatement">$</span><span class="synIdentifier">this</span><span class="synType">-&gt;</span>template<span class="synType">-&gt;</span>article <span class="synStatement">=</span> ViewModel<span class="synStatement">::</span>forge<span class="synSpecial">(</span>'<span class="synConstant">hhblog/article/public</span>'<span class="synSpecial">)</span>;
		
	<span class="synSpecial">}</span>
	
	<span class="synComment">/**</span>
<span class="synComment">	 * Get Hatena-Haiku Keyword Timeline in ViewModel</span>
<span class="synComment">	 * and show blog style page.</span>
<span class="synComment">	 * Now 'keyword' is Hatena user id 'id:hoge' style.</span>
<span class="synComment">	 */</span>
	<span class="synType">public</span> <span class="synPreProc">function</span> action_keyword_timeline<span class="synSpecial">()</span>
	<span class="synSpecial">{</span>
		<span class="synStatement">$</span><span class="synIdentifier">keyword</span> <span class="synStatement">=</span> '<span class="synConstant">id:tmd45</span>';
		
		<span class="synStatement">$</span><span class="synIdentifier">this</span><span class="synType">-&gt;</span>template<span class="synType">-&gt;</span>set<span class="synSpecial">(</span>'<span class="synConstant">title</span>',       '<span class="synConstant">Hatena-Haiku Keyword Timeline</span>'<span class="synSpecial">)</span>;
		<span class="synStatement">$</span><span class="synIdentifier">this</span><span class="synType">-&gt;</span>template<span class="synType">-&gt;</span>set<span class="synSpecial">(</span>'<span class="synConstant">description</span>', '<span class="synConstant">はてなハイク Keyword Timeline からキーワード「</span>' <span class="synStatement">.</span> <span class="synStatement">$</span><span class="synIdentifier">keyword</span> <span class="synStatement">.</span> '<span class="synConstant">」の結果を取得してブログっぽく表示させます。</span>'<span class="synSpecial">)</span>;
		<span class="synStatement">$</span><span class="synIdentifier">this</span><span class="synType">-&gt;</span>template<span class="synType">-&gt;</span>set<span class="synSpecial">(</span>'<span class="synConstant">keyword</span>', <span class="synStatement">$</span><span class="synIdentifier">keyword</span><span class="synSpecial">)</span>;
		<span class="synStatement">$</span><span class="synIdentifier">this</span><span class="synType">-&gt;</span>template<span class="synType">-&gt;</span>set<span class="synSpecial">(</span>'<span class="synConstant">active_api</span>',  <span class="synConstant">2</span><span class="synSpecial">)</span>;
		
		<span class="synComment">// 本文部分に ViewModel を利用</span>
		<span class="synStatement">$</span><span class="synIdentifier">this</span><span class="synType">-&gt;</span>template<span class="synType">-&gt;</span>article <span class="synStatement">=</span> ViewModel<span class="synStatement">::</span>forge<span class="synSpecial">(</span>'<span class="synConstant">hhblog/article/keyword</span>'<span class="synSpecial">)</span>;
		<span class="synStatement">$</span><span class="synIdentifier">this</span><span class="synType">-&gt;</span>template<span class="synType">-&gt;</span>article<span class="synType">-&gt;</span>set<span class="synSpecial">(</span>'<span class="synConstant">keyword</span>', <span class="synStatement">$</span><span class="synIdentifier">keyword</span><span class="synSpecial">)</span>;
		
	<span class="synSpecial">}</span>
<span class="synSpecial">}</span>

<span class="synComment">/* End of file hhblog.php */</span>
<span class="synComment">/* Location: app/classes/controller/hhblog.php */</span>
</pre><p>キーワード・タイムラインで指定するキーワードは、コントローラーに直書きしています。</p>

<ul>
<li><code>$keyword = 'id:tmd45';</code></li>
</ul><p>この文字列を変更すれば好きなキーワードを指定することができます。</p><p>指定したキーワードはビューモデルでも利用したいので、以下のように値を渡しています。</p>

<ul>
<li><code>$this->template->article->set('keyword', $keyword);</code></li>
</ul><p><br />
そして View 側のコードですが、全部載せると大変なので Gist に置いておきます。</p>

<ul>
<li><a href="https://gist.github.com/4283992#file-template-php">template.php on Gist</a></li>
<li><a href="https://gist.github.com/4283992#file-public-php">public.php on Gist</a></li>
<li><a href="https://gist.github.com/4283992#file-keyword-php">keyword.php on Gist</a></li>
</ul><p>テンプレートのソースコード（template.php）の中で、コントローラーで ViewModel を forge した <code>$article</code> 変数を利用して記事を埋め込みます。</p>
<pre class="code lang-php" data-lang="php" data-unlink>ファイル：~/hhblog/fuel/app/views/hhblog/template.php の一部
<span class="synComment">&lt;!-- CONTENT --&gt;</span>
<span class="synIdentifier">&lt;</span><span class="synStatement">div</span><span class="synIdentifier"> </span><span class="synType">class</span><span class="synIdentifier">=</span><span class="synConstant">&quot;span9&quot;</span><span class="synIdentifier">&gt;</span>
			
<span class="synSpecial">&lt;?php</span> <span class="synPreProc">echo</span> <span class="synStatement">$</span><span class="synIdentifier">article</span>; <span class="synSpecial">?&gt;</span>
			
<span class="synIdentifier">&lt;/</span><span class="synStatement">div</span><span class="synIdentifier">&gt;</span><span class="synComment">&lt;!-- /span9 --&gt;</span>
<span class="synComment">&lt;!-- /CONTENT --&gt;</span>
</pre><p>記事側のソースコード（public.php, keyword.php）では、API で取得した記事の配列を繰り返し表示させています。これがテンプレートの <code>$article</code> 部分に展開されます。</p>
<pre class="code lang-php" data-lang="php" data-unlink>ファイル：~/hhblog/fuel/app/views/hhblog/article/public.php の一部
<span class="synSpecial">&lt;?php</span>
	<span class="synStatement">foreach</span> <span class="synSpecial">(</span><span class="synStatement">$</span><span class="synIdentifier">articles</span> <span class="synStatement">as</span> <span class="synStatement">$</span><span class="synIdentifier">a</span><span class="synSpecial">)</span>
	<span class="synSpecial">{</span>
<span class="synSpecial">?&gt;</span>
		<span class="synIdentifier">&lt;</span>section<span class="synIdentifier"> </span><span class="synType">class</span><span class="synIdentifier">=</span><span class="synConstant">&quot;hhblog-section&quot;</span><span class="synIdentifier">&gt;</span>
			<span class="synIdentifier">&lt;</span><span class="synStatement">div</span><span class="synIdentifier"> </span><span class="synType">class</span><span class="synIdentifier">=</span><span class="synConstant">&quot;page-main&quot;</span><span class="synIdentifier">&gt;</span>
				<span class="synIdentifier">&lt;</span><span class="synStatement">p</span><span class="synIdentifier">&gt;</span><span class="synSpecial">&lt;?php</span> <span class="synPreProc">echo</span> <span class="synStatement">$</span><span class="synIdentifier">a</span><span class="synSpecial">[</span>&quot;<span class="synConstant">html</span>&quot;<span class="synSpecial">]</span>; <span class="synSpecial">?&gt;</span><span class="synIdentifier">&lt;/</span><span class="synStatement">p</span><span class="synIdentifier">&gt;</span>
			<span class="synIdentifier">&lt;/</span><span class="synStatement">div</span><span class="synIdentifier">&gt;</span>
		<span class="synIdentifier">&lt;/</span>section<span class="synIdentifier">&gt;</span>
<span class="synSpecial">&lt;?php</span>
	<span class="synSpecial">}</span> <span class="synComment">/* end foreach($articles) */</span>
	<span class="synStatement">unset</span><span class="synSpecial">(</span><span class="synStatement">$</span><span class="synIdentifier">articles</span><span class="synSpecial">)</span>;
<span class="synSpecial">?&gt;</span>
</pre><p>これらをサイトのトップページに表示させるために、ルーティングの設定も修正します。<br />
サイトのトップにアクセスすると、キーワード・タイムラインが表示されます(1)。また <code><span data-unlink>http://{user-id}.sakura.ne.jp/hhblog/public_timeline</span></code> にアクセスするとパブリック・タイムラインが、<code><span data-unlink>http://{user-id}.sakura.ne.jp/hhblog/keyword_timeline</span></code> にアクセスするとキーワード・タイムラインが表示されるようにしました(2)。</p>
<pre class="code lang-php" data-lang="php" data-unlink>ファイル：~/hhblog/fuel/app/config/routes.php
<span class="synSpecial">&lt;?php</span>
<span class="synStatement">return</span> <span class="synType">array</span><span class="synSpecial">(</span>
<span class="synComment">//	'_root_'  =&gt; 'welcome/index',              // コメント化</span>
	'<span class="synConstant">_root_</span>'  <span class="synStatement">=&gt;</span> '<span class="synConstant">hhblog/keyword_timeline</span>',    <span class="synComment">// 追加(1)</span>
	'<span class="synConstant">_404_</span>'   <span class="synStatement">=&gt;</span> '<span class="synConstant">welcome/404</span>',
	
	'<span class="synConstant">(:segment)</span>' <span class="synStatement">=&gt;</span> '<span class="synConstant">hhblog/$1</span>',               <span class="synComment">// 追加(2)</span>
	
	'<span class="synConstant">hello(/:name)?</span>' <span class="synStatement">=&gt;</span> <span class="synType">array</span><span class="synSpecial">(</span>'<span class="synConstant">welcome/hello</span>', '<span class="synConstant">name</span>' <span class="synStatement">=&gt;</span> '<span class="synConstant">hello</span>'<span class="synSpecial">)</span>,
<span class="synSpecial">)</span>;
</pre>
</div>
<div class="section">
    <h4>ViewModel！ViewModel！！</h4>
    <p>では、最後にお待ちかねのビューモデルです。</p><p>まずはパブリック・タイムライン用のビューモデル。API 制限を考慮して、新しいデータは 30 分に 1 回だけ取得するようにして、それ以外はキャッシュからデータを取得します。API の実行は Model を呼び出すだけです。</p>
<pre class="code lang-php" data-lang="php" data-unlink>ファイル：~/hhblog/fuel/app/classes/view/hhblog/article/public.php
<span class="synSpecial">&lt;?php</span>

<span class="synComment">/**</span>
<span class="synComment"> * Hatena-Haiku Blog Public Timeline ViewModel.</span>
<span class="synComment"> * </span>
<span class="synComment"> * @package app</span>
<span class="synComment"> * @extends ViewModel</span>
<span class="synComment"> */</span>
<span class="synType">class</span> View_Hhblog_Article_Public <span class="synType">extends</span> ViewModel
<span class="synSpecial">{</span>

	<span class="synComment">/**</span>
<span class="synComment">	 * Get Hatena-Haiku Public Timeline.</span>
<span class="synComment">	 * </span>
<span class="synComment">	 * Data cache to make Access-control, </span>
<span class="synComment">	 * and get data from cache in a time.</span>
<span class="synComment">	 */</span>
	<span class="synType">public</span> <span class="synPreProc">function</span> view<span class="synSpecial">()</span>
	<span class="synSpecial">{</span>
		<span class="synStatement">$</span><span class="synIdentifier">cache_id</span> <span class="synStatement">=</span> '<span class="synConstant">hhblog_public_timeline_json</span>';
		
		<span class="synStatement">try</span>
		<span class="synSpecial">{</span>
			<span class="synComment">// キャッシュにあればキャッシュから取得</span>
			<span class="synStatement">$</span><span class="synIdentifier">json</span> <span class="synStatement">=</span> Cache<span class="synStatement">::</span>get<span class="synSpecial">(</span><span class="synStatement">$</span><span class="synIdentifier">cache_id</span><span class="synSpecial">)</span>;
		<span class="synSpecial">}</span>
		<span class="synStatement">catch</span> <span class="synSpecial">(</span>\CacheNotFoundException <span class="synStatement">$</span><span class="synIdentifier">e</span><span class="synSpecial">)</span>
		<span class="synSpecial">{</span>
			<span class="synComment">// タイムライン取得(json)</span>
			<span class="synStatement">$</span><span class="synIdentifier">json</span> <span class="synStatement">=</span> Model_Api_Hatena_Haiku<span class="synStatement">::</span>getPublicTimeline<span class="synSpecial">()</span>;
			
			<span class="synComment">// キャッシュに保存（0.5時間）</span>
			Cache<span class="synStatement">::</span>set<span class="synSpecial">(</span><span class="synStatement">$</span><span class="synIdentifier">cache_id</span>, <span class="synStatement">$</span><span class="synIdentifier">json</span>, <span class="synConstant">3600</span> <span class="synStatement">*</span> <span class="synConstant">0.5</span><span class="synSpecial">)</span>;
		<span class="synSpecial">}</span>
		
		<span class="synComment">// jsonデータの配列化</span>
		<span class="synStatement">$</span><span class="synIdentifier">articles</span> <span class="synStatement">=</span> Format<span class="synStatement">::</span>forge<span class="synSpecial">(</span><span class="synStatement">$</span><span class="synIdentifier">json</span>, '<span class="synConstant">json</span>'<span class="synSpecial">)</span><span class="synType">-&gt;</span>to_array<span class="synSpecial">()</span>;
		
		<span class="synComment">// Viewにセット</span>
		<span class="synStatement">$</span><span class="synIdentifier">this</span><span class="synType">-&gt;</span>set<span class="synSpecial">(</span>'<span class="synConstant">articles</span>', <span class="synStatement">$</span><span class="synIdentifier">articles</span>, <span class="synConstant">false</span><span class="synSpecial">)</span>;

	<span class="synSpecial">}</span>
<span class="synSpecial">}</span>

<span class="synComment">/* End of file public.php */</span>
<span class="synComment">/* Location: app/classes/view/hhblog/article/public.php */</span>
</pre><p>次にキーワード・タイムライン用のビューモデルです。パブリック・タイムラインと同じです。Model の実行時に引数にキーワードを渡しています。</p>
<pre class="code lang-php" data-lang="php" data-unlink>ファイル：~/hhblog/fuel/app/classes/view/hhblog/article/keyword.php
<span class="synSpecial">&lt;?php</span>

<span class="synComment">/**</span>
<span class="synComment"> * Hatena-Haiku Blog Keyword Timeline ViewModel.</span>
<span class="synComment"> * </span>
<span class="synComment"> * @package app</span>
<span class="synComment"> * @extends ViewModel</span>
<span class="synComment"> */</span>
<span class="synType">class</span> View_Hhblog_Article_Keyword <span class="synType">extends</span> ViewModel
<span class="synSpecial">{</span>

	<span class="synComment">/**</span>
<span class="synComment">	 * Get Hatena-Haiku keyword timeline.</span>
<span class="synComment">	 * </span>
<span class="synComment">	 * Data cache to make Access-control, </span>
<span class="synComment">	 * and get data from cache in a time.</span>
<span class="synComment">	 */</span>
	<span class="synType">public</span> <span class="synPreProc">function</span> view<span class="synSpecial">()</span>
	<span class="synSpecial">{</span>
		<span class="synStatement">$</span><span class="synIdentifier">cache_id</span> <span class="synStatement">=</span> '<span class="synConstant">hhblog_keyword_timeline_json</span>';
		
		<span class="synStatement">try</span>
		<span class="synSpecial">{</span>
			<span class="synComment">// キャッシュにあればキャッシュから取得</span>
			<span class="synStatement">$</span><span class="synIdentifier">json</span> <span class="synStatement">=</span> Cache<span class="synStatement">::</span>get<span class="synSpecial">(</span><span class="synStatement">$</span><span class="synIdentifier">cache_id</span><span class="synSpecial">)</span>;
		<span class="synSpecial">}</span>
		<span class="synStatement">catch</span> <span class="synSpecial">(</span>\CacheNotFoundException <span class="synStatement">$</span><span class="synIdentifier">e</span><span class="synSpecial">)</span>
		<span class="synSpecial">{</span>
			<span class="synComment">// タイムライン取得(json)</span>
			<span class="synStatement">$</span><span class="synIdentifier">json</span> <span class="synStatement">=</span> Model_Api_Hatena_Haiku<span class="synStatement">::</span>getKeywordTimeline<span class="synSpecial">(</span><span class="synStatement">$</span><span class="synIdentifier">this</span><span class="synType">-&gt;</span>keyword<span class="synSpecial">)</span>;
			
			<span class="synComment">// キャッシュに保存（0.5時間）</span>
			Cache<span class="synStatement">::</span>set<span class="synSpecial">(</span><span class="synStatement">$</span><span class="synIdentifier">cache_id</span>, <span class="synStatement">$</span><span class="synIdentifier">json</span>, <span class="synConstant">3600</span> <span class="synStatement">*</span> <span class="synConstant">0.5</span><span class="synSpecial">)</span>;
		<span class="synSpecial">}</span>
		
		<span class="synComment">// jsonデータの配列化</span>
		<span class="synStatement">$</span><span class="synIdentifier">articles</span> <span class="synStatement">=</span> Format<span class="synStatement">::</span>forge<span class="synSpecial">(</span><span class="synStatement">$</span><span class="synIdentifier">json</span>, '<span class="synConstant">json</span>'<span class="synSpecial">)</span><span class="synType">-&gt;</span>to_array<span class="synSpecial">()</span>;
		
		<span class="synComment">// Viewにセット</span>
		<span class="synStatement">$</span><span class="synIdentifier">this</span><span class="synType">-&gt;</span>set<span class="synSpecial">(</span>'<span class="synConstant">articles</span>', <span class="synStatement">$</span><span class="synIdentifier">articles</span>, <span class="synConstant">false</span><span class="synSpecial">)</span>;

	<span class="synSpecial">}</span>
<span class="synSpecial">}</span>

<span class="synComment">/* End of file keyword.php */</span>
<span class="synComment">/* Location: app/classes/view/hhblog/article/keyword.php */</span>
</pre><p>ここまで内容が一緒だと、あまり分けた意味がなさそうですが、応用編では表示内容を整形するという ViewModel 本来の処理を組み込んでいくのでこんな感じかな、と思います。</p><p>ちなみに応用編の記事はありません（笑）</p><p>取得したタイムラインのデータを View にセットする際に false を指定しています。</p>

<ul>
<li><code>$this->set('articles', $articles, false);</code></li>
</ul><p>これは API の応答結果より HTML でマークアップ済みのハイク記事本文（key='html'）を、そのまま表示に利用しているためです。</p><p></p>

</div>
</div>
<div class="section">
    <h3>4. 公開環境で動かそう</h3>
    <p>実装が完了して、テストが出来たら（苦笑）、用意してあったレンサバのフレームワーク上に変更分をアップロードします。<br />
<code><span data-unlink>http://{user-id}.sakura.ne.jp/hhblog</span></code> や <code><span data-unlink>http://{user-id}.sakura.ne.jp/hhblog/public_timeline</span></code> にアクセスして、はてなハイクブログを表示してみましょう！</p><p>ちなみに自分で作成したものは以下で動いています。</p>

<ul>
<li><a href="http://ytmd.sakura.ne.jp/hhblog/">tmd45 &#x306E;&#x306F;&#x3066;&#x306A;&#x30CF;&#x30A4;&#x30AF;&#x30D6;&#x30ED;&#x30B0;</a></li>
</ul><p><span itemscope itemtype="http://schema.org/Photograph"><img src="https://cdn-ak.f.st-hatena.com/images/fotolife/t/tmd45/20121214/20121214190855.png" alt="f:id:tmd45:20121214190855p:plain" title="f:id:tmd45:20121214190855p:plain" class="hatena-fotolife" itemprop="image"></span></p><p>見た目は <a href="http://twitter.github.com/bootstrap/">Twitter Bootstrap</a> と <a href="http://bootswatch.com/">Bootswatch</a> 様様です。タイムライン部分以外は、ブログっぽ～く見えるように適当に捏造しています。</p>

</div>
<div class="section">
    <h3>まとめ</h3>
    <p>いかがでしたでしょうか。コードを載せているのでだいぶ記事が長くなってしまいました。準備から実装まで通して記事にできたので自分の復習用には良かったと思うのですが、Advent Calendar としてどうなんでしょう（苦笑）</p><br />
<p>明日は @<a class="twitter-user-screen-name" href="http://twitter.com/ttikitt">ttikitt</a> さんの『<a href="http://www.cry-kit.com/?p=53">FuelPHP&#x3078;&#x306E;Doctrine2&#x7D44;&#x307F;&#x8FBC;&#x307F;</a>』です！('ω`)ｼ</p>

</div><div class="footnote">
<p class="footnote"><a href="#fn1" name="f1" class="footnote-number">*1</a><span class="footnote-delimiter">:</span><span class="footnote-text">自分の環境では、他のディレクトリのレベルと合わせて 755 にしました。</span></p>
</div>]]></description>
            <enclosure url="http://cdn-ak.f.st-hatena.com/images/fotolife/t/tmd45/20121214/20121214170600.png" length="0" type="image/png"/>
        </item>
        <item>
            <title><![CDATA[『ドラゴン・タトゥーの女』は凄まじく面白かった！]]></title>
            <link>https://masutaka.net/2012-12-18-1/</link>
            <guid>https://masutaka.net/2012-12-18-1/</guid>
            <pubDate>Tue, 18 Dec 2012 00:00:00 GMT</pubDate>
            <description><![CDATA[2時間半の映画なんですが、全くダレることなく寧ろ一気に最後まで見られ
ました。気がついたら朝の4:00。次の日つらかった！w
監督はソーシャル・ネットワーク のデヴィッド・フィンチャー 。ソーシャ
ルネットワークのスピード感そのままに、ストーリーがぎっちり詰め込め
られています。かといって無駄なシーンは一つもありません。序盤はつい
ていくのが精一杯。タダでさえ横文字の名前は覚えられないのにw
主演といっても良いルーニー・マーラがすごい。wikipediaの写真 を見た時、
目を疑いました。これが本当に同じ人間なのかと。以下の記事が分かりや
すいです。
ルーニー・マーラドラゴンタトゥーの女身長イメージ激変:ロハス美容ブログ あ、R-15指定なので、その点はご注意を。結構グロイシーンがあります。
ビュルマンのキャラ最高ですw]]></description>
        </item>
        <item>
            <title><![CDATA[米O'Reillyで買ったPDF本をkobo gloでも読めるように加工する]]></title>
            <link>https://shiromoji.hatenablog.jp/entry/20121218/1355855444</link>
            <guid>https://shiromoji.hatenablog.jp/entry/20121218/1355855444</guid>
            <pubDate>Mon, 17 Dec 2012 18:30:44 GMT</pubDate>
            <description><![CDATA[<p>米 O'Reilly のアカウントを作って手持ちの紙本（同社から出ている英語版に限る）を登録すると、その<a class="keyword" href="http://d.hatena.ne.jp/keyword/%C5%C5%BB%D2%BD%F1%C0%D2">電子書籍</a>版が$4.99/冊で買えるらしい。自宅には CJKV Information Processing（第2版）と Fonts & Encodings があり、どちらもいろいろと役に立っているが、さすがにこれを持ち運ぼうと思うとつらい。</p><p><span itemscope itemtype="http://schema.org/Photograph"><a href="http://f.hatena.ne.jp/mashabow/20121219014418" class="hatena-fotolife" itemprop="url"><img src="https://cdn-ak.f.st-hatena.com/images/fotolife/m/mashabow/20121219/20121219014418.jpg" alt="f:id:mashabow:20121219014418j:image:w500" title="f:id:mashabow:20121219014418j:image:w500" class="hatena-fotolife" style="width:500px" itemprop="image"></a></span></p><p>というわけで<a class="keyword" href="http://d.hatena.ne.jp/keyword/%C5%C5%BB%D2%BD%F1%C0%D2">電子書籍</a>版をさっそく買ってしまった。タイトルによっては eBub や mobi フォーマットも選択できるようだが、この2冊はPDF版のみ。残念ながら errata は反映されていない様子。</p>

<div class="section">
    <h4>余白の除去</h4>
    <p>このPDFは版面の上下左右に余白が大きく取られているため、これをそのまま<a class="keyword" href="http://d.hatena.ne.jp/keyword/%C5%C5%BB%D2%BD%F1%C0%D2">電子書籍</a>端末で読もうとしても読みづらい。ググってみたところ、PDF内部の CropBox の値を書き換えて余白を除去する方法があった。</p>

<ul>
<li><a href="http://sakanaya.kir.jp/ymnet/diary/d/20110330">&#x308F;&#x3044;&#x3048;&#x3080;&#x306D;&#x3063;&#x3068; - 2011/03/30</a></li>
</ul><p>このページの<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%B9%A5%AF%A5%EA%A5%D7%A5%C8">スクリプト</a>にすこし手を加え、次のようにしてみた。</p>
<pre class="code lang-perl" data-lang="perl" data-unlink><span class="synPreProc">#!/usr/bin/perl</span>
<span class="synComment"># crop_pdf.pl - PDFの余白を除去</span>

<span class="synStatement">use utf8</span>;
<span class="synStatement">use strict</span>;
<span class="synStatement">use warnings</span>;

<span class="synComment"># 余白除去を行わずにスキップするページ数</span>
<span class="synStatement">my</span> <span class="synIdentifier">$skip_page</span> = <span class="synConstant">2</span>;  <span class="synComment"># 先頭の2ページ（表紙と裏表紙）</span>

<span class="synStatement">die</span> <span class="synConstant">&quot;Usage: </span><span class="synIdentifier">$0</span><span class="synConstant"> file top right bottom left</span><span class="synSpecial">\n</span><span class="synConstant">&quot;</span> <span class="synStatement">unless</span> <span class="synIdentifier">@ARGV</span> == <span class="synConstant">5</span>;
<span class="synStatement">my</span> <span class="synIdentifier">$filename_in</span> = <span class="synIdentifier">$ARGV[</span><span class="synConstant">0</span><span class="synIdentifier">]</span>;

<span class="synComment"># CropBox に合わせて格納（left, bottom, right, top）</span>
<span class="synStatement">my</span> <span class="synIdentifier">@offset</span> = (<span class="synIdentifier">$ARGV[</span><span class="synConstant">4</span><span class="synIdentifier">]</span>, <span class="synIdentifier">$ARGV[</span><span class="synConstant">3</span><span class="synIdentifier">]</span>, -<span class="synIdentifier">$ARGV[</span><span class="synConstant">2</span><span class="synIdentifier">]</span>, -<span class="synIdentifier">$ARGV[</span><span class="synConstant">1</span><span class="synIdentifier">]</span>);

<span class="synStatement">open</span> <span class="synStatement">my</span> <span class="synIdentifier">$in</span>, <span class="synConstant">'&lt;'</span>, <span class="synIdentifier">$filename_in</span> <span class="synStatement">or</span> <span class="synStatement">die</span>;
(<span class="synStatement">my</span> <span class="synIdentifier">$filename_out</span> = <span class="synIdentifier">$filename_in</span>) =~ <span class="synStatement">s/</span><span class="synSpecial">(.*)(\.</span><span class="synConstant">pdf</span><span class="synSpecial">)</span><span class="synConstant">$</span><span class="synStatement">/</span><span class="synIdentifier">$1</span><span class="synConstant">-cropped</span><span class="synIdentifier">$2</span><span class="synStatement">/</span>;
<span class="synStatement">open</span> <span class="synStatement">my</span> <span class="synIdentifier">$out</span>, <span class="synConstant">'&gt;'</span>, <span class="synIdentifier">$filename_out</span> <span class="synStatement">or</span> <span class="synStatement">die</span>;

<span class="synStatement">binmode</span> <span class="synIdentifier">$in</span>;
<span class="synStatement">binmode</span> <span class="synIdentifier">$out</span>;

<span class="synStatement">my</span> <span class="synIdentifier">$page</span> = <span class="synConstant">0</span>;
<span class="synStatement">while</span> (&lt;<span class="synIdentifier">$in</span>&gt;) {
    <span class="synStatement">s/</span><span class="synSpecial">(\/</span><span class="synConstant">CropBox</span><span class="synSpecial">\s*\[\s*(</span><span class="synConstant">[^</span><span class="synSpecial">\[</span><span class="synConstant">]</span><span class="synSpecial">+)\])</span><span class="synStatement">/</span><span class="synConstant">crop(</span><span class="synIdentifier">$1</span><span class="synConstant">, </span><span class="synIdentifier">$2</span><span class="synConstant">)</span><span class="synStatement">/eg</span>;
    <span class="synStatement">print</span> <span class="synIdentifier">$out</span> <span class="synIdentifier">$_</span>;
}

<span class="synStatement">sub </span><span class="synIdentifier">crop </span>{
    <span class="synIdentifier">$page</span>++;
    <span class="synStatement">return</span> <span class="synIdentifier">$_[</span><span class="synConstant">0</span><span class="synIdentifier">]</span> <span class="synStatement">if</span> <span class="synIdentifier">$page</span> &lt;= <span class="synIdentifier">$skip_page</span>;

    <span class="synStatement">my</span> <span class="synIdentifier">@offset</span> = <span class="synIdentifier">@offset</span>;
    <span class="synStatement">my</span> <span class="synIdentifier">@pos</span> = <span class="synStatement">map{int</span> <span class="synIdentifier">$_</span> + <span class="synStatement">shift</span> <span class="synIdentifier">@offset</span><span class="synStatement">}</span> <span class="synStatement">split</span> <span class="synStatement">/</span><span class="synSpecial">\s+</span><span class="synStatement">/</span>, <span class="synIdentifier">$_[</span><span class="synConstant">1</span><span class="synIdentifier">]</span>;

    <span class="synStatement">my</span> <span class="synIdentifier">$crop</span> = <span class="synStatement">sprintf</span> <span class="synConstant">'/CropBox[%d %d %d %d]'</span>, <span class="synIdentifier">@pos</span>;

    <span class="synStatement">my</span> <span class="synIdentifier">$blank</span> = <span class="synStatement">length</span>(<span class="synIdentifier">$_[</span><span class="synConstant">0</span><span class="synIdentifier">]</span>) - <span class="synStatement">length</span> <span class="synIdentifier">$crop</span>;
    <span class="synStatement">warn</span> <span class="synIdentifier">$_[</span><span class="synConstant">0</span><span class="synIdentifier">]</span> <span class="synStatement">and</span> <span class="synStatement">return</span> <span class="synIdentifier">$_[</span><span class="synConstant">0</span><span class="synIdentifier">]</span> <span class="synStatement">if</span> <span class="synIdentifier">$blank</span> &lt; <span class="synConstant">0</span>;

    <span class="synStatement">return</span> <span class="synIdentifier">$crop</span>.(<span class="synConstant">' '</span> x <span class="synIdentifier">$blank</span>);
}
</pre><p>これを</p>

<pre>$ <a class="keyword" href="http://d.hatena.ne.jp/keyword/perl">perl</a> crop_pdf.pl Fonts_and_Encodings.pdf 70 110 140 95
</pre><p>などとして実行すれば、余白が除去されたPDFファイル Fonts_and_Encodings-cropped.pdf が生成される。なお、余白除去量の指定順序は、自分でわかりやすいように上から時計回り（<a class="keyword" href="http://d.hatena.ne.jp/keyword/CSS">CSS</a>と同じ）とした。<a class="keyword" href="http://d.hatena.ne.jp/keyword/kobo%20glo">kobo glo</a> での閲覧を考えると、なるべく大きく表示させるために上下の余白をギリギリまで切り詰めたい。何度か試してみた結果、とりあえず以下のパラメータに落ち着いた。</p>

<ul>
<li>CJKV Information Processing: 40 50 30 50</li>
<li>Fonts & Encodings: 70 110 140 95<a href="#f-01a4e8e7" name="fn-01a4e8e7" title="一部のページで下が切れてしまうが、これで妥協。">*1</a></li>
</ul>
</div>
<div class="section">
    <h4>書名・著者名の追加</h4>
    <p>このPDFの<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%E1%A5%BF%A5%C7%A1%BC%A5%BF">メタデータ</a>には書名や著者名が入っていないため、<a class="keyword" href="http://d.hatena.ne.jp/keyword/kobo">kobo</a> では「untitled」「著者不明」などと表示されてしまう。今回は <a href="http://www.pdflabs.com/tools/pdftk-the-pdf-toolkit/">pdftk</a> でこれを編集してみた。</p>

<pre>$ pdftk orig.pdf dump_data_utf8 > metadata.txt
</pre><p>とすると、orig.pdf の書名・著者名・しおりなどの<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%E1%A5%BF%A5%C7%A1%BC%A5%BF">メタデータ</a>が metadata.txt に書き出される。これを編集し、例えば</p>

<pre>InfoKey: Title
InfoValue: CJKV Information Processing, 2nd Edition
InfoKey: Author
InfoValue: <a class="keyword" href="http://d.hatena.ne.jp/keyword/Ken%20Lunde">Ken Lunde</a>
（以下略）
</pre><p>のように書き換える（該当部分がなければ追加する）。あとは</p>

<pre>$ pdftk orig.pdf update_info_utf8 metadata.txt output new.pdf
</pre><p>とすれば、<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%E1%A5%BF%A5%C7%A1%BC%A5%BF">メタデータ</a>だけが書き換わったPDFファイル new.pdf が生成される。</p>

</div>
<div class="section">
    <h4>まとめ</h4>
    <p>以上の余白除去と書名・著者名の追加あたりをやっておけば、一応はまずまず使えるようになる。もっとも、<a class="keyword" href="http://d.hatena.ne.jp/keyword/kobo">kobo</a> のPDF対応は、検索ができない・しおりの階層が無視される・操作性が悪いなど、不満な点も多々あるのが現状。</p><p>というわけで、みなさんもぜひ CJKV Information Processing と Fonts & Encodings のPDFを買って携帯しましょう！</p><p><div class="hatena-asin-detail"><a href="http://www.amazon.co.jp/exec/obidos/ASIN/0596514476/msb2-22/"><img src="https://images-fe.ssl-images-amazon.com/images/I/51jJqVHlF%2BL._SL160_.jpg" class="hatena-asin-detail-image" alt="CJKV Information Processing: Chinese, Japanese, Korean, and Vietnamese Computing" title="CJKV Information Processing: Chinese, Japanese, Korean, and Vietnamese Computing"></a><div class="hatena-asin-detail-info"><p class="hatena-asin-detail-title"><a href="http://www.amazon.co.jp/exec/obidos/ASIN/0596514476/msb2-22/">CJKV Information Processing: Chinese, Japanese, Korean, and Vietnamese Computing</a></p><ul><li><span class="hatena-asin-detail-label">作者:</span> <a class="keyword" href="http://d.hatena.ne.jp/keyword/Ken%20Lunde">Ken Lunde</a></li><li><span class="hatena-asin-detail-label">出版社/メーカー:</span> O'Reilly Media</li><li><span class="hatena-asin-detail-label">発売日:</span> 2009/01/08</li><li><span class="hatena-asin-detail-label">メディア:</span> ペーパーバック</li><li> <span class="hatena-asin-detail-label">クリック</span>: 6回</li><li><a href="http://d.hatena.ne.jp/asin/0596514476/msb2-22" target="_blank">この商品を含むブログ (11件) を見る</a></li></ul></div><div class="hatena-asin-detail-foot"></div></div><div class="hatena-asin-detail"><a href="http://www.amazon.co.jp/exec/obidos/ASIN/0596102429/msb2-22/"><img src="https://images-fe.ssl-images-amazon.com/images/I/51HDrORdUsL._SL160_.jpg" class="hatena-asin-detail-image" alt="Fonts & Encodings: From Advanced Typography to Unicode and Everything in Between" title="Fonts & Encodings: From Advanced Typography to Unicode and Everything in Between"></a><div class="hatena-asin-detail-info"><p class="hatena-asin-detail-title"><a href="http://www.amazon.co.jp/exec/obidos/ASIN/0596102429/msb2-22/">Fonts & Encodings: From Advanced Typography to Unicode and Everything in Between</a></p><ul><li><span class="hatena-asin-detail-label">作者:</span> Yannis Haralambous</li><li><span class="hatena-asin-detail-label">出版社/メーカー:</span> O'Reilly Media</li><li><span class="hatena-asin-detail-label">発売日:</span> 2007/10/06</li><li><span class="hatena-asin-detail-label">メディア:</span> ペーパーバック</li><li><span class="hatena-asin-detail-label">購入</span>: 3人 <span class="hatena-asin-detail-label">クリック</span>: 42回</li><li><a href="http://d.hatena.ne.jp/asin/0596102429/msb2-22" target="_blank">この商品を含むブログ (11件) を見る</a></li></ul></div><div class="hatena-asin-detail-foot"></div></div></p>

</div><div class="footnote">
<p class="footnote"><a href="#fn-01a4e8e7" name="f-01a4e8e7" class="footnote-number">*1</a><span class="footnote-delimiter">:</span><span class="footnote-text">一部のページで下が切れてしまうが、これで妥協。</span></p>
</div>]]></description>
            <enclosure url="http://cdn-ak.f.st-hatena.com/images/fotolife/m/mashabow/20121219/20121219014418.jpg" length="0" type="image/jpg"/>
        </item>
        <item>
            <title><![CDATA[『タイタンの逆襲』は続編ものだったのか..]]></title>
            <link>https://masutaka.net/2012-12-17-1/</link>
            <guid>https://masutaka.net/2012-12-17-1/</guid>
            <pubDate>Mon, 17 Dec 2012 00:00:00 GMT</pubDate>
            <description><![CDATA[アクションが迫力あってストーリーはほぼなかったので、頭を使わずに見
られました。死ぬほど殴られても大丈夫なのにナイフで刺されると即死亡
とか、細かいことは気にしない方が良いでしょうw
見終わってから『タイタンの戦い 』の続編だったと知り、ちょっとがっく
り。そのうち借りようっと。]]></description>
        </item>
        <item>
            <title><![CDATA[Emacsでカーソルに近接したスペースとタブを削除する]]></title>
            <link>https://masutaka.net/2012-12-11-2/</link>
            <guid>https://masutaka.net/2012-12-11-2/</guid>
            <pubDate>Tue, 11 Dec 2012 01:00:00 GMT</pubDate>
            <description><![CDATA[いつもいつもdelete-horizontal-spaceのキーバインドを忘れて、
just-one-spaceを使っているので、メモしておきます。
M-\ (delete-horizontal-space)
カーソルに近接するスペースとタブを全て削除する。
M-Space (just-one-space)
スペース１つを除き、カーソルに近接するスペースとタブを全て削除する。
just-one-spaceは一見使わなさそうですが、&quot;=&quot; や &ldquo;,&rdquo; の前後とか案外
重宝しますよ。]]></description>
        </item>
        <item>
            <title><![CDATA[anything-for-elscreen]]></title>
            <link>https://masutaka.net/2012-12-11-1/</link>
            <guid>https://masutaka.net/2012-12-11-1/</guid>
            <pubDate>Tue, 11 Dec 2012 00:00:00 GMT</pubDate>
            <description><![CDATA[昨日か今日のペアプロで教えてもらったのですが、anythingからelscreen
が使えるのですね。ググっても最近の記事が見つからなかったので、ageる
意味で書き留めておきます。
設定はこれだけ。
 Super-eはOSXデフォルトだとCommand-eです。isearch-yank-killが割り当
てられています。使わないのでこのキーを潰しました。
Command-eするとこんな感じに一覧が出るので、簡単にタブを移動出来ます。
C-z とかより打ちやすいと思います。
helmのこの方法もそのまま使えました。ありがとうございます。
elscreenのタブをまとめて消す - Life is very short そういえば、elscreen-cloneとelscreen-toggleは結構便利ですよね。
前者はC-z Cに、後者はC-z C-aとC-z aに割り当てられていますが、
打ちづらいので私はそれぞれC-z C-lとC-z C-spaceに割り当てました。
(define-key elscreen-map (kbd &#34;C-l&#34;) &#39;elscreen-clone) (define-key elscreen-map (kbd &#34;C-SPC&#34;) &#39;elscreen-toggle) P.S.
helmだと最初からhelm-elscreenが使えたりする？]]></description>
        </item>
        <item>
            <title><![CDATA[2012年11月は14回もジムに行けてた #クイックシェイプ]]></title>
            <link>https://masutaka.net/2012-12-01-1/</link>
            <guid>https://masutaka.net/2012-12-01-1/</guid>
            <pubDate>Sat, 01 Dec 2012 00:00:00 GMT</pubDate>
            <description><![CDATA[2012年11月の記録    日付 最高血圧 最低血圧 脈拍     11/ 1(木) 121 75 87   11/ 2(金) 114 67 86   11/ 3(土) 111 69 94   11/ 6(火) 114 67 79   11/ 8(木) 108 66 83   11/ 9(金) 119 77 91   11/11(日) 107 65 100   11/13(火) 117 66 77   11/14(水) 117 65 90   11/22(木) 114 67 92   11/24(土) 118 75 100   11/25(日) 108 65 85   11/27(火) 120 77 87   11/30(金) 112 73 96    ※運動前に測定]]></description>
        </item>
        <item>
            <title><![CDATA[Ruby 2.0 & Rails 4.0先取りセミナーに行ってきたメモ #webcat]]></title>
            <link>https://masutaka.net/2012-11-23-2/</link>
            <guid>https://masutaka.net/2012-11-23-2/</guid>
            <pubDate>Fri, 23 Nov 2012 01:00:00 GMT</pubDate>
            <description><![CDATA[Ruby 2.0 &amp; Rails 4.0先取りセミナー : ATND Rubyの勉強会に来たのは今回が初めて(Ruby Kaigi[2011-07-21-1] はお祭り
ですからね)。
Ruby2.0もRails4.0もほぼ知識ゼロで来ました。Ruby2.0は前日rbenvでイン
ストールしましたけど。
@a_matsuda さんの「Ruby 2.0 &amp; Rails 4.0を先取りしよう」   本当に重たい変更は1.9で済ませたそうなので、2.0への移行はすぐ出来る
とのこと。実際互換性も問題ないらしい。あと、requireが高速化されたの
で、Railsとかのライブラリたくさん読み込むプロジェクトが2.5倍とか速
くなるらしい。 Rails4.0もRuby1.8を捨てた影響で速くなるとのこと。こちらも互換性は問
題ないそう。
@kentaro さんの「Rails4でアプリを作ってみた話」   で、こちらが開発中のRails4.0でアプリを作ったお話。Rails初めて使った
のに開発版でやっちゃうんですか。。いろいろハマったのは開発版だった
から。リリースされたらそんなことないとのこと。
Rails4 in Action - delirious thoughts ]]></description>
        </item>
        <item>
            <title><![CDATA[EmacsでMarkdownのプレビューをお手軽に確認する方法はこれかな？]]></title>
            <link>https://masutaka.net/2012-11-23-1/</link>
            <guid>https://masutaka.net/2012-11-23-1/</guid>
            <pubDate>Fri, 23 Nov 2012 00:00:00 GMT</pubDate>
            <description><![CDATA[最近、業務のリポジトリがGithubに移行したので、Markdownをよく書いて
ます。(Github使うと、目に見えてソフトウェアの品質が上がりますね！)
Markdownのレンダリング結果を確認するために、Githubのwikiに貼り付け
てプレビューとかやってましたが、バカらしくなったのでローカルで確認
出来る方法を探しました。
方法1: markdown-mode.elを使う 賢明な皆さんはEmacs24をお使いだと思うので、M-x list-packagesから
markdown-mode.elをインストールし、以下を~/.emacs.d/init.elに追加し
ます。
(add-to-list &#39;auto-mode-alist &#39;(&#34;\\.md\\&#39;&#34; . markdown-mode)) README.mdとかがmarkdown-modeで開くようになります。
C-c C-c pでプレビューがブラウザに表示されます。markdownコマンドがな
いと怒られたら、brewとかでインストールして下さい。
% brew install markdown 方法2: node.jsのツール、markupを使う markdown のリアルタイムレンダリングツール markup をリリースしました - Block Rockin’ Codes こんなツールを作った方がいらっしゃいました。ありがたや〜
node.jsはbrewとかでインストールしておきます。
% brew install node 適当なディレクトリにmarkupをインストールします。私は~/local/shareに
インストールし、~/local/binにmarkupのシンボリックリンクを置きました。
% cd ~/local/share % npm install markup % cd ~/local/bin % ln -s ../share/node_modules/.bin/markup markupコマンドで編集するMarkdownファイルを捕捉します。
% markup README.md 3000 README.mdを保存するたびに、http://localhost:3000の結果が書き換わり
ます。
GithubのAPI制限は5000回/時みたいです。
まとめ ちょっと編集する時はmarkdown-mode.el、それなりの量を編集する時は
markupが良さそうです。
P.S.
こんな方法もありました。]]></description>
        </item>
        <item>
            <title><![CDATA[OSXのGNU Screenは~/.zprofileを読み込まない？]]></title>
            <link>https://masutaka.net/2012-11-19-1/</link>
            <guid>https://masutaka.net/2012-11-19-1/</guid>
            <pubDate>Mon, 19 Nov 2012 00:00:00 GMT</pubDate>
            <description><![CDATA[tmuxのすすめ｜catatsuyのBlog これを参考にtmuxを試していたら、なんかPATHがおかしい。調べてみたら、
むしろGNU Screenの方がおかしくて、~/.zprofileが読み込まれていないこ
とが分かった。
私の~/.zprofileは以下のとおり。
# # /etc/zprofile and ~/.zprofile are run for login shells # # all bourne shells should source /etc/profile source /etc/profile /etc/profileは以下のとおり。
# System-wide .profile for sh(1) if [ -x /usr/libexec/path_helper ]; then eval `/usr/libexec/path_helper -s` fi if [ &#34;${BASH-no}&#34; != &#34;no&#34; ]; then [ -r /etc/bashrc ] &amp;&amp; . /etc/bashrc fi 結果的に以下が原因で、PATHとMANPATHが異なっていた。
GNU Screen -&gt; eval /usr/libexec/path_helper -s が実行されない
tmux -&gt; eval /usr/libexec/path_helper -s が実行される。]]></description>
        </item>
        <item>
            <title><![CDATA[svivs の現状について]]></title>
            <link>https://shiromoji.hatenablog.jp/entry/20121113/1352824794</link>
            <guid>https://shiromoji.hatenablog.jp/entry/20121113/1352824794</guid>
            <pubDate>Mon, 12 Nov 2012 16:39:54 GMT</pubDate>
            <description><![CDATA[<p><a class="keyword" href="http://d.hatena.ne.jp/keyword/Twitter">Twitter</a> を見ていて、あーそういやそんなもんあったなーと思いだしたのですが、以前 svivs という<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%C4%A1%BC%A5%EB">ツール</a>を作りました。</p>

<ul>
<li><a href="http://shiromoji.net/tool/svivs/">IVS&#xFF08;&#x7570;&#x4F53;&#x5B57;&#x30B7;&#x30FC;&#x30B1;&#x30F3;&#x30B9;&#xFF09;&#x5165;&#x529B;&#x30C4;&#x30FC;&#x30EB; svivs - &#x3057;&#x308D;&#x3082;&#x3058;&#x4F5C;&#x696D;&#x5BA4;</a></li>
</ul>
<div class="section">
    <h4>現状</h4>
    <p>当時は更新・拡張したい点などいくつかあったわけですが、結局のところ今まで放置状態になっています。理由としては、</p>

<ul>
<li><a class="keyword" href="http://d.hatena.ne.jp/keyword/Ubuntu">Ubuntu</a> をメインで使うようになったが、<a class="keyword" href="http://d.hatena.ne.jp/keyword/Adobe%20AIR">Adobe AIR</a> の開発・実行環境は <a class="keyword" href="http://d.hatena.ne.jp/keyword/Linux">Linux</a> に対応していない</li>
<li>当時はIVSをサポートするOS・ブラウザ・その他アプリケーションが少なかったため、多くの環境で比較的確実に利用できる <a class="keyword" href="http://d.hatena.ne.jp/keyword/Adobe%20AIR">Adobe AIR</a> を使っていたが、現在ではサポートが進んで問題にならなくなってきた</li>
<li>そもそも、<a class="keyword" href="http://d.hatena.ne.jp/keyword/Adobe%20AIR">Adobe AIR</a> 自体が結局世間ではあまり使われていない気がする</li>
<li>めんど(ry</li>
</ul><p>といったあたりで、残念ながら今後も放置状態が続くかと思われます。また、svivs 内部で利用しているIVDのバージョンが古いこともあり、今後の svivs の利用は<strong>推奨しません</strong>。次項の作業によってIVDを更新することは可能ですが、このような現状を把握した上で、自己責任でお願いします。</p>

</div>
<div class="section">
    <h4>svivs で使われているIVDを更新するには</h4>
    <p><a class="keyword" href="http://d.hatena.ne.jp/keyword/Unicode%20Consortium">Unicode Consortium</a> の公開するIVDは、これまで何回かアップデートが行われてきました。</p>

<ul>
<li><a href="http://www.unicode.org/ivd/">Ideographic Variation Database</a></li>
</ul><p>svivs は当時最新版であった2010-11-14版のIVDを利用していますが、その後 <a class="keyword" href="http://d.hatena.ne.jp/keyword/Adobe">Adobe</a>-Japan1 と Hanyo-Denshi の両方のコレクションにIVSが追加された、2012-03-02版が出ています。これに対応させたい場合には、以下の作業を行なう必要があります<a href="#f-4c4f26a9" name="fn-4c4f26a9" title="パスは Windows 7 64bit 環境での例。自分の環境に合わせて適宜読み替えてください。">*1</a>。</p>

<ol>
<li><a href="http://www.unicode.org/ivd/#versions">Versions of the IVD</a> のリンクから、最新版の IVD_Sequences.txt をダウンロードする</li>
<li>\Program Files (<a class="keyword" href="http://d.hatena.ne.jp/keyword/x86">x86</a>)\svivs\IVD_Sequences.txt を、ダウンロードした IVD_Sequences.txt で上書きする</li>
<li>\Users\{ユーザ名}\AppData\Roaming\net.shiromoji.Svivs\ivd.<a class="keyword" href="http://d.hatena.ne.jp/keyword/sqlite">sqlite</a> を削除する</li>
<li>svivs を起動する</li>
</ol><p><a class="keyword" href="http://d.hatena.ne.jp/keyword/Adobe">Adobe</a>-Japan1, Hanyo-Denshi 以外のコレクションが新設されるなどした場合には対応できませんので、ご注意ください。</p>

</div><div class="footnote">
<p class="footnote"><a href="#fn-4c4f26a9" name="f-4c4f26a9" class="footnote-number">*1</a><span class="footnote-delimiter">:</span><span class="footnote-text">パスは <a class="keyword" href="http://d.hatena.ne.jp/keyword/Windows%207">Windows 7</a> 64bit 環境での例。自分の環境に合わせて適宜読み替えてください。</span></p>
</div>]]></description>
            <enclosure url="https://cdn.blog.st-hatena.com/images/theme/og-image-1500.png" length="0" type="image/png"/>
        </item>
        <item>
            <title><![CDATA[『ショーシャンクの空に』はジワジワ来る映画だった]]></title>
            <link>https://masutaka.net/2012-11-06-1/</link>
            <guid>https://masutaka.net/2012-11-06-1/</guid>
            <pubDate>Tue, 06 Nov 2012 00:00:00 GMT</pubDate>
            <description><![CDATA[ 前半救いもない感じだったけど、後半ジワジワきましたね〜
なんで観ることにしたか忘れましたが、悪くない映画でした。
追記(2013-01-26):
これで知ったっぽい。
期待せずにレンタルしたら意外にも面白かった映画:ツンダオワタ情報 ]]></description>
        </item>
        <item>
            <title><![CDATA[2012年10月は15回ジムに行きました #クイックシェイプ]]></title>
            <link>https://masutaka.net/2012-11-03-1/</link>
            <guid>https://masutaka.net/2012-11-03-1/</guid>
            <pubDate>Sat, 03 Nov 2012 00:00:00 GMT</pubDate>
            <description><![CDATA[2012年10月の記録    日付 最高血圧 最低血圧 脈拍     10/ 2(火) 119 73 84   10/ 5(金) 116 69 85   10/ 6(土) 115 73 91   10/ 7(日) 115 78 92   10/ 9(火) 106 73 92   10/11(木) 110 77 86   10/12(金) 123 73 84   10/13(土) 127 74 92   10/16(火) 119 70 82   10/17(水) 121 72 89   10/20(土) 117 68 96   10/21(日) 120 73 86   10/23(火) 129 77 89   10/25(木) 120 77 96   10/30(火) 117 70 76    ※運動前に測定]]></description>
        </item>
        <item>
            <title><![CDATA[『蒸気でホットアイマスク』が高いと思う人には『あずきのチカラ』がオススメ]]></title>
            <link>https://masutaka.net/2012-10-31-2/</link>
            <guid>https://masutaka.net/2012-10-31-2/</guid>
            <pubDate>Wed, 31 Oct 2012 01:00:00 GMT</pubDate>
            <description><![CDATA[1分の仮眠でも効果があった！現役医師が教える「1分仮眠法」｜Act as Professional - hiroki.jp by HIROCASTER ここで『あずきのチカラ(以下あずき)』を見た時は、『蒸気でホットアイ
マスク(以下アイマスク)』のパチモンかと思いましたよ(笑)。
  でも700円で繰り返し(約200回)使えるという話なので、さっそく試してみ
ました。結論から言うと、アイマスクより安っぽくはありますが買いです。
あずきは電子レンジで温めて使います。600Wだったら30秒です。アイマス
クはじわじわ温まりますが、あずきは最初から温まっています。時間も5分
と、アイマスクよりやや短いと思います。
なんで買いかというと、やっぱり安いからなんですよね。
アイマスクは無香料でも1枚80円くらいなので、あまり毎日使おうと思いま
せん。あずきは1回あたり3円なので、毎日はおろか1日何度でも使えます
(4時間の間隔を開ける必要はあります)。最近は寝る前と起きた時にあずき
を使ってます。
ところでアイマスクって、今は５種類も香りがあるのですね！あずきは別
の香りは絶対増えないので羨ましい！(笑)
     追記(2013-04-21):
ホットアイマスクの発売って、6年も前だったのね。[2007-09-21-1] ]]></description>
        </item>
        <item>
            <title><![CDATA[『リーダブルコード』を読むことはプログラマとしてのたしなみ]]></title>
            <link>https://masutaka.net/2012-10-31-1/</link>
            <guid>https://masutaka.net/2012-10-31-1/</guid>
            <pubDate>Wed, 31 Oct 2012 00:00:00 GMT</pubDate>
            <description><![CDATA[なんだかんだ言ってこの業界、読めるよりも動くコードが重視されて来た
と感じています。
動くだけで読むのが苦痛なコードって、ちゃんと読めるコードにするまで
の時間を、これから読む人や修正する人に預けているだけなんですよね。
書く回数より読む回数の方が圧倒的に多いのです。そしてそれは、ビジネ
ススピードに直接繋がります。
私は今まで、読めるコードになるように丁寧に書いて来たつもりです。で
も「ここまで丁寧に書くのは自己満足なのでは？」と思うことはよくあり
ましたし、コードレビューの時も指針となるものがありませんでした。
本書を読んで「ああ、ここまで書いて良いのね」とある意味救われました
し、いくつかの間違いにも気づきました。コードレビューの時も自信が持
てそうです(笑)。
プログラマ初心者は先輩のクソコードに染まる前に読むべきだし、日々良
いコードを書こうと奮闘しているプログラマも読むべきでしょう。チーム
で読書会など開くのも良いと思います。
本書自体「リーダブル」な文章で書かれていますが、230ページと手頃なペー
ジ数も「リーダブル」です。]]></description>
        </item>
        <item>
            <title><![CDATA[Mountain LionでのEmacsの安定度ハンパないっす！]]></title>
            <link>https://masutaka.net/2012-10-06-2/</link>
            <guid>https://masutaka.net/2012-10-06-2/</guid>
            <pubDate>Sat, 06 Oct 2012 01:00:00 GMT</pubDate>
            <description><![CDATA[Lionではほぼ毎日Emacsが落ちてましたが、Mountain Lionにしてからは
一度も落ちていません。やっぱり、OSXのバグだったんですね。。。
OSXでのEmacs最新版のdmgはGNU Emacs For Mac OS X からダウンロード
出来ます。]]></description>
        </item>
        <item>
            <title><![CDATA[Emacsでお手軽にプレゼンできるorg-tree-slideはかなり良い感じ！]]></title>
            <link>https://masutaka.net/2012-10-06-1/</link>
            <guid>https://masutaka.net/2012-10-06-1/</guid>
            <pubDate>Sat, 06 Oct 2012 00:00:00 GMT</pubDate>
            <description><![CDATA[過去にGody は挫折しましたが、org-tree-slideはお手軽に使えて良い感じ
です。org-modeは必要性がなくて使っていませんでしたが、軽くプレゼン
資料作るためだけに使うのは大いにアリです。
org-modeはEmacsにデフォルトで入っているので、org-tree-slideを
GitHubから入手して、、
 % git clone git://github.com/takaxp/org-tree-slide.git
 Emacsに以下の設定をするだけです。F5でプレゼンが始まります。
(require &#39;org-tree-slide) (setq org-tree-slide-heading-emphasis t) (define-key global-map (kbd &#34;&lt;f5&gt;&#34;) &#39;org-tree-slide-mode) 文字サイズを大きくしたいとかは、以下のオフィシャルサイトを参考に
して下さい。
emacs:org-tree-slide - PastelWiki requireでエラーが出る方(load-pathが分からない方)はあらかじめ
[2009-07-05-3] の設定をすると良いでしょう。
P.S.
OSXでorgファイルをpdfにする方法、誰か教えて。。
追記(2012-10-07):
@cvmat さんからアドバイス頂きました。
loading...
   if (localStorage.getItem("pref-theme") === "light") { const elements = document.getElementsByClassName('twitter-tweet'); for (let i = 0; i  ]]></description>
        </item>
        <item>
            <title><![CDATA[2012年9月は14回ジムに行きました #クイックシェイプ]]></title>
            <link>https://masutaka.net/2012-10-03-1/</link>
            <guid>https://masutaka.net/2012-10-03-1/</guid>
            <pubDate>Wed, 03 Oct 2012 00:00:00 GMT</pubDate>
            <description><![CDATA[日付 最高血圧 最低血圧 脈拍     9/ 1(土) 125 74 86   9/ 2(日) 107 66 94   9/ 5(水) 127 70 78   9/ 8(土) 120 75 95   9/11(火) 111 68 -   9/13(木) 114 74 97   9/14(金) 128 81 90   9/16(日) 111 69 91   9/18(火) 119 75 87   9/19(水) 112 69 75   9/22(土) 113 75 98   9/25(火) 108 72 97   9/28(金) 124 80 86   9/29(土) 127 73 85    ※運動前に測定]]></description>
        </item>
        <item>
            <title><![CDATA[映画『どろろ』は普通に楽しめた]]></title>
            <link>https://masutaka.net/2012-09-30-1/</link>
            <guid>https://masutaka.net/2012-09-30-1/</guid>
            <pubDate>Sun, 30 Sep 2012 00:00:00 GMT</pubDate>
            <description><![CDATA[ 2007年の映画だったんですね。普通に楽しめました。ゲーム版
[2011-02-11-5] と似た退廃的で貧しい雰囲気がよく出ていたと思います。
Wikipediaによると ロケはニュージーランドで行われたとのこと。その点
意外でした。
柴咲コウのどろろは私は好きだなあ。魔神もゲーム版と似ていて違和感を
感じませんでした。唯一、ウルトラ怪獣みたいな魔神には、ん？と思いま
したがw
 ]]></description>
        </item>
        <item>
            <title><![CDATA[2012年8月は11回ジムに行きました #クイックシェイプ]]></title>
            <link>https://masutaka.net/2012-09-21-1/</link>
            <guid>https://masutaka.net/2012-09-21-1/</guid>
            <pubDate>Fri, 21 Sep 2012 00:00:00 GMT</pubDate>
            <description><![CDATA[2012年8月の記録 9月ももう終わりに近づいてきましたが、先月分の記録です。
7月終わりに入会したので[2012-07-29-1] 、7月の分も書きました。
   日付 最高血圧 最低血圧 脈拍     7/31(火) 120 64 93   8/ 2(木) 126 79 -   8/ 3(金) 124 76 -   8/ 5(日) 116 72 90   8/ 8(水) 114 73 83   8/ 9(木) 125 87 89   8/10(金) 126 75 88   8/21(火) 134 89 90   8/23(木) 118 76 83   8/26(日) 121 74 83   8/28(火) 104 73 90   8/31(金) 115 71 80    ※運動前に測定]]></description>
        </item>
        <item>
            <title><![CDATA[EmacsからMacの辞書をお手軽に使う]]></title>
            <link>https://masutaka.net/2012-09-17-1/</link>
            <guid>https://masutaka.net/2012-09-17-1/</guid>
            <pubDate>Mon, 17 Sep 2012 00:00:00 GMT</pubDate>
            <description><![CDATA[この記事の最近の状況。
[2011-05-18-1] Emacs で Mac の辞書を sdic っぽく使う
どうも最近、commandline-dictionary-appの呼び出しに時間がかかります。
あと、Mountain LIONにバージョンアップしてから、
commandline-dictionary-appがこんな警告を吐くようになりました。検索
は出来ますけどね。
dict(6389,0x7fff7c6d6180) malloc: reference count underflow for 0x4001a1660, break on auto_refcount_underflow_error to debug. そんなわけでEmacsでコピーしてMacの辞書に貼り付けて調べるという、
非生産的なことをしていました&hellip;。
@elim によると dict:// に渡せばブラウザからMacの辞書を呼び出せるし、
browse-url()使えばEmacsからも呼び出せるとのこと。
→dotemacs/init-dictionary.el at master · elim/dotemacs 個人的にはwordがいきなり辞書に渡されるより、ミニバッファでワンクッ
ション置きたかったので、前回のコード を改良してみました。
 M-x my-dictionaryすると、カーソル下の単語がミニバッファに表示されま
す。ReturnするとMacの辞書にフォーカスを移しつつ検索します。C-uを付
けるとsdicで検索します。C-uC-uを付けるとcommandline-dictionary-app
で検索します。
なかなか良い感じ☆
P.S.
sdicインストールしてない人はsdic-read-from-minibuffer()を
read-from-minibuffer()に置き換えれば良いです。]]></description>
        </item>
        <item>
            <title><![CDATA[simplenoteやめました！]]></title>
            <link>https://masutaka.net/2012-09-09-1/</link>
            <guid>https://masutaka.net/2012-09-09-1/</guid>
            <pubDate>Sun, 09 Sep 2012 00:00:00 GMT</pubDate>
            <description><![CDATA[今日からsimplenote を使うのを止めて、Mountain Lionから追加された標準
アプリ「メモ」に乗り換えました。
なぜ乗り換えたのか？ simplenoteはWeb、iPhone 、Emacs から編集できて便利なのですが、どうも
最近調子がよくありません。Web版は以前よりログインに時間がかかる気が
しますし、時々同じファイルがいくつも出来ることがあります。
そんなわけで乗り換え先を探していたところ、Mountain LionからiPhoneの
メモが同期出来ることを知りました。
メモ: iPhone/iPad とメモを同期できるMac標準アプリが登場【Mountain Lion】 - iPhoneアプリのAppBank iPhone4を手に入れた頃はこのメモアプリを使っていたのですが、最大の短
所はiPhoneでしか編集出来ないこと。それが今回改善されたわけです。
悪くなったことはないの？ Emacsからは編集できなくなりました。でもコピペすれば良いだけなのであ
まり困っていません。
まとめ simplenoteからAppleの「メモ」に乗り換えました。
居心地の良い監獄は最高です。]]></description>
        </item>
        <item>
            <title><![CDATA[このブログがインターネット上から消えていました]]></title>
            <link>https://masutaka.net/2012-09-07-1/</link>
            <guid>https://masutaka.net/2012-09-07-1/</guid>
            <pubDate>Fri, 07 Sep 2012 00:00:00 GMT</pubDate>
            <description><![CDATA[http://dlvr.it/ からの通知で気づいたのですが、このブログが1日半ほど
インターネット上から消えていました。
OSXをMountain Lionにバージョンアップしたら、Perlのバージョンが上が
り、HTML::Templateがなくなったことが原因でした。
CPANからインストールして解決しました。
cpanの使い方の整理 « taichino.com このブログはChangeLogメモという1つのテキストファイルから、chalow と
いう変換ツールを使いhtmlに変換しています。
この作業を自動化した自作のmkchalowスクリプトの作りが甘かった。。自
分しか使わないツールと言えども、エラー処理はちゃんとした方が良いで
すね。ブログが生きているかのチェックも。
ちなみにChangeLogメモを始めたのはこの記事がきっかけです。
[2001-12-30-1] から書き続けていて、23,000行になりました。
横着プログラミング 第1回: Unixのメモ技術 最近はEvernoteに全部まとめる人が多いみたいですが、技術者だったら絶
対ChangeLogメモの方が良いですよ。手に馴染んだエディタが使えるし、整
理する必要がないので。
ただchalowを使うかは微妙なところかも。やはり全てを自分が面倒見るの
で、時間がないとなかなかメンテしきれません。ChangeLogをWordpressと
かTumblrにインポート出来れば良いのですが。それも時間が..w]]></description>
        </item>
        <item>
            <title><![CDATA[Agile渋谷Emacs勉強会に参加してきた #Agile渋谷]]></title>
            <link>https://masutaka.net/2012-08-26-1/</link>
            <guid>https://masutaka.net/2012-08-26-1/</guid>
            <pubDate>Sun, 26 Aug 2012 00:00:00 GMT</pubDate>
            <description><![CDATA[７月に東京に引っ越してきて、早３回目の勉強会。
そろそろ何もない週末が欲しい&hellip;w
さて、そうは言っても東京で何年ぶりかに開催されたEmacsのイベント。
@mori_dev さんはじめ、お初にお目にかかれた方が何人もいて、楽しい時
間を過ごせました。
最近は勉強会ではなるべくメモを取らずに、イベントを楽しむようにして
いるので、思い出したまま書いていきます。
個人的に一番面白かったのは、@inoue_ariel さんの「Emacsのバッファの
内部実装について 」。Emacsと言えばギャップバッファ、ギャップバッファ
と言えばEmacsというのはもちろん、ギャップバッファという名前自体初め
て聞きました。しかし、memcopy()のコストがあれほど低いのにはビックリ
です。最近のCPUはキャッシュの容量が増えてるのが要因なんでしょうか。
でもギャップバッファって昔から使っているのですよねえ。。
Emacsのソースコードは [2010-06-19-2] で、その変態性を認識したことが
ありますが、この時の記事も井上さんじゃないですか！(やべっ！深夜に鳥
肌立った！)2010年当時は組み込み業界で働いていたこともあり、アリエル
も、アリエルの井上さんも存じ上げなかったのですが、自分の中で今繋が
りました。
(衝撃的すぎて、何も思い出せなくなってしまった。。)
さて、私もLTやりました。
 内容はegg.elとgit-dwin.elの紹介です。自分のまわりで、コマンドライン
からgitを使っている人が意外に多いので、発表することになりました。
頑張ってEmacsで全部やる必要はないけど、結構簡単に楽できるから、まあ
ゆるく使おうよ。そんな内容です。
当日の夕方近くに急にやることが決まったので資料をちゃちゃっと作り、
まあ5分なんて余裕でしょ。なんて思っていたら大失敗w 発表用の画面操作
に手間取るわ、実演用のEmacsはミニバッファが見えないわ、時間は足りな
いわでさんざんでした。さらには腹が減りすぎて、手がぷるぷる震える始
末。よく考えたらLTやるのは初めてでした。次回に生かしたいと思います。。。]]></description>
        </item>
        <item>
            <title><![CDATA[Gmail に来た全てのメールをスパム判定しないフィルタリングルール]]></title>
            <link>https://masutaka.net/2012-08-06-2/</link>
            <guid>https://masutaka.net/2012-08-06-2/</guid>
            <pubDate>Mon, 06 Aug 2012 01:00:00 GMT</pubDate>
            <description><![CDATA[「条件」に from:(@) を指定し、「処理」に「迷惑メールにしない」を
指定するだけ。
From がないメールは条件に一致しませんが、さすがに無視できる数でしょう。
Gmail の転送機能って、転送する前にスパム判定するのですよね。
Gmail から Gmail に転送していると、二重にスパム判定することになり、
たまに誤判定されるので設定しています。
追記(2012-11-10):
from:(.*) はダメでした。実際に検索して、全てのスレッドが引っかかる
か試せば分かることでしたね。。検索条件を from:(@) に変えました。
これなら大丈夫なはず。
追記(2013-03-28):
http://ziddy.japan.zdnet.com/qa8009043.html で引用されていたので追
記。from:(@) でもダメなことがありました。半年で4件程度。完璧な方法
はないのかしら。。]]></description>
        </item>
        <item>
            <title><![CDATA[LL Decade は元組み込みプログラマーでも楽しめるイベントだった #lldecade]]></title>
            <link>https://masutaka.net/2012-08-06-1/</link>
            <guid>https://masutaka.net/2012-08-06-1/</guid>
            <pubDate>Mon, 06 Aug 2012 00:00:00 GMT</pubDate>
            <description><![CDATA[この記事 で開催を知った LL Decade 。LL はおろか、Decade の単語の意味
も知らなかった元組み込みプログラマー、現 Web プログラマーですが、予
想以上に楽しめるイベントでした。
しかし暑かった。予定どおり汗だくで会場に到着。今回は机がなかったの
で MacBookAir は使わず、iPhone に軽くメモりながら純粋に楽しむことに
専念。
基調講演で初めて @miyagawa 氏を拝見。手錠をはめられてプログラミン
グ..の下りが印象に残りました。PHP は知れば知るほど変態言語で、第一
印象よりかなり好きになりましたが、私も手錠をはめられている感じはす
るのですよね&hellip;。
意外だったのは今まで Python に全く関わらずに生きてきたのに、
Language Update Decadev で話を聞いて、やってみようかなと思ったこと。
LL イベントは各言語をつまみ食い出来るので、組み込みなど別な分野の人
が参加しても楽しめますね。今回はまつもとさんの mruby の話も熱かった
ですし。
先週の Jenkins ユーザ・カンファレンスの熱が残っているのか、CI の話
もセッションまるまる使われていました。まあでも CI は各言語やフレー
ムワークに共通する内容は薄いので、CakePHP2 と Jenkins みたいにドン
ピシャの話が聞きたいですね。それは個々の勉強会でやることか。。あ、
もちろん各トークは面白かったです。 @yamashiro さんの話は特に。
JsTestDriver いいかもと思ったけど、複数サーバが必要なのは残念でした。
Javascript が機械語という解釈は今回一番面白かった。すなわち永遠に生
き続ける。確かに各ブラウザ対応を考えると素で書くのはしんどい。アセ
ンブラに対する C みたいに、今後はもっとしっくりと上に乗っかるとうれ
しいですね。&gt; jQuery, JSX, CoffeeScript]]></description>
        </item>
        <item>
            <title><![CDATA[@nifty がパスワードを平文で保存していることが分かり、大変残念に思っている件]]></title>
            <link>https://masutaka.net/2012-07-31-1/</link>
            <guid>https://masutaka.net/2012-07-31-1/</guid>
            <pubDate>Tue, 31 Jul 2012 00:00:00 GMT</pubDate>
            <description><![CDATA[先週フィリピンから帰ってきて、ようやく自宅のインターネット回線の契
約に着手することが出来ました。
神戸にいたときは会社の回線を使っており、この１年は自分のアカウント
を「@nifty基本料金(旧お手軽1コース)」にして休眠状態にしてました。
(月額262円。メールアドレスがまだ必要だったので。)
ネットで申し込んでも良かったのですが、ぶっちゃけ分かりづらいので電
話で契約完了。本日「契約内容のご案内」の封書が届きました。
よしよし、@nifty の ID は今までのやつだね。あれ？ログインパスワード
に見覚えのある文字列が。。これ、いつも使っているオレのパスワードやん！
@nifty さんはパスワードを平文で保存していらっしゃるようです&hellip;。
思えば十数年前、初めて買ったパソコンが FMV-5100C3 だった流れで始め
た NIFTY-Serve。その後 33600bps の高速モデムを手に入れ、Infoweb に
移行。気がついたら合併して、また nifty にカムバック。
私のネット生活はある意味 nifty さんとともにあったわけですが、今回の
件が分かってしまい大変残念です。今まで特に不具合もなく、快適に使っ
ていただけに..。
会社の回線は神戸の時も nifty でしたし、東京に移転しても nifty。おま
けに先週、実家の回線も nifty を新規に申し込んだばかりでした。二重に
も三重にも残念な出来事でした。はぁ。]]></description>
        </item>
        <item>
            <title><![CDATA[クイックシェイプに再入会しました！ #クイックシェイプ]]></title>
            <link>https://masutaka.net/2012-07-29-1/</link>
            <guid>https://masutaka.net/2012-07-29-1/</guid>
            <pubDate>Sun, 29 Jul 2012 00:00:00 GMT</pubDate>
            <description><![CDATA[今月からオフィスが神戸から東京に移転した関係で、私自身も関東に戻っ
て参りました。
そのオフィスのすぐ近くに、ホントに偶然クイックシェイプ があったので、
念願の再入会を果たすことが出来ました。本当にうれしい。
6/4 にアパートの内覧で初めて下高井戸に降り立った時、早く始めたい気
分でいっぱいでしたが、引っ越し後すぐのフィリピン出張も終わったし、
引っ越しのもろもろの雑用も片付いてきたので、ようやく始められます。
去年の４月に神戸に引っ越す関係で退会したので、１年３ヶ月ぶりの復帰
となります。
さっそく一周 今日が初日というか初めて下高井戸店に来たので、まずは体験で一周。店
内には聞き覚えのある音楽、モニターには見覚えのあるコーチの方々。
そのあと軽く説明を受け、即入会しました。
loading...
   if (localStorage.getItem("pref-theme") === "light") { const elements = document.getElementsByClassName('twitter-tweet'); for (let i = 0; i  現金は本当にたまたま持っていたんですが、銀行印はもちろんこのために
持って来てましたw コーチも準備の良さに驚いていましたw
支払い方法がちょっと変わってた 多分ですが、支払いの方法が以前とちょっと変わっていました。
ベーシック会員 … 月々6,300円、入会時に２ヶ月分を前払い。
スタンダード会員 … 月々5,250円、入会時に６ヶ月分を前払い。
バリュー会員 … 月々4,812円、入会時に１２ヶ月分を前払い。
とりあえずスタンダード会員になりました。一括払い期間が終わったあと
(つまり半年後)、希望すれば他のコースに変更することも出来るとのこと。
その他、入会時の事務手数料が2,100円。キャンペーン中とのことで入会金
はなしでした(前もそうだったような..)。
入会手続き後、もう一周して帰路につきました。
武蔵新城店と下高井戸店の違い 下高井戸店は武蔵新城店よりやや狭く、一周は 11 分とのこと(武蔵新城店
は 15 分だったかな)。サンドバックがなく、エアボードの数も少ないです。
まあでも手軽に出来るのは最大の魅力なので、最初は何も考えず毎日行く
予定です。習慣化のためには、思考停止して毎日やるのが一番ですからね。
とか言いつつ、今日は Jenkins ユーザカンファレンス 、明日は下高井戸店
はお休みなので、初日は火曜日になります&hellip;。]]></description>
        </item>
        <item>
            <title><![CDATA[引っ越しの一括見積もりサービスを使ったら大変なことになった]]></title>
            <link>https://masutaka.net/2012-07-03-1/</link>
            <guid>https://masutaka.net/2012-07-03-1/</guid>
            <pubDate>Tue, 03 Jul 2012 00:00:00 GMT</pubDate>
            <description><![CDATA[日通さんに普通に見積もりに来てもらうことになった後、他も確認してみ
るか〜と、一括見積もりサービスを使ってみた。
引越し費用比較は「引越料金.jp」一括見積もりで格安相場が分かる！ 数秒後１０通くらいメールが来て、やや引き。
１分後最初の引っ越し屋さんから営業電話。さすが早いなあと感心しなが
ら電話を取る。聞いたことないとこだったけど、見積もりに来てもらうこ
とに。
そして５分後..
電話がひっきりなしにかかってきてドン引き。。
loading...
   if (localStorage.getItem("pref-theme") === "light") { const elements = document.getElementsByClassName('twitter-tweet'); for (let i = 0; i  loading...
   if (localStorage.getItem("pref-theme") === "light") { const elements = document.getElementsByClassName('twitter-tweet'); for (let i = 0; i  loading...
   if (localStorage.getItem("pref-theme") === "light") { const elements = document.getElementsByClassName('twitter-tweet'); for (let i = 0; i  １時間半経った今、全部で２０件着信がありました。]]></description>
        </item>
        <item>
            <title><![CDATA[「以後気をつけます。」]]></title>
            <link>https://masutaka.net/2012-06-29-2/</link>
            <guid>https://masutaka.net/2012-06-29-2/</guid>
            <pubDate>Fri, 29 Jun 2012 01:00:00 GMT</pubDate>
            <description><![CDATA[前職のころから気になっていました。「以後気をつけます。」
このフレーズ、私は使った記憶がありません。いや、使ったことはあるか
もしれませんが、よほどのことがない限り使わないです。なんでかと言う
と「以後気をつける」ことって、めちゃめちゃ大変だからです。
例えば今日何かミスをして「以後気をつけます」と言ったとします。
あなたは「以後気をつける」ことを 1 つ抱えます。
３日後に別件でミスをして、また「以後気をつけます」と言ったとします。
あなたの「以後気をつける」ことが 2 つになりました。
一週間後に..(略)
このまま続くと「以後気をつける」ことが溜まりすぎて、本来やるべきこ
とに集中できません。ギブアップです。まあ実際は「以後気をつける」の
は忘却の彼方に行くのでしょう。
重要なのは「以後気をつける」必要がないような仕組みを作ることです。
もちろん頻度が少なければ、作らないのもアリです。その都度、自分のア
タマで考えないといけませんね。]]></description>
        </item>
        <item>
            <title><![CDATA[受託開発から自サービス開発に移って気づいたことメモ]]></title>
            <link>https://masutaka.net/2012-06-29-1/</link>
            <guid>https://masutaka.net/2012-06-29-1/</guid>
            <pubDate>Fri, 29 Jun 2012 00:00:00 GMT</pubDate>
            <description><![CDATA[[2011-04-22-1] に受託開発から自サービス開発に移って、１年ちょっと過
ぎました。今さらながら気づいたことがあったので、ちょっとメモ。
受託開発は契約が無事決まるとやるべき作業や予算が決まる。どのくらい
開発リソースを使えるかが分かるので、その範囲内で新規実装やメンテナ
ンスなどをする。基本的には他の案件は発生しないが、この案件は○○に
含まれるよねなどと、契約の範囲内で対応を要望されることはよくある。
プロジェクト開始時の要件定義が重要。どちらかと言うとウォーターフォー
ル型開発と相性が良い。
自サービス開発はやるべき作業が決まっても、どこからも予算(お金)は降
りてこない。昨日決まったことが今日覆ったり、なくなったり、全然違う
急ぎの作業を要望されることは日常茶飯事。サービスをリリースしないと
売り上げが分からないので、極力小規模で開発することが重要。受託開発
と同様、中長期的なスケジュールは立てる必要はあるが、状況は刻々と変
わるため、よりこまめな更新が必要。アジャイル開発と相性が良いという
か、それしか選択肢がない。
※ 受託開発の時はそこそこの規模の会社(300人くらい)で、自サービス開
発は零細企業(開発者数人)なので、その辺の違いもあります。]]></description>
        </item>
        <item>
            <title><![CDATA[プログラムは仕様通りに動いて当たり前]]></title>
            <link>https://masutaka.net/2012-06-22-1/</link>
            <guid>https://masutaka.net/2012-06-22-1/</guid>
            <pubDate>Fri, 22 Jun 2012 00:00:00 GMT</pubDate>
            <description><![CDATA[去年の [2011-04-22-1] に組み込み系＆受託のお仕事から、Web 系＆自サー
ビス提供のお仕事に転職し改めて思ったので書き留めておきます。特定の
個人を批判する記事ではないのであしからず..。
何かサービスを作るときに、中身がぐちゃぐちゃでも動くプログラムに価
値があることには全く同意します。私は０を１にするのは得意ではないの
で、むしろ尊敬します。しかしそこで終わってしまってはそのサービスの
将来は暗いでしょう。
メンテナンス性の高いコードに！ サービスが安定稼働し始めたら、メンテナンス性の良いコードに変更して
いく必要がありますし、新しく追加する機能も同じです。
※ もっとも、緊急時は最小限の工数でできる変更を採用すべきですが、
あとで絶対に適切な修正に改めなければいけません。
その新しく追加する機能なんですが、私は実装して開発環境で意図通りに
動いた時がスタートラインだと思っています。
ちゃんと動いた時がスタートライン そこからバグや重複、むだなコード、むだなコメントを減らし、いかにメ
ンテナンス性の良いコードにするか、集中して作り込みます。もちろんテ
ストも書きます。
私はここがプログラマの腕の見せ所だと思ってますし、細かいこだわりを
入れられたり、より良いやり方で作り込めると、何度も何度もコードを読
み直してニヤニヤしてしまいます。
プログラムは仕様通りに動いて当たり前なので、プログラマとしてはメン
テナス性の良さだとか、パフォーマンスだとかの付加価値を付けることが
重要です。しょうもないバグは論外です。
もうひとつ大事なのが、コミットにストーリー性を持たせることです。
コミットにストーリー性を持たせる 私は最低でもインストール前に５回は変更を見直して、「本当にこの変更
で良いのかな」「このコミットは２つに分けた方が良いな」とか「これと
これは同じコミットだろう」とかやってます。Git だとこれが容易なので、
とっても便利です。最終的には２０回くらい見直していると思います。
※ 平時はこのくらいやる習慣を付けることが重要です。ろくに確認しない
ことを習慣化してはいけません。
インストール後は(当たり前ですが)、インストールした環境で正常に動作
するかをチェックします。
まあ、Jenkins で CI(継続的インテグレーション) やっているので、単体
レベルでの動作はあまり気にしなくて良いのは助かります。
まとめ 仕様通りに動くようにプログラムを作るのは、プログラマとして当然です。
コードに付加価値を付けることが、自分への付加価値に繋がると信じてい
ます。
おまけ 組み込み系でも Web 系でも「品質の良いコードを書く」ことについては同
じでした。前職では数百人規模のプロジェクトに所属しており、自分要因
でシステムが止まる恐ろしさは十分すぎるほど分かっているので、その点
は良い経験でした。
Web 系だと新しいツールを使いやすかったり、テスト環境も構築しやすかっ
たり、他社のプログラマーとの交流もしやすいので、プログラマーの幸福
度は高いかも？]]></description>
        </item>
        <item>
            <title><![CDATA[git stash やめました！]]></title>
            <link>https://masutaka.net/2012-06-17-2/</link>
            <guid>https://masutaka.net/2012-06-17-2/</guid>
            <pubDate>Sun, 17 Jun 2012 01:00:00 GMT</pubDate>
            <description><![CDATA[git stash は便利なんですけど、stash したのを忘れたり、egg 使ってい
ると pop しても消えなかったりするので、もう使わないことにしました。
gitで現在の作業内容をクイックセーブする - アジャイルSEを目指すブログ この記事からヒントを得て、最近はオレオレ git qsave を使ってます。
 見てのとおり、変更点を全部 commit しているだけです。
git reset &ndash;soft &lsquo;HEAD^1&rsquo; とかすれば commit 前の状態、つまり
Staging の状態に戻ります。
リセットしないであとで圧縮 commit しても良いですね。
git-qsave という名前で(git-qsave**.sh** じゃないですよ！)パスの通ったディ
レクトリに置けば、git qsave で実行できます。]]></description>
        </item>
        <item>
            <title><![CDATA[Jenkins-CLI使わずに、リポジトリの変更をプッシュ通知する方法がやっと分かった]]></title>
            <link>https://masutaka.net/2012-06-17-1/</link>
            <guid>https://masutaka.net/2012-06-17-1/</guid>
            <pubDate>Sun, 17 Jun 2012 00:00:00 GMT</pubDate>
            <description><![CDATA[git push したら、すぐにテストを実行して欲しいだけなんです。
もう、ポーリング [2011-12-30-5] で新しい commit があるかチェック
するのは嫌なんです。
いや〜、Jenkins-CLI でやろうとしてかなりハマりました。
loading...
   if (localStorage.getItem("pref-theme") === "light") { const elements = document.getElementsByClassName('twitter-tweet'); for (let i = 0; i  loading...
   if (localStorage.getItem("pref-theme") === "light") { const elements = document.getElementsByClassName('twitter-tweet'); for (let i = 0; i  loading...
   if (localStorage.getItem("pref-theme") === "light") { const elements = document.getElementsByClassName('twitter-tweet'); for (let i = 0; i  初心に返ってJenkins実践入門 読みましたが、Git には特に触れられておらず&hellip;。]]></description>
        </item>
        <item>
            <title><![CDATA[Emacs の C-x h (mark-whole-buffer) を使うようになった 〜手癖は直せる〜]]></title>
            <link>https://masutaka.net/2012-06-02-1/</link>
            <guid>https://masutaka.net/2012-06-02-1/</guid>
            <pubDate>Sat, 02 Jun 2012 00:00:00 GMT</pubDate>
            <description><![CDATA[loading...
   if (localStorage.getItem("pref-theme") === "light") { const elements = document.getElementsByClassName('twitter-tweet'); for (let i = 0; i  連投しようかと思いましたが、思い直してブログに書くことにしました。
ツイッターやるとそれなりに発散できますが、どこにも収束しませんからね。
上のツイートでは M-&lt; とか書いてますけど、実は Esc-&lt; って打ってます。
最初に触った Emacs(NEmacs(ver18.55)) は X など使えなかったので。
手癖は直せる こういう手癖ってなかなか直せないと思いがちですが、そんなことないです。
  半年ほど前、Return キーは Ctrl-m に、Tab キー Ctrl-i を打つように
手癖を直しました。キータッチが少し速くなったと思います。(鬼軍曹.el さんありがとう！)
  C-; や C-: を 1 行スクロールアップ/ダウンに割り当ててましたが、
Command-j,k に変更しました。右手小指の痛みが治りました。
  メタキーを打ちやすいように、以下の設定で Command と Option を入れ
替えてましたが、デフォルトの設定に戻しました。おかげで Emacs でも
Mac 特有のキーバインドを使えるようになったり、Super キーを積極的に
使えるようになりました。
  (setq mac-command-modifier &#39;meta) (setq mac-option-modifier &#39;super) 最初の 2 つは 10 年以上染みついた手癖です。最初は結構イライラしまし]]></description>
        </item>
        <item>
            <title><![CDATA[PHPカンファレンス関西2012に参加してきました #phpkansai]]></title>
            <link>https://masutaka.net/2012-05-13-3/</link>
            <guid>https://masutaka.net/2012-05-13-3/</guid>
            <pubDate>Sun, 13 May 2012 02:00:00 GMT</pubDate>
            <description><![CDATA[今まで参加した勉強会で一番実践的だったと思います。
もちろん私にとって。
とか言いつつ、20 分くらい遅刻してしまいましたw
PHP5.3、PHP 5.4、次のPHP 第2回 関西PHP勉強会 [2011-11-26-3] で一度聞いてはいましたが、それで
も知らないことは多々ありました。
PHP5.3 レイト・スタティック・バインディングがサポートされた。static:: が
C++ とかと同じように動作する。self::who じゃなくて static::who と
書くと、継承先の who() が使われる。
goto がサポートされた。loop の中には入れない。
クロージャがサポートされた。
クラススコープ外で const を使えるようになった。define は APC 使った
時に実行されてしまう。const はそうじゃないらしい。
省略三項演算子がサポートされた。フォームのデフォルト値を処理するの
に便利とのこと。さっそく試してみた。確かにこれは便利。
// セットされていれば、その値が使われる。 $aaa = &#39;masutaka&#39;; $value = $aaa ?: &#39;aaa&#39;; var_dump($value); //=&gt; string(8) &#34;masutaka&#34; // されていなければ、デフォルト値(&#39;aaa&#39;)が使われる。 $aaa = 0; $value = $aaa ?: &#39;aaa&#39;; var_dump($value); //=&gt; string(3) &#34;aaa&#34; PHP5.4 Traits がサポートされた。早く使おう。
Class が垂直再利用なのに対して、Traits は水平利用とのこと。なるほど。]]></description>
        </item>
        <item>
            <title><![CDATA[今見ているページをRTMに登録するブックマークレットを作った]]></title>
            <link>https://masutaka.net/2012-05-13-2/</link>
            <guid>https://masutaka.net/2012-05-13-2/</guid>
            <pubDate>Sun, 13 May 2012 01:00:00 GMT</pubDate>
            <description><![CDATA[RTM(Remember The Milk)へページを簡単に登録するブックマークレット － エンジニアが作る最新ITブログ by DODA  ここにあるAdd to RTM!ブックマークレットだと、URLとか登録できないからいやなので、
m.rememberthemilk.com経由で登録するブックマークレットを作って使っている。
 たしかに Add to RTM! ブックマークレットにはもう少し頑張って欲しいですね。
ってことで私も作りました。
javascript:(function(){var%20cp=&#39;http://m.rememberthemilk.com/add?name=&#39;+document.title+ &#39;&amp;due=Today&amp;url=&#39;+document.location; var%20w=window.open(cp,&#39;addwindow&#39;,&#39;status=no,toolbar=no,width=475,height=260,resizable=yes&#39;); setTimeout(function(){w.focus();},500);})(); // 可読性を良くするために複数行にしています。ブックマーク登録時には 1 行にしてください。  サイトのタイトルをタスク名にセットしています。 期日は今日決めうちです。リストへの振り分けは後でやるからです。 サイトの URL を URL にセットしています。 フォーカスを「タスクを追加」に合わせたいのですが、よく分かりませんでした。  Opera をお使いの聡明な皆さんへ ブックマークに追加する時にニックネームを設定すると便利です。
私は r にしました。
Shift-F2 -&gt; r の操作でこのブックマークレットのウィンドウが開きます。
参考情報: Remember the Milkを便利に使う7つのツール｜Nomad Worker Style ]]></description>
        </item>
        <item>
            <title><![CDATA[PHP の特殊メソッド __get(), __set()]]></title>
            <link>https://masutaka.net/2012-05-13-1/</link>
            <guid>https://masutaka.net/2012-05-13-1/</guid>
            <pubDate>Sun, 13 May 2012 00:00:00 GMT</pubDate>
            <description><![CDATA[class に public な変数(プロパティ)を定義することは、オブジェクト指
向のカプセル化の観点から論外ですが、private なプロパティを定義して、
get_プロパティ名(), set_プロパティ名() とかを作るのもイケてなかった
のですね。(薄々気づいてはいましたが&hellip;。)
PHP には __get() と __set() という特殊メソッドがあります。
例えば
$myclass = new MyClass;
$myclass-&gt;hoge = 1;
の場合、定義していれば MyClass::__set() が呼ばれます。
以下のように private なプロパティを定義し、__get(), __set() を介し
てアクセス制御すると良いでしょう。このプロパティは読み取り専用、こ
のプロパティは両方大丈夫とか。
class Post { private $title; private $content; private $author; private $comments; private $_getters = array(&#39;title&#39;, &#39;content&#39;, &#39;author&#39;, &#39;comments&#39;); private $_setters = array(&#39;title&#39;, &#39;content&#39;, &#39;author&#39;); public function __get($property) { if(in_array($property, $this-&gt;_getters)) { return $this-&gt;$property; } if(in_array($property, $this-&gt;_setters)) { throw new Exception(&#39;Property &#34;&#39; .]]></description>
        </item>
        <item>
            <title><![CDATA[第5回関西Emacsに参加してきました #kansai_emacs]]></title>
            <link>https://masutaka.net/2012-04-30-1/</link>
            <guid>https://masutaka.net/2012-04-30-1/</guid>
            <pubDate>Mon, 30 Apr 2012 00:00:00 GMT</pubDate>
            <description><![CDATA[第3回、第4回[2011-10-11-1] に引き続き、今回も関西Emacsに参加してきました。3回目にしてようやく顔と名前が一致してきた気がする。。。
まとめはこちらをどうぞ。
= kansai-emacs #5 - ぺっくブログミラー@peccul = #kansai_emacs 5 終了 - ぺっくブログミラー@peccul 第５回関西Emacsまとめ - Togetter 始まる前に @tomoyaton @takaxp @sanryuu_ @shigemk2 で昼食。初めてお会いした @takaxp さんは、いかついアイコンとは真逆のナイスガイでした。
  会場入りは少し遅れてしまいました。スミマセンデシタ。
まずはいつもどおり、ポジションペーパーを使った自己紹介。
 @higaki さんのツイートがなにげに嬉しかったです。
loading...
   if (localStorage.getItem("pref-theme") === "light") { const elements = document.getElementsByClassName('twitter-tweet'); for (let i = 0; i  皆さんの発表を聞いて思ったんですが、ブログの記事で読むのと、発表を聴くのとでは、印象が全く変わるものですね。
例えば flex-autopair.el の記事 は 4/1 に読んで、試さずにスルーしていたようです。でも当日は速攻インストールして試していましたw Emacs24 で動かなかったので、あとで調べてみようかな？
=&gt; 対応して下さいました。 quickrun.el もちょいちょい使っているので、@syohex さんの生の発表を聞けて良かったです。PHP で CR(^M) が出力されてしまう件は、先ほど修正 して頂けました。ありがとうございます。]]></description>
        </item>
        <item>
            <title><![CDATA[EMOBILE LTE を契約しました]]></title>
            <link>https://masutaka.net/2012-04-22-2/</link>
            <guid>https://masutaka.net/2012-04-22-2/</guid>
            <pubDate>Sun, 22 Apr 2012 01:00:00 GMT</pubDate>
            <description><![CDATA[LITE(ライト)かと思ったら、LTE(エルティーイー)とのこと。
  時々会社の UQ WiMAX ( WM3500R ) を借りて使ってましたが、面倒になっ
たので個人で契約しました。端末は上の GL02P です。
UQ WiMAX ではなくて EMOBILE LTE にした理由 やはり下り最大速度です。
EMOBILE LTE (以下 EMOBILE) は 75Mbps、UQ WiMAX (以下 WiMAX) は
40Mbps です。WiMAX でも遅くはありませんが、私はネットのスピードに
これで OK という上限はないと思っているので、これが決め手になりました。
料金は大体同じです。EMOBILE は 3980円(2年縛り) のみ。WiMAX は 3980
円(1年縛り) と 4480円(縛りなし) の 2 種類。
通信エリアも WiMAX 優勢というわけでもなさそうです。WiMAX は首都圏に
強いそうですが、EMOBILE も問題ないそうなので。むしろエリアの広さで
言ったら、EMOBILE が優勢か。
あと細かいところで EMOBILE がポイントを稼ぎました。
 すでに GL02P を使っている同じ会社の人曰く「結構良いですよ」 昔 ADSL を契約していたイー・アクセスの印象が良かった。 先週行った城崎温泉 [2012-04-22-1] では WiMAX が繋がらなかった。 イメージキャラクターがかわいいw てかこの人が AKB48 の板尾友美さんなのか。]]></description>
        </item>
        <item>
            <title><![CDATA[次世代開発手法『温泉駆動開発』のご紹介]]></title>
            <link>https://masutaka.net/2012-04-22-1/</link>
            <guid>https://masutaka.net/2012-04-22-1/</guid>
            <pubDate>Sun, 22 Apr 2012 00:00:00 GMT</pubDate>
            <description><![CDATA[先日ご紹介した『フィリピン駆動開発』[2012-03-30-1] は、導入障壁が高
いことに気づきました。そこで、より導入障壁の低い『温泉駆動開発』を
紹介したいと思います。
先週の水〜金に城崎温泉(きのさきおんせん) に行ってきました。
兵庫県の日本海側、京都府との境に近いところにあります。
道中のコンビニで撮影。いい感じの田舎具合です。
  昼食のため出石 で停車。萩に少し似た城下町でした。こういう町並みは好
きですね。
  誰？
  この辺は皿そばが有名とのこと。1 人前 5 皿です。記念品がもらえるとの
ことだったので、5 人中 3 人が 20 皿完食しました。私ももちろん完食。
  もらった記念品。肝心の皿数が書いてありません。
  城崎温泉の宿に到着。
  1 日目は内風呂が使えませんでしたが、全く問題なし。徒歩 1 分の所に外
湯がありました。温泉街だけあって、外湯はそこかしこにあります。
  スナックも多かった。夜の 9 時頃から看板の明かりが灯り始めます。
ただ、今回は勇気が出なくて入れませんでした。orz
  肝心の開発ですが、急ぎの用件があったのでいつもどおりのタスクをこな
してしまいました。ネットワークが貧弱なのは残念でしたけど、『フィリ
ピン駆動開発』と同様、普通にはかどったと思います。
部屋には作業しやすい机と椅子がなかったので、結構腰にきました。これ
は次回への課題ですね。
3 日目は雨でした。なんとか天気がもって良かったです。
  合わせて読みたい:
2012年春の開発合宿に行ってきました。 - 日々、とんは語る。 ]]></description>
        </item>
        <item>
            <title><![CDATA[『八日目の蝉』を観た]]></title>
            <link>https://masutaka.net/2012-04-17-1/</link>
            <guid>https://masutaka.net/2012-04-17-1/</guid>
            <pubDate>Tue, 17 Apr 2012 00:00:00 GMT</pubDate>
            <description><![CDATA[今回も前知識なしで観ました。すごく良い映画。
過去と現在がパラレルに進行する映画はよくありますが、使い方を間違え
ると観てて訳が分からなくなります。そういう意味では、この映画は全く
違和感がありませんでした。色使いを変えているんですかね。
昔自分が住んでいた土地を訪問することって、なにか用語ありましたっけ？
実は私、これがすごく好きなんです。
社会人になった数年後に、大学時代に住んでいた宇都宮のアパートを訪問
した時は何とも言えない思いになりましたし、最近だと２月に武蔵新城を
ぶらぶら歩いた時も同じでした。ゲームだと FF5 で故郷の村に戻るシーン
が好きですね(音楽も)。
失礼な話ではありますが、店が潰れてたりするとなお良いです。この映画
でもそんなシーンが何カ所か出て来て、結構萌えました。
そして永作博美 があいかわらず良いです。彼女は ribbon 時代から知って
ますが、青い鳥 で惚れました。思えば青い鳥も逃亡のドラマですね。
ということで(?)、オススメの映画です。]]></description>
        </item>
        <item>
            <title><![CDATA[これからの開発手法の本流『フィリピン駆動開発』]]></title>
            <link>https://masutaka.net/2012-03-30-1/</link>
            <guid>https://masutaka.net/2012-03-30-1/</guid>
            <pubDate>Fri, 30 Mar 2012 00:00:00 GMT</pubDate>
            <description><![CDATA[3/9 から 3/27 まで、フィリピンのセブシティ に出張に行ってました。
  フィリピンは去年の 3 月[2011-04-22-1] 、8 月に続いて 3 回目です。出
張と言っても特別に用があるわけでもなく、新オフィスが出来る関係で人
が集まるから、ちょっと行ってみようかという程度の話でした。
  でもまあ、現地スタッフと直接話して問題点が分かったのは良かったです
し、半年前にはちょっと想像がつかないくらい大きくなった会社を目の当
たりにすることも出来ました。
  それ以外の時間はこういうカフェで仕事をしてました。
  フィリピンには Wifi と電源が使えるカフェが結構あって、長時間いても
文句を言われることはありません。みんなおおらかというか、気にしない
のでしょうね。私のようにネットさえあれば仕事が出来る人にとっては、
悪くない環境です。
滞在場所はなかなかストイックなレジデンスでした。ネットが使えるのは
1 階の、24:00 で閉まるインターネットスペースだけ(1時間15ペソ(30円))。
部屋にシャワーは付いていますが、お湯は出ません(フィリピンだと普通)。
これが何をもたらしたかというと、、、生活が超規則正しくなりました。
部屋でネットが出来ないので、帰ったら寝るしかないんです。私はホット
シャワーじゃないと痛くて髭を剃れないので、シャワーも浴びず歯を磨い
てバタンです。
ほぼ毎日こんなサイクルでした。
8:00 起床、歯を磨いてすぐにマリオットホテル に移動
8:30 同ホテルのジム(マンスリー会員になった)でシャワー
9:30 近くのカフェで朝食を取りつつ仕事開始
18:00 この辺で疲れてくるので仕事終了。飲みに行ったり、マッサージに行ったり。
24:00 就寝
生活が規則正しくなると、仕事が進むもんですね。先日こんな記事 があり
ましたが、やはりカフェとコーディングは相性がよいです。おまけにフィ
リピンだと他の客が何喋っているか分からないので、さらに集中できます。
実感として日本にいる時の２倍くらい捗っていた気がします。ちょっと調
べてみました。
   期間 終了したチケット commit回数 変更ファイル数 追加行数 削除行数     2012 2/1-2/29 18 35 165 2825 1228   2012 3/1-3/29 40 64 233 3321 1483    終了したチケットと commit 回数が２倍くらいになってます。変更した行]]></description>
        </item>
        <item>
            <title><![CDATA[アウトラインのSVGからフォントを生成 #かな書いてみる]]></title>
            <link>https://shiromoji.hatenablog.jp/entry/20120314/1331744357</link>
            <guid>https://shiromoji.hatenablog.jp/entry/20120314/1331744357</guid>
            <pubDate>Tue, 13 Mar 2012 16:59:17 GMT</pubDate>
            <description><![CDATA[<p>IVSやら何やら他の話題に飛びついていたので間が空いてしまったが、明朝かな書体制作のつづき。<a href="http://d.hatena.ne.jp/mashabow/20120229/1330530950">&#x524D;&#x56DE;&#x306F;&#x30A2;&#x30A6;&#x30C8;&#x30E9;&#x30A4;&#x30F3;&#x3092;&#x4F5C;&#x3063;&#x305F;</a>ので、今回はここからフォントを生成したい。</p>

<div class="section">
    <h4><a class="keyword" href="http://d.hatena.ne.jp/keyword/SVG">SVG</a>の分割</h4>
    
<ul>
<li><a href="http://shiromoji.net/font/zeromin/0.100/hiragana_1.svg">hiragana_1.svg</a></li>
</ul><p>まず、これがアウトラインのファイル。<a class="keyword" href="http://d.hatena.ne.jp/keyword/Inkscape">Inkscape</a> で作成し、<a class="keyword" href="http://d.hatena.ne.jp/keyword/SVG">SVG</a>として保存した。アウトラインは outline という名前のレイヤーの中に作っている。仮想ボディのサイズは100pxとした。</p><p>これをグリフごとに分割し、1文字1ファイルにする。今回は（も？）<a class="keyword" href="http://d.hatena.ne.jp/keyword/Perl">Perl</a> で簡単な<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%B9%A5%AF%A5%EA%A5%D7%A5%C8">スクリプト</a>を書き、これを利用した。単純なものなので、path 要素以外の要素（グループも含む）に対応していないなどいろいろと制限はある。また <a href="http://search.cpan.org/perldoc?XML::Simple">XML::Simple</a> を利用しているので、実行するには <a class="keyword" href="http://d.hatena.ne.jp/keyword/XML">XML</a>::Simple のインストールが必要。</p>

<ul>
<li><a href="http://shiromoji.net/font/zeromin/0.100/split_svg.pl">split_svg.pl</a></li>
</ul><pre class="code lang-perl" data-lang="perl" data-unlink><span class="synPreProc">#!/usr/bin/perl</span>
<span class="synComment">#</span>
<span class="synComment"># SVGをグリフごとに分割</span>
<span class="synComment"># usage: perl split_svg.pl svg_sheet.svg list.txt</span>

<span class="synStatement">use strict</span>;
<span class="synStatement">use warnings</span>;
<span class="synStatement">use </span>autodie;
<span class="synStatement">use utf8</span>;
<span class="synStatement">use </span><span class="synConstant">5.010</span>;
<span class="synStatement">binmode</span> <span class="synIdentifier">STDOUT</span>, <span class="synConstant">&quot;:utf8&quot;</span>;

<span class="synStatement">use constant</span> <span class="synConstant">OUT_DIR</span> =&gt; <span class="synConstant">&quot;glyphs&quot;</span>;
<span class="synStatement">use constant</span> <span class="synConstant">PIXELS_PER_EM</span> =&gt;  <span class="synConstant">100</span>;
<span class="synStatement">use constant</span> <span class="synConstant">UNITS_PER_EM</span>  =&gt; <span class="synConstant">1000</span>;

<span class="synStatement">use </span>XML::Simple;

<span class="synStatement">my</span> (<span class="synIdentifier">$svg_file</span>, <span class="synIdentifier">$list_file</span>) = <span class="synIdentifier">@ARGV</span>;

<span class="synComment"># SVG 読み込み</span>
<span class="synStatement">my</span> <span class="synIdentifier">$svg</span> = XMLin(<span class="synIdentifier">$svg_file</span>, <span class="synConstant">forcearray</span> =&gt; <span class="synConstant">1</span>, <span class="synConstant">keyattr</span> =&gt; []);

<span class="synComment"># 行数・列数を求める</span>
<span class="synStatement">my</span> <span class="synIdentifier">$row_max</span> = <span class="synStatement">int</span> (<span class="synIdentifier">$svg-&gt;{</span><span class="synConstant">height</span><span class="synIdentifier">}</span> / PIXELS_PER_EM) - <span class="synConstant">1</span>;
<span class="synStatement">my</span> <span class="synIdentifier">$col_max</span> = <span class="synStatement">int</span> (<span class="synIdentifier">$svg-&gt;{</span><span class="synConstant">width</span><span class="synIdentifier">}</span> / PIXELS_PER_EM) - <span class="synConstant">1</span>;

<span class="synComment"># outline レイヤーを探す</span>
<span class="synStatement">my</span> <span class="synIdentifier">$groups</span> = <span class="synIdentifier">$svg-&gt;{</span><span class="synConstant">g</span><span class="synIdentifier">}</span>;
<span class="synStatement">my</span> <span class="synIdentifier">$group_outline</span>;
<span class="synStatement">foreach</span> <span class="synStatement">my</span> <span class="synIdentifier">$group</span> (<span class="synIdentifier">@$groups</span>) {
  <span class="synStatement">if</span> (<span class="synIdentifier">$group-&gt;{</span><span class="synConstant">'inkscape:label'</span><span class="synIdentifier">}</span> <span class="synStatement">eq</span> <span class="synConstant">&quot;outline&quot;</span>) {
    <span class="synIdentifier">$group_outline</span> = <span class="synIdentifier">$group</span>;
    <span class="synStatement">last</span>;
  }
}
<span class="synStatement">die</span> <span class="synConstant">&quot;outlineレイヤーが存在しません&quot;</span> <span class="synStatement">unless</span> <span class="synStatement">defined</span> <span class="synIdentifier">$group_outline</span>;

<span class="synComment"># 変換行列を求める</span>
<span class="synStatement">my</span> <span class="synIdentifier">$transform</span> = <span class="synIdentifier">$group_outline-&gt;{</span><span class="synConstant">transform</span><span class="synIdentifier">}</span>;
<span class="synStatement">my</span> (<span class="synIdentifier">$a</span>, <span class="synIdentifier">$b</span>, <span class="synIdentifier">$c</span>, <span class="synIdentifier">$d</span>, <span class="synIdentifier">$e</span>, <span class="synIdentifier">$f</span>) = (<span class="synConstant">1</span>, <span class="synConstant">0</span>, <span class="synConstant">0</span>, <span class="synConstant">1</span>, <span class="synConstant">0</span>, <span class="synConstant">0</span>);
<span class="synStatement">if</span> (!<span class="synStatement">defined</span> <span class="synIdentifier">$transform</span>) {
  <span class="synComment"># noop</span>
} <span class="synStatement">elsif</span> (<span class="synIdentifier">$transform</span> =~ <span class="synStatement">m/</span><span class="synConstant">translate</span><span class="synSpecial">\((?</span><span class="synConstant">&lt;tx&gt;-</span><span class="synSpecial">?\d+(.\d+)?(</span><span class="synConstant">e-</span><span class="synSpecial">?\d+)?)</span><span class="synConstant">,</span><span class="synSpecial">(?</span><span class="synConstant">&lt;ty&gt;-</span><span class="synSpecial">?\d+(.\d+)?(</span><span class="synConstant">e-</span><span class="synSpecial">?\d+)?)\)</span><span class="synStatement">/</span>) {
  <span class="synIdentifier">$e</span> = <span class="synIdentifier">$+</span>{tx};
  <span class="synIdentifier">$f</span> = <span class="synIdentifier">$+</span>{ty};
} <span class="synStatement">elsif</span> (<span class="synIdentifier">$transform</span> =~ <span class="synStatement">m/</span><span class="synConstant">matrix</span><span class="synSpecial">\((?</span><span class="synConstant">&lt;a&gt;-</span><span class="synSpecial">?\d+(.\d+)?(</span><span class="synConstant">e-</span><span class="synSpecial">?\d+)?)</span><span class="synConstant">,</span><span class="synSpecial">(?</span><span class="synConstant">&lt;b&gt;-</span><span class="synSpecial">?\d+(.\d+)?(</span><span class="synConstant">e-</span><span class="synSpecial">?\d+)?)\)</span><span class="synConstant">,</span><span class="synSpecial">(?</span><span class="synConstant">&lt;c&gt;-</span><span class="synSpecial">?\d+(.\d+)?(</span><span class="synConstant">e-</span><span class="synSpecial">?\d+)?)</span><span class="synConstant">,</span><span class="synSpecial">(?</span><span class="synConstant">&lt;d&gt;-</span><span class="synSpecial">?\d+(.\d+)?(</span><span class="synConstant">e-</span><span class="synSpecial">?\d+)?)</span><span class="synConstant">,</span><span class="synSpecial">(?</span><span class="synConstant">&lt;e&gt;-</span><span class="synSpecial">?\d+(.\d+)?(</span><span class="synConstant">e-</span><span class="synSpecial">?\d+)?)</span><span class="synConstant">,</span><span class="synSpecial">(?</span><span class="synConstant">&lt;f&gt;-</span><span class="synSpecial">?\d+(.\d+)?(</span><span class="synConstant">e-</span><span class="synSpecial">?\d+)?)</span><span class="synStatement">/</span>) {
  <span class="synIdentifier">$a</span> = <span class="synIdentifier">$+</span>{a};  <span class="synIdentifier">$c</span> = <span class="synIdentifier">$+</span>{c};  <span class="synIdentifier">$e</span> = <span class="synIdentifier">$+</span>{e};
  <span class="synIdentifier">$b</span> = <span class="synIdentifier">$+</span>{b};  <span class="synIdentifier">$d</span> = <span class="synIdentifier">$+</span>{d};  <span class="synIdentifier">$f</span> = <span class="synIdentifier">$+</span>{f};
} <span class="synStatement">else</span> {
  <span class="synStatement">die</span> <span class="synConstant">&quot;未対応のtransformです: </span><span class="synIdentifier">$transform</span><span class="synConstant">&quot;</span>
}

<span class="synComment"># グリフごとに path を格納する変数</span>
<span class="synStatement">my</span> <span class="synIdentifier">@glyphs</span> = ();
<span class="synStatement">foreach</span> <span class="synStatement">my</span> <span class="synIdentifier">$row</span> (<span class="synConstant">0</span> .. <span class="synIdentifier">$row_max</span>) {
  <span class="synStatement">foreach</span> <span class="synStatement">my</span> <span class="synIdentifier">$col</span> (<span class="synConstant">0</span> .. <span class="synIdentifier">$col_max</span>) {
    <span class="synIdentifier">$glyphs[$row][$col]</span> = [];
  }
}

<span class="synComment"># @glyphs にパスを格納</span>
<span class="synStatement">my</span> <span class="synIdentifier">$paths</span> = <span class="synIdentifier">$group_outline-&gt;{</span><span class="synConstant">path</span><span class="synIdentifier">}</span>;
<span class="synStatement">foreach</span> <span class="synStatement">my</span> <span class="synIdentifier">$path</span> (<span class="synIdentifier">@$paths</span>) {
  <span class="synStatement">my</span> <span class="synIdentifier">@data_args</span> = <span class="synStatement">split</span> <span class="synStatement">/</span><span class="synSpecial">\s+</span><span class="synStatement">/</span>, <span class="synIdentifier">$path-&gt;{</span><span class="synConstant">d</span><span class="synIdentifier">}</span>;
  <span class="synStatement">my</span> <span class="synIdentifier">$new_data</span> = <span class="synConstant">&quot;&quot;</span>;
  <span class="synStatement">my</span> (<span class="synIdentifier">$col</span>, <span class="synIdentifier">$row</span>);
  <span class="synStatement">my</span> <span class="synIdentifier">$is_moveto_point</span> = <span class="synConstant">1</span>;
  <span class="synStatement">foreach</span> <span class="synStatement">my</span> <span class="synIdentifier">$data_arg</span> (<span class="synIdentifier">@data_args</span>) {
    <span class="synStatement">if</span> (<span class="synIdentifier">$data_arg</span> =~ <span class="synStatement">m/</span><span class="synSpecial">(?</span><span class="synConstant">&lt;x&gt;-</span><span class="synSpecial">?\d+(.\d+)?)</span><span class="synConstant">,</span><span class="synSpecial">(?</span><span class="synConstant">&lt;y&gt;-</span><span class="synSpecial">?\d+(.\d+)?)</span><span class="synStatement">/</span>) {
      <span class="synStatement">my</span> <span class="synIdentifier">$x</span> = <span class="synIdentifier">$+</span>{x};
      <span class="synStatement">my</span> <span class="synIdentifier">$y</span> = <span class="synIdentifier">$+</span>{<span class="synStatement">y}</span><span class="synConstant">;</span>
<span class="synConstant">      if ($is_moveto_point) {</span>
<span class="synConstant">        $x = $a * $x + $c * $y + $e;</span>
<span class="synConstant">        $y = $b * $x + $d * $y + $f;</span>
<span class="synConstant">        $col = int ($x / PIXELS_PER_EM);</span>
<span class="synConstant">        $row = int ($y / PIXELS_PER_EM);</span>
<span class="synConstant">        $x %= PIXELS_PER_EM;</span>
<span class="synConstant">        $y %= PIXELS_PER_EM;</span>
<span class="synConstant">        $is_moveto_point = 0;</span>
<span class="synConstant">      </span><span class="synStatement">}</span>
<span class="synConstant">      $x *= UNITS_PER_EM / PIXELS_PER_EM;</span>
<span class="synConstant">      $y *= UNITS_PER_EM / PIXELS_PER_EM;</span>
<span class="synConstant">      $data_arg = &quot;$x,$y&quot;</span>
<span class="synConstant">    </span><span class="synStatement">}</span>
    <span class="synIdentifier">$new_data</span> .= <span class="synConstant">&quot;</span><span class="synIdentifier">$data_arg</span><span class="synConstant"> &quot;</span>;
  } 
  <span class="synStatement">next</span> <span class="synStatement">if</span> (<span class="synIdentifier">$col</span> &lt; <span class="synConstant">0</span> || <span class="synIdentifier">$col_max</span> &lt; <span class="synIdentifier">$col</span> || <span class="synIdentifier">$row</span> &lt; <span class="synConstant">0</span> || <span class="synIdentifier">$row_max</span> &lt; <span class="synIdentifier">$row</span>);
  <span class="synIdentifier">$path-&gt;{</span><span class="synConstant">d</span><span class="synIdentifier">}</span> = <span class="synIdentifier">$new_data</span>;
  <span class="synStatement">push</span> <span class="synIdentifier">@{$glyphs[$row][$col]}</span>, <span class="synIdentifier">$path</span>;
}

<span class="synComment"># リスト読み込み</span>
<span class="synStatement">my</span> <span class="synIdentifier">@glyphname_list</span> = ();
<span class="synStatement">open</span> <span class="synStatement">my</span> <span class="synIdentifier">$fh_list</span>, <span class="synConstant">'&lt;:utf8'</span>, <span class="synIdentifier">$list_file</span>;
<span class="synStatement">while</span> (<span class="synStatement">my</span> <span class="synIdentifier">$line</span> = &lt;<span class="synIdentifier">$fh_list</span>&gt;) {
  <span class="synStatement">chomp</span> <span class="synIdentifier">$line</span>;
  <span class="synStatement">my</span> <span class="synIdentifier">@list</span> = <span class="synStatement">map {</span> <span class="synStatement">sprintf</span> <span class="synConstant">&quot;u%x&quot;</span>, (<span class="synStatement">unpack</span> <span class="synConstant">&quot;U*&quot;</span>, <span class="synIdentifier">$_</span>) <span class="synStatement">}</span> <span class="synStatement">split</span> <span class="synStatement">/</span><span class="synConstant"> </span><span class="synSpecial">+</span><span class="synStatement">/</span>, <span class="synIdentifier">$line</span>;
  <span class="synStatement">push</span> <span class="synIdentifier">@glyphname_list</span>, \<span class="synIdentifier">@list</span>;
}
<span class="synStatement">close</span> <span class="synIdentifier">$fh_list</span>;

<span class="synComment"># 各グリフの SVG を生成</span>
<span class="synStatement">mkdir</span> OUT_DIR <span class="synStatement">if</span> !<span class="synStatement">-d</span> OUT_DIR;
<span class="synStatement">foreach</span> <span class="synStatement">my</span> <span class="synIdentifier">$row</span> (<span class="synConstant">0</span> .. <span class="synIdentifier">$row_max</span>) {
  <span class="synStatement">foreach</span> <span class="synStatement">my</span> <span class="synIdentifier">$col</span> (<span class="synConstant">0</span> .. <span class="synIdentifier">$col_max</span>) {
    <span class="synStatement">my</span> <span class="synIdentifier">$svg</span>;
    <span class="synIdentifier">$svg-&gt;{</span><span class="synConstant">'xmlns:sodipodi'</span><span class="synIdentifier">}</span> = <span class="synConstant">&quot;http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd&quot;</span>;
    <span class="synIdentifier">$svg-&gt;{</span><span class="synConstant">'xmlns:inkscape'</span><span class="synIdentifier">}</span> = <span class="synConstant">&quot;http://www.inkscape.org/namespaces/inkscape&quot;</span>;
    <span class="synIdentifier">$svg-&gt;{</span><span class="synConstant">width</span><span class="synIdentifier">}</span> = UNITS_PER_EM;
    <span class="synIdentifier">$svg-&gt;{</span><span class="synConstant">height</span><span class="synIdentifier">}</span> = UNITS_PER_EM;
    <span class="synIdentifier">$svg-&gt;{</span><span class="synConstant">path</span><span class="synIdentifier">}</span> = <span class="synIdentifier">$glyphs[$row][$col]</span>;
    <span class="synStatement">my</span> <span class="synIdentifier">$svg_string</span> = <span class="synConstant">'&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;'</span>;
    <span class="synIdentifier">$svg_string</span> .= <span class="synConstant">&quot;</span><span class="synSpecial">\n</span><span class="synConstant">&quot;</span> . XMLout(<span class="synIdentifier">$svg</span>, <span class="synConstant">RootName</span> =&gt; <span class="synConstant">&quot;svg&quot;</span>);
    <span class="synStatement">my</span> <span class="synIdentifier">$glyphname</span> = <span class="synIdentifier">$glyphname_list[$row][$col]</span>;
    <span class="synStatement">next</span> <span class="synStatement">if</span> (!<span class="synStatement">defined</span> <span class="synIdentifier">$glyphname</span> || <span class="synIdentifier">$glyphname</span> <span class="synStatement">eq</span> <span class="synConstant">&quot;u3000&quot;</span>); <span class="synComment"># u3000：全角スペース</span>
    <span class="synStatement">open</span> <span class="synStatement">my</span> <span class="synIdentifier">$fh_out</span>, <span class="synConstant">'&gt;'</span>, OUT_DIR . <span class="synConstant">&quot;/</span><span class="synIdentifier">$glyphname</span><span class="synConstant">.svg&quot;</span>;
    <span class="synStatement">print</span> <span class="synIdentifier">$fh_out</span> <span class="synIdentifier">$svg_string</span>;
    <span class="synStatement">close</span> <span class="synIdentifier">$fh_out</span>;
  }
}

<span class="synStatement">exit</span> <span class="synConstant">0</span>;
</pre><p><a class="keyword" href="http://d.hatena.ne.jp/keyword/SVG">SVG</a>のどのマスがどのグリフか、割り当て表も用意しておく。</p>

<ul>
<li><a href="http://shiromoji.net/font/zeromin/0.100/hiragana_list.txt">hiragana_list.txt</a></li>
</ul>
<pre>あ い う え お
か き く け こ
さ し す せ そ
た ち つ て と
な に ぬ ね の
は ひ ふ へ ほ
ま み む め も
や 　 ゆ 　 よ
ら り る れ ろ
わ ゐ ん ゑ を
</pre><p>これを例えば</p>

<pre>> <a class="keyword" href="http://d.hatena.ne.jp/keyword/perl">perl</a> split_<a class="keyword" href="http://d.hatena.ne.jp/keyword/svg">svg</a>.pl hiragana_1.<a class="keyword" href="http://d.hatena.ne.jp/keyword/svg">svg</a> hiragana_list.txt
</pre><p>として実行すれば、glyphs ディレクトリに一字一字の<a class="keyword" href="http://d.hatena.ne.jp/keyword/SVG">SVG</a>が生成される。</p>

</div>
<div class="section">
    <h4><a class="keyword" href="http://d.hatena.ne.jp/keyword/FontForge">FontForge</a> でフォント化</h4>
    <p>そして、このバラした<a class="keyword" href="http://d.hatena.ne.jp/keyword/SVG">SVG</a>ファイルを <a href="http://fontforge.sourceforge.net/ja/overview.html">FontForge</a> に取り込み、フォントを生成する。</p><p><a class="keyword" href="http://d.hatena.ne.jp/keyword/FontForge">FontForge</a> では<a class="keyword" href="http://d.hatena.ne.jp/keyword/SVG">SVG</a>の1pxがフォントの1ユニットに相当する。また、OpenType の標準は1000ユニット/emなので、インポート元の<a class="keyword" href="http://d.hatena.ne.jp/keyword/SVG">SVG</a>を1000×1000pxにしておくとちょうど良い。今回は、split_<a class="keyword" href="http://d.hatena.ne.jp/keyword/svg">svg</a>.pl でバラすときに<a class="keyword" href="http://d.hatena.ne.jp/keyword/SVG">SVG</a>のサイズを1000×1000pxへ変換しているので、あとはそのままインポートするだけでよい。</p>

<ul>
<li><a href="http://shiromoji.net/font/zeromin/0.100/generate.pe">generate.pe</a></li>
</ul>
<pre>#!/usr/bin/<a class="keyword" href="http://d.hatena.ne.jp/keyword/fontforge">fontforge</a> -script

if ($argc != 2)
  Print("usage: <a class="keyword" href="http://d.hatena.ne.jp/keyword/fontforge">fontforge</a> -script " + $0 + " [version]")
  Quit()
endif

_version      = $1
_fontfilename = "zeromin_" + _version + ".otf"
_importfiles  = "glyphs/u*.<a class="keyword" href="http://d.hatena.ne.jp/keyword/svg">svg</a>"

New()

# .notdef作成
Select(0x0000)
SetWidth(1000)
SetGlyphName(".notdef")

# <a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%A8%A5%F3%A5%B3%A1%BC%A5%C9">エンコード</a>に<a class="keyword" href="http://d.hatena.ne.jp/keyword/Unicode">Unicode</a>を指定
Reencode("<a class="keyword" href="http://d.hatena.ne.jp/keyword/unicode">unicode</a>")

# <a class="keyword" href="http://d.hatena.ne.jp/keyword/SVG">SVG</a>をすべてインポート
Import(_importfiles, 0)

# 自動ヒントづけOFF
SelectAll()
DontAutoHint()

# パスの統合
RemoveOverlap()

# 整数値に丸める
RoundToInt()

# 半角スペース作成
Select(0u0020)
SetWidth(500)

# 全角スペース作成
Select(0u3000)
SetWidth(1000)

# フォント情報設定
SetFontNames("ZeroMin",\
             "ZeroMin",\
             "ZeroMin",\
             "Regular",\
             "<a class="keyword" href="http://d.hatena.ne.jp/keyword/%26%23169%3B">&#169;</a> 2012 mashabow",\
             _version) 
SetOS2Value("WinAscent", 880)
SetOS2Value("WinDescent", 120)
SetOS2Value("HHeadAscent", 880)
SetOS2Value("HHeadDescent", -120)

# OTF生成
Generate(_fontfilename)
Print("generated: "+ _fontfilename)

Close()

Quit()
</pre><p>この<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%B9%A5%AF%A5%EA%A5%D7%A5%C8">スクリプト</a>を <a class="keyword" href="http://d.hatena.ne.jp/keyword/FontForge">FontForge</a> で動かせば<a href="#f-cf7ed247" name="fn-cf7ed247" title="unofficial fontforge-cygwin でのスクリプトの動かし方は[http://d.hatena.ne.jp/mashabow/20110802/1312290209:title=この記事]を参照。">*1</a>、とりあえずはフォントが生成される。最初の<a class="keyword" href="http://d.hatena.ne.jp/keyword/%CC%C0%C4%AB%C2%CE">明朝体</a>ということで「ZeroMin」と仮に名付けてみた。</p>

</div>
<div class="section">
    <h4>試し打ち</h4>
    <p>出来上がったフォントをインストールして、さっそく試し打ち。</p>

<ul>
<li><a href="http://shiromoji.net/font/zeromin/0.100/sample_0.100.pdf">sample_0.100.pdf</a></li>
</ul><p>んー。初めてにしてはまずまずなような気もしないでもないけど、やっぱり字面の大きさや寄り引き、太さなんかのバラつきが目立つ。実用にはちょっと堪えない。</p><p>というわけで、まだまだ先は長そう。</p>

</div><div class="footnote">
<p class="footnote"><a href="#fn-cf7ed247" name="f-cf7ed247" class="footnote-number">*1</a><span class="footnote-delimiter">:</span><span class="footnote-text">unofficial <a class="keyword" href="http://d.hatena.ne.jp/keyword/fontforge">fontforge</a>-<a class="keyword" href="http://d.hatena.ne.jp/keyword/cygwin">cygwin</a> での<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%B9%A5%AF%A5%EA%A5%D7%A5%C8">スクリプト</a>の動かし方は<a href="http://d.hatena.ne.jp/mashabow/20110802/1312290209">&#x3053;&#x306E;&#x8A18;&#x4E8B;</a>を参照。</span></p>
</div>]]></description>
            <enclosure url="https://cdn.blog.st-hatena.com/images/theme/og-image-1500.png" length="0" type="image/png"/>
        </item>
        <item>
            <title><![CDATA[JIS X 0208 と JIS X 0213 が改正されていた件]]></title>
            <link>https://shiromoji.hatenablog.jp/entry/20120311/1331456551</link>
            <guid>https://shiromoji.hatenablog.jp/entry/20120311/1331456551</guid>
            <pubDate>Sun, 11 Mar 2012 09:02:31 GMT</pubDate>
            <description><![CDATA[<p><a href="http://d.hatena.ne.jp/mashabow/20111222/1324570126">&#x6628;&#x5E74;12&#x6708;&#x306B;&#x5C0F;&#x6797;&#x3055;&#x3093;&#x306E;&#x8B1B;&#x6F14;&#x3092;&#x805E;&#x3044;&#x305F;</a>とき、<a class="keyword" href="http://d.hatena.ne.jp/keyword/JIS%20X%200213">JIS X 0213</a> が近々改正されるというようなことをおっしゃっていた。そんなことはほとんど忘れていたのだが、</p>

    <blockquote cite="http://toro.2ch.net/test/read.cgi/tech/1306595564/">
        <p><b>584 デフォルトの名無しさん 2012/03/11(日) 13:26:15.37</b><br />
　そういや結局0213って改正するの？ <a class="keyword" href="http://d.hatena.ne.jp/keyword/%BE%EF%CD%D1%B4%C1%BB%FA">常用漢字</a>の関係で <br />
 <br />
<b>588 デフォルトの名無しさん 2012/03/11(日) 16:02:37.18</b><br />
　JISCのサイト言ったらいつのまにか改正されててワロタ<br>　誰も気づかなかったのか…</p>

        <cite><a href="http://toro.2ch.net/test/read.cgi/tech/1306595564/">&#x6587;&#x5B57;&#x30B3;&#x30FC;&#x30C9;&#x7DCF;&#x5408;&#x30B9;&#x30EC; part7</a></cite>
    </blockquote>
<p>な、なんだってー！(AAry</p><p><a href="http://www.jisc.go.jp/app/JPS/JPSO0020.html">JISC&#x306E;&#x30B5;&#x30A4;&#x30C8;</a>で調べてみると、たしかに2012年2月20日付で <a class="keyword" href="http://d.hatena.ne.jp/keyword/JIS%20X%200208">JIS X 0208</a> と <a class="keyword" href="http://d.hatena.ne.jp/keyword/JIS%20X%200213">JIS X 0213</a> が改正され、<a class="keyword" href="http://d.hatena.ne.jp/keyword/JIS%20X%200208">JIS X 0208</a>:2012 と <a class="keyword" href="http://d.hatena.ne.jp/keyword/JIS%20X%200213">JIS X 0213</a>:2012 になっている。それぞれ第5次規格、第3次規格にあたる。どちらも追補の形で出されており、PDFでは後ろ2ファイルが改正分になっている。</p><p>改正点はざっとこんな感じ。</p>

<ul>
<li>6.6.2「字体の表現としての字形」において、旧<a class="keyword" href="http://d.hatena.ne.jp/keyword/%BE%EF%CD%D1%B4%C1%BB%FA%C9%BD">常用漢字表</a>「（付）字体についての解説 第1 <a class="keyword" href="http://d.hatena.ne.jp/keyword/%CC%C0%C4%AB%C2%CE">明朝体</a>活字のデザインについて」から引用していた「例」を削除し、代わりに新<a class="keyword" href="http://d.hatena.ne.jp/keyword/%BE%EF%CD%D1%B4%C1%BB%FA%C9%BD">常用漢字表</a>から引用。</li>
<li>附属書6（参考）「漢字の分類及び配列」の（旧）常用音訓を示す「[常]」を削除。（0208のみ）</li>
<li>附属書12（参考）「この規格と<a class="keyword" href="http://d.hatena.ne.jp/keyword/%BE%EF%CD%D1%B4%C1%BB%FA%C9%BD">常用漢字表</a>との対応」を追加。区点位置・例示字体・音訓を示す。</li>
</ul><p>というわけで、2010年11月30日の<a class="keyword" href="http://d.hatena.ne.jp/keyword/%BE%EF%CD%D1%B4%C1%BB%FA%C9%BD">常用漢字表</a>改定に合わせた小さな改正になっている。規格の内容自体に関しては、実質的な変更はない。</p>
]]></description>
            <enclosure url="https://cdn.blog.st-hatena.com/images/theme/og-image-1500.png" length="0" type="image/png"/>
        </item>
        <item>
            <title><![CDATA[花園明朝OT＋Web フォントによるIVSと OpenType feature tag の表示テスト]]></title>
            <link>https://shiromoji.hatenablog.jp/entry/20120308/1331194033</link>
            <guid>https://shiromoji.hatenablog.jp/entry/20120308/1331194033</guid>
            <pubDate>Thu, 08 Mar 2012 08:07:13 GMT</pubDate>
            <description><![CDATA[<p>ブラウザ上で<a class="keyword" href="http://d.hatena.ne.jp/keyword/%B0%DB%C2%CE%BB%FA">異体字</a>を表示するには、2つの方法がある。<a href="http://ja.wikipedia.org/wiki/%E7%95%B0%E4%BD%93%E5%AD%97%E3%82%BB%E3%83%AC%E3%82%AF%E3%82%BF">&#x7570;&#x4F53;&#x5B57;&#x30BB;&#x30EC;&#x30AF;&#x30BF;</a>を使ってIVSで<a class="keyword" href="http://d.hatena.ne.jp/keyword/%B0%DB%C2%CE%BB%FA">異体字</a>を表現する方法と、CSS3の font-feature-settings プロパティを使って OpenType feature tag によるグリフ置換をする方法だ。今回、<a href="http://shiromoji.net/font/HanaMinOT/">&#x82B1;&#x5712;&#x660E;&#x671D;OT</a>を Web フォントとして利用し、この2つの方法で<a class="keyword" href="http://d.hatena.ne.jp/keyword/%B0%DB%C2%CE%BB%FA">異体字</a>の表示テストを行った。</p>

<div class="section">
    <h4>方法の具体的な解説</h4>
    
<div class="section">
    <h5>IVSによる方法</h5>
    <p>IVS（Ideographic Variation Sequence）は親字（基底文字）にVS（Variation Selector; U+E0100&#8211;U+E01EF）をつけて<a class="keyword" href="http://d.hatena.ne.jp/keyword/%B0%DB%C2%CE%BB%FA">異体字</a>を表現する。詳しくは下の <a class="keyword" href="http://d.hatena.ne.jp/keyword/Wikipedia">Wikipedia</a> の記事などを参照。</p>

<ul>
<li><a href="http://ja.wikipedia.org/wiki/%E7%95%B0%E4%BD%93%E5%AD%97%E3%82%BB%E3%83%AC%E3%82%AF%E3%82%BF">&#x7570;&#x4F53;&#x5B57;&#x30BB;&#x30EC;&#x30AF;&#x30BF; - Wikipedia</a></li>
</ul><p>この方法で表現される<a class="keyword" href="http://d.hatena.ne.jp/keyword/%B0%DB%C2%CE%BB%FA">異体字</a>は、基底文字の包摂範囲内に含まれることになっている。プレーンテキストとして扱えるので、HTMLで表示したければそのままIVS（＝基底文字＋VS）を書けばよい。通常の文字と同様、数値<a class="keyword" href="http://d.hatena.ne.jp/keyword/%CA%B8%BB%FA%BB%B2%BE%C8">文字参照</a>を使って書くこともできる。フォントやOS、アプリケーションが対応していない場合には、通常の基底文字のグリフが単に表示される（ことが望まれるが、VSが豆腐などで表示されてしまうことが多い）。</p><p>例えばHTMLで</p>
<pre class="code lang-html" data-lang="html" data-unlink>葛　葛<span class="synSpecial">&amp;#xe0100;</span>　葛<span class="synSpecial">&amp;#xe0101;</span>
</pre><p>と書けば、</p>

<pre>葛　葛&#xe0100;　葛&#xe0101;
</pre><p>のように表示される。</p>

</div>
<div class="section">
    <h5>OpenType feature tag による方法</h5>
    <p><a href="http://www.microsoft.com/typography/otspec/featurelist.htm">OpenType &#x306B;&#x306F;&#x3044;&#x308D;&#x3044;&#x308D;&#x306A;&#x30BF;&#x30B0;&#x304C;&#x5B9A;&#x7FA9;&#x3055;&#x308C;&#x3066;&#x3044;&#x308B;</a>が、漢字に関係するタグは expt, hojo, jp78, jp83, jp90, nlck, trad, aalt などである。あるグリフから別のグリフへ、一対一や一対多で置換できる。<a class="keyword" href="http://d.hatena.ne.jp/keyword/Mac%20OS%20X">Mac OS X</a> や <a class="keyword" href="http://d.hatena.ne.jp/keyword/InDesign">InDesign</a>、<a class="keyword" href="http://d.hatena.ne.jp/keyword/Illustrator">Illustrator</a> などでは以前から使われているが、それ以外の環境ではでは対応が進んでいないため、あまり使われていない。圧→壓 のように、包摂範囲外のグリフへの置換も定義されている。</p><p>プレーンテキストでは扱えないため、HTMLではCSS3の <a href="http://dev.w3.org/csswg/css3-fonts/#font-feature-settings-prop">font-feature-settings</a> プロパティを利用してタグを指定する。これはまだドラフト段階なので、実際にはベンダー接頭辞をつけて利用することになる。</p>

<ul>
<li><a href="https://developer.mozilla.org/en/CSS/-moz-font-feature-settings">font-feature-settings - MDN</a></li>
<li><a href="http://blogs.msdn.com/b/ie_ja/archive/2012/01/17/css.aspx">CSS &#x30B3;&#x30FC;&#x30CA;&#x30FC;: &#x30D5;&#x30A9;&#x30F3;&#x30C8;&#x306E;&#x5168;&#x8981;&#x7D20;&#x3092;&#x4F7F;&#x7528;&#x3059;&#x308B; - IEBlog &#x65E5;&#x672C;&#x8A9E;</a></li>
<li><a href="http://maniac-chef.blogspot.com/2011/10/opentype-features-support-on-chrome.html">Maniac Chef: OpenType features support on Chrome</a></li>
</ul><p>例えば、jp90 タグを有効にするためには次のように指定する。</p>
<pre class="code lang-css" data-lang="css" data-unlink>hoge <span class="synIdentifier">{</span>
  <span class="synType">font</span>-feature-settings:         <span class="synConstant">&quot;jp90&quot;</span> <span class="synConstant">1</span>;
  -moz-<span class="synType">font</span>-feature-settings:    <span class="synConstant">&quot;jp90=1&quot;</span>;
  -ms-<span class="synType">font</span>-feature-settings:     <span class="synConstant">&quot;jp90&quot;</span> <span class="synConstant">1</span>;
  -webkit-<span class="synType">font</span>-feature-settings: <span class="synConstant">&quot;jp90&quot;</span> <span class="synConstant">1</span>;
<span class="synIdentifier">}</span>
</pre><p>aalt のような一対多の置換を含むタグにおいて、n 番目のグリフに置換したい場合には、上の 1 の部分に n を指定する。</p>
<ins datetime="2013-05-04T12:57:44+09:00"><p>2013-05-03追記：この記事を書いた時点では -moz-font-feature-settings だけ指定方法が異なっていた（"jp90=1"）が、現在では他と同じ形式（"jp90" 1）に変更されている。</p>
</ins>
</div>
</div>
<div class="section">
    <h4>表示のテスト</h4>
    
<ul>
<li><a href="http://shiromoji.net/font/HanaMinOT/webfonttest/">&#x82B1;&#x5712;&#x660E;&#x671D;OT&#xFF0B;Web &#x30D5;&#x30A9;&#x30F3;&#x30C8;&#x306B;&#x3088;&#x308B; OpenType feature tag &#x3068;IVS&#x306E;&#x8868;&#x793A;&#x30C6;&#x30B9;&#x30C8; - &#x3057;&#x308D;&#x3082;&#x3058;&#x4F5C;&#x696D;&#x5BA4;</a></li>
</ul><p><a href="http://shiromoji.net/font/HanaMinOT/">&#x82B1;&#x5712;&#x660E;&#x671D;OT</a> ver. 0.510 を Web フォントとして利用し、表示テストを行った。フォントフォーマットはOTFとWOFF（Web Open Font Format）。OTFからWOFFへの変換については、武蔵システムの<a href="http://musashi.or.tv/woffconv.htm">WOFF&#x30B3;&#x30F3;&#x30D0;&#x30FC;&#x30BF;</a>を利用した。</p><p>表示テストは <a class="keyword" href="http://d.hatena.ne.jp/keyword/Firefox">Firefox</a>, <a class="keyword" href="http://d.hatena.ne.jp/keyword/Safari">Safari</a>, <a class="keyword" href="http://d.hatena.ne.jp/keyword/Chrome">Chrome</a>, <a class="keyword" href="http://d.hatena.ne.jp/keyword/Opera">Opera</a>, IE8 の各ブラウザで行い、すべて最新版を用いた。OSは <a class="keyword" href="http://d.hatena.ne.jp/keyword/Windows%20XP">Windows XP</a> SP3（そろそろ潮時ですかね…）。参考までに先日インストールした <a class="keyword" href="http://d.hatena.ne.jp/keyword/Windows%208">Windows 8</a> Comsumer Preview 上でもテストをしたが、<a class="keyword" href="http://d.hatena.ne.jp/keyword/Opera">Opera</a> と<a class="keyword" href="http://d.hatena.ne.jp/keyword/IE">IE</a>以外では差が見られなかった。</p><p>下の画像は、最も対応状況が優れていた <a class="keyword" href="http://d.hatena.ne.jp/keyword/Firefox">Firefox</a> での表示例。</p><p><a class="hatena-fotolife" target="_blank" href="http://cdn-ak.f.st-hatena.com/images/fotolife/m/mashabow/20120308/20120308161106_original.png"><img class="hatena-fotolife" src="http://cdn-ak.f.st-hatena.com/images/fotolife/m/mashabow/20120308/20120308161106.png?1331190697" alt=""><br>▲ クリックで拡大</a><br />
</p>

</div>
<div class="section">
    <h4>結果一覧</h4>
    
<table>
    <tr>
    <th>ブラウザ</th>
    <th>OS</th>
    <th>OTF</th>
    <th>WOFF</th>
    <th>IVS</th>
    <th>tag</th>
    </tr>
    <tr>
    <td><a class="keyword" href="http://d.hatena.ne.jp/keyword/Firefox">Firefox</a> 9.0</td>
    <td>Win XP</td>
    <td>○</td>
    <td>○</td>
    <td>○</td>
    <td>○</td>
    </tr>
    <tr>
    <td><a class="keyword" href="http://d.hatena.ne.jp/keyword/Safari">Safari</a> 5.1</td>
    <td>Win XP</td>
    <td>○</td>
    <td>○</td>
    <td>×</td>
    <td>×</td>
    </tr>
    <tr>
    <td><a class="keyword" href="http://d.hatena.ne.jp/keyword/Chrome">Chrome</a> 17.0</td>
    <td>Win XP</td>
    <td>○</td>
    <td>○</td>
    <td>×</td>
    <td>×<sup>*</sup></td>
    </tr>
    <tr>
    <td><a class="keyword" href="http://d.hatena.ne.jp/keyword/Opera">Opera</a> 11.61</td>
    <td>Win XP</td>
    <td>△<sup>†</sup></td>
    <td>△<sup>†</sup></td>
    <td>×<sup>‡</sup></td>
    <td>×</td>
    </tr>
    <tr>
    <td><a class="keyword" href="http://d.hatena.ne.jp/keyword/IE">IE</a> 8.0</td>
    <td>Win XP</td>
    <td>×</td>
    <td>×</td>
    <td>×</td>
    <td>×</td>
    </tr>
    <tr>
    <td><a class="keyword" href="http://d.hatena.ne.jp/keyword/IE">IE</a> 10.0</td>
    <td>Win 8 CP</td>
    <td>○</td>
    <td>○</td>
    <td>○</td>
    <td>△<sup>§</sup></td>
    </tr>
</table>
<div class="section">
    <h5>OTF</h5>
    
<ul>
<li>○：OpenType フォーマットのフォントファイルを Web フォントとして利用できる。</li>
<li>×：対応しておらず、他のフォントで表示される。</li>
</ul>
</div>
<div class="section">
    <h5>WOFF</h5>
    
<ul>
<li>○：WOFFフォーマットのフォントファイルを Web フォントとして利用できる。</li>
<li>×：対応しておらず、他のフォントで表示される。</li>
</ul>
</div>
<div class="section">
    <h5>IVS</h5>
    
<ul>
<li>○：適切な<a class="keyword" href="http://d.hatena.ne.jp/keyword/%B0%DB%C2%CE%BB%FA">異体字</a>グリフが選択されて表示される。</li>
<li>×：VSが豆腐や中黒、空白として表示されてしまう。</li>
</ul>
</div>
<div class="section">
    <h5>tag</h5>
    
<ul>
<li>○：OpenType feature tag が利用できる。</li>
<li>×：対応しておらず、無視される。</li>
</ul>
</div>
</div>
<div class="section">
    <h4>結果一覧の註</h4>
    
<div class="section">
    <h5>* <a class="keyword" href="http://d.hatena.ne.jp/keyword/Chrome">Chrome</a> における OpenType feature tag 対応</h5>
    <p><span itemscope itemtype="http://schema.org/Photograph"><a href="http://f.hatena.ne.jp/mashabow/20120308160703" class="hatena-fotolife" itemprop="url"><img src="http://cdn-ak.f.st-hatena.com/images/fotolife/m/mashabow/20120308/20120308160703.png" alt="f:id:mashabow:20120308160703p:image" title="f:id:mashabow:20120308160703p:image" class="hatena-fotolife" itemprop="image"></a></span></p><p>expt, hojo, jp78, jp83, jp90, nlck の各タグについては、指定するとデフォルトのフォントで描画されてしまうという不具合がある。trad, aalt については、無視される（これは対応していない場合に期待される動作）。expt, hojo, jp78, jp83, jp90, nlck はすべて一対一の置換である一方、trad, aalt には一対多の置換も含まれるという共通点がある。が、これが原因かどうかははっきりしない。</p>

</div>
<div class="section">
    <h5>† <a class="keyword" href="http://d.hatena.ne.jp/keyword/Opera">Opera</a> における OpenType/WOFF 対応</h5>
    <p><a class="keyword" href="http://d.hatena.ne.jp/keyword/Opera">Opera</a> は <a href="http://dev.opera.com/articles/view/introducing-woff-web-open-font-format/">TrueType, OpenType, SVG&#x30D5;&#x30A9;&#x30F3;&#x30C8;, WOFF&#x306E;&#x5404;&#x5F62;&#x5F0F;&#x306B;&#x5BFE;&#x5FDC;&#x3057;&#x3066;&#x3044;&#x308B;&#x3068;&#x8B33;&#x3063;&#x3066;&#x3044;&#x308B;</a>が、花園明朝OTでは表示できなかった。<a href="http://musashi.or.tv/woffbrowser.htm">&#x6B66;&#x8535;&#x30B7;&#x30B9;&#x30C6;&#x30E0;&#x306E;&#x30B5;&#x30A4;&#x30C8;&#x306E;&#x60C5;&#x5831;</a>でも、和文 OpenType や、そこから変換したWOFFは×になっている。CFFアウトラインの和文フォントがダメなんだろうか。</p>

</div>
<div class="section">
    <h5>‡ <a class="keyword" href="http://d.hatena.ne.jp/keyword/Opera">Opera</a> におけるIVS対応</h5>
    <p>引用元が消えているが、<a href="http://ja.wikipedia.org/wiki/%E7%95%B0%E4%BD%93%E5%AD%97%E3%82%BB%E3%83%AC%E3%82%AF%E3%82%BF#cite_ref-59">Wikipedia &#x306B;&#x3088;&#x308C;&#x3070; Windows 7 &#x4E0A;&#x306E; Opera &#x3067;IVS&#x304C;&#x8868;&#x793A;&#x3067;&#x304D;&#x308B;</a>らしい。表には載せなかったが、今回 <a class="keyword" href="http://d.hatena.ne.jp/keyword/Windows%208">Windows 8</a> Comsumer Preview 上の <a class="keyword" href="http://d.hatena.ne.jp/keyword/Opera">Opera</a> で表示できることを確認した。</p>

</div>
<div class="section">
    <h5>§ IE10 における OpenType feature tag 対応</h5>
    <p>expt, hojo, jp78, jp83, jp90, nlck の各タグは正常に機能しグリフ置換が行われるが、trad, aalt については無視される。</p><p>また、IE10で花園明朝OTを表示させるとディセンダが大きく空いてしまうが、原因不明。</p>

</div>
</div>
<div class="section">
    <h4>というわけで</h4>
    <p><a class="keyword" href="http://d.hatena.ne.jp/keyword/Firefox">Firefox</a> がかなりいい感じ。他のブラウザの実装がいまいちなこともあり、実際に「使える」かどうかは疑問だが、覚えておくと何かの役に立つ……かも……？</p>

</div>]]></description>
            <enclosure url="http://cdn-ak.f.st-hatena.com/images/fotolife/m/mashabow/20120308/20120308161106.png?1331190697" length="0" type="image/png"/>
        </item>
        <item>
            <title><![CDATA[花園明朝OTを0.510に更新、IVD 2012-03-02版に対応]]></title>
            <link>https://shiromoji.hatenablog.jp/entry/20120306/1331028598</link>
            <guid>https://shiromoji.hatenablog.jp/entry/20120306/1331028598</guid>
            <pubDate>Tue, 06 Mar 2012 10:09:58 GMT</pubDate>
            <description><![CDATA[<p><a class="keyword" href="http://d.hatena.ne.jp/keyword/Adobe">Adobe</a>-Japan1-6 準拠の漢字フォント・花園明朝OTを ver. 0.510 に更新。</p>

<ul>
<li><a href="http://shiromoji.net/font/HanaMinOT/">&#x82B1;&#x5712;&#x660E;&#x671D;OT - &#x3057;&#x308D;&#x3082;&#x3058;&#x4F5C;&#x696D;&#x5BA4;</a></li>
</ul><p>以下、主な変更点について解説。</p>

<div class="section">
    <h4>IVD 2012-03-02 版に対応</h4>
    <p>今月2日に<a href="http://www.unicode.org/ivd/">IVD&#xFF08;Ideographic Variation Database&#xFF09;</a>の最新版が公開され、<a class="keyword" href="http://d.hatena.ne.jp/keyword/Adobe">Adobe</a>-Japan1 に32個、Hanyo-Denshi<a href="#f-75c27c15" name="fn-75c27c15" title="こちらは花園明朝OTには収録していない。">*1</a> に8,850個のIVSが追加された。この追加により、<a class="keyword" href="http://d.hatena.ne.jp/keyword/Adobe">Adobe</a>-Japan1-6 に含まれる14,664個の漢字グリフすべてがIVSでアクセスできるようになった。花園明朝OTは今回これに対応。</p><p><a class="keyword" href="http://d.hatena.ne.jp/keyword/Adobe">Adobe</a>-Japan1 コレクションに追加されたIVSについては、以下のページに詳しい。</p>

<ul>
<li><a href="http://blogs.adobe.com/CCJKType/2012/03/new-ivd-version.html">IVD Version 2012-03-02 Released &laquo; CJK Type</a></li>
<li><a href="http://www.unicode.org/ivd/pri/pri183/">Ideographic Variation Database - PRI 183</a></li>
<li><a href="http://d.hatena.ne.jp/NAOI/20110623/1308817376">PRI 183&#x306B;&#x3064;&#x3044;&#x3066;&#x306E;&#x30E1;&#x30E2; - Mac OS X&#x306E;&#x6587;&#x5B57;&#x30B3;&#x30FC;&#x30C9;&#x554F;&#x984C;&#x306B;&#x95A2;&#x3059;&#x308B;&#x30E1;&#x30E2;</a></li>
</ul>
</div>
<div class="section">
    <h4>CMap を UniJIS2004-UTF32-H ver. 1.011 に更新</h4>
    <p><a class="keyword" href="http://d.hatena.ne.jp/keyword/%CA%B8%BB%FA%A5%B3%A1%BC%A5%C9">文字コード</a>とグリフ（CID）との対応表である CMap を、最新バージョンの1.011に更新した。1.010からの変更点は以下の通り。</p>

<ul>
<li>U+9FCC（&#40908;）→ CID+20156 の対応が追加された</li>
<li>U+2329, 232A（&#9001;, &#9002;）→ CID+682, 683 の対応が追加された</li>
</ul><p>花園明朝OTは漢字フォントなので、関係するのは前者のみ。U+9FCC（&#40908;）は1月31日リリースの <a href="http://www.unicode.org/versions/Unicode6.1.0/">Unicode 6.1.0</a> で追加された統合漢字。</p>

</div>
<div class="section">
    <h4>スペースのグリフを少し追加</h4>
    <p>CID+1（欧文スペース）, CID+3000（和文スペース）, CID+8720（CID+1 の vrt2 置換先グリフ）を追加した。CID+1, CID+8720 の文字幅はとりあえず半角として実装した。CID+8720 を追加した理由は次の項で。</p>

</div>
<div class="section">
    <h4><a class="keyword" href="http://d.hatena.ne.jp/keyword/Firefox">Firefox</a> において Web フォントに使用できない問題を解消</h4>
    <p><a class="keyword" href="http://d.hatena.ne.jp/keyword/Firefox">Firefox</a> で花園明朝OTを Web フォントとして使おうとしても、ファイルのダウンロード自体は行われるものの花園明朝OTで描画されない問題があった。</p>

<ul>
<li><a href="http://d.hatena.ne.jp/mashabow/20110807/1312725162">&#x82B1;&#x5712;&#x660E;&#x671D;OT&#x304C; web font &#x3067;&#x4F7F;&#x3048;&#x306A;&#x3044;&#x3063;&#x307D;&#x3044; - &#x3057;&#x308D;&#x3082;&#x3058;&#x30E1;&#x30E2;&#x30E9;&#x30F3;&#x30C0;&#x30E0;</a></li>
</ul><p>これについて、上の記事のコメントでえむけいさんから次のような情報をいただいた（ありがとうございます）。</p>

    <blockquote cite="http://d.hatena.ne.jp/mashabow/20110807/1312725162#c1320299028">
        <p><a class="keyword" href="http://d.hatena.ne.jp/keyword/Windows">Windows</a>では、CFFアウトラインの<a class="keyword" href="http://d.hatena.ne.jp/keyword/OpenType%A5%D5%A5%A9%A5%F3%A5%C8">OpenTypeフォント</a>のGSUBテーブルにvrt2 featureが定義されていないのにvhea/vmtxテーブルがあると、OSに不正なフォントして弾かれます。インストールすれば使えるようですが、Webフォントをロードするための<a class="keyword" href="http://d.hatena.ne.jp/keyword/API">API</a>はWebから任意のデータを受け取る可能性があって、フォント<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%EC%A5%F3%A5%C0%A5%EA%A5%F3%A5%B0">レンダリング</a>エンジンの<a class="keyword" href="http://d.hatena.ne.jp/keyword/%C0%C8%BC%E5%C0%AD">脆弱性</a>も実際に何度か発見されているので、チェックが厳しくなっているようです。 <br />
縦書きグリフを追加するか、vhea/vmtxテーブルを削除してください。</p>

        <cite><a href="http://d.hatena.ne.jp/mashabow/20110807/1312725162#c1320299028">&#x82B1;&#x5712;&#x660E;&#x671D;OT&#x304C; web font &#x3067;&#x4F7F;&#x3048;&#x306A;&#x3044;&#x3063;&#x307D;&#x3044; - &#x3057;&#x308D;&#x3082;&#x3058;&#x30E1;&#x30E2;&#x30E9;&#x30F3;&#x30C0;&#x30E0;</a></cite>
    </blockquote>
<p>このアドバイスに従い、縦書きグリフ CID+8720 を追加して以下のように vrt2 feature を定義した。</p>

<pre>feature vrt2 {
  sub \1 by \8720;
} vrt2;
</pre><p>これにより、<a class="keyword" href="http://d.hatena.ne.jp/keyword/Firefox">Firefox</a> での問題は解消されたようだ。縦書きグリフを追加するのではなく vhea/vmtx テーブルを削除する方法もあるが、これを試したところ <a class="keyword" href="http://d.hatena.ne.jp/keyword/Microsoft">Microsoft</a> Word で縦書きができなくなった（花園明朝OTを指定してもMS明朝で描画される）ので採らなかった。</p><p>なお、上の記事では「<a class="keyword" href="http://d.hatena.ne.jp/keyword/Chrome">Chrome</a> で試したら『エラー　このページの表示中に問題が発生しました』云々と出てページすら表示されなかった」と書いたが、こちらについては <a class="keyword" href="http://d.hatena.ne.jp/keyword/Chrome">Chrome</a> のアップデートの過程で解消されていた様子。</p>

</div><div class="footnote">
<p class="footnote"><a href="#fn-75c27c15" name="f-75c27c15" class="footnote-number">*1</a><span class="footnote-delimiter">:</span><span class="footnote-text">こちらは花園明朝OTには収録していない。</span></p>
</div>]]></description>
            <enclosure url="https://cdn.blog.st-hatena.com/images/theme/og-image-1500.png" length="0" type="image/png"/>
        </item>
        <item>
            <title><![CDATA[『ハングオーバーII』を観た]]></title>
            <link>https://masutaka.net/2012-02-18-1/</link>
            <guid>https://masutaka.net/2012-02-18-1/</guid>
            <pubDate>Sat, 18 Feb 2012 00:00:00 GMT</pubDate>
            <description><![CDATA[予想外に I よりもさらに面白かった。ダグはあいかわらず空気だったし、
一部目を背けたくなるようなグロいシーンもあったけど、コメディだと割
り切れば問題ない。
最後にひとこと言わせてくれ。
や っ ぱ り 二 日 酔 い じ ゃ な い じ ゃ ん w]]></description>
        </item>
        <item>
            <title><![CDATA[『ハングオーバー』を観た]]></title>
            <link>https://masutaka.net/2012-02-16-1/</link>
            <guid>https://masutaka.net/2012-02-16-1/</guid>
            <pubDate>Thu, 16 Feb 2012 00:00:00 GMT</pubDate>
            <description><![CDATA[まあまあ面白かったが、ひとこと言わせてくれ。
二 日 酔 い じ ゃ な い じ ゃ ん w]]></description>
        </item>
        <item>
            <title><![CDATA[『南極料理人』を観た]]></title>
            <link>https://masutaka.net/2012-01-29-1/</link>
            <guid>https://masutaka.net/2012-01-29-1/</guid>
            <pubDate>Sun, 29 Jan 2012 00:00:00 GMT</pubDate>
            <description><![CDATA[全体的にわざとらしさ感が充ち満ちている映画。だけれども、ドキュメン
タリーっぽい感じがあり、悪くなかった。寝っ転がりながらぼ〜っと観る
のがちょうど良いかも。ロケ地は南極ではなく、北海道網走市とのこと。
さすがに無理なのか。
KDD インマルサットの清水さんはなかなか良かった。]]></description>
        </item>
        <item>
            <title><![CDATA[『ライフ・イズ・ビューティフル』を観た]]></title>
            <link>https://masutaka.net/2012-01-28-2/</link>
            <guid>https://masutaka.net/2012-01-28-2/</guid>
            <pubDate>Sat, 28 Jan 2012 01:00:00 GMT</pubDate>
            <description><![CDATA[何人かに勧められてようやく観た。でも、私は無理矢理っぽさが合わなかっ
たなあ。前半はコメディ版タイタニックか？と思ったけど、後半になると
全く違った映画になる。最後は悪くなかった。]]></description>
        </item>
        <item>
            <title><![CDATA[『ブラック・スワン』を観た]]></title>
            <link>https://masutaka.net/2012-01-28-1/</link>
            <guid>https://masutaka.net/2012-01-28-1/</guid>
            <pubDate>Sat, 28 Jan 2012 00:00:00 GMT</pubDate>
            <description><![CDATA[これは凄まじい映画。特に中盤以降は本気で何が何だか分からなくなって
くる。瞬きも惜しんで見ることになるとは思わなかった。]]></description>
        </item>
        <item>
            <title><![CDATA[『グラン・トリノ』を観た]]></title>
            <link>https://masutaka.net/2012-01-09-1/</link>
            <guid>https://masutaka.net/2012-01-09-1/</guid>
            <pubDate>Mon, 09 Jan 2012 00:00:00 GMT</pubDate>
            <description><![CDATA[なかなかに渋い映画。前半はコメディチック、後半はシリアス。
Amazon のレビューで「これは西部劇だ。」との意見が。なるほど。
日本語吹き替えで観たので、次は字幕にしよう。]]></description>
        </item>
        <item>
            <title><![CDATA[『ロボゲイシャ』を観た]]></title>
            <link>https://masutaka.net/2011-12-31-1/</link>
            <guid>https://masutaka.net/2011-12-31-1/</guid>
            <pubDate>Sat, 31 Dec 2011 00:00:00 GMT</pubDate>
            <description><![CDATA[2011 年を締めくくるにふさわしい映画。笑いあり涙あり姉妹愛あり。それ
にロボットまで付いてくれば見ないわけにはいかないでしょう。大物俳優
が何人も出演し、脇を十二分に固めています。
.
.
.
ここまでクソ映画だったとは。。。でも頑張って最後まで観たw
片腕マシンガール [2011-12-11-2] を悪いほうに外した感じ。
途中何カ所か面白いところはあったけど。本当に同じ監督が作った？
低予算ではなくなったそうだけど、それと関係しているのかな？]]></description>
        </item>
        <item>
            <title><![CDATA[{Jenkins x CakePHP2 (6/6)} 他にインストールしたプラグイン]]></title>
            <link>https://masutaka.net/2011-12-30-6/</link>
            <guid>https://masutaka.net/2011-12-30-6/</guid>
            <pubDate>Fri, 30 Dec 2011 05:00:00 GMT</pubDate>
            <description><![CDATA[※ 詳細情報は「Jenkinsの管理」&gt;「プラグインの管理」から辿れる、各プ
ラグインのリンク先を参照して下さい。
Emotional Jenkins Plugin これはインストールした方がよいでしょう。そしてテストを失敗させましょうw
各プロジェクトの設定で ON/OFF できます。
IRC Plugin 設定すると、指定した channel に Jenkins さんが常駐します。ビルド結
果を IRC で通知してくれるだけでなく、IRC から Jenkins を実行できた
りもします。
私の設定は以下のとおり。
         Hostname chat.freenode.net   Port 6667   Channels Name #example   Nickname jenkinsbot   Command prefix jenkinsbot:   (高度な設定)Use /notice command チェックを入れる    Hostname と Port と Channels Name を設定するだけで動くはずですが、]]></description>
        </item>
        <item>
            <title><![CDATA[{Jenkins x CakePHP2 (5/6)} Jenkins を自動実行する]]></title>
            <link>https://masutaka.net/2011-12-30-5/</link>
            <guid>https://masutaka.net/2011-12-30-5/</guid>
            <pubDate>Fri, 30 Dec 2011 04:00:00 GMT</pubDate>
            <description><![CDATA[「リモートからビルド (例: スクリプトから)」がうまくいかないので、
とりあえず「SCMをポーリング」にしました。
10 分おきにポーリングです。
*/10 * * * * Jenkins は良くできたツールなんだけど、微妙に設定が効かないことがあ
るよなあ。単にまだ自分に馴染んでいないだけなのか。]]></description>
        </item>
        <item>
            <title><![CDATA[{Jenkins x CakePHP2 (4/6)} Jenkins から PHPUnit を実行する]]></title>
            <link>https://masutaka.net/2011-12-30-4/</link>
            <guid>https://masutaka.net/2011-12-30-4/</guid>
            <pubDate>Fri, 30 Dec 2011 03:00:00 GMT</pubDate>
            <description><![CDATA[CakePHP2 から、奨励単体テストツールが SimpleTest から PHPUnit になっ
たのは周知のとおり。http://example.com/cakephp/test.php などから単
体テストができるようになり、カバレッジ率も測定できる環境が整ったら、
Jenkins でも実行したいところ。
コマンドラインから単体テストを実行する まずはコマンドラインからテストを実行できることを確認する。
% cd app % mkdir -p results % ../lib/Cake/Console/cake testsuite --log-junit results/phpunit.xml --coverage-clover results/coverage.xml app AllTests 上の例では、Controller や Model を含めた全てのテストケースを実行す
る app/Test/Case/AllTestsTest.php を実行している。
このとき
 PHP Fatal error: Class &lsquo;DOMDocument&rsquo; not found in /usr/share/pear/PHPUnit/Util/Log/JUnit.php on line 135
なんていうエラーが起きたら、configure で –with-dom を有効にした
PHP がインストールされていない 。remi リポジトリからインストールする
と良い(詳細は割愛)。
 % sudo yum --enablerepo=remi,epel,rpmforge,rpmforge-extras,rpmforge-testing install php-xml ここまで出来たらあとは簡単。Jenkins に設定するだけ。
Jenkins側の設定 トップの「Jenkinsの管理」&gt;「プラグインの管理」から、]]></description>
        </item>
        <item>
            <title><![CDATA[{Jenkins x CakePHP2 (3/6)} Jenkins からコーディング規約をチェックする]]></title>
            <link>https://masutaka.net/2011-12-30-3/</link>
            <guid>https://masutaka.net/2011-12-30-3/</guid>
            <pubDate>Fri, 30 Dec 2011 02:00:00 GMT</pubDate>
            <description><![CDATA[手っ取り早く使ってみたかったので、最初に Jenkins からコーディング規
約チェック出来るようにしてみた。単体テストだと、最初にテストコード
を書かなくちゃいけないからね。
PHP_CodeSniffer のインストール インストールすると、phpcs コマンドを使えるようになる。
pear コマンドでインストール出来るが、
% sudo pear install PHP_CodeSniffer エラーが発生してインストールできなかったので、
downloading PHP_CodeSniffer-1.3.2.tgz ... Starting to download PHP_CodeSniffer-1.3.2.tgz (328,845 bytes) ......................done: 328,845 bytes PHP Fatal error: Allowed memory size of 16777216 bytes exhausted (tried to allocate 23378 bytes) in /usr/share/pear/PEAR.php on line 252 PHP Stack trace: PHP 1. {main}() /usr/share/pear/pearcmd.php:0 PHP 2. PEAR_Command_Common-&gt;run() /usr/share/pear/pearcmd.php:305 PHP 3. PEAR_Command_Install-&gt;doInstall() /usr/share/pear/PEAR/Command/Common.php:271 PHP 4. PEAR_Installer-&gt;install() /usr/share/pear/PEAR/Command/Install.php:708 PHP 5. PEAR_Installer-&gt;_installFile2() /usr/share/pear/PEAR/Installer.]]></description>
        </item>
        <item>
            <title><![CDATA[{Jenkins x CakePHP2 (2/6)} Jenkins の認証設定]]></title>
            <link>https://masutaka.net/2011-12-30-2/</link>
            <guid>https://masutaka.net/2011-12-30-2/</guid>
            <pubDate>Fri, 30 Dec 2011 01:00:00 GMT</pubDate>
            <description><![CDATA[今回採用したセキュリティポリシー ログインしないとアクセス出来ないようにする。
管理者が手動でアカウントを作成すると、ユーザーがサインアップできる。
第３者は勝手にサインアップできない。
設定方法 「Jenkinsの管理」&gt;「システムの設定」&gt;「セキュリティを有効化」にチェック
「アクセス制御」&gt;「ユーザー情報」&gt;「Jenkinsのユーザーデータベース」にチェック
「ユーザーにサインアップを許可」のチェックを外す。
「アクセス制御」&gt;「権限管理」&gt;「行列による権限設定」にチェック。
「追加するユーザー/グループ」から masutaka を追加。全アクセス権を付与。
トップに戻り masutaka のサインアップをすると、ログイン出来るようになる。]]></description>
        </item>
        <item>
            <title><![CDATA[{Jenkins x CakePHP2 (1/6)} Jenkins のインストール方法]]></title>
            <link>https://masutaka.net/2011-12-30-1/</link>
            <guid>https://masutaka.net/2011-12-30-1/</guid>
            <pubDate>Fri, 30 Dec 2011 00:00:00 GMT</pubDate>
            <description><![CDATA[CakePHP-2.0.4 で継続的インテグレーション(CI) ができる環境を構築する
ため、Jenkins をインストールすることにした。
ネット上を探し回ったんだけど、まだ Jenkins x CakePHP2 の情報はまと
まってないみたい。毎度のことながら途中何度も何度もハマり、設定して
はアンインストールし、設定してはアンインストールしを 7〜8 回はやっ
たと思う。同じように困っている人と、将来の自分のために構築メモを残
すことにする。全 6 回。
Jenkins のバージョンは 1.445、CentOS のバージョンは 5.6。
Jenkins をインストール＆起動した。Jenkins 用のリポジトリを yum の
リポジトリリストに追加して、yum install するだけ。
% sudo yum install java-1.6.0-openjdk % sudo wget -O /etc/yum.repos.d/jenkins.repo http://pkg.jenkins-ci.org/redhat/jenkins.repo % sudo rpm --import http://pkg.jenkins-ci.org/redhat/jenkins-ci.org.key % sudo yum install jenkins % sudo /sbin/service jenkins start http://example.com:8080 にアクセスできるようになった。設定ファイル
や workspace は /var/lib/jenkins に、ログは /var/log/jenkins に作ら
れる。
設定やビルド結果は xml で保存され、MySQL とかは使わないので、気楽と]]></description>
        </item>
        <item>
            <title><![CDATA[『ミリオンダラーベイビー』を観た]]></title>
            <link>https://masutaka.net/2011-12-24-1/</link>
            <guid>https://masutaka.net/2011-12-24-1/</guid>
            <pubDate>Sat, 24 Dec 2011 00:00:00 GMT</pubDate>
            <description><![CDATA[どこまでも救いようがない物語。でも嫌いじゃない。
マギーは幸せだったのかな？]]></description>
        </item>
        <item>
            <title><![CDATA[私の.emacsからピックアップした設定3つ #EmacsAdventJP]]></title>
            <link>https://masutaka.net/2011-12-17-1/</link>
            <guid>https://masutaka.net/2011-12-17-1/</guid>
            <pubDate>Sat, 17 Dec 2011 00:00:00 GMT</pubDate>
            <description><![CDATA[Emacs Advent Calendar jp: 2011 の 17 日目です。16 日目は、@asudofu さんの点数付けの導入でタスク管理を楽しくする[Emacs拡張] でした。
Emacs Advent Calendar jp には初めて参加します。Emacs は 2000 年から
使っていますが [2009-06-26-2] 、あんまり凝ったことはしていません。な
ので、今回は私の .emacs から良さそうな設定を 3 つ紹介します。
Dired で今日変更したファイルを色づけ こんな感じに今日変更したファイルの日時に色が付きます。なかなか便利
です。
※ 意味もなく、s' でファイルを時間順に並べ替えるのも好きです。s'
で元に戻ります。
元々 blankspace &gt; emacs &gt; dired にあった設定なので、ご存知の方も多
いのではないでしょうか。今の私のコードはこのようになっていました。
日付が &ldquo;12 15&rdquo; でも &ldquo;Dec 15&rdquo; でも色が付くようになっています。
 フォントを大きくしたり小さくしたり Emacs-23.1 からフォントを動的に大きくしたり小さくしたり出来るように
なりました。等幅フォントでは出来ないかもしれません。
M-x text-scale-adjust の後に +' するだけでフォントが大きくなります。 -&rsquo; で小さくなります。`0&rsquo; で元に戻ります。
等倍
5回+
10回+
私は C-q C-a に割り当てて、何か行き詰まると大きくしたり小さくしたり]]></description>
        </item>
        <item>
            <title><![CDATA[Opera でうまく見られないサイトへの対策]]></title>
            <link>https://masutaka.net/2011-12-14-1/</link>
            <guid>https://masutaka.net/2011-12-14-1/</guid>
            <pubDate>Wed, 14 Dec 2011 00:00:00 GMT</pubDate>
            <description><![CDATA[Opera はマイナーなブラウザなのか、うまく見られないサイトがいくつか
ありました。User-agent と HTTP Accept Language をカスタマイズすれば
なんとか大丈夫なようです。ただし、後者は全てのサイトに影響するので、
少し注意が必要です。
jp.techcrunch.com http://jp.techcrunch.com/ にアクセスすると、
http://m.jp.techcrunch.com/ に飛ばされてしまう。Opera はモバイル機
器で多く使われているようなので、jp.techcrunch.com が適当に判断して
しまっているようだ。
http://m.jp.techcrunch.com/ に飛ばされた状態で右クリック &gt; サイトご
との設定を編集 &gt; 一般設定タブに進む。サイトに jp.techcrunch.com を
入力。
  同様に右クリック &gt; サイトごとの設定を編集 &gt; ネットワークタブに進む。
ブラウザーの識別を「完全に Firefox として認識させる」にする。
  dmm.com ログインしようとすると、以下のエラーページに飛ばされる。
  アドレスバーに opera:config と打ち、Enter を押下。
Network &gt; HTTP Accept Language に進み、
ja,en;q=0.9,en-US;q=0.8,fr;q=0.7,de;q=0.6,es;q=0.5,it;q=0.4,pt;q=0.3,pt-PT;q=0.2,nl;q=0.1,sv;q=0.1,nb;q=0.1,da;q=0.1,fi;q=0.1,ru;q=0.1,pl;q=0.1,zh-CN;q=0.1,zh-TW;q=0.1,ko;q=0.1,ar;q=0.1,cs;q=0.1,hu;q=0.1,tr;q=0.1 から
,zh-CN;q=0.1,zh-TW;q=0.1,ko;q=0.1 を削除する。]]></description>
        </item>
        <item>
            <title><![CDATA[『「リーダーの条件」が変わった』を読んだ]]></title>
            <link>https://masutaka.net/2011-12-12-1/</link>
            <guid>https://masutaka.net/2011-12-12-1/</guid>
            <pubDate>Mon, 12 Dec 2011 00:00:00 GMT</pubDate>
            <description><![CDATA[氏は本書を含め、さまざまな場所で提言しているけど、本書にあるように
問題はそれを実行できるリーダーがいないことなんだよね。まあでも大阪
とか福岡とか地方が変わってきているので、それは一筋の光明かな？]]></description>
        </item>
        <item>
            <title><![CDATA[『片腕マシンガール』を観た]]></title>
            <link>https://masutaka.net/2011-12-11-2/</link>
            <guid>https://masutaka.net/2011-12-11-2/</guid>
            <pubDate>Sun, 11 Dec 2011 01:00:00 GMT</pubDate>
            <description><![CDATA[ 天ぷら！ YAKUZA! NINJA! そして スーパー遺族！
もう何も言うことはありません。
2007 年の B 級スプラッター映画。日本では公開されてないとのこと。
ようやく観れたわ。てか、さっさと借りれば良かった。
予告編はこれ。本編はこれより 200% グロい。
 小飼弾氏も町山智浩氏も大絶賛です。
404 Blog Not Found:紹介 - 片腕マシンガール 女子高生にマシンガンつけて忍者ヤクザと闘わせろ！ - ベイエリア在住町山智浩アメリカ日記 オフィスでみんなで観ようかと思ったけど、グロすぎるので躊躇している
ところ。メシ時避ければ良いのかな？
全体的にみんなドスが効いた良い声をしていました。全てが良い意味でツッ
コミどころ満載。監督が良い仕事をしている。体張ってたし。。。
作中で片腕マシンガンを作った石川ゆうやさんは新宿ゴールデン街「ダー
リン」の店主だそうです。是非行ってみたい。
YAKUZA の人は「プロジェクトＡ」の海賊のボスと似てる。
参考情報: 片腕マシンガール ]]></description>
        </item>
        <item>
            <title><![CDATA[『プロジェクトＡ』を観た]]></title>
            <link>https://masutaka.net/2011-12-11-1/</link>
            <guid>https://masutaka.net/2011-12-11-1/</guid>
            <pubDate>Sun, 11 Dec 2011 00:00:00 GMT</pubDate>
            <description><![CDATA[ 海賊のボスは絶対に真面目でいい人！
参考情報: プロジェクトA ]]></description>
        </item>
        <item>
            <title><![CDATA[Mew で新規作成や返信時に case を自動的に切り替える方法]]></title>
            <link>https://masutaka.net/2011-12-06-1/</link>
            <guid>https://masutaka.net/2011-12-06-1/</guid>
            <pubDate>Tue, 06 Dec 2011 00:00:00 GMT</pubDate>
            <description><![CDATA[※ この記事は = MewでiCloudのメールを読み書き - ぺっくブログミラー
@peccul への mention です。
@peccul さんの記事のとおり、Mew で case を設定すると複数アカウント
を切り替えることが出来ます。さらに、自動的に切り替えることも出来ます。
pooh@example.com から来たメールへの返信で、case に example を使いた
い時は、このように設定します(mew-case-guess-when-replied-alist の書
式は mew-refile-guess-alist と同じです)。
;; 返信時(a,A)にケースを自動的に設定する。 (setq mew-case-guess-when-replied-alist  &#39;((&#34;\\(To\\|Cc\\):&#34;  (&#34;pooh@example\\.com&#34; &#34;example&#34;)))) 新規作成や転送の時は mew-case-guess-alist に設定します。でも普通は
To: や Cc: は空なので、推測に必要な情報がありません。
そこで登場するのが mew-ask-to と mew-ask-cc です。以下のように設定
すれば、返信の時と同じように case が自動的に切り替わります。
;; 草稿を作る時(w,f,F)、最初に To: と Cc: を聞かれる。 (setq mew-ask-to t mew-ask-cc t)  ;; 草稿を作る時(w,f,F)や、再編集時(E)にケースを自動的に設定する。 (setq mew-case-guess-alist  &#39;((&#34;\\(To\\|Cc\\):&#34;  (&#34;pooh@example\\.com&#34; &#34;example&#34;)))) mew-case-guess-alist と mew-case-guess-when-replied-alist について]]></description>
        </item>
        <item>
            <title><![CDATA[『もし小泉進次郎がフリードマンの『資本主義と自由』を読んだら』を読んだ]]></title>
            <link>https://masutaka.net/2011-12-04-1/</link>
            <guid>https://masutaka.net/2011-12-04-1/</guid>
            <pubDate>Sun, 04 Dec 2011 00:00:00 GMT</pubDate>
            <description><![CDATA[池田信夫さんのメルマガで連載されていた小説の漫画版。まあまあ面白かった。日本が財政破綻したらどうなるのか、私のように経済に疎い人にも想像できる内容に仕上がっている。
漫画としては、もっと少し練った方が良かった。というのも小説をそのまま漫画化した感じで、全体的にメリハリがない(和間さんのところがある意味クライマックス？w)。小泉さんのキャラ設定は不十分というか、設定されていない。
次は藤沢数希さんの「日本人がグローバル資本主義を生き抜くための経済学入門 もう代案はありません 」を読む予定(もう読み始めているけど)。]]></description>
        </item>
        <item>
            <title><![CDATA[『Jenkins実践入門 〜ビルド・テスト・デプロイを自動化する技術』を読んだ]]></title>
            <link>https://masutaka.net/2011-12-01-1/</link>
            <guid>https://masutaka.net/2011-12-01-1/</guid>
            <pubDate>Thu, 01 Dec 2011 00:00:00 GMT</pubDate>
            <description><![CDATA[その名の通り、Jenkins の入門書。Jenkins で出来ることを知っておくに
は良い本。そんなに濃い内容ではないので、時間をかけずにさっと読めた。
逆に、濃い情報を期待して読むと期待はずれだと思う。Subversion の説明
なんていらないし、Java 以外の言語を使っている人にとって、Ant とか
JUnit の説明もいらない。
まあでも、Jenkins は yum で簡単にインストール出来ることが分かったし、
Selenium というテストツールを使えば、Web ブラウザからの操作を自動化
できることも分かったので、私には良い本だった。]]></description>
        </item>
        <item>
            <title><![CDATA[第2回 関西PHP勉強会 LightningTalk]]></title>
            <link>https://masutaka.net/2011-11-26-4/</link>
            <guid>https://masutaka.net/2011-11-26-4/</guid>
            <pubDate>Sat, 26 Nov 2011 03:00:00 GMT</pubDate>
            <description><![CDATA[第2回 関西PHP勉強会 目次に戻る Memcached は NoSQL memcached って、NoSQL に分類されるのね。知りませんでした。。データ
数は 100,000 件とかにすれば、違いがより分かりやすかったかも？
PHP でも顔認識してみようぜ！ OpenCV を PHP から使う！
画像をアップロードすると、顔を認識してくれる。iPhoto とかであるやつですね。
実演は無事成功。8888
Windows Azure で PHP 動くんです Windows Azure ってのがあるのですね。
クラウドで動く Windows Server
初心者でもわかる CakePHP と PDFlib PDFlib は何十万もするらしい。。。弊社ではちょい無理です。
FPDF は無償。これはメモメモ。
12 月中に第 2 回関西 PHP 初心者勉強会やるらしいです。
PHP で Twitter OAuth には、twmode とかこのブログとかで使ったことがあるので、これは
馴染み深かった。PHP でも簡単にできるんですね〜
php でも jubatus データを突っ込むと、そのデータが何かを類推してくれる。
例えば、はてブのタグの suggestion とか。でも試作は失敗とのことw
facebook アプリ heroku 使うやつだったけかな。雛形が用意されているので、結構簡単に作
れるらしい。プロジェクタートラブルはご愁傷様でした。]]></description>
        </item>
        <item>
            <title><![CDATA[第2回 関西PHP勉強会 セッション２ PHP5.4おいしさつまみぐい]]></title>
            <link>https://masutaka.net/2011-11-26-3/</link>
            <guid>https://masutaka.net/2011-11-26-3/</guid>
            <pubDate>Sat, 26 Nov 2011 02:00:00 GMT</pubDate>
            <description><![CDATA[第2回 関西PHP勉強会 目次に戻る  @tanakahisateru さんの発表。
5.4 はゆるやかな変更
5.4 から 2 進数リテラル(例: 0b1111)が使える。
Array Short Syntax array() 使わなくても [] でいいやつね。
YAML 使わなくてもシンプルにできるかも、とのこと。
Builtin Server &ldquo;php -S localhost :8080&rdquo; で簡単起動。PHP5.3 とかの既存の環境を変更
せずに試せる。.php だけでなく、static なファイル .html とかも表示で
きる。引数にビルトインサーバ用スクリプトを指定すると、CakePHP とか
の .htaccess を要求するフレームワークも動かせる。
TRAIT 親クラス以外からもメソッド実装を持って来れる。
class の代わりに、trait で定義する。
使いたい class でだけ use で使う。
これはいい！
クロージャ 5.3 まではクロージャの中で $this を使えなかった。]]></description>
        </item>
        <item>
            <title><![CDATA[第2回 関西PHP勉強会 セッション１ あらためてPHP5.3]]></title>
            <link>https://masutaka.net/2011-11-26-2/</link>
            <guid>https://masutaka.net/2011-11-26-2/</guid>
            <pubDate>Sat, 26 Nov 2011 01:00:00 GMT</pubDate>
            <description><![CDATA[第2回 関西PHP勉強会 目次に戻る  @shin1x1 さんの発表。
PHP5.2 から大きく機能追加されたとのこと。PHP6 のリリースがいつにな
るか分からないので、PHP6 から PHP5.3 にバックポートされたためだそう。
class の外でも const が使えるのはうれしいですね〜。と言いたいところ
ですが、define しか知りませんでした。。でも今試しました。OK! できた！
const AAA = &#39;huga&#39;;	/* クラスの中に書いても外に書いても OK */ pr(self::AAA);	/* クラスの中の時 */ pr(AAA);	/* クラスの外の時 */ namespace PHP5.3 未満には存在しなかった。グローバルネームスペースのみ。
バックスラッシュで階層化。(なんでスラッシュじゃないの？と思った。)
影響は .php ファイルのみ。
use でインポート、エイリアス
クラス、インターフェイス名と、関数、変数とでは名前空間の検索方法が異なる。
名前空間の付け方 -&gt; PSR-0 でルール化
結論。ハマりどころを抑えておけば問題なし。
クロージャ 似たような処理を関数化することは多いと思うが、クロージャを使えばメ
ソッドを関数の中に閉じ込められる。うまく使うと、保守性の高いコーディ
ングが出来そう。そういえば C 言語でもクロージャは書けるみたいですね。
[2010-03-30-1] LSB Late Static Bindings 遅延静的束縛
実行時に評価される。
self:: を static:: にするだけ。
まとめ PHP マニュアル読みなさい。]]></description>
        </item>
        <item>
            <title><![CDATA[初めて PHP 勉強会に参加してきた！ #kphpug]]></title>
            <link>https://masutaka.net/2011-11-26-1/</link>
            <guid>https://masutaka.net/2011-11-26-1/</guid>
            <pubDate>Sat, 26 Nov 2011 00:00:00 GMT</pubDate>
            <description><![CDATA[ごあいさつ PHP 界隈の皆様はじめまして。@masutaka です。PHP 歴は 8 ヶ月ほどです。
普段は Emacs に住んでいます。組み込み系の業務で C 言語を 11 年くら
い使っていた関係で、私のPHP コードはすごく C 言語っぽい気がしてま
す&hellip;。他、EmacsLisp と Ruby でたまに小粒なツールを作ります。
第2回 関西PHP勉強会  というわけで、第2回 関西PHP勉強会に参加してきました。PHP 勉強会に参
加するのは今回が初めてです。Emacs とも Ruby とも雰囲気が違って良い
ですね〜。初心者が一番参加しやすいんじゃないでしょうか。楽しかった。
@shin1x1 さんを初めとする運営の方々、ありがとうございました。
長くなってしまったので、各セッションは別記事にしました。ほとんど個
人的なメモです。
セッション１ あらためてPHP5.3 セッション２ PHP5.4おいしさつまみぐい LT(Lightning Talk) 来年の 5 月に PHP カンファレンス関西が開かれる予定とのこと。これは
行かねば！]]></description>
        </item>
        <item>
            <title><![CDATA[英語文法メモ４ - 助動詞]]></title>
            <link>https://masutaka.net/2011-11-22-1/</link>
            <guid>https://masutaka.net/2011-11-22-1/</guid>
            <pubDate>Tue, 22 Nov 2011 00:00:00 GMT</pubDate>
            <description><![CDATA[難しいし、量が多いしで、part2 の 3 節までまとめて力尽きた。
能力・許可を表す助動詞 can と be able to は同じ意味。ただし、will can のように助動詞を２つ
続けることは出来ないので、その場合は will be able to を使う。
ただし、could と was able to には違いがある。
(1) She could play the violin at five. (2) I was able to swim 200 meters yesterday. 過去において「〜する能力があった」という過去の能力を表す場合は、
(1) のように could を用いることも出来るし、was able to を用いること
も出来る。反対に「〜することが(実際に)できた」という過去に実行した
ことを表すときには、(2) のように was able to を用いる。could を用い
ることはできない。ややこしい。。。
許可を表したい時は、can または may を使う。May I &hellip;? はやや堅苦し
い言い方なので、Can I &hellip;? が使われることが多いとのこと。]]></description>
        </item>
        <item>
            <title><![CDATA[Emacs での UNIX 時間操作まとめ]]></title>
            <link>https://masutaka.net/2011-11-21-1/</link>
            <guid>https://masutaka.net/2011-11-21-1/</guid>
            <pubDate>Mon, 21 Nov 2011 00:00:00 GMT</pubDate>
            <description><![CDATA[Emacs で UNIX 時間が必要になったので、いろいろ調べました。
そういうわけで個人的なメモになります。
;; 任意の日時の UNIX 時間を求める。 (let ((year 2011)  (month 11)  (day 21)  (hour 18)  (minutes 30)  (seconds 00))  (time-to-seconds  (encode-time seconds minutes hour day month year))) =&gt; 1321867800.0  ;; UNIX 時間を Emacs 時間(?) に変換する。 (seconds-to-time 1321867800.0) =&gt; (20170 6680 0)  ;; Emacs 時間を UNIX 時間に変換する。 (time-to-seconds &#39;(20170 6680 0)) =&gt; 1321867800.0  ;; Emacs 時間を日時に変換する。 (current-time-string &#39;(20170 6680 0)) =&gt; &#34;Mon Nov 21 18:30:00 2011&#34;  ;; Emacs 時間を任意のフォーマットの日時に変換する。 (format-time-string &#34;%Y/%m/%d %a %H:%M:%S&#34; &#39;(20170 6680 0)) =&gt; &#34;2011/11/21 月 18:30:00&#34;  ;; Emacs 時間を decode する。 (decode-time &#39;(20170 6680 0)) =&gt; (0 30 18 21 11 2011 1 nil 32400) ;; (SECONDS MINUTES HOUR DAY MONTH YEAR DOW DST ZONE)  ;; 現在の Emacs 時間を取得する。 (current-time) =&gt; (20170 6680 0) UNIX のコマンドラインと C 言語での取得方法はこちら。[2009-11-21-1] 追記(2011-11-22):]]></description>
        </item>
        <item>
            <title><![CDATA[『自分のアタマで考えよう』を読んだ]]></title>
            <link>https://masutaka.net/2011-11-18-1/</link>
            <guid>https://masutaka.net/2011-11-18-1/</guid>
            <pubDate>Fri, 18 Nov 2011 00:00:00 GMT</pubDate>
            <description><![CDATA[ 前回とはうって変わり、表やグラフがよく出てくる分析的な本。考えるこ
とについて突き詰めて考えた本なので、一度目を通しておいた方が良いと
思う。
以下、ビビッと来たところ。
P168
 日本企業は、与えられたフィルターの中で一番に選ばれるための商品を 開発することにはとても優れているのに、「今までになかった新たなフィ ルターを消費者に提示する」ことが必ずしも得意ではない、ということで す。 ビジネスの世界では、この「新たな選択基準＝新たなフィルターを提示 する」ことを、「ゲームのルールを変える」といいます。 P238
①知識は思考の棚の中に整理すること ②空いている棚に入るべき、まだ手に入っていない知識を常に意識すること ③それらの知識が手に入れば言えるようになることを、事前に考えておくこと これが、ちきりんが考える「知識と思考の、理想的なカンケイ」なのです。 ]]></description>
        </item>
        <item>
            <title><![CDATA[Emacs Lisp で buffer-local function を使う方法]]></title>
            <link>https://masutaka.net/2011-11-05-1/</link>
            <guid>https://masutaka.net/2011-11-05-1/</guid>
            <pubDate>Sat, 05 Nov 2011 00:00:00 GMT</pubDate>
            <description><![CDATA[stackoverflow を見ていたら、面白いネタがあった のでメモしておきます。
 このコードは buffer-local variable のように動作します。
通常のバッファでは &ldquo;this is a default message.&rdquo; をミニバッファに出
力します。use-my-foo が定義されたバッファ((set ..) の行を評価する)
では &ldquo;this is a special message.&rdquo; を出力します。
用途はちょっと思いつきませんが、こんなことも出来るのですね。]]></description>
        </item>
        <item>
            <title><![CDATA[Git タグ操作のまとめ]]></title>
            <link>https://masutaka.net/2011-11-02-1/</link>
            <guid>https://masutaka.net/2011-11-02-1/</guid>
            <pubDate>Wed, 02 Nov 2011 00:00:00 GMT</pubDate>
            <description><![CDATA[個人的なメモ その３
その１と２は [2010-04-29-1] [2011-07-05-1] にあるよ。
(1) タグ一覧を表示する。
 % git tag
 (2) タグ 1.0.50 を作成する。タグの種類は「注釈付きのタグ」
 % git tag -a 1.0.50
 (3) 後からタグ 1.0.50 を 9fceb02 に付ける。
 % git tag -a 1.0.50 9fceb02
 (4) タグ 1.0.50 の情報を表示する。
 % git show 1.0.50
 (5) リモートブランチ origin にタグ情報 1.0.50 を送信する。
 % git push origin 1.0.50
 (6) リモートブランチ origin にタグ情報全てを送信する。
 % git push origin &ndash;tags]]></description>
        </item>
        <item>
            <title><![CDATA[C で実装された Emacs のビルドイン関数にジャンプする]]></title>
            <link>https://masutaka.net/2011-11-01-1/</link>
            <guid>https://masutaka.net/2011-11-01-1/</guid>
            <pubDate>Tue, 01 Nov 2011 00:00:00 GMT</pubDate>
            <description><![CDATA[Emacs ではほとんどの関数は Emacs Lisp で書かれているため、
F1 f (describe-function) すると、定義されている *.el が一行目に
表示されます。
 add-to-list is a compiled Lisp function in subr.el'. この例だと subr.el&rsquo; 上で Enter すると、定義元に飛べます。
 中には高速化のために C で書かれた関数もあります。car や cdr、
write-region などです。このような関数を F1 f すると、以下のように
表示されます。
 car is a built-in function in C source code'. 同じように C source code&rsquo; 上で Enter すると、C のソースコードに飛
べます。
 Enter 後に &ldquo;Emacs C source dir:&rdquo; というプロンプトが表示されてしまっ
たら、ソースコードの展開先を指定してあげましょう。
もう削除しちゃったよという人や、パッケージでインストールしてソース
コードがない人は適当な場所に展開すると良いでしょう。
% pwd /Users/masutaka % wget http://ftpmirror.]]></description>
        </item>
        <item>
            <title><![CDATA[Emacs の recentf-mode をチューニングしたよ]]></title>
            <link>https://masutaka.net/2011-10-30-2/</link>
            <guid>https://masutaka.net/2011-10-30-2/</guid>
            <pubDate>Sun, 30 Oct 2011 01:00:00 GMT</pubDate>
            <description><![CDATA[Emacs で最近開いたファイルのリストを自動保存する。 - 日々、とんは語る。 anything.el との組み合わせが素敵すぎますね。ずっと便利に使ってます。
ただ、ミニバッファに 30 秒ごとに &ldquo;Wrote ~/.emacs.d/.recentf&rdquo; と表示
されるのが結構気になっていました。なので、メッセージを表示しないよ
うに、且つ必要時以外は recentf-save-file に保存しないようにしました。
 設定は @tomoyaton さんの記事と重複してますが、分かりづらくなるので
私の recentf 関連の設定を全て記載しています。recentf-save-file をデ
フォルトの ~/.recentf から ~/.emacs.d/.recentf にも変更しています。
@cvmat さんにはいろいろというか、ほぼ全てのアドバイスを頂きました。
いつもありがとうございます。
追記(2011-10-30):
コメント欄でよりシンプルな方法を教えて頂いたので、コードを差し替え
ました。]]></description>
        </item>
        <item>
            <title><![CDATA[英語文法メモ３ - 完了形]]></title>
            <link>https://masutaka.net/2011-10-30-1/</link>
            <guid>https://masutaka.net/2011-10-30-1/</guid>
            <pubDate>Sun, 30 Oct 2011 00:00:00 GMT</pubDate>
            <description><![CDATA[英語は実に時制を厳密に扱いますね。ってことで今回は完了形です。
現在完了形 現在完了形は過去と今の状況をつなげて、「どういういきさつを経て、今、
どうなっているのか」を一気に表現する形である。したがって、現在完了
形が用いられている場合、その内容は「今の状況」とかかわりをもってい
ることになる。
※『Forest』には現在形、過去形、未来形、現在完了形などが図入りで説
明されている。それを見ると分かりやすい。
「宿題が終わったから、遊びに行こうよ。」
 × I finished my homework, so let&rsquo;s go out to play.
[2011-10-25-1] にも書いたとおり、過去形は現在とは無関係の過去の事柄
を述べるのに使われる。以下が正解。
○ I have finished my homework, so let&rsquo;s go out to play.
 「まだ決心していないんだ」
 × I don&rsquo;t decided.
これも [2011-10-25-1] に書いたとおり、動作動詞の現在形は「反復・習
慣」を表すので、使えない。以下が正解。
○ I have not decided yet.
 ※ 最近のアメリカ英語では、現在完了形を使うべきところで過去形を使う
ことがあるとのこと(フィリピン英語もその傾向があるかも)。『Forest』
には続けて、「だからと言って、むやみに過去形を使うことはせず、現在
完了形と過去形を使い分けるようにしよう」と書いてあった。
現在完了形は、今の状況を述べるものなので、明らかに過去を表す表現と
ともに使うことは出来ない。
yesterday, last night[week/month/year], then, just now, when I was .]]></description>
        </item>
        <item>
            <title><![CDATA[英語文法メモ２ - 動詞と時制]]></title>
            <link>https://masutaka.net/2011-10-25-1/</link>
            <guid>https://masutaka.net/2011-10-25-1/</guid>
            <pubDate>Tue, 25 Oct 2011 00:00:00 GMT</pubDate>
            <description><![CDATA[日本語とは時制の解釈が少し違うので注意。
現在形と現在進行形 現在形は現在だけのことではなく、「今」を中心として、過去から未来に
わたるある程度の期間に成り立つ行為や状態を表す。
動詞には状態を表す「状態動詞」と動作を表す「動作動詞」がある。
状態動詞 特に必要がない限り進行形にはしない。
(1)心理を表す動詞
 like, love, hate, hope, want, think, believe, know, understand,
remember, forget
 (2)知覚・感覚を表す動詞
 see, hear, feel, smell, taste
 (3)その他の状態を表す動詞
 be, remain, have, own, belong to, contain, exist, resemble
 動作動詞 「動作動詞」の現在形は、「今」を中心として過去から未来にわたってく
り返される動作を表す。一回きりの動作は基本的に表せない。
 I always drink coffee at breakfast.
 過去・現在・未来を通して変化のない事実を表すことも出来る。
 The earth goes around the sun.
 過去形と過去進行形 現在とは無関係の過去の事柄を述べるのに使われる。(この点は日本語にな
いこだわりだと思う。)
過去進行形では、無限にある過去のうちの「ある１点」でしている最中だっ
たことを表しているので、「いつしていたか」を示す必要がある。
 I was watching TV around noon.]]></description>
        </item>
        <item>
            <title><![CDATA[英語文法メモ１ - 動詞と文型]]></title>
            <link>https://masutaka.net/2011-10-22-1/</link>
            <guid>https://masutaka.net/2011-10-22-1/</guid>
            <pubDate>Sat, 22 Oct 2011 00:00:00 GMT</pubDate>
            <description><![CDATA[英語の文法を一から勉強中です。
そういうわけで、これは個人的なメモになります。
文型 主語は S(Subject)、(述語)動詞は V(Verb)、目的語は O(Object)、
補語は C(Complement) で表す。
(1) SV - S は V する。  He smiled.
 (2) SVC - S は C である(V)。 S is C が成り立つ。
補語は、動詞の後で主語について説明する。
 The movie was funny.
 (3) SVO - S は O を V する。  We cleaned the classroom.
 (4) SVOO&rsquo; - S は O に O&rsquo; を V する。  My uncle gave me his watch.]]></description>
        </item>
        <item>
            <title><![CDATA[フィッシングサイトにはこうやって引っかかるんだ。こりゃ騙されるわ〜]]></title>
            <link>https://masutaka.net/2011-10-18-2/</link>
            <guid>https://masutaka.net/2011-10-18-2/</guid>
            <pubDate>Tue, 18 Oct 2011 01:00:00 GMT</pubDate>
            <description><![CDATA[知り合いから Twitter の Direct Message にこんなのが。
 Found a funny picture of you! http://t.co/( 省略)
 怪しいのは間違いなくて、実際彼はパスワードを抜かれていたわけですが、
どうやったらこうなるのか興味があったので体験してみました。
慎重にことを進める。 Twitter はパスワードが漏れるか、OAuth 認証を許可しない限り、アカウ
ントを乗っ取られることはないはずです。でも慎重を期すために、Web ブ
ラウザはメインでは使っていない Firefox を使うことにしました。
アカウントも普段とは別なのを使います。http://twitter.com にアクセス
して、一旦ログアウト。以前、動作検証用に作ったサブアカウントでログ
インしました。
次におもむろにアドレスバーに Direct Message の URL を貼り付けて、
Return キーを押下。twitter.com から「安全でない外部サイトに移動する
けど問題ないか」聞かれました。このあたりでいつもと違う雰囲気。
移動したところ、Twitter からログアウトしてしまいました。
？？？
その巧妙な仕組みを理解 よく分からないなあと思い、別な作業をしていましたが、また思い直して
再挑戦。
！？
twitter.com じゃない！！
  これほど精巧な作りだと、アカウントとパスワードを打ってしまうのも無
理はないです。すぐにタブを閉じないと、あとで忘れて打ってしまうかも。
まとめ フィッシングサイトのへ防衛策として「リンクを不用意に踏まない」とよ
く言われますが、なぜ踏んだだけで危険なのか、今まで理解していません
でした。IE じゃあるまいし、踏んだだけで危険なわけないじゃんと。
Web サービスで認証が切れて、ログイン画面に飛ばされるのは良くあるこ
とです。その「良くあること」を利用した巧妙な仕組みだなと、腹の底か
ら実感しました。
Twitter 程度なら引っかかってもたかが知れていますが、オンラインバン
キングや PayPal とかだと厳しいですね。]]></description>
        </item>
        <item>
            <title><![CDATA[Emacs auto-mode-alist の "\'" ってなんなの〜？]]></title>
            <link>https://masutaka.net/2011-10-18-1/</link>
            <guid>https://masutaka.net/2011-10-18-1/</guid>
            <pubDate>Tue, 18 Oct 2011 00:00:00 GMT</pubDate>
            <description><![CDATA[昨晩の Emacs ミニミニ勉強会のネタ。
@tomoyaton 「auto-mode-alist って、(&quot;\.el\&rsquo;&quot; . emacs-lisp-mode)
とかが設定されてるけど、なんで &ldquo;$&rdquo; じゃなくて &ldquo;\&rsquo;&rdquo; なの〜？」
@masutaka 「言われてみれば確かにそうですね。でも Mule 時代は
(&quot;\.el$&quot; . emacs-lisp-mode) って設定されてた気がしますよ。」
結論から言うと、改行にマッチさせないよう、より厳格にしているからだっ
た。Mule 時代は &ldquo;\&rsquo;&rdquo; がなかったのかな。
&ldquo;$&rdquo; は文字列の終端と改行にマッチする。
;; hoge.el には当然マッチ (string-match &#34;\\.el$&#34; &#34;hoge.el&#34;) =&gt; 4  ;; hoge.ell には当然マッチしない。 (string-match &#34;\\.el$&#34; &#34;hoge.ell&#34;) nil  ;; あれ、hoge.el の後ろが改行でもマッチするんだけど。。。 (string-match &#34;\\.el$&#34; &#34;hoge.el &#34;) =&gt; 4 &ldquo;\&rsquo;&rdquo; は文字列の終端のみにマッチする。
;; hoge.el には当然マッチ (string-match &#34;\\.el\\&#39;&#34; &#34;hoge.el&#34;) =&gt; 4  ;; hoge.ell には当然マッチしない。ここまで同じ。 (string-match &#34;\\.el\\&#39;&#34; &#34;hoge.]]></description>
        </item>
        <item>
            <title><![CDATA[シェアハウスに住んでそろそろ半年になるから、ちょっと自分の考えをまとめておこうか。]]></title>
            <link>https://masutaka.net/2011-10-15-1/</link>
            <guid>https://masutaka.net/2011-10-15-1/</guid>
            <pubDate>Sat, 15 Oct 2011 00:00:00 GMT</pubDate>
            <description><![CDATA[ギークハウス神戸 - いわゆるシェアハウスに住み始めてそろそろ半年にな
ります。
シェアハウスではその名のとおり、いろんなものをシェアできたり、家賃
や光熱費を節約できるのが良いです。
一人暮らしでは買うと余ってしまう食材(ニンニク、生姜、生ハム等)が買 える。個人的には、好きな時にペペロンチーノを作れるのは結構嬉しい。 一人暮らしではまず買わないものをシェア出来る。例えばここには全自動 エスプレッソマシーンがあるので、コーヒーが飲み放題。 家電をシェアできる。今回私は供給者なので、メリットはまあ、ないけど。^^; 本(技術書や漫画)をシェアできる。 知識をシェアできる。毎日がミニミニ勉強会。 反面、他人と住むことになるので、やり方や考えに戸惑ったりイラっとす
ることもままあります。
逆に、今一緒に住んでいる人から見ると、私は細かいヤツと思われている
と思います。まあ確かにそうで、平均以上に掃除とか片付けはやる方です。
でも、一人暮らしの時は手を抜くことも多かったです。
洗い物を丸１日以上放置することはザラでしたし、ガスレンジは油でぐっ
ちゃぐちゃ。掃除機は１週間に１回かけてましたが、トイレ掃除は月に１
回、風呂掃除は年に１〜２回程度でした。
今は食べたらすぐに食器を洗って、ガスレンジは汚れる前に掃除。掃除機
の頻度は同じ(本当は週２回にしたい)ですが、トイレ掃除は週１回やるよ
うに指示し、風呂掃除も月に１回くらいやってます。
なんで一人暮らしの時よりマメなのかというと、私はシェアハウスは自分
の家ではないと思っているからです。
シェアハウスは自分の家ではない シェアハウスは、「プライベートな空間」と「パブリックな空間」に分け
られますよね。
「プライベートな空間」は自分の部屋です。完全なるプライペートスペー
スです。火事や異臭、騒音を発生させなければどうぞご勝手に..と思って
います。本当は全部屋に鍵を付けたいくらい。
「パブリックな空間」はリビングやキッチン、トイレ、風呂、玄関などの
共用スペースです。言うまでもありませんが、ここは自分の部屋ではあり
ません。
私はこの「パブリックな空間」が、同じ家でありながら自分の家ではない
と思っています。
「パブリックな空間」での私的なルール この記事を書くためにあれこれ考えていたわけですが、私は自分で &ldquo;「パ
ブリックな空間」での私的なルール&rdquo; を決めて、実行していたことに気づ
きました。例えばこんな感じです。
(1) 使った食器やペットボトルはすぐ洗う。
→ 放置したら邪魔だし、もっと放置したら他の人に洗わせることになるか
らです。
(2) 私物は置かない。もしくは置きっぱなしにしない。
→ 他人から見ると、放置された私の物は邪魔以外何者でもないからです。
(3) よその家でやるべきでないことはシェアハウスでもやらない。
→トイレのドアを開けっ放しにしないとか&hellip;。(こんなのは無意識に出来
るように、子供時代に躾けられないのかなあ。謎。)
(4) 食事を作ってくれる人には最大限の敬意を払う。
→ な〜んて書きましたが、まあ料理以外のことをしなくて済むように協力
するってだけです。食器を拭いて作業スペース確保したりだとか、テーブ
ル拭いたり箸並べたりするだとか。ルールって言うよりも、子供時代にさ
んざん手伝わされたので、そうしないと気持ち悪いって方が強いかな。
パブリックな空間だと意識が変わる 以上のように「パブリックな空間」は自分の家ですらないと思っているの
で、自分の家だとサボりがちな掃除とか片付けも「面倒だけどやらないと
なあ」と思いながらもやっています。大人にならないといけないわけです
ね。
最初のうちは、指示しないと動いてくれなかったり(※)、指示してもなか
なかやらないことにイライラしてました。でも今は「人に求めてはいけな]]></description>
        </item>
        <item>
            <title><![CDATA[GNU Screenの別Windowsのカレントディレクトリに移動するzshスクリプト、cddを直した]]></title>
            <link>https://masutaka.net/2011-10-12-2/</link>
            <guid>https://masutaka.net/2011-10-12-2/</guid>
            <pubDate>Wed, 12 Oct 2011 01:00:00 GMT</pubDate>
            <description><![CDATA[cdd - screen の別WINDOWのカレントディレクトリに移動する zsh スクリプト - coﾘ・ー・ﾝ＜2nd life 結論から言うと結構便利です。GNU Screen を使っている zsh ユーザーは
是非お試しを。
私の環境では以下のエラーが発生するので、修正して gist にアップしま
した。(coderepos へのコミットの仕方が分からないし、人によっては必要
ない修正なので、gist にアップしました。)
 &ldquo;unsetopt clobber&rdquo;(既存のファイルへの上書きリダイレクト防止) を設
定していると 49 行目付近の &ldquo;echo &ldquo;\n&rdquo; &raquo; &ldquo;$CDD_PWD_FILE&rdquo;&rdquo; がエラー
になる。 $HOME/.zsh が存在しないとエラーになる。  あと、cdadd と cddel がそれぞれ _cdadd と _cddel でないと使えなかっ
たので、直しました。
 追記(2012-05-18):
最近は使ってないというか、存在を忘れてますね〜。。
ところでこんな記事がありました。
cdd を tmux, bash, multi session +α に対応した - カワイイはつくれる ]]></description>
        </item>
        <item>
            <title><![CDATA[Emacsデフォルトの機能で改行やタブ、スペースを色づけできるようになってた]]></title>
            <link>https://masutaka.net/2011-10-12-1/</link>
            <guid>https://masutaka.net/2011-10-12-1/</guid>
            <pubDate>Wed, 12 Oct 2011 00:00:00 GMT</pubDate>
            <description><![CDATA[今回も、弊社で毎日行われている、ミニミニ Emacs 勉強会で @tomoyaton から教えてもらいました。
Emacs23 からは M-x global-whitespace-mode すると、改行やタブ、
スペースを色づけできるようになってます。常に表示させるには
~/.emacs に以下を書けば OK です。
(global-whitespace-mode 1) でも私は改行と全角スペースだけ色付けすればよいので、上記に加えて
下記も設定することにしました。
;; スペースの定義は全角スペースとする。 (setq whitespace-space-regexp &#34;\x3000+&#34;)  ;; 改行の色を変更 (set-face-foreground &#39;whitespace-newline &#34;gray40&#34;)  ;; 半角スペースと改行を除外 (dolist (d &#39;((space-mark ?\ ) (newline-mark ?\n)))  (setq whitespace-display-mappings  (delete-if  &#39;(lambda (e) (and (eq (car d) (car e))  (eq (cadr d) (cadr e))))  whitespace-display-mappings)))  ;; 全角スペースと改行を追加 (dolist (e &#39;((space-mark ?\x3000 [?\□])  (newline-mark ?]]></description>
        </item>
        <item>
            <title><![CDATA[第4回関西Emacsに参加＆発表してきました]]></title>
            <link>https://masutaka.net/2011-10-11-1/</link>
            <guid>https://masutaka.net/2011-10-11-1/</guid>
            <pubDate>Tue, 11 Oct 2011 00:00:00 GMT</pubDate>
            <description><![CDATA[= (kansai-emacs #x04) ;=&gt; &ldquo;第四回関西Emacs勉強会&rdquo; - ぺっくブログミラー@peccul 先月の福岡Emacs [2011-09-28-1] に引き続き、関西Emacsに参加＆発表し
てきました。今年の 4 月に行われた第 3 回に出席したこともあり、結構
リラックスして望むことが出来ました。
会場ははてなの京都本社です。ほとんどガラス張りで、風通しの良い会社
の印象を受けました。
  まずはいつもどおり、ポジションペーパーを使った自己紹介。
 休憩をはさんで発表開始です。福岡 Emacs より、マニアックな発表者が多
めの印象でした。みなさん Emacs が好きなんですね〜。
@hitode909 さんや @kozo2 さんが紹介した smartchr.el は便利ですね。
こんな設定をすると、M を 1 回打つと普通の &ldquo;M&rdquo;、2 回打つと &ldquo;増田です。&rdquo;
に切り替わります。でも、&quot;=&quot; を &quot; = &quot; にするのは私にはちょっと合わな
いかも。気が向いたらまた設定します。
(define-key global-map (kbd &#34;M&#34;) (smartchr &#39;(&#34;M&#34; &#34;増田です。&#34;))) dmacro.el もその場でインストール。なんでインストールしてなかったの
かなあ？謎。
私も twittering-mode.el の布教活動をしてきました。半分以上の出席者がす
でに使っていましたが、その場でインストールして試す人もいて、初回と
しては成功だったのかなと思います。繰り返しますが、Emacs を使えるよ
うになりたければ、よく使うサービスを Emacs で使うのが一番の近道です。
 懇親会は会場と同じ場所で、ピザと寿司とビール。ワールドカフェの影響
なのか、会場と同じ場所が功を奏したのか、結構盛り上がって Emacs 談義]]></description>
        </item>
        <item>
            <title><![CDATA[migemo の Formula を作った]]></title>
            <link>https://masutaka.net/2011-10-10-1/</link>
            <guid>https://masutaka.net/2011-10-10-1/</guid>
            <pubDate>Mon, 10 Oct 2011 00:00:00 GMT</pubDate>
            <description><![CDATA[migemo の Formula を作りました。本来であれば、pull request 送るもの
だと思いますが、日本語に特化したツールのリクエストを送って良いか判
断が付かなかったので、とりあえず gist に上げました。
 /usr/local/Library/Formula 以下に上記 Formula をコピーしたら、
&ldquo;brew install migemo&rdquo; するだけでインストールできます。
あとは以下を設定するだけです。
# ~/.zshenv export RUBYLIB=/usr/local/lib/ruby ;; ~/.emacs (require &#39;migemo) 追記(2011-11-26):
pull request を送りました。 気長に待ちます。
追記(2011-11-28):
却下されました。migemo の Formula が depends_on &rsquo;emacs&rsquo; なことと、
ruby-(bsearch|romkan) が gems に存在するためとのこと。]]></description>
        </item>
        <item>
            <title><![CDATA[Emacs で 5 秒間何もしないと、カレント行をハイライトさせる]]></title>
            <link>https://masutaka.net/2011-10-06-1/</link>
            <guid>https://masutaka.net/2011-10-06-1/</guid>
            <pubDate>Thu, 06 Oct 2011 00:00:00 GMT</pubDate>
            <description><![CDATA[@tomoyaton からの耳より情報。
ちょっと席を立って戻ってきた時に、カーソル位置がすぐに分かります。
常にハイライトじゃないので、邪魔にならないのがよいです♪
カーソルを見失いがちな twittering-mode.el との組み合わせが良い感じです。
(require &#39;hl-line+) (toggle-hl-line-when-idle) hl-line+.el は auto-install.el とかでインストールすると良いでしょう。
5 秒を 3 秒に変えたい場合は、この設定で OK
(setq hl-line-idle-interval 3) 色を変えたい場合は、こんな感じ。色の種類は M-x list-colors-display
で確認できます。
(set-face-background &#39;hl-line &#34;Yellow&#34;) 他にも色々 hl-line+.el に書いてあります。]]></description>
        </item>
        <item>
            <title><![CDATA[『あしたのジョー』を観た]]></title>
            <link>https://masutaka.net/2011-09-30-2/</link>
            <guid>https://masutaka.net/2011-09-30-2/</guid>
            <pubDate>Fri, 30 Sep 2011 01:00:00 GMT</pubDate>
            <description><![CDATA[原作は見たことないんだけど、香川さんの段平を見たくて観た。
時系列がかなり崩されていた気がするけど、どうなんだろう？
伊勢谷さんの軽量シーンはぜったい CG だろと思ったらガチだった。すげ〜
山下君の体の作り込みもハンパないっす。
でも一番の見せ場は段平がサンドバック叩くシーンで決まり(笑)。堂に入っ
ています。]]></description>
        </item>
        <item>
            <title><![CDATA[Redmine-1.2.1 にインストールしたプラグインやテーマ達]]></title>
            <link>https://masutaka.net/2011-09-30-1/</link>
            <guid>https://masutaka.net/2011-09-30-1/</guid>
            <pubDate>Fri, 30 Sep 2011 00:00:00 GMT</pubDate>
            <description><![CDATA[自分用のメモです。ruby-enterprise-1.8.7-2011.03 をインストールした
CentOS-5.6 上で Redmine-1.2.1 を動かしてます。
→Redmine 1.2をCentOS5.6にインストールする手順 ｜ Redmine.JP Blog インストールしたプラグイン action_mailer_optional_tls  Ruby-1.8 では TLS を使ったメール送信をサポートされていないので、
Gmail から SMTP 送信したい場合は必須。インストールして動作確認まで
したが、今は使ってない。
ics export  Google カレンダーに Redmine のチケットを表示できるプラグイン。イン
ストールすると、チケット、ガントチャート、カレンダーに iCalendar の
URL が表示される。便利。
iCalendar のフォーマットは管理→プラグインから変更できる。
私は Issue rendering as を full time event にした。
例によって Google カレンダーは fetch が遅いので、可能ならカレンダー
アプリに直接 iCalendar の URL を登録した方がよい。iPhone にはなぜか
登録できなかった。なぜだ！？
Code Review  push された commit に対して、コードレビューできるプラグイン。
# (cd vendor/plugins &amp;&amp; unzip redmine_code_review-0.]]></description>
        </item>
        <item>
            <title><![CDATA[ターミナルの zsh と Emacs を風のように駆け抜ける！]]></title>
            <link>https://masutaka.net/2011-09-28-1/</link>
            <guid>https://masutaka.net/2011-09-28-1/</guid>
            <pubDate>Wed, 28 Sep 2011 00:00:00 GMT</pubDate>
            <description><![CDATA[福岡Emacs 行ってきました！
Mew 関係者がお二人(@nom4476 @moepanda )もいらっしゃったり、Vim 使い
が 1/3 くらい占めていて案外新鮮だったり、ワールドカフェ という対話手
法に感心したり(残念ながら時間切れで途中で退席しましたが)で、とって
も楽しかったです！
嬉しかったことは @moepanda さんにお会いできたことと、@nom4476 さん
が「このブログ読んでますよ」と仰ってくれたこと。うれしはずかし&hellip;(^^)
私も「Langrich社でのEmacs活用、langrich.el 」というお題でデビューを
飾ることが出来ました。8888
それぞれの発表も面白かったのですが、一番気になったのが発表の中でど
なたかが、ターミナルの現在のディレクトリを dired で開いたり、Emacs
の現在のバッファに対応するディレクトリをターミナルで開いたりしてい
たことでした。
どなたか忘れてしまったのですが、試しにツイートしてみたら @nom4476 さんが gist に置いてくださいました。
loading...
   if (localStorage.getItem("pref-theme") === "light") { const elements = document.getElementsByClassName('twitter-tweet'); for (let i = 0; i  Gist のコードはこちら。
 かる〜く解説。
  dired()
ターミナル上の zsh で dired とタイプすると、現在のディレクトリを
dired で開いてくれます。
  cde()
同じく cde とタイプすると、Emacs の現在のバッファに対応するディレク]]></description>
        </item>
        <item>
            <title><![CDATA[『荒木飛呂彦の奇妙なホラー映画論』を読んだ]]></title>
            <link>https://masutaka.net/2011-09-14-1/</link>
            <guid>https://masutaka.net/2011-09-14-1/</guid>
            <pubDate>Wed, 14 Sep 2011 00:00:00 GMT</pubDate>
            <description><![CDATA[こんな本が出てたとは。。。
荒木先生が影響を受けた約 100 本のホラー映画を、先生御自ら解説してい
る。荒木飛呂彦ファンまたはホラー映画ファンなら読むべし。
私はホラー映画ファンではないけれども、ジョジョのあのシーンはこの映
画を参考にしたのかな？などと想像しながら読めたので楽しかった。バオー
来訪者の話もちょろっと出てたよ。
そして最後の締めがまた素晴らしかった。ブラボー！ おお…ブラボー！！]]></description>
        </item>
        <item>
            <title><![CDATA[Twitter で公式 RT の数が 100 を超えたツイートの、ユーザ一覧を取得する方法]]></title>
            <link>https://masutaka.net/2011-09-06-1/</link>
            <guid>https://masutaka.net/2011-09-06-1/</guid>
            <pubDate>Tue, 06 Sep 2011 00:00:00 GMT</pubDate>
            <description><![CDATA[追記(2012-06-17):
今はユーザ数は普通に表示される ようになりました。ユーザ一覧は API 使わないと取得できません。
 公式 RT の数が 100 を超えると、http://twitter.com/ ではユーザ一覧は
おろか、数も分からなくなります。
http://favstar.fm/ では一見取得できていそうですが、漏れがあることが
ありますし、テキストのユーザ一覧を取得するのは面倒そうです。
いろいろ調べた結果、以下の方法が良さそうです。(もっと良い方法があれ
ば教えて下さい。)
1. TweetID を確認 http://twitter.com/curiousir/status/105930346717126656 loading...
   if (localStorage.getItem("pref-theme") === "light") { const elements = document.getElementsByClassName('twitter-tweet'); for (let i = 0; i  この場合は 105930346717126656 です。
2. ユーザ一覧を取得 Twitter でログインした状態で、以下の URL にアクセスすると
公式 RT した、100 名までのアカウント情報を取得できます。
http://api.twitter.com/1/statuses/105930346717126656/retweeted_by.xml?count=100&page=1 page を増やしていけば、101 名以上も取得できます。
http://api.twitter.com/1/statuses/105930346717126656/retweeted_by.xml?count=100&page=2 上の例では公式 RT の数が 175 なので、page=3 はありません。
また、count の Max 値は 100 です。それ以上は指定できません。]]></description>
        </item>
        <item>
            <title><![CDATA[Emacs For Mac OS X に ElScreen と APEL をインストールする方法]]></title>
            <link>https://masutaka.net/2011-09-04-2/</link>
            <guid>https://masutaka.net/2011-09-04-2/</guid>
            <pubDate>Sun, 04 Sep 2011 01:00:00 GMT</pubDate>
            <description><![CDATA[インターン生に無理矢理が Emacs を使い始めました。
タブ機能を使いたいとのことだったので、ElScreen をインストールしても
らおうとしたら、APEL が必要でした。インストール方法を一言で説明する
のは難しいので、彼向けのブログ記事を書くことにしました。
Emacs は GNU Emacs For Mac OS X からダウンロードしたものを使ってい
ます。
1. APEL のダウンロード http://kanji.zinbun.kyoto-u.ac.jp/~tomo/elisp/APEL/ から APEL-10.8
をダウンロードします。
2. APEL の展開とインストール 以下のとおりにコマンドを打てば、インストール出来ると思います。
% tar xvzf apel-10.8.tar.gz % cd apel-10.8 % make PREFIX=$HOME/.emacs.d EMACS=/Applications/Emacs.app/Contents/MacOS/Emacs LISPDIR=$HOME/.emacs.d/elisp VERSION_SPECIFIC_LISPDIR=$HOME/.emacs.d/elisp23 % make PREFIX=$HOME/.emacs.d EMACS=/Applications/Emacs.app/Contents/MacOS/Emacs LISPDIR=$HOME/.emacs.d/elisp VERSION_SPECIFIC_LISPDIR=$HOME/.emacs.d/elisp23 install % (cd $HOME/.emacs.d/elisp &amp;&amp; mv apel .apel-10.8 &amp;&amp; ln -s .apel-10.8 apel) % (cd $HOME/.emacs.d/elisp23 &amp;&amp; mv emu .apel-10.8 &amp;&amp; ln -s .]]></description>
        </item>
        <item>
            <title><![CDATA[『もののけ姫』と『塔の上のラプンツェル』を観た]]></title>
            <link>https://masutaka.net/2011-09-04-1/</link>
            <guid>https://masutaka.net/2011-09-04-1/</guid>
            <pubDate>Sun, 04 Sep 2011 00:00:00 GMT</pubDate>
            <description><![CDATA[ ちょっと前に観たので、感想を忘れてしまった。。。
みんな頑丈だなあという印象が残ったくらい。。。
 むかーし、グリム童話か何かで読んだことがあり、懐かしさのあまり観る
ことにした。話題にもなってたしね。で、感想。
 髪の毛活躍しすぎ。 CG リアリティありすぎ。  ミュージカル要素も入っているから、日本語化大変だったんだろうな。
ラプンツェルの声はしょこたん がやってた。なるほど〜
自然で悪くなかった。
原作はもっとグロいストーリーだったよなあと調べてみたら、案の定そう
だった。結構キツイ。
ラプンツェル - wikipedia ]]></description>
        </item>
        <item>
            <title><![CDATA[ワインメモ「シャトー・レ・モーラン」]]></title>
            <link>https://masutaka.net/2011-09-01-1/</link>
            <guid>https://masutaka.net/2011-09-01-1/</guid>
            <pubDate>Thu, 01 Sep 2011 00:00:00 GMT</pubDate>
            <description><![CDATA[シャトー･レ･モーラン
原産国: フランス
フィリピンに持って行って、@maru_yohei とおいしく飲んだ。
今回は辛口。このくらい辛いのも好き。安い割においしかった。
てか、牛タンを丸ごと買って、@maru_yohei が捌いてくれたことの方が
強烈に印象に残っているw]]></description>
        </item>
        <item>
            <title><![CDATA[『フィリピン「超」格安英語留学』を読んだ]]></title>
            <link>https://masutaka.net/2011-08-20-2/</link>
            <guid>https://masutaka.net/2011-08-20-2/</guid>
            <pubDate>Sat, 20 Aug 2011 01:00:00 GMT</pubDate>
            <description><![CDATA[ いやあ、面白い本でした。うちの CEO からフィリピンに持って来てと頼ま
れて買って読んだのがきっかけです。この本の存在は知ってましたが、最
近出たばかりだったのですね。著者も 1985 年生まれと若い！
先日フィリピン留学スクールを始めた会社に在籍している私ですら、フィ
リピン留学に行きたいとさえ思いました。(マジで行くかもw)
セブ・ラングリッチカレッジ 特に転職を考えている人は、次の会社に入る前にフィリピン留学を検討し
た方が良いでしょう。社会人になってからまとまった自由な時間を取れる
時は、そうありません。
考えていない人でも、今は格安のオンライン英会話スクールがありますか
ら、ちょっと勇気を出して始めてみるのはいかがでしょうか。一歩踏み出
すと、違った世界が広がるかもしれませんよ。
ラングリッチ - オンライン英会話 さて本の中では、一般的なフィリピン留学のデメリットも取り上げられて
います。
 スクールの食事が美味しくない。 宿泊先が汚い。 留学前に聞いていたのと話が違う。  贔屓目に見ることを差し引いても、セブ・ラングリッチカレッジは全てを
クリアしていると思われます。
 食事は 3 食、日本食。 宿泊先はまあまあきれいなコンドミニアム。しかも 24 時間ガードマン常駐。 留学エージェントを介さないので、リアルタイムの情報を得られる。  講師を指名することもできるのは、オンライン英会話ラングリッチの生徒
さんにとって、うれしいことですね。私は元々ラングリッチの生徒で今は
運営側の人間ですが、セブに見学に来た時に先生と対面でレッスンを受け
られた時は激しく感動しました。
本の中であまり触れられていないのが不思議なのですが、留学前にオンラ
イン英会話で少しは英語に慣れておくことを強くオススメします。そんな
状態でフィリピンまで一人で行くのは、とっても不安に感じると思います
から。。。(行き先がセブの場合、LCC (格安航空会社)のセブ・パシフィッ
ク航空を使うと、マニラでの乗り換えが必要です。)
その他関連リンク:
ラングリッチ公式ブログ-オンライン英会話｜オンラインで学べる最高の英会話スクール ラングリッチのフィリピン留学スクール出来ました。 - 日々、とんは語る。 ]]></description>
        </item>
        <item>
            <title><![CDATA[『島田紳助100の言葉』を読んだ]]></title>
            <link>https://masutaka.net/2011-08-20-1/</link>
            <guid>https://masutaka.net/2011-08-20-1/</guid>
            <pubDate>Sat, 20 Aug 2011 00:00:00 GMT</pubDate>
            <description><![CDATA[帰省した時に親が絶賛してたので、試しに読んでみました。さらっと読め
て良かったです。成功者が語る言葉には、共通するものがありますね。]]></description>
        </item>
        <item>
            <title><![CDATA[Emacs で対応している画像タイプを確認する方法]]></title>
            <link>https://masutaka.net/2011-08-12-1/</link>
            <guid>https://masutaka.net/2011-08-12-1/</guid>
            <pubDate>Fri, 12 Aug 2011 00:00:00 GMT</pubDate>
            <description><![CDATA[個人的なメモです。
(mapcar (lambda (type) (cons type (image-type-available-p type))) image-types) =&gt; ((png . t) (gif . t) (tiff . t) (jpeg . t) (xpm . t) (xbm . t) (pbm . t)) Togetter - 「twittering-mode でアイコンが出なかった件」 ]]></description>
        </item>
        <item>
            <title><![CDATA[Lion で Emacs-23.3 をソースからビルド出来ない件を解決できた]]></title>
            <link>https://masutaka.net/2011-07-31-2/</link>
            <guid>https://masutaka.net/2011-07-31-2/</guid>
            <pubDate>Sun, 31 Jul 2011 01:00:00 GMT</pubDate>
            <description><![CDATA[Lion にバージョンアップしたら [2011-03-10-1] の方法でビルド出来なく
なってしまいました。
Macports とか Homebrew の情報はあったのですが、「ソースからビルド」
の情報は見つけられなかったので、ここにまとめます。
パッチは 3 つ必要でした。
 patch-no-pie.diff  patch-src_unexmacosx.c.diff  patch-fix-title-bar.diff   1 と 2 がビルドを通すために必要です。パッチを当てないとこんなエラー
ログを吐いてビルドに失敗します。
Dumping under the name emacs unexec: unrecognized section name in __DATA segment --- List of All Regions --- address size prot maxp --- List of Regions to be Dumped --- address size prot maxp --- Header Information --- Magic = 0xfeedfacf CPUType = 16777223 CPUSubType = -2147483645 FileType = 0x2 NCmds = 20 SizeOfCmds = 3464 Flags = 0x00200085 Highest address of load commands in input file: 0x5f4000 Lowest offset of all sections in __TEXT segment: 0x14b0 --- List of Load Commands in Input File --- # cmd cmdsize name address size 0 LC_SEGMENT_64 72 __PAGEZERO 0 0x100000000 1 LC_SEGMENT_64 712 __TEXT 0x100000000 0x1d3000 __text 0x1000014b0 0x18e9aa __stubs 0x10018fe5a 0x61e __stub_helper 0x100190478 0xa44 __const 0x100190ec0 0x9b4 __cstring 0x100191878 0x17266 __gcc_except_tab 0x1001a8ae0 0x40 __unwind_info 0x1001a8b20 0x1d98 __eh_frame 0x1001aa8b8 0x28740 2 LC_SEGMENT_64 1512 __DATA 0x1001d3000 0x367000 __program_vars 0x1001d3000 0x28 __nl_symbol_ptr 0x1001d3028 0x10 __got 0x1001d3038 0x1a0 __la_symbol_ptr 0x1001d31d8 0x828 __objc_classlist 0x1001d3a00 0x70 __objc_protolist 0x1001d3a70 0x10 __objc_imageinfo 0x1001d3a80 0x8 __objc_const 0x1001d3a88 0x21d0 __objc_selrefs 0x1001d5c58 0xe38 __objc_msgrefs 0x1001d6a90 0xf0 __objc_classrefs 0x1001d6b80 0x1f0 __objc_superrefs 0x1001d6d70 0x60 __objc_data 0x1001d6dd0 0x460 __data 0x1001d7240 0x2f5f18 __const 0x1004cd160 0x2020 __cfstring 0x1004cf180 0x640 __bss 0x1004cf7c0 0x59518 __common 0x100528ce0 0x10959 3 LC_SEGMENT_64 72 __LINKEDIT 0x10053a000 0xba000 4 LC_DYLD_INFO_ONLY 48 5 LC_SYMTAB 24 6 LC_DYSYMTAB 80 7 LC_LOAD_DYLINKER 32 8 LC_UUID 24 9 unknown 16 10 LC_UNIXTHREAD 184 11 LC_LOAD_DYLIB 88 12 LC_LOAD_DYLIB 56 13 LC_LOAD_DYLIB 56 14 LC_LOAD_DYLIB 56 15 LC_LOAD_DYLIB 104 16 LC_LOAD_DYLIB 104 17 LC_LOAD_DYLIB 112 18 LC_LOAD_DYLIB 96 19 unknown 16 0x7fa2024fc080 (sz: 0x3f2d/ 0x3f30) 0x7fa202400000 (sz: 0xfc07f/ 0xfc080) 0x7fa2026fc080 (sz: 0x3f2c/ 0x3f30) 0x7fa202600000 (sz: 0xfc07f/ 0xfc080) 0x7fa2038fc080 (sz: 0x3f2d/ 0x3f30) 0x7fa203800000 (sz: 0xfc060/ 0xfc080) 0x7fa2025fc080 (sz: 0x3f2c/ 0x3f30) 0x7fa202500000 (sz: 0xfc07e/ 0xfc080) 0x7fa203cfc080 (sz: 0x3f2c/ 0x3f30) 0x7fa203c00000 (sz: 0x639f/ 0xfc080) 0x7fa204ff8000 (sz: 0x138/ 0x7fa8) 0x7fa204800000 (sz: 0x10dbe/0x7f8000) 0x7fa2037f8000 (sz: 0x728a/ 0x7fa8) 0x7fa203000000 (sz: 0x725fff/0x7f8000) 0x1093f1000 (sz: 0/ 0x1000) --- Load Commands written to Output File --- Writing segment __PAGEZERO @ 0 ( 0/0x100000000 @ 0) Writing segment __TEXT @ 0 (0x1d3000/0x1d3000 @ 0x100000000) Writing segment __DATA @ 0x1d3000 (0x367000/0x367000 @ 0x1001d3000) section __program_vars at 0x1d3000 - 0x1d3028 (sz: 0x28) section __nl_symbol_ptr at 0x1d3028 - 0x1d3038 (sz: 0x10) make[1]: *** [bootstrap-emacs] Error 1 make: *** [src] Error 2 3 を当てなくてもビルドは通りますが、下の図のようにタイトルバーが消]]></description>
        </item>
        <item>
            <title><![CDATA[ワインメモ「カルムネール・レセルバ」]]></title>
            <link>https://masutaka.net/2011-07-31-1/</link>
            <guid>https://masutaka.net/2011-07-31-1/</guid>
            <pubDate>Sun, 31 Jul 2011 00:00:00 GMT</pubDate>
            <description><![CDATA[ワインって、なかなか名前覚えられないよね。
ってことでメモメモ。
  カルムネール レセルバ
原産国: チリ
コクがあり、ほどよい甘さのワインで美味しかった。
次は辛口のワインが飲みたいな。]]></description>
        </item>
        <item>
            <title><![CDATA[Macports から Homebrew への移行と、Homebrew の使い方まとめ]]></title>
            <link>https://masutaka.net/2011-07-26-1/</link>
            <guid>https://masutaka.net/2011-07-26-1/</guid>
            <pubDate>Tue, 26 Jul 2011 00:00:00 GMT</pubDate>
            <description><![CDATA[Macports [2011-01-27-1] は便利と言えば便利なのですが、パッケージに
依存関係があると、既に /usr/bin とかにインストール済みのコマンドで
も構わずインストールしてしまいます。
同じコマンドが複数存在することになり気持ち悪いですし、何よりインス
トールに時間がかかるので、評判のよい Homebrew に移行することにしま
した。
Homebrew のインストール方法は Installation - GitHub をご覧下さい。
Homebrew は /usr/local 以下にインストールされます。そのため、root
権限がなくても staff group に所属してさえいれば、各種 Formula(=パッ
ケージ) をインストールできます。
私がよく使いそうなコマンドはこんな感じです。詳細は &ldquo;man brew&rdquo; してね。
 Homebrew 自身のアップデート
|% brew update インストール済みの Formula で最新でないものを確認。
|% brew outdated インストール済みの Formula の一括アップデート
|% brew upgrade Formula を検索する
|% brew search  Formula の情報を得る
|% brew info  Formula をインストールする
|% brew install  Formula をアンインストールする]]></description>
        </item>
        <item>
            <title><![CDATA[キラキラ号で安眠するための５つのポイント]]></title>
            <link>https://masutaka.net/2011-07-21-3/</link>
            <guid>https://masutaka.net/2011-07-21-3/</guid>
            <pubDate>Thu, 21 Jul 2011 02:00:00 GMT</pubDate>
            <description><![CDATA[キラキラ号に乗って RubyKaigi から帰ってきました。
[2011-05-03-1] の続きになります。
「体をできるだけ水平にする」ことがポイントです。
それではいってみましょうか。
1. ヘッドレストを外す。 みんな付けたままなのですが、顎は苦しくないのでしょうか。。。
2. リクライミングは最大にする。 後ろの人に一声かけるとかして、なんとしてでも最大にして下さい。トイ
レ休憩の時は元に戻します。
で、そのトイレ休憩なんですが、必ず外に出た方が良いでしょう。ストレッ
チとかすると、またよく眠れます。エコノミークラス症候群 対策にもなり
ますね。飲み物がなくなっていたら、しっかり補給しましょう。
3. 靴と靴下は脱ぐ。 寝ている時に足の裏から不快な熱が逃げるらしいです。実際その通りです。
4. フットレストは使わない。 足下の空間が狭くなり、足を伸ばせなくなるためです。レッグレストは使
います。足を固定化できます。足を宙に浮かせるとベターです。
でも背が高い人はどうやっても足を伸ばせませんよね。ご愁傷様です。。。
夜行バスに関しては、背が高いことは何のメリットもありません。
5. 腰を浮かせない。 腰が浮いたままだと、寝ていてとっても疲れます。
取り外したヘッドレストを使うと良いかもしれません。
P.S.
プラモデルが出てました。。 ]]></description>
        </item>
        <item>
            <title><![CDATA[『成金』を読んだ]]></title>
            <link>https://masutaka.net/2011-07-21-2/</link>
            <guid>https://masutaka.net/2011-07-21-2/</guid>
            <pubDate>Thu, 21 Jul 2011 01:00:00 GMT</pubDate>
            <description><![CDATA[RubyKaigi の行きの新幹線の中で読みました。そんなにうまくいくものか
なあというのが正直な感想です。「拝金」[2010-07-04-2] の方がスピード
感があって好きですね。]]></description>
        </item>
        <item>
            <title><![CDATA[RubyKaigi2011 に参加してきた]]></title>
            <link>https://masutaka.net/2011-07-21-1/</link>
            <guid>https://masutaka.net/2011-07-21-1/</guid>
            <pubDate>Thu, 21 Jul 2011 00:00:00 GMT</pubDate>
            <description><![CDATA[ここ 3 ヶ月で書いた Ruby コードはわずか 40 行ではありますが、最初で
最後の RubyKaigi に参加して来ました。印象に残ったセッションを書き留
めておきます。
(1) 組込みシステムのための動的コンポーネント機構とVMの最適化 オリジナルの Ruby をなるべく手を加えずにに移植する、つまりハッキン
グですね。私はこういうの好きですねえ〜。オリジナルに手を加える量が
少なければ少ないほど興奮しますw
そういう意味では elisp の advice や eval-after-load、hook なんかも
好きです。
(2) 軽量Ruby こちらは Matz さん本人が関わっている組み込み Ruby 。(1) と違って、
Ruby にバリバリと手が加えられています。
軽量化するために、Ruby を極限まで削り取ったり、高速化可能であればハー
ド化(Ruby チップ)したりするそうです。
VM を介して使うため中間コードに変換する必要があるそうです。いっその
こと、Ruby のコードを実行可能なコード(ELFとか)に変換すればいいんじゃ
ないかと思ったのですが、そういう訳にはいかないのでしょうか。
いずれにせよ、組み込みの分野で Ruby が使える日もそう遠くないのかも
しれません(?)
(3) その他もろもろ 「Ruby遺産とレガシーコード修理技術」は tDiary の話だと思っていなかっ
たので、予想外でうれしかったです。本当に tDiary が好きなんだなあ。。
懇親会では、ただただしさんとも少しお話し出来ました。
Matz さんのプレゼンももちろん面白かったです。内容は要約すると
「Ruby 最高！」でしたw
隠れた収穫としては、Ruby 界隈ではテスト駆動開発が当たり前になってい
ることを知れたこと。実際にやっているところを初めて見ました。自分の
仕事でも真似しないと。。。
全体的にプレゼンがうまい人が多かったのも印象に残りました。良くある、
テキストで埋め尽くされたプレゼンは少数派で、画像や動画、グラフ、テ]]></description>
        </item>
        <item>
            <title><![CDATA[Dropbox ライクなストレージ、SpiderOak を登録してみた]]></title>
            <link>https://masutaka.net/2011-07-07-1/</link>
            <guid>https://masutaka.net/2011-07-07-1/</guid>
            <pubDate>Thu, 07 Jul 2011 00:00:00 GMT</pubDate>
            <description><![CDATA[Dropboxライクなストレージ、SpiderOakの無料プランが上限50GBになっていた 無料プランの上限が最大 50GB になったそうなので、登録してみました。
Dropbox は ~/Dropbox を Sync,Share できるのに対して、
SpiderOak は任意のフォルダを Sync,Share,Backup できる点が異なります。
バックアップできるのが良いですね〜
Dropbox をバックアップ用途に使うためには、~/Dropbox にシンボリック
リンクを張る必要があり、なんだかモヤモヤしていましたが、SpiderOak
なら任意のフォルダをバックアップできるので、そんなことありません。
メジャーにならないのは日本語化されてないのと、トップページがゴチャ
ゴチャしているからじゃないですかね。SpiderOak ってどう読んだら分か
らないのも、マイナスポイントです。
まあでも魅力的なサービスであることは確かです。まだ試していない方は
https://spideroak.com/signup/ から登録してみて下さい。
もちろん Dropbox とも併用できるので、こちらもまだ登録されていない方
は是非是非(こちらは恥じらいもなく紹介用のリンクです)。
Dropbox へのご招待です。 - 生活をシンプルに 追記(2011-12-09):
みなさまのおかげで容量が無料プラン MAX の 50GB に達しました。ありが
とうございます。紹介リンクを削除しました。]]></description>
        </item>
        <item>
            <title><![CDATA[Git ブランチ操作のまとめ]]></title>
            <link>https://masutaka.net/2011-07-05-1/</link>
            <guid>https://masutaka.net/2011-07-05-1/</guid>
            <pubDate>Tue, 05 Jul 2011 00:00:00 GMT</pubDate>
            <description><![CDATA[個人的なメモ その２
その１は [2010-04-29-1] にあるよ。
Git では、たった一日の作業でもブランチを作ることが良くある。基本ブ
ランチは修正が終わったら master に merge して削除、つまり使い捨て。
別な作業が入ったら、master から新たにブランチを作る。
cvs とか svn だと、作業単位毎にディレクトリを掘って cvs checkout と
かしていたけど、Git はこれをブランチ操作のみでできる点が超便利。
ただ、他に違わず、ブランチ操作も複雑なのでメモメモ。
(1) ローカルブランチの確認
% git branch (2) リモートブランチの確認
% git branch -r (1) + (2)
% git branch -a (3) ローカルブランチ bar の作成
% git branch bar (4) ローカルブランチ bar への切り替え
% git checkout bar (3) と (4) を同時にやる。
% git checkout -b bar (5) 任意のタグやリビジョンを起点に、ブランチ bar を作る。]]></description>
        </item>
        <item>
            <title><![CDATA[『パターン、Wiki、XP 〜時を超えた創造の原則』を読んだ]]></title>
            <link>https://masutaka.net/2011-07-01-1/</link>
            <guid>https://masutaka.net/2011-07-01-1/</guid>
            <pubDate>Fri, 01 Jul 2011 00:00:00 GMT</pubDate>
            <description><![CDATA[ ソフトウェアの開発は建築の手法が元になった、と聞いたことがあったけ
ど、まさにこの本に書いてあった。建築のパターンランゲージを参考に考
え出されたデザインパターン、今のアジャイルに通じる話、Wiki の発明者
カニンバル等々、なかなか面白い本だった。
P.S.
こちらの記事がこの本を知ったきっかけです。
パターン、Wiki、XP ~時を超えた創造の原則を読んだ。 - 日々、とんは語る。 ]]></description>
        </item>
        <item>
            <title><![CDATA[Emacs の M-x align-regexp は超便利]]></title>
            <link>https://masutaka.net/2011-06-29-1/</link>
            <guid>https://masutaka.net/2011-06-29-1/</guid>
            <pubDate>Wed, 29 Jun 2011 00:00:00 GMT</pubDate>
            <description><![CDATA[こんなソースコードを
このように整形してくれます。
手順はとっても簡単。
Ctrl-space でリージョンを作って、
M-x align-regexp [Return] = [Return] するだけ。]]></description>
        </item>
        <item>
            <title><![CDATA[iPhone で複数のカレンダーを表示させるのが大変だった]]></title>
            <link>https://masutaka.net/2011-06-21-1/</link>
            <guid>https://masutaka.net/2011-06-21-1/</guid>
            <pubDate>Tue, 21 Jun 2011 00:00:00 GMT</pubDate>
            <description><![CDATA[発端はこの記事。
[を] iPhone のカレンダーを「ハチカレンダー2」にしました 普段使っている「CCal」は全体的に動きがモッサリしているのですよね。
そんなわけで「ハチカレンダー2 Lite」の方を試しに使ってみようとした
のですが、予想以上に大変だったのでここにメモしておきます。
「ハチカレンダー2 Lite」自体は標準のカレンダーの設定どおりに表示す
るだけのアプリなので、設定するのは標準のカレンダー関連になります。
  Google Sync から、表示したい他のカレンダーにチェックを入れる。
Googleカレンダーの複数のカレンダーを［カレンダー］と同期したい - できるネット＋（できるネットプラス）   iPhone のメール/連絡先/カレンダーの設定から、MS Exchange のアカ
ウントを追加する。
［カレンダー］とGoogleカレンダーを同期させる設定方法は？ - できるネット＋（できるネットプラス）   あとは「ハチカレンダー2 Lite」を起動するだけです。
MS Exchange のアカウントを作るのがポイントなんですね〜。意味が分か
らなくて、何度もアカウントを作ったり消したりを繰り返しました。
そういえば [2011-06-18-1] でも、MS Exchange のアカウントを作りまし
たね。Google Sync を初めて知ったのはこの時。。
まあそれはともかく、「ハチカレンダー2 Lite」は動きが軽くて良いですね。
しばらく使ってみます。
 ハチカレンダー2 Lite  CCal   追記(2011-06-23):
有料版の「ハチカレンダー2 」を買いました。Lite より機能アップしてます。
個人的には List 表示できるのが嬉しいです。
追記(2011-08-01):
もっと簡単な方法がありました。。。
【最新版】iPhoneの標準カレンダーとGoogleカレンダー（複数アカウントもOK）を同期する方法 追記(2011-11-22):
もっともっと簡単な方法がありました。。。
[を] iPhone と Google カレンダーの連携が昔の方法だったため共有カレンダーが見られなくなってた ]]></description>
        </item>
        <item>
            <title><![CDATA[「Gmail の連絡先」を Mew のアドレス帳にコピーする]]></title>
            <link>https://masutaka.net/2011-06-18-1/</link>
            <guid>https://masutaka.net/2011-06-18-1/</guid>
            <pubDate>Sat, 18 Jun 2011 00:00:00 GMT</pubDate>
            <description><![CDATA[Gmailのアドレス帳をbbdbにインポート を見て触発されたので、Mew でも出
来るようにしてみました。
  ~/Mail/Addrbook が「Gmail の連絡先」で完全に上書きされるので、十分
注意して使ってくださいね。
「Gmail の連絡先」と「iPhone の連絡先」も同期できました。
Google SyncがiPhoneに対応 – カレンダーやアドレス帳の同期が可能に ｜ iPhone 研究室（iPadもね） P.S.
au 携帯のアドレス帳が悩ましい。。。]]></description>
        </item>
        <item>
            <title><![CDATA[RCS は Dropbox に出会って甦った！]]></title>
            <link>https://masutaka.net/2011-06-06-1/</link>
            <guid>https://masutaka.net/2011-06-06-1/</guid>
            <pubDate>Mon, 06 Jun 2011 00:00:00 GMT</pubDate>
            <description><![CDATA[RCS 使ってますか？
私は初めて使ったバージョン管理システムが RCS ということもあり、これ
からは Git だ、Mercurial だと叫ばれる中、ちょくちょく使っていました。
リポジトリを作らなくても良いから、サーバの設定ファイルとか、ちょっ
としたファイルにお手軽に使えるのですよね。
使い方は Google 先生が良くご存知です。&ldquo;ci (-sInstall)&rdquo;,
&ldquo;co (-l,-u)&rdquo;, &ldquo;rcsdiff&rdquo;, &ldquo;rlog&rdquo; あたりを良く使うことになるかと思い
ます。
RCS はお手軽に使える反面、RCS ディレクトリが各ディレクトリに散らば
り管理しづらいという問題がありました。これはバックアップしづらいと
いう問題にも繋がります。
なので、こうしてみました。
この例では aliases と main.cf を RCS で管理しています。あれ、RCS ディ
レクトリは Dropbox へのシンボリックリンクになっていますね。ちょっと
見てみましょうか。
なるほど〜 各 RCS ディレクトリをこうやって一カ所に集めたのですね。
しかも Dropbox 配下に置いたから、バックアップもやってくれると。
個人の Mac とかだったら、これで十分かと思います。ci や co はデフォ
ルトでインストールされていますし。これで /etc の下とかの *.bak や
*.orig ファイルからおさらばです。
ってことで、Dropbox をお持ちでない方はこちらのリンク からアカウント
を作って頂けると、(私が)喜びます。o]]></description>
        </item>
        <item>
            <title><![CDATA[Firefox から Chrome に乗り換えたよ]]></title>
            <link>https://masutaka.net/2011-06-03-1/</link>
            <guid>https://masutaka.net/2011-06-03-1/</guid>
            <pubDate>Fri, 03 Jun 2011 00:00:00 GMT</pubDate>
            <description><![CDATA[Netscape 時代も含めるとかれこれ 15 年くらい愛用している Mozilla 系ブラウザから、この度 Google Chrome に乗り換えることにしましたので、報告致します。
最近の私の Firefox4 on Mac OS X は時々、メニューバーの反応がなくなるのですよね。。あと、Keysnail を導入していることが逆に仇となって、他のアプリで Command-w してあ&quot;ーしちゃうし。。。
ってのが乗り換えの理由です。
移行自体は簡単で、Chrome さんがブックマークやパスワード、履歴等をインポートしてくれます。
問題はアドオン。試行錯誤して調べました。
Firebug  Chrome には標準で実装されています。Firebug の方がデキが良いとの話も。
gpum - Google mail Popup Unread Manager  これも Chrome には標準で実装されています。Google Web サービスとの親和性はさすがです。
Greasemonkey  あんまり使ってなかったので、調べてません。
Hatena Bookmark  Chrome にも、アプリ と拡張 がありました。
Keysnail  (1) Firefox を Emacs 風のキーバインドにしたり、(2) 現在の URL をツイートしたり、(3) Hit-a-Hint が使える、スゲーアドオンです。
(1) は捨てました。Mac は OS 標準のキーバインドが洗練されているので。
(2) は良いのがないですねえ。TwitterBar は Enter でかな漢字変換を確定するとツイートしちゃうし。。]]></description>
        </item>
        <item>
            <title><![CDATA[Emacs で縦分割と横分割のトグル]]></title>
            <link>https://masutaka.net/2011-05-19-1/</link>
            <guid>https://masutaka.net/2011-05-19-1/</guid>
            <pubDate>Thu, 19 May 2011 00:00:00 GMT</pubDate>
            <description><![CDATA[横分割と縦分割を切り替える - Meadow/Emacs memo: ウィンドウ/フレーム関連 ― 分割・サイズ変更 個人的に必要になったのですが、縦分割-&gt;横分割すると 3 分割されてしま
うのでちょっと直しました。
(defun window-toggle-division ()  &#34;ウィンドウ 2 分割時に、縦分割&lt;-&gt;横分割&#34;  (interactive)  (unless (= (count-windows 1) 2)  (error &#34;ウィンドウが 2 分割されていません。&#34;))  (let ((before-height)  (other-buf (window-buffer (next-window))))  (setq before-height (window-height))  (delete-other-windows)  (if (= (window-height) before-height)  (split-window-vertically)  (split-window-horizontally))  (other-window 1)  (switch-to-buffer other-buf)  (other-window -1))) ]]></description>
        </item>
        <item>
            <title><![CDATA[Emacs で Mac の辞書を sdic っぽく使う]]></title>
            <link>https://masutaka.net/2011-05-18-1/</link>
            <guid>https://masutaka.net/2011-05-18-1/</guid>
            <pubDate>Wed, 18 May 2011 00:00:00 GMT</pubDate>
            <description><![CDATA[Mac の Emacs でツールチップ辞書 パート2。 - 日々、とんは語る。 しばらくこれで生活してましたが、自分にはツールチップは合わない気が
してきたので、sdic っぽく改良してみました。
 M-x my-dictionary すると、カーソル下の単語を Dictionary.app 使って
調べます。C-u M-x my-dictionary すると、sdic 使って調べます。
似たような関数を作りたくなかったので、sdic の major-mode を流用して
ます。
追記(2011-06-11):
`q&rsquo; で sdic バッファが消えないという問題があったので、
dictionary-app() を少し修正しました。]]></description>
        </item>
        <item>
            <title><![CDATA[久しぶりに夜行バスに乗った]]></title>
            <link>https://masutaka.net/2011-05-03-1/</link>
            <guid>https://masutaka.net/2011-05-03-1/</guid>
            <pubDate>Tue, 03 May 2011 00:00:00 GMT</pubDate>
            <description><![CDATA[ここ最近夜行バスに乗ることが増えました。今後もちょいちょい機会が
ありそうなので、今までの感想を書き留めておきます。
ヤングリゾート  4/9 24:20 出発、横浜→京都、￥4,200
7〜8 年ぶりの夜行バスはほとんど眠れませんでした。カーテンは遮光でな
いので眩しいし、レッグリフトがないので(足乗せ台はある)足の疲れが取
れません。要は普通の 4 列シートのバスでした。
夜行バスってこんなものなのかと思っていたら..(続く)
WILLER TRAVEL  4/11 23:45 出発、京都→横浜、￥5,500
やあ、このバスは素晴らしい！前回とはうって変わって、遮光カーテンも
レッグリフトもあります。振動がやや気になりましたが、席は 3 列シート
で広々だったので、そこそこ眠ることが出来ました。これならプラス
￥1,300 の価値ありです。休憩後の点呼を、乗務員二人で念入りにしてい
たのも好感が持てました。
ホットドック(キラキラ号)  4/27 24:40 出発、横浜→明石、￥5,500
激安だったのでツライ旅を予想し憂鬱になっていましたが、予想に反して
一番良い夜行バスでした。よく眠れましたというか、10 時間ほとんど寝て
ましたw
遮光カーテンもレッグリフト(WILLER より劣る)もありましたが、このバス
の真の価値はサスペンションです(断言します)。なぜか振動が心地よく、
安心して眠ることが出来ました。
運転手は 2 時間交代のようで、良い職場環境だなと思いました。(他の会
社はチェック忘れました。。)
後日談:
明石で、お隣さん(どこかの会社の寮になっている)に引っ越しのご挨拶に
行ったら、出てきた人はな〜んか見覚えのある顔。話を聞いたら、あの日
のキラキラ号の運転手さんでした。こんなことってあるんですね〜(驚愕)
How to 安眠:
遮光カーテンでない場合はアイマスクなどを付ける。靴は絶対脱ぐ。でき
れば靴下も(寝ている時は足の裏から不快な熱が逃げるらしい)。足は伸ば
す。できれば腰と水平に。
次回への宿題:
どうやったらもっと腰を休ませられるか？体勢を倒しすぎると腰がシート
に密着せず、だんだん痛くなってくる。体勢を垂直に近づけると痛みはな
くなるが、疲れが取れづらい。ブランケットがもっと厚手ならいいんだけ
ど。腰当て持って行くのも面倒だな〜
追記(2013-12-17):
そういえばこんな記事[2011-07-21-3] も書いたのでした。]]></description>
        </item>
        <item>
            <title><![CDATA[『儲けたいなら科学なんじゃないの？』を読んだ]]></title>
            <link>https://masutaka.net/2011-04-30-1/</link>
            <guid>https://masutaka.net/2011-04-30-1/</guid>
            <pubDate>Sat, 30 Apr 2011 00:00:00 GMT</pubDate>
            <description><![CDATA[ホリエモンと、元日本マイクロソフト社長の成毛さんの対談本。
科学の対談本は初めて読んだので、へぇ〜と頷くところが多くあった。
ブログやツイッターでは氷山の一角しか出ていないので、興味がある方は
読んでみると良いと思う。]]></description>
        </item>
        <item>
            <title><![CDATA[『仕事は5年でやめなさい。』を読んだ]]></title>
            <link>https://masutaka.net/2011-04-22-2/</link>
            <guid>https://masutaka.net/2011-04-22-2/</guid>
            <pubDate>Fri, 22 Apr 2011 01:00:00 GMT</pubDate>
            <description><![CDATA[熱い本だった。
限りある人生、閃光のように生きよと言うことか。
特に飲食関係で独立したいと思っている人は、ぜひ読むべきかと。]]></description>
        </item>
        <item>
            <title><![CDATA[退職しました]]></title>
            <link>https://masutaka.net/2011-04-22-1/</link>
            <guid>https://masutaka.net/2011-04-22-1/</guid>
            <pubDate>Fri, 22 Apr 2011 00:00:00 GMT</pubDate>
            <description><![CDATA[昨日 4/21 付けで、11 年間お世話になった某 M 社を退職しました。
M 社にはプログラミングのプの字から教えてもらい、大変感謝しています。
組み込み、インフラ、テスト等々、いろんな経験をさせてもらって、本当
にこの会社に入って良かったと思っています。
でも目を閉じると、辛かった事ばかり覚えているものですねw インフラの
方は、Cisco のルーター設定できた！とか、Becky! から LDAP のアドレス
帳参照できた！とか結構すぐ思い出すのですけど。
さて、実はここ 1〜2 年、もっと他の仕事をやってみたい、違う世界を知
りたいという欲求が徐々に高まっていました。
その中でも Twitter の影響は一番大きかったです。これで会社を辞めたよ
うなものです(笑)。こんなに手軽かつ身近に、違う世界を感じられるツー
ルを私は知りません。
去年の夏、某オンライン英会話スクールの開始を知ったのも Twitter でし
た。そのすぐ後からそこの生徒になりましたが、これがなかなか面白い。
9 月なんてレッスンを受けなかったのは、飲み会があった 2 日間だけでした。
中の人も楽しそうに仕事をやっているようで、それはずっと気になってい
ました。そこで忘れもしない今年の初め、中の人にアポを取ってみたとこ
ろ、じゃあ試しにフィリピン見に来ますかと言うことになりました。
ただしその時点では、退職と英会話スクールの仕事は分けて考えて、自分
を追い詰めないようにはしていました。
そこからの私の行動は速かったと思います。3 月頭から有休消化に入るこ
とにし、そのタイミングでフィリピンに行くことにしました(実際に行った
のは 3/15 でした)。
行ってみないと分からないもので、予想していたよりも泥臭く、それなり
に、いやかなりビックリしましたし、ビビリました。そして分からないこ
とだらけです。フィリピンの生活、彼らの仕事、そして英語w
最初は相当気が張っていました。最後はだいぶ慣れて、帰りたくない気持
ちでいっぱいでしたが。
あ、滞在中は、生徒として Web からレッスンを予約して、オンラインなら
ぬオフライン英会話を受けておりました。Skype の向こう側の先生方に生
で会えたのは感動でしたねえ。発音レッスンなんかは、やっぱり Skype よ
り生の方が分かりやすいです(オイ
何はともあれ、もう走り出してしまいました。しばらくは何も考えず、突っ
走っていこうと思います。
最後に。なんだかんだで転職は体力を使います。転職の前に体力を付ける
ことを強くお勧めします。気持ちも勝手に上向きます。クイックシェイプ
いいですよw [2011-03-05-1] おまけ: フィリピンへの入国の様子(・ω・)?
  ]]></description>
        </item>
        <item>
            <title><![CDATA[Mac で手動インストールした apps]]></title>
            <link>https://masutaka.net/2011-04-21-1/</link>
            <guid>https://masutaka.net/2011-04-21-1/</guid>
            <pubDate>Thu, 21 Apr 2011 00:00:00 GMT</pubDate>
            <description><![CDATA[自分用のメモ。随時更新。
CurrencyConverter155.zip	# DashBoard
ESET Cyber Security
Kindle For Mac
SoraMoyo1.5.3.zip	# DashBoard
これ以外は[2014-01-25-1] のbrew-cask、もしくはApp Storeでインストー
ルしている。Boxenを使っていたこともあったけど[2013-11-23-1] 、今は
brew-caskに移行した。]]></description>
        </item>
        <item>
            <title><![CDATA[CakePHP-1.2 系の構築方法]]></title>
            <link>https://masutaka.net/2011-03-11-1/</link>
            <guid>https://masutaka.net/2011-03-11-1/</guid>
            <pubDate>Fri, 11 Mar 2011 00:00:00 GMT</pubDate>
            <description><![CDATA[自分用のメモ。
Macports の Apache を使っている。
一回だけ edit httpd.conf
% sudo cp /opt/local/etc/php5/php.ini-development /opt/local/etc/php5/php.ini [src] edit php.ini [src] % sudo -u mysql mysql_install_db5 CakePHP を作るたびに .htaccess に以下を追加。
RewriteBase /~masutaka/cake/ app/.htaccess に以下を追加。
RewriteBase /~masutaka/cake/app/ app/webroot/.htaccess に以下を追加。
RewriteBase /~masutaka/cake/app/webroot/ Apache が読み書きできるように。
% mkdir -p app/tmp/cache % chmod -R o+rw app/tmp edit app/config/core.php
//date_default_timezone_set(&#39;UTC&#39;); ↓ date_default_timezone_set(&#39;Asia/Tokyo&#39;); edit app/config/core.php
Configure::write(&#39;Security.salt&#39;, &#39;DYhG93b0qyJfIxfs2guVoUubWwvniR2G0FgaC9mi&#39;); ↓ Configure::write(&#39;Security.salt&#39;, &#39;DYhG93b0qyJfIxfs2guVoUubWwvniR2G0FgaC9mimasutaka&#39;); edit app/config/core.php
Configure::write(&#39;Security.cipherSeed&#39;, &#39;76859309657453542496749683645&#39;); ↓ Configure::write(&#39;Security.cipherSeed&#39;, &#39;768593096574535424967496836450123&#39;); % mysql5 -u root &gt;create database cake character set utf8; 参考情報:]]></description>
        </item>
        <item>
            <title><![CDATA[初めて Mac で Emacs をビルドした！]]></title>
            <link>https://masutaka.net/2011-03-10-1/</link>
            <guid>https://masutaka.net/2011-03-10-1/</guid>
            <pubDate>Thu, 10 Mar 2011 00:00:00 GMT</pubDate>
            <description><![CDATA[loading...
   if (localStorage.getItem("pref-theme") === "light") { const elements = document.getElementsByClassName('twitter-tweet'); for (let i = 0; i  Emacs-23.3 がリリースされたとのことなので、@tomoyaton さんのビルド
をリアルタイムで眺めながら 、初めて Mac でビルドしてみました。
% wget http://ftp.gnu.org/pub/gnu/emacs/emacs-23.3.tar.bz2 % tar xjf emacs-23.3.tar.bz2 % mkdir work; cd work % ../emacs-23.3/configure --with-ns --without-x 2&gt;&amp;1 | tee ../emacs-23.3_configure.log % cp config.log ../emacs-23.3_config.log % make 2&gt;&amp;1 | tee ../emacs-23.3_make.log % make GZIP_PROG=&#34;&#34; install 2&gt;&amp;1 | tee ../emacs-23.3_make-install.log % cp -r nextstep/Emacs.app /Applications ログを神経質に残しているのは、インフラ担当時代の癖です。。]]></description>
        </item>
        <item>
            <title><![CDATA[svn で空のディレクトリが競合して困ったら]]></title>
            <link>https://masutaka.net/2011-03-06-1/</link>
            <guid>https://masutaka.net/2011-03-06-1/</guid>
            <pubDate>Sun, 06 Mar 2011 00:00:00 GMT</pubDate>
            <description><![CDATA[% svn status -q C share &gt; local delete, incoming edit upon update % svn resolve --accept=working share &#39;share&#39; の競合状態を解消しました 参考ツイート
loading...
   if (localStorage.getItem("pref-theme") === "light") { const elements = document.getElementsByClassName('twitter-tweet'); for (let i = 0; i  ]]></description>
        </item>
        <item>
            <title><![CDATA[クイックシェイプを始めてまもなく6ヶ月(その３結果編)]]></title>
            <link>https://masutaka.net/2011-03-05-3/</link>
            <guid>https://masutaka.net/2011-03-05-3/</guid>
            <pubDate>Sat, 05 Mar 2011 02:00:00 GMT</pubDate>
            <description><![CDATA[クイックシェイプ の話その３です。
その１導入編はこちら [2011-03-05-1] 、その２紹介編はこちら [2011-03-05-2] スロトレで挫折した私ですが、このジムならイケル！！と感じました。逆
にこの方法でもダメだったら、もうダイエットに成功することはないだろ
うとも思いました。ある意味背水の陣です。
ということで、始めた頃は水金以外は毎日通っていました。
水曜日は付き合いのジョギング、金曜日はジムが休みなので、基本行ける
日は毎日通っていたことになります。クレイジーですね。
これはスロトレの時に思い知った苦い経験からです。例えばトレーニング
の日を月水土にしようと決めると、飲み会とかで出来ない日がきっかけに
なり、だんだんとやらなくなります。そう私は弱い人間なんです。
なので最初は何も考えずに毎日行く、飲み会の次の日でも頑張って行く、
このように良い意味で思考停止することで習慣化に成功しました。今は週
3〜4 回に減らしましたが、習慣化したおかげで今後は怠け要因で行かなく
なる可能性は低そうです。
ここまでやれば少なくとも半年後には体重が 3〜4kg 落ちて、腹筋も割れ
た快適ライフを送れるよね・・・
そんなふうに考えていた時期が俺にもありました
6 ヶ月経った今、数値はあまり減っていません。＼(^o^)／
(体重は 1kg くらい、体脂肪率も 2〜3% くらいしか減らず。)
やはりサーキットトレーニングだけだと筋肉量を増やせても、有酸素運動
は足りないので、ある意味予想通りなのかもしれません。
ジム内にあるウォーキングマシンを使うとか、ジム以外でもウォーキング
をすれば数値は減りそうです。面倒でそこまではやりませんでした。。。
ただし、体は締まりました。今までピチピチだった服がある程度スムーズ
に着られるになりました。ウエストや脚も細くなったようで、無理せずパ
ンツを履けるようになりました。洗顔の時に自分の顔に触れると、前より
小顔になったなあと思います。
体も軽くなり疲れづらくなりました。腹がよく減るようになり、トイレも
近くwなりました(前は就業時間中１回だけも普通でした)。基礎代謝が上がっ
たのでしょう。
イマイチなアピールになってしまいましたが、隙間時間を使って体を動か
したり、ダイエットしたい人にオススメなジムであることは確かです。
まずはやってみましょう！]]></description>
        </item>
        <item>
            <title><![CDATA[クイックシェイプを始めてまもなく6ヶ月(その２紹介編)]]></title>
            <link>https://masutaka.net/2011-03-05-2/</link>
            <guid>https://masutaka.net/2011-03-05-2/</guid>
            <pubDate>Sat, 05 Mar 2011 01:00:00 GMT</pubDate>
            <description><![CDATA[クイックシェイプ の話その２です。
その１導入編はこちら [2011-03-05-1] このジムはサーキットトレーニングを取り入れていて、エアボードや各種
トレーニングマシンを 1 分間隔で回っていきます。1 周がだいたい 15 分
で、2〜3 周します。
エアボードでは DVD に合わせて体を動かします。これが思うようにならな
いし、結構きつい。9 月でまだ暑かったこともありますが、あっという間
に汗だくです。
このジムが他と変わっているのが「シャワーがない」ことです。一見ダメっ
ぽいですが、シャワーは家で入った方が持って行く荷物が少ないし、時間
短縮にもなります。合理的だと思いました。
もっともこれは欠点にもなり得て、もし最寄り駅にこのジムがなかったら
行こうとは思わないでしょう。
あとは、デイタイムとかナイトタイムとか変な時間制限がないことも良い
です。(平日 13:00-14:30、土日祝日 13:00-14:00 の昼休みはシフトとか
うまく使って、なくして欲しいけど。。)
料金が安いことも魅力的です。半年会員だと月々 5000 円程度です。
その３結果編 [2011-03-05-3] に続きます。]]></description>
        </item>
        <item>
            <title><![CDATA[クイックシェイプを始めてまもなく6ヶ月(その１導入編)]]></title>
            <link>https://masutaka.net/2011-03-05-1/</link>
            <guid>https://masutaka.net/2011-03-05-1/</guid>
            <pubDate>Sat, 05 Mar 2011 00:00:00 GMT</pubDate>
            <description><![CDATA[去年の 9 月からクイックシェイプ ってジムに通っています。
6 ヶ月近く続けたためか、体が締まって疲れづらくなりました。最寄り駅
にスタジオがある方は、是非体験してみて下さい！
私はこんな人です。
 35 歳、男、中肉低身長 付き合いで、秋の河口湖マラソン(27km)に向けてジョギングすることは
あるが、走るのは好きではない。むしろ嫌い。 出来ることなら体を動かしたくないと思っている。というか、実際体は
動かしてなくて引きこもりに近かった。会社には普通に行っていたけどね。 今まで買ったもの
ボディブレード →後輩にあげた
ツイスト＆シェイプ →まだ持っている
「ツイスト＆シェイプ」が欲しい方はご一報を。。 今まで試したダイエット
ヘルシア緑茶を毎日飲む→3ヶ月で効果なしと判断
スロトレ→3ヶ月で飽きた
他忘れた。  始めた理由は１つだけ。そう「ダイエット」です。
大学の頃から年々贅肉が蓄積され、ピチピチな服が多くなり年々危機感を
募らせていました。
スロトレは一応 3 ヶ月続きましたが、最大の欠点は「楽しくない」ことに
尽きます。あれを続けられる人はよっぽど心が強いはずです。
なので楽しく続けられる方法はないかと考えていたところ、近くにクイッ
クシェイプがあることを思い出しました。ちょっと調べたところ、今の自
分に合っていそうです。
思い立ったら即体験です(※)。さっそく次の日に行ってきました。
※ この頃から、まずは何も考えずに行動して、その後に考えることを心が
け始めました。兎にも角にも行動すれば、何かしら変わります。逆に、考
えすぎて行動しないと、結局何も変わりません。
その２紹介編 [2011-03-05-2] に続きます。]]></description>
        </item>
        <item>
            <title><![CDATA[Amazon へのリンクに楽天へのリンクも追加しました]]></title>
            <link>https://masutaka.net/2011-03-04-2/</link>
            <guid>https://masutaka.net/2011-03-04-2/</guid>
            <pubDate>Fri, 04 Mar 2011 01:00:00 GMT</pubDate>
            <description><![CDATA[Amazon へのリンクに楽天へのリンクも追加しました。
[を] ASIN から楽天ブックスのページへ飛ばす CGI またもや、たつをさんのコピーです。
楽天のアフィリエイト ID とデベロッパー ID は
http://webservice.rakuten.co.jp/ から確認できます。
楽天 API って、こうやって使うのですね。へえ〜
って、今まで存在を知らなかったけど。。。
 楽天ブックス書籍検索 API
http://webservice.rakuten.co.jp/api/booksbooksearch/   TODO:
NOT FOUND! だったら、search.rakuten.co.jp を使いたいです。
追伸:
MacOSX で LWP::Simple がなかったら、p5-libwww-perl をインストールす
れば良いです。&ldquo;sudo port install p5-libwww-perl&rdquo;]]></description>
        </item>
        <item>
            <title><![CDATA[このブログのコメントシステムも zenback にしました]]></title>
            <link>https://masutaka.net/2011-03-04-1/</link>
            <guid>https://masutaka.net/2011-03-04-1/</guid>
            <pubDate>Fri, 04 Mar 2011 00:00:00 GMT</pubDate>
            <description><![CDATA[http://zenback.jp/ [を] zenback を設置した この記事を見たときははてブしただけでしたが、
[を] zenback の素晴らしいのは設置する人以外はアカウント取得の必要がないところ この記事を見て勢いで移行してしまいました。
設置はすごく簡単で、zenback に新規登録すると提示されるコードを、ア
イテム毎のページのテンプレートにコピペするだけです。便利なサービス
は外注するに限りますね。
DISQUS を使い始めたのは [2010-05-03-1] です。一年も経たずに移行とな
りました。hatana_bookmark_anywhere.js [2009-11-22-1] ももちろん移行
です。
追記(2011-03-05):
やっぱり DISQUS は復活させました。リアクションは zenbak にお任せな
ので、もちろん OFF です。DISQUS の管理画面から変更できます。]]></description>
        </item>
        <item>
            <title><![CDATA[『“本物のお金持ち”と結婚するルール—ホリエモンの恋愛講座』を読んだ]]></title>
            <link>https://masutaka.net/2011-02-27-2/</link>
            <guid>https://masutaka.net/2011-02-27-2/</guid>
            <pubDate>Sun, 27 Feb 2011 01:00:00 GMT</pubDate>
            <description><![CDATA[面白かった。
要約すると、お金持ちと結婚するのはオススメしないけど、それでもした
いのなら私が教えましょうって本。ただその選択は修羅道への始まりなりw
まあ、本当にホリエモンが言いたいことは最後に書いてあるから、ここで
は書かないことにする。]]></description>
        </item>
        <item>
            <title><![CDATA[『実践的プログラムテスト入門—ソフトウェアのブラックボックステスト』を読んだ]]></title>
            <link>https://masutaka.net/2011-02-27-1/</link>
            <guid>https://masutaka.net/2011-02-27-1/</guid>
            <pubDate>Sun, 27 Feb 2011 00:00:00 GMT</pubDate>
            <description><![CDATA[全然分からなくて、30 分で投げてしまった。＼(^o^)／
「実践的」と題しているが、私にはどれが現場で使えるのかさっぱり分か
らなかった。Amazon のレビューを見ると、3 人とも絶賛しているが。。。
追伸: この本も一年以上 @simon6867 氏に借りたままでした。
ごめんなさい。]]></description>
        </item>
        <item>
            <title><![CDATA[今までやったゲームまとめ(GB+DS編)]]></title>
            <link>https://masutaka.net/2011-02-11-7/</link>
            <guid>https://masutaka.net/2011-02-11-7/</guid>
            <pubDate>Fri, 11 Feb 2011 06:00:00 GMT</pubDate>
            <description><![CDATA[[2011-02-11-1] 目次
魔界塔士Sa・Ga  レベル上げずにラスボスの前でセーブして挫折しかけた。ほんっとに偶然
チェーンソー持ってて、試しに使ってみたら&hellip;。
サ・ガ2 秘宝伝説  音楽とストーリーが良いイメージ。
サ・ガ3 時空の覇者  忘れた。。。
ドラゴンクエストIX 星空の守り人  やっぱり旅芸人でしょう！！昼休みに職場のみんなとやった時を思い出す
なあ。竜王に一撃で倒される低さのレベルで、吐息返しが面白いように決
まり、見事勝利！！ MBP 取った！！
[2011-02-11-1] 目次]]></description>
        </item>
        <item>
            <title><![CDATA[今までやったゲームまとめ(PS3編)]]></title>
            <link>https://masutaka.net/2011-02-11-6/</link>
            <guid>https://masutaka.net/2011-02-11-6/</guid>
            <pubDate>Fri, 11 Feb 2011 05:00:00 GMT</pubDate>
            <description><![CDATA[[2011-02-11-1] 目次
DEVIL MAY CRY 4  ネロは下手クソでも扱いやすくて好き。チャージショット強ぇええ。
でもダンテは無理だよ..。DMD のダンテステージ開始で止まった。
BAYONETTA  回避がうまくなると、自分が達人のように思えてくる。世界観も好き。
ファイナルファンタジーXIII  面白いゲームだったなあ。全く新しい戦闘システム。
時間が無限にあれば、もっと亀狩りやったんだけど。。
[2011-02-11-1] 目次]]></description>
        </item>
        <item>
            <title><![CDATA[今までやったゲームまとめ(PS2編)]]></title>
            <link>https://masutaka.net/2011-02-11-5/</link>
            <guid>https://masutaka.net/2011-02-11-5/</guid>
            <pubDate>Fri, 11 Feb 2011 04:00:00 GMT</pubDate>
            <description><![CDATA[[2011-02-11-1] 目次
ドラゴンクエストVIII 空と海と大地と呪われし姫君  世界観、ゲームバランス等含めて好き。ミニゲームないし。寝オチしなが
らメタルキング狩りしてた。練金に洗濯ばさみはかかせないよねっ！！
鬼武者  もちろん「鬼武者」の称号は取りましたとも！！
幻魔・鬼武者やりたかったなあ。
鬼武者2  孫一の一閃が好き。銃なのにwww
ストーリーを全コンプしたのに、あの特典って。。(；´д⊂)
鬼組おもしろいね！！
鬼武者3  ポリゴンになってキャラが小さくなったイメージ。２〜３周したかなあ。
新 鬼武者 DAWN OF DREAMS  武器多すぎ。ラスボスを倒すのに非常に苦労した。
鬼武者 無頼伝  クソゲー
DEVIL MAY CRY  スタイリッシュにはなれなかった。他の人の動画で我慢。。。
DEVIL MAY CRY 2  ちょっとやって売っちゃった。バグが多いらしい。
DEVIL MAY CRY 3 Special Edition  兄貴最高！！
Shinobi  一番ハマったゲームかも。
ハードヒルコ様に 8 時間くらい挑戦し続けたなあ。。
Kunoichi -忍-  こちらはイマイチ。ボスの倒し方が分かりづらかった。Shinobi みたいに
一撃じゃないとねえ。。
ストリートファイターEX3  メテオを見て楽しんだよ。
ヴァンパイア ダークストーカーズ コレクション  指動かない。。。格ゲーは人の動画を見るに限る(違
キン肉マン ジェネレーションズ  うーん、クソゲーの部類かなあ。]]></description>
        </item>
        <item>
            <title><![CDATA[今までやったゲームまとめ(PS編)]]></title>
            <link>https://masutaka.net/2011-02-11-4/</link>
            <guid>https://masutaka.net/2011-02-11-4/</guid>
            <pubDate>Fri, 11 Feb 2011 03:00:00 GMT</pubDate>
            <description><![CDATA[[2011-02-11-1] 目次
ドラゴンクエストIV 導かれし者たち  ラスボスの直前で５年くらい放置していたのだけれど、やっとクリアー。
Lv45 でなんとか倒せた。
ファイナルファンタジーI・II プレミアムパッケージ  I はダイの大冒険のキャラの名前をつけて、戦士、モンク、赤、黒でクリアー。
II は回避率の重要さを知り、HP や MP を上げずにクリアー。盾重要。
ファイナルファンタジーVII インターナショナル  とりあえずクリアーしただけだったな。ミニゲームが多すぎて心が折れた。
ファイナルファンタジーVIII  ちょっとしかやらずに売ってしまった。
[2011-02-11-1] 目次]]></description>
        </item>
        <item>
            <title><![CDATA[今までやったゲームまとめ(SFC編)]]></title>
            <link>https://masutaka.net/2011-02-11-3/</link>
            <guid>https://masutaka.net/2011-02-11-3/</guid>
            <pubDate>Fri, 11 Feb 2011 02:00:00 GMT</pubDate>
            <description><![CDATA[[2011-02-11-1] 目次
ドラゴンクエストIII そして伝説へ  リメイク成功！クリアー後が楽しいよね。
ドラゴンクエストV 天空の花嫁  モンスターを全員仲間にして、人間含めて全員レベル MAX にしたなあ。
さすがに 2 匹目以降のモンスターは仲間にしなかったけどw
ドラゴンクエストVI 幻の大地  ストーリーは一番好きかな。洗濯ばさみと連射コントローラー使って、人
間全員勇者＆レベル MAX にした。でもこれやると、みんな無個性になっちゃ
うんだよね。。ランプの魔王が強いらしいけど、モンスターは全然仲間に
しなかったなあ。
ファイナルファンタジーIV  2 人プレイが熱かったなあ。友達は飽きてたけどww イージータイプが出た
くらいだから、FF にしては難易度高めだった。月の宝箱を開ける時が一番
ドキドキしたかなあ。
ファイナルファンタジーV  全ジョブマスターにした！薬師のドラゴンパワー最強！！
ファイナルファンタジーVI  全員レベル 99 にして、魔法とかアビリティを全部覚えさせた！！
と言いたいところだけど、ガウで一匹だけ覚えさせられなかった。。。
MOTHER2 ギーグの逆襲  とりあえずクリアーはした。4 人目の武具は全部とれなかったなあ。。
聖剣伝説2  最強の武器を取るのがめちゃめちゃ大変で挫折した。クリアーはしたけどね。
聖剣伝説3  ラスボスが 3 通りあるから、全パターン試した。面白かったなあ。
ソウルブレイダー  独特の世界観が好き。
ガイア幻想紀  最後の赤い宝石の場所が分からなくて、数年後に見つけた攻略本見てよう
やく完全クリアー。オチはまあまあ良かった。
ルドラの秘宝  難易度高めだったかなあ。この世界は属性に支配されてたね。
[2011-02-11-1] 目次]]></description>
        </item>
        <item>
            <title><![CDATA[今までやったゲームまとめ(FC編)]]></title>
            <link>https://masutaka.net/2011-02-11-2/</link>
            <guid>https://masutaka.net/2011-02-11-2/</guid>
            <pubDate>Fri, 11 Feb 2011 01:00:00 GMT</pubDate>
            <description><![CDATA[[2011-02-11-1] 目次
バトルシティー 当時はファミコンが品薄で「ジョイスティック-7 」と「S.D.ステーション 」
それと下の「ロードファイター」の抱き合わせで買わされた。
でも面白かったなあ。かなりハマった。
ロードファイター トレーラーが出現するとワクワクwwした。たしか 5 面をクリアすると
1 面に戻ったよね。よくある無限ループタイプのゲームだった。
スーパーマリオブラザーズ  今もまだクリアー出来るんじゃないかなあ。
トランスフォーマー  2面さえ抜ければ、あとは大したことない。コンテニュー使い放題だし。
ドラゴンスレイヤーIV  これは難しかった。何年もかけてやっとクリアーした。
YouTube 検索すると、、、すごいなああ。
ドンキーコング3 なぜか親がカロリーメイト(チーズ味)を箱買いして毎日食べてたから、ド
ンキーコング3を見るとカロリーメイト(チーズ味)を思い出す。逆もまた然り。
エレベーターアクション 最初のビルしか攻略できなかった。。
超時空要塞 マクロス  これも難しかったなあ。
ドラゴンクエスト  真面目にやったらレベル 10 くらいで挫折した。レベル 30 のパスワード
使ってクリアーしたよ。。今はパスワード生成アプリあるよね。
ドラゴンクエストII 悪霊の神々  ロンダルキアの音楽は今聴いてもワクワクするね！
ドラゴンクエストIII そして伝説へ  最初にゾーマ様を倒したシーンは今も覚えている。勇者、武闘家、賢者が
倒され、最後に残った瀕死の戦士(元魔法使い)が魔神の斧で会心の一
撃！！熱かった。
ドラゴンクエストIV 導かれし者たち  ２周くらいしたかなあ。
ファイナルファンタジー  戦士、モンク、白、黒でやったなあ。シーフを選択する人が多くて爆死し
てたw 実は赤が強いと知ったのは後のお話。
ファイナルファンタジーII  当時はバカだったから、HP と MP を上げまくってた。
ファイナルファンタジーIII  高校受験が終わった日にダッシュで買いに行った。禁ゲーしてたので。関]]></description>
        </item>
        <item>
            <title><![CDATA[今までやったゲームまとめ(目次)]]></title>
            <link>https://masutaka.net/2011-02-11-1/</link>
            <guid>https://masutaka.net/2011-02-11-1/</guid>
            <pubDate>Fri, 11 Feb 2011 00:00:00 GMT</pubDate>
            <description><![CDATA[ゲームメーター に今までやったゲームをメモっていたけど、「情報１ポケッ
ト原則」に忠実に従うことにしたので、この ChangeLog メモに引っ越した。
コメントは当時を思い出しながら大幅に加筆。
[2011-02-11-2] FC編
[2011-02-11-3] SFC編
[2011-02-11-4] PS編
[2011-02-11-5] PS2編
[2011-02-11-6] PS3編
[2011-02-11-7] GB+DS編
※ [2011-01-04-1] のとおり、今は全部売った。ゲームをやることは当分
ないだろうなあ。]]></description>
        </item>
        <item>
            <title><![CDATA[『プログラマが知るべき97のこと』を読んだ]]></title>
            <link>https://masutaka.net/2011-02-09-1/</link>
            <guid>https://masutaka.net/2011-02-09-1/</guid>
            <pubDate>Wed, 09 Feb 2011 00:00:00 GMT</pubDate>
            <description><![CDATA[良書。私も含め、普段何十人もの達人と関わる機会のないプログラマは
ぜひ読むべき。
個人的には、日本人プログラマーに Mew のかずさんを加えてほしかった。
Mew のコードって、洗練されていてとても美しいのだよね。言語は違うけ
れども(いや違ったからこそか)、私のプログラミングの表現の幅を広げて
くれた。
ちなみに Amazon のカスタマレビュー では、tdiary で有名なただただしさ
んがレビューしている。こちらも必見。]]></description>
        </item>
        <item>
            <title><![CDATA[『KAGEROU』を読んだ]]></title>
            <link>https://masutaka.net/2011-02-07-1/</link>
            <guid>https://masutaka.net/2011-02-07-1/</guid>
            <pubDate>Mon, 07 Feb 2011 00:00:00 GMT</pubDate>
            <description><![CDATA[非常に読みやすい小説だった。余計な説明がないせいなんだろうな。２時
間ほどで読めるので、小説好きの方もミーハーな方にもオススメ。
最後がよく分からなくて確信が持てない。Amazon の書評でも読んで補完し
ようかな。]]></description>
        </item>
        <item>
            <title><![CDATA[『ゆるく考えよう 人生を１００倍ラクにする思考法』を読んだ]]></title>
            <link>https://masutaka.net/2011-02-05-1/</link>
            <guid>https://masutaka.net/2011-02-05-1/</guid>
            <pubDate>Sat, 05 Feb 2011 00:00:00 GMT</pubDate>
            <description><![CDATA[面白い。自分の人生を違った視点で見られる。
「所有という時代遅れ」は [2011-01-04-1] と同じだし、35 年ローンとか
組んじゃダメってのも同意。(後者はただ面倒で先延ばしにしていただけで
すが。。)
ただ「アドバイスの正しいもらい方」は？？だった。「他に何か聞いてお
くべきことなどありますか？今までお聞きしたことと全く違うことでもい
いのですが」うーん、ありえん。
まあでも、そういう考え方もあるよね〜]]></description>
        </item>
        <item>
            <title><![CDATA[TeraTerm Menu の ssh 自動ログイン設定例]]></title>
            <link>https://masutaka.net/2011-01-27-2/</link>
            <guid>https://masutaka.net/2011-01-27-2/</guid>
            <pubDate>Thu, 27 Jan 2011 01:00:00 GMT</pubDate>
            <description><![CDATA[@wadakei さん向けの情報。
うちはこんな設定でした。
会社の PC だと自動ログインできないのは何故なんだろう？？?]]></description>
        </item>
        <item>
            <title><![CDATA[MacPorts の使い方まとめ]]></title>
            <link>https://masutaka.net/2011-01-27-1/</link>
            <guid>https://masutaka.net/2011-01-27-1/</guid>
            <pubDate>Thu, 27 Jan 2011 00:00:00 GMT</pubDate>
            <description><![CDATA[# MacPorts 自身のアップデート % sudo port selfupdate # アップデートが必要なパッケージがあるかの確認 % port outdated # パッケージを指定してアップデート % sudo port upgrade &lt;package name1&gt; &lt;package name2&gt; # 一括アップデート % sudo port upgrade outdated # パッケージを検索する % port search &lt;package name&gt; # パッケージの依存関係を調べる % port deps &lt;package name&gt; # パッケージの variants を調べる % port variants &lt;package name&gt; # パッケージの情報を得る % port info &lt;package name&gt; # パッケージをインストールする。port に -y オプションを付けるとインストール前の確認ができる % sudo port install &lt;package name&gt; # パッケージをアンインストールする % sudo port uninstall &lt;package name&gt; # 古いバージョンのパッケージをアンインストールする % sudo port uninstall inactive # 全てのパッケージをアンインストールする。 % sudo port -f uninstall installed # インストールしてあるパッケージをすべて表示 % port installed # そのファイルがどのパッケージに属するか調べる。 % port provides &lt;file name&gt; # パッケージに含まれているファイルを確認 % port contents &lt;package name&gt; 参考情報:]]></description>
        </item>
        <item>
            <title><![CDATA[『600万人の女性に支持されるクックパッドというビジネス』を読んだ]]></title>
            <link>https://masutaka.net/2011-01-23-1/</link>
            <guid>https://masutaka.net/2011-01-23-1/</guid>
            <pubDate>Sun, 23 Jan 2011 00:00:00 GMT</pubDate>
            <description><![CDATA[発売から１年半以上経って [2009-05-17-3] ようやく購入。予想以上に面
白かった。クックパッドは「料理を楽しくする」ことだけを考え、実行し
続けてきたことがよく分かった。常にユーザ視点。Web 関係者は読んだ方
が良さそう。]]></description>
        </item>
        <item>
            <title><![CDATA[『アジャイルな見積りと計画づくり ~価値あるソフトウェアを育てる概念と技法~』を読んだ]]></title>
            <link>https://masutaka.net/2011-01-22-2/</link>
            <guid>https://masutaka.net/2011-01-22-2/</guid>
            <pubDate>Sat, 22 Jan 2011 01:00:00 GMT</pubDate>
            <description><![CDATA[マネージャー向け。メンバーは『アジャイルプラクティス』
[2010-05-05-2] がちょうど良い。
私には説明が冗長かつ分かり辛く感じられたので、各章のまとめを中心に
流し読みした。最後のケーススタディは実際のプロジェクトに使う時の参
考になりそう。
追伸: 去年の 6/3 に @simon6867 氏に借りて、今の今まで積んでました。
ごめんなさい。]]></description>
        </item>
        <item>
            <title><![CDATA[StatusNet Desktop から StatusNet を使おう]]></title>
            <link>https://masutaka.net/2011-01-22-1/</link>
            <guid>https://masutaka.net/2011-01-22-1/</guid>
            <pubDate>Sat, 22 Jan 2011 00:00:00 GMT</pubDate>
            <description><![CDATA[StatusNet Desktop 純正のクライアントソフトがあるとは知りませんでした。orz
@crontab33 さん、ありがとうございます。
  上のスクリーンショットは Windows 版です。他に [OSX 10.5 Intel]
[Linux Intel 32-bit] [Linux Intel 64-bit] があるようです。
Web 版より良いところ  勝手に自動リロードしてくれる。 間違って Enter してもツイートしない。  Web 版より悪いところ  一画面に表示されるツイート数が少ない。 過去のツイートを辿れない。 削除されたツイートがいつまでも表示される。再起動してもダメ。
ローカルでキャッシュを持っているみたい。 動きがもっさりしている。  すごく良いクライアントではありませんが、選択肢が増えるのは良いことです。
あ、試していませんが、iPhone 版もありました。
追記(2011-01-24):
クリーンルームだと以下のエラーが発生し、インストール出来ませんでした。。]]></description>
        </item>
        <item>
            <title><![CDATA[『古事記・日本書紀を歩く—神話と伝説の世界を訪ねて』を読んだ]]></title>
            <link>https://masutaka.net/2011-01-16-2/</link>
            <guid>https://masutaka.net/2011-01-16-2/</guid>
            <pubDate>Sun, 16 Jan 2011 01:00:00 GMT</pubDate>
            <description><![CDATA[[2009-05-16-2] に買ってから 1 年半以上経ってしまった。鈴木三重吉氏
の『新版 古事記物語』は読みづらくて挫折したが、こちらは写真が多く使
われていてやや読みやすい。どちらにしろ神様の名前って覚え辛いよね。]]></description>
        </item>
        <item>
            <title><![CDATA[『iPhone情報整理術 ~あなたを情報’’強者’’に変える57の活用法!』を読んだ]]></title>
            <link>https://masutaka.net/2011-01-16-1/</link>
            <guid>https://masutaka.net/2011-01-16-1/</guid>
            <pubDate>Sun, 16 Jan 2011 00:00:00 GMT</pubDate>
            <description><![CDATA[dankogai の書評 を盲信して買った。iPhone を使い倒して情報を整理する
ための 57 の方法が紹介されている。内容は悪くない。使えそうな方法を
取り入れるつもり。まずは RSS 整理法かな。]]></description>
        </item>
        <item>
            <title><![CDATA[所有しない生活]]></title>
            <link>https://masutaka.net/2011-01-04-1/</link>
            <guid>https://masutaka.net/2011-01-04-1/</guid>
            <pubDate>Tue, 04 Jan 2011 00:00:00 GMT</pubDate>
            <description><![CDATA[最近はクラウドサービスやら、カーシェアリングやら、便利なサービスが発達してきて、自分で全部所有しなくても良い時代になりつつあります。
年末に(自分の脳内に)イベントが降ってきたので、いろいろ所有しないことにしました。
メール→クラウドに移行 iPhone4 を使い始めてから、nifty の POP から Gmail の IMAP に移行しました。それまでのメールはまだ PC の中に入っていたので、全部 Gmail にインポートしました。
これでメールのバックアップを考える必要がなくなりました。
IMAP なので普通にメーラからアップすれば良いのですが、タイムスタンプが変わってしまうのが嫌だったので、以下のようにしました。
メールソフト(Mew) ー(IMAP)→ masutaka.net(さくらのレンタルサーバ) ー(Mail Fetcher)→ Gmail
GMailにメールを完全移行する を参考にしました。でも、今は goo メールアドバンスで IMAP は使えないようです。
あ、試すと分かりますが、Gmail の Mail Fetcher はすごく時間がかかります。1 万通だと、3〜4 日くらいでしょうか。。。
CD→全部売却 物理的に場所を取るので、上の写真にある 130 枚全てを AAC に変換して iPhone4 に突っ込みました。
最初は mp3 にする予定でしたが、聞き比べたら AAC のほうが音質が良かったので、AAC を選択しました。ちなみに AAC は Apple とは関係ありません。
最近の CD/DVD ドライブは 1 枚 3 分ほどで抽出出来るので、そんなに苦ではありませんでした。iTunes の曲名推測が賢く、ほぼ全て合っていたのも大いに助かりました。
抽出し終わった CD は全てブックオフに売りました。すっきり。
ゲーム→全部売却 ゲームは時間を取られますから、思い切って同じくブックオフに売りました。どうしてもやりたくなったら、また買えばいいですから。※ PS3+Torne は売ってません。]]></description>
        </item>
        <item>
            <title><![CDATA[Firefox アドオン Operator を利用してラングリッチの授業予約を簡単に Google Calendar に登録する。]]></title>
            <link>https://masutaka.net/2010-12-19-1/</link>
            <guid>https://masutaka.net/2010-12-19-1/</guid>
            <pubDate>Sun, 19 Dec 2010 00:00:00 GMT</pubDate>
            <description><![CDATA[実は８月の終わりから、ラングリッチ というオンライン英会話スクールに
通ってます。通ってますといっても Skype のビデオチャットなので、学校
は自宅の PC の前です。基本毎日フィリピンの先生とお話ししてます。
さて、先日こんなツイートをしました。
loading...
   if (localStorage.getItem("pref-theme") === "light") { const elements = document.getElementsByClassName('twitter-tweet'); for (let i = 0; i  このなにげないツイートに、なんとラングリッチのスーパーエンジニア
@tomoyaton が応えてくれました！
Microformats を利用してラングリッチの授業予約を簡単に Google
Calendar に登録する。 - 日々、とんは語る。 どうやら、ラングリッチのマイページには hCalendar という、イベントや
カレンダーを扱える microformat の技術が使われているそうです。Web ブ
ラウザがこれを扱えれば、Google Calendar に登録できるとのこと。
@tomoyaton さんのページでは Google Chrome の例が示されていましたが、
私は Firefox 使いなのでちょっと調べてみました。
  Forefox アドオン Operator をインストールし、Firefox を再起動する
と Operator のツールバーが出現する。
  ラングリッチのマイページに行くと、Operator のツールバーの「イベ]]></description>
        </item>
        <item>
            <title><![CDATA[『君がオヤジになる前に』を読んだ]]></title>
            <link>https://masutaka.net/2010-12-04-1/</link>
            <guid>https://masutaka.net/2010-12-04-1/</guid>
            <pubDate>Sat, 04 Dec 2010 00:00:00 GMT</pubDate>
            <description><![CDATA[面白かった。@takapon_jp が普段から言っていることが凝縮されている。
これまでの本と違うのは、ネガティブな自分をさらけ出していること。今
分からないことも正直に書いている。]]></description>
        </item>
        <item>
            <title><![CDATA[最近買ったデジタルガジェット]]></title>
            <link>https://masutaka.net/2010-11-15-1/</link>
            <guid>https://masutaka.net/2010-11-15-1/</guid>
            <pubDate>Mon, 15 Nov 2010 00:00:00 GMT</pubDate>
            <description><![CDATA[リュウド アールボードフォーケイタイRBK-2100BTJ Ver.2.1(Bluetooth HID、JIS配列) RBK-2100BTJ  iPhone4 用の Bluetooth キーボードとして買いました。ちょっと長めのメー
ルを書いたり、ツイートしたり、会議のメモを書くのに重宝しています。
スタンドが内蔵されていて、ジャキジャキジャキーンと外に出せます。
ちょっとカッコイイかもです。(全体の作りはややチープですが&hellip;。)
最初のペアリングは簡単です。それ以降も何かキーを押せばすぐに繋がり
ます。キーストロークも意外にあり、悪くないです。
と、このように非常に便利ではありますが JIS 配列を買ったのは失敗でし
た。iPhone4 が対応していないようで、付属のシールを貼って結局 US 配
列にすることになります。キーの配置もやや特殊で、未だに慣れません。
iPhone4 で使う人は素直に Mac 用 US 配列を買いましょう。
リュウド アールボードフォーケイタイRBK-2200BTi (Bluetooth HID、Mac用US配列) RBK-2200BTi 日本語と英語の切り替えは cmd+space で出来ます。cmd+c、cmd+x、cmd+v、
cmd+a でコピー、切り取り、貼り付け、全選択ができます。Shift+カーソ
ルキーで任意の文字列の選択です。
EXOGEAR iPhone4用バッテリージャケット ｅｘｏlife ブラック E125  つい勢いで買ってしまいました。。。
バッテリー持ちを良くしたい人にはお勧めです。
まず良い点。
 バッテリー持ちが２倍になります。 普通のケースと同様、受信干渉問題が解消されます。 手でスピーカーを塞ぐことがなくなります。 iPhone4 のデザインを損ないません。 単純に合体がカッコイイです。
   次に悪い点。
 デカくて重いです。リュウドのスタンドが辛そうです。 外部端子が小さくなるので(マイクロ USB 端子になるので)、充電しづら
くなります。  Creative T12 Wireless デスクトップ ステレオワイヤレス スピーカーシステム Bluetooth SP-T12W  結論から言えば買いです。良い音とかよく分かりませんが、]]></description>
        </item>
        <item>
            <title><![CDATA[『小泉八雲全集〈第1-17巻〉』の「耳無芳一」を読んだ]]></title>
            <link>https://masutaka.net/2010-11-13-2/</link>
            <guid>https://masutaka.net/2010-11-13-2/</guid>
            <pubDate>Sat, 13 Nov 2010 01:00:00 GMT</pubDate>
            <description><![CDATA[この中の『耳無芳一』を iPhone の青空文庫アプリ「i文庫」 で読んだ。平
氏鎮魂の話ですね。なぜだか分からないけど読んでいると、自分も目が見
えないような不思議な感覚になった。]]></description>
        </item>
        <item>
            <title><![CDATA[『新美南吉童話集』の「ごん狐」と「手袋を買いに」を読んだ]]></title>
            <link>https://masutaka.net/2010-11-13-1/</link>
            <guid>https://masutaka.net/2010-11-13-1/</guid>
            <pubDate>Sat, 13 Nov 2010 00:00:00 GMT</pubDate>
            <description><![CDATA[iPhone の青空文庫アプリ「i文庫」 で『ごん狐』と『手袋を買いに』を読
んだ。小学校の教科書か何かで読んだ以来で内容を忘れていたけど、どち
らも良かった。昔を思い出す。]]></description>
        </item>
        <item>
            <title><![CDATA[『そこまで言うか！』を読んだ]]></title>
            <link>https://masutaka.net/2010-11-03-1/</link>
            <guid>https://masutaka.net/2010-11-03-1/</guid>
            <pubDate>Wed, 03 Nov 2010 00:00:00 GMT</pubDate>
            <description><![CDATA[iPhone の電子書籍版を買った。82 ページで ￥1,000(書籍版だと 416 ペー
ジ、￥1,575) は割高感があったが、電子書籍用に再構成されており(コメ
ントが全部顔写真付き＆色分け)読みやすかったので、まあ OK か。
内容がくだけているのでサクサク読めるし、3 人の考えがよく分かった。
ただ、ページの途中や全体が真っ黒になることがあるのは頂けなかった
(iPhone のホームまで戻ったり、いろいろやると直った)。]]></description>
        </item>
        <item>
            <title><![CDATA[『夢をかなえる「打ち出の小槌」』を読んだ]]></title>
            <link>https://masutaka.net/2010-10-11-1/</link>
            <guid>https://masutaka.net/2010-10-11-1/</guid>
            <pubDate>Mon, 11 Oct 2010 00:00:00 GMT</pubDate>
            <description><![CDATA[この本自体がショートカットの塊で、@takapon_jp の考えが簡潔にまとめ
られている。筆者の本は数冊しか読んだことはないが、一番面白く刺激に
なった。]]></description>
        </item>
        <item>
            <title><![CDATA[『悪人(下)』を読んだ]]></title>
            <link>https://masutaka.net/2010-10-10-2/</link>
            <guid>https://masutaka.net/2010-10-10-2/</guid>
            <pubDate>Sun, 10 Oct 2010 01:00:00 GMT</pubDate>
            <description><![CDATA[どの登場人物も袋小路に迷い込んでいるような、そんな気がした。最後は
スッキリしないけど、映画よりもエピローグ多めなのは良かった。]]></description>
        </item>
        <item>
            <title><![CDATA[『悪人(上)』を読んだ]]></title>
            <link>https://masutaka.net/2010-10-10-1/</link>
            <guid>https://masutaka.net/2010-10-10-1/</guid>
            <pubDate>Sun, 10 Oct 2010 00:00:00 GMT</pubDate>
            <description><![CDATA[映画より話が細かく展開していて、面白かった。]]></description>
        </item>
        <item>
            <title><![CDATA[twittering-mode.el 本家に StatusNet 対応が commit された]]></title>
            <link>https://masutaka.net/2010-08-22-1/</link>
            <guid>https://masutaka.net/2010-08-22-1/</guid>
            <pubDate>Sun, 22 Aug 2010 00:00:00 GMT</pubDate>
            <description><![CDATA[本家に取り込んで頂けた ので、[2010-07-18-2] の記事を全体的に書き換え
ました。]]></description>
        </item>
        <item>
            <title><![CDATA[StatusNet-0.9.4 がリリースされてた]]></title>
            <link>https://masutaka.net/2010-08-17-1/</link>
            <guid>https://masutaka.net/2010-08-17-1/</guid>
            <pubDate>Tue, 17 Aug 2010 00:00:00 GMT</pubDate>
            <description><![CDATA[0.9.4 がリリースされてました。 今回も私は関係ない修正ばかりかな？
アップデートしましたが、よく分かりませんでした。アップデート手順は
今まで [2010-05-05-1] [2010-07-01-1] と同じです。
あ、twittering-mode.el [2010-07-18-2] からツイートできることも確認
しました。]]></description>
        </item>
        <item>
            <title><![CDATA[『Debug Hacks -デバッグを極めるテクニック&ツール』を読んだ]]></title>
            <link>https://masutaka.net/2010-08-10-1/</link>
            <guid>https://masutaka.net/2010-08-10-1/</guid>
            <pubDate>Tue, 10 Aug 2010 00:00:00 GMT</pubDate>
            <description><![CDATA[@yasukichi7 氏から借りた本。
KAHO を使った、プログラムを変更せずに任意の関数を置き換える方法は存
在すら知らなかったので、これだけでも読んだ価値があった。キャッシュ
ミスの削減方法も少々参考になった。]]></description>
        </item>
        <item>
            <title><![CDATA[Mew の g=>C-s のフォルダ名検索に migemo を使う]]></title>
            <link>https://masutaka.net/2010-08-04-1/</link>
            <guid>https://masutaka.net/2010-08-04-1/</guid>
            <pubDate>Wed, 04 Aug 2010 00:00:00 GMT</pubDate>
            <description><![CDATA[iPhone4 を買ったので、メール環境を mbox から Gmail の IMAP に移行し
ました。
いつでもどこでもメールを見られるのは便利ですねえ。これでネットから
隔離された実家に帰っても大丈夫そうです。
頻度が減ったとはいえ、Mew からも Gmail を読むことがあります。ただ、
Gmail ではデフォルトのメールフォルダ名が日本語です。
%[Gmail]/
%[Gmail]/すべてのメール
%[Gmail]/ゴミ箱
%[Gmail]/スター付き
%[Gmail]/下書き
%[Gmail]/迷惑メール
%[Gmail]/送信済みメール
g' =&gt; C-s&rsquo; での移動が面倒です。正直やってられません。
`g&rsquo; =&gt; [TAB] なんてもってのほかです。
以下の設定をして、g' =&gt; C-s&rsquo; から migemo を使えるようにしました。
(defadvice mew-input-folder-search-forward-1  (around  mew-input-folder-search-forward-1-with-migemo  activate)  &#34;migemo を使ってフォルダ名を検索する。&#34;  (let ((migemo-do-isearch t))  ad-do-it)) ]]></description>
        </item>
        <item>
            <title><![CDATA[Web サイトを再帰的に取得してみた]]></title>
            <link>https://masutaka.net/2010-07-21-1/</link>
            <guid>https://masutaka.net/2010-07-21-1/</guid>
            <pubDate>Wed, 21 Jul 2010 00:00:00 GMT</pubDate>
            <description><![CDATA[最近のサイトは昔より複雑になっているので、意外に大変ですねえ。。
ここは静的なページで構成されているので、サクッと取得出来ました。
% wget -r -l 1 -k -p http://jibun.atmarkit.co.jp/lskill01/rensai/tool10/05/01.html -r は再帰的に取得、-l num は取得する階層の深さです。-k はリンクをロー
カルコピー間の相対リンクに変換し、-p は画像やそのほかの補助ファイル
もダウンロードしてページを完全構築します。
次に http://gihyo.jp/dev/serial/01/testlink を試しましたが、ちょっ
と無理ですねえ。やり方あるんでしょうか。GetHTMLW でも出来ませんでした。
そういえば、ダイヤルアップ時代には波乗野郎 をよく使ってました。懐か
しいなあ。
参考情報: ITmedia Biz.ID：Wgetでオンライン保管資料をローカルコピー 追記(2010-07-22):
Firefox アドオン ScrapBook を教えてもらいました。GetHTMLW よりは良
い感じです。]]></description>
        </item>
        <item>
            <title><![CDATA[twittering-mode.el から StatusNet を使おう]]></title>
            <link>https://masutaka.net/2010-07-18-2/</link>
            <guid>https://masutaka.net/2010-07-18-2/</guid>
            <pubDate>Sun, 18 Jul 2010 01:00:00 GMT</pubDate>
            <description><![CDATA[twittering-mode.el は、Emacs で動作する Twitter クライアントです。
詳細はオフィシャルサイト をご覧下さい。
最新リリース版 v1.0.0 は対応していませんが、2010.8.22 から Git 最新
版で StatusNet を使えるようになりました！
Twitter で出来ることはほとんど StatusNet で出来ます。ただし、
StatusNet がサポートしていない機能は使えません。例えば、V' からの :retweeted_by_me, :retweeted_to_me, :retweets_of_me や L&rsquo; からのリ
ストです。
インストールの手引き GitHub からソースコード一式をダウンロードします。
http://github.com/hayamiz/twittering-mode/archives/master EmacsWiki の「インストールの手引き」に従ってインストールします。
http://www.emacswiki.org/emacs-ja/TwitteringMode-ja StatusNet 固有の設定をします。以下は StatusNet を
http://example.com/statusnet/ に構築し、[2010-04-18-3] の Fancy
URLs の設定を行った場合の設定になります。
(setq twittering-service-method &#39;statusnet) (setq twittering-auth-method &#39;basic) (setq twittering-username &#34;StatusNetのアカウント&#34;) (setq twittering-api-host &#34;example.com&#34;) (setq twittering-api-search-host &#34;example.com&#34;) (setq twittering-web-host &#34;example.com&#34;) (setq twittering-api-prefix &#34;statusnet/api/&#34;) (setq twittering-search-api-method &#34;statusnet/api/search&#34;) (setq twittering-web-path-prefix &#34;statusnet&#34;) SSL を使っていなければ、こちらも設定してください。]]></description>
        </item>
        <item>
            <title><![CDATA[先週と今週の買い物]]></title>
            <link>https://masutaka.net/2010-07-18-1/</link>
            <guid>https://masutaka.net/2010-07-18-1/</guid>
            <pubDate>Sun, 18 Jul 2010 00:00:00 GMT</pubDate>
            <description><![CDATA[アジュバン RE:エミサリーシャンプー 300ml 
このシャンプーに変えたら頭皮の痒みがなくなりました。リンスを使わな
くても良いのが楽ですね。シャンプーだけでシットリします。
アジュバン Re:エミサリーローション 125g 
良いそうなので勢いで買ってしまいました。すーっとします。
シャープ EC-BP3 掃除機サイクロンクリーナー用フィルター 
フィルターを掃除するのが面倒になったので、新しいのを買いました。買っ
てから知ったのですが、これ水洗いできるのですね&hellip;。ま、いいか。]]></description>
        </item>
        <item>
            <title><![CDATA[『稼げる 超ソーシャルフィルタリング』を読んだ]]></title>
            <link>https://masutaka.net/2010-07-10-1/</link>
            <guid>https://masutaka.net/2010-07-10-1/</guid>
            <pubDate>Sat, 10 Jul 2010 00:00:00 GMT</pubDate>
            <description><![CDATA[@wadakei さんから借りた。
内容は目新しいものがなかったが、著者の意見が簡潔かつ明確に書かれて
いて読みやすかった。１時間で読めた。
メーリングリストを使っていない会社ってまだあるんだ&hellip;。]]></description>
        </item>
        <item>
            <title><![CDATA[『IT批評 創刊号<vol.0>』を読んだ]]></title>
            <link>https://masutaka.net/2010-07-08-1/</link>
            <guid>https://masutaka.net/2010-07-08-1/</guid>
            <pubDate>Thu, 08 Jul 2010 00:00:00 GMT</pubDate>
            <description><![CDATA[2010.7.3 購入。タイトルから往年のパソコン批評を思い出して買ったが、
内容が固く地味で面白くなかった。]]></description>
        </item>
        <item>
            <title><![CDATA[『拝金』を読んだ]]></title>
            <link>https://masutaka.net/2010-07-04-2/</link>
            <guid>https://masutaka.net/2010-07-04-2/</guid>
            <pubDate>Sun, 04 Jul 2010 01:00:00 GMT</pubDate>
            <description><![CDATA[2010.7.3 購入。３時間くらいで読めた。欲にまみれて欲を突き抜ける、
これは仏陀に通じるものがある(キリッ]]></description>
        </item>
        <item>
            <title><![CDATA[Mew の Draft-mode で次や前の草稿にジャンプする]]></title>
            <link>https://masutaka.net/2010-07-04-1/</link>
            <guid>https://masutaka.net/2010-07-04-1/</guid>
            <pubDate>Sun, 04 Jul 2010 00:00:00 GMT</pubDate>
            <description><![CDATA[Summary-mode での C-c C-o (今開いている任意の草稿にジャンプする) は
便利なのでよく使いますが、Draft-mode でも同じことをやりたかったので、
適当な関数を作りました。
(defun mew-draft-jump-to-next-buffer (&amp;optional previous)  &#34;Jump to next draft buffer if exists.&#34;  (interactive &#34;P&#34;)  (let* ((draft-dir (file-name-as-directory mew-draft-folder))  (regex (mew-folder-regex draft-dir))  (bufs (sort (mew-buffer-list regex) &#39;string&lt;))  next-list next-buf)  (if previous (setq bufs (reverse bufs)))  (setq next-list (cdr (member (buffer-name) bufs)))  (setq next-buf (if next-list (nth 0 next-list)  (nth 0 bufs)))  (if (and (get-buffer next-buf)  (not (equal next-buf (buffer-name))))  (switch-to-buffer next-buf)  (message &#34;No such other draft buffer!]]></description>
        </item>
        <item>
            <title><![CDATA[StatusNet-0.9.3 がリリースされてた]]></title>
            <link>https://masutaka.net/2010-07-01-1/</link>
            <guid>https://masutaka.net/2010-07-01-1/</guid>
            <pubDate>Thu, 01 Jul 2010 00:00:00 GMT</pubDate>
            <description><![CDATA[0.9.3 がリリースされてました。 今回もマイナーバージョンアップのようです。
Admin -&gt; Design から css を変更出来るようになりました。
プロファイルに Daily average が表示されるようになりました。
他は私にはあまり関係ないかな。
前回 [2010-05-05-1] と同じ手順でアップデート出来ました。
日本語パッチ [2010-04-18-2] は今回も必要でした。
会社の StatusNet はまだアップデートしてませんが、[2010-04-18-5] [2010-04-29-2] [2010-04-18-6] のパッチは必要そうです。
追記(2010-07-07):
会社でもバージョンアップしました。どのパッチも問題なく充てることが
出来ました。]]></description>
        </item>
        <item>
            <title><![CDATA[『メールの超プロが教えるGmail仕事術』を読んだ]]></title>
            <link>https://masutaka.net/2010-06-24-1/</link>
            <guid>https://masutaka.net/2010-06-24-1/</guid>
            <pubDate>Thu, 24 Jun 2010 00:00:00 GMT</pubDate>
            <description><![CDATA[どちらかというと Gmail 初心者向けの本。大量のメールの仕分け方や、ス
パム対策などがサラリと書いてあって読みやすい。個人的にはスパムフィ
ルターオフの方法が参考になった。]]></description>
        </item>
        <item>
            <title><![CDATA[今週の買い物]]></title>
            <link>https://masutaka.net/2010-06-20-3/</link>
            <guid>https://masutaka.net/2010-06-20-3/</guid>
            <pubDate>Sun, 20 Jun 2010 02:00:00 GMT</pubDate>
            <description><![CDATA[ウェーブチェア 5G 
PC のモニターをテレビにしたら [2010-05-30-1] 腰が痛くなってきたので、
座椅子を買いました。ソファーを買うまでもないけど、普通の座椅子は安っ
ぽくて嫌、という方にお勧めです。
作りがしっかりしていますし、頭、腰、脚部がそれぞれ、5,14,14 段階リ
クライニングするので、一番楽な姿勢になれます。ただ、腰の部分に隙間
ができるので、クッション等あてないと疲れるかもしれません。
似た商品のウェーブチェア FG は、「床面がフローリングや畳で使用する
場合、ジュータンやカーペット等の敷物をしいてください。」とのことな
ので、注意した方が良いです。ウェーブチェア 5G は「床へのキズ防止も
バッチリ！」なので、問題ありません。
ウエーブチェア座椅子用カバー(ベージュ) 
「ウェーブチェア 5G」の表面の生地は取り外しができないので、汚れ対策
のためカバーも購入しました。麻っぽい質感で肌触りがよいです。
問題は、付けるとダサくなることでしょうか&hellip;。元の座椅子はそこそこお
しゃれなデザインなので、少し残念です。
SanDisk 2GB microSD カード SD アダプタ付 バルク品  W51CA 用に買いました。メーカー保証のないバルク品ですが、大した用途
には使わないので安さ重視にしました。SD アダプタ付きで ￥600 は安い！
ロジクール ワイヤレスマウス M505 ライトシルバー M505LS  [2010-05-30-1] のマウスが使いやすいので、会社用にもう一台買いました。
色まで同じです。ヨドバシより Amazon の方が ￥1,000 くらい安かったです。]]></description>
        </item>
        <item>
            <title><![CDATA[「Anthy の変換精度を上げる方法」を試した]]></title>
            <link>https://masutaka.net/2010-06-20-2/</link>
            <guid>https://masutaka.net/2010-06-20-2/</guid>
            <pubDate>Sun, 20 Jun 2010 01:00:00 GMT</pubDate>
            <description><![CDATA[適当に… » Blog Archive » Anthyの変換精度を上げる方法 Anthy がバカユニークな変換をするのは、物忘れをしやすいからみたいで
す。早速設定しました。しばらく様子を見ることにします。
# su - # chattr +a ~masutaka/.anthy/last-record2_default.utf8 &ldquo;man chattr&rdquo; によると、chattr は「Linux 第 2 拡張ファイルシステム
(ext2fs) 上にある ファイルの属性 (attribute) を変更する」コマンドだ
そうです。ファイルに圧縮属性を付けたり、root でも消せないファイルを
作れたり、面白そうなコマンドです。
属性の確認は lsattr で行います。ユーザ権限でも実行できます。
% lsattr -----a------------- ./last-record2_default.utf8 ------------------- ./lock-file_default ------------------- ./private_words_default ------------------- ./last-record1_default.utf8 ~/.anthy 以下のファイルの説明は Anthy wiki - FAQ にあります。
元になったツイートです。ありがとうございます。
loading...
   if (localStorage.getItem("pref-theme") === "light") { const elements = document.getElementsByClassName('twitter-tweet'); for (let i = 0; i  ]]></description>
        </item>
        <item>
            <title><![CDATA[Debian squeeze で Windows キーを GNOME メインメニュー表示に割り当てる]]></title>
            <link>https://masutaka.net/2010-06-20-1/</link>
            <guid>https://masutaka.net/2010-06-20-1/</guid>
            <pubDate>Sun, 20 Jun 2010 00:00:00 GMT</pubDate>
            <description><![CDATA[$HOME を掃除したら、Windows キーを「GNOME メインメニュー」の表示に
割り当てられなくなりました。どうやら squeeze から変更されたようです。
たまたま某サイト で方法が分かったので、メモします。
  「GNOME メインメニュー」→「システムツール」→
「設定エディタ(gconf-editor)」を起動する。
  /apps/metacity/global_keybindings/panel_main_menu を右クリックし
て「キーの編集」を選び「値」欄に Super_L と入力する。
  設定エディタは Windows のレジストリエディタと似たようなものだそうで
す。そのため、できるだけ GNOME アプリケーションが用意する設定インター
フェースを使用すべきです。
今回の場合だと GNOME が用意する設定インターフェースは「GNOME メイン
メニュー」→「システム」→「設定」→「キーボード・ショートカット」
になります。
過去の記事を検索したら [2005-11-07-1] や [2007-03-11-3] を見つけま
した。「Windows キー」→「C-p」でメニューを辿れるのは良いですね。
早速設定しました。]]></description>
        </item>
        <item>
            <title><![CDATA[「Emacs23.2が更に1ビット稼いだ秘密」の自分用メモ]]></title>
            <link>https://masutaka.net/2010-06-19-2/</link>
            <guid>https://masutaka.net/2010-06-19-2/</guid>
            <pubDate>Sat, 19 Jun 2010 01:00:00 GMT</pubDate>
            <description><![CDATA[「Emacs23.2が更に1ビット稼いだ秘密 — ありえるえりあ 」の理解に時間
がかかったので、自分用にメモしておく。
Emacs23.1 の enum Lisp_Type は以下のように定義されていた。
         000 Lisp_Int   001 空き   010 Lisp_Symbol   011 Lisp_Misc   100 Lisp_String   101 Lisp_Vectorlike   110 Lisp_Cons   111 Lisp_Float    enum Lisp_Type は オブジェクト変数(でいいのかな？) 32bit のうち、
下位 3bit に対応する。
Lisp_Int(= 下位 3bit 全てがゼロ)の時は、整数オブジェクトと判断する。
この場合、残り 29bit を符号と整数長として使える。
printf(&#34;Emacs23.1(%0.0fMB)\n&#34;, ((double)(0xffffffff &gt;&gt; (3 + 1)) / 1024 / 1024)); =&gt; Emacs23.]]></description>
        </item>
        <item>
            <title><![CDATA[StatusNet API のパスを Twitter と同じにする方法]]></title>
            <link>https://masutaka.net/2010-06-19-1/</link>
            <guid>https://masutaka.net/2010-06-19-1/</guid>
            <pubDate>Sat, 19 Jun 2010 00:00:00 GMT</pubDate>
            <description><![CDATA[[2010-05-16-1] の補完です。
今回の記事は元々、twittering-mode で StatusNet を使うために書きまし
た。しかし、twittering-mode 側の修正で対応することにしたので、私は
今現在設定していません。ニッチな層向けに残しておくことにします。
Identifox, twittering-mode, TweetDeck 以外に使えるクライアントがあ
れば、教えて下さい！
さて、説明に入ります。
statusnet は http://example.com/statusnet/ に構築し、
[2010-04-18-3] の Fancy URLs の設定を行ったものとします。
StatusNet の API は Twitter-compatible です。 ただし、[2010-05-16-1] で書きましたが、API の URL は少し異なります。
何らかの事情で Twitter クライアントを修正できない場合でも、Twitter
とパスを同じにすれば使えるかもしれません。Apache の mod_rewriteで置
換してみましょう。
※ /var/www は Debian における、Apache の DocumentRoot です。
/var/www/.htaccess 以下を設定します。
&lt;IfModule mod_rewrite.c&gt; RewriteEngine On RewriteBase / RewriteRule ^1/(.*)$ statusnet/api/$1 RewriteRule ^search(.*)$ statusnet/api/search$1 &lt;/IfModule&gt; 1 つ目の RewriteRule で http://example.com/1/ * へのアクセスを、]]></description>
        </item>
        <item>
            <title><![CDATA[『武士道』を読んだ]]></title>
            <link>https://masutaka.net/2010-06-11-1/</link>
            <guid>https://masutaka.net/2010-06-11-1/</guid>
            <pubDate>Fri, 11 Jun 2010 00:00:00 GMT</pubDate>
            <description><![CDATA[2010.4.17 購入。武士道が大衆にも広まった経緯のあたりは興味深かった。
明治の本だけど外国人向けに書かれた本なので、それほど読みづらくない。
訳も良いのかな。]]></description>
        </item>
        <item>
            <title><![CDATA[『ちょいデキ!』を読んだ]]></title>
            <link>https://masutaka.net/2010-06-06-1/</link>
            <guid>https://masutaka.net/2010-06-06-1/</guid>
            <pubDate>Sun, 06 Jun 2010 00:00:00 GMT</pubDate>
            <description><![CDATA[http://chalow.net/2009-05-17-3.html で知って、2010.4.17 に購入した。
これも読みやすかった。二日で読めた。凡人のためのちょっとした仕事術
が Q&amp;A 形式でまとまっている。]]></description>
        </item>
        <item>
            <title><![CDATA[『はじめての課長の教科書』を読んだ]]></title>
            <link>https://masutaka.net/2010-06-03-1/</link>
            <guid>https://masutaka.net/2010-06-03-1/</guid>
            <pubDate>Thu, 03 Jun 2010 00:00:00 GMT</pubDate>
            <description><![CDATA[http://blog.livedoor.jp/dankogai/archives/50995105.html で知って、
2010.4.17 に購入した。読みやすかった。中間管理職向けの本って他にな
いと思う。]]></description>
        </item>
        <item>
            <title><![CDATA[テレビとワイヤレスデバイスの組み合わせは最高]]></title>
            <link>https://masutaka.net/2010-05-30-1/</link>
            <guid>https://masutaka.net/2010-05-30-1/</guid>
            <pubDate>Sun, 30 May 2010 00:00:00 GMT</pubDate>
            <description><![CDATA[2 週間ほど前から [2009-11-03-1] に買った AQUOS 32 型テレビを PC の
モニタとして使っていますが、予想以上に使いやすいことが分かりました。
ええ、すごく良いです。
さっそく外観です。
  向かって左下のシルバーの筐体がメインマシンの DELL Inspiron
530s(Debian GNU/Linux Squeeze) です。AQUOS の「入力 2」に繋げていま
す。Debian からの音声は、別途 Audio ケーブルを通じて AQUOS から出ます。
AQUOS の前にある VAIO W(WindowsXP) は D-sub ケーブルで「入力 7」に
繋げています。
「入力 2」と「入力 7」の音声入力は共通なので、「入力 7」の VAIO W
に切り替えても、DELL 側の音楽を聴き続けることができます。ただし、音
声は一瞬途絶えます。
手前にあるキーボードとマウスはワイヤレスです。DELL と繋がっています。
Synergy を使っているので[2009-07-20-3] 、VAIO W を操作することも出来
ます。
テレビ台に収まっているのは PS3 です。HDMI ケーブルで「入力 1」に繋
げています。
左斜め前から撮ってみました。
  DELL がよく見えます。
右斜め前からも撮ってみました。
  右下の白い箱は DVD/CD ドライブです。VAIO W と繋がっています。]]></description>
        </item>
        <item>
            <title><![CDATA[『「法令遵守」が日本を滅ぼす』を読んだ]]></title>
            <link>https://masutaka.net/2010-05-25-1/</link>
            <guid>https://masutaka.net/2010-05-25-1/</guid>
            <pubDate>Tue, 25 May 2010 00:00:00 GMT</pubDate>
            <description><![CDATA[http://ameblo.jp/takapon-jp/entry-10262279171.html で知って、
2010.4.17 に購入した。
元東京地検特捜部の著者の言葉には説得力があった。日本では単純に「法
令遵守」をしても、その場凌ぎの対応にならざるを得ない。法令の背後に
ある社会的要請に応えることこそコンプライアンスであり、その観点から
組織のあり方を考え直すことが重要である。]]></description>
        </item>
        <item>
            <title><![CDATA[使用可能なフォントリスト]]></title>
            <link>https://masutaka.net/2010-05-22-2/</link>
            <guid>https://masutaka.net/2010-05-22-2/</guid>
            <pubDate>Sat, 22 May 2010 01:00:00 GMT</pubDate>
            <description><![CDATA[http://pc12.2ch.net/test/read.cgi/unix/1265413075/83 以下の S 式を評価すると、現在のフレームで使用可能なフォントリストを
返す。
(font-family-list) ]]></description>
        </item>
        <item>
            <title><![CDATA[TweetDeck から StatusNet を使おう]]></title>
            <link>https://masutaka.net/2010-05-22-1/</link>
            <guid>https://masutaka.net/2010-05-22-1/</guid>
            <pubDate>Sat, 22 May 2010 00:00:00 GMT</pubDate>
            <description><![CDATA[TweetDeck から StatusNet を使えるようになりました！！ TweetDeck は、Mac, Windows, Linux, iPhone, iPod touch, iPad 等で動
作する Twitter クライアントです。今回は Windows 版で試しました。
インストールと StatusNet 向けの設定は前述の URL を参考にしてくださ
い。TweetDeck for Desktop は 0.34.1 以上である必要があります。
デフォルトの設定では日本語を表示できません。
Setting アイコンをクリック→
Color/Font のタブをクリック→
InternationalFont/TwitterKey にチェックを入れれば表示できます。
Web 版で悩まされてきた、Enter でのツイートは抑制出来ます。
Setting アイコンをクリック→
General のタブをクリック→
Press Enter to Send an Update のチェックを外せば OK です。
なぜか、パブリックタイムラインを表示出来ませんでした。
そのうち対応されるのかな？ 参考情報:
Tweetdeck　日本語の設定 追記(2010-05-24):
クリーンルームでは使えませんでした。初回起動時に必ず
Twitter/Facebook/MySpace のいずれかの認証を受ける必要があるためです。
非常に残念です。
追記(2010-06-07):
ある方経由で、開発元に問い合わせてもらっています。
追記(2010-06-09):
ダメでした。まだ対応する気はないとのことです。
気長に待ちましょう。。。]]></description>
        </item>
        <item>
            <title><![CDATA[『会社をぶっ壊して、チームを創ろう!』を読んだ]]></title>
            <link>https://masutaka.net/2010-05-19-1/</link>
            <guid>https://masutaka.net/2010-05-19-1/</guid>
            <pubDate>Wed, 19 May 2010 00:00:00 GMT</pubDate>
            <description><![CDATA[まあまあかな。「かき混ぜ隊」はツイッターで一部代替できるかもと思っ
た。社員が会社を良くしようという基盤がない状態で、多くの会社が根本
的な変革をしようとしているが、それは全く無意味ということが書いてあっ
たけど、それは全くその通り。]]></description>
        </item>
        <item>
            <title><![CDATA[Twitter と StatusNet の URL の違い]]></title>
            <link>https://masutaka.net/2010-05-16-1/</link>
            <guid>https://masutaka.net/2010-05-16-1/</guid>
            <pubDate>Sun, 16 May 2010 00:00:00 GMT</pubDate>
            <description><![CDATA[statusnet は http://example.com/statusnet/ に構築し、
[2010-04-18-3] の Fancy URLs の設定を行ったものとします。
基本 API
    ホスト名 パス     Twitter http://api.twitter.com  /1/statuses/*.xml   StatusNet http://example.com  /statusnet/api/statuses/*.xml    検索 API
    ホスト名 パス     Twitter http://search.twitter.com  /search*   StatusNet http://example.com  /statusnet/api/search*    &ldquo;20 minutes ago&rdquo; や &ldquo;in reply to hoge&rdquo; のリンク先
    ホスト名 パス     Twitter http://twitter.]]></description>
        </item>
        <item>
            <title><![CDATA[elisp でマクロを含んだ関数のデバッグに便利な方法]]></title>
            <link>https://masutaka.net/2010-05-15-1/</link>
            <guid>https://masutaka.net/2010-05-15-1/</guid>
            <pubDate>Sat, 15 May 2010 00:00:00 GMT</pubDate>
            <description><![CDATA[マクロを含んだ関数のデバッグをするために、ステップ実行しようとする
と一瞬で終わってしまうことがあります。これについて、ツイッターでア
ドバイスをもらったので、調べてみました。
例えば以下のコードで、hoge() をステップ実行しようとすると
hoge-only の式に入れず、ミニバッファに Result: &ldquo;ccc&rdquo; と表示され
一瞬で終わってしまいます。
(defun hoge-p () t)  (defmacro hoge-only (&amp;rest body)  `(cond  ((not (hoge-p))  (message &#34;This command can be used in hoge only&#34;))  (t ,@body)))  (defun hoge ()  (hoge-only  (message &#34;aaa&#34;)  (message &#34;bbb&#34;)  (message &#34;ccc&#34;))) 対策は簡単で、以下の S 式を評価するだけです。
(def-edebug-spec hoge-only t) どこかで見たことあるなあと思ったら、mew-edebug.el でこれが使われて
いました。なぜ気づかない。。。
元になったつぶやきです。ありがとうございます。
loading...
   if (localStorage.getItem("pref-theme") === "]]></description>
        </item>
        <item>
            <title><![CDATA[『アジャイルプラクティス 達人プログラマに学ぶ現場開発者の習慣』を読んだ]]></title>
            <link>https://masutaka.net/2010-05-05-2/</link>
            <guid>https://masutaka.net/2010-05-05-2/</guid>
            <pubDate>Wed, 05 May 2010 01:00:00 GMT</pubDate>
            <description><![CDATA[2010.4.9 購入。アジャイルを理解するにはとても良い本。45 のプラクティ
スが簡潔に面白くまとめられている。]]></description>
        </item>
        <item>
            <title><![CDATA[StatusNet のバージョンアップ]]></title>
            <link>https://masutaka.net/2010-05-05-1/</link>
            <guid>https://masutaka.net/2010-05-05-1/</guid>
            <pubDate>Wed, 05 May 2010 00:00:00 GMT</pubDate>
            <description><![CDATA[0.9.2 がリリースされた ので、バージョンアップしました。
インストール [2010-04-18-1] をお手軽にした感じでした。
アップデート手順 ※ &ldquo;#&rdquo; は root での作業、&quot;%&quot; は一般ユーザでの作業です。
1. Apache は終了させておきます。  /etc/init.d/apache2 stop  2. http://status.net/ から tar ball を落とし、/var/www に展開します。  cd /var/www tar xzf statusnet-0.9.2.tar.gz  3. 以前のバージョンと置き換えます。  mv statusnet statusnet.bak mv statusnet-0.9.2 statusnet  4. 必要なファイルをコピーします。  cd statusnet cp ../statusnet.bak/.htaccess . cp ../statusnet.bak/config.php . cp ../statusnet.bak/avatar/* avatar cp ../statusnet.bak/background/* background cp ../statusnet.bak/file/* file  5. アクセス権を適切に設定します。  chown -R root:root .]]></description>
        </item>
        <item>
            <title><![CDATA[DISQUS API を使って、過去のコメントをインポートする方法]]></title>
            <link>https://masutaka.net/2010-05-03-2/</link>
            <guid>https://masutaka.net/2010-05-03-2/</guid>
            <pubDate>Mon, 03 May 2010 01:00:00 GMT</pubDate>
            <description><![CDATA[DISQUS は標準で IntenseDebate, JS-Kit, Movable Type, WordPress のコ
メントをインポートすることが出来ます。「くっつき BBS 」のインポート
は当然サポートされていません。
幸い、WWW-Disqus という DISQUS API を叩く Perl モジュールがあったの
で、これでインポートすることにしました。ありがたいことです。
これを使えば「くっつき BBS」に限らず、どのコメントシステムからも移
行は可能だと思います。
WWW-Disqus は若干古くなって動かなかったので、以下の修正が必要でした。
Index: lib/WWW/Disqus.pm =================================================================== --- lib/WWW/Disqus.pm	(リビジョン 695) +++ lib/WWW/Disqus.pm	(作業コピー) @@ -57,8 +57,7 @@ my $obj = shift; return 1 if $obj-&gt;{succeeded} - &amp;&amp; $obj-&gt;{succeeded}-&gt;{value} - &amp;&amp; $obj-&gt;{succeeded}-&gt;{value} eq &#39;true&#39;; + &amp;&amp; $obj-&gt;{succeeded} eq &#39;true&#39;; confess $obj-&gt;{message}; } @@ -81,7 +80,7 @@ disqus_api_url( &#34;get_forum_list&#34;, user_api_key =&gt; $user_api_key ) ); confess &#39;Failed to access DISQUS API: &#39; .]]></description>
        </item>
        <item>
            <title><![CDATA[このブログのコメントシステムを DISQUS にしました]]></title>
            <link>https://masutaka.net/2010-05-03-1/</link>
            <guid>https://masutaka.net/2010-05-03-1/</guid>
            <pubDate>Mon, 03 May 2010 00:00:00 GMT</pubDate>
            <description><![CDATA[[2008-09-29-1] のバージョンアップ。
今まで「くっつき BBS 」を自サイト内に構築し使っていましたが、スパム
対策が面倒になってきた、コメントを書いた人が自分のコメントを修正で
きない等の理由から、DISQUS という外部コメントサービスを使うことにし
ました。
同様にトラックバックも「くっつきトラックバック」を使っていましたが、
こちらは廃止しました。実はトラックバックはあまり好きではないのです。
(DISQUS の管理オプションを ON にすれば一応使えます。)
良くなった点 DISQUS のアカウントを作ると、自分のコメントの一覧表示や編集、アバター
機能やコミュニティ機能が使えるようになりました。(アカウントを作らな
くても投稿はできます。)
DISQUS アカウント以外にも Facebook, Twitter, OpenID でもログインで
きます。(ただ、Facebook は何かうまくいきません&hellip;。)
コメントを投稿するついでに Twitter や Facebook にも送信出来るように
なりました。(コメントが活発になることを期待。)
Twitter や FriendFeed でリアクションがあれば、コメントの下に表示さ
れるようになりました。
各コメントに返信すると、スレッド化するようになりました。
管理者はスパムのことを気にしなくてよくなりました。
管理者は全記事のコメントを一覧表示出来るようになりました。
悪くなった点 最近頂いたコメントは左側にあるウイジェットの RECENT で表示出来ます。
しかし、タイトルに日本語を含む記事にコメントすると、文字化けます。
文字化けるのは &ldquo;2010-03-06-1 at chalow&rdquo; の部分です。(この例では
DISQUS API を使ったため文字化けは発生していません。)
過去のコメントは既に移行済みです。これが一番大変でした。次の記事
[2010-05-03-2] で説明します。
参考情報:
Ogawa::Buzz: このブログのコメントシステムにDISQUSを使い始めました ]]></description>
        </item>
        <item>
            <title><![CDATA[キー操作のみでウェブサイトのタイトルや URL をコピーする方法]]></title>
            <link>https://masutaka.net/2010-05-01-1/</link>
            <guid>https://masutaka.net/2010-05-01-1/</guid>
            <pubDate>Sat, 01 May 2010 00:00:00 GMT</pubDate>
            <description><![CDATA[今までページのソースや、&ldquo;C-c T&rdquo; からコピーしていましたが、さすがに
バカバカしくなったので KeySnail の関数を作りました。
それぞれ、&ldquo;t&rdquo; でタイトルコピー、&ldquo;T&rdquo; でタイトルと URL コピー、
&ldquo;u&rdquo; で URL コピーが出来るようになります。
key.setViewKey(&#39;t&#39;, function () { var w = window._content; var d = w.document; var txt = d.title; const CLIPBOARD = Components.classes[&#39;@mozilla.org/widget/clipboardhelper;1&#39;].getService(Components.interfaces.nsIClipboardHelper); CLIPBOARD.copyString(txt); }, &#39;タイトルコピー&#39;); key.setViewKey(&#39;T&#39;, function () { var w = window._content; var d = w.document; var txt = &#34;\&#34;&#34; + d.title + &#34;\&#34; - &#34; + d.location.href; const CLIPBOARD = Components.classes[&#39;@mozilla.org/widget/clipboardhelper;1&#39;].getService(Components.interfaces.nsIClipboardHelper); CLIPBOARD.copyString(txt); }, &#39;タイトルとURLコピー&#39;); key.setViewKey(&#39;u&#39;, function () { var w = window.]]></description>
        </item>
        <item>
            <title><![CDATA[StatusNet のセッションが異常に短い]]></title>
            <link>https://masutaka.net/2010-04-29-4/</link>
            <guid>https://masutaka.net/2010-04-29-4/</guid>
            <pubDate>Thu, 29 Apr 2010 03:00:00 GMT</pubDate>
            <description><![CDATA[Debian squeeze は問題ないのですが、Debian lenny ではすぐログアウト
する問題に悩まされていました。セッションが短いと、こうなるそうです。
/etc/cron.d/php5 を以下のように修正して解決しました。
修正前
 09,39 * * * * root [ -x /usr/lib/php5/maxlifetime ] &amp;&amp; [ -d /var/lib/php5 ] &amp;&amp; find /var/lib/php5/ -type f -cmin +$(/usr/lib/php5/maxlifetime) -print0 | xargs -n 200 -r -0 rm
修正後
00 6 10,20,30 * * root [ -x /usr/lib/php5/maxlifetime ] &amp;&amp; [ -d /var/lib/php5 ] &amp;&amp; find /var/lib/php5/ -type f -cmin +$(/usr/lib/php5/maxlifetime) -print0 | xargs -n 200 -r -0 rm]]></description>
        </item>
        <item>
            <title><![CDATA[StatusNet インストーラのバグ]]></title>
            <link>https://masutaka.net/2010-04-29-3/</link>
            <guid>https://masutaka.net/2010-04-29-3/</guid>
            <pubDate>Thu, 29 Apr 2010 02:00:00 GMT</pubDate>
            <description><![CDATA[[2010-04-18-1] の補完。
後日ネットを彷徨っていたら、こんなページ を見つけました。(良く知った
方もいらっしゃいます。)
どうやら statusnet-0.9.1 のインストーラにはバグがあるようです。ただ
し PHP のバージョンによっては発生しないそうです。実際 5.3.2-1 で発
生しましたが、5.2.6-1+lenny では発生しませんでした。
インストールが途中で止まった 5.3.2-1 はその後も
/var/log/apache2/error.log にこんなログが吐かれ続けていました。
 [Sun Apr 25 14:42:15 2010] [error] [client 192.168.1.11] PHP Warning: Parameter 1 to RSSCloudPlugin::onRouterInitialized() expected to be a reference, value given in /var/www/statusnet/lib/event.php on line 105
 気持ち悪いので、前述のページからリンクされていた以下のパッチを当て
ました。
--- orig/statusnet-0.9.1/plugins/RSSCloud/RSSCloudPlugin.php	2010-03-29 00:39:56.000000000 +0900 +++ statusnet-0.9.1/plugins/RSSCloud/RSSCloudPlugin.php	2010-04-25 16:48:46.000000000 +0900 @@ -105,7 +105,7 @@ * @return boolean hook return */ - function onRouterInitialized(&amp;$m) + function onRouterInitialized($m) { $m-&gt;connect(&#39;/main/rsscloud/request_notify&#39;, array(&#39;action&#39; =&gt; &#39;RSSCloudRequestNotify&#39;)); 追記(2010-05-08):]]></description>
        </item>
        <item>
            <title><![CDATA[StatusNet のおかしな日本語]]></title>
            <link>https://masutaka.net/2010-04-29-2/</link>
            <guid>https://masutaka.net/2010-04-29-2/</guid>
            <pubDate>Thu, 29 Apr 2010 01:00:00 GMT</pubDate>
            <description><![CDATA[例えば誰かにフォローされるとこんな件名のメールが飛んできます。
 誰かさん は StatusNet であなたのつぶやきを聞いています。
 ちょっと気持ち悪いです&hellip;。
locale/ja/LC_MESSAGES/statusnet.po にはこのように書いてありました。
翻訳ソフトか何かを使ったのでしょうか。
 msgid &ldquo;%1$s is now listening to your notices on %2$s.&rdquo;
msgstr &ldquo;%1$s は %2$s であなたのつぶやきを聞いています。&rdquo;
 以下に変更し、
 msgstr &ldquo;%1$s は %2$s であなたをフォローしました。&rdquo;
msgfmt コマンドで .mo ファイルに変換しました。
% msgfmt -o statusnet.mo statusnet.po
 ※ Debian Lenny では msgfmt は gettext パッケージに含まれています。]]></description>
        </item>
        <item>
            <title><![CDATA[Git コマンドまとめ]]></title>
            <link>https://masutaka.net/2010-04-29-1/</link>
            <guid>https://masutaka.net/2010-04-29-1/</guid>
            <pubDate>Thu, 29 Apr 2010 00:00:00 GMT</pubDate>
            <description><![CDATA[個人的なメモ。ページ番号は「入門 Git」より。
P21
# グローバル変数の確認 % git config --global --list # グローバル変数に自分の名前とメールアドレスを追加 % git config --global user.name &#34;Takashi Masuda&#34; % git config --global user.email &#34;masutaka.net@gmail.com&#34; # 大半の出力に色づけ % git config --global color.ui true # グローバル変数とローカル変数の確認 % git config --list P42
# コミットのための対話的なステージング % git add -i % git pull % git pull git://github.com/hayamiz/twittering-mode.git master git pull と同じ意味
% git fetch % git merge origin/master % git push --dry-run git@github.com:masutaka/twittering-mode.git % git push git@github.]]></description>
        </item>
        <item>
            <title><![CDATA[Firefox アドオン KeySnail から StatusNet を使おう]]></title>
            <link>https://masutaka.net/2010-04-23-1/</link>
            <guid>https://masutaka.net/2010-04-23-1/</guid>
            <pubDate>Fri, 23 Apr 2010 00:00:00 GMT</pubDate>
            <description><![CDATA[[2010-04-18-7] の補完です。
statusnet は http://example.com/statusnet/ に構築し、
[2010-04-18-3] の Fancy URLs の設定を行ったものとします。
KeySnail でツイートすることも出来ます。以下を .keysnail.js にコピペ
すれば、&ldquo;C-c t&rdquo; または &ldquo;C-c C-t&rdquo; でツイートできます。
key.setGlobalKey([[&#39;C-c&#39;, &#39;t&#39;], [&#39;C-c&#39;, &#39;C-t&#39;]], function (aEvent) { prompt.read(&#34;tweet:&#34;, function (aTweet) { var username = &#34;アカウント&#34;; var password = &#34;パスワード&#34;; var xhr = new XMLHttpRequest; xhr.open(&#34;POST&#34;, &#34;http://example.com/statusnet/api/statuses/update.json&#34;, false, username, password); xhr.setRequestHeader(&#34;Content-Type&#34;, &#34;application/x-www-form-urlencoded&#34;); xhr.setRequestHeader(&#34;X-Twitter-Client&#34;, &#34;KeySnail&#34;); xhr.setRequestHeader(&#34;X-Twitter-Client-Version&#34;, &#34;0.1&#34;); xhr.send(&#34;status=&#34; + aTweet); }); }, &#39;Twitter投稿&#39;); いろんな意味で本家の &ldquo;C-c t&rdquo; に遠く及ばないです。とりあえずツイート
出来るよといったレベルです。&ldquo;C-c T&rdquo; の「このページのタイトルと URL]]></description>
        </item>
        <item>
            <title><![CDATA[Firefox アドオン Identifox から StatusNet を使おう]]></title>
            <link>https://masutaka.net/2010-04-18-7/</link>
            <guid>https://masutaka.net/2010-04-18-7/</guid>
            <pubDate>Sun, 18 Apr 2010 06:00:00 GMT</pubDate>
            <description><![CDATA[StatusNet のデモサイト https://identi.ca/ 用のクライアント
Identifox を少し修正すると、イントラネットに構築した StatusNet でも
使えます。
statusnet は http://example.com/statusnet/ に構築し、
[2010-04-18-3] の Fancy URLs の設定を行ったものとします。
Identifox  Firefox 用アドオンです。ある時点の Ecofon を StatusNet 用にポーティ
ングしたようです。
https://identi.ca/api/ がハードコーディングされているので、
identifox-0.9-fx.xpi を zip 伸長し、以下のような修正を加え、
また zip 圧縮します。
--- orig/identifox-0.9-fx/components/nsIdenticaNotifier.js	2009-03-09 03:15:06.000000000 +0900 +++ identifox-0.9-fx/components/nsIdenticaNotifier.js	2010-04-18 17:18:38.000000000 +0900 @@ -17,7 +17,7 @@ var insert_status_stmt = null; var find_status_stmt = null; -const IDENTICA_API_URL = &#34;https://identi.ca/api/&#34;; +const IDENTICA_API_URL = &#34;http://example.com/statusnet/api/&#34;; const NETWORK_TIMEOUT_TIME = 120; const APP_NAME = &#34;IdentiFox&#34;; 他にも KeySnail や twittering-mode が使えそうですが、まだ調査中です。]]></description>
        </item>
        <item>
            <title><![CDATA[StatusNet クリーンルーム特有の問題]]></title>
            <link>https://masutaka.net/2010-04-18-6/</link>
            <guid>https://masutaka.net/2010-04-18-6/</guid>
            <pubDate>Sun, 18 Apr 2010 05:00:00 GMT</pubDate>
            <description><![CDATA[StatusNet は一部、インターネットサービスにアクセスする箇所があるの
で、私がクリーンルームに設置した時はいくつかエラーが発生しました。
参考までに、情報と対策をまとめておきます。
インストール時に以下のエラーが発生。 Install StatusNet ・Starting installation... ・Checking database... ・Changing to database... ・Running database script... ・Adding SMS carrier data to database... ・Adding notice source data to database... ・Adding foreign service data to database... ・Writing config file... Fatal error: Call to undefined method Ostatus_profile::ensureprofile() in /var/www/statusnet/install.php on line 907 http://update.status.net/ へのアクセスを試みるためのようです。イン
ストールの最後のフェーズなので対策は不要ですが、気になる人は以下の
パッチを当ててからインストールすると良いと思います。
--- orig/statusnet-0.9.1/install.php	2010-03-29 00:39:56.000000000 +0900 +++ statusnet-0.9.1/install.php	2010-04-14 13:00:19.000000000 +0900 @@ -898,19 +898,6 @@ $user-&gt;grantRole(&#39;owner&#39;); $user-&gt;grantRole(&#39;moderator&#39;); $user-&gt;grantRole(&#39;administrator&#39;); - - // Attempt to do a remote subscribe to update@status.]]></description>
        </item>
        <item>
            <title><![CDATA[StatusNet SMTP の設定]]></title>
            <link>https://masutaka.net/2010-04-18-5/</link>
            <guid>https://masutaka.net/2010-04-18-5/</guid>
            <pubDate>Sun, 18 Apr 2010 04:00:00 GMT</pubDate>
            <description><![CDATA[フォローされた時や、お気に入りに追加された時に、ユーザにメール通知
されるようになるので、SMTP の設定をすると良いでしょう。パスワードを
忘れた時にユーザが再発行手続きを行えるので、メンテナンスコストも下
がります。
以下は認証なしの SMTP サーバの場合です。config.php に追記します。
// Email info, used for all outbound email $config[&#39;mail&#39;][&#39;notifyfrom&#39;] = &#39;noreply@example.com&#39;; // Domain for generating no-reply and incoming email addresses, if enabled. // Defaults to site server name. $config[&#39;mail&#39;][&#39;domain&#39;] = &#39;example.com&#39;; // See http://pear.php.net/manual/en/package.mail.mail.factory.php for options $config[&#39;mail&#39;][&#39;backend&#39;] = &#39;smtp&#39;; $config[&#39;mail&#39;][&#39;params&#39;] = array( &#39;host&#39; =&gt; &#39;SmtpServerName&#39;, &#39;port&#39; =&gt; 25, ); $config[&lsquo;mail&rsquo;][&rsquo;notifyfrom&rsquo;] は StatusNet が送るメールの From: に
なります。適当に設定してください。
私が設置したクリーンルームでは、メールヘッダが常に文字化けしてしま
いました。メールサーバが怪しげな変換をしているようなんですが、そも
そも StatusNet がメールヘッダの MIME ENCODE をしていないことが原因]]></description>
        </item>
        <item>
            <title><![CDATA[StatusNet のカスタマイズ]]></title>
            <link>https://masutaka.net/2010-04-18-4/</link>
            <guid>https://masutaka.net/2010-04-18-4/</guid>
            <pubDate>Sun, 18 Apr 2010 03:00:00 GMT</pubDate>
            <description><![CDATA[設定はある程度 Web から出来ますが、出来ない設定も多いです。
そんな場合は config.php を修正しましょう。
私は以下の設定をしました。
 $config[&lsquo;attachments&rsquo;][&lsquo;uploads&rsquo;] = false;
→必要になったら ON にすれば良いと思うので、添付ファイルは OFF にし
ました。
  $config[&rsquo;location&rsquo;][&lsquo;share&rsquo;] = &rsquo;never&rsquo;;
→ツイートしたときに、常に「狛江市, 東京都, 日本」と挿入されるので
OFF にしました。今回設置したのはクリーンルームだったので、そもそも
位置情報が不要です。
 その他の設定は config.php.sample が参考になると思います。ただ、ここ
にも載っていない設定があるので、*.php を common_config 等で grep す
る必要があるかもしれません。]]></description>
        </item>
        <item>
            <title><![CDATA[StatusNet Fancy URLs の設定]]></title>
            <link>https://masutaka.net/2010-04-18-3/</link>
            <guid>https://masutaka.net/2010-04-18-3/</guid>
            <pubDate>Sun, 18 Apr 2010 02:00:00 GMT</pubDate>
            <description><![CDATA[Fancy URLs を設定すると、URL から index.php がなくなります。
クールな URL を実現するためにも、是非設定しましょう。
設定は比較的簡単です。
1. .htaccess を作成します。
statusnet 直下の htaccess.sample を .htaccess という名前で保存し、
修正します。以下は http://example.com/statusnet/ というサイトの場合です。
--- /var/www/statusnet/htaccess.sample	2010-03-29 00:39:56.000000000 +0900 +++ /var/www/statusnet/.htaccess	2010-04-13 01:36:37.000000000 +0900 @@ -7,7 +7,7 @@ # http://example.com/ =&gt; / # http://example.com/mublog/ =&gt; /mublog/ # - RewriteBase /mublog/ + RewriteBase /statusnet/ ## Uncomment these if having trouble with API authentication ## when PHP is running in CGI or FastCGI mode. http://example.]]></description>
        </item>
        <item>
            <title><![CDATA[StatusNet のログイン画面を日本語にする]]></title>
            <link>https://masutaka.net/2010-04-18-2/</link>
            <guid>https://masutaka.net/2010-04-18-2/</guid>
            <pubDate>Sun, 18 Apr 2010 01:00:00 GMT</pubDate>
            <description><![CDATA[Admin → Site の Default language を日本語にするだけではログイン画
面は日本語になりませんでした。ブラウザ側の言語設定によるそうですが、
少なくとも Firefox-3.5.8 は日本語になりませんでした。
language.php を修正します。すぐにログイン画面が日本語になります。
--- orig/statusnet-0.9.1/lib/language.php	2010-03-29 00:39:56.000000000 +0900 +++ statusnet-0.9.1/lib/language.php	2010-04-12 13:20:56.000000000 +0900 @@ -307,6 +307,7 @@ &#39;ia&#39; =&gt; array(&#39;q&#39; =&gt; 0.8, &#39;lang&#39; =&gt; &#39;ia&#39;, &#39;name&#39; =&gt; &#39;Interlingua&#39;, &#39;direction&#39; =&gt; &#39;ltr&#39;), &#39;is&#39; =&gt; array(&#39;q&#39; =&gt; 0.1, &#39;lang&#39; =&gt; &#39;is&#39;, &#39;name&#39; =&gt; &#39;Icelandic&#39;, &#39;direction&#39; =&gt; &#39;ltr&#39;), &#39;it&#39; =&gt; array(&#39;q&#39; =&gt; 1, &#39;lang&#39; =&gt; &#39;it&#39;, &#39;name&#39; =&gt; &#39;Italian&#39;, &#39;direction&#39; =&gt; &#39;ltr&#39;), + &#39;ja&#39; =&gt; array(&#39;q&#39; =&gt; 0.]]></description>
        </item>
        <item>
            <title><![CDATA[StatusNet の構築]]></title>
            <link>https://masutaka.net/2010-04-18-1/</link>
            <guid>https://masutaka.net/2010-04-18-1/</guid>
            <pubDate>Sun, 18 Apr 2010 00:00:00 GMT</pubDate>
            <description><![CDATA[[2010-04-11-1] の補完。
Debian squeeze でのイントラネット版 Twitter「StatusNet」の構築方法
をまとめます。
構築の前に StatusNet は PHP で書かれているので、以下のような基本的な PHP スク
リプトが Web サーバ上で動くことを確認しておきます。
&lt;?php phpinfo(); ?&gt; 構築手順 ※ &ldquo;#&rdquo; は root での作業、&quot;%&quot; は一般ユーザでの作業です。
1. http://status.net/ から tar ball を落とし、/var/www に展開します。 # cd /var/www # tar xzf statusnet-0.9.1.tar.gz 2. リネームします。 # mv statusnet-0.9.1 statusnet 3. アクセス権を適切に設定します。 # cd statusnet # chown -R root:root . # chown www-data:www-data . avatar background file 4. MySQL の DB を作成します。 % mysql -u root -p Enter password: Welcome to the MySQL monitor.]]></description>
        </item>
        <item>
            <title><![CDATA[Debian squeeze での mod_rewrite 有効方法]]></title>
            <link>https://masutaka.net/2010-04-13-1/</link>
            <guid>https://masutaka.net/2010-04-13-1/</guid>
            <pubDate>Tue, 13 Apr 2010 00:00:00 GMT</pubDate>
            <description><![CDATA[http://localhost/hoge/ で .htaccess から mod_rewrite を使う方法。
root になって a2enmod で有効にする。
# a2enmod rewrite これだけで使えない場合は、.htaccess の読み込みが許可されていない場
合が多い。というか私がそうだった。
/etc/apache2/sites-available/default を以下のように修正。
修正前
&lt;Directory /var/www/&gt; Options Indexes FollowSymLinks MultiViews AllowOverride None Order allow,deny allow from all &lt;/Directory&gt; 修正後
&lt;Directory /var/www/&gt; Options Indexes FollowSymLinks MultiViews AllowOverride FileInfo Options Order allow,deny allow from all &lt;/Directory&gt; .htaccess が読み込まれているか否かは、必ずエラーが発生する内容にし
て試せば良いと思う。
mod_rewrite とは関係なくなってしまうが、.htaccess の以下のような
Order を許可するには AllowOverride の行に Limit を続けて書けば良い。
&lt;FilesMatch &#34;\.(ini)&#34;&gt; Order allow,deny &lt;/FilesMatch&gt; 参考情報: AllowOverride ディレクティブ - Apache コア機能 ]]></description>
        </item>
        <item>
            <title><![CDATA[「しゃべる」と「StatusNet」を比較した]]></title>
            <link>https://masutaka.net/2010-04-11-1/</link>
            <guid>https://masutaka.net/2010-04-11-1/</guid>
            <pubDate>Sun, 11 Apr 2010 00:00:00 GMT</pubDate>
            <description><![CDATA[某所で「社内マイクロブログ しゃべる 」をテスト稼働していますが、不満
な点があるので @fortunan オススメの「StatusNet 」を試してみました。
どちらもいわゆるイントラネット版 Twitter です。
まずは両者の比較です。
    しゃべる StatusNet     言語 Java PHP   データベース しゃべる付属の MySQL MySQL or pgsql   インストール パッケージ(msi,rpm,deb)から tar ball を展開し、Web サーバ上で動作させる   ユーザ登録 管理者権限で作成 ユーザ権限でも作成可(※1)   まとめてユーザ登録 csv からインポート可能 ユーザが自由に作れるので、実質必要なし   言語対応 日本語のみサポート 多言語サポート   検索 出来ない(※2) 出来るが、日本語検索がやや怪しい   ReTweet 非サポート 公式 RT が出来る   ハッシュタグ 非サポート サポート   開発状況 2009.]]></description>
        </item>
        <item>
            <title><![CDATA[C でクロージャ]]></title>
            <link>https://masutaka.net/2010-03-30-1/</link>
            <guid>https://masutaka.net/2010-03-30-1/</guid>
            <pubDate>Tue, 30 Mar 2010 00:00:00 GMT</pubDate>
            <description><![CDATA[gcc 拡張を使うと、関数の中に関数を定義することができる。これを利用する
と C でもクロージャが使えることを少し前に知ったが、
loading...
   if (localStorage.getItem("pref-theme") === "light") { const elements = document.getElementsByClassName('twitter-tweet'); for (let i = 0; i  ようやく理解できた&hellip;気がする。
クロージャとは C 言語のコールバック関数に近いが、引数以外の変数を自身が定義された静的
スコープで解決することが最大の特徴。
&hellip;だと理解しています。^^;
コーディング例 #include &lt;stdio.h&gt; /* 任意の関数 func を n 回実行するだけのライブラリ関数 */ void dolist(void (*func)(void), int n) { int i; for(i = 0; i &lt; n; i++) { func(); } return; } int main(void) { int level = 0; void lambda(void) { level++; } printf(&#34;%d\n&#34;, level); dolist(lambda, 1); printf(&#34;%d\n&#34;, level); dolist(lambda, 2); printf(&#34;%d\n&#34;, level); dolist(lambda, 3); printf(&#34;%d\n&#34;, level); return 0; } 結果  0]]></description>
        </item>
        <item>
            <title><![CDATA[『池袋ウエストゲートパーク』を読んだ]]></title>
            <link>https://masutaka.net/2010-03-22-1/</link>
            <guid>https://masutaka.net/2010-03-22-1/</guid>
            <pubDate>Mon, 22 Mar 2010 00:00:00 GMT</pubDate>
            <description><![CDATA[@kanatinxx から借りた。
最初のドーベルマンのエピソードで引いた。。こういうアングラな話は、
読んでてお腹いっぱいになるなあ。]]></description>
        </item>
        <item>
            <title><![CDATA[『東京奇譚集』を読んだ]]></title>
            <link>https://masutaka.net/2010-03-17-2/</link>
            <guid>https://masutaka.net/2010-03-17-2/</guid>
            <pubDate>Wed, 17 Mar 2010 01:00:00 GMT</pubDate>
            <description><![CDATA[『回転木馬のデッド・ヒート』の次に読んだのは正解だった。こちらはよ
り小説に近くなっている。「偶然の旅人」「ハナレイ・ベイ」のもの悲し
さが好き。「どこであれそれが見つかりそうな場所で」これは氏の他の小
説と比べて意外な展開で楽しめた。]]></description>
        </item>
        <item>
            <title><![CDATA[『回転木馬のデッド・ヒート』を読んだ]]></title>
            <link>https://masutaka.net/2010-03-17-1/</link>
            <guid>https://masutaka.net/2010-03-17-1/</guid>
            <pubDate>Wed, 17 Mar 2010 00:00:00 GMT</pubDate>
            <description><![CDATA[登場人物をリセットしながら読むのが苦手なので短編はあまり読まないけ
ど、これは読みやすかった。インタビューに近い構成を取っているためだ
と思う。ただ、聞いたそのままを文章にしているわけではない。「昼飯に
ハムとキュウリのサンドイッチを作って食べ、ビールを一缶飲んだ。」こ
のあたりは間違いなく村上アレンジ。]]></description>
        </item>
        <item>
            <title><![CDATA[Emacs で現在の日時付きの名前でバックアップしてからセーブする]]></title>
            <link>https://masutaka.net/2010-03-13-2/</link>
            <guid>https://masutaka.net/2010-03-13-2/</guid>
            <pubDate>Sat, 13 Mar 2010 01:00:00 GMT</pubDate>
            <description><![CDATA[例えば「昨日まで書いてあったんだけど、もうあの内容は消しちゃったな
あ」ということは良くあると思います。
ずいぶん前から「現在の日時付きの名前で ~/.trash にバックアップして
から、セーブする関数」を使っています。結構便利です。ファイルは無限
に増えるので、cron 等で削除して下さい。
(defvar renban-copy-directory &#34;~/.trash&#34; &#34;The directory for renban-copy.&#34;) (defvar renban-copy-upper-limit-size (* 512 1024) &#34;The upper limit of the file size for renban-copy.&#34;)  (defun renban-copy ()  &#34;現在のバッファに対応するファイルを filename.year-date-time という 書式で `renban-copy-directory&#39; にコピーします。 `renban-copy-upper-limit-size&#39; より大きなサイズのファイルはコピー しません。&#34;  (unless renban-copy-directory  (error &#34;%s is nil.&#34; (symbol-name &#39;renban-copy-directory)))  (let ((srcname buffer-file-name) 	(dir (expand-file-name renban-copy-directory)) 	(dir-mode #o2700) 	dstname)  (when (and srcname 	(file-exists-p srcname) 	(buffer-modified-p) 	(&lt;= (nth 7 (file-attributes srcname)) 	renban-copy-upper-limit-size))  (unless (file-exists-p dir) 	(make-directory dir t))  (unless (eq dir-mode (file-modes dir)) 	(set-file-modes dir dir-mode))  (setq dstname 	(expand-file-name 	(concat 	(file-name-nondirectory srcname) 	&#34;.]]></description>
        </item>
        <item>
            <title><![CDATA[ver22 までの Emacs で、物理行単位にカーソル移動する方法]]></title>
            <link>https://masutaka.net/2010-03-13-1/</link>
            <guid>https://masutaka.net/2010-03-13-1/</guid>
            <pubDate>Sat, 13 Mar 2010 00:00:00 GMT</pubDate>
            <description><![CDATA[[2009-01-20-1] の補完。
ver22 までの Emacs のカーソル移動は論理行単位なので、こんなのを使っ
てます。時々移動がミスりますが、そこはご愛嬌ということで。
(defvar vz-goal-column 0 &#34;Vz風ゴールカラム&#34;)  (defvar vz-enable-p t &#34;*Enable the physical moving.&#34;)  (defun toggle-variable (var)  &#34;Toggle &#39;(symbol-value var)&#39;.&#34;  (set var (not (symbol-value var)))  (message &#34;&#39;%s&#39; is now &#39;%s&#39;&#34; 	(symbol-name var) (symbol-value var)))  (defun vz-toggle-vz-enable-p ()  &#34;Toggle &#39;vz-enable-p&#39;.&#34;  (interactive)  (toggle-variable &#39;vz-enable-p))  (defun vz-next-line (num)  &#34;Vz:↓&#34;  (interactive &#34;p&#34;)  (if (or (not vz-enable-p) truncate-lines)  (next-line num)  (or (eq last-command &#39;vz-next-line) 	(setq vz-goal-column (% (current-column) (1- (window-width)))))  (if (eolp) 	(progn 	(forward-char 1) 	(move-to-column vz-goal-column))  (vertical-motion num)  (move-to-column (+ vz-goal-column (current-column))))))  (defun vz-previous-line (num)  &#34;Vz:↑&#34;  (interactive &#34;p&#34;)  (if (not vz-enable-p)  (previous-line num)  (if truncate-lines 	(previous-line num)  (or (eq last-command &#39;vz-next-line) 	(setq vz-goal-column (% (current-column) (1- (window-width)))))  (let ((ncol (- vz-goal-column (window-width) -1))) 	(vertical-motion (- num)) 	(if (&lt;= 0 ncol) 	(move-to-column ncol) 	(move-to-column (+ vz-goal-column (current-column))))))  (setq this-command &#39;vz-next-line))) ;fake 情報源:]]></description>
        </item>
        <item>
            <title><![CDATA[『幽霊人命救助隊』を読んだ]]></title>
            <link>https://masutaka.net/2010-03-07-1/</link>
            <guid>https://masutaka.net/2010-03-07-1/</guid>
            <pubDate>Sun, 07 Mar 2010 00:00:00 GMT</pubDate>
            <description><![CDATA[[2009-09-19-1] 購入。職場の上司が勧めてくれた本。鬱や自殺について考
えるには良い本。ユーモアもある。ただ、前半のテンポは私には悪く感じ
た。普段長編ばかり読むので、このオムニバス風の話に慣れていないのも
あると思うが。４人のメガホンは読者に向けられていたんだと、最後の方
になって気づいた。作者はとにかく死ぬな死ぬなと、読者にメッセージを
出しつづけている。「未来が定まっていない以上、すべての絶望は勘違い
である」これは確かに名言。]]></description>
        </item>
        <item>
            <title><![CDATA[IP 電話への移行を検討しました]]></title>
            <link>https://masutaka.net/2010-03-06-1/</link>
            <guid>https://masutaka.net/2010-03-06-1/</guid>
            <pubDate>Sat, 06 Mar 2010 00:00:00 GMT</pubDate>
            <description><![CDATA[今ある固定電話は大学に入ったときに契約したのですが、ほとんど使うこ
とはありません。にも関わらず毎月￥1,800も払うのは無駄だと思ったので、
IP 電話への以降を検討しました。
加入することになるサービス 私は @nifty ひかり One T シリーズ に加入していました。(今見たら、
2011 年 9 月でサービス終了って書いてある&hellip;。)
ひかり One T シリーズの場合、@niftyフォン-C に加入することになるら
しいです。
お得な料金 月額料金は @niftyフォン-C の方が安いです。
    月額料金 機器レンタル料金     NTT 1740円 0円   @niftyフォン-C 0円 525円    川崎〜浜松間の通話料金も、@niftyフォン-C の方が安いです。IP 電話に
すると、かける側もかけられる側も安くなるのですね。
    平日 19:00〜23:00 の浜松への通話 平日 19:00〜23:00 の浜松からの通話     NTT 73.5円 &lt;26秒&gt; 73.5円 &lt;26秒&gt;   @niftyフォン-C 8.]]></description>
        </item>
        <item>
            <title><![CDATA[加湿空気清浄機を買いました]]></title>
            <link>https://masutaka.net/2010-03-03-1/</link>
            <guid>https://masutaka.net/2010-03-03-1/</guid>
            <pubDate>Wed, 03 Mar 2010 00:00:00 GMT</pubDate>
            <description><![CDATA[[2009-11-03-1] で発生したエコポイントを JCB ギフトカードと交換した
ので、空気清浄機を買うことにしました。
今回もあまり下調べはしませんでした。
たつをさんの記事を鵜呑みにして、SHARP の加湿空気清浄機を買いました。
[を] シャープの加湿空気清浄機を導入しました SHARP KIREION 加湿空気清浄機 高濃度7000プラズマクラスター技術	加湿13畳/空清21畳 ホワイト系 KC-Y45-W  他のメーカーと比べて、SHARP はデザインが良いですね。
今まで加湿したい時は洗濯物を干していましたが、これからはお手軽に加
湿出来そうです。
元々空気が汚い部屋ではなかったようで、空気清浄の効果は良く分かりま
せん。しかし、買った翌日から朝の目覚めが良くなりました。深く眠れる
ようになったのかもしれません。]]></description>
        </item>
        <item>
            <title><![CDATA[ATOK スペシャルサンクスの表示方法]]></title>
            <link>https://masutaka.net/2010-02-06-1/</link>
            <guid>https://masutaka.net/2010-02-06-1/</guid>
            <pubDate>Sat, 06 Feb 2010 00:00:00 GMT</pubDate>
            <description><![CDATA[以下の操作で、ATOK のベータテストに協力した人リストが見られます。
先日発売された ATOK2010 で表示できました。
 ATOKパレットを右クリックします。
2)［ヘルプ(H)−バージョン情報(A)］をクリックします。バージョン情報
ダイアログボックスが表示されます。 画面左上のATOKアイコンを［Ctrl］キーを押しながら、ダブルクリック
します。
→ATOK スペシャルサンクス画面が表示されます。  ]]></description>
        </item>
        <item>
            <title><![CDATA[gpg で暗号化されたファイルを Emacs で開いてもパスフレーズを聞かれない方法]]></title>
            <link>https://masutaka.net/2010-02-04-1/</link>
            <guid>https://masutaka.net/2010-02-04-1/</guid>
            <pubDate>Thu, 04 Feb 2010 00:00:00 GMT</pubDate>
            <description><![CDATA[Mew スレで紹介されていた ので、メモメモ。
いつからなのか分かりませんが、少なくとも Emacs23 では gpg で暗号化
されたファイルを開くとパスフレーズを聞かれ、gpg コマンドを打たずし
てファイルを開くことが出来ます。ファイル保存時には、パスフレーズを
また聞かれます。また入力します。
そう、ファイルを保存する時にも聞かれてしまうんです。
一方、外部パッケージに、alpaca.el というものがあります。これは保存
時にはパスフレーズを聞かない優れものです。
しかし、Emacs23 で alpaca.el を使うと、gpg なファイルを開く時に
2 回パスフレーズを聞かれてしまいます。そういうわけで alpaca.el は
しばらく使っていませんでした。
この度、やっと Emacs 標準の機能の OFF のやり方が分かりました。.emacs
に以下を書くだけです。
(epa-file-disable) interactive な関数なので、M-x で呼ぶことも出来ます。
当然というかなんというか、epa-file-enable() もありました。
先行者がいらっしゃいました&hellip;。
epa(EasyPG Assistant)を無効にする方法 - koie blog ]]></description>
        </item>
        <item>
            <title><![CDATA[『ファイナルファンタジーXIII アルティマニア』を読んだ]]></title>
            <link>https://masutaka.net/2010-01-31-1/</link>
            <guid>https://masutaka.net/2010-01-31-1/</guid>
            <pubDate>Sun, 31 Jan 2010 00:00:00 GMT</pubDate>
            <description><![CDATA[Amazon でつい、ポチッとしてしまいました。。。]]></description>
        </item>
        <item>
            <title><![CDATA[Emacs のソースコードを Bazaar から取得してみた]]></title>
            <link>https://masutaka.net/2010-01-17-1/</link>
            <guid>https://masutaka.net/2010-01-17-1/</guid>
            <pubDate>Sun, 17 Jan 2010 00:00:00 GMT</pubDate>
            <description><![CDATA[[2009-09-27-1] の補完。
Emacs リポジトリが Git に移行したと思っていましたが、Git でも 取
得できるようになっていただけなのですね。年末に CVS から Bazaar に移
行したらしい ので、手元のリポジトリも移行しました。Bazaar は Git と
同じ分散型バージョン管理システムだそうです。
Debian では bzr をインストールすると、Bazaar が使えるようになります。
 最初にユーザ登録する必要があるそうです。  % bzr whoami &#34;Takashi Masuda &lt;masutaka.net@gmail.com&gt;&#34; Bazaar チェックアウト用のディレクトリ emacs を作成します。  % bzr init-repo --2a emacs チェックアウトします。私の環境では 30 分くらいかかりました。  % cd emacs % bzr checkout http://bzr.savannah.gnu.org/r/emacs/trunk trunk Bazaar については全然調べていないのでアレですが、とりあえず
&ldquo;bzr update&rdquo; すればリポジトリ先端のソースを取得できるようです。
参考 URL
Emacs のリポジトリが Bazaar に移行したので Bazaar をインストールする。 - 日々、とんは語る。 EmacsWiki: Bzr For Emacs Devs ]]></description>
        </item>
        <item>
            <title><![CDATA[KeySnail で IME を ON/OFF する方法]]></title>
            <link>https://masutaka.net/2010-01-11-1/</link>
            <guid>https://masutaka.net/2010-01-11-1/</guid>
            <pubDate>Mon, 11 Jan 2010 00:00:00 GMT</pubDate>
            <description><![CDATA[私は Windows でのキーバインドを Emacs 風にするために XKeymacs を使っ
ています。IME の ON/OFF は Alt-l(エル) という変則的なものにしています。
Firefox で KeySnail を使おうとすると、XKeymacs を OFF にする必要が
ありますが、KeySnail にはデフォルトで IME を ON/OFF するコマンドは
用意されていません。
そういう理由から、Windows 版の Firefox では KeySnail を使っていなかっ
たのですが、Twitter でつぶやいたら作者さんから以下のコードを教えて
もらいました。
key.setEditKey(&#34;M-l&#34;, function (ev, arg) { let elem = ev.originalTarget; elem.style.imeMode = { active : &#34;inactive&#34;, inactive : &#34;active&#34; }[elem.style.imeMode] || &#34;active&#34;; elem.blur(); elem.focus(); }, &#34;Toggle IME&#34;, true); .keysnail.js に記載し、再読み込みしたら Alt-l で IME の ON/OFF が出来]]></description>
        </item>
        <item>
            <title><![CDATA[『白夜行』を読んだ]]></title>
            <link>https://masutaka.net/2010-01-02-1/</link>
            <guid>https://masutaka.net/2010-01-02-1/</guid>
            <pubDate>Sat, 02 Jan 2010 00:00:00 GMT</pubDate>
            <description><![CDATA[@kanatinxx から借りた。
おもしろかった。ただ最後はちょっと雑だったかな。]]></description>
        </item>
        <item>
            <title><![CDATA[flv から音声を抜き出す方法]]></title>
            <link>https://masutaka.net/2009-12-20-1/</link>
            <guid>https://masutaka.net/2009-12-20-1/</guid>
            <pubDate>Sun, 20 Dec 2009 00:00:00 GMT</pubDate>
            <description><![CDATA[Flash Video から音声を抽出して、mp3 にする方法です。
ffmpeg がインストールされていなかったら、Synaptic パッケージマネー
ジャや、aptitude でインストールします。
あとは以下のコマンドを実行するだけです。hoge.flv の音声が hoge.mp3
として抽出されます。
% ffmpeg -i hoge.flv -acodec copy hoge.mp3 ↓これを抽出したかったんです。(^^)
 【作業用BGM】FFⅠ～Ⅵノンストップバトルアレンジメドレー 参考 URL: Linuxでflvからmp3へ変換する方法 - よしみ視点 関連記事: swf から音声を抜き出す方法 [2009-07-10-2] ]]></description>
        </item>
        <item>
            <title><![CDATA[タイムスタンプを変えずに文字コードを変換する方法]]></title>
            <link>https://masutaka.net/2009-12-17-1/</link>
            <guid>https://masutaka.net/2009-12-17-1/</guid>
            <pubDate>Thu, 17 Dec 2009 00:00:00 GMT</pubDate>
            <description><![CDATA[必要になって調べたので、メモメモ。
以下の例では、hoge.txt のタイムスタンプを変えずに UTF-8 に変換している。
#!/bin/sh FILE=hoge.txt TIMESTAMP=`ls -d -l --time-style=full-iso $FILE | awk &#39;{print $6 &#34; &#34; $7 }&#39;` echo $FILE mv $FILE ${FILE}.bak nkf -w ${FILE}.bak &gt; $FILE rm ${FILE}.bak touch -d &#34;$TIMESTAMP&#34; $FILE ]]></description>
        </item>
        <item>
            <title><![CDATA[Subject も本文も存在しないメールはスパムフォルダに振り分け]]></title>
            <link>https://masutaka.net/2009-12-13-1/</link>
            <guid>https://masutaka.net/2009-12-13-1/</guid>
            <pubDate>Sun, 13 Dec 2009 00:00:00 GMT</pubDate>
            <description><![CDATA[最近 1 日に 10 通程度、毎回違う From で Subject も本文も存在しない
スパムが来るのですが、bsfilter で捕捉できません。仕方がないので、そ
のようなメールは問答無用でスパムフォルダに振り分けることにしました。
以下が ~/.procmailrc のレシピです。touch しているのは、Mew でスパム
フォルダを訪問した時に自動でスキャンを走らせるためです。
PATH=${HOME}/bin:${PATH} MAILDIR=${HOME}/Mail :0 * !^Subject: { :0 HB: * ? mail-body-empty * ? touch ${MAILDIR}/spam/.mew-mtime ${MAILDIR}/spam/. } mail-body-empty は自作の Ruby スクリプトです。~/bin に置きました。
以下にコピペします。
#!/usr/bin/ruby  # 標準入力から渡されたメールの本文が空だったら 0、空でなかったら 0 以外を返す。 # メール本文が空行のみ、または空行の連続を「空」と定義する。  mode = :header  STDIN.each do |line|   case mode  when :header  if /^$/ =~ line  mode = :body  end  when :body  unless /^$/ =~ line  exit 1  end  end  end  exit 0  ### End of file 最初は &ldquo;* ?]]></description>
        </item>
        <item>
            <title><![CDATA[本を売却]]></title>
            <link>https://masutaka.net/2009-12-06-1/</link>
            <guid>https://masutaka.net/2009-12-06-1/</guid>
            <pubDate>Sun, 06 Dec 2009 00:00:00 GMT</pubDate>
            <description><![CDATA[起きていることはすべて正しい—運を戦略的につかむ勝間式4つの技術 断る力 会社に人生を預けるな リスク・リテラシーを磨く 孫子の兵法—ライバルに勝つ知恵と戦略 大人のための「北斗の拳」人物伝 2ちゃんねる宣言—挑発するメディア 以上をブックオフで売ってきました。これで 320 円です。
前回ブックオフで売ったのは [2009-03-29-1] でした。
こうして見るとごったまぜですね。
私の場合、小説以外は躊躇なく売る傾向にあるようです。]]></description>
        </item>
        <item>
            <title><![CDATA[Emacs で登録されている timer の一覧を表示]]></title>
            <link>https://masutaka.net/2009-12-05-1/</link>
            <guid>https://masutaka.net/2009-12-05-1/</guid>
            <pubDate>Sat, 05 Dec 2009 00:00:00 GMT</pubDate>
            <description><![CDATA[Emacs スレ で紹介されていたコードを、ここにコピペ。
(defun describe-timer ()  (interactive)  (let ((tl timer-list)  timer)  (pop-to-buffer (get-buffer-create &#34;*timer*&#34;))  (erase-buffer)  (insert  &#34;TIME FUNCTION\n&#34;  &#34;-------------- --------------------------\n&#34;)  (while tl  (setq timer (car tl))  (insert  (concat  (format-time-string &#34;%m/%d %T&#34;  (list (aref timer 1)(aref timer 2)(aref timer 3)))  &#34; &#34;  (symbol-name (aref timer 5))  &#34;\n&#34;))  (setq tl (cdr tl))))) こんな出力が得られる。
TIME FUNCTION -------------- -------------------------- 12/05 16:05:00 display-time-event-handler 12/05 16:06:32 mew-passwd-timer 12/05 16:07:43 twittering-timer-action ]]></description>
        </item>
        <item>
            <title><![CDATA[『奥州藤原氏物語―黄金文化を創った清衡・基衡・秀衡・泰衡四代がくりひろげる壮大な歴史絵巻』を読んだ]]></title>
            <link>https://masutaka.net/2009-11-30-1/</link>
            <guid>https://masutaka.net/2009-11-30-1/</guid>
            <pubDate>Mon, 30 Nov 2009 00:00:00 GMT</pubDate>
            <description><![CDATA[読書メーター で自分が一番乗りだった。ニッチすぎるwww
DVD と小説、そしてこの本が揃った。うちは奥州に思いを馳せるには申し
分ない環境だ。]]></description>
        </item>
        <item>
            <title><![CDATA[Windows の画面がディスプレイからはみ出る件が直った]]></title>
            <link>https://masutaka.net/2009-11-24-1/</link>
            <guid>https://masutaka.net/2009-11-24-1/</guid>
            <pubDate>Tue, 24 Nov 2009 00:00:00 GMT</pubDate>
            <description><![CDATA[VAIO W [2009-09-06-1] は画面が狭いので、三菱の 22 インチワイド液晶
[2009-07-11-1] に繋げて使っています。
この液晶は最大 1680x1050 ピクセルなんですが、時々解像度が粗くなって
Windows が画面に収まりきらなくなることがあります。
仕方がないので 1280x768 ピクセルまで落として、画面に収まるようにし
ています。ただしこの状態でも、各ピクセルが大きく、例えばフォントは
かなり粗い状態です。
Linux (1680x1050) から VNC 越しに見ると 1280x768 の小さな画面がキレ
イに見えるので、ディスプレイドライバと液晶がきちんとお話しできてい
ないように見えます。
ところが、先ほど
 画面のリフレッシュレートを 60 ヘルツから 75 ヘルツに上げて、 解像度を 1280x768 から 1680x1050 に上げたら、
1680x1050 のキレイな画面が現れました。  まったく謎です。。。
追記(2009-12-02):
またおかしくなりました。今度は同じ方法で復旧させようとしても、直り
ません。ビデオドライバとモニタのどっちのバグなんだろう？ OS のバグ
の可能性もあるのかなあ？
追記(2010-01-10):
試しに [2009-11-03-1] に買った液晶テレビに繋げてみたら、1920x1080
まで表示出来たものの、液晶から Windows の画面がはみ出してしまいまし
た。ビデオドライバ原因の可能性が高くなって来ました。VAIO のサポート
に聞いてみようかなあ？]]></description>
        </item>
        <item>
            <title><![CDATA[はてなブックマークのコメントを、アイテム毎のページに表示させた]]></title>
            <link>https://masutaka.net/2009-11-22-1/</link>
            <guid>https://masutaka.net/2009-11-22-1/</guid>
            <pubDate>Sun, 22 Nov 2009 00:00:00 GMT</pubDate>
            <description><![CDATA[このブログにはコメント欄があるので、時々コメントを残してもらえるの
ですが、はてなブックマーク(以下、はてブ)にも良いコメントがあります。
そこで、アイテム毎のページにはてブのコメントを表示させました。今の
ところ、一番多いのは [2009-10-04-1] の 509 です。この時は一日で
10,000 アクセスもありました。(普段は 100 アクセス程度です。)
以下、設置手順です。
1. 「ブログにはてブのコメントを表示するhatana_bookmark_anywhere.js 」
から、hatena_bookmark_anywhere.js をダウンロードし、
http://masutaka.net/chalow/ に置きました。
2. アイテムページのテンプレート $item_page_template に、以下を追加
しました。
&lt;!-- hatena_bookmark_anywhere.js --&gt; &lt;script type= &#34;text/javascript&#34;&gt;/*&lt;![CDATA[*/ var hatena_bookmark_anywhere_style = false; // trueでデフォルトスタイル falseを設定するとCSSでスタイルの指定が可能 // var hatena_bookmark_anywhere_limit = 10; // 表示する件数 // var hatena_bookmark_anywhere_collapse; // trueにすると、コメントの書いてないブクマを表示しない。指定しない場合は、表示件数を超えた場合のみコメントを表示しない // var hatena_bookmark_anywhere_url; // 表示するURL 未指定の場合、現在のページ /*]]&gt;*/&lt;/script&gt; &lt;script src=&#34;hatena-bookmark-anywhere.js&#34; type=&#34;text/javascript&#34; charset=&#34;utf-8&#34;&gt;&lt;/script&gt; &lt;div id=&#34;hatena_bookmark_anywhere&#34;&gt;&lt;/div&gt; &lt;!--/ hatena_bookmark_anywhere.js --&gt; 3. 「hatana_bookmark_anywhere.jsの設置方法とカスタマイズ 」を参考に
しながら、現在使っている kaeru.]]></description>
        </item>
        <item>
            <title><![CDATA[UNIX 時間]]></title>
            <link>https://masutaka.net/2009-11-21-1/</link>
            <guid>https://masutaka.net/2009-11-21-1/</guid>
            <pubDate>Sat, 21 Nov 2009 00:00:00 GMT</pubDate>
            <description><![CDATA[業務で C 言語と、シェルコマンド date での UNIX 時間(1970 年 1 月 1
日 0:00 からの秒数)の取得方法を調べたのだけれど、我らが Emacs Lisp
を調べていませんでした。
Emacs Lisp (time-to-seconds (current-time)) で良いようです。
真夜中ごろ - ポロポロ 業務で調べた UNIX 時間は以下。
シェルコマンド  % date +%s
=&gt; 1257925989
 ※ Solaris9 の場合、SUN 謹製の date (/usr/bin/date) ではなく、
GNU の date (/usr/local/bin/date) を使う必要がある。
C言語 #include &lt;stdio.h&gt; #include &lt;sys/time.h&gt; /* gettimeofday() */ int main(void) { struct timeval tv; double unix_time; gettimeofday(&amp;tv, NULL); unix_time = tv.tv_sec + (tv.]]></description>
        </item>
        <item>
            <title><![CDATA[昨日の買い物]]></title>
            <link>https://masutaka.net/2009-11-03-1/</link>
            <guid>https://masutaka.net/2009-11-03-1/</guid>
            <pubDate>Tue, 03 Nov 2009 00:00:00 GMT</pubDate>
            <description><![CDATA[SHARP 32 型 AQUOS 地上デジタルハイビジョン液晶テレビ  アナログテレビとともにアナログマの最後を看取る予定でしたが、PS3 の
ゲーム中の文字が滲んでよく見えないという理由だけで、あっさり買いか
えてしまいました。
昨日の 18:00 に会社を出て、19:30 に購入して、今日の 9:00 過ぎにうち
に届きました。なんというハイスピード。
今まで 21 インチのアナログテレビでしたが、32 インチにしたのは正解で
した。37 インチを買わなくてよかった&hellip;。
今回購入したヨドバシでの価格は ￥137,800 でした。Amazon の値段を見
ると最安値が ￥99,800 で、ちょwww って感じですが、
|本体(￥137,800) - ヨドバシポイント(￥24,846) - エコポイント(￥15,000) = ￥97,954
なので、実は妥当だと思いたいです&hellip;。
さっそく地デジの設定をしましたが、簡単でした。薄々気づいていました
が、壁のテレビ端子がそのまま使えるのですね。←何も調べずに買った人
この互換性はすごいのでは..。
肝心の PS3 は、特に文字がはっきり見えるようになりました。コンポーネ
ントケーブルを HDMI ケーブルに変えれば、もっと綺麗になるのでしょう。
→ 綺麗になりました！！
キーボード  DELL キーボードの接続が時々切れるようになってしまいました。(注: 有
線キーボードです。)
再現性はバラバラですが、OS 起動時にキーボードを認識しないことがあっ
たり、BIOS に入ることも出来ないことがあったので、キーボード原因だろ
うということで、日本語フルキーボードかつ、なるべくコンパクトなもの
を買ってきました。
打ち心地はそれほどよくありません。^^;
Sun Blade2500 に付属しているキーボードは秀逸だと思うのですが、見た
目は普通の日本語キーボード、打ち心地は Sun のそれ、ってやつないのかな？]]></description>
        </item>
        <item>
            <title><![CDATA[Emacs23 から行番号を表示できるようになっていた]]></title>
            <link>https://masutaka.net/2009-10-25-1/</link>
            <guid>https://masutaka.net/2009-10-25-1/</guid>
            <pubDate>Sun, 25 Oct 2009 00:00:00 GMT</pubDate>
            <description><![CDATA[今まで外部パッケージを入れないと、Emacs は行番号を表示できませんで
したが、Emacs23 では最初から行番号表示できるようになっていました。
M-x linum-mode すると、カレントバッファで行番号が表示されます。
M-x global-linum-mode すると、全てのバッファで行番号が表示されます。
常に行番号を表示させたい方は ~/.emacs に以下を書いておくとよいでしょう。
(global-linum-mode t) ]]></description>
        </item>
        <item>
            <title><![CDATA[Debian squeeze でスクロールするとカクカクするようになった]]></title>
            <link>https://masutaka.net/2009-10-18-1/</link>
            <guid>https://masutaka.net/2009-10-18-1/</guid>
            <pubDate>Sun, 18 Oct 2009 00:00:00 GMT</pubDate>
            <description><![CDATA[最近、testing(=squeeze) の不具合調査が多いなあ。^^;
xserver 関連のアップデートをしてから、Iceweasel(=Firefox) や
Emacs のスクロールがやけにカクカクするようになりました。
以前 [2008-08-24-1] で似たような現象が起きた時は、理由が分からない
まま解決できたため、この現象に気づいたときは正直げんなりしました。
(この時予想したソフトレンダリングは、勘違いということが今回判明。)
今回は過程を重視したいため、結論は後に書きます。
まず、X の VIDEO まわりの設定を調べました。私の PC の VIDEO カード
は ATI の Radeon HD 2400 PRO です。ただ、/etc/X11/xorg.conf には以
下のような情報しか書かれていませんでした。
Section &#34;Device&#34; Identifier	&#34;Configured Video Device&#34; EndSection 気を取り直して、ググってみたところ debian-users:51900 が引っかかっ
たので、
 dpkg-reconfigure -plow xserver-xorg  等やってみたが変わらず。/etc/X11/xorg.conf は touch された形跡さえ
ありませんでした。
どうやら最近の X は /etc/X11/xorg.conf ではなく、hal で設定されてい
るようです。lshal コマンドで設定内容を確認できるようです。
 % lshal
 lshal の出力にはめぼしいものはありませんでしたが、このスレッドの以
下のコマンドに解決のヒントが隠されていました。
 % grep EE /var/log/Xorg.]]></description>
        </item>
        <item>
            <title><![CDATA[VAIO W を買って、１ヶ月が過ぎた]]></title>
            <link>https://masutaka.net/2009-10-11-2/</link>
            <guid>https://masutaka.net/2009-10-11-2/</guid>
            <pubDate>Sun, 11 Oct 2009 01:00:00 GMT</pubDate>
            <description><![CDATA[[2009-09-06-1] のその後です。
１ヶ月使いましたが、それほど不満はないです。むしろ Let&rsquo;s Note W2
CF-W2AW1AXR と違和感がなさ過ぎて、置き換えたことを時々忘れるくらいです。
私のようにメインマシンが Linux で、サブマシンに Windows を探してい
るという人には良い選択肢だと思います。5 万で買えますし。(Let&rsquo;s
Note は 20 万したなあ。。。)
Let&rsquo;s NOTE と比べて、良くなったと感じる点です。
 若干パフォーマンスが上がりました。 Bluetooth が使えるようになりました。時々 [2009-08-29-1] のワイヤ
レスヘッドホンで遊んでいます。  Let&rsquo;s NOTE と比べて、悪くなったと感じる点です。
 ファンの音が多少気になります。 解像度は高くなりましたが、画面は小さい(10.1 型ワイド)ので、目が疲
れそうです(※1)。 キーボードが小さいので、打ち辛そうです(※2)。 足元に置いているのでそれほどでもありませんが、外付けマルチドライ
ブが少し邪魔です。  ※1 いつも外部モニタに出力させているので、画面になにか表示させるこ
とはほとんどありません。
※2 synergy を使っているので、キーボードに触ることはほとんどありま
せん。[2009-07-20-3] ]]></description>
        </item>
        <item>
            <title><![CDATA[Emacs23 から初期化時間や動作時間を確認できるようになった]]></title>
            <link>https://masutaka.net/2009-10-11-1/</link>
            <guid>https://masutaka.net/2009-10-11-1/</guid>
            <pubDate>Sun, 11 Oct 2009 00:00:00 GMT</pubDate>
            <description><![CDATA[;; Emacs 起動時の初期化時間を返す。 (emacs-init-time) =&gt; &#34;26.6 seconds&#34;  ;; Emacs の動作時間を返す。 (emacs-uptime) =&gt; &#34;1 day, 15 hours, 2 minutes, 17 seconds&#34; 参考にした Web サイト:
Emacs23における変更点(一部) - とりあえず暇だったし何となく始めたブログ ]]></description>
        </item>
        <item>
            <title><![CDATA[MySQL の主要なコマンド]]></title>
            <link>https://masutaka.net/2009-10-10-2/</link>
            <guid>https://masutaka.net/2009-10-10-2/</guid>
            <pubDate>Sat, 10 Oct 2009 01:00:00 GMT</pubDate>
            <description><![CDATA[# 接続(&#34;mysql&gt;&#34; プロンプトに移行する。) % mysql -u root -p # データベースの一覧 mysql&gt; show databases; # 文字コードの確認 mysql&gt; show create database データベース名; # データベースの作成 mysql&gt; create database データベース名; # 文字コードに utf-8 を指定したデータベースの作成 mysql&gt; create database データベース名 character set utf8; # ユーザの追加 mysql&gt; grant all privileges on データベース名.* to ユーザ名@localhost identified by &#39;パスワード&#39;; # データベースの削除 mysql&gt; drop database データベース名; # サーバのステータス情報確認。&#34;mysqladmin -u root -p status&#34; はこれの簡易版。 mysql&gt; status; # サーバの詳細なステータス情報確認。&#34;mysqladmin -u root -p extended-status&#34; と同様。 mysql&gt; show status; # 終了 mysql&gt; exit; # 変数の確認 % mysqladmin -u root -p variable # 存在するデータを全てバックアップ % mysqldump -u root -p -x --all-databases &gt; alldump.]]></description>
        </item>
        <item>
            <title><![CDATA[Debian squeeze で Redmine を構築してみた (MySQL 版)]]></title>
            <link>https://masutaka.net/2009-10-10-1/</link>
            <guid>https://masutaka.net/2009-10-10-1/</guid>
            <pubDate>Sat, 10 Oct 2009 00:00:00 GMT</pubDate>
            <description><![CDATA[[2009-10-08-1] はデータベースに sqlite3 を使用する方法ですが、書き
込みが行われている時はデータベース全体がロックされるなどパフォーマ
ンスに問題があるそうです。そこで、MySQL を使う方法も試してみました。
前回に補足する形で説明していきます。
基本的な構築手順 1. に加え、mysql-server もインストールしてください。 さらに、MySQL のデータベースも作成します。
 % mysql -u root -p
文字コードに utf8 を指定したデータベース redmine を作成 mysql&gt; create database redmine character set utf8;
データベース redmine のユーザ redmine を作成し、パスワードに XXXXXXXX を設定。 mysql&gt; grant all privileges on redmine.* to redmine@localhost identified by &lsquo;XXXXXXXX&rsquo;;
mysql&gt; exit;
 3-1. の database.yml は以下の修正に置き換えます。 --- config/database.yml.example	2009-09-13 21:10:16.000000000 +0900 +++ config/database.yml	2009-10-10 23:14:31.000000000 +0900 @@ -10,9 +10,10 @@ adapter: mysql database: redmine host: localhost - username: root - password: + username: redmine + password: XXXXXXXX encoding: utf8 + socket: /var/run/mysqld/mysqld.]]></description>
        </item>
        <item>
            <title><![CDATA[Debian squeeze で Redmine を構築してみた]]></title>
            <link>https://masutaka.net/2009-10-08-1/</link>
            <guid>https://masutaka.net/2009-10-08-1/</guid>
            <pubDate>Thu, 08 Oct 2009 00:00:00 GMT</pubDate>
            <description><![CDATA[Redmine とは、プロジェクト管理ツールです。
仕事で必要になったので、手始めに自宅で構築してみました。
lenny から Ruby on Rails がパッケージに含まれるようになったそうで、
比較的簡単に構築することが出来ました。
基本的な構築手順 1. Synaptic パッケージマネージャから rails をインストールします。 構築したマシンに既に apache2 や libsqlite3-ruby1.8 をインストールし
ていたので、今回は rails のみのインストールで済みました。
2. Redmine の公式サイト から、redmine-0.8.5.tar.gz をダウンロードし、~/public_html に展開します。  % cd ~/public_html
% tar xzf redmine-0.8.5.tar.gz
 3. 公式サイトの手順 を参考にして、Redmine の設定をします。 展開したディレクトリに移動します。
 % cd redmine-0.8.5
 3-1. database.yml の設定 サンプルを元に設定を開始します。
 % cp config/database.yml.example config/database.yml
 修正内容は以下のとおり、公式と同じにします。
--- config/database.yml.example	2009-09-13 21:10:16.000000000 +0900 +++ config/database.yml	2009-10-08 21:27:03.000000000 +0900 @@ -7,12 +7,9 @@ # http://dev.]]></description>
        </item>
        <item>
            <title><![CDATA[Web ブラウザに表示されている画面を直接編集する方法]]></title>
            <link>https://masutaka.net/2009-10-04-1/</link>
            <guid>https://masutaka.net/2009-10-04-1/</guid>
            <pubDate>Sun, 04 Oct 2009 00:00:00 GMT</pubDate>
            <description><![CDATA[これはすごい。Web ブラウザのアドレスバーに以下を入力し Enter すると、
今表示されている内容を直接編集できる。Firefox 3.0.14 と IE8 で出来
ることを確認した。
javascript:document.body.contentEditable=&#39;true&#39;; document.designMode=&#39;on&#39;; void 0 WEBブラウザーに表示されている画面を直接編集する方法 - sanonosa　システム管理コラム集 追記(2009-10-04):
戻す方法はないものかなあ。&lsquo;false&rsquo; と &lsquo;off&rsquo; では出来なかった。
追記(2009-10-17):
「戻す方法」というのは、「編集モードから閲覧モードに戻す方法」のこ
とです。端折った書き方ですみませんでした。もう少し楽な方法が見つかっ
たので、以下に追記します。
IE では、以下を入力し Enter すると編集状態を保ったまま閲覧モードに
戻せますが、Firefox ではそれができません。
javascript:document.body.contentEditable=&#39;false&#39;; document.designMode=&#39;off&#39;; void 0 はてなブックマークからの情報 によると、Firefox の Page Hacker アドオ
ン を使えば閲覧モードに戻せることが分かりました。編集モードへの移行
もこのアドオンで出来ます。]]></description>
        </item>
        <item>
            <title><![CDATA[最近の 200 件より前のつぶやきを、はてなにアップした]]></title>
            <link>https://masutaka.net/2009-09-28-1/</link>
            <guid>https://masutaka.net/2009-09-28-1/</guid>
            <pubDate>Mon, 28 Sep 2009 00:00:00 GMT</pubDate>
            <description><![CDATA[[2009-08-23-1] の続きです。
twtr2src の仕様で、200 件より前のつぶやきは HTML, Hatena, Plane
Text のいずれのフォーマットでも取得することが出来ません。
私が Twitter を始めたのは 2009/6/2 です。twtr2src を使って、はてな
につぶやきをアップ出来たのが 2009/7/16 までです。つまり、2009/6/2〜
2009/7/15 までのつぶやきが、はてなにアップ出来ていないことになりま
す。これは対策を講じる必要があるでしょうｗ
いきなりですが、twilog を利用すると、この問題を解決できます。
本来は、そういう目的の Web サービスではありませんけどね。
twilog にユーザ登録(無料)をすると、右上の「各種設定」から「過去のつ
ぶやきの取得」ができるようになります。ただし Twitter 自身の仕様で、
取得出来るのは 3200 件までだそうです。私はまだ、815 回しかつぶやい
ていないので、セーフでした。
取得し終わったら、はてな記法のソースを取得します。と言っても用意さ
れているわけではないので、自分ではてな記法に設定します。
1. 各日付の「ソース取得」の &ldquo;div・p&rdquo; や &ldquo;ul・li&rdquo; をクリックすると、
こちらの Greasemonkey というリンクがあります。これをクリックします。
2. &ldquo;Install&rdquo; というボタンの下に、&ldquo;How do I use this?&rdquo; というリンク
があります。これをクリックします。この時点では &ldquo;Install&rdquo; をクリック
しても、57746.user.js がそのまま表示されるだけです。
3. なにやら英語で書いてありますが、&ldquo;Install&rdquo; ボタンをクリックする前
に Greasemonkey という Firefox アドオン をインストールする必要がある]]></description>
        </item>
        <item>
            <title><![CDATA[Emacs のソースコードを Git から取得してみた]]></title>
            <link>https://masutaka.net/2009-09-27-1/</link>
            <guid>https://masutaka.net/2009-09-27-1/</guid>
            <pubDate>Sun, 27 Sep 2009 00:00:00 GMT</pubDate>
            <description><![CDATA[emacs - Git Repositories Emacs のソースコードは Git(ぎっと) でも公開されているので、
Git Repository から取得してみました。
まず、Git というのは分散型バージョン管理システムです。CVS や
Subversion は集中型バージョン管理システムなので、操作や考え方が少し
違います。
分散型バージョン管理については、以下のページにわかりやすくまとめら
れています。
Git/分散レポジトリって何が嬉しいの - かWiki 作業者が個別にリポジトリを持てるので、commit 権がないプロジェクトの
修正を管理できる点が良さそうですね。
以下のページも面白いです。アリスの遅れている作業を、ボブが手伝って
います。
アリスとボブのコラボレーション、gitをちゃんと理解したい！ - ザリガニが見ていた&hellip;。 これで、Git の概要が分かりました。コマンド操作は後で述べるとして、
先に Emacs のソースコードを取得することにします。
Debian では git-core をインストールすると、Git が使えるようになります。
以下のコマンドで Emacs のソースコードを取得できます。カレントディレ
クトリに emacs というディレクトリが作られます。
 % git clone git://git.savannah.gnu.org/emacs.git
 Emacs のソースコードを取得できました。
cvs update や svn update に相当するコマンドは以下になります。
 % git pull
 CVS や Subversion を使ったことがある人なら、以下のページが参考にな
りそうです。]]></description>
        </item>
        <item>
            <title><![CDATA[Debian squeeze で migemo が使えなくなった]]></title>
            <link>https://masutaka.net/2009-09-22-1/</link>
            <guid>https://masutaka.net/2009-09-22-1/</guid>
            <pubDate>Tue, 22 Sep 2009 00:00:00 GMT</pubDate>
            <description><![CDATA[10 日くらい前から Debian squeeze で migemo が使えなくなってしまいま
した。
正常に実行できる Meadow と &quot; migemo&quot; バッファを比べてみると、
Debian の方は文字化けしています。migemo_0.40-8 の /usr/bin/migemo
への以下の修正が影響しているようです。
# 修正前 puts regex_str # 修正後 puts ENV[&#39;LANG&#39;].include?(&#34;UTF-8&#34;) ? NKF.nkf(&#39;-Ew&#39;, regex_str) : regex_str /usr/share/emacs/site-lisp/migemo/migemo.el も修正する必要があった
ようで、#546920 で対応されました。migemo_0.40-10 では直るようです。
しかしまだ squeeze には降りてきていないので、当面は ~/.emacs に以下
を設定し生活することにします。
 (setq migemo-coding-system &lsquo;utf-8-unix)
 追記(2009-09-29):
migemo_0.40-10 が squeeze に降りてきたので、migemo-coding-system の
設定を削除しました。]]></description>
        </item>
        <item>
            <title><![CDATA[本を購入]]></title>
            <link>https://masutaka.net/2009-09-19-1/</link>
            <guid>https://masutaka.net/2009-09-19-1/</guid>
            <pubDate>Sat, 19 Sep 2009 00:00:00 GMT</pubDate>
            <description><![CDATA[近所の文教堂に行ってきました。
幽霊人命救助隊  今月の部会で上司がおすすめしていて、たまたま見つけたので買ってきま
した。サラっと読めると聞いたのですが、予想外の分厚さにうろたえましたｗ
シグルイ 13  新巻が出ていたので、買ってきました。大手を振って「読んでます」って
言えない漫画です。^^;]]></description>
        </item>
        <item>
            <title><![CDATA[文字列の整列]]></title>
            <link>https://masutaka.net/2009-09-15-1/</link>
            <guid>https://masutaka.net/2009-09-15-1/</guid>
            <pubDate>Tue, 15 Sep 2009 00:00:00 GMT</pubDate>
            <description><![CDATA[M-x align-regexp がなかなか便利。
まずは Help のサンプルより。
Fred (123) 456-7890 Alice (123) 456-7890 Mary-Anne (123) 456-7890 Joe (123) 456-7890 上記をリージョンで括って、
M-x align-regexp [Enter] ( [Enter] すると、、、
Fred (123) 456-7890 Alice (123) 456-7890 Mary-Anne (123) 456-7890 Joe (123) 456-7890 C ソースだともっと便利さが伝わるかもしれない。
実行前
printf(&#34;aaa\n&#34;);/* aaa */ printf(&#34;bbbbbb\n&#34;);/* bbb */ printf(&#34;ccccccccc\n&#34;);/* ccc */ M-x align-regexp [Enter] /* [Enter] 実行
printf(&#34;aaa\n&#34;); /* aaa */ printf(&#34;bbbbbb\n&#34;); /* bbb */ printf(&#34;ccccccccc\n&#34;); /* ccc */ おっと、M-x align というのもあると教えてもらった。これは現在のメ]]></description>
        </item>
        <item>
            <title><![CDATA[synergy その後]]></title>
            <link>https://masutaka.net/2009-09-10-1/</link>
            <guid>https://masutaka.net/2009-09-10-1/</guid>
            <pubDate>Thu, 10 Sep 2009 00:00:00 GMT</pubDate>
            <description><![CDATA[[2009-07-20-3] のその後
新しい PC でも、良い感じで使っています。
ただ、左端や右端から少しでもはみ出ると、隣の PC からカーソルがひょっ
こりと顔を出してしまうので、上 10% と下 10% は無視させるようにしま
した。
サーバ側の ~/.synergy.conf を置き換えます。
# vergil -&gt; SERVER PC (Linux) # nero -&gt; CLIENT PC (Windows) section: screens vergil: nero: end section: links vergil: left(10,90) = nero(10,90) nero: right(10,90) = vergil(10,90) end 参考情報:
Synergy Configuration Guide ]]></description>
        </item>
        <item>
            <title><![CDATA[今日の買い物]]></title>
            <link>https://masutaka.net/2009-09-06-1/</link>
            <guid>https://masutaka.net/2009-09-06-1/</guid>
            <pubDate>Sun, 06 Sep 2009 00:00:00 GMT</pubDate>
            <description><![CDATA[VAIO W シリーズ VPCW119XJ/W  Let&rsquo;s NOTE W2 CF-W2AW1AXR の HDD がクラッシュしたので、代わりに買っ
てきました。いや、もう少し正確に書きましょう。
 ２年ほど前から、Let&rsquo;s Note の液晶の半分の領域に縦線が出現し、かな
り見えづらい状態だった。 そのため、普段は画面を隣のデスクトップの液晶に出力して使っていた。 先週の日曜日に、私の目の前で HDD がクラッシュした。 HDD の換装を試みたが、ネジをバカにしてしまい、諦めた。 今日、情報収集するためにノート PC を見に行った。 気がついたら買っていた。  いわゆるネットブックというやつです。ほとんどの作業は Linux PC で行
うので、私の場合、Windows PC はネットブックで十分だと思います。(関
係ないけど、ネットブックという呼称はなんか好きになれないなあ。)
Sony の PC は初めてなので、ちょっとドキドキしています。
VAIO W のスペック表はこちらです。 見た目のよさと、IEEE 802.11n と
Bluetooth が対応されていることに惹かれて、購入しました。CPU やメモ
リ、HDD にはこだわりませんでした。液晶は私の嫌いな光沢タイプ :-P で
すが、外部出力する予定なので今回は問題ありません。
値段は ￥50,025 でした。内訳は以下になります。
|本体(￥51,700) + ヨドバシ延長保証サービス(￥2,585) - 金券(￥100) - ヨドバシポイント(￥4,160)
ヨドバシ延長保証サービスは、故障した時に正規の値段よりも安く修理が
できるサービスのようです。安いのでまあいいかと思い、申し込んでしま
いました。ヨドバシ延長保証サービスの詳細はこちらです。 金券は、古い PC の下取り価格です。念のため古い PC を持っていったの]]></description>
        </item>
        <item>
            <title><![CDATA[このサイトに Google AdSense を設置しました]]></title>
            <link>https://masutaka.net/2009-09-03-1/</link>
            <guid>https://masutaka.net/2009-09-03-1/</guid>
            <pubDate>Thu, 03 Sep 2009 00:00:00 GMT</pubDate>
            <description><![CDATA[アイテム毎のページ(例: [2009-09-03-1] )に Google Adsense を表示する
ようにしました。
Google Adsense は、広告配信サービスの一つです。サイトに合った広告を
配信するのが特徴のようです。
Google_AdSense 現在のアクセス数で収益が出るとは思っていませんが、それなりに適切な
広告が配信されていて興味深いです。
ところで、GIGAZINE にこんな記事がありました。
Google AdSenseの始め方 その1「審査を突破する」 - GIGAZINE でも、私の場合はあっさり突破できてしまいました。個人向けだからでしょ
うか。それとも、たまたま連絡先メールフォームを設置していた からでしょうか。
配色は、たつをさんのページに触発されました。
[を] コンテンツ連動型広告はどこに設置するのが良いか なるべく目立たないように設置したつもりです。
ついでに [2009-03-22-1] に設置したシムエントリも周囲に溶け込ませる
配色にしました。]]></description>
        </item>
        <item>
            <title><![CDATA[今週の買い物]]></title>
            <link>https://masutaka.net/2009-08-29-1/</link>
            <guid>https://masutaka.net/2009-08-29-1/</guid>
            <pubDate>Sat, 29 Aug 2009 00:00:00 GMT</pubDate>
            <description><![CDATA[Bluetooth 送信機(トランスミッタ)  iPod 用にはコードレスで本体に直接接続できるトランスミッタが発売され
ていますが、DS 用のものはないようなので、不本意ながらコード付きのこ
れにしました。ゲームには音が必須だと思いますが、需要はないのでしょ
うか&hellip;。
結論としては DS でワイヤレスイヤホンを使うのは時期尚早だと思います。
素直に DS が Bluetooth 対応するのを待つか、直接接続＆給電できるタイ
プのトランスミッタが出るのを待ちましょう。
ワイヤレスヘッドホン  耳かけタイプのヘッドホンです。イヤホンタイプのものを探したのですが、
高い(￥4.5万!! )か、片側だけのものしかありませんでした。
本当は、有線のイヤホンをそのまま無線にしたものが良いのですが。
さて、右側のヘッドホンには以下の機能が集まっています。
 Power ボタン 音量調節ボタン 音楽再生、停止、スキップボタン 携帯用マルチファンクションボタン ペアリングボタン マイク  左側のヘッドホンは充電用の端子だけです。
左右のヘッドホンは紐で繋がれていますが、邪魔だからと言って切っては
いけません。良く考えれば分かりますが、左側のヘッドホンから給電して
いるため、即使えなくなります。危なかった。。。
今回買ったトランスミッタとヘッドホンは、どちらもワイヤが残っていま
す。値段もそうですし、Bluetooth ヘッドホンはまだ過渡期なんだなあと
思いました。
ところで、付けているとなぜか左耳だけ痛くなります。合わないのかな&hellip;？
排水口付きトレー   ブレッザ　ドレイナートレー　S
この上に、洗った食器を入れるザルを置いて使います。こうすることで、
溜まった水が速やかに排出されるので清潔です。排出される様子を見てい
るのも、面白いです。^^;
爪切り用品   家にある爪切りにヤスリが付いていなかったので、買ってきました。が、
良く見たら、家にあるものと同じものを買っていました&hellip;。(なんだか雰
囲気が違って見えたので&hellip;。←言い訳) ただ、良く見るとヤスリは付いて
いたことが分かったので、良しとします。
もう一つのは、爪の垢をかき出すものらしいです。これにもヤスリは付い
ています。
メモ帳  愛用しているメモ帳がなくなったので、まとめて４冊買いました。
その他買ったもの 箸、茶碗、弁当箱
追記(2009-09-17):
意識していませんでしたが、[2009-09-06-1] に買った VAIO とワイヤレス]]></description>
        </item>
        <item>
            <title><![CDATA[Twitter のつぶやきを一日単位で自動でアップする]]></title>
            <link>https://masutaka.net/2009-08-23-1/</link>
            <guid>https://masutaka.net/2009-08-23-1/</guid>
            <pubDate>Sun, 23 Aug 2009 00:00:00 GMT</pubDate>
            <description><![CDATA[[を] はてなダイアリーに一日単位で自分のツイッターのつぶやきをアップする方法 おもしろそうだったので、私もはてなダイアリーにアップすることにしま
した。一日単位での Twitter のつぶやきが、はてなダイアリーの記事とし
て毎日 0:00 に投稿されます。
マスタカ (masutaka) on Twitter (はてな版) 記事のタイトルや、つぶやきを昇順にするか降順にするかは twtr2src の
Setting → Format から設定できます。
私は Sorting order of timeline を「Morning to night」に、
Title format を「%Y-%m-%d (%a) の Twitter でのつぶやき」にしました。]]></description>
        </item>
        <item>
            <title><![CDATA[screen で window 毎に encoding を変える方法]]></title>
            <link>https://masutaka.net/2009-08-22-3/</link>
            <guid>https://masutaka.net/2009-08-22-3/</guid>
            <pubDate>Sat, 22 Aug 2009 02:00:00 GMT</pubDate>
            <description><![CDATA[普段は LANG=EUC-JP な環境で、時々 LANG=UTF8 の環境に ssh する時などに便利です。
変えたい window 上で以下のコマンドを実行してください。&lt;escape key&gt; のデフォルトは Ctrl-a です。Ctrl-z にしている人が多いかもしれないです。
&lt;escape key&gt;:encoding [enc] [enc] は、utf8, eucjp, sjis, jis などが使えます。詳細は man screen をご覧下さい。
参考情報:
unknownplace.org - 2005/10/19 - :encoding P.S.
今気づいたのですが、~/.screenrc の内容は &lt;escape key&gt;: で実行できるのですね。]]></description>
        </item>
        <item>
            <title><![CDATA[screen で 最終行にウィンドウ一覧を表示する方法]]></title>
            <link>https://masutaka.net/2009-08-22-2/</link>
            <guid>https://masutaka.net/2009-08-22-2/</guid>
            <pubDate>Sat, 22 Aug 2009 01:00:00 GMT</pubDate>
            <description><![CDATA[以下を ~/.screenrc に書くと、
hardstatus alwayslastline &#34;[%02c] %`%-w%{=b bw}%n %t%{-}%+w&#34; こんな風に表示できます。
タブ表示みたいで良いですね。ウィンドウをいくつ開いているかよく忘れるので ^^; 、便利です。
参考情報:
GNU screen いろいろまとめ。 - naoyaのはてなダイアリー 追記(2009-08-23):
zsh ユーザの方は、以下を ~/.zshrc に書いておくと &ldquo;zsh&rdquo; という文字列の代わりに「コマンド実行中はコマンド名を、未実行ならカレントディレクトリを表示」してくれます。情報ありがとうございます。＞ kitokitoki さん
case &#34;$TERM&#34; in screen) preexec() { echo -ne &#34;\ek#${1%% *}\e\\&#34; } precmd() { echo -ne &#34;\ek$(basename $(pwd))\e\\&#34; } esac 参考情報:
screenのキャプションにディレクトリ名 or コマンド名を表示 - メモの日々(2008-03-31) ]]></description>
        </item>
        <item>
            <title><![CDATA[Twitter でつぶやいた日々の食事を Google カレンダーで表示する]]></title>
            <link>https://masutaka.net/2009-08-22-1/</link>
            <guid>https://masutaka.net/2009-08-22-1/</guid>
            <pubDate>Sat, 22 Aug 2009 00:00:00 GMT</pubDate>
            <description><![CDATA[食べったー @tabetter という Twitter Bot があります。
tabetter にフォローすると、フォローし返してくれます。その状態で、自
分のアカウントに決まった書式のつぶやきをすると、
http://tabetter.bug-fix.net/ical/ .ics
にひたすら記録してくれるというサービスです。
詳細は、食べったーの Web site をご覧下さい。
http://tabetter.bug-fix.net/index_/index.html さて、.ics は、iCalendar 形式のファイルです。これは
Google カレンダーから「表示のみが可能なカレンダー」として読み込ませ
ることができます。
こうすることで、Twitter でつぶやいた日々の食事を Google カレンダー
で表示することが可能です。
左側のメニューにある「他のカレンダー」から、「追加」→「URLで追加」
をクリックし、前述の URL を追加します。
食事の記録が表示されました！！
参考情報:
vCalendar、iCalendar - コニファマメ知識 Twitterでの発言をGoogleカレンダー上に表示させることができる『twistory』 P.S.
Firefox の Twitter アドオンは、TwitterFox がなかなか良いです。
RT は右クリックでできます。← できないと思っていた人&hellip;。
追記(2009-12-06):
こんな感じ に任意の Web サイトに Google カレンダーを表示させることも
できます。]]></description>
        </item>
        <item>
            <title><![CDATA[ソーシャルブックマーク用のボタンを付けました。]]></title>
            <link>https://masutaka.net/2009-08-19-1/</link>
            <guid>https://masutaka.net/2009-08-19-1/</guid>
            <pubDate>Wed, 19 Aug 2009 00:00:00 GMT</pubDate>
            <description><![CDATA[[2009-08-16-2] のバージョンアップ。
「twitter でつぶやく」ボタンに加え、「はてなブックマーク」と
「livedoor クリップ」ボタンも付けました。
「はてなブックマーク」はそろそろ使おうかなと思っていましたが、
livedoor のアカウントは以前破棄したので、このためだけにアカウントを
再取得しました。
今回も chalow 本体の修正です。chalow ユーザ向けに、オリジナ
ル(chalow-1.0.tar.gz)の cl.conf と chalow へのパッチを貼り付けてお
きますね。[2009-08-16-2] のパッチよりも、こちらのパッチのほうが拡張
性あるのでオススメです。
--- cl.conf.org	2007-10-19 21:38:22.000000000 +0900 +++ cl.conf	2009-08-19 21:18:09.000000000 +0900 @@ -315,7 +315,7 @@ $item_template = &lt;&lt; &#34;EACHITEM&#34; &lt;!-- start:&lt;TMPL_VAR name=ymdi&gt; --&gt; &lt;div class=&#34;section&#34;&gt; -&lt;h3 class=&#34;subtitle&#34;&gt;&lt;TMPL_VAR name=header&gt; &lt;TMPL_VAR name=cat&gt;&lt;/h3&gt; +&lt;h3 class=&#34;subtitle&#34;&gt;&lt;TMPL_VAR name=header&gt; &lt;TMPL_VAR name=cat&gt; &lt;TMPL_VAR name=sbm&gt;&lt;/h3&gt; &lt;p&gt;&lt;TMPL_VAR name=content&gt;&lt;/p&gt; &lt;TMPL_IF name=readmore&gt; &lt;p&gt;《&lt;a href=&#34;&lt;TMPL_VAR name=url&gt;&#34;&gt;続きを読む&lt;/a&gt;》&lt;/p&gt; --- chalow.org	2007-10-19 23:15:01.000000000 +0900 +++ chalow	2009-08-19 22:10:37.]]></description>
        </item>
        <item>
            <title><![CDATA[「twitter でつぶやく」ボタンを付けました。]]></title>
            <link>https://masutaka.net/2009-08-16-2/</link>
            <guid>https://masutaka.net/2009-08-16-2/</guid>
            <pubDate>Sun, 16 Aug 2009 01:00:00 GMT</pubDate>
            <description><![CDATA[このブログの各記事にボタンを付けました。Twitter ユーザは、簡
単にこのブログに関するつぶやきを投稿することが出来ます。どうぞご利
用下さい。
今回も chalow 本体を修正しました。chalow ユーザ向けに、オリジナ
ル(chalow-1.0.tar.gz)の cl.conf と chalow へのパッチを貼り付けてお
きますね。
--- cl.conf.org	2007-10-19 21:38:22.000000000 +0900 +++ cl.conf	2009-08-16 15:26:20.000000000 +0900 @@ -315,7 +315,7 @@ $item_template = &lt;&lt; &#34;EACHITEM&#34; &lt;!-- start:&lt;TMPL_VAR name=ymdi&gt; --&gt; &lt;div class=&#34;section&#34;&gt; -&lt;h3 class=&#34;subtitle&#34;&gt;&lt;TMPL_VAR name=header&gt; &lt;TMPL_VAR name=cat&gt;&lt;/h3&gt; +&lt;h3 class=&#34;subtitle&#34;&gt;&lt;TMPL_VAR name=header&gt; &lt;TMPL_VAR name=cat&gt; &lt;TMPL_VAR name=retweet&gt;&lt;/h3&gt; &lt;p&gt;&lt;TMPL_VAR name=content&gt;&lt;/p&gt; &lt;TMPL_IF name=readmore&gt; &lt;p&gt;《&lt;a href=&#34;&lt;TMPL_VAR name=url&gt;&#34;&gt;続きを読む&lt;/a&gt;》&lt;/p&gt; --- chalow.org	2007-10-19 23:15:01.000000000 +0900 +++ chalow	2009-08-16 15:29:44.000000000 +0900 @@ -573,6 +573,9 @@ my $item_ymdi = $ymd.]]></description>
        </item>
        <item>
            <title><![CDATA[VL ゴシックで行間が広い件と、↑↓←→が半角幅な件]]></title>
            <link>https://masutaka.net/2009-08-16-1/</link>
            <guid>https://masutaka.net/2009-08-16-1/</guid>
            <pubDate>Sun, 16 Aug 2009 00:00:00 GMT</pubDate>
            <description><![CDATA[squeeze になってしばらくして、行間が広くなったことと、↑↓←→が半
角幅になったことがとても気になっていたので、ちょっと調べてみました。
結論から言うと、VL ゴシックが原因でした。20090422 のリリースまでは
上の２つの問題は起きていませんでしたが、20090612 のリリースから変わっ
たようです。
調べたこと Windows で動くフォントビューア Shampolyon を使って調べました。
Debian の下記フォントを C:\Windows\Fonts にコピーすれば、
Shampolyon で確認できます。
 /usr/share/fonts/truetype/vlgothic/VL-Gothic-Regular.ttf
/usr/share/fonts/truetype/vlgothic/VL-PGothic-Regular.ttf
 確かに半角幅しかありませんね。
20090422 にリリースされたフォントでは全角幅分あります。20090612 の
リリースから変わったようです。
対策したこと ttf-vlgothic パッケージを 20090422 に戻せば良いのですが、squeeze に
は存在しません。lenny にはあります。
面倒なので /usr/share/fonts/truetype/vlgothic/*.ttf をリネームし、
20090422 の *.ttf をコピーするという暴挙を行いました。
しばらく暮らしてみましたが、広い行間に慣れてしまったようでｗ、どう
もしっくりきません。結局元に戻しました&hellip;。
ただ、↑↓←→が半角幅というのは困りますので、なんらかの手段で作者
に要望する予定です。
関連情報 VLゴシックフォントファミリ [2009-07-12-1] 追記(2009-08-27):
20090710-1 のパッケージが 20090811-1 に更新されたら、この問題が解消
されました。よかったよかった。20090806 の以下の修正が該当するのでしょう。
  VL-Gothic の文字幅を調整
o 互換性を高めるために Unicode で文字幅が Ambigious なものの一部を全角幅に変更。
http://sourceforge.jp/projects/vlgothic/releases/43072/changelog    ]]></description>
        </item>
        <item>
            <title><![CDATA[twittering-mode.el のハック]]></title>
            <link>https://masutaka.net/2009-08-08-2/</link>
            <guid>https://masutaka.net/2009-08-08-2/</guid>
            <pubDate>Sat, 08 Aug 2009 01:00:00 GMT</pubDate>
            <description><![CDATA[2010.4.21 に取り込んで頂きました ので、以下の修正はもう不要です。
大したハックではありませんが、以下の修正をしました。
修正内容 `t&rsquo; でオフラインとオンラインをトグル出来るようにしました。デフォル
トの twittering-toggle-proxy() へのキーバインドを変更しています。接
続状態はミニバッファに表示されたアイコンで分かるようになっています。
`q&rsquo; で twittering-mode を終了できるようにしました。
Emacs23 以降で twittering-update-lambda() と
twittering-jojo-mode() を実行すると、文字化けする件を修正しました。
[2009-08-01-1] の件です。
反映方法 twittering-mode.el を置いたディレクトリに icons というディレクトリ
を作り、plugged.xpm と unplugged.xpm を置いてください。これらの画像
は Navi2ch に付属するものです。
修正した twittering-mode.el へのパッチは以下になります。アイコンを
表示させるコードは Navi2ch から、ほぼそのまま流用させて頂きました。
Index: twittering-mode.el =================================================================== --- twittering-mode.el	(revision 138) +++ twittering-mode.el	(working copy) @@ -296,8 +296,9 @@  (define-key km &#34;H&#34; &#39;beginning-of-buffer)  (define-key km &#34;i&#34; &#39;twittering-icon-mode)  (define-key km &#34;s&#34; &#39;twittering-scroll-mode) - (define-key km &#34;t&#34; &#39;twittering-toggle-proxy) + (define-key km &#34;t&#34; &#39;twittering-toggle-offline)  (define-key km &#34;\C-c\C-p&#34; &#39;twittering-toggle-proxy) + (define-key km &#34;q&#34; &#39;twittering-mode-exit)  nil))   (defvar twittering-mode-syntax-table nil &#34;&#34;) @@ -363,8 +364,102 @@  (set-syntax-table twittering-mode-syntax-table)  (run-hooks &#39;twittering-mode-hook)  (font-lock-mode -1) - (twittering-start)) + (twittering-start) + (twittering-offline-init-icons) + (twittering-set-mode-line-identification))  +(defvar twittering-mode-line-identification nil) + +(defmacro twittering-display-image-p () + &#39;(and (display-images-p) +	(image-type-available-p &#39;xpm))) + +(defvar twittering-online-image nil) +(defvar twittering-offline-image nil) + +(defvar twittering-online-indicator &#34;[ON] &#34;) +(defvar twittering-offline-indicator &#34;[--] &#34;) +(defvar twittering-modeline-online twittering-online-indicator) +(defvar twittering-modeline-offline twittering-offline-indicator) +(put &#39;twittering-modeline-online &#39;risky-local-variable t) +(put &#39;twittering-modeline-offline &#39;risky-local-variable t) + +(defvar twittering-icon-directory + (expand-file-name &#34;icons/&#34; +	(file-name-directory +	(locate-library &#34;twittering-mode&#34;))) + &#34;* アイコンファイルが置かれたディレクトリ。nil ならアイコンを使わない。&#34;) + +;; folder icons.]]></description>
        </item>
        <item>
            <title><![CDATA[UIM のツールバーを消し、GNOME のパネルに UIM を表示させる方法]]></title>
            <link>https://masutaka.net/2009-08-08-1/</link>
            <guid>https://masutaka.net/2009-08-08-1/</guid>
            <pubDate>Sat, 08 Aug 2009 00:00:00 GMT</pubDate>
            <description><![CDATA[UIM は GNOME のパネルに表示するようにしていて、UIM のツールバーは表
示させないようにしたんだけど、会社で Lenny をインストールした時に設
定方法を忘れて、いろいろ調べたのでメモメモ。
GNOME パネルに UIM を表示させる GNOME パネルに UIM を表示させるには、uim-applet-gnome パッケージが
必要。「パネルを右クリック→パネルへ追加→入力メソッド表示器を追加」
すると、GNOME パネルに UIM を表示出来る。
UIM のツールバーを消す im-switch を使うと、UIM のツールバーを消すことが出来る。
 現在の設定確認 % im-switch -l
設定変更 % im-switch -c
 Lenny では、&ldquo;uim-toolbar&rdquo; を &ldquo;uim&rdquo; に変更することでツールバーを消す
ことができた。
自宅の Squeeze は &ldquo;default&rdquo; と &ldquo;default-xim&rdquo; の 2 種類が存在する。
現在の設定は &ldquo;default&rdquo; でツールバーは表示されていない。
~/.xprofile で以下の設定をする必要がある。設定しないとかな漢字変換
が出来ない。
GTK_IM_MODULE=uim export GTK_IM_MODULE UIM のボタンを極力減らす 表示される UIM のボタンを、「あ」だけにすることも出来る。
 設定→ツールバー→ボタン の選択をすべて外す。 設定→Anthy→ツールバー→有効にするボタン から、「かな入力方式」]]></description>
        </item>
        <item>
            <title><![CDATA[本日の買い物]]></title>
            <link>https://masutaka.net/2009-08-01-2/</link>
            <guid>https://masutaka.net/2009-08-01-2/</guid>
            <pubDate>Sat, 01 Aug 2009 01:00:00 GMT</pubDate>
            <description><![CDATA[今日は川崎のヨドバシでいろいろ買ってきました。
SATA II ケーブル SATAIIケーブル ストッパー付 片側Lコネクタ PSD30BK SATAIIケーブル ストッパー付 片側Lコネクタ PSD30BL オウルテック シリアルATA2ケーブル30cmブラック OWL-CBSATA-SLU30(BK) まずは SATA II ケーブル 3 本。これらは仕事で使います。先月、Samba
サーバ用に買った 2 台の内蔵 1TB HDD を接続するケーブルです。同じも
のが 3 つなかったので、色や種類が違う 3 本を買いました。1 本は予備
です。
↓先月買った内蔵 1TB HDD
 扇風機  ずいぶん前に壊れたきり夏はエアコンだけで過ごしていました。扇風機と
エアコンのコンボはかなり涼しいので、ずっと買おうと思っていたのです。
一番シンプルで一番安いものを選びました。ヨドバシのポイントを使った
ら、お代は￥0でした。:^)
ニンテンドーDSi + 液晶保護フィルム + ドラゴンクエストIX    ？？？ おかしいなあ。買うつもりじゃなかったのにｗ
実家に帰った時に、暇をつぶせそうです。]]></description>
        </item>
        <item>
            <title><![CDATA[twittering-mode で「λかわいいよλ」が文字化けする件を調べた]]></title>
            <link>https://masutaka.net/2009-08-01-1/</link>
            <guid>https://masutaka.net/2009-08-01-1/</guid>
            <pubDate>Sat, 01 Aug 2009 00:00:00 GMT</pubDate>
            <description><![CDATA[twittering-mode には、C-c C-l で「λかわいいよλ」と投稿できる、
よく分からない機能がある。たいてい間違って投稿されるのだと思う。ｗ
まあ、OFF にすればいいんだけどね。
よく分からない機能ではあるけど、実際に使ってみるとハングルのような
文字が投稿されてしまう。前から気づいていたんだけど、急に思い立って
調べてみることにした。
調査内容 まず、Emacs23 で再現し、Emacs22 では再現しないことが分かった。
twittering-update-lambda() の
&ldquo;\xd34b\xd22b\xd26f\xd224\xd224\xd268\xd34b&rdquo; を評価すると、以下のよ
うに結果が異なる。
Emacs22
Emacs23
&ldquo;λ&rdquo; の上にカーソルを置いて、&ldquo;C-u C-x =&rdquo; で文字コードを調べたところ、
Emacs22 は #xd34b で、Emacs23 は #x3bb だった。
mule-ja-2009:09607 で聞いてみたところ、Emacs23 では内部文字コードは
UNICODE になったとのこと。じゃあ Emacs22 はなんだろうと思ってググっ
てみたら、以下の変換式らしいと分かった。
 0xc000 + JIS上位バイト*128 + JIS下位バイト
http://www.dennougedougakkai-ndd.org/~delmonta/emacs/27.html  &ldquo;λ&rdquo; は JIS コードでは 0x264b、UNICODE(UTF-16) では 0x03bb 。
このことから、Emacs23 の内部文字コードが UNICODE である裏付けが取れた。
では &ldquo;λ&rdquo; の JIS コード 0x264b を、Emacs22 の変換式に当てはめてみようか。
 0xc000 + (0x26 * 0x80) + 0x4b = 0xd34b]]></description>
        </item>
        <item>
            <title><![CDATA[Emacs-23.1 のビルドとインストール]]></title>
            <link>https://masutaka.net/2009-07-31-2/</link>
            <guid>https://masutaka.net/2009-07-31-2/</guid>
            <pubDate>Fri, 31 Jul 2009 01:00:00 GMT</pubDate>
            <description><![CDATA[Emacs 23.1 released
http://lists.gnu.org/archive/html/emacs-devel/2009-07/msg01526.html もう飽きるほどやっている Emacs のビルドとインストールだが、23.1 リ
リース記念に記録を残すことにした。
 tar ball の展開。展開されて出来た emacs-23.1/INSTALL も確認すること。   % tar xjf emacs-23.1.tar.bz2
 ビルド用ワークディレクトリの作成と、チェンジディレクトリ。   % mkdir work; cd work
 configure 実行。xim は使わないので、OFF にした。
tee 使っているのはログを残すため。私はソースからのビルドする時には、
このように必ずログを残すようにしている。   % ../emacs-23.1/configure &ndash;without-xim 2&gt;&amp;1 | tee ../emacs-23.1_configure.log
% cp config.log ../emacs-23.1_config.log
このようなログが出力されれば成功。
 Where should the build process find the source code? /home/masutaka/share/src/emacs/emacs-23.1 What operating system and machine description files should Emacs use?]]></description>
        </item>
        <item>
            <title><![CDATA[ソースの検証]]></title>
            <link>https://masutaka.net/2009-07-31-1/</link>
            <guid>https://masutaka.net/2009-07-31-1/</guid>
            <pubDate>Fri, 31 Jul 2009 00:00:00 GMT</pubDate>
            <description><![CDATA[Emacs-23.1 がリリースされた。せっかくなのでソースが改竄されていないか、検証をしっかりやってみた。
Emacs 23.1 released
http://lists.gnu.org/archive/html/emacs-devel/2009-07/msg01526.html 上記によると、MD5 check-sums は以下のとおり。
17f7f0ba68a0432d58fa69d05a2225be emacs-23.1.tar.bz2 ふむ。合ってる。改竄はされていないだろう。
% md5sum emacs-23.1.tar.bz2 17f7f0ba68a0432d58fa69d05a2225be emacs-23.1.tar.bz2 しかし、MD5 が 100% 信用できるわけではないので、emacs-23.1.tar.bz2 と同じ場所にある emacs-23.1.tar.bz2.sig を使って、さらに確かめる。
% gpg --verify emacs-23.1.tar.bz2.sig emacs-23.1.tar.bz2 gpg: 2009年07月30日 10時18分53秒 JSTにDSA鍵ID BC40251Cで施された署名 gpg: 署名を検査できません: 公開鍵が見つかりません まあ、ID BC40251C の公開鍵は持ってないよね。公開鍵を取得しようか。
% gpg --keyserver pgp.nic.ad.jp --recv-keys BC40251C gpg: 鍵BC40251Cをhkpからサーバーpgp.nic.ad.jpに要求 gpg: 鍵BC40251C: 公開鍵“Chong Yidong &lt;cyd@stupidchicken.com&gt;”を読み込みました gpg: 絶対的に信用する鍵が見つかりません gpg: 処理数の合計: 1 gpg: 読込み: 1 再度検証。警告はされたが、正しい署名であることは確認できた。終了。
% gpg --verify emacs-23.1.tar.bz2.sig emacs-23.1.tar.bz2 gpg: 2009年07月30日 10時18分53秒 JSTにDSA鍵ID BC40251Cで施された署名 gpg: “Chong Yidong &lt;cyd@stupidchicken.]]></description>
        </item>
        <item>
            <title><![CDATA[lsof]]></title>
            <link>https://masutaka.net/2009-07-27-2/</link>
            <guid>https://masutaka.net/2009-07-27-2/</guid>
            <pubDate>Mon, 27 Jul 2009 01:00:00 GMT</pubDate>
            <description><![CDATA[Lsof オープン中のファイルと、そのファイルをオープンしているプロセスの
リストを出力するコマンド。
似たツールに netstat がある。
netstat このコマンドは、全てのアクティブな TCP コネクションと、そのマシンが
listen している TCP ポートおよび UDP ポートを表示する。
&ldquo;netstat -an&rdquo; と使うことが多い。netstat は Windows でも使える。]]></description>
        </item>
        <item>
            <title><![CDATA[パターンにマッチした行を削除]]></title>
            <link>https://masutaka.net/2009-07-27-1/</link>
            <guid>https://masutaka.net/2009-07-27-1/</guid>
            <pubDate>Mon, 27 Jul 2009 00:00:00 GMT</pubDate>
            <description><![CDATA[何をいまさらという感じもするけど。^^;
空行を削除
 % sed -e &lsquo;/^$/d&rsquo; hoge.txt
 hoge とだけ書かれた行を削除
 % sed -e &lsquo;/^hoge$/d&rsquo; hoge.txt
 ]]></description>
        </item>
        <item>
            <title><![CDATA[OpenOffice.org を使ってみた]]></title>
            <link>https://masutaka.net/2009-07-21-1/</link>
            <guid>https://masutaka.net/2009-07-21-1/</guid>
            <pubDate>Tue, 21 Jul 2009 00:00:00 GMT</pubDate>
            <description><![CDATA[OpenOffice.org 日本語プロジェクト OpenOffice.org に含まれる、プレゼンテーション用のアプリ Impress を
ちょろっと使ってみた。なかなか使いやすい。もう自宅用に MS-Office を
買うことはないと思う。
ただ、デフォルトでテンプレートが 2 つしか含まれていないのは面倒だった。
オープンオフィス 3 始める人のページ から辿ったページからダウンロードした。
OpenOffice.org(おーぷんおふぃす・おるぐ)とは？  オープンソースのオフィススウィート。 Windows、UNIX 系 OS、Mac OS X で動作する。 MS-Office と互換性がある。 PDF 形式で保存することも出来る。 世界的なシェアは増加傾向だそう。最近では会津若松市が有名。  会津若松市がOpenOffice.orgを全庁的に導入へ - スラッシュドット・ジャパン OpenOffice.org導入の会津若松市が、ノウハウをまとめCCで公開 - スラッシュドット・ジャパン MS-Office との関連付け    機能名 オープンオフィスでの名前 マイクロソフトオフィスの対応ソフト     ワープロ ライター (Writer) ワード (Word)   表計算 カルク (Calc) エクセル (Excel)   プレゼンテーション インプレス (Impress) パワーポイント (PowerPoint)   データベース ベース (Base) アクセス (Access)   図形描画 ドロー (Draw) -    ]]></description>
        </item>
        <item>
            <title><![CDATA[２台のマシンでキーボードとマウスを共有する]]></title>
            <link>https://masutaka.net/2009-07-20-3/</link>
            <guid>https://masutaka.net/2009-07-20-3/</guid>
            <pubDate>Mon, 20 Jul 2009 02:00:00 GMT</pubDate>
            <description><![CDATA[私は PC を 2 台持っていて、それぞれ以下の用途に使っている。
   用途 OS 形態     Windows マシン WindowsXP ノート PC   Linux マシン Debian GNU/Linux squeeze デスクトップ PC    ノート PC の液晶はずいぶん前から壊れていて、画面の半分位を縦線が占
めるようになってしまった。そのため、ノート PC とデスクトップ PC は
同じ液晶モニタに接続し、前面のボタンで画面を切り替えて使っている。
キーボードとマウスはそれぞれの PC に繋がっているものを使っている。
キーボードとマウスを共有させてみるか synergy を使えばノート PC に繋げているマウスが必要なくなって、机の
上を少し広く使えるかも？と、ふと思ったので早速試してみた。
synergy とはネットワーク上の複数のマシンのキーボードとマウスを共有
できるアプリ。Linux、Windows、Mac OS X に対応している。
設置ポリシー Linux マシンをサーバ、Windows マシンをクライアントとする。
サーバの設定   Synaptic パッケージマネージャから、synergy をインストールした。
(Synaptic からインストールすると履歴が残るので、私は最近 aptitude
ではなく Synaptic を使うようにしている。)]]></description>
        </item>
        <item>
            <title><![CDATA[テレビのリモコン]]></title>
            <link>https://masutaka.net/2009-07-20-2/</link>
            <guid>https://masutaka.net/2009-07-20-2/</guid>
            <pubDate>Mon, 20 Jul 2009 01:00:00 GMT</pubDate>
            <description><![CDATA[いろんな使い道があるんだなあ。(違)
   元ネタ:
テレビ埼玉のCMがマジでキチガイじみてる件 - アルファルファモザイク ]]></description>
        </item>
        <item>
            <title><![CDATA[キーロガー]]></title>
            <link>https://masutaka.net/2009-07-20-1/</link>
            <guid>https://masutaka.net/2009-07-20-1/</guid>
            <pubDate>Mon, 20 Jul 2009 00:00:00 GMT</pubDate>
            <description><![CDATA[ F1 l (M-x view-lossage)
それまでに打鍵した最後の 300 個のコマンド文字を表示します。
 ]]></description>
        </item>
        <item>
            <title><![CDATA[@nifty の DNS サーバ ]]></title>
            <link>https://masutaka.net/2009-07-18-3/</link>
            <guid>https://masutaka.net/2009-07-18-3/</guid>
            <pubDate>Sat, 18 Jul 2009 02:00:00 GMT</pubDate>
            <description><![CDATA[@nifty の DNS サーバがおかしくなったときに、代わりに使った DNS サーバ。
 202.248.37.74
202.248.20.133
 ちなみに、今日の WAN 側の設定は以下であった。
         IPアドレス 211.2.102.77   PPPサーバIP 218.231.1.55   DNS1(プライマリ) 218.231.0.3 (自動取得)   DNS2(セカンダリ) 218.231.0.35 (自動取得)   MTU値 1454    追記(2011-10-01):
今だったら、Google Public DNS を使えば良いね。
8.8.8.8 and 8.8.4.4]]></description>
        </item>
        <item>
            <title><![CDATA[minibuf-isearch]]></title>
            <link>https://masutaka.net/2009-07-18-2/</link>
            <guid>https://masutaka.net/2009-07-18-2/</guid>
            <pubDate>Sat, 18 Jul 2009 01:00:00 GMT</pubDate>
            <description><![CDATA[バージョンが古かったので最新にしようと思ったら、subversion リポジト
リが公開されていたことに気がついた。そこで、メンテナンスの手間を省
くために、site-lisp ディレクトリからシンボリックリンクを張ることにした。
 まず、以下のコマンドで適当なディレクトリに checkout した。  % svn checkout http://svn.coderepos.org/share/lang/elisp/minibuf-isearch /usr/local/share/emacs/site-lisp から、checkout した
minibuf-isearch ディレクトリにシンボリックリンクを張った。  minibuf-isearch とは？ Emacs のデフォルトの動作では、C-x C-f でファイル名を入力する時など
に、M-p を打つと１つ前の履歴を取り出すことが出来る。
minibuf-isearch を使うと、M-p の代わりに C-r することで履歴をインク
リメンタルに検索することが出来る。bash や zsh のそれと同じ。
設定例 参考までに私の設定は以下のとおり。
(require &#39;minibuf-isearch)  ;; メッセージがミニバッファの右端に表示される。 (setq minibuf-isearch-message-on-right t) 関連サイト minibuf-isearch オフィシャルサイト 横着プログラミング 第3回: 履歴マニア 追記(2011-11-27):
Emacs23 では minibuf-isearch 相当の機能が入っているので、
この elisp は不要になりました。]]></description>
        </item>
        <item>
            <title><![CDATA[QuickRestart]]></title>
            <link>https://masutaka.net/2009-07-18-1/</link>
            <guid>https://masutaka.net/2009-07-18-1/</guid>
            <pubDate>Sat, 18 Jul 2009 00:00:00 GMT</pubDate>
            <description><![CDATA[QuickRestart - Firefox Addons 「ファイル」メニューに「Firefoxを再起動する」を追加するだけのアドオン。
シンプルで素晴らしい。再起動時にタブの状態は保持される。]]></description>
        </item>
        <item>
            <title><![CDATA[Emacs講座 -第9回- C コーディングスタイル]]></title>
            <link>https://masutaka.net/2009-07-16-1/</link>
            <guid>https://masutaka.net/2009-07-16-1/</guid>
            <pubDate>Thu, 16 Jul 2009 00:00:00 GMT</pubDate>
            <description><![CDATA[目次 / 第1回 第2回 第3回 第4回 第5回 第6回 第7回 第8回 第9回
cc-mode Emacs では cc-mode というパッケージが C 系言語のコーディングスタイ
ルを統括しています。cc-mode はパッケージ名で、個々のメジャーモード
名は c-mode や c++-mode です。
cc-mode がサポートする言語を cc-mode.el から抜粋しておきます。
 CC Mode supports K&amp;R and ANSI C, ANSI C++, Objective-C, Java,
CORBA&rsquo;s IDL, Pike and AWK with a consistent indentation model
across all modes.
 設定例 前述の言語の中で私が使うのは C 言語だけで、以下の設定をしていました。
(add-hook &#39;c-mode-common-hook  (lambda ()  (c-set-style &#34;bsd&#34;) ;;; (a)  (setq c-basic-offset 4) ;;; (b)  ;; 演算式が複数行にまたがるときのオフセット  (c-set-offset &#39;statement-cont &#39;c-lineup-math) ;;; (c)  ;; 行末のスペースやタブに色づけして警告する。  (setq show-trailing-whitespace t))) ;;; (d) c-mode-common-hook は C と C++ 両方に影響する hook です。C だけに設]]></description>
        </item>
        <item>
            <title><![CDATA[dwww]]></title>
            <link>https://masutaka.net/2009-07-12-5/</link>
            <guid>https://masutaka.net/2009-07-12-5/</guid>
            <pubDate>Sun, 12 Jul 2009 04:00:00 GMT</pubDate>
            <description><![CDATA[dwww パッケージをインストールすると
[GNOME メニュー]→[アクセサリ]→[Debian Documentation Browser]
または
Synaptic メニューの [パッケージ]→[ドキュメントを参照]
からインストール済みの全オンライン文書を、ローカルの HTTP サーバで
参照することが出来る。(文書は英語。)
※ Synaptic は [GNOME メニュー]→[システム]→[システム管理]→
[Synaptic パッケージマネージャ] から起動できる。]]></description>
        </item>
        <item>
            <title><![CDATA[Software Sources]]></title>
            <link>https://masutaka.net/2009-07-12-4/</link>
            <guid>https://masutaka.net/2009-07-12-4/</guid>
            <pubDate>Sun, 12 Jul 2009 03:00:00 GMT</pubDate>
            <description><![CDATA[[GNOME メニュー]→[システム]→[システム管理]→[Software Sources]
インストールまたはアップデートできる APT パッケージの場所についての
情報は /etc/apt/sources.list に書かれている。
今までは場所の追加や削除をするときはテキストエディタで修正していた
が、&ldquo;Software Sources&rdquo; という GUI ツールがあるのを今日知った。今後
はこちらを使うことにしようかな。]]></description>
        </item>
        <item>
            <title><![CDATA[xpdf-japanese]]></title>
            <link>https://masutaka.net/2009-07-12-3/</link>
            <guid>https://masutaka.net/2009-07-12-3/</guid>
            <pubDate>Sun, 12 Jul 2009 02:00:00 GMT</pubDate>
            <description><![CDATA[文字化けする pdf ファイルがあったんだけど、xpdf-japanese をインストー
ルしたら文字化けが直った。
# aptitude install xpdf-japanese xpdf-japanese の他に、cmap-adobe-japan1 ttf-kochi-gothic
ttf-kochi-mincho が自動的にインストールされた。]]></description>
        </item>
        <item>
            <title><![CDATA[ディレクトリ→ファイルの順に並べる]]></title>
            <link>https://masutaka.net/2009-07-12-2/</link>
            <guid>https://masutaka.net/2009-07-12-2/</guid>
            <pubDate>Sun, 12 Jul 2009 01:00:00 GMT</pubDate>
            <description><![CDATA[Dired の表示を Windows のように「ディレクトリ→ファイル」の順にする方法。
(add-hook &#39;dired-load-hook  (lambda ()  (require &#39;ls-lisp)  (setq ls-lisp-use-insert-directory-program nil)  (setq ls-lisp-dirs-first t))) ls コマンドの代わりに elisp でディレクトリを表示することになるので、
表示は遅いかもしれない。まあ参考程度で。]]></description>
        </item>
        <item>
            <title><![CDATA[行間を広くする]]></title>
            <link>https://masutaka.net/2009-07-12-1/</link>
            <guid>https://masutaka.net/2009-07-12-1/</guid>
            <pubDate>Sun, 12 Jul 2009 00:00:00 GMT</pubDate>
            <description><![CDATA[VL ゴシックの行間が広いので狭くする方法を調べていたら、広くする方法
が見つかった。ｗ
(setq line-spacing 0.1) 小数値を設定すると行の高さに対して相対値で設定され、整数値を設定す
るとピクセル数で設定されるらしい。
設定すると即座にカレントバッファに反映されるので、Emacs を 2 つ起動
してちょうど良い値を設定すると良いと思う。
VL ゴシックの行間を狭める方法は継続して調査中。フォントを変更する以
外ない気がしているので、他のフォントに変えることも検討している。
参考にしたページ:
Emacsのとりあえず最低限の環境を整える - ubulog ]]></description>
        </item>
        <item>
            <title><![CDATA[テカテカでない液晶モニタを買いました]]></title>
            <link>https://masutaka.net/2009-07-11-1/</link>
            <guid>https://masutaka.net/2009-07-11-1/</guid>
            <pubDate>Sat, 11 Jul 2009 00:00:00 GMT</pubDate>
            <description><![CDATA[去年の８月に DELL Inspiron 530s と一緒に買った光沢液晶 (SP2208WFP )
を使い始めてから、目がやけに疲れるようになりました。視力も落ちたと
思います。
最近特に耐えられなくなってきたので、今日ヨドバシで三菱のノングレア
液晶モニタを買いました。店頭価格は ￥31,070 でしたが、溜まっていた
ポイントを使ったら ￥25,199 になりました。
 購入する時にこだわったこと、こだわらなかったことです。
 絶対にグレア液晶は買いません。 サイズは今と同じ 22 インチワイドです。 色味にこだわりはありません。テキストが見やすいものを買います。 スピーカーが付属したものを買います。ただし音にこだわりはありません。 入力デバイスの切り替えがスムーズにできるものを買います。  やっぱり、ノングレア液晶はいいですねえ。良い買い物をしました。
以下は購入してから分かったことです。
 高さは、３個付属するプラスチックのブロックを付けたり外したりして調
節します。微妙な調節はできませんが、特に不満はありませんでした。 画面の角度は、ある程度自由に変えられます。 安定感は少しなくなりますが、底のスタンドの後部を外すと、作業スペー
スを広く保てます。 一体型スピーカーは ≫ ボタンで音量調整できます。スピーカーの音は、
やはりショボかったです。 メニューから、スタンダード、テキスト、ムービー等の映像モードを選べ
ます。もちろん、自分で微調整もできます。メニューに入らずに ≪ ボタ
ンからのショートカットも用意されています。 INPUT/EXIT ボタンを 1 回押すだけで、次の入力デバイスに変更出来ます。  SP2208WFP に比べ、良くなったこと、悪くなったことです。
良くなったこと
 照明器具や太陽の光が映り込まなくなりました。 自分の姿が映り込まなくなりました。 テキストが見やすくなりました。 画面を暗くしても、テキストが見づらくならなくなりました。 入力デバイスを変更するために押すボタンの回数が減りました。今までは
4 回くらい押す必要がありましたが、今は 1 回で済みます。INPUT/EXIT
ボタンを押した時に、使っていない入力デバイスをスキップ出来る点は気
が利いています。  悪くなったこと
 結構簡単に本体が揺れます。底のスタンド後部を外したため？ 音がショボくなりました。 スピーカーの音量調節がやりづらくなりました。(前はダイヤル式で簡単で]]></description>
        </item>
        <item>
            <title><![CDATA[Emacs講座 -第8回- タブ幅]]></title>
            <link>https://masutaka.net/2009-07-10-4/</link>
            <guid>https://masutaka.net/2009-07-10-4/</guid>
            <pubDate>Fri, 10 Jul 2009 03:00:00 GMT</pubDate>
            <description><![CDATA[目次 / 第1回 第2回 第3回 第4回 第5回 第6回 第7回 第8回 第9回 ３つの変数 Emacs のタブ幅には、３つの変数が関係しています。
tab-width タブコードを半角スペースいくつ分で表示するかを制御する変数です。
各バッファ毎に設定できます。デフォルトは 8 です。
default-tab-width tab-width のデフォルト値です。全てのバッファに影響する変数です。
デフォルトは 8 です。
tab-stop-list TAB キーを押した時に、カーソルが移動するカラムの位置です。デフォル
トは (8 16 24 32 40 48 56 64 72 80 88 96 104 112 120) です。
例えばタブ幅を 4 に変更したい場合は以下のようなコードを ~/.emacs に
記述します。
(setq-default tab-width 4) (setq default-tab-width 4) (setq tab-stop-list &#39;(4 8 12 16 20 24 28 32 36 40 44 48 52 56 60  64 68 72 76 80 84 88 92 96 100 104 108 112 116 120)) 関数化してみよう tab-stop-list の設定が少し煩雑ですよね。以前は手計算で]]></description>
        </item>
        <item>
            <title><![CDATA[スロトレ]]></title>
            <link>https://masutaka.net/2009-07-10-3/</link>
            <guid>https://masutaka.net/2009-07-10-3/</guid>
            <pubDate>Fri, 10 Jul 2009 02:00:00 GMT</pubDate>
            <description><![CDATA[[2008-12-12-2] に買った「一生太らない体のつくり方 」。
付録のスロトレの動画を見つけた。これは参考になるわ。
メタボ侍「スロトレ」に挑戦！石井直方教授に聞く
1/5 ウォームアップ -- YouTube 2/5 ニートゥチェスト -- YouTube 3/5 スクワット -- YouTube 4/5 プッシュアップ -- YouTube 5/5 アームレッグクロスレイズ -- YouTube 付録のプッシュアップは台の上に手をついてやっていたんだけど、この動
画では台は使っていない。必要ってわけじゃないのか。ちょうどよい台が
なかったから助かる。
追記(2009-07-13):
この動画だとストレッチをやっていないけれど、ストレッチは非常に大事
らしいので、実際はストレッチを間にはさんでください。本当にやるんだっ
たら、本を買った方が良いと思いますけど。]]></description>
        </item>
        <item>
            <title><![CDATA[swf から音声を抜き出す方法]]></title>
            <link>https://masutaka.net/2009-07-10-2/</link>
            <guid>https://masutaka.net/2009-07-10-2/</guid>
            <pubDate>Fri, 10 Jul 2009 01:00:00 GMT</pubDate>
            <description><![CDATA[swftools をインストールする。
# aptitude install swftools swfextract コマンドに -m を付けると、音声を output.mp3 に出力する。
% swfextract -m hoge.swf -o を付けると、ファイル名を指定できる。
% swfextract -mo hoge.mp3 hoge.swf [linux]swfから音声を抜き出す方法 - (rubikitch loves (Emacs Ruby CUI)) ]]></description>
        </item>
        <item>
            <title><![CDATA[水平スクロール]]></title>
            <link>https://masutaka.net/2009-07-10-1/</link>
            <guid>https://masutaka.net/2009-07-10-1/</guid>
            <pubDate>Fri, 10 Jul 2009 00:00:00 GMT</pubDate>
            <description><![CDATA[間違って実行することがあって地味に困るので、メモしておく。
&ldquo;C-x &lt;&rdquo; or &ldquo;M-x scroll-left&rdquo;
カレントウィンドウのテキストを左にスクロールする。
&ldquo;C-x &gt;&rdquo; or &ldquo;M-x scroll-right&rdquo;
右にスクロールする。
以下の設定をしておくと、ポイントがウィンドウの右端からはみ出した時
に自動で横方向にスクロールする。
(setq truncate-lines t) ]]></description>
        </item>
        <item>
            <title><![CDATA[Emacs講座 -第7回- 文字コード]]></title>
            <link>https://masutaka.net/2009-07-09-1/</link>
            <guid>https://masutaka.net/2009-07-09-1/</guid>
            <pubDate>Thu, 09 Jul 2009 00:00:00 GMT</pubDate>
            <description><![CDATA[目次 / 第1回 第2回 第3回 第4回 第5回 第6回 第7回 第8回 第9回 さあ、文字コードです。
文字コードの設定 いきなり矛盾しますが、最近の Emacs(例:23.3) では文字コードの設定は
不要です。
Emacs はデフォルトの状態でも、文字コードを自動判別してファイルを開
くことが出来ます。新規作成ファイルの文字コードも locale の設定によっ
て自動決定されます。
もしあなたの ~/.emacs に下の設定が書いてあったら削除しましょう。
もはや廃れた設定です。参考情報: mule-ja-2009:09813 (set-language-environment &#34;Japanese&#34;) (prefer-coding-system &#39;utf-8) (set-default-coding-systems &#39;utf-8) (set-terminal-coding-system &#39;utf-8) (set-keyboard-coding-system &#39;utf-8) (setq-default buffer-file-coding-system &#39;utf-8) Mac OS X における文字コードの設定 Mac ではファイルシステムに HFS+ を使っているため、濁点や半濁点の扱
いが Windows と Linux と異なるそうです。これを回避するため、以下の
設定が必要とのこと。Emacs-23.2 以上で設定可能です。
(require &#39;ucs-normalize) (set-file-name-coding-system &#39;utf-8-hfs) (setq locale-coding-system &#39;utf-8-hfs) 紹介マニアどらふと版: Mac OS X におけるファイル名に関するメモ(NFC, NFD等) 文字コード関連の便利機能 Ctrl-x Ctrl-m c &lt;文字コード&gt; [Enter] Ctrl-x Ctrl-v [Enter] 文字コードを指定し直して、現在開いているファイルを開き直す方法です。]]></description>
        </item>
        <item>
            <title><![CDATA[Emacs講座 -第6回- load-path]]></title>
            <link>https://masutaka.net/2009-07-05-3/</link>
            <guid>https://masutaka.net/2009-07-05-3/</guid>
            <pubDate>Sun, 05 Jul 2009 02:00:00 GMT</pubDate>
            <description><![CDATA[目次 / 第1回 第2回 第3回 第4回 第5回 第6回 第7回 第8回 第9回 本項は、ネット上から *.el をダウンロードして、いろいろ試したくなってきたあたりで読むと良いと思います。load-path の仕組みを理解しましょう。
load-path とは何か？ UNIX や Windows 等に存在する「環境変数 PATH」の Emacs 版です。
例えば ls を実行すると、「環境変数 PATH」に登録された最初のディレクトリから ls が検索され、最初にヒットした ls が使われますよね？
また、どのディレクトリにも ls が存在しなければ、
 command not found: ls
 などといったエラーが発生します。
Emacs では例えば ~/.emacs に以下のようなコードを書くと load-path が参照されます。
(require &#39;hoge) load-path は Emacs Lisp の変数です。どんな値が入っているのかは第3回 の方法で調べられます。
load-path には複数のディレクトリが登録されているはずです。
まず先頭のディレクトリについて、以下の順で検査が行われます。第2回 の .emacs と同じですね。
 hoge.elc が存在するか？ hoge.el が存在するか？ hoge が存在するか？  1, 2, 3 のどれにも当てはまらなければ、次のディレクトリが検査されます。]]></description>
        </item>
        <item>
            <title><![CDATA[Twitter の便利情報]]></title>
            <link>https://masutaka.net/2009-07-05-2/</link>
            <guid>https://masutaka.net/2009-07-05-2/</guid>
            <pubDate>Sun, 05 Jul 2009 01:00:00 GMT</pubDate>
            <description><![CDATA[私のTwitterスタイル - 304 Not Modified ◎buzztter 今 Twitter のタイムラインで頻出しているキーワードを教えてくれるサービス。
◎ふぁぼったー Twitter にあるお気に入りの可視化サービス。自分の発言が誰にどのくら
いふぁぼられているのかが分かる。→ マスタカのふぁぼられ Twitter には、まだまだ私の知らない使い道がありそう。]]></description>
        </item>
        <item>
            <title><![CDATA[move-file-to-trash]]></title>
            <link>https://masutaka.net/2009-07-05-1/</link>
            <guid>https://masutaka.net/2009-07-05-1/</guid>
            <pubDate>Sun, 05 Jul 2009 00:00:00 GMT</pubDate>
            <description><![CDATA[Emacs23 から使えるようになった関数。Dired からも使えるようにすると
便利かもしれない。
実行すると以下のプロンプトが現われ、ファイル名かディレクトリ名の
入力を促される。
 Move file to trash: ~/
 指定したファイルやディレクトリは trash-directory に移動される。
trash-directory の初期値は &ldquo;~/.Trash&rdquo;。
既に trash-directory に同名のファイルがあると、以下のようにリネーム
されるようだ。
 hoge.txt
hoge.txt.~1~
 ]]></description>
        </item>
        <item>
            <title><![CDATA[Emacs講座 -第5回- キーバインドの変更]]></title>
            <link>https://masutaka.net/2009-07-02-2/</link>
            <guid>https://masutaka.net/2009-07-02-2/</guid>
            <pubDate>Thu, 02 Jul 2009 01:00:00 GMT</pubDate>
            <description><![CDATA[目次 / 第1回 第2回 第3回 第4回 第5回 第6回 第7回 第8回 第9回 Emacs では数多くの関数がキーに割り当てられています。その中には押しやすいものもあれば、押しづらいものもあります。また、全ての関数がキーに割り当てられているわけではないため、頻繁に使う関数なのに
 M-x hogehoge [Enter]
 などと実行しなければならない場合もあります。
という状況ではありますが、Emacs のキーバインドはフルカスタマイズ可能です。カスタマイズするしかないでしょう。:-)
ポリシー 私は以下のことを念頭に置いて、キーバインドを変更しています。
 デフォルトのキーバインドは、極力変更しない。 連打することがあるコマンドは１ストローク(例: Ctrl-t)。 連打する必要が少ない、もしくはやや危険なコマンドは２ストローク(例: Ctrl-q Ctrl-h)。 ２ストロークにする時は、全て Ctrl-q Ctrl-h のような Ctrl を介したものにする。例えば Ctrl-q h だと、Ctrl キーを一旦ニュートラルにする必要があるので、Ctrl-q Ctrl-h より確実に遅い。 カーソルキーやファンクションキーは遠いので、極力使わない。  知っておくべきこと 例えば、Ctrl-n というキーを押すと next-line という関数が呼ばれます。Ctrl-f は forward-char です。ただの a というキーにも self-insert-command という関数が割り当てられています。
このように、全てのキーに関数が割り当てられています。
では、どうやって調べたらよいでしょうか？これを調べるヘルプコマンドが、以下になります。ミニバッファに関数名が表示されます。
 F1 c 調べたいキー操作
 &ldquo;F1 c&rdquo; 自体も、もちろん関数呼び出しとなっています。上の方法で調べると、describe-key-briefly という関数だと分かります。
逆に、ある関数がどのキーに割り当てられているのかは、&ldquo;F1 w&rdquo; で分かります。]]></description>
        </item>
        <item>
            <title><![CDATA[セキュアコーディング]]></title>
            <link>https://masutaka.net/2009-07-02-1/</link>
            <guid>https://masutaka.net/2009-07-02-1/</guid>
            <pubDate>Thu, 02 Jul 2009 00:00:00 GMT</pubDate>
            <description><![CDATA[セキュアコーディング - JPCERT コーディネーションセンター ここに無料セミナーの案内が掲示されています。
 「C/C++ セキュアコーディング　ハーフデイキャンプのご案内 」
 Part 1. 7月16日(木) 13:00-18:00 「文字列、整数」 Part 2. 8月 7日(金) 13:00-18:00 「ファイル入出力」 Part 3. 9月10日(木) 13:00-18:00 「動的メモリ管理、書式指定文字列」   昨年度の資料をダウンロードできます。
http://www.jpcert.or.jp/research/materials.html セキュアコーディングのドキュメントもダウンロードできます。
http://www.jpcert.or.jp/sc-rules/ まだ読んでないけど、無料とはすごい！！]]></description>
        </item>
        <item>
            <title><![CDATA[Firefox3.5リリース！！]]></title>
            <link>https://masutaka.net/2009-07-01-1/</link>
            <guid>https://masutaka.net/2009-07-01-1/</guid>
            <pubDate>Wed, 01 Jul 2009 00:00:00 GMT</pubDate>
            <description><![CDATA[Firefox3.5 がリリースされたようですね。
ツイッターでやけに話題が多いなあと思ったら、そういうことだったか。
私はサイドメニューに付けた Discover Shiretoko で知りました。^^; [2009-06-24-1] ただし、もう少し様子見します。少なくとも Tab Mix Plus は
まだ対応していないようなので。
Mozilla Japan - 次世代ブラウザ Firefox とメールソフト Thunderbird の公式サイト ]]></description>
        </item>
        <item>
            <title><![CDATA[Emacs講座 -第4回- カーソル移動]]></title>
            <link>https://masutaka.net/2009-06-30-2/</link>
            <guid>https://masutaka.net/2009-06-30-2/</guid>
            <pubDate>Tue, 30 Jun 2009 01:00:00 GMT</pubDate>
            <description><![CDATA[目次 / 第1回 第2回 第3回 第4回 第5回 第6回 第7回 第8回 第9回 高速なカーソル移動は、エディタを使う上で重要なポイントになります。
上下左右以外の移動手段を無意識に使えるようになることが、高速化のコ
ツだと思います。
※「emacs 雑記」の motion に触発されて書いてみましたが、かなりパク
リになってしまいました。
上下左右  それぞれ、Ctrl-p, Ctrl-n, Ctrl-b, Ctrl-f に割り当てられています。 十字キーでも移動できますが、こちらの方がホームポジションからの距
離が短いので効率が良いはずです。 前置き引数を付けると、「何文字だけ移動」とか「何行だけ移動」とか
出来ます。           Ctrl-u Ctrl-f 4 文字右に移動   Ctrl-u Ctrl-u Ctrl-n 16 行下に移動   Ctrl-u 7 Ctrl-b 7 文字左に移動    前の単語、次の単語  それぞれ、Meta-b, Meta-f に割り当てられています。 英文だと正確に単語単位で移動しますが、日本語だと単語の区切りがお
おざっぱです。ただ、通常の左右移動の高速版と考えると、かなり使えます。 私はそれぞれ、Ctrl-, と Ctrl-.]]></description>
        </item>
        <item>
            <title><![CDATA[「Linux 標準教科書」と「Linux サーバー構築標準教科書」]]></title>
            <link>https://masutaka.net/2009-06-30-1/</link>
            <guid>https://masutaka.net/2009-06-30-1/</guid>
            <pubDate>Tue, 30 Jun 2009 00:00:00 GMT</pubDate>
            <description><![CDATA[Linux標準教科書Wiki  Linuxサーバー構築標準教科書 Wiki   アンケートに答えると、それぞれ pdf ファイルを無料でダウンロードできる。
かなりボリュームがあるが、体系的な知識の習得に良さそう。]]></description>
        </item>
        <item>
            <title><![CDATA[Meadow の背景色を半透明にする]]></title>
            <link>https://masutaka.net/2009-06-29-2/</link>
            <guid>https://masutaka.net/2009-06-29-2/</guid>
            <pubDate>Mon, 29 Jun 2009 01:00:00 GMT</pubDate>
            <description><![CDATA[世界を股にかける某氏から質問されたので、調べてみた。
Meadow は default-frame-alist に alpha の設定をするだけで、フレーム
を簡単に半透明に出来るようだ。試した Meadow のバージョンは 3.00-dev (菊)。
(setq default-frame-alist  &#39;((alpha . (nil 70 50 30)) 	... 	)) この例の (nil 70 50 30) は、前から順番に
 通常のフレーム アクティブでないフレーム 移動中のフレーム サイズ変更中のフレーム
の透明度を示すとのこと。
nil は通常の状態。0 がより透明に近く、100 がより通常に近い。  参考情報: 26.1.7 背景色を半透明にする - Meadow/Emacs memo ]]></description>
        </item>
        <item>
            <title><![CDATA[Emacs が開ける最大ファイルサイズ]]></title>
            <link>https://masutaka.net/2009-06-29-1/</link>
            <guid>https://masutaka.net/2009-06-29-1/</guid>
            <pubDate>Mon, 29 Jun 2009 00:00:00 GMT</pubDate>
            <description><![CDATA[以下のように scratch バッファなどで調べることができるようだ。
Emacs22 は 256MB だった。
(let ((i 1024))  (while (&gt; i 0)  (setq i (* i 2)))  (1- i)) 268435455  (1+ 268435455) -268435456  (/ 268435456.0 1024 1024) 256.0 Emacs21 は 128MB だった。昔なつかしい nemacs は 8MB だった。
参考情報:
EmacsFileSizeLimit - emacswiki [2010-06-19-2] 追記(2010-03-13):
Emacs23 は 512MB に上がっていました。]]></description>
        </item>
        <item>
            <title><![CDATA[Emacs講座 -第3回- *scratch* バッファ]]></title>
            <link>https://masutaka.net/2009-06-28-1/</link>
            <guid>https://masutaka.net/2009-06-28-1/</guid>
            <pubDate>Sun, 28 Jun 2009 00:00:00 GMT</pubDate>
            <description><![CDATA[目次 / 第1回 第2回 第3回 第4回 第5回 第6回 第7回 第8回 第9回 本項は、いろいろな設定を .emacs にコピペし始めたあたりで読むと良い
と思います。コピペ房から脱却しましょう。
.emacs で多い設定の一つに
(setq message-log-max 256) などといった setq 文があると思います。上記例では、message-log-max
という変数に 256 という値を代入しています。(message-log-max
は、Messages バッファに保存される最大行数を格納する変数です。)
では設定しないと、message-log-max にはどのような値が入っているので
しょう？ scratch バッファを使うと簡単に調べられます。
message-log-max を scratch バッファにコピペし、message-log-max の
後ろで Ctrl-j してみてください。前述の設定をしないと 100 が、設定を
すると 256 が出力されると思います。
message-log-max =&gt;100 ※ 変数のヘルプからも、現在の値を確認できます。
 F1 v message-log-max [Enter]
 実は上の方法は単に変数の値を調べているのではなく、変数を評価してい
ます。
もっと正確に言うと、message-log-max というシンボルを評価しています。
評価の結果(戻り値)が 100 というわけです。シンボルは S 式の最小単位
です。S 式が分からなければ、単に「式」と読み替えていただいて構いま
せん。
さて、もっとも典型的な S 式は前述のような (setq message-log-max 256)]]></description>
        </item>
        <item>
            <title><![CDATA[セゾンカード年会費無料の秘密]]></title>
            <link>https://masutaka.net/2009-06-27-3/</link>
            <guid>https://masutaka.net/2009-06-27-3/</guid>
            <pubDate>Sat, 27 Jun 2009 02:00:00 GMT</pubDate>
            <description><![CDATA[wikipedia によると、セゾンカードが年会費無料なのは大きく 2 つの理由
かららしい。
その１ ポイントが永久不滅
これによりカードの稼働率が上がるそうで、損失を防ぐ効果があるらしい。
その２ 他社と違って盗難保険の契約をしていない
カードが不正利用されたときは、セゾン自社の損害になるらしい。
これは少し心配だな。]]></description>
        </item>
        <item>
            <title><![CDATA[ibuffer を試してみた]]></title>
            <link>https://masutaka.net/2009-06-27-2/</link>
            <guid>https://masutaka.net/2009-06-27-2/</guid>
            <pubDate>Sat, 27 Jun 2009 01:00:00 GMT</pubDate>
            <description><![CDATA[[2009-06-07-4] からの浮気。
buffer-menu に慣れていたせいか、別ウィンドウに表示される bs-show に
どうも馴染めない。ibuffer に浮気してしまおう。
(define-key ctl-x-map (kbd &#34;C-b&#34;) &#39;ibuffer) ibuffer の良いところは、現在開いている全てのバッファに対して置換を
かけられるところ。
m' で置換したいバッファにマークし、Q&rsquo; で問い合わせ置換、`U&rsquo; で問
い合わせなし置換を実行。
u' するとカーソル下のバッファのマークを消せる。* *&rsquo; で全てのマー
クを消せる。
,' すると条件を切り替えながらソートしてくれる。その中の一つに major-mode で並び替える s m&rsquo; があるが、これで並び替えると良さげ。
`?&rsquo; でヘルプが表示される。]]></description>
        </item>
        <item>
            <title><![CDATA[Emacs講座 -第2回- .emacs (どっと いーまっくす)]]></title>
            <link>https://masutaka.net/2009-06-27-1/</link>
            <guid>https://masutaka.net/2009-06-27-1/</guid>
            <pubDate>Sat, 27 Jun 2009 00:00:00 GMT</pubDate>
            <description><![CDATA[目次 / 第1回 第2回 第3回 第4回 第5回 第6回 第7回 第8回 第9回 何はなくとも .emacs (どっと いーまっくす) です。
Emacs は起動すると次の順番にユーザ設定ファイルを検索し、最初にヒッ
トしたものを読み込みます。これがいわゆる .emacs (どっと いーまっく
す) です。(最近の Emacs は ~/.emacs.d/init.el も使えます。)
  ~/.emacs.elc ~/.emacs.el ~/.emacs   .emacs.elc は、.emacs.el や .emacs を以下のようにバイトコンパイルし
たものです(他の方法もあります)。
 % emacs -Q -batch -f batch-byte-compile ~/.emacs
 バイトコンパイルすると、起動時間や実行時間が少し短くなります。
ただ、.emacs を修正した後にバイトコンパイルし忘れると、前述の読み込
み順番のため、古い設定のまま Emacs が起動するという弊害もあります。
.emacs.el と .emacs は名前が違うだけです。
.emacs の他に site-start.el と default.el もあります。あまり意識す
ることはないかもしれませんが、管理者が全ユーザに設定させたい内容を
記載して使います。[2008-05-15-1] もご覧下さい。
-q オプションはよく使います。こうすると ~/.]]></description>
        </item>
        <item>
            <title><![CDATA[Emacs講座 -第1回- Emacs と私]]></title>
            <link>https://masutaka.net/2009-06-26-2/</link>
            <guid>https://masutaka.net/2009-06-26-2/</guid>
            <pubDate>Fri, 26 Jun 2009 01:00:00 GMT</pubDate>
            <description><![CDATA[目次 / 第1回 第2回 第3回 第4回 第5回 第6回 第7回 第8回 第9回 GNU Emacs に初めて出会ったのは、入社した時に使った Nemacs でした。
Solaris2.6 にインストールされていました。2000 年入社なので、使い始
めてもう 10 年です。
ちょうど良い区切りなので、初心者から脱却したい人向けに、まとまった
文章を書くことにしました。今回はそのイントロです。GNU Emacs は
Emacs と略します。XEmacs の話はしない予定です。
さて、入社当時の話に戻ります。
最初は訳が分からなかったため、Nemacs はすぐに使わなくなりました。
Windows に C ソースをコピーして秀丸で編集したり、rmail を使わずに
Becky! を使ったりしていました。しかし、Windows がない環境で仕事をす
ることになったため、腹を決めて Emacs と付き合っていくことにしました。
その環境には運良く Mule がインストールされていました。私は C ソース
を Mule で編集し、mh-e でメールを読み書きすることになりました。
そういえば、今も覚えていることがあります。当時はファイルを開くたび
に Mule を起動していましたが、職場の上司は Dired でディレクトリを開
いて、そこからファイルをいくつも開いていました。shell-mode も使って
いたかもしれません。ああ、こういう使い方をするエディタなんだと思っ
たことを覚えています。
当時はいろんな人の ~/.emacs を読み漁りました。職場の人のものや、ネッ
ト上に転がっているものです。
ネット上で特に参考になったのは、GANAWARE に置いてある .emacs です。]]></description>
        </item>
        <item>
            <title><![CDATA[Emacs講座 -目次-]]></title>
            <link>https://masutaka.net/2009-06-26-1/</link>
            <guid>https://masutaka.net/2009-06-26-1/</guid>
            <pubDate>Fri, 26 Jun 2009 00:00:00 GMT</pubDate>
            <description><![CDATA[-第1回- Emacs と私 -第2回- .emacs (どっと いーまっくす) -第3回- *scratch* バッファ -第4回- カーソル移動 -第5回- キーバインドの変更 -第6回- load-path -第7回- 文字コード -第8回- タブ幅 -第9回- C コーディングスタイル Emacs のバージョンは 23.3 を想定しています。22 以下は考慮しないこと
にします。
Emacs の全てを説明することは出来ないので、私の書きたい内容を書きた
い順番で書いています。
以下は今後の予定。
-第10回- 私の .emacs (どっと いーまっくす)
-第11回- edebugger
-第12回- 次の関数、前の関数]]></description>
        </item>
        <item>
            <title><![CDATA[みずほから他銀行への振込手数料が無料になっていた！！]]></title>
            <link>https://masutaka.net/2009-06-25-2/</link>
            <guid>https://masutaka.net/2009-06-25-2/</guid>
            <pubDate>Thu, 25 Jun 2009 01:00:00 GMT</pubDate>
            <description><![CDATA[今日ネットバンキングで家賃を振り込んだら、なぜか手数料がかからなかった。
みずほマイレージクラブ &gt; うれしい特典 &gt; 振込手数料割引・無料 どうやら 6/1 から、みずほマイレージクラブにこのうれしい特典が加わっ
たようだ。
他銀行への振り込みが月 3 回まで無料になった。私の場合では年間
￥315*12=￥3,780 の手数料が必要なくなった。大した額ではないが、普通
にうれしい。
みずほマイレージクラブの他の特典として、みずほ ATM やコンビニ ATM
の時間外手数料無料というのがある。今までなんでかからないのかな〜と
思っていたんだけど、そういうことだったのね。^^;
これらの特典を受けるためには、3 つの条件のうち 1 つを満たしていれば
良い。ただ以下のとおり、そのうちの 1 つは条件が緩いので、満たすのは
難しくないと思う。
みずほマイレージクラブ &gt; うれしい特典 &gt; お取引条件  お取引条件1
各種預金［円預金（普通〔無利息型を除く〕・貯蓄・定期）、外貨預金
（普通・定期）（注1）］、投資信託（注1）、金融債［財形金融債を除
く］、公共債（注1）などの月末合計残高が10万円以上
 年会費は必要ない。詳細は以下をどうぞ。
みずほマイレージクラブ ]]></description>
        </item>
        <item>
            <title><![CDATA[ドラクエ風ステータスジェネレータ]]></title>
            <link>https://masutaka.net/2009-06-25-1/</link>
            <guid>https://masutaka.net/2009-06-25-1/</guid>
            <pubDate>Thu, 25 Jun 2009 00:00:00 GMT</pubDate>
            <description><![CDATA[ドラクエ風ステータスジェネレータをいくつか - たつをの ChangeLog さっそくやってみた。
ドラクエ3 風 ステータス ジェネレーター  なぜ女！？良い点は「武器」「うんのよさ」くらいか。
無駄に高いレベルがもの悲しいです。
カタカナにしただけで、正統的な勇者になりました。(・∀・)
良い防具を持たせれば、すぐにでもゾーマを倒せるでしょう。
ドラクエ風ステータス  釣りは好きではないのだけれど。(´・ω・`)
経験値がゼロで、レベルが35なのはすごい！！
ノートよりも、メモ帳が欲しかった。
また釣りバカかよ。。゜(゜´∀｀゜)゜。。
今度はまるで取り柄がありません。オニオンシリーズだけが救いです。]]></description>
        </item>
        <item>
            <title><![CDATA[Discover Shiretoko]]></title>
            <link>https://masutaka.net/2009-06-24-1/</link>
            <guid>https://masutaka.net/2009-06-24-1/</guid>
            <pubDate>Wed, 24 Jun 2009 00:00:00 GMT</pubDate>
            <description><![CDATA[Firefoxと知床がコラボしたキャンペーン「Discover Shiretoko」 - スラッシュドットジャパン そろそろ、Firefox3.5 が出るらしい。開発ネームが「Shiretoko」とのこ
とで、「Discovert Shiretoko 」というキャンペーンを実施しているようだ。
自分のサイトにバナーを貼って、上記キャンペーンサイトへの誘導を行う
と、Web 上の自分の樹が成長するらしい。8 月 31 日までの期間限定のよ
うなので、さっそく左側のメニューバーに追加してみた。
知床と Firefox というミスマッチもさることながら、上のサイトで使われ
ている Web 技術も興味深い。HTML5 で追加されることになる Canvas とい
うグラフィック技術らしく、「JavaScriptを使って平面や立体図をブラウ
ザ上に描画でき、様々な画像効果や動画再生といったことをプラグインな
しで実現できること」とのこと。Firefox は v1.5 からサポートしている
ようだ。
日本語チュートリアル も用意されていた。早い。moveTo とか lineTo とか
どこかで聞いたような名前が。。。
フォクすけ萌えのあなたに。→ フォクすけの Firefox 情報局 追記(2009-06-26):
ようやく 660 番に自分の樹を見つけた。本みたいなものはページ中央をダ
ブルクリックもしくはドラッグすると、次のページに行ける。ずーっと、
折り返しになっている部分をいじっていたんだけど出来なくて、数字を直
接入れて自分の樹を探していた。orz
追記(2009-10-03):
2009 年 9 月 18 日にキャンペーンが終了し「樹の成長」もストップした
そうなので、バナーを削除しました。
http://www.interforest.org/signup/ ]]></description>
        </item>
        <item>
            <title><![CDATA[間違った解像度にしたら何も映らなくなった]]></title>
            <link>https://masutaka.net/2009-06-15-2/</link>
            <guid>https://masutaka.net/2009-06-15-2/</guid>
            <pubDate>Mon, 15 Jun 2009 01:00:00 GMT</pubDate>
            <description><![CDATA[リフレッシュレートは高い方が目に優しいよなー、なんて思いながら解像
度をいじったら画面が真っ黒。Windows なら 30 秒後に復帰するから、
GNOME も同じだろうと思っていたら、ずっと真っ黒のまま。(ToT)
試行錯誤の末、以下のようにすれば復旧出来ることが分かった。
1. なんとかして root 権限で X にログインする。 一番安全なのは、「masutakaのログアウト」→「ユーザの切り替え」から
GDM の画面に戻り、root でログインする方法。ただ、私の環境では作業終
了後、masutaka に戻れない上、また真っ黒になってしまった。
次に安全なのは、「masutakaのログアウト」→「ログアウト」から GDM の
画面に戻り、root でログインする方法。
画面が真っ黒なので、いずれもキーボード操作だけでログアウトする必要
がある。私の場合は「Windows キー」で GNOME メインメニューを起動する
ようにしていたので、「Windows キー」→「↑キー×２」→「Alt-l(エル)」
でログアウト出来た。デフォルトの設定でも、Ctrl-Alt-Delete でログア
ウト出来るかもしれない。
これらでも出来なければ ssh でログインして、root で reboot コマンド
を実行&hellip;するしかないかなあ。
2. masutaka 権限で画面の解像度を設定する。 GNOME の場合、画面の解像度はユーザ毎に設定されているっぽい。そのた
め root でログインしたら、masutaka に su して画面の解像度を変更すれ
ば良い。
# xhost + # su - masutaka % export DISPLAY=:0.0 % gnome-display-properties 3. masutaka でログインすれば、無事復旧しているはず！！ ]]></description>
        </item>
        <item>
            <title><![CDATA[Debian squeeze の subversion で http リポジトリにアクセスできなくなった]]></title>
            <link>https://masutaka.net/2009-06-15-1/</link>
            <guid>https://masutaka.net/2009-06-15-1/</guid>
            <pubDate>Mon, 15 Jun 2009 00:00:00 GMT</pubDate>
            <description><![CDATA[一ヶ月くらい前から、Debian squeeze で svn が使えなくなってしまいま
した。
 svn diff の実行は出来る。 file リポジトリへのアクセスも出来る。 http リポジトリへのアクセスは、内部外部問わず出来ない。  という状況で地味に困っていましたが、~/.subversion/servers に以下を
追加することで解決できました。
 http-library = serf
 今回お世話になったサイトです。
svn(subversion)が突然使えなくなった at 半歩先 犯人は Neon モジュールでした。WebDav へのアクセスモジュールを serf
に変えることで回避できました。
世の中にはスゴイ人もいるものですね。私なんか、strace コマンドのログ
から locale や gcov まわりのエラーなのかと思って調べていました&hellip;。
subversion はソースからインストールしたことがあるので、WebDav アク
セスに Neon が使われていたことは知っていましたが、気づくことができ
ませんでした。他に serf があることと、~/.subversion/servers で変更
が出来ることはもちろん知りませんでした。
% svn --version (snip) ＊ ra_neon : Neon を利用して WebDAV (DeltaV) プロトコルでリポジトリにアクセスするモジュール。 - &#39;http&#39; スキームを操作します - &#39;https&#39; スキームを操作します (snip) ＊ ra_serf : serf を利用して WebDAV (DeltaV) プロトコルでリポジトリにアクセスするモジュール。 - &#39;http&#39; スキームを操作します - &#39;https&#39; スキームを操作します 追記(2009-07-21):]]></description>
        </item>
        <item>
            <title><![CDATA[ElScreen のタブにニックネームを設定する]]></title>
            <link>https://masutaka.net/2009-06-14-4/</link>
            <guid>https://masutaka.net/2009-06-14-4/</guid>
            <pubDate>Sun, 14 Jun 2009 03:00:00 GMT</pubDate>
            <description><![CDATA[[2009-06-14-2] の補完。
通常、ElScreen のタブにはバッファ名が表示されますが、自分でニックネー
ムを付けることも出来ます。ニックネームを付けると、タブがすっきりキ
レイになります。
下記は、順番に navi2ch, skype.el 用の設定です。(require &rsquo;elscreen)
の後に書いて下さい。
(defcustom elscreen-navi2ch-mode-to-nickname-alist  &#39;((&#34;^navi2ch-&#34; . &#34;Navi2ch&#34;))  &#34;*Alist composed of the pair of mode-name and corresponding screen-name.&#34;  :type &#39;(alist :key-type string :value-type (choice string function))  :tag &#34;Navi2ch major-mode to screen nickname alist&#34;  :set (lambda (symbol value)  (custom-set-default symbol value)  (elscreen-rebuild-mode-to-nickname-alist))  :group &#39;navi2ch) (elscreen-set-mode-to-nickname-alist &#39;elscreen-navi2ch-mode-to-nickname-alist)  (defcustom elscreen-skype-mode-to-nickname-alist  &#39;((&#34;^skype-&#34; . &#34;Skype&#34;))  &#34;*Alist composed of the pair of mode-name and corresponding screen-name.]]></description>
        </item>
        <item>
            <title><![CDATA[C-c C-c で mkchalow]]></title>
            <link>https://masutaka.net/2009-06-14-3/</link>
            <guid>https://masutaka.net/2009-06-14-3/</guid>
            <pubDate>Sun, 14 Jun 2009 02:00:00 GMT</pubDate>
            <description><![CDATA[ChangeLog メモの chalow への変換とアップロードは、毎日 0:00 から
3 時間毎に行うように、自宅 PC の cron に登録しています。
登録しているのは mkchalow という自作のシェルスクリプトです。
手動でアップしたい時は、このコマンドをコマンドラインから実行します。
手動での実行が面倒になってきたので、mkchalow を実行する elisp の関
数を作りました。非同期で実行されるので、実行中も他の作業が出来ます。
(defun mkchalow (force)  (interactive &#34;P&#34;)  (let (pro  (pnm &#34;mkchalow&#34;)  (buf &#34; *mkchalow*&#34;)  (cnm &#34;mkchalow&#34;)  (opts (if force &#39;(&#34;-f&#34;))))  (message (format &#34;%sBuilding chalow for masutaka.net...&#34;  (if force &#34;Force &#34; &#34;&#34;)))  (setq pro (apply &#39;start-process pnm buf cnm opts))  (set-process-sentinel  pro  `(lambda (process string)  (message ,(format &#34;%sBuilding chalow for masutaka.]]></description>
        </item>
        <item>
            <title><![CDATA[ElScreen のススメ]]></title>
            <link>https://masutaka.net/2009-06-14-2/</link>
            <guid>https://masutaka.net/2009-06-14-2/</guid>
            <pubDate>Sun, 14 Jun 2009 01:00:00 GMT</pubDate>
            <description><![CDATA[私は ElScreen-Mew の作者なのに、このブログで ElScreen について一度
も言及していないことに気づきました。^^;
ElScreen は Emacs で多くの作業をする人にお薦めです！
私の場合は、ざっとこれだけありました。
 Mew でメール送受信する。 navi2ch で２ちゃんねるを見る。 mpg123.el で音楽を聴く。 twittering-mode.el で Twitter する。 skype.el でチャットする。 ChangeLog メモ を書く(→chalow でこのブログに変換)。 他、さまざまなテキストファイルを編集する。  もちろん、Emacs は個々の作業ごとに起動しません。全て１つの Emacs 上
で行います。
でも、さすがにこれだけいろんなことをやっていると、バッファを切り替
えるのが面倒です。一時期はフレームを立ち上げて(C-x 5 2)いましたが、
これも複数あると邪魔です。
ここで、Web ブラウザのウィンドウとタブを思い出して下さい。Emacs で
前者はフレームに相当します。しかし、後者はありません。Emacs でもタ
ブが使えたら便利だと思いませんか？
そこで登場するのが ElScreen です！！
ElScreen は Emacs にタブ機能を提供します。メニューバーからの
ElScreen-&gt;Create Screen または、&ldquo;C-z C-c&rdquo; で新しいタブを作れます。
もちろん、マウスでタブを選択することも出来ます。
キーバインドは GNU Screen ライクなので、GNU Screen ユーザはすんなり
使えると思います。ダウンロードやインストール方法等の詳細は
ElScreen の Web site をご覧下さい。]]></description>
        </item>
        <item>
            <title><![CDATA[skype.el を試してみた]]></title>
            <link>https://masutaka.net/2009-06-14-1/</link>
            <guid>https://masutaka.net/2009-06-14-1/</guid>
            <pubDate>Sun, 14 Jun 2009 00:00:00 GMT</pubDate>
            <description><![CDATA[ひょんな(?)ことから、Skype の ID を取得してしまいました。
最初に Linux 版の Skype を使ってみましたが、日本語入力が出来ないた
め(※対策は後述)他のアプリからコピペする必要があり、非常に面倒でした。
やっぱり、Emacs で Skype できちゃったりするのかなあと思って、調べて
みたら skype.el というのがありました。(相変わらず、Emacs で何でもで
きちゃうのね。^^;) うまく動いたので方法をまとめておきます。
今回の環境 Debian GNU/Linux squeeze (testing)
Emacs 23.0.94 (← Emacs23 以上じゃないとダメっぽい)
技術的な仕組み skype.el は Skype の Emacs フロントエンド。Skype を起動したあとに、
skype.el を起動して使う。両者のやりとりは、D-Bus を介して行われると
のこと。D-Bus というのは、プロセス間通信の実装の一つらしい。
→ D-Bus 設置手順 1. Linux 用の Skype をインストールした。 公式サイト から deb パッケージをダウンロードしてもよいが、
/etc/apt/sources.list に apt-line を追加する方がスマートなので、
こちらをお勧めする。
 deb http://download.skype.com/linux/repos/debian/ stable non-free
追加したら、いつものように aptitude でインストールする。
 # aptitude update # aptitude install skype インストールできたら、Skype 単体でチャットや通話が出来ることを確認すべし。]]></description>
        </item>
        <item>
            <title><![CDATA[tdiary のテーマを最新にした]]></title>
            <link>https://masutaka.net/2009-06-13-1/</link>
            <guid>https://masutaka.net/2009-06-13-1/</guid>
            <pubDate>Sat, 13 Jun 2009 00:00:00 GMT</pubDate>
            <description><![CDATA[今まで安定版のテーマを使っていましたが、開発版で良いことに今更気が
つきました。開発版の方がテーマの数が増えています。
以下、今回やったことです。
修正したテーマは tar で固めて、ここ に置きました。
1. http://www.tdiary.org/ から、tdiary-theme-2.3.2.tar.gz をダウンロードした。 2. 以下を行うシェルスクリプトを作成し、実行した。  全ての *.css の先頭に以下の 1 行を追加。参考情報→[2009-05-24-1]   @import &#34;/prettify/prettify.css&#34;;  古いディレクトリの clfix.css を新しいディレクトリにコピーし、
コピーしたディレクトリにある「テーマ名.css」に以下の 1 行を追加。参考情報→[2009-02-21-1]   @import &#34;clfix.css&#34;;  chmod -R go-w .  3. いくつかの clfix.css には、オリジナルの「テーマ名.css」を修正したことをメモしてある。その通りに修正した。 作成したシェルスクリプトは以下になります。
#!/bin/sh OLD_THEMEDIR=$HOME/tmp/theme.old NEW_THEMEDIR=$HOME/tmp/tdiary-theme-2.3.2 if [ ! -d &#34;$OLD_THEMEDIR&#34; ]; then echo &#34;$OLD_THEMEDIR isnot exist.&#34; exit 1 fi if [ ! -d &#34;$NEW_THEMEDIR&#34; ]; then echo &#34;$NEW_THEMEDIR isnot exist.]]></description>
        </item>
        <item>
            <title><![CDATA[キーバインド]]></title>
            <link>https://masutaka.net/2009-06-11-2/</link>
            <guid>https://masutaka.net/2009-06-11-2/</guid>
            <pubDate>Thu, 11 Jun 2009 01:00:00 GMT</pubDate>
            <description><![CDATA[kbd() を使って、~/.emacs を書き換えました。kbd() は anything.el で
使われていたのですが、こちらの方が今までの書き方より統一感が出るの
で、採用させていただきました。
修正前はこんな感じ。
(define-key esc-map &#34;b&#34; &#39;backward-sexp) (define-key global-map &#34;\C-t&#34; &#39;call-last-kbd-macro) (define-key global-map [(control \,)] &#39;backward-word) (define-key global-map [(control \.)] &#39;forward-word) (define-key ctl-q-map [?\C-\ ] &#39;comint-dynamic-complete-filename) kbd() を使ったら統一感がでました。
(define-key esc-map (kbd &#34;b&#34;) &#39;backward-sexp) (define-key global-map (kbd &#34;C-t&#34;) &#39;call-last-kbd-macro) (define-key global-map (kbd &#34;C-,&#34;) &#39;backward-word) (define-key global-map (kbd &#34;C-.&#34;) &#39;forward-word) (define-key ctl-q-map (kbd &#34;C-SPC&#34;) &#39;comint-dynamic-complete-filename) ※ ctl-q-map は自作のキーマップなので、デフォルトでは存在しません。
(kbd &ldquo;ほげ&rdquo;) の ほげ の部分は、&ldquo;F1 c&rdquo; した後、調べたいキーを押すと
分かります。以下は Ctrl-f を調べた場合です。(kbd &ldquo;C-f&rdquo;) と書けば良]]></description>
        </item>
        <item>
            <title><![CDATA[C-u bs-show <-> bs-show]]></title>
            <link>https://masutaka.net/2009-06-11-1/</link>
            <guid>https://masutaka.net/2009-06-11-1/</guid>
            <pubDate>Thu, 11 Jun 2009 00:00:00 GMT</pubDate>
            <description><![CDATA[[2009-06-07-4] のその後。
デフォルト C-u 付きの動作にしたかったので、以下の設定をした。
自分はこっちの方が合うかも。
;; M-x bs-show と C-u M-x bs-show の動作を交換する。 (setq bs-default-configuration &#34;all&#34;) (setq bs-alternative-configuration &#34;files&#34;) ]]></description>
        </item>
        <item>
            <title><![CDATA[au のサポートサイトにログインできない]]></title>
            <link>https://masutaka.net/2009-06-09-1/</link>
            <guid>https://masutaka.net/2009-06-09-1/</guid>
            <pubDate>Tue, 09 Jun 2009 00:00:00 GMT</pubDate>
            <description><![CDATA[4 月くらいから Linux からログインできなくなって放置していたのだけど、
さっき思い立って何度も試した。まだログインできなかった。でも、試し
に Windows の IE7 や Firefox3 から試してみたらログインできた。orz
以下、Firefox3 on Linux での、au サポートサイトの不具合まとめ。
 https://cs.kddi.com/ を開くと、Flash が Loading のまま固まる。
HTML(シンプル)版から中に入った。  ※ 後から確認したら、サポートしているのは、Windows の Flash Player
9.0.28.0 以上とのこと。うちのは 10.0 r22。OS を選ぶのか&hellip;？
Windows では使えた ID とパスワードでログインすると、以下のエラー。
一度も間違えてないのだけど…   サポートIDやパスワードを連続して複数回間違えられた可能性があるため、ログイン制限がかかりました。
 ログイン制限は以下の手順で解除できるそうなので、トップページ の
「サポートID・パスワードを忘れた方」をクリック。   ログイン制限は、下記のお手続きで解除が可能です。
パソコンから：
auお客さまサポートトップページのログインフォーム下部の「サポートID・パスワードを忘れた方」
(システムの反映には約5分程度時間がかかります。)
[S0007]
  「わからなくなってしまったのは？」に「サポートIDとサポートパスワー
ド」を選択し、「次へ」をクリック。
  「サービス」に「auケータイ」を選択し、「au携帯番号」「暗証番号」
「お客様コード」を入力。ちなみに、「お客様コード」は、毎月メールで
来る「auご利用料金更新のお知らせ」の「ご請求コード」のことらしく、
非常に分かりづらかった。
  照会まで進むと自分の「サポートID」が明らかになる。(Windows で使
えたものと同じだったけど。。。)
  上記「サポートID」と、その後メールで送られてくる「サポートパスワー]]></description>
        </item>
        <item>
            <title><![CDATA[ケーキいろいろ ]]></title>
            <link>https://masutaka.net/2009-06-08-1/</link>
            <guid>https://masutaka.net/2009-06-08-1/</guid>
            <pubDate>Mon, 08 Jun 2009 00:00:00 GMT</pubDate>
            <description><![CDATA[個人的なメモ。
写真デコレーションなんてものがあるんだ。
http://www.b-shop.co.jp/hanabishi/ 同じ店だけど、ケーキはアレゲ。
http://news.ameba.jp/gizmodo/2009/05/38928.html 他のケーキ屋(この例では五反田)と比べると、若干高めだな。
http://le-fromage.jp/ ケーキ好き(？)の私としては、下記の質問も気になる。
http://okwave.jp/qa5001183.html ]]></description>
        </item>
        <item>
            <title><![CDATA[三国志 英雄占い]]></title>
            <link>https://masutaka.net/2009-06-07-6/</link>
            <guid>https://masutaka.net/2009-06-07-6/</guid>
            <pubDate>Sun, 07 Jun 2009 05:00:00 GMT</pubDate>
            <description><![CDATA[占いはやらないのだけれど、三国志となれば話は別。
DORON特集「三国志 英雄占い」 私は「周瑜」タイプでした。
 美を理解する者は、生きざまも美しいもの。
(´∀｀)
  細やかなやりとりの積み重ねで大局を思うように動かしていくといった
知将ならではの技も身につけています。
(￣ー￣)
  あわててしでかした失敗がいつまでも脳裏に残り、ふたたび失敗する材料
となってしまうのです。
(;´Д｀)ハァハァ
 ]]></description>
        </item>
        <item>
            <title><![CDATA[twittering-mode.el を試してみた]]></title>
            <link>https://masutaka.net/2009-06-07-5/</link>
            <guid>https://masutaka.net/2009-06-07-5/</guid>
            <pubDate>Sun, 07 Jun 2009 04:00:00 GMT</pubDate>
            <description><![CDATA[2010.6.12 Emacs Wiki にインストールガイドと全てのキーバインドを記載
しました。 この記事はもう古いです。
やはりというかなんというか、探してみたらありました。
Emacs 上で Twitter できる、twittering-mode.el が。
M-x twit で、Twitter 開始です。&ldquo;u&rdquo; または &ldquo;C-c C-s&rdquo; でつぶやけます。
デフォルトでは 90 秒ごとにリロードされますが、&ldquo;g&rdquo; で手動リロードす
ることも出来ます。
スクリーンショット   後述の twittering-icon-mode を有効にしているので、なかなかの見栄え
です。:-)
インストール方法 1. twittering-mode の公式サイト から、tar ball を取得します。
もしくは、GitHub から開発版を取得します。
% git clone git://github.com/hayamiz/twittering-mode.git 2. 展開した twittering-mode を load-path に追加します。
(add-to-list &#39;load-path &#34;/path/to/installed/dir&#34;) 必要最小限の設定 (autoload &#39;twit &#34;twittering-mode&#34; nil t) (setq twittering-username &#34;Twitterアカウント&#34;) 私が追加で設定した内容 (setq twittering-icon-mode t) (setq twittering-jojo-mode t) (defun twittering-mode-hook-func ()  (set-face-bold-p &#39;twittering-username-face t)  (set-face-foreground &#39;twittering-username-face &#34;DeepSkyBlue3&#34;)  (set-face-foreground &#39;twittering-uri-face &#34;gray35&#34;)  (define-key twittering-mode-map (kbd &#34;&lt;&#34;) &#39;my-beginning-of-buffer)  (define-key twittering-mode-map (kbd &#34;&gt;&#34;) &#39;my-end-of-buffer)  (define-key twittering-mode-map (kbd &#34;F&#34;) &#39;twittering-favorite))  (add-hook &#39;twittering-mode-hook &#39;twittering-mode-hook-func)   twittering-icon-mode を有効にしました。]]></description>
        </item>
        <item>
            <title><![CDATA[bs-show を試してみた]]></title>
            <link>https://masutaka.net/2009-06-07-4/</link>
            <guid>https://masutaka.net/2009-06-07-4/</guid>
            <pubDate>Sun, 07 Jun 2009 03:00:00 GMT</pubDate>
            <description><![CDATA[今まで &ldquo;C-x C-b&rdquo; には buffer-menu を割り当てていたんだけど、代わり
に bs-show を割り当てることにした。
(define-key ctl-x-map (kbd &#34;C-b&#34;) &#39;bs-show) 実行すると、buffer-selection バッファに「ファイルだけが」候補とし
て現れる。他のバッファも表示させたい場合は、&ldquo;C-u C-x C-b&rdquo; すれば OK!!
情報源:
bs-show - MOEPANDA diary (2009-05-17) ]]></description>
        </item>
        <item>
            <title><![CDATA[anything.el を試してみた]]></title>
            <link>https://masutaka.net/2009-06-07-3/</link>
            <guid>https://masutaka.net/2009-06-07-3/</guid>
            <pubDate>Sun, 07 Jun 2009 02:00:00 GMT</pubDate>
            <description><![CDATA[この記事は obsolete です。
http://d.hatena.ne.jp/rubikitch/20100718/anything をご覧下さい。
ずいぶん前からアレゲな方々の間で話題になっていた anything.el を
ようやく試すことができた。
Emacs は様々な局面で「補完」することができるが、anything.el を使う
と、この補完 IF をある程度統一出来る。
機能の概要 anything を実行すると、以下の候補一覧が anything バッファに作成さ
れる。
「現在開いているバッファ」
「今まで開いたファイルの履歴」
「カレントディレクトリのファイル」
「今まで実行したコマンド」
何か文字を打つと、そのパターンにマッチした候補に絞り込まれる。候補
を C-n, C-p, C-v, M-v で選択したり、C-s や C-r で候補自体を検索する
ことも可能。
インストール方法 以下のファイルをダウンロードして、load-path の通ったところにコピー
する。
http://www.emacswiki.org/cgi-bin/wiki/download/anything.el http://www.emacswiki.org/cgi-bin/wiki/download/anything-config.el 私が設定したこと ~/.emacs に以下の設定をした。&ldquo;C-x b&rdquo; の switch-to-buffer を
anything で上書きし、次と前の機能一覧に、それぞれ C-M-n と C-M-p で
移動できるようにした。
(require &#39;anything-config) (define-key ctl-x-map (kbd &#34;b&#34;) &#39;anything) (define-key anything-map (kbd &#34;C-M-n&#34;) &#39;anything-next-source) (define-key anything-map (kbd &#34;C-M-p&#34;) &#39;anything-previous-source) 以上の設定を行うと、&ldquo;C-x b&rdquo; で anything を使える。]]></description>
        </item>
        <item>
            <title><![CDATA[わらびもち]]></title>
            <link>https://masutaka.net/2009-06-07-2/</link>
            <guid>https://masutaka.net/2009-06-07-2/</guid>
            <pubDate>Sun, 07 Jun 2009 01:00:00 GMT</pubDate>
            <description><![CDATA[これはひどい。ｗ
 【ぷるぷる】わらびもちに命をかける業者【ぷる〜ん】 ]]></description>
        </item>
        <item>
            <title><![CDATA[ウィンドウの幅や高さを、キー操作で変更する]]></title>
            <link>https://masutaka.net/2009-06-07-1/</link>
            <guid>https://masutaka.net/2009-06-07-1/</guid>
            <pubDate>Sun, 07 Jun 2009 00:00:00 GMT</pubDate>
            <description><![CDATA[&ldquo;C-x 2&rdquo; で上下に分割した場合 &ldquo;C-x ^&rdquo; or &ldquo;M-x enlarge-window&rdquo; 現在のウィンドウの縦幅を大きくする。
&ldquo;M-x shrink-window&rdquo; 現在のウィンドウの縦幅を小さくする。
&ldquo;C-x 3&rdquo; で左右に分割した場合 &ldquo;C-x }&rdquo; or &ldquo;M-x enlarge-window-horizontally&rdquo; 現在のウィンドウの横幅を大きくする。
&ldquo;C-x {&rdquo; or &ldquo;M-x shrink-window-horizontally&rdquo; 現在のウィンドウの横幅を小さくする。
&ldquo;C-x +&rdquo; or &ldquo;M-x balance-windows&rdquo; 各ウィンドウの大きさを揃えることが出来る。
参考にしたページ eyesrobe &raquo; ブログアーカイブ &raquo; 基本編 Emacsウィンドウの枠を拡げたり縮めたり ]]></description>
        </item>
        <item>
            <title><![CDATA[Twitter を始めてみた]]></title>
            <link>https://masutaka.net/2009-06-02-2/</link>
            <guid>https://masutaka.net/2009-06-02-2/</guid>
            <pubDate>Tue, 02 Jun 2009 01:00:00 GMT</pubDate>
            <description><![CDATA[Twitter(ついったー)とは、アカウントを作ると自分のつぶやきを投稿でき
るサービスだそう。他の人のつぶやきに対して、フォローという名の返信
をすることもできるとのこと。
Twitter Twitter 公式サイト Twitter をはじめよう！ - GreenSpace 寂しがり屋向けのサービスなのだろうか。。。
上のサイトを見る限り、他の可能性もあるようだけど。
でも、まあとにかく始めてみた。このブログの左側にも表示させてみた。
追記(2009-06-07):
なんだか重いので、左側に表示させるのは止めました。]]></description>
        </item>
        <item>
            <title><![CDATA[TopHatenar を付けてみた]]></title>
            <link>https://masutaka.net/2009-06-02-1/</link>
            <guid>https://masutaka.net/2009-06-02-1/</guid>
            <pubDate>Tue, 02 Jun 2009 00:00:00 GMT</pubDate>
            <description><![CDATA[今度はサイドメニューの下の方に、TopHatenar というのを付けました。
ブログのランキングを表示してくれます。ランキングは、RSS フィード購
読者数やソーシャルブックマーク獲得数から決定しているようです。
ランキングは現在最下位でございます。
ついでに、ここ 3 ヶ月のアクセス分析をしました。
3,465 名の方が、6,278 回アクセスして下さいました。1 日に換算すると、
約 40 名の方の、約 70 アクセスになります。
   Page View Visit     6,278 3,465    上記カウント数のうち、検索エンジン経由で来た方のランキングです。
   No 検索エンジン 検索フレーズ 割合 カウント     1 Google SP27213.exe 1.5% 35   2 Google printf 自作 1.3% 31   3 Google svn: URL に対し ra_local セッションを開始できません 0.9% 22   4 Google svn ra_local セッションを開始できません 0.]]></description>
        </item>
        <item>
            <title><![CDATA[このブログをケータイで見た時のリダイレクト]]></title>
            <link>https://masutaka.net/2009-05-29-2/</link>
            <guid>https://masutaka.net/2009-05-29-2/</guid>
            <pubDate>Fri, 29 May 2009 01:00:00 GMT</pubDate>
            <description><![CDATA[このブログがケータイからアクセスされたら、内部でケータイ向けのペー
ジにリダイレクトするように設定してみた。
リダイレクトとしては以下の動作になる。アクセスした人はリダイレクト
されたことに気づかないはず。
YYYY-MM-DD-I.html へのアクセス例:
http://masutaka.net/chalow/2009-05-29-1.html ↓ http://masutaka.net/chalow/clkeitai.cgi?date=2009-05-29-1 YYYY-MM-DD.html へのアクセス例:
http://masutaka.net/chalow/2009-05-29.html ↓ http://masutaka.net/chalow/clkeitai.cgi?date=2009-05-29 それ以外の *.html へのアクセス例:
http://masutaka.net/chalow/index.html ↓ http://masutaka.net/chalow/clkeitai.cgi .htaccess への記載内容は以下のとおり。
RewriteEngine on RewriteBase / RewriteCond %{HTTP_USER_AGENT} (J-PHONE|SoftBank|Vodafone|DoCoMo|KDDI) RewriteRule ^chalow/([0-9]+-[0-9]+-[0-9]+(-[0-9]+)?)\.html$ chalow/clkeitai.cgi?date=$1 [L] RewriteCond %{HTTP_USER_AGENT} (J-PHONE|SoftBank|Vodafone|DoCoMo|KDDI) RewriteRule ^chalow/(.*\.html)?$ chalow/clkeitai.cgi [L] clkeitai.cgi はデフォルトのままなので、トップと日ペー
ジ(YYYY-MM-DD.html)、それにアイテムページ(YYYY-MM-DD-I.html)しか表
示できない。だから、それ以外のページが指定されたらトップを表示する
ようにしている。
表示後にブログ内のリンクをクリックすると、URL に clkeitai.cgi が出
てしまうのもイマイチか。
参考にしたページ:
「を」このブログをケータイで見たときのリダイレクトと「はてブ」リンクの修正 ついでにサイドメニューに、QR コードを張り付けてみた。
QR コードは http://qrcode.jp/ で作れるよ。]]></description>
        </item>
        <item>
            <title><![CDATA[ペペロンチーノ]]></title>
            <link>https://masutaka.net/2009-05-29-1/</link>
            <guid>https://masutaka.net/2009-05-29-1/</guid>
            <pubDate>Fri, 29 May 2009 00:00:00 GMT</pubDate>
            <description><![CDATA[パスタ第３弾です。今回は見た目よくできました。
レシピ    材料(1人分)
パスタ・・・・・・・・・・・110g(いつもより多め)
オリーブオイル・・・・・・・適当(いつもより多め)
ベーコン・・・・・・・・・・2枚
乾燥ニンニク・・・・・・・・適当
鷹の爪・・・・・・・・・・・1本
塩・・・・・・・・・・・・・多め
こしょう・・・・・・・・・・少々
味の素・・・・・・・・・・・少々
   鍋に塩を入れ、湯を沸かし始める。塩は多めで。
  ベーコンの油が気になる人は、電子レンジで油抜きをする。キッチンペー
パー 2 枚、ベーコン、キッチンペーパー 1 枚の順に敷いて、電子レンジ
で 1 分ほど加熱すれば OK 。ベーコンが冷めるのを待って 1cm 幅に切る。
  乾燥ニンニクを水で戻しておく。鷹の爪は種を除いておく。
  湯が沸いたら、パスタを投入する。キッチンタイマーを忘れずにセット
する。
  オリーブオイル、ベーコン、水を切ったニンニクをフライパンに入れて
弱中火で熱する。音がしてきたら弱火にする。ベーコンが跳ねるので注意。
  ニンニクにこんがり焼き色が付いたら火を止め、鷹の爪を入れる。
  パスタが茹で上がる前に、おたまに軽く一杯の茹で汁をフライパンに入
れる。
  パスタが茹で上がったら、湯切りしたパスタをフライパンに入れ、塩、
こしょう、味の素で味を整える。茹で汁に塩気が含まれていることに注意
する。
  いつもどおり乳化([2009-04-12-1] )を意識して、強火でよくかき混ぜれ
ば出来上がり。
  まとめ 今回は、茹で汁を上の分量より多く豪快に入れてしまいました。少し水っ
ぽくなってしまいましたが、オイルソースらしいといえばそうだったか
もしれません。まあ、悪くない出来でした。
オイルソースなのでオリーブオイルはいつもより多めです。具が少ないの
で、パスタもいつもより多めです。茹で汁で塩気を付けるので、湯に入れ
る塩もいつもより多めです。]]></description>
        </item>
        <item>
            <title><![CDATA[XHTML へのステップアップ]]></title>
            <link>https://masutaka.net/2009-05-28-2/</link>
            <guid>https://masutaka.net/2009-05-28-2/</guid>
            <pubDate>Thu, 28 May 2009 01:00:00 GMT</pubDate>
            <description><![CDATA[[2009-05-28-1] のつづき。
wikipedia によると XHTML というのは、SGML で書かれていた HTML を
XML の文法で定義し直したマークアップ言語とのこと。参考情報→[2008-06-29-1] HTML とは文法はさほど変わらないので、「マスタカのホーム」と「マスタ
カ宛メッセージ送信」を XHTML で書いてみた。ただ、HTML との違いは知
らないので、The W3C Markup Validation Service でエラーを潰しながら
対応した。以下、XHTML の説明。
XHTML は HTML 4.01 をベースに作られた。最新の 1.0 仕様書は以下から
参照できる。
 XHTML 1.0 仕様書   「3.1.1. Strictly Conforming Documents 」に書かれているとおり、
以下の 3 種類の DTD(Document Type Definition、文書型定義) を規定し
ている。
|XHTML 1.0 Strict DTD (厳密型)
| |
|XHTML 1.0 Transitional DTD (移行型)
| |
|XHTML 1.0 Frameset DTD (フレーム設定型)]]></description>
        </item>
        <item>
            <title><![CDATA[HTML の妥当性を診断する]]></title>
            <link>https://masutaka.net/2009-05-28-1/</link>
            <guid>https://masutaka.net/2009-05-28-1/</guid>
            <pubDate>Thu, 28 May 2009 00:00:00 GMT</pubDate>
            <description><![CDATA[The W3C Markup Validation Service で、任意のサイトの HTML の文法
チェックができる。そこで手始めに「マスタカのホーム」をチェックして
みた。エラーの嵐だった&hellip;。
エラーがあっても、Web ブラウザはうまく解釈して表示してくれる。ただ、
後述の HTML の仕様にはなるべく沿うようにしたいし、Firefox では OK
だが、IE だとレイアウトが崩れるなんてことはなるべく避けたいので、頑
張ってゼロにしてみた。以下、HTML の説明。
まず知っておかなくてはいけないことは、HTML にはバージョンがあるとい
うこと。最新の 4.01 の仕様書は以下から参照できる。
 HTML 4.01 仕様書  HTML 4.01 仕様書(日本語訳)   「7.2 HTMLバージョン情報 」に書かれているとおり、HTML 4.01 仕様では、
3 つの DTD(Document Type Definition、文書型定義) を規定しており、
各 HTML ファイルには次のいずれかの文書型宣言を含める必要があるようだ。
HTML 4.01 Strict DTD (厳密型)
&lt;!DOCTYPE HTML PUBLIC &#34;-//W3C//DTD HTML 4.01//EN&#34; &#34;http://www.w3.org/TR/html4/strict.dtd&#34;&gt; HTML 4.01 Transitional DTD (移行型)
&lt;!DOCTYPE HTML PUBLIC &#34;-//W3C//DTD HTML 4.]]></description>
        </item>
        <item>
            <title><![CDATA[FoxMeter を付けてみた]]></title>
            <link>https://masutaka.net/2009-05-25-1/</link>
            <guid>https://masutaka.net/2009-05-25-1/</guid>
            <pubDate>Mon, 25 May 2009 00:00:00 GMT</pubDate>
            <description><![CDATA[サイドメニューの下の方に、FoxMeter を付けました。
公式サイトによると、以下の機能だそうです。うーむ。
 サイト訪問者の Firefox3 移行率を、簡単にチェック！ 最大の特徴は、Firefox3 への移行状況に応じて、「フォクすけ」の表情
が変わっていく、という点です。  フォクすけ]]></description>
        </item>
        <item>
            <title><![CDATA[サイドメニューの「カテゴリ」を大文字小文字無視でソート]]></title>
            <link>https://masutaka.net/2009-05-24-6/</link>
            <guid>https://masutaka.net/2009-05-24-6/</guid>
            <pubDate>Sun, 24 May 2009 05:00:00 GMT</pubDate>
            <description><![CDATA[今回も「戯術者の日記」を参考にさせて頂きました。
--- orig/chalow-1.0/chalow	2007-10-19 23:15:01.000000000 +0900 +++ chalow-1.0/chalow	2009-05-24 23:57:16.000000000 +0900 @@ -1174,7 +1174,7 @@ # return if ($output_cat_pages == 0); my @lines = (); - foreach my $cat (sort keys %{$cl-&gt;{CAT}}) { + foreach my $cat (sort { lc $a cmp lc $b } keys %{$cl-&gt;{CAT}}) { my $n = $cl-&gt;{CAT}-&gt;{$cat}; my $url; if ($output_cat_pages) { 参考にしたページ:
戯術者の日記:カテゴリ一覧を大文字小文字無視でソート 追記(2011-07-06):
カスタマイズできるようにして、GitHub に push しました。 ]]></description>
        </item>
        <item>
            <title><![CDATA[cl.rdf にもカテゴリ表示]]></title>
            <link>https://masutaka.net/2009-05-24-5/</link>
            <guid>https://masutaka.net/2009-05-24-5/</guid>
            <pubDate>Sun, 24 May 2009 04:00:00 GMT</pubDate>
            <description><![CDATA[※ RSS リーダー を使うと、自分の見たい Web サイトの更新を自動で確認
してくれます。未読管理が出来るものも多いです。ぜひ使ってみてくださ
い。数ある RSS リーダーの中でも、私は Google リーダー をお薦めします。
ちなみに、このブログの登録フィードはこちら です。
RSS リーダーでは各記事のタイトルにカテゴリ名が付かないので、付ける
ようにしてみました。cl.rdf の出力が変わります。
--- orig/chalow-1.0/chalow	2007-10-19 23:15:01.000000000 +0900 +++ chalow-1.0/chalow	2009-05-24 17:54:55.000000000 +0900 @@ -1089,7 +1089,7 @@ push @items, { permlink =&gt; $permlink, -	itemheader =&gt; html2xmlstr($e-&gt;{$i}{h}), +	itemheader =&gt; html2xmlstr(&#34;[&#34;.join(&#34;][&#34;, @{$cl-&gt;{all}-&gt;{$ymd}-&gt;{$i}-&gt;{cat}}).&#34;] &#34;.$e-&gt;{$i}{h}), itemauthor =&gt; $e-&gt;{$i}{a}, itemcontent =&gt; $cont, itemcontentencoded =&gt; $coen, 参考にしたページ:
戯術者の日記:rdfファイルにもカテゴリ表示 戯術者の日記:続きを読…めない 追記(2009-08-31):
twitterfeed の出力が不格好になるので、元に戻しました(カテゴリ名を付
けないようにしました)。]]></description>
        </item>
        <item>
            <title><![CDATA[private item と normal item]]></title>
            <link>https://masutaka.net/2009-05-24-4/</link>
            <guid>https://masutaka.net/2009-05-24-4/</guid>
            <pubDate>Sun, 24 May 2009 03:00:00 GMT</pubDate>
            <description><![CDATA[各日付の中で private item (p:) と normal item をどういう順番で置く
かは、自分で決めておかないとマズイね。
例えばある日付の中で、両者が交互に出現すると [YYYY-MM-DD-I] を使っ
た参照がややこしくなる。private item の方が数が少ないと思うから、
normal item が下、private item を上に置くようにすると良さそう。
あと、[YYYY-MM-DD-I] で参照されているアイテムを移動すると、リンクが
切れてしまう。アイテムを移動するときは、そのアイテムの参照元も修正
する必要がある。]]></description>
        </item>
        <item>
            <title><![CDATA[main() の第 3 引数]]></title>
            <link>https://masutaka.net/2009-05-24-3/</link>
            <guid>https://masutaka.net/2009-05-24-3/</guid>
            <pubDate>Sun, 24 May 2009 02:00:00 GMT</pubDate>
            <description><![CDATA[処理系に依存してしまうが、main() の第 3 引数には環境変数リストが入っ
ているとのこと。うちの Debian GNU/Linux squeeze では参照できた。
#include &lt;stdio.h&gt; int main(int argc, char **argv, char **envp){ int i; for (i = 0; envp[i] != NULL; i++){ printf(&#34;%s\n&#34;, envp[i]); } return 0; } (URL: 404 Blog Not Found:CGIの神話と現実 )
(URL: ｉｎｔ　void　(main)の意味/// -OKWave )]]></description>
        </item>
        <item>
            <title><![CDATA[Lisp 系のソースコードにも色を付ける]]></title>
            <link>https://masutaka.net/2009-05-24-2/</link>
            <guid>https://masutaka.net/2009-05-24-2/</guid>
            <pubDate>Sun, 24 May 2009 01:00:00 GMT</pubDate>
            <description><![CDATA[[2009-05-24-1] の続きです。
リリース元の解説 にも書いてありますが、Lisp 系のソースは拡張サポート
のようで、自動判別してくれません。変な色になってしまいます。
lang-lisp.js も別途読み込ませる必要があるようです。
以下、Emacs Lisp を例に説明します。他の Lisp 系言語で色付けする参考
にもなるかと思います。lang-lisp.js もご覧下さい。
[2009-05-24-1] とは、cl.conf と chalow の修正が変わります。4 と 5
の手順を以下に置き換えてください。あと、[src]〜[/src] の代わり
に [src_el]〜[/src_el] を使って下さい。
4&rsquo;. cl.conf を修正します。全ての  の直前に、以下を挿入すれば
よいでしょう。
&lt;script type=&#34;text/javascript&#34; src=&#34;http://masutaka.net/prettify/prettify.js&#34;&gt;&lt;/script&gt; &lt;script type=&#34;text/javascript&#34; src=&#34;http://masutaka.net/prettify/lang-lisp.js&#34;&gt;&lt;/script&gt; &lt;script&gt;prettyPrint();&lt;/script&gt; ※ 私は $side_menu を全てのページで表示するようにしているので、その
先頭に 1 つだけ追加しています。
5&rsquo;. chalow を修正します。以下はオリジナル(chalow-1.0.tar.gz)の
chalow へのパッチです。
--- orig/chalow-1.0/chalow	2007-10-19 23:15:01.000000000 +0900 +++ chalow-1.0/chalow	2009-05-23 23:39:10.000000000 +0900 @@ -1275,6 +1275,8 @@ my %escaped_src; my $num_of_escaped_plugin; my %escaped_plugin; +my $num_of_escaped_src_el; +my %escaped_src_el; sub escape_string { my ($strp) = @_; @@ -1304,16 +1306,27 @@ $$strp =~ s!]]></description>
        </item>
        <item>
            <title><![CDATA[ソースコードに色を付ける]]></title>
            <link>https://masutaka.net/2009-05-24-1/</link>
            <guid>https://masutaka.net/2009-05-24-1/</guid>
            <pubDate>Sun, 24 May 2009 00:00:00 GMT</pubDate>
            <description><![CDATA[[2009-05-23-1] のように、時々ソースコードを貼り付けることがあります
が、色が付かなくて寂しかったので google-code-prettify で色を付ける
ようにしてみました。chalow 以外のブログにも使えると思います。
[src]〜[/src] で囲まれたソースの言語を自動判別して、適切
に色付けしてくれます。
  http://code.google.com/p/google-code-prettify/ から、
&ldquo;prettify-small-日付.zip&rdquo; をダウンロードします。(&ldquo;prettify-日付.zip&rdquo;
は *.js が圧縮されていません。こだわりがなければ small の方をダウン
ロードすればよいでしょう。)
  解凍してできる *.css と *.js をご自分の Web スペースにアップしま
す。今回は http://masutaka.net/prettify/ にアップしました。以下、こ
の状態を前提に話を進めます。
  お使いの CSS に、以下を追加します。
@import url(http://masutaka.net/prettify/prettify.css);
  cl.conf を修正します。全ての  の直前に、以下を挿入すれば
よいでしょう。
  &lt;script type=&#34;text/javascript&#34; src=&#34;http://masutaka.net/prettify/prettify.js&#34;&gt;&lt;/script&gt; &lt;script&gt;prettyPrint();&lt;/script&gt; ※ 私は $side_menu を全てのページで表示するようにしているので、その
先頭に 1 つだけ追加しました。
chalow を修正します。以下はオリジナル(chalow-1.0.tar.gz)の
chalow へのパッチです。  --- orig/chalow-1.0/chalow	2007-10-19 23:15:01.]]></description>
        </item>
        <item>
            <title><![CDATA[合体ロボ]]></title>
            <link>https://masutaka.net/2009-05-23-2/</link>
            <guid>https://masutaka.net/2009-05-23-2/</guid>
            <pubDate>Sat, 23 May 2009 01:00:00 GMT</pubDate>
            <description><![CDATA[タイムボカンメドレー　(1/2) -- YouTube タイムボカンメドレー　(2/2) -- YouTube タイムボカンシリーズ の中ではヤッターマン が一番人気があるみたいです
が、やはり合体ロボが出てないとダメでしょう。ｗ
シリーズの中では、ヤットデタマン と逆転イッパツマン で合体ロボが出て
きます。ヤットデタマンは大巨神(大馬神)、イッパツマンは逆転王と三冠
王です。大巨神は子供の頃持っていました。大天馬を持ってなかったので、
合体できませんでしたが。。(; ;)
※ 関係ないけど、イッパツマンのキャラクターデザインは天野喜孝 だった
んですね。知らなかった。
そんなイケてる合体ロボ達を CG で作ってしまった人がいました。合体の
流れも分かるようになっています。スゲー。
懐かしロボCGギャラリー 合体のアニメの動画はほとんど見つけられませんでした。逆転王は上の
「タイムボカンメドレー　(2/2)」の 4 分 40 秒くらいから、三冠王は下
の動画の 2 分 30 秒くらいから始まります。
 タイムボカンじゃないけど、こんなのもありました。なつかしいなあ。
でも、今見るとかなり痛い。^^;
 たしか、土曜日の 17:30 からダイオージャ 、18:00 からは戦隊物を見てま
した。(調べたら戦隊物はサンバルカン で、幼稚園の年長から小学一年にか
けて見てたらしい。)]]></description>
        </item>
        <item>
            <title><![CDATA[コメントが投稿されたら私宛にメール送信]]></title>
            <link>https://masutaka.net/2009-05-23-1/</link>
            <guid>https://masutaka.net/2009-05-23-1/</guid>
            <pubDate>Sat, 23 May 2009 00:00:00 GMT</pubDate>
            <description><![CDATA[@pages の時は、自宅の Linux の cron にベタベタなシェルスクリプトを
仕掛けていました。
→1 時間に 1 回、lftp でコメントのログファイルを取りに行く。前回と
diff があり、スパムでないコメントが含まれていたら、ローカルのメール
サーバから私宛にメール送信。
さくらインターネットになって、CGI からメールを送れるようになったの
で、コメントが投稿されたら私宛にメール送信するようにしました。
送信に使ったのは、Perl の MIME::Lite モジュールです。MIME::Lite は、
送信方法を sendmail と SMTP から選べたり、ファイル添付もできる便利
なモジュールです。今回は sendmail を使いました。
今回もオリジナル(kuttukibbs-1.0rc3.tar.gz)の kuttukibbs.conf と
kuttukibbs.cgi へのパッチを貼り付けておきますね。
--- orig/kuttukibbs-1.0rc3/kuttukibbs.conf	2004-04-08 22:27:02.000000000 +0900 +++ kuttukibbs-1.0rc3/kuttukibbs.conf	2009-05-23 14:19:29.000000000 +0900 @@ -33,6 +33,14 @@ $charset = &#34;EUC-JP&#34;; # -------------------------------------------------------------------- +# CGI の場所を http で記載。 +$CommentUrl = &#39;http://example.com/kuttukibbs/kuttukibbs.cgi&#39;; + +# -------------------------------------------------------------------- +# 記事が投稿されたら、このアドレスにメールする。 +$NotifyEmail = &#39;youremailaddress@example.]]></description>
        </item>
        <item>
            <title><![CDATA[masutaka.net のファイルを直接編集]]></title>
            <link>https://masutaka.net/2009-05-19-1/</link>
            <guid>https://masutaka.net/2009-05-19-1/</guid>
            <pubDate>Tue, 19 May 2009 00:00:00 GMT</pubDate>
            <description><![CDATA[Emacs には、リモートホストにあるファイルをあたかもローカルにあるよ
うに扱える Tramp という機構がある。例えば remotehost の $HOME を開
きたい場合は、以下のように find-file する。
 C-x C-f /remotehost:
 パスワードを聞かれない設定は [2007-01-27-1] にまとめてある。
接続方式は、tramp-default-method の値が使われる。私の環境では初期値
として、&ldquo;scp&rdquo; が設定されていた。
ただ、masutaka.net に接続しようとすると、ミニバッファに以下のメッセー
ジが出て接続できなかった。
 Tramp: Waiting for prompts from remote shell
 ググってみたら、そのものズバリのページがあった。
TRAMPとZsh - ゴミ箱の中の雑記帳 私の場合も Emacs の TRAMP のバッファでは接続できているように見え、
プロンプトの前に ^M が 2 つ付いている。リモートホストのログインシェ
ルが zsh だと、プロンプトの前の ^M が悪さをするようだ。
TRAMP の接続方法を scp から scpx に変更すると、標準のログインシェル
ではなく /bin/sh が使われるとのこと。で、以下の設定をしたら接続でき
た。やった！
 (setq tramp-default-method &ldquo;scpx&rdquo;)
 ちなみに、ftp でしかアクセスできないリモートホストは以下のように]]></description>
        </item>
        <item>
            <title><![CDATA[リンク切れチェック]]></title>
            <link>https://masutaka.net/2009-05-18-1/</link>
            <guid>https://masutaka.net/2009-05-18-1/</guid>
            <pubDate>Mon, 18 May 2009 00:00:00 GMT</pubDate>
            <description><![CDATA[Website Explorer  Windows アプリ。masutaka.net のリンク切れチェックに使った。サイト全
体のリンク切れをチェックできたり、階層構造やファイル構成、画像一覧
などを一望できたりする。&ldquo;301: Moved Permanently([2009-05-17-1] )&rdquo; の
時は、転送先も表示してくれる。なかなか使いやすいよ。
Bookmarks Link Checker Minus  FireFox のアドオン。ブックマークのリンク切れチェックに使える。
シンプルでよろし。]]></description>
        </item>
        <item>
            <title><![CDATA[カルボナーラ v2.0]]></title>
            <link>https://masutaka.net/2009-05-17-5/</link>
            <guid>https://masutaka.net/2009-05-17-5/</guid>
            <pubDate>Sun, 17 May 2009 04:00:00 GMT</pubDate>
            <description><![CDATA[[2009-05-10-1] の How to make a real CARBONARA -- YouTube を実際に試してみま
した。このレシピでは生クリームを使いません。
レシピ    材料(1人分)
パスタ・・・・・・・・・・・100g
オリーブオイル・・・・・・・適当
ベーコン・・・・・・・・・・2枚
卵・・・・・・・・・・・・・1個
パルメザンチーズ・・・・・・これでもか！というくらい
黒こしょう(粗挽き)・・・・・ティースプーン1杯
塩・・・・・・・・・・・・・多め
   鍋に塩を入れ、湯を沸かし始める。塩は多めで。
  ベーコンを 1cm 幅に切る。卵はパルメザンチーズをたっぷりかけて、
よく溶いておく。
  湯が沸いたら、パスタを投入する。キッチンタイマーを忘れずにセット
する。
  オリーブオイルを引いてフライパンを中火で熱し、ベーコンを炒める。
こんがり焼き色が付いたら、火を止め黒こしょうを入れる。
  パスタが茹で上がる前に、茹で汁をおたまに軽く一杯、フライパンに入
れる。
  パスタが茹で上がったら湯を切り、フライパンに入れる。茹で汁は少し
残しておく。
  溶いた卵を投入し、よくかき混ぜる。かき混ざったら、茹で汁をもう軽
く一杯加え、さらにかき混ぜる。
  まとめ かき混ぜるときに火を付けてしまったたため、卵がダマになり見た目も悪
くなってしまいました。でも、生クリームを入れなかったためか、それほ
ど気になりませんでした。なんだ、生クリームいらないじゃん。(・∀・)
チーズはやはり、良いものを使った方が良いと思います。
ベーコンはブロックを使うと、卵やチーズのボリュームに負けません。
塩分は茹で汁とチーズから出るので、特に入れる必要はないと思います。
まあ、悪くない出来だったかな。^^;]]></description>
        </item>
        <item>
            <title><![CDATA[masutaka.net に引っ越しました!!]]></title>
            <link>https://masutaka.net/2009-05-17-4/</link>
            <guid>https://masutaka.net/2009-05-17-4/</guid>
            <pubDate>Sun, 17 May 2009 03:00:00 GMT</pubDate>
            <description><![CDATA[masutaka.net を取得し、コンテンツも移動しました。
[2009-05-17-1] のリダイレクトの設定をしたので、ブラウザの URL も
http://masutaka.net/chalow/ になっていると思います。
▼今までのアクセス
読者 -&gt; http://www8.atpages.jp/hotsuma/* ▼これからのアクセス
読者 -&gt; http://masutaka.net/* -内部-&gt; http://masutaka.sakura.ne.jp/* 読者 -&gt; http://www8.atpages.jp/hotsuma/* -自動転送-&gt; http://masutaka.net/* レンタルサーバは @pages から、さくらインターネット に変更しました。
私が注目した違いはこんな感じです。(ディープな使い方はしていないので、
悪しからず。。。)
    @pages さくらインターネット(スタンダードプラン)     料金 ￥0 ￥1,000(初期費用)+￥5,000(年間)   アップロード方法 FTP SSH,FTP   cron × ○   CGIからのメール送信 × ○   転送量制限 1MB以上の転送は5KB/sに制限される 10GB(日)    DISK容量 1GB 3GB    ※ masutaka.]]></description>
        </item>
        <item>
            <title><![CDATA[クックパッド本]]></title>
            <link>https://masutaka.net/2009-05-17-3/</link>
            <guid>https://masutaka.net/2009-05-17-3/</guid>
            <pubDate>Sun, 17 May 2009 02:00:00 GMT</pubDate>
            <description><![CDATA[中の人によると「おもしろいよ」とのこと。
まだ買っていませんが、宣伝しておきますね。]]></description>
        </item>
        <item>
            <title><![CDATA[301 や 302 リダイレクトを返したときの検索エンジンの挙動]]></title>
            <link>https://masutaka.net/2009-05-17-2/</link>
            <guid>https://masutaka.net/2009-05-17-2/</guid>
            <pubDate>Sun, 17 May 2009 01:00:00 GMT</pubDate>
            <description><![CDATA[Google    種類 説明     301リダイレクト 永久的なリダイレクト   302リダイレクト 記載なし   303リダイレクト 記載なし   307リダイレクト 記載なし   メタリフレッシュ 詳細不明。Google では 301 リダイレクトをお勧めしている。    「サイトの移転 - ウェブマスター/サイト所有者 ヘルプ 」
「メタ タグ - ウェブマスター/サイト所有者 ヘルプ 」より
Yahoo! JAPAN    種類 説明     301リダイレクト 永久的なリダイレクト   302リダイレクト 一時的なリダイレクト   303リダイレクト 記載なし   307リダイレクト 記載なし   メタリフレッシュ &lt;meta http-equiv=&quot;refresh&quot; content=.]]></description>
        </item>
        <item>
            <title><![CDATA[Web サイトを移転するときの便利なテクニック]]></title>
            <link>https://masutaka.net/2009-05-17-1/</link>
            <guid>https://masutaka.net/2009-05-17-1/</guid>
            <pubDate>Sun, 17 May 2009 00:00:00 GMT</pubDate>
            <description><![CDATA[[2009-05-16-3] は、今回の布石でした。決して、Web サーバと直接お話し
したいわけではありません。ｗ
移転を読者にお知らせする、一番簡単な方法が [2006-05-28-1] にも書い
たメタリフレッシュです。ただ、全ての *.html や CGI に仕込む必要があ
りますし、検索エンジンに伝わるかどうかは検索エンジンの実装に依存し
てしまいます(※[2009-05-17-2] )。以降で述べる .htaccess の使用が許可
されていない時を除き、使うべきではないでしょう。
実は、HTTP ステータスコードには移転関係のコードもあります。
 301: Moved Permanently
302: Found
303: See Other
307: Temporary Redirect
 説明は「HTTPステータスコード 」に譲りますが、Web サー
バが 301 を返すようにすると、検索エンジンが適切に処理してくれます。
では、どうすれば Web サーバが 301 を返すようになるのでしょう？
例えば、http://src.example.jp/~masutaka/ から
http://dst.example.com/~masutaka/ に構成を変えずにそのまま移転した
い場合は、.htaccess に以下のように記載します。.htaccess は、
http://src.example.jp/~masutaka/.htaccess に相当する場所に置きます。
&lt;IfModule mod_rewrite.c&gt; RewriteEngine On RewriteBase / RewriteRule (.*) http://dst.example.com/~masutaka/$1 [R=301,L] &lt;/IfModule&gt; 今回は試しに http://www8.atpages.jp/hotsuma/test.html を
http://homepage2.nifty.com/chronicle/test.html に飛ばす設定を仕込ん
でみました。]]></description>
        </item>
        <item>
            <title><![CDATA[telnet で直接 web サーバとお話しする。]]></title>
            <link>https://masutaka.net/2009-05-16-3/</link>
            <guid>https://masutaka.net/2009-05-16-3/</guid>
            <pubDate>Sat, 16 May 2009 02:00:00 GMT</pubDate>
            <description><![CDATA[[2004-02-09-1] の HTTP 版です。
Web ブラウザは HTTP リクエストを送信し、返ってきたステータスコード
や、生の HTML 等を解析するのが仕事です。
HTTP リクエストは簡単なので、人間が telnet で接続しサーバとお話しす
ることもできます。
存在するページを指定すると、200 ステータスコードとともに、生の HTML コードが出力されます。 % telnet www.example.com 80 Trying 208.77.188.166... Connected to example.com. Escape character is &#39;^]&#39;. GET /index.html HTTP/1.0 #&lt;= 入力後、Enter×2回 HTTP/1.1 200 OK #&lt;= ステータスコード 200 が返ってきた。 (以下省略) 存在しないページを指定すると、404 ステータスコードが出力されます。 % telnet www.example.com 80 Trying 208.77.188.166... Connected to www.example.com. Escape character is &#39;^]&#39;. GET /hoge.html HTTP/1.0 #&lt;= 存在しないページを入力後、Enter×2回 HTTP/1.1 404 Not Found #&lt;= ステータスコード 404 が返ってきた。 (以下省略) オプション(HTTP ヘッダ)を指定すると、環境変数として CGI に渡ります。 この例だと分かりませんが、簡単な CGI のプログラムで確認出来ます。]]></description>
        </item>
        <item>
            <title><![CDATA[本を購入]]></title>
            <link>https://masutaka.net/2009-05-16-2/</link>
            <guid>https://masutaka.net/2009-05-16-2/</guid>
            <pubDate>Sat, 16 May 2009 01:00:00 GMT</pubDate>
            <description><![CDATA[近所の文教堂にぶらっと寄ったら、4 冊も買ってしましました。
新版 古事記物語  最近、日本神話がややマイブームです。まとめて読んだことがなかったの
で、買ってみました。文字が大きく文章も平易なので、子供でも読めそうです。
古事記・日本書紀を歩く—神話と伝説の世界を訪ねて  写真付きで、古事記・日本書紀の地に案内してくれます。これから読むの
が楽しみです。
大人のための「北斗の拳」人物伝  脈絡ねぇ〜ｗ
イラスト付きの各キャラクターの解説本です。なぜか最後はボルゲでした。
でも、これ一応 PHP 文庫なんですよ。PHP 文庫は他と違う本を出すので、
本屋に行ったときは必ずチェックしています。
こゝろ  『謎とき村上春樹 』という本で、『ノルウェイの森 』と似た構造を持って
いると触れられていたので、ずっと気になっていました。
そういえば『ノルウェイの森』は映画化されるみたいですね。個人的に
は『ねじまき鳥クロニクル 』の方をして欲しかったです。でも映画化する
には難しすぎるかな？
『謎とき村上春樹』の著者は『『こころ』大人になれなかった先生 』とい
う解説本も書いていました。しょうがない、読み終わったら買ってみるか。笑]]></description>
        </item>
        <item>
            <title><![CDATA[find メモ]]></title>
            <link>https://masutaka.net/2009-05-16-1/</link>
            <guid>https://masutaka.net/2009-05-16-1/</guid>
            <pubDate>Sat, 16 May 2009 00:00:00 GMT</pubDate>
            <description><![CDATA[(URL: 404 Blog Not Found:findを極めたかったら、statを押さえよ )]]></description>
        </item>
        <item>
            <title><![CDATA[Navi2ch メモ]]></title>
            <link>https://masutaka.net/2009-05-14-1/</link>
            <guid>https://masutaka.net/2009-05-14-1/</guid>
            <pubDate>Thu, 14 May 2009 00:00:00 GMT</pubDate>
            <description><![CDATA[List モードで `U&rsquo;(navi2ch-list-show-url)
板の URL をコピー or ブラウザで表示 or タイトルをコピー or URL とタイトルをコピー
Board 系モード で `U&rsquo;(navi2ch-board-show-url)
板・スレの URL をコピー or ブラウザで表示 or タイトルをコピー
Article モード で `U&rsquo;(navi2ch-article-show-url)
板・スレ・特定のレスの URL をコピー or ブラウザで表示 or タイトルをコピー
Article モードで `W&rsquo;(navi2ch-article-write-sage-message)
レスを &ldquo;sage&rdquo; 状態で新規作成。
Article モードで `a&rsquo;(navi2ch-article-add-important-message)
現在のレスにマークを付ける。navi2ch を終了するとマークは消える。
Article モードで $'(navi2ch-article-toggle-important) a&rsquo; でマークしたレスと、レス全てをトグルする。
Article モードで ?'(navi2ch-article-search) 現在のスレからレスを検索する。名前(name)、メール(mail)、日付(date)、 ID(id)、ホスト名(hostname)、本文 (body)、参照(reference) から検索条 件を選ぶことができる。最近「参照」が実装された。表示しているレスが 対象なので r&rsquo;(navi2ch-article-redraw-range) -&gt; `0&rsquo; 等で、全レスを
表示してから実行すると良い。
Article-mode で `M-d&rsquo;(navi2ch-article-decode-message)
現在のレスをデコードする。
Message-mode で `C-c C-b&rsquo;(navi2ch-base64-insert-file)]]></description>
        </item>
        <item>
            <title><![CDATA[アナログマ]]></title>
            <link>https://masutaka.net/2009-05-10-3/</link>
            <guid>https://masutaka.net/2009-05-10-3/</guid>
            <pubDate>Sun, 10 May 2009 02:00:00 GMT</pubDate>
            <description><![CDATA[[2007-07-03-1] にサンプルとして使った AA(アスキーアート) が今話題に
なっているらしい。
 うちのクマもまだまだ元気です。最後も看取ります。ｗ
(URL: アナログマ公式サイト )]]></description>
        </item>
        <item>
            <title><![CDATA[『国家の罠』を読んだ]]></title>
            <link>https://masutaka.net/2009-05-10-2/</link>
            <guid>https://masutaka.net/2009-05-10-2/</guid>
            <pubDate>Sun, 10 May 2009 01:00:00 GMT</pubDate>
            <description><![CDATA[[2009-04-19-1] に買って今日読み終えた。期待以上におもしろかった。
外交の現場や、拘置所暮らしに興味のある方ｗにおすすめ。
序盤は自分を美化しすぎている感じで、正直言ってくじけそうになった。
SAPIO の連載を読んでいるので、それほど目新しいこともなかったし。
しかし、中盤からがらりと様相が変わり、舞台は拘置所に移る。西村検事
とのやりとりは、ここまで書いていいの？くらい書いてあるし、拘置所内
の生活もかなり細かく書いてある。拘置所暮らしも悪くないのかなと思わ
せてしまうから恐ろしい。笑
最後に気になった箇所を抜粋。
P. 495
 しかし、一旦報道された内容は後で訂正されません。大多数の国民には、
自己増殖した報道による私や鈴木氏に関する『巨悪のイメージ』と、そ
の『巨悪』を捜査当局が十分に摘発しなかったことに対する憤りだけが残
ります。
 鈴木宗男事件の事実がどうなのかは置いといて、痛いところを付いている
と思う。報道機関(特にテレビ)は点でしか物事を伝えないから、事実と反
することを報道してしまったら、それを訂正するのは難しい。
逆に(テレビ局が)まとめサイト的なものを作ると、信頼度がグンと増すと
思う。例えば、全てのニュースに番号が振ってあって、後日テレビ局のサ
イトを見ると、ことの顛末が分かるとか。
「訴状が届いていないので、コメントは差し控えたい。」なんてバカな
ニュースは減るのではないかな。]]></description>
        </item>
        <item>
            <title><![CDATA[カルボナーラ]]></title>
            <link>https://masutaka.net/2009-05-10-1/</link>
            <guid>https://masutaka.net/2009-05-10-1/</guid>
            <pubDate>Sun, 10 May 2009 00:00:00 GMT</pubDate>
            <description><![CDATA[「masutinのお料理公開ブログ」第２弾です。
数年ぶりにカルボナーラを作ってみました。隣に写っているのは、きゅう
りとツナをマヨネーズで和えたものです。簡単なので、レシピは省きます。
レシピ    材料(1人分)
パスタ・・・・・・・・・・・100g
オリーブオイル・・・・・・・適当
ベーコン・・・・・・・・・・2枚
ホイップクリーム(植物性)・・200ml
卵・・・・・・・・・・・・・1個
パルメザンチーズ・・・・・・かなり多め
黒こしょう(粗挽き)・・・・・かなり多め
塩・・・・・・・・・・・・・少々
   鍋に塩を入れ、湯を沸かし始める。塩は多めで。
  ベーコンを 1cm 幅に切る。ホイップと卵は室温に戻しておく。
  湯が沸いたら、パスタを投入する。キッチンタイマーを忘れずにセット
する。
  オリーブオイルを引いてフライパンを中火で熱し、ベーコンを炒める。
こんがり焼き色が付いたら、火を止める。キッチンペーパーで余分な油を
吸い取っておく。
  フライパンの温度が少し下がったらホイップを投入し、パルメザンチー
ズ、黒こしょう、塩を入れる。パルメザンチーズと黒こしょうはかなり多
め。この 2 つをケチると味が付かない。
  パスタが茹で上がったら湯を切り、フライパンに入れる。すかさず卵を
割り入れ、強火でよくかき混ぜる。火を付けたのはソースを温めるため。
10〜20 秒程度で火は消して良い。乳化([2009-04-12-1] )を意識して、よく
かき混ぜる。
  まとめ 味がやや薄く、少しぬるいものが出来てしまいました。敗因は、、
  ホイップを余らせたくなかったので、1 パック使いきったこと。かなり
多かった。^^; おかげでチーズや塩の分量が分からなくなった。100ml +
パスタの茹で汁少々で良いと思う。
  卵にかなり多く血がまじっていたので、取り除くのに手間取った。普段
は気にしないのだが、あり得ないくらい多かった&hellip;。
  卵をダマにしないことを意識しすぎて、火にかける時間が少なすぎた。
  パルメザンチーズは、仕上がりにもかけると良いと思います。あと、でき]]></description>
        </item>
        <item>
            <title><![CDATA[大魔導士ポップに学ぶ新卒の重要性]]></title>
            <link>https://masutaka.net/2009-05-09-1/</link>
            <guid>https://masutaka.net/2009-05-09-1/</guid>
            <pubDate>Sat, 09 May 2009 00:00:00 GMT</pubDate>
            <description><![CDATA[なんだか捨てるのがもったいないので、ここに置いておきますね。
  ]]></description>
        </item>
        <item>
            <title><![CDATA[『クラインの壷』を読んだ]]></title>
            <link>https://masutaka.net/2009-05-04-1/</link>
            <guid>https://masutaka.net/2009-05-04-1/</guid>
            <pubDate>Mon, 04 May 2009 00:00:00 GMT</pubDate>
            <description><![CDATA[ [2009-04-19-1] に買って今日読み終えた。結論からいうと、オススメ。
一気に読んでしまった。ちょっと悲しい話を読みたい人向けかな。
内容としては、バーチャルな世界を体験するうちに現実と非現実の境があ
いまいになるという、よくあるストーリー。ただ 20 年も前の小説だから、
「よくある」という表現は不適切かもしれない。内容は良く練り上げられ
ており、特に中盤から後半にかけて引きずり込まれるように読んだ。
プログラミング経験があって、小説の舞台のすぐ近くに住んでいると、さらに
リアリティが増すはず。まあ、私のことなんですがね。ｗ
ところで、小説のなかで笹森貴美子というイプシロン・プロジェクトの社
長が登場する。彼女は、部下であるケネス・バトラーに結構厳しい注文を
する。(オーノー、今日も徹夜デスヨなんてセリフが 2〜3 回でてくる。)
読みながら、現実的な日程を組み直した方が良いのでは？(社長だけど)
PM としてどうなの？などとバカなことを考えてしまった。ｗ
1996 年にテレビドラマ化もされたそうで、画像とあらすじが見つかりまし
た。ヲタゲーマー役の須藤君がいい味を出しています。
URL: http://www1.odn.ne.jp/~aal28310/sudou-23.html ちなみに「クラインの壷」とは、「メビウスの輪」の高次元版だそう。
以下に四次元化したイメージがありますが、私は分かりませんでした&hellip;。
URL: http://www.yk.rim.or.jp/~ans/SUBI/sya.html ]]></description>
        </item>
        <item>
            <title><![CDATA[Web ベースの Emacs「9ne」]]></title>
            <link>https://masutaka.net/2009-04-30-3/</link>
            <guid>https://masutaka.net/2009-04-30-3/</guid>
            <pubDate>Thu, 30 Apr 2009 02:00:00 GMT</pubDate>
            <description><![CDATA[世界を股にかける某氏から 9ne を教えてもらいました。ただ、よく分かり
ませんでした。^^; そのうち分かるだろうということで、メモしておきます。
http://robrohan.com/projects/9ne/9ne.php?file=texts/intro.txt 追伸:
Firemacs で十分な気がしてきた…。]]></description>
        </item>
        <item>
            <title><![CDATA[漢の zsh]]></title>
            <link>https://masutaka.net/2009-04-30-2/</link>
            <guid>https://masutaka.net/2009-04-30-2/</guid>
            <pubDate>Thu, 30 Apr 2009 01:00:00 GMT</pubDate>
            <description><![CDATA[zsh との付き合いは 7 年くらいになりますが、やはり補完が便利です。
tar のオプションを補完。
 % tar ←ここで tab キー
A &ndash; append to an archive
c &ndash; create a new archive
f &ndash; specify archive file or device
t &ndash; list archive contents
u &ndash; update archive
v &ndash; verbose output
x &ndash; extract files from an archive
 make のルールを補完。
 % make ←ここで tab キー
all check-syntax clean hoge.o hugahuga.o main.o
 cd した履歴を補完。
 % pwd]]></description>
        </item>
        <item>
            <title><![CDATA[本を購入]]></title>
            <link>https://masutaka.net/2009-04-30-1/</link>
            <guid>https://masutaka.net/2009-04-30-1/</guid>
            <pubDate>Thu, 30 Apr 2009 00:00:00 GMT</pubDate>
            <description><![CDATA[今日は少し早く帰ったので、最寄り駅の隣駅で買ってきました。
Binary Hacks  objdump や objcopy などの基本的な話から、「main() の前に関数を呼ぶ」
や「LD_PRELOAD で既存の関数をラップする」などコアな話まで色々揃って
いて面白そうです。GW は忙しくなりそう。(違]]></description>
        </item>
        <item>
            <title><![CDATA[GDM のテーマを追加する]]></title>
            <link>https://masutaka.net/2009-04-29-2/</link>
            <guid>https://masutaka.net/2009-04-29-2/</guid>
            <pubDate>Wed, 29 Apr 2009 01:00:00 GMT</pubDate>
            <description><![CDATA[lenny の頃にはあった BlueSwirl テーマが squeeze ではなくなってしまっ
たので、拡張パッケージか何かになっていないか調べてみた。
なさそうだったので、GNOME のページ から GDM-BlueSwirl.tar.bz2 をダウ
ンロードし、ログイン画面から「追加」しようとした。
ところが、&quot;.tar.gz&quot; は表示されるが &ldquo;.tar.bz2&rdquo; は表示されない&hellip;。
仕方がないので、GDM-BlueSwirl.tar.gz に変換したら、「追加」で選択で
きるようになった。/usr/share/gdm/themes/BlueSwirl/ として展開されて
いることも確認済み。]]></description>
        </item>
        <item>
            <title><![CDATA[サイバークリーン]]></title>
            <link>https://masutaka.net/2009-04-29-1/</link>
            <guid>https://masutaka.net/2009-04-29-1/</guid>
            <pubDate>Wed, 29 Apr 2009 00:00:00 GMT</pubDate>
            <description><![CDATA[キーボードの掃除が出来るみたい。
http://www.irisplaza.co.jp/Index.asp?KB=SHOSAI&SID=H518613F 動画ウソくせーｗ セリフ棒読みだし。
しかし、￥390 で送料無料というのには惹かれるな。
と思って、アマゾンを見たら、
 ダ　メ　で　し　た　＼（＾ｑ＾） ／
とさ。
追伸:
画像がおかしかったら、このページをリロードしてください。それでもダ
メだったら、Shift キーを押しながらリロード(強制リロード)してください。]]></description>
        </item>
        <item>
            <title><![CDATA[選択範囲のライン数と文字数を表示]]></title>
            <link>https://masutaka.net/2009-04-27-1/</link>
            <guid>https://masutaka.net/2009-04-27-1/</guid>
            <pubDate>Mon, 27 Apr 2009 00:00:00 GMT</pubDate>
            <description><![CDATA[M-= (count-lines-region)
用途は少なそう。]]></description>
        </item>
        <item>
            <title><![CDATA[文字コード推測]]></title>
            <link>https://masutaka.net/2009-04-26-2/</link>
            <guid>https://masutaka.net/2009-04-26-2/</guid>
            <pubDate>Sun, 26 Apr 2009 01:00:00 GMT</pubDate>
            <description><![CDATA[ruby の NKF モジュールは、コマンドの nkf と比べてなぜか guess の精
度が低いです。例えば、以下の文字列を EUC-JP として保存し評価すると
NKF モジュールは ASCII、nkf コマンドは EUC-JP という結果になります。
ruby のバージョンは 1.8.7-p72 です。
 aaaaaaaaaaaaaaaaaaaaaaaa
テストテスト。
 仕方がないので、nkf コマンドがある時は nkf コマンドを、なければ
NKF モジュールを使って文字コードを推測するサンプルコードを書きました。
#!/usr/bin/env ruby STR = &lt;&lt;EOF aaaaaaaaaaaaaaaaaaaaaaaa テストテスト。 EOF TMPFILE = &#34;#{File.basename($0)}.tmp.#{$$}&#34; result = &#34;&#34; File.open(TMPFILE, &#34;w&#34;) do |f| f.write(STR) end if /mswin32/ =~ RUBY_PLATFORM result = `type #{TMPFILE} | nkf --guess 2&gt; nul` else result = `sh -c &#39;cat #{TMPFILE} | nkf --guess 2&gt; /dev/null&#39;` end File.]]></description>
        </item>
        <item>
            <title><![CDATA[ベーコンとチキンのトマトソース]]></title>
            <link>https://masutaka.net/2009-04-26-1/</link>
            <guid>https://masutaka.net/2009-04-26-1/</guid>
            <pubDate>Sun, 26 Apr 2009 00:00:00 GMT</pubDate>
            <description><![CDATA[10 年以上作り続けているレシピを、今ここに公開します。^^;
レシピ    材料(1人分)
パスタ・・・・・・・・・・・100g
鶏ササミ・・・・・・・・・・90g
ベーコン・・・・・・・・・・2枚
ホールトマト・・・・・・・・2/3缶
小麦粉・・・・・・・・・・・少々
オリーブオイル・・・・・・・適当
白ワイン・・・・・・・・・・適当
塩・・・・・・・・・・・・・適当
こしょう・・・・・・・・・・適当
乾燥バジル・・・・・・・・・適当
乾燥オレガノ(あれば)・・・・適当
チリペッパー(お好み)・・・・適当
とろけるチーズ(お好み)・・・1枚
   鍋に塩を入れ、湯を沸かし始める。塩は多めで。
  ベーコンの油が気になる人は、電子レンジで油抜きをする。キッチンペー
パー 2 枚、ベーコン、キッチンペーパー 1 枚の順に敷いて、電子レンジ
で 1 分ほど加熱すれば OK 。
  ササミとベーコンを一口大に切る。ササミには小麦粉をまぶしておくと
旨味が逃げないらしい。今回初めて試した。
  湯が沸いたら、パスタを投入する。キッチンタイマーを忘れずにセット
する。
  オリーブオイルを引いてフライパンを強火で熱し、ササミとベーコンを
炒める。いい感じになってきたら白ワインを加え、おいしくできるように
お祈りをする。(-∧-)
  ササミに軽く焦げ目がついたらホールトマト、塩、こしょう、乾燥バジ
ル、(もしあれば)乾燥オレガノを投入する。辛いのが好きな人はチリペッ
パーも入れるとウマー。
  ホールトマトをヘラ等で細かく潰し、そのまま強火で煮詰める。途中、
焦げそうになったら適当に火を弱める。
  体がチーズを欲していたら火を消さずに、ソースにとろけるチーズを載
せる。タイミングはパスタが茹で上がる 1 分前。
  茹で上がったパスタを皿に盛り、上からソースをかけて完成。
  まとめ このように、トマトソースはパスタを茹でている間に出来てしまいます。]]></description>
        </item>
        <item>
            <title><![CDATA[MS-Office 2010 は来年上半期だそうです。]]></title>
            <link>https://masutaka.net/2009-04-20-2/</link>
            <guid>https://masutaka.net/2009-04-20-2/</guid>
            <pubDate>Mon, 20 Apr 2009 01:00:00 GMT</pubDate>
            <description><![CDATA[MS、「Office 2010」を2010年上半期より提供 - スラッシュドット・ジャパン またスタイリッシュな様変わりを見せてくれるのだろうか。MS のアプリは
バージョン間の互換性が著しく損なわれているので、そろそろ別なアプリ
を使うことも検討したほうがよいかなあ。配布するときは pdf 化すれば良
いし。
他にパッと思いつくのは、OpenOffice.org かな。オープンソースの統合オ
フィスソフト。MS-Office と高い相互運用性(?)があるらしい。Windows,
Linux, MacOSX 等で動作する。
ちなみに OpenOffice.org は会津若松市で導入実績があるとのこと。導入
を検討する場合、参考になると思う。
→ 会津若松市がOpenOffice.org導入の経費や職員からの声を公開 - スラッシュドット・ジャパン 日本が誇る JustSystem の Just Suite も忘れてはならない。
「一太郎(ワープロ)」「ATOK(IME)」「三四郎(表計算)」「Agree(プレゼ
ン)」「花子(グラフィック)」「Shuriken(メーラ)」「JUST PDF(PDF作成+
編集)」が揃ったお得なパック。でもこうやって、括弧で注釈を付けないと
何のアプリなのか分からないよなあ。
ATOK for Windows には長年お世話になっております。大学 2 年の時に
「一太郎 + Lotus1-2-3」モデルの PC(FMV-5100C3) を買ったときからの付
き合い。今探したら見つかった 。懐かしい。。。
そういえば、ATOK は 2007 年に Linux 版も出ていたのだった 。anthy は
ATOK に比べて誤変換が多すぎるから、今度試してみようかなあ。]]></description>
        </item>
        <item>
            <title><![CDATA[YouTube で気をつけること]]></title>
            <link>https://masutaka.net/2009-04-20-1/</link>
            <guid>https://masutaka.net/2009-04-20-1/</guid>
            <pubDate>Mon, 20 Apr 2009 00:00:00 GMT</pubDate>
            <description><![CDATA[マイアカウントから、最低でも「お気に入り」と「最近のアクティビティ」
は削除した方が良い。
自分のプロフィールは http://www.youtube.com/user/ &lt;アカウント名&gt; で
誰でもアクセスできてしまうが、デフォルトの設定では「お気に入り」も
参照できるようになっている。(一旦ログアウトして、前述の自分のプロ
フィールのページに飛ぶと、何が公開されているのかが分かる。)
現時点での変更方法は以下のとおり。
 上の方にある「アカウント」をクリック 「概要」→「チャンネルの編集」をクリック 「チャンネルのデザイン」をクリック 「最近のアクティビティ ボックス」のチェックを外す。 「お気に入りボックス」のチェックを外す。  アマゾンは「ほしいもの物リスト」はデフォルト非公開で、公開状態だと
警告を出してくれるんだけど、YouTube は「お気に入り」はデフォルト公
開で、公開状態でも警告は出さないんだね。問題なのでは。。。]]></description>
        </item>
        <item>
            <title><![CDATA[本を購入]]></title>
            <link>https://masutaka.net/2009-04-19-1/</link>
            <guid>https://masutaka.net/2009-04-19-1/</guid>
            <pubDate>Sun, 19 Apr 2009 00:00:00 GMT</pubDate>
            <description><![CDATA[今日は合計 5 冊買ってきました。「クラインの壷」と「国家の罠」は近所の古本屋名誠書房で、「佐藤可士和の超整理術」と「豊臣秀長(上・下)」はブックオフで買ってきました。
クラインの壷  最近の私としては珍しく小説です。[2009-03-07-1] に買った「人に好かれる話し方 」の中で、それまであまり小説を読まなかった和田さんが書店の社長に勧められた本として紹介されていたので、試しに買ってみました。P. 128 にそのエピソードが載っています。
国家の罠  買うつもりはありませんでしたが、たまたま見つけて、そういえばこの本を買おうとして、間違えて「国家の謀略 」を買ったことがあったなあと思い出したのでリベンジしました。￥390 でした。ただ、その後に行ったブックオフでは ￥105 だったので、リベンジは失敗したような感じです。笑
佐藤可士和の超整理術  気になる本は Amazon のほしい物リスト に追加するようにしているのですが、それによると 2007.10.7 に気になって追加したようです。Amazon は携帯からも見られるので、なかなか便利ですよ。
豊臣秀長   「ある補佐役の生涯」というサブタイトルに惹かれて買いました。比較的マイナーな人物が好きというのもあります。うちにあるので該当するのは「織田信忠 」と「天を衝く 」の九戸政実ですかね。]]></description>
        </item>
        <item>
            <title><![CDATA[Debian を PS3 のメディアサーバにする。]]></title>
            <link>https://masutaka.net/2009-04-12-2/</link>
            <guid>https://masutaka.net/2009-04-12-2/</guid>
            <pubDate>Sun, 12 Apr 2009 01:00:00 GMT</pubDate>
            <description><![CDATA[PS3 のメニューにあるメディアサーバってなんだろ？って前から思っていたんだけど、さっき急にイベントが降ってきたので調べてみた。
URL: http://tf222.moe-nifty.com/blog/2007/11/debianetchdlna_5598.html PS3 では Mediatomb が動作実績があるらしい。Debian でもパッケージが用意されていて、簡単にインストールできる。
# aptitude install mediatomb インストールしたら、/etc/mediatomb/config.xml を少し修正する必要がある。
 &lt;server&gt; セクションの &lt;protocolInfo extend=&quot;no&quot;/&gt; を &lt;protocolInfo extend=&quot;yes&quot;/&gt; に変更。 &lt;mapping&gt;&lt;extension-mimetype&gt; セクションに以下を追加。  &lt;map from=&#34;mpg&#34; to=&#34;video/mpeg&#34;/&gt; &lt;map from=&#34;mp4&#34; to=&#34;video/mp4&#34;/&gt; &lt;map from=&#34;avi&#34; to=&#34;video/divx&#34;/&gt; 修正を反映するために、mediatomb デーモンを再起動する。
# /etc/init.d/mediatomb restart Web ブラウザからアクセスできるようになるので、適当にファイルを追加。
http://(mediatomb サーバの名前または IP アドレス):49152/ ただ、この追加って作業が意外に面倒。登録したフォルダを PS3 から参照って出来ないのかなあ。
まあそれはともかく、PS3 からは「メディアサーバー検索」をすると、見つかるはず。
うちのテレビの低解像度が功を奏して(?)、動画によっては PC よりもきれいに見えるものがあった。あと、うちにはミニコンポというものはないので、mp3 は PS3 で再生するのが一番音がいいかも。。。
Windows の場合は、Windows Media Player をゴニョゴニョするとサーバになるらしいが未確認。]]></description>
        </item>
        <item>
            <title><![CDATA[乳化]]></title>
            <link>https://masutaka.net/2009-04-12-1/</link>
            <guid>https://masutaka.net/2009-04-12-1/</guid>
            <pubDate>Sun, 12 Apr 2009 00:00:00 GMT</pubDate>
            <description><![CDATA[ パスタのゆで汁って弱いながらも乳化安定剤（タンパク質）を含んでいて、
それにでんぷんが少しとろみをつけるので、ただのお水よりも乳化させや
すいんです。
 へぇ〜。全然意識してなかった。
URL: http://www5.famille.ne.jp/~zerbina/pastafan/pastabeginers/pbeginer2_16.html ]]></description>
        </item>
        <item>
            <title><![CDATA[スレ立て乙]]></title>
            <link>https://masutaka.net/2009-04-09-1/</link>
            <guid>https://masutaka.net/2009-04-09-1/</guid>
            <pubDate>Thu, 09 Apr 2009 00:00:00 GMT</pubDate>
            <description><![CDATA[ ]]></description>
        </item>
        <item>
            <title><![CDATA[「未分類」というカテゴリを作りました。]]></title>
            <link>https://masutaka.net/2009-04-08-1/</link>
            <guid>https://masutaka.net/2009-04-08-1/</guid>
            <pubDate>Wed, 08 Apr 2009 00:00:00 GMT</pubDate>
            <description><![CDATA[カテゴライズしていない記事を救うために(?)、「未分類 」というカテゴリ
を作りました。今回は ChangeLogReader.pm へのパッチです。意外に簡単
でした。
--- ChangeLogReader.pm.org	2005-08-10 11:31:46.000000000 +0900 +++ ChangeLogReader.pm	2009-04-08 21:00:41.000000000 +0900 @@ -152,6 +152,8 @@ # print &#34;[[[[$ih]]]\n&#34;; if ($ih =~ s/\s*\[(.+)\]$//) { # category @cat = split(/\s*\]\s*\[\s*/, $1); + } else { +	push(@cat, &#34;未分類&#34;); } # Processing item content ついでに軽い不具合も発見したので修正。カテゴリに含まれる記事の数が
$cat_page_entry_max の倍数だと、「次ページ」を 1 つ多く作っていました。
--- chalow.org	2007-10-19 23:15:01.000000000 +0900 +++ chalow	2009-04-08 21:54:41.000000000 +0900 @@ -661,6 +661,10 @@ my $n = $cat_page_entry_max; my $num_of_old_pages = int(@ents / $n); +	if (int(@ents % $n) == 0) { +	$num_of_old_pages -= 1; +	} + my @fnames; for (my $i = 0; $i &lt;= $num_of_old_pages; $i++) { $fnames[$i] = get_category_filename($catname); 追記(2011-07-06):]]></description>
        </item>
        <item>
            <title><![CDATA[gcc の -Wextra オプション]]></title>
            <link>https://masutaka.net/2009-04-07-3/</link>
            <guid>https://masutaka.net/2009-04-07-3/</guid>
            <pubDate>Tue, 07 Apr 2009 02:00:00 GMT</pubDate>
            <description><![CDATA[[2009-04-07-2] を調べていく過程で -Wextra オプションを知った。gcc3
までは -W とのこと。-Wall って、&ldquo;all&rdquo; じゃないのか。。。
-Wextra は、-Wall よりも厳しめの警告を出すようだ。両方有効にしたい
場合は、&quot;-Wall -Wextra&quot; と指定する。
詳しくは gcc の info に書いてあるみたい。確認してみるか。
URL: http://at-aka.blogspot.com/2006/11/gcc-wall-w.html URL: http://sugarpot.sakura.ne.jp/yuno/?gcc%2Fwarning ]]></description>
        </item>
        <item>
            <title><![CDATA[flymake-mode]]></title>
            <link>https://masutaka.net/2009-04-07-2/</link>
            <guid>https://masutaka.net/2009-04-07-2/</guid>
            <pubDate>Tue, 07 Apr 2009 01:00:00 GMT</pubDate>
            <description><![CDATA[flymake-mode を使うと、ソース保存時にコンパイルエラーとなる箇所を検
出してくれるらしい。とりあえず試してみた。
設定方法  Makefile に check-syntax という名前のルールを追加する。$(CC) と
$(CFLAGS) は各自でセットしてくれ。  check-syntax: $(CC) $(CFLAGS) -fsyntax-only $(CHK_SOURCES) ソースファイルを開き、M-x flymake-mode する。コンパイルエラーに
なるような修正をして保存。→エラー箇所の背景色がピンクになった。  解説 flymake.el の flymake-get-make-cmdline() によると、例えば hoge.c の
場合、保存時に裏で以下のコマンドが実行されるらしい。そのため、(1)
で check-syntax ルールを追加したというわけ。
|make -s -C . CHK_SOURCES=hoge.c SYNTAX_CHECK_MODE=1 check-syntax
おまけ C や C++ ソースを開いたときに、自動的に flymake-mode を有効にする設
定は以下のとおり。
(add-hook &#39;c-mode-common-hook (lambda () (flymake-mode t))) URL: http://www.02.246.ne.jp/~torutk/cxx/emacs/flymake.html ]]></description>
        </item>
        <item>
            <title><![CDATA[『会社に人生を預けるな』を読んだ]]></title>
            <link>https://masutaka.net/2009-04-07-1/</link>
            <guid>https://masutaka.net/2009-04-07-1/</guid>
            <pubDate>Tue, 07 Apr 2009 00:00:00 GMT</pubDate>
            <description><![CDATA[[2009-03-29-2] に買って今日読み終えた。
実は裏で長々と書いたんだけど、どうにもまとまらない。
個人的には「会社に人生を預けたい」。転職なんぞ考えずに、自分の選ん
だ会社で好きな仕事をやり続けたい。
でもそれは今の時代大きなリスクなんですよ、そして自分でリスクを管理
するのは本来楽しいことなんですよと、本書は言っている。
しかし、当然といえば当然だが、具体的にどうすれば良いのかは提示され
ていない。まあ、それを考えるのが楽しいのだろうね。
とりあえず今はいろんな意味で現状分析かな。
ただ、リスク管理という意味では、仕事を考える前に保険に入るのが先な
んだろうな。←入ってない人。。]]></description>
        </item>
        <item>
            <title><![CDATA[質問の方法]]></title>
            <link>https://masutaka.net/2009-04-05-2/</link>
            <guid>https://masutaka.net/2009-04-05-2/</guid>
            <pubDate>Sun, 05 Apr 2009 01:00:00 GMT</pubDate>
            <description><![CDATA[(URL: 404 Blog Not Found:アドバイスが欲しい人に、たった一つのアドバイス )
だいぶ前の記事だけど、的を得ているのでメモメモ。
でも、社会人２年目までは「全然分からないので教えてください」ってい
う質問(?)もありだと思います。(私もそこまで鬼ではない。)
ただ最後に「ありがとうございました。他になにか僕が聞いておくべきコ
トがあるでしょうか？今までお聞きしたことと全く違うことでもいいので
すが。」と言われたらガックリくるのは間違いない。
追記(2009-04-07):
「的を得ている」って間違っていたかなあと思って、調べてみました。
 語源の『大学』・『中庸』にあるように、「正鵠（せいこく）を失う」という
表現からきています。この場合の正鵠は「正も鵠も、弓の的のまん中の黒星
（『角川漢和中辞典』）」のことで、射てど真ん中の黒星に当てることができ
たかどうか、当たったら「得た」といい、はずれたら「失う」と表現していた
のです。
 だそうです。そういうもんかなあと思ったので「的を得る」を採用させて
いただきました。
URL: http://www.ne.jp/asahi/wh/class/oubunsha.html ]]></description>
        </item>
        <item>
            <title><![CDATA[本を購入]]></title>
            <link>https://masutaka.net/2009-04-05-1/</link>
            <guid>https://masutaka.net/2009-04-05-1/</guid>
            <pubDate>Sun, 05 Apr 2009 00:00:00 GMT</pubDate>
            <description><![CDATA[最近自由な時間が増えたせいか、本を買う頻度が高いです。
整体の帰りにまた買ってきました。今日行ったのは西友側の文教堂。
起きていることはすべて正しい  これも小飼弾さんのブログ で紹介されていたので、気になっていました。
時間は有り余っているので、ゆっくり読みます。
(URL: 404 Blog Not Found:カツマofカツマ2008 - 書評 - 起きていることはすべて正しい )
孫子の兵法  孫子の兵法は前から確認しておきたかったのです。
最初に知ったのは、ジョセフとエシディ(ry
アマゾンで評判の良い、この本を買いました。
シグルイ 12  ツッコミ禁止でｗ。良い子は読んではいけません。
今まで漫画は買わずに漫画喫茶で読んでいましたが、良く考えたらそんな
に読みたいものってないのですよね。これからは普通に買って、読み終わっ
たら売ることにします。私の場合、そのほうが時間とお金の無駄にならな
いような気がしますので。また、筆者に正当な対価(印税)が支払われるの
で、健全なお金の流れと言えましょう。]]></description>
        </item>
        <item>
            <title><![CDATA[行処理]]></title>
            <link>https://masutaka.net/2009-04-04-1/</link>
            <guid>https://masutaka.net/2009-04-04-1/</guid>
            <pubDate>Sat, 04 Apr 2009 00:00:00 GMT</pubDate>
            <description><![CDATA[flush-lines
指定した正規表現にヒットした行を削除する。
keep-lines
flush-lines の逆
sort-lines
リージョンに含まれた行をアルファベット順にソートする。
C-u を付けて実行すると逆順にソートする。
sort-fields
リージョンに含まれた行をアルファベット順にソートする。
&ldquo;C-u N&rdquo; を付けて実行すると、空白で区切られた N 番目のフィールドを
キーにソートする。
sort-numeric-fields
リージョンに含まれた行を数値順にソートする。
&ldquo;C-u N&rdquo; を付けて実行すると、空白で区切られた N 番目のフィールドを
キーにソートする。
reverse-region
リージョン内の行の順番を逆にする。
join-line
現在の行を前の行と連結する。
C-u を付けて実行すると次の行と連結する。これは vi の J と同じ動作。
occur
指定した正規表現にヒットした行を Occur バッファに出力する。
occur は Emacs23 から &ldquo;M-s o&rdquo; に割り当てられたみたい。bindings.el
をよく確認すると、M-s(search-map) や M-g(goto-map) が新設されていた。
ということで、M-g に割り当てていた grep-find は C-q C-e に変更した。]]></description>
        </item>
        <item>
            <title><![CDATA[知る楽 仕事学のすすめ]]></title>
            <link>https://masutaka.net/2009-04-02-1/</link>
            <guid>https://masutaka.net/2009-04-02-1/</guid>
            <pubDate>Thu, 02 Apr 2009 00:00:00 GMT</pubDate>
            <description><![CDATA[今日から NHK 教育で、勝間さんが新番組を始めるということで、見てみた。
自分に重ね合う部分もあるということは、それだけ年をとったということ
か。まあ、ひたすら刺激になったのは確かなので、来週も見てみよう。
(URL: NHKロケ中です。新番組紹介。「知る楽」と「ゆうどきネットワーク」 )
(URL: 木曜日 仕事学のすすめ｜NHK知る楽 )
この後の時間に始まった番組がこれ。
『視点・論点「アサーション・さわやかな自己表現」』
なんという連携プレー。]]></description>
        </item>
        <item>
            <title><![CDATA[『断る力』を読んだ]]></title>
            <link>https://masutaka.net/2009-04-01-1/</link>
            <guid>https://masutaka.net/2009-04-01-1/</guid>
            <pubDate>Wed, 01 Apr 2009 00:00:00 GMT</pubDate>
            <description><![CDATA[[2009-03-29-2] に買って今日読み終えました。結論から言うと、久々に
「当たり」の本でした。入社して数年経った頃に読むと効果的です。
P. 78
 １人１人が業務への固着化のリスクを防ぎ、あるいは日常でのちょっとし
た仕事のプロシジャー(引用者註:手順)での非効率化を防ぐために、命じら
れた仕事、与えられた手順が本当に合目的なのか、疑い、考え、そうでな
ければ一旦は「断り」、その上で代替案を示すという習慣づけをしていく
必要があります。
 これには大納得。こういう人と関わるとこちらとしても刺激になるし、良
い方向に進んでいきます。でもこんな習慣がついたのは、大学に入ってか
らかなあ。
上司は思いつきでものを言いますが(本当です)、部下はそれに振り回され
る必要はありません。日頃から疑い、考え、場合によっては断る訓練を積
むことが大事です。とは言うものの、私自身が思いつきでものを言わざる
を得ない場面が増えてきたのも事実です&hellip;。
P. 99
 だいたい数年間かけても追いつけないレベルであれば、会社や地域で一番
になれます。それが、数十年かけても追いつけないと、前述の方々のよう
に、「日本で一番」になれるのです。
 これを読んで安心しました。まずは数年でいいんだと(笑)。「断る」こと
で自分の時間を作り、ある分野においてみんなよりちょっとだけ進んだ自
分になろう、ということだと解釈しました。
幸い(?)、最近残業時間が減らされているので、そのための時間を捻出する
苦労は減りそうです。ただ、以前より作業時間が少ないぶん、仕事中は今
まで以上に「断る力」が必要になることでしょう。
もちろんただやみくもに断ればよいのではなく、必要な作業を断らないた
めに、不要な作業を断る必要があるということです。]]></description>
        </item>
        <item>
            <title><![CDATA[Mozilla Sunbird]]></title>
            <link>https://masutaka.net/2009-03-31-2/</link>
            <guid>https://masutaka.net/2009-03-31-2/</guid>
            <pubDate>Tue, 31 Mar 2009 01:00:00 GMT</pubDate>
            <description><![CDATA[いわゆるスケジューラ。今は MHC 使っているけど、今後使うことがあるか
もしれない。Google カレンダー + Sunbird はなかなかナイスらしく、オ
フラインでも予定チェックできるらしい。
(URL: Mozilla Sunbird )]]></description>
        </item>
        <item>
            <title><![CDATA[シゾフレ・メランコテスト]]></title>
            <link>https://masutaka.net/2009-03-31-1/</link>
            <guid>https://masutaka.net/2009-03-31-1/</guid>
            <pubDate>Tue, 31 Mar 2009 00:00:00 GMT</pubDate>
            <description><![CDATA[[2009-03-29-2] の「断る力」で紹介されていたテストをやってみた。
 マスタカさんは、ややメランコ的なところがあります。
　どちらかというとしっかりとした自分を持っている人です。まわりの意
見を聞きながら、自分の意見を崩さないで、よりよい自分にしていくため
には、有利なスタンスにあると言えます。
　他人の意見に流されず、多少にしっかりしたところがありますが、まだ
まだ自分へのこだわりも強く、ちょっとしたところでトラブルが起きるか
もしれないので要注意。
あなたのメランコ度、シゾフレ度は以下の通りです。
メランコ度 68%
シゾフレ度 14%
 (URL: 和田秀樹のココロクリニカ[シゾフレ・メランコテスト] )
「自分へのこだわり」っていうのは気をつけないといけないな。ここ２〜
３年、自分が思ったことを全部話さずにいられないことがあるし、人の意
見を聞いていないこともある。どちらも気をつけているけど、なかなかコ
ントロールは難しい。]]></description>
        </item>
        <item>
            <title><![CDATA[MHC で週番号を表示]]></title>
            <link>https://masutaka.net/2009-03-29-3/</link>
            <guid>https://masutaka.net/2009-03-29-3/</guid>
            <pubDate>Sun, 29 Mar 2009 02:00:00 GMT</pubDate>
            <description><![CDATA[いい感じ。以下を設定したあと、Mew を再起動すれば表示される。
(setq mhc-summary-use-cw t  mhc-use-week-separator t  mhc-start-day-of-week 1) URL: http://carz.air-nifty.com/sowhat/2008/08/emacs_d408.html ]]></description>
        </item>
        <item>
            <title><![CDATA[本を購入]]></title>
            <link>https://masutaka.net/2009-03-29-2/</link>
            <guid>https://masutaka.net/2009-03-29-2/</guid>
            <pubDate>Sun, 29 Mar 2009 01:00:00 GMT</pubDate>
            <description><![CDATA[小飼弾さんのブログ で勝間さんの本が紹介されていたので、気になってい
たんです。今日、近所の文教堂に行ったら２冊とも置いてあったので、
まとめて買ってきました。
(URL: 404 Blog Not Found:assert(yourself); - 書評 - 断る力 )
(URL: 404 Blog Not Found:Live your life - 書評 - 会社に人生を預けるな )]]></description>
        </item>
        <item>
            <title><![CDATA[本とゲームを売却]]></title>
            <link>https://masutaka.net/2009-03-29-1/</link>
            <guid>https://masutaka.net/2009-03-29-1/</guid>
            <pubDate>Sun, 29 Mar 2009 00:00:00 GMT</pubDate>
            <description><![CDATA[天皇になろうとした将軍—それからの大平記 足利義満のミステリー 「言霊(コトダマ)の国」解体新書 朝日新聞の正義—対論 戦後日本を惑わしたメディアの責任 日本史漫遊 宮本武蔵 最強伝説の真実 ほんとうの環境問題 正義で地球は救えない 三国志 英雄たちの最期の瞬間! このダジャレで生きのびろ! 聖剣伝説4 以上をブックオフで売ってきました。
これで 510 円かあ。相変わらず売り叩くなあ。]]></description>
        </item>
        <item>
            <title><![CDATA[トップページ以外は、古い記事→新しい記事の順で表示するようにしました。]]></title>
            <link>https://masutaka.net/2009-03-28-1/</link>
            <guid>https://masutaka.net/2009-03-28-1/</guid>
            <pubDate>Sat, 28 Mar 2009 00:00:00 GMT</pubDate>
            <description><![CDATA[トップページ以外(日ページ、月ページ、カテゴリページ)は、各アイテム
を古い記事から新しい記事の順に表示するようにしました。
例えばあるカテゴリや、ある月の記事を最初から最後まで見る場合は、古
い記事→新しい記事の順で並んでいたほうが見やすいと考えたからです。
(そんな人がいるのかはヽ(^_^;)）（(^,^;)ノ置いといて。)
今回も chalow 本体を修正しました。オリジナル(chalow-1.0.tar.gz)の
cl.conf と chalow へのパッチを貼り付けておきますね。
追記(2011-07-06):
GitHub に push しました。 --- cl.conf.org	2007-10-19 21:38:22.000000000 +0900 +++ cl.conf	2009-03-28 21:21:11.000000000 +0900 @@ -60,6 +60,11 @@ $reverse_order_days = 1; # -------------------------------------------------------------------- +# 日ページ、月ページ、カテゴリページで、アイテムを降順 (新しいアイテム +# が上) で表示するか (1:yes or 0:no) +$descending_order_items = 0; + +# -------------------------------------------------------------------- # アイテムヘッダーのフォーマットをどうするか # (0:&#34;* HOGE:&#34;, 1:&#34;* HOGE&#34;, 2:&#34;HOGE:&#34;,3:&#34;HOGE&#34;) $item_header_style = 1; --- chalow.org	2007-10-19 23:15:01.000000000 +0900 +++ chalow	2009-03-28 21:21:57.]]></description>
        </item>
        <item>
            <title><![CDATA[「最近追記された記事」を自動更新するようにしました。]]></title>
            <link>https://masutaka.net/2009-03-26-1/</link>
            <guid>https://masutaka.net/2009-03-26-1/</guid>
            <pubDate>Thu, 26 Mar 2009 00:00:00 GMT</pubDate>
            <description><![CDATA[[2009-03-21-1] に手動更新でお茶を濁していた「最近追記された記事」で
すが、自動更新するようにしました。
「追記YYYYMMDD:」といったマークをつけて追記すると、左側の「最近追加
された記事」に自動的に表示されます。デフォルトの設定では 5 つ表示し
ます。&ldquo;YYYYMMDD&rdquo; は例えば &ldquo;20090326&rdquo; です。chalow を更新しないと、
(？日前) は更新されません。
[2009-03-22-3] の ChangeLogReader.rb で実装しようかなとも考えていま
したが、結局 chalow 本体を修正しました。Perl 初心者なので、変なこと
してたら教えてください。^^;
以下にオリジナル(chalow-1.0.tar.gz)の cl.conf と chalow へのパッチ
を貼り付けておきます。
追記(2009-04-05):
例えば 2009.4.5 に [2009-03-07-1] と [2009-03-26-1] に追記を行うと、
後者だけしか「最近追記された記事」の候補に上がらないので chalow へ
のパッチを差し替えました。
また、埋め込む URL を絶対パスから相対パスに変更しました。
追記(2011-07-06):
GitHub に push しました。 --- cl.conf.org	2007-10-19 21:38:22.000000000 +0900 +++ cl.conf	2009-03-26 23:40:41.000000000 +0900 @@ -109,6 +109,10 @@ $latest_titles_num = 10; # -------------------------------------------------------------------- +# 最近追記された記事(追記YYYYMMDD:)一覧 (JavaScript ファイル) で出力する日数 +$latest_tuiki_num = 5; + +# -------------------------------------------------------------------- # カテゴリページを作るか (0:NO, 1:YES) $output_cat_pages = 0; @@ -161,6 +165,14 @@ &lt;p/&gt; &lt;div class=&#34;stdbox&#34;&gt; +&lt;table&gt; +&lt;tr&gt;&lt;td&gt;最近追記された記事&lt;/td&gt;&lt;/tr&gt; +&lt;tr&gt;&lt;td&gt;&lt;TMPL_VAR name=latest_tuiki_list&gt;&lt;/td&gt;&lt;/tr&gt; +&lt;/table&gt; +&lt;/div&gt; +&lt;p/&gt; + +&lt;div class=&#34;stdbox&#34;&gt; &lt;table&gt;&lt;tr&gt;&lt;td&gt;リンク&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt; - &lt;a href=&#34;http://chalow.]]></description>
        </item>
        <item>
            <title><![CDATA[各記事ごとにコメントを付けられるようにしました。]]></title>
            <link>https://masutaka.net/2009-03-23-2/</link>
            <guid>https://masutaka.net/2009-03-23-2/</guid>
            <pubDate>Mon, 23 Mar 2009 01:00:00 GMT</pubDate>
            <description><![CDATA[もはや私以外は興味ないと思いますがｗ、続けます。
各記事ごとにコメントを付けられるようにしました。レイアウトはすっき
りさせたつもりです。
こういうブログサイトって、いろいろな機能がカオスのように付いてます
よね。当人以外は何がなんだか分からないのでは&hellip;。ああはならないよう
に、一つ増やしたら一つ減らすの精神で精進していきます。
で、いきなり矛盾しますが、左側になかのひと を設置しました。日本地図
の画像です。「どんな組織からアクセスがあったか」が分かります。一般
の大手プロバイダーからのアクセスは集計しません。
何がすごいって、アクセスがあった会社名をクリックすると、その会社の
地図が表示されるんです。最初のインパクトは大きいです。お〜ってなり
ます(笑)。ブログを持っている人は試してみると良いかも。]]></description>
        </item>
        <item>
            <title><![CDATA[FTP とタイムスタンプ]]></title>
            <link>https://masutaka.net/2009-03-23-1/</link>
            <guid>https://masutaka.net/2009-03-23-1/</guid>
            <pubDate>Mon, 23 Mar 2009 00:00:00 GMT</pubDate>
            <description><![CDATA[「くっつき BBS」の各ログファイルをローカルに持ってきて、リモートに
アップしたらタイムスタンプが更新されてしまった。どうやら FTP の仕様
にはタイムスタンプを扱う機能はないらしい。
URL: http://nsjnotes.blogspot.com/2008/04/ftp_11.html 左側の「最近コメントを頂いた記事」が全て「(0時間前)」になってしまっ
た。うーん。(x_x)]]></description>
        </item>
        <item>
            <title><![CDATA[rchalow]]></title>
            <link>https://masutaka.net/2009-03-22-3/</link>
            <guid>https://masutaka.net/2009-03-22-3/</guid>
            <pubDate>Sun, 22 Mar 2009 02:00:00 GMT</pubDate>
            <description><![CDATA[Ruby 版の Chalow ってのがありました。
URL: http://www.ftnk.jp/~fumi/cl/2009-02-12-1.html 移行するかどうかは置いといて、rchalow-0.0.2.tar.bz2 に同封の
ChangeLogReader.rb。これを使えば Perl が分からない私でも
[2009-03-21-1] の tuiki.js を作れそうな気がしてきました。]]></description>
        </item>
        <item>
            <title><![CDATA[全てのページでサイドメニューを表示するようにしました。]]></title>
            <link>https://masutaka.net/2009-03-22-2/</link>
            <guid>https://masutaka.net/2009-03-22-2/</guid>
            <pubDate>Sun, 22 Mar 2009 01:00:00 GMT</pubDate>
            <description><![CDATA[デフォルトの cl.conf は、トップページにしか左側のサイドメニューを表
示しない設定になっていました。良く分からないので放置していましたが、
この度一念発起して全てのページで表示するようにしました。レイアウト
も統一したので、各ページがだいぶフラットになりました。
内部的には、カウンタやアクセス解析を書く場所を統一できたため、管理
が楽になりました。
chalow ver2 早く出ないかな。
URL: http://chalow.net/2008-01-26-1.html ]]></description>
        </item>
        <item>
            <title><![CDATA[シムエントリ]]></title>
            <link>https://masutaka.net/2009-03-22-1/</link>
            <guid>https://masutaka.net/2009-03-22-1/</guid>
            <pubDate>Sun, 22 Mar 2009 00:00:00 GMT</pubDate>
            <description><![CDATA[「たつをの ChangeLog 」を見ていたら、各記事の最後にこんなのが付いて
いました。
↓面白そうなので、各記事の下に付けてみました。邪魔になったらまた考えます。
追記(2009-03-23):
記事ごとにコメントを付けられるようにしたら早速邪魔になったので、
「固定リンク」の先でだけ表示するようにしました。]]></description>
        </item>
        <item>
            <title><![CDATA[最近追記された記事]]></title>
            <link>https://masutaka.net/2009-03-21-1/</link>
            <guid>https://masutaka.net/2009-03-21-1/</guid>
            <pubDate>Sat, 21 Mar 2009 00:00:00 GMT</pubDate>
            <description><![CDATA[過去の記事に断りなく修正することがありますが、「追記YYYYMMDD:」と断
り(?)を入れて追記することもあるので、左側に「最近追記された記事」を
表示するようにしました。
URL: http://chalow.net/2005-01-31-4.html 「最近コメントを頂いた記事」や「最近トラックバックを頂いた記事」と
同じように、JavaScript ファイル tuiki.js を作って index.html から読
み込ませています。ただ tuiki.js を更新するスクリプトがないため、
まだほぼ手動で更新しています&hellip;。もちろん自動化しますが、さてどうやっ
てやろうかな。
記事 ID ではなく、記事タイトルを表示するのも良いかもしれません。
URL: http://chalow.net/2008-09-21-3.html ]]></description>
        </item>
        <item>
            <title><![CDATA[printf() のような関数を自作した。]]></title>
            <link>https://masutaka.net/2009-03-20-1/</link>
            <guid>https://masutaka.net/2009-03-20-1/</guid>
            <pubDate>Fri, 20 Mar 2009 00:00:00 GMT</pubDate>
            <description><![CDATA[せっかくの休みなのでｗ、printf() のような関数を自作してみた。
static char my_buffer[1024 * 1024]; extern void my_printf(const char *fmt,...); 訳あって、書き出し先は my_buffer という外部変数。
va_list も訳あって使えないので、可変長引数は自前で読み込む。
可変長引数はどう読み込めば良いか？ C 言語の場合、内部変数はスタック
に積まれるため、後に宣言したものの方が若いアドレスになる。でも、引
数の場合は違っていて、「引数1」の次のアドレスに「引数2」が存在する
ことが保証されているらしい。
URL: http://networkprogramming.blog18.fc2.com/blog-entry-7.html これを利用すれば、可変長引数を自前で読み込むのは簡単。
fmt の中に %d や %x が見つかるたびに param32p を読み進めていけば良い。
void my_printf(const char *fmt,...) { unsigned long int *param32p = (unsigned long int *)&amp;fmt + 1; ところが！！試しに最適化レベルを 3 にしたら、「引数1」の 前の ア
ドレスに「引数2」が存在していた。ガセだったか&hellip;。以下のページにも
可変長引数を扱う時は stdarg.h 使えと書いてあった。va_list が使えな
いというのは勘違いな気がしてきたので、後で確認してみよう。
URL: http://docs.hp.com/ja/B2355-90858/stdarg.5.html itoa() も使えないため自作した。「符号あり/なし 10 進数」と「符号な
し 16 進数」をサポートしたが、意外に大変だった。一番時間かかったかも。]]></description>
        </item>
        <item>
            <title><![CDATA[建築マネジメントとシステム構築]]></title>
            <link>https://masutaka.net/2009-03-18-3/</link>
            <guid>https://masutaka.net/2009-03-18-3/</guid>
            <pubDate>Wed, 18 Mar 2009 02:00:00 GMT</pubDate>
            <description><![CDATA[建築のマネジメントはシステム構築とよく似ている。似ているというよ
り，システム構築のプロジェクト・マネジメントの原型が建築である。
URL: http://itpro.nikkeibp.co.jp/article/COLUMN/20080520/303016/  へぇ〜 そうなのか。
ちなみにこれは「すごい現場 」というコラムの第９回です。恐ろしい。。。]]></description>
        </item>
        <item>
            <title><![CDATA[Hello]]></title>
            <link>https://masutaka.net/2009-03-18-2/</link>
            <guid>https://masutaka.net/2009-03-18-2/</guid>
            <pubDate>Wed, 18 Mar 2009 01:00:00 GMT</pubDate>
            <description><![CDATA[M-x view-hello-file すると、さままざまな字体の Hello を確認できます。
単一バッファで複数のフォントを使えるエディタって、なかなかないのでは。
English Hello Japanese (日本語) こんにちは, コンニチハ その中にジョークらしきものを発見。
C printf (&#34;Hello, world!\n&#34;); Emacs emacs --no-splash -f view-hello-file ]]></description>
        </item>
        <item>
            <title><![CDATA[耳掃除]]></title>
            <link>https://masutaka.net/2009-03-18-1/</link>
            <guid>https://masutaka.net/2009-03-18-1/</guid>
            <pubDate>Wed, 18 Mar 2009 00:00:00 GMT</pubDate>
            <description><![CDATA[閲覧注意！！微グロです。
耳掃除！！！ -- ニコニコ動画 すげー耳クソｗｗｗｗ -- ニコニコ動画 ]]></description>
        </item>
        <item>
            <title><![CDATA[ファイルの MIME タイプの確認＆設定＆削除]]></title>
            <link>https://masutaka.net/2009-03-14-3/</link>
            <guid>https://masutaka.net/2009-03-14-3/</guid>
            <pubDate>Sat, 14 Mar 2009 02:00:00 GMT</pubDate>
            <description><![CDATA[ファイルの MIME タイプを確認
|% svn propget svn:mime-type hoge.pdf
ファイルの MIME タイプをバイナリ(application/octet-stream)に設定
|% svn propset svn:mime-type application/octet-stream hoge.pdf
ファイルの MIME タイプを application/pdf に設定
|% svn propset svn:mime-type application/pdf hoge.pdf
ファイルの MIME タイプを削除
|% svn propdel svn:mime-type hoge.pdf
追記(2011-03-06):
似たような操作で svn:ignore 属性を追加したり、削除したり出来ます。
Subversionで無視パターンを指定 - てんぷらメモ 追記(2011-12-30):
svn commit すると反映されます。svn revert すると、propset が破棄さ
れます。svn revert と git checkout は似ていますね。]]></description>
        </item>
        <item>
            <title><![CDATA[同一ネットワーク上のマシン同士でのプロセス間通信]]></title>
            <link>https://masutaka.net/2009-03-14-2/</link>
            <guid>https://masutaka.net/2009-03-14-2/</guid>
            <pubDate>Sat, 14 Mar 2009 01:00:00 GMT</pubDate>
            <description><![CDATA[以下の Web site にサンプルソースとともに簡潔にまとめられていた。
素晴らしい。
URL: http://www.ueda.info.waseda.ac.jp/~toyama/network/example2.html 以下のマシンでテストした。 サーバ -&gt; Cygwin on WindowsXP
クライアント -&gt; Debian GNU Linux squeeze (testing)
make 時の注意  Debian では libsocket が見つからなくてリンクエラーになった。
Linux では不要らしいので、Makefile 中の -lsocket を削除した。 Cygwin では libsocket と libnsl が見つからなくてリンクエラーに
なった。両方とも cygwin1.dll に含まれているらしいので、Makefile 中
の -lsocket と -lnsl を削除した。  テスト  Cygwin で iserver.exe を実行し、クライアントからの通信待ち受け状
態にした。 Linux で iclient を実行した。そのまま文字列を打ち込んだら、大文字
に変換されて表示された。成功！  補足  大文字への変換は iserver.c の toupper() で行っている。iclient は
標準入力から受け取った文字列をサーバに送り、送り返された文字列を]]></description>
        </item>
        <item>
            <title><![CDATA[電子メールでの一行の制限]]></title>
            <link>https://masutaka.net/2009-03-14-1/</link>
            <guid>https://masutaka.net/2009-03-14-1/</guid>
            <pubDate>Sat, 14 Mar 2009 00:00:00 GMT</pubDate>
            <description><![CDATA[２つの制限 SMTP プロトコルが定義された RFC 5321 によると、&ldquo;4.5.3.1.6. Text Line&rdquo; に一行は(英文字で) 1000 文字までと制限されている。
原文
 The maximum total length of a text line including the  is 1000 octets (not counting the leading dot duplicated for transparency). This number may be increased by the use of SMTP Service Extensions.
 日本語訳
 &lt;CRLF&gt; を含むテキスト行の最大長は 1000 オクテットです(透過性のために付けられた複製した先頭のドットはカウントしません)。この数値は SMTP サービス拡張の使用によって増加するかもしれません。
 URL: http://www.hde.co.jp/rfc/rfc5321.php 実際はユーザが意識する必要はなくて、MUA(メーラ) が適切に処理してくれる。例えば Mew は長い行があるとエンコード方法を訊いてくる。
 Lines are too long. Input encoding (base64):]]></description>
        </item>
        <item>
            <title><![CDATA[view-mode]]></title>
            <link>https://masutaka.net/2009-03-08-2/</link>
            <guid>https://masutaka.net/2009-03-08-2/</guid>
            <pubDate>Sun, 08 Mar 2009 01:00:00 GMT</pubDate>
            <description><![CDATA[変更してはいけないファイルを閲覧する時に、あらかじめ
M-x toggle-read-only する人も多いかと思います。以下の設定をしておく
と、ページャライクな操作も行えるようになるのでオススメです。
view-mode の詳細は &ldquo;F1 f view-mode&rdquo; をご覧下さい。
;; read-only の時は view-mode にする。 (setq view-read-only t) 私はさらに less コマンド の G,j,k 相等のことも行えるようにしています。
(defun view-goto-line-last (&amp;optional line)  (interactive &#34;P&#34;)  (View-goto-line (if (integerp line) line 	(line-number-at-pos (point-max)))))  (add-hook &#39;view-mode-hook 	(lambda () 	(define-key view-mode-map (kbd &#34;G&#34;) &#39;view-goto-line-last) 	(define-key view-mode-map (kbd &#34;j&#34;) &#39;View-scroll-line-forward) 	(define-key view-mode-map (kbd &#34;k&#34;) &#39;View-scroll-line-backward))) ここのページ にモードラインの &quot; View&quot; の文字列を目立たせる設定があり]]></description>
        </item>
        <item>
            <title><![CDATA[xz 圧縮]]></title>
            <link>https://masutaka.net/2009-03-08-1/</link>
            <guid>https://masutaka.net/2009-03-08-1/</guid>
            <pubDate>Sun, 08 Mar 2009 00:00:00 GMT</pubDate>
            <description><![CDATA[UNIX での圧縮には gz か、より圧縮率の高い(しかし圧縮に時間がかかる)
bzip2 が使われることが多い。
2009/1/29 に新しく xz という形式が公開されたとのこと。最大の特徴は、
その高い圧縮率と高速な伸長、そして激遅なｗ圧縮。そういう性格から、
組み込みアプリケーションに期待されているそう。
ややこしいのが、開発元の The Tukaani Project に行くと、XZ Utils と
LZMA Utils の２つあること。今まで後者の名前で開発されていたそうだが、
正式リリースにあたり前者の名前に変わったようだ。ただ、Latest
release が xz-4.999.8beta.tar.gz なので、まだベータ版なのかな。
GNU tar も 1.22 から xz をサポートしたとのこと。
さてどうしようか。←何が ^^;
URL: http://www.jmuk.org/diary/2009/03/08/0 URL: http://codezine.jp/article/detail/3658 ]]></description>
        </item>
        <item>
            <title><![CDATA[CD から抽出した wav を mp3 に変換]]></title>
            <link>https://masutaka.net/2009-03-07-2/</link>
            <guid>https://masutaka.net/2009-03-07-2/</guid>
            <pubDate>Sat, 07 Mar 2009 01:00:00 GMT</pubDate>
            <description><![CDATA[cdda2wav を使えば、CD から *.wav を抽出できる。
% cdda2wav -D/dev/cdrom -Igeneric_scsi -x -vall -L 0 -cddbp-server=freedbtest.dyndns.org:80/~cddb/cddbeuc.cgi -B sarge の時と同じように、ソースからコンパイルした gogo (petit313.tgz) を使って、wav から mp3 に変換しようとしたが、変換できなくなっていた。
% gogo -q 0 audio_01.wav audio_01.mp3 encode audio_01.wav to audio_01.mp3 GOGO-no-coda ver. 3.13 ( May. 20 2004 ) is a mp3 encoder based on lame 3.88, which is distributed under LGPL on http://www.mp3dev.org/mp3/ . See http://member.nifty.ne.jp/~pen/ , http://homepage1.nifty.com/herumi/gogo_e.html . zsh: floating point exception gogo -q 0 audio_01.wav audio_01.]]></description>
        </item>
        <item>
            <title><![CDATA[いろいろ購入]]></title>
            <link>https://masutaka.net/2009-03-07-1/</link>
            <guid>https://masutaka.net/2009-03-07-1/</guid>
            <pubDate>Sat, 07 Mar 2009 00:00:00 GMT</pubDate>
            <description><![CDATA[最近、月に 1 回 Amazon を使っている。今回は湿度計を買うのが目的。
川崎でかなり探し回ったんだけど、こういうときに限って見つからないものだ。
和田裕美の人に好かれる話し方  愛されキャラになるためにｗ買った。
￥1(代金) + ￥360(配送料) で買えたのはかなりお得だった。
追記(2009-04-05):
そういえば、たつをの ChangeLog で紹介されていたので買ったのでした。
まだ読み終わってない。。。
(URL: たつをの ChangeLog - 人に好かれる話し方 )
スーパーEX高品質温・湿度計 EX-2727  一回落としたせいなのか、うちの湿度計 がかなり不正確だったので、
Amazon で評判の良いこれを買った。実物は画像で見るよりも大きめだが、
外見はかなりクール。
デビル メイ クライ デンジャラス･ヒッツ  ２は要らなかったなあ。１の兄貴の曲が入ってないとは。。。]]></description>
        </item>
        <item>
            <title><![CDATA[なんか、もう。。。]]></title>
            <link>https://masutaka.net/2009-03-06-3/</link>
            <guid>https://masutaka.net/2009-03-06-3/</guid>
            <pubDate>Fri, 06 Mar 2009 02:00:00 GMT</pubDate>
            <description><![CDATA[URL: http://alfalfa.livedoor.biz/archives/51418623.html 左側のネコを見ていたら、シャドウを思い出した。
  シャドウっていうのはデビルメイクライ１ のモンスター。
4 匹出てきたときは泣きそうになったよ。(；´д⊂)
ゲーム自体はだいぶ前(2001年!!)なんだけど、最近また始めた..。]]></description>
        </item>
        <item>
            <title><![CDATA[No exchange]]></title>
            <link>https://masutaka.net/2009-03-06-2/</link>
            <guid>https://masutaka.net/2009-03-06-2/</guid>
            <pubDate>Fri, 06 Mar 2009 01:00:00 GMT</pubDate>
            <description><![CDATA[これだと「返品できません」という意味になっちゃうそう。
正しくは、&ldquo;We cannot break large bills&rdquo; なんだって。
URL: http://d.hatena.ne.jp/kazu-yamamoto/20090306/1236332358 URL: http://translation.1-find.com/wasei/ ]]></description>
        </item>
        <item>
            <title><![CDATA[man ati]]></title>
            <link>https://masutaka.net/2009-03-06-1/</link>
            <guid>https://masutaka.net/2009-03-06-1/</guid>
            <pubDate>Fri, 06 Mar 2009 00:00:00 GMT</pubDate>
            <description><![CDATA[debian-users:52078 によると、&ldquo;man ati&rdquo; があるらしい。というかあった。
さらにビデオドライバごとの man もある。私の PC のビデオドライバ
Radeon HD 2400 PRO の情報も &ldquo;man radeon&rdquo; にいろいろ書いてあった。]]></description>
        </item>
        <item>
            <title><![CDATA[Mew で "utf-8 is used. OK?" に相当する文字に色付け]]></title>
            <link>https://masutaka.net/2009-03-01-1/</link>
            <guid>https://masutaka.net/2009-03-01-1/</guid>
            <pubDate>Sun, 01 Mar 2009 00:00:00 GMT</pubDate>
            <description><![CDATA[(setq mew-ask-charset &#39;(&#34;us-ascii&#34; &#34;iso-2022-jp&#34;)) などと設定して、これ以外の文字を含むメールを送信しようとすると、
&ldquo;utf-8 is used. OK?&rdquo; と聞かれるが、本文のどこに該当の文字が含まれて
いるのか経験と勘(笑)で調べるしかなかった。そこで、&ldquo;n&rdquo; でキャンセル
した後、該当の文字の背景を紫色にするようにしてみた。
;; 「UNICODE 文字」の face を定義 (defvar mew-unicode-char-face-list  &#39;((((class color) (type tty)) (:bold t))  (((class color) (background light)) (:background &#34;purple&#34;))  (((class color) (background dark)) (:background &#34;purple&#34;))  (t (:bold t)))) (defface mew-unicode-char-face mew-unicode-char-face-list  &#34;UNICODE 文字&#34;  :group &#39;mew-highlight) (defvar mew-unicode-char-face &#39;mew-unicode-char-face) (face-spec-set &#39;mew-unicode-char-face mew-unicode-char-face-list)  (defadvice mew-encode-undo  (after  mew-encode-undo-after-advice  activate)  &#34;「UNICODE 文字」を強調表示&#34;  (if mew-ask-charset  (let* ((beg (progn (mew-header-goto-body) (point)))  (end (or (mew-attach-begin) (point-max)))  (unicode-char-regexp (mew-cur-unicode-char-regexp beg end)))  (if (stringp unicode-char-regexp)  (save-excursion  (mew-elet  (goto-char beg)  (while (and (&lt;= (point) end) (re-search-forward unicode-char-regexp end t))  (put-text-property  (match-beginning 0) (match-end 0) &#39;face &#39;mew-unicode-char-face))))))))  (defun mew-cur-unicode-char-regexp (beg end)  (let (pos unicode-char unicode-char-list)  (save-excursion  (goto-char beg)  (while (&lt; (setq pos (point)) end)  (if (and (mew-unicode-char-p pos)  (setq unicode-char (char-to-string (char-after pos)))  (not (member unicode-char unicode-char-list)))  (setq unicode-char-list (cons unicode-char unicode-char-list)))  (forward-char 1)))  (if (consp unicode-char-list)  (concat &#34;[&#34; (mapconcat &#39;identity unicode-char-list &#34;&#34;) &#34;]+&#34;))))  (defun mew-unicode-char-p (pos)  (let* ((char (char-after pos))  (eight-bit-p (and (not enable-multibyte-characters) (&gt;= char 128)))  (charset (if eight-bit-p &#39;eight-bit  (char-charset char))))  (and (not (eq charset &#39;ascii))  (not (eq charset &#39;japanese-jisx0208))))) さらに draft-mode で C-c C-l した時も色付けさせる設定。]]></description>
        </item>
        <item>
            <title><![CDATA[モバイル Suica の年会費]]></title>
            <link>https://masutaka.net/2009-02-28-3/</link>
            <guid>https://masutaka.net/2009-02-28-3/</guid>
            <pubDate>Sat, 28 Feb 2009 02:00:00 GMT</pubDate>
            <description><![CDATA[ITmedia - 一般カード利用のモバイルSuicaユーザーは、年会費が必要に [2008-01-19-1] からモバイル Suica を使い始めたが、入会から１年経っ
たことで次回入金からは年会費 1000 円がかかるそう。ただ、うまくやれ
ば年会費は払う必要はないみたい。以下まとめ。
定期券を使うためには、年会費を払うかビューカードに登録する必要があ
る。ビューカードは年会費 500 円だが、ビューカードにもいろいろな種類
があるようで、うまくやれば年会費を払う必要はなさそう。
年会費無料でモバイルSuicaを使う方法 電子マネーについては、ビューカードに登録せずに使い続けることが可能。
New Days などで現金チャージすれば良い。
ここまで書いたけど、現状ほとんど定期しか使っていないので、普通の
Suica に戻すことになりそう。(´・ω・`)
追記(2009-07-02):
昨日、モバイル Suica を解約しました。68 円余っていたので、チロルチョ
コを 3 つ買って余りを 8 円にしました。こうすることで、解約手数料を
8 円にできました。
JR東日本：モバイルSuica＞各種手続き＞退会＞払いもどし額の計算方法 ]]></description>
        </item>
        <item>
            <title><![CDATA[lenny から squeeze へのアップグレード]]></title>
            <link>https://masutaka.net/2009-02-28-2/</link>
            <guid>https://masutaka.net/2009-02-28-2/</guid>
            <pubDate>Sat, 28 Feb 2009 01:00:00 GMT</pubDate>
            <description><![CDATA[2/14 に lenny がリリースされた。
http://www.debian.or.jp/blog/debian50r0.html http://kmuto.jp/d/index.cgi/debian/lenny-release.htm それに伴い、現在のテスト版が lenny(レニー、ゼンマイで歩く双眼鏡) から
squeeze(スクィーズ、三つ目のエイリアン) に変わったので、アップグレードした。
 必要なファイルを全てバックアップ /etc/apt/sources.list の lenny の文字列を squeeze に置換。 アップグレード
|# aptitude update
|# aptitude install aptitude
|# aptitude upgrade
|# aptitude dist-upgrade  まだ 2 週間しか経っていないこともあるけど、拍子抜けするくらい
簡単だった。いい時代になったなあ。(´∀｀)
http://www.debian.org/releases/lenny/i386/release-notes/ch-upgrading.ja.html ]]></description>
        </item>
        <item>
            <title><![CDATA[口内炎への効果的な治療法]]></title>
            <link>https://masutaka.net/2009-02-28-1/</link>
            <guid>https://masutaka.net/2009-02-28-1/</guid>
            <pubDate>Sat, 28 Feb 2009 00:00:00 GMT</pubDate>
            <description><![CDATA[今週の「ためしてガッテン」で、口内炎の効果的な治療法をやっていたの
でメモメモ。
 殺菌成分入りのうがい薬(イソジンで良いと思う)で口を良くすすぐ。
番組では、20 秒 を 3 回やってました。 すすぎ終わったら、水でうがい薬を洗い流す。
殺菌成分は細胞組織自体にも効いてしまうそう。速やかに回復させるた
め、うがい薬を洗い流します。  http://www3.nhk.or.jp/gatten/archive/2009q1/20090225.html ]]></description>
        </item>
        <item>
            <title><![CDATA[Tab Mix Plusでの「タブを保護」「タブをロック」「タブを凍結」の違い]]></title>
            <link>https://masutaka.net/2009-02-23-1/</link>
            <guid>https://masutaka.net/2009-02-23-1/</guid>
            <pubDate>Mon, 23 Feb 2009 00:00:00 GMT</pubDate>
            <description><![CDATA[タブを保護 - 保護されたタブは閉じられない。タブを誤って閉じるのを防ぐ。
タブをロック - ロックされたタブ内のリンクはすべて新しいタブに開く。
タブを凍結 - 「タブを保護」と「タブをロック」を両方一度に行う。
「タブを凍結」はデフォルトでは右クリックメニューに表示されない。
Tab Mix Plus のオプションから、表示させることが出来る。
http://smallsteps06.blogspot.com/2006/09/tab-mix-plus.html ]]></description>
        </item>
        <item>
            <title><![CDATA[favicon on Apache2]]></title>
            <link>https://masutaka.net/2009-02-22-2/</link>
            <guid>https://masutaka.net/2009-02-22-2/</guid>
            <pubDate>Sun, 22 Feb 2009 01:00:00 GMT</pubDate>
            <description><![CDATA[非公開の web server をローカルに立てて、保存した html は
http://localhost/~masutaka/.. にアクセスすれば表示できるようにして
いる。でも、favicon の指定がうまくできない。
もちろん [2007-01-19-1] の方法を使えば出来るけど、全ての html に指
定するのは面倒くさいよね。
**** 試したこと その１ ****
~masutaka/public_html に favicon.ico を置いた。
~masutaka/public_html/.htaccess に以下を記載。
AddType image/x-icon .ico &lt;Files favicon.ico&gt; ErrorDocument 404 favicon.icoへのフルパス &lt;/Files&gt; →ダメ。読み込まれなかった。
~/public_html/.htaccess に hogehoge と書いたら、Apache のエラーログ
が表示されていたので、.htaccess は読み込めているようだ。
ちなみに設定ファイルは以下のように読み込まれていた。mime.types には
&ldquo;image/x-icon ico&rdquo; と書いてあるので、前述の設定は必要ないのかも。
|/etc/apache2/apache2.conf
|→ /etc/apache2/mods-enabled/mime.conf
| → /etc/mime.types
**** 試したこと その２ ****
時々、Apache のエラーログに
|File does not exist: /var/www/favicon.ico
と出ているので /var/www に置いてみた。
→ブックマークに favicon が反映された。うまくいかない場合は、ブラウ]]></description>
        </item>
        <item>
            <title><![CDATA[寿司の正しい食べ方]]></title>
            <link>https://masutaka.net/2009-02-22-1/</link>
            <guid>https://masutaka.net/2009-02-22-1/</guid>
            <pubDate>Sun, 22 Feb 2009 00:00:00 GMT</pubDate>
            <description><![CDATA[日本人なら、知っておくべきかも。
 寿司の正しい食べ方 参考情報: アカウントを持ってなくてもニコニコ動画を視聴できる方法 ]]></description>
        </item>
        <item>
            <title><![CDATA[GNU diff の地味だけど便利な機能]]></title>
            <link>https://masutaka.net/2009-02-21-3/</link>
            <guid>https://masutaka.net/2009-02-21-3/</guid>
            <pubDate>Sat, 21 Feb 2009 02:00:00 GMT</pubDate>
            <description><![CDATA[http://0xcc.net/blog/archives/000208.html からのコピペ。
&ndash;side-by-side は2段組で結果を表示するオプションです。変更されてい
ない行を含めて2つのファイルの内容全体と変更点が表示されるのがポイン
トです。変更された行の前後だけでなくファイル全体をまとめて読みたい
ときに使えます。デフォルトの表示の横幅は130文です。必要に応じて
&ndash;width オプションで変更できます。
&ndash;strip-trailing-cr は行末の CR を無視する機能です。改行コードが
CRLF と LF で食い違っているけど、中身はほぼ同じ、というファイルを比
較するときに使えます。]]></description>
        </item>
        <item>
            <title><![CDATA[Emacs23 のフォント]]></title>
            <link>https://masutaka.net/2009-02-21-2/</link>
            <guid>https://masutaka.net/2009-02-21-2/</guid>
            <pubDate>Sat, 21 Feb 2009 01:00:00 GMT</pubDate>
            <description><![CDATA[tdiary のテーマをいじっていたら、darkwhite というテーマを見つけた。
これ自体はなんてことないテーマなのだが、「シンプルで目にやさしいテー
マのつもりです」とのこと。試しに Emacs の背景色にしてみたら、フォン
トの線が細すぎてかなり見えづらい。テカテカ液晶め。。。→ [2008-10-05-2] しかし、今まで使っていた「東雲ゴシック」から Debian Lenny のデフォ
ルトフォント「VL ゴシック」に変更したら、かなり見やすくなった。テカ
テカ液晶のせいで、今まで Emacs の背景を Black にしていたんだけど、
やっと変えられたよ。(^^)v
東雲ゴシック
VL ゴシック
Emacs の設定(変更前)
(setq default-frame-alist  &#39;((background-color . &#34;black&#34;)  (foreground-color . &#34;gray80&#34;)  (font . &#34;-shinonome-gothic-medium-r-normal--16-*-*-*-*-*-*&#34;)  以下略 Emacs の設定(変更後)
(setq default-frame-alist  &#39;((background-color . &#34;#E2DDC3&#34;)  (foreground-color . &#34;black&#34;)  (font . &#34;-unknown-VL ゴシック-normal-normal-normal-*-16-*-*-*-*-0-iso10646-1&#34;)  以下略 ※ default-frame-alist に setq する以外に以下の方法でも設定可能。
(set-face-background &#39;default &#34;#E2DDC3&#34;) (set-face-foreground &#39;default &#34;black&#34;) ;; for Emacs22 (set-default-font &#34;-unknown-VL ゴシック-normal-normal-normal-*-16-*-*-*-*-0-iso10646-1&#34; nil) ;; for Emacs23 (set-frame-font &#34;-unknown-VL ゴシック-normal-normal-normal-*-16-*-*-*-*-0-iso10646-1&#34; nil) ]]></description>
        </item>
        <item>
            <title><![CDATA[tdiary のテーマを使う]]></title>
            <link>https://masutaka.net/2009-02-21-1/</link>
            <guid>https://masutaka.net/2009-02-21-1/</guid>
            <pubDate>Sat, 21 Feb 2009 00:00:00 GMT</pubDate>
            <description><![CDATA[[2007-09-17-4] の改良版。
他のテーマにも応用が効くようにしてみた。以下は lightning テーマの場合。
  lightning.css の先頭に以下を追記する。
|@import &ldquo;clfix.css&rdquo;;
  lightning.css と同じディレクトリに、下記 clfix.css を置く。
for lightning theme   他のテーマもいくつか対応したので、各 clfix.css へのリンクを張って
おきますね。
for clover theme for darkwhite theme for digital_gadgets theme for orange-blue theme for orange-border theme for sleepy_kitten theme for summer_wave theme for treetop theme for winter theme tdiary のテーマギャラリーはこちら 。外観が一覧で確認できるのでオススメ。
追記(2009-06-13):
tar で固めて、ここ に置きました。
ソースコードに色付けする prettify.css も import するようにしていま
す。[2009-06-13-1] をご覧下さい。]]></description>
        </item>
        <item>
            <title><![CDATA[入力したパスワードを端末に表示させない方法]]></title>
            <link>https://masutaka.net/2009-02-19-1/</link>
            <guid>https://masutaka.net/2009-02-19-1/</guid>
            <pubDate>Thu, 19 Feb 2009 00:00:00 GMT</pubDate>
            <description><![CDATA[スクリプト中でこんなプロンプトを出して、パスワードを読み取りたい場合。
|Password:
read コマンドを使えば可能だが、入力した文字列が見えてしまう。そこで
&ldquo;stty -echo&rdquo; を使う。端末への表示を抑制できる。入力が終わったら
&ldquo;stty echo&rdquo; で元に戻す。
trap &#39;stty echo&#39; INT stty -echo printf &#34;Password: &#34; read password echo &#34;&#34; stty echo trap INT trap を使っているのは、スクリプトが途中で終了した場合も
&ldquo;stty echo&rdquo; させるため。
最後の trap は sh だとエラーになってしまった。bash だと OK。どんな
意味なんだろう？]]></description>
        </item>
        <item>
            <title><![CDATA[Mew でメーリングリストに返信する時に宛先を構築し直す。]]></title>
            <link>https://masutaka.net/2009-02-14-1/</link>
            <guid>https://masutaka.net/2009-02-14-1/</guid>
            <pubDate>Sat, 14 Feb 2009 00:00:00 GMT</pubDate>
            <description><![CDATA[某掲示板で話題になっていたので、昔作った関数を見直してみた。
○機能
 返信先のアドレスに、自分が加入している ML が含まれていると、
そのアドレス以外のアドレスを全て宛先から除外する。 削除されたアドレスは、メール本文の先頭に以下のように挿入される。
|!!! Deleted Value !!!
|To: who@example.com |Cc:
|Dcc: masutaka@example.com  自分が加入している ML は mew-subscribed-mailing-list に設定すること。  ○ソース
(defvar mew-subscribed-mailing-list  &#39;(&#34;mew-dist@mew.org&#34;  &#34;mew-win32@mew.org&#34;)  &#34;加入している ML をリストで記述。正規表現指定不可。 nil ならどの ML にも加入していないものとする。&#34;)  (defun mew-draft-restructure-header ()  &#34;返信先のアドレスに、自分が加入している ML が含まれていると、 そのアドレス以外のアドレスを全て宛先から除外する。 自分が加入している ML は mew-subscribed-mailing-list に設定すること。 削除されたアドレスは、メール本文の先頭に挿入される。&#34;  (save-excursion  (let ((deleted-alist))  (setq deleted-alist (mew-draft-restructure-header-internal))  (when deleted-alist  (let (str deleted-list address)  (setq str &#34;### Deleted Value ###\n&#34;)  (dolist (field (list mew-to: mew-cc: mew-dcc: mew-bcc:))  (setq deleted-list (assoc field deleted-alist))  (when deleted-list  (setq str  (concat str field &#34; &#34;  (mapconcat &#39;format (cdr deleted-list) &#34;, &#34;)  &#34;\n&#34;))))  (setq str (concat str &#34;\n&#34;))  (mew-header-goto-body)  (insert str))))))  (defun mew-draft-restructure-header-internal ()  &#34;To:, Cc:, Bcc:, Dcc: から不要なアドレスを削除し、 削除したフィールドの名前と値をリストで返す。 To: が空になった場合は、Cc: のアドレスを To: に置き換える。&#34;  (let (subscribed-ml-exist deleted-alist)  (catch &#39;loop  (dolist (field (list mew-to: mew-cc:))  (dolist (address (mew-header-parse-address-list (list field)))  ;; 加入している ML があった場合は即座にループから抜ける。  (if (mew-member-case-equal  address mew-subscribed-mailing-list)  (throw &#39;loop (setq subscribed-ml-exist t))))))  (when subscribed-ml-exist  ;; To と Cc から mew-subscribed-mailing-list 以外のアドレスを削除し、  ;; Bcc と Dcc は自分のアドレスを削除する。  (setq deleted-alist `(,@(mew-draft-restructure-to-cc)  ,@(mew-draft-restructure-bcc-dcc)))  ;; To が空になっていたら、Cc を To にしてしまおう。  (unless (mew-header-parse-address-list (list mew-to:))  (let ((cc (mew-header-parse-address-list (list mew-cc:))))  (mew-header-delete-lines (list mew-to: mew-cc:))  (mew-header-insert mew-to: (mapconcat &#39;format cc &#34;, &#34;)) )))  deleted-alist))  (defun mew-draft-restructure-to-cc ()  &#34;To: と Cc: から不要なアドレスを削除し、 削除したフィールドの名前と値をリストで返す。&#34;  (let (deleted-alist)  (dolist (field (list mew-to: mew-cc:) deleted-alist)  (let (enable-address-list delete-address-list)  (dolist (addr (mew-header-parse-address-list (list field)))  (if (mew-member-case-equal addr mew-subscribed-mailing-list)  (setq enable-address-list `(,@enable-address-list ,addr))  (setq delete-address-list `(,@delete-address-list ,addr))))  (setq deleted-alist (cons (cons field delete-address-list) deleted-alist))  (if enable-address-list  (mew-header-replace-value  field  (mapconcat &#39;format enable-address-list &#34;, &#34;))  (mew-header-delete-lines (list field)))))))  (defun mew-draft-restructure-bcc-dcc ()  &#34;Bcc: および Dcc: フィールドを削除し、 削除したフィールドの名前と値をリストで返す。&#34;  (let (deleted-alist)  (dolist (field (list mew-dcc: mew-bcc:) deleted-alist)  (let ((deleted-address-list))  (setq deleted-address-list  (mew-header-parse-address-list (list field)))  (when deleted-address-list  (setq deleted-alist (cons (cons field deleted-address-list) deleted-alist))  (mew-header-delete-lines (list field)))))))  (add-hook &#39;mew-draft-mode-newdraft-hook &#39;mew-draft-restructure-header) ]]></description>
        </item>
        <item>
            <title><![CDATA[Tab Mix Plus]]></title>
            <link>https://masutaka.net/2009-02-07-3/</link>
            <guid>https://masutaka.net/2009-02-07-3/</guid>
            <pubDate>Sat, 07 Feb 2009 02:00:00 GMT</pubDate>
            <description><![CDATA[Firefox3 が出た当初は使えなかったが、今見たら使えるようになっていた。
タブバーの多段表示はうれしい。
Firefox 用アドオン - Tab Mix Plus ]]></description>
        </item>
        <item>
            <title><![CDATA[GNU Emacs 23.0.90]]></title>
            <link>https://masutaka.net/2009-02-07-2/</link>
            <guid>https://masutaka.net/2009-02-07-2/</guid>
            <pubDate>Sat, 07 Feb 2009 01:00:00 GMT</pubDate>
            <description><![CDATA[http://lists.gnu.org/archive/html/emacs-devel/2009-02/msg00051.html 23.1 リリースに向けて、pretest 版が出たみたい。今年中にはリリースさ
れるのかな？
デフォルトのツールキットが Lucid から GTK+ に変わったことと、アンチ
エイリアスがサポートされて、フォントが綺麗になったことが大きな変更
点みたい。
試しに VL ゴシックを試してみたけど、行間が無駄に広いなあ。また今度
調べてみよう。]]></description>
        </item>
        <item>
            <title><![CDATA[本購入]]></title>
            <link>https://masutaka.net/2009-02-07-1/</link>
            <guid>https://masutaka.net/2009-02-07-1/</guid>
            <pubDate>Sat, 07 Feb 2009 00:00:00 GMT</pubDate>
            <description><![CDATA[また Amazon で買ってしまった。
正義で地球は救えない  [2009-01-05-3] の「ほんとうの環境問題」の続編。何となく気になって買っ
てしまった。
Rubyレシピブック 第2版 268の技  今回はこれが目的。前から実践的な本が欲しかったんだよね。
このダジャレで生きのびろ!  ここ で紹介されていた本。私としてはこういうの買うのは珍しいんだけど、
ついでに買ってしまった。]]></description>
        </item>
        <item>
            <title><![CDATA[ruby で自分が定義したルールを使って sort する方法]]></title>
            <link>https://masutaka.net/2009-02-03-1/</link>
            <guid>https://masutaka.net/2009-02-03-1/</guid>
            <pubDate>Tue, 03 Feb 2009 00:00:00 GMT</pubDate>
            <description><![CDATA[# ユーザ定義のルールをハッシュで定義 ref = {&#34;Hitoshi&#34;=&gt;0, &#34;Sizuo&#34;=&gt;1, &#34;Yoshi&#34;=&gt;2, &#34;Taka&#34;=&gt;3, &#34;Guo&#34;=&gt;4} # sort したいデータを配列で持つ data = [&#34;Guo&#34;, &#34;Guo&#34;, &#34;Sizuo&#34;, &#34;Taka&#34;, &#34;Taka&#34;, &#34;Yoshi&#34;] # ソート p data.sort{|a, b| ref[a] &lt;=&gt; ref[b] } 結果
[&#34;Sizuo&#34;, &#34;Yoshi&#34;, &#34;Taka&#34;, &#34;Taka&#34;, &#34;Guo&#34;, &#34;Guo&#34;] ]]></description>
        </item>
        <item>
            <title><![CDATA[Iceweasel の midi 再生プラグイン]]></title>
            <link>https://masutaka.net/2009-02-01-1/</link>
            <guid>https://masutaka.net/2009-02-01-1/</guid>
            <pubDate>Sun, 01 Feb 2009 00:00:00 GMT</pubDate>
            <description><![CDATA[Debian パッケージに mozplugger があるが、うまく動かないらしい。
ffmpeg をコンパイルすれば OK らしい。気が向いたら試してみよう。]]></description>
        </item>
        <item>
            <title><![CDATA[2011年に備えてPCの画面にも“アナログ”ロゴを表示する「アナログ」]]></title>
            <link>https://masutaka.net/2009-01-23-1/</link>
            <guid>https://masutaka.net/2009-01-23-1/</guid>
            <pubDate>Fri, 23 Jan 2009 00:00:00 GMT</pubDate>
            <description><![CDATA[くだらない。ｗ
URL: http://www.forest.impress.co.jp/article/2009/01/14/analog.html ]]></description>
        </item>
        <item>
            <title><![CDATA[物理行単位のカーソル移動]]></title>
            <link>https://masutaka.net/2009-01-20-1/</link>
            <guid>https://masutaka.net/2009-01-20-1/</guid>
            <pubDate>Tue, 20 Jan 2009 00:00:00 GMT</pubDate>
            <description><![CDATA[Emacs23 からは C-n や C-p での移動が物理行単位になっていた。
line-move-visual に nil を設定すると、以前と同じ論理行単位の移動になる。]]></description>
        </item>
        <item>
            <title><![CDATA[gnubiff で "File or Folder" を選択すると固まる件]]></title>
            <link>https://masutaka.net/2009-01-17-2/</link>
            <guid>https://masutaka.net/2009-01-17-2/</guid>
            <pubDate>Sat, 17 Jan 2009 01:00:00 GMT</pubDate>
            <description><![CDATA[fam をインストールする必要があったらしい。fam は提案パッケージに
過ぎないのに…。インストールして解決した。
|# aptitude install fam]]></description>
        </item>
        <item>
            <title><![CDATA[コマンドラインオプションを自作する方法]]></title>
            <link>https://masutaka.net/2009-01-17-1/</link>
            <guid>https://masutaka.net/2009-01-17-1/</guid>
            <pubDate>Sat, 17 Jan 2009 00:00:00 GMT</pubDate>
            <description><![CDATA[Emacs ではなんと、コマンドラインオプションを自作できる。すげー。
例えば以下の設定をすると &ldquo;emacs &ndash;read-only hoge.txt&rdquo; を実行する
ことによって、read-only でファイルを開くことが出来る。
(defun command-line-find-file-read-only (switch)  (find-file-read-only (pop command-line-args-left)))  (add-to-list &#39;command-switch-alist  &#39;(&#34;--read-only&#34; . command-line-find-file-read-only)) ]]></description>
        </item>
        <item>
            <title><![CDATA[方言]]></title>
            <link>https://masutaka.net/2009-01-10-1/</link>
            <guid>https://masutaka.net/2009-01-10-1/</guid>
            <pubDate>Sat, 10 Jan 2009 00:00:00 GMT</pubDate>
            <description><![CDATA[忍者ツールに「ホウゲン」があったので、サイドバーに設置してみました。
このページがテンション低いので、「テンション高く」にするとちょうど
良いかもしれない。]]></description>
        </item>
        <item>
            <title><![CDATA[subversion の DB フォーマット変更]]></title>
            <link>https://masutaka.net/2009-01-08-1/</link>
            <guid>https://masutaka.net/2009-01-08-1/</guid>
            <pubDate>Thu, 08 Jan 2009 00:00:00 GMT</pubDate>
            <description><![CDATA[リポジトリは [2004-05-05-1] に作ったもので、DB のフォーマットは
BerkeleyDB。BerkeleyDB は壊れやすく、データをメモリに配置するため
複数の CPU から書き込むのも NG らしい。そこで、最近のデフォルト
fsfs 形式に変更した。
|# cd /usr/local
|# svnadmin dump SVNROOT &gt; SVNROOT.dump
|# mv SVNROOT SVNROOT.bak
|# svnadmin create SVNROOT
|# svnadmin load SVNROOT &lt; SVNROOT.dump
|# chown -R www-data:www-data SVNROOT]]></description>
        </item>
        <item>
            <title><![CDATA[『ほんとうの環境問題』を読んだ]]></title>
            <link>https://masutaka.net/2009-01-05-3/</link>
            <guid>https://masutaka.net/2009-01-05-3/</guid>
            <pubDate>Mon, 05 Jan 2009 02:00:00 GMT</pubDate>
            <description><![CDATA[正月に実家に帰ったときにヒマだったので読んだ本 その２
自分の認識を再確認できた本だった。雑談風になっているので読みやすい
のだけれど、その分内容が軽くなってしまっている。印象に残った点を列挙。
 環境問題とは政治問題。京都議定書を守っても二酸化炭素は減らない。 アメリカがバイオ燃料に力を注ぐのは、余剰穀物で利益を得るため。 環境問題には流行りがある。以前は「環境ホルモン」や「フロンガス」。
前者は最近話題にも上がらない。また、オゾン層の破壊はフロンが関わっ
ているのか怪しくなってきたそう。 金にならないリサイクルは、エコではない。  結局、個人で可能ことで且つ効果のありそうなことをやるのが良さそう。
無駄な電気やガス、水を使わない。アルミ缶、新聞雑誌等の廃品回収。
あと、テレビで良く &ldquo;温暖化によって&rdquo; ツバルが消滅するだとか、海岸が
何十メートルも侵食されただとかやっているけど、検証なしに放送するの
は危険だと思う。]]></description>
        </item>
        <item>
            <title><![CDATA[『三国志 英雄たちの最期の瞬間!』を読んだ]]></title>
            <link>https://masutaka.net/2009-01-05-2/</link>
            <guid>https://masutaka.net/2009-01-05-2/</guid>
            <pubDate>Mon, 05 Jan 2009 01:00:00 GMT</pubDate>
            <description><![CDATA[正月に実家に帰ったときにヒマだったので読んだ本 その１
浅い。どんなに壮絶な最期なのかとワクワクして読んだが、知っているこ
とばかりだった。登場人物全てで、諏訪原寛幸という人が描いたイラスト
が付いているので、そういうのが好きな人は良いのかもしれない。諏訪原
寛幸は三國無双のイラストを描いているらしい。]]></description>
        </item>
        <item>
            <title><![CDATA[バーモントカレー]]></title>
            <link>https://masutaka.net/2009-01-05-1/</link>
            <guid>https://masutaka.net/2009-01-05-1/</guid>
            <pubDate>Mon, 05 Jan 2009 00:00:00 GMT</pubDate>
            <description><![CDATA[CM を見ると、いつも「New」になっている気がする。いっそのこと、
v2.01 とかリビジョンを振ってもらうと視聴者は分かりやすいと思うのだが..。]]></description>
        </item>
        <item>
            <title><![CDATA[ruby-mode]]></title>
            <link>https://masutaka.net/2008-12-16-1/</link>
            <guid>https://masutaka.net/2008-12-16-1/</guid>
            <pubDate>Tue, 16 Dec 2008 00:00:00 GMT</pubDate>
            <description><![CDATA[Emacs23 では ruby-mode が標準で入っていた。]]></description>
        </item>
        <item>
            <title><![CDATA[Amazon で買った商品をコンビニで受け取り]]></title>
            <link>https://masutaka.net/2008-12-12-2/</link>
            <guid>https://masutaka.net/2008-12-12-2/</guid>
            <pubDate>Fri, 12 Dec 2008 01:00:00 GMT</pubDate>
            <description><![CDATA[今日初めて Amazon のコンビニ受け取りを利用したけど、これは(・∀・)イイ!!
会社帰りにスマートにピックアップできる。
Amazon の場合、ローソンだけで受け取ることが出来て、Loppi に「お問い
合わせ番号」と「認証番号」を入力し、出てくる紙を店の人に渡して商品
を受け取る。身分証明書も必要と書いてあったけど、今回は求められなかっ
た。関係ないけど、Loppi のスーファミの書き換え(ニンテンドウパワーと
いうらしい) は 2007 年 2 月 28 日で終わったんだね。
で、今回買ったのは以下の 3 点。偏ってるなあ。ｗ
   ]]></description>
        </item>
        <item>
            <title><![CDATA[Cannot open termcap database file]]></title>
            <link>https://masutaka.net/2008-12-12-1/</link>
            <guid>https://masutaka.net/2008-12-12-1/</guid>
            <pubDate>Fri, 12 Dec 2008 00:00:00 GMT</pubDate>
            <description><![CDATA[|emacs: Cannot open termcap database file
emacs-22.3 を -nw で起動したらこんなメッセージが出て、
起動出来なかった。CVS 先端の emacs も同じ。
どうやら、libncurses5-dev が必要らしい。
|# aptitude install libncurses5-dev
を実行したあと、リコンパイルしたら起動できるようになった。
URL: http://www.randynetwork.com/blog/265 ]]></description>
        </item>
        <item>
            <title><![CDATA[このブログのスパム対策]]></title>
            <link>https://masutaka.net/2008-12-11-1/</link>
            <guid>https://masutaka.net/2008-12-11-1/</guid>
            <pubDate>Thu, 11 Dec 2008 00:00:00 GMT</pubDate>
            <description><![CDATA[[2008-12-04-1] のその後。
kuttukibbs.cgi をいじって、なんちゃってスパム対策をしました。
スパムと判定したら、書き込みを無視するようにしました。
追記(2009-03-28):
オリジナル(kuttukibbs-1.0rc3.tar.gz)の kuttukibbs.conf と
kuttukibbs.cgi へのパッチを貼り付けておきます。
--- kuttukibbs.conf.org	2004-04-08 22:27:02.000000000 +0900 +++ kuttukibbs.conf	2009-03-28 22:41:32.000000000 +0900 @@ -33,6 +33,10 @@ $charset = &#34;EUC-JP&#34;; # -------------------------------------------------------------------- +# メッセージの中にこの数字より多く &#34;http:&#34; が含まれていたらスパム +$spam_threshold = 3; + +# -------------------------------------------------------------------- # デフォルトページ (全コメント見る・コメント投稿) のテンプレート $page_template_default = &lt;&lt; &#39;PAGE&#39; &lt;html&gt; --- kuttukibbs.cgi.org	2004-12-15 23:09:58.000000000 +0900 +++ kuttukibbs.cgi	2009-04-28 23:51:14.000000000 +0900 @@ -17,6 +17,7 @@ my $page_template_latest; my $page_template_edit; my $charset = &#34;EUC-JP&#34;;	# 文字コード +my $spam_threshold = 3;	# メッセージの中にこの数字より多く &#34;http:&#34; が含まれていたらスパム ### グローバル変数 my $latest_id = -1;	# 最新のコメントの ID @@ -48,6 +49,9 @@ my $mail_or_url = $q-&gt;param(&#39;mail&#39;); my $body = $q-&gt;param(&#39;body&#39;); +# スパム判定 +my $spam = &amp;guess_spam; + # header if ($mode eq &#39;write&#39;) { escape_string(\$name); @@ -132,9 +136,14 @@ $com_hash{$latest_id}{m} = $body; $com_hash{$latest_id}{d} = $what_time_is_it_now; -	write_to_logfile();	# ログファイルへの書き込み -	write_to_jsfile($fn_pref.]]></description>
        </item>
        <item>
            <title><![CDATA[Wii + Wii Fit]]></title>
            <link>https://masutaka.net/2008-12-07-2/</link>
            <guid>https://masutaka.net/2008-12-07-2/</guid>
            <pubDate>Sun, 07 Dec 2008 01:00:00 GMT</pubDate>
            <description><![CDATA[買ってしまった。。。まさに衝動買い。
  PS3 に比べてかなり小さい。体積にして 1/3 くらいじゃないかな。起動も
速い。当然のように無線でネットに繋げることができ、天気やニュースを
見ることが出来る。Wii のアップデートも可。
それはまあいいとして、今回買ったのは Wii Fit のため。某巨大掲示板情
報によると、私のように脂肪を落としたい人は、まず筋力トレーニングを
やって、その後に有酸素運動をやるといいらしい。バランスゲームとヨガ
は平行してやれば良いのかな。毎日の BMI 値と体重が記録されるし、ゲー
ム的な要素も多いから続けられる&hellip;はず。
少なくとも、８月から細々とやっている腕立てよりは面白そう。^^;
追記(2009-04-19):
やらなくなってしまったのと、物を捨てたいイベントが降ってきたので、
￥13,000 でダワさんに売りました。]]></description>
        </item>
        <item>
            <title><![CDATA[2時間ドラマ]]></title>
            <link>https://masutaka.net/2008-12-07-1/</link>
            <guid>https://masutaka.net/2008-12-07-1/</guid>
            <pubDate>Sun, 07 Dec 2008 00:00:00 GMT</pubDate>
            <description><![CDATA[いやあ、懐かしい。土曜ワイド劇場はコタツで寝ながら見ていたので、
頭が痛かったのが懐かしいです。しかし、濃いなあ。ｗ
火曜サスペンス劇場 OP・ED
 土曜ワイド劇場 OP
 ]]></description>
        </item>
        <item>
            <title><![CDATA[このブログへのスパム]]></title>
            <link>https://masutaka.net/2008-12-04-1/</link>
            <guid>https://masutaka.net/2008-12-04-1/</guid>
            <pubDate>Thu, 04 Dec 2008 00:00:00 GMT</pubDate>
            <description><![CDATA[[2008-09-29-1] のその後。
メールのスパムは減ったけど、このブログのコメントへのスパムがついに
やってきました。。。ここ数日手動で消しています。めんどくさい。。。
パスワードかけなくちゃいけないなあ。どうやるんだろう。^^;]]></description>
        </item>
        <item>
            <title><![CDATA[アレルギーの原因]]></title>
            <link>https://masutaka.net/2008-11-23-1/</link>
            <guid>https://masutaka.net/2008-11-23-1/</guid>
            <pubDate>Sun, 23 Nov 2008 00:00:00 GMT</pubDate>
            <description><![CDATA[NHK スペシャル - 病の起源 第６章 アレルギー 〜２億年目の免疫異常 今日の NHK スペシャルで、興味深い特集をやっていた。日本では、昭和
30 年を境にアレルギーが急増していたそうだが、原因(の一つ)はなんと
「家畜と触れ合わなくなったから」だそうだ。
※ 以下、素人が記憶をたよりにまとめました。正確な情報は他を参照してね。
アレルギーの割合の少ない農家と都市部の家のホコリを調べたところ、農
家の方がエンドトキシンという成分が多く含まれていたとのこと。これは
大腸菌の細胞膜を構成する成分の一つで、菌が死ぬと放出されるらしい。
家畜の糞に多く含まれており、毒素でもある。
一方、ヒトの免疫は「細胞性免疫」と「IgE」の２種類あるらしい。前者は
生物が昔から獲得していた機構で、後者はヒトが進化の過程で獲得したも
のらしい。この２つのバランスが重要とのこと。
「細胞性免疫」はエンドトキシンにさらされると上がり、「IgE」は吸血ダ
ニ等との接触によって上がるとのこと。1 歳までにこのバランスは決まっ
てしまうそう。最近の家は清潔になったため「IgE」＞＞「細胞性免疫」と
いう免疫のバランスになりやすい。これはアレルギーになりやすい状態で
ある。
清潔さを追求した現代社会の弊害と言えるが、清潔になったことで乳幼児
の死亡率は下がっているため、一概に悪いわけでもない。ここ数十年で急
に清潔になってしまったから、ヒトの免疫機構が追いつけなかったという
見方も出来る。
研究が進めば、乳幼児にワクチンを打つことでアレルギーの発症を抑えら
れるようになるのかな。今後に期待！！]]></description>
        </item>
        <item>
            <title><![CDATA[今日の迷惑メール]]></title>
            <link>https://masutaka.net/2008-11-21-1/</link>
            <guid>https://masutaka.net/2008-11-21-1/</guid>
            <pubDate>Fri, 21 Nov 2008 00:00:00 GMT</pubDate>
            <description><![CDATA[[2008-11-17-2] のその後。
Spam フォルダを覗いてみたら、今日は 41 通しか来ていなかった。
確実に減っていると思う。]]></description>
        </item>
        <item>
            <title><![CDATA[YouTubeで超高画質ムービー]]></title>
            <link>https://masutaka.net/2008-11-20-1/</link>
            <guid>https://masutaka.net/2008-11-20-1/</guid>
            <pubDate>Thu, 20 Nov 2008 00:00:00 GMT</pubDate>
            <description><![CDATA[動画によっては、URL の末尾に「&amp;fmt=22」を付けると HD 画質で再生させ
られるらしい。
URL: http://blog.livedoor.jp/dqnplus/archives/1192512.html ]]></description>
        </item>
        <item>
            <title><![CDATA[デビルメイクライ4]]></title>
            <link>https://masutaka.net/2008-11-18-1/</link>
            <guid>https://masutaka.net/2008-11-18-1/</guid>
            <pubDate>Tue, 18 Nov 2008 00:00:00 GMT</pubDate>
            <description><![CDATA[[2008-11-16-1] のその後。
午前中に途中までやって、帰って続きをやってクリアできました。＼(^o^)／
体力がある状態で最終戦に望んだんだけど、途中余裕ぶっこいていたら
後半かなりヤバくなりました。残り体力 5mm くらいでようやくクリア。ｗ
クドいですが、下のはうまい人の動画です。
 ]]></description>
        </item>
        <item>
            <title><![CDATA[標準の補完候補を便利に]]></title>
            <link>https://masutaka.net/2008-11-17-3/</link>
            <guid>https://masutaka.net/2008-11-17-3/</guid>
            <pubDate>Mon, 17 Nov 2008 02:00:00 GMT</pubDate>
            <description><![CDATA[Emacs補完候補の選択を便利に - あどけない話 Emacs が提供する標準の Completion List を便利にする方法。以下の方法
を想定しているそうな。今までは 2 の後に補完候補をミニバッファにコピ
ペしていたので、これは結構良いかも。(・∀・)
 TAB や M-TAB で補完の候補を表示 C-xo で補完の候補のバッファへ移動 C-f/C-b/C-n/C-p あるいは C-s/C-r で候補を選択 RET で候補を選ぶと、元々の状態に戻り、選んだ候補が挿入される  以下が該当のコード。~/.emacs に張り付けるだけ。n/p にも割り当ててみた。
(define-key completion-list-mode-map (kbd &#34;n&#34;) &#39;next-completion) (define-key completion-list-mode-map (kbd &#34;C-n&#34;) &#39;next-completion) (define-key completion-list-mode-map (kbd &#34;C-f&#34;) &#39;next-completion) (define-key completion-list-mode-map (kbd &#34;p&#34;) &#39;previous-completion) (define-key completion-list-mode-map (kbd &#34;C-p&#34;) &#39;previous-completion) (define-key completion-list-mode-map (kbd &#34;C-b&#34;) &#39;previous-completion) (define-key completion-list-mode-map (kbd &#34;C-m&#34;) &#39;my-choose-completion)  (defun my-choose-completion ()  &#34;Choose the completion that point is in or next to.]]></description>
        </item>
        <item>
            <title><![CDATA[世界中の迷惑メールのうち50〜70%が、一社の関与によって行われているらしい]]></title>
            <link>https://masutaka.net/2008-11-17-2/</link>
            <guid>https://masutaka.net/2008-11-17-2/</guid>
            <pubDate>Mon, 17 Nov 2008 01:00:00 GMT</pubDate>
            <description><![CDATA[|PCオンラインの記事によると、米国サンノゼのISPが、ある迷惑メール送信
|事業者のインターネット接続を遮断したところ、以降の迷惑メールの流通
|量が75％も減ったそうである。
確かに、10/1 頃は 100 通は来てた迷惑メールが、最近は 60 通前後に減っ
ている。ホントだとしたら、なんという効果的な対応。ｗ
URL: http://slashdot.jp/it/article.pl?sid=08/11/17/0353221 ]]></description>
        </item>
        <item>
            <title><![CDATA[ワインメモ「無添加赤わいん」]]></title>
            <link>https://masutaka.net/2008-11-17-1/</link>
            <guid>https://masutaka.net/2008-11-17-1/</guid>
            <pubDate>Mon, 17 Nov 2008 00:00:00 GMT</pubDate>
            <description><![CDATA[いつもビールばかり飲んでいるので、先週末は近所のスーパーでワインを
買ってきた。陰ながら日本の農業を応援する私としては、もちろん国産ワ
インをチョイス。
  &hellip;。甘い！！
こんな甘いワインに出会ったのは初めてだよ。。゜(゜´∀｀゜)゜。。
えびチリに合うとか書いてあったけどホント？個人的には単体でも無理だった。]]></description>
        </item>
        <item>
            <title><![CDATA[外国人から英語が上手に思われる7つの言い回し]]></title>
            <link>https://masutaka.net/2008-11-16-2/</link>
            <guid>https://masutaka.net/2008-11-16-2/</guid>
            <pubDate>Sun, 16 Nov 2008 01:00:00 GMT</pubDate>
            <description><![CDATA[1．probably…おそらく
2．that&rsquo;s why…なぜなら
3．Yap…YESかNOしかないと思われないために中間的な意見を用いるときの常套句
4．you mean…つまり
5．said so…誰かが何かを言った
6．you know…特に意味はないが、日本語の「マジで？」に近いという
7．holy Kansas!…隠語の「Holy Jesus」にあやかったもので、あえて違う語を使って物知りと感じさせる効果がある
英語はまったくダメだが、いつか役に立つことがあるかもしれない。
URL: http://news.ameba.jp/weblog/2008/11/20539.html ]]></description>
        </item>
        <item>
            <title><![CDATA[デビルメイクライ4]]></title>
            <link>https://masutaka.net/2008-11-16-1/</link>
            <guid>https://masutaka.net/2008-11-16-1/</guid>
            <pubDate>Sun, 16 Nov 2008 00:00:00 GMT</pubDate>
            <description><![CDATA[最近、パソコンは全然いじってなくて、またこのゲームやってます。
うまい人にはとても敵わない下手糞ですが、意外に世界は狭いのか、今の
ところ世界ランキング 3905 位です。昨日自己記録を更新できて、BP 99
階まで行けました。＼(^o^)／ ←いろんな意味で&hellip;。
あっ、下のはうまい人の動画です。カメラの切り替え、DT の発動タイミン
グ、MAX アクトの確率がかなりうまい(または高い)と思います。
 ]]></description>
        </item>
        <item>
            <title><![CDATA[小数の累乗 ]]></title>
            <link>https://masutaka.net/2008-10-28-2/</link>
            <guid>https://masutaka.net/2008-10-28-2/</guid>
            <pubDate>Tue, 28 Oct 2008 01:00:00 GMT</pubDate>
            <description><![CDATA[仕事中に上司から聞かれたんだけど、すっかり忘れていたので (._.) φ メモメモ
10 =&gt; 1000
10 =&gt; 1/1000
10 =&gt; 10 =&gt; 2√10 =&gt; √10
10 =&gt; 3√10
冪乗 - 通信用語の基礎知識 ]]></description>
        </item>
        <item>
            <title><![CDATA[踊るテキスト]]></title>
            <link>https://masutaka.net/2008-10-28-1/</link>
            <guid>https://masutaka.net/2008-10-28-1/</guid>
            <pubDate>Tue, 28 Oct 2008 00:00:00 GMT</pubDate>
            <description><![CDATA[M-x zone すると、カレントバッファのテキストが好き勝手に踊り始める。
本当にテキストを書き換えているのではなく、何かキーを押すと元に戻る
のでご心配なく。M-x zone-when-idle で、アイドル時間を指定できるよ。
M-x zone-leave-me-alone すると、以上を OFF できる。
コマンド名を忘れて探し回ったあげく、やっと zone だと分かった。ｗ
似たようなコマンドに animate もある。→ [2003-02-08-1] ]]></description>
        </item>
        <item>
            <title><![CDATA[マスタカの elisp 置き場]]></title>
            <link>https://masutaka.net/2008-10-14-1/</link>
            <guid>https://masutaka.net/2008-10-14-1/</guid>
            <pubDate>Tue, 14 Oct 2008 00:00:00 GMT</pubDate>
            <description><![CDATA[2022-05-04 (Wed):
chalow から Hugo に移行するにあたり、今まで https://masutaka.net/elisp.html に置いていた「マスタカの elisp 置き場」の行き場所がなくなってしまった。
もう更新しない情報をこのような一等地の URL に置くのは違和感がある。かと言って、捨てるのももったいない。💦
そこで、この記事をもって供養場とした。
 cdutil ログインシェルの alias を Emacs でも使ってしまおうというツールです。
例えば ~/.zshenv で alias hoge=&quot;cd /hogehoge&quot; と設定してあると、設定したキー hoge [Enter] の操作をすると、Dired でそのディレクトリを開けます。
補完候補を別途追加することもできます。補完候補にはファイルも指定できます。shell-mode でも使えます。
最新版 cdutil.el.gz 変更履歴  200?-??-?? v1.2?  忘れました。    TODO cdutil.el 中の説明の意味が分からないので、修正します。
rvsej mule-version や Meadow-version() を日本語のバージョン名にするだけのツールです。
(require 'rvsej) するだけで使えます。
最新版 rvsej.el.gz 変更履歴  2008-10-13 v1.3  同じく、Meadow で動かなくなっていたので直しました&hellip;   2008-10-05 v1.2  関数の中で関数を定義する手法 を使ったら、まるで動かなくなっていたので直しました&hellip;   2008-10-05 v1.]]></description>
        </item>
        <item>
            <title><![CDATA[和漢箋　ロート防風通聖散錠]]></title>
            <link>https://masutaka.net/2008-10-13-1/</link>
            <guid>https://masutaka.net/2008-10-13-1/</guid>
            <pubDate>Mon, 13 Oct 2008 00:00:00 GMT</pubDate>
            <description><![CDATA[近所のドラッグストアで「和漢箋 ロート防風通聖散錠 63 錠」を買ってきた。
 「脂肪を分解・燃焼して、おなか周りの溜まった皮下脂肪を落とす」らしい。
ホントかなあ&hellip;。ま、しばらく続けてみるか。以下、ネットで調べたことをコピペ。
 普段、漢方や生薬を服用していない方は腸内細菌が成分をうまく分解で
きないので　2 週間は効果がないと思うほうが良いそう(63 錠だと 1 週間分)。 「実証」向けの医薬品とのこと。「実証」とは男系でどちらかというと
火照り感で発汗の多い人。(対: 虚証)
→「使用上の注意」に発汗傾向の著しい方は、医師または薬剤師に相談
することと書いてあるのが気になる&hellip;。  ※ 購入する方は、注意書きを絶対に読むこと。]]></description>
        </item>
        <item>
            <title><![CDATA[【怒らせ方】契約説明会]]></title>
            <link>https://masutaka.net/2008-10-11-2/</link>
            <guid>https://masutaka.net/2008-10-11-2/</guid>
            <pubDate>Sat, 11 Oct 2008 01:00:00 GMT</pubDate>
            <description><![CDATA[契約説明会の時にこんなことを想像して笑いを堪えていた私は氏んだ方が
よいでしょうか&hellip;。1 分 18 秒から始まる「メンチ」です。
 ]]></description>
        </item>
        <item>
            <title><![CDATA[【ストII】作曲+作詞+編曲して、歌も付けている人がいる。]]></title>
            <link>https://masutaka.net/2008-10-11-1/</link>
            <guid>https://masutaka.net/2008-10-11-1/</guid>
            <pubDate>Sat, 11 Oct 2008 00:00:00 GMT</pubDate>
            <description><![CDATA[ ]]></description>
        </item>
        <item>
            <title><![CDATA[【宇都宮】 駅前の「餃子像」真っ二つに割れる…移転中の作業ミスで]]></title>
            <link>https://masutaka.net/2008-10-06-1/</link>
            <guid>https://masutaka.net/2008-10-06-1/</guid>
            <pubDate>Mon, 06 Oct 2008 00:00:00 GMT</pubDate>
            <description><![CDATA[こりゃまた見事に。。。
割れた餃子像
  割れる前の餃子像
  URL: http://blog.livedoor.jp/dqnplus/archives/1180955.html ]]></description>
        </item>
        <item>
            <title><![CDATA[テカテカ液晶対策 ]]></title>
            <link>https://masutaka.net/2008-10-05-2/</link>
            <guid>https://masutaka.net/2008-10-05-2/</guid>
            <pubDate>Sun, 05 Oct 2008 01:00:00 GMT</pubDate>
            <description><![CDATA[テカテカ液晶というものを良く知らないで買ってしまったら、目が疲れる
疲れる&hellip;。そこで「ELECOM 液晶保護フィルム(反射防止仕様) EF-FL22W」
を買ってみた。
まあ、気休めにはなるかな。ないよりはマシ。
しばらく使っていたが、ただ一つの気泡が気になって直していたら、ホコ
リがフィルムの粘着面にくっついて取り返しのつかないことに。。。
￥3,980 は泡と消えました。涙]]></description>
        </item>
        <item>
            <title><![CDATA[クリックしないと Flash が再生しない]]></title>
            <link>https://masutaka.net/2008-10-05-1/</link>
            <guid>https://masutaka.net/2008-10-05-1/</guid>
            <pubDate>Sun, 05 Oct 2008 00:00:00 GMT</pubDate>
            <description><![CDATA[Debian の FireFox は Iceweasel という名前だが、再生ボタンを押さない
と Flash が再生しない。全ての Flash でそうなので、結構ウザい..。色々
調べて、swfdec-mozilla をアンインストールすれば良いことが分かった。
でも、aptitude さんから gnome もアンインストールが必要と言われた。無理！！
試しに Adobe のページから最新の Flash Player をインストールしてみた
ら、あっさり解決できた。$HOME/.mozilla 以下にインストールされるので、
システムに影響はない。インストールすると、ツール→アドオン→プラグ
インの Shockwave Flash 9.0 r100 の上に Shockwave Flash 9.0 r124 が
追加される。
URL: http://www.adobe.com/jp/products/flashplayer/ ]]></description>
        </item>
        <item>
            <title><![CDATA[DHCP を使っている場合の IP アドレス再取得]]></title>
            <link>https://masutaka.net/2008-10-04-1/</link>
            <guid>https://masutaka.net/2008-10-04-1/</guid>
            <pubDate>Sat, 04 Oct 2008 00:00:00 GMT</pubDate>
            <description><![CDATA[ 現在の IP アドレスを開放
|&gt;ipconfig /release IP アドレスを再取得
|&gt;ipconfig /renew  ]]></description>
        </item>
        <item>
            <title><![CDATA[コメントとトラックバックを設置しました。]]></title>
            <link>https://masutaka.net/2008-09-29-1/</link>
            <guid>https://masutaka.net/2008-09-29-1/</guid>
            <pubDate>Mon, 29 Sep 2008 00:00:00 GMT</pubDate>
            <description><![CDATA[「くっつき BBS」と「くっつきトラックバック」を設置しました。
URL: http://nais.to/~yto/tools/kuttukibbs/ URL: http://nais.to/~yto/doc/tech/kuttuki-trackback.html レンタルサーバは大部分がそうみたいですが、FTP しか使えないのがしん
どいですね。Apache のエラーログも見られないし、crontab も使えないし、
シンボリックリンクも使えない。なんだかんだいって、CGI を結構修正す
ることになりました。
スパム対策は全くしていないので、ひどいようなら対策を考えます。
追記(2009-05-23):
「くっつきトラックバック」で使用する tb-standalone のリンクは分か
りづらいので、メモしておきます。
くっつきトラックバック →「miyagawa氏が日本語化したもの 」
→「こちら においておきます」]]></description>
        </item>
        <item>
            <title><![CDATA[chalow のアップロード]]></title>
            <link>https://masutaka.net/2008-09-25-2/</link>
            <guid>https://masutaka.net/2008-09-25-2/</guid>
            <pubDate>Thu, 25 Sep 2008 01:00:00 GMT</pubDate>
            <description><![CDATA[本サイトへのアップロードは lftp を使用しています。ftp を rsync っぽ
く使えるので、rsync が使えない環境ではとても便利です。参考までに手
順を簡単にメモしておきますね。
lftp -c open FTPサーバ &amp;&amp; user ユーザ名 パスワード &amp;&amp; \ mirror --reverse --delete --exclude theme/ $HOME/upload/atpages/chalow ~~~~~~~~~~~~~~~~※ mkchalow という sh スクリプトを自作し、chalow 変換とアップロードを
行っています。変換後のファイルは $HOME/upload/atpages/chalow に出力
させ、lftp のミラー機能で上記のようにアップロードしています。
※ 時間がかかるので、tdiary のテーマは &ndash;exclude オプションで対象外
にしています。]]></description>
        </item>
        <item>
            <title><![CDATA[chalow 公開!!]]></title>
            <link>https://masutaka.net/2008-09-25-1/</link>
            <guid>https://masutaka.net/2008-09-25-1/</guid>
            <pubDate>Thu, 25 Sep 2008 00:00:00 GMT</pubDate>
            <description><![CDATA[本日、ひっそりと公開します。過去のネタは問題ないものから公開してい
きます。なので、日を追うごとに過去ログが増えるというおかしなサイト
になると思います。^^;]]></description>
        </item>
        <item>
            <title><![CDATA[ブータブル USB メモリの作成方法]]></title>
            <link>https://masutaka.net/2008-09-23-1/</link>
            <guid>https://masutaka.net/2008-09-23-1/</guid>
            <pubDate>Tue, 23 Sep 2008 00:00:00 GMT</pubDate>
            <description><![CDATA[DELL Inspiron 530s の BIOS を 1.0.13 から 1.0.15 に更新するとファン
の音が多少静かになるらしい。この PC には Linux をインストールしてい
るが、更新プログラムは DOS の実行ファイルなので、もう１つの
PC(Let&rsquo;s Note) で USB 起動ディスクを作ることにした。
 FDD を搭載した Windows マシンがないので、Virtual Floppy Drive を
使って仮想 FDD の準備をし、仮想 FD を起動ディスクとしてフォーマッ
トする。以下、その手順。  1.1. 「ドライバ」のタブをクリック→「インストール」→「開始」で、仮
想ドライバの準備をする。
1.2. 「ドライブ0」のタブをクリック→「変更」→「A:」を選択すると、エ
クスプローラ上に A ドライブが出現する。
1.3. 「開く/新規」をクリックし、仮想フロッピーを挿入した状態にする。
1.4. A ドライブを右クリックし、「MS-DOSの起動ディスクを作成する」に
チェックを入れフォーマットする。起動に必要なプログラムが作成さ
れる。
HP USB Disk Storage Format Tool を使って、USB メモリをブート可能
な状態でフォーマットする。以下、その手順。  2.1. 配布元のリンク は切れている。&ldquo;HP USB Disk Storage Format Tool&rdquo;]]></description>
        </item>
        <item>
            <title><![CDATA[sh スクリプトを使用した自動バックアップ]]></title>
            <link>https://masutaka.net/2008-09-22-1/</link>
            <guid>https://masutaka.net/2008-09-22-1/</guid>
            <pubDate>Mon, 22 Sep 2008 00:00:00 GMT</pubDate>
            <description><![CDATA[コントロールパネルの &ldquo;タスク&rdquo; から任意のスクリプトを実行できるので、
Linux で使っている自動バックアップツールを cygwin でも使えるように
修正してみた。いくつかハマった点を書き留めておく。
  cygwin からネットワークドライブに書き込むと、Permission Denied
と怒られてしまう。
環境変数 CYGWIN を以下のように変更する必要があった。
[2002-11-16-1] に詳しい情報が載ってる。
  &#34;binmode ntsec smbntsec tty&#34; ↓ &#34;binmode ntsec nosmbntsec tty&#34;  &ldquo;C:\Document and Settings&rdquo; や &ldquo;C:\Program Files&rdquo; など、Windows
には空白を含むフォルダが多いので、意図したとおりに for 文が動か
ないことがある。
変数 IFS を一時的に変更して、文字列の区切りを改行のみにする等、
小技が必要。
  IFS=&#34; &#34; ]]></description>
        </item>
        <item>
            <title><![CDATA[FireFox3.0.1 の Foxmarks で XML パースエラー]]></title>
            <link>https://masutaka.net/2008-09-15-1/</link>
            <guid>https://masutaka.net/2008-09-15-1/</guid>
            <pubDate>Mon, 15 Sep 2008 00:00:00 GMT</pubDate>
            <description><![CDATA[XML パースエラー: 定義されていない実体が使用されています。 URL: chrome://foxmarks/content/foxmarks-dialog.xul 行番号: 77, 列番号: 29: &lt;label class=&#34;text-link&#34; onclick=&#39;FoxmarksForgot()&#39; value=&#34;&amp;dialog.label.forgotPassword;&#34; /&gt; ----------------------------^ ja/foxmarks.dtd に以下の記載が抜けていることが原因。
|5 行目に追加して対応した。こうすることで、ja-JP/foxmarks.dtd と同じ
内容になる。]]></description>
        </item>
        <item>
            <title><![CDATA[グラフィカルログインの時に読み込まれるファイル]]></title>
            <link>https://masutaka.net/2008-09-07-3/</link>
            <guid>https://masutaka.net/2008-09-07-3/</guid>
            <pubDate>Sun, 07 Sep 2008 02:00:00 GMT</pubDate>
            <description><![CDATA[ずーっと $HOME/.xsession だと思っていた。でも、/etc/gdm/Xsession を
よく読んだら $HOME/.xprofile が存在すれば読み込んでいるみたい。(実
際、lenny で /etc/gdm/Xsession を修正して$HOME/.xsession を無理やり
読み込ませるとログインできなかったし。)
$HOME/.xprofile を用意して、ログインした時にやりたい動作を書いたら
うまくいった。やった！]]></description>
        </item>
        <item>
            <title><![CDATA[GNUPG 鍵の破棄]]></title>
            <link>https://masutaka.net/2008-09-07-2/</link>
            <guid>https://masutaka.net/2008-09-07-2/</guid>
            <pubDate>Sun, 07 Sep 2008 01:00:00 GMT</pubDate>
            <description><![CDATA[&ldquo;gpg &ndash;edit-key masutaka.net@gmail.com &rdquo; から公開鍵を revoke にして、公
開鍵サーバに登録しても *** KEY REVOKED *** にならなかった。gnupg で
は破棄証明書を発行し、インポートするという手順が必要らしい。
  破棄証明書を発行する。
|% gpg &ndash;gen-revoke [keyid]
  出力される 3 行程度の破棄証明書を例えば revoke.txt に保存し、
インポートする。revoke.txt は念のためどこかに保存しておくと良い。
|% gpg &ndash;import revoke.txt
  URL: http://hp.vector.co.jp/authors/VA019487/tips.html#Tip12 ]]></description>
        </item>
        <item>
            <title><![CDATA[wanderlust 未読マークを削除]]></title>
            <link>https://masutaka.net/2008-09-07-1/</link>
            <guid>https://masutaka.net/2008-09-07-1/</guid>
            <pubDate>Sun, 07 Sep 2008 00:00:00 GMT</pubDate>
            <description><![CDATA[`c&rsquo;(wl-summary-mark-as-read-all) で消せる。]]></description>
        </item>
        <item>
            <title><![CDATA[aptitude フラグの意味]]></title>
            <link>https://masutaka.net/2008-08-31-2/</link>
            <guid>https://masutaka.net/2008-08-31-2/</guid>
            <pubDate>Sun, 31 Aug 2008 01:00:00 GMT</pubDate>
            <description><![CDATA[|piAU	webmin	+5837kB &lt;なし&gt;	1.160-2
左側の 4 文字の状態フラグからは、パッケージの状態に関する基本的な情
報が得られます。1 文字目はパッケージの「現在の状態」です。2 文字目
はパッケージに対して行う予定の「アクション」です。3 文字目はパッケー
ジが自動的にインストールされたかどうかを表します。4 文字目はパッケー
ジが信頼されているかどうかを表します。
「現在の状態」フラグの値
i - パッケージがインストール済みで、その依存関係がすべて満たされて
います。
c - パッケージは削除されましたが、設定ファイルがまだ残っています。
p - パッケージとその設定ファイルがすべて削除されました。またはイン
ストールされたことがありません。
v - パッケージが仮想パッケージです。
B - パッケージに壊れた依存関係があります。
u - パッケージは展開済みですが設定が行われていません。
C - 設定未完了です。つまりパッケージの設定が中断されました。
H - インストール未完了です。つまりパッケージのインストールが中断さ
れました。
「アクション」フラグの値
i - パッケージはインストール予定です。
u - パッケージは更新予定です。
d - パッケージは削除予定です。削除されますが、設定ファイルはシステ
ムに残ります。
p - パッケージは完全削除予定です。パッケージとその設定ファイルは削
除されます。
h - パッケージは固定されています。つまり、固定が取り消されるまでは、
たとえ新しいバージョンが利用可能になっても現在のバージョンに留
められます。
F - パッケージは更新が禁止されています。
r - パッケージは再インストール予定です。]]></description>
        </item>
        <item>
            <title><![CDATA[UIM でのスペースは常に半角にする。]]></title>
            <link>https://masutaka.net/2008-08-31-1/</link>
            <guid>https://masutaka.net/2008-08-31-1/</guid>
            <pubDate>Sun, 31 Aug 2008 00:00:00 GMT</pubDate>
            <description><![CDATA[~/.uim に以下のコードを書けば OK
;; スペースは常に半角 (require &#34;japanese.scm&#34;) (define ja-direct-rule (append &#39;( (&#34; &#34; &#34; &#34;) ) ja-direct-rule)) ]]></description>
        </item>
        <item>
            <title><![CDATA[Apache2 on lenny]]></title>
            <link>https://masutaka.net/2008-08-27-1/</link>
            <guid>https://masutaka.net/2008-08-27-1/</guid>
            <pubDate>Wed, 27 Aug 2008 00:00:00 GMT</pubDate>
            <description><![CDATA[[2006-07-22-1] と [2008-01-23-1] を参考に設定した。lenny のデフォル
トでは ~masutaka/index.html 等へのアクセスは許可されなくなったよう
なので、a2enmod コマンドで userdir を入力した。こうすることで
/etc/apache2/mods-enabled/userdir.(conf|load) のリンクが作られる。]]></description>
        </item>
        <item>
            <title><![CDATA[lenny インストール時に知ったこと]]></title>
            <link>https://masutaka.net/2008-08-24-2/</link>
            <guid>https://masutaka.net/2008-08-24-2/</guid>
            <pubDate>Sun, 24 Aug 2008 01:00:00 GMT</pubDate>
            <description><![CDATA[インストール中は Ctl-Alt-F2 でデバッグコンソールに移動でき、
Ctl-Alt-F5 でインストーラに戻れる。
利用したパッケージを送信する設定を選べ、http://popcon.debian.org/
で確認ができる。後から &ldquo;dpkg-reconfigure popularity-contest&rdquo; で設定
を変更できる。]]></description>
        </item>
        <item>
            <title><![CDATA[DELL Inspiron 530s で lenny のインストールが成功！！]]></title>
            <link>https://masutaka.net/2008-08-24-1/</link>
            <guid>https://masutaka.net/2008-08-24-1/</guid>
            <pubDate>Sun, 24 Aug 2008 00:00:00 GMT</pubDate>
            <description><![CDATA[Etch(4.0r4), Etch-And-A-Half, Lenny-beta2 を試したがどれもビデオま
わりで不具合があった。wide 画面にならない、画面の描画が遅い(ソフト
レンダリング)等。でも、8/23 の lenny デイリービルドを使ったら、あっ
さりインストールできた。]]></description>
        </item>
        <item>
            <title><![CDATA[エアコンの仕組み]]></title>
            <link>https://masutaka.net/2008-08-19-1/</link>
            <guid>https://masutaka.net/2008-08-19-1/</guid>
            <pubDate>Tue, 19 Aug 2008 00:00:00 GMT</pubDate>
            <description><![CDATA[気化熱を利用しているとのこと。
 室外機から室内機に液体のフロンが送られる。 室内機内部のアルミのフィン(蒸発器)内部でフロンが蒸発し、気化熱に
よってアルミのフィンが冷やされる。 室内の暖かい空気がアルミのフィンを通ることで冷やされる。 気化したフロンは回収され、室外機に送られる。 送られたフロンは圧縮され、液体に戻る。この時熱が発生するため、室
外機のファンで熱を逃す。  URL: http://www.eakon.jp/structure/decomposition/sikumi.html ]]></description>
        </item>
        <item>
            <title><![CDATA[list-character-sets]]></title>
            <link>https://masutaka.net/2008-07-01-1/</link>
            <guid>https://masutaka.net/2008-07-01-1/</guid>
            <pubDate>Tue, 01 Jul 2008 00:00:00 GMT</pubDate>
            <description><![CDATA[meadow-users-jp@meadowy.org の白井さんからの情報。
M-x list-character-sets すると、Emacs で扱える character set が表示
される。表示された Character Set List バッファの例えば
japanese-jisx0208 の上で Enter すると、japanese-jisx0208 で定義され
ている全文字が表示される。
個々の文字情報は &ldquo;C-x =&rdquo; や &ldquo;C-u C-x =&rdquo; すると、詳しい情報が得られ
る。]]></description>
        </item>
        <item>
            <title><![CDATA[XML を利用した技術]]></title>
            <link>https://masutaka.net/2008-06-29-11/</link>
            <guid>https://masutaka.net/2008-06-29-11/</guid>
            <pubDate>Sun, 29 Jun 2008 10:00:00 GMT</pubDate>
            <description><![CDATA[Web サービスにおいて、システム間のデータのやり取りには、標準規格と
して XML を使用する。XML データを実際にやり取りするためのプロトコル
には、SOAP を使用する。SOAP は XML 文書をネットワーク経由で送受信す
るためのメッセージ仕様を定めた標準プロトコルである。
従来はプロトコルが統一されていなかったため、ファイアウォールを越え
てのインターネット接続は難しいものだった。SOAP は伝送プロトコルとし
て、HTTP, FTP, SMTP などの標準プロトコルをベースとするため、ファイ
アウォール越しの接続も容易になった。
 手紙の本文→XML 封筒の形式→SOAP 配達の手段→HTTP, FTP, SMTP  ]]></description>
        </item>
        <item>
            <title><![CDATA[データ操作するための API]]></title>
            <link>https://masutaka.net/2008-06-29-10/</link>
            <guid>https://masutaka.net/2008-06-29-10/</guid>
            <pubDate>Sun, 29 Jun 2008 09:00:00 GMT</pubDate>
            <description><![CDATA[ DOM
Document Objects Model の略。XML 文書を解析し、木構造でメモリに展
開する。展開されたデータのことを DOM ツリーと呼ぶ。 SAX
Simples API for XML の略。その都度解析するので、DOM に比べて省メ
モリ。ただし、プログラムが複雑になってしまうことがある。  ]]></description>
        </item>
        <item>
            <title><![CDATA[名前空間の定義方法]]></title>
            <link>https://masutaka.net/2008-06-29-9/</link>
            <guid>https://masutaka.net/2008-06-29-9/</guid>
            <pubDate>Sun, 29 Jun 2008 08:00:00 GMT</pubDate>
            <description><![CDATA[各要素に接頭辞となる任意の文字列を加えることにより、名前空間を定義
できる。各要素に加える都合上、DTD とは対応していない。
以下の例では、支店Aの金額は1ヶ月、支店Bの金額は1週間を示すため、
名前空間を分けている。
 構文  &lt;要素 xmlns:接頭辞=&#34;名前空間を示すURI&#34;&gt;  例  &lt;売上 xmlns:支店A=&#34;http://www.example.com/a&#34; xmlns:支店B=&#34;http://www.example.com/b&#34;&gt; &lt;支店A:金額&gt;500000&lt;/支店A:金額&gt; &lt;支店B:金額&gt;20000&lt;/支店B:金額&gt; &lt;/売上&gt; ]]></description>
        </item>
        <item>
            <title><![CDATA[エンティティ宣言]]></title>
            <link>https://masutaka.net/2008-06-29-8/</link>
            <guid>https://masutaka.net/2008-06-29-8/</guid>
            <pubDate>Sun, 29 Jun 2008 07:00:00 GMT</pubDate>
            <description><![CDATA[ DTD  &lt;!ENTITY xml &#34;XML(eXtensible Markup Language)&#34;&gt;  XML インスタンス  &lt;詳細&gt;&amp;xml;とは拡張可能なマークアップ言語のことです&lt;/詳細&gt;  結果  &lt;詳細&gt;XML(eXtensible Markup Language)とは拡張可能なマークアップ言語のことです&lt;/詳細&gt; ]]></description>
        </item>
        <item>
            <title><![CDATA[属性リスト宣言]]></title>
            <link>https://masutaka.net/2008-06-29-7/</link>
            <guid>https://masutaka.net/2008-06-29-7/</guid>
            <pubDate>Sun, 29 Jun 2008 06:00:00 GMT</pubDate>
            <description><![CDATA[ DTD  &lt;!ATTLIST 部門 場所 CDATA &#34;東京&#34;&gt;  XML インスタンス  &lt;部門 場所=&#34;神奈川&#34;&gt;営業部&lt;/部門&gt; ]]></description>
        </item>
        <item>
            <title><![CDATA[要素型宣言]]></title>
            <link>https://masutaka.net/2008-06-29-6/</link>
            <guid>https://masutaka.net/2008-06-29-6/</guid>
            <pubDate>Sun, 29 Jun 2008 05:00:00 GMT</pubDate>
            <description><![CDATA[ DTD  &lt;!ELEMENT 氏名 (姓,名)&gt;  XML インスタンス  &lt;氏名&gt; &lt;姓&gt;山田&lt;/姓&gt; &lt;名&gt;太郎&lt;/名&gt; &lt;/氏名&gt; ]]></description>
        </item>
        <item>
            <title><![CDATA[DTD]]></title>
            <link>https://masutaka.net/2008-06-29-5/</link>
            <guid>https://masutaka.net/2008-06-29-5/</guid>
            <pubDate>Sun, 29 Jun 2008 04:00:00 GMT</pubDate>
            <description><![CDATA[XML 文書内に直接記述する方法を「内部サブセット」、別ファイルに記述
する方法を「外部サブセット」と呼ぶ。外部 DTD は開発者が用意したもの
も、標準の DTD も使用することができる。前者の識別子として SYSTEM、
後者の識別子として PUBLIC が指定される。
両方使用することもできる。XML パーサは最初に内部、次に外部サブセッ
トを読み込む。もし同じ名前の要素が定義されていた場合は、内部が優先
されて使用される。
DTD では、以下の 4 つの定義を行うことができる。
 要素型宣言(ELEMENT) 属性リスト宣言(ATTLIST) エンティティ宣言(ENTITY) 記法宣言(NOATION)  DTD のように XML 文書内にどのような要素名が含まれるのか、要素の出現
順序や属性などを事前に定義したものを「スキーマ」という。スキーマの
規格には「DTD」と「XML Schema」がある。]]></description>
        </item>
        <item>
            <title><![CDATA[XML 文書の記述の種類]]></title>
            <link>https://masutaka.net/2008-06-29-4/</link>
            <guid>https://masutaka.net/2008-06-29-4/</guid>
            <pubDate>Sun, 29 Jun 2008 03:00:00 GMT</pubDate>
            <description><![CDATA[  整形式 (well-formed) XML 文書
「開始タグと終了タグの対応が正しく取られている」「要素の親子関係も正
しく保たれている」を満たすもの。従って、全ての XML 文書は整形式 XML
文書でなければならない。
  検証済み (valid) XML 文書
上記に加え、要素や属性が DTD の定義に従っているかどうかも検証した
XML 文書のこと。検証済み XML 文書は「妥当な XML 文書」とも呼ばれる。
  ]]></description>
        </item>
        <item>
            <title><![CDATA[XML の構造]]></title>
            <link>https://masutaka.net/2008-06-29-3/</link>
            <guid>https://masutaka.net/2008-06-29-3/</guid>
            <pubDate>Sun, 29 Jun 2008 02:00:00 GMT</pubDate>
            <description><![CDATA[ XML 宣言(省略可)
バージョンや文字エンコーディングの宣言 DTD(省略可)
要素型、属性リスト、エンティティ、記法宣言 XML インスタンス(必須)
実際のタグ付き文書  ]]></description>
        </item>
        <item>
            <title><![CDATA[XML の特徴]]></title>
            <link>https://masutaka.net/2008-06-29-2/</link>
            <guid>https://masutaka.net/2008-06-29-2/</guid>
            <pubDate>Sun, 29 Jun 2008 01:00:00 GMT</pubDate>
            <description><![CDATA[ インターネットに対応した世界標準である。 構造化データをテキスト形式で記述できる。 テキストデータなので OS やプラットフォームに依存しない。 タグの作成が自由に出来る。 デザインデータは持たずに、スタイルシートとして分離している。  ]]></description>
        </item>
        <item>
            <title><![CDATA[XML の基礎]]></title>
            <link>https://masutaka.net/2008-06-29-1/</link>
            <guid>https://masutaka.net/2008-06-29-1/</guid>
            <pubDate>Sun, 29 Jun 2008 00:00:00 GMT</pubDate>
            <description><![CDATA[XML とは eXtensible Markup Language の略。拡張可能なマークアップ言
語である。ちなみに、XHTML とは、HTML を XML に準拠する形で再定義し
たマークアップ言語である。
SGML───┐ │ ↓ ↓ HTML XML──┐│ ↓↓ XHTML ↑Web用に整理・拡張 ↑インターネットに適合！ ]]></description>
        </item>
        <item>
            <title><![CDATA[しりとり]]></title>
            <link>https://masutaka.net/2008-06-22-1/</link>
            <guid>https://masutaka.net/2008-06-22-1/</guid>
            <pubDate>Sun, 22 Jun 2008 00:00:00 GMT</pubDate>
            <description><![CDATA[2ch より。
大学のころ付き合ってた彼女と映画館で並んでたら
女「しりとりしようよ」 俺「いいよ」
女「しりと『り』!」俺「リール」
女「ルビィ!」俺「イスタンブール」
女「ルーレット!」俺「トリコロール」
女「ルービックキューブ!」俺「ブラックホール」
女「ル&hellip;ル&hellip;ルもうない&hellip;あっ!『ルール』!!
やったー、ルで返してやったー!ルール!ルール!」俺「ルノワール」
泣き出した。]]></description>
        </item>
        <item>
            <title><![CDATA[表計算]]></title>
            <link>https://masutaka.net/2008-06-18-1/</link>
            <guid>https://masutaka.net/2008-06-18-1/</guid>
            <pubDate>Wed, 18 Jun 2008 00:00:00 GMT</pubDate>
            <description><![CDATA[[2005-08-06-1] の訂正。日本語も問題なく表示できる。おそらく、&quot;&quot; で
括っていなかったのだと思う。以下、まとめ。
Emacs22 から ses-mode が使える。*.ses というファイルを開くと
ses-mode になる。
|数字orEnterキー: カレントのセルに入力
|TAB: 次の列を挿入
|Ctrl-o: 次の行を挿入
計算は (+ A1 A2) などと Emacs Lisp と同じ前置記法で行う。文字列は
&ldquo;あああ&rdquo; などと囲む必要がある。詳しくは SES の Info を参照すること。]]></description>
        </item>
        <item>
            <title><![CDATA[コマンドラインでピザを注文するムービー]]></title>
            <link>https://masutaka.net/2008-06-11-1/</link>
            <guid>https://masutaka.net/2008-06-11-1/</guid>
            <pubDate>Wed, 11 Jun 2008 00:00:00 GMT</pubDate>
            <description><![CDATA[ 元ネタ
http://gigazine.net/index.php?/news/comments/20080609_command_line_pizza/ http://slashdot.jp/articles/04/05/08/0858242.shtml オフィシャルページ
http://www.beigerecords.com/cory/pizza_party/ ]]></description>
        </item>
        <item>
            <title><![CDATA[半熟卵の作り方]]></title>
            <link>https://masutaka.net/2008-05-24-1/</link>
            <guid>https://masutaka.net/2008-05-24-1/</guid>
            <pubDate>Sat, 24 May 2008 00:00:00 GMT</pubDate>
            <description><![CDATA[水を沸騰させる。 7 分茹でる。(5 分だと少なかったので 7 分)
この時、箸でゆっくりかき混ぜると黄身が中心に寄る。量が多い場合は、
きれいなふきんでゆっくりかき混ぜると良いそう。 茹で終わったら冷水に数分間漬けると、殻が剥きやすくなる。  ちなみに同条件下では、生卵よりゆで卵のほうが早く腐敗するそう。
(URL: ゆで卵 )]]></description>
        </item>
        <item>
            <title><![CDATA[起動時に読み込まれるファイルの順番]]></title>
            <link>https://masutaka.net/2008-05-15-1/</link>
            <guid>https://masutaka.net/2008-05-15-1/</guid>
            <pubDate>Thu, 15 May 2008 00:00:00 GMT</pubDate>
            <description><![CDATA[1→2→3の順番で読み込まれる。(1 と 3 の存在を知らなかった&hellip;。orz)
|1. site-start.el in load-path
|2. ~/.emacs
|3. default.el in load-path
ただし、
1 は -no-site-file オプションを付けると読み込まれない。
2 は -q オプションを付けると読み込まれない。
3 は -q オプションを付ける、または inhibit-default-init に Non-nil を
セットすると読み込まれない。
各ユーザの ~/.emacs に (load &ldquo;/usr/local/adm/etc/Emacs2x&rdquo;) のような
共通設定ファイルをロードさせる設定を記載する運用も悪くはない。しか
し、ユーザが誤って書き換えてしまうことも考えられるため、ユーザ向け
の設定は site-start.el に記載すると良いかもしれない。
default.el は、ユーザが ~/.emacs に設定した内容を無効化できるが、ユーザ
の混乱を避けるため、あまり使うべきではないかもしれない。]]></description>
        </item>
        <item>
            <title><![CDATA[揚げない唐揚げ]]></title>
            <link>https://masutaka.net/2008-05-14-2/</link>
            <guid>https://masutaka.net/2008-05-14-2/</guid>
            <pubDate>Wed, 14 May 2008 01:00:00 GMT</pubDate>
            <description><![CDATA[食べやすく適当に切り分けたもも肉をビニール袋に入れ、
少量の麺つゆ、マヨ、砂糖、おろしニンニク、おろし生姜（チューブので十分）、
たっぷりの胡椒を加えてよく揉み込み、３０分放置して下味を付ける。
そこに片栗粉：上新粉＝１：２〜１：３の割合で加え、味塩胡椒を振り、
ビニールに空気を入れてよく振ってコロモを満遍なくまぶす。
まぶしたら、出来るだけ空気を抜いて、５〜１０分ほどコロモを肉に馴染ませる。
熱したフライパンに少量の油を引いて、肉を投入し、フタをして弱火〜中火で
片面を焼く。７割がた火が通ったら、フタを外して肉をひっくり返して残り３割に
火を通してできあがり。
揚げないのにサクサクジューシーな唐揚げが出来るよ。
上新粉を使うのがサクサクのポイント。]]></description>
        </item>
        <item>
            <title><![CDATA[advice の外し方]]></title>
            <link>https://masutaka.net/2008-05-14-1/</link>
            <guid>https://masutaka.net/2008-05-14-1/</guid>
            <pubDate>Wed, 14 May 2008 00:00:00 GMT</pubDate>
            <description><![CDATA[M-x ad-deactivate
実行すると、全ての advice を外したい関数を聞かれる。非インタラクティ
ブに呼び出すには、以下のような評価をする。
(ad-deactivate &#39;関数名) M-x ad-disable-advice
実行すると、「関数名」「advice の種類」「advice の名前」の順に聞か
れる。ある advice を一時的に OFF にしたい時に使う。非インタラクティ
ブに呼び出すには、以下のような評価をする。
(ad-disable-advice &#39;関数名 &#39;adviceの種類 &#39;adviceの名前) M-x ad-enable-advice
ad-disable-advice の逆。非インタラクティブに呼び出すには、以下の
ような評価をする。
(ad-enable-advice &#39;関数名 &#39;adviceの種類 &#39;adviceの名前) M-x ad-remove-advice
実行すると、「関数名」「advice の種類」「advice の名前」の順に聞か
れる。ある advice を削除したい時に使う。非インタラクティブに呼び出
すには、以下のような評価をする。
(ad-remove-advice &#39;関数名 &#39;adviceの種類 &#39;adviceの名前) 追記(2009-06-14):
全面的に書き換えました。]]></description>
        </item>
        <item>
            <title><![CDATA[Emacs on Xming と Windows アプリ間のクリップボード]]></title>
            <link>https://masutaka.net/2008-05-08-2/</link>
            <guid>https://masutaka.net/2008-05-08-2/</guid>
            <pubDate>Thu, 08 May 2008 01:00:00 GMT</pubDate>
            <description><![CDATA[Windows の環境変数 LANG に ja_JP.SJIS を設定していたので、自然にできて
いたみたい。これをやってないと Emacs に UTF-8 な文字列が張り付いてしま
い、ちょっと冗長になる。]]></description>
        </item>
        <item>
            <title><![CDATA[MDIE での圧縮ファイルの取扱い]]></title>
            <link>https://masutaka.net/2008-05-08-1/</link>
            <guid>https://masutaka.net/2008-05-08-1/</guid>
            <pubDate>Thu, 08 May 2008 00:00:00 GMT</pubDate>
            <description><![CDATA[解凍ソフトに *.zip を関連付けしていても、ダブルクリックすると圧縮フォル
ダとして開いてしまう。でも、以下を実行しておけば問題ナッシング。
|regsvr32 /u zipfldr.dll
|regsvr32 /u cabview.dll
URL: http://tobysoft.net/diary/archives/2007/04/_mdie.html ]]></description>
        </item>
        <item>
            <title><![CDATA[@data_path のデータ構造]]></title>
            <link>https://masutaka.net/2008-04-19-1/</link>
            <guid>https://masutaka.net/2008-04-19-1/</guid>
            <pubDate>Sat, 19 Apr 2008 00:00:00 GMT</pubDate>
            <description><![CDATA[YYYY/YYYYMM.td2
本文が記録される。 YYYY/YYYYMM.tdc
ツッコミやトラックバックが記録される。 YYYY/YYYYMMDD.tdr
「本日のリンク元」が記録される。 YYYY/YYYYMM.tdr~
tdiary-1.x の時は YYYYMM.tdr に「本日のリンク元」が記録されていた。そのバッ
クアップファイル。 cache/*
YYYY を処理しやすい形式でキャッシュしたもの。 category/*
category.rb などが生成する。カテゴリをキャッシュしたもの。 tdiary.conf
Web 上から設定すると、このファイルに書き込まれる。 volatile.tdr
最新の記事の日付が記録されている？  *.td2 や *.tdc をエディタから直接修正した場合は、cache ディレクトリを削
除しないと Web 上に反映されないようです。(注: 自己責任でお願いします。)]]></description>
        </item>
        <item>
            <title><![CDATA[cygwin の DLL に依存しないビルド方法]]></title>
            <link>https://masutaka.net/2008-04-13-1/</link>
            <guid>https://masutaka.net/2008-04-13-1/</guid>
            <pubDate>Sun, 13 Apr 2008 00:00:00 GMT</pubDate>
            <description><![CDATA[gcc に `-mno-cygwin&rsquo; オプションを付ければ OK
cygwin1.dll をダイナミックリンクしない実行ファイルを作成できる。]]></description>
        </item>
        <item>
            <title><![CDATA[cvs commit mail ができるツールの総まとめ]]></title>
            <link>https://masutaka.net/2008-04-06-1/</link>
            <guid>https://masutaka.net/2008-04-06-1/</guid>
            <pubDate>Sun, 06 Apr 2008 00:00:00 GMT</pubDate>
            <description><![CDATA[  cvs-info 平成 13 年度未踏ソフトウェアに採択された、UNIX domain socket を使った
本格的なもの。ただ、今は配布していないみたい。残念。論文 の内容は、後
述の情報を得る上でかなり参考になった。
  log, commit_prep/log_accum cvs の配布物に含まれている perl スクリプト。commit_prep/log_accum は、
一回の変更に対して一通だけメールを送るらしい。ただ、perl はほとんど読
めないので、ちょっとした変更が難しい。
  aftercommit ruby スクリプト。ディレクトリにまたがった commit をしても一通にしてく
れるが、メールの内容がちょっとバグっている。あと、loginfo の設定で
%{sVv} を &ldquo;%{sVv}&rdquo; に変えないとメールが飛ばなかった。ruby-1.4.3 の頃
に作ったようなので、もうスクリプトが古いのかもしれない。
  cvsmailer 中嶋さんという方が作った ruby スクリプト。配布元は見つからなかった。
  cvsmail cvsmailer ととても良く似た名前の python スクリプト。一回の変更に対し
て複数のメールを送ってしまうかもしれない。python はまったく読めないの
で、少しの変更もできない。
  ]]></description>
        </item>
        <item>
            <title><![CDATA[ruby の文法チェック]]></title>
            <link>https://masutaka.net/2008-04-05-1/</link>
            <guid>https://masutaka.net/2008-04-05-1/</guid>
            <pubDate>Sat, 05 Apr 2008 00:00:00 GMT</pubDate>
            <description><![CDATA[&ldquo;ruby -c スクリプトファイル&rdquo; で ruby の文法チェックができる。
実行はしないので安心。]]></description>
        </item>
        <item>
            <title><![CDATA[共有フォルダのショートカットアイコンを「マイネットワーク」に追加しない方法]]></title>
            <link>https://masutaka.net/2008-04-02-2/</link>
            <guid>https://masutaka.net/2008-04-02-2/</guid>
            <pubDate>Wed, 02 Apr 2008 01:00:00 GMT</pubDate>
            <description><![CDATA[マイネットワークに、ショートカットが徐々に溜まっていくのが嫌だったので
調べてみた。MMC(Microsoft Management Console)を使用して「グループポリ
シー」スナップインを追加すると、以後追加されなくなるらしい。すでにある
ショートカットは、最近使ったファイルを削除する方法で行なうとのこと。
URL: http://www.atmarkit.co.jp/fwin2k/win2ktips/055mnetscut/mnetscut.html ]]></description>
        </item>
        <item>
            <title><![CDATA[NAS のファンから異音]]></title>
            <link>https://masutaka.net/2008-04-02-1/</link>
            <guid>https://masutaka.net/2008-04-02-1/</guid>
            <pubDate>Wed, 02 Apr 2008 00:00:00 GMT</pubDate>
            <description><![CDATA[ずいぶん前から HD-H300LAN のファンから異音がしていて耐えられなくなって
きたので、ここ を参考に分解してファンに少量の油を差してみた。(一度でも分
解すると、メーカーの保証が受けられなくなる可能性がある点は注意！！)以前
は電源投入直後から異音がしていたが、かなり改善できた。しばらく様子を見
よう。関係ないけど、バックアップ用にもう一台欲しい。
追記(2008-04-07):
静かな時はとても静かだけど、時々うるさくなることがある。]]></description>
        </item>
        <item>
            <title><![CDATA[マクロ展開]]></title>
            <link>https://masutaka.net/2008-03-23-5/</link>
            <guid>https://masutaka.net/2008-03-23-5/</guid>
            <pubDate>Sun, 23 Mar 2008 04:00:00 GMT</pubDate>
            <description><![CDATA[Emacs Lisp のマクロ展開は以下のようにするとよい。
[2003-01-25-1] のでもできるけど、こちらの方が整形がきれい。
こうすると、dolist() が実際に何をしているかとても良く分かる。
(pp (macroexpand-all &#39;  (dolist (i &#39;(1 2 3))  i))) 参考情報: http://d.hatena.ne.jp/kazu-yamamoto/20071212/1197427102 ]]></description>
        </item>
        <item>
            <title><![CDATA[screen の文字コード]]></title>
            <link>https://masutaka.net/2008-03-23-4/</link>
            <guid>https://masutaka.net/2008-03-23-4/</guid>
            <pubDate>Sun, 23 Mar 2008 03:00:00 GMT</pubDate>
            <description><![CDATA[通常は端末から取得されるが、意図した設定にならない場合は ~/.screenrc に
|defencoding eucJP
などと書くとよい。文字コードの種類は &ldquo;man screen&rdquo; に記載されている。
現在の設定は info コマンド(例: C-z i)で確認できる。]]></description>
        </item>
        <item>
            <title><![CDATA[cygterm でのログインシェルを変えたい]]></title>
            <link>https://masutaka.net/2008-03-23-3/</link>
            <guid>https://masutaka.net/2008-03-23-3/</guid>
            <pubDate>Sun, 23 Mar 2008 02:00:00 GMT</pubDate>
            <description><![CDATA[Linux だと chsh でログインシェルを変えられるけど、cygwin には chsh は存
在しない。ちょっと気持ち悪いが、c:\cygwin\etc\passwd を直接変更すればよい。]]></description>
        </item>
        <item>
            <title><![CDATA[cygwin ミラーサーバへのホップ数]]></title>
            <link>https://masutaka.net/2008-03-23-2/</link>
            <guid>https://masutaka.net/2008-03-23-2/</guid>
            <pubDate>Sun, 23 Mar 2008 01:00:00 GMT</pubDate>
            <description><![CDATA[11 ftp.jaist.ac.jp
16 ftp.u-aizu.ac.jp
NG ring.aist.go.jp
13 ring.astem.or.jp
NG ring.exp.fujixerox.co.jp
12 ring.nict.go.jp
..
21 www.cygwin.com ちなみに、以下を追加すると ruby-sqlite3 をインストールできる。
ftp://sunsite.dk/projects/cygwinports 参考情報: http://d.hatena.ne.jp/cuspos/20071111/1194722490 ]]></description>
        </item>
        <item>
            <title><![CDATA[dyna.example.com で pop サービス]]></title>
            <link>https://masutaka.net/2008-03-23-1/</link>
            <guid>https://masutaka.net/2008-03-23-1/</guid>
            <pubDate>Sun, 23 Mar 2008 00:00:00 GMT</pubDate>
            <description><![CDATA[dyna.example.com で pop を使えるようにした。qpopper をインストールした
だけ。これで Windows から wpbf でメールが来ているかの確認ができる(音で
分かる)ようになった。popauth コマンドを使えばapop も使えるようだが、工
夫しないとパスワードの管理がバラバラになるのでやめた。
ただし、wpbf は確認時に $MAIL を一旦リネームするというかなりイマイチな
仕様で、Linux 側の gnubiff が勘違いしてメール受信の音を出してしまう。正
確には、FAMD が反応しているようなので、gnubiff も pop で確認するように
した。解決！]]></description>
        </item>
        <item>
            <title><![CDATA[edebug でステップイン]]></title>
            <link>https://masutaka.net/2008-03-22-1/</link>
            <guid>https://masutaka.net/2008-03-22-1/</guid>
            <pubDate>Sat, 22 Mar 2008 00:00:00 GMT</pubDate>
            <description><![CDATA[`i&rsquo; でステップインできる。
知らなかった。今まで関数を探してブレイクを張っていた。。。]]></description>
        </item>
        <item>
            <title><![CDATA[ネットワーク長を付記した IP アドレス]]></title>
            <link>https://masutaka.net/2008-03-17-4/</link>
            <guid>https://masutaka.net/2008-03-17-4/</guid>
            <pubDate>Mon, 17 Mar 2008 03:00:00 GMT</pubDate>
            <description><![CDATA[例えば、172.24.0.0/17 と表記された場合は、まず 1 を最上位ビットから
17 個敷き詰めてみる。
|11111111 11111111 10000000 00000000
ビット反転する。
|00000000 00000000 01111111 11111111
10 進数に戻す。
|0 0 127 255
172.24.0.0/17 は 172.24.0.0〜172.24.127.255 の範囲だと分かった。
(URL: IPアドレス )]]></description>
        </item>
        <item>
            <title><![CDATA[お腹のマッサージ]]></title>
            <link>https://masutaka.net/2008-03-17-3/</link>
            <guid>https://masutaka.net/2008-03-17-3/</guid>
            <pubDate>Mon, 17 Mar 2008 02:00:00 GMT</pubDate>
            <description><![CDATA[よしだ整体院 の先生の話によると、通常は時計回りにマッサージすると良いらしい。
下痢ぎみの時は反時計回り。]]></description>
        </item>
        <item>
            <title><![CDATA[手作りしょうゆキット]]></title>
            <link>https://masutaka.net/2008-03-17-2/</link>
            <guid>https://masutaka.net/2008-03-17-2/</guid>
            <pubDate>Mon, 17 Mar 2008 01:00:00 GMT</pubDate>
            <description><![CDATA[アド街で紹介されていた。1 年でマイしょうゆができるらしい。
ウケ狙いのプレゼントに良いかも。
URL: http://www.marukin-chuyu.com/kodawari/shoyu/kit.html ]]></description>
        </item>
        <item>
            <title><![CDATA[IPv6 に思う by 山本和彦氏]]></title>
            <link>https://masutaka.net/2008-03-17-1/</link>
            <guid>https://masutaka.net/2008-03-17-1/</guid>
            <pubDate>Mon, 17 Mar 2008 00:00:00 GMT</pubDate>
            <description><![CDATA[http://itpro.nikkeibp.co.jp/free/v6start/voice_v6/20010527/1/ ]]></description>
        </item>
        <item>
            <title><![CDATA[コマンドラインからのバイトコンパイル方法]]></title>
            <link>https://masutaka.net/2008-03-13-1/</link>
            <guid>https://masutaka.net/2008-03-13-1/</guid>
            <pubDate>Thu, 13 Mar 2008 00:00:00 GMT</pubDate>
            <description><![CDATA[|% emacs -Q -batch -f batch-byte-compile .emacs.el]]></description>
        </item>
        <item>
            <title><![CDATA[必要条件と十分条件]]></title>
            <link>https://masutaka.net/2008-03-11-1/</link>
            <guid>https://masutaka.net/2008-03-11-1/</guid>
            <pubDate>Tue, 11 Mar 2008 00:00:00 GMT</pubDate>
            <description><![CDATA[命題「A ⇒ B」が真である時 A を B である為の十分条件 sufficient
condition と言い、B を A であるための必要条件 necessary condition と言う。
ある命題 A が成り立つようなものの範囲を真理集合 truth set というが、
A ⇒ B が真である場合の A, B の真理集合の関係は A ⊆ B となってい
る(Venn 図で描くと下の図の通り)。
つまり、B の範囲に入る為には A であれば十分であり、A の範囲に入る為には
B であることが先ず必要だからというのが、その名の由来であるという。
URL: http://phaos.hp.infoseek.co.jp/preparations/condition.htm ]]></description>
        </item>
        <item>
            <title><![CDATA[emacs C++ 開発環境]]></title>
            <link>https://masutaka.net/2008-03-09-2/</link>
            <guid>https://masutaka.net/2008-03-09-2/</guid>
            <pubDate>Sun, 09 Mar 2008 01:00:00 GMT</pubDate>
            <description><![CDATA[ emacs C++ 開発環境 gtag のススメ、Visual Studio のような gdb-mode など。
元ネタは小関さんの「過負荷な日々 」  ]]></description>
        </item>
        <item>
            <title><![CDATA[高度信頼設計]]></title>
            <link>https://masutaka.net/2008-03-09-1/</link>
            <guid>https://masutaka.net/2008-03-09-1/</guid>
            <pubDate>Sun, 09 Mar 2008 00:00:00 GMT</pubDate>
            <description><![CDATA[ フォールトトレランス(障害許容)
システムの信頼性を高めること。
障害が発生してもシステムが停止しないようにすること。
システムを二重化するとか、運用しながら修復するとか。 フォールトアボイダンス(障害回避)
信頼性の高いシステムを構築すること。
信頼性の高い部品を使用するとか、十分なテストをするとか。 リカバリー(障害回復)
いち早くシステムを復旧できるようにすること。
バックアップを取ること。  ]]></description>
        </item>
        <item>
            <title><![CDATA[がっつりスクロールすることがある]]></title>
            <link>https://masutaka.net/2008-03-03-1/</link>
            <guid>https://masutaka.net/2008-03-03-1/</guid>
            <pubDate>Mon, 03 Mar 2008 00:00:00 GMT</pubDate>
            <description><![CDATA[scroll-conservatively に 1 を設定して、next-line でバッファを読み進めて
いくと、(当然だが) 1 行ずつスクロールできる。
ただ、ウィンドウの一番下にカーソルがある状態で、ウィンドウの幅より大き
く、折り返しが発生している行に進むと、scroll-conservatively のデフォル
ト(0)と同じ動きをしてしまう。確認した Emacs は 22.1。これはバグ？
ということを mule-ja に 2/25 に報告したが、返信なし&hellip;。送るべき ML を
間違えたか。まさか、emacs-devel に送るわけにもいかないし&hellip;。]]></description>
        </item>
        <item>
            <title><![CDATA[ポケットティッシュケース]]></title>
            <link>https://masutaka.net/2008-03-02-1/</link>
            <guid>https://masutaka.net/2008-03-02-1/</guid>
            <pubDate>Sun, 02 Mar 2008 00:00:00 GMT</pubDate>
            <description><![CDATA[2/11 に買った無印のアクリルポケットティッシュケース が中々良い。
底面がマグネットで本体に付くようになっていて、底からティッシュを追加で
きる。ポケットティッシュって駅とかで受け取っても、使うタイミングに困る
のだけれどもこれなら良いね。会社で大活躍です。家用にも買おうかな？
希望を言えば、アクリルではなくもう少し重い素材のほうが良いと思う。ティッ
シュが少なくなってくると、ケースを押さえないと取り出せなさそう。実家に
あったものは鉄かステンレス素材だったので、安定感があった。]]></description>
        </item>
        <item>
            <title><![CDATA[PIXUS 560i]]></title>
            <link>https://masutaka.net/2008-02-28-3/</link>
            <guid>https://masutaka.net/2008-02-28-3/</guid>
            <pubDate>Thu, 28 Feb 2008 02:00:00 GMT</pubDate>
            <description><![CDATA[プリンタなんてこのくらい小さいもので良かったんだよなあ。今のは大きすぎ。
でも使わないから、買い直すほどでもないよなあ。大きすぎる上に詰まっ
て使えなくなってしまったから、とっても邪魔。安く修理できたら売りたい。]]></description>
        </item>
        <item>
            <title><![CDATA[メール本文に ISO-2022-JP を利用することになった背景]]></title>
            <link>https://masutaka.net/2008-02-28-2/</link>
            <guid>https://masutaka.net/2008-02-28-2/</guid>
            <pubDate>Thu, 28 Feb 2008 01:00:00 GMT</pubDate>
            <description><![CDATA[mew-dist 355 (古い&hellip;) から一部抜粋。
|仕様では通常、シンタックスとセマンティクスを定義します。
|
|RFC822 では、ヘッダのセマンティクスもボディのセマンティクスも ASCII と
|定めています。ASCII とは、0-127 の範囲を ASCII 表にある文字として解釈
|するというセマンティクスです。ただ、RFC822 の執筆当時 Dave が気が付い
|ていた犯しやすいシンタックス上の問題点(単一の CR など)は明確に排除しま
|した。
|
|日本で本文に ISO-2022-JP を入れたのは、シンタックス上は問題ありません
|が、セマンティクスを破っています。ASCII 文字列中に ESC シーケンスが現
|れても、それは単なる ESC シーケンスですから、日本語として取り扱われま
|せん。また、ヨーロッパでは、本文に 0-255 までを許し、これを Latin-1 と
|解釈することにしました。これはシンタックスもセマンティックスも破ってい
|ます。しかし、所詮、日本で ISO-2022-JP を利用しようとした背景は、ヨー
|ロッパが 8bit 領域を使っていたからにほかなりません。日本でも EUC Japan
|を標準に選ぶ可能性はあったということです。
シンタックスは「構文」、セマンティクスは「データの意味」のことらしい。へぇ〜。
Gartner Column：第11回 そもそも「セマンティクス」とは何だろう？ が参考になるかも。
追記(2009-04-05):
関連する話題があったので、貼り付けておきますね。
(URL: 日本語のe-mail、ISO-2022-JP以外のcharsetを使うのは是か非か - スラッシュドット・ジャパン )
個人的には ISO-2022-JP で表現できない内容なら、Unicode で送るのはまっ
たく問題ないと思います。ただ上の記事にあるように、本文に 8bit 目を
使うのはシンタックスを破ることになるので、base64 符号化は必須です。]]></description>
        </item>
        <item>
            <title><![CDATA[Mew + Namazu (mew-nmz.el)]]></title>
            <link>https://masutaka.net/2008-02-28-1/</link>
            <guid>https://masutaka.net/2008-02-28-1/</guid>
            <pubDate>Thu, 28 Feb 2008 00:00:00 GMT</pubDate>
            <description><![CDATA[「To: に masutaka.net@gmail.com を含む」または「ほげほげ」が含まれたメールを検索。
|to=masutaka.net@gmail.com or ほげほげ
「To: に masutaka.net@gmail.com を含む」かつ「ほげほげ」が含まれたメールを検索。
|to=masutaka.net@gmail.com and ほげほげ
cc=masutaka.net@gmail.com を使う場合は ~/Namazu/mknmz-inc.pl の $SEARCH_FIELD を修正
して、インデックスを作り直す必要がある。他にもパラメータを追加したほうが良いかもしれない。
mew-dist 28132 参照のこと。
インデックス作り直しに関連した話題をもう一つ。
Namazu-2.0.17 以降であれば `&ndash;decode-base64&rsquo; が使える。メリットは以下の
とおり。こちらも mew-dist 28132 参照のこと。
|・日本語のメールなんだけど、UTF-8 + Base64(Q も可) なものも検索できる。
|・添付された MS-Word などの中身も検索できる。]]></description>
        </item>
        <item>
            <title><![CDATA[The Kitchen Salvatore Cuomo]]></title>
            <link>https://masutaka.net/2008-01-30-1/</link>
            <guid>https://masutaka.net/2008-01-30-1/</guid>
            <pubDate>Wed, 30 Jan 2008 00:00:00 GMT</pubDate>
            <description><![CDATA[六本木ヒルズにある、サルバトーレという人がやっているイタリア料理屋
テレビでやっていて気になったのでメモメモ。
http://www.ystable.co.jp/restaurant/thekitchen/roppongi.html ]]></description>
        </item>
        <item>
            <title><![CDATA[man の -w オプション]]></title>
            <link>https://masutaka.net/2008-01-29-1/</link>
            <guid>https://masutaka.net/2008-01-29-1/</guid>
            <pubDate>Tue, 29 Jan 2008 00:00:00 GMT</pubDate>
            <description><![CDATA[最初にヒットした man ファイルを表示してくれる。(debian-users:50110)
|% man -w ls
|/usr/share/man/ja/man1/ls.1.gz]]></description>
        </item>
        <item>
            <title><![CDATA[スクリプト処理]]></title>
            <link>https://masutaka.net/2008-01-26-1/</link>
            <guid>https://masutaka.net/2008-01-26-1/</guid>
            <pubDate>Sat, 26 Jan 2008 00:00:00 GMT</pubDate>
            <description><![CDATA[|#!/usr/local/bin/emacs &ndash;script
|
|(message &ldquo;Hello, world.&rdquo;)]]></description>
        </item>
        <item>
            <title><![CDATA[svnserve を止めて、http 経由でアクセスする]]></title>
            <link>https://masutaka.net/2008-01-23-1/</link>
            <guid>https://masutaka.net/2008-01-23-1/</guid>
            <pubDate>Wed, 23 Jan 2008 00:00:00 GMT</pubDate>
            <description><![CDATA[[2008-01-12-1] の改良版。
http 経由でのアクセスのほうがカッコいい気がしたので、設定してみた。
  mod_dav_svn をインストールした。
|# apt-get install libapache2-svn
  /etc/apache2/mods-available/dav_svn.conf に以下のみを記載した。
  &lt;Location /svn&gt; DAV svn SVNPath /usr/local/SVNROOT AuthType Basic AuthName &#34;Subversion Repository&#34; AuthUserFile /usr/local/SVNROOT/conf/dav_svn.passwd &lt;LimitExcept GET PROPFIND OPTIONS REPORT&gt; Require valid-user &lt;/LimitExcept&gt; &lt;/Location&gt;  ユーザ認証ファイルを作成した。
|# htpasswd2 -c /usr/local/SVNROOT/conf/dav_svn.passwd masutaka
  SVNROOT のオーナーとグループを、Apache を動かしている www-data さんにした。
|# chown -R www-data:www-data /usr/local/SVNROOT
  Apache を再起動した。
|# /etc/init.d/apache2 restart
  後始末
  6-1.]]></description>
        </item>
        <item>
            <title><![CDATA[電源 OFF 時の Suica]]></title>
            <link>https://masutaka.net/2008-01-22-1/</link>
            <guid>https://masutaka.net/2008-01-22-1/</guid>
            <pubDate>Tue, 22 Jan 2008 00:00:00 GMT</pubDate>
            <description><![CDATA[[2008-01-21-1] の続き。
Suica は電源が入っていなくても使うことができた。ってことは、遠隔オート
ロックで電源を切る前に、手動で電源を切られてしまったら、Suica の不正使
用を止めることはできないのね..。
・遠隔オートロックで電源 OFF した状態で、Suica は使えるのか？
・電池を抜いた状態で、Suica は使えるのか？
を検証予定。]]></description>
        </item>
        <item>
            <title><![CDATA[遠隔オートロック成功]]></title>
            <link>https://masutaka.net/2008-01-21-1/</link>
            <guid>https://masutaka.net/2008-01-21-1/</guid>
            <pubDate>Mon, 21 Jan 2008 00:00:00 GMT</pubDate>
            <description><![CDATA[[2008-01-19-2] の続き。
「1 分間の着信を 3 回する」のではなくて、「1 分以内に着信を 3 回する」
でした&hellip;。au ショップのお姉さんも、オレと同じ勘違いをしてた。ｗ
成功すると携帯の電源が切れ、次回電源を入れた時にパスワードを入力しない
と、何も出来ない状態にしてくれる。Felica ロックもしてくれる。これは、パ
スワードを入力しないと Felica(オサイフケータイのことね) が使用出来ない
というもの。これでセキュリティはそこそこ大丈夫なのかな。]]></description>
        </item>
        <item>
            <title><![CDATA[TeraTerm での ssh の自動ログイン]]></title>
            <link>https://masutaka.net/2008-01-20-1/</link>
            <guid>https://masutaka.net/2008-01-20-1/</guid>
            <pubDate>Sun, 20 Jan 2008 00:00:00 GMT</pubDate>
            <description><![CDATA[[2007-12-20-2] の続き。
マクロではなく、TeraTerm Menu から設定したらすんなりできてしまった。
ついでに cygterm も TeraTerm Menu に設定。タスクバーのクイック起動もすっ
きりしたし、Debian の telnetd もアンインストールできたので、とても良い
感じ。
(参考情報: teraterm(ssh2対応) + 公開鍵認証 )]]></description>
        </item>
        <item>
            <title><![CDATA[遠隔オートロック]]></title>
            <link>https://masutaka.net/2008-01-19-2/</link>
            <guid>https://masutaka.net/2008-01-19-2/</guid>
            <pubDate>Sat, 19 Jan 2008 01:00:00 GMT</pubDate>
            <description><![CDATA[モバイル Suica を使うことにしたので、携帯のセキュリティも気をつけなくちゃ
ということで、W51CA で遠隔オートロックを設定した。でも、できねえ〜。(涙)
もちろん、発信者着信番号通知もやってる。なぜ？
電源 OFF したら、次回 ON したときにパスワードが必要な設定をしているから、
まあいいか。。。Suica だから最大 10,000 円の被害で済むし&hellip;。]]></description>
        </item>
        <item>
            <title><![CDATA[モバイル Suica]]></title>
            <link>https://masutaka.net/2008-01-19-1/</link>
            <guid>https://masutaka.net/2008-01-19-1/</guid>
            <pubDate>Sat, 19 Jan 2008 00:00:00 GMT</pubDate>
            <description><![CDATA[電子マネーというものをやってみたくて、W51CA で「モバイル Suica」を始め
てみた。クレジットカードを登録することで、携帯から Suica のチャージと利
用ができるサービス。定期券も使えるみたい。
「EASY モバイル Suica」というものもあり、クレジットカード不要(よって
チャージが面倒)、定期が購入できないなどの違いがある。ただし、あとからク
レジットカード情報を登録すると、アップグレード可能。
(URL: W51CA )
(URL: JR東日本:モバイルSuica )
(URL: モバイルSuica )
カードタイプの Suica の払い戻しは、JR 東日本のみどりの窓口などで行える。
残額が 210 円以下の場合は、手数料を取られないとのこと。
(URL: JR東日本:Suica 払い戻し )]]></description>
        </item>
        <item>
            <title><![CDATA[svnserve 経由でのアクセスに認証を付ける]]></title>
            <link>https://masutaka.net/2008-01-12-1/</link>
            <guid>https://masutaka.net/2008-01-12-1/</guid>
            <pubDate>Sat, 12 Jan 2008 00:00:00 GMT</pubDate>
            <description><![CDATA[[2005-11-07-2] の改良版。
svnserve 経由でアクセスすると、ユーザ名が残らなくて気持ち悪いので
簡易認証をすることにした。
/home/masutaka/SVNROOT/conf/svnserve.conf に以下を記載。
|[general]
|anon-access = none
|auth-access = write
|password-db = passwd
/home/masutaka/SVNROOT/conf/passwd にユーザ名とパスワードを記載。
|[users]
|masutaka = XXXXXXXX]]></description>
        </item>
        <item>
            <title><![CDATA[オイルサーディンの調理例]]></title>
            <link>https://masutaka.net/2007-12-24-1/</link>
            <guid>https://masutaka.net/2007-12-24-1/</guid>
            <pubDate>Mon, 24 Dec 2007 00:00:00 GMT</pubDate>
            <description><![CDATA[オイルサーディンでよく作るのは、
缶開けてオイルを捨てて、レモン汁(市販の瓶入りで OK) を
たっぷり注ぎ込み、粗挽き黒こしょうもたっぷり振り、
その上をサーディンの隙間を埋めるようにマヨネーズを
塗り込んで、缶ごとガスコンロの魚焼きグリルで、
マヨに軽く焦げ目が付くまで焼く。
その後、粉チーズをたっぷり乗せてから、再度加熱。
缶ごと皿に移して、酒と一緒に。
粉チーズに、刻みパセリとパン粉とオリーブオイルを
混ぜておくと、さらにウマー
URL: http://food8.2ch.net/test/read.cgi/sake/1190305928/294 ]]></description>
        </item>
        <item>
            <title><![CDATA[TeraTerm で ssh や cygwin を動かす]]></title>
            <link>https://masutaka.net/2007-12-20-2/</link>
            <guid>https://masutaka.net/2007-12-20-2/</guid>
            <pubDate>Thu, 20 Dec 2007 01:00:00 GMT</pubDate>
            <description><![CDATA[最新の 4.56 が出ていたので、インストールしてみた。ssh が使えるようになっ
ていたのは知っていたけど、cygwin の端末としても使えるようになっていたのね。スゲー。
デフォルトの MS 明朝だと、表示がよく崩れるので、Terminal に変えた方が良いかも。
マクロを使った ssh の自動ログインの方法はまだよく分からなかったので、
とりあえず telnet で我慢することにした。(今まで使っていた telnet の自動
ログインマクロ、login.ttl はそのまま使うことができた。)
 以下のような Windows のショートカットを作った。
|リンク先: &ldquo;C:\Program Files\teraterm\ttermpro.exe&rdquo; /F=%HOME%.teraterm\teraterm2.ini /M=%HOME%.teraterm\login.ttl
|作業フォルダ: %HOME%  cygwin のほうもなかなか良さそう。rxvt は日本語が表示できなかったので、大きな前進かも。
  c:\Program Files\teraterm\cygterm.cfg を以下の通りに変更。
|TERM = ttermpro.exe %s %d /E /KR=SJIS /KT=SJIS /nossh
|↓
|TERM = ttermpro.exe %s %d /E /KR=SJIS /KT=SJIS /nossh /F=c:\home\masutaka.teraterm\cygterm.ini
  以下のような Windows のショートカットを作った。
|リンク先: &ldquo;C:\Program Files\teraterm\cygterm.exe&rdquo;
|作業フォルダ: %HOME%]]></description>
        </item>
        <item>
            <title><![CDATA[emacsclient で Emacs を遠隔操作]]></title>
            <link>https://masutaka.net/2007-12-20-1/</link>
            <guid>https://masutaka.net/2007-12-20-1/</guid>
            <pubDate>Thu, 20 Dec 2007 00:00:00 GMT</pubDate>
            <description><![CDATA[Debian で既に navi2ch on Emacs を起動していた場合、Windows からログイン
してもう一つ Emacs を立ち上げると、navi2ch が起動できないので、
emacsclient を使って Emacs を遠隔操作することにした。
  Debian で起動している Emacs であらかじめ M-x server-start しておく。
  TeraTerm で以下を実行する。Emacs のフレームが Windows 側にポコッと出現する。
最後の ~(チルダ) はダミー。引数を指定しないといけないみたい。
|% emacsclient &ndash;display=pana-b:0.0 -n ~
  [2002-12-12-2] でも似たようなことをやっていたんだけど、だいぶ洗練されてきた。]]></description>
        </item>
        <item>
            <title><![CDATA[Xming の導入]]></title>
            <link>https://masutaka.net/2007-12-18-1/</link>
            <guid>https://masutaka.net/2007-12-18-1/</guid>
            <pubDate>Tue, 18 Dec 2007 00:00:00 GMT</pubDate>
            <description><![CDATA[以下を実行して、インストールした。SSH は無効にした。
Xming-6-9-0-31-setup.exe
Xming-fonts-7-3-0-22-setup.exe
  *.pcf.Z フォントを Solaris9 から持ってきて、以下のように配置した。
ipamona だけは Debian から持ってきた。
|C:\usr\local\share\fonts\X11\intlfonts
|C:\usr\local\share\fonts\X11\ipamona
|C:\usr\local\share\fonts\X11\jisx0213
|C:\usr\local\share\fonts\X11\marumoji
|C:\usr\local\share\fonts\X11\monafont
|C:\usr\local\share\fonts\X11\shinonome
  各ディレクトリにある *.pcf.Z を Debian の uncompress で解凍し、
各ディレクトリで mkfontdir した。
  C:\Program Files\Xming\font-dirs に以下を記載した。
|C:\usr\local\share\fonts\X11\intlfonts
|C:\usr\local\share\fonts\X11\ipamona
|C:\usr\local\share\fonts\X11\jisx0213
|C:\usr\local\share\fonts\X11\marumoji
|C:\usr\local\share\fonts\X11\monafont
|C:\usr\local\share\fonts\X11\shinonome
  C:\Program Files\Xming\X0.hosts に以下を記載した。
vergil は Linux マシン名。
|localhost
|vergil
  Xming を実行した。
  TeraTerm で Debian にログインし、以下を実行した。
nero-b は Windows マシン名。]]></description>
        </item>
        <item>
            <title><![CDATA[画像が縮小表示される]]></title>
            <link>https://masutaka.net/2007-12-17-1/</link>
            <guid>https://masutaka.net/2007-12-17-1/</guid>
            <pubDate>Mon, 17 Dec 2007 00:00:00 GMT</pubDate>
            <description><![CDATA[FireFox 2.0.11 で、画像が常に画面サイズに縮小されるようになってしまった。
FireFox 1.0.4 では、メニューから変更できたんだけど、about:config でしか
変更できなくなったみたい。
|ロケーションバーに about:config と入力し、
|browser.enable_automatic_image_resizing を true から false に変更。]]></description>
        </item>
        <item>
            <title><![CDATA[デビルメイクライ3]]></title>
            <link>https://masutaka.net/2007-11-20-1/</link>
            <guid>https://masutaka.net/2007-11-20-1/</guid>
            <pubDate>Tue, 20 Nov 2007 00:00:00 GMT</pubDate>
            <description><![CDATA[スタイリッシュランク
D...Dope! / ばか者、まぬけな C...Crazy! / 狂った、いかれた B...Blast! / ぶっ飛んだ、爆発 A...Alright! / 申し分ない、結構な S...Sweet! / 最高の、いかした SS...Show time! / ショータイムだ! SSS...Stylish! / スタイリッシュ！！ 挑発(ダンテ)
D〜C...Com&#39;n winp. / 来な、ノロマ野郎。 B〜A...Come and get me. / 捕まえてみな。 S〜SS...You scared? / お前ら、ビビッてんのか？ SSS...Crazy?Ha!! / イカレてるって？ハッ！！ SSSレア...Sweet!!Baby!!! / 最高だぜ、ベイビー！！ 挑発(バージル)
閻魔刀装備時..You shall die. / 死ぬぞ貴様。 フォースエッジ、ベオウルフ装備時.. ...Come on. / …来い。 Hu...What&#39;s wrong. / …どうかしたか？ Hu...I&#39;m boring. / …つまらん。 ]]></description>
        </item>
        <item>
            <title><![CDATA[カテゴリ整理]]></title>
            <link>https://masutaka.net/2007-11-17-2/</link>
            <guid>https://masutaka.net/2007-11-17-2/</guid>
            <pubDate>Sat, 17 Nov 2007 01:00:00 GMT</pubDate>
            <description><![CDATA[[2007-07-01-1] に chalow を始めた時に「カテゴリ分けをするのは今日からにし
よう」と書いたが、結局かなりの時間をかけて &ldquo;(カテゴリ)&rdquo; から &ldquo;[カテゴ
リ]&rdquo; への変換をした。昔はカテゴリが適当だったという事情からツールを使う
ことはできなかったため、もちろん手作業で変換。ｗ 300 以上あったと思う。ｗｗ
最後の方は意識が朦朧としていたが、時間をかけた甲斐があって、なかなか
きれいに整理できたと思う。しかし、何やってんだオレ&hellip;。
あとからでもカテゴリは増やせるし、検索もできるので、カテゴリは基本
分けない ことが正解な気がしてきた。一度、整理術の本でも読んでみるか。]]></description>
        </item>
        <item>
            <title><![CDATA[日本標準時]]></title>
            <link>https://masutaka.net/2007-11-17-1/</link>
            <guid>https://masutaka.net/2007-11-17-1/</guid>
            <pubDate>Sat, 17 Nov 2007 00:00:00 GMT</pubDate>
            <description><![CDATA[Web 上から日本標準時を確認できる。自分のコンピュータとの誤差も表示してくれる。
URL: http://www3.nict.go.jp/cgi-bin/JST.pl おそらく、[2003-01-27-1] のサイトがここに移動したのだと思う。]]></description>
        </item>
        <item>
            <title><![CDATA[Message-Id や Date は誰が付けるべきか？]]></title>
            <link>https://masutaka.net/2007-11-16-2/</link>
            <guid>https://masutaka.net/2007-11-16-2/</guid>
            <pubDate>Fri, 16 Nov 2007 01:00:00 GMT</pubDate>
            <description><![CDATA[[2003-03-01-2] のメモにあった URL から抜粋、一部修正。
|MTA としての本来の役割を考えてみると、envelope の情報に基づきホストから
|ホストへメッセージを配送するのが仕事であり、基本的には(経路情報のヘッダー
|を付ける以外)メッセージそのものには関与しない。MTA が Message-ID を付け
|るということはヘッダーを解析し、Message-ID がすでにあるかどうか調べると
|いうことであり、余計な処理が必要になるということである。つまり、MTA と
|しての役割から見た場合、(親切な行為なのか余計なお世話なのかはともかくと
|して)必要なこと以上のことを行っているのである。
|
|なお、RFC821(SMTP の仕様書)の改定案の &ldquo;6.3 Compensating for
|Irregularities&rdquo; では受け取ったメッセージが Message-ID や Date を欠いて
|いれば MTA でそれらを追加してよい &ldquo;MAY&rdquo; となっている。ただし、そのよう
|なメッセージを生成した MUA を &ldquo;these weak SMTP clients&rdquo; と呼んでいるこ
|とからも、本来は MUA で生成すべきだという考えが読み取れると思う。また、
|将来的には欠いているヘッダは Message Submission Agent (MSA) で補完され
|るようになるかも知れない(RFC 2476 &ldquo;Message Submission&rdquo; を参照)。
URL: http://www.emaillab.org/essay/message-id.html#where ]]></description>
        </item>
        <item>
            <title><![CDATA[last-record1_default.utf8]]></title>
            <link>https://masutaka.net/2007-11-16-1/</link>
            <guid>https://masutaka.net/2007-11-16-1/</guid>
            <pubDate>Fri, 16 Nov 2007 00:00:00 GMT</pubDate>
            <description><![CDATA[~/.anthy には last-record[12]_default.utf8 が出来るが、
last-record[12]_default の場合もある。ちょっと調べてみたら、後者のファ
イルがあればそちらが使われ、なければ前者が使われるとのこと。古い anthy
が前者を作ってしまったのだろうか。Emacs21 を使っていたのが原因だろうか。
分からん&hellip;。とりあえず、両方とも削除してイチから学習しなおすことにするか。]]></description>
        </item>
        <item>
            <title><![CDATA[NAS がネットワークから見えなくなった]]></title>
            <link>https://masutaka.net/2007-11-12-1/</link>
            <guid>https://masutaka.net/2007-11-12-1/</guid>
            <pubDate>Mon, 12 Nov 2007 00:00:00 GMT</pubDate>
            <description><![CDATA[ファームのアップデートをしたら、HD-H300LAN がネットワークから見えなくなっ
てしまった。背面の設定初期化ボタン(データは消去されない)を押して、デフォ
ルトの IP アドレスだという 192.168.11.150 にアクセスしたら見えたので、
Web 上から再設定した。だが、IP 設定ユーティリティからはなぜか見えず&hellip;。]]></description>
        </item>
        <item>
            <title><![CDATA[SZ と RSS]]></title>
            <link>https://masutaka.net/2007-10-30-1/</link>
            <guid>https://masutaka.net/2007-10-30-1/</guid>
            <pubDate>Tue, 30 Oct 2007 00:00:00 GMT</pubDate>
            <description><![CDATA[ps で表示される SZ と RSS について。
SZ&hellip;スワップ込みのメモリサイズ
RSS..スワップ含まないメモリサイズ]]></description>
        </item>
        <item>
            <title><![CDATA[davfs]]></title>
            <link>https://masutaka.net/2007-10-27-4/</link>
            <guid>https://masutaka.net/2007-10-27-4/</guid>
            <pubDate>Sat, 27 Oct 2007 03:00:00 GMT</pubDate>
            <description><![CDATA[さらに調べてみたらｗ、@nifty ではマイキャビネットという、HTTP でファイ
ルアクセスできるサービスを提供していることが分かった。一般的にはWebDav
というものみたい。で、これも davfs を使えばマウントできるっぽい。でもやっ
ぱり sarge だと面倒そうだな。]]></description>
        </item>
        <item>
            <title><![CDATA[gmailfs]]></title>
            <link>https://masutaka.net/2007-10-27-3/</link>
            <guid>https://masutaka.net/2007-10-27-3/</guid>
            <pubDate>Sat, 27 Oct 2007 02:00:00 GMT</pubDate>
            <description><![CDATA[gmailfs というのもあった。例えばファイルを１個コピーすると、その情報が
書かれたメールが自分宛に送られるが、あたかもファイルシステムにアクセス
しているように振る舞ってくれるとのこと。はい、ジョークソフトですね。
URL: http://lowlife.jp/yasusii/stories/20.html ]]></description>
        </item>
        <item>
            <title><![CDATA[ftpfs]]></title>
            <link>https://masutaka.net/2007-10-27-2/</link>
            <guid>https://masutaka.net/2007-10-27-2/</guid>
            <pubDate>Sat, 27 Oct 2007 01:00:00 GMT</pubDate>
            <description><![CDATA[ftpfs というのもあるらしい。ftp 先のリモートディレクトリをローカルファ
イルシステムにマウントできるとのこと。すごすぎ。Web サイトの更新がかな
り楽になると思う。
主なツールは curlftpfs や lufs など。前者は sarge ではパッケージがなかっ
たためソースからコンパイルした。が、コンパイルエラーになって面倒くさく
なって断念。後者は lufs-utils というパッケージがあったため
|# lufsmount ftpfs://アカウント:パスワード@ホスト名 /mnt/nifty
を実行してみたが、
|you don&rsquo;t have kernel lufs support (check whether the lufs module is available/loaded)
と言われてしまった。カーネルにパッチが必要みたい。断念。早く etch に
移行しよう..。↓ところで、同じことしている人を発見した。ｗ
URL: http://d.hatena.ne.jp/twisted0517/20050603/1117786746 ]]></description>
        </item>
        <item>
            <title><![CDATA[mount -> automount]]></title>
            <link>https://masutaka.net/2007-10-27-1/</link>
            <guid>https://masutaka.net/2007-10-27-1/</guid>
            <pubDate>Sat, 27 Oct 2007 00:00:00 GMT</pubDate>
            <description><![CDATA[[2007-03-11-2] の続き。
今まで Linux から「NAS」「Windows」「USB フラッシュメモリ」を普通にマウ
ントしてアクセスしていた。でも必要な時だけマウントすればよいし、常にこ
れらの機器が稼働しているわけではないので、automount に変更した。
 autofs をインストール
|# apt-get install autofs /etc/fstab のマウントの設定をコメントアウト  #//pana/masutaka /mnt/pana/masutaka smbfs username=XXXX,password=YYYY,iocharset=euc-jp,codepage=cp932,uid=1000,gid=1000 0 0 #//nas1/info /mnt/nas1/info smbfs username=XXXX,password=YYYY,iocharset=euc-jp,codepage=cp932 0 0 #//nas1/share /mnt/nas1/share smbfs username=XXXX,password=YYYY,iocharset=euc-jp,codepage=cp932,uid=1000,gid=1000 0 0 #/dev/sda1 /mnt/usbfm auto user,noauto,iocharset=euc-jp,uid=1000,gid=1000 0 0 /etc/auto.master に以下を追加。  /misc	/etc/auto.misc /etc/auto.misc に以下を追加。  nas1_info -fstype=smbfs,username=XXXX,password=YYYY,iocharset=euc-jp,codepage=cp932 ://nas1/info nas1_share -fstype=smbfs,username=XXXX,password=YYYY,iocharset=euc-jp,codepage=cp932,uid=1000,gid=1000 ://nas1/share pana_masutaka -fstype=smbfs,username=XXXX,password=YYYY,iocharset=euc-jp,codepage=cp932,uid=1000,gid=1000 ://pana/masutaka usbfm -fstype=auto,iocharset=euc-jp,uid=1000,gid=1000 :/dev/sda1 autofs を再起動。例えば /misc/nas1_share にアクセスすると、マウントが行われる。
|# /etc/init.d/autofs restart 今までと同じパスでアクセスしたいので、/mnt から /misc の各マウント]]></description>
        </item>
        <item>
            <title><![CDATA[LDAP 編集ツール]]></title>
            <link>https://masutaka.net/2007-10-23-2/</link>
            <guid>https://masutaka.net/2007-10-23-2/</guid>
            <pubDate>Tue, 23 Oct 2007 01:00:00 GMT</pubDate>
            <description><![CDATA[ CUI から編集を行うのはしんどいので、GUI なツールを探してみた。  &ndash; LDAP Browser/Editor Java で実装されたツール。Java 1.2.2 が必要。
なかなか良い感じ。Java なのでプラットフォームを選ばない。
付属の applet.html を使えば、Web 上からも編集が出来るみたい。
&ndash; LDAP Explorer
PHP で実装されたツール。まだ試していない。
ただ配布元が分からなかったので、&ldquo;LDAPExplorer tar.gz&rdquo; でググって、
ようやく LDAPExplorer-1.18.tar.gz をゲットした。
 Java が動けば LDAP Browser/Editor、動かなかったら LDAP Explorer かな。
Windows で LDAP Browser/Editor を動かすという話もあるが、編集する人が
これをインストールしなくちゃないというのは、かなりイマイチ。
LDAP Explorer が動けば良いんだけど、メンテされていないんだろうなあ..。
Web 上で編集や追加や削除ができる、良いツールはないのだろうか。  ]]></description>
        </item>
        <item>
            <title><![CDATA[chalow version 1.0]]></title>
            <link>https://masutaka.net/2007-10-23-1/</link>
            <guid>https://masutaka.net/2007-10-23-1/</guid>
            <pubDate>Tue, 23 Oct 2007 00:00:00 GMT</pubDate>
            <description><![CDATA[chalow version 1.0 が公開されていたので、バージョンアップしました。
こういう Web 系のツールはバージョンアップが面倒ですね。tdiary とか pukiwiki とか。
URL: http://chalow.org/ URL: http://chalow.org/cl/2007-10-19.html ]]></description>
        </item>
        <item>
            <title><![CDATA[formailを使った重複メールの削除]]></title>
            <link>https://masutaka.net/2007-10-19-1/</link>
            <guid>https://masutaka.net/2007-10-19-1/</guid>
            <pubDate>Fri, 19 Oct 2007 00:00:00 GMT</pubDate>
            <description><![CDATA[[2007-07-31-1] で話題にした重複メールの件。
 To: masutaka.net@gmail.com Cc: 加入しているメーリングリスト
 という宛先でメールが来ると、同じメールが 2 通来てしまう。
procmail 付属の formail をうまくを使えば、スマートに削除できることが分かった。
以下は ~/.procmailrc の該当の設定。
PATH=$PATH:/usr/local/bin MAILDIR=$HOME/Mail.local DELETEDIR=$HOME/.trash/Mail/delete :0 * ? formail -D 8192 msgid.cache * ? touch $DELETEDIR/.mew-mtime $DELETEDIR/. formail が Message-ID を msgid.cache というファイルに 8192byte 蓄え、重複メールかの判断をしている。
そう判断されたメールは $DELETEDIR に振り分けられる。msgid.cache は $MAILDIR に作られる。どちらのディレクトリともメールサーバから見える場所を指定すること。$HOME が無難。ディレクトリはあらかじめ掘っておき、適切なパーミッション(2700等)をかけておくこと。
.mew-mtime を touch しているのは、Mew から $DELETEDIR を見たときにスキャンが走るようにするため。]]></description>
        </item>
        <item>
            <title><![CDATA[Emacs のメーラからの LDAP 検索]]></title>
            <link>https://masutaka.net/2007-10-15-3/</link>
            <guid>https://masutaka.net/2007-10-15-3/</guid>
            <pubDate>Mon, 15 Oct 2007 02:00:00 GMT</pubDate>
            <description><![CDATA[Mew(mew-ldap.el) (★) [2003-05-13-1] に「使ってみたい」と言ってずいぶん経ったが、自宅で立ち上げたテストサーバから使えるようになった。
mew-ldap.el は以下の Web サイトに置いてある。
URL: http://www.meadowy.org/~gotoh/mew.html ~/.mew.el の設定内容は以下のとおり。
(require &#39;mew-ldap) (setq mew-ldap-server &#34;ldap&#34;) (setq mew-ldap-search-base &#34;dc=masutaka,dc=com&#34;) (setq mew-ldap-use t) (define-key mew-draft-header-map (kbd &#34;C-i&#34;) &#39;mew-ldap-header-comp) (define-key mew-header-mode-map (kbd &#34;C-i&#34;) &#39;mew-ldap-header-comp) 意外にサクサクと動いてビックリ。説明には mew-ldap-use は default の nil で良いと書いてあったが、ソースを見た限りでは non-nil じゃないと検索してくれないようだ。
追記(2007-10-27):
上の情報は間違い。nil でも検索してくれる。ただし、なぜか検索してくれない時もある。その場合 C-u TAB すれば、強制的に検索してくれる。
ただ、実際に使えるレベルには達してないと思う。理由は以下のとおり。修正してパッチ送ろうかな&hellip;。
 ~/Mail/Addrbook と名前が被ると LDAP 側の検索結果が補完候補にならないことがある。 メールアドレスが複数あっても、最初にヒットしたアドレスしか補完されない。 検索(Tab)や展開(M-Tab)には、日本語の名前が使えないみたい。 認証には対応していないみたい。 Summary-mode への名前の展開にも対応していない。  ]]></description>
        </item>
        <item>
            <title><![CDATA[Windows のメーラからの LDAP 検索]]></title>
            <link>https://masutaka.net/2007-10-15-2/</link>
            <guid>https://masutaka.net/2007-10-15-2/</guid>
            <pubDate>Mon, 15 Oct 2007 01:00:00 GMT</pubDate>
            <description><![CDATA[Becky! (★★★) &ldquo;*&rdquo; で検索すると初めて表示され、アドレス帳を閉じるまで検索結果が保持される。今のところ、ニックネームを登録するやり方が分からない。需要あるのかな？
ファイル→新規アドレス帳 をして気づいたんだけど、ネットワーク先のフォルダを指定できるのね&hellip;。ローカルにコピーしなくてもいいじゃん。
Mozilla Thunderbird (★★) このためだけに初めてインストールした。検索させてもアドレス帳のフォルダを移動すると検索結果が消えてしまう。ローカルに保存して使うことを想定しているのだろうか。LDAP の意味が薄れてしまっている。
なぜかパスワードを聞かれるし、検索できる時とできない時があり不安定だったが、サーバ側でパスワードが必要な設定に変更したら、安定して使えるようになった。
Outlook Express (★) 使い方は Thunderbird と同じとのこと。ただ、アンインストールしたのか、見つからなかったので未確認。まあいいか..。
追記(2007-10-20):
Thunderbird とだいたい同じだが、アドレス帳に検索用のフォルダを作れず、常に「人の検索」を行う必要があるため、さらに使い勝手が悪い。]]></description>
        </item>
        <item>
            <title><![CDATA[openldap コマンドメモ]]></title>
            <link>https://masutaka.net/2007-10-15-1/</link>
            <guid>https://masutaka.net/2007-10-15-1/</guid>
            <pubDate>Mon, 15 Oct 2007 00:00:00 GMT</pubDate>
            <description><![CDATA[コマンドだけメモしておく。*.ldif の中身は省略。
ルートノードを読み込ませ、サーバを起動する。
# slapadd -v -l /tmp/top.ldif # /etc/init.d/slapd start ldapsearch コマンドで「-h ldap」や「-b &ldquo;dc=masutaka,dc=com&rdquo;」を指定せずにすむようにする。
/usr/local/etc/openldap/ldap.conf に以下を追加。
HOST	ldap BASE	dc=masutaka,dc=com 検索が出来るか確認する。
% ldapsearch &#34;(objectClass=*)&#34; ユーザの追加
% ldapmodify -D &#34;cn=Manager,dc=masutaka,dc=com&#34; -w secret -x -a -f /tmp/users.ldif ユーザの編集
% ldapmodify -D &#34;cn=Manager,dc=masutaka,dc=com&#34; -w secret -x -v -f /tmp/update.ldif RDN のリネーム(Jerry Carter -&gt; Gerry Carter)
% ldapmodrdn -D &#34;cn=Manager,dc=masutaka,dc=com&#34; -w secret -x -v &#34;cn=Jerry Carter,ou=people,dc=masutaka,dc=com&#34; &#34;cn=Gerry Carter&#34; ユーザ masutaka の削除
% ldapdelete -D &#34;cn=Manager,dc=masutaka,dc=com&#34; -w secret -x -v &#34;uid=masutaka,ou=people,dc=masutaka,dc=com&#34; people ツリーごと削除]]></description>
        </item>
        <item>
            <title><![CDATA[蔵書管理]]></title>
            <link>https://masutaka.net/2007-10-09-1/</link>
            <guid>https://masutaka.net/2007-10-09-1/</guid>
            <pubDate>Tue, 09 Oct 2007 00:00:00 GMT</pubDate>
            <description><![CDATA[つい最近から、気になるものと気になっていたものをこの Changelog メモ
に書いてきたが、アマゾンのウィッシュリストのほうが便利なのではと思
い、始めてみた。そうしたら、気になる本が芋づる式に出てくる出てく
る&hellip;。ChangeLog メモに書くのは止めました。なんか、家にある本も全部
登録したくなってきたなあ。orz]]></description>
        </item>
        <item>
            <title><![CDATA[愛のペアプログラミング]]></title>
            <link>https://masutaka.net/2007-10-04-1/</link>
            <guid>https://masutaka.net/2007-10-04-1/</guid>
            <pubDate>Thu, 04 Oct 2007 00:00:00 GMT</pubDate>
            <description><![CDATA[URL: http://www.web-career.com/suc26.html ここに出てくる大場さんという方が、ImageMagick を使って Meadow で画像を
表示できるようにしたんだって。へぇ〜。
それにしても、「Emacs を使わないと家庭の危機」とか「自宅でペアプログラ
ミング」とか、とてもアレゲなキーワードが散りばめられているなあ&hellip;。(^^;
ちなみに、「第２回」の歌代和正さんは、かの有名な jcode.pl を開発された方。
Mew の作者、かずさんの会社(IIJ)の先輩にあたるみたい。
なんか、JRuby の話題がたくさん出てると思ったら、大場さんは JRuby の
国際化対応に携わっているとのこと。つーか私、大場さんのブログ購読してました&hellip;。
(URL: 暮らしの業 )
追記(2014-05-12):
http://web-engineer.buyuden.net/interview/oba/ に移動した模様。]]></description>
        </item>
        <item>
            <title><![CDATA[windows.el]]></title>
            <link>https://masutaka.net/2007-10-03-1/</link>
            <guid>https://masutaka.net/2007-10-03-1/</guid>
            <pubDate>Wed, 03 Oct 2007 00:00:00 GMT</pubDate>
            <description><![CDATA[基本的に Emacs は 1 日 1 回だけしか立ち上げないで、必要になればフレーム
を作る(C-x 5 2)という使い方をしている。Solaris 上で直接 Emacs を起動し
ていた時は気にならなかったが、Xming を使うようになってから、フレームが
邪魔になってきたので、windows.el を試してみることにした。
本来はフレームごとに好みのウィンドウ分割形態を複数持ち、ショートカット
キーでそれらを切り替えながら Emacs を使用できるというツールだが、ウィン
ドウ単位でもそれが出来るとのこと。(1 つのフレームに仮想フレームをいくつ
も持つような感じ。screen と同じですね。)
~/.emacs.el に以下を設定した。しばらく使ってみるか。
;; キー操作 &#34;C-c 数字&#34; は使わない。 (setq win:quick-selection nil)  ;; プレフィックスキーは C-z (setq win:switch-prefix &#34;\C-z&#34;)  ;; フレームは使わない。 (setq win:use-frame nil)  (require &#39;windows) (win:startup-with-window) フレームを 1 つ持つだけで済むので、デスクトップが散らからなくて良い感じ。
ターミナルは TeraTerm を使っているが、screen を起動しているので、こちら
も 1 つ起動しておくだけで良い。うーん、素晴らしい。]]></description>
        </item>
        <item>
            <title><![CDATA[似たようなことが書かれているサイト]]></title>
            <link>https://masutaka.net/2007-10-01-2/</link>
            <guid>https://masutaka.net/2007-10-01-2/</guid>
            <pubDate>Mon, 01 Oct 2007 01:00:00 GMT</pubDate>
            <description><![CDATA[うちと同じように chalow を使っていて、内容も被っているサイトを発見した。
URL: http://sonic64.com/ [2007-10-01-1] の ntp についても書いてあるし、Apache や unix などアレゲな話題が多くあった。]]></description>
        </item>
        <item>
            <title><![CDATA[127.127.1.0 っていう時刻サーバ]]></title>
            <link>https://masutaka.net/2007-10-01-1/</link>
            <guid>https://masutaka.net/2007-10-01-1/</guid>
            <pubDate>Mon, 01 Oct 2007 00:00:00 GMT</pubDate>
            <description><![CDATA[127.127.t.u (t:クロックタイプを表す整数, u:クロックタイプ固有の番号) と
いうアドレスは、参照時間アドレスと呼ばれる時間を取得するデバイスを指定
するための NTP 独自の表現で、127.127.1.0 を指定すると内蔵クロックから
時間を取得することになります。
URL: http://www.dadd9.com/tech/networkadmin_03.html どのサーバとも同期できない時は、内蔵クロックを使用するようにするのが
一般的な設定方法らしい。]]></description>
        </item>
        <item>
            <title><![CDATA[休みの日にやろうと思って忘れてしまう]]></title>
            <link>https://masutaka.net/2007-09-26-3/</link>
            <guid>https://masutaka.net/2007-09-26-3/</guid>
            <pubDate>Wed, 26 Sep 2007 02:00:00 GMT</pubDate>
            <description><![CDATA[ネットで、ホワイトボードに書いておくとよいという意見があった。
今度の休みの日はホワイトボードを買いにいこう。忘れそうだけど。w
追記(2007-10-21):
携帯のメモ帳が意外に使えることが分かった。だいたいいつでも持ってい
るから、いつでもメモができる。紙のメモ帳とうまく併用しよう。]]></description>
        </item>
        <item>
            <title><![CDATA[画像]]></title>
            <link>https://masutaka.net/2007-09-26-2/</link>
            <guid>https://masutaka.net/2007-09-26-2/</guid>
            <pubDate>Wed, 26 Sep 2007 01:00:00 GMT</pubDate>
            <description><![CDATA[今まで画像はアップしていませんでしたが、chalow 的には表示できます。
↓こんな感じに書きます。
[[テスト画像|image/2001-11-20-23-19-44.s.jpg]] ダワさんの画像をそのまま使おうとしたら、画面いっぱいに表示されて焦りました&hellip;。＞vivaさん]]></description>
        </item>
        <item>
            <title><![CDATA[Apacheの環境変数]]></title>
            <link>https://masutaka.net/2007-09-26-1/</link>
            <guid>https://masutaka.net/2007-09-26-1/</guid>
            <pubDate>Wed, 26 Sep 2007 00:00:00 GMT</pubDate>
            <description><![CDATA[Apache には printenv という cgi スクリプトが同封されている。
これを Web 経由で実行することにより、cgi から参照できる環境変数が分かる。
例えば、HTTP_USER_AGENT を参照すると、現在どんな Web ブラウザでアクセス
されているのかが分かるというわけ。
URL: http://hpcgi2.nifty.com/chronicle/printenv RIP スケジュールで、REMOTE_HOST を参照している箇所があるが、
REMOTE_ADDR に変更した。負荷を避けるため HostnameLookups を ON にしていないが、
これにより常に REMOTE_HOST が空っぽなため。細かいヤツだなあ。＞オレ]]></description>
        </item>
        <item>
            <title><![CDATA[めぐりズム蒸気でホットアイマスク]]></title>
            <link>https://masutaka.net/2007-09-21-1/</link>
            <guid>https://masutaka.net/2007-09-21-1/</guid>
            <pubDate>Fri, 21 Sep 2007 00:00:00 GMT</pubDate>
            <description><![CDATA[以前 GIGAZINE で、花王が蒸しタオルを使うと酷使した目の疲れが取れること
を実証したということが取り上げられていたが、その花王が蒸気で目を気持ち
良く温める新製品「めぐりズム蒸気でホットアイマスク」を発売するそう。
ここ数年、視力がどんどん悪くなっているので、気になる&hellip;。
URL: http://gigazine.net/index.php?/news/comments/20070921_eye_mask/ 追記(2007-10-21):
近所のカツマタで買ってきた。一回やってみたけど、結構いいかも。目の
疲れが取れたような気がしました。(注: 蒸気は目に見えません。)]]></description>
        </item>
        <item>
            <title><![CDATA[tdiary のテーマを使う]]></title>
            <link>https://masutaka.net/2007-09-17-4/</link>
            <guid>https://masutaka.net/2007-09-17-4/</guid>
            <pubDate>Mon, 17 Sep 2007 03:00:00 GMT</pubDate>
            <description><![CDATA[tdiary のテーマを使うと左側のサイドメニューがページの一番下に行って
しまうので、使っていなかった。
clover テーマについてくる clover.css の先頭に以下を追記して、
@import &#34;../../diary.css&#34;; @import &#34;clfix.css&#34;; clover.css と同じディレクトリに clfix.css を置く。
clover.css 以外も同じようにやればうまくいくと思う。
h1 { border-color: #3faf43; } h2 { background-color: #fff; } h3 { color: #3faf43; font-weight: bold; } .clitemheader { color: #000; background-color: #fff; } .funcbox { border:solid 1px #cfd; background-color: #cfd; } .stdbox td { border: solid 1px #cfd; background-color: #cfd; } div.body pre { font-size: 90%; } #links { border-style: solid; background-color: #cfd; border-color: #3faf43; border-width: 1px; left:5px; width: 225px; } #linksright { position:relative; border-style: solid; background-color: #cfd; border-color: #3faf43; border-width: 1px; top:-8em; left:5px; width: 225px; } URL: http://www.]]></description>
        </item>
        <item>
            <title><![CDATA[Perl でメールを SMTP 送信する]]></title>
            <link>https://masutaka.net/2007-09-17-3/</link>
            <guid>https://masutaka.net/2007-09-17-3/</guid>
            <pubDate>Mon, 17 Sep 2007 02:00:00 GMT</pubDate>
            <description><![CDATA[perl から ローカルの sendmail を呼んでメール送信すると、場合によっては相手のメールサーバに
弾かれる場合があるので、今後は SMTP で送信した方が良いかもしれない。
URL: http://tech.bayashi.net/pdmemo/sendmailbyperl.html ]]></description>
        </item>
        <item>
            <title><![CDATA[Amazon プラグイン]]></title>
            <link>https://masutaka.net/2007-09-17-2/</link>
            <guid>https://masutaka.net/2007-09-17-2/</guid>
            <pubDate>Mon, 17 Sep 2007 01:00:00 GMT</pubDate>
            <description><![CDATA[例えば
{{amazon('4873112885', 'BINARY HACKS')}}
と書くと、↓このような amazon へのリンクになる。
BINARY HACKS amazon() は cl.conf に定義されている。$AID はアマゾンアソシエイトに
登録すると発行されるので、各自変更する必要がある。]]></description>
        </item>
        <item>
            <title><![CDATA[高林哲氏のコラム]]></title>
            <link>https://masutaka.net/2007-09-17-1/</link>
            <guid>https://masutaka.net/2007-09-17-1/</guid>
            <pubDate>Mon, 17 Sep 2007 00:00:00 GMT</pubDate>
            <description><![CDATA[|プログラミングとバッドノウハウをテーマにした「いやなブログ」の
|高林哲氏が、プログラミングに関する 雑多なあれこれを、徒然に
|書き綴ります。「ブログよりはちょっとまじめなことを書く予定」です。
だそうです。なかなか面白い。http://gihyo.jp/dev/serial/01/scene]]></description>
        </item>
        <item>
            <title><![CDATA[カーソルとマウスポインタが重なる場合、マウスポインタを消す。]]></title>
            <link>https://masutaka.net/2007-09-13-1/</link>
            <guid>https://masutaka.net/2007-09-13-1/</guid>
            <pubDate>Thu, 13 Sep 2007 00:00:00 GMT</pubDate>
            <description><![CDATA[実際には邪魔にならないような場所にマウスポインタを飛ばすだけ。でもなかなか良いよ。
ただし -nw で起動した時はさすがに動いてくれない。以下を ~/.emacs.el に追加した。
(if (eq window-system &#39;x)  (mouse-avoidance-mode &#39;animate)) 重なっている時に何か文字を打つと、マウスポインタがひょこひょこと逃げていく。
animate 以外にも banish, exile, jump などいろいろあるみたい。
詳しくは M-x describe-function [Enter] mouse-avoidance-mode [Enter] 見るべし。
Meadow だと、以下の設定で本当に消せる。
(setq w32-hide-mouse-on-key t) (setq w32-hide-mouse-timeout 5000) ]]></description>
        </item>
        <item>
            <title><![CDATA[文字列の検索]]></title>
            <link>https://masutaka.net/2007-09-06-1/</link>
            <guid>https://masutaka.net/2007-09-06-1/</guid>
            <pubDate>Thu, 06 Sep 2007 00:00:00 GMT</pubDate>
            <description><![CDATA[今まで、ある変数にある文字列が含まれているかを検索する場合、
grep を使うなんてなんだか大げさだなあと感じていた件について。
|if echo $BAR | grep &ldquo;hoge&rdquo; &gt; /dev/null; then
|	&hellip;
|fi
などと書いていたが、正規表現を用いない検索の場合は fgrep を使うのが良い
とのこと。内部の検索アルゴリズムが異なるので、スピードが早くなるそう。へえ〜
まあ、case 文使うって手もあるけどね。]]></description>
        </item>
        <item>
            <title><![CDATA[Xming]]></title>
            <link>https://masutaka.net/2007-08-06-1/</link>
            <guid>https://masutaka.net/2007-08-06-1/</guid>
            <pubDate>Mon, 06 Aug 2007 00:00:00 GMT</pubDate>
            <description><![CDATA[開発環境が PC になり、メールだけのために WS を使うのも効率が悪くなって
きたので、Xming を使うことにしてみた。Xming とは Windows で動く X サー
バとのこと。Tera Term で適当な WS にログインして、環境変数 DISPLAY を
PC 側に設定し、Emacs を起動すると、Windows 側に窓がポコっと出るように
なる。
機種依存文字が表示できなかったが、JISX0213 フォントを使うようにしたら表
示できるようになった。Meadow に日本語のコピペがうまくいかないのはなんと
かしたいなあ。秀丸や FireFox を経由すれば出来るんだけどね。]]></description>
        </item>
        <item>
            <title><![CDATA[重複メール]]></title>
            <link>https://masutaka.net/2007-07-31-1/</link>
            <guid>https://masutaka.net/2007-07-31-1/</guid>
            <pubDate>Tue, 31 Jul 2007 00:00:00 GMT</pubDate>
            <description><![CDATA[To: masutaka.net@gmail.com Cc: 加入しているメーリングリスト
という宛先でメールが来ると、同じメールが 2 通来てしまう。
procmail 付属の formail を使えば Message-ID が同じメールを削除してくれる。詳細は割愛。
でも削除は怖いから、どこかのディレクトリに待避したいなあ。Notes のメールは Message-ID が重複しているし&hellip;。
あとは、メール本文が同じかどうかでも判断するようにしたい。MD5 でハッシュを計算すれば、負荷は少ないはず。]]></description>
        </item>
        <item>
            <title><![CDATA[aa]]></title>
            <link>https://masutaka.net/2007-07-03-1/</link>
            <guid>https://masutaka.net/2007-07-03-1/</guid>
            <pubDate>Tue, 03 Jul 2007 00:00:00 GMT</pubDate>
            <description><![CDATA[アスキーアートを表示するための chalow プラグインなんだって。
{{aa(&#39;TEXT&#39;)}} と書くと、アスキーアートをこのようにプロポーショナルフォントで表示してくれる。
∩＿＿＿∩
| ノ　ヽ
/　●　● |　クマ──！！
|　( _●_)　ミ
彡､　|∪|　､｀＼
/　＿＿　ヽノ　/´&gt;　)
(＿＿＿）　/　(_／
|　/
|　／＼　＼
|　/　)　)
∪　（　＼
＼＿)
 ちなみに、このプラグインを使わないとこうなる。
　∩＿＿＿∩
| ノ　ヽ
/　●　● |　クマ──！！
|　( ●)　ミ
彡､　|∪|　､｀＼
/　＿＿　ヽノ　/´&gt;　)
(＿＿＿）　/　(_／
|　/]]></description>
        </item>
        <item>
            <title><![CDATA[chalow を始めた。]]></title>
            <link>https://masutaka.net/2007-07-01-1/</link>
            <guid>https://masutaka.net/2007-07-01-1/</guid>
            <pubDate>Sun, 01 Jul 2007 00:00:00 GMT</pubDate>
            <description><![CDATA[chalow(URL: http://chalow.org/ ) というツールを使うと、
この Changelogメモを Web ページに変換できることが分かった。
  clmemo(のデフォルトの設定) では &ldquo;(&rdquo; と &ldquo;)&rdquo; で囲われたものがカテゴリと
して扱われるが、chalow では &ldquo;[&rdquo; と &ldquo;]&rdquo; という違いがある。
  一応、以下のスクリプトで &ldquo;(カテゴリ)&rdquo; から &ldquo;[カテゴリ]&rdquo; への変換を行
うことは出来たが、そもそも clmemo と chalow とでは、お題やカテゴリの
考え方がだいぶ違うみたい。変換しても意味が無いので、カテゴリ分けをす
るのは今日からにしよう。
  #!/usr/bin/ruby ifile = File.open(&#34;/home/masutaka/clmemo.txt&#34;, &#34;r&#34;) ofile = File.open(&#34;/home/masutaka/tmp/clmemo2.txt&#34;, &#34;w&#34;) while line = ifile.gets if /^\t\* .+\(/ =~ line line_array = line.split(&#34;:&#34;) head = line_array[0] line_array.shift body = line_array.join head = head.]]></description>
        </item>
        <item>
            <title><![CDATA[プロクシサーバ]]></title>
            <link>https://masutaka.net/2007-06-23-1/</link>
            <guid>https://masutaka.net/2007-06-23-1/</guid>
            <pubDate>Sat, 23 Jun 2007 00:00:00 GMT</pubDate>
            <description><![CDATA[squid ってのがあるらしい。]]></description>
        </item>
        <item>
            <title><![CDATA[指定した *.el をロードしたファイルが分かる。]]></title>
            <link>https://masutaka.net/2007-06-10-1/</link>
            <guid>https://masutaka.net/2007-06-10-1/</guid>
            <pubDate>Sun, 10 Jun 2007 00:00:00 GMT</pubDate>
            <description><![CDATA[(require &#39;loadhist) (file-dependents (feature-file &#39;cl)) ]]></description>
        </item>
        <item>
            <title><![CDATA[replace-regexp で行頭に行番号挿入]]></title>
            <link>https://masutaka.net/2007-05-29-1/</link>
            <guid>https://masutaka.net/2007-05-29-1/</guid>
            <pubDate>Tue, 29 May 2007 00:00:00 GMT</pubDate>
            <description><![CDATA[M-C-% ^ [Return] ,(+ 1 #) [Return]
5 から始めたい場合は 1 を 5 に変えれば OK
もちろん、replace-regexp でも OK
URL: http://steve-yegge.blogspot.com/2006/06/shiny-and-new-emacs-22.html ]]></description>
        </item>
        <item>
            <title><![CDATA[izonmoji-mode.elのその後]]></title>
            <link>https://masutaka.net/2007-05-12-1/</link>
            <guid>https://masutaka.net/2007-05-12-1/</guid>
            <pubDate>Sat, 12 May 2007 00:00:00 GMT</pubDate>
            <description><![CDATA[[2007-04-25-1] の改善
jisx0213 bdf フォントをインストールしたら、機種依存文字を
14point で表示できるようになった。というわけで xfonts-kappa20 は削除。
IPA モナーフォントは TrueType だったので、よくわからなかった。]]></description>
        </item>
        <item>
            <title><![CDATA[Anthy のリリース時のポリシー]]></title>
            <link>https://masutaka.net/2007-05-09-1/</link>
            <guid>https://masutaka.net/2007-05-09-1/</guid>
            <pubDate>Wed, 09 May 2007 00:00:00 GMT</pubDate>
            <description><![CDATA[下 2 桁が 00 なのが安定版]]></description>
        </item>
        <item>
            <title><![CDATA[一応取っておくURL]]></title>
            <link>https://masutaka.net/2007-04-29-2/</link>
            <guid>https://masutaka.net/2007-04-29-2/</guid>
            <pubDate>Sun, 29 Apr 2007 01:00:00 GMT</pubDate>
            <description><![CDATA[Solaris Links
Solaris Package Archive
URL: http://www.ibiblio.org/pub/packages/solaris/sparc/ BLUECOARA.NET
URL: http://solaris.bluecoara.net/ Solaris 2 Frequently Asked Questions
URL: http://sdc.sun.co.jp/solaris/solaris2-faq/index.html Solaris8へインストールする基本フリーソフト一覧
URL: http://www2.ocn.ne.jp/~virii/sol8/freesoft-lst.html バージョン管理システム CVS を使う
URL: http://radiofly.to/nishi/cvs/ WELLCOME TO EARLY WARNING SYSTEM!!
URL: http://www.oratorio-tangram.com/ ]]></description>
        </item>
        <item>
            <title><![CDATA[UIM を GNOME パネルに追加する方法]]></title>
            <link>https://masutaka.net/2007-04-29-1/</link>
            <guid>https://masutaka.net/2007-04-29-1/</guid>
            <pubDate>Sun, 29 Apr 2007 00:00:00 GMT</pubDate>
            <description><![CDATA[一旦ログアウトする必要あり。
cd /usr/lib/bonobo/servers ln -s /usr/local/lib/bonobo/servers/GNOME_UimApplet.server ]]></description>
        </item>
        <item>
            <title><![CDATA[type]]></title>
            <link>https://masutaka.net/2007-04-28-1/</link>
            <guid>https://masutaka.net/2007-04-28-1/</guid>
            <pubDate>Sat, 28 Apr 2007 00:00:00 GMT</pubDate>
            <description><![CDATA[which より type を使った方が良いとどこかに書いてあったような気がする。]]></description>
        </item>
        <item>
            <title><![CDATA[izonmoji-mode.el]]></title>
            <link>https://masutaka.net/2007-04-25-1/</link>
            <guid>https://masutaka.net/2007-04-25-1/</guid>
            <pubDate>Wed, 25 Apr 2007 00:00:00 GMT</pubDate>
            <description><![CDATA[xfonts-kappa20 をインストールしないと、izonmoji-mode で表示できなかった。
mona-font に手動で切替えてしまえば表示できるのに。。。
それにしても、20+bold はデカイ。。。]]></description>
        </item>
        <item>
            <title><![CDATA[openldap のインストール方法]]></title>
            <link>https://masutaka.net/2007-04-15-1/</link>
            <guid>https://masutaka.net/2007-04-15-1/</guid>
            <pubDate>Sun, 15 Apr 2007 00:00:00 GMT</pubDate>
            <description><![CDATA[apt-get install slapd ldap-utils libsasl2-modules ]]></description>
        </item>
        <item>
            <title><![CDATA[ランレベルまとめ]]></title>
            <link>https://masutaka.net/2007-04-05-1/</link>
            <guid>https://masutaka.net/2007-04-05-1/</guid>
            <pubDate>Thu, 05 Apr 2007 00:00:00 GMT</pubDate>
            <description><![CDATA[ランレベルは処理系によってかなり違いがある。
|(Solaris)
|0	PROM モニタモードへ移行(ここで power-off を実行すると電源が落ちる)
|1orS	シングルユーザモード(1 の場合はシステム管理者のみ LOGON 可能)
|2	マルチユーザーモード(クライアントとして動作ができる)
|3	マルチユーザーモード(サーバーとして動作できる：標準値)
|4	使われていない
|5	電源 OFF
|6	再起動
|
|(Debian GNU/Linux)
|0	停止
|1	シングルユーザーモード（rootのみ）
|2	マルチユーザーモード
|3	2 と同じ
|4	2 と同じ
|5	2 と同じ
|6	再起動
|
|(RedHat 系 Linux)
|0	停止
|1	シングルユーザーモード（rootのみ）
|2	ネットワークなしのマルチユーザーモード
|3	テキストログインによるマルチユーザーモード
|4	使われていない
|5	グラフィカルログインによるマルチユーザーモード
|6	再起動
|
|現在のランレベルを確認するにはコマンド /sbin/runlevel で確認可能。
|起動時のrunlevelを変更したい場合には /etc/inittab の
|id:3:initdefault:
|の部分を]]></description>
        </item>
        <item>
            <title><![CDATA[vim のキーバインド]]></title>
            <link>https://masutaka.net/2007-03-25-1/</link>
            <guid>https://masutaka.net/2007-03-25-1/</guid>
            <pubDate>Sun, 25 Mar 2007 00:00:00 GMT</pubDate>
            <description><![CDATA[設定ファイルは ~/.exrc になる。
vi にはないキーバインドがいくつかあると思う。
         k 上へ移動   j 下へ移動   h 左へ移動   l 右へ移動   w 単語毎に右移動   W wよりももう少し大きめに右移動。   b 単語毎に左移動   B bよりももう少し大きめに左移動。   0 行の先頭へ移動   $ 行の終端へ移動   1G ファイルの先頭へ移動(1を50とかにすると、50行目に飛ぶ。)   G ファイルの終端へ移動   H 画面の上端に移動   M 画面の真ん中に移動   H 画面の下端に移動   z[RET] 現在行が画面の一番上に来るように画面を書き換える。(50z[RET]で&hellip;)   z.]]></description>
        </item>
        <item>
            <title><![CDATA[PIXUS 560i で印刷]]></title>
            <link>https://masutaka.net/2007-03-17-2/</link>
            <guid>https://masutaka.net/2007-03-17-2/</guid>
            <pubDate>Sat, 17 Mar 2007 01:00:00 GMT</pubDate>
            <description><![CDATA[/etc/apt/sources.listに次の行を追加。
 deb http://mambo.kuhp.kyoto-u.ac.jp/~takushi/debian ./
 プリンタドライバを取得。
 apt-get update apt-get install libcnbj-2.4 bjfilter-2.4 pstocanonbj  CUPS もインストールされ、http://127.0.0.1:631/ 経由で CUPS の設定が
出来るようだ。ただし、USB 経由の印刷の方法しか分からなかった。
結局 USB での印刷も試さず、この作業はペンディングとする。。
URL: http://debian.fam.cx/index.php?stable#s2fbf829 URL: http://mambo.kuhp.kyoto-u.ac.jp/~takushi/japanese.html ]]></description>
        </item>
        <item>
            <title><![CDATA[acroread7 で日本語を表示]]></title>
            <link>https://masutaka.net/2007-03-17-1/</link>
            <guid>https://masutaka.net/2007-03-17-1/</guid>
            <pubDate>Sat, 17 Mar 2007 00:00:00 GMT</pubDate>
            <description><![CDATA[下記の場所から acroread-japanesefont_7.0.0-0_i386.deb を取得。
URL: http://debian.fam.cx/index.php?uploader dpkg -i acroread-japanesefont_7.0.0-0_i386.deb でインストール完了。日本語が見えるようになった。]]></description>
        </item>
        <item>
            <title><![CDATA[awk の短いスクリプトがあった。結構使えそう。]]></title>
            <link>https://masutaka.net/2007-03-13-1/</link>
            <guid>https://masutaka.net/2007-03-13-1/</guid>
            <pubDate>Tue, 13 Mar 2007 00:00:00 GMT</pubDate>
            <description><![CDATA[http://takeno.iee.niit.ac.jp/~shige/misc/script/awk-mini.html ]]></description>
        </item>
        <item>
            <title><![CDATA[gconf-editor でアプリにキーを割り当てられる。]]></title>
            <link>https://masutaka.net/2007-03-11-3/</link>
            <guid>https://masutaka.net/2007-03-11-3/</guid>
            <pubDate>Sun, 11 Mar 2007 02:00:00 GMT</pubDate>
            <description><![CDATA[/apps/metacity/global_keybindings =&gt; run_command_1 =&gt; F4
/apps/metacity/keybinding_commands =&gt; command_1 =&gt; krxvt]]></description>
        </item>
        <item>
            <title><![CDATA[NAS のフォルダを Linux からマウント]]></title>
            <link>https://masutaka.net/2007-03-11-2/</link>
            <guid>https://masutaka.net/2007-03-11-2/</guid>
            <pubDate>Sun, 11 Mar 2007 01:00:00 GMT</pubDate>
            <description><![CDATA[smbfs パッケージが必要。後は /etc/fstab に書くだけ。
//nas1/info /mnt/nas1/info smbfs username=masutaka,password=XXXXXXXX,iocharset=euc-jp,codepage=cp932 0 0 //nas1/share /mnt/nas1/share smbfs username=masutaka,password=XXXXXXXX,iocharset=euc-jp,codepage=cp932,uid=1000,gid=1000 0 0 automount を使った NAS のマウント → [2007-10-27-1] ]]></description>
        </item>
        <item>
            <title><![CDATA[gdm の日本語表示]]></title>
            <link>https://masutaka.net/2007-03-11-1/</link>
            <guid>https://masutaka.net/2007-03-11-1/</guid>
            <pubDate>Sun, 11 Mar 2007 00:00:00 GMT</pubDate>
            <description><![CDATA[/etc/default/gdmというファイルに
LANG=ja_JP.EUC-JP
と書いておくと日本語表示になる。]]></description>
        </item>
        <item>
            <title><![CDATA[一番早いミラーサーバを探して /etc/apt/sources.list を書き換えてくれる。]]></title>
            <link>https://masutaka.net/2007-03-10-1/</link>
            <guid>https://masutaka.net/2007-03-10-1/</guid>
            <pubDate>Sat, 10 Mar 2007 00:00:00 GMT</pubDate>
            <description><![CDATA[apt-spy -s jp -d sarge ]]></description>
        </item>
        <item>
            <title><![CDATA[vnc -- UNIX から Windows を操作する]]></title>
            <link>https://masutaka.net/2007-03-02-2/</link>
            <guid>https://masutaka.net/2007-03-02-2/</guid>
            <pubDate>Fri, 02 Mar 2007 01:00:00 GMT</pubDate>
            <description><![CDATA[[2003-01-31-2] に知ってから、ようやく使えたよ。
|1. Windows に RealVNC 日本語版をインストールした。
| http://underdone.net/blog/sb.cgi?cid=30 |2. FireWall の設定で、ポート 5900 を開けた。
|3. Debian に vncviewer をインストールした。
| # apt-get install xvnc4viewer
|4. Linux から下記を実行するだけ。
| % vncview -FullScreen Windowsマシンの名前
|5. フルスクリーンを解除したい時は、F8 キーを押せば良い。]]></description>
        </item>
        <item>
            <title><![CDATA[ldd ではなく、cygcheck を使う。]]></title>
            <link>https://masutaka.net/2007-03-02-1/</link>
            <guid>https://masutaka.net/2007-03-02-1/</guid>
            <pubDate>Fri, 02 Mar 2007 00:00:00 GMT</pubDate>
            <description><![CDATA[引数はファイルではなくプログラム名であることに注意。]]></description>
        </item>
        <item>
            <title><![CDATA[gdb で SIG32 シグナルが出たら？]]></title>
            <link>https://masutaka.net/2007-02-05-1/</link>
            <guid>https://masutaka.net/2007-02-05-1/</guid>
            <pubDate>Mon, 05 Feb 2007 00:00:00 GMT</pubDate>
            <description><![CDATA[(gdb) handle SIG32 noprin]]></description>
        </item>
        <item>
            <title><![CDATA[ssh で本当にパスワードを聞かれなくなる。]]></title>
            <link>https://masutaka.net/2007-01-27-1/</link>
            <guid>https://masutaka.net/2007-01-27-1/</guid>
            <pubDate>Sat, 27 Jan 2007 00:00:00 GMT</pubDate>
            <description><![CDATA[[2003-09-23-1] の改良版。SSH protocol version 2 の場合。
 DSA キーを生成します。   local% ssh-keygen -t dsa
※ 出力するファイル名、パスフレーズの入力を求められますが、何も入力
せずに全てEnteyキーを押下して下さい。
 公開キーをリモートホストにコピーします。   local% scp ~/.ssh/id_dsa.pub name@remort:
 リモートホストにログインし、authorized_keys2 ファイルを生成します。   local% ssh name@remort
remort% chmod go-w .
remort% mkdir .ssh
remort% chmod 700 .ssh
remort% chmod g+s .ssh
remort% cd .ssh
remort% touch authorized_keys2
remort% chmod 600 authorized_keys2
remort% cat ~/id_dsa.pub &raquo; authorized_keys2
remort% rm ~/id_dsa.pub
 設定完了です。動作を確認します。   remort% logout]]></description>
        </item>
        <item>
            <title><![CDATA[設定ファイルの読み込み順番]]></title>
            <link>https://masutaka.net/2007-01-22-1/</link>
            <guid>https://masutaka.net/2007-01-22-1/</guid>
            <pubDate>Mon, 22 Jan 2007 00:00:00 GMT</pubDate>
            <description><![CDATA[ログインシェルとして起動: .zshenv -&gt; .zprofile -&gt; .zshrc -&gt; .zlogin
インタラクティブシェルとして起動: .zshenv -&gt; .zshrc
シェルスクリプトとして起動: .zshenv
ログインシェルとして終了: .zlogout]]></description>
        </item>
        <item>
            <title><![CDATA[web site のちっちゃなアイコンを指定する。]]></title>
            <link>https://masutaka.net/2007-01-19-1/</link>
            <guid>https://masutaka.net/2007-01-19-1/</guid>
            <pubDate>Fri, 19 Jan 2007 00:00:00 GMT</pubDate>
            <description><![CDATA[&lt;LINK REL=&#34;SHORTCUT ICON&#34; HREF=&#34;favicon.ico&#34;&gt; or &lt;LINK REL=&#34;SHORTCUT ICON&#34; HREF=&#34;http://nais.to/favicon.ico&#34;&gt; ]]></description>
        </item>
        <item>
            <title><![CDATA[const の位置]]></title>
            <link>https://masutaka.net/2006-12-19-1/</link>
            <guid>https://masutaka.net/2006-12-19-1/</guid>
            <pubDate>Tue, 19 Dec 2006 00:00:00 GMT</pubDate>
            <description><![CDATA[(1) const int *p;
(2) int *const p;
(3) int const *p;
(1) は const int なので、*p が read only になる。
(2) は *const なので、p が read only になる。
(3) は (1) と同じ。]]></description>
        </item>
        <item>
            <title><![CDATA[起動方法の変更]]></title>
            <link>https://masutaka.net/2006-12-09-1/</link>
            <guid>https://masutaka.net/2006-12-09-1/</guid>
            <pubDate>Sat, 09 Dec 2006 00:00:00 GMT</pubDate>
            <description><![CDATA[/usr/dt/bin/dtconfig -d すると、次回から CUI で起動する。
/usr/dt/bin/dtconfig -e すると、次回から GUI で起動する。]]></description>
        </item>
        <item>
            <title><![CDATA[rebaseall]]></title>
            <link>https://masutaka.net/2006-11-18-1/</link>
            <guid>https://masutaka.net/2006-11-18-1/</guid>
            <pubDate>Sat, 18 Nov 2006 00:00:00 GMT</pubDate>
            <description><![CDATA[|zsh を起動すると、↓こんなメッセージが出てどうしようもなくなった。
|*** unable to remap &hellip;. to same address as parent(0xDF0000) != 0xE00000
|fork failed: resource temporarily unavailable
|ネットで調べたら、ファイル名を指定して実行→ash→rebaseallを
|実行すれば良いことが分かった。解決！
URL: http://d.hatena.ne.jp/Wacky/20050807 ]]></description>
        </item>
        <item>
            <title><![CDATA[労働基準法第91条（制裁規定の制限）]]></title>
            <link>https://masutaka.net/2006-11-04-1/</link>
            <guid>https://masutaka.net/2006-11-04-1/</guid>
            <pubDate>Sat, 04 Nov 2006 00:00:00 GMT</pubDate>
            <description><![CDATA[就業規則で、労働者に対して減給の制裁を定める場合においては、その減
給は、１回の額が平均賃金の１日分の半額を超え、総額が１賃金支払期に
おける賃金の総額の10分の１を超えてはならない。
→罰金制裁は１日の賃金の半額もしくは１月の給与の１割以内。
参考情報: http://roudousha.net/ ]]></description>
        </item>
        <item>
            <title><![CDATA[ハゲ対策]]></title>
            <link>https://masutaka.net/2006-10-22-2/</link>
            <guid>https://masutaka.net/2006-10-22-2/</guid>
            <pubDate>Sun, 22 Oct 2006 01:00:00 GMT</pubDate>
            <description><![CDATA[|自分も半年前フケ油脂で悩んでいて、一番よかったのが走って汗かいて、
|ストレスを減らし、カプサイシン取り、ビタミンC亜鉛のサプリを飲んで
|10時から2 時までに寝る。前より太く薄くなくなった]]></description>
        </item>
        <item>
            <title><![CDATA[YouTube]]></title>
            <link>https://masutaka.net/2006-10-22-1/</link>
            <guid>https://masutaka.net/2006-10-22-1/</guid>
            <pubDate>Sun, 22 Oct 2006 00:00:00 GMT</pubDate>
            <description><![CDATA[YOU TUBEの動画をダウソする方法ｗ5
|http://javimoya.com/blog/youtube_en.php
|or
|http://keepvid.com/
|
|ダウソしたい YOU TUBE の url をコピベして、上のサイトに行け。
|そして、そのurlを貼り付けて、横の選択で「YOU TUBE」にあわせ、
|さらに右側の「down load」をクリックしろ！！
|これで、お宝映像が手に入るってことだ！！]]></description>
        </item>
        <item>
            <title><![CDATA[/usr/bin、/usr/ucb、/usr/xpg4/bin]]></title>
            <link>https://masutaka.net/2006-10-12-1/</link>
            <guid>https://masutaka.net/2006-10-12-1/</guid>
            <pubDate>Thu, 12 Oct 2006 00:00:00 GMT</pubDate>
            <description><![CDATA[|Solaris では SystemV 系、BSD 系、POSIX 系と、3種類のコマンドが利用できる。
|それぞれ /usr/bin、/usr/ucb、/usr/xpg4/bin に収められている。
|
|SystemV :/usr/bin
|BSD :/usr/ucb
|POSIX :/usr/xpg4/bin
|
|デフォルトの設定では /usr/bin にあるコマンドが実行される。]]></description>
        </item>
        <item>
            <title><![CDATA[システムコールやシグナルをトレースできる。]]></title>
            <link>https://masutaka.net/2006-10-11-1/</link>
            <guid>https://masutaka.net/2006-10-11-1/</guid>
            <pubDate>Wed, 11 Oct 2006 00:00:00 GMT</pubDate>
            <description><![CDATA[スゴすぎ。下記は ls の実行結果をトレースしている。
Solaris % truss ls
Debian % strace ls]]></description>
        </item>
        <item>
            <title><![CDATA[Elisp から Emacs の使用メモリサイズを知る方法]]></title>
            <link>https://masutaka.net/2006-08-19-1/</link>
            <guid>https://masutaka.net/2006-08-19-1/</guid>
            <pubDate>Sat, 19 Aug 2006 00:00:00 GMT</pubDate>
            <description><![CDATA[Eval: (memory-use-counts)]]></description>
        </item>
        <item>
            <title><![CDATA[文字化け回避]]></title>
            <link>https://masutaka.net/2006-08-01-1/</link>
            <guid>https://masutaka.net/2006-08-01-1/</guid>
            <pubDate>Tue, 01 Aug 2006 00:00:00 GMT</pubDate>
            <description><![CDATA[smb.conf に以下を設定しないと日本語ファイル名が化ける。
dos charset = CP932 unix charset = EUCJP-MS display charset = LOCALE ]]></description>
        </item>
        <item>
            <title><![CDATA[生活]]></title>
            <link>https://masutaka.net/2006-07-30-1/</link>
            <guid>https://masutaka.net/2006-07-30-1/</guid>
            <pubDate>Sun, 30 Jul 2006 00:00:00 GMT</pubDate>
            <description><![CDATA[ステッパーを３０分踏んだ。布団を干して、何回か洗濯をした。ノクチのマル
イで、シャツ２枚とTシャツ１枚買ってきた。￥14,980なり。]]></description>
        </item>
        <item>
            <title><![CDATA[生活]]></title>
            <link>https://masutaka.net/2006-07-29-1/</link>
            <guid>https://masutaka.net/2006-07-29-1/</guid>
            <pubDate>Sat, 29 Jul 2006 00:00:00 GMT</pubDate>
            <description><![CDATA[ステッパーを３０分踏んで、シャワー浴びて、豆腐と納豆を食べた。]]></description>
        </item>
        <item>
            <title><![CDATA[新城]]></title>
            <link>https://masutaka.net/2006-07-24-2/</link>
            <guid>https://masutaka.net/2006-07-24-2/</guid>
            <pubDate>Mon, 24 Jul 2006 01:00:00 GMT</pubDate>
            <description><![CDATA[[2006-07-23-2] のつづき
昨日の西口商店街のお祭りはサンバだったらしい。数年前まではフロンターレ
の選手も参加していて、全体的にも盛り上がっていたらしいが、最近は踊り子
さん達の老朽化が目立つらしい。。。]]></description>
        </item>
        <item>
            <title><![CDATA[断水]]></title>
            <link>https://masutaka.net/2006-07-24-1/</link>
            <guid>https://masutaka.net/2006-07-24-1/</guid>
            <pubDate>Mon, 24 Jul 2006 00:00:00 GMT</pubDate>
            <description><![CDATA[今日は 22:00〜4:00 まで断水とのこと。ちょっとふざけてないか？次回もこの
時間だったら文句を言おう。]]></description>
        </item>
        <item>
            <title><![CDATA[新城買いもの]]></title>
            <link>https://masutaka.net/2006-07-23-2/</link>
            <guid>https://masutaka.net/2006-07-23-2/</guid>
            <pubDate>Sun, 23 Jul 2006 01:00:00 GMT</pubDate>
            <description><![CDATA[cosotoco にバジルを買いに行ったけど、GABAN のがなかった。全体的にあまり
品揃えがよくないように見える。西口商店街で何かお祭りをやっていた。]]></description>
        </item>
        <item>
            <title><![CDATA[日記作成]]></title>
            <link>https://masutaka.net/2006-07-23-1/</link>
            <guid>https://masutaka.net/2006-07-23-1/</guid>
            <pubDate>Sun, 23 Jul 2006 00:00:00 GMT</pubDate>
            <description><![CDATA[tdiary-mode は Debian 附属のものは古くて以下のエラーがでてしまう。
|HTTP fetch: Connection timeout!
ここ から、tdiary-contrib.tar.gz を落としてきて置き換えたら書き込めるよ
うになった。パッケージからは削除しておいた。
|# apt-get &ndash;purge remove tdiary-mode]]></description>
        </item>
        <item>
            <title><![CDATA[日記作成開始]]></title>
            <link>https://masutaka.net/2006-07-22-1/</link>
            <guid>https://masutaka.net/2006-07-22-1/</guid>
            <pubDate>Sat, 22 Jul 2006 00:00:00 GMT</pubDate>
            <description><![CDATA[Apache 立ち上げて、pukiwiki で日記を書いてみようと思った。
|# apt-get install apache2-mpm-prefork libapache2-mod-php4
pukiwiki は ~/public_html 以下に展開する必要があったので、ここ から
pukiwiki-1.4.7.tar.gz を落としてきた。でも、tdiary はどうだろうと
思い立ち、tdiary をインストールしてみた。
|# apt-get install tdiary tdiary-theme tdiary-plugin tdiary-mode
|% tdiary-setup symlink ~/public_html/diary
Apache のパーミッションでちょっと苦戦したが、何とか使えるようになった。
--- /etc/apache2/mods-enabled/userdir.conf.bak 2006-07-23 18:01:22.000000000 +0900 +++ /etc/apache2/mods-enabled/userdir.conf 2006-07-23 18:01:33.000000000 +0900 @@ -3,7 +3,8 @@ UserDir disabled root &lt;Directory /home/*/public_html&gt; - AllowOverride FileInfo AuthConfig Limit + AllowOverride FileInfo AuthConfig Limit Options Options MultiViews Indexes SymLinksIfOwnerMatch IncludesNoExec + DirectoryIndex index.html index.rb &lt;/Directory&gt; &lt;/IfModule&gt; --- /home/masutaka/public_html/diary/.]]></description>
        </item>
        <item>
            <title><![CDATA[Samba の設定ファイル等]]></title>
            <link>https://masutaka.net/2006-07-07-1/</link>
            <guid>https://masutaka.net/2006-07-07-1/</guid>
            <pubDate>Fri, 07 Jul 2006 00:00:00 GMT</pubDate>
            <description><![CDATA[/etc/samba/smb.conf が設定ファイル。
testparm で設定ファイルのチェックができる。
smbstatus で誰が今使っているかチェックできる。]]></description>
        </item>
        <item>
            <title><![CDATA[w32codecs, realplayer,... などがある場所]]></title>
            <link>https://masutaka.net/2006-06-27-1/</link>
            <guid>https://masutaka.net/2006-06-27-1/</guid>
            <pubDate>Tue, 27 Jun 2006 00:00:00 GMT</pubDate>
            <description><![CDATA[add to /etc/apt/sources.list deb http://www.debian-multimedia.org sarge main]]></description>
        </item>
        <item>
            <title><![CDATA[労働基準法第34条（休憩）]]></title>
            <link>https://masutaka.net/2006-06-05-1/</link>
            <guid>https://masutaka.net/2006-06-05-1/</guid>
            <pubDate>Mon, 05 Jun 2006 00:00:00 GMT</pubDate>
            <description><![CDATA[「使用者は、労働時間が６時間を超える場合においては少くとも45分、８
時間を超える場合においては少くとも１時間の休憩時間を労働時間の途中
に与えなければならない。」
参考情報: http://roudousha.net/ ]]></description>
        </item>
        <item>
            <title><![CDATA[このページは移転しました]]></title>
            <link>https://masutaka.net/2006-05-28-1/</link>
            <guid>https://masutaka.net/2006-05-28-1/</guid>
            <pubDate>Sun, 28 May 2006 00:00:00 GMT</pubDate>
            <description><![CDATA[&lt;html&gt; &lt;head&gt; &lt;meta http-equiv=&#34;Refresh&#34; CONTENT=&#34;5;URL=http://toal.jp/devilmaycry3/&#34;&gt; &lt;title&gt;このページは移転しました。&lt;/title&gt; &lt;/head&gt; &lt;body&gt; &lt;p&gt;このサイトは次の URL に移転しました。 &lt;br&gt;5秒後に新 URL に転送します。 &lt;br&gt;&lt;A HREF=&#34;http://toal.jp/devilmaycry3/&#34;&gt;http://toal.jp/devilmaycry3/&lt;/A&gt; &lt;/p&gt; &lt;br&gt; &lt;p&gt;自動的に飛ばない環境の方、早く進みたい方は上の URL をクリックしてくださいませ。 &lt;/p&gt; &lt;/body&gt; &lt;/html&gt; ]]></description>
        </item>
        <item>
            <title><![CDATA[データ型のサイズ]]></title>
            <link>https://masutaka.net/2006-05-25-1/</link>
            <guid>https://masutaka.net/2006-05-25-1/</guid>
            <pubDate>Thu, 25 May 2006 00:00:00 GMT</pubDate>
            <description><![CDATA[|char=1byte固定
|
|(整数型)
|short int &lt;= int &lt;= long int
|
|short int は short と記述可能
|long int は long と記述可能
|
|(実数型)
|float &lt;= double &lt;= long double
URL: http://www9.plala.or.jp/sgwr-t/c/sec13.html ]]></description>
        </item>
        <item>
            <title><![CDATA[lspci すると、どんなハードを使っているかわかる。]]></title>
            <link>https://masutaka.net/2006-04-23-1/</link>
            <guid>https://masutaka.net/2006-04-23-1/</guid>
            <pubDate>Sun, 23 Apr 2006 00:00:00 GMT</pubDate>
        </item>
        <item>
            <title><![CDATA[Apache あれこれ]]></title>
            <link>https://masutaka.net/2006-04-19-1/</link>
            <guid>https://masutaka.net/2006-04-19-1/</guid>
            <pubDate>Wed, 19 Apr 2006 00:00:00 GMT</pubDate>
            <description><![CDATA[再起動には「restart」と「graceful」の2種類があります。いずれも基本的に
プロセスの停止・再開を行います。主にhttpd.conf の設定を変更したいときに
用います。
% /usr/local/apache2/bin/apachectl configtest
と打てば、httpd.conf にミスがないかチェックしてくれる。]]></description>
        </item>
        <item>
            <title><![CDATA[特定のプロセスで開いているファイルを確認する]]></title>
            <link>https://masutaka.net/2006-03-16-1/</link>
            <guid>https://masutaka.net/2006-03-16-1/</guid>
            <pubDate>Thu, 16 Mar 2006 00:00:00 GMT</pubDate>
            <description><![CDATA[% lsof -p &lt;プロセスの pid&gt;
関連項目 =&gt; [2006-01-07-3] ]]></description>
        </item>
        <item>
            <title><![CDATA[英文の自動整形(C-u M-q)]]></title>
            <link>https://masutaka.net/2006-03-04-1/</link>
            <guid>https://masutaka.net/2006-03-04-1/</guid>
            <pubDate>Sat, 04 Mar 2006 00:00:00 GMT</pubDate>
            <description><![CDATA[M-q でカーソル下のパラグラフの整形が出来るが、英文の場合は右端が揃わな
いため不格好になる。そんな時は C-u M-q すると右端を揃えた整形を行なって
くれる。
■整形前 (3.1) If you want the Japanese info, type &#39;make install-jinfo&#39;. If you have the &#34;install-info&#34; command, the following line will be automatically added to the &#34;dir&#34; file. Otherwise, add it by yourself. ■整形後 (3.1) If you want the Japanese info, type &#39;make install-jinfo&#39;. If you have the &#34;install-info&#34; command, the following line will be automatically added to the &#34;dir&#34; file. Otherwise, add it by yourself.]]></description>
        </item>
        <item>
            <title><![CDATA[新城の歯医者]]></title>
            <link>https://masutaka.net/2006-02-28-1/</link>
            <guid>https://masutaka.net/2006-02-28-1/</guid>
            <pubDate>Tue, 28 Feb 2006 00:00:00 GMT</pubDate>
            <description><![CDATA[丹沢歯科、太田歯科、山崎歯科が評判いいみたい。]]></description>
        </item>
        <item>
            <title><![CDATA[tcsh -- cd hogehoge でのエラー日本語メッセージが化けないようにする]]></title>
            <link>https://masutaka.net/2006-01-19-2/</link>
            <guid>https://masutaka.net/2006-01-19-2/</guid>
            <pubDate>Thu, 19 Jan 2006 01:00:00 GMT</pubDate>
            <description><![CDATA[~/.cshrcにおいて
set dspmbyte=云々
man tcsh より]]></description>
        </item>
        <item>
            <title><![CDATA[set symlinks = ignore]]></title>
            <link>https://masutaka.net/2006-01-19-1/</link>
            <guid>https://masutaka.net/2006-01-19-1/</guid>
            <pubDate>Thu, 19 Jan 2006 00:00:00 GMT</pubDate>
            <description><![CDATA[tcsh でカレントディレクトリがシンボリックリンクを含むディレクトリになった時に、
実際のディレクトリに展開しない。
例えば /hogehoge/hugahuga は/net/WS名/hogehoge/hugahuga へのシンボリッ
クリンクなんだけどそれを意識しないようにしたい。zsh はデフォルトでそう
いう挙動。]]></description>
        </item>
        <item>
            <title><![CDATA[umount できない時]]></title>
            <link>https://masutaka.net/2006-01-07-3/</link>
            <guid>https://masutaka.net/2006-01-07-3/</guid>
            <pubDate>Sat, 07 Jan 2006 02:00:00 GMT</pubDate>
            <description><![CDATA[umountコマンドを実行したとき、誰かのカレントディレクトリがそのデバイス
上にあったり、ファイルをアクセスしている場合、次のようなメッセージが表
示され、アンマウントできない。
|umount: /mnt/nas1/share: device is busy
&lsquo;-f&rsquo; オプションで強制的に umount できる時もあるが、できない時ややりたく
ない時は、fuserコマンドで誰が使っているのかを確認してから、適切に対処す
れば良い。ただし、Solaris9 では -vm オプションは使えない。
|root# fuser -vm /mnt/nas1/share
| USER PID ACCESS COMMAND
|/mnt/nas1/share root 1344 f&hellip;. famd]]></description>
        </item>
        <item>
            <title><![CDATA[ネームサービス]]></title>
            <link>https://masutaka.net/2006-01-07-2/</link>
            <guid>https://masutaka.net/2006-01-07-2/</guid>
            <pubDate>Sat, 07 Jan 2006 01:00:00 GMT</pubDate>
            <description><![CDATA[/etc/nsswitch.conf に、使用するネームサービスを記述します。ネームサービ
スとしては、files,dns,nis,nisplus,ldapが利用できます。各ネームサービス
に対応したnsswitch.confの構成ファイル例が、
/etc/nsswitch.xxxx (xxxx=files,dns,nis,nisplus,ldap）にあります。
利用したいネームサービスに対応した構成ファイル例を/etc/nsswitch.confに
コピーして利用すれば良いでしょう。例えば、ホスト名の解決を、
/etc/inet/hosts,dnsの順に検索したい場合は、/etc/nsswitch.dnsを
/etc/nsswitch.confにコピーして利用します。
また、dnsを使用する場合は、/etc/resolv.confの設定も必要です。
|/etc/resolv.conf
|domain mydomain.com &lt;&ndash; ドメイン名です。
|nameserver 0.0.0.0 &lt;&ndash; ネームサーバーが自マシンの場合。
|nameserver 111.22.3.5 &lt;&ndash; ネームサーバーが他マシンの場合、そのIPアドレス。
URL: http://sunsabc.its-abc.net/modules/xfsection/article.php?articleid=22 URL: http://www.ail.cs.gunma-u.ac.jp/~saito/dns.html URL: http://ktarn.www.linux.or.jp/JF/JFdocs/DNS-HOWTO.html ]]></description>
        </item>
        <item>
            <title><![CDATA[NTPサーバーの設定]]></title>
            <link>https://masutaka.net/2006-01-07-1/</link>
            <guid>https://masutaka.net/2006-01-07-1/</guid>
            <pubDate>Sat, 07 Jan 2006 00:00:00 GMT</pubDate>
            <description><![CDATA[公開NTPサーバーからクライアントとして時刻を同期し、LAN内ではNTPサーバー
として動作します。
/etc/inet/ntp.confの作成
|server 133.100.9.2 #clock.nc.fukuoka-u.ac.jp
|enable auth monitor
|driftfile /var/ntp/ntp.drift
|statsdir /var/ntp/ntpstats/
|filegen peerstats file peerstats type day enable
|filegen loopstats file loopstats type day enable
|filegen clockstats file clockstats type day enable
serverに外部のNTPサーバーのIPアドレスを指定します。パブリックなNTPサー
バーは 133.100.9.2 clock.nc.fukuoka-u.ac.jp が有名ですが、できればもっ
と近いところを探したほうがいいでしょう。
日本標準時グループ のインターネット上での日本標準時提供実験開始サービスは
2002年3月末までの試行でしたが当面提供するそうです。http://www.jst.mfeed.ad.jp/
/etc/inet/ntp.confを作ったらxntpdを起動
|# /etc/rc2.d/S74xntpd start
稼働確認
|# /usr/sbin/ntpq -p
URL: http://www.b-dash.net/solaris/tips.html#ntp ]]></description>
        </item>
        <item>
            <title><![CDATA[指定したサイズのファイルを作る]]></title>
            <link>https://masutaka.net/2006-01-06-3/</link>
            <guid>https://masutaka.net/2006-01-06-3/</guid>
            <pubDate>Fri, 06 Jan 2006 02:00:00 GMT</pubDate>
            <description><![CDATA[windowsXP
|&gt; fsutil file createnew
|使用法 : fsutil file createnew &lt;ファイル名&gt; &lt;長さ&gt;
|使用例 : fsutil file createnew C:\testfile.txt 1000
Solaris で同じことをやるには [2003-06-20-1] を参照のこと。
URL: http://kitaj.no-ip.com/tdiary/20060104.html#p01 ]]></description>
        </item>
        <item>
            <title><![CDATA[perl の実用的な使い方]]></title>
            <link>https://masutaka.net/2006-01-06-2/</link>
            <guid>https://masutaka.net/2006-01-06-2/</guid>
            <pubDate>Fri, 06 Jan 2006 01:00:00 GMT</pubDate>
            <description><![CDATA[% cat CVS/Root :ext:anoncvs@savannah.gnu.org:/cvsroot/emacs % find . -path &#39;.*/CVS/Root&#39; -print0 | xargs -0 \ &gt; perl -i -p -e &#39;s/:ext:anoncvs\@(cvs\.)?s/:pserver:anonymous\@cvs.s/&#39; % cat CVS/Root :pserver:anonymous@cvs.savannah.gnu.org:/cvsroot/emacs ]]></description>
        </item>
        <item>
            <title><![CDATA[ファイルを直接置換]]></title>
            <link>https://masutaka.net/2006-01-06-1/</link>
            <guid>https://masutaka.net/2006-01-06-1/</guid>
            <pubDate>Fri, 06 Jan 2006 00:00:00 GMT</pubDate>
            <description><![CDATA[% cat hoge.txt aaa aaa bbb aaa % perl -i -p -e &#39;s/aaa/ccc/g&#39; hoge.txt % cat hoge.txt ccc ccc bbb ccc ]]></description>
        </item>
        <item>
            <title><![CDATA[sudo を使えるユーザを登録する上の注意]]></title>
            <link>https://masutaka.net/2005-12-11-1/</link>
            <guid>https://masutaka.net/2005-12-11-1/</guid>
            <pubDate>Sun, 11 Dec 2005 00:00:00 GMT</pubDate>
            <description><![CDATA[/etc/sudoers を直接編集してはいけない。visudo でユーザを追加する。
masutaka ALL=(ALL) ALL]]></description>
        </item>
        <item>
            <title><![CDATA[svn の commit ログ]]></title>
            <link>https://masutaka.net/2005-12-04-1/</link>
            <guid>https://masutaka.net/2005-12-04-1/</guid>
            <pubDate>Sun, 04 Dec 2005 00:00:00 GMT</pubDate>
            <description><![CDATA[svn log -v すると、今までの削除や更新の履歴が出力される。]]></description>
        </item>
        <item>
            <title><![CDATA[不良ディスクのチェック]]></title>
            <link>https://masutaka.net/2005-12-03-1/</link>
            <guid>https://masutaka.net/2005-12-03-1/</guid>
            <pubDate>Sat, 03 Dec 2005 00:00:00 GMT</pubDate>
            <description><![CDATA[badblocks -v /dev/hda1 ]]></description>
        </item>
        <item>
            <title><![CDATA[ps の f オプション]]></title>
            <link>https://masutaka.net/2005-11-23-1/</link>
            <guid>https://masutaka.net/2005-11-23-1/</guid>
            <pubDate>Wed, 23 Nov 2005 00:00:00 GMT</pubDate>
            <description><![CDATA[どのプロセスからどのプロセスが呼ばれたのか分かる。
% ps axf
Solaris9 ではできなかった。]]></description>
        </item>
        <item>
            <title><![CDATA[パスワードのセキュリティチェック]]></title>
            <link>https://masutaka.net/2005-11-18-1/</link>
            <guid>https://masutaka.net/2005-11-18-1/</guid>
            <pubDate>Fri, 18 Nov 2005 00:00:00 GMT</pubDate>
            <description><![CDATA[crack とか john というツールを使うと、使用しているパスワードが安全
かどうかを確かめられるとのこと。加えて、ユーザパスワードを変更する
たびにその強度を crack のライブラリを使って検証する PAM のモジュー
ルもあるそうな。
URL: http://www.atmarkit.co.jp/flinux/rensai/linuxtips/244johnripper.html URL: http://www.linux.or.jp/JF/JFdocs/User-Authentication-HOWTO/secure.html |# unshadow /etc/passwd /etc/shadow &gt; passwdfile
|# john passwdfile
|or
|# john -wordfile:password.lst passwdfile]]></description>
        </item>
        <item>
            <title><![CDATA[CVSROOT の作成方法]]></title>
            <link>https://masutaka.net/2005-11-17-1/</link>
            <guid>https://masutaka.net/2005-11-17-1/</guid>
            <pubDate>Thu, 17 Nov 2005 00:00:00 GMT</pubDate>
            <description><![CDATA[|% pwd
|/home/masutaka
管理領域を作成
|% cvs -d /home/masutaka/CVSROOT init
bin プロジェクトの登録
|% mkdir empty
|% cd empty
|% cvs -d /home/masutaka/CVSROOT import -m &ldquo;Created bin directory&rdquo; bin gen start
bin プロジェクトのチェックアウト
|% cd
|% cvs -d /home/masutaka/CVSROOT co bin
|% rmdir empty
これ以降は add =&gt; commit で良いはず。
URL: http://www.tanu.org/~sakane/doc/public/howto-cvs.html URL: http://www1.accsnet.ne.jp/~gen/cvs/cvs-memo.html ]]></description>
        </item>
        <item>
            <title><![CDATA[テフロン加工のフライパンについたコゲの取り除き方]]></title>
            <link>https://masutaka.net/2005-11-13-1/</link>
            <guid>https://masutaka.net/2005-11-13-1/</guid>
            <pubDate>Sun, 13 Nov 2005 00:00:00 GMT</pubDate>
            <description><![CDATA[テフロン加工のフライパンについたしつこい汚れは、フライパンに重曹お
おさじ２杯、酢カップ２分の１杯、水カップ１杯をいれて沸騰させれば落
とすことができます。その後、サラダ油を塗って、なじませておくとよい
でしょう。また、キッチンワイドハイターのような漂白剤でもとれます。
URL: http://www.pref.ehime.jp/ecc/q&a/house/ahouse27.htm ]]></description>
        </item>
        <item>
            <title><![CDATA[list-text-properties-at の削除理由]]></title>
            <link>https://masutaka.net/2005-11-09-1/</link>
            <guid>https://masutaka.net/2005-11-09-1/</guid>
            <pubDate>Wed, 09 Nov 2005 00:00:00 GMT</pubDate>
            <description><![CDATA[Emacs22 から list-text-properties-at() は以下の理由で削除された。
|*** The command `list-text-properties-at&rsquo; has been deleted because
|C-u C-x = gives the same information and more.
|
|etc/NEWS より]]></description>
        </item>
        <item>
            <title><![CDATA[svnserve 経由でコミットできないときは？]]></title>
            <link>https://masutaka.net/2005-11-07-2/</link>
            <guid>https://masutaka.net/2005-11-07-2/</guid>
            <pubDate>Mon, 07 Nov 2005 01:00:00 GMT</pubDate>
            <description><![CDATA[svnserveで動かす場合、特に何も設定しないとリポジトリが読み取り専用に
なる。よって、変更をコミットしようとした場合
|svn: Commit failed (details follow):
|svn: Connection is read-only
というエラーになる。/home/masutaka/SVNROOT/conf/svnserve.conf に以下を
追加して解決した。(外部に公開しているわけではないので、セキュリティは甘々)
|[general]
|anon-access = write]]></description>
        </item>
        <item>
            <title><![CDATA[gconf-editor でショートカットを変更する]]></title>
            <link>https://masutaka.net/2005-11-07-1/</link>
            <guid>https://masutaka.net/2005-11-07-1/</guid>
            <pubDate>Mon, 07 Nov 2005 00:00:00 GMT</pubDate>
            <description><![CDATA[mozilla とかを Emacs キーバインドにする。 /desktop/gnome/interface/gtk_key_theme =&gt; Emacs]]></description>
        </item>
        <item>
            <title><![CDATA[Debian にサーバを立てて、Cygwin からアクセスできるようにした。]]></title>
            <link>https://masutaka.net/2005-11-05-4/</link>
            <guid>https://masutaka.net/2005-11-05-4/</guid>
            <pubDate>Sat, 05 Nov 2005 03:00:00 GMT</pubDate>
            <description><![CDATA[/etc/inetd.conf に以下を記述して、inetd 経由で使えるようにする。
この例だと、リモートから /home/masutaka/SVNROOT にアクセスできるようになる。
|svn	stream	tcp	nowait	masutaka /usr/sbin/tcpd /usr/bin/svnserve -i -r /home/masutaka/SVNROOT
  [2003-07-21-1] を参考にして、lokkit から svn:tcp のアクセスを許可する。
/etc/services でポート番号 3690 が svn に割り当てられているはず。
  inetd を再起動する。
|# /etc/init.d/inetd restart
  Cygwin からは以下のコマンドで checkout できる。
  |# 全部
|% svn co svn://dyna/SVNROOT/trunk .
|# 第一階層だけ
|% svn co -N svn://dyna/SVNROOT/trunk .
|# misc だけ
|% svn co svn://dyna/SVNROOT/trunk/misc .]]></description>
        </item>
        <item>
            <title><![CDATA[ダウンロードに失敗してしまう。]]></title>
            <link>https://masutaka.net/2005-11-05-3/</link>
            <guid>https://masutaka.net/2005-11-05-3/</guid>
            <pubDate>Sat, 05 Nov 2005 02:00:00 GMT</pubDate>
            <description><![CDATA[何回ダウンロードを試みても _update-info-dir-00325-1.tar.bz2 のダウ
ンロードに失敗してしまう。原因はインストール元のホストに上記ファイ
ルがなかったため。
ftp://ftp.yz.yamagata-u.ac.jp/pub/cygwin/release/ には存在していた
ため、こちらからインストールするように変更した。]]></description>
        </item>
        <item>
            <title><![CDATA[commit に失敗したら？]]></title>
            <link>https://masutaka.net/2005-11-05-2/</link>
            <guid>https://masutaka.net/2005-11-05-2/</guid>
            <pubDate>Sat, 05 Nov 2005 01:00:00 GMT</pubDate>
            <description><![CDATA[svn commit すると、以下のメッセージが出て commit に失敗する。
|svn: コミットに失敗しました (詳しい理由は以下のとおりです):
|svn: URL に対し ra_local セッションを開始できません
|svn: リポジトリ &lsquo;file:///home/masutaka/SVNROOT/trunk&rsquo; を開けませんでした
|svn: Berkeley DB error while opening environment for filesystem /home/masutaka/SVNROOT/db:
|?\204?\181?\184?\250?\164?\202?\176?\250?\191?\244?\164?\199?\164?\185
|svn: bdb: Program version 4.2 doesn&rsquo;t match environment version
DB のバージョンが違うみたい。以下のコマンドで復旧することができた。
|% svnadmin recover ~/SVNROOT
URL: http://blog.twintail.tv/2005/06/24/42/ ]]></description>
        </item>
        <item>
            <title><![CDATA[フォントが汚かったのは？]]></title>
            <link>https://masutaka.net/2005-11-05-1/</link>
            <guid>https://masutaka.net/2005-11-05-1/</guid>
            <pubDate>Sat, 05 Nov 2005 00:00:00 GMT</pubDate>
            <description><![CDATA[フォントが汚かったのは、Debian デフォルトのフォントに原因があった。
[2005-10-31-1] の設定を OFF にして、『Debian GNU/Linux 徹底入門』附
属のリョービフォントをインストールしたら、かなりきれいになった。]]></description>
        </item>
        <item>
            <title><![CDATA[Debian パッケージ管理]]></title>
            <link>https://masutaka.net/2005-11-02-2/</link>
            <guid>https://masutaka.net/2005-11-02-2/</guid>
            <pubDate>Wed, 02 Nov 2005 01:00:00 GMT</pubDate>
            <description><![CDATA[# 更新されたパッケージを全てインストール (&#34;-s&#34; で実際には実行せず、確認を行える) $ sudo aptitude update $ sudo aptitude safe-upgrade	# 安全なアップグレード $ sudo aptitude full-upgrade	# 状況によりパッケージの追加や削除を行う。 # インストール $ sudo aptitude install &lt;pkg-name&gt; # アンインストール $ sudo aptitude remove &lt;pkg-name&gt; # アンインストール(設定ファイルも含め完全) $ sudo aptitude purge &lt;pkg-name&gt; # 現在のパッケージキャッシュを検索 $ aptitude search &lt;strings&gt; # パッケージの情報を表示 $ aptitude show &lt;pkg-name&gt; # パッケージの依存関係を調べる $ apt-cache depends &lt;pkg-name&gt; # 指定されたインストール済みパッケージに含まれているファイルをすべて表示 $ dpkg -L|--listfiles &lt;pkg-name&gt; # インストールしてあるパッケージをすべて表示 $ dpkg -l|--list # そのファイルがどのパッケージに属するか調べる。 $ dpkg -S|--search &lt;file-name&gt; # パッケージに含まれているファイルを確認 $ dpkg -c|--contents &lt;pkg-file-name&gt; # パッケージに含まれているファイルを指定したディレクトリに展開 $ dpkg -x|--extract &lt;pkg-file-name&gt; &lt;dir-name&gt; # キャッシュされているパッケージの削除(/var/cache/apt/archives/* の削除) $ sudo aptitude clean # キャッシュされている古いバージョンの削除(/var/cache/apt/archives/* の掃除) $ sudo aptitude autoclean # パッケージがなぜインストールされている/削除されているのか、依存関係を表示。 $ sudo aptitude why/why-not &lt;pkg-name&gt; # 依存関係から孤立したパッケージを検索 $ deborphan --guess-all # インストールしたパッケージを再設定する(インストール時に実行されたアレを再実行する)。 $ sudo dpkg-reconfigure &lt;pkg-name&gt; 参考URL: D: AptGet - Debian GNU/Linux スレッドテンプレ ※ CUI が苦手な人は Synaptic パッケージマネージャがおすすめ。]]></description>
        </item>
        <item>
            <title><![CDATA[fetchmail で取り込んだメールを Exim4 が配送するまでに時間がかかる。]]></title>
            <link>https://masutaka.net/2005-11-02-1/</link>
            <guid>https://masutaka.net/2005-11-02-1/</guid>
            <pubDate>Wed, 02 Nov 2005 00:00:00 GMT</pubDate>
            <description><![CDATA[~/.fetchmailrcに &lsquo;batchlimit 10&rsquo; を追加して解決。
URL: http://lists.debian.or.jp/debian-users/200404/msg00101.html ]]></description>
        </item>
        <item>
            <title><![CDATA[mozilla とかで使われるフォントの一般名]]></title>
            <link>https://masutaka.net/2005-10-31-2/</link>
            <guid>https://masutaka.net/2005-10-31-2/</guid>
            <pubDate>Mon, 31 Oct 2005 01:00:00 GMT</pubDate>
            <description><![CDATA[ serif
明朝体のような「ひげ付きフォント」を意味します。 sans-serif
ゴシック体のような「ひげ無しフォント」を意味します。 cursive
手書きのようなフォントを意味します。草書体系フォント。 fantasy
Computer装飾に使えるようなフォントを意味します。 monospace
等幅のフォントを意味します。
URL: http://www.mozilla.gr.jp/standards/webtips0007.html URL: http://css.eweb-design.com/0406_ft.html   ]]></description>
        </item>
        <item>
            <title><![CDATA[Mozilla のフォント]]></title>
            <link>https://masutaka.net/2005-10-31-1/</link>
            <guid>https://masutaka.net/2005-10-31-1/</guid>
            <pubDate>Mon, 31 Oct 2005 00:00:00 GMT</pubDate>
            <description><![CDATA[&ndash;enable-freetype2 付きでコンパイルした mozilla は Freetype2 が使え、
AntiAlias なフォントがとっても素敵になるらしい。でも、1024x768 程度
の解像度のマシンではとても汚い。そのため以下の設定を [2005-02-02-1] の方法で行ない、おとなしく pcf 版フォントを使うことにした。
|user_pref(&ldquo;fonts.xft.enabled&rdquo;, false);
URL: http://www.edit.ne.jp/~hoshina/wiki/?%5B%5BMozilla%5D%5D#content_1_10 ]]></description>
        </item>
        <item>
            <title><![CDATA[コンパイルオプションの確認方法]]></title>
            <link>https://masutaka.net/2005-09-20-1/</link>
            <guid>https://masutaka.net/2005-09-20-1/</guid>
            <pubDate>Tue, 20 Sep 2005 00:00:00 GMT</pubDate>
            <description><![CDATA[mozilla を起動して、URL を書くところに about:buildconfig と打って Enter する。]]></description>
        </item>
        <item>
            <title><![CDATA[bsfilter の使用感]]></title>
            <link>https://masutaka.net/2005-08-29-1/</link>
            <guid>https://masutaka.net/2005-08-29-1/</guid>
            <pubDate>Mon, 29 Aug 2005 00:00:00 GMT</pubDate>
            <description><![CDATA[elisp だけで実装したスパムフィルタ mew-spam-stat.el でスパム除去し
ていたが、スパム判定洩れが多くなってきたので、評判が良い bsfilter
を使ってみることにする。
【環境】
OS: RedHat Linux 7.2
メール受信: fetchmail + procmail
フィルタ: bsfilter
fetchmail で外部の POP サーバーからメールを収集し、procmail でロー
カルマシンに配送。その際、bsfilter を使って SPAM メールを指定ディレ
クトリに移動してしまおう、というのがねらい。
まず、fetchmail、procmail、bsfilter をインストールする。
bsfilter は、http://bsfilter.org/ から入手できる。
[bsfilter のインストール]
上記 bsfilter のサイトから入手した bsfilter-X.Y.Z.tgz 内の
bsfilter/bsfilter を、/usr/local/bin などにコピーするだけ。
[bsfilter の育て方]
最初、bsfilter は、どれが SPAM で、どれがクリーンなファイルなのか分
からないので、教えてあげないといけない。具体的には以下のようにする。
% find $HOME/Mail/inbox -type f ! -name &#34;.mew-*&#34; | xargs bsfilter --add-clean % find $HOME/Mail/spam -type f ! -name &#34;.mew-*&#34; | xargs bsfilter --add-spam % bsfilter --update もちろんこれに先だって、$HOME/Mail/inbox の中の SPAM メールを]]></description>
        </item>
        <item>
            <title><![CDATA[表計算]]></title>
            <link>https://masutaka.net/2005-08-06-1/</link>
            <guid>https://masutaka.net/2005-08-06-1/</guid>
            <pubDate>Sat, 06 Aug 2005 00:00:00 GMT</pubDate>
            <description><![CDATA[*.ses という拡張子のファイルを作って開くと、簡単な表計算が出来る。
ただし、日本語は表示できないみたい。なぜだ？]]></description>
        </item>
        <item>
            <title><![CDATA[vfstab]]></title>
            <link>https://masutaka.net/2005-03-30-1/</link>
            <guid>https://masutaka.net/2005-03-30-1/</guid>
            <pubDate>Wed, 30 Mar 2005 00:00:00 GMT</pubDate>
            <description><![CDATA[vfstabは、virtual file system table の略]]></description>
        </item>
        <item>
            <title><![CDATA[clmemo での注意]]></title>
            <link>https://masutaka.net/2005-03-09-1/</link>
            <guid>https://masutaka.net/2005-03-09-1/</guid>
            <pubDate>Wed, 09 Mar 2005 00:00:00 GMT</pubDate>
            <description><![CDATA[バイトコンパイルすると、日本語変換中の C-i でのカタカナ変換が
ただの TAB 挿入になってしまう。]]></description>
        </item>
        <item>
            <title><![CDATA[スーパーデーモン(xinitd)の起動、停止、再起動]]></title>
            <link>https://masutaka.net/2005-03-06-2/</link>
            <guid>https://masutaka.net/2005-03-06-2/</guid>
            <pubDate>Sun, 06 Mar 2005 01:00:00 GMT</pubDate>
            <description><![CDATA[/etc/init.d/xinetd start
/etc/init.d/xinetd stop
/etc/init.d/xinetd restart]]></description>
        </item>
        <item>
            <title><![CDATA[ProFTPD-1.2.10 から FFFTP でファイル一覧が取得出来ない。]]></title>
            <link>https://masutaka.net/2005-03-06-1/</link>
            <guid>https://masutaka.net/2005-03-06-1/</guid>
            <pubDate>Sun, 06 Mar 2005 00:00:00 GMT</pubDate>
            <description><![CDATA[ProFTPD1.2.9までは、オプション付きの「NLST」コマンドをサポートして
いたが、1.2.10からは規格(RFC959)に準拠するためNLSTのオプション指定
をサポートしなくなった。
FFFTPは標準設定では、「NLST -alL」を指定している。そのためファイル
一覧が見れなくなる。
FFFTPの設定を変更すれば、FFFTPでファイル一覧を見れるようになる。
http://www.hayasoft.com/JP/software/linux/proftpd_nlst_patch.html ]]></description>
        </item>
        <item>
            <title><![CDATA[root での login 制御]]></title>
            <link>https://masutaka.net/2005-03-02-1/</link>
            <guid>https://masutaka.net/2005-03-02-1/</guid>
            <pubDate>Wed, 02 Mar 2005 00:00:00 GMT</pubDate>
            <description><![CDATA[/etc/default/login の CONSOLE=/dev/console の行をコメントアウトす
ると、rootでのloginが出来るようになる。
セキュリティ的にはイマイチなので、注意すること。]]></description>
        </item>
        <item>
            <title><![CDATA[RPATH の確認方法]]></title>
            <link>https://masutaka.net/2005-03-01-1/</link>
            <guid>https://masutaka.net/2005-03-01-1/</guid>
            <pubDate>Tue, 01 Mar 2005 00:00:00 GMT</pubDate>
            <description><![CDATA[各 binary には RPATH (Runtime PATH) が埋めこまれており，実行時に必
要となる shared library を RPATH から検索します。
その binary に埋めこまれている RPATH は dump で，またその binary
が dynamic link している shared library は ldd で確認することがで
きます。
% dump -Lv which emacs
% ldd which emacs
URL: http://solaris.roguelife.org/usr/ccs/bin/ld.xhtml ]]></description>
        </item>
        <item>
            <title><![CDATA[FYI]]></title>
            <link>https://masutaka.net/2005-02-12-1/</link>
            <guid>https://masutaka.net/2005-02-12-1/</guid>
            <pubDate>Sat, 12 Feb 2005 00:00:00 GMT</pubDate>
            <description><![CDATA[ 　読み方 : エフワイアイ
フルスペル : For Your Information
説明 : RFCのサブシリーズで、インターネットで使われる標準技術に関する情報を広く一般に広めることを目的とする文書群。本家のRFCとは違い、標準の策定を目的とはしていない。また、この意味から転じて、技術者間でやりとりするインフォーマルな文書において、「参考までに」というニュアンスを持つ単語として使われている。
情報源 : IT用語辞典 e-Words http://e-words.jp/  ]]></description>
        </item>
        <item>
            <title><![CDATA[日本語パックをダウンロードする。]]></title>
            <link>https://masutaka.net/2005-02-02-2/</link>
            <guid>https://masutaka.net/2005-02-02-2/</guid>
            <pubDate>Wed, 02 Feb 2005 01:00:00 GMT</pubDate>
            <description><![CDATA[Google で &ldquo;mozilla 日本語パック&rdquo; を検索し以下のサイトに辿り着いた。
ftp://ftp.mozilla-japan.org/pub/mozilla-japan/mozilla/releases/ ]]></description>
        </item>
        <item>
            <title><![CDATA[マニアックな設定]]></title>
            <link>https://masutaka.net/2005-02-02-1/</link>
            <guid>https://masutaka.net/2005-02-02-1/</guid>
            <pubDate>Wed, 02 Feb 2005 00:00:00 GMT</pubDate>
            <description><![CDATA[| URL を書くところに about:config と打って Enter すると、マニアックな設定ができる。]]></description>
        </item>
        <item>
            <title><![CDATA[Mew on Meadow で X-Face を表示する。]]></title>
            <link>https://masutaka.net/2005-02-01-1/</link>
            <guid>https://masutaka.net/2005-02-01-1/</guid>
            <pubDate>Tue, 01 Feb 2005 00:00:00 GMT</pubDate>
            <description><![CDATA[uncompface =&gt; Cygwin から入手
icontopbm =&gt; http://netpbm.sourceforge.net/ から入手
pbmtoxbm =&gt; 同上]]></description>
        </item>
        <item>
            <title><![CDATA[特定のパーミッション設定ファイルを検索する。]]></title>
            <link>https://masutaka.net/2005-01-24-1/</link>
            <guid>https://masutaka.net/2005-01-24-1/</guid>
            <pubDate>Mon, 24 Jan 2005 00:00:00 GMT</pubDate>
            <description><![CDATA[パーミッションが 644 のファイルを検索 % find . -type f -perm 644
group と other に write 属性が付いているディレクトリを検索 % find . -type d ( -perm -g+w -o -perm -o+w )]]></description>
        </item>
        <item>
            <title><![CDATA[rsh での * の扱い]]></title>
            <link>https://masutaka.net/2005-01-19-1/</link>
            <guid>https://masutaka.net/2005-01-19-1/</guid>
            <pubDate>Wed, 19 Jan 2005 00:00:00 GMT</pubDate>
            <description><![CDATA[|% rsh remotehost ls -alF *
|% rsh remotehost &ldquo;ls -alF &rdquo;
前者はローカルホストで *' が展開され、後者はリモートホストで &rsquo; が展開されるとのこと(man rsh)。]]></description>
        </item>
        <item>
            <title><![CDATA[commit すると怒られてしまう場合は？]]></title>
            <link>https://masutaka.net/2005-01-16-1/</link>
            <guid>https://masutaka.net/2005-01-16-1/</guid>
            <pubDate>Sun, 16 Jan 2005 00:00:00 GMT</pubDate>
            <description><![CDATA[|% svn commit -m &quot;&quot;
|Deleting howm
|svn: Commit failed (details follow):
|svn: Out of date: &lsquo;/trunk/howm&rsquo; in transaction &lsquo;35&rsquo;
こういう場合は update してから commit する。]]></description>
        </item>
        <item>
            <title><![CDATA[configure のオプション]]></title>
            <link>https://masutaka.net/2005-01-12-1/</link>
            <guid>https://masutaka.net/2005-01-12-1/</guid>
            <pubDate>Wed, 12 Jan 2005 00:00:00 GMT</pubDate>
            <description><![CDATA[[mew-dist 25941]
こういう指定もできるみたい。 |% configrure &ndash;prefix=&rsquo;$(DESTDIR)&rsquo;/usr/local]]></description>
        </item>
        <item>
            <title><![CDATA[文字列の置換]]></title>
            <link>https://masutaka.net/2004-12-22-1/</link>
            <guid>https://masutaka.net/2004-12-22-1/</guid>
            <pubDate>Wed, 22 Dec 2004 00:00:00 GMT</pubDate>
            <description><![CDATA[&ldquo;aaaa1234bbbb&rdquo; =&gt; &ldquo;aaaabbbb&rdquo;
# sh % echo &#34;aaaa1234bbbb&#34; | sed -e &#39;s/^\([a-z]*\)\([0-9]*\)\([a-z]*\)$/\1\3/&#39; aaaabbbb ;; elisp(文字列の走査) (let ((str &#34;aaaa1234bbbb&#34;))  (string-match &#34;\\([a-z]+\\)\\([0-9]+\\)\\([a-z]+\\)&#34; str)  (concat  (match-string-no-properties 1 str)  (match-string-no-properties 3 str))) =&gt; &#34;aaaabbbb&#34; ;; elisp(バッファの走査) &lt;= ちょっと大げさ (with-temp-buffer  (let ((str &#34;aaaa1234bbbb&#34;))  (insert str)  (goto-char (point-min))  (if (re-search-forward &#34;\\([a-z]+\\)\\([0-9]+\\)\\([a-z]+\\)&#34; (point-max) t)  (concat  (match-string-no-properties 1)  (match-string-no-properties 3))))) =&gt; &#34;aaaabbbb&#34; ]]></description>
        </item>
        <item>
            <title><![CDATA[ログイン/ログアウトの監視]]></title>
            <link>https://masutaka.net/2004-12-14-1/</link>
            <guid>https://masutaka.net/2004-12-14-1/</guid>
            <pubDate>Tue, 14 Dec 2004 00:00:00 GMT</pubDate>
            <description><![CDATA[tcshでもできるみたい。
http://tehanu.hpcl.titech.ac.jp/zsh/waka/intro-LoginLogoutWatching.html % watch=all
% WATCHFMT=&quot;%n has %a %l from %m at %t %w.&quot;
% log]]></description>
        </item>
        <item>
            <title><![CDATA[C言語で、小数の小数部分だけを抜き出す方法]]></title>
            <link>https://masutaka.net/2004-12-10-1/</link>
            <guid>https://masutaka.net/2004-12-10-1/</guid>
            <pubDate>Fri, 10 Dec 2004 00:00:00 GMT</pubDate>
            <description><![CDATA[その1
float shousuu, zenbu = 1.5; shousuu = zenbu - (int)zenbu; その2
#include &lt;math.h&gt; float zenbu = 1.5, seisuu, shousuu; shousuu = modff(zenbu, &amp;seisuu); ]]></description>
        </item>
        <item>
            <title><![CDATA[CVS の commit ログから ChangeLog を生成してくれる。]]></title>
            <link>https://masutaka.net/2004-12-06-1/</link>
            <guid>https://masutaka.net/2004-12-06-1/</guid>
            <pubDate>Mon, 06 Dec 2004 00:00:00 GMT</pubDate>
            <description><![CDATA[|% cvs2cl.pl -b
ブランチを指定することもできる。 |% cvs2cl.pl -b &ndash;follow-only TEST_BRANCH]]></description>
        </item>
        <item>
            <title><![CDATA[$* と $@ の違い]]></title>
            <link>https://masutaka.net/2004-10-21-2/</link>
            <guid>https://masutaka.net/2004-10-21-2/</guid>
            <pubDate>Thu, 21 Oct 2004 01:00:00 GMT</pubDate>
            <description><![CDATA[$* 全引数リスト。ダブルクォートで囲んだ場合、
&ldquo;$1 $2 … $n&rdquo; と全引数を一つにくっつけた物に展開される。
$@ 全引数リスト。ダブルクォートで囲んだ場合、
&ldquo;$1&rdquo; &ldquo;$2&rdquo; … &ldquo;$n&rdquo; とそれぞれの引数を個別にダブルクォートで囲んで展開する。]]></description>
        </item>
        <item>
            <title><![CDATA[trap とかに使うシグナルナンバーの説明(kill -l)]]></title>
            <link>https://masutaka.net/2004-10-21-1/</link>
            <guid>https://masutaka.net/2004-10-21-1/</guid>
            <pubDate>Thu, 21 Oct 2004 00:00:00 GMT</pubDate>
            <description><![CDATA[|0:正常終了用, 1:ハングアップ, 2:割り込み(Ctrl-C), 3:クイットシグナル(Ctrl-)
|9:キルシグナル(強制終了 Kill -KILL PID), 15:終了シグナル(kill PID)]]></description>
        </item>
        <item>
            <title><![CDATA[関数の引数に文字列があると、BSS 領域に取られるようだ]]></title>
            <link>https://masutaka.net/2004-09-29-1/</link>
            <guid>https://masutaka.net/2004-09-29-1/</guid>
            <pubDate>Wed, 29 Sep 2004 00:00:00 GMT</pubDate>
            <description><![CDATA[printf() を削除したときに BSS のサイズが減っていて気づいた。]]></description>
        </item>
        <item>
            <title><![CDATA[sysinfo が使えない時]]></title>
            <link>https://masutaka.net/2004-08-27-1/</link>
            <guid>https://masutaka.net/2004-08-27-1/</guid>
            <pubDate>Fri, 27 Aug 2004 00:00:00 GMT</pubDate>
            <description><![CDATA[/usr/sbin/psrinfo や /usr/sbin/prtconf を使えばよい。
/usr/platform/uname -i/sbin/prtdiag もありますね。]]></description>
        </item>
        <item>
            <title><![CDATA[ファイルの任意の範囲を出力]]></title>
            <link>https://masutaka.net/2004-08-04-1/</link>
            <guid>https://masutaka.net/2004-08-04-1/</guid>
            <pubDate>Wed, 04 Aug 2004 00:00:00 GMT</pubDate>
            <description><![CDATA[10000 行目から 10100 行目まで出力 |% sed -n &ldquo;10000,10100 p&rdquo; [filename]
行番号も出力 |% cat -n [filename] | sed -n &ldquo;10000,10100 p&rdquo;]]></description>
        </item>
        <item>
            <title><![CDATA[解像度のカスタマイズ]]></title>
            <link>https://masutaka.net/2004-07-22-1/</link>
            <guid>https://masutaka.net/2004-07-22-1/</guid>
            <pubDate>Thu, 22 Jul 2004 00:00:00 GMT</pubDate>
            <description><![CDATA[現在の解像度を知る方法
|% /usr/sbin/fbconfig -prconf
設定可能な解像度リスト取得
|% /usr/sbin/fbconfig -res ?
解像度の初期値の変更
|% /usr/sbin/fbconfig -res [解像度]
解像度を初期値に戻す時
|% /usr/sbin/fbconfig -default]]></description>
        </item>
        <item>
            <title><![CDATA[migemo の諸問題]]></title>
            <link>https://masutaka.net/2004-07-14-1/</link>
            <guid>https://masutaka.net/2004-07-14-1/</guid>
            <pubDate>Wed, 14 Jul 2004 00:00:00 GMT</pubDate>
            <description><![CDATA[  Emacs-21.3 on Solaris9
buffer に ataS がある状態で、C-s ataS まで打つと Emacs が必ず落ちる。
(setq migemo-options &lsquo;(&quot;-S&quot; &ldquo;migemo&rdquo; &ldquo;-t&rdquo; &ldquo;emacs&rdquo;)) したら落ちなかった。
  Emacs-21.3.50 on RedHat 7.2
[Regular expression too big] と表示される。
=&gt; Emacs のバグだったようだ。CVS 先端では直っている。
http://www.m17n.org/mlarchive/mule-ja/200310/msg00000.html   ]]></description>
        </item>
        <item>
            <title><![CDATA[screen の説明]]></title>
            <link>https://masutaka.net/2004-06-11-1/</link>
            <guid>https://masutaka.net/2004-06-11-1/</guid>
            <pubDate>Fri, 11 Jun 2004 00:00:00 GMT</pubDate>
            <description><![CDATA[URL: http://risky-safety.org/~zinnia/screen/contribute2/ ]]></description>
        </item>
        <item>
            <title><![CDATA[delete() の挙動]]></title>
            <link>https://masutaka.net/2004-05-27-2/</link>
            <guid>https://masutaka.net/2004-05-27-2/</guid>
            <pubDate>Thu, 27 May 2004 01:00:00 GMT</pubDate>
            <description><![CDATA[|リストの一番始めの要素がマッチした場合は、元のリストを破壊しない。
|list
|=&gt;(&ldquo;CVS/&rdquo; &ldquo;.o&rdquo; &ldquo;~&rdquo; &ldquo;.bin&rdquo;)
|
|(delete &ldquo;CVS/&rdquo; list)
|=&gt;(&quot;.o&quot; &ldquo;~&rdquo; &ldquo;.bin&rdquo;)
|list
|=&gt;(&ldquo;CVS/&rdquo; &ldquo;.o&rdquo; &ldquo;~&rdquo; &ldquo;.bin&rdquo;)
|
|(delete &ldquo;~&rdquo; list)
|=&gt;(&ldquo;CVS/&rdquo; &ldquo;.o&rdquo; &ldquo;.bin&rdquo;)
|list
|=&gt;(&ldquo;CVS/&rdquo; &ldquo;.o&rdquo; &ldquo;.bin&rdquo;)]]></description>
        </item>
        <item>
            <title><![CDATA[正規表現で単語単位でマッチさせる]]></title>
            <link>https://masutaka.net/2004-05-27-1/</link>
            <guid>https://masutaka.net/2004-05-27-1/</guid>
            <pubDate>Thu, 27 May 2004 00:00:00 GMT</pubDate>
            <description><![CDATA[\&lt;word\&gt; は word にはマッチするが、wordd にはマッチしない。]]></description>
        </item>
        <item>
            <title><![CDATA[色付け用の外部ツール]]></title>
            <link>https://masutaka.net/2004-05-17-1/</link>
            <guid>https://masutaka.net/2004-05-17-1/</guid>
            <pubDate>Mon, 17 May 2004 00:00:00 GMT</pubDate>
            <description><![CDATA[[meadow-users-jp 5429]
http://www.jpl.org/ftp/pub/elisp/develock.el.gz C や elisp のソースで余分な空白などを強調表示させてくれる。
ただしかなり厳しい色づけなので、実用は難しいかも。]]></description>
        </item>
        <item>
            <title><![CDATA[SVNROOT の作成方法]]></title>
            <link>https://masutaka.net/2004-05-05-1/</link>
            <guid>https://masutaka.net/2004-05-05-1/</guid>
            <pubDate>Wed, 05 May 2004 00:00:00 GMT</pubDate>
            <description><![CDATA[|% pwd
|/home/masutaka
管理領域を作成 |% svnadmin create SVNROOT
|% svn mkdir -m &ldquo;setup branches&rdquo; file:///home/masutaka/SVNROOT/branches
|% svn mkdir -m &ldquo;setup tags&rdquo; file:///home/masutaka/SVNROOT/tags
|% svn mkdir -m &ldquo;setup trunk&rdquo; file:///home/masutaka/SVNROOT/trunk
~/.emacs を import |% svn import -m &ldquo;Init&rdquo; ~/.emacs file:///home/masutaka/SVNROOT/trunk/.emacs
~/.emacs を checkout |% mv .emacs .emacs.bak; cd ..
|% svn checkout file:///home/masutaka/SVNROOT/trunk masutaka
|% cd masutaka
これ以降は add =&gt; commit で良いはず。 |% svn add .zshenv; svn commit -m &ldquo;Init&rdquo; .zshenv]]></description>
        </item>
        <item>
            <title><![CDATA[コンパイルしたディレクトリの確認]]></title>
            <link>https://masutaka.net/2004-05-03-1/</link>
            <guid>https://masutaka.net/2004-05-03-1/</guid>
            <pubDate>Mon, 03 May 2004 00:00:00 GMT</pubDate>
            <description><![CDATA[source-directory =&gt;
&ldquo;/home/masutaka/share/src/emacs/gnu-emacs/emacs-21.3/&rdquo;]]></description>
        </item>
        <item>
            <title><![CDATA[桜庭の道場の秘伝のタレらしい]]></title>
            <link>https://masutaka.net/2004-04-15-1/</link>
            <guid>https://masutaka.net/2004-04-15-1/</guid>
            <pubDate>Thu, 15 Apr 2004 00:00:00 GMT</pubDate>
            <description><![CDATA[醤油, かつおぶし, 卵の黄身, 長葱, 青海苔
の順番に入れて、黄身が固まらないように鍋で温めるらしい。]]></description>
        </item>
        <item>
            <title><![CDATA[共通鍵を使ってファイルを暗号化]]></title>
            <link>https://masutaka.net/2004-03-23-1/</link>
            <guid>https://masutaka.net/2004-03-23-1/</guid>
            <pubDate>Tue, 23 Mar 2004 00:00:00 GMT</pubDate>
            <description><![CDATA[URL: http://namazu.org/~satoru/diary/20040322.html#p01 共通鍵を使ったときの得失
○鍵のファイルを作って管理する必要がない。
×暗号化するときにもパスフレーズを打つ必要がある。
使い方
|# 暗号化: パスフレーズを入力すると foo.gpg ができる
|% gpg -c foo
|# 復号化: パスフレーズを入力すると foo ができる
|% gpg -o foo -d foo.gpg
これらの操作を Emacs から自動化するツール
URL: http://www.mew.org/~kazu/proj/prog/gpg.el ]]></description>
        </item>
        <item>
            <title><![CDATA[Window の情報を得る]]></title>
            <link>https://masutaka.net/2004-02-25-1/</link>
            <guid>https://masutaka.net/2004-02-25-1/</guid>
            <pubDate>Wed, 25 Feb 2004 00:00:00 GMT</pubDate>
            <description><![CDATA[% xwininfo -root xwininfo: Window id: 0x3a (the root window) (has no name) Absolute upper-left X: 0 Absolute upper-left Y: 0 Relative upper-left X: 0 Relative upper-left Y: 0 Width: 1152 Height: 900 Depth: 8 Visual Class: PseudoColor Border width: 0 Class: InputOutput Colormap: 0x21 (installed) Bit Gravity State: ForgetGravity Window Gravity State: NorthWestGravity Backing Store State: NotUseful Save Under State: no Map State: IsViewable Override Redirect State: no Corners: +0+0 -0+0 -0-0 +0-0 -geometry 1152x900+0+0 ]]></description>
        </item>
        <item>
            <title><![CDATA[xrdb - X server Resource DataBase utility]]></title>
            <link>https://masutaka.net/2004-02-20-2/</link>
            <guid>https://masutaka.net/2004-02-20-2/</guid>
            <pubDate>Fri, 20 Feb 2004 01:00:00 GMT</pubDate>
            <description><![CDATA[# Xサーバの情報を得る。 % xrdb -symbols # X-resource の情報を得る。 % xrdb -query # ログオフせずに ~/.Xdefaults を反映 % xrdb -remove; xrdb -merge ~/.Xdefaults ]]></description>
        </item>
        <item>
            <title><![CDATA[exec -- 現在実行中のシェルに代わり、指定したコマンドを実行する]]></title>
            <link>https://masutaka.net/2004-02-20-1/</link>
            <guid>https://masutaka.net/2004-02-20-1/</guid>
            <pubDate>Fri, 20 Feb 2004 00:00:00 GMT</pubDate>
            <description><![CDATA[シェルから
% ls とコマンドを実行すると、シェルは以下のことを行う。
 システムコール fork(2) を呼び、子プロセスを生成する。 子プロセスは ls を exec(2) する。 親プロセスであるシェルは、ls の実行が完了するのを待つ (wait する)。  一方、
% exec ls と exec を使うと、シェルは fork(2) せず、いきなり ls コマンドを exec(2) する (シェルの内部コマンド exec(1) を実行すると、内部でシステムコール exec(2) が呼ばれるということ)。シェルのプロセス情報は ls のプロセスの情報で上書きされる。なお、子プロセスは生成されないので、シェルと ls のプロセス ID は同じになる。
UNIXの部屋 http://x68000.startshop.co.jp/~68user/unix/ ]]></description>
        </item>
        <item>
            <title><![CDATA[フォントパス追加＆確認]]></title>
            <link>https://masutaka.net/2004-02-19-1/</link>
            <guid>https://masutaka.net/2004-02-19-1/</guid>
            <pubDate>Thu, 19 Feb 2004 00:00:00 GMT</pubDate>
            <description><![CDATA[たとえば、
% xset fp+ /usr/local/share/fonts/marumoji とすると、フォントパスの最後に /usr/local/share/fonts/marumoji が加わり、
% xset +fp /usr/local/share/fonts/shinonome とすると、フォントパスの先頭に /usr/local/share/fonts/shinonome が加わります。
フォントパスは
% xset q とすると、
Keyboard Control: auto repeat: on key click percent: 0 LED mask: 00000000 [...] Font Path: /usr/local/share/fonts/shinonome,unix/:7100,/usr/local/share/fonts/marumoji [...] のように確認できます。]]></description>
        </item>
        <item>
            <title><![CDATA[FLIM & SEMI Install]]></title>
            <link>https://masutaka.net/2004-02-16-2/</link>
            <guid>https://masutaka.net/2004-02-16-2/</guid>
            <pubDate>Mon, 16 Feb 2004 01:00:00 GMT</pubDate>
            <description><![CDATA[% tar xvzf flim-1.14.6.tar.gz; cd flim-1.14.6 % make % emacs -batch -q -no-site-file -l texinfmt -f batch-texinfo-format *.texi # (cd /usr/local/share/emacs/site-lisp &amp;&amp; rm flim) # make install # cp *.info /usr/local/info # dir を編集する。&#34;install-info &lt;info&gt; &lt;dir&gt;&#34; も使えるかも知れない。 SEMI もやりかたは同じなので省略する。]]></description>
        </item>
        <item>
            <title><![CDATA[wanderlust 常に all scan ???]]></title>
            <link>https://masutaka.net/2004-02-16-1/</link>
            <guid>https://masutaka.net/2004-02-16-1/</guid>
            <pubDate>Mon, 16 Feb 2004 00:00:00 GMT</pubDate>
            <description><![CDATA[(setq wl-default-sync-range &#34;all&#34;) ]]></description>
        </item>
        <item>
            <title><![CDATA[日付＆時間を指定する。]]></title>
            <link>https://masutaka.net/2004-02-09-2/</link>
            <guid>https://masutaka.net/2004-02-09-2/</guid>
            <pubDate>Mon, 09 Feb 2004 01:00:00 GMT</pubDate>
            <description><![CDATA[&lt;http://www.swlab.csce.kyushu-u.ac.jp/man/cvs-1.10.7/cvs-ja_toc.html&gt; # 日付を指定して TEST_BRANCH からチェックアウト。 % cvs co -rTEST_BRANCH -D20040203 src/hogehoge # もちろん時間も指定できる。 % cvs co -rTEST_BRANCH -D&#34;2004-02-03 12:00&#34; src/hogehoge # diff も取れるよ。 % cd ~/src/hogehoge % cvs diff -rTEST_BRANCH -D&#34;2004-02-03 12:00&#34; ]]></description>
        </item>
        <item>
            <title><![CDATA[telnet で直接 pop サーバとお話しする。]]></title>
            <link>https://masutaka.net/2004-02-09-1/</link>
            <guid>https://masutaka.net/2004-02-09-1/</guid>
            <pubDate>Mon, 09 Feb 2004 00:00:00 GMT</pubDate>
            <description><![CDATA[% telnet example.com pop3 user xxxxxxxx pass YYYYYYYY stat # &lt;= メールが何通あるかを問い合わせ list # &lt;= メールをリスト表示 retr &lt;num&gt; # &lt;= &lt;num&gt;通目のメールの中味を表示 dele &lt;num&gt; # &lt;= &lt;num&gt;通目のメールを削除 quit # &lt;= 終了 ]]></description>
        </item>
        <item>
            <title><![CDATA[emacs を CVS の先端から持ってくる。]]></title>
            <link>https://masutaka.net/2004-02-03-2/</link>
            <guid>https://masutaka.net/2004-02-03-2/</guid>
            <pubDate>Tue, 03 Feb 2004 01:00:00 GMT</pubDate>
            <description><![CDATA[http://homepage.mac.com/nand/macosx/emacs_cvs.html % export CVS_RSH=ssh % cvs -z3 -d :ext:anoncvs@savannah.gnu.org:/cvsroot/emacs checkout -P emacs # &#34;rpm -e texinfo&#34; して texinfo-4.6 を普通にインストール。 % mkdir emacs-work; cd emacs-work % ../emacs/configure --without-xim % make bootstrap	# See INSTALL.CVS ]]></description>
        </item>
        <item>
            <title><![CDATA[tamago を CVS の先端から持ってくる。]]></title>
            <link>https://masutaka.net/2004-02-03-1/</link>
            <guid>https://masutaka.net/2004-02-03-1/</guid>
            <pubDate>Tue, 03 Feb 2004 00:00:00 GMT</pubDate>
            <description><![CDATA[http://emacs-21.ki.nu/application/tamago.html % cvs -d :pserver:anonymous@cvs.m17n.org:/cvs/tamago login % cvs -d :pserver:anonymous@cvs.m17n.org:/cvs/tamago co tamago emacs-20.7 では its/aynu.el の 137 行目あたりでコンパイルエラーになってしまう。
コンパイルエラーとは関係ないけど、以下のスクリプトで調べてみたら、すでにインストールされている egg と違う部分が結構あった。
% cd ~/share/elisp % for file in `find egg/. -name &#34;*.el&#34;`; do; \ &gt; echo &#34;[`basename $file`]&#34;; \ &gt; diff -c /usr/gnu/share/emacs/site-lisp/$file $file 2&gt;&amp;1 ; \ &gt; done ]]></description>
        </item>
        <item>
            <title><![CDATA[Mew あれこれ]]></title>
            <link>https://masutaka.net/2004-02-02-2/</link>
            <guid>https://masutaka.net/2004-02-02-2/</guid>
            <pubDate>Mon, 02 Feb 2004 01:00:00 GMT</pubDate>
            <description><![CDATA[|デフォルトの動作 mew-refile-ctrl-multi =&gt; t の時に
|Summary-mode で c' すると、複数のフォルダに refile されるが、 |ハードリンクが存在するシステムなら、ハードリンクが使われるので、 |ファイルの容量が増えないのでした。 | |Mew-4.0.51 あたりから mew-summary-form-mark-review =&gt; t だけで |(To: だけでなく) CC: に自分が入っている時も *&rsquo; マークを付けて
|くれるようになったようだ。]]></description>
        </item>
        <item>
            <title><![CDATA[16進数で色一覧を表示]]></title>
            <link>https://masutaka.net/2004-02-02-1/</link>
            <guid>https://masutaka.net/2004-02-02-1/</guid>
            <pubDate>Mon, 02 Feb 2004 00:00:00 GMT</pubDate>
            <description><![CDATA[(defun list-hexadecimal-colors-display ()  &#34;16進数で色一覧を表示&#34;  (interactive)  (let ((r 0)  (g 0)  (b 0)  (delta 32)  (color-list ()))  (while (&lt; r 256)  (setq g 0)  (while (&lt; g 256)  (setq b 0)  (while (&lt; b 256)  (setq color-list (append color-list (list (format &#34;#%.2x%.2x%.2x&#34; r g b))))  (setq b (+ b delta)))  (setq g (+ g delta)))  (setq r (+ r delta)))  (list-colors-display color-list))) ]]></description>
        </item>
        <item>
            <title><![CDATA[STOP エラーのデバッグ]]></title>
            <link>https://masutaka.net/2004-01-27-1/</link>
            <guid>https://masutaka.net/2004-01-27-1/</guid>
            <pubDate>Tue, 27 Jan 2004 00:00:00 GMT</pubDate>
            <description><![CDATA[http://homepage1.nifty.com/~naru/analyze.htm 会社のPCもブルースクリーンになるけど、停止せずに一気に
BIOS 起動画面に戻ってしまうからデバッグは難しいかなあ。]]></description>
        </item>
        <item>
            <title><![CDATA[remove => commit したファイルを復活させる方法]]></title>
            <link>https://masutaka.net/2004-01-21-1/</link>
            <guid>https://masutaka.net/2004-01-21-1/</guid>
            <pubDate>Wed, 21 Jan 2004 00:00:00 GMT</pubDate>
            <description><![CDATA[|% cvs log [ファイル名]
|
|で、過去のリビジョンをみて、削除する直前のリビジョンが 1.x だった場合、
|
|% cvs update -p -r 1.x [ファイル名] &gt; [ファイル名]
| p
|とかすれば、ローカルにもってこれる。それを再度コミットすれば復活する。
|
|手順としては
|1. 過去のリビジョンのファイルをローカルに持ってくる。
| % cvs update -p -r 1.x [ファイル名] &gt; [ファイル名]
|2. このファイルをとっておく。
| % cp [ファイル名] [ファイル名].bak
|3. StickyTag を外す。今回はローカルからファイルが削除される。Warning でるけど無視。
| % cvs update -A [ファイル名]
|4. リネームしたファイルをもどす。
| % mv [ファイル名].bak [ファイル名]
|5. commit する。
| % cvs add [ファイル名]
| % cvs commit [ファイル名]]]></description>
        </item>
        <item>
            <title><![CDATA[大文字小文字を区別しない置換]]></title>
            <link>https://masutaka.net/2004-01-20-1/</link>
            <guid>https://masutaka.net/2004-01-20-1/</guid>
            <pubDate>Tue, 20 Jan 2004 00:00:00 GMT</pubDate>
            <description><![CDATA[% echo &ldquo;charset=UTF-8&rdquo; | sed -e &rsquo;s/charset=utf-8/charset=euc-jp/'
charset=UTF-8
% echo &ldquo;charset=UTF-8&rdquo; | sed -e &rsquo;s/charset=utf-8/charset=euc-jp/i'
charset=euc-jp]]></description>
        </item>
        <item>
            <title><![CDATA[cd した履歴を辿ってくれる。]]></title>
            <link>https://masutaka.net/2004-01-08-1/</link>
            <guid>https://masutaka.net/2004-01-08-1/</guid>
            <pubDate>Thu, 08 Jan 2004 00:00:00 GMT</pubDate>
            <description><![CDATA[% cd -[TAB]]]></description>
        </item>
        <item>
            <title><![CDATA[ある *.el を require しているパッケージを表示。]]></title>
            <link>https://masutaka.net/2003-11-17-1/</link>
            <guid>https://masutaka.net/2003-11-17-1/</guid>
            <pubDate>Mon, 17 Nov 2003 00:00:00 GMT</pubDate>
            <description><![CDATA[(require &#39;loadhist) (file-dependents (feature-file &#39;cl)) ]]></description>
        </item>
        <item>
            <title><![CDATA[正規表現メモ]]></title>
            <link>https://masutaka.net/2003-11-11-1/</link>
            <guid>https://masutaka.net/2003-11-11-1/</guid>
            <pubDate>Tue, 11 Nov 2003 00:00:00 GMT</pubDate>
            <description><![CDATA[|+ をサポートしているかどうかは、コマンドによります。
|grep では使えない、perl 内蔵の grep では使える、などなど。
|* は必ずサポートしているので、面倒でも [a-zA-Z0-9]+ を
|[a-zA-Z0-9][a-zA-Z0-9]* と書くと普遍的です。
|
|# perl では回数も指定できます。[a-zA-Z0-9]{3} は3回。
|
|ということなので、grep するなら
|[a-zA-Z0-9][a-zA-Z0-9]*.c
|perlなら
|\w+.c あるいは \b.c
|でいけると思います。]]></description>
        </item>
        <item>
            <title><![CDATA[コマンドラインから hoge.wav を再生する。]]></title>
            <link>https://masutaka.net/2003-10-27-1/</link>
            <guid>https://masutaka.net/2003-10-27-1/</guid>
            <pubDate>Mon, 27 Oct 2003 00:00:00 GMT</pubDate>
            <description><![CDATA[% cat hoge.wav &gt; /dev/dsp
% play hoge.wav	# sox hoge.wav -t ossdsp /dev/dsp
% playwave hoge.wav]]></description>
        </item>
        <item>
            <title><![CDATA[xmodmap]]></title>
            <link>https://masutaka.net/2003-10-21-2/</link>
            <guid>https://masutaka.net/2003-10-21-2/</guid>
            <pubDate>Tue, 21 Oct 2003 01:00:00 GMT</pubDate>
            <description><![CDATA[xev でキーコードを確認し，xmodmap で
|keycode 115 = Hyper_L
|keycode 116 = Hyper_R
|add mod3 = Hyper_L
|add mod3 = Hyper_R
として Windows キーを Hyper キーとして使えるらしい。
Super キーというのもあるらしい。]]></description>
        </item>
        <item>
            <title><![CDATA[Mac アドレスの調べ方]]></title>
            <link>https://masutaka.net/2003-10-21-1/</link>
            <guid>https://masutaka.net/2003-10-21-1/</guid>
            <pubDate>Tue, 21 Oct 2003 00:00:00 GMT</pubDate>
            <description><![CDATA[|% dmesg | grep &ldquo;Ethernet address&rdquo;]]></description>
        </item>
        <item>
            <title><![CDATA[run-at-time()]]></title>
            <link>https://masutaka.net/2003-10-09-1/</link>
            <guid>https://masutaka.net/2003-10-09-1/</guid>
            <pubDate>Thu, 09 Oct 2003 00:00:00 GMT</pubDate>
            <description><![CDATA[;;foo() を 2003/10/9 3:12:30 に実行する。 (run-at-time (encode-time 30 12 3 9 10 2003) nil &#39;foo) ]]></description>
        </item>
        <item>
            <title><![CDATA[メールヘッダを出力]]></title>
            <link>https://masutaka.net/2003-10-08-1/</link>
            <guid>https://masutaka.net/2003-10-08-1/</guid>
            <pubDate>Wed, 08 Oct 2003 00:00:00 GMT</pubDate>
            <description><![CDATA[% sed -n &lsquo;1,/^$/p&rsquo; [ファイル名]]]></description>
        </item>
        <item>
            <title><![CDATA[elisp で書かれた Window Manager]]></title>
            <link>https://masutaka.net/2003-10-02-3/</link>
            <guid>https://masutaka.net/2003-10-02-3/</guid>
            <pubDate>Thu, 02 Oct 2003 02:00:00 GMT</pubDate>
            <description><![CDATA[(URL: X Emacs Window Manager )]]></description>
        </item>
        <item>
            <title><![CDATA[Emacs 年表]]></title>
            <link>https://masutaka.net/2003-10-02-2/</link>
            <guid>https://masutaka.net/2003-10-02-2/</guid>
            <pubDate>Thu, 02 Oct 2003 01:00:00 GMT</pubDate>
            <description><![CDATA[(URL: A History of Emacs )
(URL: Emacs Timeline )
(URL: Mule/Emacsの歴史 ) 右上の Mule/Emacs の歴史 -&gt; (左上の)Historical drawing]]></description>
        </item>
        <item>
            <title><![CDATA[Linuxによるシステム構築を目指す人のための情報交換フォーラム]]></title>
            <link>https://masutaka.net/2003-10-02-1/</link>
            <guid>https://masutaka.net/2003-10-02-1/</guid>
            <pubDate>Thu, 02 Oct 2003 00:00:00 GMT</pubDate>
            <description><![CDATA[URL: http://www.atmarkit.co.jp/flinux/index.html ]]></description>
        </item>
        <item>
            <title><![CDATA[ssh-agent を使用して、パスワードを聞かれないようにする。]]></title>
            <link>https://masutaka.net/2003-09-23-1/</link>
            <guid>https://masutaka.net/2003-09-23-1/</guid>
            <pubDate>Tue, 23 Sep 2003 00:00:00 GMT</pubDate>
            <description><![CDATA[ローカルとリモートの ~/.ssh は消した。
  公開鍵を生成
   cygwin % ssh-keygen -t rsa
Generating public/private rsa key pair.
Enter file in which to save the key (/home/masutaka/.ssh/id_rsa): # &lt;= Enter(default)
Created directory &lsquo;/home/masutaka/.ssh&rsquo;.
Enter passphrase (empty for no passphrase): # &lt;= パスワードを入力
Enter same passphrase again: # &lt;= もう一度パスワードを入力
Your identification has been saved in /home/masutaka/.ssh/id_rsa.
Your public key has been saved in /home/masutaka/.ssh/id_rsa.pub.
The key fingerprint is:]]></description>
        </item>
        <item>
            <title><![CDATA[memtest86 ]]></title>
            <link>https://masutaka.net/2003-09-13-1/</link>
            <guid>https://masutaka.net/2003-09-13-1/</guid>
            <pubDate>Sat, 13 Sep 2003 00:00:00 GMT</pubDate>
            <description><![CDATA[memory checker として定番らしい。ちなみに下の URL は Meadow で有名な himi さんの日記。
URL: http://ko.meadowy.net/~himi/diary/20030902.html ]]></description>
        </item>
        <item>
            <title><![CDATA[Emacs Lisp での繰り返しの書き方]]></title>
            <link>https://masutaka.net/2003-09-11-1/</link>
            <guid>https://masutaka.net/2003-09-11-1/</guid>
            <pubDate>Thu, 11 Sep 2003 00:00:00 GMT</pubDate>
            <description><![CDATA[繰り返しを書くときは、まず mapcar, find-if などの高階関数で書けるかどう
かを検討する。書けなければ dolist, dotimes などを使う。それでも書けなけ
れば、while, loop, 再帰を使う。
(URL: お気楽ごくらくプログラミング入門 &ndash; Lisper への道 &ndash; )
(URL: (Scheme) (Lisp) )]]></description>
        </item>
        <item>
            <title><![CDATA[list を car しながら loop 処理させる。]]></title>
            <link>https://masutaka.net/2003-09-07-2/</link>
            <guid>https://masutaka.net/2003-09-07-2/</guid>
            <pubDate>Sun, 07 Sep 2003 01:00:00 GMT</pubDate>
            <description><![CDATA[(dolist (target &#39;(a b c))  (if (eql &#39;b target) (return target))) ]]></description>
        </item>
        <item>
            <title><![CDATA[XEmacs-21.4.14 のインストール]]></title>
            <link>https://masutaka.net/2003-09-07-1/</link>
            <guid>https://masutaka.net/2003-09-07-1/</guid>
            <pubDate>Sun, 07 Sep 2003 00:00:00 GMT</pubDate>
            <description><![CDATA[*** XEmacs 本体のインストール ***
|% ncftpget ftp.xemacs.org . |&gt; /tux/xemacs/xemacs-21.4/xemacs-21.4.14-src.tar.gz |&gt; /tux/xemacs/xemacs-21.4/xemacs-21.4.14-elc.tar.gz |&gt; /tux/xemacs/xemacs-21.4/xemacs-21.4.14-info.tar.gz
|% tar xvzf xemacs-21.4.14-src.tar.gz
|% tar xvzf xemacs-21.4.14-info.tar.gz
|% tar xvzf xemacs-21.4.14-elc.tar.gz
|% cd xemacs-21.4.14
|% ./configure &ndash;with-mule &ndash;with-wnn &ndash;with-xfs &ndash;without-canna &ndash;without-wnn6 &ndash;without-xim
|% make
|# make install
|# cd /usr/local/lib/xemacs/mule-packages/etc
|# (cd app-defaults &amp;&amp; ln -s ja ja_JP.eucJP)
|# (cd start-files &amp;&amp; ln -s ja ja_JP.eucJP)
|# cd /usr/local
|# chmod -R go-w .
|# chown -R root .]]></description>
        </item>
        <item>
            <title><![CDATA[正規表現を interactive にテストする]]></title>
            <link>https://masutaka.net/2003-08-27-1/</link>
            <guid>https://masutaka.net/2003-08-27-1/</guid>
            <pubDate>Wed, 27 Aug 2003 00:00:00 GMT</pubDate>
            <description><![CDATA[M-x re-builder]]></description>
        </item>
        <item>
            <title><![CDATA[XEmacs は site-lisp の一個下のディレクトリまでしか load-path に追加されない。]]></title>
            <link>https://masutaka.net/2003-08-09-1/</link>
            <guid>https://masutaka.net/2003-08-09-1/</guid>
            <pubDate>Sat, 09 Aug 2003 00:00:00 GMT</pubDate>
            <description><![CDATA[2ch Emacs part9 の 235 と 236 のレスより
|startup.el から利用されてる setup-paths.elの中の
|paths-site-load-path-depth これか。
|defvar になってるけど、init.el での指定は時期が遅いかな。ためしてないけど。]]></description>
        </item>
        <item>
            <title><![CDATA[cvs annotate]]></title>
            <link>https://masutaka.net/2003-08-08-1/</link>
            <guid>https://masutaka.net/2003-08-08-1/</guid>
            <pubDate>Fri, 08 Aug 2003 00:00:00 GMT</pubDate>
            <description><![CDATA[特定の行を最後に変更した場所を表示する。
ソースコードを読むための技術 http://i.loveruby.net/ja/misc/readingcode.html ]]></description>
        </item>
        <item>
            <title><![CDATA[HOSTS ファイルの在処]]></title>
            <link>https://masutaka.net/2003-08-01-1/</link>
            <guid>https://masutaka.net/2003-08-01-1/</guid>
            <pubDate>Fri, 01 Aug 2003 00:00:00 GMT</pubDate>
            <description><![CDATA[WinXP&hellip;&hellip;C:\WINDOWS\system32\drivers\etc\hosts
Win2000&hellip;.C:\WINNT\system32\drivers\etc\hosts
Win9X(ME)..C:\Windows\hosts]]></description>
        </item>
        <item>
            <title><![CDATA[root で日本語パッチを当てた後は以下を実行。]]></title>
            <link>https://masutaka.net/2003-07-22-1/</link>
            <guid>https://masutaka.net/2003-07-22-1/</guid>
            <pubDate>Tue, 22 Jul 2003 00:00:00 GMT</pubDate>
            <description><![CDATA[XUL.mfasl を削除。 &ldquo;MozillaFirebird &ndash;UILocale ja-JP -contentLocale JP&rdquo; で起動。  ※ FireFox は当時、Mozilla Firebird って名前だった。]]></description>
        </item>
        <item>
            <title><![CDATA[自宅での samba の設定]]></title>
            <link>https://masutaka.net/2003-07-21-1/</link>
            <guid>https://masutaka.net/2003-07-21-1/</guid>
            <pubDate>Mon, 21 Jul 2003 00:00:00 GMT</pubDate>
            <description><![CDATA[日本sambaユーザ会：http://www.samba.gr.jp/ を参考にして
Linux から http://192.168.0.3:901/ へのアクセスは出来るようになった。
lokkitから設定 =&gt; 901:tcp,139:tcp,138:udp,137:udp
追記(2003-09-22):
root で &ldquo;smbpasswd -a masutaka&rdquo; を実行する必要があった。
http://www5c.biglobe.ne.jp/~yamag/data/Soft/LinuxInstMemo.html#Samba 追記(2005-10-09):
WindowsXP からの各ディレクトリの最初のアクセスだけ異常に遅かったが、
Samba サーバ側でポート 80 を閉じていたことが原因だった。lokkitの設
定を変更することで解決できた。
http://www.samba.gr.jp/ml/article/samba-jp/msg14926.html  (1) root で lokkit を起動する。
(2) Customize を押下
(3) SSH, Telnet, WWW, FTP にチェックを入れる。
(4) Other ports に swat:tcp,netbios-ssn:tcp,netbios-dgm:udp,netbios-ns:udp を記述
(5) OK を 押下
(6) OK を 押下
この設定は RedHat では /etc/sysconfig/ipchains に書き込まれる。
Debian では /etc/default/lokkit に書き込まれる。
/etc/services にポート番号とサービスの一覧がある。
 ]]></description>
        </item>
        <item>
            <title><![CDATA[Let's NOTE W2 CF-W2AW1AXR の紹介ページ]]></title>
            <link>https://masutaka.net/2003-07-20-1/</link>
            <guid>https://masutaka.net/2003-07-20-1/</guid>
            <pubDate>Sun, 20 Jul 2003 00:00:00 GMT</pubDate>
            <description><![CDATA[URL: http://panasonic.jp/pc/products/w2a/index.html URL: http://www.kakaku.com/prdsearch/detail.asp?ItemCD=002004&MakerCD=65&Product=Let%27s+NOTE+W2+CF%2DW2AW1AXR URL: http://pc.watch.impress.co.jp/docs/2003/0507/pana.htm ]]></description>
        </item>
        <item>
            <title><![CDATA[XEmacs-21.4.14 のインストール]]></title>
            <link>https://masutaka.net/2003-07-19-1/</link>
            <guid>https://masutaka.net/2003-07-19-1/</guid>
            <pubDate>Sat, 19 Jul 2003 00:00:00 GMT</pubDate>
            <description><![CDATA[*** XEmacs 本体のインストール ***
|% ncftpget ftp.jp.xemacs.org . |&gt; /pub/GNU/xemacs/xemacs-21.4/xemacs-21.4.13-src.tar.gz |&gt; /pub/GNU/xemacs/xemacs-21.4/xemacs-21.4.13-info.tar.gz |&gt; /pub/GNU/xemacs/xemacs-21.4/xemacs-21.4.13-elc.tar.gz
|% tar xvzf xemacs-21.4.13-src.tar.gz
|% tar xvzf xemacs-21.4.13-info.tar.gz
|% tar xvzf xemacs-21.4.13-elc.tar.gz
|% cd xemacs-21.4.13
|% ./configure &ndash;with-mule &ndash;with-wnn &ndash;with-xfs &ndash;without-canna &ndash;without-wnn6 &ndash;without-xim
|% make
|# make install
*** package のインストール ***
|% ncftpget ftp.jp.xemacs.org . |&gt; /pub/GNU/xemacs/packages/Sun-1.13-pkg.tar.gz |&gt; /pub/GNU/xemacs/packages/tramp-1.15-pkg.tar.gz |&gt; /pub/GNU/xemacs/packages/vc-cc-1.21-pkg.tar.gz |&gt; /pub/GNU/xemacs/packages/xemacs-mule-sumo-2003-06-29.tar.bz2 |&gt; /pub/GNU/xemacs/packages/xemacs-sumo-2003-06-29.tar.bz2
|# tar xvjf xemacs-sumo-2003-06-29.tar.bz2 -C /usr/local/lib/xemacs
|# tar xvjf xemacs-mule-sumo-2003-06-29.tar.bz2 -C /usr/local/lib/xemacs]]></description>
        </item>
        <item>
            <title><![CDATA[unidiff 形式で diff する。]]></title>
            <link>https://masutaka.net/2003-07-13-1/</link>
            <guid>https://masutaka.net/2003-07-13-1/</guid>
            <pubDate>Sun, 13 Jul 2003 00:00:00 GMT</pubDate>
            <description><![CDATA[% cvs diff -u [file] &gt; [file.patch]]]></description>
        </item>
        <item>
            <title><![CDATA[10進数=>16進数は前者を使った方が安定しているみたい。]]></title>
            <link>https://masutaka.net/2003-07-07-1/</link>
            <guid>https://masutaka.net/2003-07-07-1/</guid>
            <pubDate>Mon, 07 Jul 2003 00:00:00 GMT</pubDate>
            <description><![CDATA[(string-to-number &#34;20&#34; 16) #=&gt; 32 (read (concat &#34;?\\x&#34; &#34;20&#34;)) #=&gt; 32 ]]></description>
        </item>
        <item>
            <title><![CDATA[オーデトワレ]]></title>
            <link>https://masutaka.net/2003-07-06-1/</link>
            <guid>https://masutaka.net/2003-07-06-1/</guid>
            <pubDate>Sun, 06 Jul 2003 00:00:00 GMT</pubDate>
            <description><![CDATA[ローパ ケンゾー の プールオム (Eau de Toilette)]]></description>
        </item>
        <item>
            <title><![CDATA[kakasi の本領発揮らしい]]></title>
            <link>https://masutaka.net/2003-06-28-1/</link>
            <guid>https://masutaka.net/2003-06-28-1/</guid>
            <pubDate>Sat, 28 Jun 2003 00:00:00 GMT</pubDate>
            <description><![CDATA[% wget -q -O - http://pc.2ch.net/unix | kakasi -Ha -Ka -Ja -Ea -ka | w3m
% rsh localhost | kakasi -u -Ha -Ka -Ja -Ea -ka]]></description>
        </item>
        <item>
            <title><![CDATA[foreach 文の使い方]]></title>
            <link>https://masutaka.net/2003-06-26-1/</link>
            <guid>https://masutaka.net/2003-06-26-1/</guid>
            <pubDate>Thu, 26 Jun 2003 00:00:00 GMT</pubDate>
            <description><![CDATA[foreach file (*); if [ -d &ldquo;$file&rdquo; ]; then; ls -alFd $file; fi; end]]></description>
        </item>
        <item>
            <title><![CDATA[tcsh のコンパイル]]></title>
            <link>https://masutaka.net/2003-06-25-2/</link>
            <guid>https://masutaka.net/2003-06-25-2/</guid>
            <pubDate>Wed, 25 Jun 2003 01:00:00 GMT</pubDate>
            <description><![CDATA[config_f.h を以下のように変更
|#define NLS_CATALOGS
|#define KANJI
|#define DSPMBYTE
|#define COLORCAT
configure を実行
|# ./configure
Makefile を以下のように変更
|CFLAGS = -O2
|DFLAGS = -D_PATH_TCSHELL=&rsquo;&quot;${DESTBIN}/tcsh&quot;'
|LDFLAGS=-s
make &amp; install
|# make
|# make install]]></description>
        </item>
        <item>
            <title><![CDATA[ハードコピー]]></title>
            <link>https://masutaka.net/2003-06-25-1/</link>
            <guid>https://masutaka.net/2003-06-25-1/</guid>
            <pubDate>Wed, 25 Jun 2003 00:00:00 GMT</pubDate>
            <description><![CDATA[ImageMagick 付属の import コマンドで Window のハードコピーを取ることができる。]]></description>
        </item>
        <item>
            <title><![CDATA[指定したサイズのファイルを作る。]]></title>
            <link>https://masutaka.net/2003-06-20-1/</link>
            <guid>https://masutaka.net/2003-06-20-1/</guid>
            <pubDate>Fri, 20 Jun 2003 00:00:00 GMT</pubDate>
            <description><![CDATA[% mkfile 1M aaa
% ls -l aaa
-rw&mdash;&mdash;- 1 masutaka masutaka 1048576 Jun 20 09:36 aaa]]></description>
        </item>
        <item>
            <title><![CDATA[大きなサイズのデータを lpr する時は]]></title>
            <link>https://masutaka.net/2003-06-12-1/</link>
            <guid>https://masutaka.net/2003-06-12-1/</guid>
            <pubDate>Thu, 12 Jun 2003 00:00:00 GMT</pubDate>
            <description><![CDATA[WS から大きなデータをlprで流す時 lpr のオプションに -s をつけて、シンボ
リックリンクにして送ってみてください。この場合、元ファイルを参照します
ので、消してはいけません。詳しくは &ldquo;man lpr&rdquo; でどうぞ。]]></description>
        </item>
        <item>
            <title><![CDATA[予約ドメイン名]]></title>
            <link>https://masutaka.net/2003-06-08-1/</link>
            <guid>https://masutaka.net/2003-06-08-1/</guid>
            <pubDate>Sun, 08 Jun 2003 00:00:00 GMT</pubDate>
            <description><![CDATA[メールアドレス等で初期値を持たせる場合など、テストやドキュメントに
使用するドメインは予約ドメイン名として example.com が用意されています。
URL: http://www.rfc-editor.org/rfc/rfc2606.txt また、.jp の場合でも、予約ドメインとしてリザーブされています。
URL: http://jprs.jp/doc/rule/wideusejp-reserved.html ]]></description>
        </item>
        <item>
            <title><![CDATA[WindowsXP でのシェルの変更]]></title>
            <link>https://masutaka.net/2003-06-07-1/</link>
            <guid>https://masutaka.net/2003-06-07-1/</guid>
            <pubDate>Sat, 07 Jun 2003 00:00:00 GMT</pubDate>
            <description><![CDATA[HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\Windows NT\CurrentVersion\Winlogon\Shell
を書き換える。とりあえず、この状態でも[Ctrl]+[Shift]+[Esc]でタスクマネージャが
起動するので、何かあったときはそれで回避できる。]]></description>
        </item>
        <item>
            <title><![CDATA[パスを直接指定して man する。]]></title>
            <link>https://masutaka.net/2003-06-05-1/</link>
            <guid>https://masutaka.net/2003-06-05-1/</guid>
            <pubDate>Thu, 05 Jun 2003 00:00:00 GMT</pubDate>
            <description><![CDATA[% man -M /usr/local/man nkf]]></description>
        </item>
        <item>
            <title><![CDATA[シングルクォートで括れば、なんでも実行できるな。]]></title>
            <link>https://masutaka.net/2003-05-26-2/</link>
            <guid>https://masutaka.net/2003-05-26-2/</guid>
            <pubDate>Mon, 26 May 2003 01:00:00 GMT</pubDate>
            <description><![CDATA[% emacs -q &ndash;no-site-file -batch -eval &lsquo;(message (getenv &ldquo;HOME&rdquo;))&rsquo;]]></description>
        </item>
        <item>
            <title><![CDATA[ppout と copy /b]]></title>
            <link>https://masutaka.net/2003-05-26-1/</link>
            <guid>https://masutaka.net/2003-05-26-1/</guid>
            <pubDate>Mon, 26 May 2003 00:00:00 GMT</pubDate>
            <description><![CDATA[&ldquo;ppout $1&rdquo; と &ldquo;copy /b $1 prn:&rdquo; は同じ？]]></description>
        </item>
        <item>
            <title><![CDATA[Becky! のセキュリティホール]]></title>
            <link>https://masutaka.net/2003-05-17-1/</link>
            <guid>https://masutaka.net/2003-05-17-1/</guid>
            <pubDate>Sat, 17 May 2003 00:00:00 GMT</pubDate>
            <description><![CDATA[基本はこういうリンクをクリック且つ、mailto プロトコルが Becky! に関連づ
けられているとヤバイんだが、
|mailto:masutaka.net@gmail.com?X-Becky-Attachment=C:\tmp\clmemo_sjis.txt&amp;X-Becky-Action=send&amp;subject=End_of_the_life&amp;body=moudamepo
こういうファイルをブラウザで表示且つ、mailto プロトコルがBecky! に関連づけ
られている場合もヤバイみたい。
|HTML メールを Becky! で表示させていると、メールを見た瞬間に&hellip;。
(ver 2.05.11 以前の話。Ver1 は大丈夫だった。)]]></description>
        </item>
        <item>
            <title><![CDATA[エルダップ Lightweight Directory Access Protocol]]></title>
            <link>https://masutaka.net/2003-05-13-1/</link>
            <guid>https://masutaka.net/2003-05-13-1/</guid>
            <pubDate>Tue, 13 May 2003 00:00:00 GMT</pubDate>
            <description><![CDATA[ディレクトリサーバにアクセスして、登録ユーザのメールアドレスを引っ張っ
てくることができるらしい。このサービスを使えるようになったら、mew-ldap.elを使ってみたい。
URL: http://www.imasy.or.jp/~gotoh/mew.html ]]></description>
        </item>
        <item>
            <title><![CDATA[fetchmail]]></title>
            <link>https://masutaka.net/2003-04-24-1/</link>
            <guid>https://masutaka.net/2003-04-24-1/</guid>
            <pubDate>Thu, 24 Apr 2003 00:00:00 GMT</pubDate>
            <description><![CDATA[fetchmail は、fetch する先のメールサーバから反応がないと、
あきらめて自分で自分を終了する傾向にあるそうです。]]></description>
        </item>
        <item>
            <title><![CDATA[unzip のインストール]]></title>
            <link>https://masutaka.net/2003-04-16-3/</link>
            <guid>https://masutaka.net/2003-04-16-3/</guid>
            <pubDate>Wed, 16 Apr 2003 02:00:00 GMT</pubDate>
            <description><![CDATA[|% tar xvzf unzip550.tar.gz
|% cd unzip-5.50
|% make CC=gcc -f unix/Makefile sunos4
|% make install]]></description>
        </item>
        <item>
            <title><![CDATA[zip のインストール]]></title>
            <link>https://masutaka.net/2003-04-16-2/</link>
            <guid>https://masutaka.net/2003-04-16-2/</guid>
            <pubDate>Wed, 16 Apr 2003 01:00:00 GMT</pubDate>
            <description><![CDATA[|% tar xvzf zip23.tar.gz
|% cd zip-2.3
|% make -f unix/Makefile generic_gcc
|% make install]]></description>
        </item>
        <item>
            <title><![CDATA[rxvt のインストール]]></title>
            <link>https://masutaka.net/2003-04-16-1/</link>
            <guid>https://masutaka.net/2003-04-16-1/</guid>
            <pubDate>Wed, 16 Apr 2003 00:00:00 GMT</pubDate>
            <description><![CDATA[|% tar xvzf rxvt-2.6.4.tar.gz
|% cd rxvt-2.6.4
|% CFLAGS=-O2 ./configure &ndash;enable-kanji &ndash;enable-utmp
|% make
|% make clock
|% make install]]></description>
        </item>
        <item>
            <title><![CDATA[Mozilla が落ちる。]]></title>
            <link>https://masutaka.net/2003-04-05-1/</link>
            <guid>https://masutaka.net/2003-04-05-1/</guid>
            <pubDate>Sat, 05 Apr 2003 00:00:00 GMT</pubDate>
            <description><![CDATA[以下のように起動しないと、Acrobat Reader Plugin が起動した時に Mozilla が落ちることがある。
% LD_PRELOAD=/usr/lib/libXm.so mozilla]]></description>
        </item>
        <item>
            <title><![CDATA[文字列の置換 "hogehoge," => "hogehoge"]]></title>
            <link>https://masutaka.net/2003-04-04-1/</link>
            <guid>https://masutaka.net/2003-04-04-1/</guid>
            <pubDate>Fri, 04 Apr 2003 00:00:00 GMT</pubDate>
            <description><![CDATA[(let ((str &#34;hogehoge,&#34;) (regexp &#34;,$&#34;) (newstr &#34;&#34;))  (cond  ((eq emacs-major-version 21)  (replace-regexp-in-string regexp newstr str))  ((eq emacs-major-version 20)  (progn (string-match regexp str) (replace-match newstr nil nil str)))  ((eq emacs-major-version 19)  (progn (require &#39;dired) (dired-replace-in-string regexp newstr str))))) ]]></description>
        </item>
        <item>
            <title><![CDATA[M-x list-load-path-shadows]]></title>
            <link>https://masutaka.net/2003-03-31-1/</link>
            <guid>https://masutaka.net/2003-03-31-1/</guid>
            <pubDate>Mon, 31 Mar 2003 00:00:00 GMT</pubDate>
            <description><![CDATA[ファイル名がかぶっていて、loadされないファイルを表示する。]]></description>
        </item>
        <item>
            <title><![CDATA[ドメイン情報検索]]></title>
            <link>https://masutaka.net/2003-03-30-1/</link>
            <guid>https://masutaka.net/2003-03-30-1/</guid>
            <pubDate>Sun, 30 Mar 2003 00:00:00 GMT</pubDate>
            <description><![CDATA[% whois -h whois.crsnic.net xxx.com	# &lt;= etc .com .net
% whois -h whois.nic.ad.jp xxx.jp	# &lt;= .jp]]></description>
        </item>
        <item>
            <title><![CDATA[ユーザ名とパスワード]]></title>
            <link>https://masutaka.net/2003-03-28-1/</link>
            <guid>https://masutaka.net/2003-03-28-1/</guid>
            <pubDate>Fri, 28 Mar 2003 00:00:00 GMT</pubDate>
            <description><![CDATA[http://username:password@www.example.net/ でユーザ名とパスワードを打たなくても良くなる。
w3mだと ~/.w3m/passwdに以下のように書く。
machine ホスト名
port ポート番号
path ローカルパート
realm realmの文字列
login ユーザ名
passwd パスワード]]></description>
        </item>
        <item>
            <title><![CDATA[C プログラマが知る C++ の性質]]></title>
            <link>https://masutaka.net/2003-03-27-1/</link>
            <guid>https://masutaka.net/2003-03-27-1/</guid>
            <pubDate>Thu, 27 Mar 2003 00:00:00 GMT</pubDate>
            <description><![CDATA[http://www.hi-ho.ne.jp/hawk/cpp.html ]]></description>
        </item>
        <item>
            <title><![CDATA[wc の使い方]]></title>
            <link>https://masutaka.net/2003-03-26-1/</link>
            <guid>https://masutaka.net/2003-03-26-1/</guid>
            <pubDate>Wed, 26 Mar 2003 00:00:00 GMT</pubDate>
            <description><![CDATA[|% wc -l ~/.emacs	# &lt;= 行数をカウント
|1654 /home/masutaka/.emacs
|% wc -c ~/.emacs	# &lt;= バイト数をカウント(≒ &ldquo;du -sk [file]&rdquo;)
|61938 /home/masutaka/.emacs
※ 他にもカラム数や単語数、文字数などが分かる。]]></description>
        </item>
        <item>
            <title><![CDATA[autoconf -- configure を作成するための Bourne シェルスクリプト群]]></title>
            <link>https://masutaka.net/2003-03-17-1/</link>
            <guid>https://masutaka.net/2003-03-17-1/</guid>
            <pubDate>Mon, 17 Mar 2003 00:00:00 GMT</pubDate>
            <description><![CDATA[autoconf は configure.in から configure を
autoheader は configure.in から config.h.in を
autoscan はソースファイルから configure.in(configure.scan) を作ります。]]></description>
        </item>
        <item>
            <title><![CDATA[コンマ・ピリオドか句読点か？ ]]></title>
            <link>https://masutaka.net/2003-03-15-1/</link>
            <guid>https://masutaka.net/2003-03-15-1/</guid>
            <pubDate>Sat, 15 Mar 2003 00:00:00 GMT</pubDate>
            <description><![CDATA[http://www.jaist.ac.jp/~tojo/orthography.html ]]></description>
        </item>
        <item>
            <title><![CDATA[関数の実体を表示する。]]></title>
            <link>https://masutaka.net/2003-03-12-1/</link>
            <guid>https://masutaka.net/2003-03-12-1/</guid>
            <pubDate>Wed, 12 Mar 2003 00:00:00 GMT</pubDate>
            <description><![CDATA[(symbol-function &#39;MEW-TO) =&gt; (lambda nil (aref mew-vec 5)) ]]></description>
        </item>
        <item>
            <title><![CDATA[zlib の make]]></title>
            <link>https://masutaka.net/2003-03-10-1/</link>
            <guid>https://masutaka.net/2003-03-10-1/</guid>
            <pubDate>Mon, 10 Mar 2003 00:00:00 GMT</pubDate>
            <description><![CDATA[zlib.so* を生成するには、configure に `&ndash;shared&rsquo; オプションを付ければよい。]]></description>
        </item>
        <item>
            <title><![CDATA[ar の使い方]]></title>
            <link>https://masutaka.net/2003-03-07-2/</link>
            <guid>https://masutaka.net/2003-03-07-2/</guid>
            <pubDate>Fri, 07 Mar 2003 01:00:00 GMT</pubDate>
            <description><![CDATA[ *.a で使われているオブジェクトを見る。
|% ar -t *.a *.a で使われているオブジェクトを削除する。
|% ar -d *.a [ModuleName] *.a で使われているオブジェクトを展開する。
|% ar -x *.a  ]]></description>
        </item>
        <item>
            <title><![CDATA[ライブラリの種類]]></title>
            <link>https://masutaka.net/2003-03-07-1/</link>
            <guid>https://masutaka.net/2003-03-07-1/</guid>
            <pubDate>Fri, 07 Mar 2003 00:00:00 GMT</pubDate>
            <description><![CDATA[|.a	=&gt; スタッティックライブラリ
|.so, *.dll	=&gt; ダイナミック(リンク)ライブラリ]]></description>
        </item>
        <item>
            <title><![CDATA[shar で圧縮する]]></title>
            <link>https://masutaka.net/2003-03-06-1/</link>
            <guid>https://masutaka.net/2003-03-06-1/</guid>
            <pubDate>Thu, 06 Mar 2003 00:00:00 GMT</pubDate>
            <description><![CDATA[|% shar -z [dir or file] &gt; [output.shar]
| ~~gzip圧縮する
|sharが添付されているメールに `@&lsquo;マークを付け M-s(mew-summary-unshar)すると、
|指定したディレクトリに解凍される。]]></description>
        </item>
        <item>
            <title><![CDATA[play-sound()]]></title>
            <link>https://masutaka.net/2003-03-02-2/</link>
            <guid>https://masutaka.net/2003-03-02-2/</guid>
            <pubDate>Sun, 02 Mar 2003 01:00:00 GMT</pubDate>
            <description><![CDATA[ GNU-Emacs 21.2.93 だと音を鳴らせるようだ。  (play-sound &#39;(sound :file &#34;~/Mail/email.wav&#34;)) ]]></description>
        </item>
        <item>
            <title><![CDATA[call-process()]]></title>
            <link>https://masutaka.net/2003-03-02-1/</link>
            <guid>https://masutaka.net/2003-03-02-1/</guid>
            <pubDate>Sun, 02 Mar 2003 00:00:00 GMT</pubDate>
            <description><![CDATA[ call-process()でファイル名等を渡す時は expand-file-name()しなければならない。  ]]></description>
        </item>
        <item>
            <title><![CDATA[In-Reply-To は複数の Message-Id を指定できる]]></title>
            <link>https://masutaka.net/2003-03-01-2/</link>
            <guid>https://masutaka.net/2003-03-01-2/</guid>
            <pubDate>Sat, 01 Mar 2003 01:00:00 GMT</pubDate>
            <description><![CDATA[In-Reply-To:って複数の Message-Id:を指定できるみたい。知らなかった。[mew-dist 23085]
Essays about Internet Mail [RFC2822] message-id = &#34;Message-ID:&#34; msg-id CRLF in-reply-to = &#34;In-Reply-To:&#34; 1*msg-id CRLF references = &#34;References:&#34; 1*msg-id CRLF 仮にccヘッダに、A、B、Cという３つのアドレスが書かれている
メールがあった場合、それをメールソフトが「RCPT-To: A」と書いた
メール、そして「RCPT-To: B」、さらに「RCPT-To: C」と書いた３つの
メールに分け、それを順々に１通１通、配送プログラムに渡している。
↓RFC822 に規定されているヘッダは全て説明しているのでいいかも。
http://www2.luice.or.jp/~deai/backn/master/index.html ]]></description>
        </item>
        <item>
            <title><![CDATA[enumの最後の `,`]]></title>
            <link>https://masutaka.net/2003-03-01-1/</link>
            <guid>https://masutaka.net/2003-03-01-1/</guid>
            <pubDate>Sat, 01 Mar 2003 00:00:00 GMT</pubDate>
            <description><![CDATA[[mew-dist 18862]
enumの最後の , は K&amp;R では &ldquo;ない&rdquo; のが正解。
しかし、C99d に対応したコンパイラ(例: GCC 2.96以降)では OK。
関連URL =&gt; プログラミング言語 C の新機能 http://seclan.dll.jp/c99d/c99d00.htm ]]></description>
        </item>
        <item>
            <title><![CDATA[edebug-def-mark]]></title>
            <link>https://masutaka.net/2003-02-28-1/</link>
            <guid>https://masutaka.net/2003-02-28-1/</guid>
            <pubDate>Fri, 28 Feb 2003 00:00:00 GMT</pubDate>
            <description><![CDATA[scratch バッファで edebug-defun() すると、edebug-def-mark がないと言われるときがある。]]></description>
        </item>
        <item>
            <title><![CDATA[補完テーブルを作り直す]]></title>
            <link>https://masutaka.net/2003-02-25-1/</link>
            <guid>https://masutaka.net/2003-02-25-1/</guid>
            <pubDate>Tue, 25 Feb 2003 00:00:00 GMT</pubDate>
            <description><![CDATA[hash -r]]></description>
        </item>
        <item>
            <title><![CDATA[「このいいソフト。」 => 「このソフトはいい。」]]></title>
            <link>https://masutaka.net/2003-02-19-2/</link>
            <guid>https://masutaka.net/2003-02-19-2/</guid>
            <pubDate>Wed, 19 Feb 2003 01:00:00 GMT</pubDate>
            <description><![CDATA[(query-replace-regexp &#34;\\(いい\\|わるい\\)\\(.+?\\)。&#34; &#34;\\2は\\1。&#34;) ]]></description>
        </item>
        <item>
            <title><![CDATA[パイプとリダイレクト]]></title>
            <link>https://masutaka.net/2003-02-19-1/</link>
            <guid>https://masutaka.net/2003-02-19-1/</guid>
            <pubDate>Wed, 19 Feb 2003 00:00:00 GMT</pubDate>
            <description><![CDATA[|&amp;' は 2&gt;&amp;1 |&rsquo; の省略形だが、&gt;&amp; word' は &gt; word 2&gt;&amp;1&rsquo; の省略形ではない。]]></description>
        </item>
        <item>
            <title><![CDATA[shell-mode でパスワードが丸見えになってしまう]]></title>
            <link>https://masutaka.net/2003-02-16-1/</link>
            <guid>https://masutaka.net/2003-02-16-1/</guid>
            <pubDate>Sun, 16 Feb 2003 00:00:00 GMT</pubDate>
            <description><![CDATA[プロンプトが出たら M-x send-invisible してパスワードを打つ。]]></description>
        </item>
        <item>
            <title><![CDATA[プリントキュー]]></title>
            <link>https://masutaka.net/2003-02-14-1/</link>
            <guid>https://masutaka.net/2003-02-14-1/</guid>
            <pubDate>Fri, 14 Feb 2003 00:00:00 GMT</pubDate>
            <description><![CDATA[/var/spool/printがプリントキューらしい。]]></description>
        </item>
        <item>
            <title><![CDATA[animate.el]]></title>
            <link>https://masutaka.net/2003-02-08-1/</link>
            <guid>https://masutaka.net/2003-02-08-1/</guid>
            <pubDate>Sat, 08 Feb 2003 00:00:00 GMT</pubDate>
            <description><![CDATA[M-x animate-birthday-present [Enter] マスタカ [Enter]
;; *scratch* バッファで、以下をコピペ。最後の &#34;)&#34; の後ろで Ctrl-j (animate-string &#34;キタ━━━━━━(゜∀゜)━━━━━━ !!!!!&#34; 13 0) ]]></description>
        </item>
        <item>
            <title><![CDATA[Mozilla プラグイン]]></title>
            <link>https://masutaka.net/2003-02-07-2/</link>
            <guid>https://masutaka.net/2003-02-07-2/</guid>
            <pubDate>Fri, 07 Feb 2003 01:00:00 GMT</pubDate>
            <description><![CDATA[一般ユーザが pluginをインストールすると、~/.mozilla/pluginsに
インストールされるみたい。知らなかった。]]></description>
        </item>
        <item>
            <title><![CDATA[apropos-*]]></title>
            <link>https://masutaka.net/2003-02-07-1/</link>
            <guid>https://masutaka.net/2003-02-07-1/</guid>
            <pubDate>Fri, 07 Feb 2003 00:00:00 GMT</pubDate>
            <description><![CDATA[M-x apropos-variable
C-uをつけないと、全部の変数を見てくれないんだ。知らなかった。
今まで、M-x describe-variable [RET] [TAB] して、C-sで検索していたよ..。
M-x apropos-value
ところで、M-x apropos-value っていうのも見つけた。
どうやら、変数の値を探してくれるようだ。スゲー]]></description>
        </item>
        <item>
            <title><![CDATA[vnc -- UNIX から Windows を操作する]]></title>
            <link>https://masutaka.net/2003-01-31-2/</link>
            <guid>https://masutaka.net/2003-01-31-2/</guid>
            <pubDate>Fri, 31 Jan 2003 01:00:00 GMT</pubDate>
            <description><![CDATA[vncviewerで PCの画面を Sunに表示できるみたい。
でも、PCに vncserverをインストールする必要があるそうな。]]></description>
        </item>
        <item>
            <title><![CDATA[kinput2 on Solaris9]]></title>
            <link>https://masutaka.net/2003-01-31-1/</link>
            <guid>https://masutaka.net/2003-01-31-1/</guid>
            <pubDate>Fri, 31 Jan 2003 00:00:00 GMT</pubDate>
            <description><![CDATA[使い方は知らないけど、以下の設定で &ldquo;kinput2 -wnn &amp;&ldquo;が正常起動する。
XFILESEARCHPATH=/usr/X11R6/lib/X11/app-defaults/Kinput2:$XFILESEARCHPATH]]></description>
        </item>
        <item>
            <title><![CDATA[SunOS への NFS 越しの flock]]></title>
            <link>https://masutaka.net/2003-01-27-2/</link>
            <guid>https://masutaka.net/2003-01-27-2/</guid>
            <pubDate>Mon, 27 Jan 2003 01:00:00 GMT</pubDate>
            <description><![CDATA[やはり、メールサーバに SunOSを使っているのが問題なのかな？
URL: http://www.tt.rim.or.jp/~canada/comp/cgi/tech/sunflock/ ]]></description>
        </item>
        <item>
            <title><![CDATA[Web サイトから日時をゲット]]></title>
            <link>https://masutaka.net/2003-01-27-1/</link>
            <guid>https://masutaka.net/2003-01-27-1/</guid>
            <pubDate>Mon, 27 Jan 2003 00:00:00 GMT</pubDate>
            <description><![CDATA[|% w3m -dump_source www2.crl.go.jp/cgi-bin/JST.cgi | awk -F&quot; &lsquo;/Date.parse/ {print $2}&rsquo;]]></description>
        </item>
        <item>
            <title><![CDATA[マクロを展開してくれる]]></title>
            <link>https://masutaka.net/2003-01-25-1/</link>
            <guid>https://masutaka.net/2003-01-25-1/</guid>
            <pubDate>Sat, 25 Jan 2003 00:00:00 GMT</pubDate>
            <description><![CDATA[(cl-macroexpand &lsquo;(when (boundp &rsquo;emcws-version) emcws-version))
=&gt; (if (boundp (quote emcws-version)) (progn emcws-version))]]></description>
        </item>
        <item>
            <title><![CDATA[mpg123]]></title>
            <link>https://masutaka.net/2003-01-21-1/</link>
            <guid>https://masutaka.net/2003-01-21-1/</guid>
            <pubDate>Tue, 21 Jan 2003 00:00:00 GMT</pubDate>
            <description><![CDATA[「ジェイベルズ」というウィルスが、不正な mp3ヘッダを利用して、
ホームディレクトリを空にしてしまうらしいので、RedHat7.2附属の mpg321に変更した。
インストールしても、mpg123が mpg321へのシンボリックリンクになるので操作上は問題ない。
どうやら、mpg123 0.59rおよび 0.59sの開発ブランチでバッファオーバフローを起こすらしい。
感染はしないので、ウィルスではなく、正しくはトロイの木馬だそうだ。
ちなみに、mpg123でインストールしてあったファイルは以下のとおり。
/usr/local/bin/mpg123
/usr/local/man/man1/mpg123.1
URL: http://it.nikkei.co.jp/it/news/index.cfm?i=2003011904094j0 ]]></description>
        </item>
        <item>
            <title><![CDATA[ChangeLog メモに日本語の曜日を入れる]]></title>
            <link>https://masutaka.net/2003-01-16-1/</link>
            <guid>https://masutaka.net/2003-01-16-1/</guid>
            <pubDate>Thu, 16 Jan 2003 00:00:00 GMT</pubDate>
            <description><![CDATA[http://namazu.org/~satoru/diary/ のコードを ちょこちょこといじって
このファイルに日本語の曜日を入れるようにしてみた。
色付けが気に食わないので add-log.el見て直そうとしたけど、めんどくさそうだ。]]></description>
        </item>
        <item>
            <title><![CDATA[Intlfonts]]></title>
            <link>https://masutaka.net/2003-01-11-2/</link>
            <guid>https://masutaka.net/2003-01-11-2/</guid>
            <pubDate>Sat, 11 Jan 2003 01:00:00 GMT</pubDate>
            <description><![CDATA[豆腐はなくなったけど、肝心の日本語がボールドになってしまう。
% tar xvzf intlfonts-1.3.tar.gz
% cd intlfonts-1.3
% ./configure &ndash;with-fontdir=/usr/X11R6/lib/X11/fonts/intlfonts &ndash;enable-compress=compress &ndash;with-pcf=yes &ndash;with-bdf=no
make install % xset +fp /usr/X11R6/lib/X11/fonts/intlfonts
URL: http://www.tgs.gr.jp/bsdi/software/intlfonts/ ]]></description>
        </item>
        <item>
            <title><![CDATA[Mozilla 高速化]]></title>
            <link>https://masutaka.net/2003-01-11-1/</link>
            <guid>https://masutaka.net/2003-01-11-1/</guid>
            <pubDate>Sat, 11 Jan 2003 00:00:00 GMT</pubDate>
            <description><![CDATA[user.jsに以下を追加。
user_pref(&ldquo;nglayout.initialpaint.delay&rdquo;, 0);]]></description>
        </item>
        <item>
            <title><![CDATA[トライグラフ]]></title>
            <link>https://masutaka.net/2003-01-07-1/</link>
            <guid>https://masutaka.net/2003-01-07-1/</guid>
            <pubDate>Tue, 07 Jan 2003 00:00:00 GMT</pubDate>
            <description><![CDATA[|warning: 6 trigraph(s) encountered
??で始まる文字列はプリプロセッサによって置換される可能性がある。K&amp;R P287参照。]]></description>
        </item>
        <item>
            <title><![CDATA[glib]]></title>
            <link>https://masutaka.net/2002-12-22-1/</link>
            <guid>https://masutaka.net/2002-12-22-1/</guid>
            <pubDate>Sun, 22 Dec 2002 00:00:00 GMT</pubDate>
            <description><![CDATA[|GLIB は Cプログラミングに便利な関数を集めたライブラリである。元々
|は GUIツールキット GTK+ のために開発されたが、現在では汎用的なライ
|ブラリとして GTK+ 以外のソフトウェアでも広く利用されている。私は、
|伸縮可能な配列、連結リスト、ハッシュテーブルといったデータ構造をオ
|ブジェクト指向の API で扱える点が気に入って使っている。
URL: http://namazu.org/~satoru/unimag/9/ ]]></description>
        </item>
        <item>
            <title><![CDATA[ChangeLog メモについてのいろいろな説明]]></title>
            <link>https://masutaka.net/2002-12-19-1/</link>
            <guid>https://masutaka.net/2002-12-19-1/</guid>
            <pubDate>Thu, 19 Dec 2002 00:00:00 GMT</pubDate>
            <description><![CDATA[URL: http://pop-club.hp.infoseek.co.jp/emacs/changelog.html ]]></description>
        </item>
        <item>
            <title><![CDATA[マクロ展開]]></title>
            <link>https://masutaka.net/2002-12-14-1/</link>
            <guid>https://masutaka.net/2002-12-14-1/</guid>
            <pubDate>Sat, 14 Dec 2002 00:00:00 GMT</pubDate>
            <description><![CDATA[|リージョン内のテキストに対してCプリプロセッサを実行し, マクロ呼び
|出しを展開した結果を表示する（`c-macro-expand&rsquo;）. リージョンのま
|えにあるテキストにマクロ定義があることもあるので, それらもプリプ
|ロセッサに渡されるが, その部分の出力は表示しない.
|マクロを用いたCのコードをデバッグするとき, どのようにマクロが展開
|されるか正確に理解するのが難しいことがある. このコマンドを使えば,
|マクロ展開のことを考える必要はない. 展開結果を目にすることができる.
|;; Solarisだと、/lib/cppは存在しないので、以下を設定する。
|(setq c-macro-preprocessor &ldquo;cpp -C&rdquo;)]]></description>
        </item>
        <item>
            <title><![CDATA[PCから Solarisにリモートログインできるようにした]]></title>
            <link>https://masutaka.net/2002-12-12-2/</link>
            <guid>https://masutaka.net/2002-12-12-2/</guid>
            <pubDate>Thu, 12 Dec 2002 01:00:00 GMT</pubDate>
            <description><![CDATA[これで Windows 上で sys を動かすことができる。さらに gnuclient を使えば、
Solaris で動いている Emacs を表示＆操作できる。完璧。
問題は、PC のキーボードが日本語キーボードな点か。]]></description>
        </item>
        <item>
            <title><![CDATA[いつも octal を使うので、忘れないように覚え書き]]></title>
            <link>https://masutaka.net/2002-12-12-1/</link>
            <guid>https://masutaka.net/2002-12-12-1/</guid>
            <pubDate>Thu, 12 Dec 2002 00:00:00 GMT</pubDate>
            <description><![CDATA[% find $HOME -exec chmod go-w {} ;	# &lt;= chmod -R go-w $HOME]]></description>
        </item>
        <item>
            <title><![CDATA[表と裏が違うかどうかだけをチェックする]]></title>
            <link>https://masutaka.net/2002-11-28-1/</link>
            <guid>https://masutaka.net/2002-11-28-1/</guid>
            <pubDate>Thu, 28 Nov 2002 00:00:00 GMT</pubDate>
            <description><![CDATA[% cvs status 2&gt;&amp;1 | grep ^File | grep -v Up-to-date
or
% cvs -n update]]></description>
        </item>
        <item>
            <title><![CDATA[文字コードについて by 2ch]]></title>
            <link>https://masutaka.net/2002-11-23-1/</link>
            <guid>https://masutaka.net/2002-11-23-1/</guid>
            <pubDate>Sat, 23 Nov 2002 00:00:00 GMT</pubDate>
            <description><![CDATA[UTF-8 は言わば文字コードの一枚岩カーネル。世界中の文字をひとつの体系に。
EUC は言わばマイクロカーネル。言語ごとにモジュール化。
SJIS は言わば日本語だけの一枚岩。日本語と英数字が世界のすべて。]]></description>
        </item>
        <item>
            <title><![CDATA[gnuserv Emacs-20.7 のためのパッチ by masutaka]]></title>
            <link>https://masutaka.net/2002-11-19-1/</link>
            <guid>https://masutaka.net/2002-11-19-1/</guid>
            <pubDate>Tue, 19 Nov 2002 00:00:00 GMT</pubDate>
            <description><![CDATA[--- ./gnuserv-3.12.5-orig/gnuserv.el	2002-09-13 21:20:00.000000000 +0900 +++ ./gnuserv-3.12.5/gnuserv.el	2002-11-19 10:43:47.000000000 +0900 @@ -272,7 +272,10 @@  (make-variable-buffer-local &#39;gnuserv-minor-mode)  ;;(pushnew &#39;(gnuserv-minor-mode &#34;Server&#34;) minor-mode-alist  ;;	:test &#39;equal) -(add-minor-mode &#39;gnuserv-minor-mode &#39;gnuserv-mode-line-string) +(if (fboundp &#39;add-minor-mode) + (add-minor-mode &#39;gnuserv-minor-mode &#39;gnuserv-mode-line-string) + (require &#39;alist) + (set-alist &#39;minor-mode-alist &#39;gnuserv-minor-mode (list gnuserv-mode-line-string)))    ;; Sample gnuserv-frame functions ]]></description>
        </item>
        <item>
            <title><![CDATA[環境変数 CYGWIN]]></title>
            <link>https://masutaka.net/2002-11-16-1/</link>
            <guid>https://masutaka.net/2002-11-16-1/</guid>
            <pubDate>Sat, 16 Nov 2002 00:00:00 GMT</pubDate>
            <description><![CDATA[CYGWIN ntsec smbntsec glob
「ntsec」
Windows NT/2000/XPのセキュリティモデルを利用して
UNIX風のファイルとプロセスに対するパーミッション設定を実現するもの。
ただしファイルセキュリティはNTFS上でしか動作しないので、
FAT32上でCygwinを使う場合やWindows 9x系の場合は必要ない。
「smbntsec」
共有フォルダ(Sambaドライブも含む)でも「ntsec」を有効する設定だが、
もしトラブルが起きるようであれば「nosmbntsec」と変更しよう。
「glob」
UNIXスタイルのファイルワイルドカード文字をコマンドプロンプトからでも
有効にするというもの。あらかじめ初期設定で有効になっているが、
ここでは明示化するために指定している。
URL: http://pcweb.mycom.co.jp/special/2002/cygwin/ ]]></description>
        </item>
        <item>
            <title><![CDATA[マクロ行末の '' を挿入]]></title>
            <link>https://masutaka.net/2002-11-08-2/</link>
            <guid>https://masutaka.net/2002-11-08-2/</guid>
            <pubDate>Fri, 08 Nov 2002 01:00:00 GMT</pubDate>
            <description><![CDATA[&ldquo;C-c C-\ (M-x c-backslash-region)&ldquo;で、リージョンの行末に &lsquo;'を挿入する。
インデントも揃えてくれるのでいい感じ。
↑この操作の後に (query-replace &ldquo;\^J&rdquo; &ldquo;/* */^J&rdquo; nil nil nil)を
実行すれば、行末にインデントが整ったコメントが出現する。]]></description>
        </item>
        <item>
            <title><![CDATA[バイトコンパイルの互換性]]></title>
            <link>https://masutaka.net/2002-11-08-1/</link>
            <guid>https://masutaka.net/2002-11-08-1/</guid>
            <pubDate>Fri, 08 Nov 2002 00:00:00 GMT</pubDate>
            <description><![CDATA[from [mew-dist 22212]
 Emacs 20でバイトコンパイルしたファイルを
Emacs 21で使えない場合がある理由って何でしたっけ。
通常は、古いバージョンのEmacsでバイトコンパイルしたファイルは新し
いバージョンのEmacsでも使えるのだけど、Emacs 21ではミニバッファ関
連で互換性を損なう変更があったから、かな。
 ]]></description>
        </item>
        <item>
            <title><![CDATA[ソフト使用レビュー]]></title>
            <link>https://masutaka.net/2002-10-29-1/</link>
            <guid>https://masutaka.net/2002-10-29-1/</guid>
            <pubDate>Tue, 29 Oct 2002 00:00:00 GMT</pubDate>
            <description><![CDATA[|** X-cite(メール引用ユーティリテイ) **
|&ldquo;名前&gt;&ldquo;で引用しない人が多いので、使ってもあんまり意味ない。
|
|** Wanderlust **
|IMAPは、PCで Becky!などでメールを取り込む人にはいいかもしれない。
|自分みたいに Windowsでメール見るときも Tera-term使う人には向かないかも。]]></description>
        </item>
        <item>
            <title><![CDATA[xqbiff を $HOME にインストールした]]></title>
            <link>https://masutaka.net/2002-10-18-1/</link>
            <guid>https://masutaka.net/2002-10-18-1/</guid>
            <pubDate>Fri, 18 Oct 2002 00:00:00 GMT</pubDate>
            <description><![CDATA[% LD_LIBRARY_PATH=$LD_LIBRARY_PATH:/usr/local/lib
% LDFLAGS=&quot;-s -R/usr/local/lib&quot; ./configure &ndash;prefix=$HOME/local &ndash;disable-imlib
% make
% make install
% cp xqbiff.jman ~/local/man/man1/xqbiff.1
% rm -rf ~/local/share/xqbiff
% cp -r image ~/local/share/xqbiff]]></description>
        </item>
        <item>
            <title><![CDATA[rail を $HOME にインストールした]]></title>
            <link>https://masutaka.net/2002-10-15-1/</link>
            <guid>https://masutaka.net/2002-10-15-1/</guid>
            <pubDate>Tue, 15 Oct 2002 00:00:00 GMT</pubDate>
            <description><![CDATA[% make EMACS=emcws-20.7 DEST=$HOME/local/share/elisp/rail distclean all
% make EMACS=emcws-20.7 DEST=$HOME/local/share/elisp/rail install]]></description>
        </item>
        <item>
            <title><![CDATA[at, batch - 指定した時刻にコマンドを実行]]></title>
            <link>https://masutaka.net/2002-10-08-2/</link>
            <guid>https://masutaka.net/2002-10-08-2/</guid>
            <pubDate>Tue, 08 Oct 2002 01:00:00 GMT</pubDate>
            <description><![CDATA[1time-crontabみたいなもの。sleep &lt; at &lt; crontab てな感じかな？]]></description>
        </item>
        <item>
            <title><![CDATA[lpr の使い方]]></title>
            <link>https://masutaka.net/2002-10-08-1/</link>
            <guid>https://masutaka.net/2002-10-08-1/</guid>
            <pubDate>Tue, 08 Oct 2002 00:00:00 GMT</pubDate>
            <description><![CDATA[Unixのシェルからだと
|% lpr -Pxxx.xxx.xxx.xxx:lp file名
WindowsNT、2000などでは、
|&gt; lpr -Sxxx.xxx.xxx.xxx -Plp file名]]></description>
        </item>
        <item>
            <title><![CDATA[電子メールの書式]]></title>
            <link>https://masutaka.net/2002-10-03-1/</link>
            <guid>https://masutaka.net/2002-10-03-1/</guid>
            <pubDate>Thu, 03 Oct 2002 00:00:00 GMT</pubDate>
            <description><![CDATA[電子メールの書式は RFC822 で定義されています。
改定版は RFC2822で、RFC822は obsoleteとなりました。
URL: http://www.mew.org/Newsletters/1.html ]]></description>
        </item>
        <item>
            <title><![CDATA[Mew で日本語 Subject の検索をする]]></title>
            <link>https://masutaka.net/2002-10-01-2/</link>
            <guid>https://masutaka.net/2002-10-01-2/</guid>
            <pubDate>Tue, 01 Oct 2002 01:00:00 GMT</pubDate>
            <description><![CDATA[(setq mew-prog-vgrep &#34;mg&#34;) (setq mew-prog-vgrep-opts &#39;(&#34;-j&#34; &#34;jis&#34; &#34;-l&#34; &#34;-e&#34; &#34;-x&#34; &#34;&amp;mime&#34;)) というのを ~/.mew.el に書いて
 C-u / C-m Subject:.*ほげほげ C-m
などとするとできます。
 追記(2009-05-24):
Mew 4.2.53 から、mew-prog-vgrep と mew-prog-vgrep-opts は削除されま
した。代わりに以下の設定をしてください。検索方法の詳細は、Info の
search と condition の項をご覧下さい。
(setq mew-prog-grep &#34;mg&#34;) (setq mew-prog-grep-opts &#39;(&#34;-j&#34; &#34;jis&#34; &#34;-l&#34; &#34;-e&#34; &#34;-x&#34; &#34;&amp;mime&#34;)) ただ、上記の方法だと ?' や /&rsquo; の時に常に mg を使うことになってし
まいます。それが嫌な人は上の設定はしないで、以下の設定をしてください。
(setq mew-input-pick-command-hist &#39;(&#34;mg -l -jjis -x&amp;mime -e &#34;)) ?' や /&rsquo; の後、何も入力せずに Enter すると
 Cmd opts pattern: grep -l -e]]></description>
        </item>
        <item>
            <title><![CDATA[外部変数のアドレスが決まるタイミング]]></title>
            <link>https://masutaka.net/2002-10-01-1/</link>
            <guid>https://masutaka.net/2002-10-01-1/</guid>
            <pubDate>Tue, 01 Oct 2002 00:00:00 GMT</pubDate>
            <description><![CDATA[static な外部変数はコンパイル時、
extern な外部変数はリンク時にアドレスが決定される。]]></description>
        </item>
        <item>
            <title><![CDATA[デュアルブートの場合の Windows 領域のマウント]]></title>
            <link>https://masutaka.net/2002-09-29-2/</link>
            <guid>https://masutaka.net/2002-09-29-2/</guid>
            <pubDate>Sun, 29 Sep 2002 01:00:00 GMT</pubDate>
            <description><![CDATA[/etc/fstab に以下を追加した。
|/dev/hda1	/mnt/win	vfat	defaults,conv=b 0 0]]></description>
        </item>
        <item>
            <title><![CDATA[lopster のポート]]></title>
            <link>https://masutaka.net/2002-09-29-1/</link>
            <guid>https://masutaka.net/2002-09-29-1/</guid>
            <pubDate>Sun, 29 Sep 2002 00:00:00 GMT</pubDate>
            <description><![CDATA[ポートは 6699 だけを使うようだ。]]></description>
        </item>
        <item>
            <title><![CDATA[wu-ftpd の設定]]></title>
            <link>https://masutaka.net/2002-09-28-2/</link>
            <guid>https://masutaka.net/2002-09-28-2/</guid>
            <pubDate>Sat, 28 Sep 2002 01:00:00 GMT</pubDate>
            <description><![CDATA[|/etc/xinetd.conf:13
|# 2002.09.23 masutaka
|#only_from	= localhost
|
|/etc/xinetd.d/wu-ftpd:14
|# 2002.09.23 masutaka &ldquo;disable = yes&quot;で起動不可
|disable	= no
|
|/etc/ftpaccess の中の最後に以下を追加。
|guestgroup hoge
|
|これでhogeグループユーザーはバッチリ仮想ルートになります。]]></description>
        </item>
        <item>
            <title><![CDATA[alist]]></title>
            <link>https://masutaka.net/2002-09-28-1/</link>
            <guid>https://masutaka.net/2002-09-28-1/</guid>
            <pubDate>Sat, 28 Sep 2002 00:00:00 GMT</pubDate>
            <description><![CDATA[「alist」 とは Association List の略で、
&lsquo;((key1 . val1) (key2 . val2) (key3 . val3) &hellip;.)
という形式を表す言葉で 特殊な形式の list 構造です。(by yuuji)]]></description>
        </item>
        <item>
            <title><![CDATA[PBM/PGM/PPM ファイル作成方法]]></title>
            <link>https://masutaka.net/2002-09-26-3/</link>
            <guid>https://masutaka.net/2002-09-26-3/</guid>
            <pubDate>Thu, 26 Sep 2002 02:00:00 GMT</pubDate>
            <description><![CDATA[|ヘッダは、以下の形式。
        マジックナンバー   画像幅 画像高   階調(PGMとPPMで必要)   &mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&ndash;      ↓マジックナンバーと画像データの対応表         &mdash;+&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;-   P1   P2   P3   P4   P5   P6      階調は、8bit-&gt;255、4bit-&gt;15、2bit-&gt;3。   PBMの場合は必要なし。      P[BGP]Mファイルを一番簡単に作製する方法は      % cat head   P5   6896 4848   255      のようなファイルを作っておき、      % cat head [rawファイル] &gt; [pgmファイル]      とかすればよい。    ]]></description>
        </item>
        <item>
            <title><![CDATA[Palm標準ソフト]]></title>
            <link>https://masutaka.net/2002-09-26-2/</link>
            <guid>https://masutaka.net/2002-09-26-2/</guid>
            <pubDate>Thu, 26 Sep 2002 01:00:00 GMT</pubDate>
            <description><![CDATA[| Dict.prc	辞書管理ソフト
| EiwaS.pdb	英和辞書データ(中)
| EiwaT.pdb	英和辞書データ(小)
| Giraffe.prc	ゲーム：Graffiti練習ゲーム
| Hardball.prc	ゲーム：ブロック崩し
| Minehunt.prc	ゲーム：マインスイーパー
| padhtall.prc*	通信関係のソフト
| Puzzle.prc	ゲーム：パズル
| serircom.prc*	赤外線利用ソフト
| Subhunt.prc	ゲーム：魚雷ゲーム
| syncplane.prc*	シンクロナイズのソフト
| WaeiS.pdb	和英辞書データ(中)
| WaeiT.pdb	和英辞書データ(小)
| (*は初めのHotsyncの時に自動インストールされます)]]></description>
        </item>
        <item>
            <title><![CDATA[Dynabook PA-DB70P5MC 奨励 CD-RW/CD-R メディア]]></title>
            <link>https://masutaka.net/2002-09-26-1/</link>
            <guid>https://masutaka.net/2002-09-26-1/</guid>
            <pubDate>Thu, 26 Sep 2002 00:00:00 GMT</pubDate>
            <description><![CDATA[|【CD-RW】
|三菱化学 (株)、リコー (株)
|
|【CD-R】
|太陽誘電 (株)、TDK (株)、三井化学 (株)、三菱化学 (株)、リコー (株)、日立マクセル (株)]]></description>
        </item>
        <item>
            <title><![CDATA[CVS/RCS に使えるキーワードの種類]]></title>
            <link>https://masutaka.net/2002-09-22-1/</link>
            <guid>https://masutaka.net/2002-09-22-1/</guid>
            <pubDate>Sun, 22 Sep 2002 00:00:00 GMT</pubDate>
            <description><![CDATA[&lsquo;man co&rsquo;で CVS/RCS に使えるキーワードの種類が分かる。(ex. $Author$)
URL: http://www.linux.or.jp/JF/JFdocs/RCS.html ]]></description>
        </item>
        <item>
            <title><![CDATA[hostのIPアドレス+αを得る]]></title>
            <link>https://masutaka.net/2002-09-20-1/</link>
            <guid>https://masutaka.net/2002-09-20-1/</guid>
            <pubDate>Fri, 20 Sep 2002 00:00:00 GMT</pubDate>
            <description><![CDATA[% /usr/sbin/nslookup [hostname]]]></description>
        </item>
        <item>
            <title><![CDATA[up2date の接続先変更]]></title>
            <link>https://masutaka.net/2002-09-19-1/</link>
            <guid>https://masutaka.net/2002-09-19-1/</guid>
            <pubDate>Thu, 19 Sep 2002 00:00:00 GMT</pubDate>
            <description><![CDATA[|# vi /etc/sysconfig/rhn/up2date
|
|※55行目付近
|noSSLServerURL=http://www.rhns.redhat.com/XMLRPC
| ↓
|noSSLServerURL=http://rhns.jp.redhat.com/XMLRPC
|
|※67行目付近
|serverURL=https://www.rhns.redhat.com/XMLRPC
| ↓
|serverURL=https://rhns.jp.redhat.com/XMLRPC]]></description>
        </item>
        <item>
            <title><![CDATA[user.js に以下を書くことによって referer の送出を止める。]]></title>
            <link>https://masutaka.net/2002-09-18-1/</link>
            <guid>https://masutaka.net/2002-09-18-1/</guid>
            <pubDate>Wed, 18 Sep 2002 00:00:00 GMT</pubDate>
            <description><![CDATA[user_pref(&ldquo;network.http.sendRefererHeader&rdquo;, 0);]]></description>
        </item>
        <item>
            <title><![CDATA[拡張子変更]]></title>
            <link>https://masutaka.net/2002-09-14-1/</link>
            <guid>https://masutaka.net/2002-09-14-1/</guid>
            <pubDate>Sat, 14 Sep 2002 00:00:00 GMT</pubDate>
            <description><![CDATA[ *.aaa を *.bbb に一発で変える方法教えて下さい。
mv *.aaa *.bbb じゃ出来ないです。
rename aaa bbb *.aaa
でいいじゃん
 ]]></description>
        </item>
        <item>
            <title><![CDATA[型変換]]></title>
            <link>https://masutaka.net/2002-09-03-1/</link>
            <guid>https://masutaka.net/2002-09-03-1/</guid>
            <pubDate>Tue, 03 Sep 2002 00:00:00 GMT</pubDate>
            <description><![CDATA[from himi
|C言語では、
|
|P +- P -&gt; I
|P +- I -&gt; P
|
|が、型変換として保証されているので、pointerはpointerのまま、増減の分だけ
|integerとして計算すればよろしい。(Pはpointer, Iは整数型)]]></description>
        </item>
        <item>
            <title><![CDATA[ダンププログラム]]></title>
            <link>https://masutaka.net/2002-08-22-1/</link>
            <guid>https://masutaka.net/2002-08-22-1/</guid>
            <pubDate>Thu, 22 Aug 2002 00:00:00 GMT</pubDate>
            <description><![CDATA[% od -x [ファイル名]]]></description>
        </item>
        <item>
            <title><![CDATA[プリプロセスのみ]]></title>
            <link>https://masutaka.net/2002-08-19-1/</link>
            <guid>https://masutaka.net/2002-08-19-1/</guid>
            <pubDate>Mon, 19 Aug 2002 00:00:00 GMT</pubDate>
            <description><![CDATA[gcc でプリプロセッサだけを走らせてコンパイルはしたくないときは
&lsquo;-E&rsquo; オプションを付ければよい。]]></description>
        </item>
        <item>
            <title><![CDATA[httpサーバの種類を見る]]></title>
            <link>https://masutaka.net/2002-07-31-1/</link>
            <guid>https://masutaka.net/2002-07-31-1/</guid>
            <pubDate>Wed, 31 Jul 2002 00:00:00 GMT</pubDate>
            <description><![CDATA[| % w3m -dump_head http://www.example.com/ | HTTP/1.1 200 OK
| Server: Microsoft-IIS/4.0
| Content-Location: http://www.example.com/index.htm | Date: Tue, 30 Jul 2002 15:29:36 GMT
| Content-Type: text/html
| Accept-Ranges: bytes
| Last-Modified: Mon, 15 Jul 2002 02:27:42 GMT
| ETag: &ldquo;40857732a72bc21:19a7&rdquo;
| Content-Length: 7586]]></description>
        </item>
        <item>
            <title><![CDATA[zsh-tips第？弾]]></title>
            <link>https://masutaka.net/2002-07-24-1/</link>
            <guid>https://masutaka.net/2002-07-24-1/</guid>
            <pubDate>Wed, 24 Jul 2002 00:00:00 GMT</pubDate>
            <description><![CDATA[|which コマンド名 と &lsquo;=コマンド名&rsquo;は同じ
|% ls -al =emacs
|lrwxrwxrwx 1 root root 5 Apr 30 06:44 /usr/local/bin/emacs -&gt; emcws
|
|rm *.o~hoge.o で hoge.o 以外の全ての *.o が消せる。
|
|ワイルドカードの部分に &lt;ここから-ここまで&gt; のように
|数値を指定すると数値的にその範囲内に当たるファイル名がマッチする。
|{ここから..ここまで}との違いはエラーを出さないこと。
|% ls -a &lt;1-10&gt;
|1 2 4 5]]></description>
        </item>
        <item>
            <title><![CDATA[略語あれこれ ]]></title>
            <link>https://masutaka.net/2002-07-23-1/</link>
            <guid>https://masutaka.net/2002-07-23-1/</guid>
            <pubDate>Tue, 23 Jul 2002 00:00:00 GMT</pubDate>
            <description><![CDATA[usrは &ldquo;user services and resources&quot;の略らしい。
Re は concerning の意、 re your letter of … , …の手紙に関して
追記(2015-10-02):
usr の情報源を書いていなかった。
Filesystem Hierarchy Standard - Wikipedia 追記(2015-12-03):
USeR の略説も浮上してきた&hellip;。
/usr は何の略か｜ビットログ  Unix系OSの “/usr” が “User SR” の略であるという裏付けは見つ
かりませんでした。それがない限りは、 “USeR” の略とするのが自然で
あるというのが今のところの結論です。
 ]]></description>
        </item>
        <item>
            <title><![CDATA[file の種類をある程度解析して表示してくれる]]></title>
            <link>https://masutaka.net/2002-07-21-1/</link>
            <guid>https://masutaka.net/2002-07-21-1/</guid>
            <pubDate>Sun, 21 Jul 2002 00:00:00 GMT</pubDate>
            <description><![CDATA[% file [file-name]]]></description>
        </item>
        <item>
            <title><![CDATA[find の結果を他のコマンドに渡してみたり、'!' で否定してみたり]]></title>
            <link>https://masutaka.net/2002-07-18-1/</link>
            <guid>https://masutaka.net/2002-07-18-1/</guid>
            <pubDate>Thu, 18 Jul 2002 00:00:00 GMT</pubDate>
            <description><![CDATA[% find [dir] ! -name *.txt -exec [command] {} ;]]></description>
        </item>
        <item>
            <title><![CDATA[CPU のアーキテクチャ]]></title>
            <link>https://masutaka.net/2002-07-17-1/</link>
            <guid>https://masutaka.net/2002-07-17-1/</guid>
            <pubDate>Wed, 17 Jul 2002 00:00:00 GMT</pubDate>
            <description><![CDATA[i586=Pentinum,MMX Pentinum
i686=Pentinum Pro,Pentinum2〜,Celeron]]></description>
        </item>
        <item>
            <title><![CDATA[セクション構造]]></title>
            <link>https://masutaka.net/2002-07-15-1/</link>
            <guid>https://masutaka.net/2002-07-15-1/</guid>
            <pubDate>Mon, 15 Jul 2002 00:00:00 GMT</pubDate>
            <description><![CDATA[|.text
|実行コードを格納するセクション
|実行・読み込みのみ可能で書込みは不可
|
|.rodata
|定数値を格納するセクション
|読み込みのみ可。書込み・実行は不可
|
|.data
|初期化済みデータを格納するセクション
|読み書きのみ可。実行は不可
|
|.bss
|非初期化データを格納するセクション
|読み書きのみ可。実行は不可
|
|bss はプログラムがロードされた時点で 0 クリア
|されるべき領域だそうです。
|bss が外部変数領域とすると、data はカラー関係の
|テーブルのようなものでしょうかね ??]]></description>
        </item>
        <item>
            <title><![CDATA[Mew で emacs-w3m を使わないで HTML Mail を見る]]></title>
            <link>https://masutaka.net/2002-07-11-1/</link>
            <guid>https://masutaka.net/2002-07-11-1/</guid>
            <pubDate>Thu, 11 Jul 2002 00:00:00 GMT</pubDate>
            <description><![CDATA[いわゆる HTMLメールをみやすい(?)テキストで見るには、summary-modeで &lsquo;:&lsquo;を押す。]]></description>
        </item>
        <item>
            <title><![CDATA[アクセス権の `s' フラグの意味]]></title>
            <link>https://masutaka.net/2002-07-09-1/</link>
            <guid>https://masutaka.net/2002-07-09-1/</guid>
            <pubDate>Tue, 09 Jul 2002 00:00:00 GMT</pubDate>
            <description><![CDATA[|chmod g+s filename or chmod 2755 filename -&gt; -rwxr-sr-x
実行ファイルでグループの x が s になっているとそのグループ ID で動
きます。つまり -rwxr-sr-x masutaka admin &hellip; だと誰でも実行でき、且
つ、実行すると実行者が誰であっても admin group として実行しているこ
とになります。
|chmod u+s filename or chmod 4755 filename -&gt; -rwsr-xr-x
オーナーに s をつけることもできます。-rwsr-xr-x root &hellip; は誰でも実
行できて、実行すると root 権限で実行されます。つまり、root 権限でし
か使えないコマンドをユーザが動かすことが出来ます。
|chmod g+s dirname or chmod 2755 filename -&gt; -rwxr-sr-x
以後、このディレクトリ以下で作るファイルやディレクトリは同じグルー
プになります。]]></description>
        </item>
        <item>
            <title><![CDATA[id コマンドで、所属グループの一覧が出るらしい]]></title>
            <link>https://masutaka.net/2002-07-07-2/</link>
            <guid>https://masutaka.net/2002-07-07-2/</guid>
            <pubDate>Sun, 07 Jul 2002 01:00:00 GMT</pubDate>
        </item>
        <item>
            <title><![CDATA[ruby-gtk]]></title>
            <link>https://masutaka.net/2002-07-07-1/</link>
            <guid>https://masutaka.net/2002-07-07-1/</guid>
            <pubDate>Sun, 07 Jul 2002 00:00:00 GMT</pubDate>
            <description><![CDATA[インストールされるのは、/usr/local/lib/ruby/1.6/i686-linux/gtk.soだけ。
&lsquo;make install&rsquo;の直前に &lsquo;prefix = $(DESTDIR)/usr/local&rsquo;にした。(./src/Makefile)]]></description>
        </item>
        <item>
            <title><![CDATA[パッケージとかパッチの作り方]]></title>
            <link>https://masutaka.net/2002-07-04-1/</link>
            <guid>https://masutaka.net/2002-07-04-1/</guid>
            <pubDate>Thu, 04 Jul 2002 00:00:00 GMT</pubDate>
            <description><![CDATA[URL: http://www9.cds.ne.jp/~proxon/ ]]></description>
        </item>
        <item>
            <title><![CDATA[背景が暗いかどうかを調べる]]></title>
            <link>https://masutaka.net/2002-06-30-1/</link>
            <guid>https://masutaka.net/2002-06-30-1/</guid>
            <pubDate>Sun, 30 Jun 2002 00:00:00 GMT</pubDate>
            <description><![CDATA[背景が暗いかどうかを見たいだけなら
(eq &lsquo;dark (cdr (assq &lsquo;background-mode (frame-parameters))))
でいけると思われ。
t になったからといって -rv で起動したとは限らないが。]]></description>
        </item>
        <item>
            <title><![CDATA[インストールされるファイルの場所を確認]]></title>
            <link>https://masutaka.net/2002-06-29-1/</link>
            <guid>https://masutaka.net/2002-06-29-1/</guid>
            <pubDate>Sat, 29 Jun 2002 00:00:00 GMT</pubDate>
            <description><![CDATA[まず make install の前に make -n install して確認。
インストールされるファイルの一覧を得るには。
% touch timestamp
% make install
% find /etc /usr /var -cnewer timestamp | less]]></description>
        </item>
        <item>
            <title><![CDATA[pkgadd や pkgrm などの説明]]></title>
            <link>https://masutaka.net/2002-06-25-1/</link>
            <guid>https://masutaka.net/2002-06-25-1/</guid>
            <pubDate>Tue, 25 Jun 2002 00:00:00 GMT</pubDate>
            <description><![CDATA[URL: http://www-hlab.iis.u-tokyo.ac.jp/~n-ando/unix/solaris/package.html ]]></description>
        </item>
        <item>
            <title><![CDATA[FIFAって何の略？]]></title>
            <link>https://masutaka.net/2002-06-24-5/</link>
            <guid>https://masutaka.net/2002-06-24-5/</guid>
            <pubDate>Mon, 24 Jun 2002 04:00:00 GMT</pubDate>
            <description><![CDATA[FIFA Is the Football Association. GNU is Not Unix.と同じ。
追記(2015-07-01):
ガセだった。フランス語で Fédération Internationale de Football
Association とのこと。参考: 国際サッカー連盟 ]]></description>
        </item>
        <item>
            <title><![CDATA[スティッキービットフラグ]]></title>
            <link>https://masutaka.net/2002-06-24-4/</link>
            <guid>https://masutaka.net/2002-06-24-4/</guid>
            <pubDate>Mon, 24 Jun 2002 03:00:00 GMT</pubDate>
            <description><![CDATA[スティッキービットフラグをディレクトリに立てると、
すべてのユーザに書き込みを許すが、所有者以外は削除不可に
することができます。/tmp などに設定されています。
パーミッション設定の頭に1を付けるか、+tを付けます。
% chmod 1777 /tmp/hoge % chmod a+rwxt /tmp/hoge ]]></description>
        </item>
        <item>
            <title><![CDATA[$HOME/bin/Emacs]]></title>
            <link>https://masutaka.net/2002-06-24-3/</link>
            <guid>https://masutaka.net/2002-06-24-3/</guid>
            <pubDate>Mon, 24 Jun 2002 02:00:00 GMT</pubDate>
            <description><![CDATA[2行に分けて書くと、XMODIFIERS=@im=noneが効かなくなる。
1行が長くなる場合は、&rsquo;'を使う。]]></description>
        </item>
        <item>
            <title><![CDATA[PPM/PGM/PBM形式の画像について]]></title>
            <link>https://masutaka.net/2002-06-24-2/</link>
            <guid>https://masutaka.net/2002-06-24-2/</guid>
            <pubDate>Mon, 24 Jun 2002 01:00:00 GMT</pubDate>
            <description><![CDATA[自作のプログラムから簡単に画像ファイルを出力したいときは、
PPM(またはPGM/PBM)形式で出力するととても簡単です．
[PPM形式とは？]
PPM形式(Portable PixMap file format) はRGBカラー画像を扱うためのフォーマットで，
「へッダ＋画像データの羅列」で表現できます．へッダはテキスト形式，
画像データはテキスト/バイナリを選択でき，非常に簡単です．
もちろんデータ圧縮などはありません．
PGM形式(Portable GrayMap file format) は
同様にグレイスケールの画像を扱うためのフォーマットです．
PBM形式(Portable BitMap file format) も
同様に白黒画像(ビットマップ)を扱うためのフォーマットです．
[フォーマットの解説]
PPM形式は以下の順にデータを並べるだけです．
 文字列&quot;P3&quot;．PPM形式を表すための「マジックナンバー」です． 区切り文字．スペースまたはタブまたは改行です． 画像の幅．10進数のテキストで出力します． 区切り文字 画像の高さ．10進数のテキスト． 区切り文字 R,G,B値の最大値．10進数のテキスト． 区切り文字 画像データ．R,G,Bの順に10進数のテキストで並べます．
もちろん値と値の間には区切り文字が必要．また，1行が70文字を越えてはいけません．
なお，&quot;#&ldquo;で始まる行はコメントとして扱われます．  PPMにはバイナリ形式もあります．
□ マジックナンバーを&quot;P3&quot;の代わりに&quot;P6&quot;にします．
□ 画像データは10進数のテキストの代わりにバイナリデータ(8bit)を並べます．
もちろん区切り文字は必要ありません．
□ バイナリデータは8bitなので，R,G,Bの値の最大値は255までしかとれません
(テキスト形式だとこの制約はありません)．
たとえばテキストPPM形式だと以下のような感じです(&lsquo;man ppm&rsquo;より抜粋)．
┌────────────────────────┐ │P3 │ │# feep.ppm │ │4 4 │ │15 │ │ 0 0 0 0 0 0 0 0 0 15 0 15 │ │ 0 0 0 0 15 7 0 0 0 0 0 0 │ │ 0 0 0 0 0 0 0 15 7 0 0 0 │ │15 0 15 0 0 0 0 0 0 0 0 0 │ └────────────────────────┘ PGM形式はPPMのモノクロ版といっていいでしょう．以下に違いを示します．]]></description>
        </item>
        <item>
            <title><![CDATA[パッケージのインストール]]></title>
            <link>https://masutaka.net/2002-06-24-1/</link>
            <guid>https://masutaka.net/2002-06-24-1/</guid>
            <pubDate>Mon, 24 Jun 2002 00:00:00 GMT</pubDate>
            <description><![CDATA[ネットワーク先のディレクトリにはインストールできなかったため、
tinkに rootでログインしてインストールした。
 pkgadd -d. [解凍したパッケージディレクトリ名]  ]]></description>
        </item>
        <item>
            <title><![CDATA[root に送られてくるメール]]></title>
            <link>https://masutaka.net/2002-06-23-3/</link>
            <guid>https://masutaka.net/2002-06-23-3/</guid>
            <pubDate>Sun, 23 Jun 2002 02:00:00 GMT</pubDate>
            <description><![CDATA[/etc/log.d/logwatch.confを編集して、masutakaに送るようにした。]]></description>
        </item>
        <item>
            <title><![CDATA[ログインの時に読み込まれるファイル]]></title>
            <link>https://masutaka.net/2002-06-23-2/</link>
            <guid>https://masutaka.net/2002-06-23-2/</guid>
            <pubDate>Sun, 23 Jun 2002 01:00:00 GMT</pubDate>
            <description><![CDATA[ログインの時に読み込まれるファイルは、
/etc/X11/xdm/Xsessionなので、$HOME/.xsessionを読み込むように修正した。
さらに/etc/X11/xdm/Xsessionは、
/etc/X11/gdm/Sessions/Gnomeから呼ばれているっぽい。]]></description>
        </item>
        <item>
            <title><![CDATA[キーの入れ換えと fetchmail]]></title>
            <link>https://masutaka.net/2002-06-23-1/</link>
            <guid>https://masutaka.net/2002-06-23-1/</guid>
            <pubDate>Sun, 23 Jun 2002 00:00:00 GMT</pubDate>
            <description><![CDATA[http://libra.higashi.hit-u.ac.jp/manual/manual.html 自宅でも fetchmailでメールを取り込むようにしてみた。
キーの入れ換え方法も書いてあってなかなか良いが、
Xmodmapを使わないでキーの入れ替えをする方法が良くわからない。]]></description>
        </item>
        <item>
            <title><![CDATA[環境変数 LANG]]></title>
            <link>https://masutaka.net/2002-06-22-1/</link>
            <guid>https://masutaka.net/2002-06-22-1/</guid>
            <pubDate>Sat, 22 Jun 2002 00:00:00 GMT</pubDate>
            <description><![CDATA[/usr/lib/locale/ 直下にあるディレクトリ名が LANG に入れるべき値。]]></description>
        </item>
        <item>
            <title><![CDATA[ファイルのステータスを見る]]></title>
            <link>https://masutaka.net/2002-06-20-3/</link>
            <guid>https://masutaka.net/2002-06-20-3/</guid>
            <pubDate>Thu, 20 Jun 2002 02:00:00 GMT</pubDate>
            <description><![CDATA[% cvs st [ファイル名]]]></description>
        </item>
        <item>
            <title><![CDATA[fvwm をコンパイルしたら、ちゃんと書く]]></title>
            <link>https://masutaka.net/2002-06-20-2/</link>
            <guid>https://masutaka.net/2002-06-20-2/</guid>
            <pubDate>Thu, 20 Jun 2002 01:00:00 GMT</pubDate>
            <description><![CDATA[基本的には/usr/X11R6以下にインストールするのれす。 ただ細かいところはconfigureで指定なのれす。 --prefix=/usr/X11R6 --libexecdir=/usr/X11R6/lib/X11 --sysconfdir=/usr/X11R6/lib/X11/fvwm --datadir=/usr/X11R6/lib/X11 --enable-multibyte --with-xpm-library=/usr/X11R6/lib --with-xpm-includes=/usr/X11R6/include/X11 --with-imagepath=/usr/X11R6/lib/X11/icons 設定のサンプルファイルが展開したdirectoryにsample.fvwmrc以下 としてあるので、これを$HOME/.fvwm2rcとして使用するのれす。 /etc/X11/xinit/xinitrcを$HOME/.xinitrcにコピーして、 最後のtwmをfvwm2に換えてstartxなのれす。 細かい設定は日本語環境が整ってからなのれす。 fvwm &lt;http://www.fvwm.org/&gt; オフィシャルなiconを入れてみるのれす。 さっき指定したimagepathに展開すればOKなのれす。 これならウインドウを最小化した時にicon化してくれるのれす。 # tar xzf fvwm_icons.tgz -C /usr/X11R6/lib/X11/ fvwm icon &lt;http://www.fvwm.org/icons.html&gt; fvwm2で何かを起動したときにフォーカスが当たるようにするのれす。 またフォーカスが１秒以上当たったら最前面になるようにするのれす。 以下のように~/.fvwm2rcに書くのれす。 Style * GrabFocus AddToFunc InitFunction + I Module FvwmAuto 1000 ]]></description>
        </item>
        <item>
            <title><![CDATA[elispをバッチ処理させる]]></title>
            <link>https://masutaka.net/2002-06-20-1/</link>
            <guid>https://masutaka.net/2002-06-20-1/</guid>
            <pubDate>Thu, 20 Jun 2002 00:00:00 GMT</pubDate>
            <description><![CDATA[% emcws-20.7 -batch -q &ndash;no-site-file -l xxx.el]]></description>
        </item>
        <item>
            <title><![CDATA[XEmacs-21.9 のインストール]]></title>
            <link>https://masutaka.net/2002-06-17-2/</link>
            <guid>https://masutaka.net/2002-06-17-2/</guid>
            <pubDate>Mon, 17 Jun 2002 01:00:00 GMT</pubDate>
            <description><![CDATA[|% ./configure &ndash;with-mule &ndash;with-wnn &ndash;with-xfs &ndash;with-site-lisp &ndash;without-canna &ndash;without-wnn6 &ndash;without-xim
|or
|% ./configure &ndash;with-mule &ndash;with-wnn &ndash;with-xfs &ndash;with-pop &ndash;with-site-lisp &ndash;without-xim
|% make
|# touch timestamp
|# make install
|# find /etc /usr /var -cnewer timestamp &gt; /usr/local/var/install-log/xemacs-21.9.log
|# cd /usr/local/lib/xemacs
|# mv xemacs-packages .xemacs-packages
|# mv mule-packages .mule-packages
|# tar xvjf xemacs-sumo.tar.bz2
|# tar xvjf xemacs-mule-sumo.tar.bz2
|# cd /usr/local/lib/xemacs/xemacs-packages/lisp
|# mv apel .apel
|# cd /usr/local/lib/xemacs/.mule-packages/etc
|# cp -r -p wl /usr/local/lib/xemacs/mule-packages/etc]]></description>
        </item>
        <item>
            <title><![CDATA[XEmacs への不満]]></title>
            <link>https://masutaka.net/2002-06-17-1/</link>
            <guid>https://masutaka.net/2002-06-17-1/</guid>
            <pubDate>Mon, 17 Jun 2002 00:00:00 GMT</pubDate>
            <description><![CDATA[リージョンの扱いがおかしい。(move-to-window-line 0)して、M-wができない。 -&gt; (setq zmacs-regions nil)
日本語変換のコードをhookに引っかける方法が分からない。
(font-lock-add-keywords)の代わりになるものは？]]></description>
        </item>
        <item>
            <title><![CDATA[XEmacs-21.4 でメニュバーを日本語で表示する。]]></title>
            <link>https://masutaka.net/2002-06-16-1/</link>
            <guid>https://masutaka.net/2002-06-16-1/</guid>
            <pubDate>Sun, 16 Jun 2002 00:00:00 GMT</pubDate>
            <description><![CDATA[|% cd /usr/local/lib/xemacs/mule-packages/etc/app-defaults
|% ln -s ja ja_JP.eucJP]]></description>
        </item>
        <item>
            <title><![CDATA[Mozilla ショートカット]]></title>
            <link>https://masutaka.net/2002-06-15-3/</link>
            <guid>https://masutaka.net/2002-06-15-3/</guid>
            <pubDate>Sat, 15 Jun 2002 02:00:00 GMT</pubDate>
            <description><![CDATA[C-l すると、URL を入力するところにフォーカスを移す。]]></description>
        </item>
        <item>
            <title><![CDATA[起動時のスプラッシュの指定方法]]></title>
            <link>https://masutaka.net/2002-06-15-2/</link>
            <guid>https://masutaka.net/2002-06-15-2/</guid>
            <pubDate>Sat, 15 Jun 2002 01:00:00 GMT</pubDate>
            <description><![CDATA[mozilla.bmpという名前で、Mozillaと同じディレクトリに入れる。
http://hand_on.tripod.co.jp/ http://lotekk.net/index.php?page=moz&sub=splash ]]></description>
        </item>
        <item>
            <title><![CDATA[コード変換をしないで、ファイルを開く]]></title>
            <link>https://masutaka.net/2002-06-15-1/</link>
            <guid>https://masutaka.net/2002-06-15-1/</guid>
            <pubDate>Sat, 15 Jun 2002 00:00:00 GMT</pubDate>
            <description><![CDATA[M-x find-file-literally]]></description>
        </item>
        <item>
            <title><![CDATA[GNU-Emacs = FSF-Emacs]]></title>
            <link>https://masutaka.net/2002-06-14-1/</link>
            <guid>https://masutaka.net/2002-06-14-1/</guid>
            <pubDate>Fri, 14 Jun 2002 00:00:00 GMT</pubDate>
        </item>
        <item>
            <title><![CDATA[HIST_IGNORE_ALL_DUPS -> 同じコマンドの history は履歴に入れない。]]></title>
            <link>https://masutaka.net/2002-06-13-1/</link>
            <guid>https://masutaka.net/2002-06-13-1/</guid>
            <pubDate>Thu, 13 Jun 2002 00:00:00 GMT</pubDate>
            <description><![CDATA[&lsquo;setopt histignorealldups&rsquo;して、&lsquo;history&rsquo;すると同じ履歴は消えているけど、
$HISTFILEの中身は消えてない。これは、デフォルトでは $HISTFILEの同期は
zsh プロセスが exit したときだから。INC_APPEND_HISTORY や SHARE_HISTORY を
有効にしていると、このタイミングが変わる。
SHARE_HISTORYは、直前の履歴を使い回すことが多い時は却って不便かもしれない。
マニュアルにあるように、適当なタイミングで &lsquo;fc -RI&rsquo;する方が使い易いかも。]]></description>
        </item>
        <item>
            <title><![CDATA[半角カナとは JISX0201 のこと]]></title>
            <link>https://masutaka.net/2002-06-10-3/</link>
            <guid>https://masutaka.net/2002-06-10-3/</guid>
            <pubDate>Mon, 10 Jun 2002 02:00:00 GMT</pubDate>
        </item>
        <item>
            <title><![CDATA[kterm のインストール]]></title>
            <link>https://masutaka.net/2002-06-10-2/</link>
            <guid>https://masutaka.net/2002-06-10-2/</guid>
            <pubDate>Mon, 10 Jun 2002 01:00:00 GMT</pubDate>
            <description><![CDATA[% xmkmf -a
% make
Makefileの &lsquo;VARDIR = /var/X11&rsquo; -&gt; &lsquo;VARDIR = /usr/local/var/X11&rsquo;
% make install
% nkf -e kterm.jman &gt; /usr/X11R6/man/man1/kterm.1
% chmod 444 /usr/X11R6/man/man1/kterm.1
% chmod 755 /usr/X11R6/bin/kterm
http://www.anna.iwate-pu.ac.jp/~kojima/Solaris2.6/sol26-x.html ]]></description>
        </item>
        <item>
            <title><![CDATA[Solaris Package Archive]]></title>
            <link>https://masutaka.net/2002-06-10-1/</link>
            <guid>https://masutaka.net/2002-06-10-1/</guid>
            <pubDate>Mon, 10 Jun 2002 00:00:00 GMT</pubDate>
            <description><![CDATA[http://www.ibiblio.org/pub/packages/solaris/sparc/ ]]></description>
        </item>
        <item>
            <title><![CDATA[モードラインの EEEの意味 by Meadow ML]]></title>
            <link>https://masutaka.net/2002-06-09-2/</link>
            <guid>https://masutaka.net/2002-06-09-2/</guid>
            <pubDate>Sun, 09 Jun 2002 01:00:00 GMT</pubDate>
            <description><![CDATA[最初の E が terminal input、 次が terminal output、最後が buffer 内の
ファイル保存用で、 E というのは euc-japan のことだと思います。]]></description>
        </item>
        <item>
            <title><![CDATA[VZ.el]]></title>
            <link>https://masutaka.net/2002-06-09-1/</link>
            <guid>https://masutaka.net/2002-06-09-1/</guid>
            <pubDate>Sun, 09 Jun 2002 00:00:00 GMT</pubDate>
            <description><![CDATA[URL: http://www2.palnet.or.jp/~matsuda/linux_menu.html ]]></description>
        </item>
        <item>
            <title><![CDATA[起動ディスクの作り方]]></title>
            <link>https://masutaka.net/2002-06-03-1/</link>
            <guid>https://masutaka.net/2002-06-03-1/</guid>
            <pubDate>Mon, 03 Jun 2002 00:00:00 GMT</pubDate>
            <description><![CDATA[最後の'2.4.9-31&rsquo;は、/boot/vmlinuz-2.4.9-31と同じにする。
マウントは解除しておく。 ~~~~~~~~
mkbootdisk &ndash;device /dev/fd0 2.4.9-31 ]]></description>
        </item>
        <item>
            <title><![CDATA[`-m' オプション]]></title>
            <link>https://masutaka.net/2002-05-29-2/</link>
            <guid>https://masutaka.net/2002-05-29-2/</guid>
            <pubDate>Wed, 29 May 2002 01:00:00 GMT</pubDate>
            <description><![CDATA[わざわざエディタを開くのが嫌ならば、 `-m&rsquo; オプションで次のように指定できます:
% cvs commit -m &ldquo;Added an optimization pass&rdquo; backend.c]]></description>
        </item>
        <item>
            <title><![CDATA[ディスクとデバイス名]]></title>
            <link>https://masutaka.net/2002-05-29-1/</link>
            <guid>https://masutaka.net/2002-05-29-1/</guid>
            <pubDate>Wed, 29 May 2002 00:00:00 GMT</pubDate>
            <description><![CDATA[|Solarisには、/dev, /devices といったデバイスに関するディレクトリーが用意されています。
|/dev は今までの UNIX と同じような型式でデバイスファイルが存在します。
|/devices はバスの情報や場所、接続されているデバイス、デバイスのID などが、
|パスやファイルの名前で理解できるようになっています(そのお蔭で非常に長い)。
|
|ブロックデバイス /dev/dsk/c0t3d0s0
|キャラクターデバイス /dev/rdsk/c0t3d0s0
|
|c0	コントローラターゲット。コントローラが増えると c1, c2 と増える。
|t3	ターゲットで SCSI-ID と対応。 IDE(ATA) ディスクの場合、無し。
|d0	RAID ディスク等で使用する&hellip;..
|s0	スライス。パーティションと呼ばれていたもので a-h が 0-8 に対応。
|	昔のなごりなのかデフォルトで s2(c) はディスク全体として使用されている。
|
|/dev は以前の UNIX との互換のためのリンクで存在している。実体は、以下の様に /devices に存在する。
|/devices/iommu@f,e0000000/sbus@f,e0001000/espdma@f,400000/esp@f,800000/sd@3,0:a
URL: http://home7.highway.ne.jp/dayan/tips/unix/solaris.html ]]></description>
        </item>
        <item>
            <title><![CDATA[起動時に読み込まれるファイル]]></title>
            <link>https://masutaka.net/2002-05-28-1/</link>
            <guid>https://masutaka.net/2002-05-28-1/</guid>
            <pubDate>Tue, 28 May 2002 00:00:00 GMT</pubDate>
            <description><![CDATA[起動時に読み込まれるファイルは、$HOME/.dtprofile]]></description>
        </item>
        <item>
            <title><![CDATA[file1 から file2 を作るパッチが生成される。]]></title>
            <link>https://masutaka.net/2002-05-27-1/</link>
            <guid>https://masutaka.net/2002-05-27-1/</guid>
            <pubDate>Mon, 27 May 2002 00:00:00 GMT</pubDate>
            <description><![CDATA[% /usr/gnu/bin/diff -urN file1 file2]]></description>
        </item>
        <item>
            <title><![CDATA[query-replace-regexp-eval]]></title>
            <link>https://masutaka.net/2002-05-26-1/</link>
            <guid>https://masutaka.net/2002-05-26-1/</guid>
            <pubDate>Sun, 26 May 2002 00:00:00 GMT</pubDate>
            <description><![CDATA[正規表現を shell で実行させるらしい。]]></description>
        </item>
        <item>
            <title><![CDATA[tramp の書式]]></title>
            <link>https://masutaka.net/2002-05-24-1/</link>
            <guid>https://masutaka.net/2002-05-24-1/</guid>
            <pubDate>Fri, 24 May 2002 00:00:00 GMT</pubDate>
            <description><![CDATA[/[masuda@129.144.3.25]]]></description>
        </item>
        <item>
            <title><![CDATA[zsh for the working researcher]]></title>
            <link>https://masutaka.net/2002-05-23-3/</link>
            <guid>https://masutaka.net/2002-05-23-3/</guid>
            <pubDate>Thu, 23 May 2002 02:00:00 GMT</pubDate>
            <description><![CDATA[http://cl.aist-nara.ac.jp/student/daiti-m/text/zsh-intro.html ]]></description>
        </item>
        <item>
            <title><![CDATA[カレントディレクトリ以下のすべての実行ファイルを削除]]></title>
            <link>https://masutaka.net/2002-05-23-2/</link>
            <guid>https://masutaka.net/2002-05-23-2/</guid>
            <pubDate>Thu, 23 May 2002 01:00:00 GMT</pubDate>
            <description><![CDATA[zsh $ rm **/*(x.)]]></description>
        </item>
        <item>
            <title><![CDATA[窓使いの憂鬱で 1 行スクロールアップ/スクロールダウン？ ]]></title>
            <link>https://masutaka.net/2002-05-23-1/</link>
            <guid>https://masutaka.net/2002-05-23-1/</guid>
            <pubDate>Thu, 23 May 2002 00:00:00 GMT</pubDate>
            <description><![CDATA[key C-Colon = &amp;MouseWheel(-120)	# C-;
key C-Semicolon = &amp;MouseWheel(120)	# C-:]]></description>
        </item>
        <item>
            <title><![CDATA[Emacs が自動検出したフォントの名前を知る方法]]></title>
            <link>https://masutaka.net/2002-05-22-2/</link>
            <guid>https://masutaka.net/2002-05-22-2/</guid>
            <pubDate>Wed, 22 May 2002 01:00:00 GMT</pubDate>
            <description><![CDATA[M-x describe-fontset =&gt; default-fontset]]></description>
        </item>
        <item>
            <title><![CDATA[$HISTFILEの日付を分かりやすくする。]]></title>
            <link>https://masutaka.net/2002-05-22-1/</link>
            <guid>https://masutaka.net/2002-05-22-1/</guid>
            <pubDate>Wed, 22 May 2002 00:00:00 GMT</pubDate>
            <description><![CDATA[|以下を適当なファイル(例えば histdate.awk)に保存します。
|
|#&mdash; begin &mdash;
|BEGIN {
| FS=&quot;:&quot;
|}
|
|{
| stime = strftime(&quot;%B %d %H:%M:%S %Y&quot;, $2);
| print stime &quot; &ndash; &quot; $3
|}
|#&mdash; end &mdash;
|
|あとはプロンプトで
|% awk -f histdate.awk $HISTFILE]]></description>
        </item>
        <item>
            <title><![CDATA[feh が susie に似ているらしい]]></title>
            <link>https://masutaka.net/2002-05-21-1/</link>
            <guid>https://masutaka.net/2002-05-21-1/</guid>
            <pubDate>Tue, 21 May 2002 00:00:00 GMT</pubDate>
            <description><![CDATA[追記(2002-06-28):
ゼンゼン似ていなかった。。。使えないので削除。]]></description>
        </item>
        <item>
            <title><![CDATA[grep-changelog への不満]]></title>
            <link>https://masutaka.net/2002-05-20-2/</link>
            <guid>https://masutaka.net/2002-05-20-2/</guid>
            <pubDate>Mon, 20 May 2002 01:00:00 GMT</pubDate>
            <description><![CDATA[&ndash;text=(文字列1|文字列2):とかで検索させると、同じ日付が2つできたりする&hellip;。]]></description>
        </item>
        <item>
            <title><![CDATA[背景と文字の色を反転させる]]></title>
            <link>https://masutaka.net/2002-05-20-1/</link>
            <guid>https://masutaka.net/2002-05-20-1/</guid>
            <pubDate>Mon, 20 May 2002 00:00:00 GMT</pubDate>
            <description><![CDATA[% emacs -rv]]></description>
        </item>
        <item>
            <title><![CDATA[正規表現を使った grep-changelog]]></title>
            <link>https://masutaka.net/2002-05-19-3/</link>
            <guid>https://masutaka.net/2002-05-19-3/</guid>
            <pubDate>Sun, 19 May 2002 02:00:00 GMT</pubDate>
            <description><![CDATA[% grep-changelog &ndash;text=&rsquo;(shell|emacs):&rsquo; diary.txt]]></description>
        </item>
        <item>
            <title><![CDATA[X が使えない原因 by 2ch]]></title>
            <link>https://masutaka.net/2002-05-19-2/</link>
            <guid>https://masutaka.net/2002-05-19-2/</guid>
            <pubDate>Sun, 19 May 2002 01:00:00 GMT</pubDate>
            <description><![CDATA[Xが使えない原因の99.9%は/etc/X11/XF86Config-4の不備。]]></description>
        </item>
        <item>
            <title><![CDATA[defadvice の使い方]]></title>
            <link>https://masutaka.net/2002-05-19-1/</link>
            <guid>https://masutaka.net/2002-05-19-1/</guid>
            <pubDate>Sun, 19 May 2002 00:00:00 GMT</pubDate>
            <description><![CDATA[kill-lineすると、this-commandに シンボル kill-regionが代入される。
その状態で kill-regionすると、killした文字列をyank時に連結してしまうため、
kill-lineが終わった後、this-commandに適当な値を入れる方法。
(defadvice kill-line (after my-ad activate)  (setq this-command &#39;this-is-*not*-kill-region!!)) ]]></description>
        </item>
        <item>
            <title><![CDATA[mozillaの bookmarks.htmlの場所を変える。(by 2ch)]]></title>
            <link>https://masutaka.net/2002-05-18-3/</link>
            <guid>https://masutaka.net/2002-05-18-3/</guid>
            <pubDate>Sat, 18 May 2002 02:00:00 GMT</pubDate>
            <description><![CDATA[user.jsに
user_pref(&ldquo;browser.bookmarks.file&rdquo;, &ldquo;c:\usr\.mozilla-bookmark.html&rdquo;);]]></description>
        </item>
        <item>
            <title><![CDATA[一応取っておくURL]]></title>
            <link>https://masutaka.net/2002-05-18-2/</link>
            <guid>https://masutaka.net/2002-05-18-2/</guid>
            <pubDate>Sat, 18 May 2002 01:00:00 GMT</pubDate>
            <description><![CDATA[○GNUの誕生
http://www.sipeb.aoyama.ac.jp/~ida/books/ ○MOPA Assertion TAGタグたぐ〜
http://village.infoweb.ne.jp/~mopa/html_tag.htm ○Mozilla customization - Ancient library
http://www.alib.jp/mozilla/ ○Windows2000.FAQ
http://homepage2.nifty.com/winfaq/w2k/ ○Windows Scripting Host Laboratory
http://www.roy.hi-ho.ne.jp/mutaguchi/wsh/ ]]></description>
        </item>
        <item>
            <title><![CDATA[masayuki からの xmodmap についてのアドバイス (/etc/X11/xdm/Xsession)]]></title>
            <link>https://masutaka.net/2002-05-18-1/</link>
            <guid>https://masutaka.net/2002-05-18-1/</guid>
            <pubDate>Sat, 18 May 2002 00:00:00 GMT</pubDate>
            <description><![CDATA[$HOME/.xinitrcに以下を書いてもダメ？
実行権も付けなくちゃいけないかもしれない。
|usermodmap=$HOME/.Xmodmap
|
|if [ -f &ldquo;$usermodmap&rdquo; ]; then
| xmodmap &ldquo;$usermodmap&rdquo;
|fi]]></description>
        </item>
        <item>
            <title><![CDATA[ADSL ]]></title>
            <link>https://masutaka.net/2002-05-17-4/</link>
            <guid>https://masutaka.net/2002-05-17-4/</guid>
            <pubDate>Fri, 17 May 2002 03:00:00 GMT</pubDate>
            <description><![CDATA[Asymmetric Digital Subscriber Line]]></description>
        </item>
        <item>
            <title><![CDATA[mozilla-psm-1.0rc2-0.i386.rpm]]></title>
            <link>https://masutaka.net/2002-05-17-3/</link>
            <guid>https://masutaka.net/2002-05-17-3/</guid>
            <pubDate>Fri, 17 May 2002 02:00:00 GMT</pubDate>
            <description><![CDATA[パーソナルセキュリティマネージャだったのね。(SSL)]]></description>
        </item>
        <item>
            <title><![CDATA[umaskの使い方]]></title>
            <link>https://masutaka.net/2002-05-17-2/</link>
            <guid>https://masutaka.net/2002-05-17-2/</guid>
            <pubDate>Fri, 17 May 2002 01:00:00 GMT</pubDate>
            <description><![CDATA[#umask 0 → 0(000) XOR 6(110) = 6(110) = rw-
#umask 1 → 1(001) XOR 6(110) = 7(111) = rwx
#umask 2 → 2(010) XOR 6(110) = 4(100) = r&ndash;
#umask 3 → 3(011) XOR 6(110) = 5(101) = r-x
#umask 4 → 4(100) XOR 6(110) = 2(010) = -w-
#umask 5 → 5(101) XOR 6(110) = 3(011) = -wx
#umask 6 → 6(110) XOR 6(110) = 0(000) = &mdash;]]></description>
        </item>
        <item>
            <title><![CDATA[grep-changelog]]></title>
            <link>https://masutaka.net/2002-05-17-1/</link>
            <guid>https://masutaka.net/2002-05-17-1/</guid>
            <pubDate>Fri, 17 May 2002 00:00:00 GMT</pubDate>
            <description><![CDATA[以下のオプション指定で、2002年5月の &ldquo;文字列&rdquo; が含まれる項目を昇順に取ってくることができる。
% grep-changelog &ndash;from-date=2002-05-01 &ndash;to-date=2002-05-31 &ndash;reverse &ndash;text=&ldquo;文字列&rdquo; ~/clmemo.txt]]></description>
        </item>
        <item>
            <title><![CDATA[java フォント設定ファイル]]></title>
            <link>https://masutaka.net/2002-05-16-1/</link>
            <guid>https://masutaka.net/2002-05-16-1/</guid>
            <pubDate>Thu, 16 May 2002 00:00:00 GMT</pubDate>
            <description><![CDATA[/usr/java/jdk1.3.1_02/jre/lib/font.properties.ja]]></description>
        </item>
        <item>
            <title><![CDATA[stdout と stderror まとめ]]></title>
            <link>https://masutaka.net/2002-05-15-2/</link>
            <guid>https://masutaka.net/2002-05-15-2/</guid>
            <pubDate>Wed, 15 May 2002 01:00:00 GMT</pubDate>
            <description><![CDATA[|1. 結果をファイルに記録する
| sh, bash など
| % program &gt; file.log
| csh, tcsh など
| % program &gt; file.log
|
|2. 標準エラー出力も記録する
| sh, bash など
| % program &gt; file.log 2&gt;&amp;1
| csh, tcsh など
| % program &gt;&amp; file.log
|
|3. 標準出力と標準エラー出力を別のファイルにリダイレクト
| sh, bash など
| % program &gt; file.log 2&gt; errors.log
| csh, tcsh など
| % (program &gt; file.log) &gt;&amp; errors.log
|
|4. コマンドの結果を別のコマンドに渡したい]]></description>
        </item>
        <item>
            <title><![CDATA[フリーズしたら]]></title>
            <link>https://masutaka.net/2002-05-15-1/</link>
            <guid>https://masutaka.net/2002-05-15-1/</guid>
            <pubDate>Wed, 15 May 2002 00:00:00 GMT</pubDate>
            <description><![CDATA[/var/log/boot.log
/var/log/messages
を調べれば、なんかしらの情報は得られると思います。
設定しているのは、/etc/syslog.confです。]]></description>
        </item>
        <item>
            <title><![CDATA[ファイルが実行されるタイミング]]></title>
            <link>https://masutaka.net/2002-05-14-1/</link>
            <guid>https://masutaka.net/2002-05-14-1/</guid>
            <pubDate>Tue, 14 May 2002 00:00:00 GMT</pubDate>
            <description><![CDATA[| $ZDOTDIR/.zshenv	-f 以外全ての環境で使用される。
| $ZDOTDIR/.zshrc	interactive shell で使用。
|	alias, function, option, keybind&hellip; を入れる。
| $ZDOTDIR/.zlogin	login shell のみ使用。.zshrc の後。
| $ZDOTDIR/.zprofile	.zlogin と同様、但し .zshrc の前。
| $ZDOTDIR/.zlogout	logout 時に実行。]]></description>
        </item>
        <item>
            <title><![CDATA[Dired で今日変更したファイルを色づけ]]></title>
            <link>https://masutaka.net/2002-05-11-2/</link>
            <guid>https://masutaka.net/2002-05-11-2/</guid>
            <pubDate>Sat, 11 May 2002 01:00:00 GMT</pubDate>
            <description><![CDATA[なかなか(･∀･)イイYO!!
URL: http://homepage1.nifty.com/blankspace/emacs/dired.html ]]></description>
        </item>
        <item>
            <title><![CDATA[exitの罠]]></title>
            <link>https://masutaka.net/2002-05-11-1/</link>
            <guid>https://masutaka.net/2002-05-11-1/</guid>
            <pubDate>Sat, 11 May 2002 00:00:00 GMT</pubDate>
            <description><![CDATA[GNOMEのツールバーから Emacsを起動すると環境変数が効かなかったので、
~/.zshenvに &lsquo;source ~/.zshrc&rsquo;と書いておいたが、
rcp&amp;rsh対策用に $TERMがNULLだったらexitする設定が
ログインする時に効いてしまいログインできなくなる罠にはまってしまった。]]></description>
        </item>
        <item>
            <title><![CDATA[現在のホストのアーキテクチャ名を出力]]></title>
            <link>https://masutaka.net/2002-05-09-1/</link>
            <guid>https://masutaka.net/2002-05-09-1/</guid>
            <pubDate>Thu, 09 May 2002 00:00:00 GMT</pubDate>
            <description><![CDATA[% arch]]></description>
        </item>
        <item>
            <title><![CDATA[emacs-wget]]></title>
            <link>https://masutaka.net/2002-05-08-2/</link>
            <guid>https://masutaka.net/2002-05-08-2/</guid>
            <pubDate>Wed, 08 May 2002 01:00:00 GMT</pubDate>
            <description><![CDATA[URL: http://isweb22.infoseek.co.jp/computer/pop-club/emacs/emacs-wget.html ]]></description>
        </item>
        <item>
            <title><![CDATA[navi2ch のアスキーアート変数]]></title>
            <link>https://masutaka.net/2002-05-08-1/</link>
            <guid>https://masutaka.net/2002-05-08-1/</guid>
            <pubDate>Wed, 08 May 2002 00:00:00 GMT</pubDate>
            <description><![CDATA[navi2ch-message-aa-alist]]></description>
        </item>
        <item>
            <title><![CDATA[ソースのインデントを整形するツール]]></title>
            <link>https://masutaka.net/2002-05-07-3/</link>
            <guid>https://masutaka.net/2002-05-07-3/</guid>
            <pubDate>Tue, 07 May 2002 02:00:00 GMT</pubDate>
            <description><![CDATA[http://www.matsusaka-u.ac.jp/~okumura/c/style.html % indent -kr -ts255 *.c]]></description>
        </item>
        <item>
            <title><![CDATA[連番号出力]]></title>
            <link>https://masutaka.net/2002-05-07-2/</link>
            <guid>https://masutaka.net/2002-05-07-2/</guid>
            <pubDate>Tue, 07 May 2002 01:00:00 GMT</pubDate>
            <description><![CDATA[% seq 1 3
1
2
3]]></description>
        </item>
        <item>
            <title><![CDATA[ファイルのサイズを獲得]]></title>
            <link>https://masutaka.net/2002-05-07-1/</link>
            <guid>https://masutaka.net/2002-05-07-1/</guid>
            <pubDate>Tue, 07 May 2002 00:00:00 GMT</pubDate>
            <description><![CDATA[% wc -c [file] | awk &lsquo;{print $1}&rsquo;
or
% du -sk file]]></description>
        </item>
        <item>
            <title><![CDATA[kinput2 が落ちたら]]></title>
            <link>https://masutaka.net/2002-05-02-1/</link>
            <guid>https://masutaka.net/2002-05-02-1/</guid>
            <pubDate>Thu, 02 May 2002 00:00:00 GMT</pubDate>
            <description><![CDATA[% kinput2 -wnnenvrc /etc/FreeWnn/ja/wnnenvrc &amp;]]></description>
        </item>
        <item>
            <title><![CDATA[GNUPG の基本]]></title>
            <link>https://masutaka.net/2002-05-01-3/</link>
            <guid>https://masutaka.net/2002-05-01-3/</guid>
            <pubDate>Wed, 01 May 2002 02:00:00 GMT</pubDate>
            <description><![CDATA[[インストール＆鍵の作成方法]
http://ykondou.dyndns.org:8080/columns/gpg.shtml http://linux.nikkeibp.co.jp/column/inflection/4/2.org.html http://www1.plala.or.jp/fukafuka/trouble/email.html http://tty0.exblog.jp/646860 [PGP 公開鍵サーバー]
http://pgp.nic.ad.jp/jindex.html [&ldquo;やばいメモリーを使用しています!&ldquo;と言われてしまう]
# ls -al `which gpg` -rwxr-xr-x 1 root root 560252 Aug 10 2001 /usr/bin/gpg* # chmod 4755 `which gpg`	# (4755 or u+s) # ls -al `which gpg` -rwsr-xr-x 1 root root 560252 Aug 10 2001 /usr/bin/gpg* [uid を削除する]
% gpg --edit-key masutaka.net@gmail.com (snip) (1). Takashi Masuda &lt;masutaka.net@gmail.com&gt; (2) Takashi Masuda &lt;masutaka@example.com&gt; コマンド&gt; uid 2 (1). Takashi Masuda &lt;masutaka.net@gmail.com&gt; (2)* Takashi Masuda &lt;masutaka@example.]]></description>
        </item>
        <item>
            <title><![CDATA[CVSROOT の優先度]]></title>
            <link>https://masutaka.net/2002-05-01-2/</link>
            <guid>https://masutaka.net/2002-05-01-2/</guid>
            <pubDate>Wed, 01 May 2002 01:00:00 GMT</pubDate>
            <description><![CDATA[&lsquo;cvs -d CVSROOT&rsquo; &gt; &lsquo;./CVS/Root&rsquo; &gt; &lsquo;$CVSROOT&rsquo;]]></description>
        </item>
        <item>
            <title><![CDATA[パネル(タスクバー)の起動方法]]></title>
            <link>https://masutaka.net/2002-05-01-1/</link>
            <guid>https://masutaka.net/2002-05-01-1/</guid>
            <pubDate>Wed, 01 May 2002 00:00:00 GMT</pubDate>
            <description><![CDATA[% panel]]></description>
        </item>
        <item>
            <title><![CDATA[migemo を cygwin でコンパイルする方法 (by 2ch)]]></title>
            <link>https://masutaka.net/2002-04-30-2/</link>
            <guid>https://masutaka.net/2002-04-30-2/</guid>
            <pubDate>Tue, 30 Apr 2002 01:00:00 GMT</pubDate>
            <description><![CDATA[migemoをmakeしている最中に、
./migemo-regex.rb:39:in `map&rsquo;: stack level too deep (SystemStackError)
と、怒られてしまいます。
何か解決策はありますかね？
システムのスタックサイズがたりない。
% limit stacksize 2048k
とかで、うまくいくはず。
[ruby-list:34456]あたりを参照。]]></description>
        </item>
        <item>
            <title><![CDATA[XFree86 の version とかを表示する]]></title>
            <link>https://masutaka.net/2002-04-30-1/</link>
            <guid>https://masutaka.net/2002-04-30-1/</guid>
            <pubDate>Tue, 30 Apr 2002 00:00:00 GMT</pubDate>
            <description><![CDATA[% xdpyinfo
% X -version]]></description>
        </item>
        <item>
            <title><![CDATA[mg の使い方]]></title>
            <link>https://masutaka.net/2002-04-27-1/</link>
            <guid>https://masutaka.net/2002-04-27-1/</guid>
            <pubDate>Sat, 27 Apr 2002 00:00:00 GMT</pubDate>
            <description><![CDATA[% mg -n -jjis -X&rsquo;nkf -e']]></description>
        </item>
        <item>
            <title><![CDATA[編集関連の tips]]></title>
            <link>https://masutaka.net/2002-04-26-1/</link>
            <guid>https://masutaka.net/2002-04-26-1/</guid>
            <pubDate>Fri, 26 Apr 2002 00:00:00 GMT</pubDate>
            <description><![CDATA[・編集の過程で強調がおかしくなったら&hellip;
M-x facemenu-set-default (M-g d)
・別フレームに関数名を表示する？？？
M-x speedbar
・右端で折り返したり、折り返さなかったり&hellip;
M-x toggle-truncate-lines]]></description>
        </item>
        <item>
            <title><![CDATA[直前の正規表現の回数を指定 from Emacs21]]></title>
            <link>https://masutaka.net/2002-04-25-2/</link>
            <guid>https://masutaka.net/2002-04-25-2/</guid>
            <pubDate>Thu, 25 Apr 2002 01:00:00 GMT</pubDate>
            <description><![CDATA[(string-match &ldquo;^\(バタ\)\{2\}$&rdquo; &ldquo;バタバタ&rdquo;)
0
(string-match &ldquo;^\(バタ\)\{2\}$&rdquo; &ldquo;バタ&rdquo;)
nil]]></description>
        </item>
        <item>
            <title><![CDATA[crontab で設定されている環境変数]]></title>
            <link>https://masutaka.net/2002-04-25-1/</link>
            <guid>https://masutaka.net/2002-04-25-1/</guid>
            <pubDate>Thu, 25 Apr 2002 00:00:00 GMT</pubDate>
            <description><![CDATA[HOME=/home/masutaka LOGNAME=masutaka PATH=/usr/bin: SHELL=/usr/bin/sh TZ=Japan  PWD=/home/masutaka HOSTNAME=chronicle.nifty.com MACHTYPE=i386-redhat-linux-gnu LOGNAME=masutaka SHLVL=1 SHELL=/bin/sh HOSTTYPE=i386 OSTYPE=linux-gnu HOME=/home/masutaka TERM=dumb PATH=/usr/bin:/bin _=/usr/bin/env &lt;Ubuntu 14.04&gt;
LANGUAGE=en_US:
HOME=/home/masutaka
LOGNAME=masutaka
PATH=/usr/bin:/bin
LANG=en_US.UTF-8
SHELL=/bin/sh
PWD=/home/masutaka
追記(2014-09-28):
Ubuntu 14.04を追加しました]]></description>
        </item>
        <item>
            <title><![CDATA[IME と FEP by 2ch]]></title>
            <link>https://masutaka.net/2002-04-23-2/</link>
            <guid>https://masutaka.net/2002-04-23-2/</guid>
            <pubDate>Tue, 23 Apr 2002 01:00:00 GMT</pubDate>
            <description><![CDATA[[IME] http://computers.yahoo.co.jp/dict/software/application/im/560.html Windowsシステム上で日本語や中国語など、
文字の多い言語で入力を行なうために必要な変換ソフト。
日本語用の WnnIMEとしては、Windows 95/98に標準で添付されている
Microsoft社のMS-IMEの他に、ジャストシステムのATOKやバックスのVJEなどが有名。
[FEP] http://computers.yahoo.co.jp/dict/software/application/im/446.html 古くは、大型コンピュータシステムにおいて、
メインプロセッサの負担を軽減するためにデータの前処理やデータ転送の制御などを行う
補助プロセッサのことをあらわしていた。
転じて、データの前処理や入力の補助を行う装置やソフトウェア一般を指すようになり、
MS-DOSシステム上では日本語を入力するために用いる、
かな漢字変換ソフトウェア(ジャストシステムの「ATOK」など)の総称として定着した。
現在では日本語入力ソフトウェアはIM(Input Method)と呼ばれることが多いが、
未だにこの意味でFEPという用語を用いる場合もある。]]></description>
        </item>
        <item>
            <title><![CDATA[ICE の起動順番]]></title>
            <link>https://masutaka.net/2002-04-23-1/</link>
            <guid>https://masutaka.net/2002-04-23-1/</guid>
            <pubDate>Tue, 23 Apr 2002 00:00:00 GMT</pubDate>
            <description><![CDATA[by 2ch
何度言ってもICE、電源、ボードの順にスイッチを入れることを守ってくれない人がいます。]]></description>
        </item>
        <item>
            <title><![CDATA[crontab アホなページ]]></title>
            <link>https://masutaka.net/2002-04-21-2/</link>
            <guid>https://masutaka.net/2002-04-21-2/</guid>
            <pubDate>Sun, 21 Apr 2002 01:00:00 GMT</pubDate>
            <description><![CDATA[crontab について、実用的だけどアホなページを見つけた。
http://www.linux.or.jp/JM/html/cron/man5/crontab.5.html ]]></description>
        </item>
        <item>
            <title><![CDATA[xv のコンパイル]]></title>
            <link>https://masutaka.net/2002-04-21-1/</link>
            <guid>https://masutaka.net/2002-04-21-1/</guid>
            <pubDate>Sun, 21 Apr 2002 00:00:00 GMT</pubDate>
            <description><![CDATA[|% tar xvzf xv-3.10a.tar.gz
|% tar xvzf jpegsrc.v6b.tar.gz
|% tar xvzf tiff-v3.4-tar.gz
|% tar xvzf xv310a-jp-extension-rev5.3.3.tar.gz
|% rm -rf xv-3.10a/jpeg ; mv jpeg-6b xv-3.10a/jpeg
|% rm -rf xv-3.10a/tiff ; mv tiff-v3.4/ xv-3.10a/tiff
|% cd xv-3.10a
|% cat ../xv-3.10a.JPEG-patch | patch
|% cat ../xv-3.10a.TIFF-patch | patch
|% cat ../grabpatch | patch
|% cat ../longname.patch | patch
|% cat ../mp-tiff-patch | patch
|% cat ../pdf.patch | patch
|% cat ../vispatch | patch]]></description>
        </item>
        <item>
            <title><![CDATA[分散と標準偏差]]></title>
            <link>https://masutaka.net/2002-04-20-2/</link>
            <guid>https://masutaka.net/2002-04-20-2/</guid>
            <pubDate>Sat, 20 Apr 2002 01:00:00 GMT</pubDate>
            <description><![CDATA[Xの出現する確率を Pとすると
 n 期待値 E(X) = Σ(Xk * Pk) k=1 E(X) = m とすると
 n 2 分散 V(X) = Σ((Xk - m) * Pk) k=1 標準偏差 σ(X) = √V(X) ]]></description>
        </item>
        <item>
            <title><![CDATA[Mozilla のビルド]]></title>
            <link>https://masutaka.net/2002-04-20-1/</link>
            <guid>https://masutaka.net/2002-04-20-1/</guid>
            <pubDate>Sat, 20 Apr 2002 00:00:00 GMT</pubDate>
            <description><![CDATA[|# rpm -ivh flex-2.5.4a-15.i386.rpm
|% tar xvzf libIDL-0.6.8.tar.gz
|% cd libIDL-0.6.8
|% ./configure ; make
|# make install
|% tar xvjf mozilla-source-1.0.rc1.tar.bz2
|% cd mozilla
|% ./configure ; make
|# make install]]></description>
        </item>
        <item>
            <title><![CDATA[世界一長い英単語]]></title>
            <link>https://masutaka.net/2002-04-18-2/</link>
            <guid>https://masutaka.net/2002-04-18-2/</guid>
            <pubDate>Thu, 18 Apr 2002 01:00:00 GMT</pubDate>
            <description><![CDATA[法律の分野で、蔑視、軽視を意味する
Floccinaucinihilipilificationです。２９語のレターを持ちます。
追記(2011-12-21):
もっと長い単語があった。
loading...
   if (localStorage.getItem("pref-theme") === "light") { const elements = document.getElementsByClassName('twitter-tweet'); for (let i = 0; i  ]]></description>
        </item>
        <item>
            <title><![CDATA[kakasi]]></title>
            <link>https://masutaka.net/2002-04-18-1/</link>
            <guid>https://masutaka.net/2002-04-18-1/</guid>
            <pubDate>Thu, 18 Apr 2002 00:00:00 GMT</pubDate>
            <description><![CDATA[% echo &lsquo;山田&rsquo; | kakasi -JH
やまだ]]></description>
        </item>
        <item>
            <title><![CDATA[etagsのヘルプ]]></title>
            <link>https://masutaka.net/2002-04-16-2/</link>
            <guid>https://masutaka.net/2002-04-16-2/</guid>
            <pubDate>Tue, 16 Apr 2002 01:00:00 GMT</pubDate>
            <description><![CDATA[http://www.jagat.or.jp/sgml/emacs/etags.htm C++で使用する場合は、etags のオプションに &ndash;c++ &ndash;members を付けると良いでしょう。]]></description>
        </item>
        <item>
            <title><![CDATA[TAGS コマンドまとめ]]></title>
            <link>https://masutaka.net/2002-04-16-1/</link>
            <guid>https://masutaka.net/2002-04-16-1/</guid>
            <pubDate>Tue, 16 Apr 2002 00:00:00 GMT</pubDate>
            <description><![CDATA[M-x find-tag (M-.)	シンボルの定義部分に飛ぶ。
M-x pop-tag-mark (M-*)	前の状態に飛ぶ。
M-x tags-search	シンボルを検索させる。
M-x tags-loop-continue (M-,)	次の候補に飛ぶ。(検索状態で実行)
M-x find-tag-other-window (C-x 4 .)	定義部分を別ウィンドウに表示。
M-x find-tag-other-frame (C-x 5 .)	定義部分を別フレームに表示。
M-x complete-symbol (M-TAB)	シンボル名の補完(タブテーブルが読み込まれている時)
M-x visit-tags-table	タブテーブルを読み込み直す。]]></description>
        </item>
        <item>
            <title><![CDATA[ワイルドカード]]></title>
            <link>https://masutaka.net/2002-04-15-3/</link>
            <guid>https://masutaka.net/2002-04-15-3/</guid>
            <pubDate>Mon, 15 Apr 2002 02:00:00 GMT</pubDate>
            <description><![CDATA[sh系は一致しないとエラーを出すが、csh系は出さない。
-&gt; 素直にfindしたほうがいいかもね。
% ls *.{c,h,cxx}
animal.c wordfreq.c wordfreq.cxx@ wordfreq.h]]></description>
        </item>
        <item>
            <title><![CDATA[XBM，XPM (X11 Bitmap，X11 Pixmap) ]]></title>
            <link>https://masutaka.net/2002-04-15-2/</link>
            <guid>https://masutaka.net/2002-04-15-2/</guid>
            <pubDate>Mon, 15 Apr 2002 01:00:00 GMT</pubDate>
            <description><![CDATA[[ビットマップ][非圧縮][RGB，グレースケール]
X Window System用のアイコンやマウスカーソルを定義したり作成したりする場合や，
ビットマップ画像をX Window Systemのプログラム中で取り扱う場合に使用されるフォー
マットです．XBM形式の画像では2色，XPM形式の画像では複数色を扱えます．また圧縮
は行われません．
ファイルの中にはC言語の配列の形態で画像が保存されており，#defineによるサイズ設
定と，配列の要素として定義されたデータ本体からなるため，直接C言語 のプログラム
に取り込んで利用できます．拡張子は一般的に.xbmや.xpmです．]]></description>
        </item>
        <item>
            <title><![CDATA[16進数から10進数への変換]]></title>
            <link>https://masutaka.net/2002-04-15-1/</link>
            <guid>https://masutaka.net/2002-04-15-1/</guid>
            <pubDate>Mon, 15 Apr 2002 00:00:00 GMT</pubDate>
            <description><![CDATA[例えば ?\x20を評価すると、32になる。
追記(2002-04-17):
上のはこれはあくまでchar型を16進表示したものだから、
16進数を10進数に変換させるには不適当。
こっちが正解
(read &ldquo;#x20&rdquo;)
32]]></description>
        </item>
        <item>
            <title><![CDATA[ICE は In Circuit Emulator の略称 ]]></title>
            <link>https://masutaka.net/2002-04-14-1/</link>
            <guid>https://masutaka.net/2002-04-14-1/</guid>
            <pubDate>Sun, 14 Apr 2002 00:00:00 GMT</pubDate>
        </item>
        <item>
            <title><![CDATA[ミートソース]]></title>
            <link>https://masutaka.net/2002-04-12-2/</link>
            <guid>https://masutaka.net/2002-04-12-2/</guid>
            <pubDate>Fri, 12 Apr 2002 01:00:00 GMT</pubDate>
            <description><![CDATA[十分にタマネギを炒めてからトマトを入れろ。
そうしないと、もさもさしたソースになってしまう。]]></description>
        </item>
        <item>
            <title><![CDATA[ダイの大冒険]]></title>
            <link>https://masutaka.net/2002-04-12-1/</link>
            <guid>https://masutaka.net/2002-04-12-1/</guid>
            <pubDate>Fri, 12 Apr 2002 00:00:00 GMT</pubDate>
            <description><![CDATA[メドローア・・・メラ+ヒャド+アロー]]></description>
        </item>
        <item>
            <title><![CDATA[8bpp の面順次データの見方 ]]></title>
            <link>https://masutaka.net/2002-04-11-2/</link>
            <guid>https://masutaka.net/2002-04-11-2/</guid>
            <pubDate>Thu, 11 Apr 2002 01:00:00 GMT</pubDate>
            <description><![CDATA[8bppの面順次データはphotoshopのrawファイルとして見ることが出来ます。
&lt;方法&gt;
1.ファイルを&quot;汎用フォーマット(*.RAW)&ldquo;で開く。
2.”汎用オプション”ダイアログが表示されるので，フォーマットと色とbppを入力
（ヘッダは0で良いはず）]]></description>
        </item>
        <item>
            <title><![CDATA[shell の tips]]></title>
            <link>https://masutaka.net/2002-04-11-1/</link>
            <guid>https://masutaka.net/2002-04-11-1/</guid>
            <pubDate>Thu, 11 Apr 2002 00:00:00 GMT</pubDate>
            <description><![CDATA[% cd - [RET] 一つ前のディレクトリに戻る。
% pushd [RET] ディレクトリスタックに入っているディレクトリに戻る。
% popd [RET] ディレクトリスタックから削除。
% dirs [RET] カレントディレクトリをディレクトリスタックに追加。]]></description>
        </item>
        <item>
            <title><![CDATA[Solaris9 での double と long long のサイズ]]></title>
            <link>https://masutaka.net/2002-04-09-2/</link>
            <guid>https://masutaka.net/2002-04-09-2/</guid>
            <pubDate>Tue, 09 Apr 2002 01:00:00 GMT</pubDate>
            <description><![CDATA[sizeof(double) == 8
sizeof(long long) == 8]]></description>
        </item>
        <item>
            <title><![CDATA[~/.screenrc]]></title>
            <link>https://masutaka.net/2002-04-09-1/</link>
            <guid>https://masutaka.net/2002-04-09-1/</guid>
            <pubDate>Tue, 09 Apr 2002 00:00:00 GMT</pubDate>
            <description><![CDATA[コピーモードのウザイメッセージを消す。
 nethack off
 ]]></description>
        </item>
        <item>
            <title><![CDATA[cvs でリビジョンを戻す。]]></title>
            <link>https://masutaka.net/2002-04-05-2/</link>
            <guid>https://masutaka.net/2002-04-05-2/</guid>
            <pubDate>Fri, 05 Apr 2002 01:00:00 GMT</pubDate>
            <description><![CDATA[% cp [ファイル名] [バックアップファイル名]
% cvs update -p -r [リビジョン番号] [ファイル名] &gt; [ファイル名]]]></description>
        </item>
        <item>
            <title><![CDATA[add-hook]]></title>
            <link>https://masutaka.net/2002-04-05-1/</link>
            <guid>https://masutaka.net/2002-04-05-1/</guid>
            <pubDate>Fri, 05 Apr 2002 00:00:00 GMT</pubDate>
            <description><![CDATA[add-hook()の３つ目の引数にtを指定すると、
listの最後に追加してくれる。]]></description>
        </item>
        <item>
            <title><![CDATA[M-/の候補を表示する]]></title>
            <link>https://masutaka.net/2002-04-04-3/</link>
            <guid>https://masutaka.net/2002-04-04-3/</guid>
            <pubDate>Thu, 04 Apr 2002 02:00:00 GMT</pubDate>
            <description><![CDATA[M-C-/ (M-x dabbrev-completion)]]></description>
        </item>
        <item>
            <title><![CDATA[rgrep]]></title>
            <link>https://masutaka.net/2002-04-04-2/</link>
            <guid>https://masutaka.net/2002-04-04-2/</guid>
            <pubDate>Thu, 04 Apr 2002 01:00:00 GMT</pubDate>
            <description><![CDATA[JISコードのファイルも検索できます。
http://homepage1.nifty.com/~tetsu/ruby/cmd/rg.html ]]></description>
        </item>
        <item>
            <title><![CDATA[カレントディレクトリだけの使用量]]></title>
            <link>https://masutaka.net/2002-04-04-1/</link>
            <guid>https://masutaka.net/2002-04-04-1/</guid>
            <pubDate>Thu, 04 Apr 2002 00:00:00 GMT</pubDate>
            <description><![CDATA[% cd $HOME
% du -s
46708	.]]></description>
        </item>
        <item>
            <title><![CDATA[chasen インストール]]></title>
            <link>https://masutaka.net/2002-04-03-3/</link>
            <guid>https://masutaka.net/2002-04-03-3/</guid>
            <pubDate>Wed, 03 Apr 2002 02:00:00 GMT</pubDate>
            <description><![CDATA[% ./configure
% make
% make install]]></description>
        </item>
        <item>
            <title><![CDATA[アクセス権に s ビットを立てる]]></title>
            <link>https://masutaka.net/2002-04-03-2/</link>
            <guid>https://masutaka.net/2002-04-03-2/</guid>
            <pubDate>Wed, 03 Apr 2002 01:00:00 GMT</pubDate>
            <description><![CDATA[% mkdir aaa
drwxrwxr-x 2 masutaka 512 Apr 3 10:42 aaa/
% chmod g+s aaa
drwxrwsr-x 2 masutaka 512 Apr 3 10:42 aaa/
% chmod g-s aaa
drwxrwxr-x 2 masutaka 512 Apr 3 10:42 aaa/]]></description>
        </item>
        <item>
            <title><![CDATA[umask]]></title>
            <link>https://masutaka.net/2002-04-03-1/</link>
            <guid>https://masutaka.net/2002-04-03-1/</guid>
            <pubDate>Wed, 03 Apr 2002 00:00:00 GMT</pubDate>
            <description><![CDATA[|# 新規作成ファイルのパーミッションは、644。
|umask 022
ということをしていたが、これだと、CVSに新規登録するときに、表が自分以外
書き込めなくなってしまう。もちろん他人が書き込めるようにして表出しすれ
ばいいけど、多分忘れるでしょ。]]></description>
        </item>
        <item>
            <title><![CDATA[gcc の最適化オプション]]></title>
            <link>https://masutaka.net/2002-04-01-2/</link>
            <guid>https://masutaka.net/2002-04-01-2/</guid>
            <pubDate>Mon, 01 Apr 2002 01:00:00 GMT</pubDate>
            <description><![CDATA[gccに、オプション&rsquo;-O2&rsquo;を付けると、コードを最適化できる。
知っていたけど、gdbの変な動きと結び付かなかった。。。]]></description>
        </item>
        <item>
            <title><![CDATA[プライベート IP アドレス]]></title>
            <link>https://masutaka.net/2002-04-01-1/</link>
            <guid>https://masutaka.net/2002-04-01-1/</guid>
            <pubDate>Mon, 01 Apr 2002 00:00:00 GMT</pubDate>
            <description><![CDATA[URL: http://oku.edu.mie-u.ac.jp/~okumura/networking/private-ip.html ]]></description>
        </item>
        <item>
            <title><![CDATA[インライン関数]]></title>
            <link>https://masutaka.net/2002-03-26-1/</link>
            <guid>https://masutaka.net/2002-03-26-1/</guid>
            <pubDate>Tue, 26 Mar 2002 00:00:00 GMT</pubDate>
            <description><![CDATA[GNUコンパイラだと、
inline void func();
とかでインライン関数になるらしい。]]></description>
        </item>
        <item>
            <title><![CDATA[.forward 注意]]></title>
            <link>https://masutaka.net/2002-03-22-1/</link>
            <guid>https://masutaka.net/2002-03-22-1/</guid>
            <pubDate>Fri, 22 Mar 2002 00:00:00 GMT</pubDate>
            <description><![CDATA[ホームに誰でも書き込めるようにしておくと
その人の .forward は効かないみたいです。
でもそれは20日にこっそり直しておいたはずなんだけどなぁ
.forward についてもそういうのがあるかもしれないですね。
いじっているうちに直りました。]]></description>
        </item>
        <item>
            <title><![CDATA[UNIX で MS-Excel と MS-Word なファイルを見るツール]]></title>
            <link>https://masutaka.net/2002-03-21-1/</link>
            <guid>https://masutaka.net/2002-03-21-1/</guid>
            <pubDate>Thu, 21 Mar 2002 00:00:00 GMT</pubDate>
            <description><![CDATA[MS-WordTOHtml -&gt; wvHtml
MS-ExcelTOHtml -&gt; xlhtml]]></description>
        </item>
        <item>
            <title><![CDATA[WindowManager から Emacs を起動すると環境変数が読み込まれない]]></title>
            <link>https://masutaka.net/2002-03-17-1/</link>
            <guid>https://masutaka.net/2002-03-17-1/</guid>
            <pubDate>Sun, 17 Mar 2002 00:00:00 GMT</pubDate>
            <description><![CDATA[~/.zshenvに `. $HOME/.zshrc&rsquo;を書いて解決した。]]></description>
        </item>
        <item>
            <title><![CDATA[Xawd3d と Xpm のインストール]]></title>
            <link>https://masutaka.net/2002-03-16-1/</link>
            <guid>https://masutaka.net/2002-03-16-1/</guid>
            <pubDate>Sat, 16 Mar 2002 00:00:00 GMT</pubDate>
            <description><![CDATA[/usr/X11R6/include/X11/Xaw3dに ./xc/lib/Xawd3d/*.hをコピーして無理やりコンパイルを通した。
Xpmは X11R6をインストールしたらコンパイルすることができた。]]></description>
        </item>
        <item>
            <title><![CDATA[nfs で root からのアクセスを root として扱う方法]]></title>
            <link>https://masutaka.net/2002-03-15-1/</link>
            <guid>https://masutaka.net/2002-03-15-1/</guid>
            <pubDate>Fri, 15 Mar 2002 00:00:00 GMT</pubDate>
            <description><![CDATA[[SunOS, exportfs nobody anonuidで検索]
URL: http://www.ail.cs.gunma-u.ac.jp/~saito/nfs.html [Solaris, dfstab nobodyで検索]
URL: http://home7.highway.ne.jp/dayan/tips/unix/solaris.html ]]></description>
        </item>
        <item>
            <title><![CDATA[compfaceの本家]]></title>
            <link>https://masutaka.net/2002-03-14-2/</link>
            <guid>https://masutaka.net/2002-03-14-2/</guid>
            <pubDate>Thu, 14 Mar 2002 01:00:00 GMT</pubDate>
            <description><![CDATA[ftp://metalab.unc.edu/pub/Linux/apps/graphics/convert/ ]]></description>
        </item>
        <item>
            <title><![CDATA[バナー印刷]]></title>
            <link>https://masutaka.net/2002-03-14-1/</link>
            <guid>https://masutaka.net/2002-03-14-1/</guid>
            <pubDate>Thu, 14 Mar 2002 00:00:00 GMT</pubDate>
            <description><![CDATA[UNIX上で誰が印刷したかわかるやつ。
OHPとOHPの間にはさむ紙もバナー印刷という。]]></description>
        </item>
        <item>
            <title><![CDATA[script コマンド]]></title>
            <link>https://masutaka.net/2002-03-13-1/</link>
            <guid>https://masutaka.net/2002-03-13-1/</guid>
            <pubDate>Wed, 13 Mar 2002 00:00:00 GMT</pubDate>
            <description><![CDATA[script と打つと、以後の標準出力をファイルに書き出してくれる。
でも、結局sysの標準出力を書き出せなかった。]]></description>
        </item>
        <item>
            <title><![CDATA[IdiskTool]]></title>
            <link>https://masutaka.net/2002-03-12-1/</link>
            <guid>https://masutaka.net/2002-03-12-1/</guid>
            <pubDate>Tue, 12 Mar 2002 00:00:00 GMT</pubDate>
            <description><![CDATA[なんか時々同期が取れていないような&hellip;。]]></description>
        </item>
        <item>
            <title><![CDATA[コマンドラインスタック]]></title>
            <link>https://masutaka.net/2002-03-11-1/</link>
            <guid>https://masutaka.net/2002-03-11-1/</guid>
            <pubDate>Mon, 11 Mar 2002 00:00:00 GMT</pubDate>
            <description><![CDATA[(by 2ch)
コマンド入力中に「あれ？、なんだっけ？」ってほかの作業がしたくなったとき
ESC-qで一時的にコマンドプロンプトにもどれるんですね。]]></description>
        </item>
        <item>
            <title><![CDATA[xmodmap]]></title>
            <link>https://masutaka.net/2002-03-06-2/</link>
            <guid>https://masutaka.net/2002-03-06-2/</guid>
            <pubDate>Wed, 06 Mar 2002 01:00:00 GMT</pubDate>
            <description><![CDATA[% xmodmap -pke
ですべてのキーの対応表が見れるよ。]]></description>
        </item>
        <item>
            <title><![CDATA[JBIG の略称]]></title>
            <link>https://masutaka.net/2002-03-06-1/</link>
            <guid>https://masutaka.net/2002-03-06-1/</guid>
            <pubDate>Wed, 06 Mar 2002 00:00:00 GMT</pubDate>
            <description><![CDATA[二値画像符号化の標準
Joint Bi-lebel Image experts Group]]></description>
        </item>
        <item>
            <title><![CDATA[CD-R のコピー]]></title>
            <link>https://masutaka.net/2002-03-05-3/</link>
            <guid>https://masutaka.net/2002-03-05-3/</guid>
            <pubDate>Tue, 05 Mar 2002 02:00:00 GMT</pubDate>
            <description><![CDATA[デバイスの確認
# cdrecord -scanbus # cd /root # mkdir cdrom iso-imageの作成
# mkisofs -d -D -N -R -T -o [iso-imageファイル名] [ソースディレクトリ] マウントして中身を確認
# mount -o loop [iso-imageファイル名] /mnt/cdrom # ls -alF /mnt/cdrom # umount /mnt/cdrom テスト書き込み
# cdrecord dev=0,0,0 -v -dummy [iso-imageファイル名] 書きだし(DAO)
# cdrecord dev=0,0,0 -v -dao -eject [iso-imageファイル名] CD-RWの消去
# cdrecord dev=0,0,0 -v blank=fast ]]></description>
        </item>
        <item>
            <title><![CDATA[screen の使い方]]></title>
            <link>https://masutaka.net/2002-03-05-2/</link>
            <guid>https://masutaka.net/2002-03-05-2/</guid>
            <pubDate>Tue, 05 Mar 2002 01:00:00 GMT</pubDate>
            <description><![CDATA[ http://www.dekaino.net/screen/  http://www2.jan.ne.jp/~zinnia/screen/    分割: (PREFIX) S
移動: (PREFIX) C-i
削除: (PREFIX) X
解除: (PREFIX) Q
ヘルプ: (PREFIX) ?
 ]]></description>
        </item>
        <item>
            <title><![CDATA[認識されている CD-ROM ドライブを表示]]></title>
            <link>https://masutaka.net/2002-03-05-1/</link>
            <guid>https://masutaka.net/2002-03-05-1/</guid>
            <pubDate>Tue, 05 Mar 2002 00:00:00 GMT</pubDate>
            <description><![CDATA[% cat /proc/ide/hdc/model
TOSHIBA DVD-ROM SD-R2002]]></description>
        </item>
        <item>
            <title><![CDATA[emcws21 インストール]]></title>
            <link>https://masutaka.net/2002-03-03-4/</link>
            <guid>https://masutaka.net/2002-03-03-4/</guid>
            <pubDate>Sun, 03 Mar 2002 03:00:00 GMT</pubDate>
            <description><![CDATA[できちゃった&hellip;。
% tar xvzf emacs-21.1.tar.gz % zcat emcws-21.1-20020206.gz | patch -p0 % mkdir work ; cd work % ../emacs-21.1/configure --with-wnn --with-wnn-includes=/usr/include/wnn --with-wnn-libraries=/usr/lib --without-xim % make % su # make install ]]></description>
        </item>
        <item>
            <title><![CDATA[小技集]]></title>
            <link>https://masutaka.net/2002-03-03-3/</link>
            <guid>https://masutaka.net/2002-03-03-3/</guid>
            <pubDate>Sun, 03 Mar 2002 02:00:00 GMT</pubDate>
            <description><![CDATA[port scanningする % nmap localhost プロセス名をプログラムの方から変更する /* 下記URLの 1.13に詳細が載っている。 */ #include &lt;stdio.h&gt; #include &lt;string.h&gt; int main(i32 argv, i8** argc) { /* プロセス名は 2048byteまで */ strcpy(argc[0], &#34;hoge&#34;); sleep (1000000); return 1; } xine-video-player # rpm -ivh alsa-driver-0.5.9a-1.SuSE-6.3.i386.rpm # rpm -ivh alsa-lib-0.5.9-1.SuSE-6.3.i386.rpm # rpm -ivh xine-lib-0.9.7-1k1.i586.rpm # rpm -ivh xine-ui-0.9.7-1k1.i586.rpm # rpm -ivh --force libpng-1.2.1-2.i386.rpm # rpm -ivh --force libpng-devel-1.2.1-2.i386.rpm # rpm -ivh xine-0.9.8-3.i386.rpm プロンプトにスクリーン番号を表示(tcsh) if(! $?WINDOW) then setenv WINDOW NO endif set prompt=&#34;[$WINDOW]%m[%~]%L% &#34; なんでも動画プレイヤーの MPlayer http://www.]]></description>
        </item>
        <item>
            <title><![CDATA[タグブラウザではなくタブブラウザ]]></title>
            <link>https://masutaka.net/2002-03-03-2/</link>
            <guid>https://masutaka.net/2002-03-03-2/</guid>
            <pubDate>Sun, 03 Mar 2002 01:00:00 GMT</pubDate>
            <description><![CDATA[時々どっちなのか分からなくなるが、タグブラウザではなくてタブブラウザらしい。
googleで検索したら、タブブラウザの方が多かったので。]]></description>
        </item>
        <item>
            <title><![CDATA[いろいろなドキュメント]]></title>
            <link>https://masutaka.net/2002-03-03-1/</link>
            <guid>https://masutaka.net/2002-03-03-1/</guid>
            <pubDate>Sun, 03 Mar 2002 00:00:00 GMT</pubDate>
            <description><![CDATA[他のディレクトリにもかなりたくさんのドキュメントが置いてある。
http://www.sfc.wide.ad.jp/~nob/webdoc/c/faq-j.txt ]]></description>
        </item>
        <item>
            <title><![CDATA[Mozilla のインストール]]></title>
            <link>https://masutaka.net/2002-03-02-3/</link>
            <guid>https://masutaka.net/2002-03-02-3/</guid>
            <pubDate>Sat, 02 Mar 2002 02:00:00 GMT</pubDate>
            <description><![CDATA[Mozillaをインストールする時は、suで ~masutaka/.mozilla/を退避させて行なう。]]></description>
        </item>
        <item>
            <title><![CDATA[gcc の内部定義の表示方法]]></title>
            <link>https://masutaka.net/2002-03-02-2/</link>
            <guid>https://masutaka.net/2002-03-02-2/</guid>
            <pubDate>Sat, 02 Mar 2002 01:00:00 GMT</pubDate>
            <description><![CDATA[ % gcc -E -dM -x c /dev/null
 ]]></description>
        </item>
        <item>
            <title><![CDATA[tcsh メモ]]></title>
            <link>https://masutaka.net/2002-03-02-1/</link>
            <guid>https://masutaka.net/2002-03-02-1/</guid>
            <pubDate>Sat, 02 Mar 2002 00:00:00 GMT</pubDate>
            <description><![CDATA[[ftpホストの補完]
|set ftphosts=awk '{print $1}' $HOME/.lftp/bookmarks
|complete ftp &lsquo;p/1/$ftphosts/&rsquo;
[RPMのコマンド補完 (rpm -e するとインストール済みパッケージが補完される)]
|complete rpm &lsquo;c/&ndash;/(short-circuit rebuild rmsource)/&rsquo;
| &lsquo;c/-/(ivh Uvh)/&rsquo;
| &rsquo;n/&ndash;rebuild/f:.src.rpm/&rsquo;
| &rsquo;n/-i/f:.rpm/&rsquo; | &rsquo;n/-U/f:86.rpm/&rsquo;
| &rsquo;n/-e/rpm -qa&rsquo;/
[tarのオプション補完]
|complete {gtar,tar} p/1/&quot;(cvf tvf xvf cvfz zxvf Ixvf)&quot;/
| p/2/f:.{tar,tar.{bz2,gz,Z},taz,tgz}/
| c/[ctx]vf*/&quot;(z O p B)&quot;/
| n//f/
[rcpでのリモートのファイル・ディレクトリ名補完]
|complete rcp &lsquo;c%@:%set q=$:-0;set q=&quot;$q:s/@/ /&quot;;set q=&quot;$q:s/:/\ | /&quot;;set q=($q &quot; &quot;);rsh $q[2] -l $q[1] ls -dp $q[3]\*%&rsquo;
| &lsquo;c%:%set q=$:-0;set q=&quot;$q:s/:/ /&quot;;set q=($q &quot; &quot;); \ | rsh $q[1] ls -dp $q[2]\*%&rsquo; &lsquo;c%@%$hosts%:&rsquo; | &lsquo;C@[.]]></description>
        </item>
        <item>
            <title><![CDATA[Red Hat で FreeWnn を利用する]]></title>
            <link>https://masutaka.net/2002-02-27-2/</link>
            <guid>https://masutaka.net/2002-02-27-2/</guid>
            <pubDate>Wed, 27 Feb 2002 01:00:00 GMT</pubDate>
            <description><![CDATA[http://www.jp.redhat.com/manual/Doc72/RH-DOCS/rhl-cg-ja-7.2/japanese.html rootになって/etc/X11/xinit/xinitrc.d/xinputの該当個所を
次のように&rsquo;#&lsquo;でコメントした後、ログインし直します。
| #if [ X&quot;ldd /usr/X11R6/bin/kinput2 | grep libcanna&quot; = X ] ; then
| XIM_ARGS=&quot;-wnnenvrc /etc/FreeWnn/ja/wnnenvrc&quot;
| #else
| #	XIM_ARGS=&quot;-canna&quot;
| #fi]]></description>
        </item>
        <item>
            <title><![CDATA[なるほど！そういう参加方法もあったのか。 by 2ch]]></title>
            <link>https://masutaka.net/2002-02-27-1/</link>
            <guid>https://masutaka.net/2002-02-27-1/</guid>
            <pubDate>Wed, 27 Feb 2002 00:00:00 GMT</pubDate>
            <description><![CDATA[とりあえず自分の興味がむくプロジェクトのメーリングリストとか
IRCのチャネルに参加してみれば？
もちろん開発系やメッセージカタログ／ドキュメント翻訳系のMLへの
参加が理想だけど、ユーザー系のMLでも質問する側じゃなくて
回答する側に回ればそれなりに知識は付くし、つまらない質問に
開発者がわざわざ答える必要もなくなるからその分開発も進みやすく
なる。]]></description>
        </item>
        <item>
            <title><![CDATA[外部変数の提供]]></title>
            <link>https://masutaka.net/2002-02-26-2/</link>
            <guid>https://masutaka.net/2002-02-26-2/</guid>
            <pubDate>Tue, 26 Feb 2002 01:00:00 GMT</pubDate>
            <description><![CDATA[外部変数を提供する場合は、提供する人がCファイルに実体を持たなくてはいけない。
当たり前といえば、当たり前か。。。]]></description>
        </item>
        <item>
            <title><![CDATA[Xプロトコル (by 2ch)]]></title>
            <link>https://masutaka.net/2002-02-26-1/</link>
            <guid>https://masutaka.net/2002-02-26-1/</guid>
            <pubDate>Tue, 26 Feb 2002 00:00:00 GMT</pubDate>
            <description><![CDATA[Xプロトコルについて、教えてくださいよ。このXプロトコルだけど、
このプロトコルの下位に、TCP、IP、などのプロトコルか位置してると
思って間違いはないんですか？もしそうなら、HTTPや、FTPと同様、
Xプロトコルは、一般的なプロトコル階層のアプリケーション層に相当
するプロトコルと考えていいのでしょうか？これが正しければ、Xの
サーバとクライアントプロセスは、例えて言うなら、アパッチなどのH
TTPサーバと、ブラウザというWEBクライアントの関係と全く同一って事
になるけど、それで間違いは無いでしょうか？]]></description>
        </item>
        <item>
            <title><![CDATA[size_t 型]]></title>
            <link>https://masutaka.net/2002-02-25-1/</link>
            <guid>https://masutaka.net/2002-02-25-1/</guid>
            <pubDate>Mon, 25 Feb 2002 00:00:00 GMT</pubDate>
            <description><![CDATA[sizeof演算子で生成される符号なし整数の型。]]></description>
        </item>
        <item>
            <title><![CDATA[qiv インストール]]></title>
            <link>https://masutaka.net/2002-02-24-1/</link>
            <guid>https://masutaka.net/2002-02-24-1/</guid>
            <pubDate>Sun, 24 Feb 2002 00:00:00 GMT</pubDate>
            <description><![CDATA[CUIだけど、susie32に変わるものをやっと見つけた。
http://www.klografx.net/qiv/ % tar xvzf qiv-1.7.tgz
% cd qiv-1.7
% make
make install ]]></description>
        </item>
        <item>
            <title><![CDATA[MPEG-player by 2ch]]></title>
            <link>https://masutaka.net/2002-02-23-2/</link>
            <guid>https://masutaka.net/2002-02-23-2/</guid>
            <pubDate>Sat, 23 Feb 2002 01:00:00 GMT</pubDate>
            <description><![CDATA[DVDプレーヤの Xine というのがMPEGを再生するのに適している。
RPMがあったはずなので検索して入れてみて。
UIも使いやすくて便利。
&hellip;らしいよ。]]></description>
        </item>
        <item>
            <title><![CDATA[elisp の謎]]></title>
            <link>https://masutaka.net/2002-02-23-1/</link>
            <guid>https://masutaka.net/2002-02-23-1/</guid>
            <pubDate>Sat, 23 Feb 2002 00:00:00 GMT</pubDate>
            <description><![CDATA[(let ((user &#34;masutaka&#34;)) `((&#34;user&#34; . ,user)(&#34;popuser&#34; . ,user))) を評価すると当然
((&#34;user&#34; . &#34;masutaka&#34;) (&#34;popuser&#34; . &#34;masutaka&#34;)) になるが、M-x edebug-defun している間は
Result: ((&#34;user&#34; . #1=&#34;masutaka&#34;) (&#34;popuser&#34; . #1#)) とかになっている。謎だ。。。
追記(2007-11-17):
&ldquo;#&rdquo; はおそらくポインタみたいなもの。]]></description>
        </item>
        <item>
            <title><![CDATA[セゾンカードのポイント引き替え]]></title>
            <link>https://masutaka.net/2002-02-22-1/</link>
            <guid>https://masutaka.net/2002-02-22-1/</guid>
            <pubDate>Fri, 22 Feb 2002 00:00:00 GMT</pubDate>
            <description><![CDATA[2/13で終っていた。。。
オレがあれだけカードを使ったのはなんだったのかと、小一時間問いつめられたいっ！！]]></description>
        </item>
        <item>
            <title><![CDATA[nkf インストール]]></title>
            <link>https://masutaka.net/2002-02-21-1/</link>
            <guid>https://masutaka.net/2002-02-21-1/</guid>
            <pubDate>Thu, 21 Feb 2002 00:00:00 GMT</pubDate>
            <description><![CDATA[自宅の namazu-rpm を削除して、ソースからコンパイルして入れ直した。
その他のやりかたは、[2002-02-01-1] とそんなに変わらない。
nkf-1.92-6 を削除して、nkf-171 をインストールしたくらい。
rpm -e nkf-1.92-6 % mkdir nkf-171
% mv nkf171.shar
% chmod 777 nkf171.shar
% ./nkf171.shar
% vi Makefile
% make
cp nkf /usr/local/bin cp nkf.1* /usr/local/man/man1 ]]></description>
        </item>
        <item>
            <title><![CDATA[X11R6.6 インストール]]></title>
            <link>https://masutaka.net/2002-02-20-3/</link>
            <guid>https://masutaka.net/2002-02-20-3/</guid>
            <pubDate>Wed, 20 Feb 2002 02:00:00 GMT</pubDate>
            <description><![CDATA[% gtar xvzf xorg-[1-4].tar.gz
% gtar xvzf Xaw3d-1.5.tar.gz
% cd xc/config/cf
% mv site.def site.def.bak
% cp site.sample site.def
|******************************************************************
|*** site.sample	Fri Aug 18 04:41:48 2000
|&mdash; site.def	Wed Feb 20 20:40:22 2002
|***************
|*** 50,67 ****
| # endif
| # endif
|
|- /*
| #ifndef HasGcc2
| #define HasGcc2 YES
| #endif
|- /
|
| #endif / BeforeVendorCF /
|
| #ifdef AfterVendorCF
|
| #define ProjectRoot /usr/X11R6.]]></description>
        </item>
        <item>
            <title><![CDATA[小技集]]></title>
            <link>https://masutaka.net/2002-02-20-2/</link>
            <guid>https://masutaka.net/2002-02-20-2/</guid>
            <pubDate>Wed, 20 Feb 2002 01:00:00 GMT</pubDate>
            <description><![CDATA[・M-x rename-uniquely
&lsquo;shell&rsquo; -&gt; &lsquo;shell&lt;2&gt;&lsquo;とか。
・M-x eshell
~ % (message &ldquo;(ﾟдﾟ)ウマー&rdquo;)
(ﾟдﾟ)ウマー]]></description>
        </item>
        <item>
            <title><![CDATA[pollen.el 修正されておりました]]></title>
            <link>https://masutaka.net/2002-02-20-1/</link>
            <guid>https://masutaka.net/2002-02-20-1/</guid>
            <pubDate>Wed, 20 Feb 2002 00:00:00 GMT</pubDate>
            <description><![CDATA[http://plaza28.mbn.or.jp/~kitaj/XEmacs/pollen/pollen.html ]]></description>
        </item>
        <item>
            <title><![CDATA[namazu で Not a catalog file]]></title>
            <link>https://masutaka.net/2002-02-19-1/</link>
            <guid>https://masutaka.net/2002-02-19-1/</guid>
            <pubDate>Tue, 19 Feb 2002 00:00:00 GMT</pubDate>
            <description><![CDATA[やっと原因が分かった。FAQだった。。。
【Solarisでmknmzを実行しようとすると、&ldquo;Not a catalog file&quot;と表示されてしまいます。】
非常に場当たり的な対処ではありますが、configure時に &ndash;with-included-gettextオプションを追加して、
Solaris gettextの代わりにnamazuに同梱されているGNU gettextライブラリを使うようにしてください。
namazuではSolaris gettextはサポートされていません。
これはGNU gettext とSolaris gettextではメッセージカタログの形式に互換性がなく、
mknmzで使われているgettext.plスクリプトはGNUフォーマットのメッセージカタログしか取り扱えないためです。
URL: http://www.namazu.org/FAQ.html.ja#not-a-catalog-file ]]></description>
        </item>
        <item>
            <title><![CDATA[Mew の添付ファイルの種類]]></title>
            <link>https://masutaka.net/2002-02-18-3/</link>
            <guid>https://masutaka.net/2002-02-18-3/</guid>
            <pubDate>Mon, 18 Feb 2002 02:00:00 GMT</pubDate>
            <description><![CDATA[C-c C-aでファイルを添付した後、T で、ファイルの種類を決められる。
Message/Rfc822が、いわゆる転送メール。]]></description>
        </item>
        <item>
            <title><![CDATA[Info-directory-list]]></title>
            <link>https://masutaka.net/2002-02-18-2/</link>
            <guid>https://masutaka.net/2002-02-18-2/</guid>
            <pubDate>Mon, 18 Feb 2002 01:00:00 GMT</pubDate>
            <description><![CDATA[個人用の Infoファイルを読みに行ってくれるようになった。
Info-default-directory-list -&gt; Info-directory-list でした。]]></description>
        </item>
        <item>
            <title><![CDATA[Wanderlust を使ってみた]]></title>
            <link>https://masutaka.net/2002-02-18-1/</link>
            <guid>https://masutaka.net/2002-02-18-1/</guid>
            <pubDate>Mon, 18 Feb 2002 00:00:00 GMT</pubDate>
            <description><![CDATA[色使いとかイマイチだなあ。。。
Mewみたいに、iとかでメールをゲットできるのだろうか？
どうでもいいけど、C-x C-f ~/.e [TAB]って打ったあとに、
.elmo/も候補にはいるのがウザイ。]]></description>
        </item>
        <item>
            <title><![CDATA[testコマンド (by 2ch)]]></title>
            <link>https://masutaka.net/2002-02-17-1/</link>
            <guid>https://masutaka.net/2002-02-17-1/</guid>
            <pubDate>Sun, 17 Feb 2002 00:00:00 GMT</pubDate>
            <description><![CDATA[test == [ だからこんなのがあったのか！
|% ls -al which [
|lrwxrwxrwx 1 root root 4 Jan 15 05:45 /usr/bin/[ -&gt; test
あとついでに言っておくと、
|read choise
で何も入力せずただリターン押されると
|[ = s ]
という評価になり、&quot;[: s: unknown operand&quot;で激しく鬱になるので、
|[ &ldquo;$choise&rdquo; = s ]
と書くこと。]]></description>
        </item>
        <item>
            <title><![CDATA[crontab]]></title>
            <link>https://masutaka.net/2002-02-16-2/</link>
            <guid>https://masutaka.net/2002-02-16-2/</guid>
            <pubDate>Sat, 16 Feb 2002 01:00:00 GMT</pubDate>
            <description><![CDATA[実体ファイルは、/var/spool/cron/crontabs
デフォルトのパスは、/usr/binのみ。]]></description>
        </item>
        <item>
            <title><![CDATA[時刻合わせの罠]]></title>
            <link>https://masutaka.net/2002-02-16-1/</link>
            <guid>https://masutaka.net/2002-02-16-1/</guid>
            <pubDate>Sat, 16 Feb 2002 00:00:00 GMT</pubDate>
            <description><![CDATA[date 02160035 2002年 2月 16日 土曜日 00:35:00 JST
4/1にしてから、今日の日付に戻したら、ログイン画面にぶっ飛んだよ。]]></description>
        </item>
        <item>
            <title><![CDATA[filerogue]]></title>
            <link>https://masutaka.net/2002-02-14-3/</link>
            <guid>https://masutaka.net/2002-02-14-3/</guid>
            <pubDate>Thu, 14 Feb 2002 02:00:00 GMT</pubDate>
            <description><![CDATA[こうやって起動するのか&hellip;。(IDiskToolも同様)
% cat /usr/local/bin/filerogue
#!/bin/sh
exec /usr/java/jdk1.3.1_02/jre/bin/java -jar /usr/local/share/filerogue/filerogue.jar]]></description>
        </item>
        <item>
            <title><![CDATA[MS ゴシックを Linux で使う]]></title>
            <link>https://masutaka.net/2002-02-14-2/</link>
            <guid>https://masutaka.net/2002-02-14-2/</guid>
            <pubDate>Thu, 14 Feb 2002 01:00:00 GMT</pubDate>
            <description><![CDATA[URL: http://www.coolbrain.net/xtt.html ]]></description>
        </item>
        <item>
            <title><![CDATA[カーソル下の face の種類を調べる]]></title>
            <link>https://masutaka.net/2002-02-14-1/</link>
            <guid>https://masutaka.net/2002-02-14-1/</guid>
            <pubDate>Thu, 14 Feb 2002 00:00:00 GMT</pubDate>
            <description><![CDATA[M-x list-text-properties-at]]></description>
        </item>
        <item>
            <title><![CDATA[nautilus]]></title>
            <link>https://masutaka.net/2002-02-13-5/</link>
            <guid>https://masutaka.net/2002-02-13-5/</guid>
            <pubDate>Wed, 13 Feb 2002 04:00:00 GMT</pubDate>
            <description><![CDATA[RedHatで「ここからスタート」とか「masutakaのホーム」がなくなっていた原因。
rpm -ivh nautilus-mozilla-1.0.4-43.i386.rpm nautilus-1.0.4-43.i386.rpm ]]></description>
        </item>
        <item>
            <title><![CDATA[~/bin/Emacs]]></title>
            <link>https://masutaka.net/2002-02-13-4/</link>
            <guid>https://masutaka.net/2002-02-13-4/</guid>
            <pubDate>Wed, 13 Feb 2002 03:00:00 GMT</pubDate>
            <description><![CDATA[面倒くさいのでこうした。
% ln -s Emacs-wada Emacs
今までの Emacsは、EMACSにリネームし、emacs-20.7を使うことにした。
なんかエラーが出まくっているし、emcwsを捨てるいい機会なので。]]></description>
        </item>
        <item>
            <title><![CDATA[InternetDisk]]></title>
            <link>https://masutaka.net/2002-02-13-3/</link>
            <guid>https://masutaka.net/2002-02-13-3/</guid>
            <pubDate>Wed, 13 Feb 2002 02:00:00 GMT</pubDate>
            <description><![CDATA[http://www.idisk-just.com/?m=vup ブラウザからもファイルの Up/DownLoadができるようになった。(^-^)
これからは、フロッピーを使わずに済むかな？？？]]></description>
        </item>
        <item>
            <title><![CDATA[head と tail]]></title>
            <link>https://masutaka.net/2002-02-13-2/</link>
            <guid>https://masutaka.net/2002-02-13-2/</guid>
            <pubDate>Wed, 13 Feb 2002 01:00:00 GMT</pubDate>
            <description><![CDATA[例えば -20 オプションで先頭または最後の 20 行を表示する。]]></description>
        </item>
        <item>
            <title><![CDATA[ファイルの分割＆連結]]></title>
            <link>https://masutaka.net/2002-02-13-1/</link>
            <guid>https://masutaka.net/2002-02-13-1/</guid>
            <pubDate>Wed, 13 Feb 2002 00:00:00 GMT</pubDate>
            <description><![CDATA[|&lt;ファイルの分割&gt; ※ $LANG が &ldquo;ja&rdquo; のときには正しく動作しないそうだ。
|(sh, bash, zsh etc&hellip;)
|% LANG=C split -b [size] [filename]
|(csh, tcsh)
|% \env LANG=C split -b [size] [filename]
|
|&lt;ファイルの連結&gt;
|(Unix)
|% cat [file1] [file2] [file3] &hellip; &gt; [filename]
|(Dos)
|&gt; copy /b [file1]+[file2]+[file3]+&hellip; [filename]
|
|&lt;詳細&gt;
|(分割サイズの指定方法)
| -b [size] &ndash;&gt; [size]Byte のファイルに分割
| -b [size]k &ndash;&gt; [size]KByte のファイルに分割
| -b [size]m &ndash;&gt; [size]MByte のファイルに分割
|(分割されたファイルの名前)
|[filename] の末尾に、aa, ab, ac, &hellip; az, ba, &hellip; zzが付加されたものになる。]]></description>
        </item>
        <item>
            <title><![CDATA[java インストール]]></title>
            <link>https://masutaka.net/2002-02-09-6/</link>
            <guid>https://masutaka.net/2002-02-09-6/</guid>
            <pubDate>Sat, 09 Feb 2002 05:00:00 GMT</pubDate>
            <description><![CDATA[% unzip j2sdk-1_3_1_02-linux-i386-rpm.bin
rpm -ivh jdk-1.3.1_02.i386.rpm URL: http://www.javasoft.com/products/jdk/1.2/ja/download-linux.html ]]></description>
        </item>
        <item>
            <title><![CDATA[CD-R/RW の焼き方、ツールの紹介]]></title>
            <link>https://masutaka.net/2002-02-09-5/</link>
            <guid>https://masutaka.net/2002-02-09-5/</guid>
            <pubDate>Sat, 09 Feb 2002 04:00:00 GMT</pubDate>
            <description><![CDATA[URL: http://www3.airnet.ne.jp/_tom_/CD-R.html ]]></description>
        </item>
        <item>
            <title><![CDATA[Mozilla インストール]]></title>
            <link>https://masutaka.net/2002-02-09-4/</link>
            <guid>https://masutaka.net/2002-02-09-4/</guid>
            <pubDate>Sat, 09 Feb 2002 03:00:00 GMT</pubDate>
            <description><![CDATA[rpm -e mozilla-psm rpm -e nautilus nautilus-mozilla rpm -e mozilla rpm -ivh mozilla-psm-0.9.8-0.i386.rpm rpm -ivh mozilla-0.9.8-0.i386.rpm ]]></description>
        </item>
        <item>
            <title><![CDATA[端末が化けたら？]]></title>
            <link>https://masutaka.net/2002-02-09-3/</link>
            <guid>https://masutaka.net/2002-02-09-3/</guid>
            <pubDate>Sat, 09 Feb 2002 02:00:00 GMT</pubDate>
            <description><![CDATA[○方法１
|% echo ^V^[c [Enter]
(&quot;^V&quot; は &ldquo;ctl+v&rdquo; で、&quot;^[&quot; は &ldquo;ESC&rdquo; です。)
○方法２
resetとかclearってコマンドをモジバケの中で打つ。
○方法３
Ctrl+中ボタンでfull reset選ぶ。
○方法４
|% stty sane]]></description>
        </item>
        <item>
            <title><![CDATA[cp でシンボリックファイルを展開する方法]]></title>
            <link>https://masutaka.net/2002-02-09-2/</link>
            <guid>https://masutaka.net/2002-02-09-2/</guid>
            <pubDate>Sat, 09 Feb 2002 01:00:00 GMT</pubDate>
            <description><![CDATA[普通にcpでシンボリックリンクファイルをコピーすると，
リンク元のファイルの内容がコピーされてしまいます。
こんな時には，-dオプションをつけます。
これで，リンクファイルはリンクファイルとしてコピーされます。]]></description>
        </item>
        <item>
            <title><![CDATA[realplayer]]></title>
            <link>https://masutaka.net/2002-02-09-1/</link>
            <guid>https://masutaka.net/2002-02-09-1/</guid>
            <pubDate>Sat, 09 Feb 2002 00:00:00 GMT</pubDate>
            <description><![CDATA[rpm -ivh rp8_linux20_libc6_i386_cs2_rpm ]]></description>
        </item>
        <item>
            <title><![CDATA[gz と bzip2 の処理時間]]></title>
            <link>https://masutaka.net/2002-02-08-3/</link>
            <guid>https://masutaka.net/2002-02-08-3/</guid>
            <pubDate>Fri, 08 Feb 2002 02:00:00 GMT</pubDate>
            <description><![CDATA[5:00から開始してこの時間差。かかりすぎだろ！ &gt; bzip2
-rw-rw-r&ndash; 1 masutaka masutaka 358242960 Feb 7 05:11 masutaka.tar.gz
-rw-rw-r&ndash; 1 masutaka masutaka 323616285 Feb 8 05:57 masutaka.tar.bz2]]></description>
        </item>
        <item>
            <title><![CDATA[Emacs21 インストール]]></title>
            <link>https://masutaka.net/2002-02-08-2/</link>
            <guid>https://masutaka.net/2002-02-08-2/</guid>
            <pubDate>Fri, 08 Feb 2002 01:00:00 GMT</pubDate>
            <description><![CDATA[Emacs21のインストールはこんなに簡単なのか&hellip;。
% tar xvzf emacs-21.1.tar.gz
% mkdir work ; cd work
% ../emacs-21.1/configure &ndash;without-xim
% make
% su
make install ]]></description>
        </item>
        <item>
            <title><![CDATA[makeinfo]]></title>
            <link>https://masutaka.net/2002-02-08-1/</link>
            <guid>https://masutaka.net/2002-02-08-1/</guid>
            <pubDate>Fri, 08 Feb 2002 00:00:00 GMT</pubDate>
            <description><![CDATA[rpm -ivh texinfo-4.0b-3.i386.rpm ]]></description>
        </item>
        <item>
            <title><![CDATA[構造体定義+宣言を同時にやる。]]></title>
            <link>https://masutaka.net/2002-02-07-1/</link>
            <guid>https://masutaka.net/2002-02-07-1/</guid>
            <pubDate>Thu, 07 Feb 2002 00:00:00 GMT</pubDate>
            <description><![CDATA[↓これで、構造体定義+宣言を同時にできる。( ´_ゝ`)ヤレヤレ&hellip;
static struct { i32 cnt; u8* pos; u8 buf[sem_UBUFSIZE]; } sem_ubuf; ]]></description>
        </item>
        <item>
            <title><![CDATA[mknmz]]></title>
            <link>https://masutaka.net/2002-02-06-1/</link>
            <guid>https://masutaka.net/2002-02-06-1/</guid>
            <pubDate>Wed, 06 Feb 2002 00:00:00 GMT</pubDate>
            <description><![CDATA[mknmzを M-x perldbで実行させたら、インデックスファイルを作ることができた。
わけ分からん。]]></description>
        </item>
        <item>
            <title><![CDATA[M-x top-level]]></title>
            <link>https://masutaka.net/2002-02-05-3/</link>
            <guid>https://masutaka.net/2002-02-05-3/</guid>
            <pubDate>Tue, 05 Feb 2002 02:00:00 GMT</pubDate>
            <description><![CDATA[モードラインが [[(Message Encoded-kbd)]] などとなっているとき、M-x
top-level すると、[[]] を削除できる。BackTrace が出たときに、q して
も OK。]]></description>
        </item>
        <item>
            <title><![CDATA[なんかいい]]></title>
            <link>https://masutaka.net/2002-02-05-2/</link>
            <guid>https://masutaka.net/2002-02-05-2/</guid>
            <pubDate>Tue, 05 Feb 2002 01:00:00 GMT</pubDate>
            <description><![CDATA[＞＞669
ぷんすか]]></description>
        </item>
        <item>
            <title><![CDATA[小技集]]></title>
            <link>https://masutaka.net/2002-02-05-1/</link>
            <guid>https://masutaka.net/2002-02-05-1/</guid>
            <pubDate>Tue, 05 Feb 2002 00:00:00 GMT</pubDate>
            <description><![CDATA[-fという名前のファイルを削除
% rm -- -f パーティションの残り容量を取得する。
% df -k 出力先ディレクリを指定して、そこに解凍
% tar xvzf &lt;tar.gz file&gt; -C &lt;output-directory&gt; ]]></description>
        </item>
        <item>
            <title><![CDATA[tamago の使い方]]></title>
            <link>https://masutaka.net/2002-02-04-1/</link>
            <guid>https://masutaka.net/2002-02-04-1/</guid>
            <pubDate>Mon, 04 Feb 2002 00:00:00 GMT</pubDate>
            <description><![CDATA[○リージョンを(半角カナ|ひらがな|カタカナ|全角)に変換。
M-x japanese-(hankaku|hiragana|katakana|zenkaku)-region
○C-(toggle-input-method)で日本語が入力できる状態で&hellip;
C-x C-m h(its-select-hiragana)&hellip;&hellip;&hellip;.. ひらがな
C-x C-m k(its-select-katakana)&hellip;&hellip;&hellip;.. カタカナ
C-x C-m x(its-select-hankaku-katakana)&hellip; 半角カナ
C-x C-m z(its-select-zenkaku-downcase)&hellip; 全角小文字
C-x C-m Z(its-select-zenkaku-upcase)&hellip;.. 全角大文字]]></description>
        </item>
        <item>
            <title><![CDATA[kakasi と namazu のインストール]]></title>
            <link>https://masutaka.net/2002-02-01-1/</link>
            <guid>https://masutaka.net/2002-02-01-1/</guid>
            <pubDate>Fri, 01 Feb 2002 00:00:00 GMT</pubDate>
            <description><![CDATA[前やったときは acがないと言われたのになぜかうまくいった。
でも、mknmzの動作が怪しい。。。
|% gtar xvzf kakasi-2.3.4.tar.gz
|% cd kakasi-2.3.4
|% ./configure
|% make
|% make install
|% cd ..
|% gtar xvzf namazu-2.0.10.tar.gz
|% cd namazu-2.0.10/File-MMagic
|% perl Makefile.PL
|% make
|% make install
|% cd ..
|% ./configure &ndash;with-included-gettext
|% make
|% make install
追記(2002-02-19):
mknmz の動きが怪しいのは FAQ だった。
&ndash;with-included-gettext を付けて解決した。]]></description>
        </item>
        <item>
            <title><![CDATA[自宅に ruby をインストール]]></title>
            <link>https://masutaka.net/2002-01-31-3/</link>
            <guid>https://masutaka.net/2002-01-31-3/</guid>
            <pubDate>Thu, 31 Jan 2002 02:00:00 GMT</pubDate>
            <description><![CDATA[% ./configure
% make
make install ]]></description>
        </item>
        <item>
            <title><![CDATA[自宅に migemo をインストール]]></title>
            <link>https://masutaka.net/2002-01-31-2/</link>
            <guid>https://masutaka.net/2002-01-31-2/</guid>
            <pubDate>Thu, 31 Jan 2002 01:00:00 GMT</pubDate>
            <description><![CDATA[cp bsearch.rb romkan.rb /usr/local/lib/ruby/site_ruby % ./configure &ndash;with-emacs=/usr/local/bin/emacs
% make
make install ]]></description>
        </item>
        <item>
            <title><![CDATA[自宅に tamagoV4 をインストール]]></title>
            <link>https://masutaka.net/2002-01-31-1/</link>
            <guid>https://masutaka.net/2002-01-31-1/</guid>
            <pubDate>Thu, 31 Jan 2002 00:00:00 GMT</pubDate>
            <description><![CDATA[% mkdir ../tmp
% cd ../tmp
% ln -s ../emacs/tamago-00423a-current.diff.gz
% cd ../emacs/tamago-4.0.6
% zcat ../../tmp/tamago-00423a-current.diff.gz | patch -p1
// patchのエラーは無視。。。
% make
make install ]]></description>
        </item>
        <item>
            <title><![CDATA[visio のショートカットキー ]]></title>
            <link>https://masutaka.net/2002-01-29-1/</link>
            <guid>https://masutaka.net/2002-01-29-1/</guid>
            <pubDate>Tue, 29 Jan 2002 00:00:00 GMT</pubDate>
            <description><![CDATA[C-S-左クリック	-&gt;	拡大表示
C-S-右クリック	-&gt;	縮小表示
C-S-I	-&gt;	原寸大(100%)
C-F6	-&gt;	他のウィンドウに移動]]></description>
        </item>
        <item>
            <title><![CDATA[森本淳さんのお言葉]]></title>
            <link>https://masutaka.net/2002-01-25-1/</link>
            <guid>https://masutaka.net/2002-01-25-1/</guid>
            <pubDate>Fri, 25 Jan 2002 00:00:00 GMT</pubDate>
            <description><![CDATA[我々(?)はあなたのすぐ側には居ないわけですから、
「車のウインカーがつきません」
「ウインカーレバーを倒してみるのは?」
「ok, ウインカーつきました」
程度のアドバイスはできると思いますが、
「車のエンジンがかかりません」というのに対して、「ではボンネットを開けて、
向かって右の前から２番目にあるバッテリーの緑のフタを外して赤いワイヤーを外して
接点部の鉛の覆いを外して接点の銅に緑青が吹いていたらそれをサンドペーパーで
こすって磨いて接点復活剤をかけてまた組み上げるのがまず１点。
次に向かって左３番目の ECU を開けて CPU の (以下 120 行省略) 」みたいな指摘は、
超人かアポロ13号の地上指令室でもないかぎり、残念ながらできません。
URL: http://www.namazu.org/FAQ.html ]]></description>
        </item>
        <item>
            <title><![CDATA[小技集]]></title>
            <link>https://masutaka.net/2002-01-24-1/</link>
            <guid>https://masutaka.net/2002-01-24-1/</guid>
            <pubDate>Thu, 24 Jan 2002 00:00:00 GMT</pubDate>
            <description><![CDATA[○サービスの起動を制御する。
% /usr/sbin/ntsysv
or
% /usr/sbin/setup
で System servicesを選択。]]></description>
        </item>
        <item>
            <title><![CDATA[ケンシロウ進数]]></title>
            <link>https://masutaka.net/2002-01-22-1/</link>
            <guid>https://masutaka.net/2002-01-22-1/</guid>
            <pubDate>Tue, 22 Jan 2002 00:00:00 GMT</pubDate>
            <description><![CDATA[URL: http://www.asahi-net.or.jp/~rc4t-ishr/kensiro.html ]]></description>
        </item>
        <item>
            <title><![CDATA[rpm 使い方]]></title>
            <link>https://masutaka.net/2002-01-20-1/</link>
            <guid>https://masutaka.net/2002-01-20-1/</guid>
            <pubDate>Sun, 20 Jan 2002 00:00:00 GMT</pubDate>
            <description><![CDATA[# インストール $ sudo rpm -ivh huga-1.0.0.i386.rpm # アップデート $ sudo rpm -Uvh huge-1.1.0.i386.rpm # 古いのがあったときだけアップデート $ sudo rpm -Fvh huga-1.1.0.i386.rpm # アンインストール(ex. gcc-2.96-98) $ sudo rpm -e gcc # 指定されたインストール済みパッケージに含まれているファイルをすべて表示 $ rpm -ql huga # インストールしてあるパッケージをすべて表示 $ rpm -qa # そのファイルがどの rpmに属するか調べる。 $ rpm -qf [file] # インストール/アンインストール時に実行されるスクリプトを確認 $ rpm -qp --scripts [file] $ rpm -q --scripts [package name] # パッケージに含まれているファイルを確認 $ rpm2cpio huge-1.1.0.i386.rpm | cpio -t # パッケージに含まれているファイルをカレントに展開 $ rpm2cpio huge-1.]]></description>
        </item>
        <item>
            <title><![CDATA[cvs でブランチを指定して取り出し (by kazu)]]></title>
            <link>https://masutaka.net/2002-01-18-1/</link>
            <guid>https://masutaka.net/2002-01-18-1/</guid>
            <pubDate>Fri, 18 Jan 2002 00:00:00 GMT</pubDate>
            <description><![CDATA[% cvs co -r &lt;branch-name&gt; mew ]]></description>
        </item>
        <item>
            <title><![CDATA[hide-ifdef-mode]]></title>
            <link>https://masutaka.net/2002-01-17-1/</link>
            <guid>https://masutaka.net/2002-01-17-1/</guid>
            <pubDate>Thu, 17 Jan 2002 00:00:00 GMT</pubDate>
            <description><![CDATA[C-c @ d (シンボル登録 define)
C-c @ u (シンボル登録 undef)
C-c @ h (ifdefを隠す)
C-c @ s (ifdefを出す)]]></description>
        </item>
        <item>
            <title><![CDATA[bash]]></title>
            <link>https://masutaka.net/2002-01-16-1/</link>
            <guid>https://masutaka.net/2002-01-16-1/</guid>
            <pubDate>Wed, 16 Jan 2002 00:00:00 GMT</pubDate>
            <description><![CDATA[bash の alias では $@ などは使えません。
引数は後ろにつけることしかできないです。
~/.bashrc に alias のかわりに
|lsa () {
| ls -al $* | $LSPAGER
|}
と書けばよろしいかと思います。]]></description>
        </item>
        <item>
            <title><![CDATA[xmodmap -- Caps_Lock と Control_L の入れ換え]]></title>
            <link>https://masutaka.net/2002-01-15-2/</link>
            <guid>https://masutaka.net/2002-01-15-2/</guid>
            <pubDate>Tue, 15 Jan 2002 01:00:00 GMT</pubDate>
            <description><![CDATA[!
! Xの利用時に，Caps_Lock と
! Control_L とを入れ替えます．
!
remove Lock = Caps_Lock
remove Control = Control_L
keysym Control_L = Caps_Lock
keysym Caps_Lock = Control_L
add Lock = Caps_Lock
add Control = Control_L]]></description>
        </item>
        <item>
            <title><![CDATA[printfで、0x0000f1f2のような書式にする。]]></title>
            <link>https://masutaka.net/2002-01-15-1/</link>
            <guid>https://masutaka.net/2002-01-15-1/</guid>
            <pubDate>Tue, 15 Jan 2002 00:00:00 GMT</pubDate>
            <description><![CDATA[printf(&#34;hexl = 0x%08x\n&#34;, hexl); ]]></description>
        </item>
        <item>
            <title><![CDATA[HTTP ディレクトリからすべての JPEG ファイルをダウンロードする]]></title>
            <link>https://masutaka.net/2002-01-13-4/</link>
            <guid>https://masutaka.net/2002-01-13-4/</guid>
            <pubDate>Sun, 13 Jan 2002 03:00:00 GMT</pubDate>
            <description><![CDATA[|% wget -r -l1 &ndash;no-parent -A.jpg http://host/dir/
|% wget -r -l 1 -A jpg,JPG,html -H -D gazo.foo.com -k -p http://www.foo.com/abc.html ]]></description>
        </item>
        <item>
            <title><![CDATA[Emacs と Elisp のマニュアルを Info にする]]></title>
            <link>https://masutaka.net/2002-01-13-3/</link>
            <guid>https://masutaka.net/2002-01-13-3/</guid>
            <pubDate>Sun, 13 Jan 2002 02:00:00 GMT</pubDate>
            <description><![CDATA[GNU Emacs マニュアル 20.6 http://www.ascii.co.jp/books/detail/4-7561/4-7561-3413-0.html ・マニュアル本体
ftp://ftp.ascii.co.jp/pub/GNU/emacs-20.x/emacs-20.6-man-jp.tgz ・@nodeの不備を補完するパッチ
http://namazu.org/~tsuchiya/doc/emacs-20.6-man-jp.patch.bz2 % gtar xzf emacs-20.6-man-jp.tgz % cd emacs-20.6-man-jp % bzcat ../emacs-20.6-man-jp.patch.bz2 | patch ack.texiを emacs-20.7のアーカイブファイルからコピー C-x C-f emacs.texi [RET] M-x texinfo-format-buffer [RET] C-x C-s % cp emacs-ja* /usr/local/info /usr/local/info/dirを編集して終わり。 Emacs Lisp リファレンスマニュアル http://www.ascii.co.jp/books/detail/4-7561/4-7561-3414-9.html ・マニュアル本体
ftp://ftp.ascii.co.jp/pub/GNU/elisp-manual-20/elisp-manual-20-2.5-jp.tgz ・訂正情報
ftp://ftp.ascii.co.jp/pub/GNU/elisp-manual-20/elisp-manual-20-2.5-jp.ERRATA.000422.jis ftp://ftp.ascii.co.jp/pub/GNU/elisp-manual-20/elisp-manual-20-2.5-jp.ERRATA.000508.jis ・@nodeの不備を補完するパッチ
http://namazu.org/~tsuchiya/doc/elisp-manual-20-2.5-jp.patch.bz2 % gtar xzf elisp-manual-20-2.5-jp.tgz % cd elisp-manual-20-2.5-jp % bzcat ../elisp-manual-20-2.5-jp.patch.bz2 | patch % cat ../elisp-manual-20-2.5-jp.ERRATA.000422.jis | patch % cat ../elisp-manual-20-2.5-jp.ERRATA.000508.jis | patch % ln -s index.]]></description>
        </item>
        <item>
            <title><![CDATA[Web サイトメモ]]></title>
            <link>https://masutaka.net/2002-01-13-2/</link>
            <guid>https://masutaka.net/2002-01-13-2/</guid>
            <pubDate>Sun, 13 Jan 2002 01:00:00 GMT</pubDate>
            <description><![CDATA[Acrobat Reader
http://www.adobe.co.jp/products/acrobat/ Cygwin
http://sources.redhat.com/cygwin/mirrors.html ex. ftp://ring.asahi-net.or.jp/archives/pc/gnu-win32/setup.exe FFFTP
http://www2.biglobe.ne.jp/~sota/ GV
http://www2h.biglobe.ne.jp/~tobita/ Lhaplus
http://www.hoehoe.com/software/lhaplus/index.html Meadow
ftp://ftp.m17n.org/pub/mule/Windows/ [一次配布]
ftp://ftp.etl.go.jp/pub/mule/Windows/ Meadow-1.14-i386-base.tar.gz
Meadow-1.14-i386-els.tar.gz
http://www.egroups.co.jp/files/emacs21-users-ja/Meadow/ apel-10.3-for-Meadow1.14-1.tar.gz
flim-1.14.2-for-Meadow1.14-2.tar.gz
semi-1.14.3-for-Meadow1.14-2.tar.gz
http://www.netlaputa.ne.jp/~cymouque/ gnuserv-latest.zip
Real Player
http://www.jp.real.com/ WinGroove
http://www.wg7.com/ 秀丸
http://hidemaru.xaxon.co.jp/ 窓の手
http://www.asahi-net.or.jp/~vr4m-ikw/index.htm 窓使いの憂鬱
http://mayu.sourceforge.net/ja/index.html Becky!
http://www.rimarts.co.jp/becky-j.htm Opera
http://www.opera.com/download/ http://www.moonstone.jp/ ]]></description>
        </item>
        <item>
            <title><![CDATA[たつをのホームページ、いつでもどこでもメモしたい etc...]]></title>
            <link>https://masutaka.net/2002-01-13-1/</link>
            <guid>https://masutaka.net/2002-01-13-1/</guid>
            <pubDate>Sun, 13 Jan 2002 00:00:00 GMT</pubDate>
            <description><![CDATA[URL: http://nais.to/~yto/ ]]></description>
        </item>
        <item>
            <title><![CDATA[雑記]]></title>
            <link>https://masutaka.net/2002-01-11-1/</link>
            <guid>https://masutaka.net/2002-01-11-1/</guid>
            <pubDate>Fri, 11 Jan 2002 00:00:00 GMT</pubDate>
            <description><![CDATA[たとえ数GBのファイルであってもたった数バイトに
してしまう圧縮方式があります。
それは全てのファイルに番号を付けるのです。
欠点は圧縮ソフト自身がどんどん肥大化していくことです。
そう何百TBにも。。。]]></description>
        </item>
        <item>
            <title><![CDATA[Mew のインストール]]></title>
            <link>https://masutaka.net/2002-01-08-3/</link>
            <guid>https://masutaka.net/2002-01-08-3/</guid>
            <pubDate>Tue, 08 Jan 2002 02:00:00 GMT</pubDate>
            <description><![CDATA[Mewをインストールした場合は、/usr/local/share/emacs/site-lisp以下の
シンボリックリンクを必ず更新しなければいけない。
これは、/usr/local/bin/mew.* との整合性がおかしくなるから？？？
ということは、
/usr/local/share/emacs/site-lisp:
drwxr-xr-x 3 masuda masutaka 2560 Dec 10 12:01 .mew-2.1/
drwxrwxr-x 3 masuda masutaka 2560 Dec 12 10:47 .mew-2.1.52/
drwxrwxr-x 3 masuda masutaka 2560 Dec 13 18:55 .mew-3.0.50/
lrwxrwxrwx 1 masuda masutaka 11 Dec 14 10:10 mew -&gt; .mew-3.0.50/
しても意味ないってこと？
そのバージョンに問題があったらリンク先を変えればいいと思ったんだけど。。。
(/usr/local/bin/mew.*を)インストールし直さないといけないのね。]]></description>
        </item>
        <item>
            <title><![CDATA[rcp の罠]]></title>
            <link>https://masutaka.net/2002-01-08-2/</link>
            <guid>https://masutaka.net/2002-01-08-2/</guid>
            <pubDate>Tue, 08 Jan 2002 01:00:00 GMT</pubDate>
            <description><![CDATA[ローカルとリモートでアクセス権が異なる場合、
-pオプションを付けると更新内容が反映されない場合がある。]]></description>
        </item>
        <item>
            <title><![CDATA[MAC アドレスの調べ方]]></title>
            <link>https://masutaka.net/2002-01-08-1/</link>
            <guid>https://masutaka.net/2002-01-08-1/</guid>
            <pubDate>Tue, 08 Jan 2002 00:00:00 GMT</pubDate>
            <description><![CDATA[Windows2000
コマンドプロンプトを開いて、「ipconfig /all」を実行。
表示された Physical Address が MAC アドレス。]]></description>
        </item>
        <item>
            <title><![CDATA[本物の symlinkを使う。]]></title>
            <link>https://masutaka.net/2002-01-07-1/</link>
            <guid>https://masutaka.net/2002-01-07-1/</guid>
            <pubDate>Mon, 07 Jan 2002 00:00:00 GMT</pubDate>
            <description><![CDATA[set CYGWIN=nowinsymlinks]]></description>
        </item>
        <item>
            <title><![CDATA[ファイルローグ]]></title>
            <link>https://masutaka.net/2002-01-06-1/</link>
            <guid>https://masutaka.net/2002-01-06-1/</guid>
            <pubDate>Sun, 06 Jan 2002 00:00:00 GMT</pubDate>
            <description><![CDATA[http://www.filerogue.net/ ]]></description>
        </item>
        <item>
            <title><![CDATA[diary]]></title>
            <link>https://masutaka.net/2002-01-05-1/</link>
            <guid>https://masutaka.net/2002-01-05-1/</guid>
            <pubDate>Sat, 05 Jan 2002 00:00:00 GMT</pubDate>
            <description><![CDATA[浜松から戻ってきた。やっぱり疲れた。]]></description>
        </item>
        <item>
            <title><![CDATA[diary]]></title>
            <link>https://masutaka.net/2002-01-01-2/</link>
            <guid>https://masutaka.net/2002-01-01-2/</guid>
            <pubDate>Tue, 01 Jan 2002 01:00:00 GMT</pubDate>
            <description><![CDATA[というわけで、盛岡から戻ってきた。
まさか、(ショート)スキーまですることになるとは思わなかったな。
夕方までには浜松に行く。]]></description>
        </item>
        <item>
            <title><![CDATA[INOUE's Home Page (Emacs20情報(cc-mode))]]></title>
            <link>https://masutaka.net/2002-01-01-1/</link>
            <guid>https://masutaka.net/2002-01-01-1/</guid>
            <pubDate>Tue, 01 Jan 2002 00:00:00 GMT</pubDate>
            <description><![CDATA[http://www.ainet.or.jp/~inoue/index.html http://home.catv.ne.jp/pp/ginoue/ に引っ越すかも。]]></description>
        </item>
        <item>
            <title><![CDATA[diary]]></title>
            <link>https://masutaka.net/2001-12-30-10/</link>
            <guid>https://masutaka.net/2001-12-30-10/</guid>
            <pubDate>Sun, 30 Dec 2001 09:00:00 GMT</pubDate>
            <description><![CDATA[横着プログラミングの ChangeLogメモを見て始めた。
今日は徹夜になりそう。で、そのまま盛岡に行く。。]]></description>
        </item>
        <item>
            <title><![CDATA[発明]]></title>
            <link>https://masutaka.net/2001-12-30-9/</link>
            <guid>https://masutaka.net/2001-12-30-9/</guid>
            <pubDate>Sun, 30 Dec 2001 08:00:00 GMT</pubDate>
            <description><![CDATA[私は、&ldquo;必要は発明の母&quot;だとは思わない。私の考えでは、
発明とは、まずもって怠惰から、そして無精からも生ま
れるものである。手間を省くために、だ。
- アガサ・クリスティー
Agatha Christie, An Autobiography, Collins, 1977 (邦訳:
「アガサ・クリスティー自伝」乾 信一郎訳、早川書房、1978年)]]></description>
        </item>
        <item>
            <title><![CDATA[car と cdr の語源]]></title>
            <link>https://masutaka.net/2001-12-30-8/</link>
            <guid>https://masutaka.net/2001-12-30-8/</guid>
            <pubDate>Sun, 30 Dec 2001 07:00:00 GMT</pubDate>
            <description><![CDATA[car(カー): Contents of the Address part of the Register' cdr(クダー): Contents of the Decrement part of the Register'
これらのフレーズは、Lisp が開発された頃の極めて初期のハードウェアの
特定の部分に基づくものであるが、単に時代遅れであるというだけでなく、
実に 25年以上もの間、Lisp に関わる人々にとって全く見当はずれのものであった。
だがしかし、これらの関数をもっと合理的な名前で呼ぼうとした学者も
何人かいたにも関わらず、現在でもこの古い用語が使われている。]]></description>
        </item>
        <item>
            <title><![CDATA[SKK-JISYO.Lが置いてある場所]]></title>
            <link>https://masutaka.net/2001-12-30-7/</link>
            <guid>https://masutaka.net/2001-12-30-7/</guid>
            <pubDate>Sun, 30 Dec 2001 06:00:00 GMT</pubDate>
            <description><![CDATA[http://openlab.ring.gr.jp/skk/dic/ ]]></description>
        </item>
        <item>
            <title><![CDATA[Emacs のコンパイル、インストール]]></title>
            <link>https://masutaka.net/2001-12-30-6/</link>
            <guid>https://masutaka.net/2001-12-30-6/</guid>
            <pubDate>Sun, 30 Dec 2001 05:00:00 GMT</pubDate>
            <description><![CDATA[URL: http://emacs-20.ki.nu/   Emacs20 のソース
ftp://ftp.iij.ad.jp/pub/GNU/emacs/emacs-20.7.tar.gz ftp://ftp.iij.ad.jp/pub/GNU/emacs/leim-20.7.tar.gz ftp://ftp.ki.nu/pub/emcws/emcws-20.7-20011002.gz   Emacs21 のソース
ftp://ftp.iij.ad.jp/pub/GNU/emacs/emacs-21.1.tar.gz ftp://ftp.iij.ad.jp/pub/GNU/emacs/leim-21.1.tar.gz ftp://ftp.ki.nu/pub/emcws/emcws-21.1-20011024.gz   apel, flim, semi のソース
ftp://ftp.m17n.org/pub/mule/apel/apel-10.3.tar.gz ftp://ftp.m17n.org/pub/mule/flim/flim-1.14/flim-1.14.3.tar.gz ftp://ftp.m17n.org/pub/mule/semi/semi-1.14-for-flim-1.14/flim-1.14.3.tar.gz   コンパイル＆インストール
|% setenv SITELISP /usr/local/share/emacs/site-lisp
|% setenv EMACS emcws
|% gtar xvzf emacs-20.7.tar.gz
|% zcat emcws-20.7-20011002.gz | /usr/local/bin/patch -s -p0
|% mkdir work ; cd work
|% ../emacs-20.7/configure |&ndash;with-wnn6 |&ndash;with-wnn-includes=/usr/lib/locale/ja/wnn/demo/include/wnn |&ndash;with-wnn-libraries=/usr/lib/locale/ja/wnn/demo/lib |&ndash;x-includes=/usr/openwin/include |&ndash;x-libraries=/usr/openwin/lib
|% make
|% make install
  ]]></description>
        </item>
        <item>
            <title><![CDATA[clgrep -- ChangeLog メモ用の grep]]></title>
            <link>https://masutaka.net/2001-12-30-5/</link>
            <guid>https://masutaka.net/2001-12-30-5/</guid>
            <pubDate>Sun, 30 Dec 2001 04:00:00 GMT</pubDate>
            <description><![CDATA[|usage: clgrep [OPTIONS]  [FILE]&hellip;
|-i, 大文字・小文字を区別しない
|-r, 検索結果を逆順に表示する
URL: http://0xcc.net/unimag/1/ ]]></description>
        </item>
        <item>
            <title><![CDATA[Tabだけの行を削除]]></title>
            <link>https://masutaka.net/2001-12-30-4/</link>
            <guid>https://masutaka.net/2001-12-30-4/</guid>
            <pubDate>Sun, 30 Dec 2001 03:00:00 GMT</pubDate>
            <description><![CDATA[M-x query-replace-regexp [RET] &ldquo;^[TAB]+$&rdquo; [RET] &quot;&quot; [RET]]]></description>
        </item>
        <item>
            <title><![CDATA[検索文字列に一致するバッファ内の各行の一覧を表示する。]]></title>
            <link>https://masutaka.net/2001-12-30-3/</link>
            <guid>https://masutaka.net/2001-12-30-3/</guid>
            <pubDate>Sun, 30 Dec 2001 02:00:00 GMT</pubDate>
            <description><![CDATA[M-x occur [RET] REGEXP [RET]]]></description>
        </item>
        <item>
            <title><![CDATA[crontab -- 指定した時刻にスクリプトを動かす。]]></title>
            <link>https://masutaka.net/2001-12-30-2/</link>
            <guid>https://masutaka.net/2001-12-30-2/</guid>
            <pubDate>Sun, 30 Dec 2001 01:00:00 GMT</pubDate>
            <description><![CDATA[-l, そのユーザが利用している crontabの内容を出力
-e, 自分自身の crontabを編集]]></description>
        </item>
        <item>
            <title><![CDATA[高林哲の Web サイト]]></title>
            <link>https://masutaka.net/2001-12-30-1/</link>
            <guid>https://masutaka.net/2001-12-30-1/</guid>
            <pubDate>Sun, 30 Dec 2001 00:00:00 GMT</pubDate>
            <description><![CDATA[Unix Magazine連載: 横着プログラミング、電子辞書オープンラボ
URL: http://namazu.org/~satoru/ ]]></description>
        </item>
        <item>
            <title><![CDATA[Search]]></title>
            <link>https://masutaka.net/search/</link>
            <guid>https://masutaka.net/search/</guid>
            <pubDate>Mon, 01 Jan 2001 00:00:00 GMT</pubDate>
            <description><![CDATA[ ]]></description>
        </item>
    </channel>
</rss>